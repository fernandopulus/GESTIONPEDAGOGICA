var lAe=Object.defineProperty;var cAe=(e,t,r)=>t in e?lAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var SB=(e,t,r)=>cAe(e,typeof t!="symbol"?t+"":t,r);function uAe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var vdt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dAe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var NB={exports:{}},pb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CU;function AAe(){if(CU)return pb;CU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return pb.Fragment=t,pb.jsx=r,pb.jsxs=r,pb}var _U;function fAe(){return _U||(_U=1,NB.exports=AAe()),NB.exports}var c=fAe(),kB={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU;function hAe(){if(SU)return cn;SU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(q,re,P){this.props=q,this.context=re,this.refs=v,this.updater=P||p}b.prototype.isReactComponent={},b.prototype.setState=function(q,re){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,re,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function y(){}y.prototype=b.prototype;function C(q,re,P){this.props=q,this.context=re,this.refs=v,this.updater=P||p}var S=C.prototype=new y;S.constructor=C,g(S,b.prototype),S.isPureReactComponent=!0;var I=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function w(q,re,P,K,Y,te){return P=te.ref,{$$typeof:e,type:q,key:re,ref:P!==void 0?P:null,props:te}}function _(q,re){return w(q.type,re,void 0,void 0,void 0,q.props)}function F(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function U(q){var re={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(P){return re[P]})}var D=/\/+/g;function k(q,re){return typeof q=="object"&&q!==null&&q.key!=null?U(""+q.key):re.toString(36)}function L(){}function R(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(L,L):(q.status="pending",q.then(function(re){q.status==="pending"&&(q.status="fulfilled",q.value=re)},function(re){q.status==="pending"&&(q.status="rejected",q.reason=re)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,re,P,K,Y){var te=typeof q;(te==="undefined"||te==="boolean")&&(q=null);var ie=!1;if(q===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(q.$$typeof){case e:case t:ie=!0;break;case d:return ie=q._init,X(ie(q._payload),re,P,K,Y)}}if(ie)return Y=Y(q),ie=K===""?"."+k(q,0):K,I(Y)?(P="",ie!=null&&(P=ie.replace(D,"$&/")+"/"),X(Y,re,P,"",function(ce){return ce})):Y!=null&&(F(Y)&&(Y=_(Y,P+(Y.key==null||q&&q.key===Y.key?"":(""+Y.key).replace(D,"$&/")+"/")+ie)),re.push(Y)),1;ie=0;var Ae=K===""?".":K+":";if(I(q))for(var oe=0;oe<q.length;oe++)K=q[oe],te=Ae+k(K,oe),ie+=X(K,re,P,te,Y);else if(oe=h(q),typeof oe=="function")for(q=oe.call(q),oe=0;!(K=q.next()).done;)K=K.value,te=Ae+k(K,oe++),ie+=X(K,re,P,te,Y);else if(te==="object"){if(typeof q.then=="function")return X(R(q),re,P,K,Y);throw re=String(q),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ie}function V(q,re,P){if(q==null)return q;var K=[],Y=0;return X(q,K,"","",function(te){return re.call(P,te,Y++)}),K}function Z(q){if(q._status===-1){var re=q._result;re=re(),re.then(function(P){(q._status===0||q._status===-1)&&(q._status=1,q._result=P)},function(P){(q._status===0||q._status===-1)&&(q._status=2,q._result=P)}),q._status===-1&&(q._status=0,q._result=re)}if(q._status===1)return q._result.default;throw q._result}var H=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function z(){}return cn.Children={map:V,forEach:function(q,re,P){V(q,function(){re.apply(this,arguments)},P)},count:function(q){var re=0;return V(q,function(){re++}),re},toArray:function(q){return V(q,function(re){return re})||[]},only:function(q){if(!F(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},cn.Component=b,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=C,cn.StrictMode=n,cn.Suspense=l,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,cn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return N.H.useMemoCache(q)}},cn.cache=function(q){return function(){return q.apply(null,arguments)}},cn.cloneElement=function(q,re,P){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var K=g({},q.props),Y=q.key,te=void 0;if(re!=null)for(ie in re.ref!==void 0&&(te=void 0),re.key!==void 0&&(Y=""+re.key),re)!B.call(re,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&re.ref===void 0||(K[ie]=re[ie]);var ie=arguments.length-2;if(ie===1)K.children=P;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];K.children=Ae}return w(q.type,Y,void 0,void 0,te,K)},cn.createContext=function(q){return q={$$typeof:i,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},cn.createElement=function(q,re,P){var K,Y={},te=null;if(re!=null)for(K in re.key!==void 0&&(te=""+re.key),re)B.call(re,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Y[K]=re[K]);var ie=arguments.length-2;if(ie===1)Y.children=P;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];Y.children=Ae}if(q&&q.defaultProps)for(K in ie=q.defaultProps,ie)Y[K]===void 0&&(Y[K]=ie[K]);return w(q,te,void 0,void 0,null,Y)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(q){return{$$typeof:o,render:q}},cn.isValidElement=F,cn.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:Z}},cn.memo=function(q,re){return{$$typeof:u,type:q,compare:re===void 0?null:re}},cn.startTransition=function(q){var re=N.T,P={};N.T=P;try{var K=q(),Y=N.S;Y!==null&&Y(P,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(z,H)}catch(te){H(te)}finally{N.T=re}},cn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},cn.use=function(q){return N.H.use(q)},cn.useActionState=function(q,re,P){return N.H.useActionState(q,re,P)},cn.useCallback=function(q,re){return N.H.useCallback(q,re)},cn.useContext=function(q){return N.H.useContext(q)},cn.useDebugValue=function(){},cn.useDeferredValue=function(q,re){return N.H.useDeferredValue(q,re)},cn.useEffect=function(q,re,P){var K=N.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(q,re)},cn.useId=function(){return N.H.useId()},cn.useImperativeHandle=function(q,re,P){return N.H.useImperativeHandle(q,re,P)},cn.useInsertionEffect=function(q,re){return N.H.useInsertionEffect(q,re)},cn.useLayoutEffect=function(q,re){return N.H.useLayoutEffect(q,re)},cn.useMemo=function(q,re){return N.H.useMemo(q,re)},cn.useOptimistic=function(q,re){return N.H.useOptimistic(q,re)},cn.useReducer=function(q,re,P){return N.H.useReducer(q,re,P)},cn.useRef=function(q){return N.H.useRef(q)},cn.useState=function(q){return N.H.useState(q)},cn.useSyncExternalStore=function(q,re,P){return N.H.useSyncExternalStore(q,re,P)},cn.useTransition=function(){return N.H.useTransition()},cn.version="19.1.1",cn}var NU;function Yx(){return NU||(NU=1,kB.exports=hAe()),kB.exports}var T=Yx();const lt=yl(T),mAe=uAe({__proto__:null,default:lt},[T]);var BB={exports:{}},gb={},TB={exports:{}},jB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kU;function pAe(){return kU||(kU=1,function(e){function t(V,Z){var H=V.length;V.push(Z);e:for(;0<H;){var z=H-1>>>1,q=V[z];if(0<a(q,Z))V[z]=Z,V[H]=q,H=z;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var Z=V[0],H=V.pop();if(H!==Z){V[0]=H;e:for(var z=0,q=V.length,re=q>>>1;z<re;){var P=2*(z+1)-1,K=V[P],Y=P+1,te=V[Y];if(0>a(K,H))Y<q&&0>a(te,K)?(V[z]=te,V[Y]=H,z=Y):(V[z]=K,V[P]=H,z=P);else if(Y<q&&0>a(te,H))V[z]=te,V[Y]=H,z=Y;else break e}}return Z}function a(V,Z){var H=V.sortIndex-Z.sortIndex;return H!==0?H:V.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function I(V){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=V)n(u),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=r(u)}}function N(V){if(v=!1,I(V),!g)if(r(l)!==null)g=!0,B||(B=!0,k());else{var Z=r(u);Z!==null&&X(N,Z.startTime-V)}}var B=!1,w=-1,_=5,F=-1;function U(){return b?!0:!(e.unstable_now()-F<_)}function D(){if(b=!1,B){var V=e.unstable_now();F=V;var Z=!0;try{e:{g=!1,v&&(v=!1,C(w),w=-1),p=!0;var H=h;try{t:{for(I(V),f=r(l);f!==null&&!(f.expirationTime>V&&U());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var q=z(f.expirationTime<=V);if(V=e.unstable_now(),typeof q=="function"){f.callback=q,I(V),Z=!0;break t}f===r(l)&&n(l),I(V)}else n(l);f=r(l)}if(f!==null)Z=!0;else{var re=r(u);re!==null&&X(N,re.startTime-V),Z=!1}}break e}finally{f=null,h=H,p=!1}Z=void 0}}finally{Z?k():B=!1}}}var k;if(typeof S=="function")k=function(){S(D)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=D,k=function(){R.postMessage(null)}}else k=function(){y(D,0)};function X(V,Z){w=y(function(){V(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var H=h;h=Z;try{return V()}finally{h=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var H=h;h=V;try{return Z()}finally{h=H}},e.unstable_scheduleCallback=function(V,Z,H){var z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,V){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,V={id:d++,callback:Z,priorityLevel:V,startTime:H,expirationTime:q,sortIndex:-1},H>z?(V.sortIndex=H,t(u,V),r(l)===null&&V===r(u)&&(v?(C(w),w=-1):v=!0,X(N,H-z))):(V.sortIndex=q,t(l,V),g||p||(g=!0,B||(B=!0,k()))),V},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(V){var Z=h;return function(){var H=h;h=Z;try{return V.apply(this,arguments)}finally{h=H}}}}(jB)),jB}var BU;function gAe(){return BU||(BU=1,TB.exports=pAe()),TB.exports}var IB={exports:{}},jo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TU;function vAe(){if(TU)return jo;TU=1;var e=Yx();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return jo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jo.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(l,u,null,d)},jo.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},jo.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},jo.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},jo.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(l,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},jo.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},jo.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},jo.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},jo.requestFormReset=function(l){n.d.r(l)},jo.unstable_batchedUpdates=function(l,u){return l(u)},jo.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},jo.useFormStatus=function(){return i.H.useHostTransitionStatus()},jo.version="19.1.1",jo}var jU;function sX(){if(jU)return IB.exports;jU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),IB.exports=vAe(),IB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IU;function xAe(){if(IU)return gb;IU=1;var e=gAe(),t=Yx(),r=sX();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,x=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(x=m.return),A=m.return;while(A)}return m.tag===3?x:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var x=A,E=m;;){var M=x.return;if(M===null)break;var G=M.alternate;if(G===null){if(E=M.return,E!==null){x=E;continue}break}if(M.child===G.child){for(G=M.child;G;){if(G===x)return o(M),A;if(G===E)return o(M),m;G=G.sibling}throw Error(n(188))}if(x.return!==E.return)x=M,E=G;else{for(var le=!1,be=M.child;be;){if(be===x){le=!0,x=M,E=G;break}if(be===E){le=!0,E=M,x=G;break}be=be.sibling}if(!le){for(be=G.child;be;){if(be===x){le=!0,x=G,E=M;break}if(be===E){le=!0,E=G,x=M;break}be=be.sibling}if(!le)throw Error(n(189))}}if(x.alternate!==E)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),S=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var L=Symbol.for("react.client.reference");function R(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===L?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case N:return"Suspense";case B:return"SuspenseList";case F:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case S:return(A.displayName||"Context")+".Provider";case C:return(A._context.displayName||"Context")+".Consumer";case I:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case w:return m=A.displayName||null,m!==null?m:R(A.type)||"Memo";case _:m=A._payload,A=A._init;try{return R(A(m))}catch{}}return null}var X=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],q=-1;function re(A){return{current:A}}function P(A){0>q||(A.current=z[q],z[q]=null,q--)}function K(A,m){q++,z[q]=A.current,A.current=m}var Y=re(null),te=re(null),ie=re(null),Ae=re(null);function oe(A,m){switch(K(ie,m),K(te,A),K(Y,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?JM(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=JM(m),A=ZM(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(Y),K(Y,A)}function ce(){P(Y),P(te),P(ie)}function pe(A){A.memoizedState!==null&&K(Ae,A);var m=Y.current,x=ZM(m,A.type);m!==x&&(K(te,A),K(Y,x))}function Ie(A){te.current===A&&(P(Y),P(te)),Ae.current===A&&(P(Ae),db._currentValue=H)}var ne=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,_e=e.unstable_shouldYield,he=e.unstable_requestPaint,je=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ot=e.unstable_setDisableYieldValue,mt=null,Tt=null;function Mt(A){if(typeof Ze=="function"&&ot(A),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(mt,A)}catch{}}var Ot=Math.clz32?Math.clz32:Nr,Qt=Math.log,bt=Math.LN2;function Nr(A){return A>>>=0,A===0?32:31-(Qt(A)/bt|0)|0}var rr=256,an=4194304;function Cr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Vr(A,m,x){var E=A.pendingLanes;if(E===0)return 0;var M=0,G=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var be=E&134217727;return be!==0?(E=be&~G,E!==0?M=Cr(E):(le&=be,le!==0?M=Cr(le):x||(x=be&~A,x!==0&&(M=Cr(x))))):(be=E&~G,be!==0?M=Cr(be):le!==0?M=Cr(le):x||(x=E&~A,x!==0&&(M=Cr(x)))),M===0?0:m!==0&&m!==M&&(m&G)===0&&(G=M&-M,x=m&-m,G>=x||G===32&&(x&4194048)!==0)?m:M}function Fn(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Ir(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var A=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),A}function pt(){var A=an;return an<<=1,(an&62914560)===0&&(an=4194304),A}function Je(A){for(var m=[],x=0;31>x;x++)m.push(A);return m}function gt(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function dt(A,m,x,E,M,G){var le=A.pendingLanes;A.pendingLanes=x,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=x,A.entangledLanes&=x,A.errorRecoveryDisabledLanes&=x,A.shellSuspendCounter=0;var be=A.entanglements,Re=A.expirationTimes,it=A.hiddenUpdates;for(x=le&~x;0<x;){var Ct=31-Ot(x),It=1<<Ct;be[Ct]=0,Re[Ct]=-1;var At=it[Ct];if(At!==null)for(it[Ct]=null,Ct=0;Ct<At.length;Ct++){var ft=At[Ct];ft!==null&&(ft.lane&=-536870913)}x&=~It}E!==0&&Dt(A,E,0),G!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=G&~(le&~m))}function Dt(A,m,x){A.pendingLanes|=m,A.suspendedLanes&=~m;var E=31-Ot(m);A.entangledLanes|=m,A.entanglements[E]=A.entanglements[E]|1073741824|x&4194090}function zt(A,m){var x=A.entangledLanes|=m;for(A=A.entanglements;x;){var E=31-Ot(x),M=1<<E;M&m|A[E]&m&&(A[E]|=m),x&=~M}}function Pr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Xr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function gn(){var A=Z.p;return A!==0?A:(A=window.event,A===void 0?32:vU(A.type))}function vn(A,m){var x=Z.p;try{return Z.p=A,m()}finally{Z.p=x}}var $t=Math.random().toString(36).slice(2),rn="__reactFiber$"+$t,en="__reactProps$"+$t,cr="__reactContainer$"+$t,Yr="__reactEvents$"+$t,ra="__reactListeners$"+$t,fe="__reactHandles$"+$t,Be="__reactResources$"+$t,Ee="__reactMarker$"+$t;function Ce(A){delete A[rn],delete A[en],delete A[Yr],delete A[ra],delete A[fe]}function Ne(A){var m=A[rn];if(m)return m;for(var x=A.parentNode;x;){if(m=x[cr]||x[rn]){if(x=m.alternate,m.child!==null||x!==null&&x.child!==null)for(A=nU(A);A!==null;){if(x=A[rn])return x;A=nU(A)}return m}A=x,x=A.parentNode}return null}function Te(A){if(A=A[rn]||A[cr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Ye(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function ut(A){var m=A[Be];return m||(m=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ee]=!0}var tt=new Set,at={};function jt(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(at[A]=m,A=0;A<m.length;A++)tt.add(m[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function _r(A){return ne.call(Gt,A)?!0:ne.call(Ht,A)?!1:Jt.test(A)?Gt[A]=!0:(Ht[A]=!0,!1)}function sn(A,m,x){if(_r(m))if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var E=m.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+x)}}function on(A,m,x){if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+x)}}function An(A,m,x,E){if(E===null)A.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(x);return}A.setAttributeNS(m,x,""+E)}}var hs,bo;function ms(A){if(hs===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);hs=m&&m[1]||"",bo=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+A+bo}var Zs=!1;function Fs(A,m){if(!A||Zs)return"";Zs=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(m){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(ft){var At=ft}Reflect.construct(A,[],It)}else{try{It.call()}catch(ft){At=ft}A.call(It.prototype)}}else{try{throw Error()}catch(ft){At=ft}(It=A())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(ft){if(ft&&At&&typeof ft.stack=="string")return[ft.stack,At.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=E.DetermineComponentFrameRoot(),le=G[0],be=G[1];if(le&&be){var Re=le.split(`
`),it=be.split(`
`);for(M=E=0;E<Re.length&&!Re[E].includes("DetermineComponentFrameRoot");)E++;for(;M<it.length&&!it[M].includes("DetermineComponentFrameRoot");)M++;if(E===Re.length||M===it.length)for(E=Re.length-1,M=it.length-1;1<=E&&0<=M&&Re[E]!==it[M];)M--;for(;1<=E&&0<=M;E--,M--)if(Re[E]!==it[M]){if(E!==1||M!==1)do if(E--,M--,0>M||Re[E]!==it[M]){var Ct=`
`+Re[E].replace(" at new "," at ");return A.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",A.displayName)),Ct}while(1<=E&&0<=M);break}}}finally{Zs=!1,Error.prepareStackTrace=x}return(x=A?A.displayName||A.name:"")?ms(x):""}function gi(A){switch(A.tag){case 26:case 27:case 5:return ms(A.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return Fs(A.type,!1);case 11:return Fs(A.type.render,!1);case 1:return Fs(A.type,!0);case 31:return ms("Activity");default:return""}}function xa(A){try{var m="";do m+=gi(A),A=A.return;while(A);return m}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ei(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Pd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Nh(A){var m=Pd(A)?"checked":"value",x=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),E=""+A[m];if(!A.hasOwnProperty(m)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var M=x.get,G=x.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return M.call(this)},set:function(le){E=""+le,G.call(this,le)}}),Object.defineProperty(A,m,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(le){E=""+le},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Hc(A){A._valueTracker||(A._valueTracker=Nh(A))}function YA(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var x=m.getValue(),E="";return A&&(E=Pd(A)?A.checked?"true":"false":A.value),A=E,A!==x?(m.setValue(A),!0):!1}function vi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Ld=/[\n"\\]/g;function On(A){return A.replace(Ld,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,x,E,M,G,le,be){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),m!=null?le==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+ei(m)):A.value!==""+ei(m)&&(A.value=""+ei(m)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),m!=null?zc(A,le,ei(m)):x!=null?zc(A,le,ei(x)):E!=null&&A.removeAttribute("value"),M==null&&G!=null&&(A.defaultChecked=!!G),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+ei(be):A.removeAttribute("name")}function Vc(A,m,x,E,M,G,le,be){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(A.type=G),m!=null||x!=null){if(!(G!=="submit"&&G!=="reset"||m!=null))return;x=x!=null?""+ei(x):"",m=m!=null?""+ei(m):x,be||m===A.value||(A.value=m),A.defaultValue=m}E=E??M,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=be?A.checked:!!E,A.defaultChecked=!!E,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function zc(A,m,x){m==="number"&&vi(A.ownerDocument)===A||A.defaultValue===""+x||(A.defaultValue=""+x)}function El(A,m,x,E){if(A=A.options,m){m={};for(var M=0;M<x.length;M++)m["$"+x[M]]=!0;for(x=0;x<A.length;x++)M=m.hasOwnProperty("$"+A[x].value),A[x].selected!==M&&(A[x].selected=M),M&&E&&(A[x].defaultSelected=!0)}else{for(x=""+ei(x),m=null,M=0;M<A.length;M++){if(A[M].value===x){A[M].selected=!0,E&&(A[M].defaultSelected=!0);return}m!==null||A[M].disabled||(m=A[M])}m!==null&&(m.selected=!0)}}function Vn(A,m,x){if(m!=null&&(m=""+ei(m),m!==A.value&&(A.value=m),x==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=x!=null?""+ei(x):""}function $c(A,m,x,E){if(m==null){if(E!=null){if(x!=null)throw Error(n(92));if(X(E)){if(1<E.length)throw Error(n(93));E=E[0]}x=E}x==null&&(x=""),m=x}x=ei(m),A.defaultValue=x,E=A.textContent,E===x&&E!==""&&E!==null&&(A.value=E)}function yo(A,m){if(m){var x=A.firstChild;if(x&&x===A.lastChild&&x.nodeType===3){x.nodeValue=m;return}}A.textContent=m}var rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kh(A,m,x){var E=m.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":E?A.setProperty(m,x):typeof x!="number"||x===0||rc.has(m)?m==="float"?A.cssFloat=x:A[m]=(""+x).trim():A[m]=x+"px"}function JA(A,m,x){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||m!=null&&m.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var M in m)E=m[M],m.hasOwnProperty(M)&&x[M]!==E&&kh(A,M,E)}else for(var G in m)m.hasOwnProperty(G)&&kh(A,G,m[G])}function ZA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Md=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ac(A){return Md.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Cl=null;function ua(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var sc=null,_l=null;function Br(A){var m=Te(A);if(m&&(A=m.stateNode)){var x=A[en]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),m=x.name,x.type==="radio"&&m!=null){for(x=A;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+On(""+m)+'"][type="radio"]'),m=0;m<x.length;m++){var E=x[m];if(E!==A&&E.form===A.form){var M=E[en]||null;if(!M)throw Error(n(90));xi(E,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<x.length;m++)E=x[m],E.form===A.form&&YA(E)}break e;case"textarea":Vn(A,x.value,x.defaultValue);break e;case"select":m=x.value,m!=null&&El(A,!!x.multiple,m,!1)}}}var Sl=!1;function Bh(A,m,x){if(Sl)return A(m,x);Sl=!0;try{var E=A(m);return E}finally{if(Sl=!1,(sc!==null||_l!==null)&&(dE(),sc&&(m=sc,A=_l,_l=sc=null,Br(m),A)))for(m=0;m<A.length;m++)Br(A[m])}}function Ii(A,m){var x=A.stateNode;if(x===null)return null;var E=x[en]||null;if(E===null)return null;x=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(x&&typeof x!="function")throw Error(n(231,m,typeof x));return x}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if(wo)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{ro=!1}var Eo=null,Gc=null,ic=null;function ef(){if(ic)return ic;var A,m=Gc,x=m.length,E,M="value"in Eo?Eo.value:Eo.textContent,G=M.length;for(A=0;A<x&&m[A]===M[A];A++);var le=x-A;for(E=1;E<=le&&m[x-E]===M[G-E];E++);return ic=M.slice(A,1<E?1-E:void 0)}function Co(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Fi(){return!0}function kl(){return!1}function ps(A){function m(x,E,M,G,le){this._reactName=x,this._targetInst=M,this.type=E,this.nativeEvent=G,this.target=le,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(x=A[be],this[be]=x?x(G):G[be]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?Fi:kl,this.isPropagationStopped=kl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),m}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=ps(xn),Bl=d({},xn,{view:0,detail:0}),tf=ps(Bl),Mu,Uu,al,Oi=d({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==al&&(al&&A.type==="mousemove"?(Mu=A.screenX-al.screenX,Uu=A.screenY-al.screenY):Uu=Mu=0,al=A),Mu)},movementY:function(A){return"movementY"in A?A.movementY:Uu}}),gs=ps(Oi),Th=d({},Oi,{dataTransfer:0}),qc=ps(Th),bi=d({},Bl,{relatedTarget:0}),Wc=ps(bi),oc=d({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ud=ps(oc),Qu=d({},xn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Qd=ps(Qu),rf=d({},xn,{data:0}),Hu=ps(rf),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Hd[A])?!!m[A]:!1}function Yc(){return zu}var jh=d({},Bl,{key:function(A){if(A.key){var m=Xc[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=Co(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Vu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(A){return A.type==="keypress"?Co(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Co(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),lc=ps(jh),Jc=d({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=ps(Jc),Di=d({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),Vd=ps(Di),W=d({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),de=ps(W),Fe=d({},Oi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ps(Fe),Ge=d({},xn,{newState:0,oldState:0}),xt=ps(Ge),Pt=[9,13,27,32],Zt=wo&&"CompositionEvent"in window,O=null;wo&&"documentMode"in document&&(O=document.documentMode);var ee=wo&&"TextEvent"in window&&!O,se=wo&&(!Zt||O&&8<O&&11>=O),xe=" ",ze=!1;function st(A,m){switch(A){case"keyup":return Pt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Tr=!1;function bn(A,m){switch(A){case"compositionend":return Ut(m);case"keypress":return m.which!==32?null:(ze=!0,xe);case"textInput":return A=m.data,A===xe&&ze?null:A;default:return null}}function Kr(A,m){if(Tr)return A==="compositionend"||!Zt&&st(A,m)?(A=ef(),ic=Gc=Eo=null,Tr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return se&&m.locale!=="ko"?null:m.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function na(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!zn[A.type]:m==="textarea"}function Tl(A,m,x,E){sc?_l?_l.push(E):_l=[E]:sc=E,m=gE(m,"onChange"),0<m.length&&(x=new Kc("onChange","change",null,x,E),A.push({event:x,listeners:m}))}var es=null,_o=null;function Zc(A){KM(A,0)}function zd(A){var m=Ye(A);if(YA(m))return A}function Ih(A,m){if(A==="change")return m}var nf=!1;if(wo){var Os;if(wo){var $d="oninput"in document;if(!$d){var af=document.createElement("div");af.setAttribute("oninput","return;"),$d=typeof af.oninput=="function"}Os=$d}else Os=!1;nf=Os&&(!document.documentMode||9<document.documentMode)}function sf(){es&&(es.detachEvent("onpropertychange",Fh),_o=es=null)}function Fh(A){if(A.propertyName==="value"&&zd(_o)){var m=[];Tl(m,_o,A,ua(A)),Bh(Zc,m)}}function So(A,m,x){A==="focusin"?(sf(),es=m,_o=x,es.attachEvent("onpropertychange",Fh)):A==="focusout"&&sf()}function I1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return zd(_o)}function Bm(A,m){if(A==="click")return zd(m)}function wg(A,m){if(A==="input"||A==="change")return zd(m)}function jl(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ti=typeof Object.is=="function"?Object.is:jl;function Gd(A,m){if(ti(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var x=Object.keys(A),E=Object.keys(m);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var M=x[E];if(!ne.call(m,M)||!ti(A[M],m[M]))return!1}return!0}function Tm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Gu(A,m){var x=Tm(A);A=0;for(var E;x;){if(x.nodeType===3){if(E=A+x.textContent.length,A<=m&&E>=m)return{node:x,offset:m-A};A=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Tm(x)}}function Kd(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?Kd(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function no(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=vi(A.document);m instanceof A.HTMLIFrameElement;){try{var x=typeof m.contentWindow.location.href=="string"}catch{x=!1}if(x)A=m.contentWindow;else break;m=vi(A.document)}return m}function yi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var qd=wo&&"documentMode"in document&&11>=document.documentMode,No=null,cc=null,eu=null,uc=!1;function za(A,m,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;uc||No==null||No!==vi(E)||(E=No,"selectionStart"in E&&yi(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),eu&&Gd(eu,E)||(eu=E,E=gE(cc,"onSelect"),0<E.length&&(m=new Kc("onSelect","select",null,m,x),A.push({event:m,listeners:E}),m.target=No)))}function dc(A,m){var x={};return x[A.toLowerCase()]=m.toLowerCase(),x["Webkit"+A]="webkit"+m,x["Moz"+A]="moz"+m,x}var vs={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionrun:dc("Transition","TransitionRun"),transitionstart:dc("Transition","TransitionStart"),transitioncancel:dc("Transition","TransitionCancel"),transitionend:dc("Transition","TransitionEnd")},ko={},of={};wo&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function tu(A){if(ko[A])return ko[A];if(!vs[A])return A;var m=vs[A],x;for(x in m)if(m.hasOwnProperty(x)&&x in of)return ko[A]=m[x];return A}var Oh=tu("animationend"),Wd=tu("animationiteration"),Xd=tu("animationstart"),Yd=tu("transitionrun"),lf=tu("transitionstart"),Dh=tu("transitioncancel"),Jd=tu("transitionend"),Ku=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function $a(A,m){Ku.set(A,m),jt(m,[A])}var sl=new WeakMap;function hn(A,m){if(typeof A=="object"&&A!==null){var x=sl.get(A);return x!==void 0?x:(m={value:A,source:m,stack:xa(m)},sl.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var mn=[],ba=0,ts=0;function Il(){for(var A=ba,m=ts=ba=0;m<A;){var x=mn[m];mn[m++]=null;var E=mn[m];mn[m++]=null;var M=mn[m];mn[m++]=null;var G=mn[m];if(mn[m++]=null,E!==null&&M!==null){var le=E.pending;le===null?M.next=M:(M.next=le.next,le.next=M),E.pending=M}G!==0&&Eg(x,M,G)}}function Zd(A,m,x,E){mn[ba++]=A,mn[ba++]=m,mn[ba++]=x,mn[ba++]=E,ts|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function eA(A,m,x,E){return Zd(A,m,x,E),uf(A)}function qu(A,m){return Zd(A,null,null,m),uf(A)}function Eg(A,m,x){A.lanes|=x;var E=A.alternate;E!==null&&(E.lanes|=x);for(var M=!1,G=A.return;G!==null;)G.childLanes|=x,E=G.alternate,E!==null&&(E.childLanes|=x),G.tag===22&&(A=G.stateNode,A===null||A._visibility&1||(M=!0)),A=G,G=G.return;return A.tag===3?(G=A.stateNode,M&&m!==null&&(M=31-Ot(x),A=G.hiddenUpdates,E=A[M],E===null?A[M]=[m]:E.push(m),m.lane=x|536870912),G):null}function uf(A){if(50<nb)throw nb=0,Xk=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ri={};function Fl(A,m,x,E){this.tag=A,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(A,m,x,E){return new Fl(A,m,x,E)}function Rh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ru(A,m){var x=A.alternate;return x===null?(x=Ri(A.tag,m,A.key,A.mode),x.elementType=A.elementType,x.type=A.type,x.stateNode=A.stateNode,x.alternate=A,A.alternate=x):(x.pendingProps=m,x.type=A.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=A.flags&65011712,x.childLanes=A.childLanes,x.lanes=A.lanes,x.child=A.child,x.memoizedProps=A.memoizedProps,x.memoizedState=A.memoizedState,x.updateQueue=A.updateQueue,m=A.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=A.sibling,x.index=A.index,x.ref=A.ref,x.refCleanup=A.refCleanup,x}function jm(A,m){A.flags&=65011714;var x=A.alternate;return x===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=x.childLanes,A.lanes=x.lanes,A.child=x.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=x.memoizedProps,A.memoizedState=x.memoizedState,A.updateQueue=x.updateQueue,A.type=x.type,m=x.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function df(A,m,x,E,M,G){var le=0;if(E=A,typeof A=="function")Rh(A)&&(le=1);else if(typeof A=="string")le=Wde(A,x,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case F:return A=Ri(31,x,m,M),A.elementType=F,A.lanes=G,A;case g:return Wu(x.children,M,G,m);case v:le=8,M|=24;break;case b:return A=Ri(12,x,m,M|2),A.elementType=b,A.lanes=G,A;case N:return A=Ri(13,x,m,M),A.elementType=N,A.lanes=G,A;case B:return A=Ri(19,x,m,M),A.elementType=B,A.lanes=G,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case S:le=10;break e;case C:le=9;break e;case I:le=11;break e;case w:le=14;break e;case _:le=16,E=null;break e}le=29,x=Error(n(130,A===null?"null":typeof A,"")),E=null}return m=Ri(le,x,m,M),m.elementType=A,m.type=E,m.lanes=G,m}function Wu(A,m,x,E){return A=Ri(7,A,E,m),A.lanes=x,A}function Cg(A,m,x){return A=Ri(6,A,null,m),A.lanes=x,A}function Im(A,m,x){return m=Ri(4,A.children!==null?A.children:[],A.key,m),m.lanes=x,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var tA=[],Xu=0,Ph=null,_g=0,Ol=[],il=0,Af=null,Yu=1,Ju="";function ff(A,m){tA[Xu++]=_g,tA[Xu++]=Ph,Ph=A,_g=m}function D2(A,m,x){Ol[il++]=Yu,Ol[il++]=Ju,Ol[il++]=Af,Af=A;var E=Yu;A=Ju;var M=32-Ot(E)-1;E&=~(1<<M),x+=1;var G=32-Ot(m)+M;if(30<G){var le=M-M%5;G=(E&(1<<le)-1).toString(32),E>>=le,M-=le,Yu=1<<32-Ot(m)+M|x<<M|E,Ju=G+A}else Yu=1<<G|x<<M|E,Ju=A}function Fm(A){A.return!==null&&(ff(A,1),D2(A,1,0))}function Om(A){for(;A===Ph;)Ph=tA[--Xu],tA[Xu]=null,_g=tA[--Xu],tA[Xu]=null;for(;A===Af;)Af=Ol[--il],Ol[il]=null,Ju=Ol[--il],Ol[il]=null,Yu=Ol[--il],Ol[il]=null}var Ds=null,Ga=null,Un=!1,rA=null,nu=!1,F1=Error(n(519));function hf(A){var m=Error(n(418,""));throw Lh(hn(m,A)),F1}function R2(A){var m=A.stateNode,x=A.type,E=A.memoizedProps;switch(m[rn]=A,m[en]=E,x){case"dialog":Nn("cancel",m),Nn("close",m);break;case"iframe":case"object":case"embed":Nn("load",m);break;case"video":case"audio":for(x=0;x<sb.length;x++)Nn(sb[x],m);break;case"source":Nn("error",m);break;case"img":case"image":case"link":Nn("error",m),Nn("load",m);break;case"details":Nn("toggle",m);break;case"input":Nn("invalid",m),Vc(m,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Hc(m);break;case"select":Nn("invalid",m);break;case"textarea":Nn("invalid",m),$c(m,E.value,E.defaultValue,E.children),Hc(m)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||m.textContent===""+x||E.suppressHydrationWarning===!0||YM(m.textContent,x)?(E.popover!=null&&(Nn("beforetoggle",m),Nn("toggle",m)),E.onScroll!=null&&Nn("scroll",m),E.onScrollEnd!=null&&Nn("scrollend",m),E.onClick!=null&&(m.onclick=vE),m=!0):m=!1,m||hf(A)}function Zu(A){for(Ds=A.return;Ds;)switch(Ds.tag){case 5:case 13:nu=!1;return;case 27:case 3:nu=!0;return;default:Ds=Ds.return}}function ao(A){if(A!==Ds)return!1;if(!Un)return Zu(A),Un=!0,!1;var m=A.tag,x;if((x=m!==3&&m!==27)&&((x=m===5)&&(x=A.type,x=!(x!=="form"&&x!=="button")||AB(A.type,A.memoizedProps)),x=!x),x&&Ga&&hf(A),Zu(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(x=A.data,x==="/$"){if(m===0){Ga=od(A.nextSibling);break e}m--}else x!=="$"&&x!=="$!"&&x!=="$?"||m++;A=A.nextSibling}Ga=null}}else m===27?(m=Ga,t0(A.type)?(A=pB,pB=null,Ga=A):Ga=m):Ga=Ds?od(A.stateNode.nextSibling):null;return!0}function ol(){Ga=Ds=null,Un=!1}function P2(){var A=rA;return A!==null&&(Pl===null?Pl=A:Pl.push.apply(Pl,A),rA=null),A}function Lh(A){rA===null?rA=[A]:rA.push(A)}var au=re(null),ni=null,ed=null;function nA(A,m,x){K(au,m._currentValue),m._currentValue=x}function su(A){A._currentValue=au.current,P(au)}function Sg(A,m,x){for(;A!==null;){var E=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),A===x)break;A=A.return}}function Ng(A,m,x,E){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var G=M.dependencies;if(G!==null){var le=M.child;G=G.firstContext;e:for(;G!==null;){var be=G;G=M;for(var Re=0;Re<m.length;Re++)if(be.context===m[Re]){G.lanes|=x,be=G.alternate,be!==null&&(be.lanes|=x),Sg(G.return,x,A),E||(le=null);break e}G=be.next}}else if(M.tag===18){if(le=M.return,le===null)throw Error(n(341));le.lanes|=x,G=le.alternate,G!==null&&(G.lanes|=x),Sg(le,x,A),le=null}else le=M.child;if(le!==null)le.return=M;else for(le=M;le!==null;){if(le===A){le=null;break}if(M=le.sibling,M!==null){M.return=le.return,le=M;break}le=le.return}M=le}}function Mh(A,m,x,E){A=null;for(var M=m,G=!1;M!==null;){if(!G){if((M.flags&524288)!==0)G=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var le=M.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var be=M.type;ti(M.pendingProps.value,le.value)||(A!==null?A.push(be):A=[be])}}else if(M===Ae.current){if(le=M.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(db):A=[db])}M=M.return}A!==null&&Ng(m,A,x,E),m.flags|=262144}function kg(A){for(A=A.firstContext;A!==null;){if(!ti(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function iu(A){ni=A,ed=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Rs(A){return Bg(ni,A)}function aA(A,m){return ni===null&&iu(A),Bg(A,m)}function Bg(A,m){var x=m._currentValue;if(m={context:m,memoizedValue:x,next:null},ed===null){if(A===null)throw Error(n(308));ed=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else ed=ed.next=m;return x}var yk=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(x,E){A.push(E)}};this.abort=function(){m.aborted=!0,A.forEach(function(x){return x()})}},L2=e.unstable_scheduleCallback,wk=e.unstable_NormalPriority,Ps={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function O1(){return{controller:new yk,data:new Map,refCount:0}}function Dm(A){A.refCount--,A.refCount===0&&L2(wk,function(){A.controller.abort()})}var Rm=null,D1=0,mf=0,td=null;function Ek(A,m){if(Rm===null){var x=Rm=[];D1=0,mf=nB(),td={status:"pending",value:void 0,then:function(E){x.push(E)}}}return D1++,m.then(M2,M2),m}function M2(){if(--D1===0&&Rm!==null){td!==null&&(td.status="fulfilled");var A=Rm;Rm=null,mf=0,td=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function U2(A,m){var x=[],E={status:"pending",value:null,reason:null,then:function(M){x.push(M)}};return A.then(function(){E.status="fulfilled",E.value=m;for(var M=0;M<x.length;M++)(0,x[M])(m)},function(M){for(E.status="rejected",E.reason=M,M=0;M<x.length;M++)(0,x[M])(void 0)}),E}var j=V.S;V.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Ek(A,m),j!==null&&j(A,m)};var Q=re(null);function J(){var A=Q.current;return A!==null?A:ja.pooledCache}function ae(A,m){m===null?K(Q,Q.current):K(Q,m.pool)}function ue(){var A=J();return A===null?null:{parent:Ps._currentValue,pool:A}}var me=Error(n(460)),ge=Error(n(474)),ve=Error(n(542)),we={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function nt(A,m,x){switch(x=A[x],x===void 0?A.push(m):x!==m&&(m.then(Me,Me),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,kt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=ja,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(E){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=E}},function(E){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=E}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,kt(A),A}throw et=m,me}}var et=null;function Ke(){if(et===null)throw Error(n(459));var A=et;return et=null,A}function kt(A){if(A===me||A===ve)throw Error(n(483))}var ht=!1;function Ue(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Et(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Bt(A,m,x){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(Aa&2)!==0){var M=E.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),E.pending=m,m=uf(A),Eg(A,null,x),m}return Zd(A,E,m,x),uf(A)}function St(A,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}function nr(A,m){var x=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var M=null,G=null;if(x=x.firstBaseUpdate,x!==null){do{var le={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};G===null?M=G=le:G=G.next=le,x=x.next}while(x!==null);G===null?M=G=m:G=G.next=m}else M=G=m;x={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:G,shared:E.shared,callbacks:E.callbacks},A.updateQueue=x;return}A=x.lastBaseUpdate,A===null?x.firstBaseUpdate=m:A.next=m,x.lastBaseUpdate=m}var Xt=!1;function pr(){if(Xt){var A=td;if(A!==null)throw A}}function er(A,m,x,E){Xt=!1;var M=A.updateQueue;ht=!1;var G=M.firstBaseUpdate,le=M.lastBaseUpdate,be=M.shared.pending;if(be!==null){M.shared.pending=null;var Re=be,it=Re.next;Re.next=null,le===null?G=it:le.next=it,le=Re;var Ct=A.alternate;Ct!==null&&(Ct=Ct.updateQueue,be=Ct.lastBaseUpdate,be!==le&&(be===null?Ct.firstBaseUpdate=it:be.next=it,Ct.lastBaseUpdate=Re))}if(G!==null){var It=M.baseState;le=0,Ct=it=Re=null,be=G;do{var At=be.lane&-536870913,ft=At!==be.lane;if(ft?(Ln&At)===At:(E&At)===At){At!==0&&At===mf&&(Xt=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var zr=A,jr=be;At=m;var wa=x;switch(jr.tag){case 1:if(zr=jr.payload,typeof zr=="function"){It=zr.call(wa,It,At);break e}It=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=jr.payload,At=typeof zr=="function"?zr.call(wa,It,At):zr,At==null)break e;It=d({},It,At);break e;case 2:ht=!0}}At=be.callback,At!==null&&(A.flags|=64,ft&&(A.flags|=8192),ft=M.callbacks,ft===null?M.callbacks=[At]:ft.push(At))}else ft={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Ct===null?(it=Ct=ft,Re=It):Ct=Ct.next=ft,le|=At;if(be=be.next,be===null){if(be=M.shared.pending,be===null)break;ft=be,be=ft.next,ft.next=null,M.lastBaseUpdate=ft,M.shared.pending=null}}while(!0);Ct===null&&(Re=It),M.baseState=Re,M.firstBaseUpdate=it,M.lastBaseUpdate=Ct,G===null&&(M.shared.lanes=0),Yh|=le,A.lanes=le,A.memoizedState=It}}function Rn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function $n(A,m){var x=A.callbacks;if(x!==null)for(A.callbacks=null,A=0;A<x.length;A++)Rn(x[A],m)}var fn=re(null),ln=re(0);function aa(A,m){A=_f,K(ln,A),K(fn,m),_f=A|m.baseLanes}function Gn(){K(ln,_f),K(fn,fn.current)}function qr(){_f=ln.current,P(fn),P(ln)}var da=0,Sr=null,Lr=null,Dn=null,Pn=!1,ai=!1,Ls=!1,rs=0,ns=0,xs=null,Dl=0;function Kn(){throw Error(n(321))}function bs(A,m){if(m===null)return!1;for(var x=0;x<m.length&&x<A.length;x++)if(!ti(A[x],m[x]))return!1;return!0}function Ac(A,m,x,E,M,G){return da=G,Sr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,V.H=A===null||A.memoizedState===null?j8:I8,Ls=!1,G=x(E,M),Ls=!1,ai&&(G=pf(m,x,E,M)),sA(A),G}function sA(A){V.H=J2;var m=Lr!==null&&Lr.next!==null;if(da=0,Dn=Lr=Sr=null,Pn=!1,ns=0,xs=null,m)throw Error(n(300));A===null||Pi||(A=A.dependencies,A!==null&&kg(A)&&(Pi=!0))}function pf(A,m,x,E){Sr=A;var M=0;do{if(ai&&(xs=null),ns=0,ai=!1,25<=M)throw Error(n(301));if(M+=1,Dn=Lr=null,A.updateQueue!=null){var G=A.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}V.H=ide,G=m(x,E)}while(ai);return G}function iA(){var A=V.H,m=A.useState()[0];return m=typeof m.then=="function"?oA(m):m,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(Sr.flags|=1024),m}function Ta(){var A=rs!==0;return rs=0,A}function Pm(A,m,x){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~x}function Tg(A){if(Pn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Pn=!1}da=0,Dn=Lr=Sr=null,ai=!1,ns=rs=0,xs=null}function so(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Sr.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function Ra(){if(Lr===null){var A=Sr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var m=Dn===null?Sr.memoizedState:Dn.next;if(m!==null)Dn=m,Lr=A;else{if(A===null)throw Sr.alternate===null?Error(n(467)):Error(n(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Dn===null?Sr.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oA(A){var m=ns;return ns+=1,xs===null&&(xs=[]),A=nt(xs,A,m),m=Sr,(Dn===null?m.memoizedState:Dn.next)===null&&(m=m.alternate,V.H=m===null||m.memoizedState===null?j8:I8),A}function Bo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return oA(A);if(A.$$typeof===S)return Rs(A)}throw Error(n(438,String(A)))}function lA(A){var m=null,x=Sr.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var E=Sr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(m={data:E.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=gf(),Sr.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(A),E=0;E<A;E++)x[E]=U;return m.index++,x}function To(A,m){return typeof m=="function"?m(A):m}function Lm(A){var m=Ra();return Uh(m,Lr,A)}function Uh(A,m,x){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=x;var M=A.baseQueue,G=E.pending;if(G!==null){if(M!==null){var le=M.next;M.next=G.next,G.next=le}m.baseQueue=M=G,E.pending=null}if(G=A.baseState,M===null)A.memoizedState=G;else{m=M.next;var be=le=null,Re=null,it=m,Ct=!1;do{var It=it.lane&-536870913;if(It!==it.lane?(Ln&It)===It:(da&It)===It){var At=it.revertLane;if(At===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),It===mf&&(Ct=!0);else if((da&At)===At){it=it.next,At===mf&&(Ct=!0);continue}else It={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=It,le=G):Re=Re.next=It,Sr.lanes|=At,Yh|=At;It=it.action,Ls&&x(G,It),G=it.hasEagerState?it.eagerState:x(G,It)}else At={lane:It,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=At,le=G):Re=Re.next=At,Sr.lanes|=It,Yh|=It;it=it.next}while(it!==null&&it!==m);if(Re===null?le=G:Re.next=be,!ti(G,A.memoizedState)&&(Pi=!0,Ct&&(x=td,x!==null)))throw x;A.memoizedState=G,A.baseState=le,A.baseQueue=Re,E.lastRenderedState=G}return M===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function jg(A){var m=Ra(),x=m.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=A;var E=x.dispatch,M=x.pending,G=m.memoizedState;if(M!==null){x.pending=null;var le=M=M.next;do G=A(G,le.action),le=le.next;while(le!==M);ti(G,m.memoizedState)||(Pi=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),x.lastRenderedState=G}return[G,E]}function Mm(A,m,x){var E=Sr,M=Ra(),G=Un;if(G){if(x===void 0)throw Error(n(407));x=x()}else x=m();var le=!ti((Lr||M).memoizedState,x);le&&(M.memoizedState=x,Pi=!0),M=M.queue;var be=Qh.bind(null,E,M,A);if(zh(2048,8,be,[A]),M.getSnapshot!==m||le||Dn!==null&&Dn.memoizedState.tag&1){if(E.flags|=2048,nd(9,Vm(),Um.bind(null,E,M,x,m),null),ja===null)throw Error(n(349));G||(da&124)!==0||Ig(E,m,x)}return x}function Ig(A,m,x){A.flags|=16384,A={getSnapshot:m,value:x},m=Sr.updateQueue,m===null?(m=gf(),Sr.updateQueue=m,m.stores=[A]):(x=m.stores,x===null?m.stores=[A]:x.push(A))}function Um(A,m,x,E){m.value=x,m.getSnapshot=E,Q2(m)&&H2(A)}function Qh(A,m,x){return x(function(){Q2(m)&&H2(A)})}function Q2(A){var m=A.getSnapshot;A=A.value;try{var x=m();return!ti(A,x)}catch{return!0}}function H2(A){var m=qu(A,2);m!==null&&vc(m,A,2)}function Qm(A){var m=so();if(typeof A=="function"){var x=A;if(A=x(),Ls){Mt(!0);try{x()}finally{Mt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:A},m}function rd(A,m,x,E){return A.baseState=x,Uh(A,Lr,typeof E=="function"?E:To)}function Ck(A,m,x,E,M){if(Y2(A))throw Error(n(485));if(A=m.action,A!==null){var G={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){G.listeners.push(le)}};V.T!==null?x(!0):G.isTransition=!1,E(G),x=m.pending,x===null?(G.next=m.pending=G,V2(m,G)):(G.next=x.next,m.pending=x.next=G)}}function V2(A,m){var x=m.action,E=m.payload,M=A.state;if(m.isTransition){var G=V.T,le={};V.T=le;try{var be=x(M,E),Re=V.S;Re!==null&&Re(le,be),z2(A,m,be)}catch(it){Hh(A,m,it)}finally{V.T=G}}else try{G=x(M,E),z2(A,m,G)}catch(it){Hh(A,m,it)}}function z2(A,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){R1(A,m,E)},function(E){return Hh(A,m,E)}):R1(A,m,x)}function R1(A,m,x){m.status="fulfilled",m.value=x,P1(m),A.state=x,m=A.pending,m!==null&&(x=m.next,x===m?A.pending=null:(x=x.next,m.next=x,V2(A,x)))}function Hh(A,m,x){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do m.status="rejected",m.reason=x,P1(m),m=m.next;while(m!==E)}A.action=null}function P1(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function L1(A,m){return m}function Hm(A,m){if(Un){var x=ja.formState;if(x!==null){e:{var E=Sr;if(Un){if(Ga){t:{for(var M=Ga,G=nu;M.nodeType!==8;){if(!G){M=null;break t}if(M=od(M.nextSibling),M===null){M=null;break t}}G=M.data,M=G==="F!"||G==="F"?M:null}if(M){Ga=od(M.nextSibling),E=M.data==="F!";break e}}hf(E)}E=!1}E&&(m=x[0])}}return x=so(),x.memoizedState=x.baseState=m,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L1,lastRenderedState:m},x.queue=E,x=k8.bind(null,Sr,E),E.dispatch=x,E=Qm(!1),G=_k.bind(null,Sr,!1,E.queue),E=so(),M={state:m,dispatch:null,action:A,pending:null},E.queue=M,x=Ck.bind(null,Sr,M,G,x),M.dispatch=x,E.memoizedState=A,[m,x,!1]}function Fg(A){var m=Ra();return Vh(m,Lr,A)}function Vh(A,m,x){if(m=Uh(A,m,L1)[0],A=Lm(To)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var E=oA(m)}catch(le){throw le===me?ve:le}else E=m;m=Ra();var M=m.queue,G=M.dispatch;return x!==m.memoizedState&&(Sr.flags|=2048,nd(9,Vm(),$2.bind(null,M,x),null)),[E,G,A]}function $2(A,m){A.action=m}function G2(A){var m=Ra(),x=Lr;if(x!==null)return Vh(m,x,A);Ra(),m=m.memoizedState,x=Ra();var E=x.queue.dispatch;return x.memoizedState=A,[m,E,!1]}function nd(A,m,x,E){return A={tag:A,create:x,deps:E,inst:m,next:null},m=Sr.updateQueue,m===null&&(m=gf(),Sr.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=A.next=A:(E=x.next,x.next=A,A.next=E,m.lastEffect=A),A}function Vm(){return{destroy:void 0,resource:void 0}}function Og(){return Ra().memoizedState}function fc(A,m,x,E){var M=so();E=E===void 0?null:E,Sr.flags|=A,M.memoizedState=nd(1|m,Vm(),x,E)}function zh(A,m,x,E){var M=Ra();E=E===void 0?null:E;var G=M.memoizedState.inst;Lr!==null&&E!==null&&bs(E,Lr.memoizedState.deps)?M.memoizedState=nd(m,G,x,E):(Sr.flags|=A,M.memoizedState=nd(1|m,G,x,E))}function M1(A,m){fc(8390656,8,A,m)}function K2(A,m){zh(2048,8,A,m)}function U1(A,m){return zh(4,2,A,m)}function vf(A,m){return zh(4,4,A,m)}function q2(A,m){if(typeof m=="function"){A=A();var x=m(A);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function Q1(A,m,x){x=x!=null?x.concat([A]):null,zh(4,4,q2.bind(null,m,A),x)}function H1(){}function V1(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;return m!==null&&bs(m,E[1])?E[0]:(x.memoizedState=[A,m],A)}function W2(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;if(m!==null&&bs(m,E[1]))return E[0];if(E=A(),Ls){Mt(!0);try{A()}finally{Mt(!1)}}return x.memoizedState=[E,m],E}function xf(A,m,x){return x===void 0||(da&1073741824)!==0?A.memoizedState=m:(A.memoizedState=x,A=CM(),Sr.lanes|=A,Yh|=A,x)}function Dg(A,m,x,E){return ti(x,m)?x:fn.current!==null?(A=xf(A,x,E),ti(A,m)||(Pi=!0),A):(da&42)===0?(Pi=!0,A.memoizedState=x):(A=CM(),Sr.lanes|=A,Yh|=A,m)}function zm(A,m,x,E,M){var G=Z.p;Z.p=G!==0&&8>G?G:8;var le=V.T,be={};V.T=be,_k(A,!1,m,x);try{var Re=M(),it=V.S;if(it!==null&&it(be,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var Ct=U2(Re,E);K1(A,m,Ct,gc(A))}else K1(A,m,E,gc(A))}catch(It){K1(A,m,{then:function(){},status:"rejected",reason:It},gc())}finally{Z.p=G,V.T=le}}function ad(){}function ou(A,m,x,E){if(A.tag!==5)throw Error(n(476));var M=sd(A).queue;zm(A,M,m,H,x===null?ad:function(){return $m(A),x(E)})}function sd(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:H},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:x},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function $m(A){var m=sd(A).next.queue;K1(A,m,{},gc())}function Gm(){return Rs(db)}function z1(){return Ra().memoizedState}function X2(){return Ra().memoizedState}function $1(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var x=gc();A=Et(x);var E=Bt(m,A,x);E!==null&&(vc(E,m,x),St(E,m,x)),m={cache:O1()},A.payload=m;return}m=m.return}}function G1(A,m,x){var E=gc();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Y2(A)?B8(m,x):(x=eA(A,m,x,E),x!==null&&(vc(x,A,E),T8(x,m,E)))}function k8(A,m,x){var E=gc();K1(A,m,x,E)}function K1(A,m,x,E){var M={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Y2(A))B8(m,M);else{var G=A.alternate;if(A.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var le=m.lastRenderedState,be=G(le,x);if(M.hasEagerState=!0,M.eagerState=be,ti(be,le))return Zd(A,m,M,0),ja===null&&Il(),!1}catch{}finally{}if(x=eA(A,m,M,E),x!==null)return vc(x,A,E),T8(x,m,E),!0}return!1}function _k(A,m,x,E){if(E={lane:2,revertLane:nB(),action:E,hasEagerState:!1,eagerState:null,next:null},Y2(A)){if(m)throw Error(n(479))}else m=eA(A,x,E,2),m!==null&&vc(m,A,2)}function Y2(A){var m=A.alternate;return A===Sr||m!==null&&m===Sr}function B8(A,m){ai=Pn=!0;var x=A.pending;x===null?m.next=m:(m.next=x.next,x.next=m),A.pending=m}function T8(A,m,x){if((x&4194048)!==0){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}var J2={readContext:Rs,use:Bo,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},j8={readContext:Rs,use:Bo,useCallback:function(A,m){return so().memoizedState=[A,m===void 0?null:m],A},useContext:Rs,useEffect:M1,useImperativeHandle:function(A,m,x){x=x!=null?x.concat([A]):null,fc(4194308,4,q2.bind(null,m,A),x)},useLayoutEffect:function(A,m){return fc(4194308,4,A,m)},useInsertionEffect:function(A,m){fc(4,2,A,m)},useMemo:function(A,m){var x=so();m=m===void 0?null:m;var E=A();if(Ls){Mt(!0);try{A()}finally{Mt(!1)}}return x.memoizedState=[E,m],E},useReducer:function(A,m,x){var E=so();if(x!==void 0){var M=x(m);if(Ls){Mt(!0);try{x(m)}finally{Mt(!1)}}}else M=m;return E.memoizedState=E.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},E.queue=A,A=A.dispatch=G1.bind(null,Sr,A),[E.memoizedState,A]},useRef:function(A){var m=so();return A={current:A},m.memoizedState=A},useState:function(A){A=Qm(A);var m=A.queue,x=k8.bind(null,Sr,m);return m.dispatch=x,[A.memoizedState,x]},useDebugValue:H1,useDeferredValue:function(A,m){var x=so();return xf(x,A,m)},useTransition:function(){var A=Qm(!1);return A=zm.bind(null,Sr,A.queue,!0,!1),so().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,x){var E=Sr,M=so();if(Un){if(x===void 0)throw Error(n(407));x=x()}else{if(x=m(),ja===null)throw Error(n(349));(Ln&124)!==0||Ig(E,m,x)}M.memoizedState=x;var G={value:x,getSnapshot:m};return M.queue=G,M1(Qh.bind(null,E,G,A),[A]),E.flags|=2048,nd(9,Vm(),Um.bind(null,E,G,x,m),null),x},useId:function(){var A=so(),m=ja.identifierPrefix;if(Un){var x=Ju,E=Yu;x=(E&~(1<<32-Ot(E)-1)).toString(32)+x,m=""+m+"R"+x,x=rs++,0<x&&(m+="H"+x.toString(32)),m+=""}else x=Dl++,m=""+m+"r"+x.toString(32)+"";return A.memoizedState=m},useHostTransitionStatus:Gm,useFormState:Hm,useActionState:Hm,useOptimistic:function(A){var m=so();m.memoizedState=m.baseState=A;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=_k.bind(null,Sr,!0,x),x.dispatch=m,[A,m]},useMemoCache:lA,useCacheRefresh:function(){return so().memoizedState=$1.bind(null,Sr)}},I8={readContext:Rs,use:Bo,useCallback:V1,useContext:Rs,useEffect:K2,useImperativeHandle:Q1,useInsertionEffect:U1,useLayoutEffect:vf,useMemo:W2,useReducer:Lm,useRef:Og,useState:function(){return Lm(To)},useDebugValue:H1,useDeferredValue:function(A,m){var x=Ra();return Dg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=Lm(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:oA(A),m]},useSyncExternalStore:Mm,useId:z1,useHostTransitionStatus:Gm,useFormState:Fg,useActionState:Fg,useOptimistic:function(A,m){var x=Ra();return rd(x,Lr,A,m)},useMemoCache:lA,useCacheRefresh:X2},ide={readContext:Rs,use:Bo,useCallback:V1,useContext:Rs,useEffect:K2,useImperativeHandle:Q1,useInsertionEffect:U1,useLayoutEffect:vf,useMemo:W2,useReducer:jg,useRef:Og,useState:function(){return jg(To)},useDebugValue:H1,useDeferredValue:function(A,m){var x=Ra();return Lr===null?xf(x,A,m):Dg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=jg(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:oA(A),m]},useSyncExternalStore:Mm,useId:z1,useHostTransitionStatus:Gm,useFormState:G2,useActionState:G2,useOptimistic:function(A,m){var x=Ra();return Lr!==null?rd(x,Lr,A,m):(x.baseState=A,[A,x.queue.dispatch])},useMemoCache:lA,useCacheRefresh:X2},Rg=null,q1=0;function Z2(A){var m=q1;return q1+=1,Rg===null&&(Rg=[]),nt(Rg,A,m)}function W1(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function eE(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function F8(A){var m=A._init;return m(A._payload)}function O8(A){function m(We,Qe){if(A){var rt=We.deletions;rt===null?(We.deletions=[Qe],We.flags|=16):rt.push(Qe)}}function x(We,Qe){if(!A)return null;for(;Qe!==null;)m(We,Qe),Qe=Qe.sibling;return null}function E(We){for(var Qe=new Map;We!==null;)We.key!==null?Qe.set(We.key,We):Qe.set(We.index,We),We=We.sibling;return Qe}function M(We,Qe){return We=ru(We,Qe),We.index=0,We.sibling=null,We}function G(We,Qe,rt){return We.index=rt,A?(rt=We.alternate,rt!==null?(rt=rt.index,rt<Qe?(We.flags|=67108866,Qe):rt):(We.flags|=67108866,Qe)):(We.flags|=1048576,Qe)}function le(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,Qe,rt,Nt){return Qe===null||Qe.tag!==6?(Qe=Cg(rt,We.mode,Nt),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function Re(We,Qe,rt,Nt){var Ar=rt.type;return Ar===g?Ct(We,Qe,rt.props.children,Nt,rt.key):Qe!==null&&(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===_&&F8(Ar)===Qe.type)?(Qe=M(Qe,rt.props),W1(Qe,rt),Qe.return=We,Qe):(Qe=df(rt.type,rt.key,rt.props,null,We.mode,Nt),W1(Qe,rt),Qe.return=We,Qe)}function it(We,Qe,rt,Nt){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==rt.containerInfo||Qe.stateNode.implementation!==rt.implementation?(Qe=Im(rt,We.mode,Nt),Qe.return=We,Qe):(Qe=M(Qe,rt.children||[]),Qe.return=We,Qe)}function Ct(We,Qe,rt,Nt,Ar){return Qe===null||Qe.tag!==7?(Qe=Wu(rt,We.mode,Nt,Ar),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function It(We,Qe,rt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Cg(""+Qe,We.mode,rt),Qe.return=We,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return rt=df(Qe.type,Qe.key,Qe.props,null,We.mode,rt),W1(rt,Qe),rt.return=We,rt;case p:return Qe=Im(Qe,We.mode,rt),Qe.return=We,Qe;case _:var Nt=Qe._init;return Qe=Nt(Qe._payload),It(We,Qe,rt)}if(X(Qe)||k(Qe))return Qe=Wu(Qe,We.mode,rt,null),Qe.return=We,Qe;if(typeof Qe.then=="function")return It(We,Z2(Qe),rt);if(Qe.$$typeof===S)return It(We,aA(We,Qe),rt);eE(We,Qe)}return null}function At(We,Qe,rt,Nt){var Ar=Qe!==null?Qe.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Ar!==null?null:be(We,Qe,""+rt,Nt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return rt.key===Ar?Re(We,Qe,rt,Nt):null;case p:return rt.key===Ar?it(We,Qe,rt,Nt):null;case _:return Ar=rt._init,rt=Ar(rt._payload),At(We,Qe,rt,Nt)}if(X(rt)||k(rt))return Ar!==null?null:Ct(We,Qe,rt,Nt,null);if(typeof rt.then=="function")return At(We,Qe,Z2(rt),Nt);if(rt.$$typeof===S)return At(We,Qe,aA(We,rt),Nt);eE(We,rt)}return null}function ft(We,Qe,rt,Nt,Ar){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return We=We.get(rt)||null,be(Qe,We,""+Nt,Ar);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case h:return We=We.get(Nt.key===null?rt:Nt.key)||null,Re(Qe,We,Nt,Ar);case p:return We=We.get(Nt.key===null?rt:Nt.key)||null,it(Qe,We,Nt,Ar);case _:var yn=Nt._init;return Nt=yn(Nt._payload),ft(We,Qe,rt,Nt,Ar)}if(X(Nt)||k(Nt))return We=We.get(rt)||null,Ct(Qe,We,Nt,Ar,null);if(typeof Nt.then=="function")return ft(We,Qe,rt,Z2(Nt),Ar);if(Nt.$$typeof===S)return ft(We,Qe,rt,aA(Qe,Nt),Ar);eE(Qe,Nt)}return null}function zr(We,Qe,rt,Nt){for(var Ar=null,yn=null,br=Qe,Fr=Qe=0,Mi=null;br!==null&&Fr<rt.length;Fr++){br.index>Fr?(Mi=br,br=null):Mi=br.sibling;var qn=At(We,br,rt[Fr],Nt);if(qn===null){br===null&&(br=Mi);break}A&&br&&qn.alternate===null&&m(We,br),Qe=G(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn,br=Mi}if(Fr===rt.length)return x(We,br),Un&&ff(We,Fr),Ar;if(br===null){for(;Fr<rt.length;Fr++)br=It(We,rt[Fr],Nt),br!==null&&(Qe=G(br,Qe,Fr),yn===null?Ar=br:yn.sibling=br,yn=br);return Un&&ff(We,Fr),Ar}for(br=E(br);Fr<rt.length;Fr++)Mi=ft(br,We,Fr,rt[Fr],Nt),Mi!==null&&(A&&Mi.alternate!==null&&br.delete(Mi.key===null?Fr:Mi.key),Qe=G(Mi,Qe,Fr),yn===null?Ar=Mi:yn.sibling=Mi,yn=Mi);return A&&br.forEach(function(i0){return m(We,i0)}),Un&&ff(We,Fr),Ar}function jr(We,Qe,rt,Nt){if(rt==null)throw Error(n(151));for(var Ar=null,yn=null,br=Qe,Fr=Qe=0,Mi=null,qn=rt.next();br!==null&&!qn.done;Fr++,qn=rt.next()){br.index>Fr?(Mi=br,br=null):Mi=br.sibling;var i0=At(We,br,qn.value,Nt);if(i0===null){br===null&&(br=Mi);break}A&&br&&i0.alternate===null&&m(We,br),Qe=G(i0,Qe,Fr),yn===null?Ar=i0:yn.sibling=i0,yn=i0,br=Mi}if(qn.done)return x(We,br),Un&&ff(We,Fr),Ar;if(br===null){for(;!qn.done;Fr++,qn=rt.next())qn=It(We,qn.value,Nt),qn!==null&&(Qe=G(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn);return Un&&ff(We,Fr),Ar}for(br=E(br);!qn.done;Fr++,qn=rt.next())qn=ft(br,We,Fr,qn.value,Nt),qn!==null&&(A&&qn.alternate!==null&&br.delete(qn.key===null?Fr:qn.key),Qe=G(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn);return A&&br.forEach(function(oAe){return m(We,oAe)}),Un&&ff(We,Fr),Ar}function wa(We,Qe,rt,Nt){if(typeof rt=="object"&&rt!==null&&rt.type===g&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:e:{for(var Ar=rt.key;Qe!==null;){if(Qe.key===Ar){if(Ar=rt.type,Ar===g){if(Qe.tag===7){x(We,Qe.sibling),Nt=M(Qe,rt.props.children),Nt.return=We,We=Nt;break e}}else if(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===_&&F8(Ar)===Qe.type){x(We,Qe.sibling),Nt=M(Qe,rt.props),W1(Nt,rt),Nt.return=We,We=Nt;break e}x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}rt.type===g?(Nt=Wu(rt.props.children,We.mode,Nt,rt.key),Nt.return=We,We=Nt):(Nt=df(rt.type,rt.key,rt.props,null,We.mode,Nt),W1(Nt,rt),Nt.return=We,We=Nt)}return le(We);case p:e:{for(Ar=rt.key;Qe!==null;){if(Qe.key===Ar)if(Qe.tag===4&&Qe.stateNode.containerInfo===rt.containerInfo&&Qe.stateNode.implementation===rt.implementation){x(We,Qe.sibling),Nt=M(Qe,rt.children||[]),Nt.return=We,We=Nt;break e}else{x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}Nt=Im(rt,We.mode,Nt),Nt.return=We,We=Nt}return le(We);case _:return Ar=rt._init,rt=Ar(rt._payload),wa(We,Qe,rt,Nt)}if(X(rt))return zr(We,Qe,rt,Nt);if(k(rt)){if(Ar=k(rt),typeof Ar!="function")throw Error(n(150));return rt=Ar.call(rt),jr(We,Qe,rt,Nt)}if(typeof rt.then=="function")return wa(We,Qe,Z2(rt),Nt);if(rt.$$typeof===S)return wa(We,Qe,aA(We,rt),Nt);eE(We,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Qe!==null&&Qe.tag===6?(x(We,Qe.sibling),Nt=M(Qe,rt),Nt.return=We,We=Nt):(x(We,Qe),Nt=Cg(rt,We.mode,Nt),Nt.return=We,We=Nt),le(We)):x(We,Qe)}return function(We,Qe,rt,Nt){try{q1=0;var Ar=wa(We,Qe,rt,Nt);return Rg=null,Ar}catch(br){if(br===me||br===ve)throw br;var yn=Ri(29,br,null,We.mode);return yn.lanes=Nt,yn.return=We,yn}finally{}}}var Pg=O8(!0),D8=O8(!1),lu=re(null),cA=null;function $h(A){var m=A.alternate;K(wi,wi.current&1),K(lu,A),cA===null&&(m===null||fn.current!==null||m.memoizedState!==null)&&(cA=A)}function R8(A){if(A.tag===22){if(K(wi,wi.current),K(lu,A),cA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(cA=A)}}else Gh()}function Gh(){K(wi,wi.current),K(lu,lu.current)}function bf(A){P(lu),cA===A&&(cA=null),P(wi)}var wi=re(0);function tE(A){for(var m=A;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||mB(x)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Sk(A,m,x,E){m=A.memoizedState,x=x(E,m),x=x==null?m:d({},m,x),A.memoizedState=x,A.lanes===0&&(A.updateQueue.baseState=x)}var Nk={enqueueSetState:function(A,m,x){A=A._reactInternals;var E=gc(),M=Et(E);M.payload=m,x!=null&&(M.callback=x),m=Bt(A,M,E),m!==null&&(vc(m,A,E),St(m,A,E))},enqueueReplaceState:function(A,m,x){A=A._reactInternals;var E=gc(),M=Et(E);M.tag=1,M.payload=m,x!=null&&(M.callback=x),m=Bt(A,M,E),m!==null&&(vc(m,A,E),St(m,A,E))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var x=gc(),E=Et(x);E.tag=2,m!=null&&(E.callback=m),m=Bt(A,E,x),m!==null&&(vc(m,A,x),St(m,A,x))}};function P8(A,m,x,E,M,G,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,G,le):m.prototype&&m.prototype.isPureReactComponent?!Gd(x,E)||!Gd(M,G):!0}function L8(A,m,x,E){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,E),m.state!==A&&Nk.enqueueReplaceState(m,m.state,null)}function Km(A,m){var x=m;if("ref"in m){x={};for(var E in m)E!=="ref"&&(x[E]=m[E])}if(A=A.defaultProps){x===m&&(x=d({},x));for(var M in A)x[M]===void 0&&(x[M]=A[M])}return x}var rE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function M8(A){rE(A)}function U8(A){console.error(A)}function Q8(A){rE(A)}function nE(A,m){try{var x=A.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(E){setTimeout(function(){throw E})}}function H8(A,m,x){try{var E=A.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function kk(A,m,x){return x=Et(x),x.tag=3,x.payload={element:null},x.callback=function(){nE(A,m)},x}function V8(A){return A=Et(A),A.tag=3,A}function z8(A,m,x,E){var M=x.type.getDerivedStateFromError;if(typeof M=="function"){var G=E.value;A.payload=function(){return M(G)},A.callback=function(){H8(m,x,E)}}var le=x.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){H8(m,x,E),typeof M!="function"&&(Jh===null?Jh=new Set([this]):Jh.add(this));var be=E.stack;this.componentDidCatch(E.value,{componentStack:be!==null?be:""})})}function ode(A,m,x,E,M){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(m=x.alternate,m!==null&&Mh(m,x,M,!0),x=lu.current,x!==null){switch(x.tag){case 13:return cA===null?Jk():x.alternate===null&&ys===0&&(ys=3),x.flags&=-257,x.flags|=65536,x.lanes=M,E===we?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([E]):m.add(E),eB(A,E,M)),!1;case 22:return x.flags|=65536,E===we?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([E]):x.add(E)),eB(A,E,M)),!1}throw Error(n(435,x.tag))}return eB(A,E,M),Jk(),!1}if(Un)return m=lu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,E!==F1&&(A=Error(n(422),{cause:E}),Lh(hn(A,x)))):(E!==F1&&(m=Error(n(423),{cause:E}),Lh(hn(m,x))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,E=hn(E,x),M=kk(A.stateNode,E,M),nr(A,M),ys!==4&&(ys=2)),!1;var G=Error(n(520),{cause:E});if(G=hn(G,x),rb===null?rb=[G]:rb.push(G),ys!==4&&(ys=2),m===null)return!0;E=hn(E,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,A=M&-M,x.lanes|=A,A=kk(x.stateNode,E,A),nr(x,A),!1;case 1:if(m=x.type,G=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Jh===null||!Jh.has(G))))return x.flags|=65536,M&=-M,x.lanes|=M,M=V8(M),z8(M,A,x,E),nr(x,M),!1}x=x.return}while(x!==null);return!1}var $8=Error(n(461)),Pi=!1;function io(A,m,x,E){m.child=A===null?D8(m,null,x,E):Pg(m,A.child,x,E)}function G8(A,m,x,E,M){x=x.render;var G=m.ref;if("ref"in E){var le={};for(var be in E)be!=="ref"&&(le[be]=E[be])}else le=E;return iu(m),E=Ac(A,m,x,le,G,M),be=Ta(),A!==null&&!Pi?(Pm(A,m,M),yf(A,m,M)):(Un&&be&&Fm(m),m.flags|=1,io(A,m,E,M),m.child)}function K8(A,m,x,E,M){if(A===null){var G=x.type;return typeof G=="function"&&!Rh(G)&&G.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=G,q8(A,m,G,E,M)):(A=df(x.type,null,E,m,m.mode,M),A.ref=m.ref,A.return=m,m.child=A)}if(G=A.child,!Rk(A,M)){var le=G.memoizedProps;if(x=x.compare,x=x!==null?x:Gd,x(le,E)&&A.ref===m.ref)return yf(A,m,M)}return m.flags|=1,A=ru(G,E),A.ref=m.ref,A.return=m,m.child=A}function q8(A,m,x,E,M){if(A!==null){var G=A.memoizedProps;if(Gd(G,E)&&A.ref===m.ref)if(Pi=!1,m.pendingProps=E=G,Rk(A,M))(A.flags&131072)!==0&&(Pi=!0);else return m.lanes=A.lanes,yf(A,m,M)}return Bk(A,m,x,E,M)}function W8(A,m,x){var E=m.pendingProps,M=E.children,G=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((m.flags&128)!==0){if(E=G!==null?G.baseLanes|x:x,A!==null){for(M=m.child=A.child,G=0;M!==null;)G=G|M.lanes|M.childLanes,M=M.sibling;m.childLanes=G&~E}else m.childLanes=0,m.child=null;return X8(A,m,E,x)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(m,G!==null?G.cachePool:null),G!==null?aa(m,G):Gn(),R8(m);else return m.lanes=m.childLanes=536870912,X8(A,m,G!==null?G.baseLanes|x:x,x)}else G!==null?(ae(m,G.cachePool),aa(m,G),Gh(),m.memoizedState=null):(A!==null&&ae(m,null),Gn(),Gh());return io(A,m,M,x),m.child}function X8(A,m,x,E){var M=J();return M=M===null?null:{parent:Ps._currentValue,pool:M},m.memoizedState={baseLanes:x,cachePool:M},A!==null&&ae(m,null),Gn(),R8(m),A!==null&&Mh(A,m,E,!0),null}function aE(A,m){var x=m.ref;if(x===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(A===null||A.ref!==x)&&(m.flags|=4194816)}}function Bk(A,m,x,E,M){return iu(m),x=Ac(A,m,x,E,void 0,M),E=Ta(),A!==null&&!Pi?(Pm(A,m,M),yf(A,m,M)):(Un&&E&&Fm(m),m.flags|=1,io(A,m,x,M),m.child)}function Y8(A,m,x,E,M,G){return iu(m),m.updateQueue=null,x=pf(m,E,x,M),sA(A),E=Ta(),A!==null&&!Pi?(Pm(A,m,G),yf(A,m,G)):(Un&&E&&Fm(m),m.flags|=1,io(A,m,x,G),m.child)}function J8(A,m,x,E,M){if(iu(m),m.stateNode===null){var G=ri,le=x.contextType;typeof le=="object"&&le!==null&&(G=Rs(le)),G=new x(E,G),m.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=Nk,m.stateNode=G,G._reactInternals=m,G=m.stateNode,G.props=E,G.state=m.memoizedState,G.refs={},Ue(m),le=x.contextType,G.context=typeof le=="object"&&le!==null?Rs(le):ri,G.state=m.memoizedState,le=x.getDerivedStateFromProps,typeof le=="function"&&(Sk(m,x,le,E),G.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(le=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),le!==G.state&&Nk.enqueueReplaceState(G,G.state,null),er(m,E,G,M),pr(),G.state=m.memoizedState),typeof G.componentDidMount=="function"&&(m.flags|=4194308),E=!0}else if(A===null){G=m.stateNode;var be=m.memoizedProps,Re=Km(x,be);G.props=Re;var it=G.context,Ct=x.contextType;le=ri,typeof Ct=="object"&&Ct!==null&&(le=Rs(Ct));var It=x.getDerivedStateFromProps;Ct=typeof It=="function"||typeof G.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,Ct||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(be||it!==le)&&L8(m,G,E,le),ht=!1;var At=m.memoizedState;G.state=At,er(m,E,G,M),pr(),it=m.memoizedState,be||At!==it||ht?(typeof It=="function"&&(Sk(m,x,It,E),it=m.memoizedState),(Re=ht||P8(m,x,Re,E,At,it,le))?(Ct||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=it),G.props=E,G.state=it,G.context=le,E=Re):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{G=m.stateNode,Ve(A,m),le=m.memoizedProps,Ct=Km(x,le),G.props=Ct,It=m.pendingProps,At=G.context,it=x.contextType,Re=ri,typeof it=="object"&&it!==null&&(Re=Rs(it)),be=x.getDerivedStateFromProps,(it=typeof be=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(le!==It||At!==Re)&&L8(m,G,E,Re),ht=!1,At=m.memoizedState,G.state=At,er(m,E,G,M),pr();var ft=m.memoizedState;le!==It||At!==ft||ht||A!==null&&A.dependencies!==null&&kg(A.dependencies)?(typeof be=="function"&&(Sk(m,x,be,E),ft=m.memoizedState),(Ct=ht||P8(m,x,Ct,E,At,ft,Re)||A!==null&&A.dependencies!==null&&kg(A.dependencies))?(it||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,ft,Re),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,ft,Re)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=ft),G.props=E,G.state=ft,G.context=Re,E=Ct):(typeof G.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),E=!1)}return G=E,aE(A,m),E=(m.flags&128)!==0,G||E?(G=m.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:G.render(),m.flags|=1,A!==null&&E?(m.child=Pg(m,A.child,null,M),m.child=Pg(m,null,x,M)):io(A,m,x,M),m.memoizedState=G.state,A=m.child):A=yf(A,m,M),A}function Z8(A,m,x,E){return ol(),m.flags|=256,io(A,m,x,E),m.child}var Tk={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jk(A){return{baseLanes:A,cachePool:ue()}}function Ik(A,m,x){return A=A!==null?A.childLanes&~x:0,m&&(A|=cu),A}function eM(A,m,x){var E=m.pendingProps,M=!1,G=(m.flags&128)!==0,le;if((le=G)||(le=A!==null&&A.memoizedState===null?!1:(wi.current&2)!==0),le&&(M=!0,m.flags&=-129),le=(m.flags&32)!==0,m.flags&=-33,A===null){if(Un){if(M?$h(m):Gh(),Un){var be=Ga,Re;if(Re=be){e:{for(Re=be,be=nu;Re.nodeType!==8;){if(!be){be=null;break e}if(Re=od(Re.nextSibling),Re===null){be=null;break e}}be=Re}be!==null?(m.memoizedState={dehydrated:be,treeContext:Af!==null?{id:Yu,overflow:Ju}:null,retryLane:536870912,hydrationErrors:null},Re=Ri(18,null,null,0),Re.stateNode=be,Re.return=m,m.child=Re,Ds=m,Ga=null,Re=!0):Re=!1}Re||hf(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return mB(be)?m.lanes=32:m.lanes=536870912,null;bf(m)}return be=E.children,E=E.fallback,M?(Gh(),M=m.mode,be=sE({mode:"hidden",children:be},M),E=Wu(E,M,x,null),be.return=m,E.return=m,be.sibling=E,m.child=be,M=m.child,M.memoizedState=jk(x),M.childLanes=Ik(A,le,x),m.memoizedState=Tk,E):($h(m),Fk(m,be))}if(Re=A.memoizedState,Re!==null&&(be=Re.dehydrated,be!==null)){if(G)m.flags&256?($h(m),m.flags&=-257,m=Ok(A,m,x)):m.memoizedState!==null?(Gh(),m.child=A.child,m.flags|=128,m=null):(Gh(),M=E.fallback,be=m.mode,E=sE({mode:"visible",children:E.children},be),M=Wu(M,be,x,null),M.flags|=2,E.return=m,M.return=m,E.sibling=M,m.child=E,Pg(m,A.child,null,x),E=m.child,E.memoizedState=jk(x),E.childLanes=Ik(A,le,x),m.memoizedState=Tk,m=M);else if($h(m),mB(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var it=le.dgst;le=it,E=Error(n(419)),E.stack="",E.digest=le,Lh({value:E,source:null,stack:null}),m=Ok(A,m,x)}else if(Pi||Mh(A,m,x,!1),le=(x&A.childLanes)!==0,Pi||le){if(le=ja,le!==null&&(E=x&-x,E=(E&42)!==0?1:Pr(E),E=(E&(le.suspendedLanes|x))!==0?0:E,E!==0&&E!==Re.retryLane))throw Re.retryLane=E,qu(A,E),vc(le,A,E),$8;be.data==="$?"||Jk(),m=Ok(A,m,x)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Re.treeContext,Ga=od(be.nextSibling),Ds=m,Un=!0,rA=null,nu=!1,A!==null&&(Ol[il++]=Yu,Ol[il++]=Ju,Ol[il++]=Af,Yu=A.id,Ju=A.overflow,Af=m),m=Fk(m,E.children),m.flags|=4096);return m}return M?(Gh(),M=E.fallback,be=m.mode,Re=A.child,it=Re.sibling,E=ru(Re,{mode:"hidden",children:E.children}),E.subtreeFlags=Re.subtreeFlags&65011712,it!==null?M=ru(it,M):(M=Wu(M,be,x,null),M.flags|=2),M.return=m,E.return=m,E.sibling=M,m.child=E,E=M,M=m.child,be=A.child.memoizedState,be===null?be=jk(x):(Re=be.cachePool,Re!==null?(it=Ps._currentValue,Re=Re.parent!==it?{parent:it,pool:it}:Re):Re=ue(),be={baseLanes:be.baseLanes|x,cachePool:Re}),M.memoizedState=be,M.childLanes=Ik(A,le,x),m.memoizedState=Tk,E):($h(m),x=A.child,A=x.sibling,x=ru(x,{mode:"visible",children:E.children}),x.return=m,x.sibling=null,A!==null&&(le=m.deletions,le===null?(m.deletions=[A],m.flags|=16):le.push(A)),m.child=x,m.memoizedState=null,x)}function Fk(A,m){return m=sE({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function sE(A,m){return A=Ri(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Ok(A,m,x){return Pg(m,A.child,null,x),A=Fk(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function tM(A,m,x){A.lanes|=m;var E=A.alternate;E!==null&&(E.lanes|=m),Sg(A.return,m,x)}function Dk(A,m,x,E,M){var G=A.memoizedState;G===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:M}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=E,G.tail=x,G.tailMode=M)}function rM(A,m,x){var E=m.pendingProps,M=E.revealOrder,G=E.tail;if(io(A,m,E.children,x),E=wi.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&tM(A,x,m);else if(A.tag===19)tM(A,x,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(K(wi,E),M){case"forwards":for(x=m.child,M=null;x!==null;)A=x.alternate,A!==null&&tE(A)===null&&(M=x),x=x.sibling;x=M,x===null?(M=m.child,m.child=null):(M=x.sibling,x.sibling=null),Dk(m,!1,M,x,G);break;case"backwards":for(x=null,M=m.child,m.child=null;M!==null;){if(A=M.alternate,A!==null&&tE(A)===null){m.child=M;break}A=M.sibling,M.sibling=x,x=M,M=A}Dk(m,!0,x,null,G);break;case"together":Dk(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function yf(A,m,x){if(A!==null&&(m.dependencies=A.dependencies),Yh|=m.lanes,(x&m.childLanes)===0)if(A!==null){if(Mh(A,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,x=ru(A,A.pendingProps),m.child=x,x.return=m;A.sibling!==null;)A=A.sibling,x=x.sibling=ru(A,A.pendingProps),x.return=m;x.sibling=null}return m.child}function Rk(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&kg(A)))}function lde(A,m,x){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),nA(m,Ps,A.memoizedState.cache),ol();break;case 27:case 5:pe(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:nA(m,m.type,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?($h(m),m.flags|=128,null):(x&m.child.childLanes)!==0?eM(A,m,x):($h(m),A=yf(A,m,x),A!==null?A.sibling:null);$h(m);break;case 19:var M=(A.flags&128)!==0;if(E=(x&m.childLanes)!==0,E||(Mh(A,m,x,!1),E=(x&m.childLanes)!==0),M){if(E)return rM(A,m,x);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),K(wi,wi.current),E)break;return null;case 22:case 23:return m.lanes=0,W8(A,m,x);case 24:nA(m,Ps,A.memoizedState.cache)}return yf(A,m,x)}function nM(A,m,x){if(A!==null)if(A.memoizedProps!==m.pendingProps)Pi=!0;else{if(!Rk(A,x)&&(m.flags&128)===0)return Pi=!1,lde(A,m,x);Pi=(A.flags&131072)!==0}else Pi=!1,Un&&(m.flags&1048576)!==0&&D2(m,_g,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var E=m.elementType,M=E._init;if(E=M(E._payload),m.type=E,typeof E=="function")Rh(E)?(A=Km(E,A),m.tag=1,m=J8(null,m,E,A,x)):(m.tag=0,m=Bk(null,m,E,A,x));else{if(E!=null){if(M=E.$$typeof,M===I){m.tag=11,m=G8(null,m,E,A,x);break e}else if(M===w){m.tag=14,m=K8(null,m,E,A,x);break e}}throw m=R(E)||E,Error(n(306,m,""))}}return m;case 0:return Bk(A,m,m.type,m.pendingProps,x);case 1:return E=m.type,M=Km(E,m.pendingProps),J8(A,m,E,M,x);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));E=m.pendingProps;var G=m.memoizedState;M=G.element,Ve(A,m),er(m,E,null,x);var le=m.memoizedState;if(E=le.cache,nA(m,Ps,E),E!==G.cache&&Ng(m,[Ps],x,!0),pr(),E=le.element,G.isDehydrated)if(G={element:E,isDehydrated:!1,cache:le.cache},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){m=Z8(A,m,E,x);break e}else if(E!==M){M=hn(Error(n(424)),m),Lh(M),m=Z8(A,m,E,x);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Ga=od(A.firstChild),Ds=m,Un=!0,rA=null,nu=!0,x=D8(m,null,E,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(ol(),E===M){m=yf(A,m,x);break e}io(A,m,E,x)}m=m.child}return m;case 26:return aE(A,m),A===null?(x=oU(m.type,null,m.pendingProps,null))?m.memoizedState=x:Un||(x=m.type,A=m.pendingProps,E=xE(ie.current).createElement(x),E[rn]=m,E[en]=A,lo(E,x,A),$e(E),m.stateNode=E):m.memoizedState=oU(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return pe(m),A===null&&Un&&(E=m.stateNode=aU(m.type,m.pendingProps,ie.current),Ds=m,nu=!0,M=Ga,t0(m.type)?(pB=M,Ga=od(E.firstChild)):Ga=M),io(A,m,m.pendingProps.children,x),aE(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Un&&((M=E=Ga)&&(E=Rde(E,m.type,m.pendingProps,nu),E!==null?(m.stateNode=E,Ds=m,Ga=od(E.firstChild),nu=!1,M=!0):M=!1),M||hf(m)),pe(m),M=m.type,G=m.pendingProps,le=A!==null?A.memoizedProps:null,E=G.children,AB(M,G)?E=null:le!==null&&AB(M,le)&&(m.flags|=32),m.memoizedState!==null&&(M=Ac(A,m,iA,null,null,x),db._currentValue=M),aE(A,m),io(A,m,E,x),m.child;case 6:return A===null&&Un&&((A=x=Ga)&&(x=Pde(x,m.pendingProps,nu),x!==null?(m.stateNode=x,Ds=m,Ga=null,A=!0):A=!1),A||hf(m)),null;case 13:return eM(A,m,x);case 4:return oe(m,m.stateNode.containerInfo),E=m.pendingProps,A===null?m.child=Pg(m,null,E,x):io(A,m,E,x),m.child;case 11:return G8(A,m,m.type,m.pendingProps,x);case 7:return io(A,m,m.pendingProps,x),m.child;case 8:return io(A,m,m.pendingProps.children,x),m.child;case 12:return io(A,m,m.pendingProps.children,x),m.child;case 10:return E=m.pendingProps,nA(m,m.type,E.value),io(A,m,E.children,x),m.child;case 9:return M=m.type._context,E=m.pendingProps.children,iu(m),M=Rs(M),E=E(M),m.flags|=1,io(A,m,E,x),m.child;case 14:return K8(A,m,m.type,m.pendingProps,x);case 15:return q8(A,m,m.type,m.pendingProps,x);case 19:return rM(A,m,x);case 31:return E=m.pendingProps,x=m.mode,E={mode:E.mode,children:E.children},A===null?(x=sE(E,x),x.ref=m.ref,m.child=x,x.return=m,m=x):(x=ru(A.child,E),x.ref=m.ref,m.child=x,x.return=m,m=x),m;case 22:return W8(A,m,x);case 24:return iu(m),E=Rs(Ps),A===null?(M=J(),M===null&&(M=ja,G=O1(),M.pooledCache=G,G.refCount++,G!==null&&(M.pooledCacheLanes|=x),M=G),m.memoizedState={parent:E,cache:M},Ue(m),nA(m,Ps,M)):((A.lanes&x)!==0&&(Ve(A,m),er(m,null,null,x),pr()),M=A.memoizedState,G=m.memoizedState,M.parent!==E?(M={parent:E,cache:E},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),nA(m,Ps,E)):(E=G.cache,nA(m,Ps,E),E!==M.cache&&Ng(m,[Ps],x,!0))),io(A,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function wf(A){A.flags|=4}function aM(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!AU(m)){if(m=lu.current,m!==null&&((Ln&4194048)===Ln?cA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||m!==cA))throw et=we,ge;A.flags|=8192}}function iE(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?pt():536870912,A.lanes|=m,Qg|=m)}function X1(A,m){if(!Un)switch(A.tailMode){case"hidden":m=A.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?A.tail=null:x.sibling=null;break;case"collapsed":x=A.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function as(A){var m=A.alternate!==null&&A.alternate.child===A.child,x=0,E=0;if(m)for(var M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags&65011712,E|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=E,A.childLanes=x,m}function cde(A,m,x){var E=m.pendingProps;switch(Om(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(m),null;case 1:return as(m),null;case 3:return x=m.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),su(Ps),ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(A===null||A.child===null)&&(ao(m)?wf(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,P2())),as(m),null;case 26:return x=m.memoizedState,A===null?(wf(m),x!==null?(as(m),aM(m,x)):(as(m),m.flags&=-16777217)):x?x!==A.memoizedState?(wf(m),as(m),aM(m,x)):(as(m),m.flags&=-16777217):(A.memoizedProps!==E&&wf(m),as(m),m.flags&=-16777217),null;case 27:Ie(m),x=ie.current;var M=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==E&&wf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return as(m),null}A=Y.current,ao(m)?R2(m):(A=aU(M,E,x),m.stateNode=A,wf(m))}return as(m),null;case 5:if(Ie(m),x=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==E&&wf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return as(m),null}if(A=Y.current,ao(m))R2(m);else{switch(M=xE(ie.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?M.createElement("select",{is:E.is}):M.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?M.createElement(x,{is:E.is}):M.createElement(x)}}A[rn]=m,A[en]=E;e:for(M=m.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===m)break e;for(;M.sibling===null;){if(M.return===null||M.return===m)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}m.stateNode=A;e:switch(lo(A,x,E),x){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&wf(m)}}return as(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==E&&wf(m);else{if(typeof E!="string"&&m.stateNode===null)throw Error(n(166));if(A=ie.current,ao(m)){if(A=m.stateNode,x=m.memoizedProps,E=null,M=Ds,M!==null)switch(M.tag){case 27:case 5:E=M.memoizedProps}A[rn]=m,A=!!(A.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||YM(A.nodeValue,x)),A||hf(m)}else A=xE(A).createTextNode(E),A[rn]=m,m.stateNode=A}return as(m),null;case 13:if(E=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=ao(m),E!==null&&E.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[rn]=m}else ol(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;as(m),M=!1}else M=P2(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(bf(m),m):(bf(m),null)}if(bf(m),(m.flags&128)!==0)return m.lanes=x,m;if(x=E!==null,A=A!==null&&A.memoizedState!==null,x){E=m.child,M=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(M=E.alternate.memoizedState.cachePool.pool);var G=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(G=E.memoizedState.cachePool.pool),G!==M&&(E.flags|=2048)}return x!==A&&x&&(m.child.flags|=8192),iE(m,m.updateQueue),as(m),null;case 4:return ce(),A===null&&oB(m.stateNode.containerInfo),as(m),null;case 10:return su(m.type),as(m),null;case 19:if(P(wi),M=m.memoizedState,M===null)return as(m),null;if(E=(m.flags&128)!==0,G=M.rendering,G===null)if(E)X1(M,!1);else{if(ys!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(G=tE(A),G!==null){for(m.flags|=128,X1(M,!1),A=G.updateQueue,m.updateQueue=A,iE(m,A),m.subtreeFlags=0,A=x,x=m.child;x!==null;)jm(x,A),x=x.sibling;return K(wi,wi.current&1|2),m.child}A=A.sibling}M.tail!==null&&je()>cE&&(m.flags|=128,E=!0,X1(M,!1),m.lanes=4194304)}else{if(!E)if(A=tE(G),A!==null){if(m.flags|=128,E=!0,A=A.updateQueue,m.updateQueue=A,iE(m,A),X1(M,!0),M.tail===null&&M.tailMode==="hidden"&&!G.alternate&&!Un)return as(m),null}else 2*je()-M.renderingStartTime>cE&&x!==536870912&&(m.flags|=128,E=!0,X1(M,!1),m.lanes=4194304);M.isBackwards?(G.sibling=m.child,m.child=G):(A=M.last,A!==null?A.sibling=G:m.child=G,M.last=G)}return M.tail!==null?(m=M.tail,M.rendering=m,M.tail=m.sibling,M.renderingStartTime=je(),m.sibling=null,A=wi.current,K(wi,E?A&1|2:A&1),m):(as(m),null);case 22:case 23:return bf(m),qr(),E=m.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(m.flags|=8192):E&&(m.flags|=8192),E?(x&536870912)!==0&&(m.flags&128)===0&&(as(m),m.subtreeFlags&6&&(m.flags|=8192)):as(m),x=m.updateQueue,x!==null&&iE(m,x.retryQueue),x=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048),A!==null&&P(Q),null;case 24:return x=null,A!==null&&(x=A.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),su(Ps),as(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function ude(A,m){switch(Om(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return su(Ps),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return Ie(m),null;case 13:if(bf(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));ol()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return P(wi),null;case 4:return ce(),null;case 10:return su(m.type),null;case 22:case 23:return bf(m),qr(),A!==null&&P(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return su(Ps),null;case 25:return null;default:return null}}function sM(A,m){switch(Om(m),m.tag){case 3:su(Ps),ce();break;case 26:case 27:case 5:Ie(m);break;case 4:ce();break;case 13:bf(m);break;case 19:P(wi);break;case 10:su(m.type);break;case 22:case 23:bf(m),qr(),A!==null&&P(Q);break;case 24:su(Ps)}}function Y1(A,m){try{var x=m.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var M=E.next;x=M;do{if((x.tag&A)===A){E=void 0;var G=x.create,le=x.inst;E=G(),le.destroy=E}x=x.next}while(x!==M)}}catch(be){_a(m,m.return,be)}}function Kh(A,m,x){try{var E=m.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var G=M.next;E=G;do{if((E.tag&A)===A){var le=E.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,M=m;var Re=x,it=be;try{it()}catch(Ct){_a(M,Re,Ct)}}}E=E.next}while(E!==G)}}catch(Ct){_a(m,m.return,Ct)}}function iM(A){var m=A.updateQueue;if(m!==null){var x=A.stateNode;try{$n(m,x)}catch(E){_a(A,A.return,E)}}}function oM(A,m,x){x.props=Km(A.type,A.memoizedProps),x.state=A.memoizedState;try{x.componentWillUnmount()}catch(E){_a(A,m,E)}}function J1(A,m){try{var x=A.ref;if(x!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof x=="function"?A.refCleanup=x(E):x.current=E}}catch(M){_a(A,m,M)}}function uA(A,m){var x=A.ref,E=A.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(M){_a(A,m,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(M){_a(A,m,M)}else x.current=null}function lM(A){var m=A.type,x=A.memoizedProps,E=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(M){_a(A,A.return,M)}}function Pk(A,m,x){try{var E=A.stateNode;jde(E,A.type,x,m),E[en]=m}catch(M){_a(A,A.return,M)}}function cM(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&t0(A.type)||A.tag===4}function Lk(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||cM(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&t0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Mk(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(A,m):(m=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,m.appendChild(A),x=x._reactRootContainer,x!=null||m.onclick!==null||(m.onclick=vE));else if(E!==4&&(E===27&&t0(A.type)&&(x=A.stateNode,m=null),A=A.child,A!==null))for(Mk(A,m,x),A=A.sibling;A!==null;)Mk(A,m,x),A=A.sibling}function oE(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?x.insertBefore(A,m):x.appendChild(A);else if(E!==4&&(E===27&&t0(A.type)&&(x=A.stateNode),A=A.child,A!==null))for(oE(A,m,x),A=A.sibling;A!==null;)oE(A,m,x),A=A.sibling}function uM(A){var m=A.stateNode,x=A.memoizedProps;try{for(var E=A.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);lo(m,E,x),m[rn]=A,m[en]=x}catch(G){_a(A,A.return,G)}}var Ef=!1,Ms=!1,Uk=!1,dM=typeof WeakSet=="function"?WeakSet:Set,Li=null;function dde(A,m){if(A=A.containerInfo,uB=_E,A=no(A),yi(A)){if("selectionStart"in A)var x={start:A.selectionStart,end:A.selectionEnd};else e:{x=(x=A.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var M=E.anchorOffset,G=E.focusNode;E=E.focusOffset;try{x.nodeType,G.nodeType}catch{x=null;break e}var le=0,be=-1,Re=-1,it=0,Ct=0,It=A,At=null;t:for(;;){for(var ft;It!==x||M!==0&&It.nodeType!==3||(be=le+M),It!==G||E!==0&&It.nodeType!==3||(Re=le+E),It.nodeType===3&&(le+=It.nodeValue.length),(ft=It.firstChild)!==null;)At=It,It=ft;for(;;){if(It===A)break t;if(At===x&&++it===M&&(be=le),At===G&&++Ct===E&&(Re=le),(ft=It.nextSibling)!==null)break;It=At,At=It.parentNode}It=ft}x=be===-1||Re===-1?null:{start:be,end:Re}}else x=null}x=x||{start:0,end:0}}else x=null;for(dB={focusedElem:A,selectionRange:x},_E=!1,Li=m;Li!==null;)if(m=Li,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Li=A;else for(;Li!==null;){switch(m=Li,G=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&G!==null){A=void 0,x=m,M=G.memoizedProps,G=G.memoizedState,E=x.stateNode;try{var zr=Km(x.type,M,x.elementType===x.type);A=E.getSnapshotBeforeUpdate(zr,G),E.__reactInternalSnapshotBeforeUpdate=A}catch(jr){_a(x,x.return,jr)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,x=A.nodeType,x===9)hB(A);else if(x===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":hB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Li=A;break}Li=m.return}}function AM(A,m,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:qh(A,x),E&4&&Y1(5,x);break;case 1:if(qh(A,x),E&4)if(A=x.stateNode,m===null)try{A.componentDidMount()}catch(le){_a(x,x.return,le)}else{var M=Km(x.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(M,m,A.__reactInternalSnapshotBeforeUpdate)}catch(le){_a(x,x.return,le)}}E&64&&iM(x),E&512&&J1(x,x.return);break;case 3:if(qh(A,x),E&64&&(A=x.updateQueue,A!==null)){if(m=null,x.child!==null)switch(x.child.tag){case 27:case 5:m=x.child.stateNode;break;case 1:m=x.child.stateNode}try{$n(A,m)}catch(le){_a(x,x.return,le)}}break;case 27:m===null&&E&4&&uM(x);case 26:case 5:qh(A,x),m===null&&E&4&&lM(x),E&512&&J1(x,x.return);break;case 12:qh(A,x);break;case 13:qh(A,x),E&4&&mM(A,x),E&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=bde.bind(null,x),Lde(A,x))));break;case 22:if(E=x.memoizedState!==null||Ef,!E){m=m!==null&&m.memoizedState!==null||Ms,M=Ef;var G=Ms;Ef=E,(Ms=m)&&!G?Wh(A,x,(x.subtreeFlags&8772)!==0):qh(A,x),Ef=M,Ms=G}break;case 30:break;default:qh(A,x)}}function fM(A){var m=A.alternate;m!==null&&(A.alternate=null,fM(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&Ce(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ka=null,Rl=!1;function Cf(A,m,x){for(x=x.child;x!==null;)hM(A,m,x),x=x.sibling}function hM(A,m,x){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(mt,x)}catch{}switch(x.tag){case 26:Ms||uA(x,m),Cf(A,m,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ms||uA(x,m);var E=Ka,M=Rl;t0(x.type)&&(Ka=x.stateNode,Rl=!1),Cf(A,m,x),ob(x.stateNode),Ka=E,Rl=M;break;case 5:Ms||uA(x,m);case 6:if(E=Ka,M=Rl,Ka=null,Cf(A,m,x),Ka=E,Rl=M,Ka!==null)if(Rl)try{(Ka.nodeType===9?Ka.body:Ka.nodeName==="HTML"?Ka.ownerDocument.body:Ka).removeChild(x.stateNode)}catch(G){_a(x,m,G)}else try{Ka.removeChild(x.stateNode)}catch(G){_a(x,m,G)}break;case 18:Ka!==null&&(Rl?(A=Ka,rU(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,x.stateNode),mb(A)):rU(Ka,x.stateNode));break;case 4:E=Ka,M=Rl,Ka=x.stateNode.containerInfo,Rl=!0,Cf(A,m,x),Ka=E,Rl=M;break;case 0:case 11:case 14:case 15:Ms||Kh(2,x,m),Ms||Kh(4,x,m),Cf(A,m,x);break;case 1:Ms||(uA(x,m),E=x.stateNode,typeof E.componentWillUnmount=="function"&&oM(x,m,E)),Cf(A,m,x);break;case 21:Cf(A,m,x);break;case 22:Ms=(E=Ms)||x.memoizedState!==null,Cf(A,m,x),Ms=E;break;default:Cf(A,m,x)}}function mM(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{mb(A)}catch(x){_a(m,m.return,x)}}function Ade(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new dM),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new dM),m;default:throw Error(n(435,A.tag))}}function Qk(A,m){var x=Ade(A);m.forEach(function(E){var M=yde.bind(null,A,E);x.has(E)||(x.add(E),E.then(M,M))})}function hc(A,m){var x=m.deletions;if(x!==null)for(var E=0;E<x.length;E++){var M=x[E],G=A,le=m,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(t0(be.type)){Ka=be.stateNode,Rl=!1;break e}break;case 5:Ka=be.stateNode,Rl=!1;break e;case 3:case 4:Ka=be.stateNode.containerInfo,Rl=!0;break e}be=be.return}if(Ka===null)throw Error(n(160));hM(G,le,M),Ka=null,Rl=!1,G=M.alternate,G!==null&&(G.return=null),M.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)pM(m,A),m=m.sibling}var id=null;function pM(A,m){var x=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:hc(m,A),mc(A),E&4&&(Kh(3,A,A.return),Y1(3,A),Kh(5,A,A.return));break;case 1:hc(m,A),mc(A),E&512&&(Ms||x===null||uA(x,x.return)),E&64&&Ef&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(x=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var M=id;if(hc(m,A),mc(A),E&512&&(Ms||x===null||uA(x,x.return)),E&4){var G=x!==null?x.memoizedState:null;if(E=A.memoizedState,x===null)if(E===null)if(A.stateNode===null){e:{E=A.type,x=A.memoizedProps,M=M.ownerDocument||M;t:switch(E){case"title":G=M.getElementsByTagName("title")[0],(!G||G[Ee]||G[rn]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=M.createElement(E),M.head.insertBefore(G,M.querySelector("head > title"))),lo(G,E,x),G[rn]=A,$e(G),E=G;break e;case"link":var le=uU("link","href",M).get(E+(x.href||""));if(le){for(var be=0;be<le.length;be++)if(G=le[be],G.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&G.getAttribute("rel")===(x.rel==null?null:x.rel)&&G.getAttribute("title")===(x.title==null?null:x.title)&&G.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){le.splice(be,1);break t}}G=M.createElement(E),lo(G,E,x),M.head.appendChild(G);break;case"meta":if(le=uU("meta","content",M).get(E+(x.content||""))){for(be=0;be<le.length;be++)if(G=le[be],G.getAttribute("content")===(x.content==null?null:""+x.content)&&G.getAttribute("name")===(x.name==null?null:x.name)&&G.getAttribute("property")===(x.property==null?null:x.property)&&G.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&G.getAttribute("charset")===(x.charSet==null?null:x.charSet)){le.splice(be,1);break t}}G=M.createElement(E),lo(G,E,x),M.head.appendChild(G);break;default:throw Error(n(468,E))}G[rn]=A,$e(G),E=G}A.stateNode=E}else dU(M,A.type,A.stateNode);else A.stateNode=cU(M,E,A.memoizedProps);else G!==E?(G===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):G.count--,E===null?dU(M,A.type,A.stateNode):cU(M,E,A.memoizedProps)):E===null&&A.stateNode!==null&&Pk(A,A.memoizedProps,x.memoizedProps)}break;case 27:hc(m,A),mc(A),E&512&&(Ms||x===null||uA(x,x.return)),x!==null&&E&4&&Pk(A,A.memoizedProps,x.memoizedProps);break;case 5:if(hc(m,A),mc(A),E&512&&(Ms||x===null||uA(x,x.return)),A.flags&32){M=A.stateNode;try{yo(M,"")}catch(ft){_a(A,A.return,ft)}}E&4&&A.stateNode!=null&&(M=A.memoizedProps,Pk(A,M,x!==null?x.memoizedProps:M)),E&1024&&(Uk=!0);break;case 6:if(hc(m,A),mc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,x=A.stateNode;try{x.nodeValue=E}catch(ft){_a(A,A.return,ft)}}break;case 3:if(wE=null,M=id,id=bE(m.containerInfo),hc(m,A),id=M,mc(A),E&4&&x!==null&&x.memoizedState.isDehydrated)try{mb(m.containerInfo)}catch(ft){_a(A,A.return,ft)}Uk&&(Uk=!1,gM(A));break;case 4:E=id,id=bE(A.stateNode.containerInfo),hc(m,A),mc(A),id=E;break;case 12:hc(m,A),mc(A);break;case 13:hc(m,A),mc(A),A.child.flags&8192&&A.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Kk=je()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,Qk(A,E)));break;case 22:M=A.memoizedState!==null;var Re=x!==null&&x.memoizedState!==null,it=Ef,Ct=Ms;if(Ef=it||M,Ms=Ct||Re,hc(m,A),Ms=Ct,Ef=it,mc(A),E&8192)e:for(m=A.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(x===null||Re||Ef||Ms||qm(A)),x=null,m=A;;){if(m.tag===5||m.tag===26){if(x===null){Re=x=m;try{if(G=Re.stateNode,M)le=G.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=Re.stateNode;var It=Re.memoizedProps.style,At=It!=null&&It.hasOwnProperty("display")?It.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ft){_a(Re,Re.return,ft)}}}else if(m.tag===6){if(x===null){Re=m;try{Re.stateNode.nodeValue=M?"":Re.memoizedProps}catch(ft){_a(Re,Re.return,ft)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}E&4&&(E=A.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,Qk(A,x))));break;case 19:hc(m,A),mc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,Qk(A,E)));break;case 30:break;case 21:break;default:hc(m,A),mc(A)}}function mc(A){var m=A.flags;if(m&2){try{for(var x,E=A.return;E!==null;){if(cM(E)){x=E;break}E=E.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var M=x.stateNode,G=Lk(A);oE(A,G,M);break;case 5:var le=x.stateNode;x.flags&32&&(yo(le,""),x.flags&=-33);var be=Lk(A);oE(A,be,le);break;case 3:case 4:var Re=x.stateNode.containerInfo,it=Lk(A);Mk(A,it,Re);break;default:throw Error(n(161))}}catch(Ct){_a(A,A.return,Ct)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function gM(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;gM(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function qh(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)AM(A,m.alternate,m),m=m.sibling}function qm(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:Kh(4,m,m.return),qm(m);break;case 1:uA(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&oM(m,m.return,x),qm(m);break;case 27:ob(m.stateNode);case 26:case 5:uA(m,m.return),qm(m);break;case 22:m.memoizedState===null&&qm(m);break;case 30:qm(m);break;default:qm(m)}A=A.sibling}}function Wh(A,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var E=m.alternate,M=A,G=m,le=G.flags;switch(G.tag){case 0:case 11:case 15:Wh(M,G,x),Y1(4,G);break;case 1:if(Wh(M,G,x),E=G,M=E.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(it){_a(E,E.return,it)}if(E=G,M=E.updateQueue,M!==null){var be=E.stateNode;try{var Re=M.shared.hiddenCallbacks;if(Re!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Re.length;M++)Rn(Re[M],be)}catch(it){_a(E,E.return,it)}}x&&le&64&&iM(G),J1(G,G.return);break;case 27:uM(G);case 26:case 5:Wh(M,G,x),x&&E===null&&le&4&&lM(G),J1(G,G.return);break;case 12:Wh(M,G,x);break;case 13:Wh(M,G,x),x&&le&4&&mM(M,G);break;case 22:G.memoizedState===null&&Wh(M,G,x),J1(G,G.return);break;case 30:break;default:Wh(M,G,x)}m=m.sibling}}function Hk(A,m){var x=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(A!=null&&A.refCount++,x!=null&&Dm(x))}function Vk(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Dm(A))}function dA(A,m,x,E){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)vM(A,m,x,E),m=m.sibling}function vM(A,m,x,E){var M=m.flags;switch(m.tag){case 0:case 11:case 15:dA(A,m,x,E),M&2048&&Y1(9,m);break;case 1:dA(A,m,x,E);break;case 3:dA(A,m,x,E),M&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Dm(A)));break;case 12:if(M&2048){dA(A,m,x,E),A=m.stateNode;try{var G=m.memoizedProps,le=G.id,be=G.onPostCommit;typeof be=="function"&&be(le,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){_a(m,m.return,Re)}}else dA(A,m,x,E);break;case 13:dA(A,m,x,E);break;case 23:break;case 22:G=m.stateNode,le=m.alternate,m.memoizedState!==null?G._visibility&2?dA(A,m,x,E):Z1(A,m):G._visibility&2?dA(A,m,x,E):(G._visibility|=2,Lg(A,m,x,E,(m.subtreeFlags&10256)!==0)),M&2048&&Hk(le,m);break;case 24:dA(A,m,x,E),M&2048&&Vk(m.alternate,m);break;default:dA(A,m,x,E)}}function Lg(A,m,x,E,M){for(M=M&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var G=A,le=m,be=x,Re=E,it=le.flags;switch(le.tag){case 0:case 11:case 15:Lg(G,le,be,Re,M),Y1(8,le);break;case 23:break;case 22:var Ct=le.stateNode;le.memoizedState!==null?Ct._visibility&2?Lg(G,le,be,Re,M):Z1(G,le):(Ct._visibility|=2,Lg(G,le,be,Re,M)),M&&it&2048&&Hk(le.alternate,le);break;case 24:Lg(G,le,be,Re,M),M&&it&2048&&Vk(le.alternate,le);break;default:Lg(G,le,be,Re,M)}m=m.sibling}}function Z1(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=A,E=m,M=E.flags;switch(E.tag){case 22:Z1(x,E),M&2048&&Hk(E.alternate,E);break;case 24:Z1(x,E),M&2048&&Vk(E.alternate,E);break;default:Z1(x,E)}m=m.sibling}}var eb=8192;function Mg(A){if(A.subtreeFlags&eb)for(A=A.child;A!==null;)xM(A),A=A.sibling}function xM(A){switch(A.tag){case 26:Mg(A),A.flags&eb&&A.memoizedState!==null&&Yde(id,A.memoizedState,A.memoizedProps);break;case 5:Mg(A);break;case 3:case 4:var m=id;id=bE(A.stateNode.containerInfo),Mg(A),id=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=eb,eb=16777216,Mg(A),eb=m):Mg(A));break;default:Mg(A)}}function bM(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function tb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,wM(E,A)}bM(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)yM(A),A=A.sibling}function yM(A){switch(A.tag){case 0:case 11:case 15:tb(A),A.flags&2048&&Kh(9,A,A.return);break;case 3:tb(A);break;case 12:tb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,lE(A)):tb(A);break;default:tb(A)}}function lE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,wM(E,A)}bM(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:Kh(8,m,m.return),lE(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,lE(m));break;default:lE(m)}A=A.sibling}}function wM(A,m){for(;Li!==null;){var x=Li;switch(x.tag){case 0:case 11:case 15:Kh(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Dm(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Li=E;else e:for(x=A;Li!==null;){E=Li;var M=E.sibling,G=E.return;if(fM(E),E===x){Li=null;break e}if(M!==null){M.return=G,Li=M;break e}Li=G}}}var fde={getCacheForType:function(A){var m=Rs(Ps),x=m.data.get(A);return x===void 0&&(x=A(),m.data.set(A,x)),x}},hde=typeof WeakMap=="function"?WeakMap:Map,Aa=0,ja=null,Sn=null,Ln=0,fa=0,pc=null,Xh=!1,Ug=!1,zk=!1,_f=0,ys=0,Yh=0,Wm=0,$k=0,cu=0,Qg=0,rb=null,Pl=null,Gk=!1,Kk=0,cE=1/0,uE=null,Jh=null,oo=0,Zh=null,Hg=null,Vg=0,qk=0,Wk=null,EM=null,nb=0,Xk=null;function gc(){if((Aa&2)!==0&&Ln!==0)return Ln&-Ln;if(V.T!==null){var A=mf;return A!==0?A:nB()}return gn()}function CM(){cu===0&&(cu=(Ln&536870912)===0||Un?vt():536870912);var A=lu.current;return A!==null&&(A.flags|=32),cu}function vc(A,m,x){(A===ja&&(fa===2||fa===9)||A.cancelPendingCommit!==null)&&(zg(A,0),e0(A,Ln,cu,!1)),gt(A,x),((Aa&2)===0||A!==ja)&&(A===ja&&((Aa&2)===0&&(Wm|=x),ys===4&&e0(A,Ln,cu,!1)),AA(A))}function _M(A,m,x){if((Aa&6)!==0)throw Error(n(327));var E=!x&&(m&124)===0&&(m&A.expiredLanes)===0||Fn(A,m),M=E?gde(A,m):Zk(A,m,!0),G=E;do{if(M===0){Ug&&!E&&e0(A,m,0,!1);break}else{if(x=A.current.alternate,G&&!mde(x)){M=Zk(A,m,!1),G=!1;continue}if(M===2){if(G=m,A.errorRecoveryDisabledLanes&G)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){m=le;e:{var be=A;M=rb;var Re=be.current.memoizedState.isDehydrated;if(Re&&(zg(be,le).flags|=256),le=Zk(be,le,!1),le!==2){if(zk&&!Re){be.errorRecoveryDisabledLanes|=G,Wm|=G,M=4;break e}G=Pl,Pl=M,G!==null&&(Pl===null?Pl=G:Pl.push.apply(Pl,G))}M=le}if(G=!1,M!==2)continue}}if(M===1){zg(A,0),e0(A,m,0,!0);break}e:{switch(E=A,G=M,G){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:e0(E,m,cu,!Xh);break e;case 2:Pl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=Kk+300-je(),10<M)){if(e0(E,m,cu,!Xh),Vr(E,0,!0)!==0)break e;E.timeoutHandle=eU(SM.bind(null,E,x,Pl,uE,Gk,m,cu,Wm,Qg,Xh,G,2,-0,0),M);break e}SM(E,x,Pl,uE,Gk,m,cu,Wm,Qg,Xh,G,0,-0,0)}}break}while(!0);AA(A)}function SM(A,m,x,E,M,G,le,be,Re,it,Ct,It,At,ft){if(A.timeoutHandle=-1,It=m.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(ub={stylesheets:null,count:0,unsuspend:Xde},xM(m),It=Jde(),It!==null)){A.cancelPendingCommit=It(FM.bind(null,A,m,G,x,E,M,le,be,Re,Ct,1,At,ft)),e0(A,G,le,!it);return}FM(A,m,G,x,E,M,le,be,Re)}function mde(A){for(var m=A;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var M=x[E],G=M.getSnapshot;M=M.value;try{if(!ti(G(),M))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function e0(A,m,x,E){m&=~$k,m&=~Wm,A.suspendedLanes|=m,A.pingedLanes&=~m,E&&(A.warmLanes|=m),E=A.expirationTimes;for(var M=m;0<M;){var G=31-Ot(M),le=1<<G;E[G]=-1,M&=~le}x!==0&&Dt(A,x,m)}function dE(){return(Aa&6)===0?(ab(0),!1):!0}function Yk(){if(Sn!==null){if(fa===0)var A=Sn.return;else A=Sn,ed=ni=null,Tg(A),Rg=null,q1=0,A=Sn;for(;A!==null;)sM(A.alternate,A),A=A.return;Sn=null}}function zg(A,m){var x=A.timeoutHandle;x!==-1&&(A.timeoutHandle=-1,Fde(x)),x=A.cancelPendingCommit,x!==null&&(A.cancelPendingCommit=null,x()),Yk(),ja=A,Sn=x=ru(A.current,null),Ln=m,fa=0,pc=null,Xh=!1,Ug=Fn(A,m),zk=!1,Qg=cu=$k=Wm=Yh=ys=0,Pl=rb=null,Gk=!1,(m&8)!==0&&(m|=m&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=m;0<E;){var M=31-Ot(E),G=1<<M;m|=A[M],E&=~G}return _f=m,Il(),x}function NM(A,m){Sr=null,V.H=J2,m===me||m===ve?(m=Ke(),fa=3):m===ge?(m=Ke(),fa=4):fa=m===$8?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,pc=m,Sn===null&&(ys=1,nE(A,hn(m,A.current)))}function kM(){var A=V.H;return V.H=J2,A===null?J2:A}function BM(){var A=V.A;return V.A=fde,A}function Jk(){ys=4,Xh||(Ln&4194048)!==Ln&&lu.current!==null||(Ug=!0),(Yh&134217727)===0&&(Wm&134217727)===0||ja===null||e0(ja,Ln,cu,!1)}function Zk(A,m,x){var E=Aa;Aa|=2;var M=kM(),G=BM();(ja!==A||Ln!==m)&&(uE=null,zg(A,m)),m=!1;var le=ys;e:do try{if(fa!==0&&Sn!==null){var be=Sn,Re=pc;switch(fa){case 8:Yk(),le=6;break e;case 3:case 2:case 9:case 6:lu.current===null&&(m=!0);var it=fa;if(fa=0,pc=null,$g(A,be,Re,it),x&&Ug){le=0;break e}break;default:it=fa,fa=0,pc=null,$g(A,be,Re,it)}}pde(),le=ys;break}catch(Ct){NM(A,Ct)}while(!0);return m&&A.shellSuspendCounter++,ed=ni=null,Aa=E,V.H=M,V.A=G,Sn===null&&(ja=null,Ln=0,Il()),le}function pde(){for(;Sn!==null;)TM(Sn)}function gde(A,m){var x=Aa;Aa|=2;var E=kM(),M=BM();ja!==A||Ln!==m?(uE=null,cE=je()+500,zg(A,m)):Ug=Fn(A,m);e:do try{if(fa!==0&&Sn!==null){m=Sn;var G=pc;t:switch(fa){case 1:fa=0,pc=null,$g(A,m,G,1);break;case 2:case 9:if(ke(G)){fa=0,pc=null,jM(m);break}m=function(){fa!==2&&fa!==9||ja!==A||(fa=7),AA(A)},G.then(m,m);break e;case 3:fa=7;break e;case 4:fa=5;break e;case 7:ke(G)?(fa=0,pc=null,jM(m)):(fa=0,pc=null,$g(A,m,G,7));break;case 5:var le=null;switch(Sn.tag){case 26:le=Sn.memoizedState;case 5:case 27:var be=Sn;if(!le||AU(le)){fa=0,pc=null;var Re=be.sibling;if(Re!==null)Sn=Re;else{var it=be.return;it!==null?(Sn=it,AE(it)):Sn=null}break t}}fa=0,pc=null,$g(A,m,G,5);break;case 6:fa=0,pc=null,$g(A,m,G,6);break;case 8:Yk(),ys=6;break e;default:throw Error(n(462))}}vde();break}catch(Ct){NM(A,Ct)}while(!0);return ed=ni=null,V.H=E,V.A=M,Aa=x,Sn!==null?0:(ja=null,Ln=0,Il(),ys)}function vde(){for(;Sn!==null&&!_e();)TM(Sn)}function TM(A){var m=nM(A.alternate,A,_f);A.memoizedProps=A.pendingProps,m===null?AE(A):Sn=m}function jM(A){var m=A,x=m.alternate;switch(m.tag){case 15:case 0:m=Y8(x,m,m.pendingProps,m.type,void 0,Ln);break;case 11:m=Y8(x,m,m.pendingProps,m.type.render,m.ref,Ln);break;case 5:Tg(m);default:sM(x,m),m=Sn=jm(m,_f),m=nM(x,m,_f)}A.memoizedProps=A.pendingProps,m===null?AE(A):Sn=m}function $g(A,m,x,E){ed=ni=null,Tg(m),Rg=null,q1=0;var M=m.return;try{if(ode(A,M,m,x,Ln)){ys=1,nE(A,hn(x,A.current)),Sn=null;return}}catch(G){if(M!==null)throw Sn=M,G;ys=1,nE(A,hn(x,A.current)),Sn=null;return}m.flags&32768?(Un||E===1?A=!0:Ug||(Ln&536870912)!==0?A=!1:(Xh=A=!0,(E===2||E===9||E===3||E===6)&&(E=lu.current,E!==null&&E.tag===13&&(E.flags|=16384))),IM(m,A)):AE(m)}function AE(A){var m=A;do{if((m.flags&32768)!==0){IM(m,Xh);return}A=m.return;var x=cde(m.alternate,m,_f);if(x!==null){Sn=x;return}if(m=m.sibling,m!==null){Sn=m;return}Sn=m=A}while(m!==null);ys===0&&(ys=5)}function IM(A,m){do{var x=ude(A.alternate,A);if(x!==null){x.flags&=32767,Sn=x;return}if(x=A.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(A=A.sibling,A!==null)){Sn=A;return}Sn=A=x}while(A!==null);ys=6,Sn=null}function FM(A,m,x,E,M,G,le,be,Re){A.cancelPendingCommit=null;do fE();while(oo!==0);if((Aa&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(G=m.lanes|m.childLanes,G|=ts,dt(A,x,G,le,be,Re),A===ja&&(Sn=ja=null,Ln=0),Hg=m,Zh=A,Vg=x,qk=G,Wk=M,EM=E,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,wde(Oe,function(){return LM(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||E){E=V.T,V.T=null,M=Z.p,Z.p=2,le=Aa,Aa|=4;try{dde(A,m,x)}finally{Aa=le,Z.p=M,V.T=E}}oo=1,OM(),DM(),RM()}}function OM(){if(oo===1){oo=0;var A=Zh,m=Hg,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=V.T,V.T=null;var E=Z.p;Z.p=2;var M=Aa;Aa|=4;try{pM(m,A);var G=dB,le=no(A.containerInfo),be=G.focusedElem,Re=G.selectionRange;if(le!==be&&be&&be.ownerDocument&&Kd(be.ownerDocument.documentElement,be)){if(Re!==null&&yi(be)){var it=Re.start,Ct=Re.end;if(Ct===void 0&&(Ct=it),"selectionStart"in be)be.selectionStart=it,be.selectionEnd=Math.min(Ct,be.value.length);else{var It=be.ownerDocument||document,At=It&&It.defaultView||window;if(At.getSelection){var ft=At.getSelection(),zr=be.textContent.length,jr=Math.min(Re.start,zr),wa=Re.end===void 0?jr:Math.min(Re.end,zr);!ft.extend&&jr>wa&&(le=wa,wa=jr,jr=le);var We=Gu(be,jr),Qe=Gu(be,wa);if(We&&Qe&&(ft.rangeCount!==1||ft.anchorNode!==We.node||ft.anchorOffset!==We.offset||ft.focusNode!==Qe.node||ft.focusOffset!==Qe.offset)){var rt=It.createRange();rt.setStart(We.node,We.offset),ft.removeAllRanges(),jr>wa?(ft.addRange(rt),ft.extend(Qe.node,Qe.offset)):(rt.setEnd(Qe.node,Qe.offset),ft.addRange(rt))}}}}for(It=[],ft=be;ft=ft.parentNode;)ft.nodeType===1&&It.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<It.length;be++){var Nt=It[be];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}_E=!!uB,dB=uB=null}finally{Aa=M,Z.p=E,V.T=x}}A.current=m,oo=2}}function DM(){if(oo===2){oo=0;var A=Zh,m=Hg,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=V.T,V.T=null;var E=Z.p;Z.p=2;var M=Aa;Aa|=4;try{AM(A,m.alternate,m)}finally{Aa=M,Z.p=E,V.T=x}}oo=3}}function RM(){if(oo===4||oo===3){oo=0,he();var A=Zh,m=Hg,x=Vg,E=EM;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?oo=5:(oo=0,Hg=Zh=null,PM(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(Jh=null),Xr(x),m=m.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(mt,m,void 0,(m.current.flags&128)===128)}catch{}if(E!==null){m=V.T,M=Z.p,Z.p=2,V.T=null;try{for(var G=A.onRecoverableError,le=0;le<E.length;le++){var be=E[le];G(be.value,{componentStack:be.stack})}}finally{V.T=m,Z.p=M}}(Vg&3)!==0&&fE(),AA(A),M=A.pendingLanes,(x&4194090)!==0&&(M&42)!==0?A===Xk?nb++:(nb=0,Xk=A):nb=0,ab(0)}}function PM(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Dm(m)))}function fE(A){return OM(),DM(),RM(),LM()}function LM(){if(oo!==5)return!1;var A=Zh,m=qk;qk=0;var x=Xr(Vg),E=V.T,M=Z.p;try{Z.p=32>x?32:x,V.T=null,x=Wk,Wk=null;var G=Zh,le=Vg;if(oo=0,Hg=Zh=null,Vg=0,(Aa&6)!==0)throw Error(n(331));var be=Aa;if(Aa|=4,yM(G.current),vM(G,G.current,le,x),Aa=be,ab(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(mt,G)}catch{}return!0}finally{Z.p=M,V.T=E,PM(A,m)}}function MM(A,m,x){m=hn(x,m),m=kk(A.stateNode,m,2),A=Bt(A,m,2),A!==null&&(gt(A,2),AA(A))}function _a(A,m,x){if(A.tag===3)MM(A,A,x);else for(;m!==null;){if(m.tag===3){MM(m,A,x);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Jh===null||!Jh.has(E))){A=hn(x,A),x=V8(2),E=Bt(m,x,2),E!==null&&(z8(x,E,m,A),gt(E,2),AA(E));break}}m=m.return}}function eB(A,m,x){var E=A.pingCache;if(E===null){E=A.pingCache=new hde;var M=new Set;E.set(m,M)}else M=E.get(m),M===void 0&&(M=new Set,E.set(m,M));M.has(x)||(zk=!0,M.add(x),A=xde.bind(null,A,m,x),m.then(A,A))}function xde(A,m,x){var E=A.pingCache;E!==null&&E.delete(m),A.pingedLanes|=A.suspendedLanes&x,A.warmLanes&=~x,ja===A&&(Ln&x)===x&&(ys===4||ys===3&&(Ln&62914560)===Ln&&300>je()-Kk?(Aa&2)===0&&zg(A,0):$k|=x,Qg===Ln&&(Qg=0)),AA(A)}function UM(A,m){m===0&&(m=pt()),A=qu(A,m),A!==null&&(gt(A,m),AA(A))}function bde(A){var m=A.memoizedState,x=0;m!==null&&(x=m.retryLane),UM(A,x)}function yde(A,m){var x=0;switch(A.tag){case 13:var E=A.stateNode,M=A.memoizedState;M!==null&&(x=M.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(m),UM(A,x)}function wde(A,m){return Se(A,m)}var hE=null,Gg=null,tB=!1,mE=!1,rB=!1,Xm=0;function AA(A){A!==Gg&&A.next===null&&(Gg===null?hE=Gg=A:Gg=Gg.next=A),mE=!0,tB||(tB=!0,Cde())}function ab(A,m){if(!rB&&mE){rB=!0;do for(var x=!1,E=hE;E!==null;){if(A!==0){var M=E.pendingLanes;if(M===0)var G=0;else{var le=E.suspendedLanes,be=E.pingedLanes;G=(1<<31-Ot(42|A)+1)-1,G&=M&~(le&~be),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(x=!0,zM(E,G))}else G=Ln,G=Vr(E,E===ja?G:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(G&3)===0||Fn(E,G)||(x=!0,zM(E,G));E=E.next}while(x);rB=!1}}function Ede(){QM()}function QM(){mE=tB=!1;var A=0;Xm!==0&&(Ide()&&(A=Xm),Xm=0);for(var m=je(),x=null,E=hE;E!==null;){var M=E.next,G=HM(E,m);G===0?(E.next=null,x===null?hE=M:x.next=M,M===null&&(Gg=x)):(x=E,(A!==0||(G&3)!==0)&&(mE=!0)),E=M}ab(A)}function HM(A,m){for(var x=A.suspendedLanes,E=A.pingedLanes,M=A.expirationTimes,G=A.pendingLanes&-62914561;0<G;){var le=31-Ot(G),be=1<<le,Re=M[le];Re===-1?((be&x)===0||(be&E)!==0)&&(M[le]=Ir(be,m)):Re<=m&&(A.expiredLanes|=be),G&=~be}if(m=ja,x=Ln,x=Vr(A,A===m?x:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,x===0||A===m&&(fa===2||fa===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&De(E),A.callbackNode=null,A.callbackPriority=0;if((x&3)===0||Fn(A,x)){if(m=x&-x,m===A.callbackPriority)return m;switch(E!==null&&De(E),Xr(x)){case 2:case 8:x=ye;break;case 32:x=Oe;break;case 268435456:x=qe;break;default:x=Oe}return E=VM.bind(null,A),x=Se(x,E),A.callbackPriority=m,A.callbackNode=x,m}return E!==null&&E!==null&&De(E),A.callbackPriority=2,A.callbackNode=null,2}function VM(A,m){if(oo!==0&&oo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var x=A.callbackNode;if(fE()&&A.callbackNode!==x)return null;var E=Ln;return E=Vr(A,A===ja?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(_M(A,E,m),HM(A,je()),A.callbackNode!=null&&A.callbackNode===x?VM.bind(null,A):null)}function zM(A,m){if(fE())return null;_M(A,m,!0)}function Cde(){Ode(function(){(Aa&6)!==0?Se(Xe,Ede):QM()})}function nB(){return Xm===0&&(Xm=vt()),Xm}function $M(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:ac(""+A)}function GM(A,m){var x=m.ownerDocument.createElement("input");return x.name=m.name,x.value=m.value,A.id&&x.setAttribute("form",A.id),m.parentNode.insertBefore(x,m),A=new FormData(A),x.parentNode.removeChild(x),A}function _de(A,m,x,E,M){if(m==="submit"&&x&&x.stateNode===M){var G=$M((M[en]||null).action),le=E.submitter;le&&(m=(m=le[en]||null)?$M(m.formAction):le.getAttribute("formAction"),m!==null&&(G=m,le=null));var be=new Kc("action","action",null,E,M);A.push({event:be,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Xm!==0){var Re=le?GM(M,le):new FormData(M);ou(x,{pending:!0,data:Re,method:M.method,action:G},null,Re)}}else typeof G=="function"&&(be.preventDefault(),Re=le?GM(M,le):new FormData(M),ou(x,{pending:!0,data:Re,method:M.method,action:G},G,Re))},currentTarget:M}]})}}for(var aB=0;aB<cf.length;aB++){var sB=cf[aB],Sde=sB.toLowerCase(),Nde=sB[0].toUpperCase()+sB.slice(1);$a(Sde,"on"+Nde)}$a(Oh,"onAnimationEnd"),$a(Wd,"onAnimationIteration"),$a(Xd,"onAnimationStart"),$a("dblclick","onDoubleClick"),$a("focusin","onFocus"),$a("focusout","onBlur"),$a(Yd,"onTransitionRun"),$a(lf,"onTransitionStart"),$a(Dh,"onTransitionCancel"),$a(Jd,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kde=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sb));function KM(A,m){m=(m&4)!==0;for(var x=0;x<A.length;x++){var E=A[x],M=E.event;E=E.listeners;e:{var G=void 0;if(m)for(var le=E.length-1;0<=le;le--){var be=E[le],Re=be.instance,it=be.currentTarget;if(be=be.listener,Re!==G&&M.isPropagationStopped())break e;G=be,M.currentTarget=it;try{G(M)}catch(Ct){rE(Ct)}M.currentTarget=null,G=Re}else for(le=0;le<E.length;le++){if(be=E[le],Re=be.instance,it=be.currentTarget,be=be.listener,Re!==G&&M.isPropagationStopped())break e;G=be,M.currentTarget=it;try{G(M)}catch(Ct){rE(Ct)}M.currentTarget=null,G=Re}}}}function Nn(A,m){var x=m[Yr];x===void 0&&(x=m[Yr]=new Set);var E=A+"__bubble";x.has(E)||(qM(m,A,2,!1),x.add(E))}function iB(A,m,x){var E=0;m&&(E|=4),qM(x,A,E,m)}var pE="_reactListening"+Math.random().toString(36).slice(2);function oB(A){if(!A[pE]){A[pE]=!0,tt.forEach(function(x){x!=="selectionchange"&&(kde.has(x)||iB(x,!1,A),iB(x,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[pE]||(m[pE]=!0,iB("selectionchange",!1,m))}}function qM(A,m,x,E){switch(vU(m)){case 2:var M=tAe;break;case 8:M=rAe;break;default:M=yB}x=M.bind(null,m,x,A),M=void 0,!ro||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),E?M!==void 0?A.addEventListener(m,x,{capture:!0,passive:M}):A.addEventListener(m,x,!0):M!==void 0?A.addEventListener(m,x,{passive:M}):A.addEventListener(m,x,!1)}function lB(A,m,x,E,M){var G=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var be=E.stateNode.containerInfo;if(be===M)break;if(le===4)for(le=E.return;le!==null;){var Re=le.tag;if((Re===3||Re===4)&&le.stateNode.containerInfo===M)return;le=le.return}for(;be!==null;){if(le=Ne(be),le===null)return;if(Re=le.tag,Re===5||Re===6||Re===26||Re===27){E=G=le;continue e}be=be.parentNode}}E=E.return}Bh(function(){var it=G,Ct=ua(x),It=[];e:{var At=Ku.get(A);if(At!==void 0){var ft=Kc,zr=A;switch(A){case"keypress":if(Co(x)===0)break e;case"keydown":case"keyup":ft=lc;break;case"focusin":zr="focus",ft=Wc;break;case"focusout":zr="blur",ft=Wc;break;case"beforeblur":case"afterblur":ft=Wc;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd;break;case Oh:case Wd:case Xd:ft=Ud;break;case Jd:ft=de;break;case"scroll":case"scrollend":ft=tf;break;case"wheel":ft=Le;break;case"copy":case"cut":case"paste":ft=Qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=$u;break;case"toggle":case"beforetoggle":ft=xt}var jr=(m&4)!==0,wa=!jr&&(A==="scroll"||A==="scrollend"),We=jr?At!==null?At+"Capture":null:At;jr=[];for(var Qe=it,rt;Qe!==null;){var Nt=Qe;if(rt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||rt===null||We===null||(Nt=Ii(Qe,We),Nt!=null&&jr.push(ib(Qe,Nt,rt))),wa)break;Qe=Qe.return}0<jr.length&&(At=new ft(At,zr,null,x,Ct),It.push({event:At,listeners:jr}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ft=A==="mouseout"||A==="pointerout",At&&x!==Cl&&(zr=x.relatedTarget||x.fromElement)&&(Ne(zr)||zr[cr]))break e;if((ft||At)&&(At=Ct.window===Ct?Ct:(At=Ct.ownerDocument)?At.defaultView||At.parentWindow:window,ft?(zr=x.relatedTarget||x.toElement,ft=it,zr=zr?Ne(zr):null,zr!==null&&(wa=s(zr),jr=zr.tag,zr!==wa||jr!==5&&jr!==27&&jr!==6)&&(zr=null)):(ft=null,zr=it),ft!==zr)){if(jr=gs,Nt="onMouseLeave",We="onMouseEnter",Qe="mouse",(A==="pointerout"||A==="pointerover")&&(jr=$u,Nt="onPointerLeave",We="onPointerEnter",Qe="pointer"),wa=ft==null?At:Ye(ft),rt=zr==null?At:Ye(zr),At=new jr(Nt,Qe+"leave",ft,x,Ct),At.target=wa,At.relatedTarget=rt,Nt=null,Ne(Ct)===it&&(jr=new jr(We,Qe+"enter",zr,x,Ct),jr.target=rt,jr.relatedTarget=wa,Nt=jr),wa=Nt,ft&&zr)t:{for(jr=ft,We=zr,Qe=0,rt=jr;rt;rt=Kg(rt))Qe++;for(rt=0,Nt=We;Nt;Nt=Kg(Nt))rt++;for(;0<Qe-rt;)jr=Kg(jr),Qe--;for(;0<rt-Qe;)We=Kg(We),rt--;for(;Qe--;){if(jr===We||We!==null&&jr===We.alternate)break t;jr=Kg(jr),We=Kg(We)}jr=null}else jr=null;ft!==null&&WM(It,At,ft,jr,!1),zr!==null&&wa!==null&&WM(It,wa,zr,jr,!0)}}e:{if(At=it?Ye(it):window,ft=At.nodeName&&At.nodeName.toLowerCase(),ft==="select"||ft==="input"&&At.type==="file")var Ar=Ih;else if(na(At))if(nf)Ar=wg;else{Ar=I1;var yn=So}else ft=At.nodeName,!ft||ft.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?it&&ZA(it.elementType)&&(Ar=Ih):Ar=Bm;if(Ar&&(Ar=Ar(A,it))){Tl(It,Ar,x,Ct);break e}yn&&yn(A,At,it),A==="focusout"&&it&&At.type==="number"&&it.memoizedProps.value!=null&&zc(At,"number",At.value)}switch(yn=it?Ye(it):window,A){case"focusin":(na(yn)||yn.contentEditable==="true")&&(No=yn,cc=it,eu=null);break;case"focusout":eu=cc=No=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,za(It,x,Ct);break;case"selectionchange":if(qd)break;case"keydown":case"keyup":za(It,x,Ct)}var br;if(Zt)e:{switch(A){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else Tr?st(A,x)&&(Fr="onCompositionEnd"):A==="keydown"&&x.keyCode===229&&(Fr="onCompositionStart");Fr&&(se&&x.locale!=="ko"&&(Tr||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&Tr&&(br=ef()):(Eo=Ct,Gc="value"in Eo?Eo.value:Eo.textContent,Tr=!0)),yn=gE(it,Fr),0<yn.length&&(Fr=new Hu(Fr,A,null,x,Ct),It.push({event:Fr,listeners:yn}),br?Fr.data=br:(br=Ut(x),br!==null&&(Fr.data=br)))),(br=ee?bn(A,x):Kr(A,x))&&(Fr=gE(it,"onBeforeInput"),0<Fr.length&&(yn=new Hu("onBeforeInput","beforeinput",null,x,Ct),It.push({event:yn,listeners:Fr}),yn.data=br)),_de(It,A,it,x,Ct)}KM(It,m)})}function ib(A,m,x){return{instance:A,listener:m,currentTarget:x}}function gE(A,m){for(var x=m+"Capture",E=[];A!==null;){var M=A,G=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||G===null||(M=Ii(A,x),M!=null&&E.unshift(ib(A,M,G)),M=Ii(A,m),M!=null&&E.push(ib(A,M,G))),A.tag===3)return E;A=A.return}return[]}function Kg(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function WM(A,m,x,E,M){for(var G=m._reactName,le=[];x!==null&&x!==E;){var be=x,Re=be.alternate,it=be.stateNode;if(be=be.tag,Re!==null&&Re===E)break;be!==5&&be!==26&&be!==27||it===null||(Re=it,M?(it=Ii(x,G),it!=null&&le.unshift(ib(x,it,Re))):M||(it=Ii(x,G),it!=null&&le.push(ib(x,it,Re)))),x=x.return}le.length!==0&&A.push({event:m,listeners:le})}var Bde=/\r\n?/g,Tde=/\u0000|\uFFFD/g;function XM(A){return(typeof A=="string"?A:""+A).replace(Bde,`
`).replace(Tde,"")}function YM(A,m){return m=XM(m),XM(A)===m}function vE(){}function ya(A,m,x,E,M,G){switch(x){case"children":typeof E=="string"?m==="body"||m==="textarea"&&E===""||yo(A,E):(typeof E=="number"||typeof E=="bigint")&&m!=="body"&&yo(A,""+E);break;case"className":on(A,"class",E);break;case"tabIndex":on(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,x,E);break;case"style":JA(A,E,G);break;case"data":if(m!=="object"){on(A,"data",E);break}case"src":case"href":if(E===""&&(m!=="a"||x!=="href")){A.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=ac(""+E),A.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(x==="formAction"?(m!=="input"&&ya(A,m,"name",M.name,M,null),ya(A,m,"formEncType",M.formEncType,M,null),ya(A,m,"formMethod",M.formMethod,M,null),ya(A,m,"formTarget",M.formTarget,M,null)):(ya(A,m,"encType",M.encType,M,null),ya(A,m,"method",M.method,M,null),ya(A,m,"target",M.target,M,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=ac(""+E),A.setAttribute(x,E);break;case"onClick":E!=null&&(A.onclick=vE);break;case"onScroll":E!=null&&Nn("scroll",A);break;case"onScrollEnd":E!=null&&Nn("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}x=ac(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""+E):A.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""):A.removeAttribute(x);break;case"capture":case"download":E===!0?A.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,E):A.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(x,E):A.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(x):A.setAttribute(x,E);break;case"popover":Nn("beforetoggle",A),Nn("toggle",A),sn(A,"popover",E);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":sn(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=nc.get(x)||x,sn(A,x,E))}}function cB(A,m,x,E,M,G){switch(x){case"style":JA(A,E,G);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"children":typeof E=="string"?yo(A,E):(typeof E=="number"||typeof E=="bigint")&&yo(A,""+E);break;case"onScroll":E!=null&&Nn("scroll",A);break;case"onScrollEnd":E!=null&&Nn("scrollend",A);break;case"onClick":E!=null&&(A.onclick=vE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(M=x.endsWith("Capture"),m=x.slice(2,M?x.length-7:void 0),G=A[en]||null,G=G!=null?G[x]:null,typeof G=="function"&&A.removeEventListener(m,G,M),typeof E=="function")){typeof G!="function"&&G!==null&&(x in A?A[x]=null:A.hasAttribute(x)&&A.removeAttribute(x)),A.addEventListener(m,E,M);break e}x in A?A[x]=E:E===!0?A.setAttribute(x,""):sn(A,x,E)}}}function lo(A,m,x){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",A),Nn("load",A);var E=!1,M=!1,G;for(G in x)if(x.hasOwnProperty(G)){var le=x[G];if(le!=null)switch(G){case"src":E=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,G,le,x,null)}}M&&ya(A,m,"srcSet",x.srcSet,x,null),E&&ya(A,m,"src",x.src,x,null);return;case"input":Nn("invalid",A);var be=G=le=M=null,Re=null,it=null;for(E in x)if(x.hasOwnProperty(E)){var Ct=x[E];if(Ct!=null)switch(E){case"name":M=Ct;break;case"type":le=Ct;break;case"checked":Re=Ct;break;case"defaultChecked":it=Ct;break;case"value":G=Ct;break;case"defaultValue":be=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(n(137,m));break;default:ya(A,m,E,Ct,x,null)}}Vc(A,G,be,Re,it,le,M,!1),Hc(A);return;case"select":Nn("invalid",A),E=le=G=null;for(M in x)if(x.hasOwnProperty(M)&&(be=x[M],be!=null))switch(M){case"value":G=be;break;case"defaultValue":le=be;break;case"multiple":E=be;default:ya(A,m,M,be,x,null)}m=G,x=le,A.multiple=!!E,m!=null?El(A,!!E,m,!1):x!=null&&El(A,!!E,x,!0);return;case"textarea":Nn("invalid",A),G=M=E=null;for(le in x)if(x.hasOwnProperty(le)&&(be=x[le],be!=null))switch(le){case"value":E=be;break;case"defaultValue":M=be;break;case"children":G=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ya(A,m,le,be,x,null)}$c(A,E,M,G),Hc(A);return;case"option":for(Re in x)if(x.hasOwnProperty(Re)&&(E=x[Re],E!=null))switch(Re){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ya(A,m,Re,E,x,null)}return;case"dialog":Nn("beforetoggle",A),Nn("toggle",A),Nn("cancel",A),Nn("close",A);break;case"iframe":case"object":Nn("load",A);break;case"video":case"audio":for(E=0;E<sb.length;E++)Nn(sb[E],A);break;case"image":Nn("error",A),Nn("load",A);break;case"details":Nn("toggle",A);break;case"embed":case"source":case"link":Nn("error",A),Nn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in x)if(x.hasOwnProperty(it)&&(E=x[it],E!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,it,E,x,null)}return;default:if(ZA(m)){for(Ct in x)x.hasOwnProperty(Ct)&&(E=x[Ct],E!==void 0&&cB(A,m,Ct,E,x,void 0));return}}for(be in x)x.hasOwnProperty(be)&&(E=x[be],E!=null&&ya(A,m,be,E,x,null))}function jde(A,m,x,E){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,G=null,le=null,be=null,Re=null,it=null,Ct=null;for(ft in x){var It=x[ft];if(x.hasOwnProperty(ft)&&It!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Re=It;default:E.hasOwnProperty(ft)||ya(A,m,ft,null,E,It)}}for(var At in E){var ft=E[At];if(It=x[At],E.hasOwnProperty(At)&&(ft!=null||It!=null))switch(At){case"type":G=ft;break;case"name":M=ft;break;case"checked":it=ft;break;case"defaultChecked":Ct=ft;break;case"value":le=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,m));break;default:ft!==It&&ya(A,m,At,ft,E,It)}}xi(A,le,be,Re,it,Ct,G,M);return;case"select":ft=le=be=At=null;for(G in x)if(Re=x[G],x.hasOwnProperty(G)&&Re!=null)switch(G){case"value":break;case"multiple":ft=Re;default:E.hasOwnProperty(G)||ya(A,m,G,null,E,Re)}for(M in E)if(G=E[M],Re=x[M],E.hasOwnProperty(M)&&(G!=null||Re!=null))switch(M){case"value":At=G;break;case"defaultValue":be=G;break;case"multiple":le=G;default:G!==Re&&ya(A,m,M,G,E,Re)}m=be,x=le,E=ft,At!=null?El(A,!!x,At,!1):!!E!=!!x&&(m!=null?El(A,!!x,m,!0):El(A,!!x,x?[]:"",!1));return;case"textarea":ft=At=null;for(be in x)if(M=x[be],x.hasOwnProperty(be)&&M!=null&&!E.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ya(A,m,be,null,E,M)}for(le in E)if(M=E[le],G=x[le],E.hasOwnProperty(le)&&(M!=null||G!=null))switch(le){case"value":At=M;break;case"defaultValue":ft=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==G&&ya(A,m,le,M,E,G)}Vn(A,At,ft);return;case"option":for(var zr in x)if(At=x[zr],x.hasOwnProperty(zr)&&At!=null&&!E.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:ya(A,m,zr,null,E,At)}for(Re in E)if(At=E[Re],ft=x[Re],E.hasOwnProperty(Re)&&At!==ft&&(At!=null||ft!=null))switch(Re){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ya(A,m,Re,At,E,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jr in x)At=x[jr],x.hasOwnProperty(jr)&&At!=null&&!E.hasOwnProperty(jr)&&ya(A,m,jr,null,E,At);for(it in E)if(At=E[it],ft=x[it],E.hasOwnProperty(it)&&At!==ft&&(At!=null||ft!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ya(A,m,it,At,E,ft)}return;default:if(ZA(m)){for(var wa in x)At=x[wa],x.hasOwnProperty(wa)&&At!==void 0&&!E.hasOwnProperty(wa)&&cB(A,m,wa,void 0,E,At);for(Ct in E)At=E[Ct],ft=x[Ct],!E.hasOwnProperty(Ct)||At===ft||At===void 0&&ft===void 0||cB(A,m,Ct,At,E,ft);return}}for(var We in x)At=x[We],x.hasOwnProperty(We)&&At!=null&&!E.hasOwnProperty(We)&&ya(A,m,We,null,E,At);for(It in E)At=E[It],ft=x[It],!E.hasOwnProperty(It)||At===ft||At==null&&ft==null||ya(A,m,It,At,E,ft)}var uB=null,dB=null;function xE(A){return A.nodeType===9?A:A.ownerDocument}function JM(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZM(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function AB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var fB=null;function Ide(){var A=window.event;return A&&A.type==="popstate"?A===fB?!1:(fB=A,!0):(fB=null,!1)}var eU=typeof setTimeout=="function"?setTimeout:void 0,Fde=typeof clearTimeout=="function"?clearTimeout:void 0,tU=typeof Promise=="function"?Promise:void 0,Ode=typeof queueMicrotask=="function"?queueMicrotask:typeof tU<"u"?function(A){return tU.resolve(null).then(A).catch(Dde)}:eU;function Dde(A){setTimeout(function(){throw A})}function t0(A){return A==="head"}function rU(A,m){var x=m,E=0,M=0;do{var G=x.nextSibling;if(A.removeChild(x),G&&G.nodeType===8)if(x=G.data,x==="/$"){if(0<E&&8>E){x=E;var le=A.ownerDocument;if(x&1&&ob(le.documentElement),x&2&&ob(le.body),x&4)for(x=le.head,ob(x),le=x.firstChild;le;){var be=le.nextSibling,Re=le.nodeName;le[Ee]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&le.rel.toLowerCase()==="stylesheet"||x.removeChild(le),le=be}}if(M===0){A.removeChild(G),mb(m);return}M--}else x==="$"||x==="$?"||x==="$!"?M++:E=x.charCodeAt(0)-48;else E=0;x=G}while(x);mb(m)}function hB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var x=m;switch(m=m.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":hB(x),Ce(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}A.removeChild(x)}}function Rde(A,m,x,E){for(;A.nodeType===1;){var M=x;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Ee])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(G=A.getAttribute("rel"),G==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(G!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(G=A.getAttribute("src"),(G!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&G&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var G=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===G)return A}else return A;if(A=od(A.nextSibling),A===null)break}return null}function Pde(A,m,x){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!x||(A=od(A.nextSibling),A===null))return null;return A}function mB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Lde(A,m){var x=A.ownerDocument;if(A.data!=="$?"||x.readyState==="complete")m();else{var E=function(){m(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function od(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var pB=null;function nU(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var x=A.data;if(x==="$"||x==="$!"||x==="$?"){if(m===0)return A;m--}else x==="/$"&&m++}A=A.previousSibling}return null}function aU(A,m,x){switch(m=xE(x),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function ob(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);Ce(A)}var uu=new Map,sU=new Set;function bE(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Sf=Z.d;Z.d={f:Mde,r:Ude,D:Qde,C:Hde,L:Vde,m:zde,X:Gde,S:$de,M:Kde};function Mde(){var A=Sf.f(),m=dE();return A||m}function Ude(A){var m=Te(A);m!==null&&m.tag===5&&m.type==="form"?$m(m):Sf.r(A)}var qg=typeof document>"u"?null:document;function iU(A,m,x){var E=qg;if(E&&typeof m=="string"&&m){var M=On(m);M='link[rel="'+A+'"][href="'+M+'"]',typeof x=="string"&&(M+='[crossorigin="'+x+'"]'),sU.has(M)||(sU.add(M),A={rel:A,crossOrigin:x,href:m},E.querySelector(M)===null&&(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function Qde(A){Sf.D(A),iU("dns-prefetch",A,null)}function Hde(A,m){Sf.C(A,m),iU("preconnect",A,m)}function Vde(A,m,x){Sf.L(A,m,x);var E=qg;if(E&&A&&m){var M='link[rel="preload"][as="'+On(m)+'"]';m==="image"&&x&&x.imageSrcSet?(M+='[imagesrcset="'+On(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(M+='[imagesizes="'+On(x.imageSizes)+'"]')):M+='[href="'+On(A)+'"]';var G=M;switch(m){case"style":G=Wg(A);break;case"script":G=Xg(A)}uu.has(G)||(A=d({rel:"preload",href:m==="image"&&x&&x.imageSrcSet?void 0:A,as:m},x),uu.set(G,A),E.querySelector(M)!==null||m==="style"&&E.querySelector(lb(G))||m==="script"&&E.querySelector(cb(G))||(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function zde(A,m){Sf.m(A,m);var x=qg;if(x&&A){var E=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+On(E)+'"][href="'+On(A)+'"]',G=M;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=Xg(A)}if(!uu.has(G)&&(A=d({rel:"modulepreload",href:A},m),uu.set(G,A),x.querySelector(M)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(cb(G)))return}E=x.createElement("link"),lo(E,"link",A),$e(E),x.head.appendChild(E)}}}function $de(A,m,x){Sf.S(A,m,x);var E=qg;if(E&&A){var M=ut(E).hoistableStyles,G=Wg(A);m=m||"default";var le=M.get(G);if(!le){var be={loading:0,preload:null};if(le=E.querySelector(lb(G)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},x),(x=uu.get(G))&&gB(A,x);var Re=le=E.createElement("link");$e(Re),lo(Re,"link",A),Re._p=new Promise(function(it,Ct){Re.onload=it,Re.onerror=Ct}),Re.addEventListener("load",function(){be.loading|=1}),Re.addEventListener("error",function(){be.loading|=2}),be.loading|=4,yE(le,m,E)}le={type:"stylesheet",instance:le,count:1,state:be},M.set(G,le)}}}function Gde(A,m){Sf.X(A,m);var x=qg;if(x&&A){var E=ut(x).hoistableScripts,M=Xg(A),G=E.get(M);G||(G=x.querySelector(cb(M)),G||(A=d({src:A,async:!0},m),(m=uu.get(M))&&vB(A,m),G=x.createElement("script"),$e(G),lo(G,"link",A),x.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},E.set(M,G))}}function Kde(A,m){Sf.M(A,m);var x=qg;if(x&&A){var E=ut(x).hoistableScripts,M=Xg(A),G=E.get(M);G||(G=x.querySelector(cb(M)),G||(A=d({src:A,async:!0,type:"module"},m),(m=uu.get(M))&&vB(A,m),G=x.createElement("script"),$e(G),lo(G,"link",A),x.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},E.set(M,G))}}function oU(A,m,x,E){var M=(M=ie.current)?bE(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(m=Wg(x.href),x=ut(M).hoistableStyles,E=x.get(m),E||(E={type:"style",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){A=Wg(x.href);var G=ut(M).hoistableStyles,le=G.get(A);if(le||(M=M.ownerDocument||M,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(A,le),(G=M.querySelector(lb(A)))&&!G._p&&(le.instance=G,le.state.loading=5),uu.has(A)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},uu.set(A,x),G||qde(M,A,x,le.state))),m&&E===null)throw Error(n(528,""));return le}if(m&&E!==null)throw Error(n(529,""));return null;case"script":return m=x.async,x=x.src,typeof x=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Xg(x),x=ut(M).hoistableScripts,E=x.get(m),E||(E={type:"script",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Wg(A){return'href="'+On(A)+'"'}function lb(A){return'link[rel="stylesheet"]['+A+"]"}function lU(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function qde(A,m,x,E){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?E.loading=1:(m=A.createElement("link"),E.preload=m,m.addEventListener("load",function(){return E.loading|=1}),m.addEventListener("error",function(){return E.loading|=2}),lo(m,"link",x),$e(m),A.head.appendChild(m))}function Xg(A){return'[src="'+On(A)+'"]'}function cb(A){return"script[async]"+A}function cU(A,m,x){if(m.count++,m.instance===null)switch(m.type){case"style":var E=A.querySelector('style[data-href~="'+On(x.href)+'"]');if(E)return m.instance=E,$e(E),E;var M=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),$e(E),lo(E,"style",M),yE(E,x.precedence,A),m.instance=E;case"stylesheet":M=Wg(x.href);var G=A.querySelector(lb(M));if(G)return m.state.loading|=4,m.instance=G,$e(G),G;E=lU(x),(M=uu.get(M))&&gB(E,M),G=(A.ownerDocument||A).createElement("link"),$e(G);var le=G;return le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),lo(G,"link",E),m.state.loading|=4,yE(G,x.precedence,A),m.instance=G;case"script":return G=Xg(x.src),(M=A.querySelector(cb(G)))?(m.instance=M,$e(M),M):(E=x,(M=uu.get(G))&&(E=d({},x),vB(E,M)),A=A.ownerDocument||A,M=A.createElement("script"),$e(M),lo(M,"link",E),A.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(E=m.instance,m.state.loading|=4,yE(E,x.precedence,A));return m.instance}function yE(A,m,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=E.length?E[E.length-1]:null,G=M,le=0;le<E.length;le++){var be=E[le];if(be.dataset.precedence===m)G=be;else if(G!==M)break}G?G.parentNode.insertBefore(A,G.nextSibling):(m=x.nodeType===9?x.head:x,m.insertBefore(A,m.firstChild))}function gB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function vB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var wE=null;function uU(A,m,x){if(wE===null){var E=new Map,M=wE=new Map;M.set(x,E)}else M=wE,E=M.get(x),E||(E=new Map,M.set(x,E));if(E.has(A))return E;for(E.set(A,null),x=x.getElementsByTagName(A),M=0;M<x.length;M++){var G=x[M];if(!(G[Ee]||G[rn]||A==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var le=G.getAttribute(m)||"";le=A+le;var be=E.get(le);be?be.push(G):E.set(le,[G])}}return E}function dU(A,m,x){A=A.ownerDocument||A,A.head.insertBefore(x,m==="title"?A.querySelector("head > title"):null)}function Wde(A,m,x){if(x===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function AU(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var ub=null;function Xde(){}function Yde(A,m,x){if(ub===null)throw Error(n(475));var E=ub;if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var M=Wg(x.href),G=A.querySelector(lb(M));if(G){A=G._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=EE.bind(E),A.then(E,E)),m.state.loading|=4,m.instance=G,$e(G);return}G=A.ownerDocument||A,x=lU(x),(M=uu.get(M))&&gB(x,M),G=G.createElement("link"),$e(G);var le=G;le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),lo(G,"link",x),m.instance=G}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(E.count++,m=EE.bind(E),A.addEventListener("load",m),A.addEventListener("error",m))}}function Jde(){if(ub===null)throw Error(n(475));var A=ub;return A.stylesheets&&A.count===0&&xB(A,A.stylesheets),0<A.count?function(m){var x=setTimeout(function(){if(A.stylesheets&&xB(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(x)}}:null}function EE(){if(this.count--,this.count===0){if(this.stylesheets)xB(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var CE=null;function xB(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,CE=new Map,m.forEach(Zde,A),CE=null,EE.call(A))}function Zde(A,m){if(!(m.state.loading&4)){var x=CE.get(A);if(x)var E=x.get(null);else{x=new Map,CE.set(A,x);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<M.length;G++){var le=M[G];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(x.set(le.dataset.precedence,le),E=le)}E&&x.set(null,E)}M=m.instance,le=M.getAttribute("data-precedence"),G=x.get(le)||E,G===E&&x.set(null,M),x.set(le,M),this.count++,E=EE.bind(this),M.addEventListener("load",E),M.addEventListener("error",E),G?G.parentNode.insertBefore(M,G.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),m.state.loading|=4}}var db={$$typeof:S,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function eAe(A,m,x,E,M,G,le,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=E,this.onUncaughtError=M,this.onCaughtError=G,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function fU(A,m,x,E,M,G,le,be,Re,it,Ct,It){return A=new eAe(A,m,x,le,be,Re,it,It),m=1,G===!0&&(m|=24),G=Ri(3,null,null,m),A.current=G,G.stateNode=A,m=O1(),m.refCount++,A.pooledCache=m,m.refCount++,G.memoizedState={element:E,isDehydrated:x,cache:m},Ue(G),A}function hU(A){return A?(A=ri,A):ri}function mU(A,m,x,E,M,G){M=hU(M),E.context===null?E.context=M:E.pendingContext=M,E=Et(m),E.payload={element:x},G=G===void 0?null:G,G!==null&&(E.callback=G),x=Bt(A,E,m),x!==null&&(vc(x,A,m),St(x,A,m))}function pU(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var x=A.retryLane;A.retryLane=x!==0&&x<m?x:m}}function bB(A,m){pU(A,m),(A=A.alternate)&&pU(A,m)}function gU(A){if(A.tag===13){var m=qu(A,67108864);m!==null&&vc(m,A,67108864),bB(A,67108864)}}var _E=!0;function tAe(A,m,x,E){var M=V.T;V.T=null;var G=Z.p;try{Z.p=2,yB(A,m,x,E)}finally{Z.p=G,V.T=M}}function rAe(A,m,x,E){var M=V.T;V.T=null;var G=Z.p;try{Z.p=8,yB(A,m,x,E)}finally{Z.p=G,V.T=M}}function yB(A,m,x,E){if(_E){var M=wB(E);if(M===null)lB(A,m,E,SE,x),xU(A,E);else if(aAe(M,A,m,x,E))E.stopPropagation();else if(xU(A,E),m&4&&-1<nAe.indexOf(A)){for(;M!==null;){var G=Te(M);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var le=Cr(G.pendingLanes);if(le!==0){var be=G;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var Re=1<<31-Ot(le);be.entanglements[1]|=Re,le&=~Re}AA(G),(Aa&6)===0&&(cE=je()+500,ab(0))}}break;case 13:be=qu(G,2),be!==null&&vc(be,G,2),dE(),bB(G,2)}if(G=wB(E),G===null&&lB(A,m,E,SE,x),G===M)break;M=G}M!==null&&E.stopPropagation()}else lB(A,m,E,null,x)}}function wB(A){return A=ua(A),EB(A)}var SE=null;function EB(A){if(SE=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var x=m.tag;if(x===13){if(A=i(m),A!==null)return A;A=null}else if(x===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return SE=A,null}function vU(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case ye:return 8;case Oe:case Pe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var CB=!1,r0=null,n0=null,a0=null,Ab=new Map,fb=new Map,s0=[],nAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xU(A,m){switch(A){case"focusin":case"focusout":r0=null;break;case"dragenter":case"dragleave":n0=null;break;case"mouseover":case"mouseout":a0=null;break;case"pointerover":case"pointerout":Ab.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":fb.delete(m.pointerId)}}function hb(A,m,x,E,M,G){return A===null||A.nativeEvent!==G?(A={blockedOn:m,domEventName:x,eventSystemFlags:E,nativeEvent:G,targetContainers:[M]},m!==null&&(m=Te(m),m!==null&&gU(m)),A):(A.eventSystemFlags|=E,m=A.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),A)}function aAe(A,m,x,E,M){switch(m){case"focusin":return r0=hb(r0,A,m,x,E,M),!0;case"dragenter":return n0=hb(n0,A,m,x,E,M),!0;case"mouseover":return a0=hb(a0,A,m,x,E,M),!0;case"pointerover":var G=M.pointerId;return Ab.set(G,hb(Ab.get(G)||null,A,m,x,E,M)),!0;case"gotpointercapture":return G=M.pointerId,fb.set(G,hb(fb.get(G)||null,A,m,x,E,M)),!0}return!1}function bU(A){var m=Ne(A.target);if(m!==null){var x=s(m);if(x!==null){if(m=x.tag,m===13){if(m=i(x),m!==null){A.blockedOn=m,vn(A.priority,function(){if(x.tag===13){var E=gc();E=Pr(E);var M=qu(x,E);M!==null&&vc(M,x,E),bB(x,E)}});return}}else if(m===3&&x.stateNode.current.memoizedState.isDehydrated){A.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}A.blockedOn=null}function NE(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var x=wB(A.nativeEvent);if(x===null){x=A.nativeEvent;var E=new x.constructor(x.type,x);Cl=E,x.target.dispatchEvent(E),Cl=null}else return m=Te(x),m!==null&&gU(m),A.blockedOn=x,!1;m.shift()}return!0}function yU(A,m,x){NE(A)&&x.delete(m)}function sAe(){CB=!1,r0!==null&&NE(r0)&&(r0=null),n0!==null&&NE(n0)&&(n0=null),a0!==null&&NE(a0)&&(a0=null),Ab.forEach(yU),fb.forEach(yU)}function kE(A,m){A.blockedOn===m&&(A.blockedOn=null,CB||(CB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sAe)))}var BE=null;function wU(A){BE!==A&&(BE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){BE===A&&(BE=null);for(var m=0;m<A.length;m+=3){var x=A[m],E=A[m+1],M=A[m+2];if(typeof E!="function"){if(EB(E||x)===null)continue;break}var G=Te(x);G!==null&&(A.splice(m,3),m-=3,ou(G,{pending:!0,data:M,method:x.method,action:E},E,M))}}))}function mb(A){function m(Re){return kE(Re,A)}r0!==null&&kE(r0,A),n0!==null&&kE(n0,A),a0!==null&&kE(a0,A),Ab.forEach(m),fb.forEach(m);for(var x=0;x<s0.length;x++){var E=s0[x];E.blockedOn===A&&(E.blockedOn=null)}for(;0<s0.length&&(x=s0[0],x.blockedOn===null);)bU(x),x.blockedOn===null&&s0.shift();if(x=(A.ownerDocument||A).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var M=x[E],G=x[E+1],le=M[en]||null;if(typeof G=="function")le||wU(x);else if(le){var be=null;if(G&&G.hasAttribute("formAction")){if(M=G,le=G[en]||null)be=le.formAction;else if(EB(M)!==null)continue}else be=le.action;typeof be=="function"?x[E+1]=be:(x.splice(E,3),E-=3),wU(x)}}}function _B(A){this._internalRoot=A}TE.prototype.render=_B.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var x=m.current,E=gc();mU(x,E,A,m,null,null)},TE.prototype.unmount=_B.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;mU(A.current,2,null,A,null,null),dE(),m[cr]=null}};function TE(A){this._internalRoot=A}TE.prototype.unstable_scheduleHydration=function(A){if(A){var m=gn();A={blockedOn:null,target:A,priority:m};for(var x=0;x<s0.length&&m!==0&&m<s0[x].priority;x++);s0.splice(x,0,A),x===0&&bU(A)}};var EU=t.version;if(EU!=="19.1.1")throw Error(n(527,EU,"19.1.1"));Z.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var iAe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jE.isDisabled&&jE.supportsFiber)try{mt=jE.inject(iAe),Tt=jE}catch{}}return gb.createRoot=function(A,m){if(!a(A))throw Error(n(299));var x=!1,E="",M=M8,G=U8,le=Q8,be=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(le=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=fU(A,1,!1,null,null,x,E,M,G,le,be,null),A[cr]=m.current,oB(A),new _B(m)},gb.hydrateRoot=function(A,m,x){if(!a(A))throw Error(n(299));var E=!1,M="",G=M8,le=U8,be=Q8,Re=null,it=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onUncaughtError!==void 0&&(G=x.onUncaughtError),x.onCaughtError!==void 0&&(le=x.onCaughtError),x.onRecoverableError!==void 0&&(be=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Re=x.unstable_transitionCallbacks),x.formState!==void 0&&(it=x.formState)),m=fU(A,1,!0,m,x??null,E,M,G,le,be,Re,it),m.context=hU(null),x=m.current,E=gc(),E=Pr(E),M=Et(E),M.callback=null,Bt(x,M,E),x=E,m.current.lanes=x,gt(m,x),AA(m),A[cr]=m.current,oB(A),new TE(m)},gb.version="19.1.1",gb}var FU;function bAe(){if(FU)return BB.exports;FU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),BB.exports=xAe(),BB.exports}var yAe=bAe();const wAe=yl(yAe),EAe=()=>{};var OU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},CAe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},oX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,l=a+2<e.length,u=l?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;l||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(iX(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):CAe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new _Ae;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SAe=function(e){const t=iX(e);return oX.encodeByteArray(t,!0)},J_=function(e){return SAe(e).replace(/\./g,"")},lX=function(e){try{return oX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kAe=()=>NAe().__FIREBASE_DEFAULTS__,BAe=()=>{if(typeof process>"u"||typeof OU>"u")return;const e=OU.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},TAe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&lX(e[1]);return t&&JSON.parse(t)},nN=()=>{try{return EAe()||kAe()||BAe()||TAe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cX=e=>{var t,r;return(r=(t=nN())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},SO=e=>{const t=cX(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},uX=()=>{var e;return(e=nN())==null?void 0:e.config},dX=e=>{var t;return(t=nN())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aN(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[J_(JSON.stringify(r)),J_(JSON.stringify(i)),""].join(".")}const fy={};function IAe(){const e={prod:[],emulator:[]};for(const t of Object.keys(fy))fy[t]?e.emulator.push(t):e.prod.push(t);return e}function FAe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let DU=!1;function sN(e,t){if(typeof window>"u"||typeof document>"u"||!ph(window.location.host)||fy[e]===t||fy[e]||DU)return;fy[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=IAe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{DU=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=FAe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),v=r("learnmore"),b=document.getElementById(v)||document.createElement("a"),y=r("preprendIcon"),C=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;o(S),d(b,v);const I=u();l(C,y),S.append(C,g,b,I),document.body.appendChild(S)}s?(g.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function DAe(){var t;const e=(t=nN())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PAe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function LAe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MAe(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function UAe(){return!DAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QAe(){try{return typeof indexedDB=="object"}catch{return!1}}function HAe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VAe="FirebaseError";class Td extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=VAe,Object.setPrototypeOf(this,Td.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mw.prototype.create)}}class Mw{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?zAe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Td(a,o,n)}}function zAe(e,t){return e.replace($Ae,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const $Ae=/\{\$([^}]+)}/g;function GAe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function X0(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(RU(s)&&RU(i)){if(!X0(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function RU(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function zb(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function $b(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function KAe(e,t){const r=new qAe(e,t);return r.subscribe.bind(r)}class qAe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");WAe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=FB),a.error===void 0&&(a.error=FB),a.complete===void 0&&(a.complete=FB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WAe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function FB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class Zf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XAe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new jAe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(JAe(t))try{this.getOrInitializeService({instanceIdentifier:ep})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=ep){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ep){return this.instances.has(t)}getOptions(t=ep){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:YAe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ep){return this.component?this.component.multipleInstances?t:ep:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YAe(e){return e===ep?void 0:e}function JAe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZAe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new XAe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bn||(Bn={}));const efe={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},tfe=Bn.INFO,rfe={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},nfe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=rfe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let NO=class{constructor(t){this.name=t,this._logLevel=tfe,this._logHandler=nfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?efe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...t),this._logHandler(this,Bn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...t),this._logHandler(this,Bn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...t),this._logHandler(this,Bn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...t),this._logHandler(this,Bn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...t),this._logHandler(this,Bn.ERROR,...t)}};const afe=(e,t)=>t.some(r=>e instanceof r);let PU,LU;function sfe(){return PU||(PU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ife(){return LU||(LU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fX=new WeakMap,yI=new WeakMap,hX=new WeakMap,OB=new WeakMap,kO=new WeakMap;function ofe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(R0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&fX.set(r,e)}).catch(()=>{}),kO.set(t,e),t}function lfe(e){if(yI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});yI.set(e,t)}let wI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return yI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||hX.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return R0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cfe(e){wI=e(wI)}function ufe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(DB(this),t,...r);return hX.set(n,t.sort?t.sort():[t]),R0(n)}:ife().includes(e)?function(...t){return e.apply(DB(this),t),R0(fX.get(this))}:function(...t){return R0(e.apply(DB(this),t))}}function dfe(e){return typeof e=="function"?ufe(e):(e instanceof IDBTransaction&&lfe(e),afe(e,sfe())?new Proxy(e,wI):e)}function R0(e){if(e instanceof IDBRequest)return ofe(e);if(OB.has(e))return OB.get(e);const t=dfe(e);return t!==e&&(OB.set(e,t),kO.set(t,e)),t}const DB=e=>kO.get(e);function Afe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=R0(i);return n&&i.addEventListener("upgradeneeded",l=>{n(R0(i.result),l.oldVersion,l.newVersion,R0(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const ffe=["get","getKey","getAll","getAllKeys","count"],hfe=["put","add","delete","clear"],RB=new Map;function MU(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(RB.get(t))return RB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=hfe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||ffe.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return RB.set(t,s),s}cfe(e=>({...e,get:(t,r,n)=>MU(t,r)||e.get(t,r,n),has:(t,r)=>!!MU(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(pfe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function pfe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const EI="@firebase/app",UU="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new NO("@firebase/app"),gfe="@firebase/app-compat",vfe="@firebase/analytics-compat",xfe="@firebase/analytics",bfe="@firebase/app-check-compat",yfe="@firebase/app-check",wfe="@firebase/auth",Efe="@firebase/auth-compat",Cfe="@firebase/database",_fe="@firebase/data-connect",Sfe="@firebase/database-compat",Nfe="@firebase/functions",kfe="@firebase/functions-compat",Bfe="@firebase/installations",Tfe="@firebase/installations-compat",jfe="@firebase/messaging",Ife="@firebase/messaging-compat",Ffe="@firebase/performance",Ofe="@firebase/performance-compat",Dfe="@firebase/remote-config",Rfe="@firebase/remote-config-compat",Pfe="@firebase/storage",Lfe="@firebase/storage-compat",Mfe="@firebase/firestore",Ufe="@firebase/ai",Qfe="@firebase/firestore-compat",Hfe="firebase",Vfe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="[DEFAULT]",zfe={[EI]:"fire-core",[gfe]:"fire-core-compat",[xfe]:"fire-analytics",[vfe]:"fire-analytics-compat",[yfe]:"fire-app-check",[bfe]:"fire-app-check-compat",[wfe]:"fire-auth",[Efe]:"fire-auth-compat",[Cfe]:"fire-rtdb",[_fe]:"fire-data-connect",[Sfe]:"fire-rtdb-compat",[Nfe]:"fire-fn",[kfe]:"fire-fn-compat",[Bfe]:"fire-iid",[Tfe]:"fire-iid-compat",[jfe]:"fire-fcm",[Ife]:"fire-fcm-compat",[Ffe]:"fire-perf",[Ofe]:"fire-perf-compat",[Dfe]:"fire-rc",[Rfe]:"fire-rc-compat",[Pfe]:"fire-gcs",[Lfe]:"fire-gcs-compat",[Mfe]:"fire-fst",[Qfe]:"fire-fst-compat",[Ufe]:"fire-vertex","fire-js":"fire-js",[Hfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map,$fe=new Map,_I=new Map;function QU(e,t){try{e.container.addComponent(t)}catch(r){eh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Y0(e){const t=e.name;if(_I.has(t))return eh.debug(`There were multiple attempts to register component ${t}.`),!1;_I.set(t,e);for(const r of Qy.values())QU(r,e);for(const r of $fe.values())QU(r,e);return!0}function Qw(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Sc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gfe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},P0=new Mw("app","Firebase",Gfe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kfe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw P0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=Vfe;function BO(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:CI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw P0.create("bad-app-name",{appName:String(a)});if(r||(r=uX()),!r)throw P0.create("no-options");const s=Qy.get(a);if(s){if(X0(r,s.options)&&X0(n,s.config))return s;throw P0.create("duplicate-app",{appName:a})}const i=new ZAe(a);for(const l of _I.values())i.addComponent(l);const o=new Kfe(r,n,i);return Qy.set(a,o),o}function iN(e=CI){const t=Qy.get(e);if(!t&&e===CI&&uX())return BO();if(!t)throw P0.create("no-app",{appName:e});return t}function HU(){return Array.from(Qy.values())}function ju(e,t,r){let n=zfe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eh.warn(i.join(" "));return}Y0(new Zf(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qfe="firebase-heartbeat-database",Wfe=1,Hy="firebase-heartbeat-store";let PB=null;function mX(){return PB||(PB=Afe(qfe,Wfe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Hy)}catch(r){console.warn(r)}}}}).catch(e=>{throw P0.create("idb-open",{originalErrorMessage:e.message})})),PB}async function Xfe(e){try{const r=(await mX()).transaction(Hy),n=await r.objectStore(Hy).get(pX(e));return await r.done,n}catch(t){if(t instanceof Td)eh.warn(t.message);else{const r=P0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});eh.warn(r.message)}}}async function VU(e,t){try{const n=(await mX()).transaction(Hy,"readwrite");await n.objectStore(Hy).put(t,pX(e)),await n.done}catch(r){if(r instanceof Td)eh.warn(r.message);else{const n=P0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});eh.warn(n.message)}}}function pX(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yfe=1024,Jfe=30;class Zfe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new the(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zU();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Jfe){const i=rhe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){eh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=zU(),{heartbeatsToSend:n,unsentEntries:a}=ehe(this._heartbeatsCache.heartbeats),s=J_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return eh.warn(r),""}}}function zU(){return new Date().toISOString().substring(0,10)}function ehe(e,t=Yfe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),$U(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),$U(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class the{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QAe()?HAe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Xfe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return VU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return VU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function $U(e){return J_(JSON.stringify({version:2,heartbeats:e})).length}function rhe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nhe(e){Y0(new Zf("platform-logger",t=>new mfe(t),"PRIVATE")),Y0(new Zf("heartbeat",t=>new Zfe(t),"PRIVATE")),ju(EI,UU,e),ju(EI,UU,"esm2020"),ju("fire-js","")}nhe("");function gX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ahe=gX,vX=new Mw("auth","Firebase",gX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new NO("@firebase/auth");function she(e,...t){Z_.logLevel<=Bn.WARN&&Z_.warn(`Auth (${ag}): ${e}`,...t)}function o_(e,...t){Z_.logLevel<=Bn.ERROR&&Z_.error(`Auth (${ag}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(e,...t){throw TO(e,...t)}function FA(e,...t){return TO(e,...t)}function xX(e,t,r){const n={...ahe(),[t]:r};return new Mw("auth","Firebase",n).create(t,{appName:e.name})}function L0(e){return xX(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TO(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return vX.create(e,...t)}function Qr(e,t,...r){if(!e)throw TO(t,...r)}function Rf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw o_(t),new Error(t)}function th(e,t){e||Rf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function ihe(){return GU()==="http:"||GU()==="https:"}function GU(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ohe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ihe()||PAe()||"connection"in navigator)?navigator.onLine:!0}function lhe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,r){this.shortDelay=t,this.longDelay=r,th(r>t,"Short delay should be less than long delay!"),this.isMobile=OAe()||LAe()}get(){return ohe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(e,t){th(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const che={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uhe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dhe=new Hw(3e4,6e4);function mm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function gh(e,t,r,n,a={}){return yX(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=Uw({key:e.config.apiKey,...i}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...s};return RAe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&ph(e.emulatorConfig.host)&&(u.credentials="include"),bX.fetch()(await wX(e,e.config.apiHost,r,o),u)})}async function yX(e,t,r){e._canInitEmulator=!1;const n={...che,...t};try{const a=new fhe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw IE(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw IE(e,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw IE(e,"email-already-in-use",i);if(l==="USER_DISABLED")throw IE(e,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xX(e,d,u);Nd(e,d)}}catch(a){if(a instanceof Td)throw a;Nd(e,"network-request-failed",{message:String(a)})}}async function oN(e,t,r,n,a={}){const s=await gh(e,t,r,n,a);return"mfaPendingCredential"in s&&Nd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function wX(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?jO(e.config,a):`${e.config.apiScheme}://${a}`;return uhe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function Ahe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fhe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(FA(this.auth,"network-request-failed")),dhe.get())})}}function IE(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=FA(e,t,n);return a.customData._tokenResponse=r,a}function KU(e){return e!==void 0&&e.enterprise!==void 0}class hhe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Ahe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mhe(e,t){return gh(e,"GET","/v2/recaptchaConfig",mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function phe(e,t){return gh(e,"POST","/v1/accounts:delete",t)}async function eS(e,t){return gh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ghe(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=IO(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:hy(LB(a.auth_time)),issuedAtTime:hy(LB(a.iat)),expirationTime:hy(LB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function LB(e){return Number(e)*1e3}function IO(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return o_("JWT malformed, contained fewer than 3 sections"),null;try{const a=lX(r);return a?JSON.parse(a):(o_("Failed to decode base64 JWT payload"),null)}catch(a){return o_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qU(e){const t=IO(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Td&&vhe(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function vhe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=hy(this.lastLoginAt),this.creationTime=hy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Vy(e,eS(t,{idToken:r}));Qr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?EX(a.providerUserInfo):[],i=yhe(e.providerData,s),o=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new NI(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function bhe(e){const t=Yn(e);await tS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yhe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function EX(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function whe(e,t){const r=await yX(e,{},async()=>{const n=Uw({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await wX(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&ph(e.emulatorConfig.host)&&(l.credentials="include"),bX.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ehe(e,t){return gh(e,"POST","/v2/accounts:revokeToken",mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):qU(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=qU(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await whe(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new qv;return n&&(Qr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qv,this.toJSON())}_performRefresh(){return Rf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class gd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new xhe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new NI(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Vy(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return ghe(this,t)}reload(){return bhe(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new gd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await tS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sc(this.auth.app))return Promise.reject(L0(this.auth));const t=await this.getIdToken();return await Vy(this,phe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:v}=r;Qr(f&&v,t,"internal-error");const b=qv.fromJSON(this.name,v);Qr(typeof f=="string",t,"internal-error"),o0(n,t.name),o0(a,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof p=="boolean",t,"internal-error"),o0(s,t.name),o0(i,t.name),o0(o,t.name),o0(l,t.name),o0(u,t.name),o0(d,t.name);const y=new gd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(C=>({...C}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new qv;a.updateFromServerResponse(r);const s=new gd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await tS(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?EX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new qv;o.updateFromIdToken(n);const l=new gd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new NI(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new Map;function Pf(e){th(e instanceof Function,"Expected a class definition");let t=WU.get(e);return t?(th(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,WU.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}CX.type="NONE";const XU=CX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e,t,r){return`firebase:${e}:${t}:${r}`}class Wv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=l_(this.userKey,a.apiKey,s),this.fullPersistenceKey=l_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await eS(this.auth,{idToken:t}).catch(()=>{});return r?gd._fromGetAccountInfoResponse(this.auth,r,t):null}return gd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Wv(Pf(XU),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Pf(XU);const i=l_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await eS(t,{idToken:d}).catch(()=>{});if(!h)break;f=await gd._fromGetAccountInfoResponse(t,h,d)}else f=gd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Wv(s,t,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Wv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kX(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_X(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(TX(t))return"Blackberry";if(jX(t))return"Webos";if(SX(t))return"Safari";if((t.includes("chrome/")||NX(t))&&!t.includes("edge/"))return"Chrome";if(BX(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function _X(e=Zo()){return/firefox\//i.test(e)}function SX(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function NX(e=Zo()){return/crios\//i.test(e)}function kX(e=Zo()){return/iemobile/i.test(e)}function BX(e=Zo()){return/android/i.test(e)}function TX(e=Zo()){return/blackberry/i.test(e)}function jX(e=Zo()){return/webos/i.test(e)}function FO(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Che(e=Zo()){var t;return FO(e)&&!!((t=window.navigator)!=null&&t.standalone)}function _he(){return MAe()&&document.documentMode===10}function IX(e=Zo()){return FO(e)||BX(e)||jX(e)||TX(e)||/windows phone/i.test(e)||kX(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(e,t=[]){let r;switch(e){case"Browser":r=YU(Zo());break;case"Worker":r=`${YU(Zo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${ag}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class She{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const l=t(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nhe(e,t={}){return gh(e,"GET","/v2/passwordPolicy",mm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const khe=6;class Bhe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??khe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class The{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JU(this),this.idTokenSubscription=new JU(this),this.beforeStateQueue=new She(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Pf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Wv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await eS(this,{idToken:t}),n=await gd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Sc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await tS(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lhe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sc(this.app))return Promise.reject(L0(this));const r=t?Yn(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sc(this.app)?Promise.reject(L0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sc(this.app)?Promise.reject(L0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Nhe(this),r=new Bhe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Mw("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ehe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Pf(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await Wv.create(this,[Pf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=t.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Sc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&she(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function sg(e){return Yn(e)}class JU{constructor(t){this.auth=t,this.observer=null,this.addObserver=KAe(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jhe(e){lN=e}function OX(e){return lN.loadJS(e)}function Ihe(){return lN.recaptchaEnterpriseScript}function Fhe(){return lN.gapiScript}function Ohe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Dhe{constructor(){this.enterprise=new Rhe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Rhe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Phe="recaptcha-enterprise",DX="NO_RECAPTCHA";class Lhe{constructor(t){this.type=Phe,this.auth=sg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{mhe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new hhe(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;KU(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(DX)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Dhe().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&KU(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ihe();l.length!==0&&(l+=o),OX(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function ZU(e,t,r,n=!1,a=!1){const s=new Lhe(e);let i;if(a)i=DX;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function kI(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ZU(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ZU(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mhe(e,t){const r=Qw(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(X0(s,t??{}))return a;Nd(a,"already-initialized")}return r.initialize({options:t})}function Uhe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Pf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Qhe(e,t,r){const n=sg(e);Qr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=RX(t),{host:i,port:o}=Hhe(t),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Qr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qr(X0(u,n.config.emulator)&&X0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,ph(i)?(aN(`${s}//${i}${l}`),sN("Auth",!0)):Vhe()}function RX(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Hhe(e){const t=RX(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:e7(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:e7(i)}}}function e7(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Vhe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Rf("not implemented")}_getIdTokenResponse(t){return Rf("not implemented")}_linkToIdToken(t,r){return Rf("not implemented")}_getReauthenticationResolver(t){return Rf("not implemented")}}async function zhe(e,t){return gh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $he(e,t){return oN(e,"POST","/v1/accounts:signInWithPassword",mm(e,t))}async function Ghe(e,t){return gh(e,"POST","/v1/accounts:sendOobCode",mm(e,t))}async function Khe(e,t){return Ghe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qhe(e,t){return oN(e,"POST","/v1/accounts:signInWithEmailLink",mm(e,t))}async function Whe(e,t){return oN(e,"POST","/v1/accounts:signInWithEmailLink",mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends OO{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new zy(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new zy(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kI(t,r,"signInWithPassword",$he);case"emailLink":return qhe(t,{email:this._email,oobCode:this._password});default:Nd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kI(t,n,"signUpPassword",zhe);case"emailLink":return Whe(t,{idToken:r,email:this._email,oobCode:this._password});default:Nd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xv(e,t){return oN(e,"POST","/v1/accounts:signInWithIdp",mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xhe="http://localhost";class Mp extends OO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Mp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Nd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Mp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Xv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Xv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Xv(t,r)}buildRequest(){const t={requestUri:Xhe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Uw(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yhe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jhe(e){const t=zb($b(e)).link,r=t?zb($b(t)).deep_link_id:null,n=zb($b(e)).deep_link_id;return(n?zb($b(n)).link:null)||n||r||t||e}class DO{constructor(t){const r=zb($b(t)),n=r.apiKey??null,a=r.oobCode??null,s=Yhe(r.mode??null);Qr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Jhe(t);try{return new DO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.providerId=Jx.PROVIDER_ID}static credential(t,r){return zy._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=DO.parseLink(r);return Qr(n,"argument-error"),zy._fromEmailAndCode(t,n.code,n.tenantId)}}Jx.PROVIDER_ID="password";Jx.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw extends PX{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends Vw{constructor(){super("facebook.com")}static credential(t){return Mp._fromParams({providerId:w0.PROVIDER_ID,signInMethod:w0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return w0.credentialFromTaggedObject(t)}static credentialFromError(t){return w0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return w0.credential(t.oauthAccessToken)}catch{return null}}}w0.FACEBOOK_SIGN_IN_METHOD="facebook.com";w0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends Vw{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Mp._fromParams({providerId:E0.PROVIDER_ID,signInMethod:E0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return E0.credentialFromTaggedObject(t)}static credentialFromError(t){return E0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return E0.credential(r,n)}catch{return null}}}E0.GOOGLE_SIGN_IN_METHOD="google.com";E0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends Vw{constructor(){super("github.com")}static credential(t){return Mp._fromParams({providerId:C0.PROVIDER_ID,signInMethod:C0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return C0.credentialFromTaggedObject(t)}static credentialFromError(t){return C0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return C0.credential(t.oauthAccessToken)}catch{return null}}}C0.GITHUB_SIGN_IN_METHOD="github.com";C0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Vw{constructor(){super("twitter.com")}static credential(t,r){return Mp._fromParams({providerId:_0.PROVIDER_ID,signInMethod:_0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return _0.credentialFromTaggedObject(t)}static credentialFromError(t){return _0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return _0.credential(r,n)}catch{return null}}}_0.TWITTER_SIGN_IN_METHOD="twitter.com";_0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await gd._fromIdTokenResponse(t,n,a),i=t7(n);return new gx({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=t7(n);return new gx({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function t7(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Td{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,rS.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new rS(t,r,n,a)}}function LX(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rS._fromErrorAndOperation(e,s,t,n):s})}async function Zhe(e,t,r=!1){const n=await Vy(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return gx._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0e(e,t,r=!1){const{auth:n}=e;if(Sc(n.app))return Promise.reject(L0(n));const a="reauthenticate";try{const s=await Vy(e,LX(n,a,t,e),r);Qr(s.idToken,n,"internal-error");const i=IO(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(e.uid===o,n,"user-mismatch"),gx._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MX(e,t,r=!1){if(Sc(e.app))return Promise.reject(L0(e));const n="signIn",a=await LX(e,n,t),s=await gx._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function t0e(e,t){return MX(sg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0e(e){const t=sg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function n0e(e,t,r){const n=sg(e);await kI(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Khe)}function a0e(e,t,r){return Sc(e.app)?Promise.reject(L0(e)):t0e(Yn(e),Jx.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&r0e(e),n})}function s0e(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function i0e(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function UX(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function o0e(e){return Yn(e).signOut()}const nS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(nS,"1"),this.storage.removeItem(nS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0e=1e3,c0e=10;class HX extends QX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IX(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);_he()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,c0e):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},l0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}HX.type="LOCAL";const u0e=HX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VX extends QX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}VX.type="SESSION";const zX=VX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0e(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new cN(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await d0e(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=RO("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return window}function f0e(e){OA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(){return typeof OA().WorkerGlobalScope<"u"&&typeof OA().importScripts=="function"}async function h0e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m0e(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function p0e(){return $X()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX="firebaseLocalStorageDb",g0e=1,aS="firebaseLocalStorage",KX="fbase_key";class zw{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function uN(e,t){return e.transaction([aS],t?"readwrite":"readonly").objectStore(aS)}function v0e(){const e=indexedDB.deleteDatabase(GX);return new zw(e).toPromise()}function BI(){const e=indexedDB.open(GX,g0e);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(aS,{keyPath:KX})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(aS)?t(n):(n.close(),await v0e(),t(await BI()))})})}async function r7(e,t,r){const n=uN(e,!0).put({[KX]:t,value:r});return new zw(n).toPromise()}async function x0e(e,t){const r=uN(e,!1).get(t),n=await new zw(r).toPromise();return n===void 0?null:n.value}function n7(e,t){const r=uN(e,!0).delete(t);return new zw(r).toPromise()}const b0e=800,y0e=3;class qX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await BI(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>y0e)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $X()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cN._getInstance(p0e()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await h0e(),!this.activeServiceWorker)return;this.sender=new A0e(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||m0e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await BI();return await r7(t,nS,"1"),await n7(t,nS),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>r7(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>x0e(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>n7(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=uN(a,!1).getAll();return new zw(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qX.type="LOCAL";const w0e=qX;new Hw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0e(e,t){return t?Pf(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO extends OO{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Xv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Xv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function C0e(e){return MX(e.auth,new PO(e),e.bypassAuthState)}function _0e(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),e0e(r,new PO(e),e.bypassAuthState)}async function S0e(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),Zhe(r,new PO(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return C0e;case"linkViaPopup":case"linkViaRedirect":return S0e;case"reauthViaPopup":case"reauthViaRedirect":return _0e;default:Nd(this.auth,"internal-error")}}resolve(t){th(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){th(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0e=new Hw(2e3,1e4);class Fv extends WX{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Fv.currentPopupAction&&Fv.currentPopupAction.cancel(),Fv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){th(this.filter.length===1,"Popup operations only handle one event");const t=RO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(FA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(FA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(FA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,N0e.get())};t()}}Fv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0e="pendingRedirect",c_=new Map;class B0e extends WX{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=c_.get(this.auth._key());if(!t){try{const n=await T0e(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}c_.set(this.auth._key(),t)}return this.bypassAuthState||c_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T0e(e,t){const r=F0e(t),n=I0e(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function j0e(e,t){c_.set(e._key(),t)}function I0e(e){return Pf(e._redirectPersistence)}function F0e(e){return l_(k0e,e.config.apiKey,e.name)}async function O0e(e,t,r=!1){if(Sc(e.app))return Promise.reject(L0(e));const n=sg(e),a=E0e(n,t),i=await new B0e(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0e=600*1e3;class R0e{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!P0e(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!XX(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(FA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=D0e&&this.cachedEventUids.clear(),this.cachedEventUids.has(a7(t))}saveEventToCache(t){this.cachedEventUids.add(a7(t)),this.lastProcessedEventTime=Date.now()}}function a7(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XX({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function P0e(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XX(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0e(e,t={}){return gh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U0e=/^https?/;async function Q0e(e){if(e.config.emulator)return;const{authorizedDomains:t}=await L0e(e);for(const r of t)try{if(H0e(r))return}catch{}Nd(e,"unauthorized-domain")}function H0e(e){const t=SI(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!U0e.test(r))return!1;if(M0e.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0e=new Hw(3e4,6e4);function s7(){const e=OA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function z0e(e){return new Promise((t,r)=>{var a,s,i;function n(){s7(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{s7(),r(FA(e,"network-request-failed"))},timeout:V0e.get()})}if((s=(a=OA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=OA().gapi)!=null&&i.load)n();else{const o=Ohe("iframefcb");return OA()[o]=()=>{gapi.load?n():r(FA(e,"network-request-failed"))},OX(`${Fhe()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw u_=null,t})}let u_=null;function $0e(e){return u_=u_||z0e(e),u_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0e=new Hw(5e3,15e3),K0e="__/auth/iframe",q0e="emulator/auth/iframe",W0e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X0e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y0e(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?jO(t,q0e):`https://${e.config.authDomain}/${K0e}`,n={apiKey:t.apiKey,appName:e.name,v:ag},a=X0e.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Uw(n).slice(1)}`}async function J0e(e){const t=await $0e(e),r=OA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:Y0e(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W0e,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=FA(e,"network-request-failed"),o=OA().setTimeout(()=>{s(i)},G0e.get());function l(){OA().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eme=500,tme=600,rme="_blank",nme="http://localhost";class i7{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ame(e,t,r,n=eme,a=tme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Z0e,width:n.toString(),height:a.toString(),top:s,left:i},u=Zo().toLowerCase();r&&(o=NX(u)?rme:r),_X(u)&&(t=t||nme,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(Che(u)&&o!=="_self")return sme(t||"",o),new i7(null);const f=window.open(t||"",o,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new i7(f)}function sme(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime="__/auth/handler",ome="emulator/auth/handler",lme=encodeURIComponent("fac");async function o7(e,t,r,n,a,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:ag,eventId:a};if(t instanceof PX){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",GAe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof Vw){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await e._getAppCheckToken(),u=l?`#${lme}=${encodeURIComponent(l)}`:"";return`${cme(e)}?${Uw(o).slice(1)}${u}`}function cme({config:e}){return e.emulator?jO(e,ome):`https://${e.authDomain}/${ime}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="webStorageSupport";class ume{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zX,this._completeRedirectFn=O0e,this._overrideRedirectResult=j0e}async _openPopup(t,r,n,a){var i;th((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await o7(t,r,n,SI(),a);return ame(t,s,RO())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await o7(t,r,n,SI(),a);return f0e(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(th(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await J0e(t),n=new R0e(t);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(MB,{type:MB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[MB];s!==void 0&&r(!!s),Nd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Q0e(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return IX()||SX()||FO()}}const dme=ume;var l7="@firebase/auth",c7="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ame{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fme(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hme(e){Y0(new Zf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FX(e)},u=new The(n,a,s,l);return Uhe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Y0(new Zf("auth-internal",t=>{const r=sg(t.getProvider("auth").getImmediate());return(n=>new Ame(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ju(l7,c7,fme(e)),ju(l7,c7,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mme=300,pme=dX("authIdTokenMaxAge")||mme;let u7=null;const gme=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pme)return;const a=r==null?void 0:r.token;u7!==a&&(u7=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function YX(e=iN()){const t=Qw(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Mhe(e,{popupRedirectResolver:dme,persistence:[w0e,u0e,zX]}),n=dX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=gme(s.toString());i0e(r,i,()=>i(r.currentUser)),s0e(r,o=>i(o))}}const a=cX("auth");return a&&Qhe(r,`http://${a}`),r}function vme(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}jhe({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=FA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",vme().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hme("Browser");var xme="firebase",bme="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ju(xme,bme,"app");var d7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M0,JX;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,_){function F(){}F.prototype=_.prototype,w.D=_.prototype,w.prototype=new F,w.prototype.constructor=w,w.C=function(U,D,k){for(var L=Array(arguments.length-2),R=2;R<arguments.length;R++)L[R-2]=arguments[R];return _.prototype[D].apply(U,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,_,F){F||(F=0);var U=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)U[D]=_.charCodeAt(F++)|_.charCodeAt(F++)<<8|_.charCodeAt(F++)<<16|_.charCodeAt(F++)<<24;else for(D=0;16>D;++D)U[D]=_[F++]|_[F++]<<8|_[F++]<<16|_[F++]<<24;_=w.g[0],F=w.g[1],D=w.g[2];var k=w.g[3],L=_+(k^F&(D^k))+U[0]+3614090360&4294967295;_=F+(L<<7&4294967295|L>>>25),L=k+(D^_&(F^D))+U[1]+3905402710&4294967295,k=_+(L<<12&4294967295|L>>>20),L=D+(F^k&(_^F))+U[2]+606105819&4294967295,D=k+(L<<17&4294967295|L>>>15),L=F+(_^D&(k^_))+U[3]+3250441966&4294967295,F=D+(L<<22&4294967295|L>>>10),L=_+(k^F&(D^k))+U[4]+4118548399&4294967295,_=F+(L<<7&4294967295|L>>>25),L=k+(D^_&(F^D))+U[5]+1200080426&4294967295,k=_+(L<<12&4294967295|L>>>20),L=D+(F^k&(_^F))+U[6]+2821735955&4294967295,D=k+(L<<17&4294967295|L>>>15),L=F+(_^D&(k^_))+U[7]+4249261313&4294967295,F=D+(L<<22&4294967295|L>>>10),L=_+(k^F&(D^k))+U[8]+1770035416&4294967295,_=F+(L<<7&4294967295|L>>>25),L=k+(D^_&(F^D))+U[9]+2336552879&4294967295,k=_+(L<<12&4294967295|L>>>20),L=D+(F^k&(_^F))+U[10]+4294925233&4294967295,D=k+(L<<17&4294967295|L>>>15),L=F+(_^D&(k^_))+U[11]+2304563134&4294967295,F=D+(L<<22&4294967295|L>>>10),L=_+(k^F&(D^k))+U[12]+1804603682&4294967295,_=F+(L<<7&4294967295|L>>>25),L=k+(D^_&(F^D))+U[13]+4254626195&4294967295,k=_+(L<<12&4294967295|L>>>20),L=D+(F^k&(_^F))+U[14]+2792965006&4294967295,D=k+(L<<17&4294967295|L>>>15),L=F+(_^D&(k^_))+U[15]+1236535329&4294967295,F=D+(L<<22&4294967295|L>>>10),L=_+(D^k&(F^D))+U[1]+4129170786&4294967295,_=F+(L<<5&4294967295|L>>>27),L=k+(F^D&(_^F))+U[6]+3225465664&4294967295,k=_+(L<<9&4294967295|L>>>23),L=D+(_^F&(k^_))+U[11]+643717713&4294967295,D=k+(L<<14&4294967295|L>>>18),L=F+(k^_&(D^k))+U[0]+3921069994&4294967295,F=D+(L<<20&4294967295|L>>>12),L=_+(D^k&(F^D))+U[5]+3593408605&4294967295,_=F+(L<<5&4294967295|L>>>27),L=k+(F^D&(_^F))+U[10]+38016083&4294967295,k=_+(L<<9&4294967295|L>>>23),L=D+(_^F&(k^_))+U[15]+3634488961&4294967295,D=k+(L<<14&4294967295|L>>>18),L=F+(k^_&(D^k))+U[4]+3889429448&4294967295,F=D+(L<<20&4294967295|L>>>12),L=_+(D^k&(F^D))+U[9]+568446438&4294967295,_=F+(L<<5&4294967295|L>>>27),L=k+(F^D&(_^F))+U[14]+3275163606&4294967295,k=_+(L<<9&4294967295|L>>>23),L=D+(_^F&(k^_))+U[3]+4107603335&4294967295,D=k+(L<<14&4294967295|L>>>18),L=F+(k^_&(D^k))+U[8]+1163531501&4294967295,F=D+(L<<20&4294967295|L>>>12),L=_+(D^k&(F^D))+U[13]+2850285829&4294967295,_=F+(L<<5&4294967295|L>>>27),L=k+(F^D&(_^F))+U[2]+4243563512&4294967295,k=_+(L<<9&4294967295|L>>>23),L=D+(_^F&(k^_))+U[7]+1735328473&4294967295,D=k+(L<<14&4294967295|L>>>18),L=F+(k^_&(D^k))+U[12]+2368359562&4294967295,F=D+(L<<20&4294967295|L>>>12),L=_+(F^D^k)+U[5]+4294588738&4294967295,_=F+(L<<4&4294967295|L>>>28),L=k+(_^F^D)+U[8]+2272392833&4294967295,k=_+(L<<11&4294967295|L>>>21),L=D+(k^_^F)+U[11]+1839030562&4294967295,D=k+(L<<16&4294967295|L>>>16),L=F+(D^k^_)+U[14]+4259657740&4294967295,F=D+(L<<23&4294967295|L>>>9),L=_+(F^D^k)+U[1]+2763975236&4294967295,_=F+(L<<4&4294967295|L>>>28),L=k+(_^F^D)+U[4]+1272893353&4294967295,k=_+(L<<11&4294967295|L>>>21),L=D+(k^_^F)+U[7]+4139469664&4294967295,D=k+(L<<16&4294967295|L>>>16),L=F+(D^k^_)+U[10]+3200236656&4294967295,F=D+(L<<23&4294967295|L>>>9),L=_+(F^D^k)+U[13]+681279174&4294967295,_=F+(L<<4&4294967295|L>>>28),L=k+(_^F^D)+U[0]+3936430074&4294967295,k=_+(L<<11&4294967295|L>>>21),L=D+(k^_^F)+U[3]+3572445317&4294967295,D=k+(L<<16&4294967295|L>>>16),L=F+(D^k^_)+U[6]+76029189&4294967295,F=D+(L<<23&4294967295|L>>>9),L=_+(F^D^k)+U[9]+3654602809&4294967295,_=F+(L<<4&4294967295|L>>>28),L=k+(_^F^D)+U[12]+3873151461&4294967295,k=_+(L<<11&4294967295|L>>>21),L=D+(k^_^F)+U[15]+530742520&4294967295,D=k+(L<<16&4294967295|L>>>16),L=F+(D^k^_)+U[2]+3299628645&4294967295,F=D+(L<<23&4294967295|L>>>9),L=_+(D^(F|~k))+U[0]+4096336452&4294967295,_=F+(L<<6&4294967295|L>>>26),L=k+(F^(_|~D))+U[7]+1126891415&4294967295,k=_+(L<<10&4294967295|L>>>22),L=D+(_^(k|~F))+U[14]+2878612391&4294967295,D=k+(L<<15&4294967295|L>>>17),L=F+(k^(D|~_))+U[5]+4237533241&4294967295,F=D+(L<<21&4294967295|L>>>11),L=_+(D^(F|~k))+U[12]+1700485571&4294967295,_=F+(L<<6&4294967295|L>>>26),L=k+(F^(_|~D))+U[3]+2399980690&4294967295,k=_+(L<<10&4294967295|L>>>22),L=D+(_^(k|~F))+U[10]+4293915773&4294967295,D=k+(L<<15&4294967295|L>>>17),L=F+(k^(D|~_))+U[1]+2240044497&4294967295,F=D+(L<<21&4294967295|L>>>11),L=_+(D^(F|~k))+U[8]+1873313359&4294967295,_=F+(L<<6&4294967295|L>>>26),L=k+(F^(_|~D))+U[15]+4264355552&4294967295,k=_+(L<<10&4294967295|L>>>22),L=D+(_^(k|~F))+U[6]+2734768916&4294967295,D=k+(L<<15&4294967295|L>>>17),L=F+(k^(D|~_))+U[13]+1309151649&4294967295,F=D+(L<<21&4294967295|L>>>11),L=_+(D^(F|~k))+U[4]+4149444226&4294967295,_=F+(L<<6&4294967295|L>>>26),L=k+(F^(_|~D))+U[11]+3174756917&4294967295,k=_+(L<<10&4294967295|L>>>22),L=D+(_^(k|~F))+U[2]+718787259&4294967295,D=k+(L<<15&4294967295|L>>>17),L=F+(k^(D|~_))+U[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+k&4294967295}n.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var F=_-this.blockSize,U=this.B,D=this.h,k=0;k<_;){if(D==0)for(;k<=F;)a(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<_;)if(U[D++]=w.charCodeAt(k++),D==this.blockSize){a(this,U),D=0;break}}else for(;k<_;)if(U[D++]=w[k++],D==this.blockSize){a(this,U),D=0;break}}this.h=D,this.o+=_},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var F=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=F&255,F/=256;for(this.u(w),w=Array(16),_=F=0;4>_;++_)for(var U=0;32>U;U+=8)w[F++]=this.g[_]>>>U&255;return w};function s(w,_){var F=o;return Object.prototype.hasOwnProperty.call(F,w)?F[w]:F[w]=_(w)}function i(w,_){this.h=_;for(var F=[],U=!0,D=w.length-1;0<=D;D--){var k=w[D]|0;U&&k==_||(F[D]=k,U=!1)}this.g=F}var o={};function l(w){return-128<=w&&128>w?s(w,function(_){return new i([_|0],0>_?-1:0)}):new i([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return b(u(-w));for(var _=[],F=1,U=0;w>=F;U++)_[U]=w/F|0,F*=4294967296;return new i(_,0)}function d(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return b(d(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(_,8)),U=f,D=0;D<w.length;D+=8){var k=Math.min(8,w.length-D),L=parseInt(w.substring(D,D+k),_);8>k?(k=u(Math.pow(_,k)),U=U.j(k).add(u(L))):(U=U.j(F),U=U.add(u(L)))}return U}var f=l(0),h=l(1),p=l(16777216);e=i.prototype,e.m=function(){if(v(this))return-b(this).m();for(var w=0,_=1,F=0;F<this.g.length;F++){var U=this.i(F);w+=(0<=U?U:4294967296+U)*_,_*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(g(this))return"0";if(v(this))return"-"+b(this).toString(w);for(var _=u(Math.pow(w,6)),F=this,U="";;){var D=I(F,_).g;F=y(F,D.j(_));var k=((0<F.g.length?F.g[0]:F.h)>>>0).toString(w);if(F=D,g(F))return k+U;for(;6>k.length;)k="0"+k;U=k+U}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function g(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function v(w){return w.h==-1}e.l=function(w){return w=y(this,w),v(w)?-1:g(w)?0:1};function b(w){for(var _=w.g.length,F=[],U=0;U<_;U++)F[U]=~w.g[U];return new i(F,~w.h).add(h)}e.abs=function(){return v(this)?b(this):this},e.add=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],U=0,D=0;D<=_;D++){var k=U+(this.i(D)&65535)+(w.i(D)&65535),L=(k>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);U=L>>>16,k&=65535,L&=65535,F[D]=L<<16|k}return new i(F,F[F.length-1]&-2147483648?-1:0)};function y(w,_){return w.add(b(_))}e.j=function(w){if(g(this)||g(w))return f;if(v(this))return v(w)?b(this).j(b(w)):b(b(this).j(w));if(v(w))return b(this.j(b(w)));if(0>this.l(p)&&0>w.l(p))return u(this.m()*w.m());for(var _=this.g.length+w.g.length,F=[],U=0;U<2*_;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var D=0;D<w.g.length;D++){var k=this.i(U)>>>16,L=this.i(U)&65535,R=w.i(D)>>>16,X=w.i(D)&65535;F[2*U+2*D]+=L*X,C(F,2*U+2*D),F[2*U+2*D+1]+=k*X,C(F,2*U+2*D+1),F[2*U+2*D+1]+=L*R,C(F,2*U+2*D+1),F[2*U+2*D+2]+=k*R,C(F,2*U+2*D+2)}for(U=0;U<_;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=_;U<2*_;U++)F[U]=0;return new i(F,0)};function C(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function S(w,_){this.g=w,this.h=_}function I(w,_){if(g(_))throw Error("division by zero");if(g(w))return new S(f,f);if(v(w))return _=I(b(w),_),new S(b(_.g),b(_.h));if(v(_))return _=I(w,b(_)),new S(b(_.g),_.h);if(30<w.g.length){if(v(w)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var F=h,U=_;0>=U.l(w);)F=N(F),U=N(U);var D=B(F,1),k=B(U,1);for(U=B(U,2),F=B(F,2);!g(U);){var L=k.add(U);0>=L.l(w)&&(D=D.add(F),k=L),U=B(U,1),F=B(F,1)}return _=y(w,D.j(_)),new S(D,_)}for(D=f;0<=w.l(_);){for(F=Math.max(1,Math.floor(w.m()/_.m())),U=Math.ceil(Math.log(F)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),k=u(F),L=k.j(_);v(L)||0<L.l(w);)F-=U,k=u(F),L=k.j(_);g(k)&&(k=h),D=D.add(k),w=y(w,L)}return new S(D,w)}e.A=function(w){return I(this,w).h},e.and=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],U=0;U<_;U++)F[U]=this.i(U)&w.i(U);return new i(F,this.h&w.h)},e.or=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],U=0;U<_;U++)F[U]=this.i(U)|w.i(U);return new i(F,this.h|w.h)},e.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],U=0;U<_;U++)F[U]=this.i(U)^w.i(U);return new i(F,this.h^w.h)};function N(w){for(var _=w.g.length+1,F=[],U=0;U<_;U++)F[U]=w.i(U)<<1|w.i(U-1)>>>31;return new i(F,w.h)}function B(w,_){var F=_>>5;_%=32;for(var U=w.g.length-F,D=[],k=0;k<U;k++)D[k]=0<_?w.i(k+F)>>>_|w.i(k+F+1)<<32-_:w.i(k+F);return new i(D,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,JX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,M0=i}).apply(typeof d7<"u"?d7:typeof self<"u"?self:typeof window<"u"?window:{});var FE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZX,Gb,eY,d_,TI,tY,rY,nY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ee,se){return O==Array.prototype||O==Object.prototype||(O[ee]=se.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof FE=="object"&&FE];for(var ee=0;ee<O.length;++ee){var se=O[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(O,ee){if(ee)e:{var se=n;O=O.split(".");for(var xe=0;xe<O.length-1;xe++){var ze=O[xe];if(!(ze in se))break e;se=se[ze]}O=O[O.length-1],xe=se[O],ee=ee(xe),ee!=xe&&ee!=null&&t(se,O,{configurable:!0,writable:!0,value:ee})}}function s(O,ee){O instanceof String&&(O+="");var se=0,xe=!1,ze={next:function(){if(!xe&&se<O.length){var st=se++;return{value:ee(st,O[st]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ee,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(O){var ee=typeof O;return ee=ee!="object"?ee:O?Array.isArray(O)?"array":ee:"null",ee=="array"||ee=="object"&&typeof O.length=="number"}function u(O){var ee=typeof O;return ee=="object"&&O!=null||ee=="function"}function d(O,ee,se){return O.call.apply(O.bind,arguments)}function f(O,ee,se){if(!O)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,xe),O.apply(ee,ze)}}return function(){return O.apply(ee,arguments)}}function h(O,ee,se){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(O,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),O.apply(this,xe)}}function g(O,ee){function se(){}se.prototype=ee.prototype,O.aa=ee.prototype,O.prototype=new se,O.prototype.constructor=O,O.Qb=function(xe,ze,st){for(var Ut=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)Ut[Tr-2]=arguments[Tr];return ee.prototype[ze].apply(xe,Ut)}}function v(O){const ee=O.length;if(0<ee){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=O[xe];return se}return[]}function b(O,ee){for(let se=1;se<arguments.length;se++){const xe=arguments[se];if(l(xe)){const ze=O.length||0,st=xe.length||0;O.length=ze+st;for(let Ut=0;Ut<st;Ut++)O[ze+Ut]=xe[Ut]}else O.push(xe)}}class y{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function C(O){return/^[\s\xa0]*$/.test(O)}function S(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function I(O){return I[" "](O),O}I[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function B(O,ee,se){for(const xe in O)ee.call(se,O[xe],xe,O)}function w(O,ee){for(const se in O)ee.call(void 0,O[se],se,O)}function _(O){const ee={};for(const se in O)ee[se]=O[se];return ee}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(O,ee){let se,xe;for(let ze=1;ze<arguments.length;ze++){xe=arguments[ze];for(se in xe)O[se]=xe[se];for(let st=0;st<F.length;st++)se=F[st],Object.prototype.hasOwnProperty.call(xe,se)&&(O[se]=xe[se])}}function D(O){var ee=1;O=O.split(":");const se=[];for(;0<ee&&O.length;)se.push(O.shift()),ee--;return O.length&&se.push(O.join(":")),se}function k(O){o.setTimeout(()=>{throw O},0)}function L(){var O=z;let ee=null;return O.g&&(ee=O.g,O.g=O.g.next,O.g||(O.h=null),ee.next=null),ee}class R{constructor(){this.h=this.g=null}add(ee,se){const xe=X.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var X=new y(()=>new V,O=>O.reset());class V{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,H=!1,z=new R,q=()=>{const O=o.Promise.resolve(void 0);Z=()=>{O.then(re)}};var re=()=>{for(var O;O=L();){try{O.h.call(O.g)}catch(se){k(se)}var ee=X;ee.j(O),100>ee.h&&(ee.h++,O.next=ee.g,ee.g=O)}H=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(O,ee){this.type=O,this.g=this.target=ee,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,ee=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return O}();function te(O,ee){if(K.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var se=this.type=O.type,xe=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ee,ee=O.relatedTarget){if(N){e:{try{I(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else se=="mouseover"?ee=O.fromElement:se=="mouseout"&&(ee=O.toElement);this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ie[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&te.aa.h.call(this)}}g(te,K);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(O,ee,se,xe,ze){this.listener=O,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function pe(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Ie(O){this.src=O,this.g={},this.h=0}Ie.prototype.add=function(O,ee,se,xe,ze){var st=O.toString();O=this.g[st],O||(O=this.g[st]=[],this.h++);var Ut=Se(O,ee,xe,ze);return-1<Ut?(ee=O[Ut],se||(ee.fa=!1)):(ee=new ce(ee,this.src,st,!!xe,ze),ee.fa=se,O.push(ee)),ee};function ne(O,ee){var se=ee.type;if(se in O.g){var xe=O.g[se],ze=Array.prototype.indexOf.call(xe,ee,void 0),st;(st=0<=ze)&&Array.prototype.splice.call(xe,ze,1),st&&(pe(ee),O.g[se].length==0&&(delete O.g[se],O.h--))}}function Se(O,ee,se,xe){for(var ze=0;ze<O.length;++ze){var st=O[ze];if(!st.da&&st.listener==ee&&st.capture==!!se&&st.ha==xe)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),_e={};function he(O,ee,se,xe,ze){if(Array.isArray(ee)){for(var st=0;st<ee.length;st++)he(O,ee[st],se,xe,ze);return null}return se=ot(se),O&&O[Ae]?O.K(ee,se,u(xe)?!!xe.capture:!1,ze):je(O,ee,se,!1,xe,ze)}function je(O,ee,se,xe,ze,st){if(!ee)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Tr=qe(O);if(Tr||(O[De]=Tr=new Ie(O)),se=Tr.add(ee,se,xe,Ut,st),se.proxy)return se;if(xe=He(),se.proxy=xe,xe.src=O,xe.listener=se,O.addEventListener)Y||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(ee.toString(),xe,ze);else if(O.attachEvent)O.attachEvent(Oe(ee.toString()),xe);else if(O.addListener&&O.removeListener)O.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function O(se){return ee.call(O.src,O.listener,se)}const ee=Pe;return O}function Xe(O,ee,se,xe,ze){if(Array.isArray(ee))for(var st=0;st<ee.length;st++)Xe(O,ee[st],se,xe,ze);else xe=u(xe)?!!xe.capture:!!xe,se=ot(se),O&&O[Ae]?(O=O.i,ee=String(ee).toString(),ee in O.g&&(st=O.g[ee],se=Se(st,se,xe,ze),-1<se&&(pe(st[se]),Array.prototype.splice.call(st,se,1),st.length==0&&(delete O.g[ee],O.h--)))):O&&(O=qe(O))&&(ee=O.g[ee.toString()],O=-1,ee&&(O=Se(ee,se,xe,ze)),(se=-1<O?ee[O]:null)&&ye(se))}function ye(O){if(typeof O!="number"&&O&&!O.da){var ee=O.src;if(ee&&ee[Ae])ne(ee.i,O);else{var se=O.type,xe=O.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,O.capture):ee.detachEvent?ee.detachEvent(Oe(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=qe(ee))?(ne(se,O),se.h==0&&(se.src=null,ee[De]=null)):pe(O)}}}function Oe(O){return O in _e?_e[O]:_e[O]="on"+O}function Pe(O,ee){if(O.da)O=!0;else{ee=new te(ee,this);var se=O.listener,xe=O.ha||O.src;O.fa&&ye(O),O=se.call(xe,ee)}return O}function qe(O){return O=O[De],O instanceof Ie?O:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(O){return typeof O=="function"?O:(O[Ze]||(O[Ze]=function(ee){return O.handleEvent(ee)}),O[Ze])}function mt(){P.call(this),this.i=new Ie(this),this.M=this,this.F=null}g(mt,P),mt.prototype[Ae]=!0,mt.prototype.removeEventListener=function(O,ee,se,xe){Xe(this,O,ee,se,xe)};function Tt(O,ee){var se,xe=O.F;if(xe)for(se=[];xe;xe=xe.F)se.push(xe);if(O=O.M,xe=ee.type||ee,typeof ee=="string")ee=new K(ee,O);else if(ee instanceof K)ee.target=ee.target||O;else{var ze=ee;ee=new K(xe,O),U(ee,ze)}if(ze=!0,se)for(var st=se.length-1;0<=st;st--){var Ut=ee.g=se[st];ze=Mt(Ut,xe,!0,ee)&&ze}if(Ut=ee.g=O,ze=Mt(Ut,xe,!0,ee)&&ze,ze=Mt(Ut,xe,!1,ee)&&ze,se)for(st=0;st<se.length;st++)Ut=ee.g=se[st],ze=Mt(Ut,xe,!1,ee)&&ze}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var O=this.i,ee;for(ee in O.g){for(var se=O.g[ee],xe=0;xe<se.length;xe++)pe(se[xe]);delete O.g[ee],O.h--}}this.F=null},mt.prototype.K=function(O,ee,se,xe){return this.i.add(String(O),ee,!1,se,xe)},mt.prototype.L=function(O,ee,se,xe){return this.i.add(String(O),ee,!0,se,xe)};function Mt(O,ee,se,xe){if(ee=O.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,st=0;st<ee.length;++st){var Ut=ee[st];if(Ut&&!Ut.da&&Ut.capture==se){var Tr=Ut.listener,bn=Ut.ha||Ut.src;Ut.fa&&ne(O.i,Ut),ze=Tr.call(bn,xe)!==!1&&ze}}return ze&&!xe.defaultPrevented}function Ot(O,ee,se){if(typeof O=="function")se&&(O=h(O,se));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(O,ee||0)}function Qt(O){O.g=Ot(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ee=O.h;O.h=null,O.m.apply(null,ee)}class bt extends P{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(O){P.call(this),this.h=O,this.g={}}g(Nr,P);var rr=[];function an(O){B(O.g,function(ee,se){this.g.hasOwnProperty(se)&&ye(ee)},O),O.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),an(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cr=o.JSON.stringify,Vr=o.JSON.parse,Fn=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function Ir(){}Ir.prototype.h=null;function vt(O){return O.h||(O.h=O.i())}function pt(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){K.call(this,"d")}g(gt,K);function dt(){K.call(this,"c")}g(dt,K);var Dt={},zt=null;function Pr(){return zt=zt||new mt}Dt.La="serverreachability";function Xr(O){K.call(this,Dt.La,O)}g(Xr,K);function gn(O){const ee=Pr();Tt(ee,new Xr(ee))}Dt.STAT_EVENT="statevent";function vn(O,ee){K.call(this,Dt.STAT_EVENT,O),this.stat=ee}g(vn,K);function $t(O){const ee=Pr();Tt(ee,new vn(ee,O))}Dt.Ma="timingevent";function rn(O,ee){K.call(this,Dt.Ma,O),this.size=ee}g(rn,K);function en(O,ee){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},ee)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Yr(O,ee,se,xe,ze,st){O.info(function(){if(O.g)if(st)for(var Ut="",Tr=st.split("&"),bn=0;bn<Tr.length;bn++){var Kr=Tr[bn].split("=");if(1<Kr.length){var zn=Kr[0];Kr=Kr[1];var na=zn.split("_");Ut=2<=na.length&&na[1]=="type"?Ut+(zn+"="+Kr+"&"):Ut+(zn+"=redacted&")}}else Ut=null;else Ut=st;return"XMLHTTP REQ ("+xe+") [attempt "+ze+"]: "+ee+`
`+se+`
`+Ut})}function ra(O,ee,se,xe,ze,st,Ut){O.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ze+"]: "+ee+`
`+se+`
`+st+" "+Ut})}function fe(O,ee,se,xe){O.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ee(O,se)+(xe?" "+xe:"")})}function Be(O,ee){O.info(function(){return"TIMEOUT: "+ee})}cr.prototype.info=function(){};function Ee(O,ee){if(!O.g)return ee;if(!ee)return null;try{var se=JSON.parse(ee);if(se){for(O=0;O<se.length;O++)if(Array.isArray(se[O])){var xe=se[O];if(!(2>xe.length)){var ze=xe[1];if(Array.isArray(ze)&&!(1>ze.length)){var st=ze[0];if(st!="noop"&&st!="stop"&&st!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Cr(se)}catch{return ee}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ye(){}g(Ye,Ir),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Te=new Ye;function ut(O,ee,se,xe){this.j=O,this.i=ee,this.l=se,this.R=xe||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var tt={},at={};function jt(O,ee,se){O.L=1,O.v=$c(xi(ee)),O.m=se,O.P=!0,Vt(O,null)}function Vt(O,ee){O.F=Date.now(),Gt(O),O.A=xi(O.v);var se=O.A,xe=O.R;Array.isArray(xe)||(xe=[String(xe)]),Br(se.i,"t",xe),O.C=0,se=O.j.J,O.h=new $e,O.g=de(O.j,se?ee:null,!O.m),0<O.O&&(O.M=new bt(h(O.Y,O,O.g),O.O)),ee=O.U,se=O.g,xe=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(rr[0]=ze.toString()),ze=rr);for(var st=0;st<ze.length;st++){var Ut=he(se,ze[st],xe||ee.handleEvent,!1,ee.h||ee);if(!Ut)break;ee.g[Ut.key]=Ut}ee=O.H?_(O.H):{},O.m?(O.u||(O.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ee)):(O.u="GET",O.g.ea(O.A,O.u,null,ee)),gn(),Yr(O.i,O.u,O.A,O.l,O.R,O.m)}ut.prototype.ca=function(O){O=O.target;const ee=this.M;ee&&gs(O)==3?ee.j():this.Y(O)},ut.prototype.Y=function(O){try{if(O==this.g)e:{const na=gs(this.g);var ee=this.g.Ba();const Tl=this.g.Z();if(!(3>na)&&(na!=3||this.g&&(this.h.h||this.g.oa()||Th(this.g)))){this.J||na!=4||ee==7||(ee==8||0>=Tl?gn(3):gn(2)),sn(this);var se=this.g.Z();this.X=se;t:if(Jt(this)){var xe=Th(this.g);O="";var ze=xe.length,st=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,O+=this.h.i.decode(xe[ee],{stream:!(st&&ee==ze-1)});xe.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=se==200,ra(this.i,this.u,this.A,this.l,this.R,na,se),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,bn=this.g;if((Tr=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Tr)){var Kr=Tr;break t}}Kr=null}if(se=Kr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,se);else{this.o=!1,this.s=3,$t(12),An(this),on(this);break e}}if(this.P){se=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==at){na==4&&(this.s=4,$t(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(es==tt){this.s=4,$t(15),fe(this.i,this.l,Ut,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,es,null),hs(this,es);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),na!=4||Ut.length!=0||this.h.h||(this.s=1,$t(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),Yc(zn),zn.M=!0,$t(11))}}else fe(this.i,this.l,Ut,null),hs(this,Ut);na==4&&An(this),this.o&&!this.J&&(na==4?Jc(this.j,this):(this.o=!1,Gt(this)))}else qc(this.g),se==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),An(this),on(this)}}}catch{}finally{}};function Jt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ee){var se=O.C,xe=ee.indexOf(`
`,se);return xe==-1?at:(se=Number(ee.substring(se,xe)),isNaN(se)?tt:(xe+=1,xe+se>ee.length?at:(ee=ee.slice(xe,xe+se),O.C=xe+se,ee)))}ut.prototype.cancel=function(){this.J=!0,An(this)};function Gt(O){O.S=Date.now()+O.I,_r(O,O.I)}function _r(O,ee){if(O.B!=null)throw Error("WatchDog timer not null");O.B=en(h(O.ba,O),ee)}function sn(O){O.B&&(o.clearTimeout(O.B),O.B=null)}ut.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Be(this.i,this.A),this.L!=2&&(gn(),$t(17)),An(this),this.s=2,on(this)):_r(this,this.S-O)};function on(O){O.j.G==0||O.J||Jc(O.j,O)}function An(O){sn(O);var ee=O.M;ee&&typeof ee.ma=="function"&&ee.ma(),O.M=null,an(O.U),O.g&&(ee=O.g,O.g=null,ee.abort(),ee.ma())}function hs(O,ee){try{var se=O.j;if(se.G!=0&&(se.g==O||gi(se.h,O))){if(!O.K&&gi(se.h,O)&&se.G==3){try{var xe=se.Da.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ze=xe;if(ze[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<O.F)lc(se),Ud(se);else break e;zu(se),$t(18)}}else se.za=ze[1],0<se.za-se.T&&37500>ze[2]&&se.F&&se.v==0&&!se.C&&(se.C=en(h(se.Za,se),6e3));if(1>=Fs(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Di(se,11)}else if((O.K||se.g==O)&&lc(se),!C(ee))for(ze=se.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let Kr=ze[ee];if(se.T=Kr[0],Kr=Kr[1],se.G==2)if(Kr[0]=="c"){se.K=Kr[1],se.ia=Kr[2];const zn=Kr[3];zn!=null&&(se.la=zn,se.j.info("VER="+se.la));const na=Kr[4];na!=null&&(se.Aa=na,se.j.info("SVER="+se.Aa));const Tl=Kr[5];Tl!=null&&typeof Tl=="number"&&0<Tl&&(xe=1.5*Tl,se.L=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const es=O.g;if(es){const _o=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var st=xe.h;st.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(xa(st,st.h),st.h=null))}if(xe.D){const Zc=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(xe.ya=Zc,Vn(xe.I,xe.D,Zc))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-O.F,se.j.info("Handshake RTT: "+se.R+"ms")),xe=se;var Ut=O;if(xe.qa=W(xe,xe.J?xe.ia:null,xe.W),Ut.K){ei(xe.h,Ut);var Tr=Ut,bn=xe.L;bn&&(Tr.I=bn),Tr.B&&(sn(Tr),Gt(Tr)),xe.g=Ut}else Hd(xe);0<se.i.length&&Qd(se)}else Kr[0]!="stop"&&Kr[0]!="close"||Di(se,7);else se.G==3&&(Kr[0]=="stop"||Kr[0]=="close"?Kr[0]=="stop"?Di(se,7):oc(se):Kr[0]!="noop"&&se.l&&se.l.ta(Kr),se.v=0)}}gn(4)}catch{}}var bo=class{constructor(O,ee){this.g=O,this.map=ee}};function ms(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zs(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Fs(O){return O.h?1:O.g?O.g.size:0}function gi(O,ee){return O.h?O.h==ee:O.g?O.g.has(ee):!1}function xa(O,ee){O.g?O.g.add(ee):O.h=ee}function ei(O,ee){O.h&&O.h==ee?O.h=null:O.g&&O.g.has(ee)&&O.g.delete(ee)}ms.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Pd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ee=O.i;for(const se of O.g.values())ee=ee.concat(se.D);return ee}return v(O.i)}function Nh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(l(O)){for(var ee=[],se=O.length,xe=0;xe<se;xe++)ee.push(O[xe]);return ee}ee=[],se=0;for(xe in O)ee[se++]=O[xe];return ee}function Hc(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(l(O)||typeof O=="string"){var ee=[];O=O.length;for(var se=0;se<O;se++)ee.push(se);return ee}ee=[],se=0;for(const xe in O)ee[se++]=xe;return ee}}}function YA(O,ee){if(O.forEach&&typeof O.forEach=="function")O.forEach(ee,void 0);else if(l(O)||typeof O=="string")Array.prototype.forEach.call(O,ee,void 0);else for(var se=Hc(O),xe=Nh(O),ze=xe.length,st=0;st<ze;st++)ee.call(void 0,xe[st],se&&se[st],O)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(O,ee){if(O){O=O.split("&");for(var se=0;se<O.length;se++){var xe=O[se].indexOf("="),ze=null;if(0<=xe){var st=O[se].substring(0,xe);ze=O[se].substring(xe+1)}else st=O[se];ee(st,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,Vc(this,O.j),this.o=O.o,this.g=O.g,zc(this,O.s),this.l=O.l;var ee=O.i,se=new Cl;se.i=ee.i,ee.g&&(se.g=new Map(ee.g),se.h=ee.h),El(this,se),this.m=O.m}else O&&(ee=String(O).match(vi))?(this.h=!1,Vc(this,ee[1]||"",!0),this.o=yo(ee[2]||""),this.g=yo(ee[3]||"",!0),zc(this,ee[4]),this.l=yo(ee[5]||"",!0),El(this,ee[6]||"",!0),this.m=yo(ee[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}On.prototype.toString=function(){var O=[],ee=this.j;ee&&O.push(rc(ee,JA,!0),":");var se=this.g;return(se||ee=="file")&&(O.push("//"),(ee=this.o)&&O.push(rc(ee,JA,!0),"@"),O.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&O.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&O.push("/"),O.push(rc(se,se.charAt(0)=="/"?nc:ZA,!0))),(se=this.i.toString())&&O.push("?",se),(se=this.m)&&O.push("#",rc(se,ac)),O.join("")};function xi(O){return new On(O)}function Vc(O,ee,se){O.j=se?yo(ee,!0):ee,O.j&&(O.j=O.j.replace(/:$/,""))}function zc(O,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);O.s=ee}else O.s=null}function El(O,ee,se){ee instanceof Cl?(O.i=ee,Bh(O.i,O.h)):(se||(ee=rc(ee,Md)),O.i=new Cl(ee,O.h))}function Vn(O,ee,se){O.i.set(ee,se)}function $c(O){return Vn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function yo(O,ee){return O?ee?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function rc(O,ee,se){return typeof O=="string"?(O=encodeURI(O).replace(ee,kh),se&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function kh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var JA=/[#\/\?@]/g,ZA=/[#\?:]/g,nc=/[#\?]/g,Md=/[#\?@]/g,ac=/#/g;function Cl(O,ee){this.h=this.g=null,this.i=O||null,this.j=!!ee}function ua(O){O.g||(O.g=new Map,O.h=0,O.i&&Ld(O.i,function(ee,se){O.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}e=Cl.prototype,e.add=function(O,ee){ua(this),this.i=null,O=Sl(this,O);var se=this.g.get(O);return se||this.g.set(O,se=[]),se.push(ee),this.h+=1,this};function sc(O,ee){ua(O),ee=Sl(O,ee),O.g.has(ee)&&(O.i=null,O.h-=O.g.get(ee).length,O.g.delete(ee))}function _l(O,ee){return ua(O),ee=Sl(O,ee),O.g.has(ee)}e.forEach=function(O,ee){ua(this),this.g.forEach(function(se,xe){se.forEach(function(ze){O.call(ee,ze,xe,this)},this)},this)},e.na=function(){ua(this);const O=Array.from(this.g.values()),ee=Array.from(this.g.keys()),se=[];for(let xe=0;xe<ee.length;xe++){const ze=O[xe];for(let st=0;st<ze.length;st++)se.push(ee[xe])}return se},e.V=function(O){ua(this);let ee=[];if(typeof O=="string")_l(this,O)&&(ee=ee.concat(this.g.get(Sl(this,O))));else{O=Array.from(this.g.values());for(let se=0;se<O.length;se++)ee=ee.concat(O[se])}return ee},e.set=function(O,ee){return ua(this),this.i=null,O=Sl(this,O),_l(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ee]),this.h+=1,this},e.get=function(O,ee){return O?(O=this.V(O),0<O.length?String(O[0]):ee):ee};function Br(O,ee,se){sc(O,ee),0<se.length&&(O.i=null,O.g.set(Sl(O,ee),v(se)),O.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ee=Array.from(this.g.keys());for(var se=0;se<ee.length;se++){var xe=ee[se];const st=encodeURIComponent(String(xe)),Ut=this.V(xe);for(xe=0;xe<Ut.length;xe++){var ze=st;Ut[xe]!==""&&(ze+="="+encodeURIComponent(String(Ut[xe]))),O.push(ze)}}return this.i=O.join("&")};function Sl(O,ee){return ee=String(ee),O.j&&(ee=ee.toLowerCase()),ee}function Bh(O,ee){ee&&!O.j&&(ua(O),O.i=null,O.g.forEach(function(se,xe){var ze=xe.toLowerCase();xe!=ze&&(sc(this,xe),Br(this,ze,se))},O)),O.j=ee}function Ii(O,ee){const se=new cr;if(o.Image){const xe=new Image;xe.onload=p(ro,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=p(ro,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=p(ro,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=p(ro,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=O}else ee(!1)}function wo(O,ee){const se=new cr,xe=new AbortController,ze=setTimeout(()=>{xe.abort(),ro(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(O,{signal:xe.signal}).then(st=>{clearTimeout(ze),st.ok?ro(se,"TestPingServer: ok",!0,ee):ro(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),ro(se,"TestPingServer: error",!1,ee)})}function ro(O,ee,se,xe,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),xe(se)}catch{}}function Nl(){this.g=new Fn}function Eo(O,ee,se){const xe=se||"";try{YA(O,function(ze,st){let Ut=ze;u(ze)&&(Ut=Cr(ze)),ee.push(xe+st+"="+encodeURIComponent(Ut))})}catch(ze){throw ee.push(xe+"type="+encodeURIComponent("_badmap")),ze}}function Gc(O){this.l=O.Ub||null,this.j=O.eb||!1}g(Gc,Ir),Gc.prototype.g=function(){return new ic(this.l,this.j)},Gc.prototype.i=function(O){return function(){return O}}({});function ic(O,ee){mt.call(this),this.D=O,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ic,mt),e=ic.prototype,e.open=function(O,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ee,this.readyState=1,Fi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ee.body=O),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ef(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function ef(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ee=O.value?O.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!O.done}))&&(this.response=this.responseText+=ee)}O.done?Co(this):Fi(this),this.readyState==3&&ef(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Co(this))},e.Qa=function(O){this.g&&(this.response=O,Co(this))},e.ga=function(){this.g&&Co(this)};function Co(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Fi(O)}e.setRequestHeader=function(O,ee){this.u.append(O,ee)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,O.push(se[0]+": "+se[1]),se=ee.next();return O.join(`\r
`)};function Fi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function kl(O){let ee="";return B(O,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function ps(O,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=kl(se),typeof O=="string"?se!=null&&encodeURIComponent(String(se)):Vn(O,ee,se))}function xn(O){mt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(xn,mt);var Kc=/^https?$/i,Bl=["POST","PUT"];e=xn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ee=ee?ee.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?vt(this.o):vt(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(O),!0),this.B=!1}catch(st){tf(this,st);return}if(O=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ze in xe)se.set(ze,xe[ze]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const st of xe.keys())se.set(st,xe.get(st));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(st=>st.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Bl,ee,void 0))||xe||ze||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,Ut]of se)this.g.setRequestHeader(st,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(O),this.u=!1}catch(st){tf(this,st)}};function tf(O,ee){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ee,O.m=5,Mu(O),al(O)}function Mu(O){O.A||(O.A=!0,Tt(O,"complete"),Tt(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,Tt(this,"complete"),Tt(this,"abort"),al(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),xn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Uu(this):this.bb())},e.bb=function(){Uu(this)};function Uu(O){if(O.h&&typeof i<"u"&&(!O.v[1]||gs(O)!=4||O.Z()!=2)){if(O.u&&gs(O)==4)Ot(O.Ea,0,O);else if(Tt(O,"readystatechange"),gs(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=Ut===0){var ze=String(O.D).match(vi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),xe=!Kc.test(ze?ze.toLowerCase():"")}se=xe}if(se)Tt(O,"complete"),Tt(O,"success");else{O.m=6;try{var st=2<gs(O)?O.g.statusText:""}catch{st=""}O.l=st+" ["+O.Z()+"]",Mu(O)}}finally{al(O)}}}}function al(O,ee){if(O.g){Oi(O);const se=O.g,xe=O.v[0]?()=>{}:null;O.g=null,O.v=null,ee||Tt(O,"ready");try{se.onreadystatechange=xe}catch{}}}function Oi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function gs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ee=this.g.responseText;return O&&ee.indexOf(O)==0&&(ee=ee.substring(O.length)),Vr(ee)}};function Th(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function qc(O){const ee={};O=(O.g&&2<=gs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<O.length;xe++){if(C(O[xe]))continue;var se=D(O[xe]);const ze=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const st=ee[ze]||[];ee[ze]=st,st.push(se)}w(ee,function(xe){return xe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(O,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[O]||ee}function Wc(O){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,O),this.cb=bi("retryDelaySeedMs",1e4,O),this.Wa=bi("forwardChannelMaxRetries",2,O),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(O&&O.concurrentRequestLimit),this.Da=new Nl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Wc.prototype,e.la=8,e.G=1,e.connect=function(O,ee,se,xe){$t(0),this.W=O,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.I=W(this,null,this.W),Qd(this)};function oc(O){if(Qu(O),O.G==3){var ee=O.U++,se=xi(O.I);if(Vn(se,"SID",O.K),Vn(se,"RID",ee),Vn(se,"TYPE","terminate"),Xc(O,se),ee=new ut(O,O.j,ee),ee.L=2,ee.v=$c(xi(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.v,se=!0),se||(ee.g=de(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Gt(ee)}Vd(O)}function Ud(O){O.g&&(Yc(O),O.g.cancel(),O.g=null)}function Qu(O){Ud(O),O.u&&(o.clearTimeout(O.u),O.u=null),lc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function Qd(O){if(!Zs(O.h)&&!O.s){O.s=!0;var ee=O.Ga;Z||q(),H||(Z(),H=!0),z.add(ee,O),O.B=0}}function rf(O,ee){return Fs(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ee.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=en(h(O.Ga,O,ee),$u(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new ut(this,this.j,O);let st=this.o;if(this.S&&(st?(st=_(st),U(st,this.S)):st=this.S),this.m!==null||this.O||(ze.H=st,st=null),this.P)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,4096<ee){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=Vu(this,ze,ee),se=xi(this.I),Vn(se,"RID",O),Vn(se,"CVER",22),this.D&&Vn(se,"X-HTTP-Session-Id",this.D),Xc(this,se),st&&(this.O?ee="headers="+encodeURIComponent(String(kl(st)))+"&"+ee:this.m&&ps(se,this.m,st)),xa(this.h,ze),this.Ua&&Vn(se,"TYPE","init"),this.P?(Vn(se,"$req",ee),Vn(se,"SID","null"),ze.T=!0,jt(ze,se,null)):jt(ze,se,ee),this.G=2}}else this.G==3&&(O?Hu(this,O):this.i.length==0||Zs(this.h)||Hu(this))};function Hu(O,ee){var se;ee?se=ee.l:se=O.U++;const xe=xi(O.I);Vn(xe,"SID",O.K),Vn(xe,"RID",se),Vn(xe,"AID",O.T),Xc(O,xe),O.m&&O.o&&ps(xe,O.m,O.o),se=new ut(O,O.j,se,O.B+1),O.m===null&&(se.H=O.o),ee&&(O.i=ee.D.concat(O.i)),ee=Vu(O,se,1e3),se.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,se),jt(se,xe,ee)}function Xc(O,ee){O.H&&B(O.H,function(se,xe){Vn(ee,xe,se)}),O.l&&YA({},function(se,xe){Vn(ee,xe,se)})}function Vu(O,ee,se){se=Math.min(O.i.length,se);var xe=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let st=-1;for(;;){const Ut=["count="+se];st==-1?0<se?(st=ze[0].g,Ut.push("ofs="+st)):st=0:Ut.push("ofs="+st);let Tr=!0;for(let bn=0;bn<se;bn++){let Kr=ze[bn].g;const zn=ze[bn].map;if(Kr-=st,0>Kr)st=Math.max(0,ze[bn].g-100),Tr=!1;else try{Eo(zn,Ut,"req"+Kr+"_")}catch{xe&&xe(zn)}}if(Tr){xe=Ut.join("&");break e}}}return O=O.i.splice(0,se),ee.D=O,xe}function Hd(O){if(!O.g&&!O.u){O.Y=1;var ee=O.Fa;Z||q(),H||(Z(),H=!0),z.add(ee,O),O.v=0}}function zu(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=en(h(O.Fa,O),$u(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,jh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=en(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Ud(this),jh(this))};function Yc(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function jh(O){O.g=new ut(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ee=xi(O.qa);Vn(ee,"RID","rpc"),Vn(ee,"SID",O.K),Vn(ee,"AID",O.T),Vn(ee,"CI",O.F?"0":"1"),!O.F&&O.ja&&Vn(ee,"TO",O.ja),Vn(ee,"TYPE","xmlhttp"),Xc(O,ee),O.m&&O.o&&ps(ee,O.m,O.o),O.L&&(O.g.I=O.L);var se=O.g;O=O.ia,se.L=1,se.v=$c(xi(ee)),se.m=null,se.P=!0,Vt(se,O)}e.Za=function(){this.C!=null&&(this.C=null,Ud(this),zu(this),$t(19))};function lc(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function Jc(O,ee){var se=null;if(O.g==ee){lc(O),Yc(O),O.g=null;var xe=2}else if(gi(O.h,ee))se=ee.D,ei(O.h,ee),xe=1;else return;if(O.G!=0){if(ee.o)if(xe==1){se=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=O.B;xe=Pr(),Tt(xe,new rn(xe,se)),Qd(O)}else Hd(O);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(xe==1&&rf(O,ee)||xe==2&&zu(O)))switch(se&&0<se.length&&(ee=O.h,ee.i=ee.i.concat(se)),ze){case 1:Di(O,5);break;case 4:Di(O,10);break;case 3:Di(O,6);break;default:Di(O,2)}}}function $u(O,ee){let se=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(se*=2),se*ee}function Di(O,ee){if(O.j.info("Error code "+ee),ee==2){var se=h(O.fb,O),xe=O.Xa;const ze=!xe;xe=new On(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vc(xe,"https"),$c(xe),ze?Ii(xe.toString(),se):wo(xe.toString(),se)}else $t(2);O.G=0,O.l&&O.l.sa(ee),Vd(O),Qu(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Vd(O){if(O.G=0,O.ka=[],O.l){const ee=Pd(O.h);(ee.length!=0||O.i.length!=0)&&(b(O.ka,ee),b(O.ka,O.i),O.h.i.length=0,v(O.i),O.i.length=0),O.l.ra()}}function W(O,ee,se){var xe=se instanceof On?xi(se):new On(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),zc(xe,xe.s);else{var ze=o.location;xe=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var st=new On(null);xe&&Vc(st,xe),ee&&(st.g=ee),ze&&zc(st,ze),se&&(st.l=se),xe=st}return se=O.D,ee=O.ya,se&&ee&&Vn(xe,se,ee),Vn(xe,"VER",O.la),Xc(O,xe),xe}function de(O,ee,se){if(ee&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=O.Ca&&!O.pa?new xn(new Gc({eb:se})):new xn(O.pa),ee.Ha(O.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(O,ee){return new Ge(O,ee)};function Ge(O,ee){mt.call(this),this.g=new Wc(ee),this.l=O,this.h=ee&&ee.messageUrlParams||null,O=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ee.messageContentType:O={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(O?O["X-WebChannel-Client-Profile"]=ee.va:O={"X-WebChannel-Client-Profile":ee.va}),this.g.S=O,(O=ee&&ee.Sb)&&!C(O)&&(this.g.m=O),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!C(ee)&&(this.g.D=ee,O=this.h,O!==null&&ee in O&&(O=this.h,ee in O&&delete O[ee])),this.j=new Zt(this)}g(Ge,mt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){oc(this.g)},Ge.prototype.o=function(O){var ee=this.g;if(typeof O=="string"){var se={};se.__data__=O,O=se}else this.u&&(se={},se.__data__=Cr(O),O=se);ee.i.push(new bo(ee.Ya++,O)),ee.G==3&&Qd(ee)},Ge.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Ge.aa.N.call(this)};function xt(O){gt.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ee=O.__sm__;if(ee){e:{for(const se in ee){O=se;break e}O=void 0}(this.i=O)&&(O=this.i,ee=ee!==null&&O in ee?ee[O]:void 0),this.data=ee}else this.data=O}g(xt,gt);function Pt(){dt.call(this),this.status=1}g(Pt,dt);function Zt(O){this.g=O}g(Zt,Fe),Zt.prototype.ua=function(){Tt(this.g,"a")},Zt.prototype.ta=function(O){Tt(this.g,new xt(O))},Zt.prototype.sa=function(O){Tt(this.g,new Pt)},Zt.prototype.ra=function(){Tt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,nY=function(){return new Le},rY=function(){return Pr()},tY=Dt,TI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,d_=Ce,Ne.COMPLETE="complete",eY=Ne,pt.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Gb=pt,xn.prototype.listenOnce=xn.prototype.L,xn.prototype.getLastError=xn.prototype.Ka,xn.prototype.getLastErrorCode=xn.prototype.Ba,xn.prototype.getStatus=xn.prototype.Z,xn.prototype.getResponseJson=xn.prototype.Oa,xn.prototype.getResponseText=xn.prototype.oa,xn.prototype.send=xn.prototype.ea,xn.prototype.setWithCredentials=xn.prototype.Ha,ZX=xn}).apply(typeof FE<"u"?FE:typeof self<"u"?self:typeof window<"u"?window:{});const A7="@firebase/firestore",f7="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zx="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new NO("@firebase/firestore");function Cv(){return Up.logLevel}function lr(e,...t){if(Up.logLevel<=Bn.DEBUG){const r=t.map(LO);Up.debug(`Firestore (${Zx}): ${e}`,...r)}}function rh(e,...t){if(Up.logLevel<=Bn.ERROR){const r=t.map(LO);Up.error(`Firestore (${Zx}): ${e}`,...r)}}function Qp(e,...t){if(Up.logLevel<=Bn.WARN){const r=t.map(LO);Up.warn(`Firestore (${Zx}): ${e}`,...r)}}function LO(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,aY(e,n,r)}function aY(e,t,r){let n=`FIRESTORE (${Zx}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw rh(n),new Error(n)}function la(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||aY(t,a,n)}function Zr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Td{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class iY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Uo.UNAUTHENTICATED))}shutdown(){}}class yme{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class wme{constructor(t){this.t=t,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){la(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new Vf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(la(typeof n.accessToken=="string",31837,{l:n}),new sY(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return la(t===null||typeof t=="string",2055,{h:t}),new Uo(t)}}class Eme{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Cme{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Eme(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h7{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _me{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){la(this.o===void 0,3512);const n=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new h7(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(la(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new h7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sme(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Sme(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Tn(e,t){return e<t?-1:e>t?1:0}function jI(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return UB(a)===UB(s)?Tn(a,s):UB(a)?1:-1}return Tn(e.length,t.length)}const Nme=55296,kme=57343;function UB(e){const t=e.charCodeAt(0);return t>=Nme&&t<=kme}function vx(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="__name__";class xA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Hr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return xA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof xA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=xA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Tn(t.length,r.length)}static compareSegments(t,r){const n=xA.isNumericId(t),a=xA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?xA.extractNumericId(t).compare(xA.extractNumericId(r)):jI(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return M0.fromString(t.substring(4,t.length-2))}}class Na extends xA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const Bme=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends xA{construct(t,r,n){return new Gi(t,r,n)}static isValidIdentifier(t){return Bme.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m7}static keyField(){return new Gi([m7])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Wt(wt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Wt(wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Wt(wt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gi(r)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.path=t}static fromPath(t){return new vr(Na.fromString(t))}static fromName(t){return new vr(Na.fromString(t).popFirst(5))}static empty(){return new vr(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vr(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(e,t,r){if(!r)throw new Wt(wt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lY(e,t,r,n){if(t===!0&&n===!0)throw new Wt(wt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function p7(e){if(!vr.isDocumentKey(e))throw new Wt(wt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function g7(e){if(vr.isDocumentKey(e))throw new Wt(wt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cY(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function AN(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function Yo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=AN(e);throw new Wt(wt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Tme(e,t){if(t<=0)throw new Wt(wt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){const r={typeString:e};return t&&(r.value=t),r}function $w(e,t){if(!cY(e))throw new Wt(wt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(wt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=-62135596800,x7=1e6;class hr{static now(){return hr.fromMillis(Date.now())}static fromDate(t){return hr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*x7);return new hr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<v7)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x7}_compareTo(t){return this.seconds===t.seconds?Tn(this.nanoseconds,t.nanoseconds):Tn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:hr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($w(t,hr._jsonSchema))return new hr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-v7;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}hr._jsonSchemaVersion="firestore/timestamp/1.0",hr._jsonSchema={type:hi("string",hr._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static fromTimestamp(t){return new Wr(t)}static min(){return new Wr(new hr(0,0))}static max(){return new Wr(new hr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=-1;function jme(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Wr.fromTimestamp(n===1e9?new hr(r+1,0):new hr(r,n));return new J0(a,vr.empty(),t)}function Ime(e){return new J0(e.readTime,e.key,$y)}class J0{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new J0(Wr.min(),vr.empty(),$y)}static max(){return new J0(Wr.max(),vr.empty(),$y)}}function Fme(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=vr.comparator(e.documentKey,t.documentKey),r!==0?r:Tn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ome="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dme{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(e){if(e.code!==wt.FAILED_PRECONDITION||e.message!==Ome)throw e;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ft((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ft?r:Ft.resolve(r)}catch(r){return Ft.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ft.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ft.reject(r)}static resolve(t){return new Ft((r,n)=>{r(t)})}static reject(t){return new Ft((r,n)=>{n(t)})}static waitFor(t){return new Ft((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(t){let r=Ft.resolve(!1);for(const n of t)r=r.next(a=>a?Ft.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Ft((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Ft((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Rme(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function t1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}fN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=-1;function hN(e){return e==null}function sS(e){return e===0&&1/e==-1/0}function Pme(e){return typeof e=="number"&&Number.isInteger(e)&&!sS(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uY="";function Lme(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=b7(t)),t=Mme(e.get(r),t);return b7(t)}function Mme(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case uY:r+="";break;default:r+=s}}return r}function b7(e){return e+uY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function pm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function dY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||ho.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ho.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new OE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new OE(this.root,t,this.comparator,!1)}getReverseIterator(){return new OE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new OE(this.root,t,this.comparator,!0)}}class OE{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ho{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??ho.RED,this.left=a??ho.EMPTY,this.right=s??ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new ho(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return ho.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1;ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new ho(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new w7(this.data.getIterator())}getIteratorFrom(t){return new w7(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Si)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Si(this.comparator);return r.data=t,r}}class w7{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t){this.fields=t,t.sort(Gi.comparator)}static empty(){return new jc([])}unionWith(t){let r=new Si(Gi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new jc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return vx(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AY("Invalid base64 string: "+s):s}}(t);return new Yi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Yi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const Ume=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z0(e){if(la(!!e,39018),typeof e=="string"){let t=0;const r=Ume.exec(e);if(la(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:zs(e.seconds),nanos:zs(e.nanos)}}function zs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function em(e){return typeof e=="string"?Yi.fromBase64String(e):Yi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="server_timestamp",hY="__type__",mY="__previous_value__",pY="__local_write_time__";function mN(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[hY])==null?void 0:n.stringValue)===fY}function pN(e){const t=e.mapValue.fields[mY];return mN(t)?pN(t):t}function Gy(e){const t=Z0(e.mapValue.fields[pY].timestampValue);return new hr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qme{constructor(t,r,n,a,s,i,o,l,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const iS="(default)";class xx{constructor(t,r){this.projectId=t,this.database=r||iS}static empty(){return new xx("","")}get isDefaultDatabase(){return this.database===iS}isEqual(t){return t instanceof xx&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY="__type__",Hme="__max__",DE={mapValue:{}},vY="__vector__",oS="value";function tm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mN(e)?4:zme(e)?9007199254740991:Vme(e)?10:11:Hr(28295,{value:e})}function HA(e,t){if(e===t)return!0;const r=tm(e);if(r!==tm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gy(e).isEqual(Gy(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=Z0(a.timestampValue),o=Z0(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return em(a.bytesValue).isEqual(em(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return zs(a.geoPointValue.latitude)===zs(s.geoPointValue.latitude)&&zs(a.geoPointValue.longitude)===zs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return zs(a.integerValue)===zs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=zs(a.doubleValue),o=zs(s.doubleValue);return i===o?sS(i)===sS(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return vx(e.arrayValue.values||[],t.arrayValue.values||[],HA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(y7(i)!==y7(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!HA(i[l],o[l])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function Ky(e,t){return(e.values||[]).find(r=>HA(r,t))!==void 0}function bx(e,t){if(e===t)return 0;const r=tm(e),n=tm(t);if(r!==n)return Tn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Tn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=zs(s.integerValue||s.doubleValue),l=zs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return E7(e.timestampValue,t.timestampValue);case 4:return E7(Gy(e),Gy(t));case 5:return jI(e.stringValue,t.stringValue);case 6:return function(s,i){const o=em(s),l=em(i);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Tn(o[u],l[u]);if(d!==0)return d}return Tn(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=Tn(zs(s.latitude),zs(i.latitude));return o!==0?o:Tn(zs(s.longitude),zs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return C7(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,v;const o=s.fields||{},l=i.fields||{},u=(h=o[oS])==null?void 0:h.arrayValue,d=(p=l[oS])==null?void 0:p.arrayValue,f=Tn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return f!==0?f:C7(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===DE.mapValue&&i===DE.mapValue)return 0;if(s===DE.mapValue)return 1;if(i===DE.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const h=jI(l[f],d[f]);if(h!==0)return h;const p=bx(o[l[f]],u[d[f]]);if(p!==0)return p}return Tn(l.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function E7(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Tn(e,t);const r=Z0(e),n=Z0(t),a=Tn(r.seconds,n.seconds);return a!==0?a:Tn(r.nanos,n.nanos)}function C7(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=bx(r[a],n[a]);if(s)return s}return Tn(r.length,n.length)}function yx(e){return II(e)}function II(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=Z0(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return em(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return vr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=II(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${II(r.fields[i])}`;return a+"}"}(e.mapValue):Hr(61005,{value:e})}function A_(e){switch(tm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=pN(e);return t?16+A_(t):16;case 5:return 2*e.stringValue.length;case 6:return em(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+A_(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return pm(n.fields,(s,i)=>{a+=s.length+A_(i)}),a}(e.mapValue);default:throw Hr(13486,{value:e})}}function lS(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function FI(e){return!!e&&"integerValue"in e}function UO(e){return!!e&&"arrayValue"in e}function _7(e){return!!e&&"nullValue"in e}function S7(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function f_(e){return!!e&&"mapValue"in e}function Vme(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[gY])==null?void 0:n.stringValue)===vY}function my(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return pm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=my(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=my(e.arrayValue.values[r]);return t}return{...e}}function zme(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Hme}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){this.value=t}static empty(){return new Gl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!f_(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=my(r)}setAll(t){let r=Gi.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=my(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());f_(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return HA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];f_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){pm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Gl(my(this.value))}}function xY(e){const t=[];return pm(e.fields,(r,n)=>{const a=new Gi([r]);if(f_(n)){const s=xY(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new jc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Wr.min(),Wr.min(),Wr.min(),Gl.empty(),0)}static newFoundDocument(t,r,n,a){return new zo(t,1,r,Wr.min(),n,a,0)}static newNoDocument(t,r){return new zo(t,2,r,Wr.min(),Wr.min(),Gl.empty(),0)}static newUnknownDocument(t,r){return new zo(t,3,r,Wr.min(),Wr.min(),Gl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,r){this.position=t,this.inclusive=r}}function N7(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=vr.comparator(vr.fromName(i.referenceValue),r.key):n=bx(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function k7(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!HA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(t,r="asc"){this.field=t,this.dir=r}}function $me(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{}class fi extends bY{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Kme(t,r,n):r==="array-contains"?new Xme(t,n):r==="in"?new Yme(t,n):r==="not-in"?new Jme(t,n):r==="array-contains-any"?new Zme(t,n):new fi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new qme(t,n):new Wme(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(bx(r,this.value)):r!==null&&tm(this.value)===tm(r)&&this.matchesComparison(bx(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kd extends bY{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new kd(t,r)}matches(t){return yY(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yY(e){return e.op==="and"}function wY(e){return Gme(e)&&yY(e)}function Gme(e){for(const t of e.filters)if(t instanceof kd)return!1;return!0}function OI(e){if(e instanceof fi)return e.field.canonicalString()+e.op.toString()+yx(e.value);if(wY(e))return e.filters.map(t=>OI(t)).join(",");{const t=e.filters.map(r=>OI(r)).join(",");return`${e.op}(${t})`}}function EY(e,t){return e instanceof fi?function(n,a){return a instanceof fi&&n.op===a.op&&n.field.isEqual(a.field)&&HA(n.value,a.value)}(e,t):e instanceof kd?function(n,a){return a instanceof kd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&EY(i,a.filters[o]),!0):!1}(e,t):void Hr(19439)}function CY(e){return e instanceof fi?function(r){return`${r.field.canonicalString()} ${r.op} ${yx(r.value)}`}(e):e instanceof kd?function(r){return r.op.toString()+" {"+r.getFilters().map(CY).join(" ,")+"}"}(e):"Filter"}class Kme extends fi{constructor(t,r,n){super(t,r,n),this.key=vr.fromName(n.referenceValue)}matches(t){const r=vr.comparator(t.key,this.key);return this.matchesComparison(r)}}class qme extends fi{constructor(t,r){super(t,"in",r),this.keys=_Y("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Wme extends fi{constructor(t,r){super(t,"not-in",r),this.keys=_Y("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function _Y(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>vr.fromName(n.referenceValue))}class Xme extends fi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return UO(r)&&Ky(r.arrayValue,this.value)}}class Yme extends fi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ky(this.value.arrayValue,r)}}class Jme extends fi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ky(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ky(this.value.arrayValue,r)}}class Zme extends fi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!UO(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ky(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class epe{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function B7(e,t=null,r=[],n=[],a=null,s=null,i=null){return new epe(e,t,r,n,a,s,i)}function QO(e){const t=Zr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>OI(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),hN(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>yx(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>yx(n)).join(",")),t.Te=r}return t.Te}function HO(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!$me(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!EY(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!k7(e.startAt,t.startAt)&&k7(e.endAt,t.endAt)}function DI(e){return vr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tpe(e,t,r,n,a,s,i,o){return new ig(e,t,r,n,a,s,i,o)}function gN(e){return new ig(e)}function T7(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function VO(e){return e.collectionGroup!==null}function Yv(e){const t=Zr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Si(Gi.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new qy(s,n))}),r.has(Gi.keyField().canonicalString())||t.Ie.push(new qy(Gi.keyField(),n))}return t.Ie}function DA(e){const t=Zr(e);return t.Ee||(t.Ee=rpe(t,Yv(e))),t.Ee}function rpe(e,t){if(e.limitType==="F")return B7(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new qy(a.field,s)});const r=e.endAt?new wx(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new wx(e.startAt.position,e.startAt.inclusive):null;return B7(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function RI(e,t){const r=e.filters.concat([t]);return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function cS(e,t,r){return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function vN(e,t){return HO(DA(e),DA(t))&&e.limitType===t.limitType}function SY(e){return`${QO(DA(e))}|lt:${e.limitType}`}function _v(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>CY(a)).join(", ")}]`),hN(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>yx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>yx(a)).join(",")),`Target(${n})`}(DA(e))}; limitType=${e.limitType})`}function xN(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):vr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Yv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=N7(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Yv(n),a)||n.endAt&&!function(i,o,l){const u=N7(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Yv(n),a))}(e,t)}function npe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function NY(e){return(t,r)=>{let n=!1;for(const a of Yv(e)){const s=ape(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function ape(e,t,r){const n=e.field.isKeyField()?vr.comparator(t.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?bx(l,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){pm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return dY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const spe=new ls(vr.comparator);function nh(){return spe}const kY=new ls(vr.comparator);function Kb(...e){let t=kY;for(const r of e)t=t.insert(r.key,r);return t}function BY(e){let t=kY;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function dp(){return py()}function TY(){return py()}function py(){return new og(e=>e.toString(),(e,t)=>e.isEqual(t))}const ipe=new ls(vr.comparator),ope=new Si(vr.comparator);function jn(...e){let t=ope;for(const r of e)t=t.add(r);return t}const lpe=new Si(Tn);function cpe(){return lpe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sS(t)?"-0":t}}function jY(e){return{integerValue:""+e}}function upe(e,t){return Pme(t)?jY(t):zO(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this._=void 0}}function dpe(e,t,r){return e instanceof Wy?function(a,s){const i={fields:{[hY]:{stringValue:fY},[pY]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&mN(s)&&(s=pN(s)),s&&(i.fields[mY]=s),{mapValue:i}}(r,t):e instanceof Ex?FY(e,t):e instanceof Xy?OY(e,t):function(a,s){const i=IY(a,s),o=j7(i)+j7(a.Ae);return FI(i)&&FI(a.Ae)?jY(o):zO(a.serializer,o)}(e,t)}function Ape(e,t,r){return e instanceof Ex?FY(e,t):e instanceof Xy?OY(e,t):r}function IY(e,t){return e instanceof uS?function(n){return FI(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Wy extends bN{}class Ex extends bN{constructor(t){super(),this.elements=t}}function FY(e,t){const r=DY(t);for(const n of e.elements)r.some(a=>HA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Xy extends bN{constructor(t){super(),this.elements=t}}function OY(e,t){let r=DY(t);for(const n of e.elements)r=r.filter(a=>!HA(a,n));return{arrayValue:{values:r}}}class uS extends bN{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function j7(e){return zs(e.integerValue||e.doubleValue)}function DY(e){return UO(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(t,r){this.field=t,this.transform=r}}function fpe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof Ex&&a instanceof Ex||n instanceof Xy&&a instanceof Xy?vx(n.elements,a.elements,HA):n instanceof uS&&a instanceof uS?HA(n.Ae,a.Ae):n instanceof Wy&&a instanceof Wy}(e.transform,t.transform)}class hpe{constructor(t,r){this.version=t,this.transformResults=r}}class gl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new gl}static exists(t){return new gl(void 0,t)}static updateTime(t){return new gl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function h_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class yN{}function PY(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wN(e.key,gl.none()):new Gw(e.key,e.data,gl.none());{const r=e.data,n=Gl.empty();let a=new Si(Gi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new gm(e.key,n,new jc(a.toArray()),gl.none())}}function mpe(e,t,r){e instanceof Gw?function(a,s,i){const o=a.value.clone(),l=F7(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof gm?function(a,s,i){if(!h_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=F7(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(LY(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function gy(e,t,r,n){return e instanceof Gw?function(s,i,o,l){if(!h_(s.precondition,i))return o;const u=s.value.clone(),d=O7(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof gm?function(s,i,o,l){if(!h_(s.precondition,i))return o;const u=O7(s.fieldTransforms,l,i),d=i.data;return d.setAll(LY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return h_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function ppe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=IY(n.transform,a||null);s!=null&&(r===null&&(r=Gl.empty()),r.set(n.field,s))}return r||null}function I7(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&vx(n,a,(s,i)=>fpe(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gw extends yN{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gm extends yN{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LY(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function F7(e,t,r){const n=new Map;la(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,Ape(i,o,r[a]))}return n}function O7(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,dpe(s,i,t))}return n}class wN extends yN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gpe extends yN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vpe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&mpe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=gy(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=gy(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=TY();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=PY(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Wr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),jn())}isEqual(t){return this.batchId===t.batchId&&vx(this.mutations,t.mutations,(r,n)=>I7(r,n))&&vx(this.baseMutations,t.baseMutations,(r,n)=>I7(r,n))}}class $O{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){la(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return ipe}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new $O(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,Mn;function ype(e){switch(e){case wt.OK:return Hr(64938);case wt.CANCELLED:case wt.UNKNOWN:case wt.DEADLINE_EXCEEDED:case wt.RESOURCE_EXHAUSTED:case wt.INTERNAL:case wt.UNAVAILABLE:case wt.UNAUTHENTICATED:return!1;case wt.INVALID_ARGUMENT:case wt.NOT_FOUND:case wt.ALREADY_EXISTS:case wt.PERMISSION_DENIED:case wt.FAILED_PRECONDITION:case wt.ABORTED:case wt.OUT_OF_RANGE:case wt.UNIMPLEMENTED:case wt.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function MY(e){if(e===void 0)return rh("GRPC error has no .code"),wt.UNKNOWN;switch(e){case ii.OK:return wt.OK;case ii.CANCELLED:return wt.CANCELLED;case ii.UNKNOWN:return wt.UNKNOWN;case ii.DEADLINE_EXCEEDED:return wt.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return wt.RESOURCE_EXHAUSTED;case ii.INTERNAL:return wt.INTERNAL;case ii.UNAVAILABLE:return wt.UNAVAILABLE;case ii.UNAUTHENTICATED:return wt.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return wt.INVALID_ARGUMENT;case ii.NOT_FOUND:return wt.NOT_FOUND;case ii.ALREADY_EXISTS:return wt.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return wt.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return wt.FAILED_PRECONDITION;case ii.ABORTED:return wt.ABORTED;case ii.OUT_OF_RANGE:return wt.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return wt.UNIMPLEMENTED;case ii.DATA_LOSS:return wt.DATA_LOSS;default:return Hr(39323,{code:e})}}(Mn=ii||(ii={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe=new M0([4294967295,4294967295],0);function D7(e){const t=wpe().encode(e),r=new JX;return r.update(t),new Uint8Array(r.digest())}function R7(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new M0([r,n],0),new M0([a,s],0)]}class GO{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new qb(`Invalid padding: ${r}`);if(n<0)throw new qb(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new qb(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new qb(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=M0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(M0.fromNumber(n)));return a.compare(Epe)===1&&(a=new M0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=D7(t),[n,a]=R7(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new GO(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=D7(t),[n,a]=R7(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class qb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,Kw.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new EN(Wr.min(),a,new ls(Tn),nh(),jn())}}class Kw{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Kw(n,r,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class UY{constructor(t,r){this.targetId=t,this.Ce=r}}class QY{constructor(t,r,n=Yi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class P7{constructor(){this.ve=0,this.Fe=L7(),this.Me=Yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jn(),r=jn(),n=jn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Hr(38017,{changeType:s})}}),new Kw(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=L7()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,la(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Cpe{constructor(t){this.Ge=t,this.ze=new Map,this.je=nh(),this.Je=RE(),this.He=RE(),this.Ye=new ls(Tn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(DI(s))if(n===0){const i=new vr(s.path);this.et(r,i,zo.newNoDocument(i,Wr.min()))}else la(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),l=o?this.ct(o,t,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=em(n).toUint8Array()}catch(l){if(l instanceof AY)return Qp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new GO(i,a,s)}catch(l){return Qp(l instanceof qb?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&DI(o.target)){const l=new vr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,zo.newNoDocument(l,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=jn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new EN(t,r,this.Ye,this.je,n);return this.je=nh(),this.Je=RE(),this.He=RE(),this.Ye=new ls(Tn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new P7,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Si(Tn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Si(Tn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new P7),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function RE(){return new ls(vr.comparator)}function L7(){return new ls(vr.comparator)}const _pe={asc:"ASCENDING",desc:"DESCENDING"},Spe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Npe={and:"AND",or:"OR"};class kpe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function PI(e,t){return e.useProto3Json||hN(t)?t:{value:t}}function dS(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function HY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Bpe(e,t){return dS(e,t.toTimestamp())}function RA(e){return la(!!e,49232),Wr.fromTimestamp(function(r){const n=Z0(r);return new hr(n.seconds,n.nanos)}(e))}function KO(e,t){return LI(e,t).canonicalString()}function LI(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function VY(e){const t=Na.fromString(e);return la(qY(t),10190,{key:t.toString()}),t}function MI(e,t){return KO(e.databaseId,t.path)}function QB(e,t){const r=VY(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new vr($Y(r))}function zY(e,t){return KO(e.databaseId,t)}function Tpe(e){const t=VY(e);return t.length===4?Na.emptyPath():$Y(t)}function UI(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $Y(e){return la(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function M7(e,t,r){return{name:MI(e,t),fields:r.value.mapValue.fields}}function jpe(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(la(d===void 0||typeof d=="string",58123),Yi.fromBase64String(d||"")):(la(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?wt.UNKNOWN:MY(u.code);return new Wt(d,u.message||"")}(i);r=new QY(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=QB(e,n.document.name),s=RA(n.document.updateTime),i=n.document.createTime?RA(n.document.createTime):Wr.min(),o=new Gl({mapValue:{fields:n.document.fields}}),l=zo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new m_(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=QB(e,n.document),s=n.readTime?RA(n.readTime):Wr.min(),i=zo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new m_([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=QB(e,n.document),s=n.removedTargetIds||[];r=new m_([],s,a,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new bpe(a,s),o=n.targetId;r=new UY(o,i)}}return r}function Ipe(e,t){let r;if(t instanceof Gw)r={update:M7(e,t.key,t.value)};else if(t instanceof wN)r={delete:MI(e,t.key)};else if(t instanceof gm)r={update:M7(e,t.key,t.data),updateMask:Qpe(t.fieldMask)};else{if(!(t instanceof gpe))return Hr(16599,{Vt:t.type});r={verify:MI(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Wy)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ex)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xy)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof uS)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Hr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Bpe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function Fpe(e,t){return e&&e.length>0?(la(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?RA(a.updateTime):RA(s);return i.isEqual(Wr.min())&&(i=RA(s)),new hpe(i,a.transformResults||[])}(r,t))):[]}function Ope(e,t){return{documents:[zY(e,t.path)]}}function Dpe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=zY(e,a);const s=function(u){if(u.length!==0)return KY(kd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Sv(h.field),direction:Lpe(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=PI(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Rpe(e){let t=Tpe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){la(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=GY(f);return h instanceof kd&&wY(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new qy(Nv(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,hN(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new wx(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new wx(p,h)}(r.endAt)),tpe(t,a,i,s,o,"F",l,u)}function Ppe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function GY(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Nv(r.unaryFilter.field);return fi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Nv(r.unaryFilter.field);return fi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nv(r.unaryFilter.field);return fi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nv(r.unaryFilter.field);return fi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return fi.create(Nv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return kd.create(r.compositeFilter.filters.map(n=>GY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function Lpe(e){return _pe[e]}function Mpe(e){return Spe[e]}function Upe(e){return Npe[e]}function Sv(e){return{fieldPath:e.canonicalString()}}function Nv(e){return Gi.fromServerFormat(e.fieldPath)}function KY(e){return e instanceof fi?function(r){if(r.op==="=="){if(S7(r.value))return{unaryFilter:{field:Sv(r.field),op:"IS_NAN"}};if(_7(r.value))return{unaryFilter:{field:Sv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(S7(r.value))return{unaryFilter:{field:Sv(r.field),op:"IS_NOT_NAN"}};if(_7(r.value))return{unaryFilter:{field:Sv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sv(r.field),op:Mpe(r.op),value:r.value}}}(e):e instanceof kd?function(r){const n=r.getFilters().map(a=>KY(a));return n.length===1?n[0]:{compositeFilter:{op:Upe(r.op),filters:n}}}(e):Hr(54877,{filter:e})}function Qpe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function qY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,r,n,a,s=Wr.min(),i=Wr.min(),o=Yi.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new B0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new B0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new B0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new B0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hpe{constructor(t){this.yt=t}}function Vpe(e){const t=Rpe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cS(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{constructor(){this.Cn=new $pe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Ft.resolve()}getCollectionParents(t,r){return Ft.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Ft.resolve()}deleteFieldIndex(t,r){return Ft.resolve()}deleteAllFieldIndexes(t){return Ft.resolve()}createTargetIndexes(t,r){return Ft.resolve()}getDocumentsMatchingTarget(t,r){return Ft.resolve(null)}getIndexType(t,r){return Ft.resolve(0)}getFieldIndexes(t,r){return Ft.resolve([])}getNextCollectionGroupToUpdate(t){return Ft.resolve(null)}getMinOffset(t,r){return Ft.resolve(J0.min())}getMinOffsetFromCollectionGroup(t,r){return Ft.resolve(J0.min())}updateCollectionGroup(t,r,n){return Ft.resolve()}updateIndexEntries(t,r){return Ft.resolve()}}class $pe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Si(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Si(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WY=41943040;class Ql{static withCacheSize(t){return new Ql(t,Ql.DEFAULT_COLLECTION_PERCENTILE,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ql.DEFAULT_COLLECTION_PERCENTILE=10,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ql.DEFAULT=new Ql(WY,Ql.DEFAULT_COLLECTION_PERCENTILE,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ql.DISABLED=new Ql(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Cx(0)}static cr(){return new Cx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="LruGarbageCollector",Gpe=1048576;function H7([e,t],[r,n]){const a=Tn(e,r);return a===0?Tn(t,n):a}class Kpe{constructor(t){this.Ir=t,this.buffer=new Si(H7),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();H7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class qpe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lr(Q7,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){t1(r)?lr(Q7,"Ignoring IndexedDB error during garbage collection: ",r):await e1(r)}await this.Vr(3e5)})}}class Wpe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Ft.resolve(fN.ce);const n=new Kpe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Ft.resolve(U7)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U7):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Cv()<=Bn.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Xpe(e,t){return new Wpe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{constructor(){this.changes=new og(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ft.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jpe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zpe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&gy(n.mutation,a,jc.empty(),hr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,jn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=jn()){const a=dp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Kb();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=dp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,jn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=nh();const i=py(),o=function(){return py()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof gm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),gy(d.mutation,u,d.mutation.getFieldMask(),hr.now())):i.set(u.key,jc.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new Jpe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=py();let a=new ls((i,o)=>i-o),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||jc.empty();d=o.applyToLocalView(u,d),n.set(l,d);const f=(a.get(o.batchId)||jn()).add(l);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=TY();d.forEach(h=>{if(!s.has(h)){const p=PY(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Ft.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return vr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):VO(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Ft.resolve(dp());let o=$y,l=s;return i.next(u=>Ft.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Ft.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,jn())).next(d=>({batchId:o,changes:BY(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new vr(r)).next(n=>{let a=Kb();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Kb();return this.indexManager.getCollectionParents(t,s).next(o=>Ft.forEach(o,l=>{const u=function(f,h){return new ig(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=Kb();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&gy(d.mutation,u,jc.empty(),hr.now()),xN(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ege{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Ft.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:RA(a.createTime)}}(r)),Ft.resolve()}getNamedQuery(t,r){return Ft.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Vpe(a.bundledQuery),readTime:RA(a.readTime)}}(r)),Ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tge{constructor(){this.overlays=new ls(vr.comparator),this.qr=new Map}getOverlay(t,r){return Ft.resolve(this.overlays.get(r))}getOverlays(t,r){const n=dp();return Ft.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Ft.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ft.resolve()}getOverlaysForCollection(t,r,n){const a=dp(),s=r.length+1,i=new vr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return Ft.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ls((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=dp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=dp(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Ft.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new xpe(r,n));let s=this.qr.get(r);s===void 0&&(s=jn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rge{constructor(){this.sessionToken=Yi.EMPTY_BYTE_STRING}getSessionToken(t){return Ft.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.Qr=new Si(Hi.$r),this.Ur=new Si(Hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Hi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Hi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new vr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new vr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1);let s=jn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Hi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Hi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return vr.comparator(t.key,r.key)||Tn(t.Yr,r.Yr)}static Kr(t,r){return Tn(t.Yr,r.Yr)||vr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nge{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Si(Hi.$r)}checkEmpty(t){return Ft.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new vpe(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Ft.resolve(i)}lookupMutationBatch(t,r){return Ft.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Ft.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(this.mutationQueue.length===0?MO:this.tr-1)}getAllMutationBatches(t){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Hi(r,0),a=new Hi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Ft.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Si(Tn);return r.forEach(a=>{const s=new Hi(a,0),i=new Hi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Ft.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;vr.isDocumentKey(s)||(s=s.child(""));const i=new Hi(new vr(s),0);let o=new Si(Tn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),Ft.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){la(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ft.forEach(r.mutations,a=>{const s=new Hi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Hi(r,0),a=this.Zr.firstAfterOrEqual(n);return Ft.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ft.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class age{constructor(t){this.ri=t,this.docs=function(){return new ls(vr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Ft.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(r))}getEntries(t,r){let n=nh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():zo.newInvalidDocument(a))}),Ft.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=nh();const i=r.path,o=new vr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Fme(Ime(d),n)<=0||(a.has(d.key)||xN(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ft.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Hr(9500)}ii(t,r){return Ft.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new sge(this)}getSize(t){return Ft.resolve(this.size)}}class sge extends Ype{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Ft.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ige{constructor(t){this.persistence=t,this.si=new og(r=>QO(r),HO),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.oi=0,this._i=new qO,this.targetCount=0,this.ai=Cx.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Ft.resolve()}getLastRemoteSnapshotVersion(t){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ft.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ft.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Cx(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Ft.resolve()}updateTargetData(t,r){return this.Pr(r),Ft.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Ft.waitFor(s).next(()=>a)}getTargetCount(t){return Ft.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Ft.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Ft.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Ft.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Ft.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Ft.resolve(n)}containsKey(t,r){return Ft.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(t,r){this.ui={},this.overlays={},this.ci=new fN(0),this.li=!1,this.li=!0,this.hi=new rge,this.referenceDelegate=t(this),this.Pi=new ige(this),this.indexManager=new zpe,this.remoteDocumentCache=function(a){return new age(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Hpe(r),this.Ii=new ege(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new tge,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new nge(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){lr("MemoryPersistence","Starting transaction:",t);const a=new oge(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Ft.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class oge extends Dme{constructor(t){super(),this.currentSequenceNumber=t}}class WO{constructor(t){this.persistence=t,this.Ri=new qO,this.Vi=null}static mi(t){return new WO(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ft.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ft.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Ft.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.fi,n=>{const a=vr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Wr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Ft.or([()=>Ft.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class AS{constructor(t,r){this.persistence=t,this.pi=new og(n=>Lme(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Xpe(this,r)}static mi(t,r){return new AS(t,r)}Ei(){}di(t){return Ft.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Ft.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Ft.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Wr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Ft.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ft.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ft.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Ft.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=A_(t.data.value)),r}br(t,r,n){return Ft.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Ft.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=jn(),a=jn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new XO(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cge{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UAe()?8:Rme(Zo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new lge;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Cv()<=Bn.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",_v(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ft.resolve()):(Cv()<=Bn.DEBUG&&lr("QueryEngine","Query:",_v(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Cv()<=Bn.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",_v(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,DA(r))):Ft.resolve())}ys(t,r){if(T7(r))return Ft.resolve(null);let n=DA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=cS(r,null,"F"),n=DA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=jn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(t,cS(r,null,"F")):this.vs(t,u,r,l)}))})))}ws(t,r,n,a){return T7(r)||a.isEqual(Wr.min())?Ft.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Ft.resolve(null):(Cv()<=Bn.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_v(r)),this.vs(t,i,r,jme(a,$y)).next(o=>o))})}Ds(t,r){let n=new Si(NY(t));return r.forEach((a,s)=>{xN(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Cv()<=Bn.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",_v(r)),this.ps.getDocumentsMatchingQuery(t,r,J0.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="LocalStore",uge=3e8;class dge{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ls(Tn),this.xs=new og(s=>QO(s),HO),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Zpe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Age(e,t,r,n){return new dge(e,t,r,n)}async function YY(e,t){const r=Zr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=jn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function fge(e,t){const r=Zr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,h=f.keys();let p=Ft.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(l,g)).next(v=>{const b=u.docVersions.get(g);la(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=jn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function JY(e){const t=Zr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function hge(e,t){const r=Zr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yi.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(v,b,y){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=uge?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let l=nh(),u=jn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(mge(s,i,t.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Wr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Ft.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function mge(e,t,r){let n=jn(),a=jn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=nh();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Wr.min())?(t.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),i=i.insert(o,l)):lr(YO,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function pge(e,t){const r=Zr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=MO),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function gge(e,t){const r=Zr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Ft.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new B0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function QI(e,t,r){const n=Zr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!t1(i))throw i;lr(YO,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function V7(e,t,r){const n=Zr(e);let a=Wr.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const f=Zr(l),h=f.xs.get(d);return h!==void 0?Ft.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,DA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Wr.min(),r?s:jn())).next(o=>(vge(n,npe(t),o),{documents:o,Qs:s})))}function vge(e,t,r){let n=e.Os.get(t)||Wr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class z7{constructor(){this.activeTargetIds=cpe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xge{constructor(){this.Mo=new z7,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new z7,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="ConnectivityMonitor";class G7{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lr($7,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lr($7,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PE=null;function HI(){return PE===null?PE=function(){return 268435456+Math.round(2147483648*Math.random())}():PE++,"0x"+PE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="RestConnection",yge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wge{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===iS?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=HI(),o=this.zo(t,r.toUriEncodedString());lr(HB,`Sending RPC '${t}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=ph(u);return this.Jo(t,o,l,n,d).then(f=>(lr(HB,`Received RPC '${t}' ${i}: `,f),f),f=>{throw Qp(HB,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zx}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=yge[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ege{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="WebChannelConnection";class Cge extends wge{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=HI();return new Promise((o,l)=>{const u=new ZX;u.setWithCredentials(!0),u.listenOnce(eY.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case d_.NO_ERROR:const f=u.getResponseJson();lr(Io,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case d_.TIMEOUT:lr(Io,`RPC '${t}' ${i} timed out`),l(new Wt(wt.DEADLINE_EXCEEDED,"Request time out"));break;case d_.HTTP_ERROR:const h=u.getStatus();if(lr(Io,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(y){const C=y.toLowerCase().replace(/_/g,"-");return Object.values(wt).indexOf(C)>=0?C:wt.UNKNOWN}(g.status);l(new Wt(v,g.message))}else l(new Wt(wt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Wt(wt.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{lr(Io,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);lr(Io,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=HI(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=nY(),o=rY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");lr(Io,`Creating RPC '${t}' stream ${a}: ${d}`,l);const f=i.createWebChannel(d,l);this.I_(f);let h=!1,p=!1;const g=new Ege({Yo:b=>{p?lr(Io,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(lr(Io,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),lr(Io,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),v=(b,y,C)=>{b.listen(y,S=>{try{C(S)}catch(I){setTimeout(()=>{throw I},0)}})};return v(f,Gb.EventType.OPEN,()=>{p||(lr(Io,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),v(f,Gb.EventType.CLOSE,()=>{p||(p=!0,lr(Io,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),v(f,Gb.EventType.ERROR,b=>{p||(p=!0,Qp(Io,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Wt(wt.UNAVAILABLE,"The operation could not be completed")))}),v(f,Gb.EventType.MESSAGE,b=>{var y;if(!p){const C=b.data[0];la(!!C,16349);const S=C,I=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(I){lr(Io,`RPC '${t}' stream ${a} received error:`,I);const N=I.status;let B=function(F){const U=ii[F];if(U!==void 0)return MY(U)}(N),w=I.message;B===void 0&&(B=wt.INTERNAL,w="Unknown error status: "+N+" with message "+I.message),p=!0,g.a_(new Wt(B,w)),f.close()}else lr(Io,`RPC '${t}' stream ${a} received:`,C),g.u_(C)}}),v(o,tY.STAT_EVENT,b=>{b.stat===TI.PROXY?lr(Io,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===TI.NOPROXY&&lr(Io,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function VB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(e){return new kpe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&lr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="PersistentStream";class eJ{constructor(t,r,n,a,s,i,o,l){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZY(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===wt.RESOURCE_EXHAUSTED?(rh(r.toString()),rh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===wt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(wt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lr(K7,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(lr(K7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _ge extends eJ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=jpe(this.serializer,t),n=function(s){if(!("targetChange"in s))return Wr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Wr.min():i.readTime?RA(i.readTime):Wr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=UI(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=DI(l)?{documents:Ope(s,l)}:{query:Dpe(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=HY(s,i.resumeToken);const u=PI(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Wr.min())>0){o.readTime=dS(s,i.snapshotVersion.toTimestamp());const u=PI(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Ppe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=UI(this.serializer),r.removeTarget=t,this.q_(r)}}class Sge extends eJ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return la(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,la(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){la(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Fpe(t.writeResults,t.commitTime),n=RA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=UI(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Ipe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nge{}class kge extends Nge{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(wt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,LI(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(wt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,LI(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(wt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Bge{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rh(r),this.aa=!1):lr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RemoteStore";class Tge{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{lg(this)&&(lr(Hp,"Restarting streams for network reachability change."),await async function(l){const u=Zr(l);u.Ea.add(4),await qw(u),u.Ra.set("Unknown"),u.Ea.delete(4),await _N(u)}(this))})}),this.Ra=new Bge(n,a)}}async function _N(e){if(lg(e))for(const t of e.da)await t(!0)}async function qw(e){for(const t of e.da)await t(!1)}function tJ(e,t){const r=Zr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),tD(r)?eD(r):r1(r).O_()&&ZO(r,t))}function JO(e,t){const r=Zr(e),n=r1(r);r.Ia.delete(t),n.O_()&&rJ(r,t),r.Ia.size===0&&(n.O_()?n.L_():lg(r)&&r.Ra.set("Unknown"))}function ZO(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}r1(e).Y_(t)}function rJ(e,t){e.Va.Ue(t),r1(e).Z_(t)}function eD(e){e.Va=new Cpe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),r1(e).start(),e.Ra.ua()}function tD(e){return lg(e)&&!r1(e).x_()&&e.Ia.size>0}function lg(e){return Zr(e).Ea.size===0}function nJ(e){e.Va=void 0}async function jge(e){e.Ra.set("Online")}async function Ige(e){e.Ia.forEach((t,r)=>{ZO(e,t)})}async function Fge(e,t){nJ(e),tD(e)?(e.Ra.ha(t),eD(e)):e.Ra.set("Unknown")}async function Oge(e,t,r){if(e.Ra.set("Online"),t instanceof QY&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){lr(Hp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fS(e,n)}else if(t instanceof m_?e.Va.Ze(t):t instanceof UY?e.Va.st(t):e.Va.tt(t),!r.isEqual(Wr.min()))try{const n=await JY(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(Yi.EMPTY_BYTE_STRING,d.snapshotVersion)),rJ(s,l);const f=new B0(d.target,l,u,d.sequenceNumber);ZO(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){lr(Hp,"Failed to raise snapshot:",n),await fS(e,n)}}async function fS(e,t,r){if(!t1(t))throw t;e.Ea.add(1),await qw(e),e.Ra.set("Offline"),r||(r=()=>JY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lr(Hp,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await _N(e)})}function aJ(e,t){return t().catch(r=>fS(e,r,t))}async function SN(e){const t=Zr(e),r=rm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:MO;for(;Dge(t);)try{const a=await pge(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Rge(t,a)}catch(a){await fS(t,a)}sJ(t)&&iJ(t)}function Dge(e){return lg(e)&&e.Ta.length<10}function Rge(e,t){e.Ta.push(t);const r=rm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function sJ(e){return lg(e)&&!rm(e).x_()&&e.Ta.length>0}function iJ(e){rm(e).start()}async function Pge(e){rm(e).ra()}async function Lge(e){const t=rm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Mge(e,t,r){const n=e.Ta.shift(),a=$O.from(n,t,r);await aJ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await SN(e)}async function Uge(e,t){t&&rm(e).X_&&await async function(n,a){if(function(i){return ype(i)&&i!==wt.ABORTED}(a.code)){const s=n.Ta.shift();rm(n).B_(),await aJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await SN(n)}}(e,t),sJ(e)&&iJ(e)}async function q7(e,t){const r=Zr(e);r.asyncQueue.verifyOperationInProgress(),lr(Hp,"RemoteStore received new credentials");const n=lg(r);r.Ea.add(3),await qw(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await _N(r)}async function Qge(e,t){const r=Zr(e);t?(r.Ea.delete(2),await _N(r)):t||(r.Ea.add(2),await qw(r),r.Ra.set("Unknown"))}function r1(e){return e.ma||(e.ma=function(r,n,a){const s=Zr(r);return s.sa(),new _ge(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:jge.bind(null,e),t_:Ige.bind(null,e),r_:Fge.bind(null,e),H_:Oge.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),tD(e)?eD(e):e.Ra.set("Unknown")):(await e.ma.stop(),nJ(e))})),e.ma}function rm(e){return e.fa||(e.fa=function(r,n,a){const s=Zr(r);return s.sa(),new Sge(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Pge.bind(null,e),r_:Uge.bind(null,e),ta:Lge.bind(null,e),na:Mge.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await SN(e)):(await e.fa.stop(),e.Ta.length>0&&(lr(Hp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Vf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new rD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(wt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nD(e,t){if(rh("AsyncQueue",`${t}: ${e}`),t1(e))return new Wt(wt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static emptySet(t){return new Jv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||vr.comparator(r.key,n.key):(r,n)=>vr.comparator(r.key,n.key),this.keyedMap=Kb(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Jv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Jv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.ga=new ls(vr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class _x{constructor(t,r,n,a,s,i,o,l,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new _x(t,r,Jv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vN(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Vge{constructor(){this.queries=X7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Zr(r),s=a.queries;a.queries=X7(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Wt(wt.ABORTED,"Firestore shutting down"))}}function X7(){return new og(e=>SY(e),vN)}async function aD(e,t){const r=Zr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Hge,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=nD(i,`Initialization of query '${_v(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&iD(r)}async function sD(e,t){const r=Zr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function zge(e,t){const r=Zr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&iD(r)}function $ge(e,t,r){const n=Zr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function iD(e){e.Ca.forEach(t=>{t.next()})}var VI,Y7;(Y7=VI||(VI={})).Ma="default",Y7.Cache="cache";class oD{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new _x(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=_x.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==VI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(t){this.key=t}}class lJ{constructor(t){this.key=t}}class Gge{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=NY(t),this.tu=new Jv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new W7,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=xN(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(l||u)&&(o=!0)),b&&(p?(i=i.add(p),s=v?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:b})}};return v(p)-v(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new _x(this.query,t.tu,s,i,t.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W7,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new lJ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new oJ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=jn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return _x.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lD="SyncEngine";class Kge{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class qge{constructor(t){this.key=t,this.hu=!1}}class Wge{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new og(o=>SY(o),vN),this.Iu=new Map,this.Eu=new Set,this.du=new ls(vr.comparator),this.Au=new Map,this.Ru=new qO,this.Vu={},this.mu=new Map,this.fu=Cx.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xge(e,t,r=!0){const n=hJ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await cJ(n,t,r,!0),a}async function Yge(e,t){const r=hJ(e);await cJ(r,t,!0,!1)}async function cJ(e,t,r,n){const a=await gge(e.localStore,DA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await Jge(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&tJ(e.remoteStore,a),o}async function Jge(e,t,r,n,a){e.pu=(f,h,p)=>async function(v,b,y,C){let S=b.view.ru(y);S.Cs&&(S=await V7(v.localStore,b.query,!1).then(({documents:w})=>b.view.ru(w,S)));const I=C&&C.targetChanges.get(b.targetId),N=C&&C.targetMismatches.get(b.targetId)!=null,B=b.view.applyChanges(S,v.isPrimaryClient,I,N);return Z7(v,b.targetId,B.au),B.snapshot}(e,f,h,p);const s=await V7(e.localStore,t,!0),i=new Gge(t,s.Qs),o=i.ru(s.documents),l=Kw.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,l);Z7(e,r,u.au);const d=new Kge(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Zge(e,t,r){const n=Zr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!vN(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await QI(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&JO(n.remoteStore,a.targetId),zI(n,a.targetId)}).catch(e1)):(zI(n,a.targetId),await QI(n.localStore,a.targetId,!0))}async function eve(e,t){const r=Zr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),JO(r.remoteStore,n.targetId))}async function tve(e,t,r){const n=lve(e);try{const a=await function(i,o){const l=Zr(i),u=hr.now(),d=o.reduce((p,g)=>p.add(g.key),jn());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=nh(),v=jn();return l.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,C)=>{C.isValidDocument()||(v=v.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const C of o){const S=ppe(C,f.get(C.key).overlayedDocument);S!=null&&y.push(new gm(C.key,S,xY(S.value.mapValue),gl.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:BY(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new ls(Tn)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Ww(n,a.changes),await SN(n.remoteStore)}catch(a){const s=nD(a,"Failed to persist write");r.reject(s)}}async function uJ(e,t){const r=Zr(e);try{const n=await hge(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(la(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?la(i.hu,14607):a.removedDocuments.size>0&&(la(i.hu,42227),i.hu=!1))}),await Ww(r,n,t)}catch(n){await e1(n)}}function J7(e,t,r){const n=Zr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Zr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&iD(l)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function rve(e,t,r){const n=Zr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ls(vr.comparator);i=i.insert(s,zo.newNoDocument(s,Wr.min()));const o=jn().add(s),l=new EN(Wr.min(),new Map,new ls(Tn),i,o);await uJ(n,l),n.du=n.du.remove(s),n.Au.delete(t),cD(n)}else await QI(n.localStore,t,!1).then(()=>zI(n,t,r)).catch(e1)}async function nve(e,t){const r=Zr(e),n=t.batch.batchId;try{const a=await fge(r.localStore,t);AJ(r,n,null),dJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ww(r,a)}catch(a){await e1(a)}}async function ave(e,t,r){const n=Zr(e);try{const a=await function(i,o){const l=Zr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(la(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,t);AJ(n,t,r),dJ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Ww(n,a)}catch(a){await e1(a)}}function dJ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function AJ(e,t,r){const n=Zr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function zI(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||fJ(e,n)})}function fJ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(JO(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),cD(e))}function Z7(e,t,r){for(const n of r)n instanceof oJ?(e.Ru.addReference(n.key,t),sve(e,n)):n instanceof lJ?(lr(lD,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||fJ(e,n.key)):Hr(19791,{wu:n})}function sve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(lr(lD,"New document in limbo: "+r),e.Eu.add(n),cD(e))}function cD(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new vr(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new qge(r)),e.du=e.du.insert(r,n),tJ(e.remoteStore,new B0(DA(gN(r.path)),n,"TargetPurposeLimboResolution",fN.ce))}}async function Ww(e,t,r){const n=Zr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){a.push(u);const f=XO.As(l.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=Zr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ft.forEach(u,h=>Ft.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ft.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!t1(f))throw f;lr(YO,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,v)}}}(n.localStore,s))}async function ive(e,t){const r=Zr(e);if(!r.currentUser.isEqual(t)){lr(lD,"User change. New user:",t.toKey());const n=await YY(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Wt(wt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Ww(r,n.Ls)}}function ove(e,t){const r=Zr(e),n=r.Au.get(t);if(n&&n.hu)return jn().add(n.key);{let a=jn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function hJ(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uJ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ove.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rve.bind(null,t),t.Pu.H_=zge.bind(null,t.eventManager),t.Pu.yu=$ge.bind(null,t.eventManager),t}function lve(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ave.bind(null,t),t}class hS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=CN(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Age(this.persistence,new cge,t.initialUser,this.serializer)}Cu(t){return new XY(WO.mi,this.serializer)}Du(t){return new xge}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hS.provider={build:()=>new hS};class cve extends hS{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){la(this.persistence.referenceDelegate instanceof AS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qpe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Ql.withCacheSize(this.cacheSizeBytes):Ql.DEFAULT;return new XY(n=>AS.mi(n,r),this.serializer)}}class $I{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>J7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=ive.bind(null,this.syncEngine),await Qge(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Vge}()}createDatastore(t){const r=CN(t.databaseInfo.databaseId),n=function(s){return new Cge(s)}(t.databaseInfo);return function(s,i,o,l){return new kge(s,i,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Tge(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>J7(this.syncEngine,r,0),function(){return G7.v()?new G7:new bge}())}createSyncEngine(t,r){return function(a,s,i,o,l,u,d){const f=new Wge(a,s,i,o,l,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Zr(a);lr(Hp,"RemoteStore shutting down."),s.Ea.add(5),await qw(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}$I.provider={build:()=>new $I};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):rh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="FirestoreClient";class uve{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Uo.UNAUTHENTICATED,this.clientId=dN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{lr(nm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(lr(nm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=nD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function zB(e,t){e.asyncQueue.verifyOperationInProgress(),lr(nm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await YY(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function e9(e,t){e.asyncQueue.verifyOperationInProgress();const r=await dve(e);lr(nm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>q7(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>q7(t.remoteStore,a)),e._onlineComponents=t}async function dve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lr(nm,"Using user provided OfflineComponentProvider");try{await zB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===wt.FAILED_PRECONDITION||a.code===wt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Qp("Error using user provided cache. Falling back to memory cache: "+r),await zB(e,new hS)}}else lr(nm,"Using default OfflineComponentProvider"),await zB(e,new cve(void 0));return e._offlineComponents}async function mJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lr(nm,"Using user provided OnlineComponentProvider"),await e9(e,e._uninitializedComponentsProvider._online)):(lr(nm,"Using default OnlineComponentProvider"),await e9(e,new $I))),e._onlineComponents}function Ave(e){return mJ(e).then(t=>t.syncEngine)}async function mS(e){const t=await mJ(e),r=t.eventManager;return r.onListen=Xge.bind(null,t.syncEngine),r.onUnlisten=Zge.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Yge.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=eve.bind(null,t.syncEngine),r}function fve(e,t,r={}){const n=new Vf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new uD({next:h=>{d.Nu(),i.enqueueAndForget(()=>sD(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Wt(wt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Wt(wt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new oD(gN(o.path),d,{includeMetadataChanges:!0,qa:!0});return aD(s,f)}(await mS(e),e.asyncQueue,t,r,n)),n.promise}function hve(e,t,r={}){const n=new Vf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new uD({next:h=>{d.Nu(),i.enqueueAndForget(()=>sD(s,f)),h.fromCache&&l.source==="server"?u.reject(new Wt(wt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new oD(o,d,{includeMetadataChanges:!0,qa:!0});return aD(s,f)}(await mS(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="firestore.googleapis.com",r9=!0;class n9{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gJ,this.ssl=r9}else this.host=t.host,this.ssl=t.ssl??r9;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Gpe)throw new Wt(wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lY("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pJ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class NN{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n9({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n9(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new iY;switch(n.type){case"firstParty":return new Cme(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=t9.get(r);n&&(lr("ComponentProvider","Removing Datastore"),t9.delete(r),n.terminate())}(this),Promise.resolve()}}function vJ(e,t,r,n={}){var u;e=Yo(e,NN);const a=ph(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(aN(`https://${o}`),sN("Firestore",!0)),s.host!==gJ&&s.host!==o&&Qp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!X0(l,i)&&(e._setSettings(l),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Uo.MOCK_USER;else{d=AX(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Uo(h)}e._authCredentials=new yme(new sY(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new jd(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if($w(r,ss._jsonSchema))return new ss(t,n||null,new vr(Na.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:hi("string",ss._jsonSchemaVersion),referencePath:hi("string")};class zf extends jd{constructor(t,r,n){super(t,r,gN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new vr(t))}withConverter(t){return new zf(this.firestore,t,this._path)}}function Lt(e,t,...r){if(e=Yn(e),oY("collection","path",t),e instanceof NN){const n=Na.fromString(t,...r);return g7(n),new zf(e,null,n)}{if(!(e instanceof ss||e instanceof zf))throw new Wt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return g7(n),new zf(e.firestore,null,n)}}function mr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=dN.newId()),oY("doc","path",t),e instanceof NN){const n=Na.fromString(t,...r);return p7(n),new ss(e,null,new vr(n))}{if(!(e instanceof ss||e instanceof zf))throw new Wt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return p7(n),new ss(e.firestore,e instanceof zf?e.converter:null,new vr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9="AsyncQueue";class s9{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZY(this,"async_queue_retry"),this._c=()=>{const n=VB();n&&lr(a9,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=VB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=VB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Vf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!t1(t))throw t;lr(a9,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,rh("INTERNAL UNHANDLED ERROR: ",i9(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=rD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Hr(47125,{Pc:i9(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function i9(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Bd extends NN{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new s9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new s9(t),this._firestoreClient=void 0,await t}}}function dD(e,t){const r=typeof e=="object"?e:iN(),n=typeof e=="string"?e:iS,a=Qw(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=SO("firestore");s&&vJ(a,...s)}return a}function n1(e){if(e._terminated)throw new Wt(wt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mve(e),e._firestoreClient}function mve(e){var n,a,s;const t=e._freezeSettings(),r=function(o,l,u,d){return new Qme(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pJ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new uve(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nc(Yi.fromBase64String(t))}catch(r){throw new Wt(wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Nc(Yi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Nc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($w(t,Nc._jsonSchema))return Nc.fromBase64String(t.bytes)}}Nc._jsonSchemaVersion="firestore/bytes/1.0",Nc._jsonSchema={type:hi("string",Nc._jsonSchemaVersion),bytes:hi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Tn(this._lat,t._lat)||Tn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yd._jsonSchemaVersion}}static fromJSON(t){if($w(t,yd._jsonSchema))return new yd(t.latitude,t.longitude)}}yd._jsonSchemaVersion="firestore/geoPoint/1.0",yd._jsonSchema={type:hi("string",yd._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:wd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($w(t,wd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new wd(t.vectorValues);throw new Wt(wt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wd._jsonSchemaVersion="firestore/vectorValue/1.0",wd._jsonSchema={type:hi("string",wd._jsonSchemaVersion),vectorValues:hi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pve=/^__.*__$/;class gve{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new gm(t,this.data,this.fieldMask,r,this.fieldTransforms):new Gw(t,this.data,r,this.fieldTransforms)}}class xJ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new gm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function bJ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class kN{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new kN({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pS(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(bJ(this.Ac)&&pve.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class vve{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||CN(t)}Cc(t,r,n,a=!1){return new kN({Ac:t,methodName:r,Dc:n,path:Gi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i1(e){const t=e._freezeSettings(),r=CN(e._databaseId);return new vve(e._databaseId,!!t.ignoreUndefinedProperties,r)}function AD(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);mD("Data must be an object, but it was:",i,n);const o=CJ(n,i);let l,u;if(s.merge)l=new jc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=GI(t,f,r);if(!i.contains(h))throw new Wt(wt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);SJ(d,h)||d.push(h)}l=new jc(d),u=i.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=i.fieldTransforms;return new gve(new Gl(o),l,u)}class BN extends s1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof BN}}function xve(e,t,r){return new kN({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class fD extends s1{_toFieldTransform(t){return new RY(t.path,new Wy)}isEqual(t){return t instanceof fD}}class hD extends s1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=xve(this,t,!0),n=this.vc.map(s=>o1(s,r)),a=new Ex(n);return new RY(t.path,a)}isEqual(t){return t instanceof hD&&X0(this.vc,t.vc)}}function yJ(e,t,r,n){const a=e.Cc(1,t,r);mD("Data must be an object, but it was:",a,n);const s=[],i=Gl.empty();pm(n,(l,u)=>{const d=pD(t,l,r);u=Yn(u);const f=a.yc(d);if(u instanceof BN)s.push(d);else{const h=o1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new jc(s);return new xJ(i,o,a.fieldTransforms)}function wJ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[GI(t,n,r)],l=[a];if(s.length%2!=0)throw new Wt(wt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(GI(t,s[h])),l.push(s[h+1]);const u=[],d=Gl.empty();for(let h=o.length-1;h>=0;--h)if(!SJ(u,o[h])){const p=o[h];let g=l[h];g=Yn(g);const v=i.yc(p);if(g instanceof BN)u.push(p);else{const b=o1(g,v);b!=null&&(u.push(p),d.set(p,b))}}const f=new jc(u);return new xJ(d,f,i.fieldTransforms)}function EJ(e,t,r,n=!1){return o1(r,e.Cc(n?4:3,t))}function o1(e,t){if(_J(e=Yn(e)))return mD("Unsupported field value:",t,e),CJ(e,t);if(e instanceof s1)return function(n,a){if(!bJ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=o1(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return upe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=hr.fromDate(n);return{timestampValue:dS(a.serializer,s)}}if(n instanceof hr){const s=new hr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:dS(a.serializer,s)}}if(n instanceof yd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nc)return{bytesValue:HY(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof wd)return function(i,o){return{mapValue:{fields:{[gY]:{stringValue:vY},[oS]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return zO(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${AN(n)}`)}(e,t)}function CJ(e,t){const r={};return dY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pm(e,(n,a)=>{const s=o1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function _J(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof hr||e instanceof yd||e instanceof Nc||e instanceof ss||e instanceof s1||e instanceof wd)}function mD(e,t,r){if(!_J(r)||!cY(r)){const n=AN(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function GI(e,t,r){if((t=Yn(t))instanceof a1)return t._internalPath;if(typeof t=="string")return pD(e,t);throw pS("Field path arguments must be of type string or ",e,!1,void 0,r)}const bve=new RegExp("[~\\*/\\[\\]]");function pD(e,t,r){if(t.search(bve)>=0)throw pS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new a1(...t.split("."))._internalPath}catch{throw pS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function pS(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new Wt(wt.INVALID_ARGUMENT,o+e+l)}function SJ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(TN("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class yve extends gD{data(){return super.data()}}function TN(e,t){return typeof t=="string"?pD(e,t):t instanceof a1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(wt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vD{}class Xw extends vD{}function tr(e,t,...r){let n=[];t instanceof vD&&n.push(t),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof jN).length,o=s.filter(l=>l instanceof Yw).length;if(i>1||i>0&&o>0)throw new Wt(wt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Yw extends Xw{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new Yw(t,r,n)}_apply(t){const r=this._parse(t);return BJ(t._query,r),new jd(t.firestore,t.converter,RI(t._query,r))}_parse(t){const r=i1(t.firestore);return function(s,i,o,l,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(wt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){c9(f,d);const g=[];for(const v of f)g.push(l9(l,s,v));h={arrayValue:{values:g}}}else h=l9(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||c9(f,d),h=EJ(o,i,f,d==="in"||d==="not-in");return fi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function _n(e,t,r){const n=t,a=TN("where",e);return Yw._create(a,n,r)}class jN extends vD{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new jN(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:kd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)BJ(i,l),i=RI(i,l)}(t._query,r),new jd(t.firestore,t.converter,RI(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IN extends Xw{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new IN(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qy(s,i)}(t._query,this._field,this._direction);return new jd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new ig(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Gr(e,t="asc"){const r=t,n=TN("orderBy",e);return IN._create(n,r)}class FN extends Xw{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new FN(t,r,n)}_apply(t){return new jd(t.firestore,t.converter,cS(t._query,this._limit,this._limitType))}}function Ed(e){return Tme("limit",e),FN._create("limit",e,"F")}class ON extends Xw{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new ON(t,r,n)}_apply(t){const r=wve(t,this.type,this._docOrFields,this._inclusive);return new jd(t.firestore,t.converter,function(a,s){return new ig(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function kJ(...e){return ON._create("startAfter",e,!1)}function wve(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof gD)return function(s,i,o,l,u){if(!l)throw new Wt(wt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of Yv(s))if(f.field.isKeyField())d.push(lS(i,l.key));else{const h=l.data.field(f.field);if(mN(h))throw new Wt(wt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new wx(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=i1(e.firestore);return function(i,o,l,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(wt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const v=d[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!VO(i)&&v.indexOf("/")!==-1)throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const b=i.path.child(Na.fromString(v));if(!vr.isDocumentKey(b))throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new vr(b);p.push(lS(o,y))}else{const b=EJ(l,u,v);p.push(b)}}return new wx(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function l9(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VO(t)&&r.indexOf("/")!==-1)throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!vr.isDocumentKey(n))throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return lS(e,new vr(n))}if(r instanceof ss)return lS(e,r._key);throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AN(r)}.`)}function c9(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function BJ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class TJ{convertValue(t,r="none"){switch(tm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(em(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return pm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[oS].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>zs(i.doubleValue));return new wd(r)}convertGeoPoint(t){return new yd(zs(t.latitude),zs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=pN(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Gy(t));default:return null}}convertTimestamp(t){const r=Z0(t);return new hr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);la(qY(n),9688,{name:t});const a=new xx(n.get(1),n.get(3)),s=new vr(n.popFirst(5));return a.isEqual(r)||rh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Ov{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class U0 extends gD{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new vy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(TN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(wt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=U0._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}U0._jsonSchemaVersion="firestore/documentSnapshot/1.0",U0._jsonSchema={type:hi("string",U0._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};class vy extends U0{data(t={}){return super.data(t)}}class Q0{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Ov(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new vy(this._firestore,this._userDataWriter,n.key,n,new Ov(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new vy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Ov(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new vy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Ov(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Eve(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(wt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Q0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=dN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Eve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(e){e=Yo(e,ss);const t=Yo(e.firestore,Bd);return fve(n1(t),e._key).then(r=>jJ(t,e,r))}Q0._jsonSchemaVersion="firestore/querySnapshot/1.0",Q0._jsonSchema={type:hi("string",Q0._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};class bD extends TJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function Za(e){e=Yo(e,jd);const t=Yo(e.firestore,Bd),r=n1(t),n=new bD(t);return NJ(e._query),hve(r,e._query).then(a=>new Q0(t,n,e,a))}function Ji(e,t,r){e=Yo(e,ss);const n=Yo(e.firestore,Bd),a=xD(e.converter,t,r);return l1(n,[AD(i1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,gl.none())])}function vh(e,t,r,...n){e=Yo(e,ss);const a=Yo(e.firestore,Bd),s=i1(a);let i;return i=typeof(t=Yn(t))=="string"||t instanceof a1?wJ(s,"updateDoc",e._key,t,r,n):yJ(s,"updateDoc",e._key,t),l1(a,[i.toMutation(e._key,gl.exists(!0))])}function Is(e){return l1(Yo(e.firestore,Bd),[new wN(e._key,gl.none())])}function Zn(e,t){const r=Yo(e.firestore,Bd),n=mr(e),a=xD(e.converter,t);return l1(r,[AD(i1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,gl.exists(!1))]).then(()=>n)}function xr(e,...t){var l,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||o9(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(o9(t[n])){const f=t[n];t[n]=(l=f.next)==null?void 0:l.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ss)i=Yo(e.firestore,Bd),o=gN(e._key.path),s={next:f=>{t[n]&&t[n](jJ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Yo(e,jd);i=Yo(f.firestore,Bd),o=f._query;const h=new bD(i);s={next:p=>{t[n]&&t[n](new Q0(i,h,f,p))},error:t[n+1],complete:t[n+2]},NJ(e._query)}return function(h,p,g,v){const b=new uD(v),y=new oD(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>aD(await mS(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>sD(await mS(h),y))}}(n1(i),o,a,s)}function l1(e,t){return function(n,a){const s=new Vf;return n.asyncQueue.enqueueAndForget(async()=>tve(await Ave(n),a,s)),s.promise}(n1(e),t)}function jJ(e,t,r){const n=r.docs.get(t._key),a=new bD(e);return new U0(e,a,t._key,n,new Ov(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=i1(t)}set(t,r,n){this._verifyNotCommitted();const a=$B(t,this._firestore),s=xD(a.converter,r,n),i=AD(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,gl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=$B(t,this._firestore);let i;return i=typeof(r=Yn(r))=="string"||r instanceof a1?wJ(this._dataReader,"WriteBatch.update",s._key,r,n,a):yJ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,gl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=$B(t,this._firestore);return this._mutations=this._mutations.concat(new wN(r._key,gl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(wt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $B(e,t){if((e=Yn(e)).firestore!==t)throw new Wt(wt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function am(){return new fD("serverTimestamp")}function FJ(...e){return new hD("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(e){return n1(e=Yo(e,Bd)),new IJ(e,t=>l1(e,t))}(function(t,r=!0){(function(a){Zx=a})(ag),Y0(new Zf("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Bd(new wme(n.getProvider("auth-internal")),new _me(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xx(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ju(A7,f7,t),ju(A7,f7,"esm2020")})();const Cve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:TJ,Bytes:Nc,CollectionReference:zf,DocumentReference:ss,DocumentSnapshot:U0,FieldPath:a1,FieldValue:s1,Firestore:Bd,FirestoreError:Wt,GeoPoint:yd,Query:jd,QueryCompositeFilterConstraint:jN,QueryConstraint:Xw,QueryDocumentSnapshot:vy,QueryFieldFilterConstraint:Yw,QueryLimitConstraint:FN,QueryOrderByConstraint:IN,QuerySnapshot:Q0,QueryStartAtConstraint:ON,SnapshotMetadata:Ov,Timestamp:hr,VectorValue:wd,WriteBatch:IJ,_AutoId:dN,_ByteString:Yi,_DatabaseId:xx,_DocumentKey:vr,_EmptyAuthCredentialsProvider:iY,_FieldPath:Gi,_cast:Yo,_logWarn:Qp,_validateIsNotUsedTogether:lY,addDoc:Zn,arrayUnion:FJ,collection:Lt,connectFirestoreEmulator:vJ,deleteDoc:Is,doc:mr,ensureFirestoreConfigured:n1,executeWrite:l1,getDoc:Jw,getDocs:Za,getFirestore:dD,limit:Ed,onSnapshot:xr,orderBy:Gr,query:tr,serverTimestamp:am,setDoc:Ji,startAfter:kJ,updateDoc:vh,where:_n,writeBatch:Zw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ="firebasestorage.googleapis.com",DJ="storageBucket",_ve=120*1e3,Sve=600*1e3,Nve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Td{constructor(t,r,n=0){super(GB(t),`Firebase Storage: ${r} (${GB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,As.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return GB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Va;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Va||(Va={}));function GB(e){return"storage/"+e}function yD(){const e="An unknown error occurred, please check the error payload for server response.";return new As(Va.UNKNOWN,e)}function kve(e){return new As(Va.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Bve(e){return new As(Va.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Tve(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new As(Va.UNAUTHENTICATED,e)}function jve(){return new As(Va.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ive(e){return new As(Va.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function RJ(){return new As(Va.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PJ(){return new As(Va.CANCELED,"User canceled the upload/download.")}function Fve(e){return new As(Va.INVALID_URL,"Invalid URL '"+e+"'.")}function Ove(e){return new As(Va.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Dve(){return new As(Va.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DJ+"' property when initializing the app?")}function LJ(){return new As(Va.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rve(){return new As(Va.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Pve(){return new As(Va.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Lve(e){return new As(Va.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function KI(e){return new As(Va.INVALID_ARGUMENT,e)}function MJ(){return new As(Va.APP_DELETED,"The Firebase app was deleted.")}function Mve(e){return new As(Va.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xy(e,t){return new As(Va.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function vb(e){throw new As(Va.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=hl.makeFromUrl(t,r)}catch{return new hl(t,"")}if(n.path==="")return n;throw Ove(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},v=r===OJ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${v}/${a}/${b}`,"i"),S=[{regex:o,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<S.length;I++){const N=S[I],B=N.regex.exec(t);if(B){const w=B[N.indices.bucket];let _=B[N.indices.path];_||(_=""),n=new hl(w,_),N.postModify(n);break}}if(n==null)throw Fve(t);return n}}class Uve{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qve(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function l(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,l())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(l()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,f(S)}let g=!1;function v(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,v(!0)},r),v}function Hve(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vve(e){return e!==void 0}function zve(e){return typeof e=="function"}function $ve(e){return typeof e=="object"&&!Array.isArray(e)}function DN(e){return typeof e=="string"||e instanceof String}function u9(e){return wD()&&e instanceof Blob}function wD(){return typeof Blob<"u"}function qI(e,t,r,n){if(n<t)throw KI(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw KI(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function UJ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var yp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(yp||(yp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{constructor(t,r,n,a,s,i,o,l,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new LE(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===yp.NO_ERROR,l=s.getStatus();if(!o||QJ(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===yp.ABORT;n(!1,new LE(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new LE(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Vve(l)?s(l):s()}catch(l){i(l)}else if(o!==null){const l=yD();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(a.canceled){const l=this.appDelete_?MJ():PJ();i(l)}else{const l=RJ();i(l)}};this.canceled_?r(!1,new LE(!1,null,!0)):this.backoffId_=Qve(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Hve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class LE{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Kve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function qve(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Wve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Xve(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Yve(e,t,r,n,a,s,i=!0,o=!1){const l=UJ(e.urlParams),u=e.url+l,d=Object.assign({},e.headers);return Wve(d,t),Kve(d,r),qve(d,s),Xve(d,n),new Gve(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jve(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zve(...e){const t=Jve();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(wD())return new Blob(e);throw new As(Va.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function exe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function txe(e){if(typeof atob>"u")throw Lve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class KB{constructor(t,r){this.data=t,this.contentType=r||null}}function rxe(e,t){switch(e){case NA.RAW:return new KB(HJ(t));case NA.BASE64:case NA.BASE64URL:return new KB(VJ(e,t));case NA.DATA_URL:return new KB(axe(t),sxe(t))}throw yD()}function HJ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function nxe(e){let t;try{t=decodeURIComponent(e)}catch{throw xy(NA.DATA_URL,"Malformed data URL.")}return HJ(t)}function VJ(e,t){switch(e){case NA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw xy(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case NA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw xy(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=txe(t)}catch(a){throw a.message.includes("polyfill")?a:xy(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class zJ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw xy(NA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=ixe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function axe(e){const t=new zJ(e);return t.base64?VJ(NA.BASE64,t.rest):nxe(t.rest)}function sxe(e){return new zJ(e).contentType}function ixe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,r){let n=0,a="";u9(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(u9(this.data_)){const n=this.data_,a=exe(n,t,r);return a===null?null:new Ff(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Ff(n,!0)}}static getBlob(...t){if(wD()){const r=t.map(n=>n instanceof Ff?n.data_:n);return new Ff(Zve.apply(null,r))}else{const r=t.map(i=>DN(i)?rxe(NA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new Ff(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e){let t;try{t=JSON.parse(e)}catch{return null}return $ve(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oxe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function lxe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function $J(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cxe(e,t){return t}class ll{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||cxe}}let ME=null;function uxe(e){return!DN(e)||e.length<2?e:$J(e)}function CD(){if(ME)return ME;const e=[];e.push(new ll("bucket")),e.push(new ll("generation")),e.push(new ll("metageneration")),e.push(new ll("name","fullPath",!0));function t(s,i){return uxe(i)}const r=new ll("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new ll("size");return a.xform=n,e.push(a),e.push(new ll("timeCreated")),e.push(new ll("updated")),e.push(new ll("md5Hash",null,!0)),e.push(new ll("cacheControl",null,!0)),e.push(new ll("contentDisposition",null,!0)),e.push(new ll("contentEncoding",null,!0)),e.push(new ll("contentLanguage",null,!0)),e.push(new ll("contentType",null,!0)),e.push(new ll("metadata","customMetadata",!0)),ME=e,ME}function dxe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new hl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function Axe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return dxe(n,e),n}function GJ(e,t,r){const n=ED(t);return n===null?null:Axe(e,n,r)}function fxe(e,t,r,n){const a=ED(t);if(a===null||!DN(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=cg(h,r,n),g=UJ({alt:"media",token:u});return p+g})[0]}function KJ(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9="prefixes",A9="items";function hxe(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[d9])for(const a of r[d9]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new hl(t,s));n.prefixes.push(i)}if(r[A9])for(const a of r[A9]){const s=e._makeStorageReference(new hl(t,a.name));n.items.push(s)}return n}function mxe(e,t,r){const n=ED(r);return n===null?null:hxe(e,t,n)}class vm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(e){if(!e)throw yD()}function _D(e,t){function r(n,a){const s=GJ(e,a,t);return PA(s!==null),s}return r}function pxe(e,t){function r(n,a){const s=mxe(e,t,a);return PA(s!==null),s}return r}function gxe(e,t){function r(n,a){const s=GJ(e,a,t);return PA(s!==null),fxe(s,a,e.host,e._protocol)}return r}function c1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=jve():a=Tve():r.getStatus()===402?a=Bve(e.bucket):r.getStatus()===403?a=Ive(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function SD(e){const t=c1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=kve(e.path)),s.serverResponse=a.serverResponse,s}return r}function vxe(e,t,r){const n=t.fullServerUrl(),a=cg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new vm(a,s,_D(e,r),i);return o.errorHandler=SD(t),o}function xxe(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=cg(i,e.host,e._protocol),l="GET",u=e.maxOperationRetryTime,d=new vm(o,l,pxe(e,t.bucket),u);return d.urlParams=s,d.errorHandler=c1(t),d}function bxe(e,t,r){const n=t.fullServerUrl(),a=cg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new vm(a,s,gxe(e,r),i);return o.errorHandler=SD(t),o}function yxe(e,t){const r=t.fullServerUrl(),n=cg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(l,u){}const o=new vm(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=SD(t),o}function wxe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function qJ(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=wxe(null,t)),n}function WJ(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let I=0;I<2;I++)S=S+Math.random().toString().slice(2);return S}const l=o();i["Content-Type"]="multipart/related; boundary="+l;const u=qJ(t,n,a),d=KJ(u,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=Ff.getBlob(f,n,h);if(p===null)throw LJ();const g={name:u.fullPath},v=cg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,C=new vm(v,b,_D(e,r),y);return C.urlParams=g,C.headers=i,C.body=p.uploadData(),C.errorHandler=c1(t),C}class gS{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function ND(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{PA(!1)}return PA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function Exe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=qJ(t,n,a),o={name:i.fullPath},l=cg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=KJ(i,r),h=e.maxUploadRetryTime;function p(v){ND(v);let b;try{b=v.getResponseHeader("X-Goog-Upload-URL")}catch{PA(!1)}return PA(DN(b)),b}const g=new vm(l,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=c1(t),g}function Cxe(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=ND(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{PA(!1)}f||PA(!1);const h=Number(f);return PA(!isNaN(h)),new gS(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,l=new vm(r,i,s,o);return l.headers=a,l.errorHandler=c1(t),l}const f9=256*1024;function _xe(e,t,r,n,a,s,i,o){const l=new gS(0,0);if(i?(l.current=i.current,l.total=i.total):(l.current=0,l.total=n.size()),n.size()!==l.total)throw Rve();const u=l.total-l.current;let d=u;a>0&&(d=Math.min(d,a));const f=l.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},v=n.slice(f,h);if(v===null)throw LJ();function b(I,N){const B=ND(I,["active","final"]),w=l.current+d,_=n.size();let F;return B==="final"?F=_D(t,s)(I,N):F=null,new gS(w,_,B==="final",F)}const y="POST",C=t.maxUploadRetryTime,S=new vm(r,y,b,C);return S.headers=g,S.body=v.uploadData(),S.progressCallback=o||null,S.errorHandler=c1(e),S}const Hl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qB(e){switch(e){case"running":case"pausing":case"canceling":return Hl.RUNNING;case"paused":return Hl.PAUSED;case"success":return Hl.SUCCESS;case"canceled":return Hl.CANCELED;case"error":return Hl.ERROR;default:return Hl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(t,r,n){if(zve(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class Nxe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw vb("cannot .send() more than once");if(ph(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class kxe extends Nxe{initXhr(){this.xhr_.responseType="text"}}function Of(){return new kxe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxe{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=CD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Va.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(QJ(a.status,[]))if(s)a=RJ();else{this.sleepTime=Math.max(this.sleepTime*2,Nve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Va.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=Exe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Of,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=Cxe(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Of,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=f9*this._chunkMultiplier,r=new gS(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=_xe(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Of,a,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){f9*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=vxe(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Of,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=WJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Of,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=PJ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=qB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new Sxe(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(qB(this._state)){case Hl.SUCCESS:Yg(this._resolve.bind(null,this.snapshot))();break;case Hl.CANCELED:case Hl.ERROR:const r=this._reject;Yg(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(qB(this._state)){case Hl.RUNNING:case Hl.PAUSED:t.next&&Yg(t.next.bind(t,this.snapshot))();break;case Hl.SUCCESS:t.complete&&Yg(t.complete.bind(t))();break;case Hl.CANCELED:case Hl.ERROR:t.error&&Yg(t.error.bind(t,this._error))();break;default:t.error&&Yg(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,r){this._service=t,r instanceof hl?this._location=r:this._location=hl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Vp(t,r)}get root(){const t=new hl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $J(this._location.path)}get storage(){return this._service}get parent(){const t=oxe(this._location.path);if(t===null)return null;const r=new hl(this._location.bucket,t);return new Vp(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Mve(t)}}function Txe(e,t,r){e._throwIfRoot("uploadBytes");const n=WJ(e.storage,e._location,CD(),new Ff(t,!0),r);return e.storage.makeRequestWithTokens(n,Of).then(a=>({metadata:a,ref:e}))}function jxe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Bxe(e,new Ff(t),r)}function Ixe(e){const t={prefixes:[],items:[]};return XJ(e,t).then(()=>t)}async function XJ(e,t,r){const a=await Fxe(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await XJ(e,t,a.nextPageToken)}function Fxe(e,t){t!=null&&typeof t.maxResults=="number"&&qI("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=xxe(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Of)}function Oxe(e){e._throwIfRoot("getDownloadURL");const t=bxe(e.storage,e._location,CD());return e.storage.makeRequestWithTokens(t,Of).then(r=>{if(r===null)throw Pve();return r})}function Dxe(e){e._throwIfRoot("deleteObject");const t=yxe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Of)}function Rxe(e,t){const r=lxe(e._location.path,t),n=new hl(e._location.bucket,r);return new Vp(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pxe(e){return/^[A-Za-z]+:\/\//.test(e)}function Lxe(e,t){return new Vp(e,t)}function YJ(e,t){if(e instanceof kD){const r=e;if(r._bucket==null)throw Dve();const n=new Vp(r,r._bucket);return t!=null?YJ(n,t):n}else return t!==void 0?Rxe(e,t):e}function Mxe(e,t){if(t&&Pxe(t)){if(e instanceof kD)return Lxe(e,t);throw KI("To use ref(service, url), the first argument must be a Storage instance.")}else return YJ(e,t)}function h9(e,t){const r=t==null?void 0:t[DJ];return r==null?null:hl.makeFromBucketSpec(r,e)}function Uxe(e,t,r,n={}){e.host=`${t}:${r}`;const a=ph(t);a&&(aN(`https://${e.host}/b`),sN("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:AX(s,e.app.options.projectId))}class kD{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=OJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_ve,this._maxUploadRetryTime=Sve,this._requests=new Set,a!=null?this._bucket=hl.makeFromBucketSpec(a,this._host):this._bucket=h9(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=hl.makeFromBucketSpec(this._url,t):this._bucket=h9(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Sc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Vp(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Uve(MJ());{const i=Yve(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const m9="@firebase/storage",p9="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ="storage";function ZJ(e,t,r){return e=Yn(e),Txe(e,t,r)}function Qxe(e,t,r){return e=Yn(e),jxe(e,t,r)}function Hxe(e){return e=Yn(e),Ixe(e)}function BD(e){return e=Yn(e),Oxe(e)}function Vxe(e){return e=Yn(e),Dxe(e)}function RN(e,t){return e=Yn(e),Mxe(e,t)}function TD(e=iN(),t){e=Yn(e);const n=Qw(e,JJ).getImmediate({identifier:t}),a=SO("storage");return a&&zxe(n,...a),n}function zxe(e,t,r,n={}){Uxe(e,t,r,n)}function $xe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new kD(r,n,a,t,ag)}function Gxe(){Y0(new Zf(JJ,$xe,"PUBLIC").setMultipleInstances(!0)),ju(m9,p9,""),ju(m9,p9,"esm2020")}Gxe();const Kxe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},jD=BO(Kxe),e2=YX(jD),tn=dD(jD),eZ=TD(jD),tZ=Object.freeze(Object.defineProperty({__proto__:null,auth:e2,db:tn,storage:eZ},Symbol.toStringTag,{value:"Module"})),qxe=async(e,t)=>{try{return(await a0e(e2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},WB=async()=>{try{await o0e(e2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},Wxe=async e=>{try{await n0e(e2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},rZ=async e=>{try{const t=mr(tn,"usuarios",e),r=await Jw(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Yt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Yt||{}),dn=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(dn||{}),ip=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(ip||{});const Xxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),pi="w-6 h-6",PN="w-24 h-24",ID=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),Yxe=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Jxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Zxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Wb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Xb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),nZ=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:PN,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),t1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:PN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),r1e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:PN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),n1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:PN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),a1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),g9=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),UE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),XB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),QE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),YB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v9=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),s1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),i1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),o1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),l1e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),x9=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),c1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),JB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),u1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),d1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),b9=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),A1e=[{id:Yt.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:c.jsx(e1e,{})},{id:Yt.PROFESORADO,label:"Profesorado",icon:c.jsx(t1e,{})},{id:Yt.COORDINACION_TP,label:"Coordinacin TP",icon:c.jsx(r1e,{})},{id:Yt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(n1e,{})}],f1e={[Yt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(a1e,{})},{name:"Administracin",icon:c.jsx(l1e,{})},{name:"Seguimiento Curricular",icon:c.jsx(d1e,{})},{name:"Acompaamiento docente",icon:c.jsx(o1e,{})},{name:"Anlisis Taxonmico",icon:c.jsx(b9,{})},{name:"Interdisciplinario",icon:c.jsx(JB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(g9,{})},{name:"Crear horarios",icon:c.jsx(XB,{})},{name:"Seguimiento de acciones pedaggicas",icon:c.jsx(QE,{})},{name:"Inclusin",icon:c.jsx(x9,{})},{name:"Calendario Acadmico",icon:c.jsx(UE,{})},{name:"Muro de Anuncios",icon:c.jsx(Wb,{})},{name:"Mensajera Interna",icon:c.jsx(Xb,{})},{name:"Generador de Actas",icon:c.jsx(YB,{})}],[Yt.PROFESORADO]:[{name:"Planificacin",icon:c.jsx(v9,{})},{name:"Mis Acompaamientos",icon:c.jsx(c1e,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(s1e,{})},{name:"Anlisis Taxonmico",icon:c.jsx(b9,{})},{name:"Interdisciplinario",icon:c.jsx(JB,{})},{name:"Inclusin",icon:c.jsx(x9,{})},{name:"Actividades Remotas",icon:c.jsx(i1e,{})},{name:"Evaluacin de Aprendizajes",icon:c.jsx(YB,{})},{name:"Evaluaciones Formativas",icon:c.jsx(QE,{})},{name:"Calendario Acadmico",icon:c.jsx(UE,{})},{name:"Muro de Anuncios",icon:c.jsx(Wb,{})},{name:"Mensajera Interna",icon:c.jsx(Xb,{})},{name:"Generador de Actas",icon:c.jsx(g9,{})}],[Yt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(QE,{})},{name:"Asistencia Dual",icon:c.jsx(XB,{})},{name:"Paol",icon:c.jsx(u1e,{})},{name:"Gestin de Empresas",icon:c.jsx(Xxe,{})},{name:"Calendario Acadmico",icon:c.jsx(UE,{})},{name:"Muro de Anuncios",icon:c.jsx(Wb,{})},{name:"Mensajera Interna",icon:c.jsx(Xb,{})},{name:"Alternancia TP",icon:""},{name:"Generador de Actas",icon:c.jsx(YB,{})}],[Yt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(v9,{})},{name:"Evaluacin Formativa",icon:c.jsx(QE,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(JB,{})},{name:"Asistencia a Empresa",icon:c.jsx(XB,{})},{name:"Calendario Acadmico",icon:c.jsx(UE,{})},{name:"Muro de Anuncios",icon:c.jsx(Wb,{})},{name:"Mensajera Interna",icon:c.jsx(Xb,{})}]},y9=["Currculum y Evaluacin","Convivencia Escolar","Orientacin","Gestin Pedaggica General"],HE=["Pendiente","En Proceso","Cumplida"],Dv=["1 Medio","2 Medio","3 Medio","4 Medio"],qi=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],Ns=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],WI=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],p_=["Lunes","Martes","Mircoles","Jueves","Viernes"],XI=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],h1e={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},Zv={[dn.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},m1e=Object.values(ip),ZB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],eT=["Vinculado","Desvinculado","En proceso","Empresa"],wp=["3A","3B","3C","3D","4A","4B","4C","4D"],p1e=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],vS=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],by=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],aZ=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],VE=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],g1e=["Mecnica Industrial","Mecnica Automotriz"],v1e=["INACAP","UNAB","DUOC","Universidad de Las Amricas"],x1e={"Mecnica Automotriz":["3A","3B","4A","4B"],"Mecnica Industrial":["3C","3D","4C","4D"]},b1e=["Pasanta","Visita","Certificacin","Formacin en empresa"],y1e={"Mecnica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medicin y verificacin","Mecnica de banco","Torneado de piezas y conjuntos mecnicos","Fresado de piezas mecnicas","Taladrado de piezas mecnicas","Rectificado de piezas mecnicas","Fabricacin asistida por computador (CNC)"],"Mecnica Automotriz":["Ajuste de motores","Lectura de planos y manuales tcnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas elctricos y electrnicos","Mantenimiento de motores","Mantenimiento de sistemas hidrulicos y neumticos","Mantenimiento de los sistemas de transmisin y frenos","Mantenimiento de sistemas de direccin y suspensin","Emprendimiento y empleabilidad"]},w1e={"Mecnica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, disel, gas e hbridos), incluyendo sistemas de control de emisiones, lubricacin y refrigeracin, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales tcnicos":["Leer e interpretar informacin tcnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnsticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulacin y disposicin de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatizacin, cierre centralizado, asientos elctricos) segn especificaciones tcnicas."],"Mantenimiento de sistemas elctricos y electrnicos":["Reemplazar, ajustar y probar sistemas elctricos y electrnicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parmetros operativos segn especificaciones."],"Mantenimiento de sistemas hidrulicos y neumticos":["Inspeccionar, diagnosticar y reparar sistemas hidrulicos y neumticos de vehculos automotrices."],"Mantenimiento de los sistemas de transmisin y frenos":["Verificar, ajustar o reemplazar componentes de transmisin y frenos, segn manual del fabricante."],"Mantenimiento de sistemas de direccin y suspensin":["Diagnosticar, alinear y corregir sistemas de direccin y suspensin, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestin, marketing y normativa vigente."]},"Mecnica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de mquinas, asegurando su operatividad y prolongando su vida til."],"Medicin y verificacin":["Utilizar instrumentos de medicin y verificacin para controlar dimensiones y tolerancias segn planos y especificaciones tcnicas."],"Mecnica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecnicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecnicos, cumpliendo con las especificaciones tcnicas y de seguridad."],"Fresado de piezas mecnicas":["Operar fresadoras para fabricar piezas mecnicas, seleccionando herramientas de corte y parmetros de mecanizado adecuados."],"Taladrado de piezas mecnicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones tcnicas y de seguridad."],"Rectificado de piezas mecnicas":["Utilizar rectificadoras para mejorar el acabado y precisin dimensional de piezas mecnicas, cumpliendo tolerancias indicadas."],"Fabricacin asistida por computador (CNC)":["Programar y operar mquinas CNC para fabricar piezas mecnicas con precisin, optimizando procesos y aplicando normas de seguridad."]}},E1e=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),l("forgot_sent")},f=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(ID,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},zE=({trigger:e,children:t,onOpen:r})=>{const[n,a]=T.useState(!1),s=T.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return T.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:e}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},w9="usuariosLiceo",C1e=({user:e,onClose:t,onSave:r})=>{const[n,a]=T.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...e,...n};try{const u=localStorage.getItem(w9);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=l:d.push(l),localStorage.setItem(w9,JSON.stringify(d)),r(l),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},E9="usuariosLiceo",_1e=({user:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contrasea no puede estar en blanco.");return}if(n!==s){l("Las contraseas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(E9);let p=h?JSON.parse(h):[];const g=p.findIndex(v=>v.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(E9,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),l("No se pudo guardar la nueva contrasea.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),C9=e=>{const t=N1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},sZ=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),k1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1e=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},l)=>T.createElement("svg",{ref:l,...B1e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:sZ("lucide",a),...!s&&!k1e(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>T.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=(e,t)=>{const r=T.forwardRef(({className:n,...a},s)=>T.createElement(T1e,{ref:s,iconNode:t,className:sZ(`lucide-${S1e(C9(e))}`,`lucide-${e}`,n),...a}));return r.displayName=C9(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],I1e=Rr("bell-ring",j1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zp=Rr("book-open",F1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],D1e=Rr("brain",O1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],P1e=Rr("briefcase",R1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1e=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],iZ=Rr("building-2",L1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],U1e=Rr("building",M1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],H1e=Rr("calendar-check",Q1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xS=Rr("calendar",V1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],g_=Rr("chart-column",z1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],YI=Rr("chevron-left",$1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],K1e=Rr("chevron-right",G1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$f=Rr("circle-alert",q1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],FD=Rr("circle-check-big",W1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ep=Rr("circle-check",X1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],J1e=Rr("clipboard-check",Y1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ebe=Rr("clipboard-list",Z1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tbe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yy=Rr("clock",tbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rbe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],LN=Rr("download",rbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nbe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jy=Rr("file-text",nbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const abe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sbe=Rr("funnel",abe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ibe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Zy=Rr("graduation-cap",ibe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const obe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],lbe=Rr("hash",obe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ube=Rr("info",cbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dbe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Abe=Rr("layout-dashboard",dbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fbe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yb=Rr("loader-circle",fbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hbe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mbe=Rr("mail",hbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],JI=Rr("map-pin",pbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],vbe=Rr("megaphone",gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],bbe=Rr("message-square",xbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],oZ=Rr("pencil",ybe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Ebe=Rr("percent",wbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cp=Rr("plus",Cbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Sbe=Rr("puzzle",_be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nbe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],kbe=Rr("route",Nbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bbe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],OD=Rr("save",Bbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tbe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jbe=Rr("search",Tbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],v_=Rr("sparkles",Ibe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fbe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lZ=Rr("square-pen",Fbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Obe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ZI=Rr("square-plus",Obe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dbe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Rbe=Rr("star",Dbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cZ=Rr("target",Pbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lbe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ug=Rr("trash-2",Lbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],uZ=Rr("upload",Mbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Qbe=Rr("user-minus",Ube);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hbe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vbe=Rr("user-plus",Hbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eF=Rr("user",zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $be=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],LA=Rr("users",$be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],dZ=Rr("video",Gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kbe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],qbe=Rr("wrench",Kbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wbe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_9=Rr("x",Wbe);async function Xbe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:am()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Zn(Lt(tn,"notificaciones"),t)).id}function Ybe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(l=>{l.id&&(i.has(l.id)||i.set(l.id,l))});const o=Array.from(i.values()).sort((l,u)=>{var h,p;const d=(h=l.createdAt)!=null&&h.toDate?l.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=tr(Lt(tn,"notificaciones"),_n("docenteEmailLower","==",e.email.toLowerCase()),Gr("createdAt","desc"));r.push(xr(i,o=>{n=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}if(e.nombreCompleto){const i=tr(Lt(tn,"notificaciones"),_n("docenteNombre","==",e.nombreCompleto),Gr("createdAt","desc"));r.push(xr(i,o=>{a=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}return()=>r.forEach(i=>i())}async function Jbe(e){const t=mr(tn,"notificaciones",e);await vh(t,{leida:!0})}async function Zbe(e){const t=mr(tn,"notificaciones",e);await Is(t)}const S9="anunciosMuro",N9="mensajesInternos",k9="lir-read-status",eye=({user:e})=>{if(e.fotoUrl)return c.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},tye=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=T.useState([]),[f,h]=T.useState([]),[p,g]=T.useState(!1),[v,b]=T.useState(!1),[y,C]=T.useState([]),S=T.useCallback(()=>{try{const F=localStorage.getItem(`${k9}-${e.id}`);return F?JSON.parse(F):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),I=T.useCallback(F=>{try{localStorage.setItem(`${k9}-${e.id}`,JSON.stringify(F))}catch(U){console.error("Failed to set read status:",U)}},[e.id]);T.useEffect(()=>{const F=JSON.parse(localStorage.getItem(S9)||"[]"),U=S();d(F.filter(k=>!U.announcements.includes(k.id)));const D=JSON.parse(localStorage.getItem(N9)||"[]");h(D.filter(k=>k.para===e.email).sort((k,L)=>new Date(L.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,S,o]),T.useEffect(()=>{if(!(e!=null&&e.email))return;const F=Ybe({email:e.email,nombreCompleto:e.nombreCompleto},U=>{const D=U.filter(k=>k.tipo&&(k.tipo.toLowerCase()==="pie"||k.tipo==="nueva_intervencion"));C(D)});return()=>F()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const N=()=>{const F=S(),U=JSON.parse(localStorage.getItem(S9)||"[]").map(D=>D.id);F.announcements=U,I(F),d([])},B=()=>{const F=S(),D=JSON.parse(localStorage.getItem(N9)||"[]").filter(k=>k.para===e.email).map(k=>k.id);F.messages=[...new Set([...F.messages,...D])],I(F),l()},w=y.filter(F=>!F.leida).length,_=F=>{var U;try{const D=(U=F.createdAt)!=null&&U.toDate?F.createdAt.toDate():new Date(F.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(Jxe,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:c.jsx(Zxe,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(zE,{onOpen:N,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[c.jsx(Wb,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(F=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:F.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.mensaje})]},F.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(zE,{trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[c.jsx(Sbe,{className:"w-5 h-5"}),w>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:w})]}),children:c.jsxs("div",{className:"p-2 w-80",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),c.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&c.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(F=>c.jsx("li",{className:"p-2 text-sm",children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:F.titulo}),c.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:F.mensaje}),F.estudianteNombre&&c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",c.jsx("b",{children:F.estudianteNombre})]}),c.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:_(F)})]}),c.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!F.leida&&c.jsx("button",{onClick:()=>F.id&&Jbe(F.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),c.jsx("button",{onClick:()=>F.id&&Zbe(F.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},F.id))]})]})}),c.jsx(zE,{onOpen:B,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Xb,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(F=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",F.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.asunto})]},F.id)),f.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(zE,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(eye,{user:e})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),p&&c.jsx(C1e,{user:e,onClose:()=>g(!1),onSave:n}),v&&c.jsx(_1e,{user:e,onClose:()=>b(!1),onSave:n})]})},rye={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},DD=HU().length?HU()[0]:BO(rye),_t=dD(DD),tF=YX(DD),nye=TD(DD),t2="reemplazos_docentes",aye="usuarios",RD=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},sye=e=>{const t=e.data();return{id:e.id,...t}},iye=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await Zn(Lt(_t,t2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},oye=async(e,t)=>{try{const r=mr(_t,t2,e),n=await Jw(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Is(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},lye=(e,t,r=50)=>{try{const n=tr(Lt(_t,t2),_n("userId","==",e),Gr("diaAusencia","desc"),Ed(r));return xr(n,a=>{const s=a.docs.map(RD);t(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},cye=e=>{try{const t=tr(Lt(_t,aye),_n("profile","==",Yt.PROFESORADO));return xr(t,n=>{const a=n.docs.map(sye);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},uye=async e=>{try{const t=tr(Lt(_t,t2),_n("userId","==",e)),n=(await Za(t)).docs.map(RD),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadsticas:",t),new Error("No se pudieron obtener las estadsticas")}},dye=async(e,t)=>{try{if(!t.trim())return[];const r=tr(Lt(_t,t2),_n("userId","==",e),Gr("diaAusencia","desc"),Ed(100)),a=(await Za(r)).docs.map(RD),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}},Aye=Array.from({length:12},(e,t)=>t+1),B9={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},fye=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);T.useEffect(()=>e?lye(e,f=>{r(f),a(!1)}):void 0,[e]);const o=T.useCallback(async d=>{try{return i(null),await iye(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),l=T.useCallback(async d=>{try{i(null),await oye(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=T.useCallback(async d=>{try{return i(null),d.trim()?await dye(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:l,search:u}},hye=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0);T.useEffect(()=>cye(i=>{t(i),n(!1)}),[]);const a=T.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Jg=({label:e,icon:t,children:r})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),c.jsxs("div",{className:"relative",children:[t&&c.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),mye="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",pye="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",gye="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",l0=({title:e,value:t,icon:r})=>c.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:r}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),vye=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribucin (graficable)"}),c.jsx("div",{className:"grid gap-3",children:e.map(r=>c.jsxs("div",{children:[c.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:r.label}),c.jsx("span",{children:r.value})]}),c.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:c.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},xye=({userId:e,reemplazos:t})=>{const[r,n]=T.useState(null),[a,s]=T.useState(!1),i=T.useCallback(async()=>{try{s(!0);const b=await uye(e);n(b)}finally{s(!1)}},[e]);T.useEffect(()=>{e&&i()},[e,i]);const o=new Date,l=o.getMonth(),u=o.getFullYear(),d=T.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===l&&y.getFullYear()===u}),[t,l,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),v=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[c.jsx(Yb,{className:"h-5 w-5 animate-spin"}),"Cargando estadsticas"]})}):c.jsxs("div",{className:"grid gap-4",children:[c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(l0,{title:"Total",value:r.totalReemplazos,icon:c.jsx(I1e,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Realizadas",value:r.horasRealizadas,icon:c.jsx(Ep,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Cubiertas",value:r.horasCubiertas,icon:c.jsx(J1e,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:c.jsx(Ebe,{className:"h-6 w-6"})})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(l0,{title:"Profesores ausentes",value:f.size,icon:c.jsx(Qbe,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Profesores que reemplazan",value:h.size,icon:c.jsx(Vbe,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Cursos (nicos)",value:p.size,icon:c.jsx(LA,{className:"h-6 w-6"})}),c.jsx(l0,{title:"Asignaturas ausentes",value:g.size,icon:c.jsx(zp,{className:"h-6 w-6"})})]}),c.jsx(vye,{data:v})]})},bye=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=fye(t),{profesorNames:l,loading:u}=hye(),[d,f]=T.useState(B9),[h,p]=T.useState(""),[g,v]=T.useState([]),[b,y]=T.useState(null),[C,S]=T.useState(!1),[I,N]=T.useState(!1);T.useEffect(()=>{(async()=>{if(!h.trim())return v(r);N(!0);try{const k=await s(h);v(k)}finally{N(!1)}})()},[r,h,s]);const B=T.useCallback(D=>{const{name:k,value:L}=D.target;f(R=>({...R,[k]:L}))},[]),w=T.useCallback(D=>{f(k=>{const R=k.bloquesAfectados.includes(D)?k.bloquesAfectados.filter(X=>X!==D):[...k.bloquesAfectados,D].sort((X,V)=>X-V);return{...k,bloquesAfectados:R}})},[]),_=T.useCallback(async D=>{D.preventDefault(),y(null),S(!0);const{docenteAusente:k,asignaturaAusente:L,curso:R,diaAusencia:X,bloquesAfectados:V,docenteReemplazante:Z,asignaturaReemplazante:H}=d;if(!k||!L||!R||!X||!Z||!H||V.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),S(!1);return}if(k===Z){y("El docente ausente y el reemplazante no pueden ser la misma persona."),S(!1);return}try{const z=L.trim().toLowerCase()===H.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",q={...d,resultado:z};await n(q),f(B9);const re=document.createElement("div");re.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",re.textContent=z==="Hora realizada"?" Reemplazo registrado  Hora realizada":" Reemplazo registrado  Hora cubierta, no realizada",document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},2500)}catch(z){console.error(z),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{S(!1)}},[d,n]),F=T.useCallback(async D=>{if(window.confirm("Eliminar este registro?"))try{await a(D)}catch(k){console.error(k),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),U="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!e||!e.email&&!e.id?c.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadsticas del Mes"}),c.jsx(xye,{userId:t,reemplazos:r})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[c.jsx(Yb,{className:"h-5 w-5 animate-spin"})," Cargando profesores"]}):c.jsxs("form",{onSubmit:_,className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(LA,{className:"h-5 w-5 text-slate-400"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),c.jsx(Jg,{label:"Nombre",icon:c.jsx(Zy,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:B,className:U,required:!0,disabled:C,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Jg,{label:"Asignatura",icon:c.jsx(zp,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:B,className:U,required:!0,disabled:C,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Jg,{label:"Curso",icon:c.jsx(LA,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"curso",value:d.curso,onChange:B,className:U,required:!0,disabled:C,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Jg,{label:"Da de ausencia",icon:c.jsx(xS,{className:"h-5 w-5"}),children:c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:B,className:U,required:!0,disabled:C})}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[c.jsx(Yy,{className:"h-5 w-5 text-slate-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),c.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:Aye.map(D=>{const k=d.bloquesAfectados.includes(D);return c.jsx("button",{type:"button",onClick:()=>w(D),disabled:C,className:`${mye} ${k?pye:gye}`,"aria-pressed":k,children:D},D)})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(LA,{className:"h-5 w-5 text-slate-400"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),c.jsx(Jg,{label:"Nombre",icon:c.jsx(Zy,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:B,className:U,required:!0,disabled:C,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Jg,{label:"Asignatura",icon:c.jsx(zp,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:B,className:U,required:!0,disabled:C,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>c.jsx("option",{value:D,children:D},D))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[c.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[c.jsx(Ep,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:C||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:C?c.jsxs(c.Fragment,{children:[c.jsx(Yb,{className:"h-4 w-4 animate-spin"})," Registrando"]}):c.jsxs(c.Fragment,{children:[c.jsx(OD,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"relative w-full max-w-md",children:[c.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:I?c.jsx(Yb,{className:"h-5 w-5 animate-spin"}):c.jsx(jbe,{className:"h-5 w-5"})}),c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)",value:h,onChange:D=>p(D.target.value),className:U,disabled:I})]})]}),i?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[c.jsx(Yb,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos"]}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(D=>c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:D},D))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(D=>c.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.curso}),c.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteAusente,c.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),c.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteReemplazante,c.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${D.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[c.jsx(Ep,{className:"h-4 w-4"}),D.resultado]})}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:c.jsx("button",{onClick:()=>F(D.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:C,children:c.jsx(ug,{className:"h-4 w-4"})})})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu bsqueda.":"An no hay registros."})})})]}),g.length>0&&!h&&c.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los ltimos ",g.length," registros"]})]})]})]})},yye=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=Lt(tn,"reemplazos"),r=tr(t,Gr("fecha","desc"));return xr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},wye=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=Lt(tn,"acompanamientos"),r=tr(t,Gr("fecha","desc"));return xr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},Eye=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=Lt(tn,"calendar_events"),r=tr(t,Gr("date","asc"));return xr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},fA=({title:e,value:t,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Ym=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=T.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=T.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Cye=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState(!0),[l,u]=T.useState(null);return T.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const p=yye(b=>{t(b),h()}),g=wye(b=>{n(b),h()}),v=Eye(b=>{s(b),h()});return()=>{p(),g(),v()}}catch(p){console.error(" Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:l}},_ye=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Cye(),[i,o]=T.useState(by);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),T.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):by)}catch(p){console.error("Error al leer rbrica personalizada",p),o(by)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const l=T.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(N=>N.resultado==="Hora realizada").length,v=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(N,B)=>N.reduce((w,_)=>{const F=_[B];return typeof F=="string"&&(w[F]=(w[F]||0)+1),w},{}),C=y(t,"docenteAusente"),S=y(t,"docenteReemplazante"),I=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:v,tasaCobertura:b,inasistenciasPorDocente:Object.entries(C).map(([N,B])=>({label:N,value:B})),reemplazosPorDocente:Object.entries(S).map(([N,B])=>({label:N,value:B})),inasistenciasPorCurso:Object.entries(I).map(([N,B])=>({label:N,value:B})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:v}]}},[t]),u=T.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(B=>{B.criteria.forEach(w=>{g.set(w.name,B.domain)})});let v=0,b=0;const y={},C={};r.forEach(B=>{y[B.docente]||(y[B.docente]={total:0,count:0}),Object.entries(B.rubricaResultados).forEach(([w,_])=>{v+=_,b++,y[B.docente].total+=_,y[B.docente].count++;const F=g.get(w);F&&(C[F]||(C[F]={total:0,count:0}),C[F].total+=_,C[F].count++)})});const S=b>0?(v/b).toFixed(2):"N/A",I=Object.entries(y).map(([B,w])=>({label:B,value:w.count>0?(w.total/w.count).toFixed(2):0})),N=Object.entries(C).map(([B,w])=>({label:B,value:w.count>0?(w.total/w.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:S,desempenoPorDocente:I,desempenoPorDominio:N}},[r,i]),d=T.useMemo(()=>{const p={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const v of n)p.hasOwnProperty(v.type)&&p[v.type]++;const g=Object.entries(p).map(([v,b])=>({label:Zv[v].label,value:b}));return{totalEvaluaciones:p[dn.EVALUACION],totalActos:p[dn.ACTO],totalActividadesFocalizadas:p[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),c.jsx("p",{children:" Calendario Acadmico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fA,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(fA,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(fA,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(fA,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Ym,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(Ym,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(Ym,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(Ym,{title:"Distribucin de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fA,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(fA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Ym,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),c.jsx(Ym,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(fA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(fA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(fA,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Ym,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var v,b;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin ttulo"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",p.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((v=Zv[p.type])==null?void 0:v.color)||"bg-gray-100 text-gray-800"}`,children:((b=Zv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var T9;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(T9||(T9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j9;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(j9||(j9={}));var I9;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(I9||(I9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=["user","model","function","system"];var O9;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(O9||(O9={}));var D9;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(D9||(D9={}));var R9;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(R9||(R9={}));var P9;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(P9||(P9={}));var yy;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(yy||(yy={}));var L9;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(L9||(L9={}));var M9;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(M9||(M9={}));var U9;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(U9||(U9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Zg extends qo{constructor(t,r){super(t),this.response=r}}class AZ extends qo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class H0 extends qo{}class fZ extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sye="https://generativelanguage.googleapis.com",Nye="v1beta",kye="0.24.1",Bye="genai-js";var $p;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})($p||($p={}));class Tye{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Nye;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Sye}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function jye(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Bye}/${kye}`),t.join(" ")}async function Iye(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",jye(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new H0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new H0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new H0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function Fye(e,t,r,n,a,s){const i=new Tye(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},Pye(s)),{method:"POST",headers:await Iye(i),body:a})}}async function r2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:l}=await Fye(e,t,r,n,a,s);return Oye(o,l,i)}async function Oye(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){Dye(a,e)}return n.ok||await Rye(n,e),n}function Dye(e,t){let r=e;throw r.name==="AbortError"?(r=new fZ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof AZ||e instanceof H0||(r=new qo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function Rye(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new AZ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function Pye(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),x_(e.candidates[0]))throw new Zg(`${v0(e)}`,e);return Lye(e)}else if(e.promptFeedback)throw new Zg(`Text not available. ${v0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),x_(e.candidates[0]))throw new Zg(`${v0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Q9(e)[0]}else if(e.promptFeedback)throw new Zg(`Function call not available. ${v0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),x_(e.candidates[0]))throw new Zg(`${v0(e)}`,e);return Q9(e)}else if(e.promptFeedback)throw new Zg(`Function call not available. ${v0(e)}`,e)},e}function Lye(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function Q9(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const Mye=[yy.RECITATION,yy.SAFETY,yy.LANGUAGE];function x_(e){return!!e.finishReason&&Mye.includes(e.finishReason)}function v0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];x_(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function ew(e){return this instanceof ew?(this.v=e,this):new ew(e)}function Uye(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,v){s.push([h,p,g,v])>1||o(h,p)})})}function o(h,p){try{l(n[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof ew?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Qye(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=zye(t),[n,a]=r.tee();return{stream:Vye(n),response:Hye(a)}}async function Hye(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return PD($ye(t));t.push(a)}}function Vye(e){return Uye(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield ew(r.read());if(a)break;yield yield ew(PD(n))}})}function zye(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new qo("Failed to parse stream"));return}n.close();return}a+=i;let l=a.match(H9),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new qo(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),a=a.substring(l[0].length),l=a.match(H9)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new fZ("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function $ye(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hZ(e,t,r,n){const a=await r2(t,$p.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return Qye(a)}async function mZ(e,t,r,n){const s=await(await r2(t,$p.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:PD(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function tw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return Gye(t)}function Gye(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new qo("No content is provided for sending chat message.");return n?t:r}function Kye(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new H0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=tw(e);n.contents=[s]}return{generateContentRequest:n}}function V9(e){let t;return e.contents?t=e:t={contents:[tw(e)]},e.systemInstruction&&(t.systemInstruction=pZ(e.systemInstruction)),t}function qye(e){return typeof e=="string"||Array.isArray(e)?{content:tw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Wye={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Xye(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new qo(`First content should be with role 'user', got ${n}`);if(!F9.includes(n))throw new qo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(F9)}`);if(!Array.isArray(a))throw new qo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new qo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const l of z9)l in o&&(s[l]+=1);const i=Wye[n];for(const o of z9)if(!i.includes(o)&&s[o]>0)throw new qo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function $9(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="SILENT_ERROR";class Yye{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Xye(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=tw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>mZ(this._apiKey,this.model,d,f)).then(p=>{var g;if($9(p.response)){this._history.push(u);const v=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(v)}else{const v=v0(p.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=tw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=hZ(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(G9)}).then(p=>p.response).then(p=>{if($9(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=v0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==G9&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jye(e,t,r,n){return(await r2(t,$p.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zye(e,t,r,n){return(await r2(t,$p.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function ewe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await r2(t,$p.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=pZ(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=V9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return mZ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=V9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return hZ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new Yye(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=Kye(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return Jye(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=qye(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Zye(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return ewe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new K9(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new H0("Cached content must contain a `name` field.");if(!t.model)throw new H0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new H0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new K9(this.apiKey,s,n)}}const LD="horario_asignaciones",gZ="horarios_generados",twe="usuarios",vZ=e=>{const t=e.data();return{id:e.id,...t}},rwe=e=>{const t=tr(Lt(_t,LD));return xr(t,n=>{const a=n.docs.map(s=>vZ(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},nwe=async e=>{try{return(await Zn(Lt(_t,LD),e)).id}catch(t){throw console.error("Error al agregar asignacin:",t),new Error("No se pudo agregar la asignacin.")}},awe=async e=>{try{const t=mr(_t,LD,e);await Is(t)}catch(t){throw console.error("Error al eliminar asignacin:",t),new Error("No se pudo eliminar la asignacin.")}},q9=async e=>{try{const t=mr(_t,gZ,"global");await Ji(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},swe=e=>{const t=mr(_t,gZ,"global");return xr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},iwe=e=>{const t=tr(Lt(_t,twe),_n("profile","==",Yt.PROFESORADO));return xr(t,n=>{const a=n.docs.map(s=>vZ(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},owe=({horarios:e})=>Object.keys(e).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ns.map(t=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),c.jsx("tbody",{children:p_.map(t=>c.jsxs(lt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+Ns.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),XI.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ns.map(s=>{var o,l;const i=(l=(o=e[s])==null?void 0:o[t])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),lwe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState({curso:"",asignatura:"",profesor:""}),[a,s]=T.useState([]),[i,o]=T.useState({}),[l,u]=T.useState(Ns[0]),[d,f]=T.useState(!1),[h,p]=T.useState(!0),[g,v]=T.useState(null),[b,y]=T.useState(null),[C,S]=T.useState(null),[I,N]=T.useState({asignatura:"",profesor:""}),[B,w]=T.useState("edicion"),[_,F]=T.useState("");T.useEffect(()=>{p(!0);const H=rwe(t),z=swe(o),q=iwe(re=>{const P=re.map(K=>K.nombreCompleto).sort();s(P),p(!1)});return()=>{H(),z(),q()}},[]);const U=async H=>{if(H.preventDefault(),v(null),!r.curso||!r.asignatura||!r.profesor){v("Todos los campos de la asignacin son obligatorios.");return}try{await nwe({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){v(z instanceof Error?z.message:"Error al guardar la asignacin.")}},D=async H=>{try{await awe(H)}catch(z){v(z instanceof Error?z.message:"Error al eliminar la asignacin.")}},k=async()=>{if(e.length===0){v("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}f(!0),v(null),y(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new cs(H),q=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${p_.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(XI,null,2)}
                - Cursos del liceo: ${Ns.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(h1e,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await z.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ie=JSON.parse(te);await q9(ie),y("Horario generado y guardado con xito!")}catch(H){console.error("Error al generar horario con IA:",H),v("Ocurri un error al contactar con la IA o al procesar la respuesta. Revisa la consola para ms detalles.")}finally{f(!1)}},L=(H,z,q)=>{S({dia:H,bloque:z}),N({asignatura:(q==null?void 0:q.asignatura)||"",profesor:(q==null?void 0:q.profesor)||""})},R=async()=>{if(!C)return;const{dia:H,bloque:z}=C,q=JSON.parse(JSON.stringify(i));q[l]||(q[l]={}),q[l][H]||(q[l][H]={}),q[l][H][z]={asignatura:I.asignatura||null,profesor:I.profesor||null};try{await q9(q),S(null)}catch(re){v(re instanceof Error?re.message:"Error al guardar la edicin.")}},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>{const H=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),p_.map(z=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),c.jsx("tbody",{children:XI.map(({bloque:z,inicio:q,fin:re})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${q} - ${re}`})]}),p_.map(P=>{var te;const K=(C==null?void 0:C.dia)===P&&(C==null?void 0:C.bloque)===z,Y=(te=H[P])==null?void 0:te[z];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!K&&L(P,z,Y),children:K?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:ie=>N(Ae=>({...Ae,asignatura:ie.target.value})),className:X+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:ie=>N(Ae=>({...Ae,profesor:ie.target.value})),className:X+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>S(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:R,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Y!=null&&Y.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Y.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Y.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${P}-${z}`)})]},z))})]})})},Z=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),c.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:H=>n(z=>({...z,curso:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),Ns.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:H=>n(z=>({...z,asignatura:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:H=>n(z=>({...z,profesor:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:e.map(H=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[H.curso," - ",H.asignatura," - ",c.jsx("strong",{children:H.profesor})]}),c.jsx("button",{onClick:()=>D(H.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},H.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:H=>F(H.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:X})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:k,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&c.jsx("p",{className:"text-red-600",children:g}),b&&c.jsx("p",{className:"text-green-600",children:b})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:H=>u(H.target.value),className:X+" md:w-1/3",children:Ns.map(H=>c.jsx("option",{value:H,children:H},H))})]}),Object.keys(i).length>0?V():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return h?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>w("edicion"),className:`${B==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),c.jsx("button",{onClick:()=>w("global"),className:`${B==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),B==="edicion"?Z():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(owe,{horarios:i})]})]})},MN="acciones",cwe=async()=>{try{const e=tr(Lt(tn,MN),Gr("fechaRegistro","desc"));return(await Za(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedaggicas")}},uwe=async e=>{try{return{id:(await Zn(Lt(tn,MN),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear accin:",t),new Error("No se pudo crear la accin pedaggica")}},W9=async(e,t)=>{try{const r=mr(tn,MN,e);await vh(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar accin:",r,"ID:",e),new Error("No se pudo actualizar la accin pedaggica")}},dwe=async e=>{try{const t=mr(tn,MN,e);await Is(t)}catch(t){throw console.error("Error al eliminar accin:",t,"ID:",e),new Error("No se pudo eliminar la accin pedaggica")}},X9={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Awe={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},fwe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!1),[a,s]=T.useState(null),[i,o]=T.useState(X9),[l,u]=T.useState(null),[d,f]=T.useState(""),[h,p]=T.useState(""),[g,v]=T.useState(""),b=T.useCallback(async()=>{n(!0);try{const F=await cwe();t(F),s(null)}catch(F){console.error("Error al cargar acciones:",F),s("No se pudieron cargar las acciones pedaggicas.")}finally{n(!1)}},[]);T.useEffect(()=>{b()},[b]);const y=T.useCallback(F=>{const{name:U,value:D}=F.target;o(k=>({...k,[U]:D}))},[]),C=T.useCallback(()=>{o(X9),u(null),s(null)},[]),S=T.useCallback(async F=>{if(F.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, rea, descripcin y fecha de cumplimiento son obligatorios.");return}try{l?await W9(l,i):await uwe(i),await b(),C()}catch(U){console.error("Error al guardar accin:",U),s("Error al guardar la accin.")}},[i,l,b,C]),I=T.useCallback(F=>{window.scrollTo({top:0,behavior:"smooth"}),u(F.id),o({...F,enlaceDocumento:F.enlaceDocumento||""})},[]),N=T.useCallback(async F=>{if(window.confirm("Est seguro de que desea eliminar esta accin?"))try{await dwe(F),await b()}catch(U){console.error("Error al eliminar accin:",U),s("No se pudo eliminar la accin.")}},[b]),B=T.useCallback(async F=>{try{const U=e.find(D=>D.id===F);if(U){const k=(HE.indexOf(U.estado)+1)%HE.length,L=HE[k];await W9(F,{estado:L}),await b()}}catch(U){console.error("Error al cambiar estado:",U),s("No se pudo cambiar el estado de la accin.")}},[e,b]),w=T.useMemo(()=>e.filter(F=>{const U=d===""||F.responsable.toLowerCase().includes(d.toLowerCase())||F.descripcion.toLowerCase().includes(d.toLowerCase()),D=h===""||F.area===h,k=g===""||F.estado===g;return U&&D&&k}),[e,d,h,g]),_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedaggicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando accin existente.":"Registre una nueva accin de seguimiento."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"rea Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:y,className:_,children:[c.jsx("option",{value:"",children:"Seleccione un rea"}),y9.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripcin de la Accin"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la accin a realizar...",className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:_})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:_})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Accin":"Registrar Accin"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:F=>f(F.target.value),className:_+" md:col-span-1"}),c.jsxs("select",{value:h,onChange:F=>p(F.target.value),className:_,children:[c.jsx("option",{value:"",children:"Filtrar por rea"}),y9.map(F=>c.jsx("option",{value:F,children:F},F))]}),c.jsxs("select",{value:g,onChange:F=>v(F.target.value),className:_,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),HE.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripcin"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):w.length>0?w.map(F=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:F.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:F.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:F.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",F.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",F.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>B(F.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Awe[F.estado]}`,children:F.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[F.enlaceDocumento&&c.jsx("a",{href:F.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:""}),c.jsx("button",{onClick:()=>I(F),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>N(F.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},F.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},UN="planificaciones",xZ="actividades_calendario",bZ=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},hwe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await Zn(Lt(_t,UN),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},mwe=async(e,t,r)=>{try{const n=mr(_t,UN,e),a=await Jw(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await vh(n,{...t,fechaActualizacion:hr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},pwe=async(e,t)=>{try{const r=mr(_t,UN,e),n=await Jw(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await Is(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},gwe=(e,t)=>{const r=tr(Lt(_t,UN),_n("userId","==",e),Gr("fechaCreacion","desc"));return xr(r,n=>{const a=n.docs.map(bZ);t(a)},n=>{console.error("Error en suscripcin a planificaciones:",n)})},vwe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await Zn(Lt(_t,xZ),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},xwe=(e,t)=>{const r=tr(Lt(_t,xZ),_n("userId","==",e),Gr("fecha","desc"));return xr(r,n=>{const a=n.docs.map(bZ);t(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},bwe=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);return T.useEffect(()=>e?(a(!0),gwe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await hwe(d,e)}catch(f){throw i(f.message||"Error al guardar planificacin"),f}},update:async(d,f)=>{try{i(null),await mwe(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificacin"),h}},remove:async d=>{try{i(null),await pwe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificacin"),f}}}},rF=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},ywe=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);T.useEffect(()=>e?xwe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=T.useCallback(async l=>{try{return i(null),await vwe(l,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},wwe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=T.useState(e),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),t()}catch(l){console.error("Error al guardar leccin:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Ewe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=T.useState(e.progreso??0),[o,l]=T.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),l(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log(" Progreso actualizado exitosamente"))}catch(h){console.error(" Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),c.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},Cwe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=T.useState(e),[o,l]=T.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,v]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[v]:p}}):b=>({...b,[h]:p}))},d=async()=>{l(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),c.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:" Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:" Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},_we=({userId:e})=>{const{actividades:t,save:r}=ywe(e),[n,a]=T.useState("list"),[s,i]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=T.useState(f);T.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(B){console.error("Error al verificar evento en calendario:",B)}},v=B=>{const{name:w,value:_}=B.target;p(F=>({...F,[w]:_}))},b=(B,w,_)=>{p(F=>({...F,tareas:F.tareas.map(U=>U.id===B?{...U,[w]:_}:U)}))},y=()=>{p(B=>({...B,tareas:[...B.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},C=B=>{p(w=>({...w,tareas:w.tareas.filter(_=>_.id!==B)}))},S=async B=>{B.preventDefault(),l(!0);const w=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripcin: ${h.descripcion}
    - Tareas: ${h.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{rF("Planificacin - Actividad Calendario");const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new cs(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text(),R={...h,objetivo:L.replace(/(\*\*|\*)/g,"")},X=await r(R),V={...R,id:X};i(V),a("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const F={...h,objetivo:"No generado"},U=await r(F),D={...F,id:U};i(D),a("summary")}catch(F){console.error("Error al guardar actividad:",F),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},I=async B=>{if(B)try{d(!0),alert("Actividad marcada como aadida al calendario (funcionalidad en desarrollo).")}catch(w){console.error("Error adding to calendar:",w),alert("Hubo un error al agregar la actividad al calendario.")}},N="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:h.nombre,onChange:v,placeholder:"Nombre de la Actividad",className:N,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:v,className:N,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:v,className:N,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:v,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:N,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:v,placeholder:"Ubicacin",className:N,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:h.participantes,onChange:v,placeholder:"Participantes",className:N,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:v,placeholder:"Recursos Generales Necesarios",rows:2,className:N,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((B,w)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>C(B.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),c.jsx("textarea",{value:B.descripcion,onChange:_=>b(B.id,"descripcion",_.target.value),placeholder:`Descripcin de la Tarea ${w+1}`,rows:2,className:N,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:B.responsable,onChange:_=>b(B.id,"responsable",_.target.value),placeholder:"Responsable",className:N,required:!0,disabled:o}),c.jsx("input",{value:B.recursos,onChange:_=>b(B.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:N,disabled:o})]})]},B.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>I(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:t.length>0?t.map(B=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",B.ubicacion]})]},B.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Swe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=bwe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=T.useState(o),[d,f]=T.useState(null),[h,p]=T.useState(!1),[g,v]=T.useState(null),[b,y]=T.useState("unidad"),[C,S]=T.useState(null),[I,N]=T.useState(null),B=T.useMemo(()=>e.asignaturas||[],[e.asignaturas]),w=T.useMemo(()=>{const q=e.cursos||[],re=new Set;return q.forEach(P=>{P.startsWith("1")?re.add("1 Medio"):P.startsWith("2")?re.add("2 Medio"):P.startsWith("3")?re.add("3 Medio"):P.startsWith("4")&&re.add("4 Medio")}),Array.from(re)},[e.cursos]);T.useEffect(()=>{u(q=>({...q,asignatura:B[0]||"",nivel:w[0]||""})),console.log(" Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(q=>({id:q.id,autor:q.autor,tipo:q.tipo,coincideConUserId:q.autor===t}))})},[B,w,e,t,r]);const _=q=>{const{name:re,value:P}=q.target;u(K=>({...K,[re]:re==="cantidadClases"?parseInt(P,10):P}))},F=()=>{const{asignatura:q,nivel:re,nombreUnidad:P,contenidos:K,cantidadClases:Y,observaciones:te,ideasParaUnidad:ie}=l;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${q}
    - Nivel: ${re}
    - Nombre de la Unidad: "${P}"
    - Contenidos clave a trabajar (insumo principal): "${K}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${ie||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},U=async q=>{if(q.preventDefault(),p(!0),v(null),!l.contenidos||!l.nombreUnidad){v("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{rF("Planificacin - Unidad");const re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new cs(re).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=F(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await K.generateContent({contents:[{parts:[{text:Y}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),pe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,pe),f({...pe,id:d.id});else{const Ie=await n(pe);f({...pe,id:Ie})}}catch(re){console.error("Error al generar planificacin con IA",re),v("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{p(!1)}},D=async(q,re)=>{p(!0),v(null);const P=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${re.asignatura}
    - Nivel: ${re.nivel}
    - Objetivo de la clase: ${q.objetivosAprendizaje}
    - Contenidos: ${q.contenidosConceptuales}
    - Actividades sugeridas: ${q.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{rF("Planificacin - Utilizar Clase");const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new cs(K).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ie={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:P}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),pe=JSON.parse(ce),Ie={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:re.asignatura,nivel:re.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:pe,detalleLeccionOrigen:q};await n(Ie),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),y("clase")}catch(K){console.error("Error al generar plan de clase con IA",K),v("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{p(!1)}},k=q=>{q.tipo==="Unidad"&&(u({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),f(q),window.scrollTo({top:0,behavior:"smooth"}))},L=async q=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await s(q),(d==null?void 0:d.id)===q&&(f(null),u(o))}catch(re){console.error("Error al eliminar planificacin:",re),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},R=async q=>{if(window.confirm("Est seguro de que desea eliminar este plan de clase?"))try{await s(q),(C==null?void 0:C.id)===q&&S(null),console.log(" Plan de clase eliminado exitosamente")}catch(re){console.error("Error al eliminar plan de clase:",re),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},X=(q,re)=>{d&&N({planId:d.id,lessonIndex:q,lessonData:re})},V=async q=>{if(I)try{const{planId:re,lessonIndex:P}=I,K=r.find(ie=>ie.id===re&&ie.tipo==="Unidad");if(!K)return;const Y=[...K.detallesLeccion];Y[P]=q;const te={...K,detallesLeccion:Y};await a(re,te),f(te),N(null)}catch(re){console.error("Error al actualizar leccin:",re),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:U,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:_,className:Z,disabled:h,children:B.length>0?B.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:_,className:Z,disabled:h,children:w.length>0?w.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:_,className:Z,placeholder:"Ej: La Clula y sus procesos",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:Z,disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:Z,disabled:h})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:_,className:Z,min:"1",max:"20",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:_,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:h})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),c.jsx(Ewe,{plan:d,onEditLesson:X,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(q=>q.tipo==="Unidad").length>0?r.filter(q=>q.tipo==="Unidad").map(q=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>k(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>L(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:""})]})]})},q.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),z=()=>{const q=r.filter(re=>re.tipo==="Clase").sort((re,P)=>new Date(P.fechaCreacion).getTime()-new Date(re.fechaCreacion).getTime());return C?c.jsx(Cwe,{plan:C,onBack:()=>S(null),onDelete:R,onSave:async re=>{try{await a(re.id,re),S(re)}catch(P){console.error("Error al actualizar plan de clase:",P),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:q.length>0?q.map(re=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(re.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",re.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>S(re),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},re.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&H(),b==="clase"&&z(),b==="calendario"&&c.jsx(_we,{userId:t}),I&&c.jsx(wwe,{lesson:I.lessonData,onClose:()=>N(null),onSave:V,isLoading:h})]})},QN="events",Nwe=async()=>{try{const e=tr(Lt(tn,QN),Gr("date","asc"));return(await Za(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},kwe=async e=>{try{return{id:(await Zn(Lt(tn,QN),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Bwe=async(e,t)=>{try{const r=mr(tn,QN,e);await vh(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},Twe=async e=>{try{const t=mr(tn,QN,e);await Is(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},jwe=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],Y9={[dn.EVALUACION]:c.jsx(zp,{className:"h-4 w-4"}),[dn.ACTO]:c.jsx(vbe,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:c.jsx(cZ,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:c.jsx(kbe,{className:"h-4 w-4"})},Iwe=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},Fwe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=T.useState({});T.useEffect(()=>{l(a||{type:dn.EVALUACION,subtype:ip.PRUEBA_PARCIAL,asignatura:qi[0],curso:Ns[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=v=>{const{name:b,value:y}=v.target;l(C=>({...C,[b]:y}))},f=v=>{l(b=>{if(b.type===dn.SALIDA_PEDAGOGICA){const y=b.cursos||[],C=y.includes(v)?y.filter(S=>S!==v):[...y,v];return{...b,cursos:C.sort()}}return b})},h=v=>{var y;v.preventDefault();let b;switch(o.type){case dn.EVALUACION:{const C={date:s,type:dn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===ip.RUBRICA||o.subtype===ip.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(C.enlace=o.enlace.trim()),b=C;break}case dn.ACTO:b={date:s,type:dn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.ACTIVIDAD_FOCALIZADA:b={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.SALIDA_PEDAGOGICA:b={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case dn.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:m1e.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ns.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===ip.RUBRICA||o.subtype===ip.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),c.jsxs("div",{className:"relative",children:[c.jsx(JI,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),c.jsxs("div",{className:"relative",children:[c.jsx(Yy,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),c.jsxs("div",{className:"relative",children:[c.jsx(JI,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ns.map(v=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(v),onChange:()=>f(v),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),c.jsx("span",{children:v})]},v))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:c.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:v=>v.stopPropagation(),children:c.jsxs("form",{onSubmit:h,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:c.jsx(_9,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(dn).map(v=>c.jsx("option",{value:v,children:v},v))})]}),g()]})]}),c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[c.jsx(ug,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[c.jsx(_9,{className:"h-4 w-4"}),"Cancelar"]}),c.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[c.jsx(OD,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},Owe=({profile:e})=>{const[t,r]=T.useState(new Date),[n,a]=T.useState([]),[s,i]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[f,h]=T.useState(Object.values(dn)),[p,g]=T.useState(!1),[v,b]=T.useState(null),[y,C]=T.useState(null),S=T.useCallback(async()=>{i(!0);try{const D=await Nwe();a(D),l(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);T.useEffect(()=>{S()},[S]);const I=T.useMemo(()=>{const D=t.getFullYear(),k=t.getMonth(),L=new Date(D,k,1).getDay(),R=new Date(D,k+1,0).getDate(),X=[];let V=1;for(let Z=0;Z<6;Z++){const H=[];for(let z=0;z<7;z++)Z===0&&z<L||V>R?H.push(null):(H.push(new Date(D,k,V)),V++);if(X.push(H),V>R)break}return X},[t]),N=D=>{h(k=>k.includes(D)?k.filter(L=>L!==D):[...k,D])},B=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},w=D=>{e!==Yt.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),C(null),g(!0))},_=(D,k)=>{k.stopPropagation(),e!==Yt.ESTUDIANTE&&(b(D.date),C(D),g(!0))},F=async D=>{d(!0);try{y?await Bwe(y.id,D):await kwe(D),await S(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const L=k instanceof Error?k.message:"Error desconocido";l(`Error al guardar el evento: ${L}`)}finally{d(!1)}},U=async()=>{if(y){d(!0);try{await Twe(y.id),await S(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const k=D instanceof Error?D.message:"Error desconocido";l(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return c.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),c.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),c.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&c.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),o&&c.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&c.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[c.jsx(ube,{className:"h-5 w-5 mt-0.5"}),c.jsx("p",{children:"No hay eventos registrados en la nube."})]}),c.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[c.jsx(sbe,{className:"h-4 w-4"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:B,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(D=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${Zv[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[c.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>N(D),className:"hidden"}),c.jsx("span",{className:"shrink-0",children:Y9[D]}),c.jsx("span",{children:Zv[D].label})]},D))]})]}),c.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(YI,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(K1e,{className:"h-5 w-5"})})]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:jwe.map(D=>c.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:I.flat().map((D,k)=>{const L=D&&D.toDateString()===new Date().toDateString(),R=D==null?void 0:D.toISOString().split("T")[0],X=R?n.filter(V=>V.date===R&&f.includes(V.type)):[];return c.jsx("div",{onClick:()=>D&&w(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Yt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:X.map(V=>c.jsxs("div",{onClick:Z=>_(V,Z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Zv[V.type].color}`,children:[c.jsx("span",{className:"shrink-0",children:Y9[V.type]}),c.jsx("span",{className:"truncate",children:Iwe(V)})]},V.id))}),e!==Yt.ESTUDIANTE&&c.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:c.jsx(Cp,{className:"h-4 w-4"})})]})},k)})})]}),p&&c.jsx(Fwe,{isOpen:p,onClose:()=>g(!1),onSave:F,onDelete:U,event:y,date:v,isLoading:u})]})},HN="anuncios",Dwe=async()=>{try{const e=tr(Lt(tn,HN),Gr("fechaPublicacion","desc"));return(await Za(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},Rwe=async e=>{try{return{id:(await Zn(Lt(tn,HN),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},Pwe=async(e,t)=>{try{const r=mr(tn,HN,e);await vh(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},Lwe=async e=>{try{const t=mr(tn,HN,e);await Is(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},J9=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Mwe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=T.useState({tipo:"Todos",cursos:[]}),f=T.useCallback(async()=>{a(!0);try{const w=await Dwe();r(w),i(null)}catch(w){console.error("Error al cargar anuncios desde Firestore",w),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);T.useEffect(()=>{f()},[f]);const h=w=>{const{name:_,value:F}=w.target;l(U=>({...U,[_]:F}))},p=w=>{d({tipo:w,cursos:w==="Cursos"?[]:void 0})},g=w=>{d(_=>{var U;if(_.tipo!=="Cursos")return _;const F=(U=_.cursos)!=null&&U.includes(w)?_.cursos.filter(D=>D!==w):[..._.cursos||[],w];return{..._,cursos:F}})},v=async w=>{if(w.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await Rwe(_),await f(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},b=async w=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await Lwe(w),await f()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},y=async w=>{try{const _=t.find(F=>F.id===w);_&&(await Pwe(w,{destacado:!_.destacado}),await f())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},C=T.useMemo(()=>[...t].sort((w,_)=>w.destacado&&!_.destacado?-1:!w.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(w.fechaPublicacion).getTime()),[t]),S=T.useMemo(()=>{const w=e.profile,_=e.curso;return C.filter(F=>{if(w===Yt.SUBDIRECCION)return!0;if(!F.destinatarios)return w!==Yt.ESTUDIANTE;const{tipo:U,cursos:D}=F.destinatarios;return U==="Todos"||U==="Profesores"&&w===Yt.PROFESORADO||U==="Coordinacin TP"&&w===Yt.COORDINACION_TP?!0:U==="Cursos"?w===Yt.ESTUDIANTE?D==null?void 0:D.includes(_||""):!0:!1})},[C,e]),I=w=>e.profile===Yt.ESTUDIANTE?!1:e.profile===Yt.SUBDIRECCION||e.profile===w.profileCreador,N=()=>e.profile===Yt.SUBDIRECCION||e.profile===Yt.PROFESORADO,B="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Yt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:B})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(w=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:w,checked:u.tipo===w,onChange:()=>p(w),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:w.replace("Coordinacin TP","Coord. TP")})]},w))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ns.map(w=>{var _;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(w),onChange:()=>g(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w})]},w)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:B})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!n&&S.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&S.length>0&&S.map((w,_)=>{const F=J9[_%J9.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${F.bg} ${F.rotate}`,children:[w.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:w.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:w.mensaje}),w.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:w.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:w.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(w.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[N()&&c.jsx("button",{onClick:()=>y(w.id),title:w.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${w.destacado?"opacity-100":"opacity-30"}`,children:""})}),I(w)&&c.jsx("button",{onClick:()=>b(w.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},w.id)})})]})},yZ="api_logs",Uwe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:hr.fromDate(new Date)};await Zn(Lt(_t,yZ),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},Qwe=e=>{const t=tr(Lt(_t,yZ),Gr("timestamp","desc"));return xr(t,n=>{const a=n.docs.map(s=>{var o,l;const i=s.data();return{id:s.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},sm=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}Uwe(e,t)},MD="actas_de_reunion",Hwe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},Vwe=e=>{const t=tr(Lt(_t,MD),Gr("fechaCreacion","desc"));return xr(t,n=>{const a=n.docs.map(s=>Hwe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},zwe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:hr.fromDate(new Date(e.fechaCreacion))};return(await Zn(Lt(_t,MD),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},$we=async e=>{try{const t=mr(_t,MD,e);await Is(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},wZ=window.SpeechRecognition||window.webkitSpeechRecognition,Z9=!!wZ,Gwe=({isListening:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Kwe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(null),[s,i]=T.useState({tipoReunion:ZB[0],asistentes:"",textoReunion:""}),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[f,h]=T.useState(!0),[p,g]=T.useState(null),v=T.useRef(null);T.useEffect(()=>{h(!0);const w=Vwe(_=>{r(_),!n&&_.length>0&&a(_[0]),h(!1)});return()=>w()},[n]);const b=w=>{const{name:_,value:F}=w.target;i(U=>({...U,[_]:F}))},y=T.useCallback(()=>{var w;if(!Z9){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(w=v.current)==null||w.stop():(v.current=new wZ,v.current.lang="es-CL",v.current.continuous=!0,v.current.interimResults=!0,v.current.onresult=_=>{let F="";for(let U=_.resultIndex;U<_.results.length;++U)_.results[U].isFinal&&(F+=_.results[U][0].transcript+". ");i(U=>({...U,textoReunion:U.textoReunion+F}))},v.current.onstart=()=>l(!0),v.current.onend=()=>l(!1),v.current.onerror=_=>{console.error("Speech recognition error",_.error),g(`Error de reconocimiento: ${_.error}`),l(!1)},v.current.start())},[o]),C=async w=>{w.preventDefault();const{tipoReunion:_,asistentes:F,textoReunion:U}=s;if(!_||!F.trim()||!U.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{sm("Generador de Actas");const D="",L=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),R=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${U}"
                
                Asistentes a la reunin para referencia de nombres: ${F}
            `,H=(await(await L.generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(H),q={fechaCreacion:new Date().toISOString(),...s,...z},re=await zwe(q,e);i({tipoReunion:ZB[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{d(!1)}},S=async w=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await $we(w),(n==null?void 0:n.id)===w&&a(t.length>1?t[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},I=w=>{a(w)},N=w=>w.temas||w.acuerdos||w.plazos||w.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),w.temas&&w.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.temas.map((F,U)=>c.jsx("li",{children:F},U))})]}),w.acuerdos&&w.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.acuerdos.map((F,U)=>c.jsx("li",{children:F},U))})]}),w.plazos&&w.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.plazos.map((F,U)=>c.jsx("li",{children:F},U))})]}),w.responsables&&w.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.responsables.map((F,U)=>c.jsx("li",{children:F},U))})]})]}):null,B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),c.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:B,children:ZB.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:B}),Z9&&c.jsx("button",{type:"button",onClick:y,title:o?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(Gwe,{isListening:o})})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(w=>c.jsxs("button",{onClick:()=>I(w),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===w.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(w.fechaCreacion).toLocaleDateString("es-CL")})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>S(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((w,_)=>w.trim()&&c.jsx("li",{children:w.trim()},_))}),N(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},qwe="modulepreload",Wwe=function(e){return"/"+e},eQ={},Sx=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=Wwe(u),u in eQ)return;eQ[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":qwe,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var Wo=Uint8Array,Ic=Uint16Array,UD=Int32Array,VN=new Wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zN=new Wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nF=new Wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EZ=function(e,t){for(var r=new Ic(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new UD(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},CZ=EZ(VN,2),_Z=CZ.b,aF=CZ.r;_Z[28]=258,aF[258]=28;var SZ=EZ(zN,0),Xwe=SZ.b,tQ=SZ.r,sF=new Ic(32768);for(var Ua=0;Ua<32768;++Ua){var c0=(Ua&43690)>>1|(Ua&21845)<<1;c0=(c0&52428)>>2|(c0&13107)<<2,c0=(c0&61680)>>4|(c0&3855)<<4,sF[Ua]=((c0&65280)>>8|(c0&255)<<8)>>1}var MA=function(e,t,r){for(var n=e.length,a=0,s=new Ic(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Ic(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Ic(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[sF[f]>>l]=u}else for(o=new Ic(n),a=0;a<n;++a)e[a]&&(o[a]=sF[i[e[a]-1]++]>>15-e[a]);return o},im=new Wo(288);for(var Ua=0;Ua<144;++Ua)im[Ua]=8;for(var Ua=144;Ua<256;++Ua)im[Ua]=9;for(var Ua=256;Ua<280;++Ua)im[Ua]=7;for(var Ua=280;Ua<288;++Ua)im[Ua]=8;var rw=new Wo(32);for(var Ua=0;Ua<32;++Ua)rw[Ua]=5;var Ywe=MA(im,9,0),Jwe=MA(im,9,1),Zwe=MA(rw,5,0),e2e=MA(rw,5,1),tT=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ld=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},rT=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},QD=function(e){return(e+7)/8|0},NZ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Wo(e.subarray(t,r))},t2e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ad=function(e,t,r){var n=new Error(t||t2e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ad),!r)throw n;return n},r2e=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Wo(0);var i=!r,o=i||t.i!=2,l=t.i;i&&(r=new Wo(a*3));var u=function(Ie){var ne=r.length;if(Ie>ne){var Se=new Wo(Math.max(ne*2,Ie));Se.set(r),r=Se}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,v=t.m,b=t.n,y=a*8;do{if(!p){d=ld(e,f,1);var C=ld(e,f+1,3);if(f+=3,C)if(C==1)p=Jwe,g=e2e,v=9,b=5;else if(C==2){var B=ld(e,f,31)+257,w=ld(e,f+10,15)+4,_=B+ld(e,f+5,31)+1;f+=14;for(var F=new Wo(_),U=new Wo(19),D=0;D<w;++D)U[nF[D]]=ld(e,f+D*3,7);f+=w*3;for(var k=tT(U),L=(1<<k)-1,R=MA(U,k,1),D=0;D<_;){var X=R[ld(e,f,L)];f+=X&15;var S=X>>4;if(S<16)F[D++]=S;else{var V=0,Z=0;for(S==16?(Z=3+ld(e,f,3),f+=2,V=F[D-1]):S==17?(Z=3+ld(e,f,7),f+=3):S==18&&(Z=11+ld(e,f,127),f+=7);Z--;)F[D++]=V}}var H=F.subarray(0,B),z=F.subarray(B);v=tT(H),b=tT(z),p=MA(H,v,1),g=MA(z,b,1)}else Ad(1);else{var S=QD(f)+4,I=e[S-4]|e[S-3]<<8,N=S+I;if(N>a){l&&Ad(0);break}o&&u(h+I),r.set(e.subarray(S,N),h),t.b=h+=I,t.p=f=N*8,t.f=d;continue}if(f>y){l&&Ad(0);break}}o&&u(h+131072);for(var q=(1<<v)-1,re=(1<<b)-1,P=f;;P=f){var V=p[rT(e,f)&q],K=V>>4;if(f+=V&15,f>y){l&&Ad(0);break}if(V||Ad(2),K<256)r[h++]=K;else if(K==256){P=f,p=null;break}else{var Y=K-254;if(K>264){var D=K-257,te=VN[D];Y=ld(e,f,(1<<te)-1)+_Z[D],f+=te}var ie=g[rT(e,f)&re],Ae=ie>>4;ie||Ad(3),f+=ie&15;var z=Xwe[Ae];if(Ae>3){var te=zN[Ae];z+=rT(e,f)&(1<<te)-1,f+=te}if(f>y){l&&Ad(0);break}o&&u(h+131072);var oe=h+Y;if(h<z){var ce=s-z,pe=Math.min(z,oe);for(ce+h<0&&Ad(3);h<pe;++h)r[h]=n[ce+h]}for(;h<oe;++h)r[h]=r[h-z]}}t.l=p,t.p=P,t.b=h,t.f=d,p&&(d=1,t.m=v,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?NZ(r,0,h):r.subarray(0,h)},Nf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},xb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},nT=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:BZ,l:0};if(a==1){var i=new Wo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(N,B){return N.f-B.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Ic(h+1),g=iF(r[d-1],p,0);if(g>t){var n=0,v=0,b=g-t,y=1<<b;for(s.sort(function(B,w){return p[w.s]-p[B.s]||B.f-w.f});n<a;++n){var C=s[n].s;if(p[C]>t)v+=y-(1<<g-p[C]),p[C]=t;else break}for(v>>=b;v>0;){var S=s[n].s;p[S]<t?v-=1<<t-p[S]++-1:++n}for(;n>=0&&v;--n){var I=s[n].s;p[I]==t&&(--p[I],++v)}g=t}return{t:new Wo(p),l:g}},iF=function(e,t,r){return e.s==-1?Math.max(iF(e.l,t,r+1),iF(e.r,t,r+1)):t[e.s]=r},rQ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ic(++t),n=0,a=e[0],s=1,i=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},bb=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},kZ=function(e,t,r){var n=r.length,a=QD(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},nQ=function(e,t,r,n,a,s,i,o,l,u,d){Nf(t,d++,r),++a[256];for(var f=nT(a,15),h=f.t,p=f.l,g=nT(s,15),v=g.t,b=g.l,y=rQ(h),C=y.c,S=y.n,I=rQ(v),N=I.c,B=I.n,w=new Ic(19),_=0;_<C.length;++_)++w[C[_]&31];for(var _=0;_<N.length;++_)++w[N[_]&31];for(var F=nT(w,7),U=F.t,D=F.l,k=19;k>4&&!U[nF[k-1]];--k);var L=u+5<<3,R=bb(a,im)+bb(s,rw)+i,X=bb(a,h)+bb(s,v)+i+14+3*k+bb(w,U)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&L<=R&&L<=X)return kZ(t,d,e.subarray(l,l+u));var V,Z,H,z;if(Nf(t,d,1+(X<R)),d+=2,X<R){V=MA(h,p,0),Z=h,H=MA(v,b,0),z=v;var q=MA(U,D,0);Nf(t,d,S-257),Nf(t,d+5,B-1),Nf(t,d+10,k-4),d+=14;for(var _=0;_<k;++_)Nf(t,d+3*_,U[nF[_]]);d+=3*k;for(var re=[C,N],P=0;P<2;++P)for(var K=re[P],_=0;_<K.length;++_){var Y=K[_]&31;Nf(t,d,q[Y]),d+=U[Y],Y>15&&(Nf(t,d,K[_]>>5&127),d+=K[_]>>12)}}else V=Ywe,Z=im,H=Zwe,z=rw;for(var _=0;_<o;++_){var te=n[_];if(te>255){var Y=te>>18&31;xb(t,d,V[Y+257]),d+=Z[Y+257],Y>7&&(Nf(t,d,te>>23&31),d+=VN[Y]);var ie=te&31;xb(t,d,H[ie]),d+=z[ie],ie>3&&(xb(t,d,te>>5&8191),d+=zN[ie])}else xb(t,d,V[te]),d+=Z[te]}return xb(t,d,V[256]),d+Z[256]},n2e=new UD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BZ=new Wo(0),a2e=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Wo(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var f=n2e[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,v=s.p||new Ic(32768),b=s.h||new Ic(g+1),y=Math.ceil(r/3),C=2*y,S=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<C)&g},I=new UD(25e3),N=new Ic(288),B=new Ic(32),w=0,_=0,F=s.i||0,U=0,D=s.w||0,k=0;F+2<i;++F){var L=S(F),R=F&32767,X=b[L];if(v[R]=X,b[L]=R,D<=F){var V=i-F;if((w>7e3||U>24576)&&(V>423||!u)){d=nQ(e,l,0,I,N,B,_,U,k,F-k,d),U=w=_=0,k=F;for(var Z=0;Z<286;++Z)N[Z]=0;for(var Z=0;Z<30;++Z)B[Z]=0}var H=2,z=0,q=p,re=R-X&32767;if(V>2&&L==S(F-re))for(var P=Math.min(h,V)-1,K=Math.min(32767,F),Y=Math.min(258,V);re<=K&&--q&&R!=X;){if(e[F+H]==e[F+H-re]){for(var te=0;te<Y&&e[F+te]==e[F+te-re];++te);if(te>H){if(H=te,z=re,te>P)break;for(var ie=Math.min(re,te-2),Ae=0,Z=0;Z<ie;++Z){var oe=F-re+Z&32767,ce=v[oe],pe=oe-ce&32767;pe>Ae&&(Ae=pe,X=oe)}}}R=X,X=v[R],re+=R-X&32767}if(z){I[U++]=268435456|aF[H]<<18|tQ[z];var Ie=aF[H]&31,ne=tQ[z]&31;_+=VN[Ie]+zN[ne],++N[257+Ie],++B[ne],D=F+H,++w}else I[U++]=e[F],++N[e[F]]}}for(F=Math.max(F,D);F<i;++F)I[U++]=e[F],++N[e[F]];d=nQ(e,l,u,I,N,B,_,U,k,F-k,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=b,s.p=v,s.i=F,s.w=D)}else{for(var F=s.w||0;F<i+u;F+=65535){var Se=F+65535;Se>=i&&(l[d/8|0]=u,Se=i),d=kZ(l,d+1,e.subarray(F,Se))}s.i=i}return NZ(o,0,n+QD(d)+a)},TZ=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},s2e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Wo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return a2e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},jZ=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},i2e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=TZ();a.p(t.dictionary),jZ(e,2,a.d())}},o2e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ad(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ad(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function oF(e,t){t||(t={});var r=TZ();r.p(e);var n=s2e(e,t,t.dictionary?6:2,4);return i2e(n,t),jZ(n,n.length-4,r.d()),n}function l2e(e,t){return r2e(e.subarray(o2e(e),-4),{i:2},t,t)}var c2e=typeof TextDecoder<"u"&&new TextDecoder,u2e=0;try{c2e.decode(BZ,{stream:!0}),u2e=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function aT(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Sa={log:aT,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):aT.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):aT(e))}};function sT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){tp(n.response,t,r)},n.onerror=function(){Sa.error("could not download file")},n.send()}function aQ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $E(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var wy,lF,tp=Mr.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Mr.URL||Mr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?aQ(a.href)?sT(e,t,r):$E(a,a.target="_blank"):$E(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){$E(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(aQ(e))sT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){$E(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return sT(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var l=Mr.URL||Mr.webkitURL,u=l.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function IZ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function iT(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Fo(r,n,a,s,t[0],7,-680876936),s=Fo(s,r,n,a,t[1],12,-389564586),a=Fo(a,s,r,n,t[2],17,606105819),n=Fo(n,a,s,r,t[3],22,-1044525330),r=Fo(r,n,a,s,t[4],7,-176418897),s=Fo(s,r,n,a,t[5],12,1200080426),a=Fo(a,s,r,n,t[6],17,-1473231341),n=Fo(n,a,s,r,t[7],22,-45705983),r=Fo(r,n,a,s,t[8],7,1770035416),s=Fo(s,r,n,a,t[9],12,-1958414417),a=Fo(a,s,r,n,t[10],17,-42063),n=Fo(n,a,s,r,t[11],22,-1990404162),r=Fo(r,n,a,s,t[12],7,1804603682),s=Fo(s,r,n,a,t[13],12,-40341101),a=Fo(a,s,r,n,t[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Oo(s,r,n,a,t[6],9,-1069501632),a=Oo(a,s,r,n,t[11],14,643717713),n=Oo(n,a,s,r,t[0],20,-373897302),r=Oo(r,n,a,s,t[5],5,-701558691),s=Oo(s,r,n,a,t[10],9,38016083),a=Oo(a,s,r,n,t[15],14,-660478335),n=Oo(n,a,s,r,t[4],20,-405537848),r=Oo(r,n,a,s,t[9],5,568446438),s=Oo(s,r,n,a,t[14],9,-1019803690),a=Oo(a,s,r,n,t[3],14,-187363961),n=Oo(n,a,s,r,t[8],20,1163531501),r=Oo(r,n,a,s,t[13],5,-1444681467),s=Oo(s,r,n,a,t[2],9,-51403784),a=Oo(a,s,r,n,t[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Do(s,r,n,a,t[8],11,-2022574463),a=Do(a,s,r,n,t[11],16,1839030562),n=Do(n,a,s,r,t[14],23,-35309556),r=Do(r,n,a,s,t[1],4,-1530992060),s=Do(s,r,n,a,t[4],11,1272893353),a=Do(a,s,r,n,t[7],16,-155497632),n=Do(n,a,s,r,t[10],23,-1094730640),r=Do(r,n,a,s,t[13],4,681279174),s=Do(s,r,n,a,t[0],11,-358537222),a=Do(a,s,r,n,t[3],16,-722521979),n=Do(n,a,s,r,t[6],23,76029189),r=Do(r,n,a,s,t[9],4,-640364487),s=Do(s,r,n,a,t[12],11,-421815835),a=Do(a,s,r,n,t[15],16,530742520),r=Ro(r,n=Do(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ro(s,r,n,a,t[7],10,1126891415),a=Ro(a,s,r,n,t[14],15,-1416354905),n=Ro(n,a,s,r,t[5],21,-57434055),r=Ro(r,n,a,s,t[12],6,1700485571),s=Ro(s,r,n,a,t[3],10,-1894986606),a=Ro(a,s,r,n,t[10],15,-1051523),n=Ro(n,a,s,r,t[1],21,-2054922799),r=Ro(r,n,a,s,t[8],6,1873313359),s=Ro(s,r,n,a,t[15],10,-30611744),a=Ro(a,s,r,n,t[6],15,-1560198380),n=Ro(n,a,s,r,t[13],21,1309151649),r=Ro(r,n,a,s,t[4],6,-145523070),s=Ro(s,r,n,a,t[11],10,-1120210379),a=Ro(a,s,r,n,t[2],15,718787259),n=Ro(n,a,s,r,t[9],21,-343485551),e[0]=T0(r,e[0]),e[1]=T0(n,e[1]),e[2]=T0(a,e[2]),e[3]=T0(s,e[3])}function $N(e,t,r,n,a,s){return t=T0(T0(t,e),T0(n,s)),T0(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,s,i){return $N(t&r|~t&n,e,t,a,s,i)}function Oo(e,t,r,n,a,s,i){return $N(t&n|r&~n,e,t,a,s,i)}function Do(e,t,r,n,a,s,i){return $N(t^r^n,e,t,a,s,i)}function Ro(e,t,r,n,a,s,i){return $N(r^(t|~n),e,t,a,s,i)}function FZ(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)iT(n,d2e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(iT(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,iT(n,a),n}function d2e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}wy=Mr.atob.bind(Mr),lF=Mr.btoa.bind(Mr);var sQ="0123456789abcdef".split("");function A2e(e){for(var t="",r=0;r<4;r++)t+=sQ[e>>8*r+4&15]+sQ[e>>8*r&15];return t}function f2e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function cF(e){return FZ(e).map(f2e).join("")}var h2e=function(e){for(var t=0;t<e.length;t++)e[t]=A2e(e[t]);return e.join("")}(FZ("hello"))!="5d41402abc4b2a76b9719d911017c592";function T0(e,t){if(h2e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function uF(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(l=0;l<f;l++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(l)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var iQ={print:4,modify:8,copy:16,"annot-forms":32};function kv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(iQ.perm!==void 0)throw new Error("Invalid permission: "+o);a+=iQ[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=cF(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=uF(this.encryptionKey,this.padding)}function Bv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function oQ(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Mr.console&&Sa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function bS(e){if(!(this instanceof bS))return new bS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function OZ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function op(e,t,r,n,a){if(!(this instanceof op))return new op(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,OZ.call(this,n,a)}function Rv(e,t,r,n,a){if(!(this instanceof Rv))return new Rv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,OZ.call(this,n,a)}function gr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=oQ;var g="1.3",v=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(W){g=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};a=a||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},S=C.COMPAT;function I(){this.saveGraphicsState(),he(new $t(bt,0,0,-bt,0,Di()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",S=C.ADVANCED}function N(){this.restoreGraphicsState(),u="S",S=C.COMPAT}var B=p.__private__.combineFontStyleAndFontWeight=function(W,de){if(W=="bold"&&de=="normal"||W=="bold"&&de==400||W=="normal"&&de=="italic"||W=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(W=de==400||de==="normal"?W==="italic"?"italic":"normal":de!=700&&de!=="bold"||W!=="normal"?(de==700?"bold":de)+""+W:"bold"),W};p.advancedAPI=function(W){var de=S===C.COMPAT;return de&&I.call(this),typeof W!="function"||(W(this),de&&N.call(this)),this},p.compatAPI=function(W){var de=S===C.ADVANCED;return de&&N.call(this),typeof W!="function"||(W(this),de&&I.call(this)),this},p.isAdvancedAPI=function(){return S===C.ADVANCED};var w,_=function(W){if(S!==C.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=p.roundToPrecision=p.__private__.roundToPrecision=function(W,de){var Fe=t||de;if(isNaN(W)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(Fe).replace(/0+$/,"")};w=p.hpf=p.__private__.hpf=typeof l=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,l)}:l==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,16)};var U=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return F(W,2)},D=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return F(W,3)},k=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return S===C.COMPAT?W*bt:S===C.ADVANCED?W:void 0},L=function(W){return S===C.COMPAT?Di()-W:S===C.ADVANCED?W:void 0},R=function(W){return k(L(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var X,V="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return V},H=p.__private__.setFileId=function(W){return V=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ua=new kv(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};p.setFileId=function(W){return H(W),this},p.getFileId=function(){return Z()};var z=p.__private__.convertDateToPDFDate=function(W){var de=W.getTimezoneOffset(),Fe=de<0?"+":"-",Le=Math.floor(Math.abs(de/60)),Ge=Math.abs(de%60),xt=[Fe,Y(Le),"'",Y(Ge),"'"].join("");return["D:",W.getFullYear(),Y(W.getMonth()+1),Y(W.getDate()),Y(W.getHours()),Y(W.getMinutes()),Y(W.getSeconds()),xt].join("")},q=p.__private__.convertPDFDateToDate=function(W){var de=parseInt(W.substr(2,4),10),Fe=parseInt(W.substr(6,2),10)-1,Le=parseInt(W.substr(8,2),10),Ge=parseInt(W.substr(10,2),10),xt=parseInt(W.substr(12,2),10),Pt=parseInt(W.substr(14,2),10);return new Date(de,Fe,Le,Ge,xt,Pt,0)},re=p.__private__.setCreationDate=function(W){var de;if(W===void 0&&(W=new Date),W instanceof Date)de=z(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=W}return X=de},P=p.__private__.getCreationDate=function(W){var de=X;return W==="jsDate"&&(de=q(X)),de};p.setCreationDate=function(W){return re(W),this},p.getCreationDate=function(W){return P(W)};var K,Y=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},te=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},ie=0,Ae=[],oe=[],ce=0,pe=[],Ie=[],ne=!1,Se=oe,De=function(){ie=0,ce=0,oe=[],Ae=[],pe=[],Ee=ra(),Ce=ra()};p.__private__.setCustomOutputDestination=function(W){ne=!0,Se=W};var _e=function(W){ne||(Se=W)};p.__private__.resetCustomOutputDestination=function(){ne=!1,Se=oe};var he=p.__private__.out=function(W){return W=W.toString(),ce+=W.length+1,Se.push(W),Se},je=p.__private__.write=function(W){return he(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(W){for(var de=W.length,Fe=new ArrayBuffer(de),Le=new Uint8Array(Fe);de--;)Le[de]=W.charCodeAt(de);return Fe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return ye=S===C.ADVANCED?W/bt:W,this};var Oe,Pe=p.__private__.getFontSize=p.getFontSize=function(){return S===C.COMPAT?ye:ye*bt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return qe=W,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ot=p.__private__.setZoomMode=function(W){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))Oe=W;else if(isNaN(W)){if(de.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');Oe=W}else Oe=parseInt(W,10)};p.__private__.getZoomMode=function(){return Oe};var mt,Tt=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');Ze=W};p.__private__.getPageMode=function(){return Ze};var Mt=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');mt=W};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(W,de,Fe){return ot(W),Mt(de),Tt(Fe),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(Ot).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[W]},p.__private__.getDocumentProperties=function(){return Ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var de in Ot)Ot.hasOwnProperty(de)&&W[de]&&(Ot[de]=W[de]);return this},p.__private__.setDocumentProperty=function(W,de){if(Object.keys(Ot).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[W]=de};var Qt,bt,Nr,rr,an,Cr={},Vr={},Fn=[],Ir={},vt={},pt={},Je={},gt=null,dt=0,Dt=[],zt=new oQ(p),Pr=e.hotfixes||[],Xr={},gn={},vn=[],$t=function W(de,Fe,Le,Ge,xt,Pt){if(!(this instanceof W))return new W(de,Fe,Le,Ge,xt,Pt);isNaN(de)&&(de=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ge)&&(Ge=1),isNaN(xt)&&(xt=0),isNaN(Pt)&&(Pt=0),this._matrix=[de,Fe,Le,Ge,xt,Pt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(w).join(W)},$t.prototype.multiply=function(W){var de=W.sx*this.sx+W.shy*this.shx,Fe=W.sx*this.shy+W.shy*this.sy,Le=W.shx*this.sx+W.sy*this.shx,Ge=W.shx*this.shy+W.sy*this.sy,xt=W.tx*this.sx+W.ty*this.shx+this.tx,Pt=W.tx*this.shy+W.ty*this.sy+this.ty;return new $t(de,Fe,Le,Ge,xt,Pt)},$t.prototype.decompose=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty,Pt=Math.sqrt(W*W+de*de),Zt=(W/=Pt)*Fe+(de/=Pt)*Le;Fe-=W*Zt,Le-=de*Zt;var O=Math.sqrt(Fe*Fe+Le*Le);return Zt/=O,W*(Le/=O)<de*(Fe/=O)&&(W=-W,de=-de,Zt=-Zt,Pt=-Pt),{scale:new $t(Pt,0,0,O,0,0),translate:new $t(1,0,0,1,Ge,xt),rotate:new $t(W,de,-de,W,0,0),skew:new $t(1,0,Zt,1,0,0)}},$t.prototype.toString=function(W){return this.join(" ")},$t.prototype.inversed=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty,Pt=1/(W*Le-de*Fe),Zt=Le*Pt,O=-de*Pt,ee=-Fe*Pt,se=W*Pt;return new $t(Zt,O,ee,se,-Zt*Ge-ee*xt,-O*Ge-se*xt)},$t.prototype.applyToPoint=function(W){var de=W.x*this.sx+W.y*this.shx+this.tx,Fe=W.x*this.shy+W.y*this.sy+this.ty;return new Vu(de,Fe)},$t.prototype.applyToRectangle=function(W){var de=this.applyToPoint(W),Fe=this.applyToPoint(new Vu(W.x+W.w,W.y+W.h));return new Hd(de.x,de.y,Fe.x-de.x,Fe.y-de.y)},$t.prototype.clone=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty;return new $t(W,de,Fe,Le,Ge,xt)},p.Matrix=$t;var rn=p.matrixMult=function(W,de){return de.multiply(W)},en=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=en;var cr=function(W,de){if(!vt[W]){var Fe=(de instanceof op?"Sh":"P")+(Object.keys(Ir).length+1).toString(10);de.id=Fe,vt[W]=Fe,Ir[Fe]=de,zt.publish("addPattern",de)}};p.ShadingPattern=op,p.TilingPattern=Rv,p.addShadingPattern=function(W,de){return _("addShadingPattern()"),cr(W,de),this},p.beginTilingPattern=function(W){_("beginTilingPattern()"),Yc(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,de){_("endTilingPattern()"),de.stream=Ie[K].join(`
`),cr(W,de),zt.publish("endTilingPattern",de),vn.pop().restore()};var Yr=p.__private__.newObject=function(){var W=ra();return fe(W,!0),W},ra=p.__private__.newObjectDeferred=function(){return ie++,Ae[ie]=function(){return ce},ie},fe=function(W,de){return de=typeof de=="boolean"&&de,Ae[W]=ce,de&&he(W+" 0 obj"),W},Be=p.__private__.newAdditionalObject=function(){var W={objId:ra(),content:""};return pe.push(W),W},Ee=ra(),Ce=ra(),Ne=p.__private__.decodeColorString=function(W){var de=W.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var Fe=parseFloat(de[0]);de=[Fe,Fe,Fe,"r"]}for(var Le="#",Ge=0;Ge<3;Ge++)Le+=("0"+Math.floor(255*parseFloat(de[Ge])).toString(16)).slice(-2);return Le},Te=p.__private__.encodeColorString=function(W){var de;typeof W=="string"&&(W={ch1:W});var Fe=W.ch1,Le=W.ch2,Ge=W.ch3,xt=W.ch4,Pt=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Zt=new IZ(Fe);if(Zt.ok)Fe=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var O=parseInt(Fe.substr(1),16);Fe=O>>16&255,Le=O>>8&255,Ge=255&O}if(Le===void 0||xt===void 0&&Fe===Le&&Le===Ge)if(typeof Fe=="string")de=Fe+" "+Pt[0];else switch(W.precision){case 2:de=U(Fe/255)+" "+Pt[0];break;case 3:default:de=D(Fe/255)+" "+Pt[0]}else if(xt===void 0||ga(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return de=["1.","1.","1.",Pt[1]].join(" ");if(typeof Fe=="string")de=[Fe,Le,Ge,Pt[1]].join(" ");else switch(W.precision){case 2:de=[U(Fe/255),U(Le/255),U(Ge/255),Pt[1]].join(" ");break;default:case 3:de=[D(Fe/255),D(Le/255),D(Ge/255),Pt[1]].join(" ")}}else if(typeof Fe=="string")de=[Fe,Le,Ge,xt,Pt[2]].join(" ");else switch(W.precision){case 2:de=[U(Fe),U(Le),U(Ge),U(xt),Pt[2]].join(" ");break;case 3:default:de=[D(Fe),D(Le),D(Ge),D(xt),Pt[2]].join(" ")}return de},Ye=p.__private__.getFilters=function(){return i},ut=p.__private__.putStream=function(W){var de=(W=W||{}).data||"",Fe=W.filters||Ye(),Le=W.alreadyAppliedFilters||[],Ge=W.addLength1||!1,xt=de.length,Pt=W.objectId,Zt=function(Tr){return Tr};if(d!==null&&Pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ua.encryptor(Pt,0));var O={};Fe===!0&&(Fe=["FlateEncode"]);var ee=W.additionalKeyValues||[],se=(O=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(de,Fe):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(O.data.length!==0&&(ee.push({key:"Length",value:O.data.length}),Ge===!0&&ee.push({key:"Length1",value:xt})),se.length!=0)if(se.split("/").length-1==1)ee.push({key:"Filter",value:se});else{ee.push({key:"Filter",value:"["+se+"]"});for(var xe=0;xe<ee.length;xe+=1)if(ee[xe].key==="DecodeParms"){for(var ze=[],st=0;st<O.reverseChain.split("/").length-1;st+=1)ze.push("null");ze.push(ee[xe].value),ee[xe].value="["+ze.join(" ")+"]"}}he("<<");for(var Ut=0;Ut<ee.length;Ut++)he("/"+ee[Ut].key+" "+ee[Ut].value);he(">>"),O.data.length!==0&&(he("stream"),he(Zt(O.data)),he("endstream"))},$e=p.__private__.putPage=function(W){var de=W.number,Fe=W.data,Le=W.objId,Ge=W.contentsObjId;fe(Le,!0),he("<</Type /Page"),he("/Parent "+W.rootDictionaryObjId+" 0 R"),he("/Resources "+W.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(w(W.mediaBox.bottomLeftX))+" "+parseFloat(w(W.mediaBox.bottomLeftY))+" "+w(W.mediaBox.topRightX)+" "+w(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&he("/CropBox ["+w(W.cropBox.bottomLeftX)+" "+w(W.cropBox.bottomLeftY)+" "+w(W.cropBox.topRightX)+" "+w(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&he("/BleedBox ["+w(W.bleedBox.bottomLeftX)+" "+w(W.bleedBox.bottomLeftY)+" "+w(W.bleedBox.topRightX)+" "+w(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&he("/TrimBox ["+w(W.trimBox.bottomLeftX)+" "+w(W.trimBox.bottomLeftY)+" "+w(W.trimBox.topRightX)+" "+w(W.trimBox.topRightY)+"]"),W.artBox!==null&&he("/ArtBox ["+w(W.artBox.bottomLeftX)+" "+w(W.artBox.bottomLeftY)+" "+w(W.artBox.topRightX)+" "+w(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&he("/UserUnit "+W.userUnit),zt.publish("putPage",{objId:Le,pageContext:Dt[de],pageNumber:de,page:Fe}),he("/Contents "+Ge+" 0 R"),he(">>"),he("endobj");var xt=Fe.join(`
`);return S===C.ADVANCED&&(xt+=`
Q`),fe(Ge,!0),ut({data:xt,filters:Ye(),objectId:Ge}),he("endobj"),Le},tt=p.__private__.putPages=function(){var W,de,Fe=[];for(W=1;W<=dt;W++)Dt[W].objId=ra(),Dt[W].contentsObjId=ra();for(W=1;W<=dt;W++)Fe.push($e({number:W,data:Ie[W],objId:Dt[W].objId,contentsObjId:Dt[W].contentsObjId,mediaBox:Dt[W].mediaBox,cropBox:Dt[W].cropBox,bleedBox:Dt[W].bleedBox,trimBox:Dt[W].trimBox,artBox:Dt[W].artBox,userUnit:Dt[W].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Ce}));fe(Ee,!0),he("<</Type /Pages");var Le="/Kids [";for(de=0;de<dt;de++)Le+=Fe[de]+" 0 R ";he(Le+"]"),he("/Count "+dt),he(">>"),he("endobj"),zt.publish("postPutPages")},at=function(W){zt.publish("putFont",{font:W,out:he,newObject:Yr,putStream:ut}),W.isAlreadyPutted!==!0&&(W.objectNumber=Yr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+Bv(W.postScriptName)),he("/Subtype /Type1"),typeof W.encoding=="string"&&he("/Encoding /"+W.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},jt=function(){for(var W in Cr)Cr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&at(Cr[W])},Vt=function(W){W.objectNumber=Yr();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[w(W.x),w(W.y),w(W.x+W.width),w(W.y+W.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var Fe=W.pages[1].join(`
`);ut({data:Fe,additionalKeyValues:de,objectId:W.objectNumber}),he("endobj")},Jt=function(){for(var W in Xr)Xr.hasOwnProperty(W)&&Vt(Xr[W])},Ht=function(W,de){var Fe,Le=[],Ge=1/(de-1);for(Fe=0;Fe<1;Fe+=Ge)Le.push(Fe);if(Le.push(1),W[0].offset!=0){var xt={offset:0,color:W[0].color};W.unshift(xt)}if(W[W.length-1].offset!=1){var Pt={offset:1,color:W[W.length-1].color};W.push(Pt)}for(var Zt="",O=0,ee=0;ee<Le.length;ee++){for(Fe=Le[ee];Fe>W[O+1].offset;)O++;var se=W[O].offset,xe=(Fe-se)/(W[O+1].offset-se),ze=W[O].color,st=W[O+1].color;Zt+=te(Math.round((1-xe)*ze[0]+xe*st[0]).toString(16))+te(Math.round((1-xe)*ze[1]+xe*st[1]).toString(16))+te(Math.round((1-xe)*ze[2]+xe*st[2]).toString(16))}return Zt.trim()},Gt=function(W,de){de||(de=21);var Fe=Yr(),Le=Ht(W.colors,de),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+de+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut({data:Le,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),he("endobj"),W.objectNumber=Yr(),he("<< /ShadingType "+W.type),he("/ColorSpace /DeviceRGB");var xt="/Coords ["+w(parseFloat(W.coords[0]))+" "+w(parseFloat(W.coords[1]))+" ";W.type===2?xt+=w(parseFloat(W.coords[2]))+" "+w(parseFloat(W.coords[3])):xt+=w(parseFloat(W.coords[2]))+" "+w(parseFloat(W.coords[3]))+" "+w(parseFloat(W.coords[4]))+" "+w(parseFloat(W.coords[5])),he(xt+="]"),W.matrix&&he("/Matrix ["+W.matrix.toString()+"]"),he("/Function "+Fe+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},_r=function(W,de){var Fe=ra(),Le=Yr();de.push({resourcesOid:Fe,objectOid:Le}),W.objectNumber=Le;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+W.boundingBox.map(w).join(" ")+"]"}),Ge.push({key:"XStep",value:w(W.xStep)}),Ge.push({key:"YStep",value:w(W.yStep)}),Ge.push({key:"Resources",value:Fe+" 0 R"}),W.matrix&&Ge.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),ut({data:W.stream,additionalKeyValues:Ge,objectId:W.objectNumber}),he("endobj")},sn=function(W){var de;for(de in Ir)Ir.hasOwnProperty(de)&&(Ir[de]instanceof op?Gt(Ir[de]):Ir[de]instanceof Rv&&_r(Ir[de],W))},on=function(W){for(var de in W.objectNumber=Yr(),he("<<"),W)switch(de){case"opacity":he("/ca "+U(W[de]));break;case"stroke-opacity":he("/CA "+U(W[de]))}he(">>"),he("endobj")},An=function(){var W;for(W in pt)pt.hasOwnProperty(W)&&on(pt[W])},hs=function(){for(var W in he("/XObject <<"),Xr)Xr.hasOwnProperty(W)&&Xr[W].objectNumber>=0&&he("/"+W+" "+Xr[W].objectNumber+" 0 R");zt.publish("putXobjectDict"),he(">>")},bo=function(){ua.oid=Yr(),he("<<"),he("/Filter /Standard"),he("/V "+ua.v),he("/R "+ua.r),he("/U <"+ua.toHexString(ua.U)+">"),he("/O <"+ua.toHexString(ua.O)+">"),he("/P "+ua.P),he(">>"),he("endobj")},ms=function(){for(var W in he("/Font <<"),Cr)Cr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&he("/"+W+" "+Cr[W].objectNumber+" 0 R");he(">>")},Zs=function(){if(Object.keys(Ir).length>0){for(var W in he("/Shading <<"),Ir)Ir.hasOwnProperty(W)&&Ir[W]instanceof op&&Ir[W].objectNumber>=0&&he("/"+W+" "+Ir[W].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),he(">>")}},Fs=function(W){if(Object.keys(Ir).length>0){for(var de in he("/Pattern <<"),Ir)Ir.hasOwnProperty(de)&&Ir[de]instanceof p.TilingPattern&&Ir[de].objectNumber>=0&&Ir[de].objectNumber<W&&he("/"+de+" "+Ir[de].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),he(">>")}},gi=function(){if(Object.keys(pt).length>0){var W;for(W in he("/ExtGState <<"),pt)pt.hasOwnProperty(W)&&pt[W].objectNumber>=0&&he("/"+W+" "+pt[W].objectNumber+" 0 R");zt.publish("putGStateDict"),he(">>")}},xa=function(W){fe(W.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ms(),Zs(),Fs(W.objectOid),gi(),hs(),he(">>"),he("endobj")},ei=function(){var W=[];jt(),An(),Jt(),sn(W),zt.publish("putResources"),W.forEach(xa),xa({resourcesOid:Ce,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Pd=function(){zt.publish("putAdditionalObjects");for(var W=0;W<pe.length;W++){var de=pe[W];fe(de.objId,!0),he(de.content),he("endobj")}zt.publish("postPutAdditionalObjects")},Nh=function(W){Vr[W.fontName]=Vr[W.fontName]||{},Vr[W.fontName][W.fontStyle]=W.id},Hc=function(W,de,Fe,Le,Ge){var xt={id:"F"+(Object.keys(Cr).length+1).toString(10),postScriptName:W,fontName:de,fontStyle:Fe,encoding:Le,isStandardFont:Ge||!1,metadata:{}};return zt.publish("addFont",{font:xt,instance:this}),Cr[xt.id]=xt,Nh(xt),xt.id},YA=function(W){for(var de=0,Fe=Xe.length;de<Fe;de++){var Le=Hc.call(this,W[de][0],W[de][1],W[de][2],Xe[de][3],!0);f===!1&&(h[Le]=!0);var Ge=W[de][0].split("-");Nh({id:Le,fontName:Ge[0],fontStyle:Ge[1]||""})}zt.publish("addFonts",{fonts:Cr,dictionary:Vr})},vi=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(Le){var de=Le.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var Fe="Error in function "+de.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mr.console)throw new Error(Fe);Mr.console.error(Fe,Le),Mr.alert&&alert(Fe)}},W.foo.bar=W,W.foo},Ld=function(W,de){var Fe,Le,Ge,xt,Pt,Zt,O,ee,se;if(Ge=(de=de||{}).sourceEncoding||"Unicode",Pt=de.outputEncoding,(de.autoencode||Pt)&&Cr[Qt].metadata&&Cr[Qt].metadata[Ge]&&Cr[Qt].metadata[Ge].encoding&&(xt=Cr[Qt].metadata[Ge].encoding,!Pt&&Cr[Qt].encoding&&(Pt=Cr[Qt].encoding),!Pt&&xt.codePages&&(Pt=xt.codePages[0]),typeof Pt=="string"&&(Pt=xt[Pt]),Pt)){for(O=!1,Zt=[],Fe=0,Le=W.length;Fe<Le;Fe++)(ee=Pt[W.charCodeAt(Fe)])?Zt.push(String.fromCharCode(ee)):Zt.push(W[Fe]),Zt[Fe].charCodeAt(0)>>8&&(O=!0);W=Zt.join("")}for(Fe=W.length;O===void 0&&Fe!==0;)W.charCodeAt(Fe-1)>>8&&(O=!0),Fe--;if(!O)return W;for(Zt=de.noBOM?[]:[254,255],Fe=0,Le=W.length;Fe<Le;Fe++){if((se=(ee=W.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(se),Zt.push(ee-(se<<8))}return String.fromCharCode.apply(void 0,Zt)},On=p.__private__.pdfEscape=p.pdfEscape=function(W,de){return Ld(W,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(W){Ie[++dt]=[],Dt[dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},El(dt),_e(Ie[K])},Vc=function(W,de){var Fe,Le,Ge;switch(r=de||r,typeof W=="string"&&(Fe=y(W.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ge=Fe[1])),Array.isArray(W)&&(Le=W[0]*bt,Ge=W[1]*bt),isNaN(Le)&&(Le=a[0],Ge=a[1]),(Le>14400||Ge>14400)&&(Sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ge=Math.min(14400,Ge)),a=[Le,Ge],r.substr(0,1)){case"l":Ge>Le&&(a=[Ge,Le]);break;case"p":Le>Ge&&(a=[Ge,Le])}xi(a),tf(Kc),he(bi),rf!==0&&he(rf+" J"),Hu!==0&&he(Hu+" j"),zt.publish("addPage",{pageNumber:dt})},zc=function(W){W>0&&W<=dt&&(Ie.splice(W,1),Dt.splice(W,1),dt--,K>dt&&(K=dt),this.setPage(K))},El=function(W){W>0&&W<=dt&&(K=W)},Vn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ie.length-1},$c=function(W,de,Fe){var Le,Ge=void 0;return Fe=Fe||{},W=W!==void 0?W:Cr[Qt].fontName,de=de!==void 0?de:Cr[Qt].fontStyle,Le=W.toLowerCase(),Vr[Le]!==void 0&&Vr[Le][de]!==void 0?Ge=Vr[Le][de]:Vr[W]!==void 0&&Vr[W][de]!==void 0?Ge=Vr[W][de]:Fe.disableWarning===!1&&Sa.warn("Unable to look up font label for font '"+W+"', '"+de+"'. Refer to getFontList() for available fonts."),Ge||Fe.noFallback||(Ge=Vr.times[de])==null&&(Ge=Vr.times.normal),Ge},yo=p.__private__.putInfo=function(){var W=Yr(),de=function(Le){return Le};for(var Fe in d!==null&&(de=ua.encryptor(W,0)),he("<<"),he("/Producer ("+On(de("jsPDF "+gr.version))+")"),Ot)Ot.hasOwnProperty(Fe)&&Ot[Fe]&&he("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+On(de(Ot[Fe]))+")");he("/CreationDate ("+On(de(X))+")"),he(">>"),he("endobj")},rc=p.__private__.putCatalog=function(W){var de=(W=W||{}).rootDictionaryObjId||Ee;switch(Yr(),he("<<"),he("/Type /Catalog"),he("/Pages "+de+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+U(Oe)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Ze&&he("/PageMode /"+Ze),zt.publish("putCatalog"),he(">>"),he("endobj")},kh=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ie+1)),he("/Root "+ie+" 0 R"),he("/Info "+(ie-1)+" 0 R"),d!==null&&he("/Encrypt "+ua.oid+" 0 R"),he("/ID [ <"+V+"> <"+V+"> ]"),he(">>")},JA=p.__private__.putHeader=function(){he("%PDF-"+g),he("%")},ZA=p.__private__.putXRef=function(){var W="0000000000";he("xref"),he("0 "+(ie+1)),he("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof Ae[de]=="function"?he((W+Ae[de]()).slice(-10)+" 00000 n "):Ae[de]!==void 0?he((W+Ae[de]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},nc=p.__private__.buildDocument=function(){De(),_e(oe),zt.publish("buildDocument"),JA(),tt(),Pd(),ei(),d!==null&&bo(),yo(),rc();var W=ce;return ZA(),kh(),he("startxref"),he(""+W),he("%%EOF"),_e(Ie[K]),oe.join(`
`)},Md=p.__private__.getBlob=function(W){return new Blob([He(W)],{type:"application/pdf"})},ac=p.output=p.__private__.output=vi(function(W,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",W){case void 0:return nc();case"save":p.save(de.filename);break;case"arraybuffer":return He(nc());case"blob":return Md(nc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(Md(nc()))||void 0;Sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=nc();try{Fe=lF(Le)}catch{Fe=lF(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+de.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Ge=de.pdfObjectUrl,xt="");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",Zt=Mr.open();return Zt!==null&&Zt.document.write(Pt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',ee=Mr.open();if(ee!==null){ee.document.write(O);var se=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=de.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',ze=Mr.open();if(ze!==null&&(ze.document.write(xe),ze.document.title=de.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",de);default:return null}}),Cl=function(W){return Array.isArray(Pr)===!0&&Pr.indexOf(W)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=Cl("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var ua=null;re(),H();var sc=function(W){return d!==null?ua.encryptor(W,0):function(de){return de}},_l=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[W].objId,pageNumber:W,pageContext:Dt[W]}},Br=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in Dt)if(Dt[de].objId===W)break;return _l(de)},Sl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Dt[K].objId,pageNumber:K,pageContext:Dt[K]}};p.addPage=function(){return Vc.apply(this,arguments),this},p.setPage=function(){return El.apply(this,arguments),_e.call(this,Ie[K]),this},p.insertPage=function(W){return this.addPage(),this.movePage(K,W),this},p.movePage=function(W,de){var Fe,Le;if(W>de){Fe=Ie[W],Le=Dt[W];for(var Ge=W;Ge>de;Ge--)Ie[Ge]=Ie[Ge-1],Dt[Ge]=Dt[Ge-1];Ie[de]=Fe,Dt[de]=Le,this.setPage(de)}else if(W<de){Fe=Ie[W],Le=Dt[W];for(var xt=W;xt<de;xt++)Ie[xt]=Ie[xt+1],Dt[xt]=Dt[xt+1];Ie[de]=Fe,Dt[de]=Le,this.setPage(de)}return this},p.deletePage=function(){return zc.apply(this,arguments),this},p.__private__.text=p.text=function(W,de,Fe,Le,Ge){var xt,Pt,Zt,O,ee,se,xe,ze,st,Ut=(Le=Le||{}).scope||this;if(typeof W=="number"&&typeof de=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Tr=Fe;Fe=de,de=W,W=Tr}if(arguments[3]instanceof $t?(_("The transform parameter of text() with a Matrix value"),st=Ge):(Zt=arguments[4],O=arguments[5],ga(xe=arguments[3])==="object"&&xe!==null||(typeof Zt=="string"&&(O=Zt,Zt=null),typeof xe=="string"&&(O=xe,xe=null),typeof xe=="number"&&(Zt=xe,xe=null),Le={flags:xe,angle:Zt,align:O})),isNaN(de)||isNaN(Fe)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Ut;var bn="",Kr=!1,zn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:xn,na=Ut.internal.scaleFactor;function Tl(hn){return hn=hn.split("	").join(Array(Le.TabLen||9).join(" ")),On(hn,xe)}function es(hn){for(var mn,ba=hn.concat(),ts=[],Il=ba.length;Il--;)typeof(mn=ba.shift())=="string"?ts.push(mn):Array.isArray(hn)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?ts.push(mn[0]):ts.push([mn[0],mn[1],mn[2]]);return ts}function _o(hn,mn){var ba;if(typeof hn=="string")ba=mn(hn)[0];else if(Array.isArray(hn)){for(var ts,Il,Zd=hn.concat(),eA=[],qu=Zd.length;qu--;)typeof(ts=Zd.shift())=="string"?eA.push(mn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Il=mn(ts[0],ts[1],ts[2]),eA.push([Il[0],Il[1],Il[2]]));ba=eA}return ba}var Zc=!1,zd=!0;if(typeof W=="string")Zc=!0;else if(Array.isArray(W)){var Ih=W.concat();Pt=[];for(var nf,Os=Ih.length;Os--;)(typeof(nf=Ih.shift())!="string"||Array.isArray(nf)&&typeof nf[0]!="string")&&(zd=!1);Zc=zd}if(Zc===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var $d=ye/Ut.internal.scaleFactor,af=$d*(zn-1);switch(Le.baseline){case"bottom":Fe-=af;break;case"top":Fe+=$d-af;break;case"hanging":Fe+=$d-2*af;break;case"middle":Fe+=$d/2-af}if((se=Le.maxWidth||0)>0&&(typeof W=="string"?W=Ut.splitTextToSize(W,se):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(hn,mn){return hn.concat(Ut.splitTextToSize(mn,se))},[]))),xt={text:W,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("preProcessText",xt),W=xt.text,Zt=(Le=xt.options).angle,!(st instanceof $t)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Le.rotationDirection===0&&(Zt=-Zt),S===C.ADVANCED&&(Zt=-Zt);var sf=Math.cos(Zt),Fh=Math.sin(Zt);st=new $t(sf,Fh,-Fh,sf,0,0)}else Zt&&Zt instanceof $t&&(st=Zt);S!==C.ADVANCED||st||(st=en),(ee=Le.charSpace||Qu)!==void 0&&(bn+=w(k(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(bn+=w(100*ze)+` Tz
`),Le.lang;var So=-1,I1=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Bm=Ut.internal.getCurrentPageInfo().pageContext;switch(I1){case 0:case!1:case"fill":So=0;break;case 1:case!0:case"stroke":So=1;break;case 2:case"fillThenStroke":So=2;break;case 3:case"invisible":So=3;break;case 4:case"fillAndAddForClipping":So=4;break;case 5:case"strokeAndAddPathForClipping":So=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":So=6;break;case 7:case"addToPathForClipping":So=7}var wg=Bm.usedRenderingMode!==void 0?Bm.usedRenderingMode:-1;So!==-1?bn+=So+` Tr
`:wg!==-1&&(bn+=`0 Tr
`),So!==-1&&(Bm.usedRenderingMode=So),O=Le.align||"left";var jl,ti=ye*zn,Gd=Ut.internal.pageSize.getWidth(),Tm=Cr[Qt];ee=Le.charSpace||Qu,se=Le.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Gu=[],Kd=function(hn){return Ut.getStringUnitWidth(hn,{font:Tm,charSpace:ee,fontSize:ye,doKerning:!1})*ye/na};if(Object.prototype.toString.call(W)==="[object Array]"){var no;Pt=es(W),O!=="left"&&(jl=Pt.map(Kd));var yi,qd=0;if(O==="right"){de-=jl[0],W=[],Os=Pt.length;for(var No=0;No<Os;No++)No===0?(yi=Oi(de),no=gs(Fe)):(yi=k(qd-jl[No]),no=-ti),W.push([Pt[No],yi,no]),qd=jl[No]}else if(O==="center"){de-=jl[0]/2,W=[],Os=Pt.length;for(var cc=0;cc<Os;cc++)cc===0?(yi=Oi(de),no=gs(Fe)):(yi=k((qd-jl[cc])/2),no=-ti),W.push([Pt[cc],yi,no]),qd=jl[cc]}else if(O==="left"){W=[],Os=Pt.length;for(var eu=0;eu<Os;eu++)W.push(Pt[eu])}else if(O==="justify"&&Tm.encoding==="Identity-H"){W=[],Os=Pt.length,se=se!==0?se:Gd;for(var uc=0,za=0;za<Os;za++)if(no=za===0?gs(Fe):-ti,yi=za===0?Oi(de):uc,za<Os-1){var dc=k((se-jl[za])/(Pt[za].split(" ").length-1)),vs=Pt[za].split(" ");W.push([vs[0]+" ",yi,no]),uc=0;for(var ko=1;ko<vs.length;ko++){var of=(Kd(vs[ko-1]+" "+vs[ko])-Kd(vs[ko]))*na+dc;ko==vs.length-1?W.push([vs[ko],of,0]):W.push([vs[ko]+" ",of,0]),uc-=of}}else W.push([Pt[za],yi,no]);W.push(["",uc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Os=Pt.length,se=se!==0?se:Gd,za=0;za<Os;za++)no=za===0?gs(Fe):-ti,yi=za===0?Oi(de):0,za<Os-1?Gu.push(w(k((se-jl[za])/(Pt[za].split(" ").length-1)))):Gu.push(0),W.push([Pt[za],yi,no])}}var tu=typeof Le.R2L=="boolean"?Le.R2L:qe;tu===!0&&(W=_o(W,function(hn,mn,ba){return[hn.split("").reverse().join(""),mn,ba]})),xt={text:W,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("postProcessText",xt),W=xt.text,Kr=xt.mutex.isHex||!1;var Oh=Cr[Qt].encoding;Oh!=="WinAnsiEncoding"&&Oh!=="StandardEncoding"||(W=_o(W,function(hn,mn,ba){return[Tl(hn),mn,ba]})),Pt=es(W),W=[];for(var Wd,Xd,Yd,lf=0,Dh=1,Jd=Array.isArray(Pt[0])?Dh:lf,Ku="",cf=function(hn,mn,ba){var ts="";return ba instanceof $t?(ba=typeof Le.angle=="number"?rn(ba,new $t(1,0,0,1,hn,mn)):rn(new $t(1,0,0,1,hn,mn),ba),S===C.ADVANCED&&(ba=rn(new $t(1,0,0,-1,0,0),ba)),ts=ba.join(" ")+` Tm
`):ts=w(hn)+" "+w(mn)+` Td
`,ts},$a=0;$a<Pt.length;$a++){switch(Ku="",Jd){case Dh:Yd=(Kr?"<":"(")+Pt[$a][0]+(Kr?">":")"),Wd=parseFloat(Pt[$a][1]),Xd=parseFloat(Pt[$a][2]);break;case lf:Yd=(Kr?"<":"(")+Pt[$a]+(Kr?">":")"),Wd=Oi(de),Xd=gs(Fe)}Gu!==void 0&&Gu[$a]!==void 0&&(Ku=Gu[$a]+` Tw
`),$a===0?W.push(Ku+cf(Wd,Xd,st)+Yd):Jd===lf?W.push(Ku+Yd):Jd===Dh&&W.push(Ku+cf(Wd,Xd,st)+Yd)}W=Jd===lf?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var sl=`BT
/`;return sl+=Qt+" "+ye+` Tf
`,sl+=w(ye*zn)+` TL
`,sl+=oc+`
`,sl+=bn,sl+=W,he(sl+="ET"),h[Qt]=!0,Ut};var Bh=p.__private__.clip=p.clip=function(W){return he(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Bh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var Ii=p.__private__.isValidStyle=function(W){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(de=!0),de};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return Ii(W)&&(u=W),this};var wo=p.__private__.getStyle=p.getStyle=function(W){var de=u;switch(W){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=W}return de},ro=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(W){return Nl("f",W),this},p.fillEvenOdd=function(W){return Nl("f*",W),this},p.fillStroke=function(W){return Nl("B",W),this},p.fillStrokeEvenOdd=function(W){return Nl("B*",W),this};var Nl=function(W,de){ga(de)==="object"?ic(de,W):he(W)},Eo=function(W){W===null||S===C.ADVANCED&&W===void 0||(W=wo(W),he(W))};function Gc(W,de,Fe,Le,Ge){var xt=new Rv(de||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ge||this.matrix);xt.stream=this.stream;var Pt=W+"$$"+this.cloneIndex+++"$$";return cr(Pt,xt),xt}var ic=function(W,de){var Fe=vt[W.key],Le=Ir[Fe];if(Le instanceof op)he("q"),he(ef(de)),Le.gState&&p.setGState(Le.gState),he(W.matrix.toString()+" cm"),he("/"+Fe+" sh"),he("Q");else if(Le instanceof Rv){var Ge=new $t(1,0,0,-1,0,Di());W.matrix&&(Ge=Ge.multiply(W.matrix||en),Fe=Gc.call(Le,W.key,W.boundingBox,W.xStep,W.yStep,Ge).id),he("q"),he("/Pattern cs"),he("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),he(de),he("Q")}},ef=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Co=p.moveTo=function(W,de){return he(w(k(W))+" "+w(R(de))+" m"),this},Fi=p.lineTo=function(W,de){return he(w(k(W))+" "+w(R(de))+" l"),this},kl=p.curveTo=function(W,de,Fe,Le,Ge,xt){return he([w(k(W)),w(R(de)),w(k(Fe)),w(R(Le)),w(k(Ge)),w(R(xt)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return S===C.COMPAT?this.lines([[Fe-W,Le-de]],W,de,[1,1],Ge||"S"):this.lines([[Fe-W,Le-de]],W,de,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,de,Fe,Le,Ge,xt){var Pt,Zt,O,ee,se,xe,ze,st,Ut,Tr,bn,Kr;if(typeof W=="number"&&(Kr=Fe,Fe=de,de=W,W=Kr),Le=Le||[1,1],xt=xt||!1,isNaN(de)||isNaN(Fe)||!Array.isArray(W)||!Array.isArray(Le)||!Ii(Ge)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Co(de,Fe),Pt=Le[0],Zt=Le[1],ee=W.length,Tr=de,bn=Fe,O=0;O<ee;O++)(se=W[O]).length===2?(Tr=se[0]*Pt+Tr,bn=se[1]*Zt+bn,Fi(Tr,bn)):(xe=se[0]*Pt+Tr,ze=se[1]*Zt+bn,st=se[2]*Pt+Tr,Ut=se[3]*Zt+bn,Tr=se[4]*Pt+Tr,bn=se[5]*Zt+bn,kl(xe,ze,st,Ut,Tr,bn));return xt&&ro(),Eo(Ge),this},p.path=function(W){for(var de=0;de<W.length;de++){var Fe=W[de],Le=Fe.c;switch(Fe.op){case"m":Co(Le[0],Le[1]);break;case"l":Fi(Le[0],Le[1]);break;case"c":kl.apply(this,Le);break;case"h":ro()}}return this},p.__private__.rect=p.rect=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return S===C.COMPAT&&(Le=-Le),he([w(k(W)),w(R(de)),w(k(Fe)),w(k(Le)),"re"].join(" ")),Eo(Ge),this},p.__private__.triangle=p.triangle=function(W,de,Fe,Le,Ge,xt,Pt){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(xt)||!Ii(Pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-W,Le-de],[Ge-Fe,xt-Le],[W-Ge,de-xt]],W,de,[1,1],Pt,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,de,Fe,Le,Ge,xt,Pt){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(xt)||!Ii(Pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Fe),xt=Math.min(xt,.5*Le),this.lines([[Fe-2*Ge,0],[Ge*Zt,0,Ge,xt-xt*Zt,Ge,xt],[0,Le-2*xt],[0,xt*Zt,-Ge*Zt,xt,-Ge,xt],[2*Ge-Fe,0],[-Ge*Zt,0,-Ge,-xt*Zt,-Ge,-xt],[0,2*xt-Le],[0,-xt*Zt,Ge*Zt,-xt,Ge,-xt]],W+Ge,de,[1,1],Pt,!0),this},p.__private__.ellipse=p.ellipse=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Fe,Pt=4/3*(Math.SQRT2-1)*Le;return Co(W+Fe,de),kl(W+Fe,de-Pt,W+xt,de-Le,W,de-Le),kl(W-xt,de-Le,W-Fe,de-Pt,W-Fe,de),kl(W-Fe,de+Pt,W-xt,de+Le,W,de+Le),kl(W+xt,de+Le,W+Fe,de+Pt,W+Fe,de),Eo(Ge),this},p.__private__.circle=p.circle=function(W,de,Fe,Le){if(isNaN(W)||isNaN(de)||isNaN(Fe)||!Ii(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,de,Fe,Fe,Le)},p.setFont=function(W,de,Fe){return Fe&&(de=B(de,Fe)),Qt=$c(W,de,{disableWarning:!1}),this};var ps=p.__private__.getFont=p.getFont=function(){return Cr[$c.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,de,Fe={};for(W in Vr)if(Vr.hasOwnProperty(W))for(de in Fe[W]=[],Vr[W])Vr[W].hasOwnProperty(de)&&Fe[W].push(de);return Fe},p.addFont=function(W,de,Fe,Le,Ge){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Fe=B(Fe,Le)),Ge=Ge||"Identity-H",Hc.call(this,W,de,Fe,Ge)};var xn,Kc=e.lineWidth||.200025,Bl=p.__private__.getLineWidth=p.getLineWidth=function(){return Kc},tf=p.__private__.setLineWidth=p.setLineWidth=function(W){return Kc=W,he(w(k(W))+" w"),this};p.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(W,de){if(W=W||[],de=de||0,isNaN(de)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(Fe){return w(k(Fe))}).join(" "),de=w(k(de)),he("["+W+"] "+de+" d"),this};var Mu=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*xn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*xn};var Uu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(xn=W),this},al=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return xn};Uu(e.lineHeight);var Oi=p.__private__.getHorizontalCoordinate=function(W){return k(W)},gs=p.__private__.getVerticalCoordinate=function(W){return S===C.ADVANCED?W:Dt[K].mediaBox.topRightY-Dt[K].mediaBox.bottomLeftY-k(W)},Th=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return w(Oi(W))},qc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return w(gs(W))},bi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(bi)},p.__private__.setStrokeColor=p.setDrawColor=function(W,de,Fe,Le){return bi=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),he(bi),this};var Wc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(Wc)},p.__private__.setFillColor=p.setFillColor=function(W,de,Fe,Le){return Wc=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),he(Wc),this};var oc=e.textColor||"0 g",Ud=p.__private__.getTextColor=p.getTextColor=function(){return Ne(oc)};p.__private__.setTextColor=p.setTextColor=function(W,de,Fe,Le){return oc=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var Qu=e.charSpace,Qd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Qu||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qu=W,this};var rf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var de=p.CapJoinStyles[W];if(de===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rf=de,he(de+" J"),this};var Hu=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var de=p.CapJoinStyles[W];if(de===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hu=de,he(de+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(w(k(W))+" M"),this},p.GState=bS,p.setGState=function(W){(W=typeof W=="string"?pt[Je[W]]:Xc(null,W)).equals(gt)||(he("/"+W.id+" gs"),gt=W)};var Xc=function(W,de){if(!W||!Je[W]){var Fe=!1;for(var Le in pt)if(pt.hasOwnProperty(Le)&&pt[Le].equals(de)){Fe=!0;break}if(Fe)de=pt[Le];else{var Ge="GS"+(Object.keys(pt).length+1).toString(10);pt[Ge]=de,de.id=Ge}return W&&(Je[W]=de.id),zt.publish("addGState",de),de}};p.addGState=function(W,de){return Xc(W,de),this},p.saveGraphicsState=function(){return he("q"),Fn.push({key:Qt,size:ye,color:oc}),this},p.restoreGraphicsState=function(){he("Q");var W=Fn.pop();return Qt=W.key,ye=W.size,oc=W.color,gt=null,this},p.setCurrentTransformationMatrix=function(W){return he(W.toString()+" cm"),this},p.comment=function(W){return he("#"+W),this};var Vu=function(W,de){var Fe=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(xt){isNaN(xt)||(Fe=parseFloat(xt))}});var Le=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(xt){isNaN(xt)||(Le=parseFloat(xt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(xt){Ge=xt.toString()}}),this},Hd=function(W,de,Fe,Le){Vu.call(this,W,de),this.type="rect";var Ge=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Pt){isNaN(Pt)||(Ge=parseFloat(Pt))}});var xt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Pt){isNaN(Pt)||(xt=parseFloat(Pt))}}),this},zu=function(){this.page=dt,this.currentPage=K,this.pages=Ie.slice(0),this.pagesContext=Dt.slice(0),this.x=Nr,this.y=rr,this.matrix=an,this.width=Jc(K),this.height=Di(K),this.outputDestination=Se,this.id="",this.objectNumber=-1};zu.prototype.restore=function(){dt=this.page,K=this.currentPage,Dt=this.pagesContext,Ie=this.pages,Nr=this.x,rr=this.y,an=this.matrix,$u(K,this.width),Vd(K,this.height),Se=this.outputDestination};var Yc=function(W,de,Fe,Le,Ge){vn.push(new zu),dt=K=0,Ie=[],Nr=W,rr=de,an=Ge,xi([Fe,Le])},jh=function(W){if(gn[W])vn.pop().restore();else{var de=new zu,Fe="Xo"+(Object.keys(Xr).length+1).toString(10);de.id=Fe,gn[W]=Fe,Xr[Fe]=de,zt.publish("addFormObject",de),vn.pop().restore()}};for(var lc in p.beginFormObject=function(W,de,Fe,Le,Ge){return Yc(W,de,Fe,Le,Ge),this},p.endFormObject=function(W){return jh(W),this},p.doFormObject=function(W,de){var Fe=Xr[gn[W]];return he("q"),he(de.toString()+" cm"),he("/"+Fe.id+" Do"),he("Q"),this},p.getFormObject=function(W){var de=Xr[gn[W]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},p.save=function(W,de){return W=W||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?(tp(Md(nc()),W),typeof tp.unload=="function"&&Mr.setTimeout&&setTimeout(tp.unload,911),this):new Promise(function(Fe,Le){try{var Ge=tp(Md(nc()),W);typeof tp.unload=="function"&&Mr.setTimeout&&setTimeout(tp.unload,911),Fe(Ge)}catch(xt){Le(xt.message)}})},gr.API)gr.API.hasOwnProperty(lc)&&(lc==="events"&&gr.API.events.length?function(W,de){var Fe,Le,Ge;for(Ge=de.length-1;Ge!==-1;Ge--)Fe=de[Ge][0],Le=de[Ge][1],W.subscribe.apply(W,[Fe].concat(typeof Le=="function"?[Le]:Le))}(zt,gr.API.events):p[lc]=gr.API[lc]);var Jc=p.getPageWidth=function(W){return(Dt[W=W||K].mediaBox.topRightX-Dt[W].mediaBox.bottomLeftX)/bt},$u=p.setPageWidth=function(W,de){Dt[W].mediaBox.topRightX=de*bt+Dt[W].mediaBox.bottomLeftX},Di=p.getPageHeight=function(W){return(Dt[W=W||K].mediaBox.topRightY-Dt[W].mediaBox.bottomLeftY)/bt},Vd=p.setPageHeight=function(W,de){Dt[W].mediaBox.topRightY=de*bt+Dt[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:On,getStyle:wo,getFont:ps,getFontSize:Pe,getCharSpace:Qd,getTextColor:Ud,getLineHeight:Mu,getLineHeightFactor:al,getLineWidth:Bl,write:je,getHorizontalCoordinate:Oi,getVerticalCoordinate:gs,getCoordinateString:Th,getVerticalCoordinateString:qc,collections:{},newObject:Yr,newAdditionalObject:Be,newObjectDeferred:ra,newObjectDeferredBegin:fe,getFilters:Ye,putStream:ut,events:zt,scaleFactor:bt,pageSize:{getWidth:function(){return Jc(K)},setWidth:function(W){$u(K,W)},getHeight:function(){return Di(K)},setHeight:function(W){Vd(K,W)}},encryptionOptions:d,encryption:ua,getEncryptor:sc,output:ac,getNumberOfPages:Vn,pages:Ie,out:he,f2:U,f3:D,getPageInfo:_l,getPageInfoByObjId:Br,getCurrentPageInfo:Sl,getPDFVersion:v,Point:Vu,Rectangle:Hd,Matrix:$t,hasHotfix:Cl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Jc(K)},set:function(W){$u(K,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Di(K)},set:function(W){Vd(K,W)},enumerable:!0,configurable:!0}),YA.call(p,Xe),Qt="F1",Vc(a,r),zt.publish("initialized"),p}kv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},kv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},kv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},kv.prototype.processOwnerPassword=function(e,t){return uF(cF(t).substr(0,5),e)},kv.prototype.encryptor=function(e,t){var r=cF(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return uF(r,n)}},bS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},gr.API={events:[]},gr.version="2.5.2";var Cs=gr.API,HD=1,dg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ev=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jr=function(e){return e.toFixed(2)},u0=function(e){return e.toFixed(5)};Cs.__acroform__={};var ec=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},lQ=function(e){return e*HD},pA=function(e){var t=new RZ,r=fr.internal.getHeight(e)||0,n=fr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jr(n)),Number(Jr(r))],t},m2e=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},p2e=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},g2e=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Gs=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return g2e(e,t-1)},Ks=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return m2e(e,t-1)},qs=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return p2e(e,t-1)},v2e=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Jr(l.lowerLeft_X)),Number(Jr(l.lowerLeft_Y)),Number(Jr(l.upperRight_X)),Number(Jr(l.upperRight_Y))]},x2e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=dF(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=pA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},dF=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=fr.internal.getHeight(e)||0;i=i<0?-i:i;var o=fr.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(D,k,L){if(D+1<a.length){var R=k+" "+a[D+1][0];return GE(R,e,L).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=GE("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,v=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+GE(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",C=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var I=!1;if(a[S].length!==1&&b!==a[S].length-1){if((f+2)*(C+2)+2>i)continue e;y+=a[S][b],I=!0,v=S,S--}else{y=(y+=a[S][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var N=parseInt(S),B=l(N,y,s),w=S>=a.length-1;if(B&&!w){y+=" ",b=0;continue}if(B||w){if(w)v=N;else if(e.multiline&&(f+2)*(C+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(C+2)+2>i)continue e;v=N}}for(var _="",F=g;F<=v;F++){var U=a[F];if(e.multiline){if(F===v){_+=U[b]+" ",b=(b+1)%U.length;continue}if(F===g){_+=U[U.length-1]+" ";continue}}_+=U[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=GE(_,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Jr(u)+" "+Jr(p)+` Td
`,t+="("+dg(_)+`) Tj
`,t+=-Jr(u)+` 0 Td
`,p=-(s+2),d=0,g=I?v:v+1,C++,y=""}break}return n.text=t,n.fontSize=s,n},GE=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},b2e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},y2e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},w2e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},E2e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Id.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(b2e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");HD=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new PZ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&y2e(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=v2e(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=fr.createDefaultAppearanceStream(o),ga(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=x2e(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&w2e(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},DZ=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+dg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},oT=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+dg(n(e))+")"},kA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};kA.prototype.toString=function(){return this.objId+" 0 R"},kA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},kA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:DZ(a,this.objId,this.scope)}):a instanceof kA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var RZ=function(){kA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ec(RZ,kA);var PZ=function(){kA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+dg(r(e))+")"}},set:function(r){e=r}})};ec(PZ,kA);var Id=function e(){kA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gs(t,3)},set:function(y){y?this.F=Ks(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof yS)return;s="FieldObject"+e.FieldNum++}var y=function(C){return C};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+dg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/HD:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof yS||this instanceof _p))return oT(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $i?h:oT(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof $i?y:y.substr(0,1)==="("?ev(y.substr(1,y.length-2)):ev(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?ev(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof $i?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $i?p:oT(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof $i?y:y.substr(0,1)==="("?ev(y.substr(1,y.length-2)):ev(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?ev(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof $i?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,1)},set:function(y){y?this.Ff=Ks(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,2)},set:function(y){y?this.Ff=Ks(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,3)},set:function(y){y?this.Ff=Ks(this.Ff,3):this.Ff=qs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ec(Id,kA);var ex=function(){Id.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DZ(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,18)},set:function(r){r?this.Ff=Ks(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ks(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,20)},set:function(r){r?(this.Ff=Ks(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,22)},set:function(r){r?this.Ff=Ks(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(r){r?this.Ff=Ks(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,27)},set:function(r){r?this.Ff=Ks(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};ec(ex,Id);var tx=function(){ex.call(this),this.fontName="helvetica",this.combo=!1};ec(tx,ex);var rx=function(){tx.call(this),this.combo=!0};ec(rx,tx);var b_=function(){rx.call(this),this.edit=!0};ec(b_,rx);var $i=function(){Id.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,15)},set:function(r){r?this.Ff=Ks(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,16)},set:function(r){r?this.Ff=Ks(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,17)},set:function(r){r?this.Ff=Ks(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(r){r?this.Ff=Ks(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+dg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ec($i,Id);var y_=function(){$i.call(this),this.pushButton=!0};ec(y_,$i);var nx=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ec(nx,$i);var yS=function(){var e,t;Id.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+dg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ec(yS,Id),nx.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},nx.prototype.createOption=function(e){var t=new yS;return t.Parent=this,t.optionName=e,this.Kids.push(t),C2e.call(this.scope,t),t};var w_=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fr.CheckBox.createAppearanceStream()};ec(w_,$i);var _p=function(){Id.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,13)},set:function(t){t?this.Ff=Ks(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,21)},set:function(t){t?this.Ff=Ks(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(t){t?this.Ff=Ks(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,24)},set:function(t){t?this.Ff=Ks(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,25)},set:function(t){t?this.Ff=Ks(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(t){t?this.Ff=Ks(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ec(_p,Id);var E_=function(){_p.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,14)},set:function(e){e?this.Ff=Ks(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};ec(E_,_p);var fr={CheckBox:{createAppearanceStream:function(){return{N:{On:fr.CheckBox.YesNormal},D:{On:fr.CheckBox.YesPushDown,Off:fr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=dF(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Jr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=pA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=fr.internal.getHeight(e),i=fr.internal.getWidth(e),o=dF(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jr(i)+" "+Jr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jr(i-1)+" "+Jr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Circle.YesNormal,t.D[e]=fr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=pA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=fr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+u0(fr.internal.getWidth(e)/2)+" "+u0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5)),i=Number((n*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+u0(fr.internal.getWidth(e)/2)+" "+u0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+u0(fr.internal.getWidth(e)/2)+" "+u0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+u0(fr.internal.getWidth(e)/2)+" "+u0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Cross.YesNormal,t.D[e]=fr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=pA(e);t.scope=e.scope;var r=[],n=fr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jr(n.x1.x)+" "+Jr(n.x1.y)+" m"),r.push(Jr(n.x2.x)+" "+Jr(n.x2.y)+" l"),r.push(Jr(n.x4.x)+" "+Jr(n.x4.y)+" m"),r.push(Jr(n.x3.x)+" "+Jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=fr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jr(r.x1.x)+" "+Jr(r.x1.y)+" m"),n.push(Jr(r.x2.x)+" "+Jr(r.x2.y)+" l"),n.push(Jr(r.x4.x)+" "+Jr(r.x4.y)+" m"),n.push(Jr(r.x3.x)+" "+Jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=pA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};fr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fr.internal.getWidth(e),r=fr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},fr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=lQ(e.Rect[2])),t},fr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=lQ(e.Rect[3])),t};var C2e=Cs.addField=function(e){if(E2e(this,e),!(e instanceof Id))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=ex,Cs.AcroFormListBox=tx,Cs.AcroFormComboBox=rx,Cs.AcroFormEditBox=b_,Cs.AcroFormButton=$i,Cs.AcroFormPushButton=y_,Cs.AcroFormRadioButton=nx,Cs.AcroFormCheckBox=w_,Cs.AcroFormTextField=_p,Cs.AcroFormPasswordField=E_,Cs.AcroFormAppearance=fr,Cs.AcroForm={ChoiceField:ex,ListBox:tx,ComboBox:rx,EditBox:b_,Button:$i,PushButton:y_,RadioButton:nx,CheckBox:w_,TextField:_p,PasswordField:E_,Appearance:fr},gr.AcroForm={ChoiceField:ex,ListBox:tx,ComboBox:rx,EditBox:b_,Button:$i,PushButton:y_,RadioButton:nx,CheckBox:w_,TextField:_p,PasswordField:E_,Appearance:fr};gr.AcroForm;function LZ(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,k){var L,R,X,V,Z,H=t;if((k=k||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(B(D))for(Z in r)for(X=r[Z],L=0;L<X.length;L+=1){for(V=!0,R=0;R<X[L].length;R+=1)if(X[L][R]!==void 0&&X[L][R]!==D[R]){V=!1;break}if(V===!0){H=Z;break}}else for(Z in r)for(X=r[Z],L=0;L<X.length;L+=1){for(V=!0,R=0;R<X[L].length;R+=1)if(X[L][R]!==void 0&&X[L][R]!==D.charCodeAt(R)){V=!1;break}if(V===!0){H=Z;break}}return H===t&&k!==t&&(H=k),H},a=function D(k){for(var L=this.internal.write,R=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:k.width}),V.push({key:"Height",value:k.height}),k.colorSpace===b.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===b.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var Z="",H=0,z=k.transparency.length;H<z;H++)Z+=k.transparency[H]+" "+k.transparency[H]+" ";V.push({key:"Mask",value:"["+Z+"]"})}k.sMask!==void 0&&V.push({key:"SMask",value:k.objectId+1+" 0 R"});var q=k.filter!==void 0?["/"+k.filter]:void 0;if(R({data:k.data,additionalKeyValues:V,alreadyAppliedFilters:q,objectId:k.objectId}),L("endobj"),"sMask"in k&&k.sMask!==void 0){var re="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,P={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:re,data:k.sMask};"filter"in k&&(P.filter=k.filter),D.call(this,P)}if(k.colorSpace===b.INDEXED){var K=this.internal.newObject();R({data:_(new Uint8Array(k.palette)),objectId:K}),L("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var k in D)a.call(this,D[k])},i=function(){var D,k=this.internal.collections.addImage_images,L=this.internal.write;for(var R in k)L("/I"+(D=k[R]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return ga(D)==="object"&&D.nodeType===1},h=function(D,k){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var L=""+D.getAttribute("src");if(L.indexOf("data:image/")===0)return wy(unescape(L).split("base64,").pop());var R=e.loadFile(L,!0);if(R!==void 0)return R}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var X;switch(k){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return wy(D.toDataURL(X,1).split("base64,").pop())}},p=function(D){var k=this.internal.collections.addImage_images;if(k){for(var L in k)if(D===k[L].alias)return k[L]}},g=function(D,k,L){return D||k||(D=-96,k=-96),D<0&&(D=-1*L.width*72/D/this.internal.scaleFactor),k<0&&(k=-1*L.height*72/k/this.internal.scaleFactor),D===0&&(D=k*L.width/L.height),k===0&&(k=D*L.height/L.width),[D,k]},v=function(D,k,L,R,X,V){var Z=g.call(this,L,R,X),H=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,q=l.call(this);if(L=Z[0],R=Z[1],q[X.index]=X,V){V*=Math.PI/180;var re=Math.cos(V),P=Math.sin(V),K=function(te){return te.toFixed(4)},Y=[K(re),K(P),K(-1*P),K(re),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,H(D),z(k+R),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([H(L),"0","0",H(R),"0","0","cm"].join(" "))):this.internal.write([H(L),"0","0",H(R),H(D),z(k+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(D){var k,L,R=0;if(typeof D=="string")for(L=D.length,k=0;k<L;k++)R=(R<<5)-R+D.charCodeAt(k),R|=0;else if(B(D))for(L=D.byteLength/2,k=0;k<L;k++)R=(R<<5)-R+D[k],R|=0;return R},S=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var k=!0;return D.length===0&&(k=!1),D.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(k=!1),k},I=e.__addimage__.extractImageFromDataUrl=function(D){var k=(D=D||"").split("base64,"),L=null;if(k.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(R)&&(L={mimeType:R[1],charset:R[2],data:k[1]})}return L},N=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return N()&&D instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(D){return N()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(D){for(var k=D.length,L=new Uint8Array(k),R=0;R<k;R++)L[R]=D.charCodeAt(R);return L},_=e.__addimage__.arrayBufferToBinaryString=function(D){for(var k="",L=B(D)?D:new Uint8Array(D),R=0;R<L.length;R+=8192)k+=String.fromCharCode.apply(null,L.subarray(R,R+8192));return k};e.addImage=function(){var D,k,L,R,X,V,Z,H,z;if(typeof arguments[1]=="number"?(k=t,L=arguments[1],R=arguments[2],X=arguments[3],V=arguments[4],Z=arguments[5],H=arguments[6],z=arguments[7]):(k=arguments[1],L=arguments[2],R=arguments[3],X=arguments[4],V=arguments[5],Z=arguments[6],H=arguments[7],z=arguments[8]),ga(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var q=D;D=q.imageData,k=q.format||k||t,L=q.x||L||0,R=q.y||R||0,X=q.w||q.width||X,V=q.h||q.height||V,Z=q.alias||Z,H=q.compression||H,z=q.rotation||q.angle||z}var re=this.internal.getFilters();if(H===void 0&&re.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(L)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=F.call(this,D,k,Z,H);return v.call(this,L,R,X,V,P,z),this};var F=function(D,k,L,R){var X,V,Z;if(typeof D=="string"&&n(D)===t){D=unescape(D);var H=U(D,!1);(H!==""||(H=e.loadFile(D,!0))!==void 0)&&(D=H)}if(f(D)&&(D=h(D,k)),k=n(D,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((Z=L)==null||Z.length===0)&&(L=function(z){return typeof z=="string"||B(z)?C(z):B(z.data)?C(z.data):null}(D)),(X=p.call(this,L))||(N()&&(D instanceof Uint8Array||k==="RGBA"||(V=D,D=w(D))),X=this["process"+k.toUpperCase()](D,u.call(this),L,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:y.NONE}(R),V)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},U=e.__addimage__.convertBase64ToBinaryString=function(D,k){var L;k=typeof k!="boolean"||k;var R,X="";if(typeof D=="string"){R=(L=I(D))!==null?L.data:D;try{X=wy(R)}catch(V){if(k)throw S(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};e.getImageProperties=function(D){var k,L,R="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((R=U(D,!1))===""&&(R=e.loadFile(D)||""),D=R),L=n(D),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!N()||D instanceof Uint8Array||(D=w(D)),!(k=this["process"+L.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=L,k}})(gr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),C=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(y(C))+") >>",v.content=s;var S=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var I=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var B=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(gr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return i(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var b=0,y=r,C="",S=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(S++,typeof(y=y[v.charCodeAt(b)])=="number"&&(C+=String.fromCharCode(y),y=r,S=0),b===v.length-1&&(y=r,C+=v.charAt(b-(S-1)),b-=S-1,S=0)):(y=r,C+=v.charAt(b-S),b-=S,S=0);return C};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,b,y){return i(v)?s(v)===!1?-1:!u(v)||!i(b)&&!i(y)||!i(y)&&o(b)||o(v)&&!i(b)||o(v)&&l(b)||o(v)&&o(b)?0:d(v)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(v)||!i(y)?1:2:-1},p=function(v){var b=0,y=0,C=0,S="",I="",N="",B=(v=v||"").split("\\s+"),w=[];for(b=0;b<B.length;b+=1){for(w.push(""),y=0;y<B[b].length;y+=1)S=B[b][y],I=B[b][y-1],N=B[b][y+1],i(S)?(C=h(S,I,N),w[b]+=C!==-1?String.fromCharCode(t[S.charCodeAt(0)][C]):S):w[b]+=S;w[b]=f(w[b])}return w.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var C=0;for(y=[],C=0;C<b.length;C+=1)Array.isArray(b[C])?y.push([p(b[C][0]),b[C][1],b[C][2]]):y.push([p(b[C])]);v=y}else v=p(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",g])}(gr.API),gr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(gr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(v){g=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,I){return S.concat(b.splitTextToSize(I,y))},[])):l=Array.isArray(l)?l:[l];for(var C=0;C<l.length;C++)p<(v=this.getStringUnitWidth(l[C],{font:f})*d)&&(p=v);return p!==0&&(g=l.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,v,b,y=[],C=[],S=[],I={},N={},B=[],w=[],_=(h=h||{}).autoSize||!1,F=h.printHeaders!==!1,U=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=R,this.setFontSize(U),f==null)C=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&ga(f[0])==="object")for(y=f.map(function(q){return q.name}),C=f.map(function(q){return q.prompt||q.name||""}),S=f.map(function(q){return q.align||"left"}),p=0;p<f.length;p+=1)N[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(C=y=f,S=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(I[b=y[p]]=d.map(function(q){return q[b]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(C[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=I[b],this.setFont(void 0,"normal"),v=0;v<g.length;v+=1)B.push(this.getTextDimensions(g[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[b]=Math.max.apply(null,B)+k+k,B=[]}if(F){var X={};for(p=0;p<y.length;p+=1)X[y[p]]={},X[y[p]].text=C[p],X[y[p]].align=S[p];var V=o.call(this,X,N);w=y.map(function(q){return new s(l,u,N[q],V,X[q].text,void 0,X[q].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var Z=f.reduce(function(q,re){return q[re.name]=re.align,q},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var H=o.call(this,d[p],N);for(v=0;v<y.length;v+=1){var z=d[p][y[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:z},this),i.call(this,new s(l,u,N[y[v]],H,z,p+2,Z[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var g=l[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(gr.API);var MZ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},UZ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],AF=LZ(UZ),QZ=[100,200,300,400,500,600,700,800,900],_2e=LZ(QZ);function fF(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return MZ[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof AF[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function cQ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var S2e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dQ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function N2e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},S2e,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=fF(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+dQ(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=AF[l],f=d<=AF.normal?-1:1,h=cQ(u,UZ,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=MZ[l],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=_2e[l],f=cQ(u,QZ,d,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+dQ(s)+"'.");return i}function AQ(e){return e.trimLeft()}function k2e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function B2e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var KE,fQ,hQ,lT=["times"];(function(e){var t,r,n,a,s,i,o,l,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new i,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new i,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=P;Object.defineProperty(this,"pdf",{get:function(){return K}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(_e){Y=!!_e}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(_e){te=!!_e}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(_e){isNaN(_e)||(ie=_e)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(_e){isNaN(_e)||(Ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var he;typeof _e=="number"?he=[_e,_e,_e,_e]:((he=new Array(4))[0]=_e[0],he[1]=_e.length>=2?_e[1]:he[0],he[2]=_e.length>=3?_e[2]:he[0],he[3]=_e.length>=4?_e[3]:he[1]),u.margin=he}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(_e){oe=_e}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(_e){ce=_e}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(_e){pe=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(_e){Ie=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var he;he=h(_e),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var he=h(_e);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var ne=null;function Se(_e,he){if(ne===null){var je=function(He){var Xe=[];return Object.keys(He).forEach(function(ye){He[ye].forEach(function(Oe){var Pe=null;switch(Oe){case"bold":Pe={family:ye,weight:"bold"};break;case"italic":Pe={family:ye,style:"italic"};break;case"bolditalic":Pe={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:ye}}Pe!==null&&(Pe.ref={name:ye,style:Oe},Xe.push(Pe))})}),Xe}(_e.getFontList());ne=function(He){for(var Xe={},ye=0;ye<He.length;++ye){var Oe=fF(He[ye]),Pe=Oe.family,qe=Oe.stretch,Ze=Oe.style,ot=Oe.weight;Xe[Pe]=Xe[Pe]||{},Xe[Pe][qe]=Xe[Pe][qe]||{},Xe[Pe][qe][Ze]=Xe[Pe][qe][Ze]||{},Xe[Pe][qe][Ze][ot]=Oe}return Xe}(je.concat(he))}return ne}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(_e){ne=null,De=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var he;if(this.ctx.font=_e,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var je=he[1],He=(he[2],he[3]),Xe=he[4],ye=(he[5],he[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Oe==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Pe=function(Ot){var Qt,bt,Nr=[],rr=Ot.trim();if(rr==="")return lT;if(rr in uQ)return[uQ[rr]];for(;rr!=="";){switch(bt=null,Qt=(rr=AQ(rr)).charAt(0)){case'"':case"'":bt=k2e(rr.substring(1),Qt);break;default:bt=B2e(rr)}if(bt===null||(Nr.push(bt[0]),(rr=AQ(bt[1]))!==""&&rr.charAt(0)!==","))return lT;rr=rr.replace(/^,/,"")}return Nr}(ye);if(this.fontFaces){var qe=N2e(Se(this.pdf,this.fontFaces),Pe.map(function(Ot){return{family:Ot,stretch:"normal",weight:He,style:je}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(He==="bold"||parseInt(He,10)>=700||je==="bold")&&(Ze="bold"),je==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Pe.length;Tt++){if(this.pdf.internal.getFont(Pe[Tt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Tt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Pe[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Pe[Tt],Ze="bold";else if(this.pdf.internal.getFont(Pe[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Tt],Ze="normal";break}}if(ot===""){for(var Mt=0;Mt<Pe.length;Mt++)if(mt[Pe[Mt]]){ot=mt[Pe[Mt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){I.call(this,"fill",!1)},f.prototype.stroke=function(){I.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,K){if(isNaN(P)||isNaN(K))throw Sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(P,K)},f.prototype.closePath=function(){var P=new i(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&ga(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){P=new i(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(P.x,P.y)},f.prototype.lineTo=function(P,K){if(isNaN(P)||isNaN(K))throw Sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,K,Y,te){if(isNaN(Y)||isNaN(te)||isNaN(P)||isNaN(K))throw Sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(Y,te)),Ae=this.ctx.transform.applyToPoint(new i(P,K));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.bezierCurveTo=function(P,K,Y,te,ie,Ae){if(isNaN(ie)||isNaN(Ae)||isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ie,Ae)),ce=this.ctx.transform.applyToPoint(new i(P,K)),pe=this.ctx.transform.applyToPoint(new i(Y,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:pe.x,y2:pe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(P,K,Y,te,ie,Ae){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te)||isNaN(ie))throw Sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(P,K));P=oe.x,K=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,Y)),pe=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(ce.x-pe.x,2)+Math.pow(ce.y-pe.y,2))}Math.abs(ie-te)>=2*Math.PI&&(te=0,ie=2*Math.PI),this.path.push({type:"arc",x:P,y:K,radius:Y,startAngle:te,endAngle:ie,counterclockwise:Ae})},f.prototype.arcTo=function(P,K,Y,te,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,K,Y,te){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,K),this.lineTo(P+Y,K),this.lineTo(P+Y,K+te),this.lineTo(P,K+te),this.lineTo(P,K),this.lineTo(P+Y,K),this.lineTo(P,K)},f.prototype.fillRect=function(P,K,Y,te){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,K,Y,te),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(P,K,Y,te){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,K,Y,te),this.stroke())},f.prototype.clearRect=function(P,K,Y,te){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,K,Y,te))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(K),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(P){var K,Y,te,ie;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))K=0,Y=0,te=0,ie=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ae!==null)K=parseInt(Ae[1]),Y=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)K=parseInt(Ae[1]),Y=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=parseFloat(Ae[4]);else{if(ie=1,typeof P=="string"&&P.charAt(0)!=="#"){var oe=new IZ(P);P=oe.ok?oe.toHex():"#000000"}P.length===4?(K=P.substring(1,2),K+=K,Y=P.substring(2,3),Y+=Y,te=P.substring(3,4),te+=te):(K=P.substring(1,3),Y=P.substring(3,5),te=P.substring(5,7)),K=parseInt(K,16),Y=parseInt(Y,16),te=parseInt(te,16)}}return{r:K,g:Y,b:te,a:ie,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,K,Y,te){if(isNaN(K)||isNaN(Y)||typeof P!="string")throw Sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;k.call(this,{text:P,x:K,y:Y,scale:Ae,angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(P,K,Y,te){if(isNaN(K)||isNaN(Y)||typeof P!="string")throw Sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;k.call(this,{text:P,x:K,y:Y,scale:Ae,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(P){if(typeof P!="string")throw Sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Y=this.pdf.internal.scaleFactor,te=K.internal.getFontSize(),ie=K.getStringUnitWidth(P)*te/K.internal.scaleFactor,Ae=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new Ae({width:ie*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(P,K){if(isNaN(P)||isNaN(K))throw Sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(P,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(P){if(isNaN(P))throw Sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(P,K){if(isNaN(P)||isNaN(K))throw Sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,P,K);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(P,K,Y,te,ie,Ae){if(isNaN(P)||isNaN(K)||isNaN(Y)||isNaN(te)||isNaN(ie)||isNaN(Ae))throw Sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new l(P,K,Y,te,ie,Ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(P,K,Y,te,ie,Ae){P=isNaN(P)?1:P,K=isNaN(K)?0:K,Y=isNaN(Y)?0:Y,te=isNaN(te)?1:te,ie=isNaN(ie)?0:ie,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new l(P,K,Y,te,ie,Ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,K,Y,te,ie,Ae,oe,ce,pe){var Ie=this.pdf.getImageProperties(P),ne=1,Se=1,De=1,_e=1;te!==void 0&&ce!==void 0&&(De=ce/te,_e=pe/ie,ne=Ie.width/te*ce/te,Se=Ie.height/ie*pe/ie),Ae===void 0&&(Ae=K,oe=Y,K=0,Y=0),te!==void 0&&ce===void 0&&(ce=te,pe=ie),te===void 0&&ce===void 0&&(ce=Ie.width,pe=Ie.height);for(var he,je=this.ctx.transform.decompose(),He=H(je.rotate.shx),Xe=new l,ye=(Xe=(Xe=(Xe=Xe.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(Ae-K*De,oe-Y*_e,te*ne,ie*Se)),Oe=b.call(this,ye),Pe=[],qe=0;qe<Oe.length;qe+=1)Pe.indexOf(Oe[qe])===-1&&Pe.push(Oe[qe]);if(S(Pe),this.autoPaging)for(var Ze=Pe[0],ot=Pe[Pe.length-1],mt=Ze;mt<ot+1;mt++){this.pdf.setPage(mt);var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=mt===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=mt===1?0:Ot+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Nr=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(he,this.posX+this.margin[3],-bt+Mt+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Nr}var rr=JSON.parse(JSON.stringify(ye));rr=C([rr],this.posX+this.margin[3],-bt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(mt>Ze||mt<ot)&&v.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,Qt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,He),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,He)};var b=function(P,K,Y){var te=[];K=K||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":te.push(Math.floor((P.y+ie)/Y)+1);break;case"arc":te.push(Math.floor((P.y+ie-P.radius)/Y)+1),te.push(Math.floor((P.y+ie+P.radius)/Y)+1);break;case"qct":var Ae=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);te.push(Math.floor((Ae.y+ie)/Y)+1),te.push(Math.floor((Ae.y+Ae.h+ie)/Y)+1);break;case"bct":var oe=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);te.push(Math.floor((oe.y+ie)/Y)+1),te.push(Math.floor((oe.y+oe.h+ie)/Y)+1);break;case"rect":te.push(Math.floor((P.y+ie)/Y)+1),te.push(Math.floor((P.y+P.h+ie)/Y)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var P=this.fillStyle,K=this.strokeStyle,Y=this.font,te=this.lineCap,ie=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=K,this.font=Y,this.lineCap=te,this.lineWidth=ie,this.lineJoin=Ae},C=function(P,K,Y){for(var te=0;te<P.length;te++)switch(P[te].type){case"bct":P[te].x2+=K,P[te].y2+=Y;case"qct":P[te].x1+=K,P[te].y1+=Y;case"mt":case"lt":case"arc":default:P[te].x+=K,P[te].y+=Y}return P},S=function(P){return P.sort(function(K,Y){return K-Y})},I=function(P,K){for(var Y,te,ie=this.fillStyle,Ae=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,pe=Math.abs(ce*this.ctx.transform.scaleX),Ie=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),De=[],_e=0;_e<Se.length;_e++)if(Se[_e].x!==void 0)for(var he=b.call(this,Se[_e]),je=0;je<he.length;je+=1)De.indexOf(he[je])===-1&&De.push(he[je]);for(var He=0;He<De.length;He++)for(;this.pdf.internal.getNumberOfPages()<De[He];)y.call(this);if(S(De),this.autoPaging)for(var Xe=De[0],ye=De[De.length-1],Oe=Xe;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ie,this.strokeStyle=Ae,this.lineCap=oe,this.lineWidth=pe,this.lineJoin=Ie;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Oe===1?0:Ze+(Oe-2)*ot;if(this.ctx.clip_path.length!==0){var Tt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Y,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),N.call(this,P,!0),this.path=Tt}if(te=JSON.parse(JSON.stringify(ne)),this.path=C(te,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),K===!1||Oe===0){var Mt=(Oe>Xe||Oe<ye)&&v.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ot,null).clip().discardPath()),N.call(this,P,K),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=pe,N.call(this,P,K),this.lineWidth=ce;this.path=ne},N=function(P,K){if((P!=="stroke"||K||!g.call(this))&&(P==="stroke"||K||!p.call(this))){for(var Y,te,ie=[],Ae=this.path,oe=0;oe<Ae.length;oe++){var ce=Ae[oe];switch(ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ce,deltas:[],abs:[]});break;case"lt":var pe=ie.length;if(Ae[oe-1]&&!isNaN(Ae[oe-1].x)&&(Y=[ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],pe>0)){for(;pe>=0;pe--)if(ie[pe-1].close!==!0&&ie[pe-1].begin!==!0){ie[pe-1].deltas.push(Y),ie[pe-1].abs.push(ce);break}}break;case"bct":Y=[ce.x1-Ae[oe-1].x,ce.y1-Ae[oe-1].y,ce.x2-Ae[oe-1].x,ce.y2-Ae[oe-1].y,ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ie[ie.length-1].deltas.push(Y);break;case"qct":var Ie=Ae[oe-1].x+2/3*(ce.x1-Ae[oe-1].x),ne=Ae[oe-1].y+2/3*(ce.y1-Ae[oe-1].y),Se=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),_e=ce.x,he=ce.y;Y=[Ie-Ae[oe-1].x,ne-Ae[oe-1].y,Se-Ae[oe-1].x,De-Ae[oe-1].y,_e-Ae[oe-1].x,he-Ae[oe-1].y],ie[ie.length-1].deltas.push(Y);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ce)}}te=K?null:P==="stroke"?"stroke":"fill";for(var je=!1,He=0;He<ie.length;He++)if(ie[He].arc)for(var Xe=ie[He].abs,ye=0;ye<Xe.length;ye++){var Oe=Xe[ye];Oe.type==="arc"?_.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,K,!je):L.call(this,Oe.x,Oe.y),je=!0}else if(ie[He].close===!0)this.pdf.internal.out("h"),je=!1;else if(ie[He].begin!==!0){var Pe=ie[He].start.x,qe=ie[He].start.y;R.call(this,ie[He].deltas,Pe,qe),je=!0}te&&F.call(this,te),K&&U.call(this)}},B=function(P){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-Y;case"top":return P+K-Y;case"hanging":return P+K-2*Y;case"middle":return P+K/2-Y;case"ideographic":return P;case"alphabetic":default:return P}},w=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(K,Y){this.colorStops.push([K,Y])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(P,K,Y,te,ie,Ae,oe,ce,pe){for(var Ie=V.call(this,Y,te,ie,Ae),ne=0;ne<Ie.length;ne++){var Se=Ie[ne];ne===0&&(pe?D.call(this,Se.x1+P,Se.y1+K):L.call(this,Se.x1+P,Se.y1+K)),X.call(this,P,K,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ce?U.call(this):F.call(this,oe)},F=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,K){this.pdf.internal.out(r(P)+" "+n(K)+" m")},k=function(P){var K;switch(P.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var Y=this.pdf.getTextDimensions(P.text),te=B.call(this,P.y),ie=w.call(this,te)-Y.h,Ae=this.ctx.transform.applyToPoint(new i(P.x,te)),oe=this.ctx.transform.decompose(),ce=new l;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var pe,Ie,ne,Se=this.ctx.transform.applyToRectangle(new o(P.x,te,Y.w,Y.h)),De=ce.applyToRectangle(new o(P.x,ie,Y.w,Y.h)),_e=b.call(this,De),he=[],je=0;je<_e.length;je+=1)he.indexOf(_e[je])===-1&&he.push(_e[je]);if(S(he),this.autoPaging)for(var He=he[0],Xe=he[he.length-1],ye=He;ye<Xe+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],mt=ot-this.margin[3],Tt=ye===1?0:Pe+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Mt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(pe,this.posX+this.margin[3],-1*Tt+Oe),N.call(this,"fill",!0),this.path=Mt}var Ot=C([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale);var Qt=this.autoPaging!=="text";if(Qt||Ot.y+Ot.h<=qe){if(Qt||Ot.y>=Oe&&Ot.x<=ot){var bt=Qt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-Ot.x)[0],Nr=C([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0],rr=Qt&&(ye>He||ye<Xe)&&v.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ze,null).clip().discardPath()),this.pdf.text(bt,Nr.x,Nr.y,{angle:P.angle,align:K,renderingMode:P.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else Ot.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Ot.y);P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)}else P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale),this.pdf.text(P.text,Ae.x+this.posX,Ae.y+this.posY,{angle:P.angle,align:K,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)},L=function(P,K,Y,te){Y=Y||0,te=te||0,this.pdf.internal.out(r(P+Y)+" "+n(K+te)+" l")},R=function(P,K,Y){return this.pdf.lines(P,K,Y,null,null)},X=function(P,K,Y,te,ie,Ae,oe,ce){this.pdf.internal.out([t(a(Y+P)),t(s(te+K)),t(a(ie+P)),t(s(Ae+K)),t(a(oe+P)),t(s(ce+K)),"c"].join(" "))},V=function(P,K,Y,te){for(var ie=2*Math.PI,Ae=Math.PI/2;K>Y;)K-=ie;var oe=Math.abs(Y-K);oe<ie&&te&&(oe=ie-oe);for(var ce=[],pe=te?-1:1,Ie=K;oe>1e-5;){var ne=Ie+pe*Math.min(oe,Ae);ce.push(Z.call(this,P,Ie,ne)),oe-=Math.abs(ne-Ie),Ie=ne}return ce},Z=function(P,K,Y){var te=(Y-K)/2,ie=P*Math.cos(te),Ae=P*Math.sin(te),oe=ie,ce=-Ae,pe=oe*oe+ce*ce,Ie=pe+oe*ie+ce*Ae,ne=4/3*(Math.sqrt(2*pe*Ie)-Ie)/(oe*Ae-ce*ie),Se=oe-ne*ce,De=ce+ne*oe,_e=Se,he=-De,je=te+K,He=Math.cos(je),Xe=Math.sin(je);return{x1:P*Math.cos(K),y1:P*Math.sin(K),x2:Se*He-De*Xe,y2:Se*Xe+De*He,x3:_e*He-he*Xe,y3:_e*Xe+he*He,x4:P*Math.cos(Y),y4:P*Math.sin(Y)}},H=function(P){return 180*P/Math.PI},z=function(P,K,Y,te,ie,Ae){var oe=P+.5*(Y-P),ce=K+.5*(te-K),pe=ie+.5*(Y-ie),Ie=Ae+.5*(te-Ae),ne=Math.min(P,ie,oe,pe),Se=Math.max(P,ie,oe,pe),De=Math.min(K,Ae,ce,Ie),_e=Math.max(K,Ae,ce,Ie);return new o(ne,De,Se-ne,_e-De)},q=function(P,K,Y,te,ie,Ae,oe,ce){var pe,Ie,ne,Se,De,_e,he,je,He,Xe,ye,Oe,Pe,qe,Ze=Y-P,ot=te-K,mt=ie-Y,Tt=Ae-te,Mt=oe-ie,Ot=ce-Ae;for(Ie=0;Ie<41;Ie++)He=(he=(ne=P+(pe=Ie/40)*Ze)+pe*((De=Y+pe*mt)-ne))+pe*(De+pe*(ie+pe*Mt-De)-he),Xe=(je=(Se=K+pe*ot)+pe*((_e=te+pe*Tt)-Se))+pe*(_e+pe*(Ae+pe*Ot-_e)-je),Ie==0?(ye=He,Oe=Xe,Pe=He,qe=Xe):(ye=Math.min(ye,He),Oe=Math.min(Oe,Xe),Pe=Math.max(Pe,He),qe=Math.max(qe,Xe));return new o(Math.round(ye),Math.round(Oe),Math.round(Pe-ye),Math.round(qe-Oe))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,K,Y=(P=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:K}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(gr.API),function(e){var t=function(s){var i,o,l,u,d,f,h,p,g,v;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,v+33)):o.push(122);return function(b,y){for(var C=y;C>0;C--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,f=String,h="length",p=255,g="charCodeAt",v="slice",b="replace";for(s[v](-2),s=s[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[v](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,C){for(var S=C;S>0;S--)y.pop()}(l,i[h]),f.fromCharCode.apply(f,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=oF(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(gr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var v=g.length,b=[],y=String.fromCharCode;for(h=0;h<v;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(gr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):Sx(()=>Promise.resolve().then(()=>L8e),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):Sx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ga(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(v){return v.format==="truetype"});g&&l.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,d).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gr.getPageSize=function(i,o,l){if(ga(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,v=0;if(h.hasOwnProperty(f))g=h[f][1]/d,v=h[f][0]/d;else try{g=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",v>g&&(p=v,v=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(fF):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(gr.API),gr.API.addJS=function(e){return hQ=e,this.internal.events.subscribe("postPutResources",function(){KE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(KE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){KE!==void 0&&fQ!==void 0&&this.internal.out("/Names <</JavaScript "+KE+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(gr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,v={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),v={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(gr.API);var tv,qE,mQ,pQ,gQ,T2e=function(){var e,t,r;function n(s){var i,o,l,u,d,f,h,p,g,v,b,y,C,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var I,N;for(N=[],I=0;I<4;++I)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(C=0;0<=v?C<v:C>v;0<=v?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var v,b,y,C,S,I,N,B,w,_,F,U,D,k,L,R,X,V,Z,H,z,q=Math.ceil((u.width-f)/p),re=Math.ceil((u.height-h)/g),P=u.width==q&&u.height==re;for(k=i*q,U=P?o:new Uint8Array(k*re),I=s.length,D=0,b=0;D<re&&l<I;){switch(s[l++]){case 0:for(C=X=0;X<k;C=X+=1)U[b++]=s[l++];break;case 1:for(C=V=0;V<k;C=V+=1)v=s[l++],S=C<i?0:U[b-i],U[b++]=(v+S)%256;break;case 2:for(C=Z=0;Z<k;C=Z+=1)v=s[l++],y=(C-C%i)/i,L=D&&U[(D-1)*k+y*i+C%i],U[b++]=(L+v)%256;break;case 3:for(C=H=0;H<k;C=H+=1)v=s[l++],y=(C-C%i)/i,S=C<i?0:U[b-i],L=D&&U[(D-1)*k+y*i+C%i],U[b++]=(v+Math.floor((S+L)/2))%256;break;case 4:for(C=z=0;z<k;C=z+=1)v=s[l++],y=(C-C%i)/i,S=C<i?0:U[b-i],D===0?L=R=0:(L=U[(D-1)*k+y*i+C%i],R=y&&U[(D-1)*k+(y-1)*i+C%i]),N=S+L-R,B=Math.abs(N-S),_=Math.abs(N-L),F=Math.abs(N-R),w=B<=_&&B<=F?S:_<=F?L:R,U[b++]=(v+w)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!P){var K=((h+D*g)*u.width+f)*i,Y=D*k;for(C=0;C<q;C+=1){for(var te=0;te<i;te+=1)o[K++]=U[Y++];K+=(p-1)*i}}D++}}return s=l2e(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,f,h,p,g,v,b,y;if(l=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(u=s.data||s).length,f=v||i,d=h=0,l===1)for(;d<g;)p=v?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=v?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,p.push(i.image=e(l));return p}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=l[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function j2e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&v)==0&&(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,I=e[t++],N=I>>6&1,B=1<<(7&I)+1,w=o,_=l,F=!1;I>>7&&(F=!0,w=t,_=B,t+=3*B);var U=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:C,height:S,has_local_palette:F,palette_offset:w,palette_size:_,data_offset:U,data_length:t-U,transparent_index:h,interlaced:!!N,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,L){var R=this.frameInfo(k),X=R.width*R.height,V=new Uint8Array(X);vQ(e,R.data_offset,V,X);var Z=R.palette_offset,H=R.transparent_index;H===null&&(H=256);var z=R.width,q=r-z,re=z,P=4*(R.y*r+R.x),K=4*((R.y+R.height)*r+R.x),Y=P,te=4*q;R.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=V.length;Ae<oe;++Ae){var ce=V[Ae];if(re===0&&(re=z,(Y+=te)>=K&&(te=4*q+4*r*(ie-1),Y=P+(z+q)*(ie<<1),ie>>=1)),ce===H)Y+=4;else{var pe=e[Z+3*ce],Ie=e[Z+3*ce+1],ne=e[Z+3*ce+2];L[Y++]=ne,L[Y++]=Ie,L[Y++]=pe,L[Y++]=255}--re}},this.decodeAndBlitFrameRGBA=function(k,L){var R=this.frameInfo(k),X=R.width*R.height,V=new Uint8Array(X);vQ(e,R.data_offset,V,X);var Z=R.palette_offset,H=R.transparent_index;H===null&&(H=256);var z=R.width,q=r-z,re=z,P=4*(R.y*r+R.x),K=4*((R.y+R.height)*r+R.x),Y=P,te=4*q;R.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=V.length;Ae<oe;++Ae){var ce=V[Ae];if(re===0&&(re=z,(Y+=te)>=K&&(te=4*q+4*r*(ie-1),Y=P+(z+q)*(ie<<1),ie>>=1)),ce===H)Y+=4;else{var pe=e[Z+3*ce],Ie=e[Z+3*ce+1],ne=e[Z+3*ce+2];L[Y++]=pe,L[Y++]=Ie,L[Y++]=ne,L[Y++]=255}--re}}}function vQ(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),v=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<l)break;var b=f&u;if(f>>=l,d-=l,b!==s){if(b===i)break;for(var y=b<o?b:v,C=0,S=y;S>s;)S=g[S]>>8,++C;var I=S;if(h+C+(y!==b?1:0)>n)return void Sa.log("Warning, gif stream longer than expected.");r[h++]=I;var N=h+=C;for(y!==b&&(r[h++]=I),S=y;C--;)S=g[S],r[--N]=255&S,S>>=8;v!==null&&o<4096&&(g[o++]=v<<8|I,o>=u+1&&l<12&&(++l,u=u<<1|1)),v=b}else o=i+1,u=(1<<(l=a+1))-1,v=null}return h!==n&&Sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function cT(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),v=[],b=0,y=7,C=new Array(64),S=new Array(64),I=new Array(64),N=new Array(256),B=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(P,K){for(var Y=0,te=0,ie=new Array,Ae=1;Ae<=16;Ae++){for(var oe=1;oe<=P[Ae];oe++)ie[K[te]]=[],ie[K[te]][0]=Y,ie[K[te]][1]=Ae,te++,Y++;Y*=2}return ie}function Z(P){for(var K=P[0],Y=P[1]-1;Y>=0;)K&1<<Y&&(b|=1<<y),Y--,--y<0&&(b==255?(H(255),H(0)):H(b),y=7,b=0)}function H(P){v.push(P)}function z(P){H(P>>8&255),H(255&P)}function q(P,K,Y,te,ie){for(var Ae,oe=ie[0],ce=ie[240],pe=function(Xe,ye){var Oe,Pe,qe,Ze,ot,mt,Tt,Mt,Ot,Qt,bt=0;for(Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+1],qe=Xe[bt+2],Ze=Xe[bt+3],ot=Xe[bt+4],mt=Xe[bt+5],Tt=Xe[bt+6];var Nr=Oe+(Mt=Xe[bt+7]),rr=Oe-Mt,an=Pe+Tt,Cr=Pe-Tt,Vr=qe+mt,Fn=qe-mt,Ir=Ze+ot,vt=Ze-ot,pt=Nr+Ir,Je=Nr-Ir,gt=an+Vr,dt=an-Vr;Xe[bt]=pt+gt,Xe[bt+4]=pt-gt;var Dt=.707106781*(dt+Je);Xe[bt+2]=Je+Dt,Xe[bt+6]=Je-Dt;var zt=.382683433*((pt=vt+Fn)-(dt=Cr+rr)),Pr=.5411961*pt+zt,Xr=1.306562965*dt+zt,gn=.707106781*(gt=Fn+Cr),vn=rr+gn,$t=rr-gn;Xe[bt+5]=$t+Pr,Xe[bt+3]=$t-Pr,Xe[bt+1]=vn+Xr,Xe[bt+7]=vn-Xr,bt+=8}for(bt=0,Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+8],qe=Xe[bt+16],Ze=Xe[bt+24],ot=Xe[bt+32],mt=Xe[bt+40],Tt=Xe[bt+48];var rn=Oe+(Mt=Xe[bt+56]),en=Oe-Mt,cr=Pe+Tt,Yr=Pe-Tt,ra=qe+mt,fe=qe-mt,Be=Ze+ot,Ee=Ze-ot,Ce=rn+Be,Ne=rn-Be,Te=cr+ra,Ye=cr-ra;Xe[bt]=Ce+Te,Xe[bt+32]=Ce-Te;var ut=.707106781*(Ye+Ne);Xe[bt+16]=Ne+ut,Xe[bt+48]=Ne-ut;var $e=.382683433*((Ce=Ee+fe)-(Ye=Yr+en)),tt=.5411961*Ce+$e,at=1.306562965*Ye+$e,jt=.707106781*(Te=fe+Yr),Vt=en+jt,Jt=en-jt;Xe[bt+40]=Jt+tt,Xe[bt+24]=Jt-tt,Xe[bt+8]=Vt+at,Xe[bt+56]=Vt-at,bt++}for(Ot=0;Ot<64;++Ot)Qt=Xe[Ot]*ye[Ot],p[Ot]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(P,K),Ie=0;Ie<64;++Ie)g[w[Ie]]=pe[Ie];var ne=g[0]-Y;Y=g[0],ne==0?Z(te[0]):(Z(te[h[Ae=32767+ne]]),Z(f[Ae]));for(var Se=63;Se>0&&g[Se]==0;)Se--;if(Se==0)return Z(oe),Y;for(var De,_e=1;_e<=Se;){for(var he=_e;g[_e]==0&&_e<=Se;)++_e;var je=_e-he;if(je>=16){De=je>>4;for(var He=1;He<=De;++He)Z(ce);je&=15}Ae=32767+g[_e],Z(ie[(je<<4)+h[Ae]]),Z(f[Ae]),_e++}return Se!=63&&Z(oe),Y}function re(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(K){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ie=i((Y[te]*K+50)/100);ie=Math.min(Math.max(ie,1),255),o[w[te]]=ie}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((Ae[oe]*K+50)/100);ce=Math.min(Math.max(ce,1),255),l[w[oe]]=ce}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,ne=0;ne<8;ne++)for(var Se=0;Se<8;Se++)u[Ie]=1/(o[w[Ie]]*pe[ne]*pe[Se]*8),d[Ie]=1/(l[w[Ie]]*pe[ne]*pe[Se]*8),Ie++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,K){K&&re(K),v=new Array,b=0,y=7,z(65496),z(65504),z(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),z(1),z(1),H(0),H(0),function(){z(65499),z(132),H(0);for(var Pe=0;Pe<64;Pe++)H(o[Pe]);H(1);for(var qe=0;qe<64;qe++)H(l[qe])}(),function(Pe,qe){z(65472),z(17),H(8),z(qe),z(Pe),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(P.width,P.height),function(){z(65476),z(418),H(0);for(var Pe=0;Pe<16;Pe++)H(_[Pe+1]);for(var qe=0;qe<=11;qe++)H(F[qe]);H(16);for(var Ze=0;Ze<16;Ze++)H(U[Ze+1]);for(var ot=0;ot<=161;ot++)H(D[ot]);H(1);for(var mt=0;mt<16;mt++)H(k[mt+1]);for(var Tt=0;Tt<=11;Tt++)H(L[Tt]);H(17);for(var Mt=0;Mt<16;Mt++)H(R[Mt+1]);for(var Ot=0;Ot<=161;Ot++)H(X[Ot])}(),z(65498),z(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var Y=0,te=0,ie=0;b=0,y=7,this.encode.displayName="_encode_";for(var Ae,oe,ce,pe,Ie,ne,Se,De,_e,he=P.data,je=P.width,He=P.height,Xe=4*je,ye=0;ye<He;){for(Ae=0;Ae<Xe;){for(Ie=Xe*ye+Ae,Se=-1,De=0,_e=0;_e<64;_e++)ne=Ie+(De=_e>>3)*Xe+(Se=4*(7&_e)),ye+De>=He&&(ne-=Xe*(ye+1+De-He)),Ae+Se>=Xe&&(ne-=Ae+Se-Xe+4),oe=he[ne++],ce=he[ne++],pe=he[ne++],C[_e]=(B[oe]+B[ce+256>>0]+B[pe+512>>0]>>16)-128,S[_e]=(B[oe+768>>0]+B[ce+1024>>0]+B[pe+1280>>0]>>16)-128,I[_e]=(B[oe+1280>>0]+B[ce+1536>>0]+B[pe+1792>>0]>>16)-128;Y=q(C,u,Y,t,n),te=q(S,d,te,r,a),ie=q(I,d,ie,r,a),Ae+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,Z(Oe)}return z(65497),new Uint8Array(v)},e=e||50,function(){for(var P=String.fromCharCode,K=0;K<256;K++)N[K]=P(K)}(),t=V(_,F),r=V(k,L),n=V(U,D),a=V(R,X),function(){for(var P=1,K=2,Y=1;Y<=15;Y++){for(var te=P;te<K;te++)h[32767+te]=Y,f[32767+te]=[],f[32767+te][1]=Y,f[32767+te][0]=te;for(var ie=-(K-1);ie<=-P;ie++)h[32767+ie]=Y,f[32767+ie]=[],f[32767+ie][1]=Y,f[32767+ie][0]=K-1+ie;P<<=1,K<<=1}}(),function(){for(var P=0;P<256;P++)B[P]=19595*P,B[P+256>>0]=38470*P,B[P+512>>0]=7471*P+32768,B[P+768>>0]=-11059*P,B[P+1024>>0]=-21709*P,B[P+1280>>0]=32768*P+8421375,B[P+1536>>0]=-27439*P,B[P+1792>>0]=-5329*P}(),re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xQ(e){function t(_){if(!_)throw Error("assert :P")}function r(_,F,U){for(var D=0;4>D;D++)if(_[F+D]!=U.charCodeAt(D))return!0;return!1}function n(_,F,U,D,k){for(var L=0;L<k;L++)_[F+L]=U[D+L]}function a(_,F,U,D){for(var k=0;k<D;k++)_[F+k]=U}function s(_){return new Int32Array(_)}function i(_,F){for(var U=[],D=0;D<_;D++)U.push(new F);return U}function o(_,F){var U=[];return function D(k,L,R){for(var X=R[L],V=0;V<X&&(k.push(R.length>L+1?[]:new F),!(R.length<L+1));V++)D(k[V],L+1,R)}(U,0,_),U}var l=function(){var _=this;function F(j,Q){for(var J=1<<Q-1>>>0;j&J;)J>>>=1;return J?(j&J-1)+J:j}function U(j,Q,J,ae,ue){t(!(ae%J));do j[Q+(ae-=J)]=ue;while(0<ae)}function D(j,Q,J,ae,ue){if(t(2328>=ue),512>=ue)var me=s(512);else if((me=s(ue))==null)return 0;return function(ge,ve,we,ke,Me,nt){var et,Ke,kt=ve,ht=1<<we,Ue=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(ge!=null),t(0<we),Ke=0;Ke<Me;++Ke){if(15<ke[Ke])return 0;++Ue[ke[Ke]]}if(Ue[0]==Me)return 0;for(Ve[1]=0,et=1;15>et;++et){if(Ue[et]>1<<et)return 0;Ve[et+1]=Ve[et]+Ue[et]}for(Ke=0;Ke<Me;++Ke)et=ke[Ke],0<ke[Ke]&&(nt[Ve[et]++]=Ke);if(Ve[15]==1)return(ke=new k).g=0,ke.value=nt[0],U(ge,kt,1,ht,ke),ht;var Et,Bt=-1,St=ht-1,nr=0,Xt=1,pr=1,er=1<<we;for(Ke=0,et=1,Me=2;et<=we;++et,Me<<=1){if(Xt+=pr<<=1,0>(pr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et])(ke=new k).g=et,ke.value=nt[Ke++],U(ge,kt+nr,Me,er,ke),nr=F(nr,et)}for(et=we+1,Me=2;15>=et;++et,Me<<=1){if(Xt+=pr<<=1,0>(pr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et]){if(ke=new k,(nr&St)!=Bt){for(kt+=er,Et=1<<(Bt=et)-we;15>Bt&&!(0>=(Et-=Ue[Bt]));)++Bt,Et<<=1;ht+=er=1<<(Et=Bt-we),ge[ve+(Bt=nr&St)].g=Et+we,ge[ve+Bt].value=kt-ve-Bt}ke.g=et-we,ke.value=nt[Ke++],U(ge,kt+(nr>>we),Me,er,ke),nr=F(nr,et)}}return Xt!=2*Ve[15]-1?0:ht}(j,Q,J,ae,ue,me)}function k(){this.value=this.g=0}function L(){this.value=this.g=0}function R(){this.G=i(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Os,L)}function X(j,Q,J,ae){t(j!=null),t(Q!=null),t(2147483648>ae),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=Q,j.pa=J,j.Jd=Q,j.Yc=J+ae,j.Zc=4<=ae?J+ae-4+1:J,Ae(j)}function V(j,Q){for(var J=0;0<Q--;)J|=ce(j,128)<<Q;return J}function Z(j,Q){var J=V(j,Q);return oe(j)?-J:J}function H(j,Q,J,ae){var ue,me=0;for(t(j!=null),t(Q!=null),t(4294967288>ae),j.Sb=ae,j.Ra=0,j.u=0,j.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)me+=Q[J+ue]<<8*ue;j.Ra=me,j.bb=ae,j.oa=Q,j.pa=J}function z(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<sf-8>>>0,++j.bb,j.u-=8;Y(j)&&(j.h=1,j.u=0)}function q(j,Q){if(t(0<=Q),!j.h&&Q<=af){var J=K(j)&$d[Q];return j.u+=Q,z(j),J}return j.h=1,j.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(j){return j.Ra>>>(j.u&sf-1)>>>0}function Y(j){return t(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>sf}function te(j,Q){j.u=Q,j.h=Y(j)}function ie(j){j.u>=Fh&&(t(j.u>=Fh),z(j))}function Ae(j){t(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(t(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function oe(j){return V(j,1)}function ce(j,Q){var J=j.Ca;0>j.b&&Ae(j);var ae=j.b,ue=J*Q>>>8,me=(j.I>>>ae>ue)+0;for(me?(J-=ue,j.I-=ue+1<<ae>>>0):J=ue+1,ae=J,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+So[ae],j.b-=ae,j.Ca=(J<<ae)-1,me}function pe(j,Q,J){j[Q+0]=J>>24&255,j[Q+1]=J>>16&255,j[Q+2]=J>>8&255,j[Q+3]=J>>0&255}function Ie(j,Q){return j[Q+0]<<0|j[Q+1]<<8}function ne(j,Q){return Ie(j,Q)|j[Q+2]<<16}function Se(j,Q){return Ie(j,Q)|Ie(j,Q+2)<<16}function De(j,Q){var J=1<<Q;return t(j!=null),t(0<Q),j.X=s(J),j.X==null?0:(j.Mb=32-Q,j.Xa=Q,1)}function _e(j,Q){t(j!=null),t(Q!=null),t(j.Xa==Q.Xa),n(Q.X,0,j.X,0,1<<Q.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function je(j,Q,J,ae){t(J!=null),t(ae!=null);var ue=J[0],me=ae[0];return ue==0&&(ue=(j*me+Q/2)/Q),me==0&&(me=(Q*ue+j/2)/j),0>=ue||0>=me?0:(J[0]=ue,ae[0]=me,1)}function He(j,Q){return j+(1<<Q)-1>>>Q}function Xe(j,Q){return((4278255360&j)+(4278255360&Q)>>>0&4278255360)+((16711935&j)+(16711935&Q)>>>0&16711935)>>>0}function ye(j,Q){_[Q]=function(J,ae,ue,me,ge,ve,we){var ke;for(ke=0;ke<ge;++ke){var Me=_[j](ve[we+ke-1],ue,me+ke);ve[we+ke]=Xe(J[ae+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Pe(j,Q){return((4278124286&(j^Q))>>>1)+(j&Q)>>>0}function qe(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Ze(j,Q){return qe(j+(j-Q+.5>>1))}function ot(j,Q,J){return Math.abs(Q-J)-Math.abs(j-J)}function mt(j,Q,J,ae,ue,me,ge){for(ae=me[ge-1],J=0;J<ue;++J)me[ge+J]=ae=Xe(j[Q+J],ae)}function Tt(j,Q,J,ae,ue){var me;for(me=0;me<J;++me){var ge=j[Q+me],ve=ge>>8&255,we=16711935&(we=(we=16711935&ge)+((ve<<16)+ve));ae[ue+me]=(4278255360&ge)+we>>>0}}function Mt(j,Q){Q.jd=j>>0&255,Q.hd=j>>8&255,Q.ud=j>>16&255}function Ot(j,Q,J,ae,ue,me){var ge;for(ge=0;ge<ae;++ge){var ve=Q[J+ge],we=ve>>>8,ke=ve,Me=255&(Me=(Me=ve>>>16)+((j.jd<<24>>24)*(we<<24>>24)>>>5));ke=255&(ke=(ke=ke+((j.hd<<24>>24)*(we<<24>>24)>>>5))+((j.ud<<24>>24)*(Me<<24>>24)>>>5)),ue[me+ge]=(4278255360&ve)+(Me<<16)+ke}}function Qt(j,Q,J,ae,ue){_[Q]=function(me,ge,ve,we,ke,Me,nt,et,Ke){for(we=nt;we<et;++we)for(nt=0;nt<Ke;++nt)ke[Me++]=ue(ve[ae(me[ge++])])},_[j]=function(me,ge,ve,we,ke,Me,nt){var et=8>>me.b,Ke=me.Ea,kt=me.K[0],ht=me.w;if(8>et)for(me=(1<<me.b)-1,ht=(1<<et)-1;ge<ve;++ge){var Ue,Ve=0;for(Ue=0;Ue<Ke;++Ue)Ue&me||(Ve=ae(we[ke++])),Me[nt++]=ue(kt[Ve&ht]),Ve>>=et}else _["VP8LMapColor"+J](we,ke,kt,ht,Me,nt,ge,ve,Ke)}}function bt(j,Q,J,ae,ue){for(J=Q+J;Q<J;){var me=j[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255}}function Nr(j,Q,J,ae,ue){for(J=Q+J;Q<J;){var me=j[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255,ae[ue++]=me>>24&255}}function rr(j,Q,J,ae,ue){for(J=Q+J;Q<J;){var me=(ge=j[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ae[ue++]=me,ae[ue++]=ge}}function an(j,Q,J,ae,ue){for(J=Q+J;Q<J;){var me=(ge=j[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ae[ue++]=me,ae[ue++]=ge}}function Cr(j,Q,J,ae,ue){for(J=Q+J;Q<J;){var me=j[Q++];ae[ue++]=me>>0&255,ae[ue++]=me>>8&255,ae[ue++]=me>>16&255}}function Vr(j,Q,J,ae,ue,me){if(me==0)for(J=Q+J;Q<J;)pe(ae,((me=j[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ue+=32;else n(ae,ue,j,Q,J)}function Fn(j,Q){_[Q][0]=_[j+"0"],_[Q][1]=_[j+"1"],_[Q][2]=_[j+"2"],_[Q][3]=_[j+"3"],_[Q][4]=_[j+"4"],_[Q][5]=_[j+"5"],_[Q][6]=_[j+"6"],_[Q][7]=_[j+"7"],_[Q][8]=_[j+"8"],_[Q][9]=_[j+"9"],_[Q][10]=_[j+"10"],_[Q][11]=_[j+"11"],_[Q][12]=_[j+"12"],_[Q][13]=_[j+"13"],_[Q][14]=_[j+"0"],_[Q][15]=_[j+"0"]}function Ir(j){return j==Im||j==tA||j==Xu||j==Ph}function vt(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new pt,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function zt(j,Q){var J=j.T,ae=Q.ba.f.RGBA,ue=ae.eb,me=ae.fb+j.ka*ae.A,ge=ni[Q.ba.S],ve=j.y,we=j.O,ke=j.f,Me=j.N,nt=j.ea,et=j.W,Ke=Q.cc,kt=Q.dc,ht=Q.Mc,Ue=Q.Nc,Ve=j.ka,Et=j.ka+j.T,Bt=j.U,St=Bt+1>>1;for(Ve==0?ge(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me,null,null,Bt):(ge(Q.ec,Q.fc,ve,we,Ke,kt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,Bt),++J);Ve+2<Et;Ve+=2)Ke=ke,kt=Me,ht=nt,Ue=et,Me+=j.Rc,et+=j.Rc,me+=2*ae.A,ge(ve,(we+=2*j.fa)-j.fa,ve,we,Ke,kt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,Bt);return we+=j.fa,j.j+Et<j.o?(n(Q.ec,Q.fc,ve,we,Bt),n(Q.cc,Q.dc,ke,Me,St),n(Q.Mc,Q.Nc,nt,et,St),J--):1&Et||ge(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me+ae.A,null,null,Bt),J}function Pr(j,Q,J){var ae=j.F,ue=[j.J];if(ae!=null){var me=j.U,ge=Q.ba.S,ve=ge==df||ge==Xu;Q=Q.ba.f.RGBA;var we=[0],ke=j.ka;we[0]=j.T,j.Kb&&(ke==0?--we[0]:(--ke,ue[0]-=j.width),j.j+j.ka+j.T==j.o&&(we[0]=j.o-j.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,j=mn(ae,ue[0],j.width,me,we,Me,ke+(ve?0:3),Q.A),t(J==we),j&&Ir(ge)&&sl(Me,ke,ve,me,we,Q.A)}return 0}function Xr(j){var Q=j.ma,J=Q.ba.S,ae=11>J,ue=J==Rh||J==jm||J==df||J==Wu||J==12||Ir(J);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!zd(Q.Oa,j,ue?11:12))return 0;if(ue&&Ir(J)&&Pt(),j.da)alert("todo:use_scaling");else{if(ae){if(Q.Ib=Dt,j.Kb){if(J=j.U+1>>1,Q.memory=s(j.U+2*J),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+j.U,Q.Mc=Q.cc,Q.Nc=Q.dc+J,Q.Ib=zt,Pt()}}else alert("todo:EmitYUV");ue&&(Q.Jb=Pr,ae&&Ge())}if(ae&&!L2){for(j=0;256>j;++j)wk[j]=89858*(j-128)+Rs>>iu,Dm[j]=-22014*(j-128)+Rs,O1[j]=-45773*(j-128),Ps[j]=113618*(j-128)+Rs>>iu;for(j=aA;j<Bg;++j)Q=76283*(j-16)+Rs>>iu,Rm[j-aA]=zn(Q,255),D1[j-aA]=zn(Q+8>>4,15);L2=1}return 1}function gn(j){var Q=j.ma,J=j.U,ae=j.T;return t(!(1&j.ka)),0>=J||0>=ae?0:(J=Q.Ib(j,Q),Q.Jb!=null&&Q.Jb(j,Q,J),Q.Dc+=J,1)}function vn(j){j.ma.memory=null}function $t(j,Q,J,ae){return q(j,8)!=47?0:(Q[0]=q(j,14)+1,J[0]=q(j,14)+1,ae[0]=q(j,1),q(j,3)!=0?0:!j.h)}function rn(j,Q){if(4>j)return j+1;var J=j-2>>1;return(2+(1&j)<<J)+q(Q,J)+1}function en(j,Q){return 120<Q?Q-120:1<=(J=((J=Ju[Q-1])>>4)*j+(8-(15&J)))?J:1;var J}function cr(j,Q,J){var ae=K(J),ue=j[Q+=255&ae].g-8;return 0<ue&&(te(J,J.u+8),ae=K(J),Q+=j[Q].value,Q+=ae&(1<<ue)-1),te(J,J.u+j[Q].g),j[Q].value}function Yr(j,Q,J){return J.g+=j.g,J.value+=j.value<<Q>>>0,t(8>=J.g),j.g}function ra(j,Q,J){var ae=j.xc;return t((Q=ae==0?0:j.vc[j.md*(J>>ae)+(Q>>ae)])<j.Wb),j.Ya[Q]}function fe(j,Q,J,ae){var ue=j.ab,me=j.c*Q,ge=j.C;Q=ge+Q;var ve=J,we=ae;for(ae=j.Ta,J=j.Ua;0<ue--;){var ke=j.gc[ue],Me=ge,nt=Q,et=ve,Ke=we,kt=(we=ae,ve=J,ke.Ea);switch(t(Me<nt),t(nt<=ke.nc),ke.hc){case 2:wg(et,Ke,(nt-Me)*kt,we,ve);break;case 0:var ht=Me,Ue=nt,Ve=we,Et=ve,Bt=(er=ke).Ea;ht==0&&(I1(et,Ke,null,null,1,Ve,Et),mt(et,Ke+1,0,0,Bt-1,Ve,Et+1),Ke+=Bt,Et+=Bt,++ht);for(var St=1<<er.b,nr=St-1,Xt=He(Bt,er.b),pr=er.K,er=er.w+(ht>>er.b)*Xt;ht<Ue;){var Rn=pr,$n=er,fn=1;for(Bm(et,Ke,Ve,Et-Bt,1,Ve,Et);fn<Bt;){var ln=(fn&~nr)+St;ln>Bt&&(ln=Bt),(0,Gu[Rn[$n++]>>8&15])(et,Ke+ +fn,Ve,Et+fn-Bt,ln-fn,Ve,Et+fn),fn=ln}Ke+=Bt,Et+=Bt,++ht&nr||(er+=Xt)}nt!=ke.nc&&n(we,ve-kt,we,ve+(nt-Me-1)*kt,kt);break;case 1:for(kt=et,Ue=Ke,Bt=(et=ke.Ea)-(Et=et&~(Ve=(Ke=1<<ke.b)-1)),ht=He(et,ke.b),St=ke.K,ke=ke.w+(Me>>ke.b)*ht;Me<nt;){for(nr=St,Xt=ke,pr=new Oe,er=Ue+Et,Rn=Ue+et;Ue<er;)Mt(nr[Xt++],pr),Kd(pr,kt,Ue,Ke,we,ve),Ue+=Ke,ve+=Ke;Ue<Rn&&(Mt(nr[Xt++],pr),Kd(pr,kt,Ue,Bt,we,ve),Ue+=Bt,ve+=Bt),++Me&Ve||(ke+=ht)}break;case 3:if(et==we&&Ke==ve&&0<ke.b){for(Ue=we,et=kt=ve+(nt-Me)*kt-(Et=(nt-Me)*He(ke.Ea,ke.b)),Ke=we,Ve=ve,ht=[],Et=(Bt=Et)-1;0<=Et;--Et)ht[Et]=Ke[Ve+Et];for(Et=Bt-1;0<=Et;--Et)Ue[et+Et]=ht[Et];jl(ke,Me,nt,we,kt,we,ve)}else jl(ke,Me,nt,et,Ke,we,ve)}ve=ae,we=J}we!=J&&n(ae,J,ve,we,me)}function Be(j,Q){var J=j.V,ae=j.Ba+j.c*j.C,ue=Q-j.C;if(t(Q<=j.l.o),t(16>=ue),0<ue){var me=j.l,ge=j.Ta,ve=j.Ua,we=me.width;if(fe(j,ue,J,ae),ue=ve=[ve],t((J=j.C)<(ae=Q)),t(me.v<me.va),ae>me.o&&(ae=me.o),J<me.j){var ke=me.j-J;J=me.j,ue[0]+=ke*we}if(J>=ae?J=0:(ue[0]+=4*me.v,me.ka=J-me.j,me.U=me.va-me.v,me.T=ae-J,J=1),J){if(ve=ve[0],11>(J=j.ca).S){var Me=J.f.RGBA,nt=(ae=J.S,ue=me.U,me=me.T,ke=Me.eb,Me.A),et=me;for(Me=Me.fb+j.Ma*Me.A;0<et--;){var Ke=ge,kt=ve,ht=ue,Ue=ke,Ve=Me;switch(ae){case Ri:no(Ke,kt,ht,Ue,Ve);break;case Rh:yi(Ke,kt,ht,Ue,Ve);break;case Im:yi(Ke,kt,ht,Ue,Ve),sl(Ue,Ve,0,ht,1,0);break;case ru:cc(Ke,kt,ht,Ue,Ve);break;case jm:Vr(Ke,kt,ht,Ue,Ve,1);break;case tA:Vr(Ke,kt,ht,Ue,Ve,1),sl(Ue,Ve,0,ht,1,0);break;case df:Vr(Ke,kt,ht,Ue,Ve,0);break;case Xu:Vr(Ke,kt,ht,Ue,Ve,0),sl(Ue,Ve,1,ht,1,0);break;case Wu:qd(Ke,kt,ht,Ue,Ve);break;case Ph:qd(Ke,kt,ht,Ue,Ve),hn(Ue,Ve,ht,1,0);break;case Cg:No(Ke,kt,ht,Ue,Ve);break;default:t(0)}ve+=we,Me+=nt}j.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(j.Ma<=J.height)}}j.C=Q,t(j.C<=j.i)}function Ee(j){var Q;if(0<j.ua)return 0;for(Q=0;Q<j.Wb;++Q){var J=j.Ya[Q].G,ae=j.Ya[Q].H;if(0<J[1][ae[1]+0].g||0<J[2][ae[2]+0].g||0<J[3][ae[3]+0].g)return 0}return 1}function Ce(j,Q,J,ae,ue,me){if(j.Z!=0){var ge=j.qd,ve=j.rd;for(t(au[j.Z]!=null);Q<J;++Q)au[j.Z](ge,ve,ae,ue,ae,ue,me),ge=ae,ve=ue,ue+=me;j.qd=ge,j.rd=ve}}function Ne(j,Q){var J=j.l.ma,ae=J.Z==0||J.Z==1?j.l.j:j.C;if(ae=j.C<ae?ae:j.C,t(Q<=j.l.o),Q>ae){var ue=j.l.width,me=J.ca,ge=J.tb+ue*ae,ve=j.V,we=j.Ba+j.c*ae,ke=j.gc;t(j.ab==1),t(ke[0].hc==3),Gd(ke[0],ae,Q,ve,we,me,ge),Ce(J,ae,Q,me,ge,ue)}j.C=j.Ma=Q}function Te(j,Q,J,ae,ue,me,ge){var ve=j.$/ae,we=j.$%ae,ke=j.m,Me=j.s,nt=J+j.$,et=nt;ue=J+ae*ue;var Ke=J+ae*me,kt=280+Me.ua,ht=j.Pb?ve:16777216,Ue=0<Me.ua?Me.Wa:null,Ve=Me.wc,Et=nt<Ke?ra(Me,we,ve):null;t(j.C<me),t(Ke<=ue);var Bt=!1;e:for(;;){for(;Bt||nt<Ke;){var St=0;if(ve>=ht){var nr=nt-J;t((ht=j).Pb),ht.wd=ht.m,ht.xd=nr,0<ht.s.ua&&_e(ht.s.Wa,ht.s.vb),ht=ve+D2}if(we&Ve||(Et=ra(Me,we,ve)),t(Et!=null),Et.Qb&&(Q[nt]=Et.qb,Bt=!0),!Bt)if(ie(ke),Et.jc){St=ke,nr=Q;var Xt=nt,pr=Et.pd[K(St)&Os-1];t(Et.jc),256>pr.g?(te(St,St.u+pr.g),nr[Xt]=pr.value,St=0):(te(St,St.u+pr.g-256),t(256<=pr.value),St=pr.value),St==0&&(Bt=!0)}else St=cr(Et.G[0],Et.H[0],ke);if(ke.h)break;if(Bt||256>St){if(!Bt)if(Et.nd)Q[nt]=(Et.qb|St<<8)>>>0;else{if(ie(ke),Bt=cr(Et.G[1],Et.H[1],ke),ie(ke),nr=cr(Et.G[2],Et.H[2],ke),Xt=cr(Et.G[3],Et.H[3],ke),ke.h)break;Q[nt]=(Xt<<24|Bt<<16|St<<8|nr)>>>0}if(Bt=!1,++nt,++we>=ae&&(we=0,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(j,ve),Ue!=null))for(;et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St}else if(280>St){if(St=rn(St-256,ke),nr=cr(Et.G[4],Et.H[4],ke),ie(ke),nr=en(ae,nr=rn(nr,ke)),ke.h)break;if(nt-J<nr||ue-nt<St)break e;for(Xt=0;Xt<St;++Xt)Q[nt+Xt]=Q[nt+Xt-nr];for(nt+=St,we+=St;we>=ae;)we-=ae,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(j,ve);if(t(nt<=ue),we&Ve&&(Et=ra(Me,we,ve)),Ue!=null)for(;et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St}else{if(!(St<kt))break e;for(Bt=St-280,t(Ue!=null);et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St;St=nt,t(!(Bt>>>(nr=Ue).Xa)),Q[St]=nr.X[Bt],Bt=!0}Bt||t(ke.h==Y(ke))}if(j.Pb&&ke.h&&nt<ue)t(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&_e(j.s.vb,j.s.Wa);else{if(ke.h)break e;ge!=null&&ge(j,ve>me?me:ve),j.a=0,j.$=nt-J}return 1}return j.a=3,0}function Ye(j){t(j!=null),j.vc=null,j.yc=null,j.Ya=null;var Q=j.Wa;Q!=null&&(Q.X=null),j.vb=null,t(j!=null)}function ut(){var j=new jh;return j==null?null:(j.a=0,j.xb=Lh,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),wg=Tt,Kd=Ot,no=bt,yi=Nr,qd=rr,No=an,cc=Cr,_.VP8LMapColor32b=ti,_.VP8LMapColor8b=Tm,j)}function $e(j,Q,J,ae,ue){var me=1,ge=[j],ve=[Q],we=ae.m,ke=ae.s,Me=null,nt=0;e:for(;;){if(J)for(;me&&q(we,1);){var et=ge,Ke=ve,kt=ae,ht=1,Ue=kt.m,Ve=kt.gc[kt.ab],Et=q(Ue,2);if(kt.Oc&1<<Et)me=0;else{switch(kt.Oc|=1<<Et,Ve.hc=Et,Ve.Ea=et[0],Ve.nc=Ke[0],Ve.K=[null],++kt.ab,t(4>=kt.ab),Et){case 0:case 1:Ve.b=q(Ue,3)+2,ht=$e(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,kt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Bt,St=q(Ue,8)+1,nr=16<St?0:4<St?1:2<St?2:3;if(et[0]=He(Ve.Ea,nr),Ve.b=nr,Bt=ht=$e(St,1,0,kt,Ve.K)){var Xt,pr=St,er=Ve,Rn=1<<(8>>er.b),$n=s(Rn);if($n==null)Bt=0;else{var fn=er.K[0],ln=er.w;for($n[0]=er.K[0][0],Xt=1;Xt<1*pr;++Xt)$n[Xt]=Xe(fn[ln+Xt],$n[Xt-1]);for(;Xt<4*Rn;++Xt)$n[Xt]=0;er.K[0]=null,er.K[0]=$n,Bt=1}}ht=Bt;break;case 2:break;default:t(0)}me=ht}}if(ge=ge[0],ve=ve[0],me&&q(we,1)&&!(me=1<=(nt=q(we,4))&&11>=nt)){ae.a=3;break e}var aa;if(aa=me)t:{var Gn,qr,da,Sr=ae,Lr=ge,Dn=ve,Pn=nt,ai=J,Ls=Sr.m,rs=Sr.s,ns=[null],xs=1,Dl=0,Kn=ff[Pn];r:for(;;){if(ai&&q(Ls,1)){var bs=q(Ls,3)+2,Ac=He(Lr,bs),sA=He(Dn,bs),pf=Ac*sA;if(!$e(Ac,sA,0,Sr,ns))break r;for(ns=ns[0],rs.xc=bs,Gn=0;Gn<pf;++Gn){var iA=ns[Gn]>>8&65535;ns[Gn]=iA,iA>=xs&&(xs=iA+1)}}if(Ls.h)break r;for(qr=0;5>qr;++qr){var Ta=il[qr];!qr&&0<Pn&&(Ta+=1<<Pn),Dl<Ta&&(Dl=Ta)}var Pm=i(xs*Kn,k),Tg=xs,so=i(Tg,R);if(so==null)var Ra=null;else t(65536>=Tg),Ra=so;var gf=s(Dl);if(Ra==null||gf==null||Pm==null){Sr.a=1;break r}var oA=Pm;for(Gn=da=0;Gn<xs;++Gn){var Bo=Ra[Gn],lA=Bo.G,To=Bo.H,Lm=0,Uh=1,jg=0;for(qr=0;5>qr;++qr){Ta=il[qr],lA[qr]=oA,To[qr]=da,!qr&&0<Pn&&(Ta+=1<<Pn);a:{var Mm,Ig=Ta,Um=Sr,Qh=gf,Q2=oA,H2=da,Qm=0,rd=Um.m,Ck=q(rd,1);if(a(Qh,0,0,Ig),Ck){var V2=q(rd,1)+1,z2=q(rd,1),R1=q(rd,z2==0?1:8);Qh[R1]=1,V2==2&&(Qh[R1=q(rd,8)]=1);var Hh=1}else{var P1=s(19),L1=q(rd,4)+4;if(19<L1){Um.a=3;var Hm=0;break a}for(Mm=0;Mm<L1;++Mm)P1[Yu[Mm]]=q(rd,3);var Fg=void 0,Vh=void 0,$2=Um,G2=P1,nd=Ig,Vm=Qh,Og=0,fc=$2.m,zh=8,M1=i(128,k);n:for(;D(M1,0,7,G2,19);){if(q(fc,1)){var K2=2+2*q(fc,3);if((Fg=2+q(fc,K2))>nd)break n}else Fg=nd;for(Vh=0;Vh<nd&&Fg--;){ie(fc);var U1=M1[0+(127&K(fc))];te(fc,fc.u+U1.g);var vf=U1.value;if(16>vf)Vm[Vh++]=vf,vf!=0&&(zh=vf);else{var q2=vf==16,Q1=vf-16,H1=Ol[Q1],V1=q(fc,_g[Q1])+H1;if(Vh+V1>nd)break n;for(var W2=q2?zh:0;0<V1--;)Vm[Vh++]=W2}}Og=1;break n}Og||($2.a=3),Hh=Og}(Hh=Hh&&!rd.h)&&(Qm=D(Q2,H2,8,Qh,Ig)),Hh&&Qm!=0?Hm=Qm:(Um.a=3,Hm=0)}if(Hm==0)break r;if(Uh&&Af[qr]==1&&(Uh=oA[da].g==0),Lm+=oA[da].g,da+=Hm,3>=qr){var xf,Dg=gf[0];for(xf=1;xf<Ta;++xf)gf[xf]>Dg&&(Dg=gf[xf]);jg+=Dg}}if(Bo.nd=Uh,Bo.Qb=0,Uh&&(Bo.qb=(lA[3][To[3]+0].value<<24|lA[1][To[1]+0].value<<16|lA[2][To[2]+0].value)>>>0,Lm==0&&256>lA[0][To[0]+0].value&&(Bo.Qb=1,Bo.qb+=lA[0][To[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>jg,Bo.jc){var zm,ad=Bo;for(zm=0;zm<Os;++zm){var ou=zm,sd=ad.pd[ou],$m=ad.G[0][ad.H[0]+ou];256<=$m.value?(sd.g=$m.g+256,sd.value=$m.value):(sd.g=0,sd.value=0,ou>>=Yr($m,8,sd),ou>>=Yr(ad.G[1][ad.H[1]+ou],16,sd),ou>>=Yr(ad.G[2][ad.H[2]+ou],0,sd),Yr(ad.G[3][ad.H[3]+ou],24,sd))}}}rs.vc=ns,rs.Wb=xs,rs.Ya=Ra,rs.yc=Pm,aa=1;break t}aa=0}if(!(me=aa)){ae.a=3;break e}if(0<nt){if(ke.ua=1<<nt,!De(ke.Wa,nt)){ae.a=1,me=0;break e}}else ke.ua=0;var Gm=ae,z1=ge,X2=ve,$1=Gm.s,G1=$1.xc;if(Gm.c=z1,Gm.i=X2,$1.md=He(z1,G1),$1.wc=G1==0?-1:(1<<G1)-1,J){ae.xb=P2;break e}if((Me=s(ge*ve))==null){ae.a=1,me=0;break e}me=(me=Te(ae,Me,0,ge,ve,ve,null))&&!we.h;break e}return me?(ue!=null?ue[0]=Me:(t(Me==null),t(J)),ae.$=0,J||Ye(ke)):Ye(ke),me}function tt(j,Q){var J=j.c*j.i,ae=J+Q+16*Q;return t(j.c<=Q),j.V=s(ae),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+J+Q,1)}function at(j,Q){var J=j.C,ae=Q-J,ue=j.V,me=j.Ba+j.c*J;for(t(Q<=j.l.o);0<ae;){var ge=16<ae?16:ae,ve=j.l.ma,we=j.l.width,ke=we*ge,Me=ve.ca,nt=ve.tb+we*J,et=j.Ta,Ke=j.Ua;fe(j,ge,ue,me),ba(et,Ke,Me,nt,ke),Ce(ve,J,J+ge,Me,nt,we),ae-=ge,ue+=ge*j.c,J+=ge}t(J==Q),j.C=j.Ma=Q}function jt(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var j=[];return function Q(J,ae,ue){for(var me=ue[ae],ge=0;ge<me&&(J.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));ge++)Q(J[ge],ae+1,ue)}(j,0,[3,11]),j}()}function Gt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new Fs}function ms(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Zs(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new jt,this.Kc=new Vt,this.ed=new _r,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,re),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ms),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=o([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gi(){var j=new Zs;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,Ds||(Ds=Nh)),j}function xa(j,Q,J){return j.a==0&&(j.a=Q,j.sc=J,j.cb=0),0}function ei(j,Q,J){return 3<=J&&j[Q+0]==157&&j[Q+1]==1&&j[Q+2]==42}function Pd(j,Q){if(j==null)return 0;if(j.a=0,j.sc="OK",Q==null)return xa(j,2,"null VP8Io passed to VP8GetHeaders()");var J=Q.data,ae=Q.w,ue=Q.ha;if(4>ue)return xa(j,7,"Truncated header.");var me=J[ae+0]|J[ae+1]<<8|J[ae+2]<<16,ge=j.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return xa(j,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(j,4,"Frame not displayable.");ae+=3,ue-=3;var ve=j.Kc;if(ge.Rb){if(7>ue)return xa(j,7,"cannot parse picture header");if(!ei(J,ae,ue))return xa(j,3,"Bad code word");ve.c=16383&(J[ae+4]<<8|J[ae+3]),ve.Td=J[ae+4]>>6,ve.i=16383&(J[ae+6]<<8|J[ae+5]),ve.Ud=J[ae+6]>>6,ae+=7,ue-=7,j.za=ve.c+15>>4,j.Ub=ve.i+15>>4,Q.width=ve.c,Q.height=ve.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=j.Pa).jb,0,255,me.jb.length),t((me=j.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(ge.ub>ue)return xa(j,7,"bad partition length");X(me=j.m,J,ae,ge.ub),ae+=ge.ub,ue-=ge.ub,ge.Rb&&(ve.Ld=oe(me),ve.Kd=oe(me)),ve=j.Qa;var we,ke=j.Pa;if(t(me!=null),t(ve!=null),ve.Cb=oe(me),ve.Cb){if(ve.Bb=oe(me),oe(me)){for(ve.Fb=oe(me),we=0;4>we;++we)ve.Zb[we]=oe(me)?Z(me,7):0;for(we=0;4>we;++we)ve.Lb[we]=oe(me)?Z(me,6):0}if(ve.Bb)for(we=0;3>we;++we)ke.jb[we]=oe(me)?V(me,8):255}else ve.Bb=0;if(me.Ka)return xa(j,3,"cannot parse segment header");if((ve=j.ed).zd=oe(me),ve.Tb=V(me,6),ve.wb=V(me,3),ve.Pc=oe(me),ve.Pc&&oe(me)){for(ke=0;4>ke;++ke)oe(me)&&(ve.vd[ke]=Z(me,6));for(ke=0;4>ke;++ke)oe(me)&&(ve.od[ke]=Z(me,6))}if(j.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return xa(j,3,"cannot parse filter header");var Me=ue;if(ue=we=ae,ae=we+Me,ve=Me,j.Xb=(1<<V(j.m,2))-1,Me<3*(ke=j.Xb))J=7;else{for(we+=3*ke,ve-=3*ke,Me=0;Me<ke;++Me){var nt=J[ue+0]|J[ue+1]<<8|J[ue+2]<<16;nt>ve&&(nt=ve),X(j.Jc[+Me],J,we,nt),we+=nt,ve-=nt,ue+=3}X(j.Jc[+ke],J,we,ve),J=we<ae?0:5}if(J!=0)return xa(j,J,"cannot parse partitions");for(J=V(we=j.m,7),ue=oe(we)?Z(we,4):0,ae=oe(we)?Z(we,4):0,ve=oe(we)?Z(we,4):0,ke=oe(we)?Z(we,4):0,we=oe(we)?Z(we,4):0,Me=j.Qa,nt=0;4>nt;++nt){if(Me.Cb){var et=Me.Zb[nt];Me.Fb||(et+=J)}else{if(0<nt){j.pb[nt]=j.pb[0];continue}et=J}var Ke=j.pb[nt];Ke.Sc[0]=Fm[zn(et+ue,127)],Ke.Sc[1]=Om[zn(et+0,127)],Ke.Eb[0]=2*Fm[zn(et+ae,127)],Ke.Eb[1]=101581*Om[zn(et+ve,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=Fm[zn(et+ke,117)],Ke.Qc[1]=Om[zn(et+we,127)],Ke.lc=et+we}if(!ge.Rb)return xa(j,4,"Not a key frame.");for(oe(me),ge=j.Pa,J=0;4>J;++J){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(ve=0;11>ve;++ve)ke=ce(me,hf[J][ue][ae][ve])?V(me,8):nu[J][ue][ae][ve],ge.Wc[J][ue].Yb[ae][ve]=ke;for(ue=0;17>ue;++ue)ge.Xc[J][ue]=ge.Wc[J][R2[ue]]}return j.kc=oe(me),j.kc&&(j.Bd=V(me,8)),j.cb=1}function Nh(j,Q,J,ae,ue,me,ge){var ve=Q[ue].Yb[J];for(J=0;16>ue;++ue){if(!ce(j,ve[J+0]))return ue;for(;!ce(j,ve[J+1]);)if(ve=Q[++ue].Yb[0],J=0,ue==16)return 16;var we=Q[ue+1].Yb;if(ce(j,ve[J+2])){var ke=j,Me=0;if(ce(ke,(et=ve)[(nt=J)+3]))if(ce(ke,et[nt+6])){for(ve=0,nt=2*(Me=ce(ke,et[nt+8]))+(et=ce(ke,et[nt+9+Me])),Me=0,et=Ga[nt];et[ve];++ve)Me+=Me+ce(ke,et[ve]);Me+=3+(8<<nt)}else ce(ke,et[nt+7])?(Me=7+2*ce(ke,165),Me+=ce(ke,145)):Me=5+ce(ke,159);else Me=ce(ke,et[nt+4])?3+ce(ke,et[nt+5]):2;ve=we[2]}else Me=1,ve=we[1];we=ge+Un[ue],0>(ke=j).b&&Ae(ke);var nt,et=ke.b,Ke=(nt=ke.Ca>>1)-(ke.I>>et)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(nt+1&Ke)<<et,me[we]=((Me^Ke)-Ke)*ae[(0<ue)+0]}return 16}function Hc(j){var Q=j.rb[j.sb-1];Q.la=0,Q.Na=0,a(j.zc,0,0,j.zc.length),j.ja=0}function YA(j,Q){if(j==null)return 0;if(Q==null)return xa(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!Pd(j,Q))return 0;if(t(j.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(j.L=0);var J=td[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=Q.v-J>>4,j.zb=Q.j-J>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=Q.o+15+J>>4,j.Hb=Q.va+15+J>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var ae=j.ed;for(J=0;4>J;++J){var ue;if(j.Qa.Cb){var me=j.Qa.Lb[J];j.Qa.Fb||(me+=ae.Tb)}else me=ae.Tb;for(ue=0;1>=ue;++ue){var ge=j.gd[J][ue],ve=me;if(ae.Pc&&(ve+=ae.vd[0],ue&&(ve+=ae.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<ae.wb&&(we=4<ae.wb?we>>2:we>>1)>9-ae.wb&&(we=9-ae.wb),1>we&&(we=1),ge.dd=we,ge.tc=2*ve+we,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=ue}}}J=0}else xa(j,6,"Frame setup failed"),J=j.a;if(J=J==0){if(J){j.$c=0,0<j.Aa||(j.Ic=M2);e:{J=j.Ic,ae=4*(we=j.za);var ke=32*we,Me=we+1,nt=0<j.L?we*(0<j.Aa?2:1):0,et=(j.Aa==2?2:1)*we;if((ge=ae+832+(ue=3*(16*J+td[j.L])/2*ke)+(me=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=ge)J=0;else{if(ge>j.Vb){if(j.Vb=0,j.Ec=s(ge),j.Fc=0,j.Ec==null){J=xa(j,1,"no memory during frame initialization.");break e}j.Vb=ge}ge=j.Ec,ve=j.Fc,j.Ac=ge,j.Bc=ve,ve+=ae,j.Gd=i(ke,ms),j.Hd=0,j.rb=i(Me+1,on),j.sb=1,j.wa=nt?i(nt,sn):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=we),t(!0),j.oc=ge,j.pc=ve,ve+=832,j.ya=i(et,hs),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=we),j.R=16*we,j.B=8*we,we=(ke=td[j.L])*j.R,ke=ke/2*j.B,j.sa=ge,j.ta=ve+we,j.qa=j.sa,j.ra=j.ta+16*J*j.R+ke,j.Ha=j.qa,j.Ia=j.ra+8*J*j.B+ke,j.$c=0,ve+=ue,j.mb=me?ge:null,j.nb=me?ve:null,t(ve+me<=j.Fc+j.Vb),Hc(j),a(j.Ac,j.Bc,0,ae),J=1}}if(J){if(Q.ka=0,Q.y=j.sa,Q.O=j.ta,Q.f=j.qa,Q.N=j.ra,Q.ea=j.Ha,Q.Vd=j.Ia,Q.fa=j.R,Q.Rc=j.B,Q.F=null,Q.J=0,!qu){for(J=-255;255>=J;++J)ts[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)Il[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)Zd[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)eA[255+J]=0>J?0:255<J?255:J;qu=1}eu=yo,uc=zc,dc=El,vs=Vn,ko=$c,za=Vc,of=Wc,tu=oc,Oh=Qd,Wd=rf,Xd=Ud,Yd=Qu,lf=Hu,Dh=Xc,Jd=al,Ku=Oi,cf=gs,$a=Th,ao[0]=Ii,ao[1]=kh,ao[2]=Sl,ao[3]=Bh,ao[4]=wo,ao[5]=Nl,ao[6]=ro,ao[7]=Eo,ao[8]=ic,ao[9]=Gc,Zu[0]=Cl,Zu[1]=ZA,Zu[2]=nc,Zu[3]=Md,Zu[4]=ua,Zu[5]=sc,Zu[6]=_l,ol[0]=kl,ol[1]=JA,ol[2]=ef,ol[3]=Co,ol[4]=xn,ol[5]=ps,ol[6]=Kc,J=1}else J=0}J&&(J=function(Ke,kt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var ht,Ue=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,Et=Ke;for(ht=0;ht<Et.za;++ht){var Bt=Ve,St=Et,nr=St.Ac,Xt=St.Bc+4*ht,pr=St.zc,er=St.ya[St.aa+ht];if(St.Qa.Bb?er.$b=ce(Bt,St.Pa.jb[0])?2+ce(Bt,St.Pa.jb[2]):ce(Bt,St.Pa.jb[1]):er.$b=0,St.kc&&(er.Ad=ce(Bt,St.Bd)),er.Za=!ce(Bt,145)+0,er.Za){var Rn=er.Ob,$n=0;for(St=0;4>St;++St){var fn,ln=pr[0+St];for(fn=0;4>fn;++fn){ln=F1[nr[Xt+fn]][ln];for(var aa=rA[ce(Bt,ln[0])];0<aa;)aa=rA[2*aa+ce(Bt,ln[aa])];ln=-aa,nr[Xt+fn]=ln}n(Rn,$n,nr,Xt,4),$n+=4,pr[0+St]=ln}}else ln=ce(Bt,156)?ce(Bt,128)?1:3:ce(Bt,163)?2:0,er.Ob[0]=ln,a(nr,Xt,ln,4),a(pr,0,ln,4);er.Dd=ce(Bt,142)?ce(Bt,114)?ce(Bt,183)?1:3:2:0}if(Et.m.Ka)return xa(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(Et=Ue,Bt=(Ve=Ke).rb[Ve.sb-1],nr=Ve.rb[Ve.sb+Ve.ja],ht=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?ht.Ad:0)Bt.la=nr.la=0,ht.Za||(Bt.Na=nr.Na=0),ht.Hc=0,ht.Gc=0,ht.ia=0;else{var Gn,qr;if(Bt=nr,nr=Et,Xt=Ve.Pa.Xc,pr=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[pr.$b],St=pr.ad,Rn=0,$n=Ve.rb[Ve.sb-1],ln=fn=0,a(St,Rn,0,384),pr.Za)var da=0,Sr=Xt[3];else{aa=s(16);var Lr=Bt.Na+$n.Na;if(Lr=Ds(nr,Xt[1],Lr,er.Eb,0,aa,0),Bt.Na=$n.Na=(0<Lr)+0,1<Lr)eu(aa,0,St,Rn);else{var Dn=aa[0]+3>>3;for(aa=0;256>aa;aa+=16)St[Rn+aa]=Dn}da=1,Sr=Xt[0]}var Pn=15&Bt.la,ai=15&$n.la;for(aa=0;4>aa;++aa){var Ls=1&ai;for(Dn=qr=0;4>Dn;++Dn)Pn=Pn>>1|(Ls=(Lr=Ds(nr,Sr,Lr=Ls+(1&Pn),er.Sc,da,St,Rn))>da)<<7,qr=qr<<2|(3<Lr?3:1<Lr?2:St[Rn+0]!=0),Rn+=16;Pn>>=4,ai=ai>>1|Ls<<7,fn=(fn<<8|qr)>>>0}for(Sr=Pn,da=ai>>4,Gn=0;4>Gn;Gn+=2){for(qr=0,Pn=Bt.la>>4+Gn,ai=$n.la>>4+Gn,aa=0;2>aa;++aa){for(Ls=1&ai,Dn=0;2>Dn;++Dn)Lr=Ls+(1&Pn),Pn=Pn>>1|(Ls=0<(Lr=Ds(nr,Xt[2],Lr,er.Qc,0,St,Rn)))<<3,qr=qr<<2|(3<Lr?3:1<Lr?2:St[Rn+0]!=0),Rn+=16;Pn>>=2,ai=ai>>1|Ls<<5}ln|=qr<<4*Gn,Sr|=Pn<<4<<Gn,da|=(240&ai)<<Gn}Bt.la=Sr,$n.la=da,pr.Hc=fn,pr.Gc=ln,pr.ia=43690&ln?0:er.ia,Xt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ht.$b][ht.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),Et.Ka)return xa(Ke,7,"Premature end-of-file encountered.")}if(Hc(Ke),Ve=kt,Et=1,ht=(Ue=Ke).D,Bt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(ht.M=Ue.M,ht.uc=Bt,_o(Ue,ht),Et=1,ht=(qr=Ue.D).Nb,Bt=(ln=td[Ue.L])*Ue.R,nr=ln/2*Ue.B,aa=16*ht*Ue.R,Dn=8*ht*Ue.B,Xt=Ue.sa,pr=Ue.ta-Bt+aa,er=Ue.qa,St=Ue.ra-nr+Dn,Rn=Ue.Ha,$n=Ue.Ia-nr+Dn,ai=(Pn=qr.M)==0,fn=Pn>=Ue.Va-1,Ue.Aa==2&&_o(Ue,qr),qr.uc)for(Ls=(Lr=Ue).D.M,t(Lr.D.uc),qr=Lr.yb;qr<Lr.Hb;++qr){da=qr,Sr=Ls;var rs=(ns=(Ta=Lr).D).Nb;Gn=Ta.R;var ns=ns.wa[ns.Y+da],xs=Ta.sa,Dl=Ta.ta+16*rs*Gn+16*da,Kn=ns.dd,bs=ns.tc;if(bs!=0)if(t(3<=bs),Ta.L==1)0<da&&Ku(xs,Dl,Gn,bs+4),ns.La&&$a(xs,Dl,Gn,bs),0<Sr&&Jd(xs,Dl,Gn,bs+4),ns.La&&cf(xs,Dl,Gn,bs);else{var Ac=Ta.B,sA=Ta.qa,pf=Ta.ra+8*rs*Ac+8*da,iA=Ta.Ha,Ta=Ta.Ia+8*rs*Ac+8*da;rs=ns.ld,0<da&&(tu(xs,Dl,Gn,bs+4,Kn,rs),Wd(sA,pf,iA,Ta,Ac,bs+4,Kn,rs)),ns.La&&(Yd(xs,Dl,Gn,bs,Kn,rs),Dh(sA,pf,iA,Ta,Ac,bs,Kn,rs)),0<Sr&&(of(xs,Dl,Gn,bs+4,Kn,rs),Oh(sA,pf,iA,Ta,Ac,bs+4,Kn,rs)),ns.La&&(Xd(xs,Dl,Gn,bs,Kn,rs),lf(sA,pf,iA,Ta,Ac,bs,Kn,rs))}}if(Ue.ia&&alert("todo:DitherRow"),Ve.put!=null){if(qr=16*Pn,Pn=16*(Pn+1),ai?(Ve.y=Ue.sa,Ve.O=Ue.ta+aa,Ve.f=Ue.qa,Ve.N=Ue.ra+Dn,Ve.ea=Ue.Ha,Ve.W=Ue.Ia+Dn):(qr-=ln,Ve.y=Xt,Ve.O=pr,Ve.f=er,Ve.N=St,Ve.ea=Rn,Ve.W=$n),fn||(Pn-=ln),Pn>Ve.o&&(Pn=Ve.o),Ve.F=null,Ve.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&qr<Pn&&(Ve.J=Vd(Ue,Ve,qr,Pn-qr),Ve.F=Ue.mb,Ve.F==null&&Ve.F.length==0)){Et=xa(Ue,3,"Could not decode alpha data.");break e}qr<Ve.j&&(ln=Ve.j-qr,qr=Ve.j,t(!(1&ln)),Ve.O+=Ue.R*ln,Ve.N+=Ue.B*(ln>>1),Ve.W+=Ue.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),qr<Pn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=qr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Pn-qr,Et=Ve.put(Ve))}ht+1!=Ue.Ic||fn||(n(Ue.sa,Ue.ta-Bt,Xt,pr+16*Ue.R,Bt),n(Ue.qa,Ue.ra-nr,er,St+8*Ue.B,nr),n(Ue.Ha,Ue.Ia-nr,Rn,$n+8*Ue.B,nr))}if(!Et)return xa(Ke,6,"Output aborted.")}return 1}(j,Q)),Q.bc!=null&&Q.bc(Q),J&=1}return J?(j.cb=0,J):0}function vi(j,Q,J,ae,ue){ue=j[Q+J+32*ae]+(ue>>3),j[Q+J+32*ae]=-256&ue?0>ue?0:255:ue}function Ld(j,Q,J,ae,ue,me){vi(j,Q,0,J,ae+ue),vi(j,Q,1,J,ae+me),vi(j,Q,2,J,ae-me),vi(j,Q,3,J,ae-ue)}function On(j){return(20091*j>>16)+j}function xi(j,Q,J,ae){var ue,me=0,ge=s(16);for(ue=0;4>ue;++ue){var ve=j[Q+0]+j[Q+8],we=j[Q+0]-j[Q+8],ke=(35468*j[Q+4]>>16)-On(j[Q+12]),Me=On(j[Q+4])+(35468*j[Q+12]>>16);ge[me+0]=ve+Me,ge[me+1]=we+ke,ge[me+2]=we-ke,ge[me+3]=ve-Me,me+=4,Q++}for(ue=me=0;4>ue;++ue)ve=(j=ge[me+0]+4)+ge[me+8],we=j-ge[me+8],ke=(35468*ge[me+4]>>16)-On(ge[me+12]),vi(J,ae,0,0,ve+(Me=On(ge[me+4])+(35468*ge[me+12]>>16))),vi(J,ae,1,0,we+ke),vi(J,ae,2,0,we-ke),vi(J,ae,3,0,ve-Me),me++,ae+=32}function Vc(j,Q,J,ae){var ue=j[Q+0]+4,me=35468*j[Q+4]>>16,ge=On(j[Q+4]),ve=35468*j[Q+1]>>16;Ld(J,ae,0,ue+ge,j=On(j[Q+1]),ve),Ld(J,ae,1,ue+me,j,ve),Ld(J,ae,2,ue-me,j,ve),Ld(J,ae,3,ue-ge,j,ve)}function zc(j,Q,J,ae,ue){xi(j,Q,J,ae),ue&&xi(j,Q+16,J,ae+4)}function El(j,Q,J,ae){uc(j,Q+0,J,ae,1),uc(j,Q+32,J,ae+128,1)}function Vn(j,Q,J,ae){var ue;for(j=j[Q+0]+4,ue=0;4>ue;++ue)for(Q=0;4>Q;++Q)vi(J,ae,Q,ue,j)}function $c(j,Q,J,ae){j[Q+0]&&vs(j,Q+0,J,ae),j[Q+16]&&vs(j,Q+16,J,ae+4),j[Q+32]&&vs(j,Q+32,J,ae+128),j[Q+48]&&vs(j,Q+48,J,ae+128+4)}function yo(j,Q,J,ae){var ue,me=s(16);for(ue=0;4>ue;++ue){var ge=j[Q+0+ue]+j[Q+12+ue],ve=j[Q+4+ue]+j[Q+8+ue],we=j[Q+4+ue]-j[Q+8+ue],ke=j[Q+0+ue]-j[Q+12+ue];me[0+ue]=ge+ve,me[8+ue]=ge-ve,me[4+ue]=ke+we,me[12+ue]=ke-we}for(ue=0;4>ue;++ue)ge=(j=me[0+4*ue]+3)+me[3+4*ue],ve=me[1+4*ue]+me[2+4*ue],we=me[1+4*ue]-me[2+4*ue],ke=j-me[3+4*ue],J[ae+0]=ge+ve>>3,J[ae+16]=ke+we>>3,J[ae+32]=ge-ve>>3,J[ae+48]=ke-we>>3,ae+=64}function rc(j,Q,J){var ae,ue=Q-32,me=ri,ge=255-j[ue-1];for(ae=0;ae<J;++ae){var ve,we=me,ke=ge+j[Q-1];for(ve=0;ve<J;++ve)j[Q+ve]=we[ke+j[ue+ve]];Q+=32}}function kh(j,Q){rc(j,Q,4)}function JA(j,Q){rc(j,Q,8)}function ZA(j,Q){rc(j,Q,16)}function nc(j,Q){var J;for(J=0;16>J;++J)n(j,Q+32*J,j,Q-32,16)}function Md(j,Q){var J;for(J=16;0<J;--J)a(j,Q,j[Q-1],16),Q+=32}function ac(j,Q,J){var ae;for(ae=0;16>ae;++ae)a(Q,J+32*ae,j,16)}function Cl(j,Q){var J,ae=16;for(J=0;16>J;++J)ae+=j[Q-1+32*J]+j[Q+J-32];ac(ae>>5,j,Q)}function ua(j,Q){var J,ae=8;for(J=0;16>J;++J)ae+=j[Q-1+32*J];ac(ae>>4,j,Q)}function sc(j,Q){var J,ae=8;for(J=0;16>J;++J)ae+=j[Q+J-32];ac(ae>>4,j,Q)}function _l(j,Q){ac(128,j,Q)}function Br(j,Q,J){return j+2*Q+J+2>>2}function Sl(j,Q){var J,ae=Q-32;for(ae=new Uint8Array([Br(j[ae-1],j[ae+0],j[ae+1]),Br(j[ae+0],j[ae+1],j[ae+2]),Br(j[ae+1],j[ae+2],j[ae+3]),Br(j[ae+2],j[ae+3],j[ae+4])]),J=0;4>J;++J)n(j,Q+32*J,ae,0,ae.length)}function Bh(j,Q){var J=j[Q-1],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96];pe(j,Q+0,16843009*Br(j[Q-1-32],J,ae)),pe(j,Q+32,16843009*Br(J,ae,ue)),pe(j,Q+64,16843009*Br(ae,ue,me)),pe(j,Q+96,16843009*Br(ue,me,me))}function Ii(j,Q){var J,ae=4;for(J=0;4>J;++J)ae+=j[Q+J-32]+j[Q-1+32*J];for(ae>>=3,J=0;4>J;++J)a(j,Q+32*J,ae,4)}function wo(j,Q){var J=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1-32],ge=j[Q+0-32],ve=j[Q+1-32],we=j[Q+2-32],ke=j[Q+3-32];j[Q+0+96]=Br(ae,ue,j[Q-1+96]),j[Q+1+96]=j[Q+0+64]=Br(J,ae,ue),j[Q+2+96]=j[Q+1+64]=j[Q+0+32]=Br(me,J,ae),j[Q+3+96]=j[Q+2+64]=j[Q+1+32]=j[Q+0+0]=Br(ge,me,J),j[Q+3+64]=j[Q+2+32]=j[Q+1+0]=Br(ve,ge,me),j[Q+3+32]=j[Q+2+0]=Br(we,ve,ge),j[Q+3+0]=Br(ke,we,ve)}function ro(j,Q){var J=j[Q+1-32],ae=j[Q+2-32],ue=j[Q+3-32],me=j[Q+4-32],ge=j[Q+5-32],ve=j[Q+6-32],we=j[Q+7-32];j[Q+0+0]=Br(j[Q+0-32],J,ae),j[Q+1+0]=j[Q+0+32]=Br(J,ae,ue),j[Q+2+0]=j[Q+1+32]=j[Q+0+64]=Br(ae,ue,me),j[Q+3+0]=j[Q+2+32]=j[Q+1+64]=j[Q+0+96]=Br(ue,me,ge),j[Q+3+32]=j[Q+2+64]=j[Q+1+96]=Br(me,ge,ve),j[Q+3+64]=j[Q+2+96]=Br(ge,ve,we),j[Q+3+96]=Br(ve,we,we)}function Nl(j,Q){var J=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1-32],ge=j[Q+0-32],ve=j[Q+1-32],we=j[Q+2-32],ke=j[Q+3-32];j[Q+0+0]=j[Q+1+64]=me+ge+1>>1,j[Q+1+0]=j[Q+2+64]=ge+ve+1>>1,j[Q+2+0]=j[Q+3+64]=ve+we+1>>1,j[Q+3+0]=we+ke+1>>1,j[Q+0+96]=Br(ue,ae,J),j[Q+0+64]=Br(ae,J,me),j[Q+0+32]=j[Q+1+96]=Br(J,me,ge),j[Q+1+32]=j[Q+2+96]=Br(me,ge,ve),j[Q+2+32]=j[Q+3+96]=Br(ge,ve,we),j[Q+3+32]=Br(ve,we,ke)}function Eo(j,Q){var J=j[Q+0-32],ae=j[Q+1-32],ue=j[Q+2-32],me=j[Q+3-32],ge=j[Q+4-32],ve=j[Q+5-32],we=j[Q+6-32],ke=j[Q+7-32];j[Q+0+0]=J+ae+1>>1,j[Q+1+0]=j[Q+0+64]=ae+ue+1>>1,j[Q+2+0]=j[Q+1+64]=ue+me+1>>1,j[Q+3+0]=j[Q+2+64]=me+ge+1>>1,j[Q+0+32]=Br(J,ae,ue),j[Q+1+32]=j[Q+0+96]=Br(ae,ue,me),j[Q+2+32]=j[Q+1+96]=Br(ue,me,ge),j[Q+3+32]=j[Q+2+96]=Br(me,ge,ve),j[Q+3+64]=Br(ge,ve,we),j[Q+3+96]=Br(ve,we,ke)}function Gc(j,Q){var J=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96];j[Q+0+0]=J+ae+1>>1,j[Q+2+0]=j[Q+0+32]=ae+ue+1>>1,j[Q+2+32]=j[Q+0+64]=ue+me+1>>1,j[Q+1+0]=Br(J,ae,ue),j[Q+3+0]=j[Q+1+32]=Br(ae,ue,me),j[Q+3+32]=j[Q+1+64]=Br(ue,me,me),j[Q+3+64]=j[Q+2+64]=j[Q+0+96]=j[Q+1+96]=j[Q+2+96]=j[Q+3+96]=me}function ic(j,Q){var J=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96],ge=j[Q-1-32],ve=j[Q+0-32],we=j[Q+1-32],ke=j[Q+2-32];j[Q+0+0]=j[Q+2+32]=J+ge+1>>1,j[Q+0+32]=j[Q+2+64]=ae+J+1>>1,j[Q+0+64]=j[Q+2+96]=ue+ae+1>>1,j[Q+0+96]=me+ue+1>>1,j[Q+3+0]=Br(ve,we,ke),j[Q+2+0]=Br(ge,ve,we),j[Q+1+0]=j[Q+3+32]=Br(J,ge,ve),j[Q+1+32]=j[Q+3+64]=Br(ae,J,ge),j[Q+1+64]=j[Q+3+96]=Br(ue,ae,J),j[Q+1+96]=Br(me,ue,ae)}function ef(j,Q){var J;for(J=0;8>J;++J)n(j,Q+32*J,j,Q-32,8)}function Co(j,Q){var J;for(J=0;8>J;++J)a(j,Q,j[Q-1],8),Q+=32}function Fi(j,Q,J){var ae;for(ae=0;8>ae;++ae)a(Q,J+32*ae,j,8)}function kl(j,Q){var J,ae=8;for(J=0;8>J;++J)ae+=j[Q+J-32]+j[Q-1+32*J];Fi(ae>>4,j,Q)}function ps(j,Q){var J,ae=4;for(J=0;8>J;++J)ae+=j[Q+J-32];Fi(ae>>3,j,Q)}function xn(j,Q){var J,ae=4;for(J=0;8>J;++J)ae+=j[Q-1+32*J];Fi(ae>>3,j,Q)}function Kc(j,Q){Fi(128,j,Q)}function Bl(j,Q,J){var ae=j[Q-J],ue=j[Q+0],me=3*(ue-ae)+Eg[1020+j[Q-2*J]-j[Q+J]],ge=uf[112+(me+4>>3)];j[Q-J]=ri[255+ae+uf[112+(me+3>>3)]],j[Q+0]=ri[255+ue-ge]}function tf(j,Q,J,ae){var ue=j[Q+0],me=j[Q+J];return Fl[255+j[Q-2*J]-j[Q-J]]>ae||Fl[255+me-ue]>ae}function Mu(j,Q,J,ae){return 4*Fl[255+j[Q-J]-j[Q+0]]+Fl[255+j[Q-2*J]-j[Q+J]]<=ae}function Uu(j,Q,J,ae,ue){var me=j[Q-3*J],ge=j[Q-2*J],ve=j[Q-J],we=j[Q+0],ke=j[Q+J],Me=j[Q+2*J],nt=j[Q+3*J];return 4*Fl[255+ve-we]+Fl[255+ge-ke]>ae?0:Fl[255+j[Q-4*J]-me]<=ue&&Fl[255+me-ge]<=ue&&Fl[255+ge-ve]<=ue&&Fl[255+nt-Me]<=ue&&Fl[255+Me-ke]<=ue&&Fl[255+ke-we]<=ue}function al(j,Q,J,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Mu(j,Q+ae,J,ue)&&Bl(j,Q+ae,J)}function Oi(j,Q,J,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Mu(j,Q+ae*J,1,ue)&&Bl(j,Q+ae*J,1)}function gs(j,Q,J,ae){var ue;for(ue=3;0<ue;--ue)al(j,Q+=4*J,J,ae)}function Th(j,Q,J,ae){var ue;for(ue=3;0<ue;--ue)Oi(j,Q+=4,J,ae)}function qc(j,Q,J,ae,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Uu(j,Q,J,me,ge))if(tf(j,Q,J,ve))Bl(j,Q,J);else{var we=j,ke=Q,Me=J,nt=we[ke-2*Me],et=we[ke-Me],Ke=we[ke+0],kt=we[ke+Me],ht=we[ke+2*Me],Ue=27*(Et=Eg[1020+3*(Ke-et)+Eg[1020+nt-kt]])+63>>7,Ve=18*Et+63>>7,Et=9*Et+63>>7;we[ke-3*Me]=ri[255+we[ke-3*Me]+Et],we[ke-2*Me]=ri[255+nt+Ve],we[ke-Me]=ri[255+et+Ue],we[ke+0]=ri[255+Ke-Ue],we[ke+Me]=ri[255+kt-Ve],we[ke+2*Me]=ri[255+ht-Et]}Q+=ae}}function bi(j,Q,J,ae,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Uu(j,Q,J,me,ge))if(tf(j,Q,J,ve))Bl(j,Q,J);else{var we=j,ke=Q,Me=J,nt=we[ke-Me],et=we[ke+0],Ke=we[ke+Me],kt=uf[112+((ht=3*(et-nt))+4>>3)],ht=uf[112+(ht+3>>3)],Ue=kt+1>>1;we[ke-2*Me]=ri[255+we[ke-2*Me]+Ue],we[ke-Me]=ri[255+nt+ht],we[ke+0]=ri[255+et-kt],we[ke+Me]=ri[255+Ke-Ue]}Q+=ae}}function Wc(j,Q,J,ae,ue,me){qc(j,Q,J,1,16,ae,ue,me)}function oc(j,Q,J,ae,ue,me){qc(j,Q,1,J,16,ae,ue,me)}function Ud(j,Q,J,ae,ue,me){var ge;for(ge=3;0<ge;--ge)bi(j,Q+=4*J,J,1,16,ae,ue,me)}function Qu(j,Q,J,ae,ue,me){var ge;for(ge=3;0<ge;--ge)bi(j,Q+=4,1,J,16,ae,ue,me)}function Qd(j,Q,J,ae,ue,me,ge,ve){qc(j,Q,ue,1,8,me,ge,ve),qc(J,ae,ue,1,8,me,ge,ve)}function rf(j,Q,J,ae,ue,me,ge,ve){qc(j,Q,1,ue,8,me,ge,ve),qc(J,ae,1,ue,8,me,ge,ve)}function Hu(j,Q,J,ae,ue,me,ge,ve){bi(j,Q+4*ue,ue,1,8,me,ge,ve),bi(J,ae+4*ue,ue,1,8,me,ge,ve)}function Xc(j,Q,J,ae,ue,me,ge,ve){bi(j,Q+4,1,ue,8,me,ge,ve),bi(J,ae+4,1,ue,8,me,ge,ve)}function Vu(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Yc(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new k}function jh(){this.xb=this.a=0,this.l=new Fs,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Yc,this.ab=0,this.gc=i(4,zu),this.Oc=0}function lc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Jc(j,Q,J,ae,ue,me,ge){for(j=j==null?0:j[Q+0],Q=0;Q<ge;++Q)ue[me+Q]=j+J[ae+Q]&255,j=ue[me+Q]}function $u(j,Q,J,ae,ue,me,ge){var ve;if(j==null)Jc(null,null,J,ae,ue,me,ge);else for(ve=0;ve<ge;++ve)ue[me+ve]=j[Q+ve]+J[ae+ve]&255}function Di(j,Q,J,ae,ue,me,ge){if(j==null)Jc(null,null,J,ae,ue,me,ge);else{var ve,we=j[Q+0],ke=we,Me=we;for(ve=0;ve<ge;++ve)ke=Me+(we=j[Q+ve])-ke,Me=J[ae+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=we,ue[me+ve]=Me}}function Vd(j,Q,J,ae){var ue=Q.width,me=Q.o;if(t(j!=null&&Q!=null),0>J||0>=ae||J+ae>me)return null;if(!j.Cc){if(j.ga==null){var ge;if(j.ga=new lc,(ge=j.ga==null)||(ge=Q.width*Q.o,t(j.Gb.length==0),j.Gb=s(ge),j.Uc=0,j.Gb==null?ge=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,ge=1),ge=!ge),!ge){ge=j.ga;var ve=j.Fa,we=j.P,ke=j.qc,Me=j.mb,nt=j.nb,et=we+1,Ke=ke-1,kt=ge.l;if(t(ve!=null&&Me!=null&&Q!=null),au[0]=null,au[1]=Jc,au[2]=$u,au[3]=Di,ge.ca=Me,ge.tb=nt,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=ve[we+0]>>0&3,ge.Z=ve[we+0]>>2&3,ge.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||we)Q=0;else if(kt.put=gn,kt.ac=Xr,kt.bc=vn,kt.ma=ge,kt.width=Q.width,kt.height=Q.height,kt.Da=Q.Da,kt.v=Q.v,kt.va=Q.va,kt.j=Q.j,kt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=ut();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,H(Q.m,ve,et,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ee(Q.s)?(ge.ic=1,ve=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(ve),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=tt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;j.ga.Lc!=1?j.Ga=0:ae=me-J}t(j.ga!=null),t(J+ae<=me);e:{if(Q=(ve=j.ga).c,me=ve.l.o,ve.$a==0){if(et=j.rc,Ke=j.Vc,kt=j.Fa,we=j.P+1+J*Q,ke=j.mb,Me=j.nb+J*Q,t(we<=j.P+j.qc),ve.Z!=0)for(t(au[ve.Z]!=null),ge=0;ge<ae;++ge)au[ve.Z](et,Ke,kt,we,ke,Me,Q),et=ke,Ke=Me,Me+=Q,we+=Q;else for(ge=0;ge<ae;++ge)n(ke,Me,kt,we,Q),et=ke,Ke=Me,Me+=Q,we+=Q;j.rc=et,j.Vc=Ke}else{if(t(ve.mc!=null),Q=J+ae,t((ge=ve.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(ve.ic||Ge(),ve.ic){ve=ge.V,et=ge.Ba,Ke=ge.c;var ht=ge.i,Ue=(kt=1,we=ge.$/Ke,ke=ge.$%Ke,Me=ge.m,nt=ge.s,ge.$),Ve=Ke*ht,Et=Ke*Q,Bt=nt.wc,St=Ue<Et?ra(nt,ke,we):null;t(Ue<=Ve),t(Q<=ht),t(Ee(nt));t:for(;;){for(;!Me.h&&Ue<Et;){if(ke&Bt||(St=ra(nt,ke,we)),t(St!=null),ie(Me),256>(ht=cr(St.G[0],St.H[0],Me)))ve[et+Ue]=ht,++Ue,++ke>=Ke&&(ke=0,++we<=Q&&!(we%16)&&Ne(ge,we));else{if(!(280>ht)){kt=0;break t}ht=rn(ht-256,Me);var nr,Xt=cr(St.G[4],St.H[4],Me);if(ie(Me),!(Ue>=(Xt=en(Ke,Xt=rn(Xt,Me)))&&Ve-Ue>=ht)){kt=0;break t}for(nr=0;nr<ht;++nr)ve[et+Ue+nr]=ve[et+Ue+nr-Xt];for(Ue+=ht,ke+=ht;ke>=Ke;)ke-=Ke,++we<=Q&&!(we%16)&&Ne(ge,we);Ue<Et&&ke&Bt&&(St=ra(nt,ke,we))}t(Me.h==Y(Me))}Ne(ge,we>Q?Q:we);break t}!kt||Me.h&&Ue<Ve?(kt=0,ge.a=Me.h?5:3):ge.$=Ue,Q=kt}else Q=Te(ge,ge.V,ge.Ba,ge.c,ge.i,Q,at);if(!Q){ae=0;break e}}J+ae>=me&&(j.Cc=1),ae=1}if(!ae)return null;if(j.Cc&&((ae=j.ga)!=null&&(ae.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+J*ue}function W(j,Q,J,ae,ue,me){for(;0<ue--;){var ge,ve=j,we=Q+(J?1:0),ke=j,Me=Q+(J?0:3);for(ge=0;ge<ae;++ge){var nt=ke[Me+4*ge];nt!=255&&(nt*=32897,ve[we+4*ge+0]=ve[we+4*ge+0]*nt>>23,ve[we+4*ge+1]=ve[we+4*ge+1]*nt>>23,ve[we+4*ge+2]=ve[we+4*ge+2]*nt>>23)}Q+=me}}function de(j,Q,J,ae,ue){for(;0<ae--;){var me;for(me=0;me<J;++me){var ge=j[Q+2*me+0],ve=15&(ke=j[Q+2*me+1]),we=4369*ve,ke=(240&ke|ke>>4)*we>>16;j[Q+2*me+0]=(240&ge|ge>>4)*we>>16&240|(15&ge|ge<<4)*we>>16>>4&15,j[Q+2*me+1]=240&ke|ve}Q+=ue}}function Fe(j,Q,J,ae,ue,me,ge,ve){var we,ke,Me=255;for(ke=0;ke<ue;++ke){for(we=0;we<ae;++we){var nt=j[Q+we];me[ge+4*we]=nt,Me&=nt}Q+=J,ge+=ve}return Me!=255}function Le(j,Q,J,ae,ue){var me;for(me=0;me<ue;++me)J[ae+me]=j[Q+me]>>8}function Ge(){sl=W,hn=de,mn=Fe,ba=Le}function xt(j,Q,J){_[j]=function(ae,ue,me,ge,ve,we,ke,Me,nt,et,Ke,kt,ht,Ue,Ve,Et,Bt){var St,nr=Bt-1>>1,Xt=ve[we+0]|ke[Me+0]<<16,pr=nt[et+0]|Ke[kt+0]<<16;t(ae!=null);var er=3*Xt+pr+131074>>2;for(Q(ae[ue+0],255&er,er>>16,ht,Ue),me!=null&&(er=3*pr+Xt+131074>>2,Q(me[ge+0],255&er,er>>16,Ve,Et)),St=1;St<=nr;++St){var Rn=ve[we+St]|ke[Me+St]<<16,$n=nt[et+St]|Ke[kt+St]<<16,fn=Xt+Rn+pr+$n+524296,ln=fn+2*(Rn+pr)>>3;er=ln+Xt>>1,Xt=(fn=fn+2*(Xt+$n)>>3)+Rn>>1,Q(ae[ue+2*St-1],255&er,er>>16,ht,Ue+(2*St-1)*J),Q(ae[ue+2*St-0],255&Xt,Xt>>16,ht,Ue+(2*St-0)*J),me!=null&&(er=fn+pr>>1,Xt=ln+$n>>1,Q(me[ge+2*St-1],255&er,er>>16,Ve,Et+(2*St-1)*J),Q(me[ge+2*St+0],255&Xt,Xt>>16,Ve,Et+(2*St+0)*J)),Xt=Rn,pr=$n}1&Bt||(er=3*Xt+pr+131074>>2,Q(ae[ue+Bt-1],255&er,er>>16,ht,Ue+(Bt-1)*J),me!=null&&(er=3*pr+Xt+131074>>2,Q(me[ge+Bt-1],255&er,er>>16,Ve,Et+(Bt-1)*J)))}}function Pt(){ni[Ri]=ed,ni[Rh]=su,ni[ru]=nA,ni[jm]=Sg,ni[df]=Ng,ni[Wu]=Mh,ni[Cg]=kg,ni[Im]=su,ni[tA]=Sg,ni[Xu]=Ng,ni[Ph]=Mh}function Zt(j){return j&-16384?0>j?0:255:j>>yk}function O(j,Q){return Zt((19077*j>>8)+(26149*Q>>8)-14234)}function ee(j,Q,J){return Zt((19077*j>>8)-(6419*Q>>8)-(13320*J>>8)+8708)}function se(j,Q){return Zt((19077*j>>8)+(33050*Q>>8)-17685)}function xe(j,Q,J,ae,ue){ae[ue+0]=O(j,J),ae[ue+1]=ee(j,Q,J),ae[ue+2]=se(j,Q)}function ze(j,Q,J,ae,ue){ae[ue+0]=se(j,Q),ae[ue+1]=ee(j,Q,J),ae[ue+2]=O(j,J)}function st(j,Q,J,ae,ue){var me=ee(j,Q,J);Q=me<<3&224|se(j,Q)>>3,ae[ue+0]=248&O(j,J)|me>>5,ae[ue+1]=Q}function Ut(j,Q,J,ae,ue){var me=240&se(j,Q)|15;ae[ue+0]=240&O(j,J)|ee(j,Q,J)>>4,ae[ue+1]=me}function Tr(j,Q,J,ae,ue){ae[ue+0]=255,xe(j,Q,J,ae,ue+1)}function bn(j,Q,J,ae,ue){ze(j,Q,J,ae,ue),ae[ue+3]=255}function Kr(j,Q,J,ae,ue){xe(j,Q,J,ae,ue),ae[ue+3]=255}function zn(j,Q){return 0>j?0:j>Q?Q:j}function na(j,Q,J){_[j]=function(ae,ue,me,ge,ve,we,ke,Me,nt){for(var et=Me+(-2&nt)*J;Me!=et;)Q(ae[ue+0],me[ge+0],ve[we+0],ke,Me),Q(ae[ue+1],me[ge+0],ve[we+0],ke,Me+J),ue+=2,++ge,++we,Me+=2*J;1&nt&&Q(ae[ue+0],me[ge+0],ve[we+0],ke,Me)}}function Tl(j,Q,J){return J==0?j==0?Q==0?6:5:Q==0?4:0:J}function es(j,Q,J,ae,ue){switch(j>>>30){case 3:uc(Q,J,ae,ue,0);break;case 2:za(Q,J,ae,ue);break;case 1:vs(Q,J,ae,ue)}}function _o(j,Q){var J,ae,ue=Q.M,me=Q.Nb,ge=j.oc,ve=j.pc+40,we=j.oc,ke=j.pc+584,Me=j.oc,nt=j.pc+600;for(J=0;16>J;++J)ge[ve+32*J-1]=129;for(J=0;8>J;++J)we[ke+32*J-1]=129,Me[nt+32*J-1]=129;for(0<ue?ge[ve-1-32]=we[ke-1-32]=Me[nt-1-32]=129:(a(ge,ve-32-1,127,21),a(we,ke-32-1,127,9),a(Me,nt-32-1,127,9)),ae=0;ae<j.za;++ae){var et=Q.ya[Q.aa+ae];if(0<ae){for(J=-1;16>J;++J)n(ge,ve+32*J-4,ge,ve+32*J+12,4);for(J=-1;8>J;++J)n(we,ke+32*J-4,we,ke+32*J+4,4),n(Me,nt+32*J-4,Me,nt+32*J+4,4)}var Ke=j.Gd,kt=j.Hd+ae,ht=et.ad,Ue=et.Hc;if(0<ue&&(n(ge,ve-32,Ke[kt].y,0,16),n(we,ke-32,Ke[kt].f,0,8),n(Me,nt-32,Ke[kt].ea,0,8)),et.Za){var Ve=ge,Et=ve-32+16;for(0<ue&&(ae>=j.za-1?a(Ve,Et,Ke[kt].y[15],4):n(Ve,Et,Ke[kt+1].y,0,4)),J=0;4>J;J++)Ve[Et+128+J]=Ve[Et+256+J]=Ve[Et+384+J]=Ve[Et+0+J];for(J=0;16>J;++J,Ue<<=2)Ve=ge,Et=ve+mf[J],ao[et.Ob[J]](Ve,Et),es(Ue,ht,16*+J,Ve,Et)}else if(Ve=Tl(ae,ue,et.Ob[0]),Zu[Ve](ge,ve),Ue!=0)for(J=0;16>J;++J,Ue<<=2)es(Ue,ht,16*+J,ge,ve+mf[J]);for(J=et.Gc,Ve=Tl(ae,ue,et.Dd),ol[Ve](we,ke),ol[Ve](Me,nt),Ue=ht,Ve=we,Et=ke,255&(et=J>>0)&&(170&et?dc(Ue,256,Ve,Et):ko(Ue,256,Ve,Et)),et=Me,Ue=nt,255&(J>>=8)&&(170&J?dc(ht,320,et,Ue):ko(ht,320,et,Ue)),ue<j.Ub-1&&(n(Ke[kt].y,0,ge,ve+480,16),n(Ke[kt].f,0,we,ke+224,8),n(Ke[kt].ea,0,Me,nt+224,8)),J=8*me*j.B,Ke=j.sa,kt=j.ta+16*ae+16*me*j.R,ht=j.qa,et=j.ra+8*ae+J,Ue=j.Ha,Ve=j.Ia+8*ae+J,J=0;16>J;++J)n(Ke,kt+J*j.R,ge,ve+32*J,16);for(J=0;8>J;++J)n(ht,et+J*j.B,we,ke+32*J,8),n(Ue,Ve+J*j.B,Me,nt+32*J,8)}}function Zc(j,Q,J,ae,ue,me,ge,ve,we){var ke=[0],Me=[0],nt=0,et=we!=null?we.kd:0,Ke=we??new Hd;if(j==null||12>J)return 7;Ke.data=j,Ke.w=Q,Ke.ha=J,Q=[Q],J=[J],Ke.gb=[Ke.gb];e:{var kt=Q,ht=J,Ue=Ke.gb;if(t(j!=null),t(ht!=null),t(Ue!=null),Ue[0]=0,12<=ht[0]&&!r(j,kt[0],"RIFF")){if(r(j,kt[0]+8,"WEBP")){Ue=3;break e}var Ve=Se(j,kt[0]+4);if(12>Ve||4294967286<Ve){Ue=3;break e}if(et&&Ve>ht[0]-8){Ue=7;break e}Ue[0]=Ve,kt[0]+=12,ht[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Ve=0<Ke.gb[0],J=J[0];;){e:{var Et=j;ht=Q,Ue=J;var Bt=ke,St=Me,nr=kt=[0];if((er=nt=[nt])[0]=0,8>Ue[0])Ue=7;else{if(!r(Et,ht[0],"VP8X")){if(Se(Et,ht[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Xt=Se(Et,ht[0]+8),pr=1+ne(Et,ht[0]+12);if(2147483648<=pr*(Et=1+ne(Et,ht[0]+15))){Ue=3;break e}nr!=null&&(nr[0]=Xt),Bt!=null&&(Bt[0]=pr),St!=null&&(St[0]=Et),ht[0]+=18,Ue[0]-=18,er[0]=1}Ue=0}}if(nt=nt[0],kt=kt[0],Ue!=0)return Ue;if(ht=!!(2&kt),!Ve&&nt)return 3;if(me!=null&&(me[0]=!!(16&kt)),ge!=null&&(ge[0]=ht),ve!=null&&(ve[0]=0),ge=ke[0],kt=Me[0],nt&&ht&&we==null){Ue=0;break}if(4>J){Ue=7;break}if(Ve&&nt||!Ve&&!nt&&!r(j,Q[0],"ALPH")){J=[J],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Xt=j,Ue=Q,Ve=J;var er=Ke.gb;Bt=Ke.na,St=Ke.P,nr=Ke.Sa,pr=22,t(Xt!=null),t(Ve!=null),Et=Ue[0];var Rn=Ve[0];for(t(Bt!=null),t(nr!=null),Bt[0]=null,St[0]=null,nr[0]=0;;){if(Ue[0]=Et,Ve[0]=Rn,8>Rn){Ue=7;break e}var $n=Se(Xt,Et+4);if(4294967286<$n){Ue=3;break e}var fn=8+$n+1&-2;if(pr+=fn,0<er&&pr>er){Ue=3;break e}if(!r(Xt,Et,"VP8 ")||!r(Xt,Et,"VP8L")){Ue=0;break e}if(Rn[0]<fn){Ue=7;break e}r(Xt,Et,"ALPH")||(Bt[0]=Xt,St[0]=Et+8,nr[0]=$n),Et+=fn,Rn-=fn}}if(J=J[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Ue!=0)break}J=[J],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(er=j,Ue=Q,Ve=J,Bt=Ke.gb[0],St=Ke.Ja,nr=Ke.xa,Xt=Ue[0],Et=!r(er,Xt,"VP8 "),pr=!r(er,Xt,"VP8L"),t(er!=null),t(Ve!=null),t(St!=null),t(nr!=null),8>Ve[0])Ue=7;else{if(Et||pr){if(er=Se(er,Xt+4),12<=Bt&&er>Bt-12){Ue=3;break e}if(et&&er>Ve[0]-8){Ue=7;break e}St[0]=er,Ue[0]+=8,Ve[0]-=8,nr[0]=pr}else nr[0]=5<=Ve[0]&&er[Xt+0]==47&&!(er[Xt+4]>>5),St[0]=Ve[0];Ue=0}if(J=J[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Ue!=0)break;if(4294967286<Ke.Ja)return 3;if(ve==null||ht||(ve[0]=Ke.xa?2:1),ge=[ge],kt=[kt],Ke.xa){if(5>J){Ue=7;break}ve=ge,et=kt,ht=me,j==null||5>J?j=0:5<=J&&j[Q+0]==47&&!(j[Q+4]>>5)?(Ve=[0],er=[0],Bt=[0],H(St=new P,j,Q,J),$t(St,Ve,er,Bt)?(ve!=null&&(ve[0]=Ve[0]),et!=null&&(et[0]=er[0]),ht!=null&&(ht[0]=Bt[0]),j=1):j=0):j=0}else{if(10>J){Ue=7;break}ve=kt,j==null||10>J||!ei(j,Q+3,J-3)?j=0:(et=j[Q+0]|j[Q+1]<<8|j[Q+2]<<16,ht=16383&(j[Q+7]<<8|j[Q+6]),j=16383&(j[Q+9]<<8|j[Q+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=Ke.Ja||!ht||!j?j=0:(ge&&(ge[0]=ht),ve&&(ve[0]=j),j=1))}if(!j||(ge=ge[0],kt=kt[0],nt&&(ke[0]!=ge||Me[0]!=kt)))return 3;we!=null&&(we[0]=Ke,we.offset=Q-we.w,t(4294967286>Q-we.w),t(we.offset==we.ha-J));break}return Ue==0||Ue==7&&nt&&we==null?(me!=null&&(me[0]|=Ke.na!=null&&0<Ke.na.length),ae!=null&&(ae[0]=ge),ue!=null&&(ue[0]=kt),0):Ue}function zd(j,Q,J){var ae=Q.width,ue=Q.height,me=0,ge=0,ve=ae,we=ue;if(Q.Da=j!=null&&0<j.Da,Q.Da&&(ve=j.cd,we=j.bd,me=j.v,ge=j.j,11>J||(me&=-2,ge&=-2),0>me||0>ge||0>=ve||0>=we||me+ve>ae||ge+we>ue))return 0;if(Q.v=me,Q.j=ge,Q.va=me+ve,Q.o=ge+we,Q.U=ve,Q.T=we,Q.da=j!=null&&0<j.da,Q.da){if(!je(ve,we,J=[j.ib],me=[j.hb]))return 0;Q.ib=J[0],Q.hb=me[0]}return Q.ob=j!=null&&j.ob,Q.Kb=j==null||!j.Sd,Q.da&&(Q.ob=Q.ib<3*ae/4&&Q.hb<3*ue/4,Q.Kb=0),1}function Ih(j){if(j==null)return 2;if(11>j.S){var Q=j.f.RGBA;Q.fb+=(j.height-1)*Q.A,Q.A=-Q.A}else Q=j.f.kb,j=j.height,Q.O+=(j-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(j-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(j-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(j-1)*Q.lb,Q.lb=-Q.lb);return 0}function nf(j,Q,J,ae){if(ae==null||0>=j||0>=Q)return 2;if(J!=null){if(J.Da){var ue=J.cd,me=J.bd,ge=-2&J.v,ve=-2&J.j;if(0>ge||0>ve||0>=ue||0>=me||ge+ue>j||ve+me>Q)return 2;j=ue,Q=me}if(J.da){if(!je(j,Q,ue=[J.ib],me=[J.hb]))return 2;j=ue[0],Q=me[0]}}ae.width=j,ae.height=Q;e:{var we=ae.width,ke=ae.height;if(j=ae.S,0>=we||0>=ke||!(j>=Ri&&13>j))j=2;else{if(0>=ae.Rd&&ae.sd==null){ge=me=ue=Q=0;var Me=(ve=we*U2[j])*ke;if(11>j||(me=(ke+1)/2*(Q=(we+1)/2),j==12&&(ge=(ue=we)*ke)),(ke=s(Me+2*me+ge))==null){j=1;break e}ae.sd=ke,11>j?((we=ae.f.RGBA).eb=ke,we.fb=0,we.A=ve,we.size=Me):((we=ae.f.kb).y=ke,we.O=0,we.fa=ve,we.Fd=Me,we.f=ke,we.N=0+Me,we.Ab=Q,we.Cd=me,we.ea=ke,we.W=0+Me+me,we.Db=Q,we.Ed=me,j==12&&(we.F=ke,we.J=0+Me+2*me),we.Tc=ge,we.lb=ue)}if(Q=1,ue=ae.S,me=ae.width,ge=ae.height,ue>=Ri&&13>ue)if(11>ue)j=ae.f.RGBA,Q&=(ve=Math.abs(j.A))*(ge-1)+me<=j.size,Q&=ve>=me*U2[ue],Q&=j.eb!=null;else{j=ae.f.kb,ve=(me+1)/2,Me=(ge+1)/2,we=Math.abs(j.fa),ke=Math.abs(j.Ab);var nt=Math.abs(j.Db),et=Math.abs(j.lb),Ke=et*(ge-1)+me;Q&=we*(ge-1)+me<=j.Fd,Q&=ke*(Me-1)+ve<=j.Cd,Q=(Q&=nt*(Me-1)+ve<=j.Ed)&we>=me&ke>=ve&nt>=ve,Q&=j.y!=null,Q&=j.f!=null,Q&=j.ea!=null,ue==12&&(Q&=et>=me,Q&=Ke<=j.Tc,Q&=j.F!=null)}else Q=0;j=Q?0:2}}return j!=0||J!=null&&J.fd&&(j=Ih(ae)),j}var Os=64,$d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],af=24,sf=32,Fh=8,So=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(j){return j},_.Predictor2=function(j,Q,J){return Q[J+0]},_.Predictor3=function(j,Q,J){return Q[J+1]},_.Predictor4=function(j,Q,J){return Q[J-1]},_.Predictor5=function(j,Q,J){return Pe(Pe(j,Q[J+1]),Q[J+0])},_.Predictor6=function(j,Q,J){return Pe(j,Q[J-1])},_.Predictor7=function(j,Q,J){return Pe(j,Q[J+0])},_.Predictor8=function(j,Q,J){return Pe(Q[J-1],Q[J+0])},_.Predictor9=function(j,Q,J){return Pe(Q[J+0],Q[J+1])},_.Predictor10=function(j,Q,J){return Pe(Pe(j,Q[J-1]),Pe(Q[J+0],Q[J+1]))},_.Predictor11=function(j,Q,J){var ae=Q[J+0];return 0>=ot(ae>>24&255,j>>24&255,(Q=Q[J-1])>>24&255)+ot(ae>>16&255,j>>16&255,Q>>16&255)+ot(ae>>8&255,j>>8&255,Q>>8&255)+ot(255&ae,255&j,255&Q)?ae:j},_.Predictor12=function(j,Q,J){var ae=Q[J+0];return(qe((j>>24&255)+(ae>>24&255)-((Q=Q[J-1])>>24&255))<<24|qe((j>>16&255)+(ae>>16&255)-(Q>>16&255))<<16|qe((j>>8&255)+(ae>>8&255)-(Q>>8&255))<<8|qe((255&j)+(255&ae)-(255&Q)))>>>0},_.Predictor13=function(j,Q,J){var ae=Q[J-1];return(Ze((j=Pe(j,Q[J+0]))>>24&255,ae>>24&255)<<24|Ze(j>>16&255,ae>>16&255)<<16|Ze(j>>8&255,ae>>8&255)<<8|Ze(j>>0&255,ae>>0&255))>>>0};var I1=_.PredictorAdd0;_.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Bm=_.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var wg,jl=_.ColorIndexInverseTransform,ti=_.MapARGB,Gd=_.VP8LColorIndexInverseTransformAlpha,Tm=_.MapAlpha,Gu=_.VP8LPredictorsAdd=[];Gu.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Kd,no,yi,qd,No,cc,eu,uc,za,dc,vs,ko,of,tu,Oh,Wd,Xd,Yd,lf,Dh,Jd,Ku,cf,$a,sl,hn,mn,ba,ts=s(511),Il=s(2041),Zd=s(225),eA=s(767),qu=0,Eg=Il,uf=Zd,ri=eA,Fl=ts,Ri=0,Rh=1,ru=2,jm=3,df=4,Wu=5,Cg=6,Im=7,tA=8,Xu=9,Ph=10,_g=[2,3,7],Ol=[3,3,11],il=[280,256,256,256,40],Af=[0,1,1,1,0],Yu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ju=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ff=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],D2=8,Fm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Om=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ds=null,Ga=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],F1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],R2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zu=[],ao=[],ol=[],P2=1,Lh=2,au=[],ni=[];xt("UpsampleRgbLinePair",xe,3),xt("UpsampleBgrLinePair",ze,3),xt("UpsampleRgbaLinePair",Kr,4),xt("UpsampleBgraLinePair",bn,4),xt("UpsampleArgbLinePair",Tr,4),xt("UpsampleRgba4444LinePair",Ut,2),xt("UpsampleRgb565LinePair",st,2);var ed=_.UpsampleRgbLinePair,nA=_.UpsampleBgrLinePair,su=_.UpsampleRgbaLinePair,Sg=_.UpsampleBgraLinePair,Ng=_.UpsampleArgbLinePair,Mh=_.UpsampleRgba4444LinePair,kg=_.UpsampleRgb565LinePair,iu=16,Rs=1<<iu-1,aA=-227,Bg=482,yk=6,L2=0,wk=s(256),Ps=s(256),O1=s(256),Dm=s(256),Rm=s(Bg-aA),D1=s(Bg-aA);na("YuvToRgbRow",xe,3),na("YuvToBgrRow",ze,3),na("YuvToRgbaRow",Kr,4),na("YuvToBgraRow",bn,4),na("YuvToArgbRow",Tr,4),na("YuvToRgba4444Row",Ut,2),na("YuvToRgb565Row",st,2);var mf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],td=[0,2,8],Ek=[8,7,6,4,4,2,2,2,1,1,1,1],M2=1;this.WebPDecodeRGBA=function(j,Q,J,ae,ue){var me=Rh,ge=new Vu,ve=new Je;ge.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,ke=ve.height,Me=new gt;if(Me==null||j==null)var nt=2;else t(Me!=null),nt=Zc(j,Q,J,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(nt!=0?we=0:(we!=null&&(we[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],ae!=null&&(ae[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ae=new Fs,(ue=new Hd).data=j,ue.w=Q,ue.ha=J,ue.kd=1,Q=[0],t(ue!=null),((j=Zc(ue.data,ue.w,ue.ha,null,null,null,Q,null,ue))==0||j==7)&&Q[0]&&(j=4),(Q=j)==0){if(t(ge!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=gn,ae.ac=Xr,ae.bc=vn,ae.ma=ge,ue.xa){if((j=ut())==null){ge=1;break e}if(function(et,Ke){var kt=[0],ht=[0],Ue=[0];t:for(;;){if(et==null)return 0;if(Ke==null)return et.a=2,0;if(et.l=Ke,et.a=0,H(et.m,Ke.data,Ke.w,Ke.ha),!$t(et.m,kt,ht,Ue)){et.a=3;break t}if(et.xb=Lh,Ke.width=kt[0],Ke.height=ht[0],!$e(kt[0],ht[0],1,et,null))break t;return 1}return t(et.a!=0),0}(j,ae)){if(ae=(Q=nf(ae.width,ae.height,ge.Oa,ge.ba))==0){t:{ae=j;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((J=ae.l)!=null),t((ue=J.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,t(ae.ca!=null),!zd(ue.Oa,J,jm)){ae.a=2;break r}if(!tt(ae,J.width)||J.da)break r;if((J.da||Ir(ae.ca.S))&&Ge(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ge()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!De(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Te(ae,ae.V,ae.Ba,ae.c,ae.i,J.o,Be))break r;ue.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(Q=j.a)}else Q=j.a}else{if((j=new gi)==null){ge=1;break e}if(j.Fa=ue.na,j.P=ue.P,j.qc=ue.Sa,Pd(j,ae)){if((Q=nf(ae.width,ae.height,ge.Oa,ge.ba))==0){if(j.Aa=0,J=ge.Oa,t((ue=j)!=null),J!=null){if(0<(we=0>(we=J.Md)?0:100<we?255:255*we/100)){for(ke=Me=0;4>ke;++ke)12>(nt=ue.pb[ke]).lc&&(nt.ia=we*Ek[0>nt.lc?0:nt.lc]>>3),Me|=nt.ia;Me&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=J.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}YA(j,ae)||(Q=j.a)}}else Q=j.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=Ih(ge.ba))}ge=Q}me=ge!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var U2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,F){for(var U="",D=0;D<4;D++)U+=String.fromCharCode(_[F++]);return U}function d(_,F){return(_[F+0]<<0|_[F+1]<<8|_[F+2]<<16)>>>0}function f(_,F){return(_[F+0]<<0|_[F+1]<<8|_[F+2]<<16|_[F+3]<<24)>>>0}new l;var h=[0],p=[0],g=[],v=new l,b=e,y=function(_,F){var U={},D=0,k=!1,L=0,R=0;if(U.frames=[],!function(K,Y,te,ie){for(var Ae=0;Ae<ie;Ae++)if(K[Y+Ae]!=te.charCodeAt(Ae))return!0;return!1}(_,F,"RIFF",4)){var X,V;for(f(_,F+=4),F+=8;F<_.length;){var Z=u(_,F),H=f(_,F+=4);F+=4;var z=H+(1&H);switch(Z){case"VP8 ":case"VP8L":U.frames[D]===void 0&&(U.frames[D]={}),(P=U.frames[D]).src_off=k?R:F-8,P.src_size=L+H+8,D++,k&&(k=!1,L=0,R=0);break;case"VP8X":(P=U.header={}).feature_flags=_[F];var q=F+4;P.canvas_width=1+d(_,q),q+=3,P.canvas_height=1+d(_,q),q+=3;break;case"ALPH":k=!0,L=z+8,R=F-8;break;case"ANIM":(P=U.header).bgcolor=f(_,F),q=F+4,P.loop_count=(X=_)[(V=q)+0]<<0|X[V+1]<<8,q+=2;break;case"ANMF":var re,P;(P=U.frames[D]={}).offset_x=2*d(_,F),F+=3,P.offset_y=2*d(_,F),F+=3,P.width=1+d(_,F),F+=3,P.height=1+d(_,F),F+=3,P.duration=d(_,F),F+=3,re=_[F++],P.dispose=1&re,P.blend=re>>1&1}Z!="ANMF"&&(F+=z)}return U}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var C=y.header?y.header:null,S=y.frames?y.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],p=[C.canvas_width];for(var I=0;I<S.length&&S[I].blend!=0;I++);}var N=S[0],B=v.WebPDecodeRGBA(b,N.src_off,N.src_size,p,h);N.rgba=B,N.imgwidth=p[0],N.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)g[w]=B[w];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof oF=="function"},r=function(h,p,g,v){var b=4,y=i;switch(v){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=l}h=n(h,p,g,y);var C=oF(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(C)},n=function(h,p,g,v){for(var b,y,C,S=h.length/p,I=new Uint8Array(h.length+S),N=d(),B=0;B<S;B+=1){if(C=B*p,b=h.subarray(C,C+p),v)I.set(v(b,g,y),C+B);else{for(var w,_=N.length,F=[];w<_;w+=1)F[w]=N[w](b,g,y);var U=f(F.concat());I.set(F[U],C+B)}y=b}return I},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,v=[],b=h.length;v[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,v[y+1]=h[y]-g+256&255;return v},i=function(h,p,g){var v,b=[],y=h.length;b[0]=2;for(var C=0;C<y;C+=1)v=g&&g[C]||0,b[C+1]=h[C]-v+256&255;return b},o=function(h,p,g){var v,b,y=[],C=h.length;y[0]=3;for(var S=0;S<C;S+=1)v=h[S-p]||0,b=g&&g[S]||0,y[S+1]=h[S]+256-(v+b>>>1)&255;return y},l=function(h,p,g){var v,b,y,C,S=[],I=h.length;S[0]=4;for(var N=0;N<I;N+=1)v=h[N-p]||0,b=g&&g[N]||0,y=g&&g[N-p]||0,C=u(v,b,y),S[N+1]=h[N]-C+256&255;return S},u=function(h,p,g){if(h===p&&p===g)return h;var v=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return v<=b&&v<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,l]},f=function(h){var p=h.map(function(g){return g.reduce(function(v,b){return v+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,v){var b,y,C,S,I,N,B,w,_,F,U,D,k,L,R,X=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(C=new T2e(h)).imgData,y=C.bits,b=C.colorSpace,I=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){_=(w=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,U=new Uint8Array(_*C.colors),F=new Uint8Array(_);var Z,H=C.pixelBitlength-C.bits;for(L=0,R=0;L<_;L++){for(k=w[L],Z=0;Z<H;)U[R++]=k>>>Z&255,Z+=C.bits;F[L]=k>>>Z&255}}if(C.bits===16){_=(w=new Uint32Array(C.decodePixels().buffer)).length,U=new Uint8Array(_*(32/C.pixelBitlength)*C.colors),F=new Uint8Array(_*(32/C.pixelBitlength)),D=C.colors>1,L=0,R=0;for(var z=0;L<_;)k=w[L++],U[R++]=k>>>0&255,D&&(U[R++]=k>>>16&255,k=w[L++],U[R++]=k>>>0&255),F[z++]=k>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(h=r(U,C.width*C.colors,C.colors,v),B=r(F,C.width,1,v)):(h=U,B=F,X=void 0)}if(C.colorType===3&&(b=this.color_spaces.INDEXED,N=C.palette,C.transparency.indexed)){var q=C.transparency.indexed,re=0;for(L=0,_=q.length;L<_;++L)re+=q[L];if((re/=255)===_-1&&q.indexOf(0)!==-1)S=[q.indexOf(0)];else if(re!==_){for(w=C.decodePixels(),F=new Uint8Array(w.length),L=0,_=w.length;L<_;L++)F[L]=q[w[L]];B=r(F,C.width,1)}}var P=function(K){var Y;switch(K){case e.image_compression.FAST:Y=11;break;case e.image_compression.MEDIUM:Y=13;break;case e.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(v);return X===this.decode.FLATE_DECODE&&(V="/Predictor "+P+" "),V+="/Colors "+I+" /BitsPerComponent "+y+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:g,data:h,index:p,filter:X,decodeParameters:V,transparency:S,palette:N,sMask:B,predictor:P,width:C.width,height:C.height,bitsPerComponent:y,colorSpace:b}}}})(gr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new j2e(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new cT(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(gr.API),cd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Sa.log("bit decode error:"+r)}},cd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},cd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},cd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},cd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},cd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},cd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},cd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},cd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new cd(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new cT(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(gr.API),xQ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new xQ(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new cT(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(gr.API),gr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[l++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},gr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tv=gr.API,qE=tv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,v=o[0]||l,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||v)/l+h)),g=n;return b},mQ=tv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return tv.processArabic&&(e=tv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:qE.apply(this,arguments).reduce(function(s,i){return s+i},0)},pQ=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},gQ=function(e,t,r){r||(r={});var n,a,s,i,o,l,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,v=e.split(" "),b=qE.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),C=[];v.map(function(I){(I=I.split(/\s*\n/)).length>1?C=C.concat(I.map(function(N,B){return(B&&N.length?`
`:"")+N})):C.push(I[0])}),v=C,l=mQ.apply(this,[y,r])}for(s=0,i=v.length;s<i;s++){var S=0;if(n=v[s],l&&n[0]==`
`&&(n=n.substr(1),S=1),h+p+(g=(a=qE.apply(this,[n,r])).reduce(function(I,N){return I+N},0))>t||S){if(g>t){for(o=pQ.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(I,N){return I+N},0)}else d=[n];f.push(d),h=g+l,p=b}else d.push(n),h+=p+g,p=b}return u=l?function(I,N){return(N?y:"")+I.join(" ")}:function(I){return I.join(" ")},f.map(u)},tv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(gQ.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,v,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),v="-"):(g=s(h).slice(2),v=""),g=v+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,v,b={},y=1,C=b,S=[],I="",N="",B=f.length-1,w=1;w<B;w+=1)(v=f[w])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(S.push([C,g]),C={},g=void 0):v=="}"?((p=S.pop())[0][p[1]]=C,g=void 0,C=p[0]):v=="-"?y=-1:g===void 0?r.hasOwnProperty(v)?(I+=r[v],g=parseInt(I,16)*y,y=1,I=""):I+=v:r.hasOwnProperty(v)?(N+=r[v],C[g]=parseInt(N,16)*y,y=1,g=void 0,N=""):N+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(gr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(wy(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(gr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):Sx(()=>import("./index.es-CaLpT_cy.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}gr.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw Sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),gr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},gr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,f=0;function h(g,v){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,v=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?v.push("/"+g+" /"+r[g].value):v.push("/"+g+" "+r[g].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(gr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var v=u();d({data:p,addLength1:!0,objectId:v}),l("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Bv(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var C=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Bv(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Bv(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+C+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),l("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Bv(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Bv(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,v=p,b="",y=0,C="",S=g[v].encoding;if(g[v].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(C=o,v=p,Array.isArray(o)&&(C=o[0]),y=0;y<C.length;y+=1)g[v].metadata.hasOwnProperty("cmap")&&(i=g[v].metadata.cmap.unicode.codeMap[C[y].charCodeAt(0)]),i||C[y].charCodeAt(0)<256&&g[v].metadata.hasOwnProperty("Unicode")?b+=C[y]:b+="";var I="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?I=h(b,v).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(I=r(b,g[v])),f.isHex=!0,{text:I,x:l,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(gr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(gr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,S=0;this.__bidiEngine__={};var I=function(D){var k=D.charCodeAt(),L=k>>8,R=v[L];return R!==void 0?f[256*R+(255&k)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},N=function(D){for(var k,L=0;L<D.length;L++){if((k=I(D.charAt(L)))==="L")return!1;if(k==="R")return!0}return!1},B=function(D,k,L,R){var X,V,Z,H,z=k[R];switch(z){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(z="AN");break;case"AL":C=!0,z="R";break;case"WS":z="N";break;case"CS":R<1||R+1>=k.length||(X=L[R-1])!=="EN"&&X!=="AN"||(V=k[R+1])!=="EN"&&V!=="AN"?z="N":C&&(V="AN"),z=V===X?V:"N";break;case"ES":z=(X=R>0?L[R-1]:"B")==="EN"&&R+1<k.length&&k[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&L[R-1]==="EN"){z="EN";break}if(C){z="N";break}for(Z=R+1,H=k.length;Z<H&&k[Z]==="ET";)Z++;z=Z<H&&k[Z]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(H=k.length,Z=R+1;Z<H&&k[Z]==="NSM";)Z++;if(Z<H){var q=D[R],re=q>=1425&&q<=2303||q===64286;if(X=k[Z],re&&(X==="R"||X==="AL")){z="R";break}}}z=R<1||(X=k[R-1])==="B"?"N":L[R-1];break;case"B":C=!1,a=!0,z=S;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":z="N"}return z},w=function(D,k,L){var R=D.split("");return L&&_(R,L,{hiLevel:S}),R.reverse(),k&&k.reverse(),R.join("")},_=function(D,k,L){var R,X,V,Z,H,z=-1,q=D.length,re=0,P=[],K=S?p:h,Y=[];for(C=!1,a=!1,s=!1,X=0;X<q;X++)Y[X]=I(D[X]);for(V=0;V<q;V++){if(H=re,P[V]=B(D,Y,P,V),R=240&(re=K[H][g[P[V]]]),re&=15,k[V]=Z=K[re][5],R>0)if(R===16){for(X=z;X<V;X++)k[X]=1;z=-1}else z=-1;if(K[re][6])z===-1&&(z=V);else if(z>-1){for(X=z;X<V;X++)k[X]=Z;z=-1}Y[V]==="B"&&(k[V]=0),L.hiLevel|=Z}s&&function(te,ie,Ae){for(var oe=0;oe<Ae;oe++)if(te[oe]==="S"){ie[oe]=S;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ie[ce]=S}}(Y,k,q)},F=function(D,k,L,R,X){if(!(X.hiLevel<D)){if(D===1&&S===1&&!a)return k.reverse(),void(L&&L.reverse());for(var V,Z,H,z,q=k.length,re=0;re<q;){if(R[re]>=D){for(H=re+1;H<q&&R[H]>=D;)H++;for(z=re,Z=H-1;z<Z;z++,Z--)V=k[z],k[z]=k[Z],k[Z]=V,L&&(V=L[z],L[z]=L[Z],L[Z]=V);re=H}re++}}},U=function(D,k,L){var R=D.split(""),X={hiLevel:S};return L||(L=[]),_(R,L,X),function(V,Z,H){if(H.hiLevel!==0&&d)for(var z,q=0;q<V.length;q++)Z[q]===1&&(z=b.indexOf(V[q]))>=0&&(V[q]=b[z+1])}(R,L,X),F(2,R,k,L,X),F(1,R,k,L,X),R.join("")};return this.__bidiEngine__.doBidiReorder=function(D,k,L){if(function(X,V){if(V)for(var Z=0;Z<X.length;Z++)V[Z]=Z;o===void 0&&(o=N(X)),u===void 0&&(u=N(X))}(D,k),i||!l||u)if(i&&l&&o^u)S=o?1:0,D=w(D,k,L);else if(!i&&l&&u)S=o?1:0,D=U(D,k,L),D=w(D,k);else if(!i||o||l||u){if(i&&!l&&o^u)D=w(D,k),o?(S=0,D=U(D,k,L)):(S=1,D=U(D,k,L),D=w(D,k));else if(i&&o&&!l&&u)S=1,D=U(D,k,L),D=w(D,k);else if(!i&&!l&&o^u){var R=d;o?(S=1,D=U(D,k,L),S=0,d=!1,D=U(D,k,L),d=R):(S=0,D=U(D,k,L),D=w(D,k),S=1,d=!1,D=U(D,k,L),d=R,D=w(D,k))}}else S=0,D=U(D,k,L);else S=o?1:0,D=U(D,k,L);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new om(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new G2e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new I2e(this.contents),this.head=new O2e(this),this.name=new M2e(this),this.cmap=new HZ(this),this.toUnicode={},this.hhea=new D2e(this),this.maxp=new U2e(this),this.hmtx=new Q2e(this),this.post=new P2e(this),this.os2=new R2e(this),this.loca=new $2e(this),this.glyf=new H2e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)t=l[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Fd,om=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),I2e=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,l,u,d,f,h,p,g,v;for(v in p=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),i=Math.floor(f/l),d=16*p-f,(a=new om).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[v],a.writeString(v),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),v==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=VZ.call(r);r.length%4;)r.push(0);for(s=new om(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),F2e={}.hasOwnProperty,$A=function(e,t){for(var r in t)F2e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Fd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var O2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new om).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),bQ=function(){function e(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,C,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var I,N;for(N=[],l=I=0;0<=h?I<h:I>h;l=0<=h?++I:--I)N.push(t.readUInt16());return N}(),t.pos+=2,v=function(){var I,N;for(N=[],l=I=0;0<=h?I<h:I>h;l=0<=h?++I:--I)N.push(t.readUInt16());return N}(),u=function(){var I,N;for(N=[],l=I=0;0<=h?I<h:I>h;l=0<=h?++I:--I)N.push(t.readUInt16());return N}(),d=function(){var I,N;for(N=[],l=I=0;0<=h?I<h:I>h;l=0<=h?++I:--I)N.push(t.readUInt16());return N}(),a=(this.length-t.pos+this.offset)/2,o=function(){var I,N;for(N=[],l=I=0;0<=a?I<a:I>a;l=0<=a?++I:--I)N.push(t.readUInt16());return N}(),l=y=0,S=s.length;y<S;l=++y)for(b=s[l],n=C=g=v[l];g<=b?C<=b:C>=b;n=g<=b?++C:--C)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-g)-(h-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,C,S,I,N,B,w,_,F,U,D,k,L,R,X,V,Z,H,z,q,re,P,K,Y,te,ie,Ae,oe,ce,pe,Ie,ne;switch(R=new om,i=Object.keys(t).sort(function(Se,De){return Se-De}),r){case"macroman":for(v=0,b=function(){var Se=[];for(g=0;g<256;++g)Se.push(0);return Se}(),C={0:0},s={},X=0,z=i.length;X<z;X++)C[ce=t[a=i[X]]]==null&&(C[ce]=++v),s[a]={old:t[a],new:C[t[a]]},b[a]=C[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(b),{charMap:s,subtable:R.data,maxGlyphID:v+1};case"unicode":for(k=[],f=[],S=0,C={},n={},y=u=null,V=0,q=i.length;V<q;V++)C[N=t[a=i[V]]]==null&&(C[N]=++S),n[a]={old:N,new:C[N]},o=C[N]-a,y!=null&&o===u||(y&&f.push(y),k.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),k.push(65535),U=2*(F=k.length),_=2*Math.pow(Math.log(F)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,w=2*F-_,l=[],B=[],p=[],g=Z=0,re=k.length;Z<re;g=++Z){if(D=k[g],d=f[g],D===65535){l.push(0),B.push(0);break}if(D-(L=n[D].new)>=32768)for(l.push(0),B.push(2*(p.length+F-g)),a=H=D;D<=d?H<=d:H>=d;a=D<=d?++H:--H)p.push(n[a].new);else l.push(L-D),B.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*F+2*p.length),R.writeUInt16(0),R.writeUInt16(U),R.writeUInt16(_),R.writeUInt16(h),R.writeUInt16(w),Ae=0,P=f.length;Ae<P;Ae++)a=f[Ae],R.writeUInt16(a);for(R.writeUInt16(0),oe=0,K=k.length;oe<K;oe++)a=k[oe],R.writeUInt16(a);for(pe=0,Y=l.length;pe<Y;pe++)o=l[pe],R.writeUInt16(o);for(Ie=0,te=B.length;Ie<te;Ie++)I=B[Ie],R.writeUInt16(I);for(ne=0,ie=p.length;ne<ie;ne++)v=p[ne],R.writeUInt16(v);return{charMap:n,subtable:R.data,maxGlyphID:S+1}}},e}(),HZ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new bQ(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=bQ.encode(r,n),(s=new om).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),D2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),R2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),P2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),L2e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},M2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,l,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new L2e(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),U2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Q2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),VZ=[].slice,H2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new om(n.read(s))).readShort(),d=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new z2e(l,d,h,u,f):new V2e(l,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),V2e=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),z2e=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new om(VZ.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),$2e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $A(t,Fd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),G2e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,l;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y;for(a in n=HZ.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(l=y[a]).old]=l.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(C){var S,I;for(S in I={},C)I[C[S]]=S;return I}(p),f=Object.keys(d).sort(function(C,S){return C-S}),v=function(){var C,S,I;for(I=[],C=0,S=f.length;C<S;C++)o=f[C],I.push(d[o]);return I}(),s=this.font.glyf.encode(i,v,p),u=this.font.loca.encode(s.offsets,v),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();gr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function zZ(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var yQ={},ax=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:yQ=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return yQ||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),hF=function(e,t){return hF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},hF(e,t)};function $Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GZ=function(e){$Z(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function K2e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function q2e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function wS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function KZ(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=qZ(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function qZ(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function GN(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function WZ(e,t){var r=GN(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function W2e(e,t,r,n,a){var s={},i=1.3333333333333333,o=uT(t,function(S){return a.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var l=uT(t,function(S){return a.getComputedStyle(S).color});l!=null&&(s.textColor=l);var u=Y2e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=uT(t,function(S){return a.getComputedStyle(S)[d]});g!=null&&(s.lineColor=g);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=X2e(n);y&&(s.fontStyle=y);var C=(n.fontFamily||"").toLowerCase();return e.indexOf(C)!==-1&&(s.font=C),s}function X2e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function uT(e,t){var r=XZ(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function XZ(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:XZ(e.parentElement,t):r}function Y2e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=GN(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function YZ(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],v=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=J2e(l,u,r,g,n,a);b&&(v==="thead"?d.push(b):v==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function J2e(e,t,r,n,a,s){for(var i=new GZ(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=W2e(e,l,t,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Z2e(l)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function Z2e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function eEe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Lf(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function JZ(e,t){var r=new ax(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();eEe(a,n,t);var s=Lf({},a,n,t),i;typeof window<"u"&&(i=window);var o=tEe(a,n,t),l=rEe(a,n,t),u=nEe(r,s),d=sEe(r,s,i);return{id:t.tableId,content:d,hooks:l,styles:o,settings:u}}function tEe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=e[l],d=t[l],f=r[l];n.columnStyles=Lf({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[l]||{}});n[l]=Lf({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function rEe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function nEe(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g=GN(t.margin,40/e.scaleFactor()),v=(r=aEe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var C=(s=t.useCss)!==null&&s!==void 0?s:!1,S=t.theme||(C?"plain":"striped"),I=!!t.horizontalPageBreak,N=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:C,theme:S,startY:v,margin:g,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:I,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function aEe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function sEe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=YZ(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||iEe(n,a,s);return{columns:l,head:n,body:a,foot:s}}function iEe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var mF=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),oEe=function(e){$Z(t,e);function t(r,n,a,s,i,o){var l=e.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return t}(mF),lEe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new oEe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new mF(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new mF(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),ZZ=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof GZ&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},e}(),eee=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=GN(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),cEe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function uEe(e,t){dEe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=pF(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=pF(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),fEe(t),hEe(t,e),AEe(t)}function dEe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=WZ(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,l,null);var f=u.padding("horizontal");u.contentWidth=wS(u.text,u.styles,e)+f;var h=wS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function pF(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=pF(h,t,r))}return t}function AEe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=t[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[l.index]={cell:d,left:h,row:s}}}}}function fEe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function hEe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=wQ(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=wQ(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function wQ(e,t,r,n,a){return e.map(function(s){return mEe(s,t,r,n,a)})}function mEe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=wS(e,r,n))return e;for(;t<wS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function tee(e,t){var r=new ax(e),n=pEe(t,r.scaleFactor()),a=new lEe(t,n);return uEe(r,a),r.applyStyles(r.userStyles),a}function pEe(e,t){var r=e.content,n=vEe(r.columns);if(r.head.length===0){var a=EQ(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=EQ(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:dT("head",r.head,n,i,s,t),body:dT("body",r.body,n,i,s,t),foot:dT("foot",r.foot,n,i,s,t)}}function dT(e,t,r,n,a,s){var i={},o=t.map(function(l,u){for(var d=0,f={},h=0,p=0,g=0,v=r;g<v.length;g++){var b=v[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(l)?y=l[b.index-h-d]:y=l[b.dataKey];var C={};typeof y=="object"&&!Array.isArray(y)&&(C=(y==null?void 0:y.styles)||{});var S=xEe(e,b,u,a,n,s,C),I=new eee(y,S,e);f[b.dataKey]=I,f[b.index]=I,p=I.colSpan-1,i[b.index]={left:I.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new ZZ(l,u,e,f)});return o}function EQ(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=gEe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function gEe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function vEe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new cEe(a,t,r)})}function xEe(e,t,r,n,a,s,i){var o=q2e(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var u=Lf({},o.table,o[e],a.styles,l),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Lf({},o.alternateRow,a.alternateRowStyles):{},p=K2e(s),g=Lf({},p,u,h,f);return Lf(g,i)}function bEe(e,t,r){var n;r===void 0&&(r={});var a=WZ(e,t),s=new Map,i=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function yEe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=bEe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function ree(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=t.body,u=l.reduce(function(h,p){return h+p.height},0);o+=u}var d=new ax(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(aee(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=Lf({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?wEe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return ah(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;ES(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return ah(d,t,h,s,t.columns)})),KZ(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function wEe(e,t,r,n){var a=yEe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Ey(e,t,r,n,u.columns,!0):CQ(e,t,n,u.columns),EEe(e,t,r,n,u.columns),AT(e,t,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?Ey(e,t,r,n,d,!0):CQ(e,t,n,d),u=_Q(e,t,i+1,n,d),AT(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Ey(e,t,r,n,h.columns,!0),_Q(e,t,i+1,n,h.columns,f),AT(e,t,n,h.columns)}),i=u};i<t.body.length-1;)l()}function CQ(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return ah(e,t,s,r,n)})}function EEe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;ES(e,t,s,o,r,n,a)})}function _Q(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(l,u){var d=r+u===t.body.length-1,f=nee(e,t,d,n);l.canEntireRowFit(f,a)&&(ah(e,t,l,n,a),o=r+u)}),o}function AT(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return ah(e,t,s,r,n)})}function CEe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function _Ee(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=e.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new eee(u.raw,u.styles,u.section);d=Lf(d,u),d.text=[];var f=CEe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var g=new ZZ(e.raw,-1,e.section,a,!0);g.height=s;for(var v=0,b=r.columns;v<b.length;v++){var l=b[v],d=g.cells[l.index];d&&(d.height=g.height);var u=e.cells[l.index];u&&(u.height=e.height)}return g}function SEe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function ES(e,t,r,n,a,s,i){var o=nee(e,t,n,s);if(r.canEntireRowFit(o,i))ah(e,t,r,s,i);else if(SEe(e,r,o,t)){var l=_Ee(r,o,t,e);ah(e,t,r,s,i),Ey(e,t,a,s,i),ES(e,t,l,n,a,s,i)}else Ey(e,t,a,s,i),ES(e,t,r,n,a,s,i)}function ah(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}NEe(e,l,n);var d=l.getTextPos();zZ(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function NEe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=qZ(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),kEe(e,t,r,n.lineWidth))}function kEe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function nee(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Ey(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return ah(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;KZ(e,t,r,n),aee(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return ah(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function aee(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function BEe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=JZ(this,n),s=tee(this,a);return ree(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){zZ(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return ax.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){ax.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new ax(this),s=YZ(a,t,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var fT;function vl(e,t){var r=JZ(e,t),n=tee(e,r);ree(e,n)}try{if(typeof window<"u"&&window){var SQ=window,NQ=SQ.jsPDF||((fT=SQ.jspdf)===null||fT===void 0?void 0:fT.jsPDF);NQ&&BEe(NQ)}}catch(e){console.error("Could not apply autoTable plugin",e)}const VD="evaluaciones_pruebas",zD="evaluaciones_rubricas_estaticas",$D="evaluaciones_rubricas_interactivas",TEe="usuarios",KN=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},jEe=e=>{const t=tr(Lt(_t,VD),Gr("fechaCreacion","desc"));return xr(t,n=>{e(n.docs.map(a=>KN(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},IEe=async e=>{try{const{id:t,...r}=e,n=mr(_t,VD,t);await Ji(n,{...r,fechaCreacion:hr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},FEe=async e=>{try{await Is(mr(_t,VD,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},OEe=e=>{const t=tr(Lt(_t,zD),Gr("fechaCreacion","desc"));return xr(t,n=>{e(n.docs.map(a=>KN(a)))},n=>{console.error("Error al suscribirse a las rbricas estticas:",n),e([])})},DEe=async e=>{try{const{id:t,...r}=e,n=mr(_t,zD,t);await Ji(n,{...r,fechaCreacion:hr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rbrica esttica:",t),new Error("No se pudo guardar la rbrica.")}},REe=async e=>{try{await Is(mr(_t,zD,e))}catch(t){throw console.error("Error al eliminar la rbrica esttica:",t),new Error("No se pudo eliminar la rbrica.")}},PEe=e=>{const t=tr(Lt(_t,$D));return xr(t,n=>{e(n.docs.map(a=>KN(a)))},n=>{console.error("Error al suscribirse a las rbricas interactivas:",n),e([])})},LEe=async e=>{try{const{id:t,...r}=e,n=mr(_t,$D,t);await Ji(n,r)}catch(t){throw console.error("Error al guardar la rbrica interactiva:",t),new Error("No se pudo guardar la rbrica interactiva.")}},MEe=async e=>{try{return(await Zn(Lt(_t,$D),e)).id}catch(t){throw console.error("Error al crear la rbrica interactiva:",t),new Error("No se pudo crear la rbrica interactiva.")}},UEe=e=>{const t=tr(Lt(_t,TEe));return xr(t,n=>{e(n.docs.map(a=>KN(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},QEe=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],kQ={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},C_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},HEe=({open:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),VEe=({item:e,index:t,showAnswers:r})=>{const n=T.useMemo(()=>e.tipo==="Trminos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Seleccin mltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Trminos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto}),"  ",a.definicion]},s))})]})]}),e.tipo==="Comprensin de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Seleccin mltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},zEe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(null),[a,s]=T.useState(!1),[i,o]=T.useState(!1),[l,u]=T.useState(null),[d,f]=T.useState(!1),h={nombre:"",asignatura:qi[0],nivel:Dv[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=T.useState(h);T.useEffect(()=>{const w=jEe(t);return()=>w()},[]);const v=w=>{const{name:_,value:F}=w.target;g(U=>({...U,[_]:F}))},b=w=>{g(_=>{const F={..._.tiposActividad};return F[w]?delete F[w]:F[w]=kQ[w][0],{..._,tiposActividad:F}})},y=(w,_)=>{g(F=>({...F,tiposActividad:{...F.tiposActividad,[w]:_}}))},C=w=>{g(_=>{const F=_.selectedNee.includes(w)?_.selectedNee.filter(U=>U!==w):[..._.selectedNee,w];return{..._,selectedNee:F}})},S=async w=>{if(w.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const _=Object.entries(p.tiposActividad).map(([D,k])=>`- ${k} tem(s) de tipo '${D}'`).join(`
`),F=p.isNee&&p.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",U=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${_}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${F}

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
               - 'instrucciones': Instrucciones para esa actividad especfica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de tem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numrico.
                   - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales segn el tipo:
                       - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensin de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{sm("Evaluacin - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=(await(await new cs(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);let z=0;H.actividades.forEach(re=>{re.items.forEach(P=>{z+=P.puntaje||0,P.tipo==="Comprensin de lectura"&&P.preguntas&&P.preguntas.forEach(K=>{z+=K.puntaje||0})})});const q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:H.objetivo,instruccionesGenerales:H.instruccionesGenerales,puntajeIdeal:z,actividades:H.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(q),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},I=async()=>{if(r)try{await IEe(r),alert("Prueba guardada con xito.")}catch(w){console.error(w),alert("No se pudo guardar la prueba.")}},N=async w=>{if(window.confirm("Eliminar esta prueba?"))try{await FEe(w),(r==null?void 0:r.id)===w&&n(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},B=async w=>{o(!0);const _=new gr("p","mm","a4"),F=20,U=_.internal.pageSize.getHeight(),D=_.internal.pageSize.getWidth(),k=D-F*2;let L=F;const R=Z=>{Z.setFillColor(230,230,230),Z.rect(0,0,D,25,"F"),Z.setFontSize(9),Z.setTextColor(0,0,0),Z.text("LICEO INDUSTRIAL DE RECOLETA",F,15,{align:"left"}),Z.text("SUBDIRECCIN DE GESTIN PEDAGGICA",D-F,15,{align:"right"})};R(_),L=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(w.nombre,D/2,L,{align:"center"}),L+=10,vl(_,{startY:L,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},w.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},w.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},w.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:w.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:w.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:Z=>{R(_)}}),L=_.lastAutoTable.finalY+10;const X=Z=>{L+Z>U-F&&(_.addPage(),R(_),L=F+15,_.setTextColor(0,0,0))},V=(Z,H)=>{_.setFont("helvetica",H.isBold?"bold":"normal"),_.setFontSize(H.fontSize);const z=Array.isArray(Z)?Z.join(`
`):Z;return _.getTextDimensions(z,{maxWidth:H.width}).h};for(const Z of w.actividades){let H=V(Z.titulo,{fontSize:12,width:k,isBold:!0})+V(Z.instrucciones,{fontSize:10,width:k})+12;X(H),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(Z.titulo,F,L),L+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const z=_.splitTextToSize(Z.instrucciones,k);_.text(z,F,L),L+=z.length*(10*.35*1.15)+4;for(const[q,re]of Z.items.entries()){let P=0;const K=`${q+1}. ${re.pregunta} (${re.puntaje} pts)`;switch(P+=V(K,{fontSize:10,width:k,isBold:!0}),re.tipo){case"Seleccin mltiple":re.opciones.forEach(ie=>{P+=V(ie,{fontSize:10,width:k-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Trminos pareados":P+=re.pares.length*12+20;break;case"Comprensin de lectura":const te=re;P+=V(te.texto,{fontSize:10,width:k-10})+10,te.preguntas.forEach(ie=>{const Ae=`${ie.pregunta} (${ie.puntaje} pts)`;P+=V(Ae,{fontSize:10,width:k-5,isBold:!0}),ie.tipo==="Seleccin mltiple"?(ie.opciones.forEach(oe=>{P+=V(oe,{fontSize:10,width:k-10})+3}),P+=7):ie.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}X(P),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const Y=_.splitTextToSize(K,k);if(_.text(Y,F,L),L+=Y.length*5+4,_.setFont("helvetica","normal"),re.tipo==="Seleccin mltiple")re.opciones.forEach((te,ie)=>{_.text(`${String.fromCharCode(65+ie)}) ${te}`,F+5,L),L+=7});else if(re.tipo==="Verdadero o Falso")_.text("V ______    F ______",F+5,L),L+=10;else if(re.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(F,L,k,25,"FD"),L+=30;else if(re.tipo==="Trminos pareados"){const te=[...re.pares.map(Ae=>Ae.definicion)].sort(()=>Math.random()-.5),ie=re.pares.map((Ae,oe)=>[`${oe+1}. ${Ae.concepto}`,`(   ) ${te[oe]}`]);vl(_,{startY:L,head:[["Columna A: Concepto","Columna B: Definicin"]],body:ie,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ae=>R(_)}),L=_.lastAutoTable.finalY+10}else if(re.tipo==="Comprensin de lectura"){const te=re;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const ie=_.splitTextToSize(te.texto,k-10),Ae=ie.length*(10*.35*1.15)+8;_.rect(F,L,k,Ae,"FD"),L+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(ie,F+5,L),L+=Ae;for(const[oe,ce]of te.preguntas.entries()){const pe=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;_.setFont("helvetica","bold");const Ie=_.splitTextToSize(pe,k-5);_.text(Ie,F+5,L),L+=Ie.length*5+4,_.setFont("helvetica","normal"),ce.tipo==="Seleccin mltiple"?ce.opciones.forEach((ne,Se)=>{_.text(`${String.fromCharCode(65+Se)}) ${ne}`,F+10,L),L+=7}):ce.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(F+5,L,k-5,25,"FD"),L+=30)}}L+=5}}_.save(`${w.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(HEe,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:I,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>B(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(nZ,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(w=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:w.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:w.instrucciones}),c.jsx("div",{className:"space-y-6",children:w.items.map((_,F)=>c.jsx(VEe,{item:_,index:F,showAnswers:d},_.id))})]},w.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:v,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:p.asignatura,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(w=>c.jsx("option",{children:w},w))}),c.jsx("select",{name:"nivel",value:p.nivel,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Dv.map(w=>c.jsx("option",{children:w},w))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((w,_)=>c.jsx("button",{type:"button",onClick:()=>g(F=>({...F,dificultad:w})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${p.dificultad===w?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:w},w))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.isNee,onChange:w=>g(_=>({..._,isNee:w.target.checked,selectedNee:w.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:vS.map(w=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(w),onChange:()=>C(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:w})]},w))})]})]})]}),c.jsx("textarea",{name:"contenido",value:p.contenido,onChange:v,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:QEe.map(w=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[w],onChange:()=>b(w),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:w})]}),p.tiposActividad[w]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),kQ[w].map(_=>c.jsx("button",{type:"button",onClick:()=>y(w,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[w]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},w))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:e.length>0?e.map(w=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[w.asignatura," - ",w.nivel," (",new Date(w.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(w),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>N(w.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},$Ee=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=T.useState(null),[i,o]=T.useState("list"),[l,u]=T.useState(!1),[d,f]=T.useState(""),h=async(N,B)=>{if(!N.trim()||!B.trim()){alert("El ttulo y la descripcin son obligatorios.");return}u(!0);const w=`Crea una rbrica de evaluacin detallada sobre "${N}" con el propsito de "${B}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{sm("Evaluacin - Rbricas");const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new cs(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),X=JSON.parse(R),V={id:crypto.randomUUID(),titulo:N,descripcion:B,fechaCreacion:new Date().toISOString(),dimensiones:X.map(Z=>({id:crypto.randomUUID(),nombre:Z.dimension,niveles:{insuficiente:Z.insuficiente,suficiente:Z.suficiente,competente:Z.competente,avanzado:Z.avanzado}}))};s(V)}catch(F){console.error(F),alert("Error al generar la rbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const N=crypto.randomUUID(),B={id:N,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(F=>F?{...F,dimensiones:[...F.dimensiones,B]}:null),f("");const w=`Para una rbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(F=>F.nombre).join(", ")}. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{sm("Evaluacin - Rbricas (Aadir Dimensin)");const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new cs(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),X=JSON.parse(R);s(V=>V?{...V,dimensiones:V.dimensiones.map(Z=>Z.id===N?{...Z,niveles:X,isLoading:!1}:Z)}:null)}catch(F){console.error("Error generating dimension descriptors:",F),alert("No se pudieron generar los descriptores."),s(U=>U?{...U,dimensiones:U.dimensiones.filter(D=>D.id!==N)}:null)}},g=()=>{if(!a)return;e.some(B=>B.id===a.id)?t(a):n(a),o("list"),s(null)},v=N=>{s(N),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(N,B,w)=>{a&&s(_=>_?{..._,dimensiones:_.dimensiones.map(F=>F.id!==N?F:B==="nombre"?{...F,nombre:w}:{...F,niveles:{...F.niveles,[B]:w}})}:null)},C=(N,B)=>{s(w=>w?{...w,[N]:B}:null)},S=N=>{a&&s(B=>B?{...B,dimensiones:B.dimensiones.filter(w=>w.id!==N)}:null)},I=()=>{if(!a)return null;const N="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",B=`${N} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),c.jsx("input",{value:a.titulo,onChange:w=>C("titulo",w.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${N} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:w=>C("descripcion",w.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${N} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":" Generar Rbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(w=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:w},w))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:w.nombre,onChange:_=>y(w.id,"nombre",_.target.value),rows:4,className:B})}),Object.keys(w.niveles).map(_=>c.jsx("td",{className:"p-2 w-1/5",children:w.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:w.niveles[_],onChange:F=>y(w.id,_,F.target.value),rows:4,className:B})},_)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>S(w.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},w.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),c.jsx("input",{value:d,onChange:w=>f(w.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${N} mt-1`})]}),c.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(N=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:N.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>v(N),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(N.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},N.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):I()},GEe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState(null),[i,o]=T.useState(null),[l,u]=T.useState({rubricaEstaticaId:"",curso:""}),[d,f]=T.useState(null);T.useEffect(()=>{const C=PEe(n);return()=>C()},[]);const h=async C=>{C.preventDefault();const S=t.find(N=>N.id===l.rubricaEstaticaId);if(!S||!l.curso){alert("Debe seleccionar una rbrica y un curso.");return}const I={nombre:S.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:S.id,resultados:{}};try{await MEe(I),u({rubricaEstaticaId:"",curso:""})}catch(N){console.error(N),alert("No se pudo crear la evaluacin con rbrica.")}},p=C=>{s(C),o(JSON.parse(JSON.stringify(C)))},g=(C,S,I)=>{i&&o(N=>{if(!N)return null;const B=JSON.parse(JSON.stringify(N));return B.resultados[C]||(B.resultados[C]={puntajes:{},feedback:""}),B.resultados[C].puntajes[S]=I,B})},v=async()=>{if(i)try{await LEe(i),s(i),alert("Cambios guardados.")}catch(C){console.error(C),alert("No se pudieron guardar los cambios.")}},b=T.useCallback(C=>{const S=i,I=t.find(U=>U.id===(S==null?void 0:S.rubricaEstaticaId));if(!S||!I)return{score:0,maxScore:0,grade:"N/A"};const N=I.dimensiones.length*4,B=S.resultados[C];if(!B)return{score:0,maxScore:N,grade:"1.0"};const w=Object.values(B.puntajes).reduce((U,D)=>U+D,0),_=1+6*(w/N),F=N>0?_.toFixed(1):"1.0";return{score:w,maxScore:N,grade:F}},[i,t]),y=async C=>{if(!i)return;const S=t.find(w=>w.id===i.rubricaEstaticaId),I=i.resultados[C];if(!S||!I||Object.keys(I.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(C);const B=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${S.dimensiones.map(w=>`${w.nombre}: ${I.puntajes[w.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluacin es "${S.titulo}". Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{sm("Evaluacin - Rbricas Interactivas (Feedback)");const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=(await(await new cs(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text();o(L=>{if(!L)return null;const R=JSON.parse(JSON.stringify(L));return R.resultados[C].feedback=k.replace(/(\*\*|\*)/g,""),R})}catch(w){console.error(w),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const C=t.find(I=>I.id===a.rubricaEstaticaId),S=e.filter(I=>I.profile===Yt.ESTUDIANTE&&C_(I.curso||"")===a.curso).map(I=>I.nombreCompleto).sort();return C?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:" Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),C.dimensiones.map(I=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:I.nombre},I.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),c.jsx("tbody",{children:S.map(I=>{var _;const{score:N,maxScore:B,grade:w}=b(I);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:I}),C.dimensiones.map(F=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(U=>{var D;return c.jsx("button",{onClick:()=>g(I,F.id,U),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[I])==null?void 0:D.puntajes[F.id])===U?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:U},U)})})},F.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[N,"/",B]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:w}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[I])==null?void 0:_.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>y(I),disabled:d===I,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===I?"...":"Generar IA"})]})})]},I)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),c.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:C=>u({...l,rubricaEstaticaId:C.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),t.map(C=>c.jsx("option",{value:C.id,children:C.titulo},C.id))]}),c.jsxs("select",{value:l.curso,onChange:C=>u({...l,curso:C.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),Ns.map(C=>c.jsx("option",{value:C,children:C},C))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(C=>c.jsxs("button",{onClick:()=>p(C),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:C.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:C.curso})]},C.id))})]})]})},KEe=({allUsers:e})=>{const[t,r]=T.useState(""),n=T.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Yt.ESTUDIANTE&&s.curso).map(s=>C_(s.curso)))).sort(),[e]),a=T.useMemo(()=>{const s=e.filter(i=>i.profile===Yt.ESTUDIANTE);return t?s.filter(i=>C_(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",c.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:C_(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},qEe=()=>{const[e,t]=T.useState("pruebas"),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState(!0);T.useEffect(()=>{o(!0);const f=UEe(n),h=OEe(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const l=async f=>{try{await DEe(f)}catch(h){console.error(h),alert("No se pudo guardar la rbrica.")}},u=async f=>{try{await REe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rbrica.")}},d=({tabName:f,label:h})=>c.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando mdulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guas"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestin de Nminas"})]})}),c.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&c.jsx(zEe,{}),e==="rubricas"&&c.jsx($Ee,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),e==="rubricasInteractivas"&&c.jsx(GEe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&c.jsx(KEe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var CS={};CS.version="0.18.5";var see=1252,WEe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],GD={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},KD=function(e){WEe.indexOf(e)!=-1&&(see=GD[0]=e)};function XEe(){KD(1252)}var vd=function(e){KD(e)};function qD(){vd(1200),XEe()}function BQ(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function YEe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function iee(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Jb=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?YEe(e.slice(2)):t==254&&r==255?iee(e.slice(2)):t==65279?e.slice(1):e},WE=function(t){return String.fromCharCode(t)},TQ=function(t){return String.fromCharCode(t)},nw,j0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function aw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=j0.charAt(s)+j0.charAt(i)+j0.charAt(o)+j0.charAt(l);return t}function Dc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=j0.indexOf(e.charAt(u++)),i=j0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=j0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=j0.indexOf(e.charAt(u++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),xh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function lm(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function jQ(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var kc=function(t){return pn?xh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function qN(e){if(typeof ArrayBuffer>"u")return kc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function xm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function JEe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function WD(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return WD(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ki=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:xh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function ZEe(e){for(var t=[],r=0,n=e.length+250,a=lm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=lm(65535),n=65530)}return t.push(a.slice(0,r)),Ki(t)}var xl=/\u0000/g,Zb=/[\u0001-\u0006]/g;function sx(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function xd(e,t){var r=""+e;return r.length>=t?r:_s("0",t-r.length)+r}function XD(e,t){var r=""+e;return r.length>=t?r:_s(" ",t-r.length)+r}function _S(e,t){var r=""+e;return r.length>=t?r:r+_s(" ",t-r.length)}function eCe(e,t){var r=""+Math.round(e);return r.length>=t?r:_s("0",t-r.length)+r}function tCe(e,t){var r=""+e;return r.length>=t?r:_s("0",t-r.length)+r}var IQ=Math.pow(2,32);function rv(e,t){if(e>IQ||e<-IQ)return eCe(e,t);var r=Math.round(e);return tCe(r,t)}function SS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var FQ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],hT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rCe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},OQ={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nCe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function NS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+l,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Ap(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=cCe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var oee=new Date(1899,11,31,0,0,0),aCe=oee.getTime(),sCe=new Date(1900,2,1,0,0,0);function lee(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=sCe&&(r+=1440*60*1e3),(r-(aCe+(e.getTimezoneOffset()-oee.getTimezoneOffset())*6e4))/(1440*60*1e3)}function YD(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iCe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function oCe(e){var t=e<0?12:11,r=YD(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function lCe(e){var t=YD(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function sw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=oCe(e):t===10?r=e.toFixed(10).substr(0,12):r=lCe(e),YD(iCe(r.toUpperCase()))}function Gp(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):sw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Fu(14,lee(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function cCe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function uCe(e,t,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return hT[r.m-1][1];case 5:return hT[r.m-1][0];default:return hT[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return FQ[r.q][0];default:return FQ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?xd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=xd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?xd(l,u):"";return d}function I0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var cee=/%/g;function dCe(e,t,r){var n=t.replace(cee,""),a=t.length-n.length;return Gf(e,n,r*Math.pow(10,2*a))+_s("%",a)}function ACe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Gf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function uee(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+uee(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var dee=/# (\?+)( ?)\/( ?)(\d+)/;function fCe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?_s(" ",e[1].length+1+e[4].length):XD(i,e[1].length)+e[2]+"/"+e[3]+xd(o,e[4].length))}function hCe(e,t,r){return r+(t===0?"":""+t)+_s(" ",e[1].length+2+e[4].length)}var Aee=/^#*0*\.([0#]+)/,fee=/\).*[0#]/,hee=/\(###\) ###\\?-####/;function dl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function DQ(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function RQ(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function mCe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function pCe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function mu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(fee)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?mu("n",n,r):"("+mu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ACe(e,t,r);if(t.indexOf("%")!==-1)return dCe(e,t,r);if(t.indexOf("E")!==-1)return uee(t,r);if(t.charCodeAt(0)===36)return"$"+mu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+rv(l,t.length);if(t.match(/^[#?]+$/))return a=rv(r,0),a==="0"&&(a=""),a.length>t.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(dee))return fCe(s,l,u);if(t.match(/^#+0+$/))return u+rv(l,t.length-t.indexOf("0"));if(s=t.match(Aee))return a=DQ(r,s[1].length).replace(/^([^\.]+)$/,"$1."+dl(s[1])).replace(/\.$/,"."+dl(s[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+_s("0",dl(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+DQ(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+I0(rv(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+mu(e,t,-r):I0(""+(Math.floor(r)+mCe(r,s[1].length)))+"."+xd(RQ(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return mu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sx(mu(e,t.replace(/[\\-]/g,""),r)),i=0,sx(sx(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(hee))return a=mu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=NS(l,Math.pow(10,i)-1,!1),a=""+u,d=Gf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=_S(o[2],i),d.length<s[4].length&&(d=dl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=NS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?XD(o[1],i)+s[2]+"/"+s[3]+_S(o[2],i):_s(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=rv(r,0),t.length<=a.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return dl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=RQ(r,s[1].length),r<0?"-"+mu(e,t,-r):I0(pCe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?xd(0,3-g.length):"")+g})+"."+xd(i,s[1].length);switch(t){case"###,##0.00":return mu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=I0(rv(l,0));return p!=="0"?u+p:"";case"###,###.00":return mu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return mu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function gCe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Gf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function vCe(e,t,r){var n=t.replace(cee,""),a=t.length-n.length;return Gf(e,n,r*Math.pow(10,2*a))+_s("%",a)}function mee(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+mee(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function gA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(fee)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?gA("n",n,r):"("+gA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return gCe(e,t,r);if(t.indexOf("%")!==-1)return vCe(e,t,r);if(t.indexOf("E")!==-1)return mee(t,r);if(t.charCodeAt(0)===36)return"$"+gA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+xd(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(dee))return hCe(s,l,u);if(t.match(/^#+0+$/))return u+xd(l,t.length-t.indexOf("0"));if(s=t.match(Aee))return a=(""+r).replace(/^([^\.]+)$/,"$1."+dl(s[1])).replace(/\.$/,"."+dl(s[1])),a=a.replace(/\.(\d*)$/,function(g,v){return"."+v+_s("0",dl(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+I0(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+gA(e,t,-r):I0(""+r)+"."+_s("0",s[1].length);if(s=t.match(/^#,#*,#0/))return gA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sx(gA(e,t.replace(/[\\-]/g,""),r)),i=0,sx(sx(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(hee))return a=gA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=NS(l,Math.pow(10,i)-1,!1),a=""+u,d=Gf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=_S(o[2],i),d.length<s[4].length&&(d=dl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=NS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?XD(o[1],i)+s[2]+"/"+s[3]+_S(o[2],i):_s(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return dl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+gA(e,t,-r):I0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?xd(0,3-g.length):"")+g})+"."+xd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=I0(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return gA(e,t.slice(0,t.lastIndexOf(".")),r)+dl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Gf(e,t,r){return(r|0)===r?gA(e,t,r):mu(e,t,r)}function xCe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var pee=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function u1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":SS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(pee))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function bCe(e,t,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!SS(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Ap(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Ap(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(u==null&&(u=Ap(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",i+=5,h="h"):(v.t="t",++i),u==null&&v.t==="T")return"";a[a.length]=v,l=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(pee)){if(u==null&&(u=Ap(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",u1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,C;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,l="h",b<1&&(b=1);break;case"s":(C=a[i].v.match(/\.0+$/))&&(y=Math.max(y,C[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",I;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=uCe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(I=i+1;a[I]!=null&&((o=a[I].t)==="?"||o==="D"||(o===" "||o==="t")&&a[I+1]!=null&&(a[I+1].t==="?"||a[I+1].t==="t"&&a[I+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[I].v==="/"||a[I].v===" "&&a[I+1]!=null&&a[I+1].t=="?"));)a[i].v+=a[I].v,a[I]={v:"",t:";"},++I;S+=a[i].v,i=I-1;break;case"G":a[i].t="t",a[i].v=Gp(t,r);break}var N="",B,w;if(S.length>0){S.charCodeAt(0)==40?(B=t<0&&S.charCodeAt(0)===45?-t:t,w=Gf("n",S,B)):(B=t<0&&n>1?-t:t,w=Gf("n",S,B),B<0&&a[0]&&a[0].t=="t"&&(w=w.substr(1),a[0].v="-"+a[0].v)),I=w.length-1;var _=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){_=i;break}var F=a.length;if(_===a.length&&w.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(I>=a[i].v.length-1?(I-=a[i].v.length,a[i].v=w.substr(I+1,a[i].v.length)):I<0?a[i].v="":(a[i].v=w.substr(0,I+1),I=-1),a[i].t="t",F=i);I>=0&&F<a.length&&(a[F].v=w.substr(0,I+1)+a[F].v)}else if(_!==a.length&&w.indexOf("E")===-1){for(I=w.indexOf(".")-1,i=_;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")-1:a[i].v.length-1,N=a[i].v.substr(d+1);d>=0;--d)I>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(N=w.charAt(I--)+N);a[i].v=N,a[i].t="t",F=i}for(I>=0&&F<a.length&&(a[F].v=w.substr(0,I+1)+a[F].v),I=w.indexOf(".")+1,i=_;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==_)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")+1:0,N=a[i].v.substr(0,d);d<a[i].v.length;++d)I<w.length&&(N+=w.charAt(I++));a[i].v=N,a[i].t="t",F=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(B=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=Gf(a[i].t,a[i].v,B),a[i].t="t");var U="";for(i=0;i!==a.length;++i)a[i]!=null&&(U+=a[i].v);return U}var PQ=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function LQ(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function yCe(e,t){var r=xCe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(PQ),o=r[1].match(PQ);return LQ(t,i)?[n,r[0]]:LQ(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Fu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Dr)[e],n==null&&(n=r.table&&r.table[OQ[e]]||Dr[OQ[e]]),n==null&&(n=nCe[e]||"General");break}if(SS(n,0))return Gp(t,r);t instanceof Date&&(t=lee(t,r.date1904));var a=yCe(n,t);if(SS(a[1]))return Gp(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return bCe(a[1],t,r,a[0])}function Kf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Dr[r]==null){t<0&&(t=r);continue}if(Dr[r]==e){t=r;break}}t<0&&(t=391)}return Dr[t]=e,t}function WN(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Kf(e[t],t)}function d1(){Dr=rCe()}var wCe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},gee=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ECe(e){var t=typeof e=="number"?Dr[e]:e;return t=t.replace(gee,"(\\d+)"),new RegExp("^"+t+"$")}function CCe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(gee)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:a=p;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var _Ce=function(){var e={};e.version="1.2.0";function t(){for(var w=0,_=new Array(256),F=0;F!=256;++F)w=F,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,_[F]=w;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(w){var _=0,F=0,U=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)D[U]=w[U];for(U=0;U!=256;++U)for(F=w[U],_=256+U;_<4096;_+=256)F=D[_]=F>>>8^w[F&255];var k=[];for(U=1;U!=16;++U)k[U-1]=typeof Int32Array<"u"?D.subarray(U*256,U*256+256):D.slice(U*256,U*256+256);return k}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],v=a[10],b=a[11],y=a[12],C=a[13],S=a[14];function I(w,_){for(var F=_^-1,U=0,D=w.length;U<D;)F=F>>>8^r[(F^w.charCodeAt(U++))&255];return~F}function N(w,_){for(var F=_^-1,U=w.length-15,D=0;D<U;)F=S[w[D++]^F&255]^C[w[D++]^F>>8&255]^y[w[D++]^F>>16&255]^b[w[D++]^F>>>24]^v[w[D++]]^g[w[D++]]^p[w[D++]]^h[w[D++]]^f[w[D++]]^d[w[D++]]^u[w[D++]]^l[w[D++]]^o[w[D++]]^i[w[D++]]^s[w[D++]]^r[w[D++]];for(U+=15;D<U;)F=F>>>8^r[(F^w[D++])&255];return~F}function B(w,_){for(var F=_^-1,U=0,D=w.length,k=0,L=0;U<D;)k=w.charCodeAt(U++),k<128?F=F>>>8^r[(F^k)&255]:k<2048?(F=F>>>8^r[(F^(192|k>>6&31))&255],F=F>>>8^r[(F^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,L=w.charCodeAt(U++)&1023,F=F>>>8^r[(F^(240|k>>8&7))&255],F=F>>>8^r[(F^(128|k>>2&63))&255],F=F>>>8^r[(F^(128|L>>6&15|(k&3)<<4))&255],F=F>>>8^r[(F^(128|L&63))&255]):(F=F>>>8^r[(F^(224|k>>12&15))&255],F=F>>>8^r[(F^(128|k>>6&63))&255],F=F>>>8^r[(F^(128|k&63))&255]);return~F}return e.table=r,e.bstr=I,e.buf=N,e.str=B,e}(),Er=function(){var t={};t.version="1.2.1";function r(fe,Be){for(var Ee=fe.split("/"),Ce=Be.split("/"),Ne=0,Te=0,Ye=Math.min(Ee.length,Ce.length);Ne<Ye;++Ne){if(Te=Ee[Ne].length-Ce[Ne].length)return Te;if(Ee[Ne]!=Ce[Ne])return Ee[Ne]<Ce[Ne]?-1:1}return Ee.length-Ce.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function s(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ee=Be.getHours();Ee=Ee<<6|Be.getMinutes(),Ee=Ee<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ee);var Ce=Be.getFullYear()-1980;Ce=Ce<<4|Be.getMonth()+1,Ce=Ce<<5|Be.getDate(),fe.write_shift(2,Ce)}function i(fe){var Be=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,Ce=new Date,Ne=Ee&31;Ee>>>=5;var Te=Ee&15;Ee>>>=4,Ce.setMilliseconds(0),Ce.setFullYear(Ee+1980),Ce.setMonth(Te-1),Ce.setDate(Ne);var Ye=Be&31;Be>>>=5;var ut=Be&63;return Be>>>=6,Ce.setHours(Be),Ce.setMinutes(ut),Ce.setSeconds(Ye<<1),Ce}function o(fe){po(fe,0);for(var Be={},Ee=0;fe.l<=fe.length-4;){var Ce=fe.read_shift(2),Ne=fe.read_shift(2),Te=fe.l+Ne,Ye={};switch(Ce){case 21589:Ee=fe.read_shift(1),Ee&1&&(Ye.mtime=fe.read_shift(4)),Ne>5&&(Ee&2&&(Ye.atime=fe.read_shift(4)),Ee&4&&(Ye.ctime=fe.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}fe.l=Te,Be[Ce]=Ye}return Be}var l;function u(){return l||(l={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return pt(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return vn(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,Ce=512,Ne=0,Te=0,Ye=0,ut=0,$e=0,tt=[],at=fe.slice(0,512);po(at,0);var jt=f(at);switch(Ee=jt[0],Ee){case 3:Ce=512;break;case 4:Ce=4096;break;case 0:if(jt[1]==0)return pt(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}Ce!==512&&(at=fe.slice(0,Ce),po(at,28));var Vt=fe.slice(0,Ce);h(at,Ee);var Jt=at.read_shift(4,"i");if(Ee===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);at.l+=4,Ye=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ut=at.read_shift(4,"i"),Ne=at.read_shift(4,"i"),$e=at.read_shift(4,"i"),Te=at.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=at.read_shift(4,"i"),!(Ht<0));++Gt)tt[Gt]=Ht;var _r=p(fe,Ce);b($e,Te,_r,Ce,tt);var sn=C(_r,Ye,tt,Ce);sn[Ye].name="!Directory",Ne>0&&ut!==L&&(sn[ut].name="!MiniFAT"),sn[tt[0]].name="!FAT",sn.fat_addrs=tt,sn.ssz=Ce;var on={},An=[],hs=[],bo=[];S(Ye,sn,_r,An,Ne,on,hs,ut),g(hs,bo,An),An.shift();var ms={FileIndex:hs,FullPaths:bo};return Be&&Be.raw&&(ms.raw={header:Vt,sectors:_r}),ms}function f(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(R,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function h(fe,Be){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Be){for(var Ee=Math.ceil(fe.length/Be)-1,Ce=[],Ne=1;Ne<Ee;++Ne)Ce[Ne-1]=fe.slice(Ne*Be,(Ne+1)*Be);return Ce[Ee-1]=fe.slice(Ee*Be),Ce}function g(fe,Be,Ee){for(var Ce=0,Ne=0,Te=0,Ye=0,ut=0,$e=Ee.length,tt=[],at=[];Ce<$e;++Ce)tt[Ce]=at[Ce]=Ce,Be[Ce]=Ee[Ce];for(;ut<at.length;++ut)Ce=at[ut],Ne=fe[Ce].L,Te=fe[Ce].R,Ye=fe[Ce].C,tt[Ce]===Ce&&(Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]),Te!==-1&&tt[Te]!==Te&&(tt[Ce]=tt[Te])),Ye!==-1&&(tt[Ye]=Ce),Ne!==-1&&Ce!=tt[Ce]&&(tt[Ne]=tt[Ce],at.lastIndexOf(Ne)<ut&&at.push(Ne)),Te!==-1&&Ce!=tt[Ce]&&(tt[Te]=tt[Ce],at.lastIndexOf(Te)<ut&&at.push(Te));for(Ce=1;Ce<$e;++Ce)tt[Ce]===Ce&&(Te!==-1&&tt[Te]!==Te?tt[Ce]=tt[Te]:Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]));for(Ce=1;Ce<$e;++Ce)if(fe[Ce].type!==0){if(ut=Ce,ut!=tt[ut])do ut=tt[ut],Be[Ce]=Be[ut]+"/"+Be[Ce];while(ut!==0&&tt[ut]!==-1&&ut!=tt[ut]);tt[Ce]=-1}for(Be[0]+="/",Ce=1;Ce<$e;++Ce)fe[Ce].type!==2&&(Be[Ce]+="/")}function v(fe,Be,Ee){for(var Ce=fe.start,Ne=fe.size,Te=[],Ye=Ce;Ee&&Ne>0&&Ye>=0;)Te.push(Be.slice(Ye*k,Ye*k+k)),Ne-=k,Ye=lp(Ee,Ye*4);return Te.length===0?yt(0):Ki(Te).slice(0,fe.size)}function b(fe,Be,Ee,Ce,Ne){var Te=L;if(fe===L){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ye=Ee[fe],ut=(Ce>>>2)-1;if(!Ye)return;for(var $e=0;$e<ut&&(Te=lp(Ye,$e*4))!==L;++$e)Ne.push(Te);b(lp(Ye,Ce-4),Be-1,Ee,Ce,Ne)}}function y(fe,Be,Ee,Ce,Ne){var Te=[],Ye=[];Ne||(Ne=[]);var ut=Ce-1,$e=0,tt=0;for($e=Be;$e>=0;){Ne[$e]=!0,Te[Te.length]=$e,Ye.push(fe[$e]);var at=Ee[Math.floor($e*4/Ce)];if(tt=$e*4&ut,Ce<4+tt)throw new Error("FAT boundary crossed: "+$e+" 4 "+Ce);if(!fe[at])break;$e=lp(fe[at],tt)}return{nodes:Te,data:XQ([Ye])}}function C(fe,Be,Ee,Ce){var Ne=fe.length,Te=[],Ye=[],ut=[],$e=[],tt=Ce-1,at=0,jt=0,Vt=0,Jt=0;for(at=0;at<Ne;++at)if(ut=[],Vt=at+Be,Vt>=Ne&&(Vt-=Ne),!Ye[Vt]){$e=[];var Ht=[];for(jt=Vt;jt>=0;){Ht[jt]=!0,Ye[jt]=!0,ut[ut.length]=jt,$e.push(fe[jt]);var Gt=Ee[Math.floor(jt*4/Ce)];if(Jt=jt*4&tt,Ce<4+Jt)throw new Error("FAT boundary crossed: "+jt+" 4 "+Ce);if(!fe[Gt]||(jt=lp(fe[Gt],Jt),Ht[jt]))break}Te[Vt]={nodes:ut,data:XQ([$e])}}return Te}function S(fe,Be,Ee,Ce,Ne,Te,Ye,ut){for(var $e=0,tt=Ce.length?2:0,at=Be[fe].data,jt=0,Vt=0,Jt;jt<at.length;jt+=128){var Ht=at.slice(jt,jt+128);po(Ht,64),Vt=Ht.read_shift(2),Jt=aR(Ht,0,Vt-tt),Ce.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},_r=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);_r!==0&&(Gt.ct=I(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=I(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=L,Gt.name=""),Gt.type===5?($e=Gt.start,Ne>0&&$e!==L&&(Be[$e].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",Be[Gt.start]===void 0&&(Be[Gt.start]=y(Ee,Gt.start,Be.fat_addrs,Be.ssz)),Be[Gt.start].name=Gt.name,Gt.content=Be[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:$e!==L&&Gt.start!==L&&Be[$e]&&(Gt.content=v(Gt,Be[$e].data,(Be[ut]||{}).data))),Gt.content&&po(Gt.content,0),Te[Jt]=Gt,Ye.push(Gt)}}function I(fe,Be){return new Date((_c(fe,Be+4)/1e7*Math.pow(2,32)+_c(fe,Be)/1e7-11644473600)*1e3)}function N(fe,Be){return u(),d(l.readFileSync(fe),Be)}function B(fe,Be){var Ee=Be&&Be.type;switch(Ee||pn&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return N(fe,Be);case"base64":return d(kc(Dc(fe)),Be);case"binary":return d(kc(fe),Be)}return d(fe,Be)}function w(fe,Be){var Ee=Be||{},Ce=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=Ce+"/",fe.FileIndex[0]={name:Ce,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),_(fe)}function _(fe){var Be="Sh33tJ5";if(!Er.find(fe,"/"+Be)){var Ee=yt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),F(fe)}}function F(fe,Be){w(fe);for(var Ee=!1,Ce=!1,Ne=fe.FullPaths.length-1;Ne>=0;--Ne){var Te=fe.FileIndex[Ne];switch(Te.type){case 0:Ce?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:Ce=!0,isNaN(Te.R*Te.L*Te.C)&&(Ee=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Be)){var Ye=new Date(1987,1,19),ut=0,$e=Object.create?Object.create(null):{},tt=[];for(Ne=0;Ne<fe.FullPaths.length;++Ne)$e[fe.FullPaths[Ne]]=!0,fe.FileIndex[Ne].type!==0&&tt.push([fe.FullPaths[Ne],fe.FileIndex[Ne]]);for(Ne=0;Ne<tt.length;++Ne){var at=n(tt[Ne][0]);Ce=$e[at],Ce||(tt.push([at,{name:a(at).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),$e[at]=!0)}for(tt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),fe.FullPaths=[],fe.FileIndex=[],Ne=0;Ne<tt.length;++Ne)fe.FullPaths[Ne]=tt[Ne][0],fe.FileIndex[Ne]=tt[Ne][1];for(Ne=0;Ne<tt.length;++Ne){var jt=fe.FileIndex[Ne],Vt=fe.FullPaths[Ne];if(jt.name=a(Vt).replace("/",""),jt.L=jt.R=jt.C=-(jt.color=1),jt.size=jt.content?jt.content.length:0,jt.start=0,jt.clsid=jt.clsid||V,Ne===0)jt.C=tt.length>1?1:-1,jt.size=0,jt.type=5;else if(Vt.slice(-1)=="/"){for(ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=Vt;++ut);for(jt.C=ut>=tt.length?-1:ut,ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=n(Vt);++ut);jt.R=ut>=tt.length?-1:ut,jt.type=1}else n(fe.FullPaths[Ne+1]||"")==n(Vt)&&(jt.R=Ne+1),jt.type=2}}}function U(fe,Be){var Ee=Be||{};if(Ee.fileType=="mad")return $t(fe,Ee);switch(F(fe),Ee.fileType){case"zip":return gt(fe,Ee)}var Ce=function(Jt){for(var Ht=0,Gt=0,_r=0;_r<Jt.FileIndex.length;++_r){var sn=Jt.FileIndex[_r];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,hs=Ht+7>>3,bo=Ht+127>>7,ms=hs+Gt+An+bo,Zs=ms+127>>7,Fs=Zs<=109?0:Math.ceil((Zs-109)/127);ms+Zs+Fs+127>>7>Zs;)Fs=++Zs<=109?0:Math.ceil((Zs-109)/127);var gi=[1,Fs,Zs,bo,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,gi[7]=(Jt.FileIndex[0].start=gi[0]+gi[1]+gi[2]+gi[3]+gi[4]+gi[5])+(gi[6]+7>>3),gi}(fe),Ne=yt(Ce[7]<<9),Te=0,Ye=0;{for(Te=0;Te<8;++Te)Ne.write_shift(1,X[Te]);for(Te=0;Te<8;++Te)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Te=0;Te<3;++Te)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Ce[2]),Ne.write_shift(4,Ce[0]+Ce[1]+Ce[2]+Ce[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Ce[3]?Ce[0]+Ce[1]+Ce[2]-1:L),Ne.write_shift(4,Ce[3]),Ne.write_shift(-4,Ce[1]?Ce[0]-1:L),Ne.write_shift(4,Ce[1]),Te=0;Te<109;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1)}if(Ce[1])for(Ye=0;Ye<Ce[1];++Ye){for(;Te<236+Ye*127;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1);Ne.write_shift(-4,Ye===Ce[1]-1?L:Ye+1)}var ut=function(Jt){for(Ye+=Jt;Te<Ye-1;++Te)Ne.write_shift(-4,Te+1);Jt&&(++Te,Ne.write_shift(-4,L))};for(Ye=Te=0,Ye+=Ce[1];Te<Ye;++Te)Ne.write_shift(-4,Z.DIFSECT);for(Ye+=Ce[2];Te<Ye;++Te)Ne.write_shift(-4,Z.FATSECT);ut(Ce[3]),ut(Ce[4]);for(var $e=0,tt=0,at=fe.FileIndex[0];$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(tt<4096)&&(at.start=Ye,ut(tt+511>>9)));for(ut(Ce[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Ye=Te=0,$e=0;$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(!tt||tt>=4096)&&(at.start=Ye,ut(tt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Te=0;Te<Ce[4]<<2;++Te){var jt=fe.FullPaths[Te];if(!jt||jt.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}at=fe.FileIndex[Te],Te===0&&(at.start=at.size?at.start-1:L);var Vt=Te===0&&Ee.root||at.name;if(tt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,tt),Ne.write_shift(1,at.type),Ne.write_shift(1,at.color),Ne.write_shift(-4,at.L),Ne.write_shift(-4,at.R),Ne.write_shift(-4,at.C),at.clsid)Ne.write_shift(16,at.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,at.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,at.start),Ne.write_shift(4,at.size),Ne.write_shift(4,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>=4096)if(Ne.l=at.start+1<<9,pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+511&-512;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>0&&at.size<4096)if(pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+63&-64;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(pn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(fe,Be){var Ee=fe.FullPaths.map(function($e){return $e.toUpperCase()}),Ce=Ee.map(function($e){var tt=$e.split("/");return tt[tt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Be.charCodeAt(0)===47?(Ne=!0,Be=Ee[0].slice(0,-1)+Be):Ne=Be.indexOf("/")!==-1;var Te=Be.toUpperCase(),Ye=Ne===!0?Ee.indexOf(Te):Ce.indexOf(Te);if(Ye!==-1)return fe.FileIndex[Ye];var ut=!Te.match(Zb);for(Te=Te.replace(xl,""),ut&&(Te=Te.replace(Zb,"!")),Ye=0;Ye<Ee.length;++Ye)if((ut?Ee[Ye].replace(Zb,"!"):Ee[Ye]).replace(xl,"")==Te||(ut?Ce[Ye].replace(Zb,"!"):Ce[Ye]).replace(xl,"")==Te)return fe.FileIndex[Ye];return null}var k=64,L=-2,R="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(fe,Be,Ee){u();var Ce=U(fe,Ee);l.writeFileSync(Be,Ce)}function z(fe){for(var Be=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Be[Ee]=String.fromCharCode(fe[Ee]);return Be.join("")}function q(fe,Be){var Ee=U(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:z(Ee);case"base64":return aw(typeof Ee=="string"?Ee:z(Ee));case"buffer":if(pn)return Buffer.isBuffer(Ee)?Ee:xh(Ee);case"array":return typeof Ee=="string"?kc(Ee):Ee}return Ee}var re;function P(fe){try{var Be=fe.InflateRaw,Ee=new Be;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)re=fe;else throw new Error("zlib does not expose bytesRead")}catch(Ce){console.error("cannot use native zlib: "+(Ce.message||Ce))}}function K(fe,Be){if(!re)return Ir(fe,Be);var Ee=re.InflateRaw,Ce=new Ee,Ne=Ce._processChunk(fe.slice(fe.l),Ce._finishFlushFlag);return fe.l+=Ce.bytesRead,Ne}function Y(fe){return re?re.deflateRawSync(fe):Qt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ce=typeof Uint8Array<"u",pe=ce?new Uint8Array(256):[],Ie=0;Ie<256;++Ie)pe[Ie]=oe(Ie);function ne(fe,Be){var Ee=pe[fe&255];return Be<=8?Ee>>>8-Be:(Ee=Ee<<8|pe[fe>>8&255],Be<=16?Ee>>>16-Be:(Ee=Ee<<8|pe[fe>>16&255],Ee>>>24-Be))}function Se(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=6?0:fe[Ce+1]<<8))>>>Ee&3}function De(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=5?0:fe[Ce+1]<<8))>>>Ee&7}function _e(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=4?0:fe[Ce+1]<<8))>>>Ee&15}function he(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=3?0:fe[Ce+1]<<8))>>>Ee&31}function je(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=1?0:fe[Ce+1]<<8))>>>Ee&127}function He(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3,Te=(1<<Ee)-1,Ye=fe[Ne]>>>Ce;return Ee<8-Ce||(Ye|=fe[Ne+1]<<8-Ce,Ee<16-Ce)||(Ye|=fe[Ne+2]<<16-Ce,Ee<24-Ce)||(Ye|=fe[Ne+3]<<24-Ce),Ye&Te}function Xe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ce<=5?fe[Ne]|=(Ee&7)<<Ce:(fe[Ne]|=Ee<<Ce&255,fe[Ne+1]=(Ee&7)>>8-Ce),Be+3}function ye(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee=(Ee&1)<<Ce,fe[Ne]|=Ee,Be+1}function Oe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee,Be+8}function Pe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee&255,fe[Ne+2]=Ee>>>8,Be+16}function qe(fe,Be){var Ee=fe.length,Ce=2*Ee>Be?2*Ee:Be+5,Ne=0;if(Ee>=Be)return fe;if(pn){var Te=jQ(Ce);if(fe.copy)fe.copy(Te);else for(;Ne<fe.length;++Ne)Te[Ne]=fe[Ne];return Te}else if(ce){var Ye=new Uint8Array(Ce);if(Ye.set)Ye.set(fe);else for(;Ne<Ee;++Ne)Ye[Ne]=fe[Ne];return Ye}return fe.length=Ce,fe}function Ze(fe){for(var Be=new Array(fe),Ee=0;Ee<fe;++Ee)Be[Ee]=0;return Be}function ot(fe,Be,Ee){var Ce=1,Ne=0,Te=0,Ye=0,ut=0,$e=fe.length,tt=ce?new Uint16Array(32):Ze(32);for(Te=0;Te<32;++Te)tt[Te]=0;for(Te=$e;Te<Ee;++Te)fe[Te]=0;$e=fe.length;var at=ce?new Uint16Array($e):Ze($e);for(Te=0;Te<$e;++Te)tt[Ne=fe[Te]]++,Ce<Ne&&(Ce=Ne),at[Te]=0;for(tt[0]=0,Te=1;Te<=Ce;++Te)tt[Te+16]=ut=ut+tt[Te-1]<<1;for(Te=0;Te<$e;++Te)ut=fe[Te],ut!=0&&(at[Te]=tt[ut+16]++);var jt=0;for(Te=0;Te<$e;++Te)if(jt=fe[Te],jt!=0)for(ut=ne(at[Te],Ce)>>Ce-jt,Ye=(1<<Ce+4-jt)-1;Ye>=0;--Ye)Be[ut|Ye<<jt]=jt&15|Te<<4;return Ce}var mt=ce?new Uint16Array(512):Ze(512),Tt=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Mt=0;Mt<512;++Mt)mt[Mt]=0;for(Mt=0;Mt<32;++Mt)Tt[Mt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);ot(fe,Tt,32);var Ee=[];for(Be=0;Be<=143;Be++)Ee.push(8);for(;Be<=255;Be++)Ee.push(9);for(;Be<=279;Be++)Ee.push(7);for(;Be<=287;Be++)Ee.push(8);ot(Ee,mt,288)})();var Ot=function(){for(var Be=ce?new Uint8Array(32768):[],Ee=0,Ce=0;Ee<Ae.length-1;++Ee)for(;Ce<Ae[Ee+1];++Ce)Be[Ce]=Ee;for(;Ce<32768;++Ce)Be[Ce]=29;var Ne=ce?new Uint8Array(259):[];for(Ee=0,Ce=0;Ee<ie.length-1;++Ee)for(;Ce<ie[Ee+1];++Ce)Ne[Ce]=Ee;function Te(ut,$e){for(var tt=0;tt<ut.length;){var at=Math.min(65535,ut.length-tt),jt=tt+at==ut.length;for($e.write_shift(1,+jt),$e.write_shift(2,at),$e.write_shift(2,~at&65535);at-- >0;)$e[$e.l++]=ut[tt++]}return $e.l}function Ye(ut,$e){for(var tt=0,at=0,jt=ce?new Uint16Array(32768):[];at<ut.length;){var Vt=Math.min(65535,ut.length-at);if(Vt<10){for(tt=Xe($e,tt,+(at+Vt==ut.length)),tt&7&&(tt+=8-(tt&7)),$e.l=tt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=ut[at++];tt=$e.l*8;continue}tt=Xe($e,tt,+(at+Vt==ut.length)+2);for(var Jt=0;Vt-- >0;){var Ht=ut[at];Jt=(Jt<<5^Ht)&32767;var Gt=-1,_r=0;if((Gt=jt[Jt])&&(Gt|=at&-32768,Gt>at&&(Gt-=32768),Gt<at))for(;ut[Gt+_r]==ut[at+_r]&&_r<250;)++_r;if(_r>2){Ht=Ne[_r],Ht<=22?tt=Oe($e,tt,pe[Ht+1]>>1)-1:(Oe($e,tt,3),tt+=5,Oe($e,tt,pe[Ht-23]>>5),tt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Pe($e,tt,_r-ie[Ht]),tt+=sn),Ht=Be[at-Gt],tt=Oe($e,tt,pe[Ht]>>3),tt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Pe($e,tt,at-Gt-Ae[Ht]),tt+=on);for(var An=0;An<_r;++An)jt[Jt]=at&32767,Jt=(Jt<<5^ut[at])&32767,++at;Vt-=_r-1}else Ht<=143?Ht=Ht+48:tt=ye($e,tt,1),tt=Oe($e,tt,pe[Ht]),jt[Jt]=at&32767,++at}tt=Oe($e,tt,0)-1}return $e.l=(tt+7)/8|0,$e.l}return function($e,tt){return $e.length<8?Te($e,tt):Ye($e,tt)}}();function Qt(fe){var Be=yt(50+Math.floor(fe.length*1.1)),Ee=Ot(fe,Be);return Be.slice(0,Ee)}var bt=ce?new Uint16Array(32768):Ze(32768),Nr=ce?new Uint16Array(32768):Ze(32768),rr=ce?new Uint16Array(128):Ze(128),an=1,Cr=1;function Vr(fe,Be){var Ee=he(fe,Be)+257;Be+=5;var Ce=he(fe,Be)+1;Be+=5;var Ne=_e(fe,Be)+4;Be+=4;for(var Te=0,Ye=ce?new Uint8Array(19):Ze(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,tt=ce?new Uint8Array(8):Ze(8),at=ce?new Uint8Array(8):Ze(8),jt=Ye.length,Vt=0;Vt<Ne;++Vt)Ye[te[Vt]]=Te=De(fe,Be),$e<Te&&($e=Te),tt[Te]++,Be+=3;var Jt=0;for(tt[0]=0,Vt=1;Vt<=$e;++Vt)at[Vt]=Jt=Jt+tt[Vt-1]<<1;for(Vt=0;Vt<jt;++Vt)(Jt=Ye[Vt])!=0&&(ut[Vt]=at[Jt]++);var Ht=0;for(Vt=0;Vt<jt;++Vt)if(Ht=Ye[Vt],Ht!=0){Jt=pe[ut[Vt]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)rr[Jt|Gt<<Ht]=Ht&7|Vt<<3}var _r=[];for($e=1;_r.length<Ee+Ce;)switch(Jt=rr[je(fe,Be)],Be+=Jt&7,Jt>>>=3){case 16:for(Te=3+Se(fe,Be),Be+=2,Jt=_r[_r.length-1];Te-- >0;)_r.push(Jt);break;case 17:for(Te=3+De(fe,Be),Be+=3;Te-- >0;)_r.push(0);break;case 18:for(Te=11+je(fe,Be),Be+=7;Te-- >0;)_r.push(0);break;default:_r.push(Jt),$e<Jt&&($e=Jt);break}var sn=_r.slice(0,Ee),on=_r.slice(Ee);for(Vt=Ee;Vt<286;++Vt)sn[Vt]=0;for(Vt=Ce;Vt<30;++Vt)on[Vt]=0;return an=ot(sn,bt,286),Cr=ot(on,Nr,30),Be}function Fn(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[lm(Be),2];for(var Ee=0,Ce=0,Ne=jQ(Be||1<<18),Te=0,Ye=Ne.length>>>0,ut=0,$e=0;(Ce&1)==0;){if(Ce=De(fe,Ee),Ee+=3,Ce>>>1)Ce>>1==1?(ut=9,$e=5):(Ee=Vr(fe,Ee),ut=an,$e=Cr);else{Ee&7&&(Ee+=8-(Ee&7));var tt=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,tt>0)for(!Be&&Ye<Te+tt&&(Ne=qe(Ne,Te+tt),Ye=Ne.length);tt-- >0;)Ne[Te++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Be&&Ye<Te+32767&&(Ne=qe(Ne,Te+32767),Ye=Ne.length);var at=He(fe,Ee,ut),jt=Ce>>>1==1?mt[at]:bt[at];if(Ee+=jt&15,jt>>>=4,(jt>>>8&255)===0)Ne[Te++]=jt;else{if(jt==256)break;jt-=257;var Vt=jt<8?0:jt-4>>2;Vt>5&&(Vt=0);var Jt=Te+ie[jt];Vt>0&&(Jt+=He(fe,Ee,Vt),Ee+=Vt),at=He(fe,Ee,$e),jt=Ce>>>1==1?Tt[at]:Nr[at],Ee+=jt&15,jt>>>=4;var Ht=jt<4?0:jt-2>>1,Gt=Ae[jt];for(Ht>0&&(Gt+=He(fe,Ee,Ht),Ee+=Ht),!Be&&Ye<Jt&&(Ne=qe(Ne,Jt+100),Ye=Ne.length);Te<Jt;)Ne[Te]=Ne[Te-Gt],++Te}}}return Be?[Ne,Ee+7>>>3]:[Ne.slice(0,Te),Ee+7>>>3]}function Ir(fe,Be){var Ee=fe.slice(fe.l||0),Ce=Fn(Ee,Be);return fe.l+=Ce[1],Ce[0]}function vt(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function pt(fe,Be){var Ee=fe;po(Ee,0);var Ce=[],Ne=[],Te={FileIndex:Ce,FullPaths:Ne};w(Te,{root:Be.root});for(var Ye=Ee.length-4;(Ee[Ye]!=80||Ee[Ye+1]!=75||Ee[Ye+2]!=5||Ee[Ye+3]!=6)&&Ye>=0;)--Ye;Ee.l=Ye+4,Ee.l+=4;var ut=Ee.read_shift(2);Ee.l+=6;var $e=Ee.read_shift(4);for(Ee.l=$e,Ye=0;Ye<ut;++Ye){Ee.l+=20;var tt=Ee.read_shift(4),at=Ee.read_shift(4),jt=Ee.read_shift(2),Vt=Ee.read_shift(2),Jt=Ee.read_shift(2);Ee.l+=8;var Ht=Ee.read_shift(4),Gt=o(Ee.slice(Ee.l+jt,Ee.l+jt+Vt));Ee.l+=jt+Vt+Jt;var _r=Ee.l;Ee.l=Ht+4,Je(Ee,tt,at,Te,Gt),Ee.l=_r}return Te}function Je(fe,Be,Ee,Ce,Ne){fe.l+=2;var Te=fe.read_shift(2),Ye=fe.read_shift(2),ut=i(fe);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var $e=fe.read_shift(4),tt=fe.read_shift(4),at=fe.read_shift(4),jt=fe.read_shift(2),Vt=fe.read_shift(2),Jt="",Ht=0;Ht<jt;++Ht)Jt+=String.fromCharCode(fe[fe.l++]);if(Vt){var Gt=o(fe.slice(fe.l,fe.l+Vt));(Gt[21589]||{}).mt&&(ut=Gt[21589].mt),((Ne||{})[21589]||{}).mt&&(ut=Ne[21589].mt)}fe.l+=Vt;var _r=fe.slice(fe.l,fe.l+tt);switch(Ye){case 8:_r=K(fe,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var sn=!1;Te&8&&($e=fe.read_shift(4),$e==134695760&&($e=fe.read_shift(4),sn=!0),tt=fe.read_shift(4),at=fe.read_shift(4)),tt!=Be&&vt(sn,"Bad compressed size: "+Be+" != "+tt),at!=Ee&&vt(sn,"Bad uncompressed size: "+Ee+" != "+at),en(Ce,Jt,_r,{unsafe:!0,mt:ut})}function gt(fe,Be){var Ee=Be||{},Ce=[],Ne=[],Te=yt(1),Ye=Ee.compression?8:0,ut=0,$e=0,tt=0,at=0,jt=0,Vt=fe.FullPaths[0],Jt=Vt,Ht=fe.FileIndex[0],Gt=[],_r=0;for($e=1;$e<fe.FullPaths.length;++$e)if(Jt=fe.FullPaths[$e].slice(Vt.length),Ht=fe.FileIndex[$e],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=at,on=yt(Jt.length);for(tt=0;tt<Jt.length;++tt)on.write_shift(1,Jt.charCodeAt(tt)&127);on=on.slice(0,on.l),Gt[jt]=_Ce.buf(Ht.content,0);var An=Ht.content;Ye==8&&(An=Y(An)),Te=yt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Ht.mt?s(Te,Ht.mt):Te.write_shift(4,0),Te.write_shift(-4,Gt[jt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),at+=Te.length,Ce.push(Te),at+=on.length,Ce.push(on),at+=An.length,Ce.push(An),Te=yt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Te.write_shift(4,0),Te.write_shift(-4,Gt[jt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,sn),_r+=Te.l,Ne.push(Te),_r+=on.length,Ne.push(on),++jt}return Te=yt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,jt),Te.write_shift(2,jt),Te.write_shift(4,_r),Te.write_shift(4,at),Te.write_shift(2,0),Ki([Ki(Ce),Ki(Ne),Te])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(fe,Be){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",Ce=Ee.match(/\.([^\.]+)$/);return Ce&&dt[Ce[1]]||Be&&(Ce=(Ee=Be).match(/[\.\\]([^\.\\])+$/),Ce&&dt[Ce[1]])?dt[Ce[1]]:"application/octet-stream"}function zt(fe){for(var Be=aw(fe),Ee=[],Ce=0;Ce<Be.length;Ce+=76)Ee.push(Be.slice(Ce,Ce+76));return Ee.join(`\r
`)+`\r
`}function Pr(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var at=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],Ce=Be.split(`\r
`),Ne=0;Ne<Ce.length;++Ne){var Te=Ce[Ne];if(Te.length==0){Ee.push("");continue}for(var Ye=0;Ye<Te.length;){var ut=76,$e=Te.slice(Ye,Ye+ut);$e.charAt(ut-1)=="="?ut--:$e.charAt(ut-2)=="="?ut-=2:$e.charAt(ut-3)=="="&&(ut-=3),$e=Te.slice(Ye,Ye+ut),Ye+=ut,Ye<Te.length&&($e+="="),Ee.push($e)}}return Ee.join(`\r
`)}function Xr(fe){for(var Be=[],Ee=0;Ee<fe.length;++Ee){for(var Ce=fe[Ee];Ee<=fe.length&&Ce.charAt(Ce.length-1)=="=";)Ce=Ce.slice(0,Ce.length-1)+fe[++Ee];Be.push(Ce)}for(var Ne=0;Ne<Be.length;++Ne)Be[Ne]=Be[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return kc(Be.join(`\r
`))}function gn(fe,Be,Ee){for(var Ce="",Ne="",Te="",Ye,ut=0;ut<10;++ut){var $e=Be[ut];if(!$e||$e.match(/^\s*$/))break;var tt=$e.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":Ce=tt[2].trim();break;case"content-type":Te=tt[2].trim();break;case"content-transfer-encoding":Ne=tt[2].trim();break}}switch(++ut,Ne.toLowerCase()){case"base64":Ye=kc(Dc(Be.slice(ut).join("")));break;case"quoted-printable":Ye=Xr(Be.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var at=en(fe,Ce.slice(Ee.length),Ye,{unsafe:!0});Te&&(at.ctype=Te)}function vn(fe,Be){if(z(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Be&&Be.root||"",Ce=(pn&&Buffer.isBuffer(fe)?fe.toString("binary"):z(fe)).split(`\r
`),Ne=0,Te="";for(Ne=0;Ne<Ce.length;++Ne)if(Te=Ce[Ne],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ee||(Ee=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),Te.slice(0,Ee.length)!=Ee););var Ye=(Ce[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ut="--"+(Ye[1]||""),$e=[],tt=[],at={FileIndex:$e,FullPaths:tt};w(at);var jt,Vt=0;for(Ne=0;Ne<Ce.length;++Ne){var Jt=Ce[Ne];Jt!==ut&&Jt!==ut+"--"||(Vt++&&gn(at,Ce.slice(jt,Ne),Ee),jt=Ne)}return at}function $t(fe,Be){var Ee=Be||{},Ce=Ee.boundary||"SheetJS";Ce="------="+Ce;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ce.slice(2)+'"',"","",""],Te=fe.FullPaths[0],Ye=Te,ut=fe.FileIndex[0],$e=1;$e<fe.FullPaths.length;++$e)if(Ye=fe.FullPaths[$e].slice(Te.length),ut=fe.FileIndex[$e],!(!ut.size||!ut.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(_r){return"_x"+_r.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(_r){return"_u"+_r.charCodeAt(0).toString(16)+"_"});for(var tt=ut.content,at=pn&&Buffer.isBuffer(tt)?tt.toString("binary"):z(tt),jt=0,Vt=Math.min(1024,at.length),Jt=0,Ht=0;Ht<=Vt;++Ht)(Jt=at.charCodeAt(Ht))>=32&&Jt<128&&++jt;var Gt=jt>=Vt*4/5;Ne.push(Ce),Ne.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Dt(ut,Ye)),Ne.push(""),Ne.push(Gt?Pr(at):zt(at))}return Ne.push(Ce+`--\r
`),Ne.join(`\r
`)}function rn(fe){var Be={};return w(Be,fe),Be}function en(fe,Be,Ee,Ce){var Ne=Ce&&Ce.unsafe;Ne||w(fe);var Te=!Ne&&Er.find(fe,Be);if(!Te){var Ye=fe.FullPaths[0];Be.slice(0,Ye.length)==Ye?Ye=Be:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Be).replace("//","/")),Te={name:a(Be),type:2},fe.FileIndex.push(Te),fe.FullPaths.push(Ye),Ne||Er.utils.cfb_gc(fe)}return Te.content=Ee,Te.size=Ee?Ee.length:0,Ce&&(Ce.CLSID&&(Te.clsid=Ce.CLSID),Ce.mt&&(Te.mt=Ce.mt),Ce.ct&&(Te.ct=Ce.ct)),Te}function cr(fe,Be){w(fe);var Ee=Er.find(fe,Be);if(Ee){for(var Ce=0;Ce<fe.FileIndex.length;++Ce)if(fe.FileIndex[Ce]==Ee)return fe.FileIndex.splice(Ce,1),fe.FullPaths.splice(Ce,1),!0}return!1}function Yr(fe,Be,Ee){w(fe);var Ce=Er.find(fe,Be);if(Ce){for(var Ne=0;Ne<fe.FileIndex.length;++Ne)if(fe.FileIndex[Ne]==Ce)return fe.FileIndex[Ne].name=a(Ee),fe.FullPaths[Ne]=Ee,!0}return!1}function ra(fe){F(fe,!0)}return t.find=D,t.read=B,t.parse=d,t.write=q,t.writeFile=H,t.utils={cfb_new:rn,cfb_add:en,cfb_del:cr,cfb_mov:Yr,cfb_gc:ra,ReadShift:Cy,CheckField:Mee,prep_blob:po,bconcat:Ki,use_zlib:P,_deflateRaw:Qt,_inflateRaw:Ir,consts:Z},t}();function SCe(e){return typeof e=="string"?qN(e):Array.isArray(e)?JEe(e):e}function n2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=qN(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?BA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([SCe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=xm(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function NCe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function js(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function MQ(e,t){for(var r=[],n=js(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function XN(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function YN(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function kCe(e){for(var t=[],r=js(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var kS=new Date(1899,11,30,0,0,0);function Ni(e,t){var r=e.getTime(),n=kS.getTime()+(e.getTimezoneOffset()-kS.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var vee=new Date,BCe=kS.getTime()+(vee.getTimezoneOffset()-kS.getTimezoneOffset())*6e4,UQ=vee.getTimezoneOffset();function JN(e){var t=new Date;return t.setTime(e*24*60*60*1e3+BCe),t.getTimezoneOffset()!==UQ&&t.setTime(t.getTime()+(t.getTimezoneOffset()-UQ)*6e4),t}function TCe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var QQ=new Date("2017-02-19T19:06:09.000Z"),xee=isNaN(QQ.getFullYear())?new Date("2/19/17"):QQ,jCe=xee.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(jCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(xee.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Kp(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return BA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return BA(iee(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return BA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return BA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function _s(e,t){for(var r="";r.length<t;)r+=e;return r}function Cd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var ICe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Nx(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&ICe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var FCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function bee(e){return e?e.content&&e.type?Kp(e.content,!0):e.data?Jb(e.data):e.asNodeBuffer&&pn?Jb(e.asNodeBuffer().toString("binary")):e.asBinary?Jb(e.asBinary()):e._data&&e._data.getContent?Jb(Kp(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function yee(e){if(!e)return null;if(e.data)return BQ(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?BQ(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function OCe(e){return e&&e.name.slice(-4)===".bin"?yee(e):bee(e)}function xu(e,t){for(var r=e.FullPaths||js(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function JD(e,t){var r=xu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function li(e,t,r){if(!r)return OCe(JD(e,t));if(!t)return null;try{return li(e,t)}catch{return null}}function Bc(e,t,r){if(!r)return bee(JD(e,t));if(!t)return null;try{return Bc(e,t)}catch{return null}}function DCe(e,t,r){return yee(JD(e,t))}function HQ(e){for(var t=e.FullPaths||js(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=xh(r):n=ZEe(r),Er.utils.cfb_add(e,t,n)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function ZD(){return Er.utils.cfb_new()}function wee(e,t){switch(t.type){case"base64":return Er.read(e,{type:"base64"});case"binary":return Er.read(e,{type:"binary"});case"buffer":case"array":return Er.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function ey(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,RCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,VQ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,PCe=/<[^>]*>/g,rl=Ys.match(VQ)?VQ:PCe,LCe=/<\w*:/,MCe=/<(\/?)\w+:/;function $r(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(RCe),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,l=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function GA(e){return e.replace(MCe,"<$1")}var Eee={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},eR=XN(Eee),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,l){return Eee[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),tR=/[&<>'"]/g,UCe=/[\u0000-\u0008\u000b-\u001f]/g;function va(e){var t=e+"";return t.replace(tR,function(r){return eR[r]}).replace(UCe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function zQ(e){return va(e).replace(/ /g,"_x0020_")}var Cee=/[\u0000-\u001f]/g;function rR(e){var t=e+"";return t.replace(tR,function(r){return eR[r]}).replace(/\n/g,"<br/>").replace(Cee,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function QCe(e){var t=e+"";return t.replace(tR,function(r){return eR[r]}).replace(Cee,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var $Q=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function HCe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function mT(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function GQ(e){var t=lm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function KQ(e){return xh(e,"binary").toString("utf8")}var XE="foo bar baz",Ca=pn&&(KQ(XE)==mT(XE)&&KQ||GQ(XE)==mT(XE)&&GQ)||mT,BA=pn?function(e){return xh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},iw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),_ee=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),VCe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),zCe=/<\/?(?:vt:)?variant>/g,$Ce=/<(?:vt:)([^>]*)>([\s\S]*)</;function qQ(e,t){var r=$r(e),n=e.match(VCe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(zCe,"").match($Ce);i&&a.push({v:Ca(i[2]),t:i[1]})}),a}var See=/(^\s|\s$|\n)/;function go(e,t){return"<"+e+(t.match(See)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ow(e){return js(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?ow(r):"")+(t!=null?(t.match(See)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function gF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function GCe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",va(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",va(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",gF(e));throw new Error("Unable to serialize "+e)}function nR(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ca(xm(WD(e)));throw new Error("Bad input format: expected Buffer or string")}var lw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,_i={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ag=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Cc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function KCe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function qCe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var WQ=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},XQ=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:xh(t)})):WQ(e)}:WQ,YQ=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Mf(e,a)));return n.join("").replace(xl,"")},aR=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(xl,""):YQ(e,t,r)}:YQ,JQ=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Nee=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):JQ(e,t,r)}:JQ,ZQ=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Tv(e,a)));return n.join("")},a2=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):ZQ(t,r,n)}:ZQ,kee=function(e,t){var r=_c(e,t);return r>0?a2(e,t+4,t+4+r-1):""},Bee=kee,Tee=function(e,t){var r=_c(e,t);return r>0?a2(e,t+4,t+4+r-1):""},jee=Tee,Iee=function(e,t){var r=2*_c(e,t);return r>0?a2(e,t+4,t+4+r-1):""},Fee=Iee,Oee=function(t,r){var n=_c(t,r);return n>0?aR(t,r+4,r+4+n):""},Dee=Oee,Ree=function(e,t){var r=_c(e,t);return r>0?a2(e,t+4,t+4+r):""},Pee=Ree,Lee=function(e,t){return KCe(e,t)},BS=Lee,sR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(Bee=function(t,r){if(!Buffer.isBuffer(t))return kee(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},jee=function(t,r){if(!Buffer.isBuffer(t))return Tee(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Fee=function(t,r){if(!Buffer.isBuffer(t))return Iee(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Dee=function(t,r){if(!Buffer.isBuffer(t))return Oee(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Pee=function(t,r){if(!Buffer.isBuffer(t))return Ree(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},BS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Lee(t,r)},sR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Tv=function(e,t){return e[t]},Mf=function(e,t){return e[t+1]*256+e[t]},WCe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},_c=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},lp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},XCe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Cy(e,t){var r="",n,a,s=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Mf(this,u)),u+=2;e*=2;break;case"utf8":r=a2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=aR(this,this.l,this.l+e);break;case"wstr":return Cy.call(this,e,"dbcs");case"lpstr-ansi":r=Bee(this,this.l),e=4+_c(this,this.l);break;case"lpstr-cp":r=jee(this,this.l),e=4+_c(this,this.l);break;case"lpwstr":r=Fee(this,this.l),e=4+2*_c(this,this.l);break;case"lpp4":e=4+_c(this,this.l),r=Dee(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+_c(this,this.l),r=Pee(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Tv(this,this.l+e++))!==0;)s.push(WE(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=Mf(this,this.l+e))!==0;)s.push(WE(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Tv(this,u),this.l=u+1,o=Cy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(WE(Mf(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Tv(this,u),this.l=u+1,o=Cy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(WE(Tv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Tv(this,this.l),this.l++,n;case 2:return n=(t==="i"?WCe:Mf)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?lp:XCe)(this,this.l),this.l+=4,n):(a=_c(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=BS(this,this.l):a=BS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Nee(this,this.l,e);break}}return this.l+=e,r}var YCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},JCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ZCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function e_e(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ZCe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,YCe(this,t,this.l);break;case 8:if(n=8,r==="f"){qCe(this,t,this.l);break}case 16:break;case-4:n=4,JCe(this,t,this.l);break}return this.l+=n,this}function Mee(e,t){var r=Nee(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function po(e,t){e.l=t,e.read_shift=Cy,e.chk=Mee,e.write_shift=e_e}function el(e,t){e.l+=t}function yt(e){var t=lm(e);return po(t,0),t}function bh(e,t,r){if(e){var n,a,s;po(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=hw[o]||hw[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;l=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=l,t(d,u,o))return}}}function Xl(){var e=[],t=pn?256:2048,r=function(u){var d=yt(u);return po(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Ki(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=hw[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&sR(r)&&e.push(r)}}function _y(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function eH(e,t,r){var n=Ha(e);return n.s=_y(n.s,t.s,r),n.e=_y(n.e,t.s,r),n}function Sy(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=n_e(r)),!e.rRel&&e.rRel!=null&&(r=t_e(r)),r}function pT(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ws(e.s.r)+":"+(e.e.rRel?"":"$")+Ws(e.e.r):Sy(e.s,t.biff)+":"+Sy(e.e,t.biff)}function iR(e){return parseInt(r_e(e),10)-1}function Ws(e){return""+(e+1)}function t_e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function r_e(e){return e.replace(/\$(\d+)$/,"$1")}function oR(e){for(var t=a_e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function n_e(e){return e.replace(/^([A-Z])/,"$$$1")}function a_e(e){return e.replace(/^\$([A-Z])/,"$1")}function s_e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Jl(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function tH(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Fu(e.z,r?Ni(t):t)}catch{}try{return e.w=Fu((e.XF||{}).numFmtId||(r?14:0),r?Ni(t):t)}catch{return""+t}}function sh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?yh[e.v]||e.v:t==null?tH(e,e.v):tH(e,t))}function bm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Uee(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?os(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,v=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>v&&(u.s.c=v),u.e.r<g&&(u.e.r=g),u.e.c<v&&(u.e.c=v),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Dr[14],n.cellDates?(p.t="d",p.w=Fu(p.z,Ni(p.v))):(p.t="n",p.v=Ni(p.v),p.w=Fu(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][v]&&s[g][v].z&&(p.z=s[g][v].z),s[g][v]=p;else{var b=Ur({c:v,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function A1(e,t){return Uee(null,e,t)}function i_e(e){return e.read_shift(4,"i")}function _d(e,t){return t||(t=yt(4)),t.write_shift(4,e),t}function Jo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wi(e,t){var r=!1;return t==null&&(r=!0,t=yt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function o_e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function l_e(e,t){return t||(t=yt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function lR(e,t){var r=e.l,n=e.read_shift(1),a=Jo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(o_e(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function c_e(e,t){var r=!1;return t==null&&(r=!0,t=yt(15+4*e.t.length)),t.write_shift(1,0),Wi(e.t,t),r?t.slice(0,t.l):t}var u_e=lR;function d_e(e,t){var r=!1;return t==null&&(r=!0,t=yt(23+4*e.t.length)),t.write_shift(1,1),Wi(e.t,t),t.write_shift(4,1),l_e({},t),r?t.slice(0,t.l):t}function Ru(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function fg(e,t){return t==null&&(t=yt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function hg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function mg(e,t){return t==null&&(t=yt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var A_e=Jo,Qee=Wi;function cR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function TS(e,t){var r=!1;return t==null&&(r=!0,t=yt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var f_e=Jo,vF=cR,uR=TS;function dR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?BS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):lp(t,0)>>2;return r?a/100:a}function Hee(e,t){t==null&&(t=yt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Vee(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function h_e(e,t){return t||(t=yt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var pg=Vee,f1=h_e;function Xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function qp(e,t){return(t||yt(8)).write_shift(8,e,"f")}function m_e(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Sp[a];u&&(t.rgb=uw(u));break;case 2:t.rgb=uw([i,o,l]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function jS(e,t){if(t||(t=yt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function p_e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function g_e(e,t){t||(t=yt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function zee(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function v_e(e){return zee(e,1)}function x_e(e){return zee(e,2)}var AR=2,Ml=3,YE=11,rH=12,IS=19,JE=64,b_e=65,y_e=71,w_e=4108,E_e=4126,Vi=80,$ee=81,C_e=[Vi,$ee],xF={1:{n:"CodePage",t:AR},2:{n:"Category",t:Vi},3:{n:"PresentationFormat",t:Vi},4:{n:"ByteCount",t:Ml},5:{n:"LineCount",t:Ml},6:{n:"ParagraphCount",t:Ml},7:{n:"SlideCount",t:Ml},8:{n:"NoteCount",t:Ml},9:{n:"HiddenCount",t:Ml},10:{n:"MultimediaClipCount",t:Ml},11:{n:"ScaleCrop",t:YE},12:{n:"HeadingPairs",t:w_e},13:{n:"TitlesOfParts",t:E_e},14:{n:"Manager",t:Vi},15:{n:"Company",t:Vi},16:{n:"LinksUpToDate",t:YE},17:{n:"CharacterCount",t:Ml},19:{n:"SharedDoc",t:YE},22:{n:"HyperlinksChanged",t:YE},23:{n:"AppVersion",t:Ml,p:"version"},24:{n:"DigSig",t:b_e},26:{n:"ContentType",t:Vi},27:{n:"ContentStatus",t:Vi},28:{n:"Language",t:Vi},29:{n:"Version",t:Vi},255:{},2147483648:{n:"Locale",t:IS},2147483651:{n:"Behavior",t:IS},1919054434:{}},bF={1:{n:"CodePage",t:AR},2:{n:"Title",t:Vi},3:{n:"Subject",t:Vi},4:{n:"Author",t:Vi},5:{n:"Keywords",t:Vi},6:{n:"Comments",t:Vi},7:{n:"Template",t:Vi},8:{n:"LastAuthor",t:Vi},9:{n:"RevNumber",t:Vi},10:{n:"EditTime",t:JE},11:{n:"LastPrinted",t:JE},12:{n:"CreatedDate",t:JE},13:{n:"ModifiedDate",t:JE},14:{n:"PageCount",t:Ml},15:{n:"WordCount",t:Ml},16:{n:"CharCount",t:Ml},17:{n:"Thumbnail",t:y_e},18:{n:"Application",t:Vi},19:{n:"DocSecurity",t:Ml},255:{},2147483648:{n:"Locale",t:IS},2147483651:{n:"Behavior",t:IS},1919054434:{}},nH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},__e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function S_e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var N_e=S_e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sp=Ha(N_e),yh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Gee={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},yF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ZE={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function fR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function k_e(e){var t=fR();if(!e||!e.match)return t;var r={};if((e.match(rl)||[]).forEach(function(n){var a=$r(n);switch(a[0].replace(LCe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[yF[a.ContentType]]!==void 0&&t[yF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==_i.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Kee(e,t){var r=kCe(yF),n=[],a;n[n.length]=Ys,n[n.length]=Kt("Types",null,{xmlns:_i.CT,"xmlns:xsd":_i.xsd,"xmlns:xsi":_i.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Kt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:ZE[l][t.bookType]||ZE[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:ZE[l][t.bookType]||ZE[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function cw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ny(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(rl)||[]).forEach(function(a){var s=$r(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:ey(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function ix(e){var t=[Ys,Kt("Relationships",null,{xmlns:_i.RELS})];return js(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ma(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var B_e="application/vnd.oasis.opendocument.spreadsheet";function T_e(e,t){for(var r=nR(e),n,a;n=lw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=$r(n[0],!1),a.path=="/"&&a.type!==B_e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function j_e(e){var t=[Ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function aH(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function I_e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function F_e(e){var t=[Ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(aH(e[r][0],e[r][1])),t.push(I_e("",e[r][0]));return t.push(aH("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function qee(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+CS.version+"</meta:generator></office:meta></office:document-meta>"}var Iu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],O_e=function(){for(var e=new Array(Iu.length),t=0;t<Iu.length;++t){var r=Iu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Wee(e){var t={};e=Ca(e);for(var r=0;r<Iu.length;++r){var n=Iu[r],a=e.match(O_e[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function gT(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=va(t),n[n.length]=r?Kt(e,t,r):go(e,t))}function Xee(e,t){var r=t||{},n=[Ys,Kt("cp:coreProperties",null,{"xmlns:cp":_i.CORE_PROPS,"xmlns:dc":_i.dc,"xmlns:dcterms":_i.dcterms,"xmlns:dcmitype":_i.dcmitype,"xmlns:xsi":_i.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&gT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:gF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&gT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:gF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Iu.length;++s){var i=Iu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&gT(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Np=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Yee=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Jee(e,t,r,n){var a=[];if(typeof e=="string")a=qQ(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?qQ(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function D_e(e,t,r){var n={};return t||(t={}),e=Ca(e),Np.forEach(function(a){var s=(e.match(iw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Jee(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Zee(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ys,t[t.length]=Kt("Properties",null,{xmlns:_i.EXT_PROPS,"xmlns:vt":_i.vt}),Np.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=va(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+va(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var R_e=/<[^>]+>[^<]*/g;function P_e(e,t){var r={},n="",a=e.match(R_e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$r(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function ete(e){var t=[Ys,Kt("Properties",null,{xmlns:_i.CUST_PROPS,"xmlns:vt":_i.vt})];if(!e)return t.join("");var r=1;return js(e).forEach(function(a){++r,t[t.length]=Kt("property",GCe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:va(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var wF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},vT;function L_e(e,t,r){vT||(vT=XN(wF)),t=vT[t]||t,e[t]=r}function M_e(e,t){var r=[];return js(wF).map(function(n){for(var a=0;a<Iu.length;++a)if(Iu[a][1]==n)return Iu[a];for(a=0;a<Np.length;++a)if(Np[a][1]==n)return Np[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(go(wF[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Cc.o})}function U_e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&js(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Iu.length;++i)if(s==Iu[i][1])return;for(i=0;i<Np.length;++i)if(s==Np[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Kt(zQ(s),o,{"dt:dt":l}))}}),t&&js(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(zQ(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Cc.o+'">'+a.join("")+"</"+n+">"}function hR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Q_e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=yt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function tte(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function rte(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function nte(e,t,r){return t===31?rte(e):tte(e,t,r)}function EF(e,t,r){return nte(e,t,r===!1?0:4)}function H_e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return nte(e,t,0)}function V_e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(xl,""),e.l-a&2&&(e.l+=2)}return r}function z_e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(xl,"");return r}function $_e(e){var t=e.l,r=FS(e,$ee);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=FS(e,Ml);return[r,n]}function G_e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push($_e(e));return r}function sH(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(xl,"").replace(Zb,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function ate(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function K_e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function FS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==rH&&n!==t&&C_e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===rH?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return tte(e,n,4).replace(xl,"");case 31:return rte(e);case 64:return hR(e);case 65:return ate(e);case 71:return K_e(e);case 80:return EF(e,n,!s.raw).replace(xl,"");case 81:return H_e(e,n).replace(xl,"");case 4108:return G_e(e);case 4126:case 4127:return n==4127?V_e(e):z_e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function iH(e,t){var r=yt(4),n=yt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=yt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Q_e(t);break;case 31:case 80:for(n=yt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ki([r,n])}function oH(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(C,S){return C[1]-S[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=FS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:vd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=FS(e,AR),vd(o),l!==-1){var v=e.l;e.l=s[l][1],u=sH(e,o),e.l=v}}else if(s[i][0]===0){if(o===0){l=i,e.l=s[i+1][1];continue}u=sH(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=ate(e);break;case 30:e.l+=4,y=EF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=EF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Qs(e,4);break;case 64:e.l+=4,y=Qa(hR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var ste=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function q_e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function lH(e,t,r){var n=yt(8),a=[],s=[],i=8,o=0,l=yt(8),u=yt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!t){u=yt(8),u.write_shift(4,0),a.unshift(u);var d=[yt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=yt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ki(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(ste.indexOf(e[o][0])>-1||Yee.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var v=h.split(".");h=(+v[0]<<16)+(+v[1]||0)}l=iH(g.t,h)}else{var b=q_e(h);b==-1&&(b=31,h=String(h)),l=iH(b,h)}s.push(l),u=yt(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+l.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ki([n].concat(a).concat(s))}function cH(e,t,r){var n=e.content;if(!n)return{};po(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Er.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=oH(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var g;try{g=oH(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function uH(e,t,r,n,a,s){var i=yt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Er.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=lH(e,r,n);if(o.push(l),a){var u=lH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Ki(o)}function d0(e,t){return e.read_shift(t),null}function W_e(e,t){t||(t=yt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function X_e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Qs(e,t){return e.read_shift(t)===1}function Al(e,t){return t||(t=yt(2)),t.write_shift(2,+!!e),t}function ci(e){return e.read_shift(2,"u")}function yu(e,t){return t||(t=yt(2)),t.write_shift(2,e),t}function ite(e,t){return X_e(e,t,ci)}function Y_e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function ote(e,t,r){return r||(r=yt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function s2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function J_e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Z_e(e){var t=e.t||"",r=yt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=yt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Ki(a)}function Wp(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function i2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Wp(e,n,r)}function gg(e,t,r){if(r.biff>5)return i2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function lte(e,t,r){return r||(r=yt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function eSe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function tSe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(xl,"");return n&&(e.l+=24),a}function rSe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(xl,"");return r+i}function nSe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return tSe(e);case"0303000000000000c000000000000046":return rSe(e);default:throw new Error("Unsupported Moniker "+r)}}function eC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(xl,""):"";return r}function dH(e,t){t||(t=yt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function aSe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,u="",d,f;a&16&&(s=eC(e,r-e.l)),a&128&&(i=eC(e,r-e.l)),(a&257)===257&&(o=eC(e,r-e.l)),(a&257)===1&&(l=nSe(e,r-e.l)),a&8&&(u=eC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=hR(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function sSe(e){var t=yt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),dH(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&dH(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function cte(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function ute(e,t){var r=cte(e);return r[3]=0,r}function KA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Xp(e,t,r,n){return n||(n=yt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function iSe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function oSe(e,t,r){return t===0?"":gg(e,t,r)}function lSe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function dte(e){var t=e.read_shift(2),r=dR(e);return[t,r]}function cSe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=s2(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function ZN(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Ate(e,t){return t||(t=yt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function fte(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var uSe=fte;function hte(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function dSe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function ASe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Po(e){e.l+=2,e.l+=e.read_shift(2)}var fSe={0:Po,4:Po,5:Po,6:Po,7:ASe,8:Po,9:Po,10:Po,11:Po,12:Po,13:dSe,14:Po,15:Po,16:Po,17:Po,18:Po,19:Po,20:Po,21:hte};function hSe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(fSe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function tC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function mR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=yt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function mSe(e,t){return t===0||e.read_shift(2),1200}function pSe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=gg(e,0,r);return e.read_shift(t+n-e.l),a}function gSe(e,t){var r=!t||t.biff==8,n=yt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function vSe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function xSe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=s2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function bSe(e,t){var r=!t||t.biff>=8?2:1,n=yt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ySe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(J_e(e));return s.Count=n,s.Unique=a,s}function wSe(e,t){var r=yt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=Z_e(e[a]);var s=Ki([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function ESe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function CSe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function _Se(e){var t=iSe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function SSe(e){return e.read_shift(2),e.read_shift(4)}function AH(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function NSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function kSe(){var e=yt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function BSe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function TSe(e){var t=yt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function jSe(){}function ISe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=s2(e,0,r),n}function FSe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=yt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function OSe(e){var t=KA(e);return t.isst=e.read_shift(4),t}function DSe(e,t,r,n){var a=yt(10);return Xp(e,t,n,a),a.write_shift(4,r),a}function RSe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=KA(e);r.biff==2&&e.l++;var s=i2(e,n-e.l,r);return a.val=s,a}function PSe(e,t,r,n,a){var s=!a||a.biff==8,i=yt(8+ +s+(1+s)*r.length);return Xp(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function LSe(e,t,r){var n=e.read_shift(2),a=gg(e,0,r);return[n,a]}function MSe(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var USe=gg;function fH(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function QSe(e,t){var r=t.biff==8||!t.biff?4:2,n=yt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function HSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=dte(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function VSe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(dte(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function zSe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function $Se(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=__e[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function GSe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=$Se(e,t,n.fStyle,r),n}function hH(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function KSe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function qSe(e){var t=yt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function mH(e,t,r){var n=KA(e);(r.biff==2||t==9)&&++e.l;var a=Y_e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function WSe(e,t,r,n,a,s){var i=yt(8);return Xp(e,t,n,i),ote(r,s,i),i}function XSe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=KA(e),a=Xo(e);return n.val=a,n}function YSe(e,t,r,n){var a=yt(14);return Xp(e,t,n,a),qp(r,a),a}var pH=oSe;function JSe(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Wp(e,s),o=[];n>e.l;)o.push(i2(e));return[s,a,i,o]}function gH(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=cSe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var ZSe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function vH(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Wp(e,i,r);a&32&&(u=ZSe[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:hBe(e,d,r,o);return{chKey:s,Name:u,itab:l,rgce:f}}function mte(e,t,r){if(r.biff<8)return e5e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(lSe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function e5e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=s2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function t5e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Wp(e,n,r),i=Wp(e,a,r);return[s,i]}function r5e(e,t,r){var n=fte(e);e.l++;var a=e.read_shift(1);return t-=8,[mBe(e,t,r),a,n]}function xH(e,t,r){var n=uSe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,ABe(e,t,r)]}function n5e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function a5e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=gg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function s5e(e,t,r){return a5e(e,t,r)}function i5e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(ZN(e));return r}function o5e(e){var t=yt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Ate(e[r],t);return t}function l5e(e,t,r){if(r&&r.biff<8)return u5e(e,t,r);var n=hte(e),a=hSe(e,t-22,n[1]);return{cmo:n,ft:a}}var c5e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function u5e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((c5e[n]||el)(e,t,r)),{cmo:[a,n,s],ft:i}}function d5e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=eSe(e,6,r);var o=e.read_shift(2);e.read_shift(2),ci(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Wp(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function A5e(e,t){var r=ZN(e);e.l+=16;var n=aSe(e,t-24);return[r,n]}function f5e(e){var t=yt(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ki([t,sSe(e[1])])}function h5e(e,t){e.read_shift(2);var r=ZN(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(xl,""),[r,n]}function m5e(e){var t=e[1].Tooltip,r=yt(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function p5e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=nH[r]||r,r=e.read_shift(2),t[1]=nH[r]||r,t}function g5e(e){return e||(e=yt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function v5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ute(e));return r}function x5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ute(e));return r}function b5e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function pte(e,t,r){if(!r.cellStyles)return el(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function y5e(e,t){var r=yt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function w5e(e,t){var r={};return t<32||(e.l+=16,r.header=Xo(e),r.footer=Xo(e),e.l+=2),r}function E5e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function C5e(e){for(var t=yt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var _5e=KA,S5e=ite,N5e=i2;function k5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function B5e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=KA(e);++e.l;var a=gg(e,t-7,r);return n.t="str",n.val=a,n}function T5e(e){var t=KA(e);++e.l;var r=Xo(e);return t.t="n",t.val=r,t}function j5e(e,t,r){var n=yt(15);return u2(n,e,t),n.write_shift(8,r,"f"),n}function I5e(e){var t=KA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function F5e(e,t,r){var n=yt(9);return u2(n,e,t),n.write_shift(2,r),n}function O5e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function D5e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function R5e(e,t,r){var n=e.l+t,a=KA(e),s=e.read_shift(2),i=Wp(e,s,r);return e.l=n,a.t="str",a.val=i,a}var P5e=[2,3,48,49,131,139,140,245],CF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=XN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=lm(1);switch(l.type){case"base64":d=kc(Dc(o));break;case"binary":d=kc(o);break;case"buffer":case"array":d=o;break}po(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),C=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(C=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var S=[],I={},N=Math.min(d.length,f==2?521:b-10-(p?264:0)),B=g?32:11;d.l<N&&d[d.l]!=13;)switch(I={},I.name=nw.utils.decode(C,d.slice(d.l,d.l+B)).replace(/[\u0000\r\n].*$/g,""),d.l+=B,I.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(I.offset=d.read_shift(4)),I.len=d.read_shift(1),f==2&&(I.offset=d.read_shift(2)),I.dec=d.read_shift(1),I.name.length&&S.push(I),f!=2&&(d.l+=g?13:14),I.type){case"B":(!p||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var w=0,_=0;for(u[0]=[],_=0;_!=S.length;++_)u[0][_]=S[_].name;for(;v-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++w]=[],_=0,_=0;_!=S.length;++_){var F=d.slice(d.l,d.l+S[_].len);d.l+=S[_].len,po(F,0);var U=nw.utils.decode(C,F);switch(S[_].type){case"C":U.trim().length&&(u[w][_]=U.replace(/\s+$/,""));break;case"D":U.length===8?u[w][_]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):u[w][_]=U;break;case"F":u[w][_]=parseFloat(U.trim());break;case"+":case"I":u[w][_]=g?F.read_shift(-4,"i")^2147483648:F.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":u[w][_]=!0;break;case"N":case"F":u[w][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[w][_]="##MEMO##"+(g?parseInt(U.trim(),10):F.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(u[w][_]=+U||0);break;case"@":u[w][_]=new Date(F.read_shift(-8,"f")-621356832e5);break;case"T":u[w][_]=new Date((F.read_shift(4)-2440588)*864e5+F.read_shift(4));break;case"Y":u[w][_]=F.read_shift(4,"i")/1e4+F.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[w][_]=-F.read_shift(-8,"f");break;case"B":if(p&&S[_].len==8){u[w][_]=F.read_shift(8,"f");break}case"G":case"P":F.l+=S[_].len;break;case"0":if(S[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[_].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=S,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=A1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,l){try{return bm(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&vd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Xl(),f=RS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,b=0,y=0,C=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++y;continue}if(h[v]!=null){if(++y,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(b=0;b<1024;++b)if(h.indexOf(h[v]+"_"+b)==-1){h[v]+="_"+b;break}}}}var S=Hn(o["!ref"]),I=[],N=[],B=[];for(v=0;v<=S.e.c-S.s.c;++v){var w="",_="",F=0,U=[];for(b=0;b<p.length;++b)p[b][v]!=null&&U.push(p[b][v]);if(U.length==0||h[v]==null){I[v]="?";continue}for(b=0;b<U.length;++b){switch(typeof U[b]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=U[b]instanceof Date?"D":"C";break;default:_="C"}F=Math.max(F,String(U[b]).length),w=w&&w!=_?"C":_}F>250&&(F=250),_=((g[v]||{}).DBF||{}).type,_=="C"&&g[v].DBF.len>F&&(F=g[v].DBF.len),w=="B"&&_=="N"&&(w="N",B[v]=g[v].DBF.dec,F=g[v].DBF.len),N[v]=w=="C"||_=="N"?F:s[w]||0,C+=N[v],I[v]=w}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,C),v=0;v<4;++v)D.write_shift(4,0);for(D.write_shift(4,0|(+t[see]||3)<<8),v=0,b=0;v<h.length;++v)if(h[v]!=null){var k=d.next(32),L=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,L,"sbcs"),k.write_shift(1,I[v]=="?"?"C":I[v],"sbcs"),k.write_shift(4,b),k.write_shift(1,N[v]||s[I[v]]||0),k.write_shift(1,B[v]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),b+=N[v]||s[I[v]]||0}var R=d.next(264);for(R.write_shift(4,13),v=0;v<65;++v)R.write_shift(4,0);for(v=0;v<p.length;++v){var X=d.next(C);for(X.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(I[b]){case"L":X.write_shift(1,p[v][b]==null?63:p[v][b]?84:70);break;case"B":X.write_shift(8,p[v][b]||0,"f");break;case"N":var V="0";for(typeof p[v][b]=="number"&&(V=p[v][b].toFixed(B[b]||0)),y=0;y<N[b]-V.length;++y)X.write_shift(1,32);X.write_shift(1,V,"sbcs");break;case"D":p[v][b]?(X.write_shift(4,("0000"+p[v][b].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(p[v][b].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+p[v][b].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(p[v][b]!=null?p[v][b]:"").slice(0,N[b]);for(X.write_shift(1,Z,"sbcs"),y=0;y<N[b]-Z.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),gte=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+js(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?TQ(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:TQ(v)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Dc(h),p);case"binary":return s(h,p);case"buffer":return s(pn&&Buffer.isBuffer(h)?h.toString("binary"):xm(h),p);case"array":return s(Kp(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),v=-1,b=-1,y=0,C=0,S=[],I=[],N=null,B={},w=[],_=[],F=[],U=0,D;for(+p.codepage>=0&&vd(+p.codepage);y!==g.length;++y){U=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=k.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),R=L[0],X;if(k.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&I.push(k.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,Z=!1,H=!1,z=!1,q=-1,re=-1;for(C=1;C<L.length;++C)switch(L[C].charAt(0)){case"A":break;case"X":b=parseInt(L[C].slice(1))-1,Z=!0;break;case"Y":for(v=parseInt(L[C].slice(1))-1,Z||(b=0),D=S.length;D<=v;++D)S[D]=[];break;case"K":X=L[C].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(Cd(X))?isNaN(Nx(X).getDate())||(X=Qa(X)):(X=Cd(X),N!==null&&u1(N)&&(X=JN(X))),V=!0;break;case"E":z=!0;var P=ox(L[C].slice(1),{r:v,c:b});S[v][b]=[S[v][b],P];break;case"S":H=!0,S[v][b]=[S[v][b],"S5S"];break;case"G":break;case"R":q=parseInt(L[C].slice(1))-1;break;case"C":re=parseInt(L[C].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}if(V&&(S[v][b]&&S[v][b].length==2?S[v][b][0]=X:S[v][b]=X,N=null),H){if(z)throw new Error("SYLK shared formula cannot have own formula");var K=q>-1&&S[q][re];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");S[v][b][1]=Dte(K[1],{r:v-q,c:b-re})}break;case"F":var Y=0;for(C=1;C<L.length;++C)switch(L[C].charAt(0)){case"X":b=parseInt(L[C].slice(1))-1,++Y;break;case"Y":for(v=parseInt(L[C].slice(1))-1,D=S.length;D<=v;++D)S[D]=[];break;case"M":U=parseInt(L[C].slice(1))/20;break;case"F":break;case"G":break;case"P":N=I[parseInt(L[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(F=L[C].slice(1).split(" "),D=parseInt(F[0],10);D<=parseInt(F[1],10);++D)U=parseInt(F[2],10),_[D-1]=U===0?{hidden:!0}:{wch:U},cm(_[D-1]);break;case"C":b=parseInt(L[C].slice(1))-1,_[b]||(_[b]={});break;case"R":v=parseInt(L[C].slice(1))-1,w[v]||(w[v]={}),U>0?(w[v].hpt=U,w[v].hpx=Bx(U)):U===0&&(w[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}Y<1&&(N=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}}return w.length>0&&(B["!rows"]=w),_.length>0&&(B["!cols"]=_),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,B]}function i(h,p){var g=a(h,p),v=g[0],b=g[1],y=A1(v,p);return js(b).forEach(function(C){y[C]=b[C]}),y}function o(h,p){return bm(i(h,p),p)}function l(h,p,g,v){var b="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+yR(h.f,{r:g,c:v}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,v){var b="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=dw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Aw(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,v){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*fw(g.hpx)+";"),b.length>2&&h.push(b+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],b=Hn(h["!ref"]),y,C=Array.isArray(h),S=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var I=b.s.r;I<=b.e.r;++I)for(var N=b.s.c;N<=b.e.c;++N){var B=Ur({r:I,c:N});y=C?(h[I]||[])[N]:h[B],!(!y||y.v==null&&(!y.f||y.F))&&v.push(l(y,h,I,N))}return g.join(S)+S+v.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),vte=function(){function e(s,i){switch(i.type){case"base64":return t(Dc(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):xm(s),i);case"array":return t(Kp(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][u]=!0:v==="FALSE"?f[l][u]=!1:isNaN(Cd(g))?isNaN(Nx(g).getDate())?f[l][u]=g:f[l][u]=Qa(g):f[l][u]=Cd(g),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return A1(e(s,i),i)}function n(s,i){return bm(r(s,i),i)}var a=function(){var s=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Hn(l["!ref"]),f,h=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var v=Ur({r:p,c:g});if(f=h?(l[p]||[])[g]:l[v],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Fu(f.z||Dr[14],Ni(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,C=u.join(y);return C}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),xte=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,b=0,y=[];b!==p.length;++b){var C=p[b].trim().split(":");if(C[0]==="cell"){var S=os(C[1]);if(y.length<=S.r)for(g=y.length;g<=S.r;++g)y[g]||(y[g]=[]);switch(g=S.r,v=S.c,C[2]){case"t":y[g][v]=e(C[3]);break;case"v":y[g][v]=+C[3];break;case"vtf":var I=C[C.length-1];case"vtc":switch(C[3]){case"nl":y[g][v]=!!+C[4];break;default:y[g][v]=+C[4];break}C[2]=="vtf"&&(y[g][v]=[y[g][v],I])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return A1(r(f,h),h)}function a(f,h){return bm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",b=Jl(f["!ref"]),y=Array.isArray(f),C=b.s.r;C<=b.e.r;++C)for(var S=b.s.c;S<=b.e.c;++S)if(v=Ur({r:C,c:S}),g=y?(f[C]||[])[S]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var I=Ni(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+I,p[5]=g.w||Fu(g.z||Dr[14],I);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),kx=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Cd(d))?isNaN(Nx(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Cd(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var b=10,y=0,C=0;C<=v;++C)y=g[C].indexOf(" "),y==-1?y=g[C].length:y++,b=Math.max(b,y);for(C=0;C<=v;++C){p[C]=[];var S=0;for(e(g[C].slice(0,b).trim(),p,C,S,h),S=1;S<=(g[C].length-b)/10+1;++S)e(g[C].slice(b+(S-1)*10,b+S*10).trim(),p,C,S,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,C=0,S=0,I=0,N=p.charCodeAt(0),B=!1,w=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var F=h.dateNF!=null?ECe(h.dateNF):null;function U(){var D=d.slice(S,I),k={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)k.t="z";else if(h.raw)k.t="s",k.v=D;else if(D.trim().length===0)k.t="s",k.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(k.t="s",k.v=D.slice(2,-1).replace(/""/g,'"')):J4e(D)?(k.t="n",k.f=D.slice(1)):(k.t="s",k.v=D);else if(D=="TRUE")k.t="b",k.v=!0;else if(D=="FALSE")k.t="b",k.v=!1;else if(!isNaN(C=Cd(D)))k.t="n",h.cellText!==!1&&(k.w=D),k.v=C;else if(!isNaN(Nx(D).getDate())||F&&D.match(F)){k.z=h.dateNF||Dr[14];var L=0;F&&D.match(F)&&(D=CCe(D,h.dateNF,D.match(F)||[]),L=1),h.cellDates?(k.t="d",k.v=Qa(D,L)):(k.t="n",k.v=Ni(Qa(D,L))),h.cellText!==!1&&(k.w=Fu(k.z,k.v instanceof Date?Ni(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=D;if(k.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=k):g[Ur({c:y,r:b})]=k),S=I+1,_=d.charCodeAt(S),v.e.c<y&&(v.e.c=y),v.e.r<b&&(v.e.r=b),w==N)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;I<d.length;++I)switch(w=d.charCodeAt(I)){case 34:_===34&&(B=!B);break;case N:case 10:case 13:if(!B&&U())break e;break}return I-S>0&&U(),g["!ref"]=nn(v),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):A1(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:BR(d,f);switch(f.type){case"base64":h=Dc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof nw<"u"||(h=pn&&Buffer.isBuffer(d)?d.toString("binary"):xm(d));break;case"array":h=Kp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ca(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ca(h):f.type=="binary"&&typeof nw<"u",h.slice(0,19)=="socialcalc:version:"?xte.to_sheet(f.type=="string"?h:Ca(h),f):i(h,f)}function l(d,f){return bm(o(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),p,g=Array.isArray(d),v=h.s.r;v<=h.e.r;++v){for(var b=[],y=h.s.c;y<=h.e.c;++y){var C=Ur({r:v,c:y});if(p=g?(d[v]||[])[y]:d[C],!p||p.v==null){b.push("          ");continue}for(var S=(p.w||(sh(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";b.push(S+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function L5e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=gte.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return kx.to_workbook(e,t)}}var kp=function(){function e(P,K,Y){if(P){po(P,P.l||0);for(var te=Y.Enum||q;P.l<P.length;){var ie=P.read_shift(2),Ae=te[ie]||te[65535],oe=P.read_shift(2),ce=P.l+oe,pe=Ae.f&&Ae.f(P,oe,Y);if(P.l=ce,K(pe,Ae,ie))return}}}function t(P,K){switch(K.type){case"base64":return r(kc(Dc(P)),K);case"binary":return r(kc(P),K);case"buffer":case"array":return r(P,K)}throw"Unsupported type "+K.type}function r(P,K){if(!P)return P;var Y=K||{},te=Y.dense?[]:{},ie="Sheet1",Ae="",oe=0,ce={},pe=[],Ie=[],ne={s:{r:0,c:0},e:{r:0,c:0}},Se=Y.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)Y.Enum=q,e(P,function(je,He,Xe){switch(Xe){case 0:Y.vers=je,je>=4096&&(Y.qpro=!0);break;case 6:ne=je;break;case 204:je&&(Ae=je);break;case 222:Ae=je;break;case 15:case 51:Y.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=Y.dateNF||Dr[14],Y.cellDates&&(je[1].t="d",je[1].v=JN(je[1].v))),Y.qpro&&je[3]>oe&&(te["!ref"]=nn(ne),ce[ie]=te,pe.push(ie),te=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=je[3],ie=Ae||"Sheet"+(oe+1),Ae="");var ye=Y.dense?(te[je[0].r]||[])[je[0].c]:te[Ur(je[0])];if(ye){ye.t=je[1].t,ye.v=je[1].v,je[1].z!=null&&(ye.z=je[1].z),je[1].f!=null&&(ye.f=je[1].f);break}Y.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Ur(je[0])]=je[1];break}},Y);else if(P[2]==26||P[2]==14)Y.Enum=re,P[2]==14&&(Y.qpro=!0,P.l=0),e(P,function(je,He,Xe){switch(Xe){case 204:ie=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>oe&&(te["!ref"]=nn(ne),ce[ie]=te,pe.push(ie),te=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=je[3],ie="Sheet"+(oe+1)),Se>0&&je[0].r>=Se)break;Y.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Ur(je[0])]=je[1],ne.e.c<je[0].c&&(ne.e.c=je[0].c),ne.e.r<je[0].r&&(ne.e.r=je[0].r);break;case 27:je[14e3]&&(Ie[je[14e3][0]]=je[14e3][1]);break;case 1537:Ie[je[0]]=je[1],je[0]==oe&&(ie=je[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(te["!ref"]=nn(ne),ce[Ae||ie]=te,pe.push(Ae||ie),!Ie.length)return{SheetNames:pe,Sheets:ce};for(var De={},_e=[],he=0;he<Ie.length;++he)ce[pe[he]]?(_e.push(Ie[he]||pe[he]),De[Ie[he]]=ce[Ie[he]]||ce[pe[he]]):(_e.push(Ie[he]),De[Ie[he]]={"!ref":"A1"});return{SheetNames:_e,Sheets:De}}function n(P,K){var Y=K||{};if(+Y.codepage>=0&&vd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Xl(),ie=Hn(P["!ref"]),Ae=Array.isArray(P),oe=[];qt(te,0,s(1030)),qt(te,6,l(ie));for(var ce=Math.min(ie.e.r,8191),pe=ie.s.r;pe<=ce;++pe)for(var Ie=Ws(pe),ne=ie.s.c;ne<=ie.e.c;++ne){pe===ie.s.r&&(oe[ne]=is(ne));var Se=oe[ne]+Ie,De=Ae?(P[pe]||[])[ne]:P[Se];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?qt(te,13,p(pe,ne,De.v)):qt(te,14,v(pe,ne,De.v));else{var _e=sh(De);qt(te,15,f(pe,ne,_e.slice(0,239)))}}return qt(te,1),te.end()}function a(P,K){var Y=K||{};if(+Y.codepage>=0&&vd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Xl();qt(te,0,i(P));for(var ie=0,Ae=0;ie<P.SheetNames.length;++ie)(P.Sheets[P.SheetNames[ie]]||{})["!ref"]&&qt(te,27,z(P.SheetNames[ie],Ae++));var oe=0;for(ie=0;ie<P.SheetNames.length;++ie){var ce=P.Sheets[P.SheetNames[ie]];if(!(!ce||!ce["!ref"])){for(var pe=Hn(ce["!ref"]),Ie=Array.isArray(ce),ne=[],Se=Math.min(pe.e.r,8191),De=pe.s.r;De<=Se;++De)for(var _e=Ws(De),he=pe.s.c;he<=pe.e.c;++he){De===pe.s.r&&(ne[he]=is(he));var je=ne[he]+_e,He=Ie?(ce[De]||[])[he]:ce[je];if(!(!He||He.t=="z"))if(He.t=="n")qt(te,23,U(De,he,oe,He.v));else{var Xe=sh(He);qt(te,22,w(De,he,oe,Xe.slice(0,239)))}}++oe}}return qt(te,1),te.end()}function s(P){var K=yt(2);return K.write_shift(2,P),K}function i(P){var K=yt(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var Y=0,te=0,ie=0,Ae=0;Ae<P.SheetNames.length;++Ae){var oe=P.SheetNames[Ae],ce=P.Sheets[oe];if(!(!ce||!ce["!ref"])){++ie;var pe=Jl(ce["!ref"]);Y<pe.e.r&&(Y=pe.e.r),te<pe.e.c&&(te=pe.e.c)}}return Y>8191&&(Y=8191),K.write_shift(2,Y),K.write_shift(1,ie),K.write_shift(1,te),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(P,K,Y){var te={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&Y.qpro?(te.s.c=P.read_shift(1),P.l++,te.s.r=P.read_shift(2),te.e.c=P.read_shift(1),P.l++,te.e.r=P.read_shift(2),te):(te.s.c=P.read_shift(2),te.s.r=P.read_shift(2),K==12&&Y.qpro&&(P.l+=2),te.e.c=P.read_shift(2),te.e.r=P.read_shift(2),K==12&&Y.qpro&&(P.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(P){var K=yt(8);return K.write_shift(2,P.s.c),K.write_shift(2,P.s.r),K.write_shift(2,P.e.c),K.write_shift(2,P.e.r),K}function u(P,K,Y){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(te[0].c=P.read_shift(1),te[3]=P.read_shift(1),te[0].r=P.read_shift(2),P.l+=2):(te[2]=P.read_shift(1),te[0].c=P.read_shift(2),te[0].r=P.read_shift(2)),te}function d(P,K,Y){var te=P.l+K,ie=u(P,K,Y);if(ie[1].t="s",Y.vers==20768){P.l++;var Ae=P.read_shift(1);return ie[1].v=P.read_shift(Ae,"utf8"),ie}return Y.qpro&&P.l++,ie[1].v=P.read_shift(te-P.l,"cstr"),ie}function f(P,K,Y){var te=yt(7+Y.length);te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,P),te.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var Ae=Y.charCodeAt(ie);te.write_shift(1,Ae>=128?95:Ae)}return te.write_shift(1,0),te}function h(P,K,Y){var te=u(P,K,Y);return te[1].v=P.read_shift(2,"i"),te}function p(P,K,Y){var te=yt(7);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,P),te.write_shift(2,Y,"i"),te}function g(P,K,Y){var te=u(P,K,Y);return te[1].v=P.read_shift(8,"f"),te}function v(P,K,Y){var te=yt(13);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,P),te.write_shift(8,Y,"f"),te}function b(P,K,Y){var te=P.l+K,ie=u(P,K,Y);if(ie[1].v=P.read_shift(8,"f"),Y.qpro)P.l=te;else{var Ae=P.read_shift(2);I(P.slice(P.l,P.l+Ae),ie),P.l+=Ae}return ie}function y(P,K,Y){var te=K&32768;return K&=-32769,K=(te?P:0)+(K>=8192?K-16384:K),(te?"":"$")+(Y?is(K):Ws(K))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(P,K){po(P,0);for(var Y=[],te=0,ie="",Ae="",oe="",ce="";P.l<P.length;){var pe=P[P.l++];switch(pe){case 0:Y.push(P.read_shift(8,"f"));break;case 1:Ae=y(K[0].c,P.read_shift(2),!0),ie=y(K[0].r,P.read_shift(2),!1),Y.push(Ae+ie);break;case 2:{var Ie=y(K[0].c,P.read_shift(2),!0),ne=y(K[0].r,P.read_shift(2),!1);Ae=y(K[0].c,P.read_shift(2),!0),ie=y(K[0].r,P.read_shift(2),!1),Y.push(Ie+ne+":"+Ae+ie)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(P.read_shift(2));break;case 6:{for(var Se="";pe=P[P.l++];)Se+=String.fromCharCode(pe);Y.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ce=Y.pop(),oe=Y.pop(),Y.push(["AND","OR"][pe-20]+"("+oe+","+ce+")");break;default:if(pe<32&&S[pe])ce=Y.pop(),oe=Y.pop(),Y.push(oe+S[pe]+ce);else if(C[pe]){if(te=C[pe][1],te==69&&(te=P[P.l++]),te>Y.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+Y.join("|")+"|");return}var De=Y.slice(-te);Y.length-=te,Y.push(C[pe][0]+"("+De.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}Y.length==1?K[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function N(P){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=P.read_shift(2),K[3]=P[P.l++],K[0].c=P[P.l++],K}function B(P,K){var Y=N(P);return Y[1].t="s",Y[1].v=P.read_shift(K-4,"cstr"),Y}function w(P,K,Y,te){var ie=yt(6+te.length);ie.write_shift(2,P),ie.write_shift(1,Y),ie.write_shift(1,K),ie.write_shift(1,39);for(var Ae=0;Ae<te.length;++Ae){var oe=te.charCodeAt(Ae);ie.write_shift(1,oe>=128?95:oe)}return ie.write_shift(1,0),ie}function _(P,K){var Y=N(P);Y[1].v=P.read_shift(2);var te=Y[1].v>>1;if(Y[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Y[1].v=te,Y}function F(P,K){var Y=N(P),te=P.read_shift(4),ie=P.read_shift(4),Ae=P.read_shift(2);if(Ae==65535)return te===0&&ie===3221225472?(Y[1].t="e",Y[1].v=15):te===0&&ie===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var oe=Ae&32768;return Ae=(Ae&32767)-16446,Y[1].v=(1-oe*2)*(ie*Math.pow(2,Ae+32)+te*Math.pow(2,Ae)),Y}function U(P,K,Y,te){var ie=yt(14);if(ie.write_shift(2,P),ie.write_shift(1,Y),ie.write_shift(1,K),te==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ae=0,oe=0,ce=0,pe=0;return te<0&&(Ae=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),pe=te>>>0,(pe&2147483648)==0&&(te/=2,++oe,pe=te>>>0),te-=pe,pe|=2147483648,pe>>>=0,te*=Math.pow(2,32),ce=te>>>0,ie.write_shift(4,ce),ie.write_shift(4,pe),oe+=16383+(Ae?32768:0),ie.write_shift(2,oe),ie}function D(P,K){var Y=F(P);return P.l+=K-14,Y}function k(P,K){var Y=N(P),te=P.read_shift(4);return Y[1].v=te>>6,Y}function L(P,K){var Y=N(P),te=P.read_shift(8,"f");return Y[1].v=te,Y}function R(P,K){var Y=L(P);return P.l+=K-10,Y}function X(P,K){return P[P.l+K-1]==0?P.read_shift(K,"cstr"):""}function V(P,K){var Y=P[P.l++];Y>K-1&&(Y=K-1);for(var te="";te.length<Y;)te+=String.fromCharCode(P[P.l++]);return te}function Z(P,K,Y){if(!(!Y.qpro||K<21)){var te=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ie=P.read_shift(K-21,"cstr");return[te,ie]}}function H(P,K){for(var Y={},te=P.l+K;P.l<te;){var ie=P.read_shift(2);if(ie==14e3){for(Y[ie]=[0,""],Y[ie][0]=P.read_shift(2);P[P.l];)Y[ie][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return Y}function z(P,K){var Y=yt(5+P.length);Y.write_shift(2,14e3),Y.write_shift(2,K);for(var te=0;te<P.length;++te){var ie=P.charCodeAt(te);Y[Y.l++]=ie>127?95:ie}return Y[Y.l++]=0,Y}var q={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:R},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function M5e(e){var t={},r=e.match(rl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$r(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=GD[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var U5e=function(){var e=iw("t"),t=iw("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Qn(i[1])},l=s.match(t);return l&&(o.s=M5e(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),Q5e=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),H5e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,V5e=/<(?:\w+:)?r>/,z5e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pR(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ca(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ca(e),r&&(n.h=rR(n.t))):e.match(V5e)&&(n.r=Ca(e),n.t=Qn(Ca((e.replace(z5e,"").match(H5e)||[]).join("").replace(rl,""))),r&&(n.h=Q5e(U5e(n.r)))),n):{t:""}}var $5e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,G5e=/<(?:\w+:)?(?:si|sstItem)>/g,K5e=/<\/(?:\w+:)?(?:si|sstItem)>/;function q5e(e,t){var r=[],n="";if(!e)return r;var a=e.match($5e);if(a){n=a[2].replace(G5e,"").split(K5e);for(var s=0;s!=n.length;++s){var i=pR(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=$r(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var W5e=/^\s|\s$|[\t\n\r]/;function bte(e,t){if(!t.bookSST)return"";var r=[Ys];r[r.length]=Kt("sst",null,{xmlns:Ag[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(W5e)&&(s+=' xml:space="preserve"'),s+=">"+va(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function X5e(e){return[e.read_shift(4),e.read_shift(4)]}function Y5e(e,t){var r=[],n=!1;return bh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function J5e(e,t){return t||(t=yt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Z5e=c_e;function eNe(e){var t=Xl();Rt(t,159,J5e(e));for(var r=0;r<e.length;++r)Rt(t,19,Z5e(e[r]));return Rt(t,160),t.end()}function yte(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function qf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function tNe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=qf(e,4),t.U=qf(e,4),t.W=qf(e,4),t}function rNe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function nNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(rNe(e));return t}function aNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function sNe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=qf(e,4),t.U=qf(e,4),t.W=qf(e,4),t}function iNe(e){var t=sNe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function wte(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Ete(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function oNe(e){var t=qf(e);switch(t.Minor){case 2:return[t.Minor,lNe(e)];case 3:return[t.Minor,cNe()];case 4:return[t.Minor,uNe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function lNe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=wte(e,r),a=Ete(e,e.length-e.l);return{t:"Std",h:n,v:a}}function cNe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function uNe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(rl,function(s){var i=$r(s);switch(GA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function dNe(e,t){var r={},n=r.EncryptionVersionInfo=qf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=wte(e,a),t-=a,r.EncryptionVerifier=Ete(e,t),r}function ANe(e){var t={},r=t.EncryptionVersionInfo=qf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function gR(e){var t=0,r,n=yte(e),a=n.length+1,s,i,o,l,u;for(r=lm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var Cte=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=yte(i),l=s(o),u=o.length,d=lm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=l>>8,d[u]=a(e[0],h),--u,h=l&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=l>>8,d[u]=a(o[u],h),--u,h=l&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=l>>8,d[u]=a(e[g],h),--u,--g,h=l&255,d[u]=a(o[u],h),--u,--g;return d}}(),fNe=function(e,t,r,n,a){a||(a=t),n||(n=Cte(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},hNe=function(e){var t=0,r=Cte(e);return function(n){var a=fNe("",n,t,r);return t=a[1],a[0]}};function mNe(e,t,r,n){var a={key:ci(e),verificationBytes:ci(e)};return r.password&&(a.verifier=gR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=hNe(r.password)),a}function pNe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=ANe(e):n.Data=dNe(e,t),n}function gNe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?pNe(e,t-2,n):mNe(e,r.biff>=8?t:t-2,r,n),n}var _te=function(){function e(a,s){switch(s.type){case"base64":return t(Dc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):xm(a),s);case"array":return t(Kp(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][v]=y:o[Ur({r:f,c:v})]=y}break}p=h.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=nn(u),o}function r(a,s){return bm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Hn(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Ur({r:u,c:d});o=l?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(sh(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function vNe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function uw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function xNe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function bNe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function OS(e,t){if(t===0)return e;var r=xNe(vNe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),uw(bNe(r))}var Ste=6,yNe=15,wNe=1,$o=Ste;function dw(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function Aw(e){return Math.floor((e-5)/$o*100+.5)/100}function DS(e){return Math.round((e*$o+5)/$o*256)/256}function xT(e){return DS(Aw(dw(e)))}function vR(e){var t=Math.abs(e-xT(e)),r=$o;if(t>.005)for($o=wNe;$o<yNe;++$o)Math.abs(e-xT(e))<=t&&(t=Math.abs(e-xT(e)),r=$o);$o=r}function cm(e){e.width?(e.wpx=dw(e.width),e.wch=Aw(e.wpx),e.MDW=$o):e.wpx?(e.wch=Aw(e.wpx),e.width=DS(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=DS(e.wch),e.wpx=dw(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var ENe=96,Nte=ENe;function fw(e){return e*96/Nte}function Bx(e){return e*Nte/96}var CNe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function _Ne(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(GA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function SNe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(GA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function NNe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(GA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ca(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=GD[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=Sp[a.color.index];a.color.index==81&&(l=Sp[1]),l||(l=Sp[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=OS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function kNe(e,t,r){t.NumberFmt=[];for(var n=js(Dr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Dr[n[a]];var s=e[0].match(rl);if(s)for(a=0;a<s.length;++a){var i=$r(s[a]);switch(GA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Qn(Ca(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Kf(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function BNe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:va(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var rC=["numFmtId","fillId","fontId","borderId","xfId"],nC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function TNe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(rl)||[]).forEach(function(s){var i=$r(s),o=0;switch(GA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<rC.length;++o)n[rC[o]]&&(n[rC[o]]=parseInt(n[rC[o]],10));for(o=0;o<nC.length;++o)n[nC[o]]&&(n[nC[o]]=Ma(n[nC[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Ma(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function jNe(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var INe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&kNe(f,d,u),(f=o.match(a))&&NNe(f,d,l,u),(f=o.match(n))&&SNe(f,d,l,u),(f=o.match(s))&&_Ne(f,d,l,u),(f=o.match(r))&&TNe(f,d,u),d}}();function kte(e,t){var r=[Ys,Kt("styleSheet",null,{xmlns:Ag[0],"xmlns:vt":_i.vt})],n;return e.SSF&&(n=BNe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=jNe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function FNe(e,t){var r=e.read_shift(2),n=Jo(e);return[r,n]}function ONe(e,t,r){r||(r=yt(6+4*t.length)),r.write_shift(2,e),Wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function DNe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=p_e(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=m_e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jo(e),n}function RNe(e,t){t||(t=yt(153)),t.write_shift(2,e.sz*20),g_e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),jS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var PNe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],bT,LNe=el;function bH(e,t){t||(t=yt(84)),bT||(bT=XN(PNe));var r=bT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(jS({auto:1},t),jS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function MNe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Bte(e,t,r){r||(r=yt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function yb(e,t){return t||(t=yt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var UNe=el;function QNe(e,t){return t||(t=yt(51)),t.write_shift(1,0),yb(null,t),yb(null,t),yb(null,t),yb(null,t),yb(null,t),t.length>t.l?t.slice(0,t.l):t}function HNe(e,t){return t||(t=yt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),TS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function VNe(e,t,r){var n=yt(2052);return n.write_shift(4,e),TS(t,n),TS(r,n),n.length>n.l?n.slice(0,n.l):n}function zNe(e,t,r){var n={};n.NumberFmt=[];for(var a in Dr)n.NumberFmt[a]=Dr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return bh(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Kf(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=OS(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function $Ne(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,_d(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,ONe(a,t[a]))}),Rt(e,616))}}function GNe(e){var t=1;Rt(e,611,_d(t)),Rt(e,43,RNe({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function KNe(e){var t=2;Rt(e,603,_d(t)),Rt(e,45,bH({patternType:"none"})),Rt(e,45,bH({patternType:"gray125"})),Rt(e,604)}function qNe(e){var t=1;Rt(e,613,_d(t)),Rt(e,46,QNe()),Rt(e,614)}function WNe(e){var t=1;Rt(e,626,_d(t)),Rt(e,47,Bte({numFmtId:0},65535)),Rt(e,627)}function XNe(e,t){Rt(e,617,_d(t.length)),t.forEach(function(r){Rt(e,47,Bte(r,0))}),Rt(e,618)}function YNe(e){var t=1;Rt(e,619,_d(t)),Rt(e,48,HNe({xfId:0,name:"Normal"})),Rt(e,620)}function JNe(e){var t=0;Rt(e,505,_d(t)),Rt(e,506)}function ZNe(e){var t=0;Rt(e,508,VNe(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function e4e(e,t){var r=Xl();return Rt(r,278),$Ne(r,e.SSF),GNe(r),KNe(r),qNe(r),WNe(r),XNe(r,t.cellXfs),YNe(r),JNe(r),ZNe(r),Rt(r,279),r.end()}var t4e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function r4e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(rl)||[]).forEach(function(a){var s=$r(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[t4e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function n4e(){}function a4e(){}var s4e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,i4e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,o4e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function l4e(e,t,r){t.themeElements={};var n;[["clrScheme",s4e,r4e],["fontScheme",i4e,n4e],["fmtScheme",o4e,a4e]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var c4e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Tte(e,t){(!e||e.length===0)&&(e=xR());var r,n={};if(!(r=e.match(c4e)))throw new Error("themeElements not found in theme");return l4e(r[0],n,t),n.raw=e,n}function xR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function u4e(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=wee(s,{type:"array"})}catch{return}var o=Bc(i,"theme/theme/theme1.xml",!0);if(o)return Tte(o,r)}}function d4e(e){return e.read_shift(4)}function A4e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=f4e(e,4);break;case 2:t.xclrValue=cte(e);break;case 3:t.xclrValue=d4e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function f4e(e,t){return el(e,t)}function h4e(e,t){return el(e,t)}function m4e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=A4e(e);break;case 6:n[1]=h4e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function p4e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(m4e(e,r-e.l));return{ixfe:n,ext:s}}function g4e(e,t){t.forEach(function(r){r[0]})}function v4e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jo(e)}}function x4e(e){var t=yt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wi(e.name,t),t.slice(0,t.l)}function b4e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function y4e(e){var t=yt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function w4e(e,t){var r=yt(8+2*t.length);return r.write_shift(4,e),Wi(t,r),r.slice(0,r.l)}function E4e(e){return e.l+=4,e.read_shift(4)!=0}function C4e(e,t){var r=yt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function _4e(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return bh(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function S4e(){var e=Xl();return Rt(e,332),Rt(e,334,_d(1)),Rt(e,335,x4e({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,w4e(1,"XLDAPR")),Rt(e,52),Rt(e,35,_d(514)),Rt(e,4096,_d(0)),Rt(e,4097,yu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,C4e(1)),Rt(e,51,y4e([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function N4e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(rl,function(o){var l=$r(o);switch(GA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function jte(){var e=[Ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function k4e(e){var t=[];if(!e)return t;var r=1;return(e.match(rl)||[]).forEach(function(n){var a=$r(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function B4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function T4e(e,t,r){var n=[];return bh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function j4e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;bh(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function I4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Pv=1024;function Ite(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Cc.v,"xmlns:o":Cc.o,"xmlns:x":Cc.x,"xmlns:mv":Cc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Pv<e*1e3;)Pv+=1e3;return t.forEach(function(s){var i=os(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",l,o),d={on:"t",obscured:"t"};++Pv,a=a.concat(["<v:shape"+ow({id:"_x0000_s"+Pv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",go("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),go("x:AutoFill","False"),go("x:Row",String(i.r)),go("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function yH(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=os(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var l=Hn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=nn(l);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function F4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=$r(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=os(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&pR(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Fte(e){var t=[Ys,Kt("comments",null,{xmlns:Ag[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=va(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(va(l.a))),s.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(go("t",va(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(go("t",va(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function O4e(e,t){var r=[],n=!1,a={},s=0;return e.replace(rl,function(o,l){var u=$r(o);switch(GA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function D4e(e,t,r){var n=[Ys,Kt("ThreadedComments",null,{xmlns:_i.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",go("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function R4e(e,t){var r=[],n=!1;return e.replace(rl,function(s){var i=$r(s);switch(GA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function P4e(e){var t=[Ys,Kt("personList",null,{xmlns:_i.TCMNT,"xmlns:x":Ag[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function L4e(e){var t={};t.iauthor=e.read_shift(4);var r=pg(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function M4e(e,t){return t==null&&(t=yt(36)),t.write_shift(4,e[1].iauthor),f1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var U4e=Jo;function Q4e(e){return Wi(e.slice(0,54))}function H4e(e,t){var r=[],n=[],a={},s=!1;return bh(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function V4e(e){var t=Xl(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,Q4e(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,M4e([s,a])),a.t&&a.t.length>0&&Rt(t,637,d_e(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var z4e="application/vnd.ms-office.vbaProject";function $4e(e){var t=Er.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Er.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Er.write(t)}function G4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Er.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Ote=["xlsb","xlsm","xlam","biff8","xla"];function K4e(){return{"!type":"dialog"}}function q4e(){return{"!type":"dialog"}}function W4e(){return{"!type":"macro"}}function X4e(){return{"!type":"macro"}}var ox=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,a+(o?"":"$")+is(d)+(l?"":"$")+Ws(u)}return function(a,s){return t=s,a.replace(e,r)}}(),bR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,yR=function(){return function(t,r){return t.replace(bR,function(n,a,s,i,o,l){var u=oR(i)-(s?0:r.c),d=iR(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Dte(e,t){return e.replace(bR,function(r,n,a,s,i,o){return n+(a=="$"?a+s:is(oR(s)+t.c))+(i=="$"?i+o:Ws(iR(o)+t.r))})}function Y4e(e,t,r){var n=Jl(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return Dte(e,i)}function J4e(e){return e.length!=1}function wH(e){return e.replace(/_xlfn\./g,"")}function si(e){e.l+=1}function um(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Rte(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Pte(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=um(e),o=um(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Pte(e){var t=um(e),r=um(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Z4e(e,t,r){if(r.biff<8)return Pte(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=um(e),i=um(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Lte(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return eke(e);var n=e.read_shift(r&&r.biff==12?4:2),a=um(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function eke(e){var t=um(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function tke(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rke(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return nke(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function nke(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function ake(e,t,r){var n=(e[e.l++]&96)>>5,a=Rte(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function ske(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Rte(e,s,r);return[n,a,i]}function ike(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function oke(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function lke(e,t,r){var n=(e[e.l++]&96)>>5,a=Z4e(e,t-1,r);return[n,a]}function cke(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function EH(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function uke(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function dke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Ake(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function fke(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function hke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Mte(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function mke(e){return e.read_shift(2),Mte(e)}function pke(e){return e.read_shift(2),Mte(e)}function gke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Lte(e,0,r);return[n,a]}function vke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=rke(e,0,r);return[n,a]}function xke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Lte(e,0,r);return[n,a,s]}function bke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[EBe[a],Hte[a],n]}function yke(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:wke(e);return[a,(s[0]===0?Hte:wBe)[s[1]]]}function wke(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Eke(e,t,r){e.l+=r&&r.biff==2?3:4}function Cke(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function _ke(e){return e.l++,yh[e.read_shift(1)]}function Ske(e){return e.l++,e.read_shift(2)}function Nke(e){return e.l++,e.read_shift(1)!==0}function kke(e){return e.l++,Xo(e)}function Bke(e,t,r){return e.l++,s2(e,t-1,r)}function Tke(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Qs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=yh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xo(e);break;case 2:r[1]=gg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function jke(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?pg:ZN)(e));return a}function Ike(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=Tke(e,r.biff);return i}function Fke(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function Oke(e,t,r){if(r.biff==5)return Dke(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function Dke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Rke(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Pke(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Lke(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Mke(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var Uke=el,Qke=el,Hke=el;function o2(e,t,r){return e.l+=2,[tke(e)]}function wR(e){return e.l+=6,[]}var Vke=o2,zke=wR,$ke=wR,Gke=o2;function Ute(e){return e.l+=2,[ci(e),e.read_shift(2)&1]}var Kke=o2,qke=Ute,Wke=wR,Xke=o2,Yke=o2,Jke=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zke(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=Jke[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function eBe(e){return e.l+=2,[e.read_shift(4)]}function tBe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function rBe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function nBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function aBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function sBe(e){return e.l+=4,[0,0]}var CH={1:{n:"PtgExp",f:Cke},2:{n:"PtgTbl",f:Hke},3:{n:"PtgAdd",f:si},4:{n:"PtgSub",f:si},5:{n:"PtgMul",f:si},6:{n:"PtgDiv",f:si},7:{n:"PtgPower",f:si},8:{n:"PtgConcat",f:si},9:{n:"PtgLt",f:si},10:{n:"PtgLe",f:si},11:{n:"PtgEq",f:si},12:{n:"PtgGe",f:si},13:{n:"PtgGt",f:si},14:{n:"PtgNe",f:si},15:{n:"PtgIsect",f:si},16:{n:"PtgUnion",f:si},17:{n:"PtgRange",f:si},18:{n:"PtgUplus",f:si},19:{n:"PtgUminus",f:si},20:{n:"PtgPercent",f:si},21:{n:"PtgParen",f:si},22:{n:"PtgMissArg",f:si},23:{n:"PtgStr",f:Bke},26:{n:"PtgSheet",f:tBe},27:{n:"PtgEndSheet",f:rBe},28:{n:"PtgErr",f:_ke},29:{n:"PtgBool",f:Nke},30:{n:"PtgInt",f:Ske},31:{n:"PtgNum",f:kke},32:{n:"PtgArray",f:cke},33:{n:"PtgFunc",f:bke},34:{n:"PtgFuncVar",f:yke},35:{n:"PtgName",f:Fke},36:{n:"PtgRef",f:gke},37:{n:"PtgArea",f:ake},38:{n:"PtgMemArea",f:Rke},39:{n:"PtgMemErr",f:Uke},40:{n:"PtgMemNoMem",f:Qke},41:{n:"PtgMemFunc",f:Pke},42:{n:"PtgRefErr",f:Lke},43:{n:"PtgAreaErr",f:ike},44:{n:"PtgRefN",f:vke},45:{n:"PtgAreaN",f:lke},46:{n:"PtgMemAreaN",f:nBe},47:{n:"PtgMemNoMemN",f:aBe},57:{n:"PtgNameX",f:Oke},58:{n:"PtgRef3d",f:xke},59:{n:"PtgArea3d",f:ske},60:{n:"PtgRefErr3d",f:Mke},61:{n:"PtgAreaErr3d",f:oke},255:{}},iBe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},oBe={1:{n:"PtgElfLel",f:Ute},2:{n:"PtgElfRw",f:Xke},3:{n:"PtgElfCol",f:Vke},6:{n:"PtgElfRwV",f:Yke},7:{n:"PtgElfColV",f:Gke},10:{n:"PtgElfRadical",f:Kke},11:{n:"PtgElfRadicalS",f:Wke},13:{n:"PtgElfColS",f:zke},15:{n:"PtgElfColSV",f:$ke},16:{n:"PtgElfRadicalLel",f:qke},25:{n:"PtgList",f:Zke},29:{n:"PtgSxName",f:eBe},255:{}},lBe={0:{n:"PtgAttrNoop",f:sBe},1:{n:"PtgAttrSemi",f:hke},2:{n:"PtgAttrIf",f:Ake},4:{n:"PtgAttrChoose",f:uke},8:{n:"PtgAttrGoto",f:dke},16:{n:"PtgAttrSum",f:Eke},32:{n:"PtgAttrBaxcel",f:EH},33:{n:"PtgAttrBaxcel",f:EH},64:{n:"PtgAttrSpace",f:mke},65:{n:"PtgAttrSpaceSemi",f:pke},128:{n:"PtgAttrIfError",f:fke},255:{}};function l2(e,t,r,n){if(n.biff<8)return el(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Ike(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=jke(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(el(e,t)),s}function c2(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=CH[s]||CH[iBe[s]],(s===24||s===25)&&(a=(s===24?oBe:lBe)[e[e.l+1]]),!a||!a.f?el(e,t):i.push([a.n,a.f(e,t,r)]);return i}function cBe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var uBe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dBe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Qte(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function _H(e,t,r){var n=Qte(e,t,r);return n=="#REF"?n:dBe(n,r)}function Ho(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",y=0,C=e[0].length;y<C;++y){var S=e[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=_s(" ",e[0][v][1][1]);break;case 1:b=_s("\r",e[0][v][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+b,v=-1}o.push(u+uBe[S[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=_y(S[1][1],i,a),o.push(Sy(d,s));break;case"PtgRefN":d=r?_y(S[1][1],r,a):S[1][1],o.push(Sy(d,s));break;case"PtgRef3d":f=S[1][1],d=_y(S[1][2],i,a),g=_H(n,f,a),o.push(g+"!"+Sy(d,s));break;case"PtgFunc":case"PtgFuncVar":var I=S[1][0],N=S[1][1];I||(I=0),I&=127;var B=I==0?[]:o.slice(-I);o.length-=I,N==="User"&&(N=B.shift()),o.push(N+"("+B.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=eH(S[1][1],r?{s:r}:i,a),o.push(pT(p,a));break;case"PtgArea":p=eH(S[1][1],i,a),o.push(pT(p,a));break;case"PtgArea3d":f=S[1][1],p=S[1][2],g=_H(n,f,a),o.push(g+"!"+pT(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=S[1][2];var w=(n.names||[])[h-1]||(n[0]||[])[h],_=w?w.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!a.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var F=S[1][1];h=S[1][2];var U;if(a.biff<=5)F<0&&(F=-F),n[F]&&(U=n[F][h]);else{var D="";if(((n[F]||[])[0]||[])[0]==14849||(((n[F]||[])[0]||[])[0]==1025?n[F][h]&&n[F][h].itab>0&&(D=n.SheetNames[n[F][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[F]&&n[F][h])D+=n[F][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var k=(Qte(n,F,a)||"").split(";;");k[h-1]?D=k[h-1]:D+="SH33TJSERRX"}o.push(D);break}U||(U={Name:"SH33TJSERRY"}),o.push(U.Name);break;case"PtgParen":var L="(",R=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:L=_s(" ",e[0][v][1][1])+L;break;case 3:L=_s("\r",e[0][v][1][1])+L;break;case 4:R=_s(" ",e[0][v][1][1])+R;break;case 5:R=_s("\r",e[0][v][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(L+o.pop()+R);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[Ur(d)]){var V=n.sharedf[Ur(d)];o.push(Ho(V,i,X,n,a))}else{var Z=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,X,n,a)),Z=!0;break}Z||o.push(S[1])}break;case"PtgArray":o.push("{"+cBe(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&v>=0&&H.indexOf(e[0][y][0])==-1){S=e[0][v];var z=!0;switch(S[1][0]){case 4:z=!1;case 0:b=_s(" ",S[1][1]);break;case 5:z=!1;case 1:b=_s("\r",S[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((z?b:"")+o.pop()+(z?"":b)),v=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function ABe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],el(e,t-2)];var o=c2(e,i,r);return t!==i+a&&(s=l2(e,t-i-a,o,r)),e.l=n,[o,s]}function fBe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],el(e,t-2)];var o=c2(e,i,r);return t!==i+a&&(s=l2(e,t-i-a,o,r)),e.l=n,[o,s]}function hBe(e,t,r,n){var a=e.l+t,s=c2(e,n,r),i;return a!==e.l&&(i=l2(e,a-e.l,s,r)),[s,i]}function mBe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=c2(e,s,r);return s==65535?[[],el(e,t-2)]:(t!==s+2&&(a=l2(e,n-s-2,i,r)),[i,a])}function pBe(e){var t;if(Mf(e,e.l+6)!==65535)return[Xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function gBe(e){if(e==null){var t=yt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return qp(e);return qp(0)}function yT(e,t,r){var n=e.l+t,a=KA(e);r.biff==2&&++e.l;var s=pBe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=fBe(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function vBe(e,t,r,n,a){var s=Xp(t,r,a),i=gBe(e.v),o=yt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=yt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ki([s,i,o,u]);return f}function e4(e,t,r){var n=e.read_shift(4),a=c2(e,n,r),s=e.read_shift(4),i=s>0?l2(e,s,a,r):null;return[a,i]}var xBe=e4,t4=e4,bBe=e4,yBe=e4,wBe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Hte={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},EBe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function SH(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function CBe(e){var t="of:="+e.replace(bR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function wT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function _Be(e){return e.replace(/\./,"!")}var ky={},lx={},By=typeof Map<"u";function ER(e,t,r){var n=0,a=e.length;if(r){if(By?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=By?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(By?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function r4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Aw(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=DS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Bp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ym(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Kf(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Vte(e,t,r,n,a,s){try{n.cellNF&&(e.z=Dr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Dr[t]==null&&Kf(wCe[t]||"General",t),e.t==="e")e.w=e.w||yh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=sw(e.v);else if(e.t==="d"){var i=Ni(e.v);(i|0)===i?e.w=i.toString(10):e.w=sw(i)}else{if(e.v===void 0)return"";e.w=Gp(e.v,lx)}else e.t==="d"?e.w=Fu(t,Ni(e.v),lx):e.w=Fu(t,e.v,lx)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=OS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=OS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function SBe(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function NBe(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var kBe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,BBe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,TBe=/<(?:\w:)?hyperlink [^>]*>/mg,jBe=/"(\w*:\w*)"/,IBe=/<(?:\w:)?col\b[^>]*[\/]?>/g,FBe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,OBe=/<(?:\w:)?pageMargins[^>]*\/>/g,zte=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,DBe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,RBe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function PBe(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(BBe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(zte);h?CR(h[0],o,a,r):(h=u.match(DBe))&&MBe(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(jBe);g&&NBe(o,g[1])}var v=u.match(RBe);v&&v[1]&&JBe(v[1],a);var b=[];if(t.cellStyles){var y=u.match(IBe);y&&KBe(b,y)}f&&tTe(f[1],o,t,l,s,i);var C=d.match(FBe);C&&(o["!autofilter"]=WBe(C[0]));var S=[],I=d.match(kBe);if(I)for(p=0;p!=I.length;++p)S[p]=Hn(I[p].slice(I[p].indexOf('"')+1));var N=d.match(TBe);N&&zBe(o,N,n);var B=d.match(OBe);if(B&&(o["!margins"]=$Be($r(B[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=nn(l)),t.sheetRows>0&&o["!ref"]){var w=Hn(o["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=nn(w))}return b.length>0&&(o["!cols"]=b),S.length>0&&(o["!merges"]=S),o}function LBe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function CR(e,t,r,n){var a=$r(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ca(a.codeName)))}function MBe(e,t,r,n,a){CR(e.slice(0,e.indexOf(">")),r,n,a)}function UBe(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=BA(va(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Kt("outlinePr",null,u)}!s&&!o||(a[a.length]=Kt("sheetPr",o,i))}var QBe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],HBe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function VBe(e){var t={sheet:1};return QBe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),HBe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=gR(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function zBe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$r(Ca(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Hn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Ur({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function $Be(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function GBe(e){return Bp(e),Kt("pageMargins",null,e)}function KBe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$r(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,vR(a.width)),cm(a);s<=i;)e[s++]=Ha(a)}}function qBe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,r4(a,n)));return r[r.length]="</cols>",r.join("")}function WBe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function XBe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Jl(a);i.s.r==i.e.r&&(i.e.r=Jl(t["!ref"]).e.r,a=nn(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var YBe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function JBe(e,t){t.Views||(t.Views=[{}]),(e.match(YBe)||[]).forEach(function(r,n){var a=$r(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function ZBe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function eTe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=yh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=Ni(Qa(e.v)))),typeof e.z>"u"&&(e.z=Dr[14]);break;default:a=e.v;break}var o=go("v",va(a)),l={r:t},u=ym(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=go("v",""+ER(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Kt("f",va(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Kt("c",o,l)}var tTe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=iw("v"),i=iw("f");return function(l,u,d,f,h,p){for(var g=0,v="",b=[],y=[],C=0,S=0,I=0,N="",B,w,_=0,F=0,U,D,k=0,L=0,R=Array.isArray(p.CellXf),X,V=[],Z=[],H=Array.isArray(u),z=[],q={},re=!1,P=!!d.sheetStubs,K=l.split(t),Y=0,te=K.length;Y!=te;++Y){v=K[Y].trim();var ie=v.length;if(ie!==0){var Ae=0;e:for(g=0;g<ie;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(w=$r(v.slice(Ae,g),!0),_=w.r!=null?parseInt(w.r,10):_+1,F=-1,d.sheetRows&&d.sheetRows<_)continue;q={},re=!1,w.ht&&(re=!0,q.hpt=parseFloat(w.ht),q.hpx=Bx(q.hpt)),w.hidden=="1"&&(re=!0,q.hidden=!0),w.outlineLevel!=null&&(re=!0,q.level=+w.outlineLevel),re&&(z[_-1]=q)}break;case"<":Ae=g;break}if(Ae>=g)break;if(w=$r(v.slice(Ae,g),!0),_=w.r!=null?parseInt(w.r,10):_+1,F=-1,!(d.sheetRows&&d.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),d&&d.cellStyles&&(q={},re=!1,w.ht&&(re=!0,q.hpt=parseFloat(w.ht),q.hpx=Bx(q.hpt)),w.hidden=="1"&&(re=!0,q.hidden=!0),w.outlineLevel!=null&&(re=!0,q.level=+w.outlineLevel),re&&(z[_-1]=q)),b=v.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(v=b[g].trim(),v.length!==0){if(y=v.match(r),C=g,S=0,I=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,y!=null&&y.length===2){for(C=0,N=y[1],S=0;S!=N.length&&!((I=N.charCodeAt(S)-64)<1||I>26);++S)C=26*C+I;--C,F=C}else++F;for(S=0;S!=v.length&&v.charCodeAt(S)!==62;++S);if(++S,w=$r(v.slice(0,S),!0),w.r||(w.r=Ur({r:_-1,c:F})),N=v.slice(S),B={t:""},(y=N.match(s))!=null&&y[1]!==""&&(B.v=Qn(y[1])),d.cellFormula){if((y=N.match(i))!=null&&y[1]!==""){if(B.f=Qn(Ca(y[1])).replace(/\r\n/g,`
`),d.xlfn||(B.f=wH(B.f)),y[0].indexOf('t="array"')>-1)B.F=(N.match(a)||[])[1],B.F.indexOf(":")>-1&&V.push([Hn(B.F),B.F]);else if(y[0].indexOf('t="shared"')>-1){D=$r(y[0]);var ce=Qn(Ca(y[1]));d.xlfn||(ce=wH(ce)),Z[parseInt(D.si,10)]=[D,ce,w.r]}}else(y=N.match(/<f[^>]*\/>/))&&(D=$r(y[0]),Z[D.si]&&(B.f=Y4e(Z[D.si][1],Z[D.si][2],w.r)));var pe=os(w.r);for(S=0;S<V.length;++S)pe.r>=V[S][0].s.r&&pe.r<=V[S][0].e.r&&pe.c>=V[S][0].s.c&&pe.c<=V[S][0].e.c&&(B.F=V[S][1])}if(w.t==null&&B.v===void 0)if(B.f||B.F)B.v=0,B.t="n";else if(P)B.t="z";else continue;else B.t=w.t||"n";switch(f.s.c>F&&(f.s.c=F),f.e.c<F&&(f.e.c=F),B.t){case"n":if(B.v==""||B.v==null){if(!P)continue;B.t="z"}else B.v=parseFloat(B.v);break;case"s":if(typeof B.v>"u"){if(!P)continue;B.t="z"}else U=ky[parseInt(B.v,10)],B.v=U.t,B.r=U.r,d.cellHTML&&(B.h=U.h);break;case"str":B.t="s",B.v=B.v!=null?Ca(B.v):"",d.cellHTML&&(B.h=rR(B.v));break;case"inlineStr":y=N.match(n),B.t="s",y!=null&&(U=pR(y[1]))?(B.v=U.t,d.cellHTML&&(B.h=U.h)):B.v="";break;case"b":B.v=Ma(B.v);break;case"d":d.cellDates?B.v=Qa(B.v,1):(B.v=Ni(Qa(B.v,1)),B.t="n");break;case"e":(!d||d.cellText!==!1)&&(B.w=B.v),B.v=Gee[B.v];break}if(k=L=0,X=null,R&&w.s!==void 0&&(X=p.CellXf[w.s],X!=null&&(X.numFmtId!=null&&(k=X.numFmtId),d.cellStyles&&X.fillId!=null&&(L=X.fillId))),Vte(B,k,L,d,h,p),d.cellDates&&R&&B.t=="n"&&u1(Dr[k])&&(B.t="d",B.v=JN(B.v)),w.cm&&d.xlmeta){var Ie=(d.xlmeta.Cell||[])[+w.cm-1];Ie&&Ie.type=="XLDAPR"&&(B.D=!0)}if(H){var ne=os(w.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=B}else u[w.r]=B}}}}z.length>0&&(u["!rows"]=z)}}();function rTe(e,t,r,n){var a=[],s=[],i=Hn(e["!ref"]),o="",l,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),v={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Ws(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var C=g?(e[f]||[])[h]:e[l];C!==void 0&&(o=eTe(C,l,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(v={r:u},p&&p[f]&&(b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=fw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),a[a.length]=Kt("row",s.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=fw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level),a[a.length]=Kt("row","",v));return a.join("")}function $te(e,t,r,n){var a=[Ys,Kt("worksheet",null,{xmlns:Ag[0],"xmlns:r":_i.r})],s=r.SheetNames[e],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),l["!comments"]=[];var f=[];UBe(l,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=ZBe(l,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=qBe(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=rTe(l,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=VBe(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=XBe(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=LBe(l["!merges"]));var h=-1,p,g=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(g=ma(n,-1,va(v[1].Target).replace(/#.*$/,""),En.HLINK),p["r:id"]="rId"+g),(h=v[1].Target.indexOf("#"))>-1&&(p.location=va(v[1].Target.slice(h+1))),v[1].Tooltip&&(p.tooltip=va(v[1].Tooltip)),a[a.length]=Kt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=GBe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=go("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ma(n,-1,"../drawings/drawing"+(e+1)+".xml",En.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=f),l["!comments"].length>0&&(g=ma(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",En.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function nTe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function aTe(e,t,r){var n=yt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=fw(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var v=n.l;return n.l=l,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function sTe(e,t,r,n){var a=aTe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var iTe=pg,oTe=f1;function lTe(){}function cTe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=A_e(e),r}function uTe(e,t,r){r==null&&(r=yt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return jS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Qee(e,r),r.slice(0,r.l)}function dTe(e){var t=Ru(e);return[t]}function ATe(e,t,r){return r==null&&(r=yt(8)),fg(t,r)}function fTe(e){var t=hg(e);return[t]}function hTe(e,t,r){return r==null&&(r=yt(4)),mg(t,r)}function mTe(e){var t=Ru(e),r=e.read_shift(1);return[t,r,"b"]}function pTe(e,t,r){return r==null&&(r=yt(9)),fg(t,r),r.write_shift(1,e.v?1:0),r}function gTe(e){var t=hg(e),r=e.read_shift(1);return[t,r,"b"]}function vTe(e,t,r){return r==null&&(r=yt(5)),mg(t,r),r.write_shift(1,e.v?1:0),r}function xTe(e){var t=Ru(e),r=e.read_shift(1);return[t,r,"e"]}function bTe(e,t,r){return r==null&&(r=yt(9)),fg(t,r),r.write_shift(1,e.v),r}function yTe(e){var t=hg(e),r=e.read_shift(1);return[t,r,"e"]}function wTe(e,t,r){return r==null&&(r=yt(8)),mg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function ETe(e){var t=Ru(e),r=e.read_shift(4);return[t,r,"s"]}function CTe(e,t,r){return r==null&&(r=yt(12)),fg(t,r),r.write_shift(4,t.v),r}function _Te(e){var t=hg(e),r=e.read_shift(4);return[t,r,"s"]}function STe(e,t,r){return r==null&&(r=yt(8)),mg(t,r),r.write_shift(4,t.v),r}function NTe(e){var t=Ru(e),r=Xo(e);return[t,r,"n"]}function kTe(e,t,r){return r==null&&(r=yt(16)),fg(t,r),qp(e.v,r),r}function Gte(e){var t=hg(e),r=Xo(e);return[t,r,"n"]}function BTe(e,t,r){return r==null&&(r=yt(12)),mg(t,r),qp(e.v,r),r}function TTe(e){var t=Ru(e),r=dR(e);return[t,r,"n"]}function jTe(e,t,r){return r==null&&(r=yt(12)),fg(t,r),Hee(e.v,r),r}function ITe(e){var t=hg(e),r=dR(e);return[t,r,"n"]}function FTe(e,t,r){return r==null&&(r=yt(8)),mg(t,r),Hee(e.v,r),r}function OTe(e){var t=Ru(e),r=lR(e);return[t,r,"is"]}function DTe(e){var t=Ru(e),r=Jo(e);return[t,r,"str"]}function RTe(e,t,r){return r==null&&(r=yt(12+4*e.v.length)),fg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function PTe(e){var t=hg(e),r=Jo(e);return[t,r,"str"]}function LTe(e,t,r){return r==null&&(r=yt(8+4*e.v.length)),mg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function MTe(e,t,r){var n=e.l+t,a=Ru(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=t4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function UTe(e,t,r){var n=e.l+t,a=Ru(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=t4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function QTe(e,t,r){var n=e.l+t,a=Ru(e);a.r=r["!row"];var s=Xo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=t4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function HTe(e,t,r){var n=e.l+t,a=Ru(e);a.r=r["!row"];var s=Jo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=t4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}var VTe=pg,zTe=f1;function $Te(e,t){return t==null&&(t=yt(4)),t.write_shift(4,e),t}function GTe(e,t){var r=e.l+t,n=pg(e),a=cR(e),s=Jo(e),i=Jo(e),o=Jo(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function KTe(e,t){var r=yt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));f1({s:os(e[0]),e:os(e[0])},r),uR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Wi(a||"",r),Wi(e[1].Tooltip||"",r),Wi("",r),r.slice(0,r.l)}function qTe(){}function WTe(e,t,r){var n=e.l+t,a=Vee(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=xBe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function XTe(e,t,r){var n=e.l+t,a=pg(e),s=[a];if(r.cellFormula){var i=yBe(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function YTe(e,t,r){r==null&&(r=yt(18));var n=r4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Kte=["left","right","top","bottom","header","footer"];function JTe(e){var t={};return Kte.forEach(function(r){t[r]=Xo(e)}),t}function ZTe(e,t){return t==null&&(t=yt(48)),Bp(e),Kte.forEach(function(r){qp(e[r],t)}),t}function e3e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function t3e(e,t,r){r==null&&(r=yt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function r3e(e){var t=yt(24);return t.write_shift(4,4),t.write_shift(4,1),f1(e,t),t}function n3e(e,t){return t==null&&(t=yt(66)),t.write_shift(2,e.password?gR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function a3e(){}function s3e(){}function i3e(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,b,y,C,S,I,N,B=[];o.biff=12,o["!row"]=0;var w=0,_=!1,F=[],U={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=U,D.arrayf=F,D.SheetNames=a.SheetNames||a.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var k=0;k<a.Names.length;++k)D[0][k+1]=a.Names[k];var L=[],R=[],X=!1;hw[16]={n:"BrtShortReal",f:Gte};var V;if(bh(e,function(z,q,re){if(!h)switch(re){case 148:u=z;break;case 0:p=z,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),I=Ws(b=p.r),o["!row"]=p.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=Bx(z.hpt)),R[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:z[2]},z[2]){case"n":g.v=z[1];break;case"s":S=ky[z[1]],g.v=S.t,g.r=S.r;break;case"b":g.v=!!z[1];break;case"e":g.v=z[1],o.cellText!==!1&&(g.w=yh[g.v]);break;case"str":g.t="s",g.v=z[1];break;case"is":g.t="s",g.v=z[1].t;break}if((v=i.CellXf[z[0].iStyleRef])&&Vte(g,v.numFmtId,null,o,s,i),y=z[0].c==-1?y+1:z[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[is(y)+I]=g,o.cellFormula){for(_=!1,w=0;w<F.length;++w){var P=F[w];p.r>=P[0].s.r&&p.r<=P[0].e.r&&y>=P[0].s.c&&y<=P[0].e.c&&(g.F=nn(P[0]),_=!0)}!_&&z.length>3&&(g.f=z[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&v&&g.t=="n"&&u1(Dr[v.numFmtId])){var K=Ap(g.v);K&&(g.t="d",g.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=z[0].c==-1?y+1:z[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[is(y)+I]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:B.push(z);break;case 49:V=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var Y=n["!id"][z.relId];for(Y?(z.Target=Y.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=Y):z.relId==""&&(z.Target="#"+z.loc),b=z.rfx.s.r;b<=z.rfx.e.r;++b)for(y=z.rfx.s.c;y<=z.rfx.e.c;++y)o.dense?(l[b]||(l[b]=[]),l[b][y]||(l[b][y]={t:"z",v:void 0}),l[b][y].l=z):(C=Ur({c:y,r:b}),l[C]||(l[C]={t:"z",v:void 0}),l[C].l=z);break;case 426:if(!o.cellFormula)break;F.push(z),N=o.dense?l[b][y]:l[is(y)+I],N.f=Ho(z[1],d,{r:p.r,c:y},D,o),N.F=nn(z[0]);break;case 427:if(!o.cellFormula)break;U[Ur(z[0].s)]=z[1],N=o.dense?l[b][y]:l[is(y)+I],N.f=Ho(z[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)L[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},X||(X=!0,vR(z.w/256)),cm(L[z.e+1]);break;case 161:l["!autofilter"]={ref:nn(z)};break;case 476:l["!margins"]=z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),z.name&&(a.Sheets[r].CodeName=z.name),(z.above||z.left)&&(l["!outline"]={above:z.above,left:z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!q.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=nn(u||d)),o.sheetRows&&l["!ref"]){var Z=Hn(l["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>d.e.r&&(Z.e.r=d.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>d.e.c&&(Z.e.c=d.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nn(Z))}return B.length>0&&(l["!merges"]=B),L.length>0&&(l["!cols"]=L),R.length>0&&(l["!rows"]=R),l}function o3e(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Dr[14],t.v=Ni(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=ym(a.cellXfs,t,a),t.l&&s["!links"].push([Ur(l),t.l]),t.c&&s["!comments"].push([Ur(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=ER(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?Rt(e,18,STe(t,l)):Rt(e,7,CTe(t,l))):(l.t="str",i?Rt(e,17,LTe(t,l)):Rt(e,6,RTe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,FTe(t,l)):Rt(e,2,jTe(t,l)):i?Rt(e,16,BTe(t,l)):Rt(e,5,kTe(t,l)),!0;case"b":return l.t="b",i?Rt(e,15,vTe(t,l)):Rt(e,4,pTe(t,l)),!0;case"e":return l.t="e",i?Rt(e,14,wTe(t,l)):Rt(e,3,bTe(t,l)),!0}return i?Rt(e,12,hTe(t,l)):Rt(e,1,ATe(t,l)),!0}function l3e(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var l=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Ws(d),sTe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=is(h)),s=o[h]+i;var p=l?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=o3e(e,p,d,h,n,t,f)}}Rt(e,146)}function c3e(e,t){!t||!t["!merges"]||(Rt(e,177,$Te(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,zTe(r))}),Rt(e,178))}function u3e(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,YTe(n,r))}),Rt(e,391))}function d3e(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,r3e(Hn(t["!ref"]))),Rt(e,650))}function A3e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ma(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Rt(e,494,KTe(n,a))}}),delete t["!links"]}function f3e(e,t,r,n){if(t["!comments"].length>0){var a=ma(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Rt(e,551,uR("rId"+a)),t["!legacy"]=a}}function h3e(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Jl(s);o.s.r==o.e.r&&(o.e.r=Jl(t["!ref"]).e.r,s=nn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,f1(Hn(s))),Rt(e,162)}}function m3e(e,t,r){Rt(e,133),Rt(e,137,t3e(t,r)),Rt(e,138),Rt(e,134)}function p3e(e,t){t["!protect"]&&Rt(e,535,n3e(t["!protect"]))}function g3e(e,t,r,n){var a=Xl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Hn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,uTe(o,i["!outline"])),Rt(a,148,oTe(l)),m3e(a,i,r.Workbook),u3e(a,i),l3e(a,i,e,t),p3e(a,i),h3e(a,i,r,e),c3e(a,i),A3e(a,i,n),i["!margins"]&&Rt(a,476,ZTe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&d3e(a,i),f3e(a,i,e,n),Rt(a,130),a.end()}function v3e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function x3e(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=v3e(f);d.s.r=d.s.c=0,d.e.c=o,u=is(o),h[0].forEach(function(p,g){i[u+Ws(g)]={t:"n",v:p,z:h[1]},l=g}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=nn(d)),i}function b3e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(zte);return o&&CR(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function y3e(e,t){e.l+=10;var r=Jo(e);return{name:r}}function w3e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return bh(e,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var _R=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],E3e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],C3e=[],_3e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function NH(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function kH(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function qte(e){kH(e.WBProps,_R),kH(e.CalcPr,_3e),NH(e.WBView,E3e),NH(e.Sheets,C3e),lx.date1904=Ma(e.WBProps.date1904)}function S3e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var N3e="][*?/\\".split("");function Wte(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return N3e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function k3e(e,t,r){e.forEach(function(n,a){Wte(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function B3e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];k3e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)SBe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var T3e=/<\w+:workbook/;function j3e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(rl,function(l,u){var d=$r(l);switch(GA(d[0])){case"<?xml":break;case"<workbook":l.match(T3e)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":_R.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ca(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ca(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ca(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=Qn(Ca(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Ag.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return qte(r),r}function Xte(e){var t=[Ys];t[t.length]=Kt("workbook",null,{xmlns:Ag[0],"xmlns:r":_i.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(_R.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:va(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Kt("definedName",va(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function I3e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=vF(e),r.name=Jo(e),r}function F3e(e,t){return t||(t=yt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),uR(e.strRelID,t),Wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function O3e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Jo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function D3e(e,t){t||(t=yt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Qee(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function R3e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function P3e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=f_e(e),i=bBe(e,0,r),o=cR(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function L3e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],hw[16]={n:"BrtFRTArchID$",f:R3e},bh(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=Ho(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),qte(r),r.Names=s,r.supbooks=i,r}function M3e(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,F3e(a))}Rt(e,144)}function U3e(e,t){t||(t=yt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wi("SheetJS",t),Wi(CS.version,t),Wi(CS.version,t),Wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function Q3e(e,t){t||(t=yt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function H3e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,Q3e(a)),Rt(e,136))}}function V3e(e,t){var r=Xl();return Rt(r,131),Rt(r,128,U3e()),Rt(r,153,D3e(e.Workbook&&e.Workbook.WBProps||null)),H3e(r,e),M3e(r,e),Rt(r,132),r.end()}function z3e(e,t,r){return t.slice(-4)===".bin"?L3e(e,r):j3e(e,r)}function $3e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?i3e(e,n,r,a,s,i,o):PBe(e,n,r,a,s,i,o)}function G3e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?w3e(e,n,r,a,s):b3e(e,n,r,a,s)}function K3e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?W4e():X4e()}function q3e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?K4e():q4e()}function W3e(e,t,r,n){return t.slice(-4)===".bin"?zNe(e,r,n):INe(e,r,n)}function X3e(e,t,r){return Tte(e,r)}function Y3e(e,t,r){return t.slice(-4)===".bin"?Y5e(e,r):q5e(e,r)}function J3e(e,t,r){return t.slice(-4)===".bin"?H4e(e,r):F4e(e,r)}function Z3e(e,t,r){return t.slice(-4)===".bin"?T4e(e):k4e(e)}function eje(e,t,r,n){return r.slice(-4)===".bin"?j4e(e,t,r,n):void 0}function tje(e,t,r){return t.slice(-4)===".bin"?_4e(e,t,r):N4e(e,t,r)}function rje(e,t,r){return(t.slice(-4)===".bin"?V3e:Xte)(e)}function nje(e,t,r,n,a){return(t.slice(-4)===".bin"?g3e:$te)(e,r,n,a)}function aje(e,t,r){return(t.slice(-4)===".bin"?e4e:kte)(e,r)}function sje(e,t,r){return(t.slice(-4)===".bin"?eNe:bte)(e,r)}function ije(e,t,r){return(t.slice(-4)===".bin"?V4e:Fte)(e)}function oje(e){return(e.slice(-4)===".bin"?S4e:jte)()}var Yte=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Jte=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ud(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Yte),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(Jte),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function lje(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Yte),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Jte),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Ty;function cje(e,t){var r=Ty[e]||Qn(e);return r==="General"?Gp(t):Fu(r,t)}function uje(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function dje(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||yh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=sw(e.v):e.w=Gp(e.v):e.w=cje(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Ty[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&u1(n)){var a=Ap(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Aje(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=CNe[n.Pattern]||n.Pattern)}e[t.ID]=t}function fje(e,t,r,n,a,s,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=$Q(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Gee[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=$Q(t||e));break}if(dje(n,d,u),u.cellFormula!==!1)if(n.Formula){var v=Qn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=ox(v,a),delete n.Formula,n.ArrayRange=="RC"?n.F=ox("RC:RC",a):n.ArrayRange&&(n.F=ox(n.ArrayRange,a),l.push([Hn(n.F),n.F]))}else for(g=0;g<l.length;++g)a.r>=l[g][0].s.r&&a.r<=l[g][0].e.r&&a.c>=l[g][0].s.c&&a.c<=l[g][0].e.c&&(n.F=l[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function hje(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ET(e,t){var r=t||{};d1();var n=Jb(nR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ca(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",kx.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return Zje(n,r);Ty={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},v={},b=ud('<Data ss:Type="String">'),y=0,C=0,S=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},B={},w="",_=0,F=[],U={},D={},k=0,L=[],R=[],X={},V=[],Z,H=!1,z=[],q=[],re={},P=0,K=0,Y={Sheets:[],WBProps:{date1904:!1}},te={};lw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=lw.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?fje(n.slice(y,o.index),w,b,l[l.length-1][0]=="comment"?X:g,{c:C,r:S},N,V[C],v,z,r):(w="",b=ud(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(R.length>0&&(g.c=R),(!r.sheetRows||r.sheetRows>S)&&g.v!==void 0&&(r.dense?(h[S]||(h[S]=[]),h[S][C]=g):h[is(C)+Ws(S)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(P=C+(parseInt(g.MergeAcross,10)|0),K=S+(parseInt(g.MergeDown,10)|0),F.push({s:{c:C,r:S},e:{c:P,r:K}})),!r.sheetStubs)g.MergeAcross?C=P+1:++C;else if(g.MergeAcross||g.MergeDown){for(var Ae=C;Ae<=P;++Ae)for(var oe=S;oe<=K;++oe)(Ae>C||oe>S)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][Ae]={t:"z"}):h[is(Ae)+Ws(oe)]={t:"z"});C=P+1}else++C;else g=lje(o[0]),g.Index&&(C=+g.Index-1),C<I.s.c&&(I.s.c=C),C>I.e.c&&(I.e.c=C),o[0].slice(-2)==="/>"&&++C,R=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<I.s.r&&(I.s.r=S),S>I.e.r&&(I.e.r=S),o[0].slice(-2)==="/>"&&(v=ud(o[0]),v.Index&&(S=+v.Index-1)),C=0,++S):(v=ud(o[0]),v.Index&&(S=+v.Index-1),re={},(v.AutoFitHeight=="0"||v.Height)&&(re.hpx=parseInt(v.Height,10),re.hpt=fw(re.hpx),q[S]=re),v.Hidden=="1"&&(re.hidden=!0,q[S]=re));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(h["!ref"]=nn(I),r.sheetRows&&r.sheetRows<=I.e.r&&(h["!fullref"]=h["!ref"],I.e.r=r.sheetRows-1,h["!ref"]=nn(I))),F.length&&(h["!merges"]=F),V.length>0&&(h["!cols"]=V),q.length>0&&(h["!rows"]=q),d[p]=h}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=C=0,l.push([o[3],!1]),u=ud(o[0]),p=Qn(u.Name),h=r.dense?[]:{},F=[],z=[],q=[],te={name:p,Hidden:0},Y.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),V=[],H=!1}break;case"style":o[1]==="/"?Aje(N,B,r):B=ud(o[0]);break;case"numberformat":B.nf=Qn(ud(o[0]).Format||"General"),Ty[B.nf]&&(B.nf=Ty[B.nf]);for(var ce=0;ce!=392&&Dr[ce]!=B.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Dr[ce]==null){Kf(B.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(Z=ud(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!H&&Z.wpx>10){H=!0,$o=Ste;for(var pe=0;pe<V.length;++pe)V[pe]&&cm(V[pe])}H&&cm(Z),V[Z.Index-1||V.length]=Z;for(var Ie=0;Ie<+Z.Span;++Ie)V[V.length]=Ha(Z);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var ne=$r(o[0]),Se={Name:ne.Name,Ref:ox(ne.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Se.Sheet=Y.Sheets.length-1),Y.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;B.Interior=ud(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?L_e(U,ie,n.slice(k,o.index)):k=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));hje(X),R.push(X)}else l.push([o[3],!1]),u=ud(o[0]),X={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=ud(o[0]);h["!autofilter"]={ref:ox(De.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return FH(n,r);var _e=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(k,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else k=o.index+o[0].length;break;case"header":h["!margins"]||Bp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].header=+$r(o[0]).Margin);break;case"footer":h["!margins"]||Bp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].footer=+$r(o[0]).Margin);break;case"pagemargins":var he=$r(o[0]);h["!margins"]||Bp(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?uje(D,ie,L,n.slice(k,o.index)):(L=o,k=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=f,je.Workbook=Y,je.SSF=Ha(Dr),je.Props=U,je.Custprops=D,je}function _F(e,t){switch(NR(t=t||{}),t.type||"base64"){case"base64":return ET(Dc(e),t);case"binary":case"buffer":case"file":return ET(e,t);case"array":return ET(xm(e),t)}}function mje(e,t){var r=[];return e.Props&&r.push(M_e(e.Props,t)),e.Custprops&&r.push(U_e(e.Props,e.Custprops)),r.join("")}function pje(){return""}function gje(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":va(Dr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function Zte(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+yR(e.Ref,{r:0,c:0})})}function vje(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Zte(a)))}return Kt("Names",r.join(""))}function xje(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Zte(o)))}return s.join("")}function bje(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(go("ProtectContents","True")),e["!protect"].objects&&a.push(go("ProtectObjects","True")),e["!protect"].scenarios&&a.push(go("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(go("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(go("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Cc.x})}function yje(e){return e.map(function(t){var r=HCe(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function wje(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+va(yR(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=os(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=va(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=va(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=yh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Dr[14]);break;case"s":f="String",h=QCe(e.v||"");break}var p=ym(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(v+=yje(e.c)),Kt("Cell",v,o)}function Eje(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Bx(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Cje(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){cm(b);var C=!!b.width,S=r4(y,b),I={"ss:Index":y+1};C&&(I["ss:Width"]=dw(S.width)),b.hidden&&(I["ss:Hidden"]="1"),o.push(Kt("Column",null,I))});for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[Eje(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Ur(p),v=l?(e[u]||[])[f]:e[g];d.push(wje(v,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function _je(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?xje(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?Cje(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(bje(s,t,e,r)),n.join("")}function Sje(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Dr)),e.SSF&&(d1(),WN(e.SSF),t.revssf=YN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ym(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(mje(e,t)),r.push(pje()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",_je(n,t,e),{"ss:Name":va(e.SheetNames[n])}));return r[2]=gje(e,t),r[3]=vje(e),Ys+Kt("Workbook",r.join(""),{xmlns:Cc.ss,"xmlns:o":Cc.o,"xmlns:x":Cc.x,"xmlns:ss":Cc.ss,"xmlns:dt":Cc.dt,"xmlns:html":Cc.html})}function Nje(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=v_e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=x_e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var kje=[60,1084,2066,2165,2175];function Bje(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=Mf(r,r.l),u=SF[l],d=0;u!=null&&kje.indexOf(l)>-1;)s=Mf(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=SF[l=Mf(r,r.l)];var f=Ki(i);po(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function hA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Dr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||yh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=sw(e.v):e.w=Gp(e.v):e.w=Fu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&u1(Dr[n]||String(n))){var a=Ap(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function aC(e,t,r){return{v:e,ixfe:t,t:r}}function Tje(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,l=[],u="",d={},f,h="",p,g,v,b,y={},C=[],S,I,N=[],B=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},F=function(Qt){return Qt<8?Sp[Qt]:Qt<64&&B[Qt-8]||Sp[Qt]},U=function(Qt,bt,Nr){var rr=bt.XF.data;if(!(!rr||!rr.patternType||!Nr||!Nr.cellStyles)){bt.s={},bt.s.patternType=rr.patternType;var an;(an=uw(F(rr.icvFore)))&&(bt.s.fgColor={rgb:an}),(an=uw(F(rr.icvBack)))&&(bt.s.bgColor={rgb:an})}},D=function(Qt,bt,Nr){if(!(re>1)&&!(Nr.sheetRows&&Qt.r>=Nr.sheetRows)){if(Nr.cellStyles&&bt.XF&&bt.XF.data&&U(Qt,bt,Nr),delete bt.ixfe,delete bt.XF,f=Qt,h=Ur(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Nr.cellFormula&&bt.f){for(var rr=0;rr<C.length;++rr)if(!(C[rr][0].s.c>Qt.c||C[rr][0].s.r>Qt.r)&&!(C[rr][0].e.c<Qt.c||C[rr][0].e.r<Qt.r)){bt.F=nn(C[rr][0]),(C[rr][0].s.c!=Qt.c||C[rr][0].s.r!=Qt.r)&&delete bt.f,bt.f&&(bt.f=""+Ho(C[rr][1],i,Qt,z,k));break}}Nr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=bt):a[h]=bt}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var L,R=[],X=[],V=[],Z=[],H=!1,z=[];z.SheetNames=k.snames,z.sharedf=k.sharedf,z.arrayf=k.arrayf,z.names=[],z.XTI=[];var q=0,re=0,P=0,K=[],Y=[],te;k.codepage=1200,vd(1200);for(var ie=!1;e.l<e.length-1;){var Ae=e.l,oe=e.read_shift(2);if(oe===0&&q===10)break;var ce=e.l===e.length?0:e.read_shift(2),pe=SF[oe];if(pe&&pe.f){if(t.bookSheets&&q===133&&oe!==133)break;if(q=oe,pe.r===2||pe.r==12){var Ie=e.read_shift(2);if(ce-=2,!k.enc&&Ie!==oe&&((Ie&255)<<8|Ie>>8)!==oe)throw new Error("rt mismatch: "+Ie+"!="+oe);pe.r==12&&(e.l+=10,ce-=10)}var ne={};if(oe===10?ne=pe.f(e,ce,k):ne=Bje(oe,pe,e,ce,k),re==0&&[9,521,1033,2057].indexOf(q)===-1)continue;switch(oe){case 34:r.opts.Date1904=w.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=ne;break;case 66:var Se=Number(ne);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}vd(k.codepage=Se),ie=!0;break;case 317:k.rrtabid=ne;break;case 25:k.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:k.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:N.push(ne);break;case 430:z.push([ne]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(ne);break;case 24:case 536:te={Name:ne.Name,Ref:Ho(ne.rgce,i,null,z,k)},ne.itab>0&&(te.Sheet=ne.itab-1),z.names.push(te),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(Y[ne.itab-1]={ref:nn(ne.rgce[0][0][1][2])});break;case 22:k.ExternCount=ne;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(ne),z.XTI=z.XTI.concat(ne);break;case 2196:if(k.biff<8)break;te!=null&&(te.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&k.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,k.snames.push(ne.name);break;case 10:{if(--re)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=nn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(i),i.e.r=De}i.e.r++,i.e.c++}R.length>0&&(a["!merges"]=R),X.length>0&&(a["!objects"]=X),V.length>0&&(a["!cols"]=V),Z.length>0&&(a["!rows"]=Z),w.Sheets.push(_)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),k.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(k.biff=5,ie=!0,vd(k.codepage=28591)),k.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(k.biff=2),re++)break;if(a=t.dense?[]:{},k.biff<8&&!ie&&(ie=!0,vd(k.codepage=t.codepage||1252)),k.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ce,name:u};s[_e.pos]=_e,k.snames.push(u)}else u=(s[Ae]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),R=[],X=[],k.arrayf=C=[],V=[],Z=[],H=!1,_={Hidden:(s[Ae]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[Ur({c:ne.c,r:ne.r})])&&++ne.c,S={ixfe:ne.ixfe,XF:N[ne.ixfe]||{},v:ne.val,t:"n"},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t);break;case 5:case 517:S={ixfe:ne.ixfe,XF:N[ne.ixfe],v:ne.val,t:ne.t},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t);break;case 638:S={ixfe:ne.ixfe,XF:N[ne.ixfe],v:ne.rknum,t:"n"},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t);break;case 189:for(var he=ne.c;he<=ne.C;++he){var je=ne.rkrec[he-ne.c][0];S={ixfe:je,XF:N[je],v:ne.rkrec[he-ne.c][1],t:"n"},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:he,r:ne.r},S,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(S=aC(ne.val,ne.cell.ixfe,ne.tt),S.XF=N[S.ixfe],t.cellFormula){var He=ne.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],ye=He[0][0][1][1],Oe=Ur({r:Xe,c:ye});y[Oe]?S.f=""+Ho(ne.formula,i,ne.cell,z,k):S.F=((t.dense?(a[Xe]||[])[ye]:a[Oe])||{}).F}else S.f=""+Ho(ne.formula,i,ne.cell,z,k)}P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D(ne.cell,S,t),o=ne}break;case 7:case 519:if(o)o.val=ne,S=aC(ne,o.cell.ixfe,"s"),S.XF=N[S.ixfe],t.cellFormula&&(S.f=""+Ho(o.formula,i,o.cell,z,k)),P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D(o.cell,S,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{C.push(ne);var Pe=Ur(ne[0].s);if(p=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Pe],t.cellFormula&&p){if(!o||!Pe||!p)break;p.f=""+Ho(ne[1],i,ne[0],z,k),p.F=nn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Ur(o.cell)]=ne[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Ur(o.cell)],(p||{}).f=""+Ho(ne[0],i,f,z,k)}}break;case 253:S=aC(l[ne.isst].t,ne.ixfe,"s"),l[ne.isst].h&&(S.h=l[ne.isst].h),S.XF=N[S.ixfe],P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:ne.ixfe,XF:N[ne.ixfe],t:"z"},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t));break;case 190:if(t.sheetStubs)for(var qe=ne.c;qe<=ne.C;++qe){var Ze=ne.ixfe[qe-ne.c];S={ixfe:Ze,XF:N[Ze],t:"z"},P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:qe,r:ne.r},S,t)}break;case 214:case 516:case 4:S=aC(ne.val,ne.ixfe,"s"),S.XF=N[S.ixfe],P>0&&(S.z=K[S.ixfe>>8&63]),hA(S,t,r.opts.Date1904),D({c:ne.c,r:ne.r},S,t);break;case 0:case 512:re===1&&(i=ne);break;case 252:l=ne;break;case 1054:if(k.biff==4){K[P++]=ne[1];for(var ot=0;ot<P+163&&Dr[ot]!=ne[1];++ot);ot>=163&&Kf(ne[1],P+163)}else Kf(ne[1],ne[0]);break;case 30:{K[P++]=ne;for(var mt=0;mt<P+163&&Dr[mt]!=ne;++mt);mt>=163&&Kf(ne,P+163)}break;case 229:R=R.concat(ne);break;case 93:X[ne.cmo[0]]=k.lastobj=ne;break;case 438:k.lastobj.TxO=ne;break;case 127:k.lastobj.ImData=ne;break;case 440:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&(p.l=ne[1]);break;case 2048:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;p=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[Ur(ne[0])];var Tt=X[ne[2]];p||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),p=a[ne[0].r][ne[0].c]={t:"z"}):p=a[Ur(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),p.c||(p.c=[]),g={a:ne[1],t:Tt.TxO.t},p.c.push(g)}break;case 2173:g4e(N[ne.ixfe],ne.ext);break;case 125:{if(!k.cellStyles)break;for(;ne.e>=ne.s;)V[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},H||(H=!0,vR(ne.w/256)),cm(V[ne.e+1])}break;case 520:{var Mt={};ne.level!=null&&(Z[ne.r]=Mt,Mt.level=ne.level),ne.hidden&&(Z[ne.r]=Mt,Mt.hidden=!0),ne.hpt&&(Z[ne.r]=Mt,Mt.hpt=ne.hpt,Mt.hpx=Bx(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Bp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=ne;break;case 161:a["!margins"]||Bp(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(w.Views[0].RTL=!0);break;case 146:B=ne;break;case 2198:L=ne;break;case 140:I=ne;break;case 442:u?_.CodeName=ne||_.name:w.WBProps.CodeName=ne||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=js(s).sort(function(Ot,Qt){return Number(Ot)-Number(Qt)}).map(function(Ot){return s[Ot].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(Ot,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Ot}),r.Strings=l,r.SSF=Ha(Dr),k.enc&&(r.Encryption=k.enc),L&&(r.Themes=L),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),z.names.length>0&&(w.Names=z.names),r.Workbook=w,r}var jy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function jje(e,t,r){var n=Er.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=cH(n,xF,jy.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Er.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=cH(i,bF,jy.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Jee(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Ije(e,t){var r=[],n=[],a=[],s=0,i,o=MQ(xF,"n"),l=MQ(bF,"n");if(e.Props)for(i=js(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=js(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)ste.indexOf(a[s][0])>-1||Yee.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Er.utils.cfb_add(t,"/SummaryInformation",uH(n,jy.SI,l,bF)),(r.length||u.length)&&Er.utils.cfb_add(t,"/DocumentSummaryInformation",uH(r,jy.DSI,o,xF,u.length?u:null,jy.UDI))}function ere(e,t){t||(t={}),NR(t),qD(),t.codepage&&KD(t.codepage);var r,n;if(e.FullPaths){if(Er.find(e,"/encryption"))throw new Error("File is password-protected");r=Er.find(e,"!CompObj"),n=Er.find(e,"/Workbook")||Er.find(e,"/Book")}else{switch(t.type){case"base64":e=kc(Dc(e));break;case"binary":e=kc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}po(e,0),n={content:e}}var a,s;if(r&&Nje(r),t.bookProps&&!t.bookSheets)a={};else{var i=pn?"buffer":"array";if(n&&n.content)a=Tje(n.content,t);else if((s=Er.find(e,"PerfectOffice_MAIN"))&&s.content)a=kp.to_workbook(s.content,(t.type=i,t));else if((s=Er.find(e,"NativeContent_MAIN"))&&s.content)a=kp.to_workbook(s.content,(t.type=i,t));else throw(s=Er.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Er.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=$4e(e))}var o={};return e.FullPaths&&jje(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function Fje(e,t){var r=t||{},n=Er.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Er.utils.cfb_add(n,a,tre(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Ije(e,n),r.biff==8&&e.vbaraw&&G4e(n,Er.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var hw={0:{f:nTe},1:{f:dTe},2:{f:TTe},3:{f:xTe},4:{f:mTe},5:{f:NTe},6:{f:DTe},7:{f:ETe},8:{f:HTe},9:{f:QTe},10:{f:MTe},11:{f:UTe},12:{f:fTe},13:{f:ITe},14:{f:yTe},15:{f:gTe},16:{f:Gte},17:{f:PTe},18:{f:_Te},19:{f:lR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:P3e},40:{},42:{},43:{f:DNe},44:{f:FNe},45:{f:LNe},46:{f:UNe},47:{f:MNe},48:{},49:{f:i_e},50:{},51:{f:b4e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:pte},62:{f:OTe},63:{f:B4e},64:{f:a3e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:el,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:e3e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:cTe},148:{f:iTe,p:16},151:{f:qTe},152:{},153:{f:O3e},154:{},155:{},156:{f:I3e},157:{},158:{},159:{T:1,f:X5e},160:{T:-1},161:{T:1,f:pg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:VTe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:v4e},336:{T:-1},337:{f:E4e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:mte},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:WTe},427:{f:XTe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:JTe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lTe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:GTe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:U4e},633:{T:1},634:{T:-1},635:{T:1,f:L4e},636:{T:-1},637:{f:u_e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:y3e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:s3e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},SF={6:{f:yT},10:{f:d0},12:{f:ci},13:{f:ci},14:{f:Qs},15:{f:Qs},16:{f:Xo},17:{f:Qs},18:{f:Qs},19:{f:ci},20:{f:pH},21:{f:pH},23:{f:mte},24:{f:vH},25:{f:Qs},26:{},27:{},28:{f:s5e},29:{},34:{f:Qs},35:{f:gH},38:{f:Xo},39:{f:Xo},40:{f:Xo},41:{f:Xo},42:{f:Qs},43:{f:Qs},47:{f:gNe},49:{f:ISe},51:{f:ci},60:{},61:{f:NSe},64:{f:Qs},65:{f:jSe},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:pSe},93:{f:l5e},94:{},95:{f:Qs},96:{},97:{},99:{f:Qs},125:{f:pte},128:{f:KSe},129:{f:vSe},130:{f:ci},131:{f:Qs},132:{f:Qs},133:{f:xSe},134:{},140:{f:p5e},141:{f:ci},144:{},146:{f:x5e},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:S5e},161:{f:w5e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:VSe},190:{f:zSe},193:{f:d0},197:{},198:{},199:{},200:{},201:{},202:{f:Qs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:Qs},222:{},224:{f:GSe},225:{f:mSe},226:{f:d0},227:{},229:{f:i5e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ySe},253:{f:OSe},255:{f:ESe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ite},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qs},353:{f:d0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:JSe},431:{f:Qs},432:{},433:{},434:{},437:{},438:{f:d5e},439:{f:Qs},440:{f:A5e},441:{},442:{f:i2},443:{},444:{f:ci},445:{},446:{},448:{f:d0},449:{f:SSe,r:2},450:{f:d0},512:{f:fH},513:{f:_5e},515:{f:XSe},516:{f:RSe},517:{f:mH},519:{f:N5e},520:{f:CSe},523:{},545:{f:xH},549:{f:AH},566:{},574:{f:BSe},638:{f:HSe},659:{},1048:{},1054:{f:LSe},1084:{},1212:{f:r5e},2048:{f:h5e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:tC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:d0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:b5e,r:12},2173:{f:p4e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:t5e,r:12},2197:{},2198:{f:u4e,r:12},2199:{},2200:{},2201:{},2202:{f:n5e,r:12},2203:{f:d0},2204:{},2205:{},2206:{},2207:{},2211:{f:_Se},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:E5e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:v5e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:fH},1:{},2:{f:I5e},3:{f:T5e},4:{f:B5e},5:{f:mH},7:{f:O5e},8:{},9:{f:tC},11:{},22:{f:ci},30:{f:USe},31:{},32:{},33:{f:xH},36:{},37:{f:AH},50:{f:D5e},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:k5e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:R5e},223:{},234:{},354:{},421:{},518:{f:yT},521:{f:tC},536:{f:vH},547:{f:gH},561:{},579:{},1030:{f:yT},1033:{f:tC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&sR(r)&&e.push(r)}}function Oje(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function u2(e,t,r){return e||(e=yt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Dje(e,t,r,n){var a=yt(9);return u2(a,e,t),ote(r,n||"b",a),a}function Rje(e,t,r){var n=yt(8+2*r.length);return u2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Pje(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Ni(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,F5e(r,n,a)):qt(e,3,j5e(r,n,a));return;case"b":case"e":qt(e,5,Dje(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,Rje(r,n,(t.v||"").slice(0,255)));return}qt(e,1,u2(null,r,n))}function Lje(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Ws(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=is(d)),i=l[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&Pje(e,f,u,d)}}}function Mje(e,t){for(var r=t||{},n=Xl(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,mR(e,16,r)),Lje(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function Uje(e,t,r){qt(e,49,FSe({sz:12,name:"Arial"},r))}function Qje(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,MSe(a,t[a],r))})}function Hje(e,t){var r=yt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=yt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ate(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function Vje(e,t){for(var r=0;r<16;++r)qt(e,224,hH({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,hH(n,0,t))})}function zje(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,f5e(n)),n[1].Tooltip&&qt(e,2048,m5e(n))}delete t["!links"]}function $je(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,y5e(r4(a,n),a))})}}function Gje(e,t,r,n,a){var s=16+ym(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,Xp(r,n,s));return}if(t.bf)qt(e,6,vBe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Ni(Qa(t.v)):t.v;qt(e,515,YSe(r,n,i,s));break;case"b":case"e":qt(e,517,WSe(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=ER(a.Strings,t.v,a.revStrings);qt(e,253,DSe(r,n,o,s))}else qt(e,516,PSe(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,Xp(r,n,s))}}function Kje(e,t,r){var n=Xl(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,mR(r,16,t)),qt(n,13,yu(1)),qt(n,12,yu(100)),qt(n,15,Al(!0)),qt(n,17,Al(!1)),qt(n,16,qp(.001)),qt(n,95,Al(!0)),qt(n,42,Al(!1)),qt(n,43,Al(!1)),qt(n,130,yu(1)),qt(n,128,qSe()),qt(n,131,Al(!1)),qt(n,132,Al(!1)),u&&$je(n,s["!cols"]),qt(n,512,QSe(p,t)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=Ws(v);for(var b=p.s.c;b<=p.e.c;++b){v===p.s.r&&(h[b]=is(b)),d=h[b]+f;var y=l?(s[v]||[])[b]:s[d];y&&(Gje(n,y,v,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var C=o.CodeName||o.name||a;return u&&qt(n,574,TSe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,o5e(s["!merges"])),u&&zje(n,s),qt(n,442,lte(C)),u&&Hje(n,s),qt(n,10),n.end()}function qje(e,t,r){var n=Xl(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(qt(n,2057,mR(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?yu(1200):null),qt(n,193,W_e(2)),l&&qt(n,191),l&&qt(n,192),qt(n,226),qt(n,92,gSe("SheetJS",r)),qt(n,66,yu(o?1200:1252)),o&&qt(n,353,yu(0)),o&&qt(n,448),qt(n,317,C5e(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,lte(u))}qt(n,156,yu(17)),qt(n,25,Al(!1)),qt(n,18,Al(!1)),qt(n,19,yu(0)),o&&qt(n,431,Al(!1)),o&&qt(n,444,yu(0)),qt(n,61,kSe()),qt(n,64,Al(!1)),qt(n,141,yu(0)),qt(n,34,Al(S3e(e)=="true")),qt(n,14,Al(!0)),o&&qt(n,439,Al(!1)),qt(n,218,yu(0)),Uje(n,e,r),Qje(n,e.SSF,r),Vje(n,r),o&&qt(n,352,Al(!1));var d=n.end(),f=Xl();o&&qt(f,140,g5e()),o&&r.Strings&&Oje(f,252,wSe(r.Strings)),qt(f,10);var h=f.end(),p=Xl(),g=0,v=0;for(v=0;v<e.SheetNames.length;++v)g+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+g+h.length;for(v=0;v<e.SheetNames.length;++v){var y=s[v]||{};qt(p,133,bSe({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var C=p.end();if(g!=C.length)throw new Error("BS8 "+g+" != "+C.length);var S=[];return d.length&&S.push(d),C.length&&S.push(C),h.length&&S.push(h),Ki(S)}function Wje(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(d1(),WN(e.SSF),r.revssf=YN(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,kR(r),r.cellXfs=[],ym(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=Kje(a,r,e);return n.unshift(qje(e,n,r)),Ki(n)}function tre(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Jl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return Wje(e,t);case 4:case 3:case 2:return Mje(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function BH(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=FCe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<l.length;++i){var v=l[i].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=v.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var C=y[o].trim();if(C.match(/<t[dh]/i)){for(var S=C,I=0;S.charAt(0)=="<"&&(I=S.indexOf(">"))>-1;)S=S.slice(I+1);for(var N=0;N<g.length;++N){var B=g[N];B.s.c==d&&B.s.r<u&&u<=B.e.r&&(d=B.e.c+1,N=-1)}var w=$r(C.slice(0,C.indexOf(">")));h=w.colspan?+w.colspan:1,((f=+w.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var _=w.t||w["data-t"]||"";if(!S.length){d+=h;continue}if(S=_ee(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=h;continue}var F={t:"s",v:S};r.raw||!S.trim().length||_=="s"||(S==="TRUE"?F={t:"b",v:!0}:S==="FALSE"?F={t:"b",v:!1}:isNaN(Cd(S))?isNaN(Nx(S).getDate())||(F={t:"d",v:Qa(S)},r.cellDates||(F={t:"n",v:Ni(F.v)}),F.z=r.dateNF||Dr[14]):F={t:"n",v:Cd(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=F):n[Ur({r:u,c:d})]=F,d+=h}}}}return n["!ref"]=nn(p),g.length&&(n["!merges"]=g),n}function Xje(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Ur({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||rR(f.w||(sh(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var Yje='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Jje="</body></html>";function Zje(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return bm(BH(r[0],t),t);var n=IR();return r.forEach(function(a,s){FR(n,BH(a,t),"Sheet"+(s+1))}),n}function eIe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function rre(e,t){var r=t||{},n=r.header!=null?r.header:Yje,a=r.footer!=null?r.footer:Jje,s=[n],i=Jl(e["!ref"]);r.dense=Array.isArray(e),s.push(eIe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(Xje(e,i,o,r));return s.push("</table>"+a),s.join("")}function nre(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Jl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,v=0,b=0,y=0,C=0,S=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&v<l;++g){var I=o[g];if(TH(I)){if(n.display)continue;p[v]={hidden:!0}}var N=I.children;for(b=y=0;b<N.length;++b){var B=N[b];if(!(n.display&&TH(B))){var w=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):_ee(B.innerHTML),_=B.getAttribute("data-z")||B.getAttribute("z");for(h=0;h<f.length;++h){var F=f[h];F.s.c==y+s&&F.s.r<v+a&&v+a<=F.e.r&&(y=F.e.c+1-s,h=-1)}S=+B.getAttribute("colspan")||1,((C=+B.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:v+a,c:y+s},e:{r:v+a+(C||1)-1,c:y+s+(S||1)-1}});var U={t:"s",v:w},D=B.getAttribute("data-t")||B.getAttribute("t")||"";w!=null&&(w.length==0?U.t=D||"z":n.raw||w.trim().length==0||D=="s"||(w==="TRUE"?U={t:"b",v:!0}:w==="FALSE"?U={t:"b",v:!1}:isNaN(Cd(w))?isNaN(Nx(w).getDate())||(U={t:"d",v:Qa(w)},n.cellDates||(U={t:"n",v:Ni(U.v)}),U.z=n.dateNF||Dr[14]):U={t:"n",v:Cd(w)})),U.z===void 0&&_!=null&&(U.z=_);var k="",L=B.getElementsByTagName("A");if(L&&L.length)for(var R=0;R<L.length&&!(L[R].hasAttribute("href")&&(k=L[R].getAttribute("href"),k.charAt(0)!="#"));++R);k&&k.charAt(0)!="#"&&(U.l={Target:k}),n.dense?(e[v+a]||(e[v+a]=[]),e[v+a][y+s]=U):e[Ur({c:y+s,r:v+a})]=U,u.e.c<y+s&&(u.e.c=y+s),y+=S}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,v-1+a),e["!ref"]=nn(u),v>=l&&(e["!fullref"]=nn((u.e.r=o.length-g+v-1+a,u))),e}function are(e,t){var r=t||{},n=r.dense?[]:{};return nre(n,e,t)}function tIe(e,t){return bm(are(e,t),t)}function TH(e){var t="",r=rIe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function rIe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function nIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var jH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function sre(e,t){var r=t||{},n=nR(e),a=[],s,i,o={name:""},l="",u=0,d,f,h={},p=[],g=r.dense?[]:{},v,b,y={value:""},C="",S=0,I=[],N=-1,B=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,F={},U=[],D={},k=0,L=0,R=[],X=1,V=1,Z=[],H={Names:[]},z={},q=["",""],re=[],P={},K="",Y=0,te=!1,ie=!1,Ae=0;for(lw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=lw.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?g["!ref"]=nn(w):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(g["!fullref"]=g["!ref"],w.e.r=r.sheetRows-1,g["!ref"]=nn(w)),U.length&&(g["!merges"]=U),R.length&&(g["!rows"]=R),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=$r(v[0],!1),N=B=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,g=r.dense?[]:{},U=[],R=[],ie=!0);break;case"table-row-group":v[1]==="/"?--_:++_;break;case"table-row":case"":if(v[1]==="/"){N+=X,X=1;break}if(f=$r(v[0],!1),f.?N=f.-1:N==-1&&(N=0),X=+f["number-rows-repeated"]||1,X<10)for(Ae=0;Ae<X;++Ae)_>0&&(R[N+Ae]={level:_});B=-1;break;case"covered-table-cell":v[1]!=="/"&&++B,r.sheetStubs&&(r.dense?(g[N]||(g[N]=[]),g[N][B]={t:"z"}):g[Ur({r:N,c:B})]={t:"z"}),C="",I=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++B,y=$r(v[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=SH(Qn(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Qn(y["string-value"]||""),r.dense?(g[N]||(g[N]=[]),g[N][B]=b):g[Ur({r:N,c:B})]=b),B+=V-1;else if(v[1]!=="/"){++B,C="",S=0,I=[],V=1;var oe=X?N+X-1:N;if(B>w.e.c&&(w.e.c=B),B<w.s.c&&(w.s.c=B),N<w.s.r&&(w.s.r=N),oe>w.e.r&&(w.e.r=oe),y=$r(v[0],!1),re=[],P={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:N,c:B},e:{r:N+k-1,c:B+L-1}},b.F=nn(D),Z.push([D,b.F])),y.formula)b.f=SH(y.formula);else for(Ae=0;Ae<Z.length;++Ae)N>=Z[Ae][0].s.r&&N<=Z[Ae][0].e.r&&B>=Z[Ae][0].s.c&&B<=Z[Ae][0].e.c&&(b.F=Z[Ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:N,c:B},e:{r:N+k-1,c:B+L-1}},U.push(D)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=Ni(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=TCe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=JN(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(C=Qn(y["string-value"]),I=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=C||"",I.length&&(b.R=I),te=S==0),z.Target&&(b.l=z),re.length>0&&(b.c=re,re=[]),C&&r.cellText!==!1&&(b.w=C),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var ce=0;ce<X;++ce){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[N+ce]||(g[N+ce]=[]),g[N+ce][B]=ce==0?b:Ha(b);--V>0;)g[N+ce][B+V]=Ha(b);else for(g[Ur({r:N+ce,c:B})]=b;--V>0;)g[Ur({r:N+ce,c:B+V})]=Ha(b);w.e.c<=B&&(w.e.c=B)}V=parseInt(y["number-columns-repeated"]||"1",10),B+=V-1,V=0,b={},C="",I=[]}z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s;P.t=C,I.length&&(P.R=I),P.a=K,re.push(P)}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);K="",Y=0,C="",S=0,I=[];break;case"creator":v[1]==="/"?K=n.slice(Y,v.index):Y=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);C="",S=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(F[o.name]=l,(s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=$r(v[0],!1),a.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=jH[v[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=jH[v[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":i=$r(v[0],!1),q=wT(i["cell-range-address"]);var pe={Name:i.name,Ref:q[0]+"!"+q[1]};ie&&(pe.Sheet=p.length),H.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(v[1]==="/"&&(!y||!y["string-value"])){var Ie=nIe(n.slice(S,v.index));C=(C.length>0?C+`
`:"")+Ie[0]}else $r(v[0],!1),S=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{q=wT($r(v[0])["target-range-address"]),h[q[0]]["!autofilter"]={ref:q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(z=$r(v[0],!1),!z.href)break;z.Target=Qn(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(q=wT(z.Target.slice(1)),z.Target="#"+q[0]+"!"+q[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var ne={Sheets:h,SheetNames:p,Workbook:H};return r.bookSheets&&delete ne.Sheets,ne}function IH(e,t){t=t||{},xu(e,"META-INF/manifest.xml")&&T_e(li(e,"META-INF/manifest.xml"),t);var r=Bc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=sre(Ca(r),t);return xu(e,"meta.xml")&&(n.Props=Wee(li(e,"meta.xml"))),n}function FH(e,t){return sre(e,t)}var aIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ow({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ys+t}}(),OH=function(){var e=function(s){return va(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+va(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Jl(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=f.e.r;++u){for(v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var y=!1,C={},S="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),C["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,C["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){l.push(r);continue}var I=Ur({r:u,c:d}),N=g?(s[u]||[])[d]:s[I];if(N&&N.f&&(C["table:formula"]=va(CBe(N.f)),N.F&&N.F.slice(0,I.length)==I)){var B=Jl(N.F);C["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,C["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!N){l.push(t);continue}switch(N.t){case"b":S=N.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=N.v?"true":"false";break;case"n":S=N.w||String(N.v||0),C["office:value-type"]="float",C["office:value"]=N.v||0;break;case"s":case"str":S=N.v==null?"":N.v,C["office:value-type"]="string";break;case"d":S=N.w||Qa(N.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=Qa(N.v).toISOString(),C["table:style-name"]="ce1";break;default:l.push(t);continue}var w=e(S);if(N.l&&N.l.Target){var _=N.l.Target;_=_.charAt(0)=="#"?"#"+_Be(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),w=Kt("text:a",w,{"xlink:href":_.replace(/&/g,"&amp;")})}l.push("          "+Kt("table:table-cell",Kt("text:p",w,{}),C)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;cm(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Ys],u=ow({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=ow({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(qee().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function ire(e,t){if(t.bookType=="fods")return OH(e,t);var r=ZD(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,OH(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,aIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,Ys+qee()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,F_e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,j_e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Yp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function NF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ca(xm(e))}function sIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):kc(BA(e))}function iIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function dm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function DH(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function oIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function lIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function mw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ha(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Bs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=mw(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=mw(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function co(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ha(n*8+a.type)),a.type==2&&t.push(ha(a.data.length)),t.push(a.data))})}),dm(t)}function SR(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function pu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=mw(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Bs(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Wn(o.data),u=Bs(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Bs(s[3][0].data)>>>0>0),r.push(i)}return r}function nv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ha(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ha(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ha(i.data.length)}],n[2].push({data:co(i.meta),type:2})});var s=co(n);t.push(ha(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),dm(t)}function cIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=mw(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[dm(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=dm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function gu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(cIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return dm(t)}function av(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=ha(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return dm(t)}function uIe(e,t,r,n){var a=Yp(e),s=a.getUint32(4,!0),i=(n>1?12:8)+DH(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=DH(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function dIe(e,t,r){var n=Yp(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=oIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function CT(e,t){var r=new Uint8Array(32),n=Yp(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,lIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function _T(e,t){var r=new Uint8Array(32),n=Yp(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function AIe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return uIe(e,t,r,e[0]);case 5:return dIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=Wn(e);return mw(t[1][0].data)}function RH(e,t){var r=Wn(t.data),n=Bs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Wn(i.data),l=Bs(o[1][0].data)>>>0;switch(n){case 1:s[l]=NF(o[3][0].data);break;case 8:{var u=e[Qo(o[9][0].data)][0],d=Wn(u.data),f=e[Qo(d[1][0].data)][0],h=Bs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Wn(f.data);s[l]=p[3].map(function(g){return NF(g.data)}).join("")}break}}),s}function fIe(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b=Wn(e),y=Bs(b[1][0].data)>>>0,C=Bs(b[2][0].data)>>>0,S=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Bs(b[8][0].data)>0||!1,I,N;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)I=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,N=(u=(l=b[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)I=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,N=(v=(g=b[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var B=S?4:1,w=Yp(I),_=[],F=0;F<I.length/2;++F){var U=w.getUint16(F*2,!0);U<65535&&_.push([F,U])}if(_.length!=C)throw"Expected ".concat(C," cells, found ").concat(_.length);var D=[];for(F=0;F<_.length-1;++F)D[_[F][0]]=N.subarray(_[F][1]*B,_[F+1][1]*B);return _.length>=1&&(D[_[_.length-1][0]]=N.subarray(_[_.length-1][1]*B)),{R:y,cells:D}}function hIe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Bs(n[7][0].data)>>>0>0?1:0:-1,s=SR(n[5],function(i){return fIe(i,a)});return{nrows:Bs(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function mIe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Bs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Bs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var i=Wn(a[4][0].data),o=RH(e,e[Qo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?RH(e,e[Qo(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),p=e[Qo(h[2][0].data)][0],g=Bs(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=hIe(e,p);v.data.forEach(function(b,y){b.forEach(function(C,S){var I=Ur({r:d+y,c:S}),N=AIe(C,o,l);N&&(r[I]=N)})}),d+=v.nrows})}function pIe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Qo(r[2][0].data)],s=Bs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return mIe(e,a[0],n),n}function gIe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?NF(n[1][0].data):"",sheets:[]},s=SR(n[2],Qo);return s.forEach(function(i){e[i].forEach(function(o){var l=Bs(o.meta[1][0].data);l==6e3&&a.sheets.push(pIe(e,o))})}),a}function vIe(e,t){var r=IR(),n=Wn(t.data),a=SR(n[1],Qo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Bs(i.meta[1][0].data);if(o==2){var l=gIe(e,i);l.sheets.forEach(function(u,d){FR(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function ST(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=gu(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=pu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Bs(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=Bs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return vIe(s,o)}function xIe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Bs(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Yp(e[7][0].data),d=0,f=[],h=Yp(e[4][0].data),p=0,g=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535);continue}u.setUint16(v*2,d,!0),h.setUint16(v*2,p,!0);var b,y;switch(typeof t[v]){case"string":b=CT({t:"s",v:t[v]},r),y=_T({t:"s",v:t[v]},r);break;case"number":b=CT({t:"n",v:t[v]},r),y=_T({t:"n",v:t[v]},r);break;case"boolean":b=CT({t:"b",v:t[v]},r),y=_T({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,g.push(y),p+=y.length,++l}for(e[2][0].data=ha(l);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535,!0);return e[6][0].data=dm(f),e[3][0].data=dm(g),l}function bIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Jl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=RS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},l=[],u=Er.read(t.numbers,{type:"base64"});u.FileIndex.map(function(K,Y){return[K,u.FullPaths[Y]]}).forEach(function(K){var Y=K[0],te=K[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ie=Y.content,Ae=gu(ie),oe=pu(Ae);oe.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:te,type:Bs(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(K,Y){return K-Y});var d=l.filter(function(K){return K>1}).map(function(K){return[K,ha(K)]});u.FileIndex.map(function(K,Y){return[K,u.FullPaths[Y]]}).forEach(function(K){var Y=K[0];if(K[1],!!Y.name.match(/\.iwa/)){var te=pu(gu(Y.content));te.forEach(function(ie){ie.messages.forEach(function(Ae){d.forEach(function(oe){ie.messages.some(function(ce){return Bs(ce.meta[1][0].data)!=11006&&iIe(ce.data,oe[1])})&&o[oe[0]].deps.push(ie.id)})})})}});for(var f=Er.find(u,o[1].location),h=pu(gu(f.content)),p,g=0;g<h.length;++g){var v=h[g];v.id==1&&(p=v)}var b=Qo(Wn(p.messages[0].data)[1][0].data);for(f=Er.find(u,o[b].location),h=pu(gu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Wn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=pu(gu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Wn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=pu(gu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);var y=Wn(p.messages[0].data);{y[6][0].data=ha(n.e.r+1),y[7][0].data=ha(n.e.c+1);var C=Qo(y[46][0].data),S=Er.find(u,o[C].location),I=pu(gu(S.content));{for(var N=0;N<I.length&&I[N].id!=C;++N);if(I[N].id!=C)throw"Bad ColumnRowUIDMapArchive";var B=Wn(I[N].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var w=0;w<=n.e.c;++w){var _=[];_[1]=_[2]=[{type:0,data:ha(w+420690)}],B[1].push({type:2,data:co(_)}),B[2].push({type:0,data:ha(w)}),B[3].push({type:0,data:ha(w)})}B[4]=[],B[5]=[],B[6]=[];for(var F=0;F<=n.e.r;++F)_=[],_[1]=_[2]=[{type:0,data:ha(F+726270)}],B[4].push({type:2,data:co(_)}),B[5].push({type:0,data:ha(F)}),B[6].push({type:0,data:ha(F)});I[N].messages[0].data=co(B)}S.content=av(nv(I)),S.size=S.content.length,delete y[46];var U=Wn(y[4][0].data);{U[7][0].data=ha(n.e.r+1);var D=Wn(U[1][0].data),k=Qo(D[2][0].data);S=Er.find(u,o[k].location),I=pu(gu(S.content));{if(I[0].id!=k)throw"Bad HeaderStorageBucket";var L=Wn(I[0].messages[0].data);for(F=0;F<s.length;++F){var R=Wn(L[2][0].data);R[1][0].data=ha(F),R[4][0].data=ha(s[F].length),L[2][F]={type:L[2][0].type,data:co(R)}}I[0].messages[0].data=co(L)}S.content=av(nv(I)),S.size=S.content.length;var X=Qo(U[2][0].data);S=Er.find(u,o[X].location),I=pu(gu(S.content));{if(I[0].id!=X)throw"Bad HeaderStorageBucket";for(L=Wn(I[0].messages[0].data),w=0;w<=n.e.c;++w)R=Wn(L[2][0].data),R[1][0].data=ha(w),R[4][0].data=ha(n.e.r+1),L[2][w]={type:L[2][0].type,data:co(R)};I[0].messages[0].data=co(L)}S.content=av(nv(I)),S.size=S.content.length;var V=Qo(U[4][0].data);(function(){for(var K=Er.find(u,o[V].location),Y=pu(gu(K.content)),te,ie=0;ie<Y.length;++ie){var Ae=Y[ie];Ae.id==V&&(te=Ae)}var oe=Wn(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(ne,Se){ce[1]=[{type:0,data:ha(Se)}],ce[2]=[{type:0,data:ha(1)}],ce[3]=[{type:2,data:sIe(ne)}],oe[3].push({type:2,data:co(ce)})})}te.messages[0].data=co(oe);var pe=nv(Y),Ie=av(pe);K.content=Ie,K.size=K.content.length})();var Z=Wn(U[3][0].data);{var H=Z[1][0];delete Z[2];var z=Wn(H.data);{var q=Qo(z[2][0].data);(function(){for(var K=Er.find(u,o[q].location),Y=pu(gu(K.content)),te,ie=0;ie<Y.length;++ie){var Ae=Y[ie];Ae.id==q&&(te=Ae)}var oe=Wn(te.messages[0].data);{delete oe[6],delete Z[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var pe=0,Ie=0;Ie<=n.e.r;++Ie){var ne=Wn(ce);pe+=xIe(ne,s[Ie],i),ne[1][0].data=ha(Ie),oe[5].push({data:co(ne),type:2})}oe[1]=[{type:0,data:ha(n.e.c+1)}],oe[2]=[{type:0,data:ha(n.e.r+1)}],oe[3]=[{type:0,data:ha(pe)}],oe[4]=[{type:0,data:ha(n.e.r+1)}]}te.messages[0].data=co(oe);var Se=nv(Y),De=av(Se);K.content=De,K.size=K.content.length})()}H.data=co(z)}U[3][0].data=co(Z)}y[4][0].data=co(U)}p.messages[0].data=co(y);var re=nv(h),P=av(re);return f.content=P,f.size=f.content.length,u}function ore(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function NR(e){ore([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function kR(e){ore([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function yIe(e){return En.WS.indexOf(e)>-1?"sheet":e==En.CS?"chart":e==En.DS?"dialog":e==En.MS?"macro":e&&e.length?e:"sheet"}function wIe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,yIe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function EIe(e,t,r,n,a,s,i,o,l,u,d,f){try{s[n]=Ny(Bc(e,r,!0),t);var h=li(e,t),p;switch(o){case"sheet":p=$3e(h,t,a,l,s[n],u,d,f);break;case"chart":if(p=G3e(h,t,a,l,s[n],u,d,f),!p||!p["!drawel"])break;var g=ey(p["!drawel"].Target,t),v=cw(g),b=I4e(Bc(e,g,!0),Ny(Bc(e,v,!0),g)),y=ey(b,g),C=cw(y);p=x3e(Bc(e,y,!0),y,l,Ny(Bc(e,C,!0),y),u,p);break;case"macro":p=K3e(h,t,a,l,s[n],u,d,f);break;case"dialog":p=q3e(h,t,a,l,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var S=[];s&&s[n]&&js(s[n]).forEach(function(I){var N="";if(s[n][I].Type==En.CMNT){N=ey(s[n][I].Target,t);var B=J3e(li(e,N,!0),N,l);if(!B||!B.length)return;yH(p,B,!1)}s[n][I].Type==En.TCMNT&&(N=ey(s[n][I].Target,t),S=S.concat(O4e(li(e,N,!0),l)))}),S&&S.length&&yH(p,S,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function du(e){return e.charAt(0)=="/"?e.slice(1):e}function CIe(e,t){if(d1(),t=t||{},NR(t),xu(e,"META-INF/manifest.xml")||xu(e,"objectdata.xml"))return IH(e,t);if(xu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof ST<"u"){if(e.FileIndex)return ST(e);var r=Er.utils.cfb_new();return HQ(e).forEach(function(R){un(r,R,DCe(e,R))}),ST(r)}throw new Error("Unsupported NUMBERS file")}if(!xu(e,"[Content_Types].xml"))throw xu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):xu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=HQ(e),a=k_e(Bc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",li(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!li(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(ky=[],a.sst)try{ky=Y3e(li(e,du(a.sst)),a.sst,t)}catch(R){if(t.WTF)throw R}t.cellStyles&&a.themes.length&&(l=X3e(Bc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=W3e(li(e,du(a.style)),a.style,l,t))}a.links.map(function(R){try{var X=Ny(Bc(e,cw(du(R))),R);return eje(li(e,du(R)),X,R,t)}catch{}});var d=z3e(li(e,du(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=li(e,du(a.coreprops[0]),!0),h&&(f=Wee(h)),a.extprops.length!==0&&(h=li(e,du(a.extprops[0]),!0),h&&D_e(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Bc(e,du(a.custprops[0]),!0),h&&(p=P_e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(X){return X.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var v={};t.bookDeps&&a.calcchain&&(v=Z3e(li(e,du(a.calcchain)),a.calcchain));var b=0,y={},C,S;{var I=d.Sheets;f.Worksheets=I.length,f.SheetNames=[];for(var N=0;N!=I.length;++N)f.SheetNames[N]=I[N].name}var B=s?"bin":"xml",w=a.workbooks[0].lastIndexOf("/"),_=(a.workbooks[0].slice(0,w+1)+"_rels/"+a.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");xu(e,_)||(_="xl/_rels/workbook."+B+".rels");var F=Ny(Bc(e,_,!0),_.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=tje(li(e,du(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=R4e(li(e,du(a.people[0])),t)),F&&(F=wIe(F,d.Sheets));var U=li(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(F&&F[b]?(C="xl/"+F[b][1].replace(/[\/]?xl\//,""),xu(e,C)||(C=F[b][1]),xu(e,C)||(C=_.replace(/_rels\/.*$/,"")+F[b][1]),D=F[b][2]):(C="xl/worksheets/sheet"+(b+1-U)+"."+B,C=C.replace(/sheet0\./,"sheet.")),S=C.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==b&&(k=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[b].toLowerCase()&&(k=1);if(!k)continue e}}EIe(e,C,S,f.SheetNames[b],b,y,i,D,t,d,l,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:v,Sheets:i,SheetNames:f.SheetNames,Strings:ky,Styles:u,Themes:l,SSF:Ha(Dr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(R,X){R=R.replace(/^Root Entry[\/]/,""),g.keys.push(R),g.files[R]=e.FileIndex[X]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=li(e,du(a.vba[0]),!0):a.defaults&&a.defaults.bin===z4e&&(g.vbaraw=li(e,"xl/vbaProject.bin",!0))),g}function _Ie(e,t){var r=t||{},n="Workbook",a=Er.find(e,n);try{if(n="/!DataSpaces/Version",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(tNe(a.content),n="/!DataSpaces/DataSpaceMap",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=nNe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=aNe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);iNe(a.content)}catch{}if(n="/EncryptionInfo",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=oNe(a.content);if(n="/EncryptedPackage",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function SIe(e,t){return t.bookType=="ods"?ire(e,t):t.bookType=="numbers"?bIe(e,t):t.bookType=="xlsb"?NIe(e,t):kIe(e,t)}function NIe(e,t){Pv=1024,e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(d1(),WN(e.SSF),t.revssf=YN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,By?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Ote.indexOf(t.bookType)>-1,a=fR();kR(t=t||{});var s=ZD(),i="",o=0;if(t.cellXfs=[],ym(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Xee(e.Props,t)),a.coreprops.push(i),ma(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Zee(e.Props)),a.extprops.push(i),ma(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&js(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,ete(e.Custprops)),a.custprops.push(i),ma(t.rels,4,i,En.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,nje(o-1,i,t,e,d)),a.sheets.push(i),ma(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(f){var p=f["!comments"],g=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+r,un(s,v,ije(p,v)),a.comments.push(v),ma(d,-1,"../comments"+o+"."+r,En.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+o+".vml",Ite(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,cw(i),ix(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,sje(t.Strings,i,t)),a.strs.push(i),ma(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,un(s,i,rje(e,i)),a.workbooks.push(i),ma(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",un(s,i,xR(e.Themes,t)),a.themes.push(i),ma(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,un(s,i,aje(e,i,t)),a.styles.push(i),ma(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ma(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,un(s,i,oje(i)),a.metadata.push(i),ma(t.wbrels,-1,"metadata."+r,En.XLMETA),un(s,"[Content_Types].xml",Kee(a,t)),un(s,"_rels/.rels",ix(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",ix(t.wbrels)),delete t.revssf,delete t.ssf,s}function kIe(e,t){Pv=1024,e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(d1(),WN(e.SSF),t.revssf=YN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,By?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Ote.indexOf(t.bookType)>-1,a=fR();kR(t=t||{});var s=ZD(),i="",o=0;if(t.cellXfs=[],ym(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Xee(e.Props,t)),a.coreprops.push(i),ma(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Zee(e.Props)),a.extprops.push(i),ma(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&js(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,ete(e.Custprops)),a.custprops.push(i),ma(t.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,$te(o-1,t,e,f)),a.sheets.push(i),ma(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(h){var g=h["!comments"],v=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(C){C[1].forEach(function(S){S.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,un(s,b,D4e(g,d,t)),a.threadedcomments.push(b),ma(f,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,un(s,b,Fte(g)),a.comments.push(b),ma(f,-1,"../comments"+o+"."+r,En.CMNT),v=!0}h["!legacy"]&&v&&un(s,"xl/drawings/vmlDrawing"+o+".vml",Ite(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,cw(i),ix(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,bte(t.Strings,t)),a.strs.push(i),ma(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,un(s,i,Xte(e)),a.workbooks.push(i),ma(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",un(s,i,xR(e.Themes,t)),a.themes.push(i),ma(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,un(s,i,kte(e,t)),a.styles.push(i),ma(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ma(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,un(s,i,jte()),a.metadata.push(i),ma(t.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,P4e(d)),a.people.push(i),ma(t.wbrels,-1,"persons/person.xml",En.PEOPLE)),un(s,"[Content_Types].xml",Kee(a,t)),un(s,"_rels/.rels",ix(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",ix(t.wbrels)),delete t.revssf,delete t.ssf,s}function BR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Dc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function BIe(e,t){return Er.find(e,"EncryptedPackage")?_Ie(e,t):ere(e,t)}function TIe(e,t){var r,n=e,a=t||{};return a.type||(a.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=wee(n,a),CIe(r,a)}function lre(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return _F(e.slice(r),t);default:break e}return kx.to_workbook(e,t)}function jIe(e,t){var r="",n=BR(e,t);switch(t.type){case"base64":r=Dc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Kp(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ca(r)),t.type="binary",lre(r,t)}function IIe(e,t){var r=e;return t.type=="base64"&&(r=Dc(r)),r=nw.utils.decode(1200,r.slice(2),"str"),t.type="binary",lre(r,t)}function FIe(e){return e.match(/[^\x00-\x7F]/)?BA(e):e}function NT(e,t,r,n){return n?(r.type="string",kx.to_workbook(e,r)):kx.to_workbook(t,r)}function pw(e,t){qD();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return pw(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lx={},r.dateNF&&(lx.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=NCe(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=FIe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",pw(WD(n),r)}switch((a=BR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return BIe(Er.read(n,r),r);break;case 9:if(a[1]<=8)return ere(n,r);break;case 60:return _F(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return L5e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return vte.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?TIe(n,r):NT(e,n,r,s);case 239:return a[3]===60?_F(n,r):NT(e,n,r,s);case 255:if(a[1]===254)return IIe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return kp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return kp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return CF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return _te.to_workbook(n,r);break;case 10:case 13:case 32:return jIe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return P5e.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?CF.to_workbook(n,r):NT(e,n,r,s)}function cre(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return n2(t.file,Er.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Er.write(e,t)}function OIe(e,t){var r=Ha(t||{}),n=SIe(e,r);return DIe(n,r)}function DIe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Er.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(qN(a))}return t.password&&typeof encrypt_agile<"u"?cre(encrypt_agile(a,t.password),t):t.type==="file"?n2(t.file,a):t.type=="string"?Ca(a):a}function RIe(e,t){var r=t||{},n=Fje(e,r);return cre(n,r)}function vA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return aw(BA(n));case"binary":return BA(n);case"string":return e;case"file":return n2(t.file,n,"utf8");case"buffer":return pn?xh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):vA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function PIe(e,t){switch(t.type){case"base64":return aw(e);case"binary":return e;case"string":return e;case"file":return n2(t.file,e,"binary");case"buffer":return pn?xh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function sC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?aw(r):t.type=="string"?Ca(r):r;case"file":return n2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function ure(e,t){qD(),B3e(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=ure(e,r);return r.type="array",qN(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return vA(Sje(e,r),r);case"slk":case"sylk":return vA(gte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return vA(rre(e.Sheets[e.SheetNames[a]],r),r);case"txt":return PIe(dre(e.Sheets[e.SheetNames[a]],r),r);case"csv":return vA(jR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return vA(vte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return sC(CF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return vA(kx.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return vA(_te.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return vA(xte.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return vA(ire(e,r),r);case"wk1":return sC(kp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return sC(kp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),sC(tre(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),RIe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return OIe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function LIe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function TR(e,t,r){var n={};return n.type="file",n.file=t,LIe(n),ure(e,n)}function MIe(e,t,r,n,a,s,i,o){var l=Ws(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+l];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&v===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:sh(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function RS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Hn(d);break;case"number":l=Hn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var f=Ws(l.s.r),h=[],p=[],g=0,v=0,b=Array.isArray(e),y=l.s.r,C=0,S={};b&&!e[y]&&(e[y]=[]);var I=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(C=l.s.c;C<=l.e.c;++C)if(!(I[C]||{}).hidden)switch(h[C]=is(C),r=b?e[y][C]:e[h[C]+f],n){case 1:s[C]=C-l.s.c;break;case 2:s[C]=h[C];break;case 3:s[C]=u.header[C-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=sh(r,null,u),v=S[i]||0,!v)S[i]=1;else{do o=i+"_"+v++;while(S[o]);S[i]=v,S[o]=1}s[C]=o}for(y=l.s.r+a;y<=l.e.r;++y)if(!(N[y]||{}).hidden){var B=MIe(e,l,y,h,n,s,b,u);(B.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=B.row)}return p.length=g,p}var PH=/"/g;function UIe(e,t,r,n,a,s,i,o){for(var l=!0,u=[],d="",f=Ws(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:sh(p,null,o));for(var g=0,v=0;g!==d.length;++g)if((v=d.charCodeAt(g))===a||v===s||v===34||o.forceQuotes){d='"'+d.replace(PH,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(PH,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function jR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=is(g));for(var v=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=UIe(e,a,b,f,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function dre(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=jR(e,t);return r}function QIe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",i=[],o,l=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=is(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ws(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function Are(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?os(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(v,b){js(v).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var C=v[y],S="z",I="",N=Ur({c:o+p,r:i+b+a});u=gw(s,N),C&&typeof C=="object"&&!(C instanceof Date)?s[N]=C:(typeof C=="number"?S="n":typeof C=="boolean"?S="b":typeof C=="string"?S="s":C instanceof Date?(S="d",n.cellDates||(S="n",C=Ni(C)),I=n.dateNF||Dr[14]):C===null&&n.nullError&&(S="e",C=0),u?(u.t=S,u.v=C,delete u.w,delete u.R,I&&(u.z=I)):s[N]=u={t:S,v:C},I&&(u.z=I))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=Ws(i);if(a)for(p=0;p<h.length;++p)s[is(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=nn(d),s}function HIe(e,t){return Are(null,e,t)}function gw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?gw(e,Ur(t)):gw(e,Ur({r:t,c:r||0}))}function VIe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function IR(){return{SheetNames:[],Sheets:{}}}function FR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Wte(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function zIe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=VIe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function $Ie(e,t){return e.z=t,e}function fre(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function GIe(e,t,r){return fre(e,"#"+t,r)}function KIe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function qIe(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:nn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=gw(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var Su={encode_col:is,encode_row:Ws,encode_cell:Ur,encode_range:nn,decode_col:oR,decode_row:iR,split_cell:s_e,decode_cell:os,decode_range:Jl,format_cell:sh,sheet_add_aoa:Uee,sheet_add_json:Are,sheet_add_dom:nre,aoa_to_sheet:A1,json_to_sheet:HIe,table_to_sheet:are,table_to_book:tIe,sheet_to_csv:jR,sheet_to_txt:dre,sheet_to_json:RS,sheet_to_html:rre,sheet_to_formulae:QIe,sheet_to_row_object_array:RS,sheet_get_cell:gw,book_new:IR,book_append_sheet:FR,book_set_sheet_visibility:zIe,cell_set_number_format:$Ie,cell_set_hyperlink:fre,cell_set_internal_link:GIe,cell_add_comment:KIe,sheet_set_array_formula:qIe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const WIe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Lt(tn,l),d=await Za(u),f=d.size;n+=f,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a coleccin ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Lt(tn,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=tr(l,_n("timestamp",">=",u.toISOString()),Gr("timestamp","desc")),f=await Za(d),h={};f.docs.forEach(p=>{const g=p.data(),v=new Date(g.timestamp).toLocaleDateString("es-CL");h[v]=(h[v]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},LH=500,sv=({title:e,value:t,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),kT=({title:e,data:t,colorClass:r})=>{const n=T.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},XIe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),[a,s]=T.useState(null),[i,o]=T.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});T.useEffect(()=>{n(!0);const f=Qwe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await WIe();o(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:l,userStats:u,moduleStats:d}=T.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),v={today:0,week:0,month:0},b={},y={};e.forEach(I=>{const N=new Date(I.timestamp).getTime();N>=h&&v.today++,N>=p&&v.week++,N>=g&&v.month++;const B=I.userEmail||"Desconocido";b[B]||(b[B]={email:B,today:0,month:0,total:0}),b[B].total++,N>=h&&b[B].today++,N>=g&&b[B].month++,y[I.module]=(y[I.module]||0)+1});const C=Object.values(b).sort((I,N)=>N.total-I.total),S=Object.entries(y).map(([I,N])=>({label:I,value:N})).sort((I,N)=>N.value-I.value);return{stats:v,userStats:C,moduleStats:S}},[e]);return c.jsxs("div",{className:"space-y-8",children:[a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(sv,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Lmite recomendado: ${LH}`,alert:l.today>LH}),c.jsx(sv,{title:"Llamadas esta Semana",value:r?"--":l.week}),c.jsx(sv,{title:"Llamadas este Mes",value:r?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(kT,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(sv,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(sv,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(sv,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(kT,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(kT,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YIe="type.googleapis.com/google.protobuf.Int64Value",JIe="type.googleapis.com/google.protobuf.UInt64Value";function hre(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function PS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>PS(t));if(typeof e=="function"||typeof e=="object")return hre(e,t=>PS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Tx(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case YIe:case JIe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Tx(t)):typeof e=="function"||typeof e=="object"?hre(e,t=>Tx(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends Td{constructor(t,r,n){super(`${OR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Kl.prototype)}}function ZIe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function LS(e,t){let r=ZIe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!MH[i])return new Kl("internal","internal");r=MH[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Tx(a))}}catch{}return r==="ok"?null:new Kl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eFe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="us-central1",tFe=/^data: (.*?)(?:\n|$)/;function rFe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Kl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class nFe{constructor(t,r,n,a,s=kF,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new eFe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=kF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function aFe(e,t,r){const n=ph(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(aN(e.emulatorOrigin),sN("Functions",!0))}function sFe(e,t,r){const n=a=>oFe(e,t,a,{});return n.stream=(a,s)=>cFe(e,t,a,s),n}async function iFe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function mre(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function oFe(e,t,r,n){const a=e._url(t);return lFe(e,a,r,n)}async function lFe(e,t,r,n){r=PS(r);const a={data:r},s=await mre(e,n),i=n.timeout||7e4,o=rFe(i),l=await Promise.race([iFe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new Kl("cancelled","Firebase Functions instance was deleted.");const u=LS(l.status,l.json);if(u)throw u;if(!l.json)throw new Kl("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Kl("internal","Response is missing data field.");return{data:Tx(d)}}function cFe(e,t,r,n){const a=e._url(t);return uFe(e,a,r,n||{})}async function uFe(e,t,r,n){var h;r=PS(r);const a={data:r},s=await mre(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const v=new Kl("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const g=LS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,l;const u=new Promise((p,g)=>{o=p,l=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new Kl("cancelled","Request was cancelled.");l(p)});const d=i.body.getReader(),f=dFe(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:v}=await p.read();return{value:g,done:v}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function dFe(e,t,r,n){const a=(i,o)=>{const l=i.match(tFe);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){t(Tx(d.result));return}if("message"in d){o.enqueue(Tx(d.message));return}if("error"in d){const f=LS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Kl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new Kl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new Kl("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return l()}catch(u){const d=u instanceof Kl?u:LS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const UH="@firebase/functions",QH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AFe="auth-internal",fFe="app-check-internal",hFe="messaging-internal";function mFe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(AFe),i=r.getProvider(hFe),o=r.getProvider(fFe);return new nFe(a,s,i,o,n)};Y0(new Zf(OR,t,"PUBLIC").setMultipleInstances(!0)),ju(UH,QH,e),ju(UH,QH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e=iN(),t=kF){const n=Qw(Yn(e),OR).getImmediate({identifier:t}),a=SO("functions");return a&&pFe(n,...a),n}function pFe(e,t,r){aFe(Yn(e),t,r)}function iv(e,t,r){return sFe(Yn(e),t)}mFe();const HH=Lt(tn,"usuarios");async function pre(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",HH);const e=await Za(HH);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(r=>{const n=r.data();return console.log(" [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const VH=Object.values(Yt),BT=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",gFe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!1),[a,s]=T.useState("Usuarios"),[i,o]=T.useState({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=T.useState(null),[d,f]=T.useState(""),[h,p]=T.useState(""),[g,v]=T.useState(""),[b,y]=T.useState(null),[C,S]=T.useState(null),[I,N]=T.useState(null),B=T.useCallback(async()=>{n(!0);try{const H=await pre();t(H)}catch(H){console.error("Error al cargar usuarios",H),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);T.useEffect(()=>{B()},[B]);const w=T.useCallback(H=>{const{name:z,value:q}=H.target;o(re=>({...re,[z]:q,curso:z==="profile"&&q!==Yt.ESTUDIANTE?"":re.curso,cursos:z==="profile"&&q!==Yt.PROFESORADO?[]:re.cursos,asignaturas:z==="profile"&&q!==Yt.PROFESORADO?[]:re.asignaturas}))},[]),_=T.useCallback((H,z)=>{o(q=>{const re=q[H]||[],P=re.includes(z)?re.filter(K=>K!==z):[...re,z];return{...q,[H]:P}})},[]),F=T.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),U=T.useCallback(async H=>{H.preventDefault(),y(null);const{nombreCompleto:z,email:q,profile:re,curso:P,password:K}=i;if(!z.trim()||!q.trim()){y("Nombre Completo y Email son obligatorios.");return}if(re===Yt.ESTUDIANTE&&!P){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(K!=null&&K.trim())){y("La contrasea es obligatoria al crear un nuevo usuario.");return}const Y=wb();try{if(l){const te=iv(Y,"updateUser"),ie={...i,password:(K==null?void 0:K.trim())||void 0,curso:re===Yt.ESTUDIANTE?BT(P||""):void 0};await te(ie)}else{const te=iv(Y,"createUser"),ie={...i,curso:re===Yt.ESTUDIANTE?BT(P||""):void 0};await te(ie)}await B(),F()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,l,B,F]),D=T.useCallback(H=>{u(H.email),o({nombreCompleto:H.nombreCompleto,email:H.email,rut:H.rut||"",profile:H.profile,password:"",curso:H.curso||"",cursos:H.cursos||[],asignaturas:H.asignaturas||[]}),setTimeout(()=>{const z=document.querySelector("form");z&&z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),k=T.useCallback(async H=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${H}? Esta accin es irreversible.`))try{const z=wb();await iv(z,"deleteUser")({email:H}),await B()}catch(z){console.error("Error al eliminar usuario:",z),y(z.message||"No se pudo borrar el usuario.")}},[B]),L=async H=>{var K;const z=(K=H.target.files)==null?void 0:K[0];if(!z)return;S({message:"Procesando archivo...",isError:!1});const q=wb(),re=iv(q,"createUser"),P=new FileReader;P.onload=async Y=>{var te;try{const ie=new Uint8Array((te=Y.target)==null?void 0:te.result),Ae=pw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=Su.sheet_to_json(oe);if(ce.length===0){S({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(_e=>{const he=_e.Nombre||_e.nombre,je=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Curso||_e.curso,Xe=_e.RUT||_e.rut;return!he||!je||!He?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):re({nombreCompleto:String(he).trim(),email:String(je).trim(),profile:Yt.ESTUDIANTE,curso:BT(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:je,error:ye.message}))}),Ie=await Promise.all(pe),ne=Ie.filter(_e=>!_e.error).length,Se=Ie.filter(_e=>_e.error);let De=`Carga completada. ${ne} estudiantes agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),S({message:De,isError:Se.length>0}),await B()}catch(ie){S({message:`Error: ${ie.message}`,isError:!0})}},P.readAsArrayBuffer(z),H.target.value=""},R=async H=>{var K;const z=(K=H.target.files)==null?void 0:K[0];if(!z)return;N({message:"Procesando archivo...",isError:!1});const q=wb(),re=iv(q,"createUser"),P=new FileReader;P.onload=async Y=>{var te;try{const ie=new Uint8Array((te=Y.target)==null?void 0:te.result),Ae=pw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=Su.sheet_to_json(oe);if(ce.length===0){N({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(_e=>{const he=_e.Nombre||_e.nombre,je=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Perfil||_e.perfil||_e.Profile||_e.profile,Xe=_e.RUT||_e.rut;return!he||!je||!He?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):re({nombreCompleto:String(he).trim(),email:String(je).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:je,error:ye.message}))}),Ie=await Promise.all(pe),ne=Ie.filter(_e=>!_e.error).length,Se=Ie.filter(_e=>_e.error);let De=`Carga completada. ${ne} usuarios agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),N({message:De,isError:Se.length>0}),await B()}catch(ie){N({message:`Error: ${ie.message}`,isError:!0})}},P.readAsArrayBuffer(z),H.target.value=""},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=T.useMemo(()=>Array.from(new Set(e.filter(H=>H.profile===Yt.ESTUDIANTE&&H.curso).map(H=>H.curso))).sort(),[e]),Z=T.useMemo(()=>e.filter(H=>(d===""||H.nombreCompleto.toLowerCase().includes(d.toLowerCase())||H.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||H.profile===h)&&(g===""||H.curso===g)),[e,d,h,g]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),C&&c.jsx("p",{className:`text-sm mt-2 ${C.isError?"text-red-600":"text-green-600"}`,children:C.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),I&&c.jsx("p",{className:`text-sm mt-2 ${I.isError?"text-red-600":"text-green-600"}`,children:I.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:U,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:w,className:X,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:w,className:X,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:w,placeholder:l?"Dejar en blanco para no cambiar":"Contrasea temporal",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:w,placeholder:"12.345.678-9",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:w,className:X,required:!0,children:VH.map(H=>c.jsx("option",{value:H,children:H},H))})]}),i.profile===Yt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:w,className:X,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),i.profile===Yt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ns.map(H=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.cursos)==null?void 0:z.includes(H))||!1,onChange:()=>_("cursos",H),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),i.profile===Yt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(H=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.asignaturas)==null?void 0:z.includes(H))||!1,onChange:()=>_("asignaturas",H),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:F,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const H=wb(),q=await iv(H,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",q),y(" Custom claim agregado exitosamente")}catch(H){console.error(" Error al agregar custom claim:",H),y(`Error: ${H.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var H,z,q,re,P;try{const{auth:K}=await Sx(async()=>{const{auth:ie}=await Promise.resolve().then(()=>tZ);return{auth:ie}},void 0);console.log(" Usuario actual:",(H=K.currentUser)==null?void 0:H.email);const Y=await((z=K.currentUser)==null?void 0:z.getIdToken(!0));console.log(" Token refreshed:",!!Y);const te=await((q=K.currentUser)==null?void 0:q.getIdTokenResult());console.log(" Claims completos:",te==null?void 0:te.claims),console.log(" Profile claim:",(re=te==null?void 0:te.claims)==null?void 0:re.profile),((P=te==null?void 0:te.claims)==null?void 0:P.profile)==="SUBDIRECCION"?y(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(` Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(K){console.error(" Error verificando token:",K),y(`Error verificando token: ${K.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:H=>f(H.target.value),className:X})}),c.jsx("div",{children:c.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),VH.map(H=>c.jsx("option",{value:H,children:H},H))]})}),c.jsx("div",{children:c.jsxs("select",{value:g,onChange:H=>v(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),V.map(H=>c.jsx("option",{value:H,children:H},H))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:H.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:H.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.profile===Yt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":H.profile===Yt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:H.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[H.profile===Yt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:H.curso||"Sin curso"}),H.profile===Yt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[H.cursos&&H.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.cursos.slice(0,3).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:z},z)),H.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.cursos.length-3]})]})]}),H.asignaturas&&H.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.asignaturas.slice(0,2).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:z},z)),H.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.asignaturas.length-2]})]})]}),(!H.cursos||H.cursos.length===0)&&(!H.asignaturas||H.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),H.profile!==Yt.ESTUDIANTE&&H.profile!==Yt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(H),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>k(H.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},H.email))})]}),Z.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&c.jsx(XIe,{})]})},jx="seguimiento_dual_records",vFe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},xFe=e=>{const t=tr(Lt(_t,jx),Gr("nombreEstudiante","asc"));return xr(t,n=>{const a=n.docs.map(s=>vFe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},MS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=hr.fromDate(new Date(t[n]+"T00:00:00")))}),t},bFe=async e=>{try{const t=MS(e);return(await Zn(Lt(_t,jx),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},zH=async(e,t)=>{try{const r=mr(_t,jx,e),n=MS(t);await Ji(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},yFe=async e=>{try{const t=mr(_t,jx,e);await Is(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},wFe=async e=>{const t=Zw(_t),r=Lt(_t,jx);let n=0,a=0;for(const s of e){const i=tr(r,_n("rutEstudiante","==",s.rutEstudiante)),o=await Za(i);if(o.empty){const l=mr(r);t.set(l,MS(s)),a++}else{const l=o.docs[0].id,u=mr(_t,jx,l);t.set(u,MS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},EFe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},CFe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},_Fe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},SFe=({record:e,onSave:t,onClose:r})=>{const[n,a]=T.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:f,checked:h}=l.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),c.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),c.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),c.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},NFe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),a=T.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:wp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:eT[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=T.useState(a),[o,l]=T.useState(null),[u,d]=T.useState(""),[f,h]=T.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=T.useState(null),[v,b]=T.useState(null),[y,C]=T.useState(!1),[S,I]=T.useState(null);T.useEffect(()=>{n(!0);const H=xFe(z=>{t(z),n(!1)});return()=>H()},[]);const N=T.useCallback(H=>{const{name:z,value:q}=H.target;i(re=>({...re,[z]:q}))},[]),B=T.useCallback(H=>{const{name:z,value:q}=H.target;h(re=>({...re,[z]:q}))},[]),w=T.useCallback(()=>{i(a),l(null),g(null)},[a]),_=async H=>{H.preventDefault(),g(null);const q=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(re=>{var P;return!((P=s[re])!=null&&P.trim())});if(q){g(`El campo '${q}' es obligatorio.`);return}try{o?await zH(o,s):await bFe(s),w()}catch(re){console.error(re),g("No se pudo guardar el registro.")}},F=T.useCallback(H=>{window.scrollTo({top:0,behavior:"smooth"}),l(H.id),i(H)},[]),U=async H=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await yFe(H)}catch(z){console.error(z),g("No se pudo eliminar el registro.")}},D=H=>{I(H),C(!0)},k=()=>{I(null),C(!1)},L=async H=>{try{await zH(H.id,H),k()}catch(z){console.error(z),alert("No se pudieron guardar los cambios de supervisin.")}},R=()=>{const H=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],z=Su.aoa_to_sheet([H]),q=Su.book_new();Su.book_append_sheet(q,z,"Plantilla"),TR(q,"Plantilla_Seguimiento_Dual.xlsx")},X=H=>{var re;const z=(re=H.target.files)==null?void 0:re[0];if(!z)return;b({message:"Procesando archivo...",isError:!1});const q=new FileReader;q.onload=async P=>{var K;try{const Y=new Uint8Array((K=P.target)==null?void 0:K.result),te=pw(Y,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ie=te.SheetNames[0],Ae=te.Sheets[ie],oe=Su.sheet_to_json(Ae,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo est vaco.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},pe=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(De=>!pe.includes(De));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const Se=oe.map((De,_e)=>{try{const he={};for(const je in De){const He=ce[je.trim().toLowerCase()];if(He){let Xe=De[je];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=CFe(Xe),Xe&&(he[He]=Xe)):He.includes("realizada")?he[He]=_Fe(Xe):Xe!=null&&Xe!==""&&(he[He]=String(Xe).trim())}}return!he.nombreEstudiante||!he.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):he}catch(he){return console.error(`Error procesando fila ${_e+2}:`,he),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",Se),Se.length>0){const{updated:De,created:_e}=await wFe(Se);b({message:`Carga exitosa. ${_e} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Y){console.error("Error completo:",Y),b({message:`Error al procesar el archivo: ${Y.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},q.readAsArrayBuffer(z)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=T.useMemo(()=>e.filter(H=>(u===""||H.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||H.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||H.rutEstudiante.includes(u))&&(f.curso===""||H.curso===f.curso)&&(f.empresa===""||H.nombreEmpresa===f.empresa)&&(f.estado===""||H.estado===f.estado)&&(f.comuna===""||H.comuna===f.comuna)&&(f.profesor===""||H.profesorTutorEmpresa===f.profesor)).sort((H,z)=>H.nombreEstudiante.localeCompare(z.nombreEstudiante)),[e,u,f]);return T.useMemo(()=>{const H=new Set,z=new Set;return e.forEach(q=>{q.nombreEmpresa&&H.add(q.nombreEmpresa),q.comuna&&z.add(q.comuna)}),{empresas:Array.from(H).sort(),comunas:Array.from(z).sort()}},[e]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),c.jsxs("form",{onSubmit:_,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:N,className:V,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:N,className:V,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:s.curso,onChange:N,className:V,required:!0,children:wp.map(H=>c.jsx("option",{value:H,children:H},H))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:N,className:V,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),WI.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:N,className:V,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:N,className:V})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:N,className:V})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:N,className:V})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:s.estado,onChange:N,className:V,children:eT.map(H=>c.jsx("option",{value:H,children:H},H))})]})]}),s.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:N,className:`${V} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:N,className:`${V} border-red-300`})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:R,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),v&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${v.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:v.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:H=>d(H.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:f.curso,onChange:B,className:V,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),wp.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"estado",value:f.estado,onChange:B,className:V,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),eT.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"profesor",value:f.profesor,onChange:B,className:V,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),WI.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:H.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:H.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${EFe[H.estado]}`,children:H.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>D(H),className:"text-blue-600 hover:underline",children:"Supervisin"}),c.jsx("button",{onClick:()=>F(H),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>U(H.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},H.id))})]})})]}),y&&S&&c.jsx(SFe,{record:S,onClose:k,onSave:L})]})},gre="actividades_remotas",vre="respuestas_actividades",xre="pruebas_estandarizadas",kFe="usuarios",bre=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},DR=e=>{const t=bre(e);return t?t.toISOString():void 0},US=e=>{const t=bre(e);return t?t.toISOString().split("T")[0]:void 0},yre=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:hr.fromDate(t)},wre=e=>hr.fromDate(new Date(e||new Date().toISOString())),BFe=e=>!!e&&/^data:/.test(e),vw=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(vw);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=vw(n))}),t},TFe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL invlida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},jFe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:DR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:US(t.plazoEntrega)||US(new Date)}},IFe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:DR(t.fechaCompletado)||new Date().toISOString()}},FFe=e=>{const t=e.data()||{};return{id:e.id,...t}},OFe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:DR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:US(t.plazoEntrega)||US(new Date)}},DFe=e=>{const t=tr(Lt(_t,gre),Gr("fechaCreacion","desc"));return xr(t,r=>e(r.docs.map(jFe)),r=>{console.error("subscribeToActividades error:",r),e([])})},RFe=(e,t)=>{const r=Lt(_t,vre),n=tr(r,Gr("fechaCompletado","desc"));return xr(n,a=>e(a.docs.map(IFe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},PFe=e=>{const t=tr(Lt(_t,kFe),Gr("nombreCompleto","asc"));return xr(t,r=>e(r.docs.map(FFe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},LFe=e=>{const t=tr(Lt(_t,xre),Gr("fechaCreacion","desc"));return xr(t,r=>e(r.docs.map(OFe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},MFe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=vw({...a,fechaCreacion:wre(r),plazoEntrega:yre(n)});return(await Zn(Lt(_t,gre),s)).id},UFe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=vw({...a,fechaCreacion:wre(r),plazoEntrega:yre(n)});return(await Zn(Lt(_t,xre),s)).id},QFe=async(e,t)=>{const r=vw(t);await vh(mr(_t,vre,e),r)},HFe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},VFe=async(e,t,r)=>{const{bytes:n,contentType:a}=TFe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),o=`recursos/${r}/${s}/${i}`,l=RN(nye,o);await ZJ(l,n,{contentType:a});const u=await BD(l);return{nombre:t,url:u}},zFe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(BFe(i==null?void 0:i.url)){const l=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return VFe(i.url,l,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return MFe(a)},TT=e=>e?new Date(e).toLocaleDateString("es-CL"):"",$Fe=e=>e?new Date(e).toLocaleString("es-CL"):"",GFe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),Wa=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},oi=(e,t)=>{if(t&&Wa(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>oi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rbrica de evaluacin]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ll=(e,t,...r)=>{if(Wa(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=oi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Pa=({content:e,context:t="unknown"})=>{try{const r=oi(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}},jT={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3,4,5]},IT=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],KFe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState([]),[l,u]=T.useState(null),[d,f]=T.useState(null),[h,p]=T.useState(!1),[g,v]=T.useState(!1),[b,y]=T.useState(!1),[C,S]=T.useState(!1),[I,N]=T.useState(!1),[B,w]=T.useState(!0),[_,F]=T.useState(null),[U,D]=T.useState(""),[k,L]=T.useState(null),[R,X]=T.useState(null),[V,Z]=T.useState([]),[H,z]=T.useState("actividades"),[q,re]=T.useState(null),[P,K]=T.useState([]),[Y,te]=T.useState(""),ie={asignatura:qi[0],nivel:Dv[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[Ae,oe]=T.useState(ie),ce={asignatura:qi[0],nivel:Dv[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[pe,Ie]=T.useState(ce);T.useEffect(()=>{w(!0);const vt=DFe(t),pt=LFe(n),Je=RFe(s),gt=PFe(dt=>{o(dt),w(!1)});return()=>{vt(),pt(),Je(),gt()}},[]);const ne=vt=>{oe(pt=>({...pt,[vt.target.name]:vt.target.value}))},Se=vt=>{Ie(pt=>({...pt,[vt.target.name]:vt.target.value}))},De=vt=>{oe(pt=>({...pt,recursos:{...pt.recursos,[vt.target.name]:vt.target.value}}))},_e=vt=>{vt.target.files&&Z(Array.from(vt.target.files))},he=vt=>{oe(pt=>{const Je=pt.tipos.includes(vt)?pt.tipos.filter(dt=>dt!==vt):[...pt.tipos,vt],gt={...pt.cantidadPreguntas};return Je.includes(vt)?gt[vt]||(gt[vt]=jT[vt][0]):delete gt[vt],{...pt,tipos:Je,cantidadPreguntas:gt}})},je=(vt,pt)=>{oe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[vt]:pt}}))},He=(vt,pt=!1)=>{(pt?Ie:oe)(gt=>{const dt=gt.cursosDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,cursosDestino:Dt}})},Xe=(vt,pt=!1)=>{(pt?Ie:oe)(gt=>{const dt=gt.estudiantesDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,estudiantesDestino:Dt}})},ye=()=>{const{tipos:vt,contenido:pt,asignatura:Je,nivel:gt,cantidadPreguntas:dt}=Ae;let Dt=`Eres un experto diseador de actividades pedaggicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${pt}"
Asignatura: ${Je}
Nivel: ${gt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return vt.forEach(zt=>{const Pr=dt[zt]||jT[zt][0];switch(zt){case"Quiz":Dt+=`- "Quiz": Array de ${Pr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensin de Lectura":Dt+=`- "Comprensin de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${Pr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Trminos Pareados":Dt+=`- "Trminos Pareados": Array de ${Pr} { concepto, definicion }
`;break;case"Desarrollo":Dt+=`- "Desarrollo": Array de ${Pr} { pregunta, rubrica }
`;break}}),Dt},Oe=()=>{const{contenido:vt,objetivosAprendizaje:pt,asignatura:Je,nivel:gt}=pe;return`Eres experto en evaluacin educativa y diseo de pruebas SIMCE.
Responde SOLO con JSON vlido.

INFORMACIN:
- Asignatura: ${Je}
- Nivel: ${gt}
- Contenido: ${vt}
- Objetivos: ${pt}

{
  "titulo": "Ttulo",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opcin A", "Opcin B", "Opcin C", "Opcin D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar informacin",
      "justificacion": "Breve explicacin",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicacin"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades vlidas: ${IT.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function Pe(vt,pt){if(console.log(` Adaptando contenido para ${vt}:`,pt),Wa(pt,`autoAdaptContent-${vt}`),vt==="Desarrollo"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Wa(Je,`desarrollo-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return dt?{pregunta:Ll(dt[1],`desarrollo-pregunta-${gt}`),rubrica:Ll(dt[2],`desarrollo-rubrica-${gt}`)}:{pregunta:Ll(Je,`desarrollo-pregunta-simple-${gt}`),rubrica:""}}if(Je&&typeof Je=="object"){const dt=Ll(Je,`desarrollo-obj-pregunta-${gt}`,"pregunta","Pregunta","texto");let Dt="";if(Je.rubrica||Je.Rubrica||Je.rbrica||Je.Rbrica){const zt=Je.rubrica||Je.Rubrica||Je.rbrica||Je.Rbrica;Dt=oi(zt,`desarrollo-rubrica-${gt}`)}return{pregunta:dt,rubrica:Dt}}return{pregunta:oi(Je,`desarrollo-fallback-${gt}`),rubrica:""}});if(vt==="Trminos Pareados"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Wa(Je,`pareados-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.+?)[\s:-]+(.+)$/);return dt?{id:gt,concepto:Ll(dt[1],`pareados-concepto-${gt}`),definicion:Ll(dt[2],`pareados-definicion-${gt}`)}:{id:gt,concepto:Ll(Je,`pareados-concepto-simple-${gt}`),definicion:""}}return Je&&typeof Je=="object"?{id:gt,concepto:Ll(Je,`pareados-obj-concepto-${gt}`,"concepto","termino"),definicion:Ll(Je,`pareados-obj-definicion-${gt}`,"definicion","significado")}:{id:gt,concepto:oi(Je,`pareados-fallback-${gt}`),definicion:""}});if(vt==="Comprensin de Lectura"){if(Wa(pt,"comprension-lectura-input"),pt&&typeof pt=="object"&&!Array.isArray(pt)&&Array.isArray(pt.preguntas))return{texto:Ll(pt,"comprension-texto","texto"),preguntas:pt.preguntas.map((Je,gt)=>(Wa(Je,`comprension-pregunta-${gt}`),{pregunta:Ll(Je,`comprension-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>oi(dt,`comprension-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`comprension-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(pt)){const Je=pt.map((dt,Dt)=>Ll(dt,`comprension-bloque-${Dt}`,"texto")).join(`

---

`),gt=pt.flatMap((dt,Dt)=>(Wa(dt,`comprension-bloque-preguntas-${Dt}`),Array.isArray(dt.preguntas)?dt.preguntas:[]));return{texto:Je,preguntas:gt.map((dt,Dt)=>(Wa(dt,`comprension-combined-pregunta-${Dt}`),{pregunta:Ll(dt,`comprension-combined-pregunta-${Dt}`,"pregunta"),opciones:Array.isArray(dt.opciones)?dt.opciones.map((zt,Pr)=>oi(zt,`comprension-combined-opcion-${Dt}-${Pr}`)):[],respuestaCorrecta:oi(dt.respuestaCorrecta,`comprension-combined-respuesta-${Dt}`),puntaje:typeof dt.puntaje=="number"?dt.puntaje:1}))}}}return vt==="Quiz"&&Array.isArray(pt)?pt.map((Je,gt)=>(Wa(Je,`quiz-item-${gt}`),{pregunta:Ll(Je,`quiz-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>oi(dt,`quiz-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`quiz-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):pt}const qe=async vt=>{var pt;if(vt.preventDefault(),!Ae.contenido.trim()||Ae.tipos.length===0){F("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),F(null);try{const Je=await Promise.all(V.map(async cr=>({nombre:cr.name,url:await GFe(cr)}))),gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Dt=new cs(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),zt=ye();let gn=await(await(await Dt.generateContent(zt)).response).text();gn=gn.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const vn=gn.match(/\{[\s\S]*\}/);if(!vn)throw new Error("La IA no devolvi JSON vlido.");const $t=JSON.parse(vn[0]);console.log(" Datos generados por IA:",$t),Wa($t,"generated-data");const rn={};for(const cr of Ae.tipos){const Yr=(pt=$t.actividades)==null?void 0:pt[cr];console.log(` Contenido crudo para ${cr}:`,Yr),Wa(Yr,`raw-content-${cr}`),rn[cr]=Pe(cr,Yr),console.log(` Contenido adaptado para ${cr}:`,rn[cr]),Wa(rn[cr],`adapted-content-${cr}`)}const en={id:"",fechaCreacion:new Date().toISOString(),...Ae,recursos:{...Ae.recursos,archivos:Je},introduccion:oi($t.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:rn};console.log(" Actividad final:",en),Wa(en,"new-actividad"),L(en)}catch(Je){F(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},Ze=async vt=>{if(vt.preventDefault(),!pe.contenido.trim()||!pe.objetivosAprendizaje.trim()){F("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),F(null);try{const pt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",gt=new cs(pt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),dt=Oe();let Pr=await(await(await gt.generateContent(dt)).response).text();Pr=Pr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Xr=Pr.match(/\{[\s\S]*\}/);if(!Xr)throw new Error("No se encontr JSON vlido en la respuesta.");const gn=Xr[0].replace(/,(\s*[}\]])/g,"$1"),vn=JSON.parse(gn);if(!vn.preguntas||!Array.isArray(vn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");const $t=(vn.textos||[]).map((cr,Yr)=>({id:cr.id||Yr+1,titulo:oi(cr.titulo,`texto-titulo-${Yr}`)||`Texto ${Yr+1}`,contenido:oi(cr.contenido,`texto-contenido-${Yr}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(cr.tipo)?cr.tipo:"informativo",palabras:cr.palabras||(cr.contenido?String(cr.contenido).split(" ").length:0)})),rn=vn.preguntas.slice(0,30).map((cr,Yr)=>({numero:cr.numero||Yr+1,pregunta:oi(cr.pregunta,`pregunta-${Yr}`)||`Pregunta ${Yr+1}`,opciones:Array.isArray(cr.opciones)&&cr.opciones.length>=4?cr.opciones.slice(0,4).map((ra,fe)=>oi(ra,`pregunta-opcion-${Yr}-${fe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(cr.respuestaCorrecta)?cr.respuestaCorrecta:"A",habilidad:IT.includes(cr.habilidad)?cr.habilidad:IT[0],justificacion:oi(cr.justificacion,`justificacion-${Yr}`)||"Justificacin no disponible",...cr.textoId&&typeof cr.textoId=="number"?{textoId:cr.textoId}:{}})),en={id:"",fechaCreacion:new Date().toISOString(),...pe,titulo:oi(vn.titulo,"prueba-titulo")||`Prueba ${pe.asignatura}`,instrucciones:oi(vn.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:$t,preguntas:rn};X(en)}catch(pt){F(`Error al generar la prueba: ${(pt==null?void 0:pt.message)||pt}`)}finally{y(!1)}},ot=async()=>{if(k)try{S(!0),await zFe(k),oe(ie),Z([]),p(!1),L(null)}catch(vt){console.error("Error al guardar la actividad con archivos:",vt),F("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{S(!1)}},mt=async()=>{if(R)try{S(!0);const vt={...R,cursosDestino:R.cursosDestino||[],estudiantesDestino:R.estudiantesDestino||[],textos:R.textos||[],preguntas:R.preguntas.map(pt=>({...pt,textoId:pt.textoId||null}))};await UFe(vt),Ie(ce),v(!1),X(null)}catch(vt){console.error("Error al guardar la prueba:",vt),F("No se pudo guardar la prueba.")}finally{S(!1)}},Tt=T.useMemo(()=>{var Je,gt,dt,Dt;const vt=l||d;if(!vt||!i.length)return[];const pt=new Map;if(!((Je=vt.cursosDestino)!=null&&Je.length)&&!((gt=vt.estudiantesDestino)!=null&&gt.length)){const zt=vt.nivel.charAt(0);i.filter(Pr=>{var Xr;return Pr.profile===Yt.ESTUDIANTE&&((Xr=Pr.curso)==null?void 0:Xr.startsWith(zt))}).forEach(Pr=>pt.set(Pr.id,Pr))}else(dt=vt.cursosDestino)!=null&&dt.length&&i.filter(zt=>zt.profile===Yt.ESTUDIANTE&&vt.cursosDestino.includes(zt.curso||"")).forEach(zt=>pt.set(zt.id,zt)),(Dt=vt.estudiantesDestino)!=null&&Dt.length&&i.filter(zt=>zt.profile===Yt.ESTUDIANTE&&vt.estudiantesDestino.includes(zt.nombreCompleto)).forEach(zt=>pt.set(zt.id,zt));return Array.from(pt.values()).sort((zt,Pr)=>zt.nombreCompleto.localeCompare(Pr.nombreCompleto))},[l,d,i]),Mt=T.useMemo(()=>{const vt=(l==null?void 0:l.id)||(d==null?void 0:d.id);return a.filter(pt=>pt.actividadId===vt)},[a,l,d]),Ot=T.useMemo(()=>i.filter(vt=>vt.profile===Yt.ESTUDIANTE).sort((vt,pt)=>vt.nombreCompleto.localeCompare(pt.nombreCompleto)),[i]),Qt=T.useMemo(()=>U.trim()?Ot.filter(vt=>vt.nombreCompleto.toLowerCase().includes(U.toLowerCase())):Ot,[Ot,U]),bt=()=>c.jsxs("div",{className:"flex space-x-1 mb-6",children:[c.jsx("button",{onClick:()=>z("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${H==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>z("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${H==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),Nr=()=>{var vt,pt,Je;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l?c.jsxs(c.Fragment,{children:[c.jsx(Pa,{content:l.asignatura,context:"actividad-asignatura"})," - ",l.tipos.join(", ")]}):c.jsx(Pa,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(l==null?void 0:l.nivel)||(d==null?void 0:d.nivel)," | Plazo:"," ",TT((l==null?void 0:l.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),c.jsx("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((vt=l==null?void 0:l.tipos)==null?void 0:vt.includes("Desarrollo"))&&c.jsx("th",{className:"px-4 py-3"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Tt.map(gt=>{var Dt;const dt=Mt.find(zt=>zt.estudianteId===gt.id);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:gt.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?`${dt.puntaje}/${dt.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:dt?c.jsx("span",{className:parseFloat(dt.nota)>=4?"text-green-600":"text-red-600",children:dt.nota}):"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?$Fe(dt.fechaCompletado):"-"}),((Dt=l==null?void 0:l.tipos)==null?void 0:Dt.includes("Desarrollo"))&&c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("button",{onClick:()=>{var Pr,Xr,gn;re(dt);const zt=Array.from({length:((Xr=(Pr=l.generatedContent)==null?void 0:Pr.Desarrollo)==null?void 0:Xr.length)||0},(vn,$t)=>({index:$t,puntaje:0,observacion:""}));K(zt),te(((gn=dt==null?void 0:dt.revisionDocente)==null?void 0:gn.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):c.jsx("span",{className:"text-slate-400",children:"-"})})]},gt.id)})})]})})]}),q&&((pt=l==null?void 0:l.tipos)==null?void 0:pt.includes("Desarrollo"))&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisin de Desarrollo  ",(q==null?void 0:q.estudianteNombre)||""]}),c.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=l.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((gt,dt)=>{var Dt,zt;return console.log(` Renderizando item desarrollo ${dt}:`,gt),Wa(gt,`revision-item-${dt}`),c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`revision-pregunta-${dt}`})]}),gt.rubrica&&c.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[c.jsx("strong",{children:"Rbrica:"})," ",c.jsx(Pa,{content:gt.rubrica,context:`revision-rubrica-${dt}`})]}),c.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[c.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),c.jsx("input",{type:"number",min:0,step:.5,value:((Dt=P[dt])==null?void 0:Dt.puntaje)??0,onChange:Pr=>{const Xr=Number(Pr.target.value)||0;K(gn=>{const vn=[...gn];return vn[dt]={...vn[dt]||{index:dt,puntaje:0},puntaje:Xr},vn})},className:"w-24 border-slate-300 rounded-md"}),c.jsx("input",{type:"text",placeholder:"Observacin (opcional)",value:((zt=P[dt])==null?void 0:zt.observacion)||"",onChange:Pr=>{const Xr=Pr.target.value;K(gn=>{const vn=[...gn];return vn[dt]={...vn[dt]||{index:dt,puntaje:0},observacion:Xr},vn})},className:"flex-1 border-slate-300 rounded-md"})]})]},dt)})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{rows:3,value:Y,onChange:gt=>te(gt.target.value),className:"w-full border-slate-300 rounded-md"})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>{re(null),K([]),te("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:async()=>{if(q)try{N(!0);const gt=Number(q.puntaje)||0,dt=Number(q.puntajeMaximo)||0,Dt=(P||[]).reduce((Xr,gn)=>Xr+(Number(gn.puntaje)||0),0),zt=gt+Dt,Pr=HFe(zt,dt);await QFe(q.id,{puntaje:zt,puntajeMaximo:dt,nota:Pr,revisionDocente:{completada:!0,observacionesGenerales:Y||"",detalle:P||[],puntajeDocente:Dt}}),re(null),K([]),te("")}catch(gt){console.error("Error guardando revisin:",gt),F("No se pudo guardar la revisin del docente.")}finally{N(!1)}},disabled:I,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:I?"Guardando...":"Guardar Revisin"})]})]})})]})},rr=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad."}),c.jsxs("form",{onSubmit:qe,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:Ae.asignatura,onChange:ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:Ae.nivel,onChange:ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:Dv.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),c.jsx("textarea",{name:"instrucciones",value:(vt=Ae.recursos)==null?void 0:vt.instrucciones,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),c.jsx("textarea",{name:"enlaces",value:(pt=Ae.recursos)==null?void 0:pt.enlaces,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por lnea..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),c.jsx("input",{type:"file",multiple:!0,onChange:_e,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Si no seleccionas nada, ser visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Ns.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.cursosDestino)==null?void 0:gt.includes(Je),onChange:()=>He(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Je})]},Je)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:U,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Qt.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.estudiantesDestino)==null?void 0:gt.includes(Je.nombreCompleto),onChange:()=>Xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:p1e.map(Je=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ae.tipos.includes(Je),onChange:()=>he(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),Ae.tipos.includes(Je)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),jT[Je].map(gt=>c.jsx("button",{type:"button",onClick:()=>je(Je,gt),className:`px-3 py-1 rounded-full font-semibold text-xs ${Ae.cantidadPreguntas[Je]===gt?"bg-amber-500 text-white":"bg-slate-200"}`,children:gt},gt))]})]},Je))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:Ae.contenido,onChange:ne,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:Ae.plazoEntrega,onChange:ne,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),_&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:_}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?"Generando...":"Generar y Previsualizar"})})]})]})},an=()=>{var vt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((vt=k.recursos.archivos)==null?void 0:vt.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((pt,Je)=>pt.trim()&&c.jsx("a",{href:pt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:pt},Je))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(pt=>c.jsx("li",{className:"text-slate-700",children:pt.nombre},pt.nombre))})]})]}),k==null?void 0:k.tipos.map(pt=>{const Je=k.generatedContent[pt];return console.log(` Renderizando preview para ${pt}:`,Je),Wa(Je,`preview-${pt}`),Je?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:pt}),c.jsxs("div",{className:"space-y-4 text-sm",children:[pt==="Quiz"&&Array.isArray(Je)&&Je.map((gt,dt)=>(Wa(gt,`preview-quiz-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-quiz-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(Pa,{content:Dt,context:`preview-quiz-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(Pa,{content:gt.respuestaCorrecta,context:`preview-quiz-respuesta-${dt}`})]})]},dt))),pt==="Comprensin de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:c.jsx(Pa,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((gt,dt)=>(Wa(gt,`preview-lectura-pregunta-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-lectura-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(Pa,{content:Dt,context:`preview-lectura-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(Pa,{content:gt.respuestaCorrecta,context:`preview-lectura-respuesta-${dt}`})]})]},dt)))]}),pt==="Trminos Pareados"&&Array.isArray(Je)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),c.jsx("tbody",{children:Je.map((gt,dt)=>(Wa(gt,`preview-pareado-${dt}`),c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:c.jsx(Pa,{content:gt.concepto,context:`preview-pareado-concepto-${dt}`})}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:c.jsx(Pa,{content:gt.definicion,context:`preview-pareado-definicion-${dt}`})})]},gt.id)))})]})}),pt==="Desarrollo"&&Array.isArray(Je)&&Je.map((gt,dt)=>(console.log(` Renderizando desarrollo ${dt}:`,gt),Wa(gt,`preview-desarrollo-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-desarrollo-pregunta-${dt}`})]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",c.jsx(Pa,{content:gt.rubrica,context:`preview-desarrollo-rubrica-${dt}`})]})]},dt))),(pt==="Quiz"||pt==="Trminos Pareados"||pt==="Desarrollo")&&!Array.isArray(Je)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido para ",c.jsx("strong",{children:pt})," no tiene el formato esperado."]}),pt==="Comprensin de Lectura"&&(!Je||typeof Je!="object"||!Array.isArray(Je.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido de ",c.jsx("strong",{children:"Comprensin de Lectura"})," no tiene el formato esperado."]})]})]},pt):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ot,disabled:C,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:C?"Guardando...":"Confirmar y Asignar"})]})]})},Cr=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(vt=>{var gt,dt;Wa(vt,`lista-actividad-${vt.id}`);const pt=[];(gt=vt.cursosDestino)!=null&&gt.length&&pt.push(`Cursos: ${vt.cursosDestino.join(", ")}`),(dt=vt.estudiantesDestino)!=null&&dt.length&&pt.push(`Estudiantes: ${vt.estudiantesDestino.length}`);const Je=pt.length?pt.join(" | "):`Todo ${vt.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(Pa,{content:vt.asignatura,context:`lista-asignatura-${vt.id}`}),"  ",vt.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",TT(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>u(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Vr=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),c.jsx("button",{onClick:()=>v(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),c.jsxs("form",{onSubmit:Ze,className:"space-y-6 mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:pe.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:pe.nivel,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:Dv.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),c.jsx("textarea",{name:"objetivosAprendizaje",value:pe.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),c.jsx("textarea",{name:"contenido",value:pe.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:pe.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),_&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:_}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400",children:b?"Generando...":"Generar y Previsualizar"})})]})]}),Fn=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin Prueba"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),c.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:c.jsx(Pa,{content:R==null?void 0:R.titulo,context:"preview-prueba-titulo"})}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:R==null?void 0:R.instrucciones,context:"preview-prueba-instrucciones"})})]}),(vt=R==null?void 0:R.textos)!=null&&vt.length?c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),c.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:R.textos.map((Je,gt)=>(Wa(Je,`preview-texto-${gt}`),c.jsxs("li",{children:[c.jsxs("p",{className:"font-semibold",children:[c.jsx(Pa,{content:Je.titulo,context:`preview-texto-titulo-${gt}`}),c.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),c.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:c.jsx(Pa,{content:Je.contenido,context:`preview-texto-contenido-${gt}`})})]},Je.id)))})]}):null,(pt=R==null?void 0:R.preguntas)!=null&&pt.length?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),R.preguntas.slice(0,10).map((Je,gt)=>(Wa(Je,`preview-pregunta-${gt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",c.jsx(Pa,{content:Je.pregunta,context:`preview-pregunta-texto-${gt}`})]}),c.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((dt,Dt)=>c.jsx("li",{children:c.jsx(Pa,{content:dt,context:`preview-pregunta-opcion-${gt}-${Dt}`})},Dt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero)))]}):null]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>X(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:mt,disabled:C,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:C?"Guardando...":"Confirmar y Asignar"})]})]})},Ir=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),c.jsx("button",{onClick:()=>v(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:r.length>0?r.map(vt=>(Wa(vt,`lista-prueba-${vt.id}`),c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:c.jsx(Pa,{content:vt.titulo,context:`lista-prueba-titulo-${vt.id}`})}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Nivel: ",vt.nivel," | Creado: ",TT(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>f(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id))):c.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return B?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"animate-fade-in",children:[bt(),R?Fn():k?an():l||d?Nr():H==="pruebas"?g?Vr():Ir():h?rr():Cr()]})},qFe="actividades_remotas",RR="respuestas_actividades",Ere=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},$H=e=>{const t=Ere(e);return t?t.toISOString():void 0},WFe=e=>{const t=Ere(e);return t?t.toISOString().split("T")[0]:void 0},PR=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:$H(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:WFe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:$H(t.fechaCompletado)||t.fechaCompletado}},Ix=(e,t)=>{var n,a;console.error(` Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un ndice en la base de datos. Contacta al administrador.",console.log(" Enlace para crear ndice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},XFe=e=>new Promise(t=>setTimeout(t,e)),YFe=async(e,t=3,r="operacin")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(` Intento ${n} fall en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(` Reintentando en ${s}ms...`),await XFe(s)}else throw a}throw new Error("Max retries exceeded")},JFe=(e,t,r)=>{console.log(" Suscribindose a actividades disponibles para:",e.nombreCompleto);const n=tr(Lt(_t,qFe),Gr("fechaCreacion","desc"));return xr(n,{next:s=>{try{console.log(" Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>PR(l)).filter(l=>{var u,d,f,h,p;if(!((u=l.cursosDestino)!=null&&u.length)&&!((d=l.estudiantesDestino)!=null&&d.length)){const g=l.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=l.cursosDestino)!=null&&h.includes(e.curso||"")||(p=l.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log(" Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error(" Error procesando datos de actividades:",i);const o=Ix(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=Ix(s,"suscripcin a actividades");r==null||r(i)}})},ZFe=(e,t,r)=>{console.log(" Suscribindose a respuestas del estudiante:",e);const n=tr(Lt(_t,RR),_n("estudianteId","==",e),Gr("fechaCompletado","desc"));return xr(n,{next:s=>{try{console.log(" Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const l=PR(o);return console.log(` Respuesta ${o.id}:`,{actividadId:l.actividadId,puntaje:l.puntaje,nota:l.nota,requiereRevision:l.requiereRevisionDocente,revisionCompletada:(u=l.revisionDocente)==null?void 0:u.completada,fechaCompletado:l.fechaCompletado}),l});console.log(" Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error(" Error procesando respuestas:",i);const o=Ix(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=Ix(s,"suscripcin a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log(" Error de ndice detectado, intentando consulta alternativa..."),e6e(e,t,r);r==null||r(i)}})},e6e=(e,t,r)=>{console.log(" Usando consulta alternativa sin ordenamiento...");const n=tr(Lt(_t,RR),_n("estudianteId","==",e));return xr(n,{next:s=>{try{console.log(" Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>PR(o)).sort((o,l)=>new Date(l.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log(" Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error(" Error procesando respuestas (alternativa):",i);const o=Ix(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=Ix(s,"suscripcin alternativa a respuestas");r==null||r(i)}})},t6e=async e=>YFe(async()=>{console.log(" Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:hr.fromDate(new Date(e.fechaCompletado))},r=await Zn(Lt(_t,RR),t);return console.log(" Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),r6e=.6,n6e=(e,t,r=r6e,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},BF=({className:e="w-5 h-5"})=>c.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a6e=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new cs(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(` Intento ${o} de generar feedback con IA`);const l=i6e(e,t);let f=(await(await s.generateContent(l)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(` Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(` Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(l){if(console.log(` Error en intento ${o}:`,l.message),(i=l.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(` Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log(" Todos los intentos fallaron. Procediendo sin IA."),null}return null},s6e=async(e,t,r)=>{console.log(" Iniciando guardado de respuesta...");try{const n=await t6e(e);console.log(" Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await a6e(t,r);if(s){const{updateDoc:i,doc:o}=await Sx(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Cve);return{updateDoc:u,doc:d}},void 0),{db:l}=await Sx(async()=>{const{db:u}=await Promise.resolve().then(()=>tZ);return{db:u}},void 0);return await i(o(l,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log(" Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn(" No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error(" Error crtico al guardar respuesta:",n),n}},vo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},$s=(e,t)=>{if(t&&vo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>$s(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluacin]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},bd=(e,t,...r)=>{if(vo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ui=({content:e,context:t="unknown"})=>{try{const r=$s(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}};function GH(e){if(console.log(" Normalizando lectura:",e),vo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{vo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>$s(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:bd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:$s(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:bd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>bd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(vo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function KH(e){return console.log(" Normalizando pareados:",e),vo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(vo(t,`pareado-${r}`),{izquierda:bd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:bd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(vo(t,`pareado-array-${r}`),{izquierda:bd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:bd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function qH(e){return console.log(" Normalizando desarrollo:",e),vo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(vo(t,`desarrollo-pregunta-${r}`),{enunciado:bd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(vo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(` Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:bd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const i6e=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${$s(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${$s(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${$s(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${$s(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${$s(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedaggico. Actividad de "${$s(e.asignatura,"feedback-prompt-asignatura")}" sobre "${$s(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 prrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "50 palabras, por qu la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},o6e=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=T.useState({}),[s,i]=T.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},l=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],v=n[p];if(console.log(` Procesando tipo: ${p}`,g),vo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensin de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,C)=>(vo(y,`quiz-question-${C}`),{pregunta:bd(y,`quiz-pregunta-${C}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((S,I)=>$s(S,`quiz-opcion-${C}-${I}`)):[],respuestaCorrecta:$s(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${C}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:GH(g).preguntas).forEach((y,C)=>{const S=v==null?void 0:v[C],I=S===y.respuestaCorrecta,N=y.puntaje??1;I&&(u+=N),d+=N,f.items.push({pregunta:y.pregunta,respuestaUsuario:$s(S,`feedback-respuesta-${C}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:I,puntajeObtenido:I?N:0,tipo:p})}),p==="Trminos Pareados"){const b=KH(g),y=v||{};b.forEach((C,S)=>{const I=y[S],N=I===C.derecha,B=C.puntaje??1;N&&(u+=B),d+=B,f.items.push({pregunta:`${C.izquierda}  ?`,respuestaUsuario:$s(I,`pareado-feedback-${S}`)||"No respondida",respuestaCorrecta:C.derecha,esCorrecta:N,puntajeObtenido:N?B:0,tipo:p})})}if(p==="Desarrollo"){const b=qH(g),y=v||{};b.forEach((C,S)=>{const I=$s(y[S],`desarrollo-feedback-${S}`).trim();f.items.push({pregunta:C.enunciado,respuestaUsuario:I||"No respondida",respuestaCorrecta:"Revisin docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:n6e(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:c.jsx(ui,{content:e.asignatura,context:"actividad-asignatura"})}),c.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(ui,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(` Renderizando tipo: ${u}`,d),vo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(vo(h,`render-quiz-question-${p}`),{pregunta:bd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,v)=>$s(g,`render-quiz-opcion-${p}-${v}`)):[],respuestaCorrecta:$s(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),c.jsx("div",{className:"space-y-6",children:f.map((h,p)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",c.jsx(ui,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(ui,{content:g,context:`quiz-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Comprensin de Lectura":{const f=GH(d);return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensin de Lectura"}),c.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:c.jsx(ui,{content:f.texto,context:"lectura-texto"})}),c.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",c.jsx(ui,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(ui,{content:g,context:`lectura-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Trminos Pareados":{const f=KH(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const v=Math.floor(Math.random()*(g+1));[p[g],p[v]]=[p[v],p[g]]}return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Trminos Pareados"}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,v)=>c.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[c.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[v+1,". ",c.jsx(ui,{content:g.izquierda,context:`pareado-izq-${v}`})]}),c.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[v]??"",onChange:b=>o(u,{...h,[v]:b.target.value}),children:[c.jsx("option",{value:"",children:" Selecciona la pareja "}),p.map((b,y)=>c.jsx("option",{value:b,children:$s(b,`pareado-opcion-${v}-${y}`)},y))]})]},`${g.izquierda}-${v}`))})]},u)}case"Desarrollo":{const f=qH(d),h=n[u]||{};return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),c.jsx("div",{className:"space-y-6",children:f.map((p,g)=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",c.jsx(ui,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),c.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta",value:h[g]??"",onChange:v=>o(u,{...h,[g]:v.target.value})})]},g))}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado ser revisado y calificado por tu profesor/a."})]},u)}default:return null}}),c.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:c.jsxs("button",{onClick:l,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?c.jsx(BF,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},l6e=({currentUser:e})=>{var F,U,D;const[t,r]=T.useState(!0),[n,a]=T.useState("list"),[s,i]=T.useState(!1),[o,l]=T.useState([]),[u,d]=T.useState([]),[f,h]=T.useState(null),[p,g]=T.useState(null),[v,b]=T.useState(null),[y,C]=T.useState("connecting");T.useEffect(()=>{console.log(" Iniciando carga de datos para usuario:",e.nombreCompleto);let k=!1,L=!1,R=!1,X=!1;const V=()=>{(k||R)&&(L||X)&&(R&&X?(C("error"),b("Error al cargar datos. Verifica tu conexin e intenta nuevamente.")):C("connected"),r(!1),console.log(" Carga completada - Actividades:",k,"Respuestas:",L))},Z=JFe(e,z=>{console.log(" Actividades recibidas:",z.length),z.forEach((q,re)=>{console.log(`  ${re+1}. ${q.asignatura} (ID: ${q.id})`),vo(q,`actividad-${re}`)}),l(z),k=!0,V()},z=>{console.error(" Error en suscripcin de actividades:",z),R=!0,V()}),H=ZFe(e.id,z=>{console.log(" Respuestas del estudiante recibidas:",z.length),z.forEach((q,re)=>{var P;console.log(`  ${re+1}. Actividad ${q.actividadId} - Nota: ${q.nota} - Fecha: ${q.fechaCompletado}`),(P=q.revisionDocente)!=null&&P.completada&&console.log("     Con revisin docente completada"),vo(q,`respuesta-${re}`)}),d(z),L=!0,V()},z=>{var q;console.error(" Error en suscripcin de respuestas:",z),(q=z.message)!=null&&q.includes("requires an index")&&(console.log(" Detectado error de ndice, intentando consulta alternativa..."),b("Se detect un problema de configuracin. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),X=!0,V()});return()=>{console.log(" Limpiando subscripciones"),Z==null||Z(),H==null||H()}},[e]),T.useEffect(()=>{t||console.log(" ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const S=k=>{console.log(" Iniciando actividad:",k.asignatura),h(k),a("activity"),b(null)},I=k=>{console.log(" Viendo resultado:",k.actividadId);const L=o.find(R=>R.id===k.actividadId);L?(h(L),g(k),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},N=T.useCallback(async(k,L)=>{if(!f)return;console.log(" COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:k.puntaje,nota:k.nota}),a("result"),i(!0),b(null);const R={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...k,retroalimentacionDetallada:L};console.log(" Guardando respuesta...");try{const X=await s6e(R,f,L);console.log(" Respuesta completada con ID:",X.id),g(X),setTimeout(()=>{console.log(" Datos sincronizados")},1500)}catch(X){console.error(" Error crtico al completar actividad:",X),b("Ocurri un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...R,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema tcnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),B=T.useMemo(()=>{if(u.length===0)return new Set;const k=new Set(u.map(L=>L.actividadId));return console.log(" IDs completados calculados:",k.size),k},[u]),w=T.useMemo(()=>{if(o.length===0)return[];const k=o.filter(L=>!B.has(L.id));return console.log(" Actividades pendientes:",k.length),k},[o,B]),_=T.useMemo(()=>{if(u.length===0)return[];const k=u.map(L=>{const R=o.find(X=>X.id===L.actividadId);return{...L,asignatura:(R==null?void 0:R.asignatura)||"Actividad no disponible",tipos:(R==null?void 0:R.tipos)||[]}}).sort((L,R)=>new Date(R.fechaCompletado).getTime()-new Date(L.fechaCompletado).getTime());return console.log(" Historial preparado:",k.length),k},[u,o]);return t?c.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[c.jsx(BF,{className:"w-8 h-8 text-slate-500"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),c.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexin"]})]})]}):y==="error"&&o.length===0&&u.length===0?c.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexin"}),c.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?c.jsx(o6e,{actividad:f,onComplete:N,currentUser:e}):n==="result"&&p?(console.log(" Renderizando resultado:",p),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),c.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",c.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),c.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",c.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),v&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-red-700 font-medium",children:[" ",v]})}),s&&c.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[c.jsx(BF,{className:"w-8 h-8 text-blue-500"}),c.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),c.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&c.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeo "}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-green-700",children:" Principales Logros"}),c.jsx("p",{className:"text-slate-700 mt-1",children:c.jsx(ui,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((F=p.retroalimentacionAI.desafios)==null?void 0:F.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-amber-700",children:" reas de Mejora"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((k,L)=>c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsx("p",{className:"font-semibold text-slate-800",children:c.jsx(ui,{content:k.pregunta,context:`feedback-desafio-pregunta-${L}`})}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(ui,{content:k.explicacionDelError,context:`feedback-desafio-explicacion-${L}`})})]},L))})]}),((D=(U=p.retroalimentacionAI)==null?void 0:U.comentariosDesarrollo)==null?void 0:D.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-sky-700",children:" Retroalimentacin de Desarrollo"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((k,L)=>c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsx("p",{className:"font-semibold text-slate-800",children:c.jsx(ui,{content:k.pregunta,context:`feedback-desarrollo-pregunta-${L}`})}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(ui,{content:k.retroalimentacionBreve,context:`feedback-desarrollo-retro-${L}`})})]},L))})]})]}),p.retroalimentacionDetallada&&c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisin Detallada"}),p.retroalimentacionDetallada.items.map((k,L)=>{const R=k.esCorrecta===null,X=R?"border-slate-400 bg-slate-50":k.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=R?"":k.esCorrecta?"":"";return c.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${X}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[L+1,". ",c.jsx(ui,{content:k.pregunta,context:`feedback-item-pregunta-${L}`})]}),c.jsx("span",{className:"font-bold text-lg",children:V})]}),c.jsxs("div",{className:"mt-2 text-sm pl-4",children:[c.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",c.jsx("span",{className:"font-medium",children:c.jsx(ui,{content:k.respuestaUsuario,context:`feedback-item-respuesta-${L}`})})]}),!R&&!k.esCorrecta&&c.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",c.jsx("span",{className:"font-medium text-green-700",children:c.jsx(ui,{content:k.respuestaCorrecta,context:`feedback-item-correcta-${L}`})})]}),R&&c.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisin docente."})]})]},L)})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&c.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[v&&c.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("p",{className:"text-amber-800",children:[" ",v]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:w.length>0?w.map(k=>c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(ui,{content:k.asignatura,context:`actividad-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",c.jsx(ui,{content:typeof k.plazoEntrega=="string"?k.plazoEntrega:"",context:`actividad-plazo-${k.id}`})]})]}),c.jsx("button",{onClick:()=>S(k),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},k.id)):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Todo al da!"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentacin de las actividades completadas."}),c.jsx("div",{className:"space-y-4",children:_.length>0?_.map(k=>c.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(ui,{content:k.asignatura,context:`completada-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(k.fechaCompletado).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",c.jsx("span",{className:`font-bold text-lg ${parseFloat(k.nota)>=4?"text-green-600":"text-red-600"}`,children:k.nota})]}),c.jsx("button",{onClick:()=>I(k),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},k.id)):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"An no hay historial"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecern aqu."})]})})]})]})},n4="estudiantes_inclusion",c6e="usuarios",Cre=e=>{const t=e.data();return{id:e.id,...t}},u6e=e=>{const t=tr(Lt(_t,n4));return xr(t,n=>{const a=n.docs.map(s=>Cre(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),e([])})},d6e=e=>{const t=tr(Lt(_t,c6e));return xr(t,n=>{const a=n.docs.map(s=>Cre(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},A6e=async e=>{try{return(await Zn(Lt(_t,n4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},f6e=async(e,t)=>{try{const{id:r,...n}=t,a=mr(_t,n4,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},h6e=async e=>{try{const t=mr(_t,n4,e);await Is(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},m6e=({estudiantes:e})=>{const t=T.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.curso]=(l[u.curso]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({curso:l,cantidad:u})).sort((l,u)=>l.curso.localeCompare(u.curso))},[e]),r=T.useMemo(()=>{const o=e.reduce((l,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return l[d]=(l[d]||0)+1,l},{});return Object.entries(o).map(([l,u])=>({nivel:l,cantidad:u})).sort((l,u)=>l.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(l.nivel)-parseInt(u.nivel))},[e]),n=T.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.dificultad]=(l[u.dificultad]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({diagnostico:l,cantidad:u})).sort((l,u)=>u.cantidad-l.cantidad)},[e]),a=T.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),l=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:l}},[e]),s=T.useMemo(()=>e.reduce((o,l)=>o+(l.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),c.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),c.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),c.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),c.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),c.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),c.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,""]}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),c.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]})]})]})},WH=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=T.useState(""),[a,s]=T.useState(""),[i,o]=T.useState(!1),l=T.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=T.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),c.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),c.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>c.jsx("option",{value:f,children:f},f))]})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),c.jsxs("span",{children:["Resultados filtrados: ",l.length]})]}),c.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${l.length} estudiantes disponibles`}),i&&c.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:l.length===0?c.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):c.jsx("div",{className:"divide-y dark:divide-slate-600",children:l.map(f=>c.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),c.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&l.length===1&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),c.jsxs("button",{onClick:()=>d(l[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",l[0].nombreCompleto]})]})]})]})},p6e=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=T.useState(vS[0]),s=()=>r(e,n);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:vS.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},g6e=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=T.useState("intervenciones"),[o,l]=T.useState(e);T.useEffect(()=>l(e),[e]);const[u,d]=T.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=T.useState(f),[g,v]=T.useState({trimestre:"T1",meta:""}),[b,y]=T.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[C,S]=T.useState(null),[I,N]=T.useState(!1),B={motivo:"",acuerdos:"",asistentes:""},[w,_]=T.useState(B),F=()=>{r(o),t()},U=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let ne,Se=!1;u?ne=(o.intervenciones||[]).map(he=>he.id===u.id?{...he,...h}:he):(Se=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=ne.sort((he,je)=>new Date(je.fecha).getTime()-new Date(he.fecha).getTime());if(l(he=>({...he,intervenciones:De})),Se)try{await Xbe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${o.nombre}. Accin: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(` Intervencin registrada y notificacin enviada a ${h.responsable}`)}catch(he){console.error("Error al crear notificacin:",he),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}p(f),d(null)},D=ne=>{d(ne),p({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},k=ne=>{window.confirm("Eliminar esta intervencin?")&&l(Se=>({...Se,intervenciones:(Se.intervenciones||[]).filter(De=>De.id!==ne)}))},L=ne=>{const{name:Se,value:De}=ne.target;l(_e=>({..._e,[Se]:De,fechaActualizacionApoyos:new Date().toISOString()}))},R=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};l(Se=>({...Se,metasProgreso:[...Se.metasProgreso||[],ne]})),v({trimestre:"T1",meta:""})},X=ne=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).map(De=>De.id===ne?{...De,cumplida:!De.cumplida}:De)}))},V=ne=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).filter(De=>De.id!==ne)}))},Z=T.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const Se=ne.filter(he=>he.cumplida).length,De=Math.round(Se/ne.length*100),_e=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:_e}},[o.metasProgreso]),H=T.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),Se=new Date;return Se.setMonth(Se.getMonth()-3),ne<Se},[o.fechaActualizacionApoyos]),z=()=>{if(!b.titulo.trim()||!b.fecha)return;const ne={...b,id:crypto.randomUUID(),resuelta:!1};l(Se=>({...Se,alertas:[...Se.alertas||[],ne].sort((De,_e)=>new Date(De.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},q=ne=>{l(Se=>({...Se,alertas:(Se.alertas||[]).map(De=>De.id===ne?{...De,resuelta:!De.resuelta}:De)}))},re=ne=>{l(Se=>({...Se,alertas:(Se.alertas||[]).filter(De=>De.id!==ne)}))},P=ne=>{ne.target.files&&ne.target.files[0]&&S(ne.target.files[0])},K=()=>{if(!C)return;N(!0);const ne=new FileReader;ne.readAsDataURL(C),ne.onloadend=()=>{const Se={id:crypto.randomUUID(),nombre:C.name,url:ne.result,fechaSubida:new Date().toISOString()};l(De=>({...De,archivos:[Se,...De.archivos||[]]})),S(null),N(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),N(!1)}},Y=ne=>{window.confirm("Eliminar este archivo?")&&l(Se=>({...Se,archivos:(Se.archivos||[]).filter(De=>De.id!==ne)}))},te=()=>{if(!w.motivo.trim()||!w.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...w,id:crypto.randomUUID(),fecha:new Date().toISOString()};l(Se=>({...Se,reuniones:[ne,...Se.reuniones||[]].sort((De,_e)=>new Date(_e.fecha).getTime()-new Date(De.fecha).getTime())})),_(B)},ie=ne=>{window.confirm("Eliminar este registro de reunin?")&&l(Se=>({...Se,reuniones:(Se.reuniones||[]).filter(De=>De.id!==ne)}))},Ae=()=>{var ye,Oe,Pe;const ne=new gr("p","mm","a4"),Se=20,De=ne.internal.pageSize.getWidth(),_e=ne.internal.pageSize.getHeight();let he=Se;const je=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Mdulo Inclusin",Se,15)};je(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,Se,he+10),he+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,Se,he),ne.text(`Dificultad: ${o.dificultad}`,Se,he+6),he+=15;const He=qe=>{he+qe>_e-Se&&(ne.addPage(),je(ne),he=Se)},Xe=qe=>{He(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(qe,Se,he),he+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Xe("Historial de Intervenciones"),vl(ne,{startY:he,head:[["Fecha","Responsable","Accin","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>je(ne)}),he=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){He(30),Xe("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=ne.splitTextToSize(qe,De-Se*2);ne.text(Ze,Se,he),he+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(He(30),Xe("Metas de Progreso"),vl(ne,{startY:he,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>je(ne)}),he=ne.lastAutoTable.finalY+10),(Pe=o.reuniones)!=null&&Pe.length&&(Xe("Reuniones con Apoderados"),vl(ne,{startY:he,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>je(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),c.jsxs("select",{value:h.responsable,onChange:ne=>p(Se=>({...Se,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",h.responsable," cuando se guarde la intervencin"]})]}),c.jsx("textarea",{value:h.accion,onChange:ne=>p(Se=>({...Se,accion:ne.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:ne=>p(Se=>({...Se,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[u&&c.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),c.jsx("button",{onClick:U,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),c.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>D(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),c.jsx("button",{onClick:()=>k(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{children:"No hay intervenciones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ce=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),H&&c.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:ne=>v(Se=>({...Se,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:ne=>v(Se=>({...Se,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:R,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),c.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>X(ne.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),c.jsx("button",{onClick:()=>V(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay metas definidas"}),c.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),pe=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:b.titulo,onChange:ne=>y(Se=>({...Se,titulo:ne.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:ne=>y(Se=>({...Se,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>q(ne.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),c.jsx("button",{onClick:()=>re(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},ne.id)),(!o.alertas||o.alertas.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay alertas programadas"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:P,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),c.jsx("button",{onClick:K,disabled:!C||I,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:I?"Subiendo...":"Subir"}),C&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",C.name]})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:[" ",ne.nombre]}),c.jsx("button",{onClick:()=>Y(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},ne.id)),(!o.archivos||o.archivos.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Ie=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),c.jsx("input",{value:w.motivo,onChange:ne=>_(Se=>({...Se,motivo:ne.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:w.acuerdos,onChange:ne=>_(Se=>({...Se,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:w.asistentes,onChange:ne=>_(Se=>({...Se,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!w.motivo.trim()||!w.asistentes.trim(),children:"Guardar Reunin"})})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[c.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),c.jsx("button",{onClick:()=>ie(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{children:"No hay reuniones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:Ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),c.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>c.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&Ie(),s==="alertas"&&pe()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),c.jsx("button",{onClick:F,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},XH=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState([]),[s,i]=T.useState(!0),[o,l]=T.useState(null),[u,d]=T.useState(null),[f,h]=T.useState(""),[p,g]=T.useState(""),[v,b]=T.useState(""),[y,C]=T.useState("dashboard");T.useEffect(()=>{i(!0);const U=u6e(k=>{r(k),i(!1)}),D=d6e(k=>a(k));return()=>{U(),D()}},[]);const S=async(U,D)=>{if(t.some(L=>L.nombre===U.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const k={nombre:U.nombreCompleto,curso:U.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await A6e(k),alert(` ${U.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},I=async U=>{try{await f6e(U.id,U)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},N=async U=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await h6e(U),(o==null?void 0:o.id)===U&&l(null),alert(" Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},B=U=>{const D=_;if(D.length===0){alert("No hay datos para exportar.");return}const k=D.map(L=>{var R;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N Intervenciones":((R=L.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(X=>!X.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(X=>X.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"ltima Actualizacin":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(U==="xlsx"){const L=Su.json_to_sheet(k),R=Su.book_new();Su.book_append_sheet(R,L,"Estudiantes_Inclusion"),TR(R,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const L=new gr;L.text("Listado de Estudiantes - Programa de Inclusin",14,15),vl(L,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},w=T.useMemo(()=>n.filter(U=>{var D;return U.profile===Yt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(U.curso||""))||e.profile===Yt.SUBDIRECCION)}).filter(U=>!t.some(D=>D.nombre===U.nombreCompleto)),[n,t,e]),_=T.useMemo(()=>t.filter(U=>U.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||U.curso===p)&&(v===""||U.dificultad===v)).sort((U,D)=>U.nombre.localeCompare(D.nombre)),[t,f,p,v]),F=T.useMemo(()=>n.filter(U=>U.profile===Yt.PROFESORADO).map(U=>U.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>C("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),c.jsx("button",{onClick:()=>C("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?c.jsxs("div",{className:"text-center py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),c.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):c.jsxs(c.Fragment,{children:[y==="dashboard"&&c.jsxs("div",{className:"space-y-8",children:[c.jsx(m6e,{estudiantes:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),c.jsx("button",{onClick:()=>C("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),c.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(U=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:U.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[U.curso," - ",U.dificultad]})]}),c.jsx("button",{onClick:()=>l(U),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},U.id)),t.length===0&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),c.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),c.jsx(WH,{estudiantesDisponibles:w,onSelect:U=>d(U)})]})]}),y==="lista"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",_.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>B("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),c.jsx("button",{onClick:()=>B("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),c.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:U=>h(U.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),c.jsxs("select",{value:p,onChange:U=>g(U.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Ns.map(U=>c.jsx("option",{value:U,children:U},U))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),c.jsxs("select",{value:v,onChange:U=>b(U.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),vS.map(U=>c.jsx("option",{value:U,children:U},U))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-blue-600",children:_.length}),c.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-green-600",children:t.length}),c.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((U,D)=>U+(D.alertas||[]).filter(k=>!k.resuelta).length,0)}),c.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(U=>U.curso)).size}),c.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[_.map(U=>{var D;return c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:U.nombre}),(U.alertas||[]).filter(k=>!k.resuelta).length>0&&c.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(U.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[U.curso," - ",U.dificultad]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[c.jsxs("span",{children:[((D=U.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),c.jsxs("span",{children:[(U.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),U.fechaActualizacionApoyos&&c.jsxs("span",{children:["lt. actualizacin: ",new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>l(U),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>N(U.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},U.id)}),_.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||v?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||v)&&c.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),c.jsx(WH,{estudiantesDisponibles:w,onSelect:U=>d(U)})]})]}),u&&c.jsx(p6e,{student:u,onClose:()=>d(null),onConfirm:(U,D)=>{S(U,D),d(null)}}),o&&c.jsx(g6e,{student:o,onClose:()=>l(null),onSave:I,profesores:F})]})},_re="asistencia_dual",v6e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},x6e=(e,t)=>{const r=tr(Lt(_t,_re),_n("emailEstudiante","==",e),Gr("fechaHora","desc"));return xr(r,a=>{const s=a.docs.map(i=>v6e(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},b6e=async e=>{try{const t={...e,fechaHora:hr.fromDate(new Date(e.fechaHora))};await Zn(Lt(_t,_re),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},y6e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),w6e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),E6e=({currentUser:e})=>{const[t,r]=T.useState(e.curso||""),[n,a]=T.useState([]),[s,i]=T.useState(!1),[o,l]=T.useState(!0),[u,d]=T.useState(null);T.useEffect(()=>{if(!e.email){l(!1);return}l(!0);const h=x6e(e.email,p=>{a(p),l(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await b6e(g),d({text:`Marca de ${h} registrada con xito!`,type:"success"})}catch(v){console.error("Error saving record to Firestore:",v),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicacin.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:g=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),wp.map(h=>c.jsx("option",{value:h,children:h},h))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicacin..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?c.jsx(y6e,{}):c.jsx(w6e,{}),h.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},C6e=async()=>{try{console.log(" Debugging users collection...");const e=Lt(tn,"users"),t=tr(e,Ed(10)),r=await Za(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},_6e=async(e,t)=>{var l,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=hr.fromDate(r),s=hr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=Lt(tn,f);try{const p=tr(h,_n("fechaHora",">=",a),_n("fechaHora","<=",s)),g=await Za(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((l=g.docs[0])==null?void 0:l.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let v=!1;for(const b of g)try{const y=tr(h,_n(b,">=",a),_n(b,"<=",s)),C=await Za(y);o[f]={exists:!0,hasDateField:b,count:C.size,sampleDoc:((u=C.docs[0])==null?void 0:u.data())||null},v=!0;break}catch{continue}if(!v){const b=tr(h,Gr("__name__"),Ed(5)),y=await Za(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},S6e=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(` Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=hr.fromDate(a),o=hr.fromDate(s),l=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(` Total registros encontrados: ${h.length}`),h.length>0&&console.log(" Registros por da:",h.reduce((p,g)=>{let v;g.fechaHora instanceof Date?v=g.fechaHora:typeof g.fechaHora=="string"?v=new Date(g.fechaHora):v=new Date;const b=v.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(` Configurando suscripcin para: ${h}`);const p=Lt(tn,h),g=tr(p,_n("fechaHora",">=",i),_n("fechaHora","<=",o),Gr("fechaHora","desc")),v=xr(g,b=>{console.log(` ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(` Registros encontrados en ${h}:`),Array.from(u.keys()).filter(C=>C.startsWith(`${h}_`)).forEach(C=>u.delete(C)),b.docs.forEach((C,S)=>{var I;if(S<5){const N=C.data();let B;(I=N.fechaHora)!=null&&I.toDate?B=N.fechaHora.toDate():typeof N.fechaHora=="string"?B=new Date(N.fechaHora):B=new Date,console.log(`   ${S+1}. ${N.emailEstudiante} - ${B.toLocaleString()} - ${N.tipo}`),console.log(`       Fecha original: ${N.fechaHora} (tipo: ${typeof N.fechaHora})`)}}),b.forEach(C=>{var w;const S=C.data();let I;(w=S.fechaHora)!=null&&w.toDate?I=S.fechaHora.toDate():typeof S.fechaHora=="string"?I=new Date(S.fechaHora):S.fechaHora instanceof Date?I=S.fechaHora:S.fechaHora?I=new Date(S.fechaHora):I=new Date;const N={id:C.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:I,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},B=`${h}_${C.id}`;u.set(B,N)}),d()):console.log(` ${h}: vaca, manteniendo datos existentes`)},b=>{console.warn(` Error con filtro en ${h}:`,b),console.log(` Intentando estrategia alternativa en ${h}...`);const y=tr(p,Ed(200)),C=xr(y,I=>{if(console.log(` ${h} (sin filtro): ${I.size} documentos`),I.size>0){const B=I.docs[0].data();console.log(` Estructura en ${h}:`,Object.keys(B)),console.log(" Primer documento:",B)}const N=I.docs.filter(B=>{var F;const w=B.data();if(!w.fechaHora)return!1;let _;return(F=w.fechaHora)!=null&&F.toDate?_=w.fechaHora.toDate():typeof w.fechaHora=="string"?_=new Date(w.fechaHora):w.fechaHora instanceof Date?_=w.fechaHora:_=new Date(w.fechaHora),_>=a&&_<=s});console.log(` ${h}: ${N.length} registros despus de filtro manual`),N.length>0&&(Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),N.forEach(w=>{var k;const _=w.data();let F;(k=_.fechaHora)!=null&&k.toDate?F=_.fechaHora.toDate():typeof _.fechaHora=="string"?F=new Date(_.fechaHora):_.fechaHora instanceof Date?F=_.fechaHora:F=new Date(_.fechaHora);const U={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:F,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},D=`${h}_${w.id}`;u.set(D,U)}),d())}),S=l.findIndex(I=>I===v);S>=0?l[S]=C:l.push(C)});l.push(v)}catch(p){console.warn(` Error configurando ${h}:`,p)}}),()=>{l.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripcin: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},N6e=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(` Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",l);const u=o.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const l=Lt(tn,o),u=tr(l),d=xr(u,f=>{f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,v,b,y;try{const C=p.data(),S=C.email||C.userEmail||C.mail||C.correo||"",I=C.nombreCompleto||C.displayName||C.name||C.nombre||C.fullName||"",N=C.curso||C.course||C.class||C.grade||"";let B=C.profile||C.role||C.tipo||C.userType||Yt.ESTUDIANTE;if(typeof B=="string"){const F=B.toLowerCase();F.includes("estudiante")||F.includes("student")||F.includes("alumno")?B=Yt.ESTUDIANTE:F.includes("coordinador")||F.includes("coordinator")?B=Yt.COORDINADOR_TP:F.includes("profesor")||F.includes("teacher")||F.includes("docente")?B=Yt.PROFESOR:(F.includes("subdireccion")||F.includes("subdir"))&&(B=Yt.COORDINADOR_TP)}const w={id:p.id,email:S,nombreCompleto:I,curso:N,profile:B,activo:C.activo!==!1,fechaCreacion:((v=(g=C.fechaCreacion)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(C.fechaCreacion)||new Date,ultimaActividad:((y=(b=C.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(C.ultimaActividad)||new Date,...C},_=`${o}_${p.id}`;a.set(_,w)}catch(C){console.warn(`Error procesando documento ${p.id} en ${o}:`,C)}}),s()):console.log(` Coleccin ${o}: vaca`)},f=>{console.warn(` Error en coleccin ${o}:`,f)});n.push(d)}catch(l){console.warn(` Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},k6e=(e,t)=>{try{console.log("Setting up users subscription...");const r=Lt(tn,"users"),n=tr(r);return xr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const v=d.data();console.log(`Processing user doc ${d.id}:`,v);const b=v.email||v.userEmail||v.mail||"",y=v.nombreCompleto||v.displayName||v.name||v.nombre||"",C=v.curso||v.course||v.class||"";let S=v.profile||v.role||v.tipo||Yt.ESTUDIANTE;if(typeof S=="string"){const N=S.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?S=Yt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?S=Yt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?S=Yt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(S=Yt.COORDINADOR_TP)}const I={id:d.id,email:b,nombreCompleto:y,curso:C,profile:S,activo:v.activo!==!1,fechaCreacion:((h=(f=v.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(v.fechaCreacion)||new Date,ultimaActividad:((g=(p=v.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(v.ultimaActividad)||new Date,...v};i.push(I)}catch(v){console.warn(`Error processing user document ${d.id}:`,v)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},iC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},B6e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),T6e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),j6e=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(new Date),[d,f]=T.useState("todos"),[h,p]=T.useState("");T.useEffect(()=>{s(!0),o(null);const B=l.getFullYear(),w=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",B,"Mes:",w);let _=!1,F=!1;const U=()=>{_&&F&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const k=Lt(tn,"asistencia_dual"),L=tr(k,Ed(5)),R=await Za(L);if(console.log(` asistencia_dual - Documentos encontrados: ${R.size}`),R.size>0)R.docs.forEach((X,V)=>{const Z=X.data();console.log(`   ${V+1}. ${X.id.slice(0,8)} - ${Z.emailEstudiante} - ${Z.tipo}`),console.log("      Fecha original:",Z.fechaHora),console.log("      Todos los campos:",Object.keys(Z))});else{console.log(" No se encontraron documentos en asistencia_dual");const X=["asistenciaEmpresa","asistencia_empresa"];for(const V of X)try{const Z=Lt(tn,V),H=tr(Z,Ed(3)),z=await Za(H);if(console.log(` ${V}: ${z.size} documentos`),z.size>0){const q=z.docs[0].data();console.log("   Estructura:",Object.keys(q)),console.log("   Email:",q.emailEstudiante||q.email),console.log("   Fecha:",q.fechaHora||q.fecha)}}catch(Z){console.log(` ${V}: ${Z instanceof Error?Z.message:"Error"}`)}}}catch(k){console.error(" Error en prueba directa:",k),k.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):k.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),_6e(B,w).then(k=>{console.log(" Debug info for collections:",k),Object.entries(k).forEach(([L,R])=>{if(R.exists&&R.totalDocs>0){if(console.log(`
 COLECCIN ${L.toUpperCase()}:`),console.log(`    Total documentos: ${R.totalDocs}`),console.log(`    Documentos del perodo: ${R.count}`),console.log(`    Campo de fecha: ${R.hasDateField}`),R.sampleDoc){console.log("    Documento ejemplo:",R.sampleDoc);const X=R.sampleDoc,V=X.emailEstudiante||X.email||X.userEmail||X.correo||"NO ENCONTRADO",Z=X.tipo||X.type||X.action||X.tipoRegistro||"NO ENCONTRADO",H=X.fechaHora||X.fecha||X.timestamp||X.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${V}`),console.log(`    Tipo registro: ${Z}`),console.log(`    Fecha: ${H}`),console.log("    Todos los campos:",Object.keys(X))}R.filteredDocs&&R.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",R.filteredDocs.length),R.filteredDocs.forEach((X,V)=>{V<3&&console.log(`      ${V+1}. ID: ${X.id}`,X.data)}))}else R.exists?console.log(` Coleccin ${L}: vaca`):console.log(` Coleccin ${L}: no existe`)})}).catch(k=>{console.error("Debug error:",k)}),C6e().then(k=>{console.log(" Debug info for users:",k),(!k.exists||k.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async R=>{var X;try{const V=Lt(tn,R),Z=tr(V,Ed(5)),H=await Za(Z);H.size>0?(console.log(` Encontrada coleccin alternativa: ${R} con ${H.size} documentos`),console.log("Documento muestra:",(X=H.docs[0])==null?void 0:X.data())):console.log(` Coleccin ${R}: vaca`)}catch{console.log(` Coleccin ${R}: no existe`)}}))}).catch(k=>{console.error("Users debug error:",k)});try{console.log("Configurando suscripcin a asistencia...");const k=S6e(B,w,R=>{if(console.log(" Received registros:",R.length),R.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",R[0]);const X=[...new Set(R.map(re=>re.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",X);const V=[...new Set(R.map(re=>re.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",V);const Z=R.reduce((re,P)=>{const K=new Date(P.fechaHora).getDate();return re[K]||(re[K]=[]),re[K].push(P),re},{});console.log(" Registros por da del mes:",Object.keys(Z).map(re=>({dia:parseInt(re),cantidad:Z[parseInt(re)].length})));const H=r.map(re=>re.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",H);const z=X.filter(re=>H.includes(re)),q=X.filter(re=>!H.includes(re));console.log(" Emails que coinciden:",z),console.log(" Emails que NO coinciden:",q)}else console.log(" No se encontraron registros de asistencia para el perodo");t(R),_=!0,U()},R=>{console.error(" Error fetching asistencia:",R),o("Error al cargar datos de asistencia: "+R.message),_=!0,U()});console.log("Configurando suscripcin a usuarios...");const L=N6e(R=>{if(console.log(" Received users (multi-collection):",R.length),R.length>0){console.log("Sample user:",R[0]);const X=R.filter(V=>V.profile===Yt.ESTUDIANTE&&V.curso);console.log("Dual students found:",X.length),X.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(R),F=!0,U()},R=>{console.error(" Error fetching users (multi-collection):",R),console.log(" Intentando con funcin original de usuarios...");const X=k6e(V=>{console.log(" Received users (fallback):",V.length),n(V),F=!0,U()},V=>{console.error(" Error en fallback tambin:",V),o("Error al cargar estudiantes: "+R.message),F=!0,U()})});return()=>{console.log("Limpiando suscripciones..."),k&&k(),L&&L()}}catch(k){console.error(" Error setting up subscriptions:",k),o("Error al inicializar conexiones: "+(k instanceof Error?k.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:g,monthName:v,year:b}=T.useMemo(()=>{const B=l.getFullYear(),w=l.getMonth();return{monthDays:new Date(B,w+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:B}},[l]),y=T.useMemo(()=>{let B=r.filter(w=>w.profile===Yt.ESTUDIANTE&&w.curso&&wp.includes(iC(w.curso)));if(d!=="todos"&&(B=B.filter(w=>iC(w.curso||"")===d)),h&&(B=B.filter(w=>w.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const w=[...new Set(e.map(U=>U.emailEstudiante).filter(Boolean))],_=B.map(U=>U.email),F=w.filter(U=>!_.includes(U));if(F.length>0){console.log(" Agregando estudiantes faltantes con registros:",F);const D=F.map(k=>{const L=e.find(R=>R.emailEstudiante===k);return{id:k,email:k,nombreCompleto:(L==null?void 0:L.nombreEstudiante)||k.split("@")[0],curso:(L==null?void 0:L.curso)||"3C",profile:Yt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(k=>{const L=d==="todos"||iC(k.curso)===d,R=!h||k.nombreCompleto.toLowerCase().includes(h.toLowerCase());return L&&R&&wp.includes(iC(k.curso))});B=[...B,...D]}}return console.log(` Estudiantes filtrados para mostrar: ${B.length}`),B.forEach(w=>{console.log(`   - ${w.nombreCompleto} (${w.curso}) - ${w.email}`)}),B.sort((w,_)=>w.nombreCompleto.localeCompare(_.nombreCompleto))},[r,d,h,e]),C=T.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${y.length}`);const B=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),B):(e.forEach((w,_)=>{const F=w.emailEstudiante;if(!F)return;let U;if(w.fechaHora instanceof Date)U=w.fechaHora;else if(w.fechaHora&&typeof w.fechaHora=="object"&&"toDate"in w.fechaHora)U=w.fechaHora.toDate();else if(typeof w.fechaHora=="string")U=new Date(w.fechaHora);else{console.warn("Fecha no vlida en registro:",w);return}const D=U.getDate(),k=U.getMonth(),L=U.getFullYear();_<3&&console.log(` Registro ${_+1}:`,{email:F,tipo:w.tipo,fechaOriginal:w.fechaHora,fechaProcesada:U.toLocaleString(),ao:L,mes:k,da:D}),B.has(F)||B.set(F,new Map);const R=B.get(F);R.has(D)||R.set(D,{});const X=R.get(D);w.tipo==="Entrada"?(!X.entrada||U<new Date(X.entrada.fechaHora))&&(X.entrada=w):w.tipo==="Salida"&&(!X.salida||U>new Date(X.salida.fechaHora))&&(X.salida=w)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:B.size,estudiantes:Array.from(B.keys()),registrosPorEstudiante:Array.from(B.entries()).map(([w,_])=>({email:w,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((F,U)=>F+(U.entrada?1:0)+(U.salida?1:0),0)}))}),B)},[e]),S=B=>{u(w=>{const _=new Date(w);return _.setMonth(_.getMonth()+B),_})},I=B=>{B!=null&&B.latitud&&(B!=null&&B.longitud)&&window.open(`https://www.google.com/maps?q=${B.latitud},${B.longitud}`,"_blank")},N=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>S(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${v} ${b}`}),c.jsx("button",{onClick:()=>S(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),c.jsxs("select",{value:d,onChange:B=>f(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),wp.map(B=>c.jsx("option",{value:B,children:B},B))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:B=>p(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(B,w)=>{const F=new Date(b,l.getMonth(),w+1).getDay(),U=F===0||F===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${U?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:N[F]}),c.jsx("div",{children:w+1})]},w)})]})}),c.jsx("tbody",{children:y.length>0?y.map(B=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:B.nombreCompleto}),Array.from({length:g},(w,_)=>{var L;const F=_+1,U=(L=C.get(B.email))==null?void 0:L.get(F),D=new Date(b,l.getMonth(),_+1),k=D.getDay()===0||D.getDay()===6;return B.email==="alexis.robles@industrialderecoleta.cl"&&F===2&&console.log(" Verificando da 2 para Alexis:",{email:B.email,day:F,hasDataForStudent:C.has(B.email),studentDayRecords:U,allAttendanceKeys:Array.from(C.keys()),daysForStudent:C.get(B.email)?Array.from(C.get(B.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${k?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(U==null?void 0:U.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return I((R=U.entrada)==null?void 0:R.ubicacion)},children:[c.jsx(B6e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(U.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(U==null?void 0:U.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return I((R=U.salida)==null?void 0:R.ubicacion)},children:[c.jsx(T6e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(U.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},F)})]},B.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},a4="evaluaciones_formativas",s4="calificaciones_formativas",LR="trabajos_grupales_formativos",I6e="usuarios",MR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},F6e=(e,t,r)=>{const n=tr(Lt(_t,a4),_n("curso","==",e),_n("asignatura","==",t),Gr("fecha","asc"));return xr(n,a=>{r(a.docs.map(s=>MR(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},O6e=async(e,t)=>{const r=Zw(_t),n=mr(Lt(_t,a4));r.set(n,{...e,fecha:hr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=mr(_t,s4,n.id);return r.set(a,t),await r.commit(),n.id},D6e=async(e,t)=>{const r=mr(_t,a4,e);await Ji(r,t,{merge:!0})},R6e=async e=>{const t=Zw(_t);t.delete(mr(_t,a4,e)),t.delete(mr(_t,s4,e)),await t.commit()},P6e=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=mr(_t,s4,n);return xr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},L6e=async(e,t)=>{const r=mr(_t,s4,e);await Ji(r,t,{merge:!0})},M6e=(e,t,r)=>{const n=tr(Lt(_t,LR),_n("curso","==",e),_n("asignatura","==",t),Gr("fechaPresentacion","desc"));return xr(n,a=>{r(a.docs.map(s=>MR(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},U6e=async e=>{const t={...e,fechaPresentacion:hr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Zn(Lt(_t,LR),t)},Q6e=async(e,t)=>{const r=mr(_t,LR,e);await Ji(r,t,{merge:!0})},H6e=e=>{const t=tr(Lt(_t,I6e));return xr(t,r=>{e(r.docs.map(n=>MR(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Sre=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Lv={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},Nre=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},V6e=({cursos:e,onSelect:t})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Nre(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),z6e=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Nre(e);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:Lv[s]||Lv.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},$6e=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=T.useState([]),[i,o]=T.useState({}),[l,u]=T.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=T.useState(null),[h,p]=T.useState(null),[g,v]=T.useState(!0),b=T.useMemo(()=>r.filter(_=>_.profile===Yt.ESTUDIANTE&&Sre(_.curso||"")===e).map(_=>_.nombreCompleto).sort((_,F)=>_.localeCompare(F)),[r,e]);T.useEffect(()=>{v(!0);const _=F6e(e,t,F=>{s(F);const U=F.map(k=>k.id),D=P6e(U,k=>{o(L=>({...L,...k}))});return v(!1),()=>D()});return()=>_()},[e,t]);const y=_=>{const{name:F,value:U}=_.target;d?f(D=>D?{...D,[F]:U}:null):u(D=>({...D,[F]:U}))},C=async _=>{if(_.preventDefault(),p(null),!l.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const F={asignatura:t,curso:e,...l},U=b.reduce((D,k)=>(D[k]="trabajado",D),{});try{await O6e(F,U),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluacin.")}},S=(_,F)=>{var L;const U=((L=i[_])==null?void 0:L[F])||"trabajado";let D;U==="trabajado"?D="no trabajado":U==="no trabajado"?D="ausente":D="trabajado";const k={...i,[_]:{...i[_]||{},[F]:D}};o(k),L6e(_,{[F]:D}).catch(R=>{console.error("Error updating grade:",R)})},I=_=>f(_),N=async()=>{if(d)try{await D6e(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(_){console.error(_),p("No se pudo guardar la edicin.")}},B=async _=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await R6e(_)}catch(F){console.error(F),p("No se pudo eliminar la evaluacin.")}},w=T.useCallback(_=>{if(a.length===0)return"-";let F=0,U=0;return a.forEach(D=>{var L;const k=(L=i[D.id])==null?void 0:L[_];k==="trabajado"?(F+=7,U++):k==="no trabajado"&&(F+=2,U++)}),U===0?"-":(F/U).toFixed(1)},[i,a]);return g?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(_=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:N,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:_.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>I(_),className:"text-blue-500 hover:text-blue-700",children:""}),c.jsx("button",{onClick:()=>B(_.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},_.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),a.map(F=>{var k;const U=(k=i[F.id])==null?void 0:k[_];let D;return U==="trabajado"?D=Lv[t]||Lv.Default:U==="no trabajado"?D="":U==="ausente"?D="A":D=Lv[t]||Lv.Default,c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>S(F.id,_),className:`text-3xl transition-opacity duration-200 ${U==="trabajado"?"opacity-100":U==="no trabajado"?"opacity-40":U==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},F.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:w(_)})]},_))})]})})]})},G6e=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=T.useState({}),[h,p]=T.useState(2),g=T.useMemo(()=>r.filter(I=>I.profile===Yt.ESTUDIANTE&&Sre(I.curso||"")===e).sort((I,N)=>I.nombreCompleto.localeCompare(N.nombreCompleto)),[r,e]);T.useEffect(()=>{const I=M6e(e,t,s);return()=>I()},[e,t]),T.useEffect(()=>{if(i){const I={};i.grupos.forEach(N=>{N.integrantes.forEach(B=>{I[B.nombre]={groupNumber:String(N.numero),role:B.rol||""}})}),f(I)}else f({})},[i]);const v=async I=>{if(I.preventDefault(),!l.nombre.trim())return;const N={curso:e,asignatura:t,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await U6e(N),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(B){console.error(B),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const I=new Map;for(const B of g){const w=d[B.nombreCompleto];if(w&&w.groupNumber){const _=parseInt(w.groupNumber,10);isNaN(_)||(I.has(_)||I.set(_,[]),I.get(_).push({nombre:B.nombreCompleto,rol:w.role||""}))}}const N=Array.from(I.entries()).map(([B,w])=>({numero:B,integrantes:w})).sort((B,w)=>B.numero-w.numero);try{await Q6e(i.id,{grupos:N}),alert("Grupos guardados con xito.")}catch(B){console.error(B),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const I=[...g].sort(()=>Math.random()-.5),N={};I.forEach((B,w)=>{var _;N[B.nombreCompleto]={groupNumber:String(w%h+1),role:((_=d[B.nombreCompleto])==null?void 0:_.role)||""}}),f(N)},C=(I,N,B)=>{f(w=>({...w,[I]:{...w[I]||{groupNumber:"",role:""},[N]:B}}))},S=T.useMemo(()=>{const I=new Map;return Object.entries(d).forEach(([N,B])=>{B.groupNumber&&(I.has(B.groupNumber)||I.set(B.groupNumber,[]),I.get(B.groupNumber).push({nombre:N,rol:B.role}))}),Array.from(I.entries()).sort((N,B)=>parseInt(N[0])-parseInt(B[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:h,onChange:I=>p(parseInt(I.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:g.map(I=>{var N;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:I.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((N=d[I.nombreCompleto])==null?void 0:N.groupNumber)||"",onChange:B=>C(I.nombreCompleto,"groupNumber",B.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},I.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.map(([I,N])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",I]}),c.jsx("ul",{className:"space-y-2",children:N.map(B=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:B.nombre}),c.jsxs("select",{value:B.rol||"",onChange:w=>C(B.nombre,"role",w.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),aZ.map(w=>c.jsx("option",{value:w,children:w},w))]})]},B.nombre))})]},I))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:I=>u({...l,nombre:I.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:I=>u({...l,fecha:I.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(I=>c.jsxs("button",{onClick:()=>o(I),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:I.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",I.fechaPresentacion]})]},I.id))]})]})},K6e=({currentUser:e})=>{const[t,r]=T.useState("calificaciones"),[n,a]=T.useState(null),[s,i]=T.useState(null),[o,l]=T.useState([]),[u,d]=T.useState(!0);T.useEffect(()=>{d(!0);const v=H6e(b=>{l(b),d(!1)});return()=>v()},[]);const f=T.useMemo(()=>e.cursos||[],[e.cursos]),h=T.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:v,label:b})=>c.jsx("button",{onClick:()=>r(v),className:`${t===v?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(V6e,{cursos:f,onSelect:a});if(!s)return c.jsx(z6e,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return c.jsx($6e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return c.jsx(G6e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:g()})]})},__=TD(),d2="acompanamientos",TF="ciclos_opr",i4=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},kre=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},q6e=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=kre(r);return`videos_opr/${n}/${a}/${s}`},W6e=async(e,t,r)=>{try{if(console.log(" DEBUG - Storage configurado:",{bucket:__.app.options.storageBucket,app:__.app.name}),console.log(" DEBUG - Path solicitado:",t),!tF.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesin nuevamente.");if(!e)throw new Error("No se proporcion un archivo vlido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Mximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");console.log(" Iniciando subida:",{nombre:e.name,tamao:`${(e.size/1024/1024).toFixed(2)} MB`,tipo:e.type,pathSolicitado:t});let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=q6e(d,f,h)}else{const d=Date.now(),f=kre(e.name);s=`videos_opr/general/${d}_${f}`}console.log(" Path final sanitizado:",s);const o=RN(__,s);console.log(" Storage ref creado:",{bucket:o.bucket,fullPath:o.fullPath,name:o.name,toString:o.toString()});const l={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:tF.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Qxe(o,e,l);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,v=Math.floor(g);r&&v!==h&&(h=v,r(v),console.log(` Progreso: ${v}%`))},p=>{var v;console.error(" Error en la subida:",p);let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agot el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexin a internet.";break;case"storage/invalid-format":g="El formato del archivo no es vlido para Firebase Storage.";break;case"storage/unknown":g="Error desconocido del servidor de Firebase Storage.";break;default:const b=((v=p==null?void 0:p.message)==null?void 0:v.toLowerCase())||"";b.includes("cors")?g="Error de configuracin CORS. Verifica las reglas de Firebase Storage.":b.includes("network")||b.includes("connection")?g="Error de conexin. Verifica tu internet e intenta nuevamente.":b.includes("permission")||b.includes("forbidden")?g="Permisos insuficientes. Contacta al administrador del sistema.":p!=null&&p.message&&(g=`Error del servidor: ${p.message}`);break}f(new Error(g))},async()=>{try{const p=await BD(u.snapshot.ref);console.log(" Archivo subido exitosamente:",{path:s,url:p,bucket:u.snapshot.ref.bucket,size:`${(u.snapshot.totalBytes/1024/1024).toFixed(2)} MB`}),d(p)}catch(p){console.error(" Error al obtener URL de descarga:",p),f(new Error("El archivo se subi correctamente, pero no se pudo obtener la URL de descarga. Intenta recargar la pgina."))}})})}catch(n){console.error(" Error general en uploadFileImproved:",n);const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo. Intenta nuevamente.";throw new Error(a)}},Bre=async e=>{try{const t=RN(__,e),{items:r,prefixes:n}=await Hxe(t);await Promise.all(r.map(a=>Vxe(a))),await Promise.all(n.map(a=>Bre(a.fullPath)))}catch(t){console.warn(" Error al eliminar carpeta:",e,t)}},X6e=async()=>{try{console.log(" Obteniendo todos los acompaamientos...");const e=tr(Lt(_t,d2),Gr("fecha","desc")),r=(await Za(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:i4(a==null?void 0:a.fecha)}});return console.log(" Acompaamientos obtenidos:",r.length),r.sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch(e){throw console.error(" Error al obtener acompaamientos:",e),new Error("No se pudieron cargar los acompaamientos")}},Y6e=async e=>{try{console.log(" Creando nuevo acompaamiento:",{docente:e.docente,curso:e.curso,asignatura:e.asignatura});const t={...e,fecha:hr.fromDate(new Date(e.fecha)),fechaCreacion:hr.now()},r=await Zn(Lt(_t,d2),t),n={...e,id:r.id,fecha:i4(e.fecha)};return console.log(" Acompaamiento creado con ID:",r.id),n}catch(t){throw console.error(" Error al crear acompaamiento:",t),new Error("No se pudo crear el acompaamiento")}},J6e=async(e,t)=>{try{console.log(" Actualizando acompaamiento:",e);const r={...t,...t.fecha?{fecha:hr.fromDate(new Date(t.fecha))}:{},fechaModificacion:hr.now()};await vh(mr(_t,d2,e),r),console.log(" Acompaamiento actualizado exitosamente")}catch(r){throw console.error(" Error al actualizar acompaamiento:",r),new Error("No se pudo actualizar el acompaamiento")}},Z6e=async e=>{try{console.log(" Eliminando acompaamiento:",e);const t=tr(Lt(_t,TF),_n("acompanamientoId","==",e)),r=await Za(t),n=Zw(_t);r.forEach(a=>n.delete(mr(_t,TF,a.id))),await n.commit(),await Bre(`videos_opr/${e}`),await Is(mr(_t,d2,e)),console.log(" Acompaamiento eliminado con sus ciclos y archivos")}catch(t){throw console.error(" Error al eliminar acompaamiento:",t),new Error("No se pudo eliminar el acompaamiento y sus datos asociados")}},eOe=async e=>{var t;try{console.log(" Creando nuevo ciclo OPR:",{nombre:e.nombreCiclo,docente:e.docenteInfo,acompanamientoId:e.acompanamientoId});const r={...e,fecha:hr.fromDate(new Date(e.fecha)),fechaCreacion:hr.now()};(t=e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:hr.fromDate(new Date(e.seguimiento.fecha))});const n=await Zn(Lt(_t,TF),r),a={...e,id:n.id,fecha:i4(e.fecha)};return console.log(" Ciclo OPR creado con ID:",n.id),a}catch(r){throw console.error(" Error al crear ciclo OPR:",r),new Error("No se pudo crear el ciclo OPR")}},tOe=async e=>{try{const t=tr(Lt(_t,d2),_n("docente","==",e),Gr("fecha","desc"));return(await Za(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:i4(a==null?void 0:a.fecha)}})}catch(t){throw console.error(" Error en getAcompanamientosByDocente:",t),new Error("No se pudieron cargar los acompaamientos del docente")}},rOe=async e=>{try{const t=tr(Lt(_t,"rubricas_personalizadas"),_n("docente","==",e)),r=await Za(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch(t){return console.error(" Error en getRubricaPersonalizada:",t),null}},nOe=async()=>await pre(),FT=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime,video/avi,video/mov",error:i,progress:o=0})=>{const[l,u]=T.useState(!1),d=`file-upload-${e.replace(/\s+/g,"-")}`,f=b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?u(!0):b.type==="dragleave"&&u(!1)},h=b=>{if(b.preventDefault(),b.stopPropagation(),u(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&!a){const y=b.dataTransfer.files[0];g(y)}},p=b=>{if(b.target.files&&b.target.files[0]&&!a){const y=b.target.files[0];g(y)}},g=b=>{if(b.size>524288e3){alert(`El archivo es demasiado grande. Tamao mximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(b.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(b)},v=()=>i?"bg-red-500":o===100?"bg-green-500":"bg-blue-500";return c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:e}),r?c.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[c.jsx(Ep,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:"Ver video cargado"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Video subido exitosamente"})]}),c.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:c.jsx(ug,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${l?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":a?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":i?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${a?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:h,onClick:()=>{var b;return!a&&((b=document.getElementById(d))==null?void 0:b.click())},children:[c.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:a?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),c.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[o.toFixed(1),"% completado"]})]}):i?c.jsxs("div",{className:"text-center",children:[c.jsx($f,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),c.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):c.jsxs("div",{className:"text-center",children:[c.jsx(uZ,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aqu"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (mx. 500MB)"})]})}),c.jsx("input",{id:d,type:"file",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:a,accept:s,style:{display:"none"}})]}),a&&c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:c.jsx("div",{className:`${v()} h-2 rounded-full transition-all duration-300`,style:{width:`${o}%`}})}),i&&c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[c.jsx($f,{className:"w-4 h-4 text-red-500"}),c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})]})]})]})},aOe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=T.useState(!1),[o,l]=T.useState({}),[u,d]=T.useState({}),[f,h]=T.useState({}),[p,g]=T.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),v=T.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=T.useState(t||v),C=k=>{const{name:L,value:R}=k.target,X=L.split(".");X.length>1?y(V=>{const Z=JSON.parse(JSON.stringify(V));let H=Z;for(let z=0;z<X.length-1;z++)H=H[X[z]];return H[X[X.length-1]]=R,Z}):y(V=>({...V,[L]:R}))},S=(k,L,R)=>{y(X=>({...X,detallesObservacion:X.detallesObservacion.map(V=>V.id===k?{...V,[L]:R}:V)}))},I=()=>{const k=b.detallesObservacion[b.detallesObservacion.length-1],L=k&&parseInt(k.minuto.split("-")[1],10)||0,R=`${L+1}-${L+5}`;y(X=>({...X,detallesObservacion:[...X.detallesObservacion,{id:`row_${Date.now()}`,minuto:R,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},N=k=>{y(L=>({...L,detallesObservacion:L.detallesObservacion.filter(R=>R.id!==k)}))},B=async(k,L)=>{h(R=>({...R,[k]:null})),l(R=>({...R,[k]:!0})),d(R=>({...R,[k]:0}));try{const R=Date.now(),X=L.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),V=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",Z=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",H=`videos_opr/${V}/${Z}/${R}_${X}`,z=await W6e(L,H,re=>{d(P=>({...P,[k]:re}))}),q=k.split(".");q.length>1?y(re=>{const P=JSON.parse(JSON.stringify(re));let K=P;for(let Y=0;Y<q.length-1;Y++)K=K[q[Y]];return K[q[q.length-1]]=z,P}):y(re=>({...re,[k]:z})),d(re=>({...re,[k]:100}))}catch(R){const X=(R==null?void 0:R.message)||"Error desconocido al subir el archivo";h(V=>({...V,[k]:X})),alert(`Error al subir el video: ${X}`)}finally{l(R=>({...R,[k]:!1})),setTimeout(()=>{d(R=>({...R,[k]:0}))},2e3)}},w=k=>{const L=k.split(".");L.length>1?y(R=>{const X=JSON.parse(JSON.stringify(R));let V=X;for(let Z=0;Z<L.length-1;Z++)V=V[L[Z]];return V[L[L.length-1]]="",X}):y(R=>({...R,[k]:""})),h(R=>({...R,[k]:null})),d(R=>({...R,[k]:0}))},_=async(k,L,R)=>{if(!R||!R.trim())return R;const X=`Mejora la redaccin del siguiente texto con un tono tcnico-pedaggico propio de informes educativos. Mantn el sentido original y NO agregues informacin nueva ni ejemplos inventados. Devulvelo como un texto breve, claro y directo. Texto (${L}):

"""${R}"""`;try{return(await k.generateContent(X)).response.text()}catch(V){return console.error(`Error improving text for ${L}:`,V),R}},F=async()=>{var k,L;i(!0);try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await sm("Acompaamiento - Mejorar Ciclo OPR");const V=new cs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=b.retroalimentacion,H=b.planificacion,z=await Promise.all([_(V,"xito",Z.exito),_(V,"Modelo",Z.modelo),_(V,"Foco",Z.foco),_(V,"Elementos a identificar",Z.elementosIdentificar),_(V,"Brecha - Preguntas",((k=Z.brecha)==null?void 0:k.preguntas)||""),_(V,"Brecha - Indicadores",((L=Z.brecha)==null?void 0:L.indicadores)||""),_(V,"Planificacin - Preparacin",H.preparacion),_(V,"Planificacin - Objetivo",H.objetivo),_(V,"Planificacin - Actividad",H.actividad),_(V,"Planificacin - Tiempo",H.tiempo)]);y(q=>({...q,retroalimentacion:{...q.retroalimentacion,exito:z[0],modelo:z[1],foco:z[2],elementosIdentificar:z[3],brecha:{...q.retroalimentacion.brecha,preguntas:z[4],indicadores:z[5]}},planificacion:{...q.planificacion,preparacion:z[6],objetivo:z[7],actividad:z[8],tiempo:z[9]}})),alert("Textos mejorados exitosamente con IA")}catch(R){console.error(R),alert("No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{i(!1)}},U=()=>{const k=new gr,L=k.internal.pageSize.getWidth(),R=15,X=L-R*2;let V=20;const Z=re=>{V>260&&(k.addPage(),V=20),k.setFontSize(14),k.setFont("helvetica","bold"),k.text(re,R,V),V+=10},H=(re,P="")=>{if(!re)return;V>270&&(k.addPage(),V=20),k.setFontSize(10),k.setFont("helvetica","bold"),k.text(P,R,V),k.setFont("helvetica","normal");const K=k.splitTextToSize(re,X-(P?15:0));k.text(K,R+(P?15:0),V),V+=K.length*5+4};k.setFontSize(18),k.setFont("helvetica","bold"),k.text("Informe de Ciclo OPR",L/2,V,{align:"center"}),V+=15,Z("1. Datos Generales");const z=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];vl(k,{body:z,startY:V,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),V=k.lastAutoTable.finalY+10,Z("2. Registro Detallado de Observacin");const q=b.detallesObservacion.map(re=>[re.minuto,re.accionesDocente,re.accionesEstudiantes,re.actividades]);vl(k,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:q,startY:V,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:re=>{var P;V=((P=re.cursor)==null?void 0:P.y)||20}}),V=k.lastAutoTable.finalY+10,Z("3. Retroalimentacin Docente"),H(b.retroalimentacion.exito,"xito:"),H(b.retroalimentacion.modelo,"Modelo:"),H(b.retroalimentacion.foco,"Foco:"),H(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),V+=5,k.setFontSize(11),k.setFont("helvetica","bold"),k.text("Anlisis de Brecha",R,V),V+=7,H(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),H(b.retroalimentacion.brecha.preguntas,"Preguntas:"),H(b.retroalimentacion.brecha.indicadores,"Indicadores:"),Z("4. Planificacin de Prctica"),H(b.planificacion.preparacion,"Preparacin:"),H(b.planificacion.objetivo,"Objetivo:"),H(b.planificacion.actividad,"Actividad:"),H(b.planificacion.tiempo,"Tiempo:"),Z("5. Seguimiento"),H(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),H(b.seguimiento.firma,"Firma (Registrado por):"),k.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},D=async k=>{if(k.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const L={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(L)}catch(R){console.error("Error al guardar ciclo OPR:",R),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{value:p.docente,onChange:k=>g(L=>({...L,docente:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(k=>c.jsx("option",{value:k,children:k},k))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{value:p.curso,onChange:k=>g(L=>({...L,curso:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(k=>c.jsx("option",{value:k,children:k},k))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:p.asignatura,onChange:k=>g(L=>({...L,asignatura:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(k=>c.jsx("option",{value:k,children:k},k))]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:F,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[c.jsx(oZ,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),c.jsxs("button",{type:"button",onClick:U,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[c.jsx(LN,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),c.jsxs("form",{onSubmit:D,className:"space-y-8",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(dZ,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:C,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),c.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),c.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:C,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),c.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx(FT,{label:"Subir video de observacin de clase",onFileChange:k=>B("videoObservacionUrl",k),uploadedUrl:b.videoObservacionUrl,onRemove:()=>w("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(ebe,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b dark:border-slate-600",children:[c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),c.jsx("th",{className:"p-2"})]})}),c.jsx("tbody",{children:b.detallesObservacion.map(k=>c.jsxs("tr",{className:"border-b dark:border-slate-700",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"text",value:k.minuto,onChange:L=>S(k.id,"minuto",L.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),c.jsx("td",{className:"p-2",children:c.jsx("textarea",{value:k.accionesDocente,onChange:L=>S(k.id,"accionesDocente",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),c.jsx("td",{className:"p-2",children:c.jsx("textarea",{value:k.accionesEstudiantes,onChange:L=>S(k.id,"accionesEstudiantes",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),c.jsx("td",{className:"p-2",children:c.jsx("textarea",{value:k.actividades,onChange:L=>S(k.id,"actividades",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),c.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&c.jsx("button",{type:"button",onClick:()=>N(k.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:c.jsx(ug,{className:"w-4 h-4"})})})]},k.id))})]})}),c.jsxs("button",{type:"button",onClick:I,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[c.jsx(ZI,{className:"w-4 h-4"})," Agregar Fila"]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(bbe,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"xito"}),c.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:C,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),c.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:C,placeholder:"Modelo pedaggico o metodologa observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx(FT,{label:"Video modelo (opcional)",onFileChange:k=>B("retroalimentacion.videoModeloUrl",k),uploadedUrl:b.retroalimentacion.videoModeloUrl,onRemove:()=>w("retroalimentacion.videoModeloUrl"),isUploading:!!o["retroalimentacion.videoModeloUrl"],error:f["retroalimentacion.videoModeloUrl"],progress:u["retroalimentacion.videoModeloUrl"]||0}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),c.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:C,placeholder:"Foco principal de la observacin y retroalimentacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),c.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:C,placeholder:"Elementos especficos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[c.jsx($f,{className:"w-4 h-4 text-amber-500"}),"Anlisis de Brecha"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto inicial"}),c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:b.retroalimentacion.brecha.minutoInicial,onChange:C,placeholder:"Ej: 15:30",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto final"}),c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:b.retroalimentacion.brecha.minutoFinal,onChange:C,placeholder:"Ej: 20:45",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx(FT,{label:"Video de brecha (opcional)",onFileChange:k=>B("retroalimentacion.brecha.videoUrl",k),uploadedUrl:b.retroalimentacion.brecha.videoUrl,onRemove:()=>w("retroalimentacion.brecha.videoUrl"),isUploading:!!o["retroalimentacion.brecha.videoUrl"],error:f["retroalimentacion.brecha.videoUrl"],progress:u["retroalimentacion.brecha.videoUrl"]||0}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Preguntas"}),c.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:b.retroalimentacion.brecha.preguntas,onChange:C,placeholder:"Preguntas especficas sobre la brecha identificada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Indicadores"}),c.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:b.retroalimentacion.brecha.indicadores,onChange:C,placeholder:"Indicadores para evaluar el progreso...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(H1e,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparacin"}),c.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:C,placeholder:"Aspectos de preparacin para la prxima prctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),c.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:C,placeholder:"Objetivo especfico para la siguiente observacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),c.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:C,placeholder:"Actividades especficas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),c.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:C,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[c.jsx(LA,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),c.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:C,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),c.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:C,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},sOe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(!0),[l,u]=T.useState(null),[d,f]=T.useState("list"),[h,p]=T.useState(null),[g,v]=T.useState("general"),[b,y]=T.useState(!1),C=by,S=T.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[I,N]=T.useState(S),B=T.useCallback(async()=>{s(!0),u(null);try{const H=await X6e();t(H)}catch(H){u("No se pudieron cargar los registros de acompaamiento."),console.error(" Error al cargar acompaamientos:",H)}finally{s(!1)}},[]),w=T.useCallback(async()=>{o(!0);try{const z=(await nOe()).filter(q=>q.profile==="PROFESORADO").map(q=>q.nombreCompleto).sort();n(z)}catch(H){u("No se pudo cargar la lista de profesores."),console.error(" Error al cargar profesores:",H)}finally{o(!1)}},[]);T.useEffect(()=>{B(),w()},[B,w]);const _=async()=>{if(!("docente"in I)||!I.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}y(!0),u(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await sm("Acompaamiento - Feedback General");const q=new cs(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=Object.entries(I.rubricaResultados||{}).map(([te,ie])=>`- ${te}: Nivel ${ie}`).join(`
`),P=`
Eres un asesor pedaggico experto. Redacta una retroalimentacin consolidada y constructiva para un docente.
Contexto de la observacin:
- Docente: ${I.docente}
- Asignatura: ${I.asignatura}
- Curso: ${I.curso}
- Resultados de la pauta de observacin (rbrica):
${re||"No se complet la pauta."}
- Observaciones adicionales del evaluador:
${I.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta informacin, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 reas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentacin.
      `,Y=(await q.generateContent(P)).response.text();N(te=>({...te,retroalimentacionConsolidada:Y})),alert("Retroalimentacin generada exitosamente con IA.")}catch(H){console.error(" Error al generar retroalimentacin:",H);const z=H.message||"No se pudo generar la retroalimentacin automtica.";u(z),alert(`Error: ${z}`)}finally{y(!1)}},F=async H=>{if(H.preventDefault(),!("docente"in I)||!I.docente||!I.curso||!I.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await J6e(h,I),alert("Acompaamiento actualizado correctamente!");else{const z=await Y6e(I);p(z.id),N(z),alert("Acompaamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await B()}catch(z){const q=(z==null?void 0:z.message)??"Error al guardar el registro de acompaamiento.";u(q),console.error(" Error al guardar:",z),alert(`Error: ${q}`)}},U=()=>{N(S),p(null),f("form"),v("general"),u(null)},D=H=>{N(H),p(H.id),f("form"),v("general"),u(null)},k=async H=>{if(window.confirm("Est seguro de que desea eliminar este registro? Esta accin no se puede deshacer."))try{await Z6e(H),await B(),alert("Registro eliminado exitosamente.")}catch(z){const q="No se pudo eliminar el registro.";u(q),console.error(" Error al eliminar:",z),alert(`Error: ${q}`)}},L=(H,z)=>{N(q=>({...q,rubricaResultados:{...q.rubricaResultados||{},[H]:z}}))},R=()=>{var H;if(!("docente"in I)||!I.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const z=new gr,q=z.internal.pageSize.getWidth(),re=15,P=q-re*2;let K=20;z.setFontSize(18),z.setFont("helvetica","bold"),z.text("INFORME DE ACOMPAAMIENTO DOCENTE",q/2,K,{align:"center"}),K+=5,z.setLineWidth(.5),z.line(re,K,q-re,K),K+=10;const Y=[["Docente:",I.docente],["Curso:",I.curso],["Asignatura:",I.asignatura],["Fecha:",new Date(I.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",I.bloques||"No especificado"]];if(vl(z,{body:Y,startY:K,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),K=z.lastAutoTable.finalY+10,Object.keys(I.rubricaResultados||{}).length>0){z.setFontSize(12),z.setFont("helvetica","bold"),z.text("RESULTADOS DE EVALUACIN",re,K),K+=8;const oe=Object.entries(I.rubricaResultados).map(([ce,pe])=>[ce,`Nivel ${pe}`,pe===1?"Dbil":pe===2?"Incipiente":pe===3?"Satisfactorio":"Avanzado"]);vl(z,{startY:K,head:[["Criterio","Nivel","Descripcin"]],body:oe,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:re,right:re},styles:{fontSize:9}}),K=z.lastAutoTable.finalY+10}const te=(oe,ce)=>{if(!ce||ce.trim()==="")return;K>250&&(z.addPage(),K=20),z.setFontSize(12),z.setFont("helvetica","bold"),z.text(oe,re,K),K+=8,z.setFontSize(10),z.setFont("helvetica","normal");const pe=z.splitTextToSize(ce,P);z.text(pe,re,K),K+=pe.length*5+10};te("OBSERVACIONES GENERALES",I.observacionesGenerales),te("RETROALIMENTACIN PEDAGGICA",I.retroalimentacionConsolidada);const ie=z.getNumberOfPages();for(let oe=1;oe<=ie;oe++)z.setPage(oe),z.setFontSize(8),z.setFont("helvetica","italic"),z.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Pgina ${oe} de ${ie}`,q/2,z.internal.pageSize.getHeight()-10,{align:"center"});const Ae=`Informe_Acompanamiento_${(H=I.docente)==null?void 0:H.replace(/\s+/g,"_")}_${I.curso}_${new Date().toISOString().split("T")[0]}.pdf`;z.save(Ae)}catch(z){console.error(" Error al generar PDF:",z),alert("Error al generar el PDF. Intenta nuevamente.")}},X=H=>{N(z=>({...z,[H.target.name]:H.target.value}))},V=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>{U(),v("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[c.jsx(ZI,{className:"w-5 h-5"})," Acompaamiento General"]}),c.jsxs("button",{onClick:()=>{N(S),p(null),f("form"),v("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[c.jsx(ZI,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),l&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($f,{className:"w-5 h-5 text-red-500"}),c.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]})}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[c.jsx(g_,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Registrados"]}),c.jsxs("div",{className:"space-y-3",children:[a&&c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(H=>H.id).length>0?c.jsx("div",{className:"grid gap-3",children:e.filter(H=>H.id).map(H=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(LA,{className:"w-4 h-4 text-amber-500"}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:H.docente})]}),c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Curso:"})," ",H.curso," "," ",c.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",H.asignatura]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(H.fecha).toLocaleDateString("es-CL")]}),H.bloques&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Bloques:"})," ",H.bloques]}),H.retroalimentacionConsolidada&&c.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[c.jsx(Ep,{className:"w-3 h-3"}),"Con retroalimentacin IA"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.jsx("button",{onClick:()=>{D(H),v("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),c.jsx("button",{onClick:()=>{D(H),v("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),c.jsx("button",{onClick:()=>k(H.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:c.jsx(ug,{className:"w-4 h-4"})})]})]})},H.id))}):!a&&c.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsx(Jy,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompaamientos registrados"}),c.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompaamiento usando el botn superior"})]})]})]})]}),Z=()=>{const H=h?e.find(q=>q.id===h):null,z={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in I&&I.docente||"",curso:"curso"in I&&I.curso||"",asignatura:"asignatura"in I&&I.asignatura||"",bloques:"bloques"in I&&I.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:g==="general"?h?"Editando Acompaamiento General":"Nuevo Acompaamiento General":"Gestin de Ciclo OPR"}),c.jsx("button",{type:"button",onClick:()=>f("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:" Volver al listado"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>v("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Jy,{className:"w-4 h-4"}),"Acompaamiento General"]})}),c.jsx("button",{onClick:()=>v("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(dZ,{className:"w-4 h-4"}),"Ciclo OPR"]})})]})}),l&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($f,{className:"w-5 h-5 text-red-500"}),c.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]})}),g==="general"&&c.jsxs("form",{onSubmit:F,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[c.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[c.jsx(qbe,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:_,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:b,children:[c.jsx(oZ,{className:"w-4 h-4"}),b?"Generando...":"Generar Retroalimentacin con IA"]}),c.jsxs("button",{type:"button",onClick:R,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[c.jsx(LN,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observacin y rbrica, luego genera automticamente la retroalimentacin. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in I&&I.retroalimentacionConsolidada&&c.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[c.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[c.jsx(Ep,{className:"w-4 h-4"}),"Retroalimentacin Consolidada Generada:"]}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:c.jsx("textarea",{readOnly:!0,rows:8,value:I.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),c.jsxs("select",{name:"docente",value:"docente"in I?I.docente:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),c.jsxs("select",{name:"curso",value:"curso"in I?I.curso:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),c.jsxs("select",{name:"asignatura",value:"asignatura"in I?I.asignatura:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:"bloques"in I?I.bloques:"",onChange:X,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in I?I.observacionesGenerales:"",onChange:X,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodologa utilizada, participacin de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[c.jsx(g_,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observacin - Rbrica de Evaluacin"]}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:C.map(q=>c.jsx(lt.Fragment,{children:q.criteria.map((re,P)=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[P===0&&c.jsx("td",{rowSpan:q.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:q.domain}),c.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:re.name}),re.levels.map((K,Y)=>{const te=Y+1,ie="rubricaResultados"in I&&I.rubricaResultados[re.name]===te,Ae=ie?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return c.jsx("td",{onClick:()=>L(re.name,te),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Ae} ${ie?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${te} para ${re.name}`,children:c.jsxs("div",{className:"text-xs leading-relaxed",children:[ie&&c.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[c.jsx(Ep,{className:"w-3 h-3 text-amber-600"}),c.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),K]})},te)})]},re.name))},q.domain))})]})}),Object.keys(I.rubricaResultados||{}).length>0&&c.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[c.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[c.jsx(g_,{className:"w-4 h-4"}),"Resumen de Evaluacin (",Object.keys(I.rubricaResultados).length," criterios evaluados)"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(I.rubricaResultados).map(([q,re])=>c.jsxs("div",{className:"flex justify-between items-center py-1",children:[c.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[q,":"]}),c.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${re===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":re===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":re===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",re]})]},q))})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:b,children:[b&&c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompaamiento"]})]})]}),g==="opr"&&c.jsx(aOe,{acompanamiento:H||z,cicloToEdit:null,profesores:r,onSave:async q=>{try{const re={...q,acompanamientoId:(H==null?void 0:H.id)||null};await eOe(re),alert("Ciclo OPR guardado exitosamente"),f("list")}catch(re){console.error(" Error al guardar ciclo OPR:",re);const P=re.message||"Error desconocido al guardar el ciclo OPR";u(P),alert(`Error al guardar el ciclo OPR: ${P}`)}},onCancel:()=>f("list")})]})};return a||i?c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando mdulo de acompaamiento..."}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?V():Z()})})},UR="mensajes_internos",iOe="usuarios",Tre="mensajes_read_status",jre=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},oOe=(e,t)=>{const r=tr(Lt(_t,UR),_n("participants","array-contains",e),Gr("fecha","desc"));return xr(r,a=>{const s=a.docs.map(i=>jre(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},lOe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:hr.fromDate(new Date)};await Zn(Lt(_t,UR),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},cOe=async e=>{try{const t=mr(_t,UR,e);await Is(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},uOe=(e,t)=>{const r=mr(_t,Tre,e);return xr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},dOe=async(e,t)=>{try{const r=mr(_t,Tre,e);await Ji(r,{messages:FJ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como ledo:",r),new Error("No se pudo actualizar el estado de lectura.")}},AOe=e=>{const t=tr(Lt(_t,iOe),Gr("nombreCompleto","asc"));return xr(t,n=>{const a=n.docs.map(s=>jre(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},fOe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=T.useState("inbox"),[a,s]=T.useState([]),[i,o]=T.useState([]),[l,u]=T.useState(null),[d,f]=T.useState({announcements:[],messages:[]}),[h,p]=T.useState(!0),g={para:"",asunto:"",cuerpo:""},[v,b]=T.useState(g);T.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const w=oOe(e.email,U=>{s(U),p(!1)}),_=AOe(o),F=uOe(e.id,U=>{f(U),t()});return()=>{w(),_(),F()}},[e.id,e.email,t]);const y=w=>{u(w),r==="inbox"&&!d.messages.includes(w.id)&&dOe(e.id,w.id).catch(_=>{console.error("Failed to mark message as read:",_)})},C=async w=>{if(w.preventDefault(),!v.para||!v.asunto.trim()||!v.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:e.email,para:v.para,asunto:v.asunto,cuerpo:v.cuerpo};try{await lOe(_),b(g),n("sent")}catch(F){console.error("Error sending message:",F),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},S=async w=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await cOe(w),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},I=w=>{b({para:w.de,asunto:`Re: ${w.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${w.de}
Fecha: ${new Date(w.fecha).toLocaleString("es-CL")}

${w.cuerpo}`}),n("compose")},N=T.useMemo(()=>a.filter(w=>w.para===e.email),[a,e.email]),B=T.useMemo(()=>a.filter(w=>w.de===e.email),[a,e.email]);return h?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?N:B).map(w=>{const _=r==="inbox"&&!d.messages.includes(w.id);return c.jsxs("div",{onClick:()=>y(w),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===w.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?w.de:`Para: ${w.para}`}),_&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:w.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(w.fecha).toLocaleString("es-CL")})]},w.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:v.para,onChange:w=>b({...v,para:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(w=>w.email!==e.email).map(w=>c.jsxs("option",{value:w.email,children:[w.nombreCompleto," (",w.email,")"]},w.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:v.asunto,onChange:w=>b({...v,asunto:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:v.cuerpo,onChange:w=>b({...v,cuerpo:w.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>I(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>S(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jF=function(e,t){return jF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},jF(e,t)};function Od(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var IF=function(){return IF=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},IF.apply(this,arguments)};function cl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(e,[])).next())})}function Lo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function oC(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var ih=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o4=function(e,t){return ih.fromClientRect(e,t.getBoundingClientRect())},hOe=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new ih(0,0,n,a)},l4=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Vs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},YH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mOe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lC=0;lC<YH.length;lC++)mOe[YH.charCodeAt(lC)]=lC;var JH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ty=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cC=0;cC<JH.length;cC++)ty[JH.charCodeAt(cC)]=cC;var pOe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ty[e.charCodeAt(n)],i=ty[e.charCodeAt(n+1)],o=ty[e.charCodeAt(n+2)],l=ty[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},gOe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},vOe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Tp=5,QR=11,OT=2,xOe=QR-Tp,Ire=65536>>Tp,bOe=1<<Tp,DT=bOe-1,yOe=1024>>Tp,wOe=Ire+yOe,EOe=wOe,COe=32,_Oe=EOe+COe,SOe=65536>>QR,NOe=1<<xOe,kOe=NOe-1,ZH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},BOe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},TOe=function(e,t){var r=pOe(e),n=Array.isArray(r)?vOe(r):new Uint32Array(r),a=Array.isArray(r)?gOe(r):new Uint16Array(r),s=24,i=ZH(a,s/2,n[4]/2),o=n[5]===2?ZH(a,(s+n[4])/2):BOe(n,Math.ceil((s+n[4])/4));return new jOe(n[0],n[1],n[2],n[3],i,o)},jOe=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Tp],r=(r<<OT)+(t&DT),this.data[r];if(t<=65535)return r=this.index[Ire+(t-55296>>Tp)],r=(r<<OT)+(t&DT),this.data[r];if(t<this.highStart)return r=_Oe-SOe+(t>>QR),r=this.index[r],r+=t>>Tp&kOe,r=this.index[r],r=(r<<OT)+(t&DT),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),eV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",IOe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uC=0;uC<eV.length;uC++)IOe[eV.charCodeAt(uC)]=uC;var FOe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",tV=50,OOe=1,Fre=2,Ore=3,DOe=4,ROe=5,rV=7,Dre=8,nV=9,F0=10,FF=11,aV=12,OF=13,POe=14,ry=15,DF=16,dC=17,Eb=18,LOe=19,sV=20,RF=21,Cb=22,RT=23,ov=24,bc=25,ny=26,ay=27,lv=28,MOe=29,cp=30,UOe=31,AC=32,fC=33,PF=34,LF=35,MF=36,xw=37,UF=38,S_=39,N_=40,PT=41,Rre=42,QOe=43,HOe=[9001,65288],Pre="!",kn="",hC="",QF=TOe(FOe),kf=[cp,MF],HF=[OOe,Fre,Ore,ROe],Lre=[F0,Dre],iV=[ay,ny],VOe=HF.concat(Lre),oV=[UF,S_,N_,PF,LF],zOe=[ry,OF],$Oe=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=QF.get(s);if(o>tV?(a.push(!0),o-=tV):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(DF);if(o===DOe||o===FF){if(i===0)return n.push(i),r.push(cp);var l=r[i-1];return VOe.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(cp))}if(n.push(i),o===UOe)return r.push(t==="strict"?RF:xw);if(o===Rre||o===MOe)return r.push(cp);if(o===QOe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(xw):r.push(cp);r.push(o)}),[n,r,a]},LT=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==F0)break}if(a===F0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===t)return!0;if(i!==F0)break}if(o!==F0)break}return!1},lV=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===F0)r--;else return n}return 0},GOe=function(e,t,r,n,a){if(r[n]===0)return kn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return kn;var i=s-1,o=s+1,l=t[s],u=i>=0?t[i]:0,d=t[o];if(l===Fre&&d===Ore)return kn;if(HF.indexOf(l)!==-1)return Pre;if(HF.indexOf(d)!==-1||Lre.indexOf(d)!==-1)return kn;if(lV(s,t)===Dre)return hC;if(QF.get(e[s])===FF||(l===AC||l===fC)&&QF.get(e[o])===FF||l===rV||d===rV||l===nV||[F0,OF,ry].indexOf(l)===-1&&d===nV||[dC,Eb,LOe,ov,lv].indexOf(d)!==-1||lV(s,t)===Cb||LT(RT,Cb,s,t)||LT([dC,Eb],RF,s,t)||LT(aV,aV,s,t))return kn;if(l===F0)return hC;if(l===RT||d===RT)return kn;if(d===DF||l===DF)return hC;if([OF,ry,RF].indexOf(d)!==-1||l===POe||u===MF&&zOe.indexOf(l)!==-1||l===lv&&d===MF||d===sV||kf.indexOf(d)!==-1&&l===bc||kf.indexOf(l)!==-1&&d===bc||l===ay&&[xw,AC,fC].indexOf(d)!==-1||[xw,AC,fC].indexOf(l)!==-1&&d===ny||kf.indexOf(l)!==-1&&iV.indexOf(d)!==-1||iV.indexOf(l)!==-1&&kf.indexOf(d)!==-1||[ay,ny].indexOf(l)!==-1&&(d===bc||[Cb,ry].indexOf(d)!==-1&&t[o+1]===bc)||[Cb,ry].indexOf(l)!==-1&&d===bc||l===bc&&[bc,lv,ov].indexOf(d)!==-1)return kn;if([bc,lv,ov,dC,Eb].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===bc)return kn;if([lv,ov].indexOf(h)!==-1)f--;else break}if([ay,ny].indexOf(d)!==-1)for(var f=[dC,Eb].indexOf(l)!==-1?i:s;f>=0;){var h=t[f];if(h===bc)return kn;if([lv,ov].indexOf(h)!==-1)f--;else break}if(UF===l&&[UF,S_,PF,LF].indexOf(d)!==-1||[S_,PF].indexOf(l)!==-1&&[S_,N_].indexOf(d)!==-1||[N_,LF].indexOf(l)!==-1&&d===N_||oV.indexOf(l)!==-1&&[sV,ny].indexOf(d)!==-1||oV.indexOf(d)!==-1&&l===ay||kf.indexOf(l)!==-1&&kf.indexOf(d)!==-1||l===ov&&kf.indexOf(d)!==-1||kf.concat(bc).indexOf(l)!==-1&&d===Cb&&HOe.indexOf(e[o])===-1||kf.concat(bc).indexOf(d)!==-1&&l===Eb)return kn;if(l===PT&&d===PT){for(var p=r[s],g=1;p>0&&(p--,t[p]===PT);)g++;if(g%2!==0)return kn}return l===AC&&d===fC?kn:hC},KOe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=$Oe(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[bc,cp,Rre].indexOf(o)!==-1?xw:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,l){return o&&e[l]>=19968&&e[l]<=40959}):void 0;return[n,a,i]},qOe=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Pre,this.start=n,this.end=a}return e.prototype.slice=function(){return Vs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),WOe=function(e,t){var r=l4(e),n=KOe(r,t),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=kn;u<o&&(d=GOe(r,s,a,++u,i))===kn;);if(d!==kn||u===o){var f=new qOe(r,d,l,u);return l=u,{value:f,done:!1}}return{done:!0,value:null}}}},XOe=1,YOe=2,A2=4,cV=8,QS=10,uV=47,Iy=92,JOe=9,ZOe=32,mC=34,_b=61,eDe=35,tDe=36,rDe=37,pC=39,gC=40,Sb=41,nDe=95,Vl=45,aDe=33,sDe=60,iDe=62,oDe=64,lDe=91,cDe=93,uDe=61,dDe=123,vC=63,ADe=125,dV=124,fDe=126,hDe=128,AV=65533,MT=42,fp=43,mDe=44,pDe=58,gDe=59,bw=46,vDe=0,xDe=8,bDe=11,yDe=14,wDe=31,EDe=127,mA=-1,Mre=48,Ure=97,Qre=101,CDe=102,_De=117,SDe=122,Hre=65,Vre=69,zre=70,NDe=85,kDe=90,Vo=function(e){return e>=Mre&&e<=57},BDe=function(e){return e>=55296&&e<=57343},cv=function(e){return Vo(e)||e>=Hre&&e<=zre||e>=Ure&&e<=CDe},TDe=function(e){return e>=Ure&&e<=SDe},jDe=function(e){return e>=Hre&&e<=kDe},IDe=function(e){return TDe(e)||jDe(e)},FDe=function(e){return e>=hDe},xC=function(e){return e===QS||e===JOe||e===ZOe},HS=function(e){return IDe(e)||FDe(e)||e===nDe},fV=function(e){return HS(e)||Vo(e)||e===Vl},ODe=function(e){return e>=vDe&&e<=xDe||e===bDe||e>=yDe&&e<=wDe||e===EDe},x0=function(e,t){return e!==Iy?!1:t!==QS},bC=function(e,t,r){return e===Vl?HS(t)||x0(t,r):HS(e)?!0:!!(e===Iy&&x0(e,t))},UT=function(e,t,r){return e===fp||e===Vl?Vo(t)?!0:t===bw&&Vo(r):Vo(e===bw?t:e)},DDe=function(e){var t=0,r=1;(e[t]===fp||e[t]===Vl)&&(e[t]===Vl&&(r=-1),t++);for(var n=[];Vo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Vs.apply(void 0,n),10):0;e[t]===bw&&t++;for(var s=[];Vo(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Vs.apply(void 0,s),10):0;(e[t]===Vre||e[t]===Qre)&&t++;var l=1;(e[t]===fp||e[t]===Vl)&&(e[t]===Vl&&(l=-1),t++);for(var u=[];Vo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Vs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},RDe={type:2},PDe={type:3},LDe={type:4},MDe={type:13},UDe={type:8},QDe={type:21},HDe={type:9},VDe={type:10},zDe={type:11},$De={type:12},GDe={type:14},yC={type:23},KDe={type:1},qDe={type:25},WDe={type:24},XDe={type:26},YDe={type:27},JDe={type:28},ZDe={type:29},eRe={type:31},VF={type:32},$re=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(l4(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==VF;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case mC:return this.consumeStringToken(mC);case eDe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(fV(r)||x0(n,a)){var s=bC(r,n,a)?YOe:XOe,i=this.consumeName();return{type:5,value:i,flags:s}}break;case tDe:if(this.peekCodePoint(0)===_b)return this.consumeCodePoint(),MDe;break;case pC:return this.consumeStringToken(pC);case gC:return RDe;case Sb:return PDe;case MT:if(this.peekCodePoint(0)===_b)return this.consumeCodePoint(),GDe;break;case fp:if(UT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case mDe:return LDe;case Vl:var o=t,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(UT(o,l,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(bC(o,l,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===Vl&&u===iDe)return this.consumeCodePoint(),this.consumeCodePoint(),WDe;break;case bw:if(UT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case uV:if(this.peekCodePoint(0)===MT)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===MT&&(d=this.consumeCodePoint(),d===uV))return this.consumeToken();if(d===mA)return this.consumeToken()}break;case pDe:return XDe;case gDe:return YDe;case sDe:if(this.peekCodePoint(0)===aDe&&this.peekCodePoint(1)===Vl&&this.peekCodePoint(2)===Vl)return this.consumeCodePoint(),this.consumeCodePoint(),qDe;break;case oDe:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(bC(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case lDe:return JDe;case Iy:if(x0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case cDe:return ZDe;case uDe:if(this.peekCodePoint(0)===_b)return this.consumeCodePoint(),UDe;break;case dDe:return zDe;case ADe:return $De;case _De:case NDe:var g=this.peekCodePoint(0),v=this.peekCodePoint(1);return g===fp&&(cv(v)||v===vC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case dV:if(this.peekCodePoint(0)===_b)return this.consumeCodePoint(),HDe;if(this.peekCodePoint(0)===dV)return this.consumeCodePoint(),QDe;break;case fDe:if(this.peekCodePoint(0)===_b)return this.consumeCodePoint(),VDe;break;case mA:return VF}return xC(t)?(this.consumeWhiteSpace(),eRe):Vo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):HS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Vs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();cv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===vC&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Vs.apply(void 0,t.map(function(l){return l===vC?Mre:l})),16),s=parseInt(Vs.apply(void 0,t.map(function(l){return l===vC?zre:l})),16);return{type:30,start:a,end:s}}var i=parseInt(Vs.apply(void 0,t),16);if(this.peekCodePoint(0)===Vl&&cv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];cv(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Vs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===gC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gC?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===mA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===pC||r===mC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===mA||this.peekCodePoint(0)===Sb)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yC)}for(;;){var a=this.consumeCodePoint();if(a===mA||a===Sb)return{type:22,value:Vs.apply(void 0,t)};if(xC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===mA||this.peekCodePoint(0)===Sb?(this.consumeCodePoint(),{type:22,value:Vs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),yC);if(a===mC||a===pC||a===gC||ODe(a))return this.consumeBadUrlRemnants(),yC;if(a===Iy)if(x0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),yC;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;xC(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Sb||t===mA)return;x0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Vs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===mA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===QS)return this._value.splice(0,n),KDe;if(a===Iy){var s=this._value[n+1];s!==mA&&s!==void 0&&(s===QS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):x0(a,s)&&(r+=this.consumeStringSlice(n),r+=Vs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=A2,n=this.peekCodePoint(0);for((n===fp||n===Vl)&&t.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===bw&&Vo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=cV;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Vre||n===Qre)&&((a===fp||a===Vl)&&Vo(s)||Vo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=cV;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[DDe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(bC(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===rDe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(cv(t)){for(var r=Vs(t);cv(this.peekCodePoint(0))&&r.length<6;)r+=Vs(this.consumeCodePoint());xC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||BDe(n)||n>1114111?AV:n}return t===mA?AV:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(fV(r))t+=Vs(r);else if(x0(r,this.peekCodePoint(0)))t+=Vs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Gre=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new $re;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||rRe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?VF:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),f2=function(e){return e.type===15},h1=function(e){return e.type===17},Ea=function(e){return e.type===20},tRe=function(e){return e.type===0},zF=function(e,t){return Ea(e)&&e.value===t},Kre=function(e){return e.type!==31},Fx=function(e){return e.type!==31&&e.type!==4},qA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},rRe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Am=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||Am(e)},qre=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},xo={type:17,number:0,flags:A2},HR={type:16,number:50,flags:A2},O0={type:16,number:100,flags:A2},sy=function(e,t,r){var n=e[0],a=e[1];return[Oa(n,t),Oa(typeof a<"u"?a:n,r)]},Oa=function(e,t){if(e.type===16)return e.number/100*t;if(f2(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Wre="deg",Xre="grad",Yre="rad",Jre="turn",c4={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Wre:return Math.PI*t.number/180;case Xre:return Math.PI/200*t.number;case Yre:return t.number;case Jre:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Zre=function(e){return e.type===15&&(e.unit===Wre||e.unit===Xre||e.unit===Yre||e.unit===Jre)},ene=function(e){var t=e.filter(Ea).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[xo,xo];case"to top":case"bottom":return Nu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[xo,O0];case"to right":case"left":return Nu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[O0,O0];case"to bottom":case"top":return Nu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[O0,xo];case"to left":case"right":return Nu(270)}return 0},Nu=function(e){return Math.PI*e/180},V0={name:"color",parse:function(e,t){if(t.type===18){var r=nRe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return D0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return D0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return D0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return D0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=Wf[t.value.toUpperCase()];if(typeof o<"u")return o}return Wf.TRANSPARENT}},z0=function(e){return(255&e)===0},Ui=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},D0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},hV=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},mV=function(e,t){var r=t.filter(Fx);if(r.length===3){var n=r.map(hV),a=n[0],s=n[1],i=n[2];return D0(a,s,i,1)}if(r.length===4){var o=r.map(hV),a=o[0],s=o[1],i=o[2],l=o[3];return D0(a,s,i,l)}return 0};function QT(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var pV=function(e,t){var r=t.filter(Fx),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Nu(n.number):c4.parse(e,n))/(Math.PI*2),l=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Oa(i,1):1;if(l===0)return D0(u*255,u*255,u*255,1);var f=u<=.5?u*(l+1):u+l-u*l,h=u*2-f,p=QT(h,f,o+1/3),g=QT(h,f,o),v=QT(h,f,o-1/3);return D0(p*255,g*255,v*255,d)},nRe={hsl:pV,hsla:pV,rgb:mV,rgba:mV},Fy=function(e,t){return V0.parse(e,Gre.create(t).parseComponentValue())},Wf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},aRe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},sRe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},u4=function(e,t){var r=V0.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},gV=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=xo),n.stop===null&&(n.stop=O0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var l=Oa(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(v,b){var y=v.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},iRe=function(e,t,r){var n=t/2,a=r/2,s=Oa(e[0],t)-n,i=a-Oa(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},oRe=function(e,t,r){var n=typeof e=="number"?e:iRe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},dd=function(e,t){return Math.sqrt(e*e+t*t)},vV=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=dd(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},lRe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(dd(t,r),dd(t,r-a),dd(t-n,r),dd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=vV(n,a,t,r,!0),u=l[0],d=l[1];s=dd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(dd(t,r),dd(t,r-a),dd(t-n,r),dd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=vV(n,a,t,r,!1),u=f[0],d=f[1];s=dd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Oa(e.size[0],n),i=e.size.length===2?Oa(e.size[1],a):s),[s,i]},cRe=function(e,t){var r=Nu(180),n=[];return qA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=ene(a);return}else if(Zre(i)){r=c4.parse(e,i);return}}var o=u4(e,a);n.push(o)}),{angle:r,stops:n,type:1}},wC=function(e,t){var r=Nu(180),n=[];return qA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=ene(a);return}else if(Zre(i)){r=(c4.parse(e,i)+Nu(270))%Nu(360);return}}var o=u4(e,a);n.push(o)}),{angle:r,stops:n,type:1}},uRe=function(e,t){var r=Nu(180),n=[],a=1,s=0,i=3,o=[];return qA(t).forEach(function(l,u){var d=l[0];if(u===0){if(Ea(d)&&d.value==="linear"){a=1;return}else if(Ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=V0.parse(e,d.values[0]);n.push({stop:xo,color:f})}else if(d.name==="to"){var f=V0.parse(e,d.values[0]);n.push({stop:O0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Fx);if(h.length===2){var f=V0.parse(e,h[1]),p=h[0];h1(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Nu(180))%Nu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},tne="closest-side",rne="farthest-side",nne="closest-corner",ane="farthest-corner",sne="circle",ine="ellipse",one="cover",lne="contain",dRe=function(e,t){var r=0,n=3,a=[],s=[];return qA(t).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(f,h){if(u)if(Ea(h))switch(h.value){case"center":return s.push(HR),f;case"top":case"left":return s.push(xo),f;case"right":case"bottom":return s.push(O0),f}else(di(h)||Am(h))&&s.push(h);else if(Ea(h))switch(h.value){case sne:return r=0,!1;case ine:return r=1,!1;case"at":return u=!0,!1;case tne:return n=0,!1;case one:case rne:return n=1,!1;case lne:case nne:return n=2,!1;case ane:return n=3,!1}else if(Am(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},l)}if(l){var d=u4(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},EC=function(e,t){var r=0,n=3,a=[],s=[];return qA(t).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,f){if(Ea(f))switch(f.value){case"center":return s.push(HR),!1;case"top":case"left":return s.push(xo),!1;case"right":case"bottom":return s.push(O0),!1}else if(di(f)||Am(f))return s.push(f),!1;return d},l):o===1&&(l=i.reduce(function(d,f){if(Ea(f))switch(f.value){case sne:return r=0,!1;case ine:return r=1,!1;case lne:case tne:return n=0,!1;case rne:return n=1,!1;case nne:return n=2,!1;case one:case ane:return n=3,!1}else if(Am(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},l)),l){var u=u4(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},ARe=function(e){return e.type===1},fRe=function(e){return e.type===2},VR={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=cne[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function hRe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!cne[e.name])}var cne={"linear-gradient":cRe,"-moz-linear-gradient":wC,"-ms-linear-gradient":wC,"-o-linear-gradient":wC,"-webkit-linear-gradient":wC,"radial-gradient":dRe,"-moz-radial-gradient":EC,"-ms-radial-gradient":EC,"-o-radial-gradient":EC,"-webkit-radial-gradient":EC,"-webkit-gradient":uRe},mRe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Fx(n)&&hRe(n)}).map(function(n){return VR.parse(e,n)})}},pRe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gRe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return qA(t).map(function(r){return r.filter(di)}).map(qre)}},vRe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return qA(t).map(function(r){return r.filter(Ea).map(function(n){return n.value}).join(" ")}).map(xRe)}},xRe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cx;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(cx||(cx={}));var bRe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return qA(t).map(function(r){return r.filter(yRe)})}},yRe=function(e){return Ea(e)||di(e)},d4=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},wRe=d4("top"),ERe=d4("right"),CRe=d4("bottom"),_Re=d4("left"),A4=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return qre(r.filter(di))}}},SRe=A4("top-left"),NRe=A4("top-right"),kRe=A4("bottom-right"),BRe=A4("bottom-left"),f4=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},TRe=f4("top"),jRe=f4("right"),IRe=f4("bottom"),FRe=f4("left"),h4=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return f2(r)?r.number:0}}},ORe=h4("top"),DRe=h4("right"),RRe=h4("bottom"),PRe=h4("left"),LRe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},MRe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},URe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).reduce(function(r,n){return r|QRe(n.value)},0)}},QRe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},HRe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},VRe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},VS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(VS||(VS={}));var zRe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return VS.STRICT;case"normal":default:return VS.NORMAL}}},$Re={name:"line-height",initialValue:"normal",prefix:!1,type:4},xV=function(e,t){return Ea(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Oa(e,t):t},GRe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:VR.parse(e,t)}},KRe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},$F={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},m4=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},qRe=m4("top"),WRe=m4("right"),XRe=m4("bottom"),YRe=m4("left"),JRe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ZRe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},p4=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ePe=p4("top"),tPe=p4("right"),rPe=p4("bottom"),nPe=p4("left"),aPe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},sPe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},iPe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&zF(t[0],"none")?[]:qA(t).map(function(r){for(var n={color:Wf.TRANSPARENT,offsetX:xo,offsetY:xo,blur:xo},a=0,s=0;s<r.length;s++){var i=r[s];Am(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=V0.parse(e,i)}return n})}},oPe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},lPe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=dPe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},cPe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},uPe=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},dPe={matrix:cPe,matrix3d:uPe},bV={type:16,number:50,flags:A2},APe=[bV,bV],fPe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?APe:[r[0],r[1]]}},hPe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Oy;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Oy||(Oy={}));var mPe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Oy.BREAK_ALL;case"keep-all":return Oy.KEEP_ALL;case"normal":default:return Oy.NORMAL}}},pPe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(h1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},une={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},gPe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return h1(t)?t.number:1}},vPe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xPe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},bPe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},yPe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},wPe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(h1(t))return t.number;if(Ea(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},EPe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ea).map(function(r){return r.value})}},CPe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ci=function(e,t){return(e&t)!==0},_Pe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},SPe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Kre),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&h1(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},NPe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Kre),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ea(s)&&s.value!=="none"){var o=i&&h1(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},kPe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(f2).map(function(r){return une.parse(e,r)})}},BPe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(tRe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},yV=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},TPe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&zF(t[0],"none")?[]:qA(t).map(function(r){for(var n={color:255,offsetX:xo,offsetY:xo,blur:xo,spread:xo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];zF(i,"inset")?n.inset=!0:Am(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=V0.parse(e,i)}return n})}},jPe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},IPe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},FPe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return f2(t)?t.number:0}},OPe=function(){function e(t,r){var n,a;this.animationDuration=sr(t,kPe,r.animationDuration),this.backgroundClip=sr(t,aRe,r.backgroundClip),this.backgroundColor=sr(t,sRe,r.backgroundColor),this.backgroundImage=sr(t,mRe,r.backgroundImage),this.backgroundOrigin=sr(t,pRe,r.backgroundOrigin),this.backgroundPosition=sr(t,gRe,r.backgroundPosition),this.backgroundRepeat=sr(t,vRe,r.backgroundRepeat),this.backgroundSize=sr(t,bRe,r.backgroundSize),this.borderTopColor=sr(t,wRe,r.borderTopColor),this.borderRightColor=sr(t,ERe,r.borderRightColor),this.borderBottomColor=sr(t,CRe,r.borderBottomColor),this.borderLeftColor=sr(t,_Re,r.borderLeftColor),this.borderTopLeftRadius=sr(t,SRe,r.borderTopLeftRadius),this.borderTopRightRadius=sr(t,NRe,r.borderTopRightRadius),this.borderBottomRightRadius=sr(t,kRe,r.borderBottomRightRadius),this.borderBottomLeftRadius=sr(t,BRe,r.borderBottomLeftRadius),this.borderTopStyle=sr(t,TRe,r.borderTopStyle),this.borderRightStyle=sr(t,jRe,r.borderRightStyle),this.borderBottomStyle=sr(t,IRe,r.borderBottomStyle),this.borderLeftStyle=sr(t,FRe,r.borderLeftStyle),this.borderTopWidth=sr(t,ORe,r.borderTopWidth),this.borderRightWidth=sr(t,DRe,r.borderRightWidth),this.borderBottomWidth=sr(t,RRe,r.borderBottomWidth),this.borderLeftWidth=sr(t,PRe,r.borderLeftWidth),this.boxShadow=sr(t,TPe,r.boxShadow),this.color=sr(t,LRe,r.color),this.direction=sr(t,MRe,r.direction),this.display=sr(t,URe,r.display),this.float=sr(t,HRe,r.cssFloat),this.fontFamily=sr(t,bPe,r.fontFamily),this.fontSize=sr(t,yPe,r.fontSize),this.fontStyle=sr(t,CPe,r.fontStyle),this.fontVariant=sr(t,EPe,r.fontVariant),this.fontWeight=sr(t,wPe,r.fontWeight),this.letterSpacing=sr(t,VRe,r.letterSpacing),this.lineBreak=sr(t,zRe,r.lineBreak),this.lineHeight=sr(t,$Re,r.lineHeight),this.listStyleImage=sr(t,GRe,r.listStyleImage),this.listStylePosition=sr(t,KRe,r.listStylePosition),this.listStyleType=sr(t,$F,r.listStyleType),this.marginTop=sr(t,qRe,r.marginTop),this.marginRight=sr(t,WRe,r.marginRight),this.marginBottom=sr(t,XRe,r.marginBottom),this.marginLeft=sr(t,YRe,r.marginLeft),this.opacity=sr(t,gPe,r.opacity);var s=sr(t,JRe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sr(t,ZRe,r.overflowWrap),this.paddingTop=sr(t,ePe,r.paddingTop),this.paddingRight=sr(t,tPe,r.paddingRight),this.paddingBottom=sr(t,rPe,r.paddingBottom),this.paddingLeft=sr(t,nPe,r.paddingLeft),this.paintOrder=sr(t,jPe,r.paintOrder),this.position=sr(t,sPe,r.position),this.textAlign=sr(t,aPe,r.textAlign),this.textDecorationColor=sr(t,vPe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=sr(t,xPe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=sr(t,iPe,r.textShadow),this.textTransform=sr(t,oPe,r.textTransform),this.transform=sr(t,lPe,r.transform),this.transformOrigin=sr(t,fPe,r.transformOrigin),this.visibility=sr(t,hPe,r.visibility),this.webkitTextStrokeColor=sr(t,IPe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=sr(t,FPe,r.webkitTextStrokeWidth),this.wordBreak=sr(t,mPe,r.wordBreak),this.zIndex=sr(t,pPe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return z0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ci(this.display,4)||Ci(this.display,33554432)||Ci(this.display,268435456)||Ci(this.display,536870912)||Ci(this.display,67108864)||Ci(this.display,134217728)},e}(),DPe=function(){function e(t,r){this.content=sr(t,_Pe,r.content),this.quotes=sr(t,BPe,r.quotes)}return e}(),wV=function(){function e(t,r){this.counterIncrement=sr(t,SPe,r.counterIncrement),this.counterReset=sr(t,NPe,r.counterReset)}return e}(),sr=function(e,t,r){var n=new $re,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new Gre(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,Ea(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return c4.parse(e,s.parseComponentValue());case"color":return V0.parse(e,s.parseComponentValue());case"image":return VR.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Am(o)?o:xo;case"length-percentage":var l=s.parseComponentValue();return di(l)?l:xo;case"time":return une.parse(e,s.parseComponentValue())}break}},RPe="data-html2canvas-debug",PPe=function(e){var t=e.getAttribute(RPe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},GF=function(e,t){var r=PPe(e);return r===1||t===r},WA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,GF(r,3))debugger;this.styles=new OPe(t,window.getComputedStyle(r,null)),WF(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=o4(this.context,r),GF(r,4)&&(this.flags|=16)}return e}(),LPe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",EV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var CC=0;CC<EV.length;CC++)iy[EV.charCodeAt(CC)]=CC;var MPe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=iy[e.charCodeAt(n)],i=iy[e.charCodeAt(n+1)],o=iy[e.charCodeAt(n+2)],l=iy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},UPe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},QPe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},jp=5,zR=11,HT=2,HPe=zR-jp,dne=65536>>jp,VPe=1<<jp,VT=VPe-1,zPe=1024>>jp,$Pe=dne+zPe,GPe=$Pe,KPe=32,qPe=GPe+KPe,WPe=65536>>zR,XPe=1<<HPe,YPe=XPe-1,CV=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},JPe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},ZPe=function(e,t){var r=MPe(e),n=Array.isArray(r)?QPe(r):new Uint32Array(r),a=Array.isArray(r)?UPe(r):new Uint16Array(r),s=24,i=CV(a,s/2,n[4]/2),o=n[5]===2?CV(a,(s+n[4])/2):JPe(n,Math.ceil((s+n[4])/4));return new eLe(n[0],n[1],n[2],n[3],i,o)},eLe=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>jp],r=(r<<HT)+(t&VT),this.data[r];if(t<=65535)return r=this.index[dne+(t-55296>>jp)],r=(r<<HT)+(t&VT),this.data[r];if(t<this.highStart)return r=qPe-WPe+(t>>zR),r=this.index[r],r+=t>>jp&YPe,r=this.index[r],r=(r<<HT)+(t&VT),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),_V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tLe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _C=0;_C<_V.length;_C++)tLe[_V.charCodeAt(_C)]=_C;var rLe=1,zT=2,$T=3,SV=4,NV=5,nLe=7,kV=8,GT=9,KT=10,BV=11,TV=12,jV=13,IV=14,qT=15,aLe=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},sLe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},iLe=ZPe(LPe),bu="",WT="",oLe=function(e){return iLe.get(e)},lLe=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===zT&&i===$T)return bu;if(s===zT||s===$T||s===SV||i===zT||i===$T||i===SV)return WT;if(s===kV&&[kV,GT,BV,TV].indexOf(i)!==-1||(s===BV||s===GT)&&(i===GT||i===KT)||(s===TV||s===KT)&&i===KT||i===jV||i===NV||i===nLe||s===rLe)return bu;if(s===jV&&i===IV){for(;a===NV;)a=t[--n];if(a===IV)return bu}if(s===qT&&i===qT){for(var o=0;a===qT;)o++,a=t[--n];if(o%2===0)return bu}return WT},cLe=function(e){var t=aLe(e),r=t.length,n=0,a=0,s=t.map(oLe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=bu;n<r&&(i=lLe(t,s,++n))===bu;);if(i!==bu||n===r){var o=sLe.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},uLe=function(e){for(var t=cLe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},dLe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},ALe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=l4(n.data).map(function(l){return Vs(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},fLe=function(){return typeof new Image().crossOrigin<"u"},hLe=function(){return typeof new XMLHttpRequest().responseType=="string"},mLe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},FV=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},pLe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=KF(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),OV(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",FV(l)?OV(KF(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),FV(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},KF=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},OV=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},fo={get SUPPORT_RANGE_BOUNDS(){var e=dLe(document);return Object.defineProperty(fo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=fo.SUPPORT_RANGE_BOUNDS&&ALe(document);return Object.defineProperty(fo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=mLe(document);return Object.defineProperty(fo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?pLe(document):Promise.resolve(!1);return Object.defineProperty(fo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=fLe();return Object.defineProperty(fo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=hLe();return Object.defineProperty(fo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(fo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(fo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Dy=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),gLe=function(e,t,r,n){var a=bLe(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(fo.SUPPORT_RANGE_BOUNDS){var l=DV(n,i,o.length).getClientRects();if(l.length>1){var u=$R(o),d=0;u.forEach(function(h){s.push(new Dy(h,ih.fromDOMRectList(e,DV(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Dy(o,ih.fromDOMRectList(e,l)))}else{var f=n.splitText(o.length);s.push(new Dy(o,vLe(e,n))),n=f}else fo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},vLe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=o4(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return ih.EMPTY},DV=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},$R=function(e){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return uLe(e)},xLe=function(e,t){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return wLe(e,t)},bLe=function(e,t){return t.letterSpacing!==0?$R(e):xLe(e,t)},yLe=[32,160,4961,65792,65793,4153,4241],wLe=function(e,t){for(var r=WOe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=l4(i),l="";o.forEach(function(u){yLe.indexOf(u)===-1?l+=Vs(u):(l.length&&n.push(l),n.push(Vs(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},ELe=function(){function e(t,r,n){this.text=CLe(r.data,n.textTransform),this.textBounds=gLe(t,this.text,n,r)}return e}(),CLe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(_Le,SLe);case 2:return e.toUpperCase();default:return e}},_Le=/(^|\s|:|-|\(|\))([a-z])/g,SLe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Ane=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(WA),fne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(WA),hne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=o4(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(WA),mne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(WA),qF=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(WA),NLe=[{type:15,flags:0,unit:"px",number:3}],kLe=[{type:16,flags:0,number:50}],BLe=function(e){return e.width>e.height?new ih(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new ih(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},TLe=function(e){var t=e.type===jLe?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},zS="checkbox",$S="radio",jLe="password",RV=707406591,GR=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=TLe(n),(a.type===zS||a.type===$S)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=BLe(a.bounds)),a.type){case zS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=NLe;break;case $S:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=kLe;break}return a}return t}(WA),pne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(WA),gne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(WA),vne=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=bne(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Fy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Wf.TRANSPARENT,i=n.contentWindow.document.body?Fy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Wf.TRANSPARENT;a.backgroundColor=z0(s)?z0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(WA),ILe=["OL","UL","MENU"],k_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,yne(a)&&a.data.trim().length>0)r.textNodes.push(new ELe(e,a,r.styles));else if(Mv(a))if(_ne(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return k_(e,o,r,n)});else{var i=xne(e,a);i.styles.isVisible()&&(FLe(a,i,n)?i.flags|=4:OLe(i.styles)&&(i.flags|=2),ILe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?k_(e,a.shadowRoot,i,n):!GS(a)&&!wne(a)&&!KS(a)&&k_(e,a,i,n))}},xne=function(e,t){return XF(t)?new Ane(e,t):Ene(t)?new fne(e,t):wne(t)?new hne(e,t):DLe(t)?new mne(e,t):RLe(t)?new qF(e,t):PLe(t)?new GR(e,t):KS(t)?new pne(e,t):GS(t)?new gne(e,t):Cne(t)?new vne(e,t):new WA(e,t)},bne=function(e,t){var r=xne(e,t);return r.flags|=4,k_(e,t,r,r),r},FLe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||KR(e)&&r.styles.isTransparent()},OLe=function(e){return e.isPositioned()||e.isFloating()},yne=function(e){return e.nodeType===Node.TEXT_NODE},Mv=function(e){return e.nodeType===Node.ELEMENT_NODE},WF=function(e){return Mv(e)&&typeof e.style<"u"&&!B_(e)},B_=function(e){return typeof e.className=="object"},DLe=function(e){return e.tagName==="LI"},RLe=function(e){return e.tagName==="OL"},PLe=function(e){return e.tagName==="INPUT"},LLe=function(e){return e.tagName==="HTML"},wne=function(e){return e.tagName==="svg"},KR=function(e){return e.tagName==="BODY"},Ene=function(e){return e.tagName==="CANVAS"},PV=function(e){return e.tagName==="VIDEO"},XF=function(e){return e.tagName==="IMG"},Cne=function(e){return e.tagName==="IFRAME"},LV=function(e){return e.tagName==="STYLE"},MLe=function(e){return e.tagName==="SCRIPT"},GS=function(e){return e.tagName==="TEXTAREA"},KS=function(e){return e.tagName==="SELECT"},_ne=function(e){return e.tagName==="SLOT"},MV=function(e){return e.tagName.indexOf("-")>0},ULe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},e}(),UV={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},QV={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},QLe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HLe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uv=function(e,t,r,n,a,s){return e<t||e>r?yw(e,a,s.length>0):n.integers.reduce(function(i,o,l){for(;e>=o;)e-=o,i+=n.values[l];return i},"")+s},Sne=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Us=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Sne(Math.abs(e),s,n,function(i){return Vs(Math.floor(i%s)+t)})+a)},Jm=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Sne(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},jv=1,p0=2,g0=4,oy=8,Bf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return yw(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ci(s,jv)&&o!==""?o=t[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ci(s,p0)||u===1&&l===1&&Ci(s,g0)&&e>100||u===1&&l>1&&Ci(s,oy)?o=t[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},HV="",VV="",zV="",XT="",yw=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Us(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Jm(e,"",a);case 6:return uv(e,1,3999,UV,3,n).toLowerCase();case 7:return uv(e,1,3999,UV,3,n);case 8:return Us(e,945,969,!1,n);case 9:return Us(e,97,122,!1,n);case 10:return Us(e,65,90,!1,n);case 11:return Us(e,1632,1641,!0,n);case 12:case 49:return uv(e,1,9999,QV,3,n);case 35:return uv(e,1,9999,QV,3,n).toLowerCase();case 13:return Us(e,2534,2543,!0,n);case 14:case 30:return Us(e,6112,6121,!0,n);case 15:return Jm(e,"",a);case 16:return Jm(e,"",a);case 17:case 48:return Bf(e,"",HV,"",a,p0|g0|oy);case 47:return Bf(e,"",VV,"",a,jv|p0|g0|oy);case 42:return Bf(e,"",HV,"",a,p0|g0|oy);case 41:return Bf(e,"",VV,"",a,jv|p0|g0|oy);case 26:return Bf(e,"","",zV,a,0);case 25:return Bf(e,"","",zV,a,jv|p0|g0);case 31:return Bf(e,"","",XT,s,jv|p0|g0);case 33:return Bf(e,"","",XT,s,0);case 32:return Bf(e,"","",XT,s,jv|p0|g0);case 18:return Us(e,2406,2415,!0,n);case 20:return uv(e,1,19999,HLe,3,n);case 21:return Us(e,2790,2799,!0,n);case 22:return Us(e,2662,2671,!0,n);case 22:return uv(e,1,10999,QLe,3,n);case 23:return Jm(e,"");case 24:return Jm(e,"");case 27:return Us(e,3302,3311,!0,n);case 28:return Jm(e,"",a);case 29:return Jm(e,"",a);case 34:return Us(e,3792,3801,!0,n);case 37:return Us(e,6160,6169,!0,n);case 38:return Us(e,4160,4169,!0,n);case 39:return Us(e,2918,2927,!0,n);case 40:return Us(e,1776,1785,!0,n);case 43:return Us(e,3046,3055,!0,n);case 44:return Us(e,3174,3183,!0,n);case 45:return Us(e,3664,3673,!0,n);case 46:return Us(e,3872,3881,!0,n);case 3:default:return Us(e,48,57,!0,n)}},Nne="data-html2canvas-ignore",$V=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new ULe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=VLe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=GLe(a).then(function(){return cl(n,void 0,void 0,function(){var d,f;return Lo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(XLe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,$Le(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,f)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(qLe(document.doctype)+"<html></html>"),WLe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(t){if(GF(t,2))debugger;if(Ene(t))return this.createCanvasClone(t);if(PV(t))return this.createVideoClone(t);if(LV(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return XF(r)&&(XF(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),MV(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return YT(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Mv(r)||!MLe(r)&&!r.hasAttribute(Nne)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Mv(r)||!LV(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Mv(s)&&_ne(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(yne(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Mv(t)&&(WF(t)||B_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&WF(a)&&(this.clonedReferenceElement=a),KR(a)&&ZLe(a);var l=this.counters.parse(new wV(this.context,s)),u=this.resolvePseudoContent(t,a,i,Ry.BEFORE);MV(t)&&(r=!0),PV(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,Ry.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||B_(t))&&!Cne(t)||r)&&YT(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(GS(t)||KS(t))&&(GS(a)||KS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new wV(this.context,n));var l=new DPe(this.context,n),u=o.createElement("html2canvaspseudoelement");YT(n,u),l.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(Ea);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Fx),v=g[0],b=g[1];if(v&&Ea(v)){var y=s.counters.getCounterValue(v.value),C=b&&Ea(b)?$F.parse(s.context,b.value):3;u.appendChild(o.createTextNode(yw(y,C,!1)))}}else if(f.name==="counters"){var S=f.values.filter(Fx),v=S[0],I=S[1],b=S[2];if(v&&Ea(v)){var N=s.counters.getCounterValues(v.value),B=b&&Ea(b)?$F.parse(s.context,b.value):3,w=I&&I.type===0?I.value:"",_=N.map(function(D){return yw(D,B,!1)}).join(w);u.appendChild(o.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(yV(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(yV(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=YF+" "+JF;var d=a===Ry.BEFORE?" "+YF:" "+JF;return B_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Ry;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Ry||(Ry={}));var VLe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Nne,"true"),e.body.appendChild(r),r},zLe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},$Le=function(e){return Promise.all([].slice.call(e.images,0).map(zLe))},GLe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},KLe=["all","d","content"],YT=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);KLe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},qLe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},WLe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},XLe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},YLe=":before",JLe=":after",YF="___html2canvas___pseudoelement_before",JF="___html2canvas___pseudoelement_after",GV=`{
    content: "" !important;
    display: none !important;
}`,ZLe=function(e){e8e(e,"."+YF+YLe+GV+`
         .`+JF+JLe+GV)},e8e=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},kne=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),t8e=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(ZT(t)||s8e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return cl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Lo(this,function(o){switch(o.label){case 0:return r=kne.isSameOrigin(t),n=!JT(t)&&this._options.useCORS===!0&&fo.SUPPORT_CORS_IMAGES&&!r,a=!JT(t)&&!r&&!ZT(t)&&typeof this._options.proxy=="string"&&fo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!JT(t)&&!ZT(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(i8e(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=fo.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},e}(),r8e=/^data:image\/svg\+xml/i,n8e=/^data:image\/.*;base64,/i,a8e=/^data:image\/.*/i,s8e=function(e){return fo.SUPPORT_SVG_DRAWING||!o8e(e)},JT=function(e){return a8e.test(e)},i8e=function(e){return n8e.test(e)},ZT=function(e){return e.substr(0,4)==="blob"},o8e=function(e){return e.substr(-3).toLowerCase()==="svg"||r8e.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),dv=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},SC=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=dv(this.start,this.startControl,t),a=dv(this.startControl,this.endControl,t),s=dv(this.endControl,this.end,t),i=dv(n,a,t),o=dv(a,s,t),l=dv(i,o,t);return r?new e(this.start,n,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),wu=function(e){return e.type===1},l8e=function(){function e(t){var r=t.styles,n=t.bounds,a=sy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=sy(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=sy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=sy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],v=p[1],b=[];b.push((s+l)/n.width),b.push((g+f)/n.width),b.push((i+v)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,l/=y,u/=y,f/=y,h/=y,g/=y,v/=y);var C=n.width-l,S=n.height-h,I=n.width-f,N=n.height-v,B=r.borderTopWidth,w=r.borderRightWidth,_=r.borderBottomWidth,F=r.borderLeftWidth,U=Oa(r.paddingTop,t.bounds.width),D=Oa(r.paddingRight,t.bounds.width),k=Oa(r.paddingBottom,t.bounds.width),L=Oa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?qa(n.left+F/3,n.top+B/3,s-F/3,i-B/3,ia.TOP_LEFT):new ar(n.left+F/3,n.top+B/3),this.topRightBorderDoubleOuterBox=s>0||i>0?qa(n.left+C,n.top+B/3,l-w/3,u-B/3,ia.TOP_RIGHT):new ar(n.left+n.width-w/3,n.top+B/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?qa(n.left+I,n.top+S,f-w/3,h-_/3,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=g>0||v>0?qa(n.left+F/3,n.top+N,g-F/3,v-_/3,ia.BOTTOM_LEFT):new ar(n.left+F/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?qa(n.left+F*2/3,n.top+B*2/3,s-F*2/3,i-B*2/3,ia.TOP_LEFT):new ar(n.left+F*2/3,n.top+B*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?qa(n.left+C,n.top+B*2/3,l-w*2/3,u-B*2/3,ia.TOP_RIGHT):new ar(n.left+n.width-w*2/3,n.top+B*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?qa(n.left+I,n.top+S,f-w*2/3,h-_*2/3,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||v>0?qa(n.left+F*2/3,n.top+N,g-F*2/3,v-_*2/3,ia.BOTTOM_LEFT):new ar(n.left+F*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=s>0||i>0?qa(n.left+F/2,n.top+B/2,s-F/2,i-B/2,ia.TOP_LEFT):new ar(n.left+F/2,n.top+B/2),this.topRightBorderStroke=s>0||i>0?qa(n.left+C,n.top+B/2,l-w/2,u-B/2,ia.TOP_RIGHT):new ar(n.left+n.width-w/2,n.top+B/2),this.bottomRightBorderStroke=f>0||h>0?qa(n.left+I,n.top+S,f-w/2,h-_/2,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=g>0||v>0?qa(n.left+F/2,n.top+N,g-F/2,v-_/2,ia.BOTTOM_LEFT):new ar(n.left+F/2,n.top+n.height-_/2),this.topLeftBorderBox=s>0||i>0?qa(n.left,n.top,s,i,ia.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=l>0||u>0?qa(n.left+C,n.top,l,u,ia.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?qa(n.left+I,n.top+S,f,h,ia.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||v>0?qa(n.left,n.top+N,g,v,ia.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?qa(n.left+F,n.top+B,Math.max(0,s-F),Math.max(0,i-B),ia.TOP_LEFT):new ar(n.left+F,n.top+B),this.topRightPaddingBox=l>0||u>0?qa(n.left+Math.min(C,n.width-w),n.top+B,C>n.width+w?0:Math.max(0,l-w),Math.max(0,u-B),ia.TOP_RIGHT):new ar(n.left+n.width-w,n.top+B),this.bottomRightPaddingBox=f>0||h>0?qa(n.left+Math.min(I,n.width-F),n.top+Math.min(S,n.height-_),Math.max(0,f-w),Math.max(0,h-_),ia.BOTTOM_RIGHT):new ar(n.left+n.width-w,n.top+n.height-_),this.bottomLeftPaddingBox=g>0||v>0?qa(n.left+F,n.top+Math.min(N,n.height-_),Math.max(0,g-F),Math.max(0,v-_),ia.BOTTOM_LEFT):new ar(n.left+F,n.top+n.height-_),this.topLeftContentBox=s>0||i>0?qa(n.left+F+L,n.top+B+U,Math.max(0,s-(F+L)),Math.max(0,i-(B+U)),ia.TOP_LEFT):new ar(n.left+F+L,n.top+B+U),this.topRightContentBox=l>0||u>0?qa(n.left+Math.min(C,n.width+F+L),n.top+B+U,C>n.width+F+L?0:l-F+L,u-(B+U),ia.TOP_RIGHT):new ar(n.left+n.width-(w+D),n.top+B+U),this.bottomRightContentBox=f>0||h>0?qa(n.left+Math.min(I,n.width-(F+L)),n.top+Math.min(S,n.height+B+U),Math.max(0,f-(w+D)),h-(_+k),ia.BOTTOM_RIGHT):new ar(n.left+n.width-(w+D),n.top+n.height-(_+k)),this.bottomLeftContentBox=g>0||v>0?qa(n.left+F+L,n.top+N,Math.max(0,g-(F+L)),v-(_+k),ia.BOTTOM_LEFT):new ar(n.left+F+L,n.top+n.height-(_+k))}return e}(),ia;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ia||(ia={}));var qa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=e+r,u=t+n;switch(a){case ia.TOP_LEFT:return new SC(new ar(e,u),new ar(e,u-o),new ar(l-i,t),new ar(l,t));case ia.TOP_RIGHT:return new SC(new ar(e,t),new ar(e+i,t),new ar(l,u-o),new ar(l,u));case ia.BOTTOM_RIGHT:return new SC(new ar(l,t),new ar(l,t+o),new ar(e+i,u),new ar(e,u));case ia.BOTTOM_LEFT:default:return new SC(new ar(l,u),new ar(l-i,u),new ar(e,t+o),new ar(e,t))}},qS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},c8e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},WS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},u8e=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),NC=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),d8e=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),A8e=function(e){return e.type===0},Bne=function(e){return e.type===1},f8e=function(e){return e.type===2},KV=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},h8e=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Tne=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),jne=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new l8e(this.container),this.container.styles.opacity<1&&this.effects.push(new d8e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new u8e(n,a,s))}if(this.container.styles.overflowX!==0){var i=qS(this.curves),o=WS(this.curves);KV(i,o)?this.effects.push(new NC(i,6)):(this.effects.push(new NC(i,2)),this.effects.push(new NC(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!Bne(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=qS(n.curves),o=WS(n.curves);KV(i,o)||a.unshift(new NC(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return Ci(l.target,t)})},e}(),ZF=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ci(a.flags,4),i=Ci(a.flags,2),o=new jne(a,e);Ci(a.styles.display,2048)&&n.push(o);var l=Ci(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new Tne(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,v){return f>g.element.container.styles.zIndex.order?(h=v,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,v){return f>=g.element.container.styles.zIndex.order?(p=v+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);ZF(o,d,s?d:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),ZF(o,t,r,l);Ci(a.flags,8)&&Ine(a,l)})},Ine=function(e,t){for(var r=e instanceof qF?e.start:1,n=e instanceof qF?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof mne&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=yw(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},m8e=function(e){var t=new jne(e,null),r=new Tne(t),n=[];return ZF(t,r,r,n),Ine(t.container,n),r},qV=function(e,t){switch(t){case 0:return ku(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ku(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ku(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ku(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},p8e=function(e,t){switch(t){case 0:return ku(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return ku(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return ku(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return ku(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},g8e=function(e,t){switch(t){case 0:return ku(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return ku(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return ku(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return ku(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},v8e=function(e,t){switch(t){case 0:return kC(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return kC(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return kC(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return kC(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},kC=function(e,t){var r=[];return wu(e)?r.push(e.subdivide(.5,!1)):r.push(e),wu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},ku=function(e,t,r,n){var a=[];return wu(e)?a.push(e.subdivide(.5,!1)):a.push(e),wu(r)?a.push(r.subdivide(.5,!0)):a.push(r),wu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),wu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Fne=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},XS=function(e){var t=e.styles,r=e.bounds,n=Oa(t.paddingLeft,r.width),a=Oa(t.paddingRight,r.width),s=Oa(t.paddingTop,r.width),i=Oa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},x8e=function(e,t){return e===0?t.bounds:e===2?XS(t):Fne(t)},b8e=function(e,t){return e===0?t.bounds:e===2?XS(t):Fne(t)},e3=function(e,t,r){var n=x8e(Iv(e.styles.backgroundOrigin,t),e),a=b8e(Iv(e.styles.backgroundClip,t),e),s=y8e(Iv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],l=sy(Iv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=w8e(Iv(e.styles.backgroundRepeat,t),l,s,n,a),d=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[u,d,f,i,o]},Av=function(e){return Ea(e)&&e.value===cx.AUTO},BC=function(e){return typeof e=="number"},y8e=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Oa(i,r.width),Oa(o,r.height)];var l=BC(s);if(Ea(i)&&(i.value===cx.CONTAIN||i.value===cx.COVER)){if(BC(s)){var u=r.width/r.height;return u<s!=(i.value===cx.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=BC(n),f=BC(a),h=d||f;if(Av(i)&&(!o||Av(o))){if(d&&f)return[n,a];if(!l&&!h)return[r.width,r.height];if(h&&l){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var v=d?n:r.width,b=f?a:r.height;return[v,b]}if(l){var y=0,C=0;return di(i)?y=Oa(i,r.width):di(o)&&(C=Oa(o,r.height)),Av(i)?y=C*s:(!o||Av(o))&&(C=y/s),[y,C]}var S=null,I=null;if(di(i)?S=Oa(i,r.width):o&&di(o)&&(I=Oa(o,r.height)),S!==null&&(!o||Av(o))&&(I=d&&f?S/n*a:r.height),I!==null&&Av(i)&&(S=d&&f?I/a*n:r.width),S!==null&&I!==null)return[S,I];throw new Error("Unable to calculate background-size for element")},Iv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},w8e=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],l=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(l+n.top+i)),new ar(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+l)),new ar(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},E8e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",WV="Hidden Text",C8e=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=E8e,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(WV)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(WV)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),One=function(){function e(t,r){this.context=t,this.options=r}return e}(),_8e=1e4,S8e=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new C8e(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),f8e(r)&&(this.ctx.globalAlpha=r.opacity),A8e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Bne(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return cl(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return cl(this,void 0,void 0,function(){return Lo(this,function(n){switch(n.label){case 0:if(Ci(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=$R(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=j8e(r.fontFamily).join(", "),s=f2(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return cl(this,void 0,void 0,function(){var a,s,i,o,l,u,d,f,h=this;return Lo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(v){switch(v){case 0:h.ctx.fillStyle=Ui(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ui(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=XS(r),i=WS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l,C,C,u,d,f,h,I,p,g,N,v,b,y,C,S,I,N;return Lo(this,function(B){switch(B.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,B.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:B.sent(),B.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Ane))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return C=B.sent(),this.renderReplacedElement(n,a,C),[3,8];case 7:return B.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof fne&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof hne))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return C=B.sent(),this.renderReplacedElement(n,a,C),[3,12];case 11:return B.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof vne&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=B.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),B.label=14;case 14:if(n instanceof GR&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===zS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ui(RV),this.ctx.fill(),this.ctx.restore()):n.type===$S&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(RV),this.ctx.fill(),this.ctx.restore())),N8e(n)&&n.value.length){switch(h=this.createFontStyle(s),I=h[0],p=h[1],g=this.fontMetrics.getMetrics(I,p).baseline,this.ctx.font=I,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=B8e(n.styles.textAlign),N=XS(n),v=0,n.styles.textAlign){case 1:v+=N.width/2;break;case 2:v+=N.width;break}b=N.add(v,0,0,-N.height/2+1),this.ctx.save(),this.path([new ar(N.left,N.top),new ar(N.left+N.width,N.top),new ar(N.left+N.width,N.top+N.height),new ar(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dy(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ci(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];C=void 0,S=y.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return C=B.sent(),this.ctx.drawImage(C,n.bounds.left-(C.width+10),n.bounds.top),[3,18];case 17:return B.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(I=this.createFontStyle(s)[0],this.ctx.font=I,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new ih(n.bounds.left,n.bounds.top+Oa(n.styles.paddingTop,n.bounds.width),n.bounds.width,xV(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dy(r.listValue,N),s.letterSpacing,xV(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return cl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,l,y,u,d,y,f,h,y,p,g,y,v,b,y;return Lo(this,function(C){switch(C.label){case 0:if(Ci(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:C.sent(),n=0,a=r.negativeZIndex,C.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:C.sent(),C.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:C.sent(),s=0,i=r.nonInlineLevel,C.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:C.sent(),C.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,C.label=11;case 11:return o<l.length?(y=l[o],[4,this.renderStack(y)]):[3,14];case 12:C.sent(),C.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,C.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:C.sent(),C.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,C.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:C.sent(),C.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:C.sent(),C.label=25;case 25:return p++,[3,23];case 26:v=0,b=r.positiveZIndex,C.label=27;case 27:return v<b.length?(y=b[v],[4,this.renderStack(y)]):[3,30];case 28:C.sent(),C.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=wu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),wu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l;return Lo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,U,V,Z,L,R,_,g,U,V,Z,L,R,v,b,y,C,S,I,N,B,w,_,F,U,D,k,L,R,X,V,Z,H,z,q,re,P,K,Y,te;return Lo(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ie.sent(),[3,4];case 3:return ie.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=e3(r,n,[f.width,f.height,f.width/f.height]),U=p[0],V=p[1],Z=p[2],L=p[3],R=p[4],_=s.ctx.createPattern(s.resizeImage(f,L,R),"repeat"),s.renderRepeat(U,_,V,Z)),[3,6];case 5:ARe(d)?(g=e3(r,n,[null,null,null]),U=g[0],V=g[1],Z=g[2],L=g[3],R=g[4],v=oRe(d.angle,L,R),b=v[0],y=v[1],C=v[2],S=v[3],I=v[4],N=document.createElement("canvas"),N.width=L,N.height=R,B=N.getContext("2d"),w=B.createLinearGradient(y,S,C,I),gV(d.stops,b).forEach(function(Ae){return w.addColorStop(Ae.stop,Ui(Ae.color))}),B.fillStyle=w,B.fillRect(0,0,L,R),L>0&&R>0&&(_=s.ctx.createPattern(N,"repeat"),s.renderRepeat(U,_,V,Z))):fRe(d)&&(F=e3(r,n,[null,null,null]),U=F[0],D=F[1],k=F[2],L=F[3],R=F[4],X=d.position.length===0?[HR]:d.position,V=Oa(X[0],L),Z=Oa(X[X.length-1],R),H=lRe(d,V,Z,L,R),z=H[0],q=H[1],z>0&&q>0&&(re=s.ctx.createRadialGradient(D+V,k+Z,0,D+V,k+Z,z),gV(d.stops,z*2).forEach(function(Ae){return re.addColorStop(Ae.stop,Ui(Ae.color))}),s.path(U),s.ctx.fillStyle=re,z!==q?(P=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,Y=q/z,te=1/Y,s.ctx.save(),s.ctx.translate(P,K),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-P,-K),s.ctx.fillRect(D,te*(k-K)+K,L,R*te),s.ctx.restore()):s.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return cl(this,void 0,void 0,function(){return Lo(this,function(s){return this.path(qV(a,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return cl(this,void 0,void 0,function(){var i,o;return Lo(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=p8e(s,a),this.path(i),this.ctx.fillStyle=Ui(r),this.ctx.fill(),o=g8e(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,f=this;return Lo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!z0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=k8e(Iv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),z0(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=qS(r.curves),v=p.inset?0:_8e,b=h8e(g,-v+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+v,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Ui(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Ui(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,l=0,u=s,h.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!z0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return cl(this,void 0,void 0,function(){var o,l,u,d,f,h,p,g,v,b,y,C,S,I,N,B,N,B;return Lo(this,function(w){return this.ctx.save(),o=v8e(s,a),l=qV(s,a),i===2&&(this.path(l),this.ctx.clip()),wu(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),wu(l[1])?(f=l[1].end.x,h=l[1].end.y):(f=l[1].x,h=l[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),g=n<3?n*3:n*2,v=n<3?n*2:n,i===3&&(g=n,v=n),b=!0,p<=g*2?b=!1:p<=g*2+v?(y=p/(2*g+v),g*=y,v*=y):(C=Math.floor((p+v)/(g+v)),S=(p-C*g)/(C-1),I=(p-(C+1)*g)/C,v=I<=0||Math.abs(v-S)<Math.abs(v-I)?S:I),b&&(i===3?this.ctx.setLineDash([0,g+v]):this.ctx.setLineDash([g,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(wu(l[0])&&(N=l[3],B=l[0],this.ctx.beginPath(),this.formatPath([new ar(N.end.x,N.end.y),new ar(B.start.x,B.start.y)]),this.ctx.stroke()),wu(l[1])&&(N=l[1],B=l[2],this.ctx.beginPath(),this.formatPath([new ar(N.end.x,N.end.y),new ar(B.start.x,B.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return cl(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=m8e(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(One),N8e=function(e){return e instanceof gne||e instanceof pne?!0:e instanceof GR&&e.type!==$S&&e.type!==zS},k8e=function(e,t){switch(e){case 0:return qS(t);case 2:return c8e(t);case 1:default:return WS(t)}},B8e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},T8e=["-apple-system","system-ui"],j8e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return T8e.indexOf(t)===-1}):e},I8e=function(e){Od(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return cl(this,void 0,void 0,function(){var n,a;return Lo(this,function(s){switch(s.label){case 0:return n=KF(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,F8e(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(One),F8e=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},O8e=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,oC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,oC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,oC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,oC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),D8e=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new O8e({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new t8e(this,t)}return e.instanceCount=1,e}(),YS=function(e,t){return t===void 0&&(t={}),R8e(e,t)};typeof window<"u"&&kne.setContext(window);var R8e=function(e,t){return cl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,C,S,I,N,w,B,w,_,F,U,D,k,L,R,X,V,Z,H,z,q,re,P,K,Y;return Lo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(_=t.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(F=t.imageTimeout)!==null&&F!==void 0?F:15e3,proxy:t.proxy,useCORS:(U=t.useCORS)!==null&&U!==void 0?U:!1},s=IF({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(R=t.scrollX)!==null&&R!==void 0?R:n.pageXOffset,scrollY:(X=t.scrollY)!==null&&X!==void 0?X:n.pageYOffset},o=new ih(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new D8e(s,o),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new $V(l,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=KR(h)||LLe(h)?hOe(h.ownerDocument):o4(l,h),v=g.width,b=g.height,y=g.left,C=g.top,S=P8e(l,h,t.backgroundColor),I={canvas:t.canvas,backgroundColor:S,scale:(z=(H=t.scale)!==null&&H!==void 0?H:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((q=t.x)!==null&&q!==void 0?q:0)+y,y:((re=t.y)!==null&&re!==void 0?re:0)+C,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(v),height:(K=t.height)!==null&&K!==void 0?K:Math.ceil(b)},u?(l.logger.debug("Document cloned, using foreign object rendering"),w=new I8e(l,I),[4,w.render(h)]):[3,3];case 2:return N=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+C+" with size "+v+"x"+b+" using computed rendering"),l.logger.debug("Starting DOM parsing"),B=bne(l,h),S===B.styles.backgroundColor&&(B.styles.backgroundColor=Wf.TRANSPARENT),l.logger.debug("Starting renderer for element at "+I.x+","+I.y+" with size "+I.width+"x"+I.height),w=new S8e(l,I),[4,w.render(B)];case 4:N=te.sent(),te.label=5;case 5:return(!((Y=t.removeContainer)!==null&&Y!==void 0)||Y)&&($V.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,N]}})})},P8e=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?Fy(e,getComputedStyle(n.documentElement).backgroundColor):Wf.TRANSPARENT,s=n.body?Fy(e,getComputedStyle(n.body).backgroundColor):Wf.TRANSPARENT,i=typeof r=="string"?Fy(e,r):r===null?Wf.TRANSPARENT:4294967295;return t===n.documentElement?z0(a)?z0(s)?i:s:a:i};const L8e=Object.freeze(Object.defineProperty({__proto__:null,default:YS},Symbol.toStringTag,{value:"Module"})),g4="proyectos_interdisciplinarios",Dne="entregas_interdisciplinarias",M8e="usuarios",qR=e=>{const t=e.data();return{id:e.id,...t}},U8e=e=>{const t=tr(Lt(_t,g4),Gr("nombreProyecto","asc"));return xr(t,n=>{const a=n.docs.map(s=>qR(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},Q8e=async e=>{try{return(await Zn(Lt(_t,g4),e)).id}catch(t){throw console.error("Error al crear la planificacin:",t),new Error("No se pudo crear la planificacin.")}},XV=async(e,t)=>{try{const{id:r,...n}=t,a=mr(_t,g4,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar la planificacin:",r),new Error("No se pudo actualizar la planificacin.")}},H8e=async e=>{try{const t=mr(_t,g4,e);await Is(t)}catch(t){throw console.error("Error al eliminar la planificacin:",t),new Error("No se pudo eliminar la planificacin.")}},V8e=(e,t)=>{const r=tr(Lt(_t,Dne),_n("planificacionId","==",e));return xr(r,a=>{const s=a.docs.map(i=>qR(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},YV=async(e,t)=>{try{const r=mr(_t,Dne,e);await Ji(r,{feedbackProfesor:t,fechaFeedback:hr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentacin:",r),new Error("No se pudo guardar la retroalimentacin.")}},Rne=e=>{const t=tr(Lt(_t,M8e));return xr(t,n=>{const a=n.docs.map(s=>qR(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},z8e={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hiptesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Disear","Construir","Idear"]},$8e=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=T.useState(null),a=T.useMemo(()=>{const l=[];return e.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=T.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),f=new Date(`${l.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let g=0;for(let v=0;v<p.length;v++)g=p.charCodeAt(v)+((g<<5)-g);return g},f=["bg-rose-100 text-rose-800 dark:bg-rose-900/50 dark:text-rose-300","bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300","bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-violet-100 text-violet-800 dark:bg-violet-900/50 dark:text-violet-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],h=Math.abs(d(l))%f.length;return c.jsx("div",{className:`w-10 h-10 rounded-full ${f[h]} flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[f,h]=T.useState(l.activity),p=v=>{h({...f,[v.target.name]:v.target.value})},g=()=>{d(l.planId,f),u()};return c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8 animate-in slide-in-from-bottom-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:c.jsx(lZ,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[c.jsx(Jy,{className:"w-4 h-4"}),"Nombre de la Actividad"]}),c.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Ingrese el nombre de la actividad..."})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[c.jsx(LA,{className:"w-4 h-4"}),"Responsables"]}),c.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Responsables de la actividad..."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[c.jsx(xS,{className:"w-4 h-4"}),"Fecha de Inicio"]}),c.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[c.jsx(xS,{className:"w-4 h-4"}),"Fecha de Fin"]}),c.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsx("button",{onClick:u,className:"px-6 py-3 bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:g,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg",children:"Guardar Cambios"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-xl",children:c.jsx(Yy,{className:"w-8 h-8 text-slate-600 dark:text-slate-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Visualice el progreso y las dependencias del proyecto"})]})]}),c.jsxs("div",{className:"text-center py-12",children:[c.jsx($f,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"}),c.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Cree una planificacin primero para ver el cronograma"})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:c.jsx(Yy,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Visualice el progreso y las dependencias del proyecto"})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Inicio"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Fin"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 text-base font-semibold text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4",children:c.jsx(i,{name:l.responsables||"Sin asignar"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},Zm=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>c.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),G8e=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=T.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=T.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[l,u]=T.useState({nombre:"",fecha:""}),[d,f]=T.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,p]=T.useState(!1),[g,v]=T.useState(!1),[b,y]=T.useState(!1);T.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const C=async R=>{if(!a.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}R==="objetivos"?p(!0):v(!0);const X="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let V="";R==="objetivos"?V=`Basado en la siguiente descripcin de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            
            Descripcin del Proyecto: "${a.descripcionProyecto}"
            Asignaturas involucradas: "${a.asignaturas.join(", ")}"`:V=`Basado en la siguiente descripcin y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            
            Descripcin del Proyecto: "${a.descripcionProyecto}"
            Objetivos: "${a.objetivos||"An no definidos, genralos a partir de la descripcin."}"
            Asignaturas involucradas: "${a.asignaturas.join(", ")}"`;try{const re=(await(await new cs(X).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(V)).response).text();s(P=>({...P,[R]:re.replace(/(\*\*|\*)/g,"")}))}catch(Z){console.error(`Error al generar ${R}`,Z),alert(`Hubo un error al generar los ${R}. Intntelo de nuevo.`)}finally{R==="objetivos"?p(!1):v(!1)}},S=async()=>{if(!a.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}y(!0);const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=`
            Basado en la descripcin de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            
            Descripcin del proyecto: "${a.descripcionProyecto}"
            Docentes responsables: "${a.docentesResponsables.join(", ")}"
            Asignaturas involucradas: "${a.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lgicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const re=(await(await new cs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),P=JSON.parse(re);s(K=>{var Y,te,ie;return{...K,actividades:((Y=P.actividades)==null?void 0:Y.map(Ae=>({...Ae,id:crypto.randomUUID()})))||K.actividades,fechasClave:((te=P.fechasClave)==null?void 0:te.map(Ae=>({...Ae,id:crypto.randomUUID()})))||K.fechasClave,tareas:((ie=P.tareas)==null?void 0:ie.map((Ae,oe)=>({...Ae,id:crypto.randomUUID(),numero:oe+1})))||K.tareas}})}catch(V){console.error("Error al generar la estructura del proyecto:",V),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{y(!1)}},I=R=>{s(X=>({...X,[R.target.name]:R.target.value}))},N=R=>{s(X=>{const V=X.asignaturas,Z=V.includes(R)?V.filter(z=>z!==R):[...V,R];let H=X.contenidosPorAsignatura;return Z.includes(R)&&!V.includes(R)?H=[...H,{asignatura:R,contenidos:"",habilidades:[]}]:!Z.includes(R)&&V.includes(R)&&(H=H.filter(z=>z.asignatura!==R)),{...X,asignaturas:Z,contenidosPorAsignatura:H}})},B=R=>{s(X=>{const V=X.cursos,Z=V.includes(R)?V.filter(H=>H!==R):[...V,R];return{...X,cursos:Z}})},w=R=>{s(X=>{const V=X.docentesResponsables,Z=V.includes(R)?V.filter(H=>H!==R):[...V,R];return{...X,docentesResponsables:Z}})},_=(R,X,V)=>{s(Z=>({...Z,contenidosPorAsignatura:Z.contenidosPorAsignatura.map(H=>H.asignatura===R?{...H,[X]:V}:H)}))},F=(R,X)=>{s(V=>({...V,contenidosPorAsignatura:V.contenidosPorAsignatura.map(Z=>Z.asignatura===R?{...Z,habilidades:Z.habilidades.includes(X)?Z.habilidades.filter(H=>H!==X):[...Z.habilidades,X]}:Z)}))},U=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(R=>({...R,actividades:[...R.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},D=()=>{!l.nombre||!l.fecha||(s(R=>({...R,fechasClave:[...R.fechasClave||[],{...l,id:crypto.randomUUID()}]})),u({nombre:"",fecha:""}))},k=()=>{var X;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const R={id:crypto.randomUUID(),numero:(((X=a.tareas)==null?void 0:X.length)||0)+1,...d};s(V=>({...V,tareas:[...V.tareas||[],R]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})},L=R=>{const X=n.find(V=>V.id===R);return X?X.nombreCompleto:R};return c.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:c.jsx(Zy,{className:"w-10 h-10 text-white"})}),c.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),c.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Disee experiencias de aprendizaje colaborativo e innovador"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsx(Zm,{icon:c.jsx(Jy,{className:"w-6 h-6 text-slate-600"}),label:"Informacin del Proyecto",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),c.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:I,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del Proyecto"}),c.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:I,placeholder:"Detalle aqu la metodologa, el producto final esperado y el propsito del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),c.jsx(Zm,{icon:c.jsx(LA,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(R=>c.jsx("button",{type:"button",onClick:()=>w(R.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(R.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(R.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:c.jsx(eF,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm",children:R.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.email})]})]})},R.id))}),a.docentesResponsables.length>0&&c.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Profesores Seleccionados:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:a.docentesResponsables.map(R=>c.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded-md text-xs font-medium",children:L(R)},R))})]})]})}),c.jsx(Zm,{icon:c.jsx(iZ,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ns.map(R=>c.jsx("button",{type:"button",onClick:()=>B(R),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(R)?"bg-amber-500 text-white shadow-lg transform scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:R},R))})})]}),c.jsx("div",{className:"space-y-6",children:c.jsx(Zm,{icon:c.jsx(zp,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:qi.map(R=>c.jsx("button",{type:"button",onClick:()=>N(R),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(R)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:R},R))})]}),a.contenidosPorAsignatura.length>0&&c.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[c.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(R=>c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[c.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[c.jsx(zp,{className:"w-4 h-4"}),R.asignatura]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),c.jsx("textarea",{value:R.contenidos,onChange:X=>_(R.asignatura,"contenidos",X.target.value),placeholder:`Detalle los contenidos especficos de ${R.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades segn Taxonoma de Bloom:"}),c.jsx("div",{className:"space-y-2",children:Object.entries(z8e).map(([X,V])=>c.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[c.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[X,":"]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:V.map(Z=>c.jsx("button",{type:"button",onClick:()=>F(R.asignatura,Z),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${R.habilidades.includes(Z)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:Z},Z))})]},X))}),R.habilidades.length>0&&c.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[c.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:R.habilidades.map(X=>c.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:X},X))})]})]})]})]},R.asignatura))]})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Zm,{icon:c.jsx(cZ,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",aiButton:c.jsx("button",{type:"button",onClick:()=>C("objetivos"),disabled:!a.descripcionProyecto.trim()||h,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar con IA",children:c.jsx(v_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),children:h?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Generando objetivos..."})]}):c.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:I,placeholder:"Liste los objetivos de aprendizaje del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),c.jsx(Zm,{icon:c.jsx(g_,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de xito",aiButton:c.jsx("button",{type:"button",onClick:()=>C("indicadoresLogro"),disabled:!a.descripcionProyecto.trim()||g,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar con IA",children:c.jsx(v_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),children:g?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Generando indicadores..."})]}):c.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:I,placeholder:"Liste los indicadores de logro o evaluacin...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})})]}),c.jsx(Zm,{icon:c.jsx(xS,{className:"w-6 h-6 text-slate-600"}),label:"Planificacin y Cronograma",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center border-b border-slate-200 dark:border-slate-700 pb-6",children:[c.jsx("button",{type:"button",onClick:S,disabled:b||!a.descripcionProyecto,className:"inline-flex items-center gap-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:b?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generando estructura..."]}):c.jsxs(c.Fragment,{children:[c.jsx(v_,{className:"w-5 h-5"}),"Sugerir Estructura Completa con IA"]})}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"La IA generar actividades, fechas clave y tareas basadas en la descripcin del proyecto"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Yy,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),c.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre de la Actividad"}),c.jsx("input",{value:i.nombre,onChange:R=>o({...i,nombre:R.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{type:"date",value:i.fechaInicio,onChange:R=>o({...i,fechaInicio:R.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Fin"}),c.jsx("input",{type:"date",value:i.fechaFin,onChange:R=>o({...i,fechaFin:R.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs("button",{type:"button",onClick:U,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[c.jsx(Cp,{className:"w-4 h-4"}),"Agregar"]})})]}),a.actividades.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),c.jsx("div",{className:"space-y-2",children:a.actividades.map(R=>c.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),c.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[R.fechaInicio," - ",R.fechaFin]})]})},R.id))})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(FD,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),c.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 items-end",children:[c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),c.jsx("input",{value:l.nombre,onChange:R=>u({...l,nombre:R.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),c.jsx("input",{type:"date",value:l.fecha,onChange:R=>u({...l,fecha:R.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[c.jsx(Cp,{className:"w-4 h-4"}),"Agregar"]})]}),a.fechasClave.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),c.jsx("div",{className:"space-y-2",children:a.fechasClave.map(R=>c.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),c.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:R.fecha})]})},R.id))})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(D1e,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),c.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[c.jsxs("div",{className:"lg:col-span-6",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),c.jsx("input",{value:d.instrucciones,onChange:R=>f({...d,instrucciones:R.target.value}),placeholder:"Descripcin detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),c.jsx("input",{type:"date",value:d.fechaEntrega,onChange:R=>f({...d,fechaEntrega:R.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("button",{type:"button",onClick:k,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[c.jsx(Cp,{className:"w-4 h-4"}),"Agregar Tarea"]})})]}),a.tareas&&a.tareas.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),c.jsx("div",{className:"space-y-2",children:a.tareas.map(R=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",R.numero]}),c.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:R.instrucciones})]}),c.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs ml-3",children:R.fechaEntrega})]})},R.id))})]})]})]})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),c.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})},K8e=({plan:e,onBack:t,availableTeachers:r})=>{var g,v;const[n,a]=T.useState([]),[s,i]=T.useState([]),[o,l]=T.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=T.useState(null);T.useEffect(()=>{const b=Rne(a),y=V8e(e.id,i);return()=>{b(),y()}},[e.id]);const f=T.useMemo(()=>n.filter(b=>b.profile===Yt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>b.nombreCompleto.localeCompare(y.nombreCompleto)),[n,e.cursos]),h=async b=>{var S;d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",C=`
            Eres un profesor asistente. Genera una retroalimentacin constructiva para la entrega de un estudiante.
            - Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
            - Comentario del estudiante: "${b.observacionesEstudiante||"No dej comentarios."}"
            - Enlace entregado: "${b.enlaceUrl||"No aplica"}"
            - Archivo entregado: "${((S=b.archivoAdjunto)==null?void 0:S.nombre)||"No aplica"}"
            
            La retroalimentacin debe ser breve (2-3 frases), motivadora, y enfocada en cmo podra mejorar.
        `;try{const _=(await(await new cs(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text().replace(/(\*\*|\*)/g,"");await YV(b.id,_)}catch(I){console.error("Error al generar feedback con IA:",I),alert("No se pudo generar la retroalimentacin.")}finally{d(null)}},p=b=>b.map(y=>{const C=r.find(S=>S.id===y);return C?C.nombreCompleto:y}).join(", ");return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),c.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[c.jsx(YI,{className:"w-4 h-4"}),"Volver a Proyectos"]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),c.jsx("select",{value:o.id,onChange:b=>{var y;return l(((y=e.tareas)==null?void 0:y.find(C=>C.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(v=e.tareas)==null?void 0:v.map(b=>c.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),c.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(C=>C.tareaId===o.id&&C.estudianteId===b.id);return c.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:b.nombreCompleto.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2)}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[c.jsx(FD,{className:"w-4 h-4"}),"Entregado"]}):c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[c.jsx($f,{className:"w-4 h-4"}),"Pendiente"]})})]}),y?c.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),c.jsxs("a",{href:y.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[c.jsx(Jy,{className:"w-4 h-4"}),y.enlaceUrl]})]}),y.archivoAdjunto&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),c.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[c.jsx(LN,{className:"w-4 h-4"}),y.archivoAdjunto.nombre]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentacin del profesor:"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:y.feedbackProfesor||"",onBlur:C=>YV(y.id,C.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),c.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):c.jsx(v_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):c.jsxs("div",{className:"text-center py-6",children:[c.jsx($f,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante an no ha realizado la entrega"})]})]},b.id)})})]}):c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx($f,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),c.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),c.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[c.jsx(YI,{className:"w-4 h-4"}),"Volver a Proyectos"]})]})})},JV=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState("list"),[l,u]=T.useState(null),[d,f]=T.useState(null),[h,p]=T.useState(null);T.useEffect(()=>{s(!0);const N=Rne(w=>{const _=w.filter(F=>F.profile===Yt.PROFESOR);n(_)}),B=U8e(w=>{const _=w.map(F=>({...F,docentesResponsables:Array.isArray(F.docentesResponsables)?F.docentesResponsables:[F.docentesResponsables].filter(Boolean),contenidosPorAsignatura:F.contenidosPorAsignatura||[]}));t(_),s(!1)});return()=>{N(),B()}},[]);const g=T.useCallback(async(N,B)=>{const w=e.find(_=>_.id===N);if(w){const _={...w,actividades:(w.actividades||[]).map(F=>F.id===B.id?B:F)};await XV(N,_)}},[e]),v=async N=>{try{const B={...N,docentesResponsables:Array.isArray(N.docentesResponsables)?N.docentesResponsables.join(", "):N.docentesResponsables};"id"in N&&N.id?await XV(N.id,B):await Q8e(B),o("list"),u(null)}catch(B){console.error("Error al guardar la planificacin:",B),alert("No se pudo guardar la planificacin.")}},b=N=>{u(N),o("form")},y=async N=>{if(!N){console.error("handleDelete fue llamado con un ID invlido:",N),alert("Error: No se puede eliminar un proyecto sin un ID vlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await H8e(N)}catch(B){console.error("Error al eliminar la planificacin:",B),alert("No se pudo eliminar la planificacin.")}},C=()=>{u(null),o("form")},S=async N=>{f(N.id);const B=new gr("p","mm","a4"),w=15,_=B.internal.pageSize.getWidth(),F=B.internal.pageSize.getHeight(),U=_-w*2;let D=w;const k=22,L=14,R=11,X=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text("Proyecto Interdisciplinario",w,12),B.text("Liceo Industrial de Recoleta",_-w,12,{align:"right"}),B.setDrawColor(220),B.line(w,15,_-w,15)},V=P=>{D+P>F-w&&(B.addPage(),X(),D=w+15)},Z=(P,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const Y=10;B.setFontSize(R);const te=Array.isArray(K)?K.join(", "):String(K),ie=B.splitTextToSize(te,U),Ae=ie.length*(R*.35*1.15);V(Y+Ae+12),B.setFont("helvetica","bold"),B.setFontSize(L),B.setTextColor(40),B.text(P,w,D),D+=6,B.setDrawColor(200),B.line(w,D,w+30,D),D+=8,B.setFont("helvetica","normal"),B.setFontSize(R),B.setTextColor(80),B.text(ie,w,D),D+=Ae+12};X(),D=w+20,B.setFont("helvetica","bold"),B.setFontSize(k),B.setTextColor(0);const H=B.splitTextToSize(N.nombreProyecto,U);if(B.text(H,w,D),D+=H.length*(k*.4)+10,vl(B,{startY:D,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(P=>P.map(K=>{const Y=r.find(te=>te.id===K);return Y?Y.nombreCompleto:K}).join(", "))(N.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:R,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),D=B.lastAutoTable.finalY+15,Z("Descripcin del Proyecto",N.descripcionProyecto),Z("Objetivos de Aprendizaje",N.objetivos),Z("Indicadores de Logro",N.indicadoresLogro),N.contenidosPorAsignatura&&N.contenidosPorAsignatura.length>0&&(V(50),B.setFont("helvetica","bold"),B.setFontSize(L),B.setTextColor(40),B.text("Contenidos por Asignatura",w,D),D+=10,N.contenidosPorAsignatura.forEach(P=>{if(V(30),B.setFont("helvetica","bold"),B.setFontSize(R),B.text(`${P.asignatura}:`,w,D),D+=6,B.setFont("helvetica","normal"),P.contenidos){const K=B.splitTextToSize(`Contenidos: ${P.contenidos}`,U-10);B.text(K,w+5,D),D+=K.length*4+3}if(P.habilidades&&P.habilidades.length>0){const K=`Habilidades: ${P.habilidades.join(", ")}`,Y=B.splitTextToSize(K,U-10);B.text(Y,w+5,D),D+=Y.length*4+8}}),D+=10),N.tareas&&N.tareas.length>0){const P=N.tareas.map(Y=>[Y.numero.toString(),Y.instrucciones,Y.fechaEntrega]),K=(P.length+1)*10+15;V(K+15),B.setFont("helvetica","bold"),B.setFontSize(L),B.setTextColor(40),B.text("Tareas para Estudiantes",w,D),D+=10,vl(B,{startY:D,head:[["#","Instrucciones","Fecha de Entrega"]],body:P,theme:"striped",headStyles:{fillColor:[52,73,94]}}),D=B.lastAutoTable.finalY+15}const q=document.getElementById("gantt-container-vertical");if(q)try{const K=(await YS(q,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");B.addPage(),X(),D=w+15,B.setFont("helvetica","bold"),B.setFontSize(L),B.setTextColor(40),B.text("Cronograma del Proyecto",w,D),D+=10;const Y=B.getImageProperties(K),te=U,ie=Y.height*te/Y.width;B.addImage(K,"PNG",w,D,te,ie)}catch(P){console.error("Error generating timeline image:",P)}const re=B.internal.pages.length-1;for(let P=1;P<=re;P++)B.setPage(P),B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text(`Pgina ${P} de ${re}`,_-w,B.internal.pageSize.getHeight()-10,{align:"right"});B.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},I=N=>N.map(B=>{const w=r.find(_=>_.id===B);return w?w.nombreCompleto:B}).join(", ");return a?c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?c.jsx(K8e,{plan:h,onBack:()=>p(null),availableTeachers:r}):c.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:c.jsx(Zy,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),c.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),c.jsxs("button",{onClick:C,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[c.jsx(Cp,{className:"w-5 h-5"}),"Crear Nuevo Proyecto"]})]}),e.length===0?c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:c.jsx(Zy,{className:"w-12 h-12 text-slate-400"})}),c.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),c.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(Cp,{className:"w-4 h-4"}),"Crear Primer Proyecto"]})]}):c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(N=>c.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[c.jsx("div",{className:"flex justify-between items-start mb-4",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:N.nombreProyecto}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsx(iZ,{className:"w-4 h-4"}),c.jsxs("span",{children:["Cursos: ",N.cursos.join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsx(LA,{className:"w-4 h-4"}),c.jsxs("span",{children:["Profesores: ",I(N.docentesResponsables)]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsx(zp,{className:"w-4 h-4"}),c.jsxs("span",{children:["Asignaturas: ",N.asignaturas.length]})]})]})]})}),N.descripcionProyecto&&c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:N.descripcionProyecto}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>p(N),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[c.jsx(FD,{className:"w-4 h-4"}),"Entregas"]}),c.jsxs("button",{onClick:()=>S(N),disabled:d===N.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===N.id?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):c.jsx(LN,{className:"w-4 h-4"}),"PDF"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>b(N),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:c.jsx(lZ,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>y(N.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:c.jsx(ug,{className:"w-4 h-4"})})]})]})]},N.id))})]}):c.jsx(G8e,{initialPlan:l,onSave:v,onCancel:()=>{o("list"),u(null)},availableTeachers:r}),e.length>0&&i==="list"&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx($8e,{planificaciones:e,onActivityUpdate:g})})]})},t3="paolMaquinas",ZV="paolRegistros",q8e=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=T.useState(a),[o,l]=T.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=T.useState(u),[h,p]=T.useState(null),[g,v]=T.useState({maquinaId:"",curso:"",profesor:"",fecha:""});T.useEffect(()=>{try{const k=localStorage.getItem(t3);if(k&&JSON.parse(k).length>0)t(JSON.parse(k));else{const R=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidrulica",especialidad:"Automotriz"}];t(R),localStorage.setItem(t3,JSON.stringify(R))}const L=localStorage.getItem(ZV);L&&n(JSON.parse(L))}catch(k){console.error("Error al cargar datos de Paol desde localStorage",k)}},[]);const b=T.useCallback(k=>{t(k),localStorage.setItem(t3,JSON.stringify(k))},[]),y=T.useCallback(k=>{n(k),localStorage.setItem(ZV,JSON.stringify(k))},[]),C=k=>{k.preventDefault(),d.nombre.trim()&&(b(h?e.map(L=>L.id===h.id?{...h,...d}:L):[{...d,id:crypto.randomUUID()},...e]),f(u),p(null))},S=T.useCallback(k=>{if(r.some(L=>L.maquinaId===k)){alert("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");return}window.confirm("Eliminar esta mquina?")&&b(e.filter(L=>L.id!==k))},[e,r,b]),I=k=>{k.preventDefault();const L=o||s;if(!L.curso||!L.profesorResponsable.trim()||!L.maquinaId||L.totalHoras<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}y(o?r.map(R=>R.id===o.id?o:R):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},N=T.useCallback(k=>{window.confirm("Eliminar este registro de uso?")&&y(r.filter(L=>L.id!==k))},[r,y]),B=T.useMemo(()=>r.filter(k=>(g.maquinaId===""||k.maquinaId===g.maquinaId)&&(g.curso===""||k.curso===g.curso)&&(g.profesor===""||k.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||k.fecha===g.fecha)).sort((k,L)=>new Date(L.fecha).getTime()-new Date(k.fecha).getTime()),[r,g]),w=T.useMemo(()=>new Map(e.map(k=>[k.id,k])),[e]),_=()=>{const k=B.map(X=>{var V,Z;return{Fecha:X.fecha,Curso:X.curso,Profesor:X.profesorResponsable,Mquina:((V=w.get(X.maquinaId))==null?void 0:V.nombre)||"N/A",Especialidad:((Z=w.get(X.maquinaId))==null?void 0:Z.especialidad)||"N/A","Total Horas":X.totalHoras,Observaciones:X.observaciones}}),L=Su.json_to_sheet(k),R=Su.book_new();Su.book_append_sheet(R,L,"RegistrosPaol"),TR(R,"Registros_Paol.xlsx")},F=()=>{const k=new gr;vl(k,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:B.map(L=>{var R,X;return[L.fecha,L.curso,L.profesorResponsable,((R=w.get(L.maquinaId))==null?void 0:R.nombre)||"N/A",((X=w.get(L.maquinaId))==null?void 0:X.especialidad)||"N/A",L.totalHoras,L.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:L=>{k.setFontSize(10),k.setFont("helvetica","bold"),k.text("LICEO INDUSTRIAL DE RECOLETA",L.settings.margin.left,15)}}),k.save("Registros_Paol.pdf")},U="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",D=()=>{const k=o||s,L=o?l:i;return c.jsxs("form",{onSubmit:I,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:k.fecha,onChange:R=>L({...k,fecha:R.target.value}),className:U,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:k.curso,onChange:R=>L({...k,curso:R.target.value}),className:U,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),Ns.map(R=>c.jsx("option",{children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:k.profesorResponsable,onChange:R=>L({...k,profesorResponsable:R.target.value}),className:U,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),WI.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Mquina"}),c.jsxs("select",{name:"maquinaId",value:k.maquinaId,onChange:R=>L({...k,maquinaId:R.target.value}),className:U,required:!0,children:[c.jsx("option",{value:"",children:"Mquina"}),e.map(R=>c.jsx("option",{value:R.id,children:R.nombre},R.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:k.totalHoras,onChange:R=>L({...k,totalHoras:Number(R.target.value)}),className:U,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:k.observaciones,onChange:R=>L({...k,observaciones:R.target.value}),placeholder:"Observaciones...",className:`${U}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Paol: Registro de Uso de Mquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),D()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Mquinas"}),c.jsxs("form",{onSubmit:C,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:k=>f({...d,nombre:k.target.value}),placeholder:"Nombre mquina",className:U}),c.jsxs("select",{value:d.especialidad,onChange:k=>f({...d,especialidad:k.target.value}),className:U,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:h?"":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(k=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[k.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",k.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{p(k),f(k)},className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>S(k.id),className:"text-red-500",children:""})]})]},k.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:_,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:F,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:g.fecha,onChange:k=>v({...g,fecha:k.target.value}),className:U}),c.jsxs("select",{value:g.curso,onChange:k=>v({...g,curso:k.target.value}),className:U,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Ns.map(k=>c.jsx("option",{children:k},k))]}),c.jsxs("select",{value:g.maquinaId,onChange:k=>v({...g,maquinaId:k.target.value}),className:U,children:[c.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(k=>c.jsx("option",{value:k.id,children:k.nombre},k.id))]}),c.jsx("input",{value:g.profesor,onChange:k=>v({...g,profesor:k.target.value}),placeholder:"Buscar profesor...",className:U})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Mquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:B.map(k=>{var L;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:k.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((L=w.get(k.maquinaId))==null?void 0:L.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[k.profesorResponsable," (",k.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:k.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(k),className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>N(k.id),className:"text-red-500 ml-2",children:""})]})]},k.id)})})]})})]})]})]})};function wl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=wl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var r3={exports:{}},n3={},a3={exports:{}},s3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ez;function W8e(){if(ez)return s3;ez=1;var e=Yx();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=h,l(v)&&b({inst:v})},[f,p,h]),a(function(){return l(v)&&b({inst:v}),f(function(){l(v)&&b({inst:v})})},[f]),i(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return s3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,s3}var tz;function X8e(){return tz||(tz=1,a3.exports=W8e()),a3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rz;function Y8e(){if(rz)return n3;rz=1;var e=Yx(),t=X8e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return n3.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function y(B){if(!C){if(C=!0,S=B,B=h(B),p!==void 0&&v.hasValue){var w=v.value;if(p(w,B))return I=w}return I=B}if(w=I,n(S,B))return w;var _=h(B);return p!==void 0&&p(w,_)?(S=B,w):(S=B,I=_)}var C=!1,S,I,N=f===void 0?null:f;return[function(){return y(d())},N===null?void 0:function(){return y(N())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},n3}var nz;function J8e(){return nz||(nz=1,r3.exports=Y8e()),r3.exports}var Pne=J8e();const Z8e=yl(Pne),eMe={},az=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(eMe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},tMe=e=>e?az(e):az,{useDebugValue:rMe}=lt,{useSyncExternalStoreWithSelector:nMe}=Z8e,aMe=e=>e;function Lne(e,t=aMe,r){const n=nMe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return rMe(n),n}const sz=(e,t)=>{const r=tMe(e),n=(a,s=t)=>Lne(r,a,s);return Object.assign(n,r),n},sMe=(e,t)=>e?sz(e,t):sz;function tl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var iMe={value:()=>{}};function v4(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new T_(r)}function T_(e){this._=e}function oMe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}T_.prototype=v4.prototype={constructor:T_,on:function(e,t){var r=this._,n=oMe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=lMe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=iz(r[a],e.name,t);else if(t==null)for(a in r)r[a]=iz(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new T_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function lMe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function iz(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=iMe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var e6="http://www.w3.org/1999/xhtml";const oz={svg:"http://www.w3.org/2000/svg",xhtml:e6,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function x4(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),oz.hasOwnProperty(t)?{space:oz[t],local:e}:e}function cMe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===e6&&t.documentElement.namespaceURI===e6?t.createElement(e):t.createElementNS(r,e)}}function uMe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mne(e){var t=x4(e);return(t.local?uMe:cMe)(t)}function dMe(){}function WR(e){return e==null?dMe:function(){return this.querySelector(e)}}function AMe(e){typeof e!="function"&&(e=WR(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=e.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Rc(n,this._parents)}function fMe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hMe(){return[]}function Une(e){return e==null?hMe:function(){return this.querySelectorAll(e)}}function mMe(e){return function(){return fMe(e.apply(this,arguments))}}function pMe(e){typeof e=="function"?e=mMe(e):e=Une(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(e.call(l,l.__data__,u,i)),a.push(l));return new Rc(n,a)}function Qne(e){return function(){return this.matches(e)}}function Hne(e){return function(t){return t.matches(e)}}var gMe=Array.prototype.find;function vMe(e){return function(){return gMe.call(this.children,e)}}function xMe(){return this.firstElementChild}function bMe(e){return this.select(e==null?xMe:vMe(typeof e=="function"?e:Hne(e)))}var yMe=Array.prototype.filter;function wMe(){return Array.from(this.children)}function EMe(e){return function(){return yMe.call(this.children,e)}}function CMe(e){return this.selectAll(e==null?wMe:EMe(typeof e=="function"?e:Hne(e)))}function _Me(e){typeof e!="function"&&(e=Qne(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Rc(n,this._parents)}function Vne(e){return new Array(e.length)}function SMe(){return new Rc(this._enter||this._groups.map(Vne),this._parents)}function JS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}JS.prototype={constructor:JS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function NMe(e){return function(){return e}}function kMe(e,t,r,n,a,s){for(var i=0,o,l=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new JS(e,s[i]);for(;i<l;++i)(o=t[i])&&(a[i]=o)}function BMe(e,t,r,n,a,s,i){var o,l,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(l=t[o])&&(h[o]=p=i.call(l,l.__data__,o,t)+"",u.has(p)?a[o]=l:u.set(p,l));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(l=u.get(p))?(n[o]=l,l.__data__=s[o],u.delete(p)):r[o]=new JS(e,s[o]);for(o=0;o<d;++o)(l=t[o])&&u.get(h[o])===l&&(a[o]=l)}function TMe(e){return e.__data__}function jMe(e,t){if(!arguments.length)return Array.from(this,TMe);var r=t?BMe:kMe,n=this._parents,a=this._groups;typeof e!="function"&&(e=NMe(e));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=IMe(e.call(d,d&&d.__data__,u,n)),g=p.length,v=o[u]=new Array(g),b=i[u]=new Array(g),y=l[u]=new Array(h);r(d,f,v,b,y,p,t);for(var C=0,S=0,I,N;C<g;++C)if(I=v[C]){for(C>=S&&(S=C+1);!(N=b[S])&&++S<g;);I._next=N||null}}return i=new Rc(i,n),i._enter=o,i._exit=l,i}function IMe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FMe(){return new Rc(this._exit||this._groups.map(Vne),this._parents)}function OMe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function DMe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],f=u.length,h=o[l]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;l<a;++l)o[l]=r[l];return new Rc(o,this._parents)}function RMe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function PMe(e){e||(e=LMe);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(t)}return new Rc(a,this._parents).order()}function LMe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function MMe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function UMe(){return Array.from(this)}function QMe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function HMe(){let e=0;for(const t of this)++e;return e}function VMe(){return!this.node()}function zMe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function $Me(e){return function(){this.removeAttribute(e)}}function GMe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KMe(e,t){return function(){this.setAttribute(e,t)}}function qMe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function WMe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function XMe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function YMe(e,t){var r=x4(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?GMe:$Me:typeof t=="function"?r.local?XMe:WMe:r.local?qMe:KMe)(r,t))}function zne(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function JMe(e){return function(){this.style.removeProperty(e)}}function ZMe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function eUe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function tUe(e,t,r){return arguments.length>1?this.each((t==null?JMe:typeof t=="function"?eUe:ZMe)(e,t,r??"")):Ox(this.node(),e)}function Ox(e,t){return e.style.getPropertyValue(t)||zne(e).getComputedStyle(e,null).getPropertyValue(t)}function rUe(e){return function(){delete this[e]}}function nUe(e,t){return function(){this[e]=t}}function aUe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function sUe(e,t){return arguments.length>1?this.each((t==null?rUe:typeof t=="function"?aUe:nUe)(e,t)):this.node()[e]}function $ne(e){return e.trim().split(/^|\s+/)}function XR(e){return e.classList||new Gne(e)}function Gne(e){this._node=e,this._names=$ne(e.getAttribute("class")||"")}Gne.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Kne(e,t){for(var r=XR(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function qne(e,t){for(var r=XR(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function iUe(e){return function(){Kne(this,e)}}function oUe(e){return function(){qne(this,e)}}function lUe(e,t){return function(){(t.apply(this,arguments)?Kne:qne)(this,e)}}function cUe(e,t){var r=$ne(e+"");if(arguments.length<2){for(var n=XR(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?lUe:t?iUe:oUe)(r,t))}function uUe(){this.textContent=""}function dUe(e){return function(){this.textContent=e}}function AUe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fUe(e){return arguments.length?this.each(e==null?uUe:(typeof e=="function"?AUe:dUe)(e)):this.node().textContent}function hUe(){this.innerHTML=""}function mUe(e){return function(){this.innerHTML=e}}function pUe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gUe(e){return arguments.length?this.each(e==null?hUe:(typeof e=="function"?pUe:mUe)(e)):this.node().innerHTML}function vUe(){this.nextSibling&&this.parentNode.appendChild(this)}function xUe(){return this.each(vUe)}function bUe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yUe(){return this.each(bUe)}function wUe(e){var t=typeof e=="function"?e:Mne(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function EUe(){return null}function CUe(e,t){var r=typeof e=="function"?e:Mne(e),n=t==null?EUe:typeof t=="function"?t:WR(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _Ue(){var e=this.parentNode;e&&e.removeChild(this)}function SUe(){return this.each(_Ue)}function NUe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kUe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BUe(e){return this.select(e?kUe:NUe)}function TUe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function jUe(e){return function(t){e.call(this,t,this.__data__)}}function IUe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function FUe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function OUe(e,t,r){return function(){var n=this.__on,a,s=jUe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function DUe(e,t,r){var n=IUe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?OUe:FUe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Wne(e,t,r){var n=zne(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function RUe(e,t){return function(){return Wne(this,e,t)}}function PUe(e,t){return function(){return Wne(this,e,t.apply(this,arguments))}}function LUe(e,t){return this.each((typeof t=="function"?PUe:RUe)(e,t))}function*MUe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Xne=[null];function Rc(e,t){this._groups=e,this._parents=t}function h2(){return new Rc([[document.documentElement]],Xne)}function UUe(){return this}Rc.prototype=h2.prototype={constructor:Rc,select:AMe,selectAll:pMe,selectChild:bMe,selectChildren:CMe,filter:_Me,data:jMe,enter:SMe,exit:FMe,join:OMe,merge:DMe,selection:UUe,order:RMe,sort:PMe,call:MMe,nodes:UMe,node:QMe,size:HMe,empty:VMe,each:zMe,attr:YMe,style:tUe,property:sUe,classed:cUe,text:fUe,html:gUe,raise:xUe,lower:yUe,append:wUe,insert:CUe,remove:SUe,clone:BUe,datum:TUe,on:DUe,dispatch:LUe,[Symbol.iterator]:MUe};function Cu(e){return typeof e=="string"?new Rc([[document.querySelector(e)]],[document.documentElement]):new Rc([[e]],Xne)}function QUe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function bA(e,t){if(e=QUe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const HUe={passive:!1},ww={capture:!0,passive:!1};function i3(e){e.stopImmediatePropagation()}function ux(e){e.preventDefault(),e.stopImmediatePropagation()}function Yne(e){var t=e.document.documentElement,r=Cu(e).on("dragstart.drag",ux,ww);"onselectstart"in t?r.on("selectstart.drag",ux,ww):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Jne(e,t){var r=e.document.documentElement,n=Cu(e).on("dragstart.drag",null);t&&(n.on("click.drag",ux,ww),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const TC=e=>()=>e;function t6(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}t6.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function VUe(e){return!e.ctrlKey&&!e.button}function zUe(){return this.parentNode}function $Ue(e,t){return t??{x:e.x,y:e.y}}function GUe(){return navigator.maxTouchPoints||"ontouchstart"in this}function KUe(){var e=VUe,t=zUe,r=$Ue,n=GUe,a={},s=v4("start","drag","end"),i=0,o,l,u,d,f=0;function h(I){I.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,HUe).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(I,N){if(!(d||!e.call(this,I,N))){var B=S(this,t.call(this,I,N),I,N,"mouse");B&&(Cu(I.view).on("mousemove.drag",g,ww).on("mouseup.drag",v,ww),Yne(I.view),i3(I),u=!1,o=I.clientX,l=I.clientY,B("start",I))}}function g(I){if(ux(I),!u){var N=I.clientX-o,B=I.clientY-l;u=N*N+B*B>f}a.mouse("drag",I)}function v(I){Cu(I.view).on("mousemove.drag mouseup.drag",null),Jne(I.view,u),ux(I),a.mouse("end",I)}function b(I,N){if(e.call(this,I,N)){var B=I.changedTouches,w=t.call(this,I,N),_=B.length,F,U;for(F=0;F<_;++F)(U=S(this,w,I,N,B[F].identifier,B[F]))&&(i3(I),U("start",I,B[F]))}}function y(I){var N=I.changedTouches,B=N.length,w,_;for(w=0;w<B;++w)(_=a[N[w].identifier])&&(ux(I),_("drag",I,N[w]))}function C(I){var N=I.changedTouches,B=N.length,w,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),w=0;w<B;++w)(_=a[N[w].identifier])&&(i3(I),_("end",I,N[w]))}function S(I,N,B,w,_,F){var U=s.copy(),D=bA(F||B,N),k,L,R;if((R=r.call(I,new t6("beforestart",{sourceEvent:B,target:h,identifier:_,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:U}),w))!=null)return k=R.x-D[0]||0,L=R.y-D[1]||0,function X(V,Z,H){var z=D,q;switch(V){case"start":a[_]=X,q=i++;break;case"end":delete a[_],--i;case"drag":D=bA(H||Z,N),q=i;break}U.call(V,I,new t6(V,{sourceEvent:Z,subject:R,target:h,identifier:_,active:q,x:D[0]+k,y:D[1]+L,dx:D[0]-z[0],dy:D[1]-z[1],dispatch:U}),w)}}return h.filter=function(I){return arguments.length?(e=typeof I=="function"?I:TC(!!I),h):e},h.container=function(I){return arguments.length?(t=typeof I=="function"?I:TC(I),h):t},h.subject=function(I){return arguments.length?(r=typeof I=="function"?I:TC(I),h):r},h.touchable=function(I){return arguments.length?(n=typeof I=="function"?I:TC(!!I),h):n},h.on=function(){var I=s.on.apply(s,arguments);return I===s?h:I},h.clickDistance=function(I){return arguments.length?(f=(I=+I)*I,h):Math.sqrt(f)},h}function YR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Zne(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function m2(){}var Ew=.7,ZS=1/Ew,dx="\\s*([+-]?\\d+)\\s*",Cw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",UA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qUe=/^#([0-9a-f]{3,8})$/,WUe=new RegExp(`^rgb\\(${dx},${dx},${dx}\\)$`),XUe=new RegExp(`^rgb\\(${UA},${UA},${UA}\\)$`),YUe=new RegExp(`^rgba\\(${dx},${dx},${dx},${Cw}\\)$`),JUe=new RegExp(`^rgba\\(${UA},${UA},${UA},${Cw}\\)$`),ZUe=new RegExp(`^hsl\\(${Cw},${UA},${UA}\\)$`),e7e=new RegExp(`^hsla\\(${Cw},${UA},${UA},${Cw}\\)$`),lz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YR(m2,Jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cz,formatHex:cz,formatHex8:t7e,formatHsl:r7e,formatRgb:uz,toString:uz});function cz(){return this.rgb().formatHex()}function t7e(){return this.rgb().formatHex8()}function r7e(){return eae(this).formatHsl()}function uz(){return this.rgb().formatRgb()}function Jp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qUe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?dz(t):r===3?new ql(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?jC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?jC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=WUe.exec(e))?new ql(t[1],t[2],t[3],1):(t=XUe.exec(e))?new ql(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YUe.exec(e))?jC(t[1],t[2],t[3],t[4]):(t=JUe.exec(e))?jC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZUe.exec(e))?hz(t[1],t[2]/100,t[3]/100,1):(t=e7e.exec(e))?hz(t[1],t[2]/100,t[3]/100,t[4]):lz.hasOwnProperty(e)?dz(lz[e]):e==="transparent"?new ql(NaN,NaN,NaN,0):null}function dz(e){return new ql(e>>16&255,e>>8&255,e&255,1)}function jC(e,t,r,n){return n<=0&&(e=t=r=NaN),new ql(e,t,r,n)}function n7e(e){return e instanceof m2||(e=Jp(e)),e?(e=e.rgb(),new ql(e.r,e.g,e.b,e.opacity)):new ql}function r6(e,t,r,n){return arguments.length===1?n7e(e):new ql(e,t,r,n??1)}function ql(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}YR(ql,r6,Zne(m2,{brighter(e){return e=e==null?ZS:Math.pow(ZS,e),new ql(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ew:Math.pow(Ew,e),new ql(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ql(Ip(this.r),Ip(this.g),Ip(this.b),e5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Az,formatHex:Az,formatHex8:a7e,formatRgb:fz,toString:fz}));function Az(){return`#${hp(this.r)}${hp(this.g)}${hp(this.b)}`}function a7e(){return`#${hp(this.r)}${hp(this.g)}${hp(this.b)}${hp((isNaN(this.opacity)?1:this.opacity)*255)}`}function fz(){const e=e5(this.opacity);return`${e===1?"rgb(":"rgba("}${Ip(this.r)}, ${Ip(this.g)}, ${Ip(this.b)}${e===1?")":`, ${e})`}`}function e5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ip(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hp(e){return e=Ip(e),(e<16?"0":"")+e.toString(16)}function hz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new hd(e,t,r,n)}function eae(e){if(e instanceof hd)return new hd(e.h,e.s,e.l,e.opacity);if(e instanceof m2||(e=Jp(e)),!e)return new hd;if(e instanceof hd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new hd(i,o,l,e.opacity)}function s7e(e,t,r,n){return arguments.length===1?eae(e):new hd(e,t,r,n??1)}function hd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}YR(hd,s7e,Zne(m2,{brighter(e){return e=e==null?ZS:Math.pow(ZS,e),new hd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ew:Math.pow(Ew,e),new hd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ql(o3(e>=240?e-240:e+120,a,n),o3(e,a,n),o3(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new hd(mz(this.h),IC(this.s),IC(this.l),e5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=e5(this.opacity);return`${e===1?"hsl(":"hsla("}${mz(this.h)}, ${IC(this.s)*100}%, ${IC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mz(e){return e=(e||0)%360,e<0?e+360:e}function IC(e){return Math.max(0,Math.min(1,e||0))}function o3(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const JR=e=>()=>e;function i7e(e,t){return function(r){return e+r*t}}function o7e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function l7e(e){return(e=+e)==1?tae:function(t,r){return r-t?o7e(t,r,e):JR(isNaN(t)?r:t)}}function tae(e,t){var r=t-e;return r?i7e(e,r):JR(isNaN(e)?t:e)}const t5=function e(t){var r=l7e(t);function n(a,s){var i=r((a=r6(a)).r,(s=r6(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=tae(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function c7e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function u7e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function d7e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=m1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function A7e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function fd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function f7e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=m1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var n6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l3=new RegExp(n6.source,"g");function h7e(e){return function(){return e}}function m7e(e){return function(t){return e(t)+""}}function rae(e,t){var r=n6.lastIndex=l3.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=n6.exec(e))&&(a=l3.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:fd(n,a)})),r=l3.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?m7e(l[0].x):h7e(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function m1(e,t){var r=typeof t,n;return t==null||r==="boolean"?JR(t):(r==="number"?fd:r==="string"?(n=Jp(t))?(t=n,t5):rae:t instanceof Jp?t5:t instanceof Date?A7e:u7e(t)?c7e:Array.isArray(t)?d7e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?f7e:fd)(e,t)}function ZR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var pz=180/Math.PI,a6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nae(e,t,r,n,a,s){var i,o,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*pz,skewX:Math.atan(l)*pz,scaleX:i,scaleY:o}}var FC;function p7e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?a6:nae(t.a,t.b,t.c,t.d,t.e,t.f)}function g7e(e){return e==null||(FC||(FC=document.createElementNS("http://www.w3.org/2000/svg","g")),FC.setAttribute("transform",e),!(e=FC.transform.baseVal.consolidate()))?a6:(e=e.matrix,nae(e.a,e.b,e.c,e.d,e.e,e.f))}function aae(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push("translate(",null,t,null,r);g.push({i:v-4,x:fd(u,f)},{i:v-2,x:fd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:fd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:fd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function l(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push(a(p)+"scale(",null,",",null,")");g.push({i:v-4,x:fd(u,f)},{i:v-2,x:fd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,v=h.length,b;++g<v;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var v7e=aae(p7e,"px, ","px)","deg)"),x7e=aae(g7e,", ",")",")"),b7e=1e-12;function gz(e){return((e=Math.exp(e))+1/e)/2}function y7e(e){return((e=Math.exp(e))-1/e)/2}function w7e(e){return((e=Math.exp(2*e))-1)/(e+1)}const E7e=function e(t,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-l,v=p*p+g*g,b,y;if(v<b7e)y=Math.log(h/u)/t,b=function(w){return[o+w*p,l+w*g,u*Math.exp(t*w*y)]};else{var C=Math.sqrt(v),S=(h*h-u*u+n*v)/(2*u*r*C),I=(h*h-u*u-n*v)/(2*h*r*C),N=Math.log(Math.sqrt(S*S+1)-S),B=Math.log(Math.sqrt(I*I+1)-I);y=(B-N)/t,b=function(w){var _=w*y,F=gz(N),U=u/(r*C)*(F*w7e(t*_+N)-y7e(N));return[o+U*p,l+U*g,u*F/gz(t*_+N)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return e(i,o,l)},a}(Math.SQRT2,2,4);function C7e(e,t){t===void 0&&(t=e,e=m1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}var Dx=0,ly=0,Nb=0,sae=1e3,r5,cy,n5=0,Zp=0,b4=0,_w=typeof performance=="object"&&performance.now?performance:Date,iae=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eP(){return Zp||(iae(_7e),Zp=_w.now()+b4)}function _7e(){Zp=0}function a5(){this._call=this._time=this._next=null}a5.prototype=oae.prototype={constructor:a5,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?eP():+r)+(t==null?0:+t),!this._next&&cy!==this&&(cy?cy._next=this:r5=this,cy=this),this._call=e,this._time=r,s6()},stop:function(){this._call&&(this._call=null,this._time=1/0,s6())}};function oae(e,t,r){var n=new a5;return n.restart(e,t,r),n}function S7e(){eP(),++Dx;for(var e=r5,t;e;)(t=Zp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Dx}function vz(){Zp=(n5=_w.now())+b4,Dx=ly=0;try{S7e()}finally{Dx=0,k7e(),Zp=0}}function N7e(){var e=_w.now(),t=e-n5;t>sae&&(b4-=t,n5=e)}function k7e(){for(var e,t=r5,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:r5=r);cy=e,s6(n)}function s6(e){if(!Dx){ly&&(ly=clearTimeout(ly));var t=e-Zp;t>24?(e<1/0&&(ly=setTimeout(vz,e-_w.now()-b4)),Nb&&(Nb=clearInterval(Nb))):(Nb||(n5=_w.now(),Nb=setInterval(N7e,sae)),Dx=1,iae(vz))}}function xz(e,t,r){var n=new a5;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var B7e=v4("start","end","cancel","interrupt"),T7e=[],lae=0,bz=1,i6=2,j_=3,yz=4,o6=5,I_=6;function y4(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;j7e(e,r,{name:t,index:n,group:a,on:B7e,tween:T7e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:lae})}function tP(e,t){var r=Dd(e,t);if(r.state>lae)throw new Error("too late; already scheduled");return r}function XA(e,t){var r=Dd(e,t);if(r.state>j_)throw new Error("too late; already running");return r}function Dd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function j7e(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=oae(s,0,r.time);function s(u){r.state=bz,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==bz)return l();for(d in n)if(p=n[d],p.name===r.name){if(p.state===j_)return xz(i);p.state===yz?(p.state=I_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=I_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(xz(function(){r.state===j_&&(r.state=yz,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=i6,r.on.call("start",e,e.__data__,r.index,r.group),r.state===i6){for(r.state=j_,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=o6,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===o6&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=I_,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function F_(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>i6&&n.state<o6,n.state=I_,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function I7e(e){return this.each(function(){F_(this,e)})}function F7e(e,t){var r,n;return function(){var a=XA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function O7e(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=XA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function D7e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Dd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?F7e:O7e)(r,e,t))}function rP(e,t,r){var n=e._id;return e.each(function(){var a=XA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Dd(a,n).value[t]}}function cae(e,t){var r;return(typeof t=="number"?fd:t instanceof Jp?t5:(r=Jp(t))?(t=r,t5):rae)(e,t)}function R7e(e){return function(){this.removeAttribute(e)}}function P7e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L7e(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function M7e(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function U7e(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function Q7e(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function H7e(e,t){var r=x4(e),n=r==="transform"?x7e:cae;return this.attrTween(e,typeof t=="function"?(r.local?Q7e:U7e)(r,n,rP(this,"attr."+e,t)):t==null?(r.local?P7e:R7e)(r):(r.local?M7e:L7e)(r,n,t))}function V7e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function z7e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function $7e(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&z7e(e,s)),r}return a._value=t,a}function G7e(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&V7e(e,s)),r}return a._value=t,a}function K7e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=x4(e);return this.tween(r,(n.local?$7e:G7e)(n,t))}function q7e(e,t){return function(){tP(this,e).delay=+t.apply(this,arguments)}}function W7e(e,t){return t=+t,function(){tP(this,e).delay=t}}function X7e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?q7e:W7e)(t,e)):Dd(this.node(),t).delay}function Y7e(e,t){return function(){XA(this,e).duration=+t.apply(this,arguments)}}function J7e(e,t){return t=+t,function(){XA(this,e).duration=t}}function Z7e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Y7e:J7e)(t,e)):Dd(this.node(),t).duration}function e9e(e,t){if(typeof t!="function")throw new Error;return function(){XA(this,e).ease=t}}function t9e(e){var t=this._id;return arguments.length?this.each(e9e(t,e)):Dd(this.node(),t).ease}function r9e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;XA(this,e).ease=r}}function n9e(e){if(typeof e!="function")throw new Error;return this.each(r9e(this._id,e))}function a9e(e){typeof e!="function"&&(e=Qne(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new oh(n,this._parents,this._name,this._id)}function s9e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=t[o],u=r[o],d=l.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new oh(i,this._parents,this._name,this._id)}function i9e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function o9e(e,t,r){var n,a,s=i9e(t)?tP:XA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function l9e(e,t){var r=this._id;return arguments.length<2?Dd(this.node(),r).on.on(e):this.each(o9e(r,e,t))}function c9e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function u9e(){return this.on("end.remove",c9e(this._id))}function d9e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=WR(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,f,h=0;h<l;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,y4(u[h],t,r,h,u,Dd(d,r)));return new oh(s,this._parents,t,r)}function A9e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Une(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=e.call(d,d.__data__,f,l),p,g=Dd(d,r),v=0,b=h.length;v<b;++v)(p=h[v])&&y4(p,t,r,v,h,g);s.push(h),i.push(d)}return new oh(s,i,t,r)}var f9e=h2.prototype.constructor;function h9e(){return new f9e(this._groups,this._parents)}function m9e(e,t){var r,n,a;return function(){var s=Ox(this,e),i=(this.style.removeProperty(e),Ox(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function uae(e){return function(){this.style.removeProperty(e)}}function p9e(e,t,r){var n,a=r+"",s;return function(){var i=Ox(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function g9e(e,t,r){var n,a,s;return function(){var i=Ox(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Ox(this,e))),i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o))}}function v9e(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var l=XA(this,e),u=l.on,d=l.value[s]==null?o||(o=uae(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function x9e(e,t,r){var n=(e+="")=="transform"?v7e:cae;return t==null?this.styleTween(e,m9e(e,n)).on("end.style."+e,uae(e)):typeof t=="function"?this.styleTween(e,g9e(e,n,rP(this,"style."+e,t))).each(v9e(this._id,e)):this.styleTween(e,p9e(e,n,t),r).on("end.style."+e,null)}function b9e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function y9e(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&b9e(e,i,r)),n}return s._value=t,s}function w9e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,y9e(e,t,r??""))}function E9e(e){return function(){this.textContent=e}}function C9e(e){return function(){var t=e(this);this.textContent=t??""}}function _9e(e){return this.tween("text",typeof e=="function"?C9e(rP(this,"text",e)):E9e(e==null?"":e+""))}function S9e(e){return function(t){this.textContent=e.call(this,t)}}function N9e(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&S9e(a)),t}return n._value=e,n}function k9e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,N9e(e))}function B9e(){for(var e=this._name,t=this._id,r=dae(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Dd(l,t);y4(l,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new oh(n,this._parents,e,r)}function T9e(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=XA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),a===0&&s()})}var j9e=0;function oh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function dae(){return++j9e}var Tf=h2.prototype;oh.prototype={constructor:oh,select:d9e,selectAll:A9e,selectChild:Tf.selectChild,selectChildren:Tf.selectChildren,filter:a9e,merge:s9e,selection:h9e,transition:B9e,call:Tf.call,nodes:Tf.nodes,node:Tf.node,size:Tf.size,empty:Tf.empty,each:Tf.each,on:l9e,attr:H7e,attrTween:K7e,style:x9e,styleTween:w9e,text:_9e,textTween:k9e,remove:u9e,tween:D7e,delay:X7e,duration:Z7e,ease:t9e,easeVarying:n9e,end:T9e,[Symbol.iterator]:Tf[Symbol.iterator]};function I9e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var F9e={time:null,delay:0,duration:250,ease:I9e};function O9e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function D9e(e){var t,r;e instanceof oh?(t=e._id,e=e._name):(t=dae(),(r=F9e).time=eP(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&y4(l,e,t,u,i,r||O9e(l,t));return new oh(n,this._parents,e,t)}h2.prototype.interrupt=I7e;h2.prototype.transition=D9e;const OC=e=>()=>e;function R9e(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Uf(e,t,r){this.k=e,this.x=t,this.y=r}Uf.prototype={constructor:Uf,scale:function(e){return e===1?this:new Uf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Uf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $0=new Uf(1,0,0);Uf.prototype;function c3(e){e.stopImmediatePropagation()}function kb(e){e.preventDefault(),e.stopImmediatePropagation()}function P9e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function L9e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wz(){return this.__zoom||$0}function M9e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function U9e(){return navigator.maxTouchPoints||"ontouchstart"in this}function Q9e(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function H9e(){var e=P9e,t=L9e,r=Q9e,n=M9e,a=U9e,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=E7e,u=v4("start","zoom","end"),d,f,h,p=500,g=150,v=0,b=10;function y(R){R.property("__zoom",wz).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",U).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(R,X,V,Z){var H=R.selection?R.selection():R;H.property("__zoom",wz),R!==H?N(R,X,V,Z):H.interrupt().each(function(){B(this,arguments).event(Z).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},y.scaleBy=function(R,X,V,Z){y.scaleTo(R,function(){var H=this.__zoom.k,z=typeof X=="function"?X.apply(this,arguments):X;return H*z},V,Z)},y.scaleTo=function(R,X,V,Z){y.transform(R,function(){var H=t.apply(this,arguments),z=this.__zoom,q=V==null?I(H):typeof V=="function"?V.apply(this,arguments):V,re=z.invert(q),P=typeof X=="function"?X.apply(this,arguments):X;return r(S(C(z,P),q,re),H,i)},V,Z)},y.translateBy=function(R,X,V,Z){y.transform(R,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,Z)},y.translateTo=function(R,X,V,Z,H){y.transform(R,function(){var z=t.apply(this,arguments),q=this.__zoom,re=Z==null?I(z):typeof Z=="function"?Z.apply(this,arguments):Z;return r($0.translate(re[0],re[1]).scale(q.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof V=="function"?-V.apply(this,arguments):-V),z,i)},Z,H)};function C(R,X){return X=Math.max(s[0],Math.min(s[1],X)),X===R.k?R:new Uf(X,R.x,R.y)}function S(R,X,V){var Z=X[0]-V[0]*R.k,H=X[1]-V[1]*R.k;return Z===R.x&&H===R.y?R:new Uf(R.k,Z,H)}function I(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function N(R,X,V,Z){R.on("start.zoom",function(){B(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(Z).end()}).tween("zoom",function(){var H=this,z=arguments,q=B(H,z).event(Z),re=t.apply(H,z),P=V==null?I(re):typeof V=="function"?V.apply(H,z):V,K=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),Y=H.__zoom,te=typeof X=="function"?X.apply(H,z):X,ie=l(Y.invert(P).concat(K/Y.k),te.invert(P).concat(K/te.k));return function(Ae){if(Ae===1)Ae=te;else{var oe=ie(Ae),ce=K/oe[2];Ae=new Uf(ce,P[0]-oe[0]*ce,P[1]-oe[1]*ce)}q.zoom(null,Ae)}})}function B(R,X,V){return!V&&R.__zooming||new w(R,X)}function w(R,X){this.that=R,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,X),this.taps=0}w.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,X){return this.mouse&&R!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var X=Cu(this.that).datum();u.call(R,this.that,new R9e(R,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),X)}};function _(R,...X){if(!e.apply(this,arguments))return;var V=B(this,X).event(R),Z=this.__zoom,H=Math.max(s[0],Math.min(s[1],Z.k*Math.pow(2,n.apply(this,arguments)))),z=bA(R);if(V.wheel)(V.mouse[0][0]!==z[0]||V.mouse[0][1]!==z[1])&&(V.mouse[1]=Z.invert(V.mouse[0]=z)),clearTimeout(V.wheel);else{if(Z.k===H)return;V.mouse=[z,Z.invert(z)],F_(this),V.start()}kb(R),V.wheel=setTimeout(q,g),V.zoom("mouse",r(S(C(Z,H),V.mouse[0],V.mouse[1]),V.extent,i));function q(){V.wheel=null,V.end()}}function F(R,...X){if(h||!e.apply(this,arguments))return;var V=R.currentTarget,Z=B(this,X,!0).event(R),H=Cu(R.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",K,!0),z=bA(R,V),q=R.clientX,re=R.clientY;Yne(R.view),c3(R),Z.mouse=[z,this.__zoom.invert(z)],F_(this),Z.start();function P(Y){if(kb(Y),!Z.moved){var te=Y.clientX-q,ie=Y.clientY-re;Z.moved=te*te+ie*ie>v}Z.event(Y).zoom("mouse",r(S(Z.that.__zoom,Z.mouse[0]=bA(Y,V),Z.mouse[1]),Z.extent,i))}function K(Y){H.on("mousemove.zoom mouseup.zoom",null),Jne(Y.view,Z.moved),kb(Y),Z.event(Y).end()}}function U(R,...X){if(e.apply(this,arguments)){var V=this.__zoom,Z=bA(R.changedTouches?R.changedTouches[0]:R,this),H=V.invert(Z),z=V.k*(R.shiftKey?.5:2),q=r(S(C(V,z),Z,H),t.apply(this,X),i);kb(R),o>0?Cu(this).transition().duration(o).call(N,q,Z,R):Cu(this).call(y.transform,q,Z,R)}}function D(R,...X){if(e.apply(this,arguments)){var V=R.touches,Z=V.length,H=B(this,X,R.changedTouches.length===Z).event(R),z,q,re,P;for(c3(R),q=0;q<Z;++q)re=V[q],P=bA(re,this),P=[P,this.__zoom.invert(P),re.identifier],H.touch0?!H.touch1&&H.touch0[2]!==P[2]&&(H.touch1=P,H.taps=0):(H.touch0=P,z=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(H.taps<2&&(f=P[0],d=setTimeout(function(){d=null},p)),F_(this),H.start())}}function k(R,...X){if(this.__zooming){var V=B(this,X).event(R),Z=R.changedTouches,H=Z.length,z,q,re,P;for(kb(R),z=0;z<H;++z)q=Z[z],re=bA(q,this),V.touch0&&V.touch0[2]===q.identifier?V.touch0[0]=re:V.touch1&&V.touch1[2]===q.identifier&&(V.touch1[0]=re);if(q=V.that.__zoom,V.touch1){var K=V.touch0[0],Y=V.touch0[1],te=V.touch1[0],ie=V.touch1[1],Ae=(Ae=te[0]-K[0])*Ae+(Ae=te[1]-K[1])*Ae,oe=(oe=ie[0]-Y[0])*oe+(oe=ie[1]-Y[1])*oe;q=C(q,Math.sqrt(Ae/oe)),re=[(K[0]+te[0])/2,(K[1]+te[1])/2],P=[(Y[0]+ie[0])/2,(Y[1]+ie[1])/2]}else if(V.touch0)re=V.touch0[0],P=V.touch0[1];else return;V.zoom("touch",r(S(q,re,P),V.extent,i))}}function L(R,...X){if(this.__zooming){var V=B(this,X).event(R),Z=R.changedTouches,H=Z.length,z,q;for(c3(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),z=0;z<H;++z)q=Z[z],V.touch0&&V.touch0[2]===q.identifier?delete V.touch0:V.touch1&&V.touch1[2]===q.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(q=bA(q,this),Math.hypot(f[0]-q[0],f[1]-q[1])<b)){var re=Cu(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return y.wheelDelta=function(R){return arguments.length?(n=typeof R=="function"?R:OC(+R),y):n},y.filter=function(R){return arguments.length?(e=typeof R=="function"?R:OC(!!R),y):e},y.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:OC(!!R),y):a},y.extent=function(R){return arguments.length?(t=typeof R=="function"?R:OC([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),y):t},y.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],y):[s[0],s[1]]},y.translateExtent=function(R){return arguments.length?(i[0][0]=+R[0][0],i[1][0]=+R[1][0],i[0][1]=+R[0][1],i[1][1]=+R[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(R){return arguments.length?(r=R,y):r},y.duration=function(R){return arguments.length?(o=+R,y):o},y.interpolate=function(R){return arguments.length?(l=R,y):l},y.on=function(){var R=u.on.apply(u,arguments);return R===u?y:R},y.clickDistance=function(R){return arguments.length?(v=(R=+R)*R,y):Math.sqrt(v)},y.tapDistance=function(R){return arguments.length?(b=+R,y):b},y}var Aae=sX();const w4=T.createContext(null),V9e=w4.Provider,lh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},fae=lh.error001();function us(e,t){const r=T.useContext(w4);if(r===null)throw new Error(fae);return Lne(r,e,t)}const Zi=()=>{const e=T.useContext(w4);if(e===null)throw new Error(fae);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},z9e=e=>e.userSelectionActive?"none":"all";function hae({position:e,children:t,className:r,style:n,...a}){const s=us(z9e),i=`${e}`.split("-");return lt.createElement("div",{className:wl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function $9e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:lt.createElement(hae,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const G9e=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const f=T.useRef(null),[h,p]=T.useState({x:0,y:0,width:0,height:0}),g=wl(["react-flow__edge-textwrapper",u]);return T.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[r]),typeof r>"u"||!r?null:lt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&lt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),lt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),l)};var K9e=T.memo(G9e);const nP=e=>({width:e.offsetWidth,height:e.offsetHeight}),Rx=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),aP=(e={x:0,y:0},t)=>({x:Rx(e.x,t[0][0],t[1][0]),y:Rx(e.y,t[0][1],t[1][1])}),Ez=(e,t,r)=>e<t?Rx(Math.abs(e-t),1,50)/50:e>r?-Rx(Math.abs(e-r),1,50)/50:0,mae=(e,t)=>{const r=Ez(e.x,35,t.width-35)*20,n=Ez(e.y,35,t.height-35)*20;return[r,n]},pae=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},q9e=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),sP=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),W9e=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),Cz=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),l6=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},X9e=e=>Bu(e.width)&&Bu(e.height)&&Bu(e.x)&&Bu(e.y),Bu=e=>!isNaN(e)&&isFinite(e),ks=Symbol.for("internals"),gae=["Enter"," ","Escape"],Y9e=(e,t)=>{},J9e=e=>"nativeEvent"in e;function c6(e){var a,s;const t=J9e(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const vae=e=>"clientX"in e,G0=(e,t)=>{var s,i;const r=vae(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},s5=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},p2=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Bu(r)&&Bu(n)?lt.createElement(K9e,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);p2.displayName="BaseEdge";function Bb(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function xae({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function bae({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(l-e),f=Math.abs(u-t);return[l,u,d,f]}var eg;(function(e){e.Strict="strict",e.Loose="loose"})(eg||(eg={}));var mp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mp||(mp={}));var Sw;(function(e){e.Partial="partial",e.Full="full"})(Sw||(Sw={}));var S0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(S0||(S0={}));var i5;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(i5||(i5={}));var wr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(wr||(wr={}));function _z({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===wr.Left||e===wr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function yae({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top}){const[i,o]=_z({pos:r,x1:e,y1:t,x2:n,y2:a}),[l,u]=_z({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=bae({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${o} ${l},${u} ${n},${a}`,d,f,h,p]}const iP=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=wr.Bottom,targetPosition:s=wr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})=>{const[b,y,C]=yae({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return lt.createElement(p2,{path:b,labelX:y,labelY:C,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})});iP.displayName="SimpleBezierEdge";const Sz={[wr.Left]:{x:-1,y:0},[wr.Right]:{x:1,y:0},[wr.Top]:{x:0,y:-1},[wr.Bottom]:{x:0,y:1}},Z9e=({source:e,sourcePosition:t=wr.Bottom,target:r})=>t===wr.Left||t===wr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Nz=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eQe({source:e,sourcePosition:t=wr.Bottom,target:r,targetPosition:n=wr.Top,center:a,offset:s}){const i=Sz[t],o=Sz[n],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=Z9e({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,v;const b={x:0,y:0},y={x:0,y:0},[C,S,I,N]=xae({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??C,v=a.y??S;const w=[{x:g,y:l.y},{x:g,y:u.y}],_=[{x:l.x,y:v},{x:u.x,y:v}];i[f]===h?p=f==="x"?w:_:p=f==="x"?_:w}else{const w=[{x:l.x,y:u.y}],_=[{x:u.x,y:l.y}];if(f==="x"?p=i.x===h?_:w:p=i.y===h?w:_,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const R=Math.min(s-1,s-L);i[f]===h?b[f]=(l[f]>e[f]?-1:1)*R:y[f]=(u[f]>r[f]?-1:1)*R}}if(t!==n){const L=f==="x"?"y":"x",R=i[f]===o[L],X=l[L]>u[L],V=l[L]<u[L];(i[f]===1&&(!R&&X||R&&V)||i[f]!==1&&(!R&&V||R&&X))&&(p=f==="x"?w:_)}const F={x:l.x+b.x,y:l.y+b.y},U={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(F.x-p[0].x),Math.abs(U.x-p[0].x)),k=Math.max(Math.abs(F.y-p[0].y),Math.abs(U.y-p[0].y));D>=k?(g=(F.x+U.x)/2,v=p[0].y):(g=p[0].x,v=(F.y+U.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,v,I,N]}function tQe(e,t,r,n){const a=Math.min(Nz(e,t)/2,Nz(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function u6({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,f,h,p,g]=eQe({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((b,y,C)=>{let S="";return C>0&&C<d.length-1?S=tQe(d[C-1],y,d[C+1],i):S=`${C===0?"M":"L"}${y.x} ${y.y}`,b+=S,b},""),f,h,p,g]}const E4=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:f=wr.Bottom,targetPosition:h=wr.Top,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,C,S]=u6({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return lt.createElement(p2,{path:y,labelX:C,labelY:S,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});E4.displayName="SmoothStepEdge";const oP=T.memo(e=>{var t;return lt.createElement(E4,{...e,pathOptions:T.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});oP.displayName="StepEdge";function rQe({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=xae({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const lP=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,v,b]=rQe({sourceX:e,sourceY:t,targetX:r,targetY:n});return lt.createElement(p2,{path:g,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});lP.displayName="StraightEdge";function DC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function kz({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case wr.Left:return[t-DC(t-n,s),r];case wr.Right:return[t+DC(n-t,s),r];case wr.Top:return[t,r-DC(r-a,s)];case wr.Bottom:return[t,r+DC(a-r,s)]}}function wae({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top,curvature:i=.25}){const[o,l]=kz({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=kz({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=bae({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${n},${a}`,f,h,p,g]}const o5=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=wr.Bottom,targetPosition:s=wr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,C,S]=wae({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:v==null?void 0:v.curvature});return lt.createElement(p2,{path:y,labelX:C,labelY:S,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});o5.displayName="BezierEdge";const cP=T.createContext(null),nQe=cP.Provider;cP.Consumer;const aQe=()=>T.useContext(cP),sQe=e=>"id"in e&&"source"in e&&"target"in e,iQe=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,d6=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,oQe=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),lQe=(e,t)=>{if(!e.source||!e.target)return t;let r;return sQe(e)?r={...e}:r={...e,id:iQe(e)},oQe(r,t)?t:t.concat(r)},A6=({x:e,y:t},[r,n,a],s,[i,o])=>{const l={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},Eae=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Ax=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},uP=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Ax(a,t).positionAbsolute;return q9e(n,sP({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return W9e(r)},Cae=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:v}=Ax(d,o),b={x:v.x,y:v.y,width:f||0,height:h||0},y=l6(l,b),C=typeof f>"u"||typeof h>"u"||f===null||h===null,S=s&&y>0,I=(f||0)*(h||0);(C||S||y>=I||d.dragging)&&u.push(d)}),u},_ae=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Sae=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),l=Math.min(i,o),u=Rx(l,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},rp=(e,t=0)=>e.transition().duration(t);function Bz(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function cQe(e,t,r,n,a,s){const{x:i,y:o}=G0(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=dP(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:v});if(y){const C=a.find(S=>S.nodeId===g&&S.type===v&&S.id===b);return{handle:{id:b,type:v,nodeId:g,x:(C==null?void 0:C.x)||r.x,y:(C==null?void 0:C.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const v=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(v<=n){const b=s(g);v<=f&&(v<f?d=[{handle:g,validHandleResult:b}]:v===f&&d.push({handle:g,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:Nae()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:v})=>p?g.type==="target":h?v.isValid:!0)||d[0]}const uQe={source:null,target:null,sourceHandle:null,targetHandle:null},Nae=()=>({handleDomNode:null,isValid:!1,connection:uQe,endHandle:null});function kae(e,t,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Nae(),handleDomNode:l};if(l){const d=dP(void 0,l),f=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),v={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=v,p&&g&&(t===eg.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(v))}return u}function dQe({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[ks]){const{handleBounds:i}=s[ks];let o=[],l=[];i&&(o=Bz(s,i,"source",`${t}-${r}-${n}`),l=Bz(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function dP(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function u3(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function AQe(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Bae({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=pae(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:v,panBy:b,getNodes:y,cancelConnection:C}=s();let S=0,I;const{x:N,y:B}=G0(e),w=d==null?void 0:d.elementFromPoint(N,B),_=dP(l,w),F=h==null?void 0:h.getBoundingClientRect();if(!F||!_)return;let U,D=G0(e,F),k=!1,L=null,R=!1,X=null;const V=dQe({nodes:y(),nodeId:r,handleId:t,handleType:_}),Z=()=>{if(!p)return;const[q,re]=mae(D,F);b({x:q,y:re}),S=requestAnimationFrame(Z)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:r,handleId:t,type:_},connectionEndHandle:null}),v==null||v(e,{nodeId:r,handleId:t,handleType:_});function H(q){const{transform:re}=s();D=G0(q,F);const{handle:P,validHandleResult:K}=cQe(q,d,A6(D,re,!1,[1,1]),g,V,Y=>kae(Y,f,r,t,a?"target":"source",o,d));if(I=P,k||(Z(),k=!0),X=K.handleDomNode,L=K.connection,R=K.isValid,i({connectionPosition:I&&R?Eae({x:I.x,y:I.y},re):D,connectionStatus:AQe(!!I,R),connectionEndHandle:K.endHandle}),!I&&!R&&!X)return u3(U);L.source!==L.target&&X&&(u3(U),U=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",R),X.classList.toggle("react-flow__handle-valid",R))}function z(q){var re,P;(I||X)&&L&&R&&(n==null||n(L)),(P=(re=s()).onConnectEnd)==null||P.call(re,q),l&&(u==null||u(q)),u3(U),C(),cancelAnimationFrame(S),k=!1,R=!1,L=null,X=null,d.removeEventListener("mousemove",H),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",H),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",H),d.addEventListener("mouseup",z),d.addEventListener("touchmove",H),d.addEventListener("touchend",z)}const Tz=()=>!0,fQe=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),hQe=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Tae=T.forwardRef(({type:e="source",position:t=wr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var F,U;const g=i||null,v=e==="target",b=Zi(),y=aQe(),{connectOnClick:C,noPanClassName:S}=us(fQe,tl),{connecting:I,clickConnecting:N}=us(hQe(y,g,e),tl);y||(U=(F=b.getState()).onError)==null||U.call(F,"010",lh.error010());const B=D=>{const{defaultEdgeOptions:k,onConnect:L,hasDefaultEdges:R}=b.getState(),X={...k,...D};if(R){const{edges:V,setEdges:Z}=b.getState();Z(lQe(X,V))}L==null||L(X),o==null||o(X)},w=D=>{if(!y)return;const k=vae(D);a&&(k&&D.button===0||!k)&&Bae({event:D,handleId:g,nodeId:y,onConnect:B,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||Tz}),k?d==null||d(D):f==null||f(D)},_=D=>{const{onClickConnectStart:k,onClickConnectEnd:L,connectionClickStartHandle:R,connectionMode:X,isValidConnection:V}=b.getState();if(!y||!R&&!a)return;if(!R){k==null||k(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const Z=pae(D.target),H=r||V||Tz,{connection:z,isValid:q}=kae({nodeId:y,id:g,type:e},X,R.nodeId,R.handleId||null,R.type,H,Z);q&&B(z),L==null||L(D),b.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:wl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,u,{source:!v,target:v,connectable:n,connectablestart:a,connectableend:s,connecting:N,connectionindicator:n&&(a&&!I||s&&I)}]),onMouseDown:w,onTouchStart:w,onClick:C?_:void 0,ref:p,...h},l)});Tae.displayName="Handle";var Px=T.memo(Tae);const jae=({data:e,isConnectable:t,targetPosition:r=wr.Top,sourcePosition:n=wr.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Px,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,lt.createElement(Px,{type:"source",position:n,isConnectable:t}));jae.displayName="DefaultNode";var f6=T.memo(jae);const Iae=({data:e,isConnectable:t,sourcePosition:r=wr.Bottom})=>lt.createElement(lt.Fragment,null,e==null?void 0:e.label,lt.createElement(Px,{type:"source",position:r,isConnectable:t}));Iae.displayName="InputNode";var Fae=T.memo(Iae);const Oae=({data:e,isConnectable:t,targetPosition:r=wr.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Px,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Oae.displayName="OutputNode";var Dae=T.memo(Oae);const AP=()=>null;AP.displayName="GroupNode";const mQe=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),RC=e=>e.id;function pQe(e,t){return tl(e.selectedNodes.map(RC),t.selectedNodes.map(RC))&&tl(e.selectedEdges.map(RC),t.selectedEdges.map(RC))}const Rae=T.memo(({onSelectionChange:e})=>{const t=Zi(),{selectedNodes:r,selectedEdges:n}=us(mQe,pQe);return T.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Rae.displayName="SelectionListener";const gQe=e=>!!e.onSelectionChange;function vQe({onSelectionChange:e}){const t=us(gQe);return e||t?lt.createElement(Rae,{onSelectionChange:e}):null}const xQe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function fv(e,t){T.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function wn(e,t,r){T.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const bQe=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:v,maxZoom:b,nodeExtent:y,onNodesChange:C,onEdgesChange:S,elementsSelectable:I,connectionMode:N,snapGrid:B,snapToGrid:w,translateExtent:_,connectOnClick:F,defaultEdgeOptions:U,fitView:D,fitViewOptions:k,onNodesDelete:L,onEdgesDelete:R,onNodeDrag:X,onNodeDragStart:V,onNodeDragStop:Z,onSelectionDrag:H,onSelectionDragStart:z,onSelectionDragStop:q,noPanClassName:re,nodeOrigin:P,rfId:K,autoPanOnConnect:Y,autoPanOnNodeDrag:te,onError:ie,connectionRadius:Ae,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:pe,setEdges:Ie,setDefaultNodesAndEdges:ne,setMinZoom:Se,setMaxZoom:De,setTranslateExtent:_e,setNodeExtent:he,reset:je}=us(xQe,tl),He=Zi();return T.useEffect(()=>{const Xe=n==null?void 0:n.map(ye=>({...ye,...U}));return ne(r,Xe),()=>{je()}},[]),wn("defaultEdgeOptions",U,He.setState),wn("connectionMode",N,He.setState),wn("onConnect",a,He.setState),wn("onConnectStart",s,He.setState),wn("onConnectEnd",i,He.setState),wn("onClickConnectStart",o,He.setState),wn("onClickConnectEnd",l,He.setState),wn("nodesDraggable",u,He.setState),wn("nodesConnectable",d,He.setState),wn("nodesFocusable",f,He.setState),wn("edgesFocusable",h,He.setState),wn("edgesUpdatable",p,He.setState),wn("elementsSelectable",I,He.setState),wn("elevateNodesOnSelect",g,He.setState),wn("snapToGrid",w,He.setState),wn("snapGrid",B,He.setState),wn("onNodesChange",C,He.setState),wn("onEdgesChange",S,He.setState),wn("connectOnClick",F,He.setState),wn("fitViewOnInit",D,He.setState),wn("fitViewOnInitOptions",k,He.setState),wn("onNodesDelete",L,He.setState),wn("onEdgesDelete",R,He.setState),wn("onNodeDrag",X,He.setState),wn("onNodeDragStart",V,He.setState),wn("onNodeDragStop",Z,He.setState),wn("onSelectionDrag",H,He.setState),wn("onSelectionDragStart",z,He.setState),wn("onSelectionDragStop",q,He.setState),wn("noPanClassName",re,He.setState),wn("nodeOrigin",P,He.setState),wn("rfId",K,He.setState),wn("autoPanOnConnect",Y,He.setState),wn("autoPanOnNodeDrag",te,He.setState),wn("onError",ie,He.setState),wn("connectionRadius",Ae,He.setState),wn("isValidConnection",oe,He.setState),wn("nodeDragThreshold",ce,He.setState),fv(e,pe),fv(t,Ie),fv(v,Se),fv(b,De),fv(_,_e),fv(y,he),null},jz={display:"none"},yQe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Pae="react-flow__node-desc",Lae="react-flow__edge-desc",wQe="react-flow__aria-live",EQe=e=>e.ariaLiveMessage;function CQe({rfId:e}){const t=us(EQe);return lt.createElement("div",{id:`${wQe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:yQe},t)}function _Qe({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${Pae}-${e}`,style:jz},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${Lae}-${e}`,style:jz},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(CQe,{rfId:e}))}var Nw=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=T.useState(!1),a=T.useRef(!1),s=T.useRef(new Set([])),[i,o]=T.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return T.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&c6(p))return!1;const v=Fz(p.code,o);s.current.add(p[v]),Iz(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&c6(p))return!1;const v=Fz(p.code,o);Iz(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[v]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function Iz(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Fz(e,t){return t.includes(e)?"code":"key"}function Mae(e,t,r,n){var o,l;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Ax(s,n);return Mae(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[ks])==null?void 0:o.z)??0)>(r.z??0)?((l=s[ks])==null?void 0:l.z)??0:r.z??0},n)}function Uae(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=Mae(n,e,{...n.position,z:((s=n[ks])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[ks].z=l,r!=null&&r[n.id]&&(n[ks].isParent=!0)}})}function d3(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const l=(Bu(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,ks,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[ks])==null?void 0:p.handleBounds,z:l}}),a.set(o.id,d)}),Uae(a,r,s),a}function Qae(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&l&&(h||!t.initial)){const g=r().filter(b=>{var C;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(C=t.nodes)!=null&&C.length?y&&t.nodes.some(S=>S.id===b.id):y}),v=g.every(b=>b.width&&b.height);if(g.length>0&&v){const b=uP(g,f),{x:y,y:C,zoom:S}=Sae(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),I=$0.translate(y,C).scale(S);return typeof t.duration=="number"&&t.duration>0?o.transform(rp(l,t.duration),I):o.transform(l,I),!0}}return!1}function SQe(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[ks]:n[ks],selected:r.selected})}),new Map(t)}function NQe(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function PC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();e!=null&&e.length&&(l&&n({nodeInternals:SQe(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:NQe(t,s)}),o==null||o(t))}const hv=()=>{},kQe={zoomIn:hv,zoomOut:hv,zoomTo:hv,getZoom:()=>1,setViewport:hv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:hv,fitBounds:hv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},BQe=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),TQe=()=>{const e=Zi(),{d3Zoom:t,d3Selection:r}=us(BQe,tl);return T.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(rp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(rp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(rp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=e.getState().transform,u=$0.translate(a.x??i,a.y??o).scale(a.zoom??l);t.transform(rp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>Qae(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=l/2-s*d,p=$0.translate(f,h).scale(d);t.transform(rp(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Sae(a,i,o,l,u,(s==null?void 0:s.padding)??.1),p=$0.translate(d,f).scale(h);t.transform(rp(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),A6(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=e.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return A6(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=Eae(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:kQe,[t,r])};function C4(){const e=TQe(),t=Zi(),r=T.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),n=T.useCallback(v=>t.getState().nodeInternals.get(v),[]),a=T.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),s=T.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===v)},[]),i=T.useCallback(v=>{const{getNodes:b,setNodes:y,hasDefaultNodes:C,onNodesChange:S}=t.getState(),I=b(),N=typeof v=="function"?v(I):v;if(C)y(N);else if(S){const B=N.length===0?I.map(w=>({type:"remove",id:w.id})):N.map(w=>({item:w,type:"reset"}));S(B)}},[]),o=T.useCallback(v=>{const{edges:b=[],setEdges:y,hasDefaultEdges:C,onEdgesChange:S}=t.getState(),I=typeof v=="function"?v(b):v;if(C)y(I);else if(S){const N=I.length===0?b.map(B=>({type:"remove",id:B.id})):I.map(B=>({item:B,type:"reset"}));S(N)}},[]),l=T.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:y,setNodes:C,hasDefaultNodes:S,onNodesChange:I}=t.getState();if(S){const B=[...y(),...b];C(B)}else if(I){const N=b.map(B=>({item:B,type:"add"}));I(N)}},[]),u=T.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:y=[],setEdges:C,hasDefaultEdges:S,onEdgesChange:I}=t.getState();if(S)C([...y,...b]);else if(I){const N=b.map(B=>({item:B,type:"add"}));I(N)}},[]),d=T.useCallback(()=>{const{getNodes:v,edges:b=[],transform:y}=t.getState(),[C,S,I]=y;return{nodes:v().map(N=>({...N})),edges:b.map(N=>({...N})),viewport:{x:C,y:S,zoom:I}}},[]),f=T.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:y,getNodes:C,edges:S,hasDefaultNodes:I,hasDefaultEdges:N,onNodesDelete:B,onEdgesDelete:w,onNodesChange:_,onEdgesChange:F}=t.getState(),U=(v||[]).map(X=>X.id),D=(b||[]).map(X=>X.id),k=C().reduce((X,V)=>{const Z=V.parentNode||V.parentId,H=!U.includes(V.id)&&Z&&X.find(q=>q.id===Z);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(U.includes(V.id)||H)&&X.push(V),X},[]),L=S.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),R=L.filter(X=>D.includes(X.id));if(k||R){const X=_ae(k,L),V=[...R,...X],Z=V.reduce((H,z)=>(H.includes(z.id)||H.push(z.id),H),[]);if((N||I)&&(N&&t.setState({edges:S.filter(H=>!Z.includes(H.id))}),I&&(k.forEach(H=>{y.delete(H.id)}),t.setState({nodeInternals:new Map(y)}))),Z.length>0&&(w==null||w(V),F&&F(Z.map(H=>({id:H,type:"remove"})))),k.length>0&&(B==null||B(k),_)){const H=k.map(z=>({id:z.id,type:"remove"}));_(H)}}},[]),h=T.useCallback(v=>{const b=X9e(v),y=b?null:t.getState().nodeInternals.get(v.id);return!b&&!y?[null,null,b]:[b?v:Cz(y),y,b]},[]),p=T.useCallback((v,b=!0,y)=>{const[C,S,I]=h(v);return C?(y||t.getState().getNodes()).filter(N=>{if(!I&&(N.id===S.id||!N.positionAbsolute))return!1;const B=Cz(N),w=l6(B,C);return b&&w>0||w>=C.width*C.height}):[]},[]),g=T.useCallback((v,b,y=!0)=>{const[C]=h(v);if(!C)return!1;const S=l6(C,b);return y&&S>0||S>=C.width*C.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,l,u,d,f,p,g])}const jQe={actInsideInputWithModifier:!1};var IQe=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Zi(),{deleteElements:n}=C4(),a=Nw(e,jQe),s=Nw(t);T.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),T.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function FQe(e){const t=Zi();T.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=nP(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",lh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const fP={position:"absolute",width:"100%",height:"100%",top:0,left:0},OQe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,LC=e=>({x:e.x,y:e.y,zoom:e.k}),mv=(e,t)=>e.target.closest(`.${t}`),Oz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Dz=e=>{const t=e.ctrlKey&&s5()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},DQe=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),RQe=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=mp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:y=!0,children:C,noWheelClassName:S,noPanClassName:I})=>{const N=T.useRef(),B=Zi(),w=T.useRef(!1),_=T.useRef(!1),F=T.useRef(null),U=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:k,d3ZoomHandler:L,userSelectionActive:R}=us(DQe,tl),X=Nw(b),V=T.useRef(0),Z=T.useRef(!1),H=T.useRef();return FQe(F),T.useEffect(()=>{if(F.current){const z=F.current.getBoundingClientRect(),q=H9e().scaleExtent([g,v]).translateExtent(p),re=Cu(F.current).call(q),P=$0.translate(h.x,h.y).scale(Rx(h.zoom,g,v)),K=[[0,0],[z.width,z.height]],Y=q.constrain()(P,K,p);q.transform(re,Y),q.wheelDelta(Dz),B.setState({d3Zoom:q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:F.current.closest(".react-flow")})}},[]),T.useEffect(()=>{k&&D&&(i&&!X&&!R?k.on("wheel.zoom",z=>{if(mv(z,S))return!1;z.preventDefault(),z.stopImmediatePropagation();const q=k.property("__zoom").k||1;if(z.ctrlKey&&s){const oe=bA(z),ce=Dz(z),pe=q*Math.pow(2,ce);D.scaleTo(k,pe,oe,z);return}const re=z.deltaMode===1?20:1;let P=l===mp.Vertical?0:z.deltaX*re,K=l===mp.Horizontal?0:z.deltaY*re;!s5()&&z.shiftKey&&l!==mp.Vertical&&(P=z.deltaY*re,K=0),D.translateBy(k,-(P/q)*o,-(K/q)*o,{internal:!0});const Y=LC(k.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ie,onViewportChangeEnd:Ae}=B.getState();clearTimeout(H.current),Z.current||(Z.current=!0,t==null||t(z,Y),te==null||te(Y)),Z.current&&(e==null||e(z,Y),ie==null||ie(Y),H.current=setTimeout(()=>{r==null||r(z,Y),Ae==null||Ae(Y),Z.current=!1},150))},{passive:!1}):typeof L<"u"&&k.on("wheel.zoom",function(z,q){if(!y&&z.type==="wheel"&&!z.ctrlKey||mv(z,S))return null;z.preventDefault(),L.call(this,z,q)},{passive:!1}))},[R,i,l,k,D,L,X,s,y,S,t,e,r]),T.useEffect(()=>{D&&D.on("start",z=>{var P,K;if(!z.sourceEvent||z.sourceEvent.internal)return null;V.current=(P=z.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:q}=B.getState(),re=LC(z.transform);w.current=!0,U.current=re,((K=z.sourceEvent)==null?void 0:K.type)==="mousedown"&&B.setState({paneDragging:!0}),q==null||q(re),t==null||t(z.sourceEvent,re)})},[D,t]),T.useEffect(()=>{D&&(R&&!w.current?D.on("zoom",null):R||D.on("zoom",z=>{var re;const{onViewportChange:q}=B.getState();if(B.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),_.current=!!(n&&Oz(f,V.current??0)),(e||q)&&!((re=z.sourceEvent)!=null&&re.internal)){const P=LC(z.transform);q==null||q(P),e==null||e(z.sourceEvent,P)}}))},[R,D,e,f,n]),T.useEffect(()=>{D&&D.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=B.getState();if(w.current=!1,B.setState({paneDragging:!1}),n&&Oz(f,V.current??0)&&!_.current&&n(z.sourceEvent),_.current=!1,(r||q)&&OQe(U.current,z.transform)){const re=LC(z.transform);U.current=re,clearTimeout(N.current),N.current=setTimeout(()=>{q==null||q(re),r==null||r(z.sourceEvent,re)},i?150:0)}})},[D,i,f,r,n]),T.useEffect(()=>{D&&D.filter(z=>{const q=X||a,re=s&&z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&z.button===1&&z.type==="mousedown"&&(mv(z,"react-flow__node")||mv(z,"react-flow__edge")))return!0;if(!f&&!q&&!i&&!u&&!s||R||!u&&z.type==="dblclick"||mv(z,S)&&z.type==="wheel"||mv(z,I)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!X)||!s&&z.ctrlKey&&z.type==="wheel"||!q&&!i&&!re&&z.type==="wheel"||!f&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(f)&&!f.includes(z.button)&&z.type==="mousedown")return!1;const P=Array.isArray(f)&&f.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&P})},[R,D,a,s,i,u,f,d,X]),lt.createElement("div",{className:"react-flow__renderer",ref:F,style:fP},C)},PQe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function LQe(){const{userSelectionActive:e,userSelectionRect:t}=us(PQe,tl);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Rz(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Hae(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&Rz(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&Rz(n,i);break}case"remove":return n}return n.push(i),n},r)}function Vae(e,t){return Hae(e,t)}function MQe(e,t){return Hae(e,t)}const b0=(e,t)=>({id:e,type:"select",selected:t});function Uv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(b0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(b0(n.id,!1))),r},[])}const A3=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},UQe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),zae=T.memo(({isSelecting:e,selectionMode:t=Sw.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=T.useRef(null),p=Zi(),g=T.useRef(0),v=T.useRef(0),b=T.useRef(),{userSelectionActive:y,elementsSelectable:C,dragging:S}=us(UQe,tl),I=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},N=L=>{s==null||s(L),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},B=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}i==null||i(L)},w=o?L=>o(L):void 0,_=L=>{const{resetSelectedElements:R,domNode:X}=p.getState();if(b.current=X==null?void 0:X.getBoundingClientRect(),!C||!e||L.button!==0||L.target!==h.current||!b.current)return;const{x:V,y:Z}=G0(L,b.current);R(),p.setState({userSelectionRect:{width:0,height:0,startX:V,startY:Z,x:V,y:Z}}),n==null||n(L)},F=L=>{const{userSelectionRect:R,nodeInternals:X,edges:V,transform:Z,onNodesChange:H,onEdgesChange:z,nodeOrigin:q,getNodes:re}=p.getState();if(!e||!b.current||!R)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=G0(L,b.current),K=R.startX??0,Y=R.startY??0,te={...R,x:P.x<K?P.x:K,y:P.y<Y?P.y:Y,width:Math.abs(P.x-K),height:Math.abs(P.y-Y)},ie=re(),Ae=Cae(X,te,Z,t===Sw.Partial,!0,q),oe=_ae(Ae,V).map(pe=>pe.id),ce=Ae.map(pe=>pe.id);if(g.current!==ce.length){g.current=ce.length;const pe=Uv(ie,ce);pe.length&&(H==null||H(pe))}if(v.current!==oe.length){v.current=oe.length;const pe=Uv(V,oe);pe.length&&(z==null||z(pe))}p.setState({userSelectionRect:te})},U=L=>{if(L.button!==0)return;const{userSelectionRect:R}=p.getState();!y&&R&&L.target===h.current&&(N==null||N(L)),p.setState({nodesSelectionActive:g.current>0}),I(),a==null||a(L)},D=L=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),I()},k=C&&(e||y);return lt.createElement("div",{className:wl(["react-flow__pane",{dragging:S,selection:e}]),onClick:k?void 0:A3(N,h),onContextMenu:A3(B,h),onWheel:A3(w,h),onMouseEnter:k?void 0:l,onMouseDown:k?_:void 0,onMouseMove:k?F:u,onMouseUp:k?U:void 0,onMouseLeave:k?D:d,ref:h,style:fP},f,lt.createElement(LQe,null))});zae.displayName="Pane";function $ae(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:$ae(n,t):!1}function Pz(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function QQe(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!$ae(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function HQe(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Gae(e,t,r,n,a=[0,0],s){const i=HQe(e,e.extent||n);let o=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const f=r.get(l),{x:h,y:p}=Ax(f,a).positionAbsolute;o=f&&Bu(h)&&Bu(p)&&Bu(f.width)&&Bu(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",lh.error005()),o=i;else if(e.extent&&l&&e.extent!=="parent"){const f=r.get(l),{x:h,y:p}=Ax(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(l){const f=r.get(l);u=Ax(f,a).positionAbsolute}const d=o&&o!=="parent"?aP(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function f3({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const Lz=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...nP(l)}})};function Tb(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function h6({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",lh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function VQe(){const e=Zi();return T.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function h3(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Kae({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Zi(),[l,u]=T.useState(!1),d=T.useRef([]),f=T.useRef({x:null,y:null}),h=T.useRef(0),p=T.useRef(null),g=T.useRef({x:0,y:0}),v=T.useRef(null),b=T.useRef(!1),y=T.useRef(!1),C=T.useRef(!1),S=VQe();return T.useEffect(()=>{if(e!=null&&e.current){const I=Cu(e.current),N=({x:_,y:F})=>{const{nodeInternals:U,onNodeDrag:D,onSelectionDrag:k,updateNodePositions:L,nodeExtent:R,snapGrid:X,snapToGrid:V,nodeOrigin:Z,onError:H}=o.getState();f.current={x:_,y:F};let z=!1,q={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&R){const P=uP(d.current,Z);q=sP(P)}if(d.current=d.current.map(P=>{const K={x:_-P.distance.x,y:F-P.distance.y};V&&(K.x=X[0]*Math.round(K.x/X[0]),K.y=X[1]*Math.round(K.y/X[1]));const Y=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];d.current.length>1&&R&&!P.extent&&(Y[0][0]=P.positionAbsolute.x-q.x+R[0][0],Y[1][0]=P.positionAbsolute.x+(P.width??0)-q.x2+R[1][0],Y[0][1]=P.positionAbsolute.y-q.y+R[0][1],Y[1][1]=P.positionAbsolute.y+(P.height??0)-q.y2+R[1][1]);const te=Gae(P,K,U,Y,Z,H);return z=z||P.position.x!==te.position.x||P.position.y!==te.position.y,P.position=te.position,P.positionAbsolute=te.positionAbsolute,P}),!z)return;L(d.current,!0,!0),u(!0);const re=a?D:h3(k);if(re&&v.current){const[P,K]=f3({nodeId:a,dragItems:d.current,nodeInternals:U});re(v.current,P,K)}},B=()=>{if(!p.current)return;const[_,F]=mae(g.current,p.current);if(_!==0||F!==0){const{transform:U,panBy:D}=o.getState();f.current.x=(f.current.x??0)-_/U[2],f.current.y=(f.current.y??0)-F/U[2],D({x:_,y:F})&&N(f.current)}h.current=requestAnimationFrame(B)},w=_=>{var Z;const{nodeInternals:F,multiSelectionActive:U,nodesDraggable:D,unselectNodesAndEdges:k,onNodeDragStart:L,onSelectionDragStart:R}=o.getState();y.current=!0;const X=a?L:h3(R);(!i||!s)&&!U&&a&&((Z=F.get(a))!=null&&Z.selected||k()),a&&s&&i&&h6({id:a,store:o,nodeRef:e});const V=S(_);if(f.current=V,d.current=QQe(F,D,V,a),X&&d.current){const[H,z]=f3({nodeId:a,dragItems:d.current,nodeInternals:F});X(_.sourceEvent,H,z)}};if(t)I.on(".drag",null);else{const _=KUe().on("start",F=>{const{domNode:U,nodeDragThreshold:D}=o.getState();D===0&&w(F),C.current=!1;const k=S(F);f.current=k,p.current=(U==null?void 0:U.getBoundingClientRect())||null,g.current=G0(F.sourceEvent,p.current)}).on("drag",F=>{var L,R;const U=S(F),{autoPanOnNodeDrag:D,nodeDragThreshold:k}=o.getState();if(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!b.current&&y.current&&D&&(b.current=!0,B()),!y.current){const X=U.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),V=U.ySnapped-(((R=f==null?void 0:f.current)==null?void 0:R.y)??0);Math.sqrt(X*X+V*V)>k&&w(F)}(f.current.x!==U.xSnapped||f.current.y!==U.ySnapped)&&d.current&&y.current&&(v.current=F.sourceEvent,g.current=G0(F.sourceEvent,p.current),N(U))}}).on("end",F=>{if(!(!y.current||C.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:U,nodeInternals:D,onNodeDragStop:k,onSelectionDragStop:L}=o.getState(),R=a?k:h3(L);if(U(d.current,!1,!1),R){const[X,V]=f3({nodeId:a,dragItems:d.current,nodeInternals:D});R(F.sourceEvent,X,V)}}}).filter(F=>{const U=F.target;return!F.button&&(!r||!Pz(U,`.${r}`,e))&&(!n||Pz(U,n,e))});return I.call(_),()=>{I.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,S]),l}function qae(){const e=Zi();return T.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(C=>C.selected&&(C.draggable||d&&typeof C.draggable>"u")),h=o?l[0]:5,p=o?l[1]:5,g=r.isShiftPressed?4:1,v=r.x*h*g,b=r.y*p*g,y=f.map(C=>{if(C.positionAbsolute){const S={x:C.positionAbsolute.x+v,y:C.positionAbsolute.y+b};o&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:I,position:N}=Gae(C,S,n,a,void 0,u);C.position=N,C.positionAbsolute=I}return C});s(y,!0,!1)},[])}const fx={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var jb=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:v,style:b,className:y,isDraggable:C,isSelectable:S,isConnectable:I,isFocusable:N,selectNodesOnDrag:B,sourcePosition:w,targetPosition:_,hidden:F,resizeObserver:U,dragHandle:D,zIndex:k,isParent:L,noDragClassName:R,noPanClassName:X,initialized:V,disableKeyboardA11y:Z,ariaLabel:H,rfId:z,hasHandleBounds:q})=>{const re=Zi(),P=T.useRef(null),K=T.useRef(null),Y=T.useRef(w),te=T.useRef(_),ie=T.useRef(n),Ae=S||C||d||f||h||p,oe=qae(),ce=Tb(r,re.getState,f),pe=Tb(r,re.getState,h),Ie=Tb(r,re.getState,p),ne=Tb(r,re.getState,g),Se=Tb(r,re.getState,v),De=je=>{const{nodeDragThreshold:He}=re.getState();if(S&&(!B||!C||He>0)&&h6({id:r,store:re,nodeRef:P}),d){const Xe=re.getState().nodeInternals.get(r);Xe&&d(je,{...Xe})}},_e=je=>{if(!c6(je)&&!Z)if(gae.includes(je.key)&&S){const He=je.key==="Escape";h6({id:r,store:re,unselect:He,nodeRef:P})}else C&&u&&Object.prototype.hasOwnProperty.call(fx,je.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:fx[je.key].x,y:fx[je.key].y,isShiftPressed:je.shiftKey}))};T.useEffect(()=>()=>{K.current&&(U==null||U.unobserve(K.current),K.current=null)},[]),T.useEffect(()=>{if(P.current&&!F){const je=P.current;(!V||!q||K.current!==je)&&(K.current&&(U==null||U.unobserve(K.current)),U==null||U.observe(je),K.current=je)}},[F,V,q]),T.useEffect(()=>{const je=ie.current!==n,He=Y.current!==w,Xe=te.current!==_;P.current&&(je||He||Xe)&&(je&&(ie.current=n),He&&(Y.current=w),Xe&&(te.current=_),re.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,n,w,_]);const he=Kae({nodeRef:P,disabled:F||!C,noDragClassName:R,handleSelector:D,nodeId:r,isSelectable:S,selectNodesOnDrag:B});return F?null:lt.createElement("div",{className:wl(["react-flow__node",`react-flow__node-${n}`,{[X]:C},y,{selected:u,selectable:S,parent:L,dragging:he}]),ref:P,style:{zIndex:k,transform:`translate(${o}px,${l}px)`,pointerEvents:Ae?"all":"none",visibility:V?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:pe,onMouseLeave:Ie,onContextMenu:ne,onClick:De,onDoubleClick:Se,onKeyDown:N?_e:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":Z?void 0:`${Pae}-${z}`,"aria-label":H},lt.createElement(nQe,{value:r},lt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:I,sourcePosition:w,targetPosition:_,dragging:he,dragHandle:D,zIndex:k})))};return t.displayName="NodeWrapper",T.memo(t)};const zQe=e=>{const t=e.getNodes().filter(r=>r.selected);return{...uP(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function $Qe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Zi(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=us(zQe,tl),d=qae(),f=T.useRef(null);if(T.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Kae({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const v=n.getState().getNodes().filter(b=>b.selected);e(g,v)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(fx,g.key)&&d({x:fx[g.key].x,y:fx[g.key].y,isShiftPressed:g.shiftKey})};return lt.createElement("div",{className:wl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},lt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var GQe=T.memo($Qe);const KQe=e=>e.nodesSelectionActive,Wae=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:C,elementsSelectable:S,zoomOnScroll:I,zoomOnPinch:N,panOnScroll:B,panOnScrollSpeed:w,panOnScrollMode:_,zoomOnDoubleClick:F,panOnDrag:U,defaultViewport:D,translateExtent:k,minZoom:L,maxZoom:R,preventScrolling:X,onSelectionContextMenu:V,noWheelClassName:Z,noPanClassName:H,disableKeyboardA11y:z})=>{const q=us(KQe),re=Nw(f),P=Nw(y),K=P||U,Y=P||B,te=re||h&&K!==!0;return IQe({deleteKeyCode:o,multiSelectionKeyCode:b}),lt.createElement(RQe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:I,zoomOnPinch:N,panOnScroll:Y,panOnScrollSpeed:w,panOnScrollMode:_,zoomOnDoubleClick:F,panOnDrag:!re&&K,defaultViewport:D,translateExtent:k,minZoom:L,maxZoom:R,zoomActivationKeyCode:C,preventScrolling:X,noWheelClassName:Z,noPanClassName:H},lt.createElement(zae,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:K,isSelecting:!!te,selectionMode:p},e,q&&lt.createElement(GQe,{onSelectionContextMenu:V,noPanClassName:H,disableKeyboardA11y:z})))};Wae.displayName="FlowRenderer";var qQe=T.memo(Wae);function WQe(e){return us(T.useCallback(r=>e?Cae(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function XQe(e){const t={input:jb(e.input||Fae),default:jb(e.default||f6),output:jb(e.output||Dae),group:jb(e.group||AP)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=jb(e[s]||f6),a),r);return{...t,...n}}const YQe=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},JQe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Xae=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=us(JQe,tl),o=WQe(e.onlyRenderVisibleElements),l=T.useRef(),u=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return l.current=d,d},[]);return T.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:fP},o.map(d=>{var N,B,w;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",lh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),v=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?aP(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,C=(y==null?void 0:y.x)??0,S=(y==null?void 0:y.y)??0,I=YQe({x:C,y:S,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return lt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||wr.Bottom,targetPosition:d.targetPosition||wr.Top,hidden:d.hidden,xPos:C,yPos:S,xPosOrigin:I.x,yPosOrigin:I.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[ks])==null?void 0:N.z)??0,isParent:!!((B=d[ks])!=null&&B.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((w=d[ks])!=null&&w.handleBounds)})}))};Xae.displayName="NodeRenderer";var ZQe=T.memo(Xae);const eHe=(e,t,r)=>r===wr.Left?e-t:r===wr.Right?e+t:e,tHe=(e,t,r)=>r===wr.Top?e-t:r===wr.Bottom?e+t:e,Mz="react-flow__edgeupdater",Uz=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:wl([Mz,`${Mz}-${o}`]),cx:eHe(t,n,e),cy:tHe(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),rHe=()=>!0;var pv=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:b,source:y,target:C,sourceX:S,sourceY:I,targetX:N,targetY:B,sourcePosition:w,targetPosition:_,elementsSelectable:F,hidden:U,sourceHandleId:D,targetHandleId:k,onContextMenu:L,onMouseEnter:R,onMouseMove:X,onMouseLeave:V,reconnectRadius:Z,onReconnect:H,onReconnectStart:z,onReconnectEnd:q,markerEnd:re,markerStart:P,rfId:K,ariaLabel:Y,isFocusable:te,isReconnectable:ie,pathOptions:Ae,interactionWidth:oe,disableKeyboardA11y:ce})=>{const pe=T.useRef(null),[Ie,ne]=T.useState(!1),[Se,De]=T.useState(!1),_e=Zi(),he=T.useMemo(()=>`url('#${d6(P,K)}')`,[P,K]),je=T.useMemo(()=>`url('#${d6(re,K)}')`,[re,K]);if(U)return null;const He=bt=>{var Fn;const{edges:Nr,addSelectedEdges:rr,unselectNodesAndEdges:an,multiSelectionActive:Cr}=_e.getState(),Vr=Nr.find(Ir=>Ir.id===r);Vr&&(F&&(_e.setState({nodesSelectionActive:!1}),Vr.selected&&Cr?(an({nodes:[],edges:[Vr]}),(Fn=pe.current)==null||Fn.blur()):rr([r])),i&&i(bt,Vr))},Xe=Bb(r,_e.getState,o),ye=Bb(r,_e.getState,L),Oe=Bb(r,_e.getState,R),Pe=Bb(r,_e.getState,X),qe=Bb(r,_e.getState,V),Ze=(bt,Nr)=>{if(bt.button!==0)return;const{edges:rr,isValidConnection:an}=_e.getState(),Cr=Nr?C:y,Vr=(Nr?k:D)||null,Fn=Nr?"target":"source",Ir=an||rHe,vt=Nr,pt=rr.find(dt=>dt.id===r);De(!0),z==null||z(bt,pt,Fn);const Je=dt=>{De(!1),q==null||q(dt,pt,Fn)};Bae({event:bt,handleId:Vr,nodeId:Cr,onConnect:dt=>H==null?void 0:H(pt,dt),isTarget:vt,getState:_e.getState,setState:_e.setState,isValidConnection:Ir,edgeUpdaterType:Fn,onReconnectEnd:Je})},ot=bt=>Ze(bt,!0),mt=bt=>Ze(bt,!1),Tt=()=>ne(!0),Mt=()=>ne(!1),Ot=!F&&!i,Qt=bt=>{var Nr;if(!ce&&gae.includes(bt.key)&&F){const{unselectNodesAndEdges:rr,addSelectedEdges:an,edges:Cr}=_e.getState();bt.key==="Escape"?((Nr=pe.current)==null||Nr.blur(),rr({edges:[Cr.find(Fn=>Fn.id===r)]})):an([r])}};return lt.createElement("g",{className:wl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Ot,updating:Ie}]),onClick:He,onDoubleClick:Xe,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Pe,onMouseLeave:qe,onKeyDown:te?Qt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Y===null?void 0:Y||`Edge from ${y} to ${C}`,"aria-describedby":te?`${Lae}-${K}`:void 0,ref:pe},!Se&&lt.createElement(e,{id:r,source:y,target:C,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,data:s,style:b,sourceX:S,sourceY:I,targetX:N,targetY:B,sourcePosition:w,targetPosition:_,sourceHandleId:D,targetHandleId:k,markerStart:he,markerEnd:je,pathOptions:Ae,interactionWidth:oe}),ie&&lt.createElement(lt.Fragment,null,(ie==="source"||ie===!0)&&lt.createElement(Uz,{position:w,centerX:S,centerY:I,radius:Z,onMouseDown:ot,onMouseEnter:Tt,onMouseOut:Mt,type:"source"}),(ie==="target"||ie===!0)&&lt.createElement(Uz,{position:_,centerX:N,centerY:B,radius:Z,onMouseDown:mt,onMouseEnter:Tt,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",T.memo(t)};function nHe(e){const t={default:pv(e.default||o5),straight:pv(e.bezier||lP),step:pv(e.step||oP),smoothstep:pv(e.step||E4),simplebezier:pv(e.simplebezier||iP)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=pv(e[s]||o5),a),r);return{...t,...n}}function Qz(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case wr.Top:return{x:n+s/2,y:a};case wr.Right:return{x:n+s,y:a+i/2};case wr.Bottom:return{x:n+s/2,y:a+i};case wr.Left:return{x:n,y:a+i/2}}}function Hz(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const aHe=(e,t,r,n,a,s)=>{const i=Qz(r,e,t),o=Qz(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function sHe({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=sP({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function Vz(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[ks])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const iHe=[{level:0,isMaxLevel:!0,edges:[]}];function oHe(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const l=Bu(o.zIndex);let u=l?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((d=p==null?void 0:p[ks])==null?void 0:d.z)||0,((f=h==null?void 0:h[ks])==null?void 0:f.z)||0,1e3);u=(l?o.zIndex:0)+(g?v:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?iHe:s}function lHe(e,t,r){const n=us(T.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&sHe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return oHe(n,t,r)}const cHe=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),uHe=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),zz={[i5.Arrow]:cHe,[i5.ArrowClosed]:uHe};function dHe(e){const t=Zi();return T.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(zz,e)?zz[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",lh.error009(e)),null)},[e])}const AHe=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=dHe(t);return l?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},lt.createElement(l,{color:r,strokeWidth:i})):null},fHe=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=d6(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Yae=({defaultColor:e,rfId:t})=>{const r=us(T.useCallback(fHe({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return lt.createElement("defs",null,r.map(n=>lt.createElement(AHe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Yae.displayName="MarkerDefinitions";var hHe=T.memo(Yae);const mHe=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Jae=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:C,edgesUpdatable:S,elementsSelectable:I,width:N,height:B,connectionMode:w,nodeInternals:_,onError:F}=us(mHe,tl),U=lHe(t,_,r);return N?lt.createElement(lt.Fragment,null,U.map(({level:D,edges:k,isMaxLevel:L})=>lt.createElement("svg",{key:D,style:{zIndex:D},width:N,height:B,className:"react-flow__edges react-flow__container"},L&&lt.createElement(hHe,{defaultColor:e,rfId:n}),lt.createElement("g",null,k.map(R=>{const[X,V,Z]=Vz(_.get(R.source)),[H,z,q]=Vz(_.get(R.target));if(!Z||!q)return null;let re=R.type||"default";a[re]||(F==null||F("011",lh.error011(re)),re="default");const P=a[re]||a.default,K=w===eg.Strict?z.target:(z.target??[]).concat(z.source??[]),Y=Hz(V.source,R.sourceHandle),te=Hz(K,R.targetHandle),ie=(Y==null?void 0:Y.position)||wr.Bottom,Ae=(te==null?void 0:te.position)||wr.Top,oe=!!(R.focusable||C&&typeof R.focusable>"u"),ce=R.reconnectable||R.updatable,pe=typeof h<"u"&&(ce||S&&typeof ce>"u");if(!Y||!te)return F==null||F("008",lh.error008(Y,R)),null;const{sourceX:Ie,sourceY:ne,targetX:Se,targetY:De}=aHe(X,Y,ie,H,te,Ae);return lt.createElement(P,{key:R.id,id:R.id,className:wl([R.className,s]),type:re,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Ie,sourceY:ne,targetX:Se,targetY:De,sourcePosition:ie,targetPosition:Ae,elementsSelectable:I,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,rfId:n,ariaLabel:R.ariaLabel,isFocusable:oe,isReconnectable:pe,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:y})})))),b):null};Jae.displayName="EdgeRenderer";var pHe=T.memo(Jae);const gHe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vHe({children:e}){const t=us(gHe);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function xHe(e){const t=C4(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const bHe={[wr.Left]:wr.Right,[wr.Right]:wr.Left,[wr.Top]:wr.Bottom,[wr.Bottom]:wr.Top},Zae=({nodeId:e,handleType:t,style:r,type:n=S0.Bezier,CustomComponent:a,connectionStatus:s})=>{var B,w,_;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=us(T.useCallback(F=>({fromNode:F.nodeInternals.get(e),handleId:F.connectionHandleId,toX:(F.connectionPosition.x-F.transform[0])/F.transform[2],toY:(F.connectionPosition.y-F.transform[1])/F.transform[2],connectionMode:F.connectionMode}),[e]),tl),f=(B=i==null?void 0:i[ks])==null?void 0:B.handleBounds;let h=f==null?void 0:f[t];if(d===eg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(F=>F.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,v=p?p.y+p.height/2:i.height??0,b=(((w=i.positionAbsolute)==null?void 0:w.x)??0)+g,y=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+v,C=p==null?void 0:p.position,S=C?bHe[C]:null;if(!C||!S)return null;if(a)return lt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:l,toY:u,fromPosition:C,toPosition:S,connectionStatus:s});let I="";const N={sourceX:b,sourceY:y,sourcePosition:C,targetX:l,targetY:u,targetPosition:S};return n===S0.Bezier?[I]=wae(N):n===S0.Step?[I]=u6({...N,borderRadius:0}):n===S0.SmoothStep?[I]=u6(N):n===S0.SimpleBezier?[I]=yae(N):I=`M${b},${y} ${l},${u}`,lt.createElement("path",{d:I,fill:"none",className:"react-flow__connection-path",style:r})};Zae.displayName="ConnectionLine";const yHe=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function wHe({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=us(yHe,tl);return!(a&&s&&o&&i)?null:lt.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:wl(["react-flow__connection",u])},lt.createElement(Zae,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function $z(e,t){return T.useRef(null),Zi(),T.useMemo(()=>t(e),[e])}const ese=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:C,connectionLineComponent:S,connectionLineContainerStyle:I,selectionKeyCode:N,selectionOnDrag:B,selectionMode:w,multiSelectionKeyCode:_,panActivationKeyCode:F,zoomActivationKeyCode:U,deleteKeyCode:D,onlyRenderVisibleElements:k,elementsSelectable:L,selectNodesOnDrag:R,defaultViewport:X,translateExtent:V,minZoom:Z,maxZoom:H,preventScrolling:z,defaultMarkerColor:q,zoomOnScroll:re,zoomOnPinch:P,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:te,zoomOnDoubleClick:ie,panOnDrag:Ae,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneScroll:ne,onPaneContextMenu:Se,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:je,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ot,disableKeyboardA11y:mt,nodeOrigin:Tt,nodeExtent:Mt,rfId:Ot})=>{const Qt=$z(e,XQe),bt=$z(t,nHe);return xHe(s),lt.createElement(qQe,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneContextMenu:Se,onPaneScroll:ne,deleteKeyCode:D,selectionKeyCode:N,selectionOnDrag:B,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:_,panActivationKeyCode:F,zoomActivationKeyCode:U,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:re,zoomOnPinch:P,zoomOnDoubleClick:ie,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:te,panOnDrag:Ae,defaultViewport:X,translateExtent:V,minZoom:Z,maxZoom:H,onSelectionContextMenu:g,preventScrolling:z,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:mt},lt.createElement(vHe,null,lt.createElement(pHe,{edgeTypes:bt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:je,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:q,noPanClassName:Ze,elevateEdgesOnSelect:!!ot,disableKeyboardA11y:mt,rfId:Ot},lt.createElement(wHe,{style:C,type:y,component:S,containerStyle:I})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(ZQe,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:R,onlyRenderVisibleElements:k,noPanClassName:Ze,noDragClassName:Pe,disableKeyboardA11y:mt,nodeOrigin:Tt,nodeExtent:Mt,rfId:Ot})))};ese.displayName="GraphView";var EHe=T.memo(ese);const m6=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],A0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:m6,nodeExtent:m6,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:eg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Y9e,isValidConnection:void 0},CHe=()=>sMe((e,t)=>({...A0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:d3(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?d3(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((v,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[ks]:{...y[ks],handleBounds:void 0}});else if(y){const C=nP(b.nodeElement);!!(C.width&&C.height&&(y.width!==C.width||y.height!==C.height||b.forceUpdate))&&(a.set(y.id,{...y,[ks]:{...y[ks],handleBounds:{source:Lz(".source",b.nodeElement,h,u),target:Lz(".target",b.nodeElement,h,u)}},...C}),v.push({id:y.id,type:"dimensions",dimensions:C}))}return v},[]);Uae(a,u);const g=i||s&&!i&&Qae(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=t();if(r!=null&&r.length){if(s){const u=Vae(r,o()),d=d3(u,a,i,l);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>b0(l,!0)):(i=Uv(s(),r),o=Uv(a,[])),PC({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>b0(l,!0)):(i=Uv(a,r),o=Uv(s(),[])),PC({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,b0(d.id,!1))),u=o.map(d=>b0(d.id,!1));PC({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>b0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>b0(o.id,!1));PC({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=aP(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=$0.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:A0.connectionNodeId,connectionHandleId:A0.connectionHandleId,connectionHandleType:A0.connectionHandleType,connectionStatus:A0.connectionStatus,connectionStartHandle:A0.connectionStartHandle,connectionEndHandle:A0.connectionEndHandle}),reset:()=>e({...A0})}),Object.is),hP=({children:e})=>{const t=T.useRef(null);return t.current||(t.current=CHe()),lt.createElement(V9e,{value:t.current},e)};hP.displayName="ReactFlowProvider";const tse=({children:e})=>T.useContext(w4)?lt.createElement(lt.Fragment,null,e):lt.createElement(hP,null,e);tse.displayName="ReactFlowWrapper";const _He={input:Fae,default:f6,output:Dae,group:AP},SHe={default:o5,straight:lP,step:oP,smoothstep:E4,simplebezier:iP},NHe=[0,0],kHe=[15,15],BHe={x:0,y:0,zoom:1},THe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},rse=T.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=_He,edgeTypes:i=SHe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:I,onNodeContextMenu:N,onNodeDoubleClick:B,onNodeDragStart:w,onNodeDrag:_,onNodeDragStop:F,onNodesDelete:U,onEdgesDelete:D,onSelectionChange:k,onSelectionDragStart:L,onSelectionDrag:R,onSelectionDragStop:X,onSelectionContextMenu:V,onSelectionStart:Z,onSelectionEnd:H,connectionMode:z=eg.Strict,connectionLineType:q=S0.Bezier,connectionLineStyle:re,connectionLineComponent:P,connectionLineContainerStyle:K,deleteKeyCode:Y="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ie=!1,selectionMode:Ae=Sw.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=s5()?"Meta":"Control",zoomActivationKeyCode:pe=s5()?"Meta":"Control",snapToGrid:Ie=!1,snapGrid:ne=kHe,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:De=!0,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:je,nodeOrigin:He=NHe,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Pe=BHe,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ot=m6,preventScrolling:mt=!0,nodeExtent:Tt,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Ot=!0,zoomOnPinch:Qt=!0,panOnScroll:bt=!1,panOnScrollSpeed:Nr=.5,panOnScrollMode:rr=mp.Free,zoomOnDoubleClick:an=!0,panOnDrag:Cr=!0,onPaneClick:Vr,onPaneMouseEnter:Fn,onPaneMouseMove:Ir,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,children:gt,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onEdgeUpdate:gn,onEdgeUpdateStart:vn,onEdgeUpdateEnd:$t,onReconnect:rn,onReconnectStart:en,onReconnectEnd:cr,reconnectRadius:Yr=10,edgeUpdaterRadius:ra=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ee="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:Ne="nopan",fitView:Te=!1,fitViewOptions:Ye,connectOnClick:ut=!0,attributionPosition:$e,proOptions:tt,defaultEdgeOptions:at,elevateNodesOnSelect:jt=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:_r=20,isValidConnection:sn,onError:on,style:An,id:hs,nodeDragThreshold:bo,...ms},Zs)=>{const Fs=hs||"1";return lt.createElement("div",{...ms,style:{...An,...THe},ref:Zs,className:wl(["react-flow",a]),"data-testid":"rf__wrapper",id:hs},lt.createElement(tse,null,lt.createElement(EHe,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:I,onNodeContextMenu:N,onNodeDoubleClick:B,nodeTypes:s,edgeTypes:i,connectionLineType:q,connectionLineStyle:re,connectionLineComponent:P,connectionLineContainerStyle:K,selectionKeyCode:te,selectionOnDrag:ie,selectionMode:Ae,deleteKeyCode:Y,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Se,selectNodesOnDrag:De,defaultViewport:Pe,translateExtent:ot,minZoom:qe,maxZoom:Ze,preventScrolling:mt,zoomOnScroll:Ot,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:bt,panOnScrollSpeed:Nr,panOnScrollMode:rr,panOnDrag:Cr,onPaneClick:Vr,onPaneMouseEnter:Fn,onPaneMouseMove:Ir,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,onSelectionContextMenu:V,onSelectionStart:Z,onSelectionEnd:H,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onReconnect:rn??gn,onReconnectStart:en??vn,onReconnectEnd:cr??$t,reconnectRadius:Yr??ra,defaultMarkerColor:Mt,noDragClassName:Ee,noWheelClassName:Ce,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:Fs,disableKeyboardA11y:Jt,nodeOrigin:He,nodeExtent:Tt}),lt.createElement(bQe,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:je,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:jt,minZoom:qe,maxZoom:Ze,nodeExtent:Tt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:Ie,snapGrid:ne,connectionMode:z,translateExtent:ot,connectOnClick:ut,defaultEdgeOptions:at,fitView:Te,fitViewOptions:Ye,onNodesDelete:U,onEdgesDelete:D,onNodeDragStart:w,onNodeDrag:_,onNodeDragStop:F,onSelectionDrag:R,onSelectionDragStart:L,onSelectionDragStop:X,noPanClassName:Ne,nodeOrigin:He,rfId:Fs,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:_r,isValidConnection:sn,nodeDragThreshold:bo}),lt.createElement(vQe,{onSelectionChange:k}),gt,lt.createElement($9e,{proOptions:tt,position:$e}),lt.createElement(_Qe,{rfId:Fs,disableKeyboardA11y:Jt})))});rse.displayName="ReactFlow";function nse(e){return t=>{const[r,n]=T.useState(t),a=T.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const jHe=nse(Vae),IHe=nse(MQe);function FHe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function OHe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function DHe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function RHe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function PHe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const uy=({children:e,className:t,...r})=>lt.createElement("button",{type:"button",className:wl(["react-flow__controls-button",t]),...r},e);uy.displayName="ControlButton";const LHe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ase=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:f="bottom-left"})=>{const h=Zi(),[p,g]=T.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:y}=us(LHe,tl),{zoomIn:C,zoomOut:S,fitView:I}=C4();if(T.useEffect(()=>{g(!0)},[]),!p)return null;const N=()=>{C(),s==null||s()},B=()=>{S(),i==null||i()},w=()=>{I(a),o==null||o()},_=()=>{h.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)};return lt.createElement(hae,{className:wl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(uy,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},lt.createElement(FHe,null)),lt.createElement(uy,{onClick:B,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},lt.createElement(OHe,null))),r&&lt.createElement(uy,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view"},lt.createElement(DHe,null)),n&&lt.createElement(uy,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},v?lt.createElement(PHe,null):lt.createElement(RHe,null)),d)};ase.displayName="Controls";var MHe=T.memo(ase),Sd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Sd||(Sd={}));function UHe({color:e,dimensions:t,lineWidth:r}){return lt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function QHe({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const HHe={[Sd.Dots]:"#91919a",[Sd.Lines]:"#eee",[Sd.Cross]:"#e2e2e2"},VHe={[Sd.Dots]:1,[Sd.Lines]:1,[Sd.Cross]:6},zHe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function sse({id:e,variant:t=Sd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=T.useRef(null),{transform:d,patternId:f}=us(zHe,tl),h=i||HHe[t],p=n||VHe[t],g=t===Sd.Dots,v=t===Sd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],C=p*d[2],S=v?[C,C]:y,I=g?[C/s,C/s]:[S[0]/s,S[1]/s];return lt.createElement("svg",{className:wl(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},lt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`},g?lt.createElement(QHe,{color:h,radius:C/s}):lt.createElement(UHe,{dimensions:S,color:h,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}sse.displayName="Background";var $He=T.memo(sse);function GHe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const KHe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function K0(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let gv=null;function ise(e={}){return gv||(e.includeStyleProperties?(gv=e.includeStyleProperties,gv):(gv=K0(window.getComputedStyle(document.documentElement)),gv))}function l5(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function qHe(e){const t=l5(e,"border-left-width"),r=l5(e,"border-right-width");return e.clientWidth+t+r}function WHe(e){const t=l5(e,"border-top-width"),r=l5(e,"border-bottom-width");return e.clientHeight+t+r}function ose(e,t={}){const r=t.width||qHe(e),n=t.height||WHe(e);return{width:r,height:n}}function XHe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const xc=16384;function YHe(e){(e.width>xc||e.height>xc)&&(e.width>xc&&e.height>xc?e.width>e.height?(e.height*=xc/e.width,e.width=xc):(e.width*=xc/e.height,e.height=xc):e.width>xc?(e.height*=xc/e.width,e.width=xc):(e.width*=xc/e.height,e.height=xc))}function c5(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function JHe(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ZHe(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),JHe(a)}const Yl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Yl(r,t)};function eVe(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function tVe(e,t){return ise(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function rVe(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?eVe(r):tVe(r,n);return document.createTextNode(`${a}{${s}}`)}function Gz(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=KHe();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(rVe(i,r,a,n)),t.appendChild(o)}function nVe(e,t,r){Gz(e,t,":before",r),Gz(e,t,":after",r)}const Kz="application/font-woff",qz="image/jpeg",aVe={woff:Kz,woff2:Kz,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:qz,jpeg:qz,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function sVe(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function mP(e){const t=sVe(e).toLowerCase();return aVe[t]||""}function iVe(e){return e.split(/,/)[1]}function p6(e){return e.search(/^(data:)/)!==-1}function oVe(e,t){return`data:${t};base64,${e}`}async function lse(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const m3={};function lVe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function pP(e,t,r){const n=lVe(e,t,r.includeQueryParams);if(m3[n]!=null)return m3[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await lse(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),iVe(o)));a=oVe(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return m3[n]=a,a}async function cVe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):c5(t)}async function uVe(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return c5(o)}const r=e.poster,n=mP(r),a=await pP(r,n,t);return c5(a)}async function dVe(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await _4(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function AVe(e,t){return Yl(e,HTMLCanvasElement)?cVe(e):Yl(e,HTMLVideoElement)?uVe(e,t):Yl(e,HTMLIFrameElement)?dVe(e,t):e.cloneNode(cse(e))}const fVe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",cse=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function hVe(e,t,r){var n,a;if(cse(t))return t;let s=[];return fVe(e)&&e.assignedNodes?s=K0(e.assignedNodes()):Yl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=K0(e.contentDocument.body.childNodes):s=K0(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Yl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>_4(o,r)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function mVe(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):ise(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Yl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function pVe(e,t){Yl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Yl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function gVe(e,t){if(Yl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function vVe(e,t,r){return Yl(t,Element)&&(mVe(e,t,r),nVe(e,t,r),pVe(e,t),gVe(e,t)),t}async function xVe(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=e.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await _4(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);e.appendChild(i)}return e}async function _4(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>AVe(n,t)).then(n=>hVe(e,n,t)).then(n=>vVe(e,n,t)).then(n=>xVe(n,t))}const use=/url\((['"]?)([^'"]+?)\1\)/g,bVe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,yVe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function wVe(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function EVe(e){const t=[];return e.replace(use,(r,n,a)=>(t.push(a),r)),t.filter(r=>!p6(r))}async function CVe(e,t,r,n,a){try{const s=r?GHe(t,r):t,i=mP(t);let o;return a||(o=await pP(s,i,n)),e.replace(wVe(t),`$1${o}$3`)}catch{}return e}function _Ve(e,{preferredFontFormat:t}){return t?e.replace(yVe,r=>{for(;;){const[n,,a]=bVe.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function dse(e){return e.search(use)!==-1}async function Ase(e,t,r){if(!dse(e))return e;const n=_Ve(e,r);return EVe(n).reduce((s,i)=>s.then(o=>CVe(o,i,t,r)),Promise.resolve(n))}async function vv(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Ase(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function SVe(e,t){await vv("background",e,t)||await vv("background-image",e,t),await vv("mask",e,t)||await vv("-webkit-mask",e,t)||await vv("mask-image",e,t)||await vv("-webkit-mask-image",e,t)}async function NVe(e,t){const r=Yl(e,HTMLImageElement);if(!(r&&!p6(e.src))&&!(Yl(e,SVGImageElement)&&!p6(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await pP(n,mP(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...l)=>{try{s(t.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function kVe(e,t){const n=K0(e.childNodes).map(a=>fse(a,t));await Promise.all(n).then(()=>e)}async function fse(e,t){Yl(e,Element)&&(await SVe(e,t),await NVe(e,t),await kVe(e,t))}function BVe(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const Wz={};async function Xz(e){let t=Wz[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},Wz[e]=t,t}async function Yz(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),lse(o,t.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function Jz(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(l[0])}return t}async function TVe(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{K0(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=Xz(l).then(d=>Yz(d,t)).then(d=>Jz(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(Xz(a.href).then(o=>Yz(o,t)).then(o=>Jz(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{K0(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function jVe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>dse(t.style.getPropertyValue("src")))}async function IVe(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=K0(e.ownerDocument.styleSheets),n=await TVe(r,t);return jVe(n)}function hse(e){return e.trim().replace(/["']/g,"")}function FVe(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(hse(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function OVe(e,t){const r=await IVe(e,t),n=FVe(e);return(await Promise.all(r.filter(s=>n.has(hse(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Ase(s.cssText,i,t)}))).join(`
`)}async function DVe(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await OVe(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function RVe(e,t={}){const{width:r,height:n}=ose(e,t),a=await _4(e,t,!0);return await DVe(a,t),await fse(a,t),BVe(a,t),await ZHe(a,r,n)}async function PVe(e,t={}){const{width:r,height:n}=ose(e,t),a=await RVe(e,t),s=await c5(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=t.pixelRatio||XHe(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*l,i.height=d*l,t.skipAutoScale||YHe(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function S4(e,t={}){return(await PVe(e,t)).toDataURL()}const mse="recursos_crucigramas",N4="recursos_lineas_de_tiempo",k4="recursos_mapas_mentales",pse="recursos_sopas_de_letras",B4=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},LVe=e=>{const t=tr(Lt(_t,mse),Gr("fechaCreacion","desc"));return xr(t,r=>{const n=r.docs.map(a=>B4(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},MVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:hr.fromDate(new Date)};return(await Zn(Lt(_t,mse),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},UVe=e=>{const t=tr(Lt(_t,N4),Gr("createdAt","desc"));return xr(t,r=>{const n=r.docs.map(a=>B4(a));e(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},QVe=async(e,t)=>{try{const{id:r,...n}=e,a=mr(_t,N4,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},HVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await Zn(Lt(_t,N4),r)).id}catch(r){throw console.error("Error al crear la lnea de tiempo:",r),new Error("No se pudo crear la lnea de tiempo.")}},VVe=async e=>{try{const t=mr(_t,N4,e);await Is(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},zVe=e=>{const t=tr(Lt(_t,k4),Gr("createdAt","desc"));return xr(t,r=>{const n=r.docs.map(a=>B4(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},$Ve=async(e,t)=>{try{const{id:r,...n}=e,a=mr(_t,k4,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},GVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await Zn(Lt(_t,k4),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},KVe=async e=>{try{const t=mr(_t,k4,e);await Is(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},qVe=e=>{const t=tr(Lt(_t,pse),Gr("createdAt","desc"));return xr(t,r=>{const n=r.docs.map(a=>B4(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},WVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await Zn(Lt(_t,pse),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},XVe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),YVe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),JVe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),ZVe=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(Px,{type:"target",position:wr.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:e.icon||""}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),c.jsx(Px,{type:"source",position:wr.Right,className:"w-2 h-2 !bg-slate-400"})]})},g6=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+g6(n,t),0),v6=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=g6(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=g6(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,l+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((l,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${e.id}-${l.id}`,source:e.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((f,h)=>{const p=d+(h-(l.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${l.id}-${f.id}`,source:l.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},gse=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&c.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(o=>c.jsx(gse,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},eze={custom:ZVe},tze=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=T.useState(e.treeData),[s,i]=T.useState("tree"),[o,l]=T.useState(!1),[u,d,f]=jHe([]),[h,p,g]=IHe([]),{fitView:v}=C4();T.useEffect(()=>{const{nodes:N,edges:B}=v6(n,s);d(N),p(B),setTimeout(()=>v({duration:300}),50)},[n,s,d,p,v]);const b=(N,B)=>{const w=JSON.parse(JSON.stringify(n)),_=F=>F.id===N?(F.label=B,!0):(F.children||[]).some(_);_(w),a(w)},y=N=>{const B=JSON.parse(JSON.stringify(n)),w=_=>_.id===N?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(w);w(B),a(B)},C=N=>{const B=JSON.parse(JSON.stringify(n)),w=_=>{const F=(_.children||[]).findIndex(U=>U.id===N);return F!==-1?(_.children.splice(F,1),!0):(_.children||[]).some(w)};w(B),a(B)},S=()=>{l(!0);const{nodes:N,edges:B}=v6(n,s);r({...e,treeData:n,nodes:N,edges:B}),setTimeout(()=>l(!1),1e3)},I=async N=>{const B=document.querySelector(".react-flow");B&&S4(B,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(w=>{{const _=document.createElement("a");_.download=`${e.tema}.png`,_.href=w,_.click()}}).catch(w=>console.error("oops, something went wrong!",w))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),c.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(rse,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:eze,children:[c.jsx(MHe,{}),c.jsx($He,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(YVe,{})," Vista en rbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(JVe,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(gse,{node:n,onUpdate:b,onAddChild:y,onDelete:C})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>I(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},rze=({onBack:e,currentUser:t})=>{const[r,n]=T.useState("list"),[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(!0),[h,p]=T.useState(""),[g,v]=T.useState(""),[b,y]=T.useState("");T.useEffect(()=>{f(!0);const w=zVe(_=>{s(_),f(!1)});return()=>w()},[]);const C=async w=>{if(w.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerrquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categora, que para el nodo raz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categora descriptiva (ej: "Concepto Clave", "Ejemplo Prctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vaco si es un nodo final.
        `;try{const X=(await(await new cs(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(X),Z=K=>({id:crypto.randomUUID(),label:K.label||"Sin etiqueta",icon:K.icon||"",type:K.type||"default",children:(K.children||[]).map(Z)}),H=Z(V),{nodes:z,edges:q}=v6(H),re={tema:h,nivel:g,treeData:H,nodes:z,edges:q},P=await GVe(re,t);o({...re,id:P,createdAt:new Date().toISOString()}),n("editor")}catch(U){console.error("AI Generation Error:",U),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{u(!1)}},S=async w=>{try{await $Ve(w,t)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},I=w=>{o(w),n("editor")},N=async w=>{if(window.confirm("Eliminar este mapa mental?"))try{await KVe(w)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},B=()=>{switch(r){case"editor":return i?c.jsx(hP,{children:c.jsx(tze,{mapData:i,onBack:()=>n("list"),onSave:S})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:w=>p(w.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:b,onChange:w=>y(w.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(XVe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(w=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:w.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(w.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>I(w),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>N(w.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),B()]})},nze=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aze=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),sze=({onBack:e,currentUser:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState("Media"),[i,o]=T.useState(10),[l,u]=T.useState(!1),[d,f]=T.useState(Array(10).fill("")),[h,p]=T.useState(""),[g,v]=T.useState(null),[b,y]=T.useState({ai:!1,puzzle:!1,data:!0}),C=T.useRef(null);T.useEffect(()=>{y(D=>({...D,data:!0}));const U=qVe(D=>{n(D),y(k=>({...k,data:!1}))});return()=>U()},[]),T.useEffect(()=>{f(U=>{const D=Array(i).fill("");for(let k=0;k<Math.min(U.length,i);k++)D[k]=U[k];return D})},[i]);const S=(U,D)=>{const k=[...d];k[U]=D,f(k)},I=async()=>{if(h.trim()){y(U=>({...U,ai:!0}));try{const U="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=new cs(U).getGenerativeModel({model:"gemini-1.5-flash-latest"}),L=`
                Genera una lista de ${i} palabras clave en espaol, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,Z=(await(await k.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);if(!H.palabras||!Array.isArray(H.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const q=[...H.palabras.map(re=>re.toUpperCase().replace(/[^A-Z]/g,"")).slice(0,i)];for(;q.length<i;)q.push("");f(q)}catch(U){console.error("Error generating words with AI:",U),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(U=>({...U,ai:!1}))}}},N=(U,D,k,L,R,X)=>{for(let V=0;V<U.length;V++){const Z=k+V*R.y,H=L+V*R.x;if(Z<0||Z>=X||H<0||H>=X||D[Z][H]&&D[Z][H]!==U[V])return!1}return!0},B=(U,D,k,L,R)=>{for(let X=0;X<U.length;X++)D[k+X*R.y][L+X*R.x]=U[X]},w=async()=>{y(Z=>({...Z,puzzle:!0})),v(null),await new Promise(Z=>setTimeout(Z,100));const U=d.map(Z=>Z.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(U.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(Z=>({...Z,puzzle:!1}));return}const D=Math.max(...U.map(Z=>Z.length));let k=Math.max(D,U.length)+2;a==="Media"&&(k+=3),a==="Difcil"&&(k+=5),k=Math.min(Math.max(k,10),25);const L=Array(k).fill(null).map(()=>Array(k).fill(null)),R=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&R.push({x:1,y:-1}),a==="Difcil"&&R.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const Z of U.sort((H,z)=>z.length-H.length)){let H=!1;for(let z=0;z<100;z++){const q=R[Math.floor(Math.random()*R.length)],re=Math.floor(Math.random()*k),P=Math.floor(Math.random()*k);if(N(Z,L,re,P,q,k)){B(Z,L,re,P,q),H=!0;break}}H||console.warn(`No se pudo colocar la palabra: ${Z}`)}const X=L.map(Z=>Z.map(H=>H||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:X.map(Z=>Z.join("")),words:U.sort()};try{const Z=await WVe(V,t);v({...V,id:Z,createdAt:new Date().toISOString()})}catch(Z){console.error("Error saving puzzle:",Z),alert("No se pudo guardar la sopa de letras.")}finally{y(Z=>({...Z,puzzle:!1}))}},_=()=>{C.current&&S4(C.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(U=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=U,D.click()}).catch(U=>{console.error("oops, something went wrong!",U),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},F=()=>{var k;if(!g)return null;const U=((k=g.grid[0])==null?void 0:k.length)||1,D=g.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:C,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${U}, minmax(0, 1fr))`},children:D.map((L,R)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},R))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>c.jsx("li",{children:L},L))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!g&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:a,onChange:U=>s(U.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fcil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difcil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(U=>c.jsx("button",{onClick:()=>{o(U),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===U?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:U},U)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:U=>o(parseInt(U.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:U=>p(U.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:I,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?c.jsx(nze,{}):c.jsxs(c.Fragment,{children:[c.jsx(aze,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((U,D)=>c.jsx("input",{type:"text",value:U,onChange:k=>S(D,k.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:w,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&F()]})},ize=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),oze=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),lze=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=T.useState(e),[s,i]=T.useState(null),o=T.useRef(null),l=(p,g,v)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:v}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},g=[...n.events,p].sort((v,b)=>parseInt(v.date)-parseInt(b.date));a(v=>({...v,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(v=>v.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",v=`
            Para una lnea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejrala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional, con tres claves:
            1. "date": El ao o fecha ms precisa y relevante para esta idea.
            2. "description": Una descripcin concisa (mximo 15 palabras) para la lnea de tiempo.
            3. "icon": Un nico emoji que represente el hito.
        `;try{const N=(await(await new cs(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(v)).response).text().replace(/^```json\s*|```\s*$/g,""),B=JSON.parse(N);a(w=>({...w,events:w.events.map(_=>_.id===p.id?{..._,date:B.date,description:B.description,icon:B.icon}:_).sort((_,F)=>parseInt(_.date)-parseInt(F.date))}))}catch(b){console.error("Error al generar descripcin del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&S4(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const v=g%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:v&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!v&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:p.date,onChange:g=>l(p.id,"date",g.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:p.description,onChange:g=>l(p.id,"description",g.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(oze,{})})]}),c.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},cze=({onBack:e,currentUser:t})=>{const[r,n]=T.useState("list"),[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(!0),[h,p]=T.useState(""),[g,v]=T.useState(""),[b,y]=T.useState("");T.useEffect(()=>{f(!0);const N=UVe(B=>{s(B),f(!1)});return()=>N()},[]);const C=async N=>{if(N.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",_=`
            Genera una lnea de tiempo sobre el tema "${h}" ${w}.
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el ao del hito.
            2. "description": Un string con la descripcin breve del hito (mximo 15 palabras).
            3. "icon": Un string con un nico emoji que represente el hito.
            Ordena los eventos cronolgicamente.
        `;try{const R=(await(await new cs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(R);if(!X.events||!Array.isArray(X.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:b,events:X.events.map(H=>({id:crypto.randomUUID(),date:H.date||"Sin fecha",description:H.description||"Sin descripcin",icon:H.icon||""}))},Z=await HVe(V,t);o({...V,id:Z,createdAt:new Date().toISOString()}),n("editor")}catch(F){console.error("AI Generation Error:",F),alert("Hubo un error al generar la lnea de tiempo. Por favor, revisa el formato del tema o intntalo de nuevo.")}finally{u(!1)}},S=async N=>{try{await QVe(N,t),n("list"),o(null)}catch(B){console.error("Error saving timeline:",B),alert("No se pudo guardar la lnea de tiempo.")}},I=async N=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await VVe(N)}catch(B){console.error("Error deleting timeline:",B),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&i?c.jsx(lze,{timeline:i,onSave:S,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:N=>p(N.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:N=>v(N.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:N=>y(N.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(ize,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(N=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:N.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(N.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(N),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>I(N.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},N.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},uze=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Zz=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),dze=({onBack:e,currentUser:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState(10),[i,o]=T.useState(!1),[l,u]=T.useState(Array(10).fill("")),[d,f]=T.useState(Array(10).fill("")),[h,p]=T.useState(""),[g,v]=T.useState(null),[b,y]=T.useState(!1),[C,S]=T.useState({ai:!1,puzzle:!1,data:!0}),[I,N]=T.useState(null),B=T.useRef(null);T.useEffect(()=>{S(X=>({...X,data:!0}));const R=LVe(X=>{const V=X.map(Z=>{const{grid_flat:H,grid_width:z,...q}=Z,re=[];if(H&&z>0)for(let P=0;P<H.length;P+=z)re.push(H.slice(P,P+z));return{...q,grid:re}});n(V),S(Z=>({...Z,data:!1}))});return()=>R()},[]),T.useEffect(()=>{const R=a;u(X=>Array.from({length:R},(V,Z)=>X[Z]||"")),f(X=>Array.from({length:R},(V,Z)=>X[Z]||""))},[a]);const w=(R,X)=>{const V=[...l];V[R]=X,u(V)},_=(R,X)=>{const V=[...d];V[R]=X,f(V)},F=async()=>{if(h.trim()){S(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new cs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en maysculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let re=(await(await V.generateContent(Z)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const P=re.indexOf("{"),K=re.lastIndexOf("}");P!==-1&&K!==-1&&(re=re.substring(P,K+1)),re=re.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),re.includes("__SPLIT__")&&(re=re.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Ae,oe,ce,pe)=>{const Ie=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return oe+Ie.join(",")+pe})),re=re.replace(/,\s*]/g,"]");let Y;try{Y=JSON.parse(re)}catch{console.error("Respuesta IA no es JSON vlido:",re),alert("La respuesta de la IA no es un JSON vlido. Intenta de nuevo o ajusta el tema."),S(oe=>({...oe,ai:!1}));return}if(!Y.items||!Array.isArray(Y.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=Y.items.map(Ae=>(Ae.word||"").toUpperCase().replace(/\s/g,"")),ie=Y.items.map(Ae=>Ae.clue||"");u(Array.from({length:a},(Ae,oe)=>te[oe]||"")),f(Array.from({length:a},(Ae,oe)=>ie[oe]||""))}catch(R){console.error("Error generating words/clues with AI:",R),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{S(R=>({...R,ai:!1}))}}},U=async R=>{const X=l[R];if(!X||!X.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}N(R);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new cs(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${X}". La respuesta debe ser un nico objeto JSON vlido sin texto adicional, con una sola clave: "clue".`,K=(await(await H.generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(K);Y.clue&&_(R,Y.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{N(null)}},D=T.useCallback(()=>{try{const R=l.map((je,He)=>({word:je.toUpperCase().replace(/[^A-Z]/g,""),clue:d[He]})).filter(je=>je.word.length>0);if(R.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;R.sort((je,He)=>He.word.length-je.word.length);const X=R[0].word.length,V=Math.max(X,R.length)*2;let Z=Array.from({length:V},()=>Array(V).fill(null));const H=[],z=R.shift(),q=Math.floor(V/2),re=Math.floor((V-z.word.length)/2);for(let je=0;je<z.word.length;je++)Z[q][re+je]=z.word[je];H.push({word:z.word,clue:z.clue,direction:"across",row:q,col:re});for(const je of R){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of H)for(let ye=0;ye<Xe.word.length;ye++)for(let Oe=0;Oe<je.word.length;Oe++)if(Xe.word[ye]===je.word[Oe]){let Pe=0,qe,Ze,ot;Xe.direction==="across"?(ot="down",qe=Xe.row-Oe,Ze=Xe.col+ye):(ot="across",qe=Xe.row+ye,Ze=Xe.col-Oe);let mt=!0;for(let Tt=0;Tt<je.word.length;Tt++){const Mt=qe+(ot==="down"?Tt:0),Ot=Ze+(ot==="across"?Tt:0);if(Mt<0||Mt>=V||Ot<0||Ot>=V){mt=!1;break}const Qt=Z[Mt][Ot],bt=Mt===Xe.row+(Xe.direction==="down"?ye:0)&&Ot===Xe.col+(Xe.direction==="across"?ye:0);if(Qt&&!bt){mt=!1;break}if(Qt&&bt&&Qt!==je.word[Oe]){mt=!1;break}if(!bt){if(ot==="across"&&(Mt>0&&Z[Mt-1][Ot]||Mt<V-1&&Z[Mt+1][Ot])){mt=!1;break}if(ot==="down"&&(Ot>0&&Z[Mt][Ot-1]||Ot<V-1&&Z[Mt][Ot+1])){mt=!1;break}}Qt&&Pe++}mt&&Pe>He.score&&(He={score:Pe,row:qe,col:Ze,direction:ot})}if(He.score>-1){for(let Xe=0;Xe<je.word.length;Xe++){const ye=He.row+(He.direction==="down"?Xe:0),Oe=He.col+(He.direction==="across"?Xe:0);Z[ye][Oe]=je.word[Xe]}H.push({word:je.word,clue:je.clue,direction:He.direction,row:He.row,col:He.col})}}let P=V,K=-1,Y=V,te=-1;H.forEach(je=>{P=Math.min(P,je.row),K=Math.max(K,je.row+(je.direction==="down"?je.word.length-1:0)),Y=Math.min(Y,je.col),te=Math.max(te,je.col+(je.direction==="across"?je.word.length-1:0))}),K===-1&&(P=H[0].row,K=H[0].row,Y=H[0].col,te=H[0].col+H[0].word.length-1);const ie=1,Ae=Math.max(0,P-ie),oe=Math.min(V,K+1+ie),ce=Math.max(0,Y-ie),pe=Math.min(V,te+1+ie),Ie=Z.slice(Ae,oe).map(je=>je.slice(ce,pe)),ne=H.map(je=>({...je,row:je.row-Ae,col:je.col-ce})).sort((je,He)=>je.row-He.row||je.col-He.col);let Se=1;const De=[],_e=new Map;ne.forEach(je=>{const He=`${je.row},${je.col}`;_e.has(He)||_e.set(He,Se++),De.push({...je,number:_e.get(He)})});const he=Ie.map(je=>je.map(He=>({char:He,number:null})));return De.forEach(je=>{const He=`${je.row},${je.col}`;he[je.row]&&he[je.row][je.col]!==void 0&&(he[je.row][je.col].number=_e.get(He))}),{grid:he,clues:{across:De.filter(je=>je.direction==="across").sort((je,He)=>je.number-He.number),down:De.filter(je=>je.direction==="down").sort((je,He)=>je.number-He.number)}}}catch(R){return console.error("Error generating crossword grid:",R),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),k=async()=>{var X;S(V=>({...V,puzzle:!0})),v(null),await new Promise(V=>setTimeout(V,100));const R=D();if(R){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:R.grid,clues:R.clues},{grid:Z,...H}=V,z={...H,grid_flat:Z.flat().map(q=>q.char||""),grid_width:((X=Z[0])==null?void 0:X.length)||0};try{const q=await MVe(z,t);v({...V,id:q,fechaCreacion:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar el crucigrama en la base de datos.")}}S(V=>({...V,puzzle:!1}))},L=()=>{B.current&&(y(!1),setTimeout(()=>{S4(B.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(R=>{const X=document.createElement("a");X.download="crucigrama.png",X.href=R,X.click()}).catch(R=>console.error("Error generating image",R))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),g?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:B,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((R,X)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:R.char?"white":"black"},children:[R.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:R.number}),b&&R.char&&c.jsx("span",{children:R.char})]},X))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.across.map(R=>c.jsxs("li",{children:[c.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.down.map(R=>c.jsxs("li",{children:[c.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solucin"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>c.jsx("button",{onClick:()=>{s(R),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:R=>s(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:F,disabled:C.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:C.ai?c.jsx(uze,{}):c.jsxs(c.Fragment,{children:[c.jsx(Zz,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((R,X)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[X],onChange:V=>w(X,V.target.value),placeholder:`Palabra ${X+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[X],onChange:V=>_(X,V.target.value),placeholder:`Pista ${X+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>U(X),disabled:I===X,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:I===X?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(Zz,{})})]})]},X))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:k,disabled:C.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:C.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Aze=()=>{const[e,t]=T.useState(null),[r,n]=T.useState(!0);return T.useEffect(()=>{const a=UX(tF,async s=>{if(s&&s.email)try{const i=await rZ(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},fze=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],hze=({recurso:e,onClick:t})=>c.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:e.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),mze=()=>{const[e,t]=T.useState("menu"),{currentUser:r}=Aze(),n=()=>e!=="menu"&&!r?c.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?c.jsx(rze,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?c.jsx(sze,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?c.jsx(cze,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?c.jsx(dze,{onBack:()=>t("menu"),currentUser:r}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:fze.map(a=>c.jsx(hze,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},pze="evaluaciones_formativas",gze="calificaciones_formativas",vse="trabajos_grupales_formativos",xse=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},vze=(e,t)=>{const r=tr(Lt(_t,pze),_n("curso","==",e));return xr(r,n=>{t(n.docs.map(a=>xse(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},xze=e=>{const t=tr(Lt(_t,gze));return xr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},bze=(e,t)=>{const r=tr(Lt(_t,vse),_n("curso","==",e));return xr(r,n=>{t(n.docs.map(a=>xse(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},yze=async e=>{try{const{id:t,...r}=e,n=mr(_t,vse,t);await Ji(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},wze=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState({}),[s,i]=T.useState([]),[o,l]=T.useState(!0),[u,d]=T.useState(null),[f,h]=T.useState(!1),[p,g]=T.useState(null),v=T.useRef(null);T.useEffect(()=>{if(!e.curso){l(!1);return}l(!0);const I=vze(e.curso,r),N=xze(a),B=bze(e.curso,w=>{i(w),l(!1)});return()=>{I(),N(),B()}},[e.curso]);const b=T.useMemo(()=>{if(!e.curso)return[];const N=t.filter(B=>B.curso===e.curso).reduce((B,w)=>((B[w.asignatura]=B[w.asignatura]||[]).push(w),B),{});return Object.entries(N).map(([B,w])=>{let _=0,F=0;const U=w.map(k=>{var X;const L=(X=n[k.id])==null?void 0:X[e.nombreCompleto];let R="No Trabajado";return L==="trabajado"?(_+=7,F++,R="Trabajado"):L==="no trabajado"&&(_+=2,F++,R="No Trabajado"),{id:k.id,nombreActividad:k.nombreActividad,fecha:k.fecha,estado:R}}).filter(k=>{var L;return(L=n[k.id])==null?void 0:L[e.nombreCompleto]}),D=F>0?(_/F).toFixed(1):"N/A";return{asignatura:B,promedio:D,actividades:U.sort((k,L)=>new Date(L.fecha).getTime()-new Date(k.fecha).getTime())}}).filter(B=>B.actividades.length>0).sort((B,w)=>B.asignatura.localeCompare(w.asignatura))},[t,n,e]);T.useEffect(()=>{if(b.reduce((F,U)=>F+U.actividades.length,0)===0){d(null);return}const N=b.reduce((F,U)=>{const D=parseFloat(U.promedio);return isNaN(D)?F:F+D},0),B=b.length>0?N/b.length:0,w=VE.find(F=>B>=F.promedioMin&&B<=F.promedioMax)||null,_=VE.filter(F=>B>=F.promedioMin);if(d({puntajeTotal:0,promedio:B,rangoActual:w,insigniasGanadas:_}),v.current!==null){const F=VE.find(U=>v.current>=U.promedioMin&&v.current<=U.promedioMax)||null;w&&(!F||w.nombre!==F.nombre)&&g(w)}v.current=B},[b]);const y=T.useMemo(()=>e.curso?s.filter(I=>I.curso===e.curso).map(I=>{const N=I.grupos.find(B=>B.integrantes.some(w=>w.nombre===e.nombreCompleto));return N?{...I,miGrupo:N}:null}).filter(I=>I!==null).sort((I,N)=>new Date(N.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[s,e]),C=async(I,N)=>{const B=s.find(_=>_.id===I);if(!B)return;const w={...B,grupos:B.grupos.map(_=>_.integrantes.some(U=>U.nombre===e.nombreCompleto)?{..._,integrantes:_.integrantes.map(U=>U.nombre===e.nombreCompleto?{...U,rol:N||void 0}:U)}:_)};try{await yze(w)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},S=I=>{const N=parseFloat(I);return isNaN(N)?"bg-slate-400":N<4?"bg-red-500":N<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),c.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:VE.map(I=>{const N=u==null?void 0:u.insigniasGanadas.some(B=>B.nombre===I.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${N?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:I.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${N?"text-amber-700":"text-slate-600"}`,children:I.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(I=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${S(I.promedio)}`,children:I.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(N=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:N.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(N.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${N.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:N.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},N.id))]})]},I.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:y.map(I=>{const N=I.miGrupo.integrantes.filter(w=>w.nombre!==e.nombreCompleto&&w.rol).map(w=>w.rol),B=aZ.filter(w=>!N.includes(w));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentacin: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(w=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:w.nombre===e.nombreCompleto?"font-bold":"",children:w.nombre}),w.nombre===e.nombreCompleto?c.jsxs("select",{value:w.rol||"",onChange:_=>C(I.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),w.rol&&!B.includes(w.rol)&&c.jsx("option",{value:w.rol,children:w.rol}),B.map(_=>c.jsx("option",{value:_,children:_},_))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:w.rol||"Sin rol"})]},w.nombre))})]})]},I.id)})})]})]})},Eze="proyectos_interdisciplinarios",bse="entregas_interdisciplinarias",yse=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Cze=(e,t)=>{const r=tr(Lt(_t,Eze),_n("cursos","array-contains",e));return xr(r,n=>{const a=n.docs.map(s=>yse(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},_ze=(e,t)=>{const r=tr(Lt(_t,bse),_n("estudianteId","==",e));return xr(r,n=>{const a=n.docs.map(s=>yse(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Sze=async e=>{try{const{id:t,...r}=e,n=mr(_t,bse,t),a={...r,fechaCompletado:hr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ji(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Nze=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState([]),[s,i]=T.useState(null),[o,l]=T.useState(!0);T.useEffect(()=>{if(!e.curso||!e.id){l(!1);return}l(!0);const f=Cze(e.curso,r),h=_ze(e.id,p=>{a(p),l(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await Sze(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=T.useMemo(()=>{const N=n.find(B=>B.planificacionId===f.id&&B.tareaId===h.id);return N||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,v]=T.useState(!1),[b,y]=T.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),C=N=>{var w;const B=(w=N.target.files)==null?void 0:w[0];B&&(alert(`Simulacin: Archivo "${B.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:B.name,url:`simulated/path/${B.name}`},fechaCompletado:new Date().toISOString()}))},S=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},I=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:p.completada,onChange:I,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&c.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>v(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:b.observaciones,onChange:N=>y({...b,observaciones:N.target.value}),onBlur:S,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:b.enlace,onChange:N=>y({...b,enlace:N.target.value}),onBlur:S,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:C,className:"text-sm"}),p.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,v=h.length>0?g/h.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(v),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${v}%`}})})]})]}),s===f.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>c.jsx(d,{plan:f,tarea:b},b.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},kze=({data:e})=>c.jsx("div",{className:"space-y-4",children:e.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Bze=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState(null),[u,d]=T.useState(by),f=T.useCallback(async()=>{a(!0);try{const b=(await tOe(e.nombreCompleto)).sort((y,C)=>new Date(C.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(v){console.error("Error al cargar acompaamientos desde Firestore",v),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=T.useCallback(async()=>{try{const v=await rOe();v&&d(v)}catch(v){console.error("Error al cargar rbrica personalizada",v)}},[]);T.useEffect(()=>{f(),h()},[f,h]);const p=T.useMemo(()=>{if(!o)return[];const v={};return u.forEach(b=>{v[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const C=o.rubricaResultados[y.name];C&&(v[b.domain].total+=C,v[b.domain].count++)})}),Object.entries(v).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=v=>{const b=new gr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompaamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),vl(b,{startY:35,body:[["Docente:",v.docente],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Asignatura:",v.asignatura],["Curso:",v.curso],["Bloques:",v.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(v.rubricaResultados).length>0){const I=[],N=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(B=>{I.push([{content:B.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),B.criteria.forEach(w=>{const _=v.rubricaResultados[w.name],F=_?N[_-1]:"No evaluado";I.push([w.name,F])})}),vl(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:I,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const C=(I,N)=>{if(!N)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(I,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const B=b.splitTextToSize(N.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(B,14,y),y+=B.length*5+10};C("Observaciones Generales",v.observacionesGenerales),C("Retroalimentacin Consolidada",v.retroalimentacionConsolidada);const S=b.getNumberOfPages();for(let I=1;I<=S;I++)b.setPage(I),b.setFontSize(8),b.setTextColor(128),b.text(`Pgina ${I} de ${S}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(v.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(nZ,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(kze,{data:p})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(v=>c.jsx("button",{onClick:()=>l(v),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[v.curso," - ",v.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(v.fecha).toLocaleDateString("es-CL"),v.bloques&&` | Bloques: ${v.bloques}`]}),Object.keys(v.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(v.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},v.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},Tze=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=Lt(tn,"planificaciones"),r=tr(t,Gr("fechaCreacion","desc"));return xr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},jze=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=Lt(tn,"planificaciones"),n=tr(r,_n("userId","==",e),Gr("fechaCreacion","desc"));return xr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log(" Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function q0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ize(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gP(e){let t,r,n;e.length!==2?(t=q0,r=(o,l)=>q0(e(o),l),n=(o,l)=>e(o)-l):(t=e===q0||e===Ize?e:Fze,r=e,n=e);function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=a(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:a,center:i,right:s}}function Fze(){return 0}function wse(e){return e===null?NaN:+e}function*Oze(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Dze=gP(q0),g2=Dze.right;gP(wse).center;class e$ extends Map{constructor(t,r=Lze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(t$(this,t))}has(t){return super.has(t$(this,t))}set(t,r){return super.set(Rze(this,t),r)}delete(t){return super.delete(Pze(this,t))}}function t$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Rze({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Pze({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Lze(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Mze(e=q0){if(e===q0)return Ese;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Ese(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Uze=Math.sqrt(50),Qze=Math.sqrt(10),Hze=Math.sqrt(2);function u5(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=Uze?10:s>=Qze?5:s>=Hze?2:1;let o,l,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?u5(e,t,r*2):[o,l,u]}function x6(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?u5(t,e,r):u5(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(s-u)/-i;else for(let u=0;u<o;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(a+u)/-i;else for(let u=0;u<o;++u)l[u]=(a+u)*i;return l}function b6(e,t,r){return t=+t,e=+e,r=+r,u5(e,t,r)[2]}function y6(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?b6(t,e,r):b6(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function r$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function n$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Cse(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Ese:Mze(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),g=Math.min(n,Math.floor(t+(l-u)*f/l+h));Cse(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(Ib(e,r,t),a(e[n],s)>0&&Ib(e,r,n);i<o;){for(Ib(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?Ib(e,r,o):(++o,Ib(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Ib(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Vze(e,t,r){if(e=Float64Array.from(Oze(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return n$(e);if(t>=1)return r$(e);var n,a=(n-1)*t,s=Math.floor(a),i=r$(Cse(e,s).subarray(0,s+1)),o=n$(e.subarray(s+1));return i+(o-i)*(a-s)}}function zze(e,t,r=wse){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function $ze(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}const w6=Math.PI,E6=2*w6,np=1e-6,Gze=E6-np;function _se(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Kze(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _se;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class qze{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_se:Kze(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,l=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>np)if(!(Math.abs(f*l-u*d)>np)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,v=l*l+u*u,b=p*p+g*g,y=Math.sqrt(v),C=Math.sqrt(h),S=s*Math.tan((w6-Math.acos((v+h-b)/(2*y*C)))/2),I=S/C,N=S/y;Math.abs(I-1)>np&&this._append`L${t+I*d},${r+I*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+N*l},${this._y1=r+N*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),u=t+o,d=r+l,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>np||Math.abs(this._y1-d)>np)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%E6+E6),h>Gze?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>np&&this._append`A${n},${n},0,${+(h>=w6)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Wze(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function d5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Lx(e){return e=d5(Math.abs(e)),e?e[1]:NaN}function Xze(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(a-=o,a+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function Yze(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Jze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kw(e){if(!(t=Jze.exec(e)))throw new Error("invalid format: "+e);var t;return new vP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kw.prototype=vP.prototype;function vP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zze(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Sse;function e$e(e,t){var r=d5(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Sse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+d5(e,Math.max(0,t+s-1))[0]}function a$(e,t){var r=d5(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const s$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Wze,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>a$(e*100,t),r:a$,s:e$e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function i$(e){return e}var o$=Array.prototype.map,l$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function t$e(e){var t=e.grouping===void 0||e.thousands===void 0?i$:Xze(o$.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?i$:Yze(o$.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=kw(f);var h=f.fill,p=f.align,g=f.sign,v=f.symbol,b=f.zero,y=f.width,C=f.comma,S=f.precision,I=f.trim,N=f.type;N==="n"?(C=!0,N="g"):s$[N]||(S===void 0&&(S=12),I=!0,N="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var B=v==="$"?r:v==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",w=v==="$"?n:/[%p]/.test(N)?i:"",_=s$[N],F=/[defgprs%]/.test(N);S=S===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function U(D){var k=B,L=w,R,X,V;if(N==="c")L=_(D)+L,D="";else{D=+D;var Z=D<0||1/D<0;if(D=isNaN(D)?l:_(Math.abs(D),S),I&&(D=Zze(D)),Z&&+D==0&&g!=="+"&&(Z=!1),k=(Z?g==="("?g:o:g==="-"||g==="("?"":g)+k,L=(N==="s"?l$[8+Sse/3]:"")+L+(Z&&g==="("?")":""),F){for(R=-1,X=D.length;++R<X;)if(V=D.charCodeAt(R),48>V||V>57){L=(V===46?a+D.slice(R+1):D.slice(R))+L,D=D.slice(0,R);break}}}C&&!b&&(D=t(D,1/0));var H=k.length+D.length+L.length,z=H<y?new Array(y-H+1).join(h):"";switch(C&&b&&(D=t(z+D,z.length?y-L.length:1/0),z=""),p){case"<":D=k+D+L+z;break;case"=":D=k+z+D+L;break;case"^":D=z.slice(0,H=z.length>>1)+k+D+L+z.slice(H);break;default:D=z+k+D+L;break}return s(D)}return U.toString=function(){return f+""},U}function d(f,h){var p=u((f=kw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Lx(h)/3)))*3,v=Math.pow(10,-g),b=l$[8+g/3];return function(y){return p(v*y)+b}}return{format:u,formatPrefix:d}}var MC,xP,Nse;r$e({thousands:",",grouping:[3],currency:["$",""]});function r$e(e){return MC=t$e(e),xP=MC.format,Nse=MC.formatPrefix,MC}function n$e(e){return Math.max(0,-Lx(Math.abs(e)))}function a$e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lx(t)/3)))*3-Lx(Math.abs(e)))}function s$e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lx(t)-Lx(e))+1}function Pu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const C6=Symbol("implicit");function T4(){var e=new e$,t=[],r=[],n=C6;function a(s){let i=e.get(s);if(i===void 0){if(n!==C6)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new e$;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return T4(t,r).unknown(n)},Pu.apply(a,arguments),a}function bP(){var e=T4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,v=p?n:a;s=(v-g)/Math.max(1,h-l+u*2),o&&(s=Math.floor(s)),g+=(v-g-s*(h-l))*d,i=s*(1-l),o&&(g=Math.round(g),i=Math.round(i));var b=$ze(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return bP(t(),[n,a]).round(o).paddingInner(l).paddingOuter(u).align(d)},Pu.apply(f(),arguments)}function kse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return kse(t())},e}function i$e(){return kse(bP.apply(null,arguments).paddingInner(1))}function o$e(e){return function(){return e}}function A5(e){return+e}var c$=[0,1];function ml(e){return e}function _6(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:o$e(isNaN(t)?NaN:.5)}function l$e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function c$e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=_6(a,n),s=r(i,s)):(n=_6(n,a),s=r(s,i)),function(o){return s(n(o))}}function u$e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=_6(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var l=g2(e,o,1,n)-1;return s[l](a[l](o))}}function v2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function j4(){var e=c$,t=c$,r=m1,n,a,s,i=ml,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==ml&&(i=l$e(e[0],e[h-1])),o=h>2?u$e:c$e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),fd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,A5),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=ZR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:ml,d()):i!==ml},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function yP(){return j4()(ml,ml)}function Bse(e,t,r,n){var a=y6(e,t,r),s;switch(n=kw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=a$e(a,i))&&(n.precision=s),Nse(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=s$e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=n$e(a))&&(n.precision=s-(n.type==="%")*2);break}}return xP(n)}function wm(e){var t=e.domain;return e.ticks=function(r){var n=t();return x6(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Bse(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=b6(i,o,r),u===l)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Tse(){var e=yP();return e.copy=function(){return v2(e,Tse())},Pu.apply(e,arguments),wm(e)}function jse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,A5),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return jse(e).unknown(t)},e=arguments.length?Array.from(e,A5):[0,1],wm(r)}function Ise(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function u$(e){return Math.log(e)}function d$(e){return Math.exp(e)}function d$e(e){return-Math.log(-e)}function A$e(e){return-Math.exp(-e)}function f$e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function h$e(e){return e===10?f$e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function m$e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A$(e){return(t,r)=>-e(-t,r)}function wP(e){const t=e(u$,d$),r=t.domain;let n=10,a,s;function i(){return a=m$e(n),s=h$e(n),r()[0]<0?(a=A$(a),s=A$(s),e(d$e,A$e)):e(u$,d$),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,v;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}y.length*2<b&&(y=x6(u,d,b))}else y=x6(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=kw(l)).precision==null&&(l.trim=!0),l=xP(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(Ise(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function Fse(){const e=wP(j4()).domain([1,10]);return e.copy=()=>v2(e,Fse()).base(e.base()),Pu.apply(e,arguments),e}function f$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function h$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function EP(e){var t=1,r=e(f$(t),h$(t));return r.constant=function(n){return arguments.length?e(f$(t=+n),h$(t)):t},wm(r)}function Ose(){var e=EP(j4());return e.copy=function(){return v2(e,Ose()).constant(e.constant())},Pu.apply(e,arguments)}function m$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function p$e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function g$e(e){return e<0?-e*e:e*e}function CP(e){var t=e(ml,ml),r=1;function n(){return r===1?e(ml,ml):r===.5?e(p$e,g$e):e(m$(r),m$(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},wm(t)}function _P(){var e=CP(j4());return e.copy=function(){return v2(e,_P()).exponent(e.exponent())},Pu.apply(e,arguments),e}function v$e(){return _P.apply(null,arguments).exponent(.5)}function p$(e){return Math.sign(e)*e*e}function x$e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Dse(){var e=yP(),t=[0,1],r=!1,n;function a(s){var i=x$e(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(p$(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,A5)).map(p$)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Dse(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Pu.apply(a,arguments),wm(a)}function Rse(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=zze(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[g2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(q0),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Rse().domain(e).range(t).unknown(n)},Pu.apply(s,arguments)}function Pse(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(l){return l!=null&&l<=l?a[g2(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,o()):a.slice()},i.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Pse().domain([e,t]).range(a).unknown(s)},Pu.apply(wm(i),arguments)}function Lse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[g2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Lse().domain(e).range(t).unknown(r)},Pu.apply(a,arguments)}const p3=new Date,g3=new Date;function ki(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const l=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return l},a.filter=s=>ki(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(p3.setTime(+s),g3.setTime(+i),e(p3),e(g3),Math.floor(r(p3,g3))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const f5=ki(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);f5.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ki(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):f5);f5.range;const Qf=1e3,Tu=Qf*60,Hf=Tu*60,ch=Hf*24,SP=ch*7,g$=ch*30,v3=ch*365,pp=ki(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qf)},(e,t)=>(t-e)/Qf,e=>e.getUTCSeconds());pp.range;const NP=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qf)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getMinutes());NP.range;const kP=ki(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getUTCMinutes());kP.range;const BP=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qf-e.getMinutes()*Tu)},(e,t)=>{e.setTime(+e+t*Hf)},(e,t)=>(t-e)/Hf,e=>e.getHours());BP.range;const TP=ki(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hf)},(e,t)=>(t-e)/Hf,e=>e.getUTCHours());TP.range;const x2=ki(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tu)/ch,e=>e.getDate()-1);x2.range;const I4=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ch,e=>e.getUTCDate()-1);I4.range;const Mse=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ch,e=>Math.floor(e/ch));Mse.range;function vg(e){return ki(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Tu)/SP)}const F4=vg(0),h5=vg(1),b$e=vg(2),y$e=vg(3),Mx=vg(4),w$e=vg(5),E$e=vg(6);F4.range;h5.range;b$e.range;y$e.range;Mx.range;w$e.range;E$e.range;function xg(e){return ki(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/SP)}const O4=xg(0),m5=xg(1),C$e=xg(2),_$e=xg(3),Ux=xg(4),S$e=xg(5),N$e=xg(6);O4.range;m5.range;C$e.range;_$e.range;Ux.range;S$e.range;N$e.range;const jP=ki(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());jP.range;const IP=ki(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());IP.range;const uh=ki(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());uh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});uh.range;const dh=ki(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());dh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});dh.range;function Use(e,t,r,n,a,s){const i=[[pp,1,Qf],[pp,5,5*Qf],[pp,15,15*Qf],[pp,30,30*Qf],[s,1,Tu],[s,5,5*Tu],[s,15,15*Tu],[s,30,30*Tu],[a,1,Hf],[a,3,3*Hf],[a,6,6*Hf],[a,12,12*Hf],[n,1,ch],[n,2,2*ch],[r,1,SP],[t,1,g$],[t,3,3*g$],[e,1,v3]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function l(u,d,f){const h=Math.abs(d-u)/f,p=gP(([,,b])=>b).right(i,h);if(p===i.length)return e.every(y6(u/v3,d/v3,f));if(p===0)return f5.every(Math.max(y6(u,d,f),1));const[g,v]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(v)}return[o,l]}const[k$e,B$e]=Use(dh,IP,O4,Mse,TP,kP),[T$e,j$e]=Use(uh,jP,F4,x2,BP,NP);function x3(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function b3(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function I$e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Ob(a),d=Db(a),f=Ob(s),h=Db(s),p=Ob(i),g=Db(i),v=Ob(o),b=Db(o),y=Ob(l),C=Db(l),S={a:Z,A:H,b:z,B:q,c:null,d:E$,e:E$,f:tGe,g:dGe,G:fGe,H:J$e,I:Z$e,j:eGe,L:Qse,m:rGe,M:nGe,p:re,q:P,Q:S$,s:N$,S:aGe,u:sGe,U:iGe,V:oGe,w:lGe,W:cGe,x:null,X:null,y:uGe,Y:AGe,Z:hGe,"%":_$},I={a:K,A:Y,b:te,B:ie,c:null,d:C$,e:C$,f:vGe,g:kGe,G:TGe,H:mGe,I:pGe,j:gGe,L:Vse,m:xGe,M:bGe,p:Ae,q:oe,Q:S$,s:N$,S:yGe,u:wGe,U:EGe,V:CGe,w:_Ge,W:SGe,x:null,X:null,y:NGe,Y:BGe,Z:jGe,"%":_$},N={a:U,A:D,b:k,B:L,c:R,d:y$,e:y$,f:q$e,g:b$,G:x$,H:w$,I:w$,j:z$e,L:K$e,m:V$e,M:$$e,p:F,q:H$e,Q:X$e,s:Y$e,S:G$e,u:P$e,U:L$e,V:M$e,w:R$e,W:U$e,x:X,X:V,y:b$,Y:x$,Z:Q$e,"%":W$e};S.x=B(r,S),S.X=B(n,S),S.c=B(t,S),I.x=B(r,I),I.X=B(n,I),I.c=B(t,I);function B(ce,pe){return function(Ie){var ne=[],Se=-1,De=0,_e=ce.length,he,je,He;for(Ie instanceof Date||(Ie=new Date(+Ie));++Se<_e;)ce.charCodeAt(Se)===37&&(ne.push(ce.slice(De,Se)),(je=v$[he=ce.charAt(++Se)])!=null?he=ce.charAt(++Se):je=he==="e"?" ":"0",(He=pe[he])&&(he=He(Ie,je)),ne.push(he),De=Se+1);return ne.push(ce.slice(De,Se)),ne.join("")}}function w(ce,pe){return function(Ie){var ne=Fb(1900,void 0,1),Se=_(ne,ce,Ie+="",0),De,_e;if(Se!=Ie.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(pe&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(De=b3(Fb(ne.y,0,1)),_e=De.getUTCDay(),De=_e>4||_e===0?m5.ceil(De):m5(De),De=I4.offset(De,(ne.V-1)*7),ne.y=De.getUTCFullYear(),ne.m=De.getUTCMonth(),ne.d=De.getUTCDate()+(ne.w+6)%7):(De=x3(Fb(ne.y,0,1)),_e=De.getDay(),De=_e>4||_e===0?h5.ceil(De):h5(De),De=x2.offset(De,(ne.V-1)*7),ne.y=De.getFullYear(),ne.m=De.getMonth(),ne.d=De.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),_e="Z"in ne?b3(Fb(ne.y,0,1)).getUTCDay():x3(Fb(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(_e+5)%7:ne.w+ne.U*7-(_e+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,b3(ne)):x3(ne)}}function _(ce,pe,Ie,ne){for(var Se=0,De=pe.length,_e=Ie.length,he,je;Se<De;){if(ne>=_e)return-1;if(he=pe.charCodeAt(Se++),he===37){if(he=pe.charAt(Se++),je=N[he in v$?pe.charAt(Se++):he],!je||(ne=je(ce,Ie,ne))<0)return-1}else if(he!=Ie.charCodeAt(ne++))return-1}return ne}function F(ce,pe,Ie){var ne=u.exec(pe.slice(Ie));return ne?(ce.p=d.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function U(ce,pe,Ie){var ne=p.exec(pe.slice(Ie));return ne?(ce.w=g.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function D(ce,pe,Ie){var ne=f.exec(pe.slice(Ie));return ne?(ce.w=h.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function k(ce,pe,Ie){var ne=y.exec(pe.slice(Ie));return ne?(ce.m=C.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function L(ce,pe,Ie){var ne=v.exec(pe.slice(Ie));return ne?(ce.m=b.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function R(ce,pe,Ie){return _(ce,t,pe,Ie)}function X(ce,pe,Ie){return _(ce,r,pe,Ie)}function V(ce,pe,Ie){return _(ce,n,pe,Ie)}function Z(ce){return i[ce.getDay()]}function H(ce){return s[ce.getDay()]}function z(ce){return l[ce.getMonth()]}function q(ce){return o[ce.getMonth()]}function re(ce){return a[+(ce.getHours()>=12)]}function P(ce){return 1+~~(ce.getMonth()/3)}function K(ce){return i[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function te(ce){return l[ce.getUTCMonth()]}function ie(ce){return o[ce.getUTCMonth()]}function Ae(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var pe=B(ce+="",S);return pe.toString=function(){return ce},pe},parse:function(ce){var pe=w(ce+="",!1);return pe.toString=function(){return ce},pe},utcFormat:function(ce){var pe=B(ce+="",I);return pe.toString=function(){return ce},pe},utcParse:function(ce){var pe=w(ce+="",!0);return pe.toString=function(){return ce},pe}}}var v$={"-":"",_:" ",0:"0"},eo=/^\s*\d+/,F$e=/^%/,O$e=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function D$e(e){return e.replace(O$e,"\\$&")}function Ob(e){return new RegExp("^(?:"+e.map(D$e).join("|")+")","i")}function Db(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function R$e(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function P$e(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function L$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function M$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function U$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function x$(e,t,r){var n=eo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function b$(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Q$e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function H$e(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function V$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function y$(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function z$e(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function w$(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function $$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function G$e(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function K$e(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function q$e(e,t,r){var n=eo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function W$e(e,t,r){var n=F$e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function X$e(e,t,r){var n=eo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Y$e(e,t,r){var n=eo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function E$(e,t){return Jn(e.getDate(),t,2)}function J$e(e,t){return Jn(e.getHours(),t,2)}function Z$e(e,t){return Jn(e.getHours()%12||12,t,2)}function eGe(e,t){return Jn(1+x2.count(uh(e),e),t,3)}function Qse(e,t){return Jn(e.getMilliseconds(),t,3)}function tGe(e,t){return Qse(e,t)+"000"}function rGe(e,t){return Jn(e.getMonth()+1,t,2)}function nGe(e,t){return Jn(e.getMinutes(),t,2)}function aGe(e,t){return Jn(e.getSeconds(),t,2)}function sGe(e){var t=e.getDay();return t===0?7:t}function iGe(e,t){return Jn(F4.count(uh(e)-1,e),t,2)}function Hse(e){var t=e.getDay();return t>=4||t===0?Mx(e):Mx.ceil(e)}function oGe(e,t){return e=Hse(e),Jn(Mx.count(uh(e),e)+(uh(e).getDay()===4),t,2)}function lGe(e){return e.getDay()}function cGe(e,t){return Jn(h5.count(uh(e)-1,e),t,2)}function uGe(e,t){return Jn(e.getFullYear()%100,t,2)}function dGe(e,t){return e=Hse(e),Jn(e.getFullYear()%100,t,2)}function AGe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function fGe(e,t){var r=e.getDay();return e=r>=4||r===0?Mx(e):Mx.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function hGe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function C$(e,t){return Jn(e.getUTCDate(),t,2)}function mGe(e,t){return Jn(e.getUTCHours(),t,2)}function pGe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function gGe(e,t){return Jn(1+I4.count(dh(e),e),t,3)}function Vse(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function vGe(e,t){return Vse(e,t)+"000"}function xGe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function bGe(e,t){return Jn(e.getUTCMinutes(),t,2)}function yGe(e,t){return Jn(e.getUTCSeconds(),t,2)}function wGe(e){var t=e.getUTCDay();return t===0?7:t}function EGe(e,t){return Jn(O4.count(dh(e)-1,e),t,2)}function zse(e){var t=e.getUTCDay();return t>=4||t===0?Ux(e):Ux.ceil(e)}function CGe(e,t){return e=zse(e),Jn(Ux.count(dh(e),e)+(dh(e).getUTCDay()===4),t,2)}function _Ge(e){return e.getUTCDay()}function SGe(e,t){return Jn(m5.count(dh(e)-1,e),t,2)}function NGe(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function kGe(e,t){return e=zse(e),Jn(e.getUTCFullYear()%100,t,2)}function BGe(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function TGe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ux(e):Ux.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function jGe(){return"+0000"}function _$(){return"%"}function S$(e){return+e}function N$(e){return Math.floor(+e/1e3)}var xv,$se,Gse;IGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function IGe(e){return xv=I$e(e),$se=xv.format,xv.parse,Gse=xv.utcFormat,xv.utcParse,xv}function FGe(e){return new Date(e)}function OGe(e){return e instanceof Date?+e:+new Date(+e)}function FP(e,t,r,n,a,s,i,o,l,u){var d=yP(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),C=u("%b %d"),S=u("%B"),I=u("%Y");function N(B){return(l(B)<B?p:o(B)<B?g:i(B)<B?v:s(B)<B?b:n(B)<B?a(B)<B?y:C:r(B)<B?S:I)(B)}return d.invert=function(B){return new Date(f(B))},d.domain=function(B){return arguments.length?h(Array.from(B,OGe)):h().map(FGe)},d.ticks=function(B){var w=h();return e(w[0],w[w.length-1],B??10)},d.tickFormat=function(B,w){return w==null?N:u(w)},d.nice=function(B){var w=h();return(!B||typeof B.range!="function")&&(B=t(w[0],w[w.length-1],B??10)),B?h(Ise(w,B)):d},d.copy=function(){return v2(d,FP(e,t,r,n,a,s,i,o,l,u))},d}function DGe(){return Pu.apply(FP(T$e,j$e,uh,jP,F4,x2,BP,NP,pp,$se).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RGe(){return Pu.apply(FP(k$e,B$e,dh,IP,O4,I4,TP,kP,pp,Gse).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function D4(){var e=0,t=1,r,n,a,s,i=ml,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(m1),u.rangeRound=d(ZR),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Em(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Kse(){var e=wm(D4()(ml));return e.copy=function(){return Em(e,Kse())},wh.apply(e,arguments)}function qse(){var e=wP(D4()).domain([1,10]);return e.copy=function(){return Em(e,qse()).base(e.base())},wh.apply(e,arguments)}function Wse(){var e=EP(D4());return e.copy=function(){return Em(e,Wse()).constant(e.constant())},wh.apply(e,arguments)}function OP(){var e=CP(D4());return e.copy=function(){return Em(e,OP()).exponent(e.exponent())},wh.apply(e,arguments)}function PGe(){return OP.apply(null,arguments).exponent(.5)}function Xse(){var e=[],t=ml;function r(n){if(n!=null&&!isNaN(n=+n))return t((g2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(q0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>Vze(e,s/n))},r.copy=function(){return Xse(t).domain(e)},wh.apply(r,arguments)}function R4(){var e=0,t=.5,r=1,n=1,a,s,i,o,l,u=ml,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-s)*(n*v<n*s?o:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(b){var y,C,S;return arguments.length?([y,C,S]=b,u=C7e(v,[y,C,S]),p):[u(0),u(.5),u(1)]}}return p.range=g(m1),p.rangeRound=g(ZR),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,a=v(e),s=v(t),i=v(r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Yse(){var e=wm(R4()(ml));return e.copy=function(){return Em(e,Yse())},wh.apply(e,arguments)}function Jse(){var e=wP(R4()).domain([.1,1,10]);return e.copy=function(){return Em(e,Jse()).base(e.base())},wh.apply(e,arguments)}function Zse(){var e=EP(R4());return e.copy=function(){return Em(e,Zse()).constant(e.constant())},wh.apply(e,arguments)}function DP(){var e=CP(R4());return e.copy=function(){return Em(e,DP()).exponent(e.exponent())},wh.apply(e,arguments)}function LGe(){return DP.apply(null,arguments).exponent(.5)}function MGe(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const UGe=MGe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Fa(e){return function(){return e}}const eie=Math.cos,p5=Math.sin,Rd=Math.sqrt,g5=Math.PI,P4=2*g5;function RP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new qze(t)}function PP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tie(e){this._context=e}tie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function L4(e){return new tie(e)}function rie(e){return e[0]}function nie(e){return e[1]}function aie(e,t){var r=Fa(!0),n=null,a=L4,s=null,i=RP(o);e=typeof e=="function"?e:e===void 0?rie:Fa(e),t=typeof t=="function"?t:t===void 0?nie:Fa(t);function o(l){var u,d=(l=PP(l)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,l),+t(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Fa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Fa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Fa(!!l),o):r},o.curve=function(l){return arguments.length?(a=l,n!=null&&(s=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=s=null:s=a(n=l),o):n},o}function UC(e,t,r){var n=null,a=Fa(!0),s=null,i=L4,o=null,l=RP(u);e=typeof e=="function"?e:e===void 0?rie:Fa(+e),t=typeof t=="function"?t:Fa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?nie:Fa(+r);function u(f){var h,p,g,v=(f=PP(f)).length,b,y=!1,C,S=new Array(v),I=new Array(v);for(s==null&&(o=i(C=l())),h=0;h<=v;++h){if(!(h<v&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(S[g],I[g]);o.lineEnd(),o.areaEnd()}y&&(S[h]=+e(b,h,f),I[h]=+t(b,h,f),o.point(n?+n(b,h,f):S[h],r?+r(b,h,f):I[h]))}if(C)return o=null,C+""||null}function d(){return aie().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Fa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Fa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Fa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class sie{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function QGe(e){return new sie(e,!0)}function HGe(e){return new sie(e,!1)}const LP={draw(e,t){const r=Rd(t/g5);e.moveTo(r,0),e.arc(0,0,r,0,P4)}},VGe={draw(e,t){const r=Rd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},iie=Rd(1/3),zGe=iie*2,$Ge={draw(e,t){const r=Rd(t/zGe),n=r*iie;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},GGe={draw(e,t){const r=Rd(t),n=-r/2;e.rect(n,n,r,r)}},KGe=.8908130915292852,oie=p5(g5/10)/p5(7*g5/10),qGe=p5(P4/10)*oie,WGe=-eie(P4/10)*oie,XGe={draw(e,t){const r=Rd(t*KGe),n=qGe*r,a=WGe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=P4*s/5,o=eie(i),l=p5(i);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*a,l*n+o*a)}e.closePath()}},y3=Rd(3),YGe={draw(e,t){const r=-Rd(t/(y3*3));e.moveTo(0,r*2),e.lineTo(-y3*r,-r),e.lineTo(y3*r,-r),e.closePath()}},Au=-.5,fu=Rd(3)/2,S6=1/Rd(12),JGe=(S6/2+1)*3,ZGe={draw(e,t){const r=Rd(t/JGe),n=r/2,a=r*S6,s=n,i=r*S6+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(Au*n-fu*a,fu*n+Au*a),e.lineTo(Au*s-fu*i,fu*s+Au*i),e.lineTo(Au*o-fu*l,fu*o+Au*l),e.lineTo(Au*n+fu*a,Au*a-fu*n),e.lineTo(Au*s+fu*i,Au*i-fu*s),e.lineTo(Au*o+fu*l,Au*l-fu*o),e.closePath()}};function eKe(e,t){let r=null,n=RP(a);e=typeof e=="function"?e:Fa(e||LP),t=typeof t=="function"?t:Fa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Fa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function v5(){}function x5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function lie(e){this._context=e}lie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:x5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:x5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tKe(e){return new lie(e)}function cie(e){this._context=e}cie.prototype={areaStart:v5,areaEnd:v5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:x5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rKe(e){return new cie(e)}function uie(e){this._context=e}uie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:x5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nKe(e){return new uie(e)}function die(e){this._context=e}die.prototype={areaStart:v5,areaEnd:v5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function aKe(e){return new die(e)}function k$(e){return e<0?-1:1}function B$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(k$(s)+k$(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function T$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function w3(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function b5(e){this._context=e}b5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:w3(this,this._t0,T$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,w3(this,T$(this,r=B$(this,e,t)),r);break;default:w3(this,this._t0,r=B$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Aie(e){this._context=new fie(e)}(Aie.prototype=Object.create(b5.prototype)).point=function(e,t){b5.prototype.point.call(this,t,e)};function fie(e){this._context=e}fie.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function sKe(e){return new b5(e)}function iKe(e){return new Aie(e)}function hie(e){this._context=e}hie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=j$(e),a=j$(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j$(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function oKe(e){return new hie(e)}function M4(e,t){this._context=e,this._t=t}M4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function lKe(e){return new M4(e,.5)}function cKe(e){return new M4(e,0)}function uKe(e){return new M4(e,1)}function Qx(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function N6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function dKe(e,t){return e[t]}function AKe(e){const t=[];return t.key=e,t}function fKe(){var e=Fa([]),t=N6,r=Qx,n=dKe;function a(s){var i=Array.from(e.apply(this,arguments),AKe),o,l=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=PP(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Fa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?N6:typeof s=="function"?s:Fa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Qx,a):r},a}function hKe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Qx(e,t)}}function mKe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Qx(e,t)}}function pKe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var v=e[t[g]],b=v[n][1]||0,y=v[n-1][1]||0;p+=b-y}l+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,Qx(e,t)}}var gKe={value:function(){}};function mie(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new O_(r)}function O_(e){this._=e}function vKe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}O_.prototype=mie.prototype={constructor:O_,on:function(e,t){var r=this._,n=vKe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=xKe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=I$(r[a],e.name,t);else if(t==null)for(a in r)r[a]=I$(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new O_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function xKe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function I$(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=gKe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const bKe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:mie},Symbol.toStringTag,{value:"Module"})),yKe=dAe(bKe);var E3,F$;function wKe(){if(F$)return E3;F$=1;const e=yKe.dispatch,t=Math.PI/180,r={archimedean:v,rectangular:b},n=64,a=2048;E3=function(){var I=[256,256],N=s,B=i,w=l,_=o,F=o,U=u,D=d,k=v,L=[],R=1/0,X=e("word","end"),V=null,Z=Math.random,H={},z=C;H.canvas=function(P){return arguments.length?(z=S(P),H):z},H.start=function(){var P=q(z()),K=y((I[0]>>5)*I[1]),Y=null,te=L.length,ie=-1,Ae=[],oe=L.map(function(pe,Ie){return pe.text=N.call(this,pe,Ie),pe.font=B.call(this,pe,Ie),pe.style=_.call(this,pe,Ie),pe.weight=F.call(this,pe,Ie),pe.rotate=U.call(this,pe,Ie),pe.size=~~w.call(this,pe,Ie),pe.padding=D.call(this,pe,Ie),pe}).sort(function(pe,Ie){return Ie.size-pe.size});return V&&clearInterval(V),V=setInterval(ce,0),ce(),H;function ce(){for(var pe=Date.now();Date.now()-pe<R&&++ie<te&&V;){var Ie=oe[ie];Ie.x=I[0]*(Z()+.5)>>1,Ie.y=I[1]*(Z()+.5)>>1,f(P,Ie,oe,ie),Ie.hasText&&re(K,Ie,Y)&&(Ae.push(Ie),X.call("word",H,Ie),Y?p(Y,Ie):Y=[{x:Ie.x+Ie.x0,y:Ie.y+Ie.y0},{x:Ie.x+Ie.x1,y:Ie.y+Ie.y1}],Ie.x-=I[0]>>1,Ie.y-=I[1]>>1)}ie>=te&&(H.stop(),X.call("end",H,Ae,Y))}},H.stop=function(){V&&(clearInterval(V),V=null);for(const P of L)delete P.sprite;return H};function q(P){const K=P.getContext("2d",{willReadFrequently:!0});P.width=P.height=1;const Y=Math.sqrt(K.getImageData(0,0,1,1).data.length>>2);return P.width=(n<<5)/Y,P.height=a/Y,K.fillStyle=K.strokeStyle="red",{context:K,ratio:Y}}function re(P,K,Y){I[0],I[1];for(var te=K.x,ie=K.y,Ae=Math.sqrt(I[0]*I[0]+I[1]*I[1]),oe=k(I),ce=Z()<.5?1:-1,pe=-ce,Ie,ne,Se;(Ie=oe(pe+=ce))&&(ne=~~Ie[0],Se=~~Ie[1],!(Math.min(Math.abs(ne),Math.abs(Se))>=Ae));)if(K.x=te+ne,K.y=ie+Se,!(K.x+K.x0<0||K.y+K.y0<0||K.x+K.x1>I[0]||K.y+K.y1>I[1])&&(!Y||g(K,Y))&&!h(K,P,I[0])){for(var De=K.sprite,_e=K.width>>5,he=I[0]>>5,je=K.x-(_e<<4),He=je&127,Xe=32-He,ye=K.y1-K.y0,Oe=(K.y+K.y0)*he+(je>>5),Pe,qe=0;qe<ye;qe++){Pe=0;for(var Ze=0;Ze<=_e;Ze++)P[Oe+Ze]|=Pe<<Xe|(Ze<_e?(Pe=De[qe*_e+Ze])>>>He:0);Oe+=he}return!0}return!1}return H.timeInterval=function(P){return arguments.length?(R=P??1/0,H):R},H.words=function(P){return arguments.length?(L=P,H):L},H.size=function(P){return arguments.length?(I=[+P[0],+P[1]],H):I},H.font=function(P){return arguments.length?(B=S(P),H):B},H.fontStyle=function(P){return arguments.length?(_=S(P),H):_},H.fontWeight=function(P){return arguments.length?(F=S(P),H):F},H.rotate=function(P){return arguments.length?(U=S(P),H):U},H.text=function(P){return arguments.length?(N=S(P),H):N},H.spiral=function(P){return arguments.length?(k=r[P]||P,H):k},H.fontSize=function(P){return arguments.length?(w=S(P),H):w},H.padding=function(P){return arguments.length?(D=S(P),H):D},H.random=function(P){return arguments.length?(Z=P,H):Z},H.on=function(){var P=X.on.apply(X,arguments);return P===X?H:P},H};function s(I){return I.text}function i(){return"serif"}function o(){return"normal"}function l(I){return Math.sqrt(I.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(I,N,B,w){if(!N.sprite){var _=I.context,F=I.ratio;_.clearRect(0,0,(n<<5)/F,a/F);var U=0,D=0,k=0,L=B.length;for(--w;++w<L;){N=B[w],_.save(),_.font=N.style+" "+N.weight+" "+~~((N.size+1)/F)+"px "+N.font;const Ie=_.measureText(N.text),ne=-Math.floor(Ie.width/2);let Se=(Ie.width+1)*F,De=N.size<<1;if(N.rotate){var R=Math.sin(N.rotate*t),X=Math.cos(N.rotate*t),V=Se*X,Z=Se*R,H=De*X,z=De*R;Se=Math.max(Math.abs(V+z),Math.abs(V-z))+31>>5<<5,De=~~Math.max(Math.abs(Z+H),Math.abs(Z-H))}else Se=Se+31>>5<<5;if(De>k&&(k=De),U+Se>=n<<5&&(U=0,D+=k,k=0),D+De>=a)break;_.translate((U+(Se>>1))/F,(D+(De>>1))/F),N.rotate&&_.rotate(N.rotate*t),_.fillText(N.text,ne,0),N.padding&&(_.lineWidth=2*N.padding,_.strokeText(N.text,ne,0)),_.restore(),N.width=Se,N.height=De,N.xoff=U,N.yoff=D,N.x1=Se>>1,N.y1=De>>1,N.x0=-N.x1,N.y0=-N.y1,N.hasText=!0,U+=Se}for(var q=_.getImageData(0,0,(n<<5)/F,a/F).data,re=[];--w>=0;)if(N=B[w],!!N.hasText){for(var P=N.width,K=P>>5,Y=N.y1-N.y0,te=0;te<Y*K;te++)re[te]=0;if(U=N.xoff,U==null)return;D=N.yoff;for(var ie=0,Ae=-1,oe=0;oe<Y;oe++){for(var te=0;te<P;te++){var ce=K*oe+(te>>5),pe=q[(D+oe)*(n<<5)+(U+te)<<2]?1<<31-te%32:0;re[ce]|=pe,ie|=pe}ie?Ae=oe:(N.y0++,Y--,oe--,D++)}N.y1=N.y0+Ae,N.sprite=re.slice(0,(N.y1-N.y0)*K)}}}function h(I,N,B){B>>=5;for(var w=I.sprite,_=I.width>>5,F=I.x-(_<<4),U=F&127,D=32-U,k=I.y1-I.y0,L=(I.y+I.y0)*B+(F>>5),R,X=0;X<k;X++){R=0;for(var V=0;V<=_;V++)if((R<<D|(V<_?(R=w[X*_+V])>>>U:0))&N[L+V])return!0;L+=B}return!1}function p(I,N){var B=I[0],w=I[1];N.x+N.x0<B.x&&(B.x=N.x+N.x0),N.y+N.y0<B.y&&(B.y=N.y+N.y0),N.x+N.x1>w.x&&(w.x=N.x+N.x1),N.y+N.y1>w.y&&(w.y=N.y+N.y1)}function g(I,N){return I.x+I.x1>N[0].x&&I.x+I.x0<N[1].x&&I.y+I.y1>N[0].y&&I.y+I.y0<N[1].y}function v(I){var N=I[0]/I[1];return function(B){return[N*(B*=.1)*Math.cos(B),B*Math.sin(B)]}}function b(I){var N=4,B=N*I[0]/I[1],w=0,_=0;return function(F){var U=F<0?-1:1;switch(Math.sqrt(1+4*U*F)-U&3){case 0:w+=B;break;case 1:_+=N;break;case 2:w-=B;break;default:_-=N;break}return[w,_]}}function y(I){for(var N=[],B=-1;++B<I;)N[B]=0;return N}function C(){return document.createElement("canvas")}function S(I){return typeof I=="function"?I:function(){return I}}return E3}var EKe=wKe();const CKe=yl(EKe),_Ke=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),SKe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),NKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),kKe=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null),o=T.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return T.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let l;const u=d=>{r(d),a(!1),i(null)};if(o)l=Tze(u);else{const d=e.email||e.id||"";l=jze(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},BKe=({plan:e,onClose:t})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(SKe,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),O$=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],TKe=["1 Medio","2 Medio","3 Medio","4 Medio"],jKe=({words:e})=>{const t=T.useRef(null);return T.useEffect(()=>{if(!e.length||!t.current)return;const r=Cu(t.current);r.selectAll("*").remove();const n=CKe().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>T4(UGe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),c.jsx("svg",{ref:t})},IKe=({planificaciones:e})=>{const[t,r]=T.useState("todos"),[n,a]=T.useState("todos"),s=T.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=T.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=T.useMemo(()=>{const d=O$.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,v)=>{d[g]!==void 0&&(d[g]+=O$.length-v)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),l=T.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,v;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((v=p.reflexionUnidad)==null?void 0:v.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),TKe.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(jKe,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},FKe=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=kKe(e),[s,i]=T.useState("seguimiento"),[o,l]=T.useState("1"),[u,d]=T.useState(null),[f,h]=T.useState(null),p=T.useMemo(()=>{const b={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(r)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(NKe,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const v=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>l(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(S=>S.asignatura===b);if(y.length===0)return null;const C=u===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(C?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${C?"rotate-180":""}`,children:c.jsx(_Ke,{})})]}),C&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:y.map(S=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>h(S),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:S.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",S.autor||"N/A"]})]})},S.id))})})]},b)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&v(),s==="analisis"&&c.jsx(IKe,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&c.jsx(BKe,{plan:f,onClose:()=>h(null)})]})},U4="analisisTaxonomicos",OKe=async()=>{try{const e=tr(Lt(tn,U4),Gr("uploadDate","desc"));return(await Za(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},DKe=async e=>{if(!e)return[];try{const t=tr(Lt(tn,U4),_n("userId","==",e),Gr("uploadDate","desc"));return(await Za(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},RKe=async e=>{try{return{id:(await Zn(Lt(tn,U4),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},PKe=async e=>{try{const t=mr(tn,U4,e);await Is(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},D$=["1 Medio","2 Medio","3 Medio","4 Medio"],jf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],bv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},LKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),R$=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState(null),[u,d]=T.useState(""),[f,h]=T.useState(!1),[p,g]=T.useState(null),[v,b]=T.useState(null),[y,C]=T.useState(""),[S,I]=T.useState(""),[N,B]=T.useState(""),[w,_]=T.useState(""),[F,U]=T.useState("resumen"),D=T.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const z=e.profile==="SUBDIRECCION"?await OKe():await DKe(e.id);r(z),i(null)}catch(z){console.error("Error al cargar anlisis:",z),i("No se pudieron cargar los anlisis.")}finally{a(!1)}}},[e]);T.useEffect(()=>{D()},[D]);const k=async z=>{var re;const q=(re=z.target.files)==null?void 0:re[0];if(q){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(q.type)){i("Por favor, suba un archivo PDF o DOCX vlido.");return}g(q),d(q.name),i(null);const K=new FileReader;K.onloadend=()=>{var te;const Y=(te=K.result)==null?void 0:te.split(",")[1];if(!Y){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),b(null);return}b({mimeType:q.type,data:Y})},K.onerror=()=>i("Error al leer el archivo."),K.readAsDataURL(q)}},L=async()=>{if(!u.trim()||!v){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!S){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const z=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido.
        `,q={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:jf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:jf.reduce((re,P)=>({...re,[P]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{sm("Anlisis Taxonmico",e);const re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new cs(re).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:q}}),Y={inlineData:{mimeType:v.mimeType,data:v.data}},ie=(await K.generateContent([z,Y])).response.text();let Ae;try{Ae=JSON.parse(ie)}catch(pe){throw console.error("Error al parsear JSON:",pe),console.error("Respuesta recibida (no es JSON vlido):",ie),new Error("La respuesta de la IA no tuvo un formato vlido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:Ae.analysisResults,summary:Ae.summary,nivel:y,asignatura:S},ce=await RKe(oe);await D(),l(ce),d(""),g(null),b(null),C(""),I("")}catch(re){console.error(re);const P=re instanceof Error?re.message:"Hubo un error al analizar el documento.";i(P)}finally{h(!1)}},R=async z=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await PKe(z),await D(),(o==null?void 0:o.id)===z&&l(null)}catch{i("No se pudo eliminar el anlisis.")}},X=T.useMemo(()=>t.filter(z=>{const q=N?z.nivel===N:!0,re=w?z.asignatura===w:!0;return q&&re}),[t,N,w]),V=T.useMemo(()=>{const z={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};X.forEach(re=>{jf.forEach(P=>{var Y;const K=((Y=re.summary)==null?void 0:Y[P])||0;z[P]+=K})});const q=Object.values(z).reduce((re,P)=>re+P,0);return{acc:z,total:q}},[X]),Z=T.useMemo(()=>{const z=new Map;X.forEach(re=>{const P=re.asignatura||"Sin asignatura";z.has(P)||z.set(P,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const K=z.get(P);jf.forEach(Y=>{var te;K[Y]+=((te=re.summary)==null?void 0:te[Y])||0})});const q=Array.from(z.entries()).map(([re,P])=>({asignatura:re,counts:P,total:Object.values(P).reduce((K,Y)=>K+Y,0)}));return q.sort((re,P)=>P.total-re.total),q},[X]),H=T.useMemo(()=>o?Object.values(o.summary).reduce((z,q)=>z+(q||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:y,onChange:z=>C(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),D$.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:S,onChange:z=>I(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(z=>c.jsx("option",{value:z,children:z},z))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:z=>d(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:L,disabled:f||!v,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?c.jsx(LKe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),n?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(z=>c.jsxs("button",{onClick:()=>l(z),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===z.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:z.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(z.uploadDate).toLocaleString("es-CL")}),(z.nivel||z.asignatura)&&c.jsxs("p",{className:"text-xs text-slate-500",children:[z.nivel||"Nivel s/i","  ",z.asignatura||"Asignatura s/i"]})]},z.id))})]})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),c.jsxs("select",{value:N,onChange:z=>B(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos"}),D$.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),c.jsxs("select",{value:w,onChange:z=>_(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas"}),qi.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsx("button",{type:"button",onClick:()=>{B(""),_("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>U("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${F==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),c.jsx("button",{onClick:()=>U("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${F==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),F==="resumen"?c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," anlisis considerados"]})]}),c.jsx("div",{className:"space-y-3",children:jf.map(z=>{const q=V.acc[z],re=V.total>0?q/V.total*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",re.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${bv[z]} h-4 rounded-full`,style:{width:`${re}%`}})})]},z)})}),c.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:jf.map(z=>c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[c.jsx("span",{className:"text-sm",children:z}),c.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${bv[z]}`,children:V.acc[z]})]},z))})]}):c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," asignaturas comparadas"]})]}),Z.length===0?c.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):c.jsx("div",{className:"space-y-5",children:Z.map(z=>{const q=z.total||1;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:z.asignatura}),c.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[z.total," tems"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:jf.map(re=>{const P=z.counts[re]||0,K=P/q*100;return c.jsx("div",{className:`${bv[re]} h-5`,style:{width:`${K}%`},title:`${re}: ${P} (${K.toFixed(0)}%)`},re)})}),c.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:jf.map(re=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:`inline-block w-3 h-3 rounded ${bv[re]}`}),c.jsx("span",{children:re})]},re))})]},z.asignatura)})})]})]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&c.jsxs(c.Fragment,{children:[" "," ",o.nivel||"Nivel s/i","  ",o.asignatura||"Asignatura s/i"]})]})]}),c.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",H," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:jf.map(z=>{const q=o.summary[z]||0,re=H>0?q/H*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",re.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${bv[z]} h-4 rounded-full`,style:{width:`${re}%`}})})]},z)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((z,q)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:z.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${bv[z.habilidadBloom]}`,children:z.habilidadBloom})})]},q))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},y5="empresas_practicas",MKe="usuarios",MP="rutas_supervision",UP=e=>{const t=e.data();return{id:e.id,...t}};async function UKe(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificacin:",n),null}}const QKe=e=>{const t=tr(Lt(_t,y5),Gr("nombre","asc"));return xr(t,r=>{const n=r.docs.map(a=>UP(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},HKe=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await UKe(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=mr(_t,y5,n);return await Ji(s,a,{merge:!0}),n}else return(await Zn(Lt(_t,y5),{...r,createdAt:am()})).id},VKe=async e=>{const t=mr(_t,y5,e);await Is(t)},zKe=e=>{const t=tr(Lt(_t,MKe),_n("profile","==","PROFESORADO"),Gr("nombreCompleto","asc"));return xr(t,r=>{const n=r.docs.map(a=>UP(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},$Ke=async e=>(await Zn(Lt(_t,MP),{...e,createdAt:am()})).id,GKe=e=>{const t=tr(Lt(_t,MP),Gr("createdAt","desc"));return xr(t,r=>{const n=r.docs.map(a=>UP(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},KKe=async e=>{const t=mr(_t,MP,e);await Is(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fp=function(){return Fp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Fp.apply(this,arguments)};function qKe(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{l(n.next(u))}catch(d){s(d)}}function o(u){try{l(n.throw(u))}catch(d){s(d)}}function l(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}l((n=n.apply(e,[])).next())})}function WKe(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Or.apply(this,arguments)}function Op(e){return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function pie(e){var t=function(r,n){if(Op(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Op(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Op(t)==="symbol"?t:String(t)}function Qv(e,t,r){return(t=pie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){Qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pie(n.key),n)}}function k6(e,t){return k6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},k6(e,t)}function w5(e){return w5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w5(e)}function XKe(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function YKe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=w5(e);if(t){var a=w5(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return XKe(this,r)}}function B6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gie(e,t){if(e){if(typeof e=="string")return B6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B6(e,t):void 0}}function QP(e){return function(t){if(Array.isArray(t))return B6(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||gie(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var JKe=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),hu="-ms-",M$="-moz-",ea="-webkit-",HP="decl",vie="@keyframes",ZKe=Math.abs,Q4=String.fromCharCode,eqe=Object.assign;function xie(e){return e.trim()}function oa(e,t,r){return e.replace(t,r)}function T6(e,t){return e.indexOf(t)}function Ao(e,t){return 0|e.charCodeAt(t)}function Bw(e,t,r){return e.slice(t,r)}function wA(e){return e.length}function VP(e){return e.length}function QC(e,t){return t.push(e),e}var H4=1,Hx=1,bie=0,Zl=0,Ai=0,p1="";function V4(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:H4,column:Hx,length:i,return:""}}function Rb(e,t){return eqe(V4("",null,null,"",null,null,0),e,{length:-e.length},t)}function Fc(){return Ai=Zl<bie?Ao(p1,Zl++):0,Hx++,Ai===10&&(Hx=1,H4++),Ai}function QA(){return Ao(p1,Zl)}function D_(){return Zl}function b2(e,t){return Bw(p1,e,t)}function Tw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yie(e){return H4=Hx=1,bie=wA(p1=e),Zl=0,[]}function wie(e){return p1="",e}function R_(e){return xie(b2(Zl-1,j6(e===91?e+2:e===40?e+1:e)))}function tqe(e){for(;(Ai=QA())&&Ai<33;)Fc();return Tw(e)>2||Tw(Ai)>3?"":" "}function rqe(e,t){for(;--t&&Fc()&&!(Ai<48||Ai>102||Ai>57&&Ai<65||Ai>70&&Ai<97););return b2(e,D_()+(t<6&&QA()==32&&Fc()==32))}function j6(e){for(;Fc();)switch(Ai){case e:return Zl;case 34:case 39:e!==34&&e!==39&&j6(Ai);break;case 40:e===41&&j6(e);break;case 92:Fc()}return Zl}function nqe(e,t){for(;Fc()&&e+Ai!==57&&(e+Ai!==84||QA()!==47););return"/*"+b2(t,Zl-1)+"*"+Q4(e===47?e:Fc())}function aqe(e){for(;!Tw(QA());)Fc();return b2(e,Zl)}function U$(e){return wie(P_("",null,null,null,[""],e=yie(e),0,[0],e))}function P_(e,t,r,n,a,s,i,o,l){for(var u=0,d=0,f=i,h=0,p=0,g=0,v=1,b=1,y=1,C=0,S="",I=a,N=s,B=n,w=S;b;)switch(g=C,C=Fc()){case 40:if(g!=108&&Ao(w,f-1)==58){T6(w+=oa(R_(C),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=R_(C);break;case 9:case 10:case 13:case 32:w+=tqe(g);break;case 92:w+=rqe(D_()-1,7);continue;case 47:switch(QA()){case 42:case 47:QC(sqe(nqe(Fc(),D_()),t,r),l);break;default:w+="/"}break;case 123*v:o[u++]=wA(w)*y;case 125*v:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+d:p>0&&wA(w)-f&&QC(p>32?H$(w+";",n,r,f-1):H$(oa(w," ","")+";",n,r,f-2),l);break;case 59:w+=";";default:if(QC(B=Q$(w,t,r,u,d,a,o,S,I=[],N=[],f),s),C===123)if(d===0)P_(w,t,B,B,I,s,f,o,N);else switch(h===99&&Ao(w,3)===110?100:h){case 100:case 109:case 115:P_(e,B,B,n&&QC(Q$(e,B,B,0,0,a,o,S,a,I=[],f),N),a,N,f,o,n?I:N);break;default:P_(w,B,B,B,[""],N,0,o,N)}}u=d=p=0,v=y=1,S=w="",f=i;break;case 58:f=1+wA(w),p=g;default:if(v<1){if(C==123)--v;else if(C==125&&v++==0&&(Ai=Zl>0?Ao(p1,--Zl):0,Hx--,Ai===10&&(Hx=1,H4--),Ai==125))continue}switch(w+=Q4(C),C*v){case 38:y=d>0?1:(w+="\f",-1);break;case 44:o[u++]=(wA(w)-1)*y,y=1;break;case 64:QA()===45&&(w+=R_(Fc())),h=QA(),d=f=wA(S=w+=aqe(D_())),C++;break;case 45:g===45&&wA(w)==2&&(v=0)}}return s}function Q$(e,t,r,n,a,s,i,o,l,u,d){for(var f=a-1,h=a===0?s:[""],p=VP(h),g=0,v=0,b=0;g<n;++g)for(var y=0,C=Bw(e,f+1,f=ZKe(v=i[g])),S=e;y<p;++y)(S=xie(v>0?h[y]+" "+C:oa(C,/&\f/g,h[y])))&&(l[b++]=S);return V4(e,t,r,a===0?"rule":o,l,u,d)}function sqe(e,t,r){return V4(e,t,r,"comm",Q4(Ai),Bw(e,2,-2),0)}function H$(e,t,r,n){return V4(e,t,r,HP,Bw(e,0,n),Bw(e,n+1,-1),n)}function Dp(e,t){for(var r="",n=VP(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function V$(e,t,r,n){switch(e.type){case"@import":case HP:return e.return=e.return||e.value;case"comm":return"";case vie:return e.return=e.value+"{"+Dp(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return wA(r=Dp(e.children,n))?e.return=e.value+"{"+r+"}":""}function z$(e){var t=VP(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function iqe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Eie(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var oqe=function(e,t,r){for(var n=0,a=0;n=a,a=QA(),n===38&&a===12&&(t[r]=1),!Tw(a);)Fc();return b2(e,Zl)},lqe=function(e,t){return wie(function(r,n){var a=-1,s=44;do switch(Tw(s)){case 0:s===38&&QA()===12&&(n[a]=1),r[a]+=oqe(Zl-1,n,a);break;case 2:r[a]+=R_(s);break;case 4:if(s===44){r[++a]=QA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Q4(s)}while(s=Fc());return r}(yie(e),t))},$$=new WeakMap,cqe=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||$$.get(r))&&!n){$$.set(e,!0);for(var a=[],s=lqe(t,a),i=r.props,o=0,l=0;o<s.length;o++)for(var u=0;u<i.length;u++,l++)e.props[l]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},uqe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Cie(e,t){switch(function(r,n){return 45^Ao(r,0)?(((n<<2^Ao(r,0))<<2^Ao(r,1))<<2^Ao(r,2))<<2^Ao(r,3):0}(e,t)){case 5103:return ea+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ea+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ea+e+M$+e+hu+e+e;case 6828:case 4268:return ea+e+hu+e+e;case 6165:return ea+e+hu+"flex-"+e+e;case 5187:return ea+e+oa(e,/(\w+).+(:[^]+)/,ea+"box-$1$2-ms-flex-$1$2")+e;case 5443:return ea+e+hu+"flex-item-"+oa(e,/flex-|-self/,"")+e;case 4675:return ea+e+hu+"flex-line-pack"+oa(e,/align-content|flex-|-self/,"")+e;case 5548:return ea+e+hu+oa(e,"shrink","negative")+e;case 5292:return ea+e+hu+oa(e,"basis","preferred-size")+e;case 6060:return ea+"box-"+oa(e,"-grow","")+ea+e+hu+oa(e,"grow","positive")+e;case 4554:return ea+oa(e,/([^-])(transform)/g,"$1"+ea+"$2")+e;case 6187:return oa(oa(oa(e,/(zoom-|grab)/,ea+"$1"),/(image-set)/,ea+"$1"),e,"")+e;case 5495:case 3959:return oa(e,/(image-set\([^]*)/,ea+"$1$`$1");case 4968:return oa(oa(e,/(.+:)(flex-)?(.*)/,ea+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+ea+e+e;case 4095:case 3583:case 4068:case 2532:return oa(e,/(.+)-inline(.+)/,ea+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wA(e)-1-t>6)switch(Ao(e,t+1)){case 109:if(Ao(e,t+4)!==45)break;case 102:return oa(e,/(.+:)(.+)-([^]+)/,"$1"+ea+"$2-$3$1"+M$+(Ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~T6(e,"stretch")?Cie(oa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ao(e,t+1)!==115)break;case 6444:switch(Ao(e,wA(e)-3-(~T6(e,"!important")&&10))){case 107:return oa(e,":",":"+ea)+e;case 101:return oa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ea+(Ao(e,14)===45?"inline-":"")+"box$3$1"+ea+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Ao(e,t+11)){case 114:return ea+e+hu+oa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ea+e+hu+oa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ea+e+hu+oa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ea+e+hu+e+e}return e}var G$,HC,L_=typeof document<"u",dqe=L_?void 0:(G$=function(){return Eie(function(){var e={};return function(t){return e[t]}})},HC=new WeakMap,function(e){if(HC.has(e))return HC.get(e);var t=G$(e);return HC.set(e,t),t}),Aqe=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case HP:e.return=Cie(e.value,e.length);break;case vie:return Dp([Rb(e,{value:oa(e.value,"@","@"+ea)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dp([Rb(e,{props:[oa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Dp([Rb(e,{props:[oa(a,/:(plac\w+)/,":"+ea+"input-$1")]}),Rb(e,{props:[oa(a,/:(plac\w+)/,":-moz-$1")]}),Rb(e,{props:[oa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],_ie=function(e){var t=e.key;if(L_&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Aqe,a,s,i={},o=[];L_&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var C=y.getAttribute("data-emotion").split(" "),S=1;S<C.length;S++)i[C[S]]=!0;o.push(y)}));var l=[cqe,uqe];if(L_){var u,d=[V$,iqe(function(y){u.insert(y)})],f=z$(l.concat(n,d));s=function(y,C,S,I){u=S,Dp(U$(y?y+"{"+C.styles+"}":C.styles),f),I&&(b.inserted[C.name]=!0)}}else{var h=[V$],p=z$(l.concat(n,h)),g=dqe(n)(t),v=function(y,C){var S=C.name;return g[S]===void 0&&(g[S]=Dp(U$(y?y+"{"+C.styles+"}":C.styles),p)),g[S]};s=function(y,C,S,I){var N=C.name,B=v(y,C);return b.compat===void 0?(I&&(b.inserted[N]=!0),B):I?void(b.inserted[N]=B):B}}var b={key:t,sheet:new JKe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function ca(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var to=typeof Symbol=="function"&&Symbol.for,I6=to?Symbol.for("react.element"):60103,F6=to?Symbol.for("react.portal"):60106,M_=to?Symbol.for("react.fragment"):60107,U_=to?Symbol.for("react.strict_mode"):60108,Q_=to?Symbol.for("react.profiler"):60114,H_=to?Symbol.for("react.provider"):60109,V_=to?Symbol.for("react.context"):60110,O6=to?Symbol.for("react.async_mode"):60111,E5=to?Symbol.for("react.concurrent_mode"):60111,z_=to?Symbol.for("react.forward_ref"):60112,$_=to?Symbol.for("react.suspense"):60113,fqe=to?Symbol.for("react.suspense_list"):60120,G_=to?Symbol.for("react.memo"):60115,K_=to?Symbol.for("react.lazy"):60116,hqe=to?Symbol.for("react.block"):60121,mqe=to?Symbol.for("react.fundamental"):60117,pqe=to?Symbol.for("react.responder"):60118,gqe=to?Symbol.for("react.scope"):60119;function yc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case I6:switch(e=e.type){case O6:case E5:case M_:case Q_:case U_:case $_:return e;default:switch(e=e&&e.$$typeof){case V_:case z_:case K_:case G_:case H_:return e;default:return t}}case F6:return t}}}function K$(e){return yc(e)===E5}var vqe={AsyncMode:O6,ConcurrentMode:E5,ContextConsumer:V_,ContextProvider:H_,Element:I6,ForwardRef:z_,Fragment:M_,Lazy:K_,Memo:G_,Portal:F6,Profiler:Q_,StrictMode:U_,Suspense:$_,isAsyncMode:function(e){return K$(e)||yc(e)===O6},isConcurrentMode:K$,isContextConsumer:function(e){return yc(e)===V_},isContextProvider:function(e){return yc(e)===H_},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===I6},isForwardRef:function(e){return yc(e)===z_},isFragment:function(e){return yc(e)===M_},isLazy:function(e){return yc(e)===K_},isMemo:function(e){return yc(e)===G_},isPortal:function(e){return yc(e)===F6},isProfiler:function(e){return yc(e)===Q_},isStrictMode:function(e){return yc(e)===U_},isSuspense:function(e){return yc(e)===$_},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===M_||e===E5||e===Q_||e===U_||e===$_||e===fqe||typeof e=="object"&&e!==null&&(e.$$typeof===K_||e.$$typeof===G_||e.$$typeof===H_||e.$$typeof===V_||e.$$typeof===z_||e.$$typeof===mqe||e.$$typeof===pqe||e.$$typeof===gqe||e.$$typeof===hqe)},typeOf:yc};ca(function(e,t){});var q$=ca(function(e){e.exports=vqe}),W$={};W$[q$.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},W$[q$.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var D6=typeof document<"u";function Sie(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var zP=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||D6===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},$P=function(e,t,r){zP(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);D6||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!D6&&a.length!==0)return a}},xqe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bqe=/[A-Z]|^ms/g,yqe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Nie=function(e){return e.charCodeAt(1)===45},X$=function(e){return e!=null&&typeof e!="boolean"},C3=Eie(function(e){return Nie(e)?e:e.replace(bqe,"-$&").toLowerCase()}),Y$=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(yqe,function(r,n,a){return EA={name:n,styles:a,next:EA},n})}return xqe[e]===1||Nie(e)||typeof t!="number"||t===0?t:t+"px"};function Py(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return EA={name:r.name,styles:r.styles,next:EA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)EA={name:n.name,styles:n.styles,next:EA},n=n.next;var a=r.styles+";";return a}return function(l,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=Py(l,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":X$(g)&&(f+=C3(p)+":"+Y$(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var v=Py(l,u,g);switch(p){case"animation":case"animationName":f+=C3(p)+":"+v+";";break;default:f+=p+"{"+v+"}"}}else for(var b=0;b<g.length;b++)X$(g[b])&&(f+=C3(p)+":"+Y$(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=EA,i=r(e);return EA=s,Py(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var EA,J$=/label:\s*([^\s;\n{]+)\s*(;|$)/g,z4=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";EA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Py(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=Py(r,t,e[i]),n&&(a+=s[i]);J$.lastIndex=0;for(var o,l="";(o=J$.exec(a))!==null;)l+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+l;return{name:u,styles:a,next:EA}},wqe=typeof document<"u",Eqe=function(e){return e()},kie=!!T.useInsertionEffect&&T.useInsertionEffect,Bie=wqe&&kie||Eqe,Z$=kie||T.useLayoutEffect,hx=typeof document<"u",GP={}.hasOwnProperty,C5=T.createContext(typeof HTMLElement<"u"?_ie({key:"css"}):null);C5.Provider;var $4=function(e){return T.forwardRef(function(t,r){var n=T.useContext(C5);return e(t,n,r)})};hx||($4=function(e){return function(t){var r=T.useContext(C5);return r===null?(r=_ie({key:"css"}),T.createElement(C5.Provider,{value:r},e(t,r))):e(t,r)}});var KP=T.createContext({}),R6="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Cqe=function(e,t){var r={};for(var n in t)GP.call(t,n)&&(r[n]=t[n]);return r[R6]=e,r},_qe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;zP(t,r,n);var a=Bie(function(){return $P(t,r,n)});if(!hx&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return T.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Sqe=$4(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[R6],s=[n],i="";typeof e.className=="string"?i=Sie(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=z4(s,void 0,T.useContext(KP));i+=t.key+"-"+o.name;var l={};for(var u in e)!GP.call(e,u)||u==="css"||u===R6||(l[u]=e[u]);return l.ref=r,l.className=i,T.createElement(T.Fragment,null,T.createElement(_qe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),T.createElement(a,l))});ca(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var kr=function(e,t){var r=arguments;if(t==null||!GP.call(t,"css"))return T.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Sqe,a[1]=Cqe(e,t);for(var s=2;s<n;s++)a[s]=r[s];return T.createElement.apply(null,a)};$4(function(e,t){var r=e.styles,n=z4([r],void 0,T.useContext(KP));if(!hx){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var l=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,l);return l?null:T.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=T.useRef();return Z$(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),Z$(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&$P(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function qP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return z4(t)}var Nqe=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function kqe(e,t,r){var n=[],a=Sie(e,n,r);return n.length<2?r:a+t(n)}var Bqe=function(e){var t,r=e.cache,n=e.serializedArr,a=Bie(function(){for(var s="",i=0;i<n.length;i++){var o=$P(r,n[i],!1);hx||o===void 0||(s+=o)}if(!hx)return s});return hx||a.length===0?null:T.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};$4(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=z4(o,t.registered);return r.push(u),zP(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return kqe(t.registered,n,Nqe(o))},theme:T.useContext(KP)},s=e.children(a);return T.createElement(T.Fragment,null,T.createElement(Bqe,{cache:t,serializedArr:r}),s)});function Qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,l,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(f)throw i}}return u}}(e,t)||gie(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function CA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var l,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||(d[l]=i[l]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xf(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Tie(e){return Xf(e).getComputedStyle(e)}const VC=Math.round;function jie(e){return Fie(e)?(e.nodeName||"").toLowerCase():""}let zC;function Iie(e){return e instanceof Xf(e).HTMLElement}function q_(e){return e instanceof Xf(e).Element}function Fie(e){return e instanceof Xf(e).Node}function eG(e){return typeof ShadowRoot>"u"?!1:e instanceof Xf(e).ShadowRoot||e instanceof ShadowRoot}function Oie(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Tie(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Tqe(){return/^((?!chrome|android).)*safari/i.test(function(){if(zC)return zC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(zC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),zC):navigator.userAgent}())}function Die(e){return q_(e)?e:e.contextElement}const Rie={x:1,y:1};function tG(e){const t=Die(e);if(!Iie(t))return Rie;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(l){const u=Tie(l);let d=parseFloat(u.width),f=parseFloat(u.height);const h=l.offsetWidth,p=l.offsetHeight,g=VC(d)!==h||VC(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?VC(r.width):r.width)/n,o=(s?VC(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function rG(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Die(e);let l=Rie;t&&(l=tG(e));const u=o?Xf(o):window,d=Tqe()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/l.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,p=i.width/l.x,g=i.height/l.y;if(o){const v=Xf(o),b=n;let y=v.frameElement;for(;y&&n&&b!==v;){const C=tG(y),S=y.getBoundingClientRect(),I=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(I.paddingLeft))*C.x,S.y+=(y.clientTop+parseFloat(I.paddingTop))*C.y,f*=C.x,h*=C.y,p*=C.x,g*=C.y,f+=S.x,h+=S.y,y=Xf(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function jqe(e){if(jie(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eG(e)&&e.host||function(r){return((Fie(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return eG(t)?t.host:t}function Pie(e){const t=jqe(e);return function(r){return["html","body","#document"].includes(jie(r))}(t)?t.ownerDocument.body:Iie(t)&&Oie(t)?t:Pie(t)}function W_(e,t){var r;t===void 0&&(t=[]);const n=Pie(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Xf(n);return a?t.concat(s,s.visualViewport||[],Oie(n)?n:[]):t.concat(n,W_(n))}var P6=typeof document<"u"?T.useLayoutEffect:T.useEffect,Iqe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],_5=function(){};function Fqe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Oqe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(Fqe(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var nG=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Op(e)==="object"&&e!==null?[e]:[];var t},aG=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,yr({},CA(e,Iqe))},Es=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function G4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Lie(e){return G4(e)?window.pageYOffset:e.scrollTop}function S5(e,t){G4(e)?window.scrollTo(0,t):e.scrollTop=t}function Dqe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function $C(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_5,a=Lie(e),s=t-a,i=10,o=0;function l(){var u=Dqe(o+=i,a,s,r);S5(e,u),o<r?window.requestAnimationFrame(l):n(e)}l()}function sG(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?S5(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&S5(e,Math.max(t.offsetTop-a,0))}function iG(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Mie=!1,Rqe={get passive(){return Mie=!0}},GC=typeof window<"u"?window:{};GC.addEventListener&&GC.removeEventListener&&(GC.addEventListener("p",_5,Rqe),GC.removeEventListener("p",_5,!1));var Pqe=Mie;function Lqe(e){return e!=null}function KC(e,t,r){return e?t:r}var Mqe=["children","innerProps"],Uqe=["children","innerProps"];function Qqe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,l=function(X){var V=getComputedStyle(X),Z=V.position==="absolute",H=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var z=X;z=z.parentElement;)if(V=getComputedStyle(z),(!Z||V.position!=="static")&&H.test(V.overflow+V.overflowY+V.overflowX))return z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=l.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,v=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||G4(d=l)?window.innerHeight:d.clientHeight,C=Lie(l),S=parseInt(getComputedStyle(r).marginBottom,10),I=parseInt(getComputedStyle(r).marginTop,10),N=b-I,B=y-v,w=N+C,_=f-C-v,F=p-y+C+S,U=C+v-I,D=160;switch(a){case"auto":case"bottom":if(B>=g)return{placement:"bottom",maxHeight:t};if(_>=g&&!i)return s&&$C(l,F,D),{placement:"bottom",maxHeight:t};if(!i&&_>=n||i&&B>=n)return s&&$C(l,F,D),{placement:"bottom",maxHeight:i?B-S:_-S};if(a==="auto"||i){var k=t,L=i?N:w;return L>=n&&(k=Math.min(L-S-o,t)),{placement:"top",maxHeight:k}}if(a==="bottom")return s&&S5(l,F),{placement:"bottom",maxHeight:t};break;case"top":if(N>=g)return{placement:"top",maxHeight:t};if(w>=g&&!i)return s&&$C(l,U,D),{placement:"top",maxHeight:t};if(!i&&w>=n||i&&N>=n){var R=t;return(!i&&w>=n||i&&N>=n)&&(R=i?N-I:w-I),s&&$C(l,U,D),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var oG,Uie=function(e){return e==="auto"?"bottom":e},Qie=T.createContext(null),Hqe=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,l=(T.useContext(Qie)||{}).setPortalPlacement,u=T.useRef(null),d=Qi(T.useState(n),2),f=d[0],h=d[1],p=Qi(T.useState(null),2),g=p[0],v=p[1],b=o.spacing.controlHeight;return P6(function(){var y=u.current;if(y){var C=s==="fixed",S=Qqe({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!C,isFixedPosition:C,controlHeight:b});h(S.maxHeight),v(S.placement),l==null||l(S.placement)}},[n,a,s,i,r,l,b]),t({ref:u,placerProps:yr(yr({},e),{},{placement:g||Uie(a),maxHeight:f})})},Vqe=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return kr("div",Or({},Es(e,"menu",{menu:!0}),{ref:r},n),t)},Hie=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return yr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},zqe=Hie,$qe=Hie,Gqe=["size"],Kqe=["innerProps","isRtl","size"],_3,S3,qqe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Vie=function(e){var t=e.size,r=CA(e,Gqe);return kr("svg",Or({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:qqe},r))},N3=function(e){return kr(Vie,Or({size:20},e),kr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},lG=function(e){return kr(Vie,Or({size:20},e),kr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},zie=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return yr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},Wqe=zie,Xqe=zie,Yqe=function(){var e=qP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(oG||(_3=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],S3||(S3=_3.slice(0)),oG=Object.freeze(Object.defineProperties(_3,{raw:{value:Object.freeze(S3)}})))),k3=function(e){var t=e.delay,r=e.offset;return kr("span",{css:qP({animation:"".concat(Yqe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Jqe=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return kr("div",Or({ref:a},Es(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},Zqe=["data"],eWe=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,l=e.label,u=e.theme,d=e.selectProps;return kr("div",Or({},Es(e,"group",{group:!0}),o),kr(s,Or({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),l),kr("div",null,t))},tWe=["innerRef","isDisabled","isHidden","inputClassName"],$ie={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},rWe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":yr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},$ie)},nWe=function(e){return yr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},$ie)},cG=function(e){var t=e.children,r=e.innerProps;return kr("div",r,t)},aWe=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,l=r.Container,u=r.Label,d=r.Remove;return kr(l,{data:n,innerProps:yr(yr({},Es(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},kr(u,{data:n,innerProps:yr({},Es(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),kr(d,{data:n,innerProps:yr(yr({},Es(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},sWe={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},Es(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||kr(N3,null))},Control:Jqe,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},Es(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||kr(lG,null))},DownChevron:lG,CrossIcon:N3,Group:eWe,GroupHeading:function(e){var t=aG(e);t.data;var r=CA(t,Zqe);return kr("div",Or({},Es(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},Es(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return kr("span",Or({},t,Es(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=aG(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,l=CA(n,tWe);return kr("div",Or({},Es(e,"input",{"input-container":!0}),{"data-value":r||""}),kr("input",Or({className:t({input:!0},o),ref:a,style:nWe(i),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=CA(e,Kqe);return kr("div",Or({},Es(yr(yr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),kr(k3,{delay:0,offset:r}),kr(k3,{delay:160,offset:!0}),kr(k3,{delay:320,offset:!r}))},Menu:Vqe,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return kr("div",Or({},Es(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=T.useRef(null),l=T.useRef(null),u=Qi(T.useState(Uie(s)),2),d=u[0],f=u[1],h=T.useMemo(function(){return{setPortalPlacement:f}},[]),p=Qi(T.useState(null),2),g=p[0],v=p[1],b=T.useCallback(function(){if(n){var I=function(w){var _=w.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(n),N=i==="fixed"?0:window.pageYOffset,B=I[d]+N;B===(g==null?void 0:g.offset)&&I.left===(g==null?void 0:g.rect.left)&&I.width===(g==null?void 0:g.rect.width)||v({offset:B,rect:I})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);P6(function(){b()},[b]);var y=T.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(I,N,B,w){w===void 0&&(w={});const{ancestorScroll:_=!0,ancestorResize:F=!0,elementResize:U=!0,animationFrame:D=!1}=w,k=_&&!D,L=k||F?[...q_(I)?W_(I):I.contextElement?W_(I.contextElement):[],...W_(N)]:[];L.forEach(Z=>{k&&Z.addEventListener("scroll",B,{passive:!0}),F&&Z.addEventListener("resize",B)});let R,X=null;if(U){let Z=!0;X=new ResizeObserver(()=>{Z||B(),Z=!1}),q_(I)&&!D&&X.observe(I),q_(I)||!I.contextElement||D||X.observe(I.contextElement),X.observe(N)}let V=D?rG(I):null;return D&&function Z(){const H=rG(I);!V||H.x===V.x&&H.y===V.y&&H.width===V.width&&H.height===V.height||B(),V=H,R=requestAnimationFrame(Z)}(),B(),()=>{var Z;L.forEach(H=>{k&&H.removeEventListener("scroll",B),F&&H.removeEventListener("resize",B)}),(Z=X)==null||Z.disconnect(),X=null,D&&cancelAnimationFrame(R)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);P6(function(){y()},[y]);var C=T.useCallback(function(I){o.current=I,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var S=kr("div",Or({ref:C},Es(yr(yr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return kr(Qie.Provider,{value:h},t?Aae.createPortal(S,t):S)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=CA(e,Uqe);return kr("div",Or({},Es(yr(yr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=CA(e,Mqe);return kr("div",Or({},Es(yr(yr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:aWe,MultiValueContainer:cG,MultiValueLabel:cG,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({role:"button"},r),t||kr(N3,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return kr("div",Or({},Es(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},Es(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return kr("div",Or({},Es(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return kr("div",Or({},Es(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return kr("div",Or({},Es(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},uG=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function iWe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||uG(n)&&uG(a)))return!1;var n,a;return!0}for(var oWe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},dG=function(e){return kr("span",Or({css:oWe},e))},lWe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(l?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},cWe=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,l=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,v=o.isSearchable,b=o.menuIsOpen,y=o.options,C=o.screenReaderStatus,S=o.tabSelectsValue,I=o.isLoading,N=o["aria-label"],B=o["aria-live"],w=T.useMemo(function(){return yr(yr({},lWe),d||{})},[d]),_=T.useMemo(function(){var R,X="";if(t&&w.onChange){var V=t.option,Z=t.options,H=t.removedValue,z=t.removedValues,q=t.value,re=H||V||(R=q,Array.isArray(R)?null:R),P=re?f(re):"",K=Z||z||void 0,Y=K?K.map(f):[],te=yr({isDisabled:re&&g(re,i),label:P,labels:Y},t);X=w.onChange(te)}return X},[t,w,g,i,f]),F=T.useMemo(function(){var R="",X=r||n,V=!!(r&&i&&i.includes(r));if(X&&w.onFocus){var Z={focused:X,label:f(X),isDisabled:g(X,i),isSelected:V,options:a,context:X===r?"menu":"value",selectValue:i,isAppleDevice:u};R=w.onFocus(Z)}return R},[r,n,f,g,w,a,i,u]),U=T.useMemo(function(){var R="";if(b&&y.length&&!I&&w.onFilter){var X=C({count:a.length});R=w.onFilter({inputValue:h,resultsMessage:X})}return R},[a,h,b,w,y,C,I]),D=(t==null?void 0:t.action)==="initial-input-focus",k=T.useMemo(function(){var R="";if(w.guidance){var X=n?"value":b?"menu":"input";R=w.guidance({"aria-label":N,context:X,isDisabled:r&&g(r,i),isMulti:p,isSearchable:v,tabSelectsValue:S,isInitialFocus:D})}return R},[N,r,n,p,g,v,b,w,i,S,D]),L=kr(T.Fragment,null,kr("span",{id:"aria-selection"},_),kr("span",{id:"aria-focused"},F),kr("span",{id:"aria-results"},U),kr("span",{id:"aria-guidance"},k));return kr(T.Fragment,null,kr(dG,{id:l},D&&L),kr(dG,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&L))},B3=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],uWe=new RegExp("["+B3.map(function(e){return e.letters}).join("")+"]","g"),Gie={},T3=0;T3<B3.length;T3++)for(var j3=B3[T3],I3=0;I3<j3.letters.length;I3++)Gie[j3.letters[I3]]=j3.base;var Kie=function(e){return e.replace(uWe,function(t){return Gie[t]})},dWe=function(e,t){t===void 0&&(t=iWe);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Kie),AG=function(e){return e.replace(/^\s+|\s+$/g,"")},AWe=function(e){return"".concat(e.label," ").concat(e.value)},fWe=["innerRef"];function hWe(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(l){var u=Qi(l,1)[0];return!s.includes(u)});return o.reduce(function(l,u){var d=Qi(u,2),f=d[0],h=d[1];return l[f]=h,l},{})}(CA(e,fWe),"onExited","in","enter","exit","appear");return kr("input",Or({ref:t},r,{css:qP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var fG=["boxSizing","height","overflow","paddingRight","position"],hG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function mG(e){e.preventDefault()}function pG(e){e.stopPropagation()}function gG(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function vG(){return"ontouchstart"in window||navigator.maxTouchPoints}var xG=!(typeof window>"u"||!window.document||!window.document.createElement),Pb=0,yv={capture:!1,passive:!1},mWe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},pWe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function gWe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,l=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=T.useRef(!1),p=T.useRef(!1),g=T.useRef(0),v=T.useRef(null),b=T.useCallback(function(B,w){if(v.current!==null){var _=v.current,F=_.scrollTop,U=_.scrollHeight,D=_.clientHeight,k=v.current,L=w>0,R=U-D-F,X=!1;R>w&&h.current&&(u&&u(B),h.current=!1),L&&p.current&&(f&&f(B),p.current=!1),L&&w>R?(l&&!h.current&&l(B),k.scrollTop=U,X=!0,h.current=!0):!L&&-w>F&&(d&&!p.current&&d(B),k.scrollTop=0,X=!0,p.current=!0),X&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(B)}},[l,u,d,f]),y=T.useCallback(function(B){b(B,B.deltaY)},[b]),C=T.useCallback(function(B){g.current=B.changedTouches[0].clientY},[]),S=T.useCallback(function(B){var w=g.current-B.changedTouches[0].clientY;b(B,w)},[b]),I=T.useCallback(function(B){if(B){var w=!!Pqe&&{passive:!1};B.addEventListener("wheel",y,w),B.addEventListener("touchstart",C,w),B.addEventListener("touchmove",S,w)}},[S,C,y]),N=T.useCallback(function(B){B&&(B.removeEventListener("wheel",y,!1),B.removeEventListener("touchstart",C,!1),B.removeEventListener("touchmove",S,!1))},[S,C,y]);return T.useEffect(function(){if(o){var B=v.current;return I(B),function(){N(B)}}},[o,I,N]),function(B){v.current=B}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,l=i.accountForScrollbars,u=l===void 0||l,d=T.useRef({}),f=T.useRef(null),h=T.useCallback(function(g){if(xG){var v=document.body,b=v&&v.style;if(u&&fG.forEach(function(I){var N=b&&b[I];d.current[I]=N}),u&&Pb<1){var y=parseInt(d.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,S=window.innerWidth-C+y||0;Object.keys(hG).forEach(function(I){var N=hG[I];b&&(b[I]=N)}),b&&(b.paddingRight="".concat(S,"px"))}v&&vG()&&(v.addEventListener("touchmove",mG,yv),g&&(g.addEventListener("touchstart",gG,yv),g.addEventListener("touchmove",pG,yv))),Pb+=1}},[u]),p=T.useCallback(function(g){if(xG){var v=document.body,b=v&&v.style;Pb=Math.max(Pb-1,0),u&&Pb<1&&fG.forEach(function(y){var C=d.current[y];b&&(b[y]=C)}),v&&vG()&&(v.removeEventListener("touchmove",mG,yv),g&&(g.removeEventListener("touchstart",gG,yv),g.removeEventListener("touchmove",pG,yv)))}},[u]);return T.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return kr(T.Fragment,null,r&&kr("div",{onClick:mWe,css:pWe}),t(function(i){a(i),s(i)}))}var vWe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},xWe=function(e){var t=e.name,r=e.onFocus;return kr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:vWe,value:"",onChange:function(){}})};function L6(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function qie(){return L6(/^Mac/i)}function bWe(){return L6(/^iPhone/i)||L6(/^iPad/i)||qie()&&navigator.maxTouchPoints>1}var yWe,wWe={clearIndicator:Xqe,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return yr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:Wqe,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return yr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return yr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return yr(yr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},rWe),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return yr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:$qe,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return yr((Qv(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),Qv(r,"position","absolute"),Qv(r,"width","100%"),Qv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return yr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return yr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return yr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return yr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:zqe,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return yr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return yr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return yr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return yr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},F3={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},EWe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:iG(),captureMenuScroll:!iG(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=yr({ignoreCase:!0,ignoreAccents:!0,stringify:AWe,trim:!0,matchFrom:"any"},yWe),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,l=i?AG(t):t,u=i?AG(s(e)):s(e);return n&&(l=l.toLowerCase(),u=u.toLowerCase()),a&&(l=dWe(l),u=Kie(u)),o==="start"?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function bG(e,t,r,n){return{type:"option",data:t,isDisabled:Xie(e,t,r),isSelected:Yie(e,t,r),label:Wie(e,t),value:N5(e,t),index:n}}function qC(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return bG(e,i,t,o)}).filter(function(i){return EG(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=bG(e,r,t,n);return EG(e,s)?s:void 0}).filter(Lqe)}function yG(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,QP(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function wG(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,QP(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function EG(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Zie(e)||!s)&&Jie(e,{label:i,value:o,data:a},n)}var O3=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Wie=function(e,t){return e.getOptionLabel(t)},N5=function(e,t){return e.getOptionValue(t)};function Xie(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Yie(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=N5(e,t);return r.some(function(a){return N5(e,a)===n})}function Jie(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Zie=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},CWe=1,eoe=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&k6(i,o)})(s,T.Component);var t,r,n,a=YKe(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=qie()||bWe(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,v=p.name;h.name=v,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,v=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),v&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,v=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),C=o.isOptionDisabled(f,b);if(y){var S=o.getOptionValue(f);o.setValue(b.filter(function(I){return o.getOptionValue(I)!==S}),"deselect-option",f)}else{if(C)return void o.ariaOnChange(f,{action:"select-option",option:f,name:v});g?o.setValue([].concat(QP(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),v=p.filter(function(y){return o.getOptionValue(y)!==g}),b=KC(h,v,v[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(KC(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),v=KC(f,g,g[0]||null);o.onChange(v,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return O3(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return wG(qC(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return Oqe.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Wie(o.props,f)},o.getOptionValue=function(f){return N5(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=wWe[f](h,p);g.boxSizing="border-box";var v=o.props.styles[f];return v?v(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,yr(yr({},sWe),f.components);var f},o.buildCategorizedOptions=function(){return qC(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return yG(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:yr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&G4(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),v=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||v>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Zie(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,v=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,C=h.isDisabled,S=h.menuIsOpen,I=h.onKeyDown,N=h.tabSelectsValue,B=h.openMenuOnFocus,w=o.state,_=w.focusedOption,F=w.focusedValue,U=w.selectValue;if(!(C||typeof I=="function"&&(I(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(F)o.removeValue(F);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!S||!N||!_||B&&o.isOptionSelected(_,U))return;o.selectOption(_);break;case"Enter":if(f.keyCode===229)break;if(S){if(!_||o.isComposing)return;o.selectOption(_);break}return;case"Escape":S?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&v&&o.clearValue();break;case" ":if(b)return;if(!S){o.openMenu("first");break}if(!_)return;o.selectOption(_);break;case"ArrowUp":S?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":S?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!S)return;o.focusOption("pageup");break;case"PageDown":if(!S)return;o.focusOption("pagedown");break;case"Home":if(!S)return;o.focusOption("first");break;case"End":if(!S)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++CWe),o.state.selectValue=nG(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=u[d],o.state.focusedOptionId=O3(l,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&sG(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(sG(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,u=l.selectValue,d=l.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(u);u||(d=-1);var f=l.length-1,h=-1;if(l.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:l[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(l);l||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(F3):yr(yr({},F3),this.props.theme):F3}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,v=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:v,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return Xie(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return Yie(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Jie(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,v=this.getComponents().Input,b=this.state,y=b.inputIsHidden,C=b.ariaSelection,S=this.commonProps,I=u||this.getElementId("input"),N=yr(yr(yr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(C==null?void 0:C.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?T.createElement(v,Or({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:I,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},N)):T.createElement(hWe,Or({id:I,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:_5,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},N))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,v=this.props,b=v.controlShouldRenderValue,y=v.isDisabled,C=v.isMulti,S=v.inputValue,I=v.placeholder,N=this.state,B=N.selectValue,w=N.focusedValue,_=N.isFocused;if(!this.hasValue()||!b)return S?null:T.createElement(p,Or({},g,{key:"placeholder",isDisabled:y,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),I);if(C)return B.map(function(U,D){var k=U===w,L="".concat(i.getOptionLabel(U),"-").concat(i.getOptionValue(U));return T.createElement(l,Or({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:L,index:D,removeProps:{onClick:function(){return i.removeValue(U)},onTouchEnd:function(){return i.removeValue(U)},onMouseDown:function(R){R.preventDefault()}},data:U}),i.formatOptionLabel(U,"value"))});if(S)return null;var F=B[0];return T.createElement(h,Or({},g,{data:F,isDisabled:y}),this.formatOptionLabel(F,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(i,Or({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;return i&&d?T.createElement(i,Or({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return T.createElement(l,Or({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(i,Or({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,v=o.Option,b=this.commonProps,y=this.state.focusedOption,C=this.props,S=C.captureMenuScroll,I=C.inputValue,N=C.isLoading,B=C.loadingMessage,w=C.minMenuHeight,_=C.maxMenuHeight,F=C.menuIsOpen,U=C.menuPlacement,D=C.menuPosition,k=C.menuPortalTarget,L=C.menuShouldBlockScroll,R=C.menuShouldScrollIntoView,X=C.noOptionsMessage,V=C.onMenuScrollToTop,Z=C.onMenuScrollToBottom;if(!F)return null;var H,z=function(Y,te){var ie=Y.type,Ae=Y.data,oe=Y.isDisabled,ce=Y.isSelected,pe=Y.label,Ie=Y.value,ne=y===Ae,Se=oe?void 0:function(){return i.onOptionHover(Ae)},De=oe?void 0:function(){return i.selectOption(Ae)},_e="".concat(i.getElementId("option"),"-").concat(te),he={id:_e,onClick:De,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return T.createElement(v,Or({},b,{innerProps:he,data:Ae,isDisabled:oe,isSelected:ce,key:_e,label:pe,type:ie,value:Ie,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))};if(this.hasOptions())H=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var te=Y.data,ie=Y.options,Ae=Y.index,oe="".concat(i.getElementId("group"),"-").concat(Ae),ce="".concat(oe,"-heading");return T.createElement(l,Or({},b,{key:oe,data:te,options:ie,Heading:u,headingProps:{id:ce,data:Y.data},label:i.formatGroupLabel(Y.data)}),Y.options.map(function(pe){return z(pe,"".concat(Ae,"-").concat(pe.index))}))}if(Y.type==="option")return z(Y,"".concat(Y.index))});else if(N){var q=B({inputValue:I});if(q===null)return null;H=T.createElement(p,b,q)}else{var re=X({inputValue:I});if(re===null)return null;H=T.createElement(g,b,re)}var P={minMenuHeight:w,maxMenuHeight:_,menuPlacement:U,menuPosition:D,menuShouldScrollIntoView:R},K=T.createElement(Hqe,Or({},b,P),function(Y){var te=Y.ref,ie=Y.placerProps,Ae=ie.placement,oe=ie.maxHeight;return T.createElement(d,Or({},b,P,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:N,placement:Ae}),T.createElement(gWe,{captureEnabled:S,onTopArrive:V,onBottomArrive:Z,lockEnabled:L},function(ce){return T.createElement(f,Or({},b,{innerRef:function(pe){i.getMenuListRef(pe),ce(pe)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:N,maxHeight:oe,focusedOption:y}),H)}))});return k||D==="fixed"?T.createElement(h,Or({},b,{appendTo:k,controlElement:this.controlRef,menuPlacement:U,menuPosition:D}),K):K}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return T.createElement(xWe,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(l){var g=p.map(function(y){return i.getOptionValue(y)}).join(l);return T.createElement("input",{name:f,type:"hidden",value:g})}var v=p.length>0?p.map(function(y,C){return T.createElement("input",{key:"i-".concat(C),name:f,type:"hidden",value:i.getOptionValue(y)})}):T.createElement("input",{name:f,type:"hidden",value:""});return T.createElement("div",null,v)}var b=p[0]?this.getOptionValue(p[0]):"";return T.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return T.createElement(cWe,Or({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,v=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return T.createElement(u,Or({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),T.createElement(o,Or({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:v}),T.createElement(d,Or({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),T.createElement(l,Or({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,v=i.options,b=i.value,y=i.menuIsOpen,C=i.inputValue,S=i.isMulti,I=nG(b),N={};if(l&&(b!==l.value||v!==l.options||y!==l.menuIsOpen||C!==l.inputValue)){var B=y?function(L,R){return yG(qC(L,R))}(i,I):[],w=y?wG(qC(i,I),"".concat(g,"-option")):[],_=u?function(L,R){var X=L.focusedValue,V=L.selectValue.indexOf(X);if(V>-1){if(R.indexOf(X)>-1)return X;if(V<R.length)return R[V]}return null}(o,I):null,F=function(L,R){var X=L.focusedOption;return X&&R.indexOf(X)>-1?X:R[0]}(o,B);N={selectValue:I,focusedOption:F,focusedOptionId:O3(w,F),focusableOptionsWithIds:w,focusedValue:_,clearFocusValueOnUpdate:!1}}var U=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,k=h&&p;return h&&!k&&(D={value:KC(S,I,I[0]||null),options:I,action:"initial-input-focus"},k=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),yr(yr(yr({},N),U),{},{prevProps:i,ariaSelection:D,prevWasFocused:k})}}],r&&L$(t.prototype,r),n&&L$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();eoe.defaultProps=EWe;var _We=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],SWe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],WP=ca(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),NWe=ca(function(e){var t=WP.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),toe=ca(function(e){var t=WP.default;e.exports=function(r){var n=NWe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),kWe=ca(function(e){e.exports=function(t,r,n){return(r=toe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){kWe(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,toe(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var BWe=ca(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&BWe(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var CG=ca(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),TWe=ca(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),jWe=ca(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),IWe=ca(function(e){var t=WP.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jWe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t){var r=TWe();return function(){var n,a=CG(t);if(r){var s=CG(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return IWe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var M6=ca(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),FWe=ca(function(e){e.exports=function(t){if(Array.isArray(t))return M6(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),OWe=ca(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),roe=ca(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return M6(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M6(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),DWe=ca(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t){return FWe(t)||OWe(t)||roe(t)||DWe()},e.exports.__esModule=!0,e.exports.default=e.exports});var RWe=ca(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),PWe=ca(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,l=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(l.push(a.value),l.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),LWe=ca(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){return RWe(t)||PWe(t,r)||roe(t,r)||LWe()},e.exports.__esModule=!0,e.exports.default=e.exports});var MWe=ca(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=MWe(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var UWe=T.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,l=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,v=CA(a,SWe),b=v.inputValue,y=T.useRef(void 0),C=T.useRef(!1),S=Qi(T.useState(Array.isArray(i)?i:void 0),2),I=S[0],N=S[1],B=Qi(T.useState(b!==void 0?b:""),2),w=B[0],_=B[1],F=Qi(T.useState(i===!0),2),U=F[0],D=F[1],k=Qi(T.useState(void 0),2),L=k[0],R=k[1],X=Qi(T.useState([]),2),V=X[0],Z=X[1],H=Qi(T.useState(!1),2),z=H[0],q=H[1],re=Qi(T.useState({}),2),P=re[0],K=re[1],Y=Qi(T.useState(void 0),2),te=Y[0],ie=Y[1],Ae=Qi(T.useState(void 0),2),oe=Ae[0],ce=Ae[1];l!==oe&&(K({}),ce(l)),i!==te&&(N(Array.isArray(i)?i:void 0),ie(i)),T.useEffect(function(){return C.current=!0,function(){C.current=!1}},[]);var pe=T.useCallback(function(Se,De){if(!u)return De();var _e=u(Se,De);_e&&typeof _e.then=="function"&&_e.then(De,function(){return De()})},[u]);T.useEffect(function(){i===!0&&pe(w,function(Se){C.current&&(N(Se||[]),D(!!y.current))})},[]);var Ie=T.useCallback(function(Se,De){var _e=function(je,He,Xe){if(Xe){var ye=Xe(je,He);if(typeof ye=="string")return ye}return je}(Se,De,h);if(!_e)return y.current=void 0,_(""),R(""),Z([]),D(!1),void q(!1);if(l&&P[_e])_(_e),R(_e),Z(P[_e]),D(!1),q(!1);else{var he=y.current={};_(_e),D(!0),q(!L),pe(_e,function(je){C&&he===y.current&&(y.current=void 0,D(!1),R(_e),Z(je||[]),q(!1),K(je?yr(yr({},P),{},Qv({},_e,je)):P))})}},[l,pe,L,P,h]),ne=z?[]:w&&L?V:I||[];return yr(yr({},v),{},{options:ne,isLoading:U||f,onInputChange:Ie,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,l=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,v=a.onMenuClose,b=a.onMenuOpen,y=a.value,C=CA(a,_We),S=Qi(T.useState(f!==void 0?f:i),2),I=S[0],N=S[1],B=Qi(T.useState(h!==void 0?h:l),2),w=B[0],_=B[1],F=Qi(T.useState(y!==void 0?y:d),2),U=F[0],D=F[1],k=T.useCallback(function(z,q){typeof p=="function"&&p(z,q),D(z)},[p]),L=T.useCallback(function(z,q){var re;typeof g=="function"&&(re=g(z,q)),N(re!==void 0?re:z)},[g]),R=T.useCallback(function(){typeof b=="function"&&b(),_(!0)},[b]),X=T.useCallback(function(){typeof v=="function"&&v(),_(!1)},[v]),V=f!==void 0?f:I,Z=h!==void 0?h:w,H=y!==void 0?y:U;return yr(yr({},C),{},{inputValue:V,menuIsOpen:Z,onChange:k,onInputChange:L,onMenuClose:X,onMenuOpen:R,value:H})}(r);return T.createElement(eoe,Or({ref:t},n))}),QWe=UWe,HWe=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Hv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Hv||(Hv={}));class up{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,up.instance){if(!HWe(this.options,up.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(up.instance.options)}`);return up.instance}up.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Hv.FAILURE:this.done?Hv.SUCCESS:this.loading?Hv.LOADING:Hv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var VWe=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(l,u){var d={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&u.indexOf(f)<0&&(d[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(l);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(l,f[h])&&(d[f[h]]=l[f[h]])}return d}(e,["bounds","location"]),o=Fp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var f=Array(l),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,v=p.length;g<v;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},zWe=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(l,u,d){d===void 0&&(d={});var f=d.maxWait,h=T.useRef(null),p=T.useRef([]),g=d.leading,v=d.trailing===void 0||d.trailing,b=T.useRef(!1),y=T.useRef(null),C=T.useRef(!1),S=T.useRef(l);S.current=l;var I=T.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);T.useEffect(function(){return C.current=!1,function(){C.current=!0}},[]);var N=T.useCallback(function(){for(var w=[],_=0;_<arguments.length;_++)w[_]=arguments[_];p.current=w,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(S.current.apply(S,w),b.current=!0),y.current=setTimeout(function(){var F=!0;g&&b.current&&(F=!1),I(),!C.current&&v&&F&&S.current.apply(S,w)},u),f&&!h.current&&v&&(h.current=setTimeout(function(){var F=p.current;I(),C.current||S.current.apply(null,F)},f))},[f,u,I,g,v]),B=T.useCallback(function(){y.current&&(S.current.apply(null,p.current),I())},[I]);return[N,I,B]}(function(l,u){if(!a)return u([]);if(l.length<n)return u([]);var d=Fp({},t);a.getPlacePredictions(VWe(d,l,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},_G=T.forwardRef(function(e,t){var r,n,a,s,i,o,l,u,d=function(v){var b=v.apiKey,y=v.apiOptions,C=v.onLoadFailed,S=T.useState(void 0),I=S[0],N=S[1],B=T.useState(void 0),w=B[0],_=B[1],F=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");N(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return T.useEffect(function(){b?qKe(void 0,void 0,void 0,function(){var U;return WKe(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new up(Fp({apiKey:b},Fp({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return F(),[3,5];case 4:return U=D.sent(),typeof C=="function"&&C(U),[3,5];case 5:return[2]}})}):F()},[]),{placesService:I,sessionToken:w,setSessionToken:_}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=zWe({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(l=e.withSessionToken)!==null&&l!==void 0&&l});return T.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),lt.createElement(QWe,Fp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(v){return v.value.place_id}}))});function noe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=noe(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Cn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=noe(e))&&(n&&(n+=" "),n+=t);return n}var D3={},R3={},SG;function $We(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(R3)),R3}var P3={},NG;function aoe(){return NG||(NG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(P3)),P3}var L3={},kG;function soe(){return kG||(kG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(L3)),L3}var M3={},BG;function XP(){return BG||(BG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(M3)),M3}var TG;function YP(){return TG||(TG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$We(),r=aoe(),n=soe(),a=XP();function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?s(o,a.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=s}(D3)),D3}var U3,jG;function GWe(){return jG||(jG=1,U3=YP().get),U3}var KWe=GWe();const fm=yl(KWe);var Q3={exports:{}},sa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IG;function qWe(){if(IG)return sa;IG=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function S(N){if(typeof N=="object"&&N!==null){var B=N.$$typeof;switch(B){case t:switch(N=N.type,N){case l:case u:case n:case s:case a:case f:return N;default:switch(N=N&&N.$$typeof,N){case o:case d:case g:case p:case i:return N;default:return B}}case r:return B}}}function I(N){return S(N)===u}return sa.AsyncMode=l,sa.ConcurrentMode=u,sa.ContextConsumer=o,sa.ContextProvider=i,sa.Element=t,sa.ForwardRef=d,sa.Fragment=n,sa.Lazy=g,sa.Memo=p,sa.Portal=r,sa.Profiler=s,sa.StrictMode=a,sa.Suspense=f,sa.isAsyncMode=function(N){return I(N)||S(N)===l},sa.isConcurrentMode=I,sa.isContextConsumer=function(N){return S(N)===o},sa.isContextProvider=function(N){return S(N)===i},sa.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},sa.isForwardRef=function(N){return S(N)===d},sa.isFragment=function(N){return S(N)===n},sa.isLazy=function(N){return S(N)===g},sa.isMemo=function(N){return S(N)===p},sa.isPortal=function(N){return S(N)===r},sa.isProfiler=function(N){return S(N)===s},sa.isStrictMode=function(N){return S(N)===a},sa.isSuspense=function(N){return S(N)===f},sa.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===s||N===a||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===g||N.$$typeof===p||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===b||N.$$typeof===y||N.$$typeof===C||N.$$typeof===v)},sa.typeOf=S,sa}var FG;function WWe(){return FG||(FG=1,Q3.exports=qWe()),Q3.exports}var XWe=WWe(),Xi=e=>e===0?0:e>0?1:-1,Pc=e=>typeof e=="number"&&e!=+e,gp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Pc(e),VA=e=>ur(e)||typeof e=="string",YWe=0,jw=e=>{var t=++YWe;return"".concat(e||"").concat(t)},bl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(gp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Pc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},ioe=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Vv=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function wv(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function JWe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):fm(n,t))===r)}var Ts=e=>e===null||typeof e>"u",y2=e=>Ts(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),ZWe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function JP(e){if(typeof e!="string")return!1;var t=ZWe;return t.includes(e)}var eXe=["viewBox","children"],OG=["points","pathLength"],H3={svg:eXe,polygon:OG,polyline:OG},ZP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(T.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{JP(a)&&(n[a]=s=>r[a](r,s))}),n},tXe=(e,t,r)=>n=>(e(t,r,n),null),g1=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];JP(a)&&typeof s=="function"&&(n||(n={}),n[a]=tXe(s,t,r))}),n},rXe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function ooe(e){if(typeof e!="string")return!1;var t=rXe;return t.includes(e)}function nl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return ooe(n)});return Object.fromEntries(t)}var DG=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",RG=null,V3=null,loe=e=>{if(e===RG&&Array.isArray(V3))return V3;var t=[];return T.Children.forEach(e,r=>{Ts(r)||(XWe.isFragment(r)?t=t.concat(loe(r.props.children)):t.push(r))}),V3=t,RG=e,t};function w2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>DG(a)):n=[DG(t)],loe(e).forEach(a=>{var s=fm(a,"type.displayName")||fm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var nXe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(H3==null?void 0:H3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||ooe(t)),l=!!r&&JP(t);return i||o||l},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;nXe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},aXe=["children","width","height","viewBox","className","style","title","desc"];function U6(){return U6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U6.apply(null,arguments)}function sXe(e,t){if(e==null)return{};var r,n,a=iXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var coe=T.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:l,desc:u}=e,d=sXe(e,aXe),f=s||{width:n,height:a,x:0,y:0},h=Cn("recharts-surface",i);return T.createElement("svg",U6({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),T.createElement("title",null,l),T.createElement("desc",null,u),r)}),oXe=["children","className"];function Q6(){return Q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q6.apply(null,arguments)}function lXe(e,t){if(e==null)return{};var r,n,a=cXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ds=T.forwardRef((e,t)=>{var{children:r,className:n}=e,a=lXe(e,oXe),s=Cn("recharts-layer",n);return T.createElement("g",Q6({className:s},Xn(a,!0),{ref:t}),r)}),uXe=T.createContext(null),dXe=["type","size","sizeType"];function H6(){return H6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H6.apply(null,arguments)}function PG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PG(Object(r),!0).forEach(function(n){AXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AXe(e,t,r){return(t=fXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fXe(e){var t=hXe(e,"string");return typeof t=="symbol"?t:t+""}function hXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mXe(e,t){if(e==null)return{};var r,n,a=pXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uoe={symbolCircle:LP,symbolCross:VGe,symbolDiamond:$Ge,symbolSquare:GGe,symbolStar:XGe,symbolTriangle:YGe,symbolWye:ZGe},gXe=Math.PI/180,vXe=e=>{var t="symbol".concat(y2(e));return uoe[t]||LP},xXe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*gXe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bXe=(e,t)=>{uoe["symbol".concat(y2(e))]=t},doe=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=mXe(e,dXe),s=LG(LG({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=vXe(t),h=eKe().type(f).size(xXe(r,n,t));return h()},{className:o,cx:l,cy:u}=s,d=Xn(s,!0);return l===+l&&u===+u&&r===+r?T.createElement("path",H6({},d,{className:Cn("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(u,")"),d:i()})):null};doe.registerSymbol=bXe;var z3={},$3={},MG;function yXe(){return MG||(MG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}($3)),$3}var G3={},UG;function K4(){return UG||(UG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(G3)),G3}var K3={},q3={},W3={},QG;function wXe(){return QG||(QG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(W3)),W3}var HG;function eL(){return HG||(HG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wXe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(q3)),q3}var X3={},VG;function EXe(){return VG||(VG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(X3)),X3}var zG;function CXe(){return zG||(zG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eL(),r=EXe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(K3)),K3}var Y3={},J3={},$G;function _Xe(){return $G||($G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(J3)),J3}var Z3={},ej={},tj={},rj={},GG;function Aoe(){return GG||(GG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(rj)),rj}var nj={},KG;function foe(){return KG||(KG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(nj)),nj}var aj={},qG;function tL(){return qG||(qG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(aj)),aj}var WG;function SXe(){return WG||(WG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),r=Aoe(),n=foe(),a=tL();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(v,b,y,C,S,I){const N=p(v,b,y,C,S,I);return N!==void 0?!!N:i(v,b,g,I)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return l(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const v=Object.keys(h);if(f==null)return v.length===0;if(v.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<v.length;b++){const y=v[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function l(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,b]of h.entries()){const y=f.get(v);if(p(y,b,v,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let b=0;b<h.length;b++){const y=h[b];let C=!1;for(let S=0;S<f.length;S++){if(v.has(S))continue;const I=f[S];let N=!1;if(p(I,y,b,f,h,g)&&(N=!0),N){v.add(S),C=!0;break}}if(!C)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(tj)),tj}var XG;function rL(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SXe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(ej)),ej}var sj={},ij={},oj={},YG;function hoe(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(oj)),oj}var lj={},JG;function nL(){return JG||(JG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(lj)),lj}var cj={},ZG;function aL(){return ZG||(ZG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",v="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",I="[object BigUint64Array]",N="[object Int8Array]",B="[object Int16Array]",w="[object Int32Array]",_="[object BigInt64Array]",F="[object Float32Array]",U="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=I,e.booleanTag=a,e.dataViewTag=v,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=F,e.float64ArrayTag=U,e.functionTag=f,e.int16ArrayTag=B,e.int32ArrayTag=w,e.int8ArrayTag=N,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=C,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(cj)),cj}var uj={},eK;function NXe(){return eK||(eK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(uj)),uj}var tK;function moe(){return tK||(tK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hoe(),r=nL(),n=aL(),a=foe(),s=NXe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const v=g==null?void 0:g(d,f,h,p);if(v!=null)return v;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,C]of d)b.set(y,o(C,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),l(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),l(b,d,h,p,g),b}return d}function l(d,f,h=d,p,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const y=v[b],C=Object.getOwnPropertyDescriptor(d,y);(C==null||C.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l}(ij)),ij}var rK;function kXe(){return rK||(rK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=moe();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(sj)),sj}var nK;function BXe(){return nK||(nK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),r=kXe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(Z3)),Z3}var dj={},Aj={},fj={},aK;function TXe(){return aK||(aK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=moe(),r=aL();function n(a,s){return t.cloneDeepWith(a,(i,o,l,u)=>{const d=s==null?void 0:s(i,o,l,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(fj)),fj}var sK;function jXe(){return sK||(sK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TXe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Aj)),Aj}var hj={},mj={},iK;function poe(){return iK||(iK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(mj)),mj}var pj={},oK;function IXe(){return oK||(oK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nL();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(pj)),pj}var lK;function FXe(){return lK||(lK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aoe(),r=poe(),n=IXe(),a=XP();function s(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(hj)),hj}var cK;function OXe(){return cK||(cK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),r=soe(),n=jXe(),a=YP(),s=FXe();function i(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i}(dj)),dj}var uK;function sL(){return uK||(uK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K4(),r=_Xe(),n=BXe(),a=OXe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(Y3)),Y3}var dK;function DXe(){return dK||(dK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yXe(),r=K4(),n=CXe(),a=sL();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(z3)),z3}var gj,AK;function RXe(){return AK||(AK=1,gj=DXe().uniqBy),gj}var PXe=RXe();const fK=yl(PXe);function LXe(e,t,r){return t===!0?fK(e,r):typeof t=="function"?fK(e,t):e}var iL=T.createContext(null),MXe=e=>e,fs=()=>{var e=T.useContext(iL);return e?e.store.dispatch:MXe},X_=()=>{},UXe=()=>X_,QXe=(e,t)=>e===t;function ir(e){var t=T.useContext(iL);return Pne.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:UXe,t?t.store.getState:X_,t?t.store.getState:X_,t?e:X_,QXe)}function HXe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function VXe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function zXe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var hK=e=>Array.isArray(e)?e:[e];function $Xe(e){const t=Array.isArray(e[0])?e[0]:e;return zXe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function GXe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var KXe=class{constructor(e){this.value=e}deref(){return this.value}},qXe=typeof WeakRef<"u"?WeakRef:KXe,WXe=0,mK=1;function WC(){return{s:WXe,v:void 0,o:null,p:null}}function goe(e,t={}){let r=WC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(g);b===void 0?(o=WC(),v.set(g,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(g);b===void 0?(o=WC(),v.set(g,o)):o=b}}const u=o;let d;if(o.s===mK)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new qXe(d):d}return u.s=mK,u.v=d,d}return i.clearCache=()=>{r=WC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function XXe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),HXe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=goe,argsMemoizeOptions:g=[]}=d,v=hK(h),b=hK(g),y=$Xe(a),C=f(function(){return s++,u.apply(null,arguments)},...v),S=p(function(){i++;const N=GXe(y,arguments);return o=C.apply(null,N),o},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ct=XXe(goe),YXe=Object.assign((e,t=ct)=>{VXe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>YXe}),vj={},xj={},bj={},pK;function JXe(){return pK||(pK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(bj)),bj}var yj={},wj={},gK;function voe(){return gK||(gK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(wj)),wj}var vK;function ZXe(){return vK||(vK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=voe(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(yj)),yj}var xK;function eYe(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JXe(),r=ZXe(),n=XP();function a(s,i,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let v=p;for(let b=0;b<g.length&&v!=null;++b)v=v[g[b]];return v},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(p.criteria[v],g.criteria[v],o[v]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(xj)),xj}var Ej={},bK;function tYe(){return bK||(bK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<s?i(d,l+1):a.push(d)}};return i(r,0),a}e.flatten=t}(Ej)),Ej}var Cj={},yK;function xoe(){return yK||(yK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=poe(),r=eL(),n=Aoe(),a=tL();function s(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],i):!1}e.isIterateeCall=s}(Cj)),Cj}var wK;function rYe(){return wK||(wK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eYe(),r=tYe(),n=xoe();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(vj)),vj}var _j,EK;function nYe(){return EK||(EK=1,_j=rYe().sortBy),_j}var aYe=nYe();const q4=yl(aYe);var boe=e=>e.legend.settings,sYe=e=>e.legend.size,iYe=e=>e.legend.payload;ct([iYe,boe],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?q4(n,r):n});var XC=1;function oYe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>XC||Math.abs(i.left-t.left)>XC||Math.abs(i.top-t.top)>XC||Math.abs(i.width-t.width)>XC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function uo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lYe=typeof Symbol=="function"&&Symbol.observable||"@@observable",CK=lYe,Sj=()=>Math.random().toString(36).substring(7).split("").join("."),cYe={INIT:`@@redux/INIT${Sj()}`,REPLACE:`@@redux/REPLACE${Sj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Sj()}`},k5=cYe;function oL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yoe(e,t,r){if(typeof e!="function")throw new Error(uo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(uo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(uo(1));return r(yoe)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(l)throw new Error(uo(3));return a}function f(b){if(typeof b!="function")throw new Error(uo(4));if(l)throw new Error(uo(5));let y=!0;u();const C=o++;return i.set(C,b),function(){if(y){if(l)throw new Error(uo(6));y=!1,u(),i.delete(C),s=null}}}function h(b){if(!oL(b))throw new Error(uo(7));if(typeof b.type>"u")throw new Error(uo(8));if(typeof b.type!="string")throw new Error(uo(17));if(l)throw new Error(uo(9));try{l=!0,a=n(a,b)}finally{l=!1}return(s=i).forEach(C=>{C()}),b}function p(b){if(typeof b!="function")throw new Error(uo(10));n=b,h({type:k5.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(uo(11));function C(){const I=y;I.next&&I.next(d())}return C(),{unsubscribe:b(C)}},[CK](){return this}}}return h({type:k5.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[CK]:g}}function uYe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:k5.INIT})>"u")throw new Error(uo(12));if(typeof r(void 0,{type:k5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(uo(13))})}function woe(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{uYe(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(uo(14));u[f]=g,l=l||g!==p}return l=l||n.length!==Object.keys(i).length,l?u:i}}function B5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function dYe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(uo(15))};const i={getState:a.getState,dispatch:(l,...u)=>s(l,...u)},o=e.map(l=>l(i));return s=B5(...o)(a.dispatch),{...a,dispatch:s}}}function Eoe(e){return oL(e)&&"type"in e&&typeof e.type=="string"}var Coe=Symbol.for("immer-nothing"),_K=Symbol.for("immer-draftable"),Lc=Symbol.for("immer-state");function md(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vx=Object.getPrototypeOf;function tg(e){return!!e&&!!e[Lc]}function Ah(e){var t;return e?_oe(e)||Array.isArray(e)||!!e[_K]||!!((t=e.constructor)!=null&&t[_K])||X4(e)||Y4(e):!1}var AYe=Object.prototype.constructor.toString();function _oe(e){if(!e||typeof e!="object")return!1;const t=Vx(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===AYe}function T5(e,t){W4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function W4(e){const t=e[Lc];return t?t.type_:Array.isArray(e)?1:X4(e)?2:Y4(e)?3:0}function V6(e,t){return W4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Soe(e,t,r){const n=W4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function fYe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function X4(e){return e instanceof Map}function Y4(e){return e instanceof Set}function ap(e){return e.copy_||e.base_}function z6(e,t){if(X4(e))return new Map(e);if(Y4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_oe(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Lc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Vx(e),n)}else{const n=Vx(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function lL(e,t=!1){return J4(e)||tg(e)||!Ah(e)||(W4(e)>1&&(e.set=e.add=e.clear=e.delete=hYe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>lL(n,!0))),e}function hYe(){md(2)}function J4(e){return Object.isFrozen(e)}var mYe={};function rg(e){const t=mYe[e];return t||md(0,e),t}var Iw;function Noe(){return Iw}function pYe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SK(e,t){t&&(rg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $6(e){G6(e),e.drafts_.forEach(gYe),e.drafts_=null}function G6(e){e===Iw&&(Iw=e.parent_)}function NK(e){return Iw=pYe(Iw,e)}function gYe(e){const t=e[Lc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function kK(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Lc].modified_&&($6(t),md(4)),Ah(e)&&(e=j5(t,e),t.parent_||I5(t,e)),t.patches_&&rg("Patches").generateReplacementPatches_(r[Lc].base_,e,t.patches_,t.inversePatches_)):e=j5(t,r,[]),$6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Coe?e:void 0}function j5(e,t,r){if(J4(t))return t;const n=t[Lc];if(!n)return T5(t,(a,s)=>BK(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return I5(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),T5(s,(o,l)=>BK(e,n,a,o,l,r,i)),I5(e,a,!1),r&&e.patches_&&rg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function BK(e,t,r,n,a,s,i){if(tg(a)){const o=s&&t&&t.type_!==3&&!V6(t.assigned_,n)?s.concat(n):void 0,l=j5(e,a,o);if(Soe(r,n,l),tg(l))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Ah(a)&&!J4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;j5(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&I5(e,a)}}function I5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lL(t,r)}function vYe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Noe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=cL;r&&(a=[n],s=Fw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var cL={get(e,t){if(t===Lc)return e;const r=ap(e);if(!V6(r,t))return xYe(e,r,t);const n=r[t];return e.finalized_||!Ah(n)?n:n===Nj(e.base_,t)?(kj(e),e.copy_[t]=q6(n,e)):n},has(e,t){return t in ap(e)},ownKeys(e){return Reflect.ownKeys(ap(e))},set(e,t,r){const n=koe(ap(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Nj(ap(e),t),s=a==null?void 0:a[Lc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(fYe(r,a)&&(r!==void 0||V6(e.base_,t)))return!0;kj(e),K6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Nj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,kj(e),K6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ap(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){md(11)},getPrototypeOf(e){return Vx(e.base_)},setPrototypeOf(){md(12)}},Fw={};T5(cL,(e,t)=>{Fw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Fw.deleteProperty=function(e,t){return Fw.set.call(this,e,t,void 0)};Fw.set=function(e,t,r){return cL.set.call(this,e[0],t,r,e[0])};function Nj(e,t){const r=e[Lc];return(r?ap(r):e)[t]}function xYe(e,t,r){var a;const n=koe(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function koe(e,t){if(!(t in e))return;let r=Vx(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Vx(r)}}function K6(e){e.modified_||(e.modified_=!0,e.parent_&&K6(e.parent_))}function kj(e){e.copy_||(e.copy_=z6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bYe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(l=s,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&md(6),n!==void 0&&typeof n!="function"&&md(7);let a;if(Ah(t)){const s=NK(this),i=q6(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?$6(s):G6(s)}return SK(s,n),kK(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Coe&&(a=void 0),this.autoFreeze_&&lL(a,!0),n){const s=[],i=[];rg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else md(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ah(e)||md(8),tg(e)&&(e=Yf(e));const t=NK(this),r=q6(e,void 0);return r[Lc].isManual_=!0,G6(t),r}finishDraft(e,t){const r=e&&e[Lc];(!r||!r.isManual_)&&md(9);const{scope_:n}=r;return SK(n,t),kK(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=rg("Patches").applyPatches_;return tg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function q6(e,t){const r=X4(e)?rg("MapSet").proxyMap_(e,t):Y4(e)?rg("MapSet").proxySet_(e,t):vYe(e,t);return(t?t.scope_:Noe()).drafts_.push(r),r}function Yf(e){return tg(e)||md(10,e),Boe(e)}function Boe(e){if(!Ah(e)||J4(e))return e;const t=e[Lc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=z6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=z6(e,!0);return T5(r,(n,a)=>{Soe(r,n,Boe(a))}),t&&(t.finalized_=!1),r}var Mc=new bYe,Toe=Mc.produce;Mc.produceWithPatches.bind(Mc);Mc.setAutoFreeze.bind(Mc);Mc.setUseStrictShallowCopy.bind(Mc);Mc.applyPatches.bind(Mc);Mc.createDraft.bind(Mc);Mc.finishDraft.bind(Mc);function joe(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var yYe=joe(),wYe=joe,EYe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?B5:B5.apply(null,arguments)};function Ou(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Oc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Eoe(n)&&n.type===e,r}var Ioe=class dy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dy.prototype)}static get[Symbol.species](){return dy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dy(...t[0].concat(this)):new dy(...t.concat(this))}};function TK(e){return Ah(e)?Toe(e,()=>{}):e}function YC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function CYe(e){return typeof e=="boolean"}var _Ye=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new Ioe;return r&&(CYe(r)?i.push(yYe):i.push(wYe(r.extraArgument))),i},SYe="RTK_autoBatch",jK=e=>t=>{setTimeout(t,e)},NYe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jK(10):e.type==="callback"?e.queueNotification:jK(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[SYe]),s=!a,s&&(i||(i=!0,l(u))),n.dispatch(d)}finally{a=!0}}})},kYe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Ioe(e);return n&&a.push(NYe(typeof n=="object"?n:void 0)),a};function BYe(e){const t=_Ye(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(oL(r))o=woe(r);else throw new Error(Oc(1));let l;typeof n=="function"?l=n(t):l=t();let u=B5;a&&(u=EYe({trace:!1,...typeof a=="object"&&a}));const d=dYe(...l),f=kYe(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return yoe(o,s,p)}function Foe(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Oc(28));if(o in t)throw new Error(Oc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function TYe(e){return typeof e=="function"}function jYe(e,t){let[r,n,a]=Foe(t),s;if(TYe(e))s=()=>TK(e());else{const o=TK(e);s=()=>o}function i(o=s(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(tg(d)){const p=f(d,l);return p===void 0?d:p}else{if(Ah(d))return Toe(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var IYe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",FYe=(e=21)=>{let t="",r=e;for(;r--;)t+=IYe[Math.random()*64|0];return t},OYe=Symbol.for("rtk-slice-createasyncthunk");function DYe(e,t){return`${e}/${t}`}function RYe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[OYe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Oc(11));const o=(typeof a.reducers=="function"?a.reducers(LYe()):a.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(I,N){const B=typeof I=="string"?I:I.type;if(!B)throw new Error(Oc(12));if(B in u.sliceCaseReducersByType)throw new Error(Oc(13));return u.sliceCaseReducersByType[B]=N,d},addMatcher(I,N){return u.sliceMatchers.push({matcher:I,reducer:N}),d},exposeAction(I,N){return u.actionCreators[I]=N,d},exposeCaseReducer(I,N){return u.sliceCaseReducersByName[I]=N,d}};l.forEach(I=>{const N=o[I],B={reducerName:I,type:DYe(s,I),createNotation:typeof a.reducers=="function"};UYe(N)?HYe(B,N,d,t):MYe(B,N,d)});function f(){const[I={},N=[],B=void 0]=typeof a.extraReducers=="function"?Foe(a.extraReducers):[a.extraReducers],w={...I,...u.sliceCaseReducersByType};return jYe(a.initialState,_=>{for(let F in w)_.addCase(F,w[F]);for(let F of u.sliceMatchers)_.addMatcher(F.matcher,F.reducer);for(let F of N)_.addMatcher(F.matcher,F.reducer);B&&_.addDefaultCase(B)})}const h=I=>I,p=new Map,g=new WeakMap;let v;function b(I,N){return v||(v=f()),v(I,N)}function y(){return v||(v=f()),v.getInitialState()}function C(I,N=!1){function B(_){let F=_[I];return typeof F>"u"&&N&&(F=YC(g,B,y)),F}function w(_=h){const F=YC(p,N,()=>new WeakMap);return YC(F,_,()=>{const U={};for(const[D,k]of Object.entries(a.selectors??{}))U[D]=PYe(k,_,()=>YC(g,_,y),N);return U})}return{reducerPath:I,getSelectors:w,get selectors(){return w(B)},selectSlice:B}}const S={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...C(i),injectInto(I,{reducerPath:N,...B}={}){const w=N??i;return I.inject({reducerPath:w,reducer:b},B),{...S,...C(w,!0)}}};return S}}function PYe(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Qc=RYe();function LYe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function MYe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!QYe(n))throw new Error(Oc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Ou(e,i):Ou(e))}function UYe(e){return e._reducerDefinitionType==="asyncThunk"}function QYe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function HYe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Oc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||JC,pending:o||JC,rejected:l||JC,settled:u||JC})}function JC(){}var VYe="task",Ooe="listener",Doe="completed",uL="cancelled",zYe=`task-${uL}`,$Ye=`task-${Doe}`,W6=`${Ooe}-${uL}`,GYe=`${Ooe}-${Doe}`,Z4=class{constructor(e){SB(this,"name","TaskAbortError");SB(this,"message");this.code=e,this.message=`${VYe} ${uL} (reason: ${e})`}},dL=(e,t)=>{if(typeof e!="function")throw new TypeError(Oc(32))},F5=()=>{},Roe=(e,t=F5)=>(e.catch(t),e),Poe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Rp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Pp=e=>{if(e.aborted){const{reason:t}=e;throw new Z4(t)}};function Loe(e,t){let r=F5;return new Promise((n,a)=>{const s=()=>a(new Z4(e.reason));if(e.aborted){s();return}r=Poe(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=F5})}var KYe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Z4?"cancelled":"rejected",error:r}}finally{t==null||t()}},O5=e=>t=>Roe(Loe(e,t).then(r=>(Pp(e),r))),Moe=e=>{const t=O5(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:mx}=Object,IK={},ek="listenerMiddleware",qYe=(e,t)=>{const r=n=>Poe(e,()=>Rp(n,e.reason));return(n,a)=>{dL(n);const s=new AbortController;r(s);const i=KYe(async()=>{Pp(e),Pp(s.signal);const o=await n({pause:O5(s.signal),delay:Moe(s.signal),signal:s.signal});return Pp(s.signal),o},()=>Rp(s,$Ye));return a!=null&&a.autoJoin&&t.push(i.catch(F5)),{result:O5(e)(i),cancel(){Rp(s,zYe)}}}},WYe=(e,t)=>{const r=async(n,a)=>{Pp(t);let s=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await Loe(t,Promise.race(o));return Pp(t),l}finally{s()}};return(n,a)=>Roe(r(n,a))},Uoe=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Ou(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Oc(21));return dL(s),{predicate:a,type:t,effect:s}},Qoe=mx(e=>{const{type:t,predicate:r,effect:n}=Uoe(e);return{id:FYe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Oc(22))}}},{withTypes:()=>Qoe}),FK=(e,t)=>{const{type:r,effect:n,predicate:a}=Uoe(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},X6=e=>{e.pending.forEach(t=>{Rp(t,W6)})},XYe=e=>()=>{e.forEach(X6),e.clear()},OK=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Hoe=mx(Ou(`${ek}/add`),{withTypes:()=>Hoe}),YYe=Ou(`${ek}/removeAll`),Voe=mx(Ou(`${ek}/remove`),{withTypes:()=>Voe}),JYe=(...e)=>{console.error(`${ek}/error`,...e)},E2=(e={})=>{const t=new Map,{extra:r,onError:n=JYe}=e;dL(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&X6(d)}),s=d=>{const f=FK(t,d)??Qoe(d);return a(f)};mx(s,{withTypes:()=>s});const i=d=>{const f=FK(t,d);return f&&(f.unsubscribe(),d.cancelActive&&X6(f)),!!f};mx(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,v=WYe(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,mx({},h,{getOriginalState:p,condition:(y,C)=>v(y,C).then(Boolean),take:v,delay:Moe(g.signal),pause:O5(g.signal),extra:r,signal:g.signal,fork:qYe(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,C,S)=>{y!==g&&(Rp(y,W6),S.delete(y))})},cancel:()=>{Rp(g,W6),d.pending.delete(g)},throwIfCancelled:()=>{Pp(g.signal)}})))}catch(y){y instanceof Z4||OK(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Rp(g,GYe),d.pending.delete(g)}},l=XYe(t);return{middleware:d=>f=>h=>{if(!Eoe(h))return f(h);if(Hoe.match(h))return s(h.payload);if(YYe.match(h)){l();return}if(Voe.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===IK)throw new Error(Oc(23));return p};let v;try{if(v=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const C of y){let S=!1;try{S=C.predicate(h,b,p)}catch(I){S=!1,OK(n,I,{raisedBy:"predicate"})}S&&o(C,h,d,g)}}}finally{p=IK}return v},startListening:s,stopListening:i,clearListeners:l}};function Oc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ZYe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},zoe=Qc({name:"chartLayout",initialState:ZYe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:eJe,setLayout:tJe,setChartSize:rJe,setScale:nJe}=zoe.actions,aJe=zoe.reducer;function DK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DK(Object(r),!0).forEach(function(n){sJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sJe(e,t,r){return(t=iJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iJe(e){var t=oJe(e,"string");return typeof t=="symbol"?t:t+""}function oJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D5=Math.PI/180,lJe=e=>e*180/Math.PI,ta=(e,t,r,n)=>({x:e+Math.cos(-D5*n)*r,y:t+Math.sin(-D5*n)*r}),$oe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},cJe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},uJe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=cJe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:lJe(l),angleInRadian:l}},dJe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},AJe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},fJe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=uJe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:l,endAngle:u}=dJe(t),d=s,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?RK(RK({},t),{},{radius:a,angle:AJe(d,t)}):null},Goe=e=>!T.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Koe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(n){hJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hJe(e,t,r){return(t=mJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mJe(e){var t=pJe(e,"string");return typeof t=="symbol"?t:t+""}function pJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Da(e,t,r){return Ts(e)||Ts(t)?r:VA(t)?fm(e,t,r):typeof t=="function"?t(e):r}var gJe=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Xi(d-u)!==Xi(f-d)){var p=[];if(Xi(f-d)===Xi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var v=f+a[1]-a[0];p[0]=Math.min(d,(v+d)/2),p[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[l]);break}}else{var y=Math.min(u,f),C=Math.max(u,f);if(e>(y+d)/2&&e<=(C+d)/2){({index:i}=r[l]);break}}}else if(t){for(var S=0;S<o;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:i}=t[S]);break}}return i},vJe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return Eu(Eu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return Eu(Eu({},e),{},{[i]:e[i]+(a||0)})}return e},Cm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",qoe=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Woe=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(v=p==="angleAxis"&&s&&s.length>=2?Xi(s[0]-s[1])*2*v:v,f||h){var b=(f||h||[]).map((y,C)=>{var S=n?n.indexOf(y):y;return{coordinate:i(S)+v,value:y,offset:v,index:C}});return b.filter(y=>!Pc(y.coordinate))}return l&&u?u.map((y,C)=>({coordinate:i(y)+v,value:y,index:C,offset:v})):i.ticks&&d!=null?i.ticks(d).map((y,C)=>({coordinate:i(y)+v,value:y,offset:v,index:C})):i.domain().map((y,C)=>({coordinate:i(y)+v,value:n?n[y]:y,index:C,offset:v}))},LK=1e-4,xJe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-LK,s=Math.max(n[0],n[1])+LK,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},bJe=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},yJe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Pc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},wJe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Pc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},EJe={sign:yJe,expand:hKe,none:Qx,silhouette:mKe,wiggle:pKe,positive:wJe},CJe=(e,t,r)=>{var n=EJe[r],a=fKe().keys(t).value((s,i)=>+Da(s,i,0)).order(N6).offset(n);return a(e)};function _Je(e){return e==null?void 0:String(e)}var MK=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Da(s,t.dataKey,t.scale.domain()[i]);return Ts(o)?null:t.scale(o)-a/2+n},SJe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},NJe=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},kJe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],BJe=(e,t,r)=>{if(e!=null)return kJe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((l,u)=>{var d=Koe(u,t,r),f=NJe(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},UK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ow=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=q4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],u=a[i-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function HK(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Eu(Eu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function v1(e,t){if(e)return String(e);if(typeof t=="string")return t}function TJe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?fJe({x:e,y:t},n):null}var jJe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Eu(Eu(Eu({},n),ta(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return Eu(Eu(Eu({},n),ta(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},IJe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Eh=e=>e.layout.width,Ch=e=>e.layout.height,FJe=e=>e.layout.scale,Xoe=e=>e.layout.margin,AL=ct(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),fL=ct(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Yoe="data-recharts-item-index",Joe="data-recharts-item-data-key",tk=60;function VK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VK(Object(r),!0).forEach(function(n){OJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OJe(e,t,r){return(t=DJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DJe(e){var t=RJe(e,"string");return typeof t=="symbol"?t:t+""}function RJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PJe=e=>e.brush.height,Bi=ct([Eh,Ch,Xoe,PJe,AL,fL,boe,sYe],(e,t,r,n,a,s,i,o)=>{var l=s.reduce((g,v)=>{var{orientation:b}=v;if(!v.mirror&&!v.hide){var y=typeof v.width=="number"?v.width:tk;return f0(f0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,v)=>{var{orientation:b}=v;return!v.mirror&&!v.hide?f0(f0({},g),{},{[b]:fm(g,"".concat(b))+v.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=f0(f0({},u),l),f=d.bottom;d.bottom+=n,d=vJe(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return f0(f0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),LJe=ct(Bi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Zoe=ct(Eh,Ch,(e,t)=>({x:0,y:0,width:e,height:t})),MJe=T.createContext(null),tc=()=>T.useContext(MJe)!=null,rk=e=>e.brush,nk=ct([rk,Bi,Xoe],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),hL=()=>{var e,t=tc(),r=ir(LJe),n=ir(nk),a=(e=ir(rk))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},UJe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ele=()=>{var e;return(e=ir(Bi))!==null&&e!==void 0?e:UJe},tle=()=>ir(Eh),rle=()=>ir(Ch),In=e=>e.layout.layoutType,mL=()=>ir(In),QJe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},nle=Qc({name:"legend",initialState:QJe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Yf(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Edt,setLegendSettings:Cdt,addLegendPayload:ale,removeLegendPayload:sle}=nle.actions,HJe=nle.reducer;function Y6(){return Y6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y6.apply(null,arguments)}function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(n){VJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VJe(e,t,r){return(t=zJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zJe(e){var t=$Je(e,"string");return typeof t=="symbol"?t:t+""}function $Je(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GJe(e){return Array.isArray(e)&&VA(e[0])&&VA(e[1])?e.join(" ~ "):e}var KJe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var N={padding:0,margin:0},B=(o?q4(s,o):s).map((w,_)=>{if(w.type==="none")return null;var F=w.formatter||i||GJe,{value:U,name:D}=w,k=U,L=D;if(F){var R=F(U,D,w,_,s);if(Array.isArray(R))[k,L]=R;else if(R!=null)k=R;else return null}var X=Bj({display:"block",paddingTop:4,paddingBottom:4,color:w.color||"#000"},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:X},VA(L)?T.createElement("span",{className:"recharts-tooltip-item-name"},L):null,VA(L)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},k),T.createElement("span",{className:"recharts-tooltip-item-unit"},w.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:N},B)}return null},g=Bj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Bj({margin:0},a),b=!Ts(d),y=b?d:"",C=Cn("recharts-default-tooltip",l),S=Cn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var I=h?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",Y6({className:C,style:g},I),T.createElement("p",{className:S,style:v},T.isValidElement(y)?y:"".concat(y)),p())},Lb="recharts-tooltip-wrapper",qJe={visibility:"hidden"};function WJe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Cn(Lb,{["".concat(Lb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Lb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Lb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Lb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function $K(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var v=f+o,b=h+u;return v>b?Math.max(d,h):Math.max(f,h)}function XJe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function YJe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=$K({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=$K({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=XJe({translateX:d,translateY:f,useTranslate3d:o})):u=qJe,{cssProperties:u,cssClasses:WJe({translateX:d,translateY:f,coordinate:r})}}function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(n){J6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J6(e,t,r){return(t=JJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJe(e){var t=ZJe(e,"string");return typeof t=="symbol"?t:t+""}function ZJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eZe extends T.PureComponent{constructor(){super(...arguments),J6(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),J6(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:v,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:C,cssProperties:S}=YJe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),I=y?{}:ZC(ZC({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=ZC(ZC({},I),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:N,ref:b},s)}}var tZe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),bg={isSsr:tZe()},ile=()=>ir(e=>e.rootProps.accessibilityLayer);function Uc(e){return Number.isFinite(e)}function zx(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Z6(){return Z6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z6.apply(null,arguments)}function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(n){rZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rZe(e,t,r){return(t=nZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nZe(e){var t=aZe(e,"string");return typeof t=="symbol"?t:t+""}function aZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WK={curveBasisClosed:rKe,curveBasisOpen:nKe,curveBasis:tKe,curveBumpX:QGe,curveBumpY:HGe,curveLinearClosed:aKe,curveLinear:L4,curveMonotoneX:sKe,curveMonotoneY:iKe,curveNatural:oKe,curveStep:lKe,curveStepAfter:uKe,curveStepBefore:cKe},e_=e=>Uc(e.x)&&Uc(e.y),Mb=e=>e.x,Ub=e=>e.y,sZe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(y2(e));return(r==="curveMonotone"||r==="curveBump")&&t?WK["".concat(r).concat(t==="vertical"?"Y":"X")]:WK[r]||L4},iZe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=sZe(t,a),o=s?r.filter(e_):r,l;if(Array.isArray(n)){var u=s?n.filter(f=>e_(f)):n,d=o.map((f,h)=>qK(qK({},f),{},{base:u[h]}));return a==="vertical"?l=UC().y(Ub).x1(Mb).x0(f=>f.base.x):l=UC().x(Mb).y1(Ub).y0(f=>f.base.y),l.defined(e_).curve(i),l(d)}return a==="vertical"&&ur(n)?l=UC().y(Ub).x1(Mb).x0(n):ur(n)?l=UC().x(Mb).y1(Ub).y0(n):l=aie().x(Mb).y(Ub),l.defined(e_).curve(i),l(o)},ole=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?iZe(e):n;return T.createElement("path",Z6({},nl(e),ZP(e),{className:Cn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},oZe=["x","y","top","left","width","height","className"];function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(null,arguments)}function XK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lZe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XK(Object(r),!0).forEach(function(n){cZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cZe(e,t,r){return(t=uZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZe(e){var t=dZe(e,"string");return typeof t=="symbol"?t:t+""}function dZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AZe(e,t){if(e==null)return{};var r,n,a=fZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hZe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),mZe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,l=AZe(e,oZe),u=lZe({x:t,y:r,top:n,left:a,width:s,height:i},l);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:T.createElement("path",eO({},Xn(u,!0),{className:Cn("recharts-cross",o),d:hZe(t,r,s,i,n,a)}))};function pZe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function YK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gZe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YK(Object(r),!0).forEach(function(n){vZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vZe(e,t,r){return(t=xZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZe(e){var t=bZe(e,"string");return typeof t=="symbol"?t:t+""}function bZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lu(e,t){var r=gZe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var Tj={},jj={},Ij={},JK;function yZe(){return JK||(JK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(Ij)),Ij}var ZK;function wZe(){return ZK||(ZK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yZe(),r=hoe(),n=nL(),a=aL(),s=tL();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,v){const b=v(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,g,v)}return l(u,d,g,v)}function l(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),C=d.valueOf();return s.eq(y,C)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),b=f.get(d);if(v!=null&&b!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,C]of u.entries())if(!d.has(y)||!o(C,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),C=Array.from(d.values());for(let S=0;S<y.length;S++){const I=y[S],N=C.findIndex(B=>o(I,B,void 0,u,d,f,h));if(N===-1)return!1;C.splice(N,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(l(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const C=[...Object.keys(u),...r.getSymbols(u)],S=[...Object.keys(d),...r.getSymbols(d)];if(C.length!==S.length)return!1;for(let I=0;I<C.length;I++){const N=C[I],B=u[N];if(!Object.hasOwn(d,N))return!1;const w=d[N];if(!o(B,w,N,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(jj)),jj}var Fj={},eq;function EZe(){return eq||(eq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Fj)),Fj}var tq;function CZe(){return tq||(tq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wZe(),r=EZe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(Tj)),Tj}var Oj,rq;function _Ze(){return rq||(rq=1,Oj=CZe().isEqual),Oj}var SZe=_Ze();const NZe=yl(SZe);var R5=1e-4,lle=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],cle=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),nq=(e,t)=>r=>{var n=lle(e,t);return cle(n,r)},kZe=(e,t)=>r=>{var n=lle(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return cle(a,r)},aq=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=nq(t,r),d=nq(n,a),f=kZe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var v=g>1?1:g,b=v,y=0;y<8;++y){var C=u(b)-v,S=f(b);if(Math.abs(C-v)<R5||S<R5)return d(b);b=h(b-C/S)}return d(b)};return p.isStepper=!1,p},BZe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*a/1e3,h=l*a/1e3+i;return Math.abs(h-o)<R5&&Math.abs(f)<R5?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},ule=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return aq(e);case"spring":return BZe();default:if(e.split("(")[0]==="cubic-bezier")return aq(e)}return typeof e=="function"?e:null};function sq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sq(Object(r),!0).forEach(function(n){TZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TZe(e,t,r){return(t=jZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jZe(e){var t=IZe(e,"string");return typeof t=="symbol"?t:t+""}function IZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FZe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),OZe=(e,t,r)=>e.map(n=>"".concat(FZe(n)," ").concat(t,"ms ").concat(r)).join(","),DZe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Dw=(e,t)=>Object.keys(t).reduce((r,n)=>iq(iq({},r),{},{[n]:e(n,t[n])}),{});function oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oq(Object(r),!0).forEach(function(n){RZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RZe(e,t,r){return(t=PZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PZe(e){var t=LZe(e,"string");return typeof t=="symbol"?t:t+""}function LZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P5=(e,t,r)=>e+(t-e)*r,tO=e=>{var{from:t,to:r}=e;return t!==r},dle=(e,t,r)=>{var n=Dw((a,s)=>{if(tO(s)){var[i,o]=e(s.from,s.to,s.velocity);return mo(mo({},s),{},{from:i,velocity:o})}return s},t);return r<1?Dw((a,s)=>tO(s)?mo(mo({},s),{},{velocity:P5(s.velocity,n[a].velocity,r),from:P5(s.from,n[a].from,r)}):s,t):dle(e,n,r-1)};function MZe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>mo(mo({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Dw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(tO).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=dle(r,o,g),a(mo(mo(mo({},e),t),l())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function UZe(e,t,r,n,a,s,i){var o=null,l=a.reduce((f,h)=>mo(mo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Dw((v,b)=>P5(...b,r(h)),l);if(s(mo(mo(mo({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=Dw((v,b)=>P5(...b,r(1)),l);s(mo(mo(mo({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Ale=(e,t,r,n,a,s)=>{var i=DZe(e,t);return r.isStepper===!0?MZe(e,t,r,i,a,s):UZe(e,t,r,n,i,a,s)};function QZe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){a=e.setTimeout(s.bind(null,u),l);return}s(l),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class HZe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function VZe(){return QZe(new HZe)}var zZe=T.createContext(VZe);function fle(e,t){var r=T.useContext(zZe);return T.useMemo(()=>t??r(e),[e,t,r])}var $Ze=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function rO(){return rO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rO.apply(null,arguments)}function GZe(e,t){if(e==null)return{};var r,n,a=KZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){vp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vp(e,t,r){return(t=qZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qZe(e){var t=WZe(e,"string");return typeof t=="symbol"?t:t+""}function WZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pL extends T.PureComponent{constructor(t,r){super(t,r),vp(this,"mounted",!1),vp(this,"manager",void 0),vp(this,"stopJSAnimation",null),vp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:l}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(u);return}if(!(NZe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&l){var h={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(h)}this.runAnimation(h0(h0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l}=t,u=Ale(r,n,ule(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=OZe(Object.keys(d),n,i);this.manager.start([o,r,h0(h0({},d),{},{transition:f}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,v=GZe(t,$Ze),b=T.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var C=S=>{var{style:I={},className:N}=S.props,B=T.cloneElement(S,h0(h0({},v),{},{style:h0(h0({},I),y),className:N}));return B};return b===1?C(T.Children.only(r)):T.createElement("div",null,T.Children.map(r,S=>C(S)))}}vp(pL,"displayName","Animate");vp(pL,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function L5(e){var t,r=fle((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return T.createElement(pL,rO({},e,{animationManager:r}))}function M5(){return M5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M5.apply(null,arguments)}var cq=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},XZe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hle=e=>{var t=Lu(e,XZe),r=T.useRef(null),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:v}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var b=Cn("recharts-rectangle",d);return v?T.createElement(L5,{canBegin:n>0,from:{width:o,height:l,x:s,y:i},to:{width:o,height:l,x:s,y:i},duration:h,animationEasing:f,isActive:v},y=>{var{width:C,height:S,x:I,y:N}=y;return T.createElement(L5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},T.createElement("path",M5({},Xn(t,!0),{className:b,d:cq(I,N,C,S,u),ref:r})))}):T.createElement("path",M5({},Xn(t,!0),{className:b,d:cq(s,i,o,l,u)}))};function mle(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ta(t,r,n,a),o=ta(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nO.apply(null,arguments)}var YZe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},t_=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/D5,f=l?a:a+s*d,h=ta(t,r,u,f),p=ta(t,r,n,f),g=l?a-s*d:a,v=ta(t,r,u*Math.cos(d*D5),g);return{center:h,circleTangency:p,lineTangency:v,theta:d}},ple=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=YZe(s,i),l=s+o,u=ta(t,r,a,s),d=ta(t,r,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ta(t,r,n,s),p=ta(t,r,n,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},JZe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=Xi(u-l),{circleTangency:f,lineTangency:h,theta:p}=t_({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:b}=t_({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):ple({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u});var C="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:I,theta:N}=t_({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:B,lineTangency:w,theta:_}=t_({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),F=o?Math.abs(l-u):Math.abs(l-u)-N-_;if(F<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},ZZe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gle=e=>{var t=Lu(e,ZZe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=Cn("recharts-sector",f),p=s-a,g=bl(i,p,0,!0),v;return g>0&&Math.abs(u-d)<360?v=JZe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):v=ple({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),T.createElement("path",nO({},Xn(t,!0),{className:h,d:v}))};function eet(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=ta(o,l,u,f),p=ta(o,l,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return mle(t);return[{x:n,y:a},{x:s,y:i}]}var Dj={},Rj={},Pj={},uq;function tet(){return uq||(uq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=voe();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(Pj)),Pj}var dq;function ret(){return dq||(dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tet();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(Rj)),Rj}var Aq;function net(){return Aq||(Aq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xoe(),r=ret();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=a,a+=i;return l}e.range=n}(Dj)),Dj}var Lj,fq;function aet(){return fq||(fq=1,Lj=net().range),Lj}var set=aet();const vle=yl(set),Ay=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bP,scaleDiverging:Yse,scaleDivergingLog:Jse,scaleDivergingPow:DP,scaleDivergingSqrt:LGe,scaleDivergingSymlog:Zse,scaleIdentity:jse,scaleImplicit:C6,scaleLinear:Tse,scaleLog:Fse,scaleOrdinal:T4,scalePoint:i$e,scalePow:_P,scaleQuantile:Rse,scaleQuantize:Pse,scaleRadial:Dse,scaleSequential:Kse,scaleSequentialLog:qse,scaleSequentialPow:OP,scaleSequentialQuantile:Xse,scaleSequentialSqrt:PGe,scaleSequentialSymlog:Wse,scaleSqrt:v$e,scaleSymlog:Ose,scaleThreshold:Lse,scaleTime:DGe,scaleUtc:RGe,tickFormat:Bse},Symbol.toStringTag,{value:"Module"}));var _m=e=>e.chartData,ak=ct([_m],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),gL=(e,t,r,n)=>n?ak(e):_m(e);function $x(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Uc(t)&&Uc(r))return!0}return!1}function hq(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iet(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Uc(r))a=r;else if(typeof r=="function")return;if(Uc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if($x(i))return i}}function oet(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if($x(n))return hq(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&UK.test(a)){var l=UK.exec(a);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&QK.test(s)){var d=QK.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if($x(h))return t==null?h:hq(h,t,r)}}}var x1=1e9,cet={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xL,Ja=!0,Du="[DecimalError] ",Lp=Du+"Invalid argument: ",vL=Du+"Exponent out of range: ",b1=Math.floor,sp=Math.pow,uet=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tc,zi=1e7,La=7,xle=9007199254740991,U5=b1(xle/La),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};dr.dividedBy=dr.div=function(e){return Jf(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,r=t.constructor;return ka(Jf(t,new r(e),0,1),r.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return mi(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Tc))throw Error(Du+"NaN");if(r.s<1)throw Error(Du+(r.s?"NaN":"-Infinity"));return r.eq(Tc)?new n(0):(Ja=!1,t=Jf(Rw(r,s),Rw(e,s),s),Ja=!0,ka(t,a))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wle(t,e):ble(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Du+"NaN");return r.s?(Ja=!1,t=Jf(r,e,0,1).times(e),Ja=!0,r.minus(t)):ka(new n(r),a)};dr.naturalExponential=dr.exp=function(){return yle(this)};dr.naturalLogarithm=dr.ln=function(){return Rw(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ble(t,e):wle(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lp+e);if(t=mi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};dr.squareRoot=dr.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Du+"NaN")}for(e=mi(o),Ja=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=TA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=b1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=i=r+3;;)if(s=n,n=s.plus(Jf(o,s,i+2)).times(.5),TA(s.d).slice(0,i)===(t=TA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(ka(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Ja=!0,ka(n,r)};dr.times=dr.mul=function(e){var t,r,n,a,s,i,o,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=p.length,l<u&&(s=h,h=p,p=s,i=l,l=u,u=i),s=[],i=l+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%zi|0,t=o/zi|0;s[a]=(s[a]+t)%zi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ja?ka(e,f.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(zA(e,0,x1),t===void 0?t=n.rounding:zA(t,0,8),ka(r,e+mi(r)+1,t))};dr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ng(n,!0):(zA(e,0,x1),t===void 0?t=a.rounding:zA(t,0,8),n=ka(new a(n),e+1,t),r=ng(n,!0,e+1)),r};dr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?ng(a):(zA(e,0,x1),t===void 0?t=s.rounding:zA(t,0,8),n=ka(new s(a),e+mi(a)+1,t),r=ng(n.abs(),!1,e+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return ka(new t(e),mi(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Tc);if(o=new l(o),!o.s){if(e.s<1)throw Error(Du+"Infinity");return o}if(o.eq(Tc))return o;if(n=l.precision,e.eq(Tc))return ka(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=xle){for(a=new l(Tc),t=Math.ceil(n/La+4),Ja=!1;r%2&&(a=a.times(o),pq(a.d,t)),r=b1(r/2),r!==0;)o=o.times(o),pq(o.d,t);return Ja=!0,e.s<0?new l(Tc).div(a):ka(a,n)}}else if(s<0)throw Error(Du+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ja=!1,a=e.times(Rw(o,n+u)),Ja=!0,a=yle(a),a.s=s,a};dr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=mi(a),n=ng(a,r<=s.toExpNeg||r>=s.toExpPos)):(zA(e,1,x1),t===void 0?t=s.rounding:zA(t,0,8),a=ka(new s(a),e,t),r=mi(a),n=ng(a,e<=r||r<=s.toExpNeg,e)),n};dr.toSignificantDigits=dr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zA(e,1,x1),t===void 0?t=n.rounding:zA(t,0,8)),ka(new n(r),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mi(e),r=e.constructor;return ng(e,t<=r.toExpNeg||t>=r.toExpPos)};function ble(e,t){var r,n,a,s,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ja?ka(t,f):t;if(l=e.d,u=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a,s){for(s<0?(n=l,s=-s,o=u.length):(n=u,a=i,o=l.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/zi|0,l[s]%=zi;for(r&&(l.unshift(r),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,Ja?ka(t,f):t}function zA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Lp+e)}function TA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=y0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=y0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var Jf=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%zi|0,i=s/zi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,l;if(s!=i)l=s>i?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*zi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,l,u,d,f,h,p,g,v,b,y,C,S,I,N,B,w,_,F=n.constructor,U=n.s==a.s?1:-1,D=n.d,k=a.d;if(!n.s)return new F(n);if(!a.s)throw Error(Du+"Division by zero");for(l=n.e-a.e,w=k.length,N=D.length,p=new F(U),g=p.d=[],u=0;k[u]==(D[u]||0);)++u;if(k[u]>(D[u]||0)&&--l,s==null?C=s=F.precision:i?C=s+(mi(n)-mi(a))+1:C=s,C<0)return new F(0);if(C=C/La+2|0,u=0,w==1)for(d=0,k=k[0],C++;(u<N||d)&&C--;u++)S=d*zi+(D[u]||0),g[u]=S/k|0,d=S%k|0;else{for(d=zi/(k[0]+1)|0,d>1&&(k=e(k,d),D=e(D,d),w=k.length,N=D.length),I=w,v=D.slice(0,w),b=v.length;b<w;)v[b++]=0;_=k.slice(),_.unshift(0),B=k[0],k[1]>=zi/2&&++B;do d=0,o=t(k,v,w,b),o<0?(y=v[0],w!=b&&(y=y*zi+(v[1]||0)),d=y/B|0,d>1?(d>=zi&&(d=zi-1),f=e(k,d),h=f.length,b=v.length,o=t(f,v,h,b),o==1&&(d--,r(f,w<h?_:k,h))):(d==0&&(o=d=1),f=k.slice()),h=f.length,h<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(k,v,w,b),o<1&&(d++,r(v,w<b?_:k,b))),b=v.length):o===0&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[b++]=D[I]||0:(v=[D[I]],b=1);while((I++<N||v[0]!==void 0)&&C--)}return g[0]||g.shift(),p.e=l,ka(p,i?s+mi(p)+1:s)}}();function yle(e,t){var r,n,a,s,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(mi(e)>16)throw Error(vL+mi(e));if(!e.s)return new d(Tc);for(Ja=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(sp(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Tc),d.precision=o;;){if(a=ka(a.times(e),o),r=r.times(++l),i=s.plus(Jf(a,r,o)),TA(i.d).slice(0,o)===TA(s.d).slice(0,o)){for(;u--;)s=ka(s.times(s),o);return d.precision=f,t==null?(Ja=!0,ka(s,f)):s}s=i}}function mi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function Mj(e,t,r){if(t>e.LN10.sd())throw Ja=!0,r&&(e.precision=r),Error(Du+"LN10 precision limit exceeded");return ka(new e(e.LN10),t)}function y0(e){for(var t="";e--;)t+="0";return t}function Rw(e,t){var r,n,a,s,i,o,l,u,d,f=1,h=10,p=e,g=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(Du+(p.s?"NaN":"-Infinity"));if(p.eq(Tc))return new v(0);if(t==null?(Ja=!1,u=b):u=t,p.eq(10))return t==null&&(Ja=!0),Mj(v,u);if(u+=h,v.precision=u,r=TA(g),n=r.charAt(0),s=mi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=TA(p.d),n=r.charAt(0),f++;s=mi(p),n>1?(p=new v("0."+r),s++):p=new v(n+"."+r.slice(1))}else return l=Mj(v,u+2,b).times(s+""),p=Rw(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=b,t==null?(Ja=!0,ka(p,b)):p;for(o=i=p=Jf(p.minus(Tc),p.plus(Tc),u),d=ka(p.times(p),u),a=3;;){if(i=ka(i.times(d),u),l=o.plus(Jf(i,new v(a),u)),TA(l.d).slice(0,u)===TA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(Mj(v,u+2,b).times(s+""))),o=Jf(o,new v(f),u),v.precision=b,t==null?(Ja=!0,ka(o,b)):o;o=l,a+=2}}function mq(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=b1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ja&&(e.e>U5||e.e<-U5))throw Error(vL+r)}else e.s=0,e.e=0,e.d=[0];return e}function ka(e,t,r){var n,a,s,i,o,l,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=sp(10,i-a-1),o=u/s%10|0,l=t<0||f[d+1]!==void 0||u%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?a>0?u/sp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(s=mi(e),f.length=1,t=t-s-1,f[0]=sp(10,(La-t%La)%La),e.e=b1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=sp(10,La-n),f[d]=a>0?(u/sp(10,i-a)%sp(10,a)|0)*s:0),l)for(;;)if(d==0){(f[0]+=s)==zi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=zi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ja&&(e.e>U5||e.e<-U5))throw Error(vL+mi(e));return e}function wle(e,t){var r,n,a,s,i,o,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ja?ka(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=l.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,a=f.length-o;a>0;--a)l[o++]=0;for(a=f.length;a>i;){if(l[--a]<f[a]){for(s=a;s&&l[--s]===0;)l[s]=zi-1;--l[s],l[a]+=zi}l[a]-=f[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Ja?ka(t,p):t):new h(0)}function ng(e,t,r){var n,a=mi(e),s=TA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+y0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+y0(-a-1)+s,r&&(n=r-i)>0&&(s+=y0(n))):a>=i?(s+=y0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+y0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=y0(n))),e.s<0?"-"+s:s}function pq(e,t){if(e.length>t)return e.length=t,!0}function Ele(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Lp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return mq(i,s.toString())}else if(typeof s!="string")throw Error(Lp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,uet.test(s))mq(i,s);else throw Error(Lp+s)}if(a.prototype=dr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Ele,a.config=a.set=det,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function det(e){if(!e||typeof e!="object")throw Error(Du+"Object expected");var t,r,n,a=["precision",1,x1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(b1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Lp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Lp+r+": "+n);return this}var xL=Ele(cet);Tc=new xL(1);const pa=xL;var Aet=e=>e,Cle={},_le=e=>e===Cle,gq=e=>function t(){return arguments.length===0||arguments.length===1&&_le(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Sle=(e,t)=>e===1?t:gq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Cle).length;return s>=e?t(...n):Sle(e-s,gq(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>_le(d)?o.shift():d);return t(...u,...o)}))}),sk=e=>Sle(e.length,e),aO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},fet=sk((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),het=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Aet;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,l)=>l(o),s(...arguments))}},sO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Nle=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=a,r=e(...a)),r}};function kle(e){var t;return e===0?t=1:t=Math.floor(new pa(e).abs().log(10).toNumber())+1,t}function Ble(e,t,r){for(var n=new pa(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}sk((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});sk((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});sk((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Tle=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},jle=(e,t,r)=>{if(e.lte(0))return new pa(0);var n=kle(e.toNumber()),a=new pa(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new pa(Math.ceil(s.div(i).toNumber())).add(r).mul(i),l=o.mul(a);return t?new pa(l.toNumber()):new pa(Math.ceil(l.toNumber()))},met=(e,t,r)=>{var n=new pa(1),a=new pa(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new pa(10).pow(kle(e)-1),a=new pa(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new pa(Math.floor(e)))}else e===0?a=new pa(Math.floor((t-1)/2)):r||(a=new pa(Math.floor(e)));var i=Math.floor((t-1)/2),o=het(fet(l=>a.add(new pa(l-i).mul(n)).toNumber()),aO);return o(0,t)},Ile=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new pa(0),tickMin:new pa(0),tickMax:new pa(0)};var i=jle(new pa(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new pa(0):(o=new pa(t).add(r).div(2),o=o.sub(new pa(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new pa(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?Ile(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new pa(l).mul(i)),tickMax:o.add(new pa(u).mul(i))})};function pet(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Tle([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...aO(0,n-1).map(()=>1/0)]:[...aO(0,n-1).map(()=>-1/0),o];return t>r?sO(l):l}if(i===o)return met(i,n,a);var{step:u,tickMin:d,tickMax:f}=Ile(i,o,s,a,0),h=Ble(d,f.add(new pa(.1).mul(u)),u);return t>r?sO(h):h}function get(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Tle([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=jle(new pa(i).sub(s).div(o-1),a,0),u=[...Ble(new pa(s),new pa(i),l),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?sO(u):u}var vet=Nle(pet),xet=Nle(get),Fle=e=>e.rootProps.maxBarSize,bet=e=>e.rootProps.barGap,Ole=e=>e.rootProps.barCategoryGap,yet=e=>e.rootProps.barSize,C2=e=>e.rootProps.stackOffset,bL=e=>e.options.chartName,yL=e=>e.rootProps.syncId,Dle=e=>e.rootProps.syncMethod,wL=e=>e.options.eventEmitter,_A={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},zl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},ik=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},wet={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_A.angleAxisId,includeHidden:!1,name:void 0,reversed:_A.reversed,scale:_A.scale,tick:_A.tick,tickCount:void 0,ticks:void 0,type:_A.type,unit:void 0},Eet={allowDataOverflow:zl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zl.scale,tick:zl.tick,tickCount:zl.tickCount,ticks:void 0,type:zl.type,unit:void 0},Cet={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_A.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_A.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_A.scale,tick:_A.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_et={allowDataOverflow:zl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zl.scale,tick:zl.tick,tickCount:zl.tickCount,ticks:void 0,type:"category",unit:void 0},y1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Cet:wet,_2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_et:Eet,ok=e=>e.polarOptions,EL=ct([Eh,Ch,Bi],$oe),Rle=ct([ok,EL],(e,t)=>{if(e!=null)return bl(e.innerRadius,t,0)}),Ple=ct([ok,EL],(e,t)=>{if(e!=null)return bl(e.outerRadius,t,t*.8)}),Net=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Lle=ct([ok],Net),ket=ct([y1,Lle],ik),Mle=ct([EL,Rle,Ple],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),Bet=ct([_2,Mle],ik),w1=ct([In,ok,Rle,Ple,Eh,Ch],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:bl(i,a,a/2),cy:bl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Ba=(e,t)=>t,S2=(e,t,r)=>r;function CL(e){return e==null?void 0:e.id}var Ti=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},E1=e=>e.tooltip.settings.axisId,ji=e=>{var t=Ti(e),r=E1(e);return C1(e,t,r)};function Ule(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,l=(o=i.data)!==null&&o!==void 0?o:n;if(!(l==null||l.length===0)){var u=CL(i);l.forEach((d,f)=>{var h=a==null?f:String(Da(d,a,null)),p=Da(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function lk(e){return e.stackId!=null&&e.dataKey!=null}function vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vq(Object(r),!0).forEach(function(n){Tet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tet(e,t,r){return(t=jet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jet(e){var t=Iet(e,"string");return typeof t=="symbol"?t:t+""}function Iet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iO=[0,"auto"],wc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_h=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??wc},Ec={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:tk},Sm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ec},Fet={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_L=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Fet},Js=(e,t,r)=>{switch(t){case"xAxis":return _h(e,r);case"yAxis":return Sm(e,r);case"zAxis":return _L(e,r);case"angleAxis":return y1(e,r);case"radiusAxis":return _2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Oet=(e,t,r)=>{switch(t){case"xAxis":return _h(e,r);case"yAxis":return Sm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},C1=(e,t,r)=>{switch(t){case"xAxis":return _h(e,r);case"yAxis":return Sm(e,r);case"angleAxis":return y1(e,r);case"radiusAxis":return _2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Qle=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function SL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var NL=e=>e.graphicalItems.cartesianItems,Det=ct([Ba,S2],SL),kL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),N2=ct([NL,Js,Det],kL),Hle=ct([N2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(lk)),Vle=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),zle=ct([N2],Vle),BL=e=>e.map(t=>t.data).filter(Boolean).flat(1),Ret=ct([N2],BL),TL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},jL=ct([Ret,gL],TL),IL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Da(a,n)}))):e.map(n=>({value:n})),ck=ct([jL,Js,N2],IL);function $le(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function yg(e){return e.filter(t=>VA(t)||t instanceof Date).map(Number).filter(t=>Pc(t)===!1)}function Pet(e,t,r){return!r||typeof t!="number"||Pc(t)?[]:r.length?yg(r.flatMap(n=>{var a=Da(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Uc(s)||!Uc(i)))return[t-s,t+i]})):[]}var Let=ct([Hle,gL,ji],Ule),Gle=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,l=o.map(CL);return[i,{stackedData:CJe(e,l,r),graphicalItems:o}]}))},oO=ct([Let,Hle,C2],Gle),Kle=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=BJe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Met=ct([oO,_m,Ba],Kle),qle=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>$le(a,f)),d=Da(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:Pet(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Da(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),uk=e=>e.errorBars,Wle=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>$le(r,n));ct([zle,uk,Ba],Wle);var Uet=ct([jL,Js,zle,uk,Ba],qle);function Qet(e){var{value:t}=e;if(VA(t)||t instanceof Date)return t}var xq=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=yg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Het=(e,t,r)=>{var n=e.map(Qet).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&ioe(n))?vle(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},FL=e=>{var t;if(e==null||!("domain"in e))return iO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=yg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iO},H5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},Xle=e=>e.referenceElements.dots,_1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Vet=ct([Xle,Ba,S2],_1),Yle=e=>e.referenceElements.areas,zet=ct([Yle,Ba,S2],_1),Jle=e=>e.referenceElements.lines,$et=ct([Jle,Ba,S2],_1),Zle=(e,t)=>{var r=yg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Get=ct(Vet,Ba,Zle),ece=(e,t)=>{var r=yg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ket=ct([zet,Ba],ece),tce=(e,t)=>{var r=yg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qet=ct($et,Ba,tce),Wet=ct(Get,qet,Ket,(e,t,r)=>H5(e,r,t)),rce=ct([Js],FL),OL=(e,t,r,n,a,s,i)=>{var o=iet(t,e.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=l?H5(r,a,xq(n)):H5(a,xq(n));return oet(t,u,e.allowDataOverflow)},Xet=ct([Js,rce,Met,Uet,Wet,In,Ba],OL),Yet=[0,1],DL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=Cm(t,s);return u&&o==null?vle(0,r.length):l==="category"?Het(n,e,u):a==="expand"?Yet:i}},RL=ct([Js,In,jL,ck,C2,Ba,Xet],DL),nce=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(y2(s));return o in Ay?o:"point"}}},Nm=ct([Js,In,Qle,bL,Ba],nce);function Jet(e){if(e!=null){if(e in Ay)return Ay[e]();var t="scale".concat(y2(e));if(t in Ay)return Ay[t]()}}function dk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=Jet(t);if(a!=null){var s=a.domain(r).range(n);return xJe(s),s}}}var PL=(e,t,r)=>{var n=FL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&$x(e))return vet(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&$x(e))return xet(e,t.tickCount,t.allowDecimals)}},LL=ct([RL,C1,Nm],PL),ML=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&$x(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},Zet=ct([Js,RL,LL,Ba],ML),ett=ct(ck,Js,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(yg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),ace=ct(ett,In,Ole,Bi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Uc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=bl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),ttt=(e,t)=>{var r=_h(e,t);return r==null||typeof r.padding!="string"?0:ace(e,"xAxis",t,r.padding)},rtt=(e,t)=>{var r=Sm(e,t);return r==null||typeof r.padding!="string"?0:ace(e,"yAxis",t,r.padding)},ntt=ct(_h,ttt,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),att=ct(Sm,rtt,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),stt=ct([Bi,ntt,nk,rk,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),itt=ct([Bi,In,att,nk,rk,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),k2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return stt(e,r,n);case"yAxis":return itt(e,r,n);case"zAxis":return(a=_L(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Lle(e);case"radiusAxis":return Mle(e,r);default:return}},sce=ct([Js,k2],ik),S1=ct([Js,Nm,Zet,sce],dk);ct([N2,uk,Ba],Wle);function ice(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ak=(e,t)=>t,fk=(e,t,r)=>r,ott=ct(AL,Ak,fk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(ice)),ltt=ct(fL,Ak,fk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(ice)),oce=(e,t)=>({width:e.width,height:t.height}),ctt=(e,t)=>{var r=typeof t.width=="number"?t.width:tk;return{width:r,height:e.height}},lce=ct(Bi,_h,oce),utt=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},dtt=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Att=ct(Ch,Bi,ott,Ak,fk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=oce(t,o);i==null&&(i=utt(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),s}),ftt=ct(Eh,Bi,ltt,Ak,fk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=ctt(t,o);i==null&&(i=dtt(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),s}),htt=(e,t)=>{var r=Bi(e),n=_h(e,t);if(n!=null){var a=Att(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},mtt=(e,t)=>{var r=Bi(e),n=Sm(e,t);if(n!=null){var a=ftt(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},cce=ct(Bi,Sm,(e,t)=>{var r=typeof t.width=="number"?t.width:tk;return{width:r,height:e.height}}),bq=(e,t,r)=>{switch(t){case"xAxis":return lce(e,r).width;case"yAxis":return cce(e,r).height;default:return}},uce=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Cm(e,n),l=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&ioe(l))return l}},B2=ct([In,ck,Js,Ba],uce),UL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Cm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},QL=ct([In,ck,C1,Ba],UL),yq=ct([In,Oet,Nm,S1,B2,QL,k2,LL,Ba],(e,t,r,n,a,s,i,o,l)=>{if(t==null)return null;var u=Cm(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),dce=(e,t,r,n,a,s,i,o,l)=>{if(!(t==null||n==null)){var u=Cm(e,l),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=l==="angleAxis"&&s!=null&&s.length>=2?Xi(s[0]-s[1])*2*g:g;var v=f||a;if(v){var b=v.map((y,C)=>{var S=i?i.indexOf(y):y;return{index:C,coordinate:n(S)+g,value:y,offset:g}});return b.filter(y=>!Pc(y.coordinate))}return u&&o?o.map((y,C)=>({coordinate:n(y)+g,value:y,index:C,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,C)=>({coordinate:n(y)+g,value:i?i[y]:y,index:C,offset:g}))}},Ace=ct([In,C1,Nm,S1,LL,k2,B2,QL,Ba],dce),fce=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Cm(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Xi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Gx=ct([In,C1,S1,k2,B2,QL,Ba],fce),Kx=ct(Js,S1,(e,t)=>{if(!(e==null||t==null))return Q5(Q5({},e),{},{scale:t})}),ptt=ct([Js,Nm,RL,sce],dk);ct((e,t,r)=>_L(e,r),ptt,(e,t)=>{if(!(e==null||t==null))return Q5(Q5({},e),{},{scale:t})});var gtt=ct([In,AL,fL],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),hce=e=>e.options.defaultTooltipEventType,mce=e=>e.options.validateTooltipEventTypes;function pce(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function HL(e,t){var r=hce(e),n=mce(e);return pce(t,r,n)}function vtt(e){return ir(t=>HL(t,e))}var gce=(e,t)=>{var r,n=Number(t);if(!(Pc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},xtt=e=>e.tooltip.settings,N0={active:!1,index:null,dataKey:void 0,coordinate:void 0},btt={itemInteraction:{click:N0,hover:N0},axisInteraction:{click:N0,hover:N0},keyboardInteraction:N0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},vce=Qc({name:"tooltip",initialState:btt,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Yf(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:ytt,removeTooltipEntrySettings:wtt,setTooltipSettingsState:Ett,setActiveMouseOverItemIndex:xce,mouseLeaveItem:Ctt,mouseLeaveChart:bce,setActiveClickItemIndex:_tt,setMouseOverAxisIndex:yce,setMouseClickAxisIndex:Stt,setSyncInteraction:lO,setKeyboardInteraction:cO}=vce.actions,Ntt=vce.reducer;function wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wq(Object(r),!0).forEach(function(n){ktt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ktt(e,t,r){return(t=Btt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Btt(e){var t=Ttt(e,"string");return typeof t=="symbol"?t:t+""}function Ttt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jtt(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Itt(e){return e.index!=null}var wce=(e,t,r,n)=>{if(t==null)return N0;var a=jtt(e,t,r);if(a==null)return N0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Itt(a)){if(s)return r_(r_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return r_(r_({},N0),{},{coordinate:a.coordinate})},VL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Uc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Ece=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Cce=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},T2=e=>e.options.tooltipPayloadSearcher,N1=e=>e.tooltip;function Eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eq(Object(r),!0).forEach(function(n){Ftt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ftt(e,t,r){return(t=Ott(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ott(e){var t=Dtt(e,"string");return typeof t=="symbol"?t:t+""}function Dtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rtt(e,t){return e??t}var _ce=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:v,settings:b}=p,y=Rtt(v,o),C=Array.isArray(y)?Koe(y,u,d):y,S=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,I=b==null?void 0:b.nameKey,N;if(n!=null&&n.dataKey&&Array.isArray(C)&&!Array.isArray(C[0])&&i==="axis"?N=JWe(C,n.dataKey,a):N=s(C,t,l,I),Array.isArray(N))N.forEach(w=>{var _=Cq(Cq({},b),{},{name:w.name,unit:w.unit,color:void 0,fill:void 0});h.push(HK({tooltipEntrySettings:_,dataKey:w.dataKey,payload:w.payload,value:Da(w.payload,w.dataKey),name:w.name}))});else{var B;h.push(HK({tooltipEntrySettings:b,dataKey:S,payload:N,value:Da(N,S),name:(B=Da(N,I))!==null&&B!==void 0?B:b==null?void 0:b.name}))}return h},f)}},zL=ct([ji,In,Qle,bL,Ti],nce),Ptt=ct([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Ltt=ct([Ti,E1],SL),j2=ct([Ptt,ji,Ltt],kL),Mtt=ct([j2],e=>e.filter(lk)),Utt=ct([j2],BL),k1=ct([Utt,_m],TL),Qtt=ct([Mtt,_m,ji],Ule),$L=ct([k1,ji,j2],IL),Htt=ct([ji],FL),Vtt=ct([j2],e=>e.filter(lk)),ztt=ct([Qtt,Vtt,C2],Gle),$tt=ct([ztt,_m,Ti],Kle),Gtt=ct([j2],Vle),Ktt=ct([k1,ji,Gtt,uk,Ti],qle),qtt=ct([Xle,Ti,E1],_1),Wtt=ct([qtt,Ti],Zle),Xtt=ct([Yle,Ti,E1],_1),Ytt=ct([Xtt,Ti],ece),Jtt=ct([Jle,Ti,E1],_1),Ztt=ct([Jtt,Ti],tce),ert=ct([Wtt,Ztt,Ytt],H5),trt=ct([ji,Htt,$tt,Ktt,ert,In,Ti],OL),Sce=ct([ji,In,k1,$L,C2,Ti,trt],DL),rrt=ct([Sce,ji,zL],PL),nrt=ct([ji,Sce,rrt,Ti],ML),Nce=e=>{var t=Ti(e),r=E1(e),n=!1;return k2(e,t,r,n)},kce=ct([ji,Nce],ik),Bce=ct([ji,zL,nrt,kce],dk),art=ct([In,$L,ji,Ti],uce),srt=ct([In,$L,ji,Ti],UL),irt=(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,u=Cm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Xi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Sh=ct([In,ji,zL,Bce,Nce,art,srt,Ti],irt),GL=ct([hce,mce,xtt],(e,t,r)=>pce(r.shared,e,t)),Tce=e=>e.tooltip.settings.trigger,KL=e=>e.tooltip.settings.defaultIndex,hk=ct([N1,GL,Tce,KL],wce),hm=ct([hk,k1],VL),jce=ct([Sh,hm],gce),Ice=ct([hk],e=>{if(e)return e.dataKey}),Fce=ct([N1,GL,Tce,KL],Cce),ort=ct([Eh,Ch,In,Bi,Sh,KL,Fce,T2],Ece),lrt=ct([hk,ort],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),crt=ct([hk],e=>e.active),urt=ct([Fce,hm,_m,ji,jce,T2,GL],_ce),drt=ct([urt],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function _q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(r),!0).forEach(function(n){Art(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Art(e,t,r){return(t=frt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function frt(e){var t=hrt(e,"string");return typeof t=="symbol"?t:t+""}function hrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mrt=()=>ir(ji),prt=()=>{var e=mrt(),t=ir(Sh),r=ir(Bce);return Ow(Sq(Sq({},e),{},{scale:r}),t)},grt=()=>ir(bL),qL=(e,t)=>t,Oce=(e,t,r)=>r,WL=(e,t,r,n)=>n,vrt=ct(Sh,e=>q4(e,t=>t.coordinate)),XL=ct([N1,qL,Oce,WL],wce),Dce=ct([XL,k1],VL),xrt=(e,t,r)=>{if(t!=null){var n=N1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Rce=ct([N1,qL,Oce,WL],Cce),V5=ct([Eh,Ch,In,Bi,Sh,WL,Rce,T2],Ece),brt=ct([XL,V5],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Pce=ct(Sh,Dce,gce),yrt=ct([Rce,Dce,_m,ji,Pce,T2,qL],_ce),wrt=ct([XL],e=>({isActive:e.active,activeIndex:e.index})),Ert=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var l=TJe(e.chartX,e.chartY,t,r,o);if(l){var u=IJe(l,t),d=gJe(u,i,s,n,a),f=jJe(t,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}function Nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nq(Object(r),!0).forEach(function(n){Crt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Crt(e,t,r){return(t=_rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _rt(e){var t=Srt(e,"string");return typeof t=="symbol"?t:t+""}function Srt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nrt(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=mZe;else if(u==="BarChart")p=pZe(i,d,a,s),g=hle;else if(i==="radial"){var{cx:v,cy:b,radius:y,startAngle:C,endAngle:S}=mle(d);p={cx:v,cy:b,startAngle:C,endAngle:S,innerRadius:y,outerRadius:y},g=gle}else p={points:eet(i,d,a)},g=ole;var I=typeof o=="object"&&"className"in o?o.className:void 0,N=n_(n_(n_(n_({stroke:"#ccc",pointerEvents:"none"},a),p),Xn(o,!1)),{},{payload:f,payloadIndex:h,className:Cn("recharts-tooltip-cursor",I)});return T.isValidElement(o)?T.cloneElement(o,N):T.createElement(g,N)}function krt(e){var t=prt(),r=ele(),n=mL(),a=grt();return T.createElement(Nrt,uO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Lce=T.createContext(null),Brt=()=>T.useContext(Lce),Uj={exports:{}},kq;function Trt(){return kq||(kq=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var v=r?r+u:u;if(!this._events[v])return!1;var b=this._events[v],y=arguments.length,C,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(S=1,C=new Array(y-1);S<y;S++)C[S-1]=arguments[S];b.fn.apply(b.context,C)}else{var I=b.length,N;for(S=0;S<I;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),y){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!C)for(N=1,C=new Array(y-1);N<y;N++)C[N-1]=arguments[N];b[S].fn.apply(b[S].context,C)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var v=0,b=[],y=g.length;v<y;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&b.push(g[v]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Uj)),Uj.exports}var jrt=Trt();const Irt=yl(jrt);var Pw=new Irt,dO="recharts.syncEvent.tooltip",Bq="recharts.syncEvent.brush";function YL(e,t){if(t){var r=Number.parseInt(t,10);if(!Pc(r))return e==null?void 0:e[r]}}var Frt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Mce=Qc({name:"options",initialState:Frt,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ort=Mce.reducer,{createEventEmitter:Drt}=Mce.actions;function Rrt(e){return e.tooltip.syncInteraction}var Prt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Uce=Qc({name:"chartData",initialState:Prt,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Tq,setDataStartEndIndexes:Lrt,setComputedData:_dt}=Uce.actions,Mrt=Uce.reducer,Qce=()=>{};function Urt(){var e=ir(yL),t=ir(wL),r=fs(),n=ir(Dle),a=ir(Sh),s=mL(),i=hL(),o=ir(l=>l.rootProps.className);T.useEffect(()=>{if(e==null)return Qce;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(B=>String(B.value)===d.payload.label));var{coordinate:v}=d.payload;if(h==null||d.payload.active===!1||v==null||i==null){r(lO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=v,C=Math.min(b,i.x+i.width),S=Math.min(y,i.y+i.height),I={x:s==="horizontal"?h.coordinate:C,y:s==="horizontal"?S:h.coordinate},N=lO({active:d.payload.active,coordinate:I,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(N)}}};return Pw.on(dO,l),()=>{Pw.off(dO,l)}},[o,r,t,e,n,a,s,i])}function Qrt(){var e=ir(yL),t=ir(wL),r=fs();T.useEffect(()=>{if(e==null)return Qce;var n=(a,s,i)=>{t!==i&&e===a&&r(Lrt(s))};return Pw.on(Bq,n),()=>{Pw.off(Bq,n)}},[r,t,e])}function Hrt(){var e=fs();T.useEffect(()=>{e(Drt())},[e]),Urt(),Qrt()}function Vrt(e,t,r,n,a,s){var i=ir(h=>xrt(h,e,t)),o=ir(wL),l=ir(yL),u=ir(Dle),d=ir(Rrt),f=d==null?void 0:d.active;T.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=lO({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Pw.emit(dO,l,h,o)}},[f,r,i,a,n,o,l,u,s])}function jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jq(Object(r),!0).forEach(function(n){zrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zrt(e,t,r){return(t=$rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $rt(e){var t=Grt(e,"string");return typeof t=="symbol"?t:t+""}function Grt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Krt(e){return e.dataKey}function qrt(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(KJe,t)}var Fq=[],Wrt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!bg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function a_(e){var t=Lu(e,Wrt),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:b,trigger:y,defaultIndex:C,portal:S,axisId:I}=t,N=fs(),B=typeof C=="number"?String(C):C;T.useEffect(()=>{N(Ett({shared:b,trigger:y,axisId:I,active:r,defaultIndex:B}))},[N,b,y,I,r,B]);var w=hL(),_=ile(),F=vtt(b),{activeIndex:U,isActive:D}=ir(te=>wrt(te,F,y,B)),k=ir(te=>yrt(te,F,y,B)),L=ir(te=>Pce(te,F,y,B)),R=ir(te=>brt(te,F,y,B)),X=k,V=Brt(),Z=r??D,[H,z]=oYe([X,Z]),q=F==="axis"?L:void 0;Vrt(F,y,R,q,U,Z);var re=S??V;if(re==null)return null;var P=X??Fq;Z||(P=Fq),o&&P.length&&(P=LXe(X.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,Krt));var K=P.length>0,Y=T.createElement(eZe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:l,active:Z,coordinate:R,hasPayload:K,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:w,wrapperStyle:g,lastBoundingBox:H,innerRef:z,hasPortalFromProps:!!S},qrt(i,Iq(Iq({},t),{},{payload:P,label:q,active:Z,coordinate:R,accessibilityLayer:_})));return T.createElement(T.Fragment,null,Aae.createPortal(Y,re),Z&&T.createElement(krt,{cursor:v,tooltipEventType:F,coordinate:R,payload:X,index:U}))}var Qj={},Hj={},Vj={},Oq;function Xrt(){return Oq||(Oq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),v()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...C){if(a!=null&&a.aborted)return;i=this,o=C;const S=h==null;p(),l&&S&&d()};return y.schedule=p,y.cancel=v,y.flush=b,a==null||a.addEventListener("abort",v,{once:!0}),y}e.debounce=t}(Vj)),Vj}var Dq;function Yrt(){return Dq||(Dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xrt();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...v){d=n.apply(this,v),f=null},a,{edges:u}),p=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,v),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(Hj)),Hj}var Rq;function Jrt(){return Rq||(Rq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yrt();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(Qj)),Qj}var zj,Pq;function Zrt(){return Pq||(Pq=1,zj=Jrt().throttle),zj}var ent=Zrt();const tnt=yl(ent);var Ly=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function Lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lq(Object(r),!0).forEach(function(n){rnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rnt(e,t,r){return(t=nnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nnt(e){var t=ant(e,"string");return typeof t=="symbol"?t:t+""}function ant(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s_=T.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,v=T.useRef(null),b=T.useRef();b.current=p,T.useImperativeHandle(t,()=>v.current);var[y,C]=T.useState({containerWidth:n.width,containerHeight:n.height}),S=T.useCallback((N,B)=>{C(w=>{var _=Math.round(N),F=Math.round(B);return w.containerWidth===_&&w.containerHeight===F?w:{containerWidth:_,containerHeight:F}})},[]);T.useEffect(()=>{var N=F=>{var U,{width:D,height:k}=F[0].contentRect;S(D,k),(U=b.current)===null||U===void 0||U.call(b,D,k)};d>0&&(N=tnt(N,d,{trailing:!0,leading:!1}));var B=new ResizeObserver(N),{width:w,height:_}=v.current.getBoundingClientRect();return S(w,_),B.observe(v.current),()=>{B.disconnect()}},[S,d]);var I=T.useMemo(()=>{var{containerWidth:N,containerHeight:B}=y;if(N<0||B<0)return null;Ly(gp(a)||gp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),Ly(!r||r>0,"The aspect(%s) must be greater than zero.",r);var w=gp(a)?N:a,_=gp(s)?B:s;return r&&r>0&&(w?_=w/r:_&&(w=_*r),l&&_>l&&(_=l)),Ly(w>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,w,_,a,s,i,o,r),T.Children.map(u,F=>T.cloneElement(F,{width:w,height:_,style:$j({width:w,height:_},F.props.style)}))},[r,u,s,l,o,i,y,a]);return T.createElement("div",{id:f?"".concat(f):void 0,className:Cn("recharts-responsive-container",h),style:$j($j({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:l}),ref:v},T.createElement("div",{style:{width:0,height:0,overflow:"visible"}},I))}),I2=e=>null;I2.displayName="Cell";function snt(e,t,r){return(t=int(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function int(e){var t=ont(e,"string");return typeof t=="symbol"?t:t+""}function ont(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lnt{constructor(t){snt(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cnt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){unt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function unt(e,t,r){return(t=dnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dnt(e){var t=Ant(e,"string");return typeof t=="symbol"?t:t+""}function Ant(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fnt={cacheSize:2e3,enableCache:!0},Hce=cnt({},fnt),Uq=new lnt(Hce.cacheSize),hnt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Qq="recharts_measurement_span";function mnt(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var Hq=(e,t)=>{try{var r=document.getElementById(Qq);r||(r=document.createElement("span"),r.setAttribute("id",Qq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,hnt,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},My=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||bg.isSsr)return{width:0,height:0};if(!Hce.enableCache)return Hq(t,r);var n=mnt(t,r),a=Uq.get(n);if(a)return a;var s=Hq(t,r);return Uq.set(n,s),s},Vq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pnt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gnt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Vce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vnt=Object.keys(Vce),zv="NaN";function xnt(e,t){return e*Vce[t]}class Ul{static parse(t){var r,[,n,a]=(r=gnt.exec(t))!==null&&r!==void 0?r:[];return new Ul(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Pc(t)&&(this.unit=""),r!==""&&!pnt.test(r)&&(this.num=NaN,this.unit=""),vnt.includes(r)&&(this.num=xnt(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pc(this.num)}}function zce(e){if(e.includes(zv))return zv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=Vq.exec(t))!==null&&r!==void 0?r:[],i=Ul.parse(n??""),o=Ul.parse(s??""),l=a==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return zv;t=t.replace(Vq,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=zq.exec(t))!==null&&u!==void 0?u:[],p=Ul.parse(d??""),g=Ul.parse(h??""),v=f==="+"?p.add(g):p.subtract(g);if(v.isNaN())return zv;t=t.replace(zq,v.toString())}return t}var $q=/\(([^()]*)\)/;function bnt(e){for(var t=e,r;(r=$q.exec(t))!=null;){var[,n]=r;t=t.replace($q,zce(n))}return t}function ynt(e){var t=e.replace(/\s+/g,"");return t=bnt(t),t=zce(t),t}function wnt(e){try{return ynt(e)}catch{return zv}}function Gj(e){var t=wnt(e.slice(5,-1));return t===zv?"":t}var Ent=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cnt=["dx","dy","angle","className","breakAll"];function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AO.apply(null,arguments)}function Gq(e,t){if(e==null)return{};var r,n,a=_nt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _nt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $ce=/[ \f\n\r\t\v\u2028\u2029]+/,Gce=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ts(t)||(r?a=t.toString().split(""):a=t.toString().split($ce));var s=a.map(o=>({word:o,width:My(o,n).width})),i=r?0:My("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},Snt=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,u=ur(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((k,L)=>{var{word:R,width:X}=L,V=k[k.length-1];if(V&&(n==null||a||V.width+X+r<Number(n)))V.words.push(R),V.width+=X+r;else{var Z={words:[R],width:X};k.push(Z)}return k},[])},h=f(t),p=U=>U.reduce((D,k)=>D.width>k.width?D:k);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var v="",b=U=>{var D=d.slice(0,U),k=Gce({breakAll:l,style:o,children:D+v}).wordsWithComputedWidth,L=f(k),R=L.length>s||p(L).width>Number(n);return[R,L]},y=0,C=d.length-1,S=0,I;y<=C&&S<=d.length-1;){var N=Math.floor((y+C)/2),B=N-1,[w,_]=b(B),[F]=b(N);if(!w&&!F&&(y=N+1),w&&F&&(C=N-1),!w&&F){I=_;break}S++}return I||h},Kq=e=>{var t=Ts(e)?[]:e.toString().split($ce);return[{words:t}]},Nnt=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!bg.isSsr){var o,l,u=Gce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return Kq(n);return Snt({breakAll:s,children:n,maxLines:i,style:a},o,l,t,r)}return Kq(n)},qq="#808080",B1=T.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=qq}=e,d=Gq(e,Ent),f=T.useMemo(()=>Nnt({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:v,breakAll:b}=d,y=Gq(d,Cnt);if(!VA(r)||!VA(n))return null;var C=r+(ur(h)?h:0),S=n+(ur(p)?p:0),I;switch(l){case"start":I=Gj("calc(".concat(s,")"));break;case"middle":I=Gj("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:I=Gj("calc(".concat(f.length-1," * -").concat(a,")"));break}var N=[];if(i){var B=f[0].width,{width:w}=d;N.push("scale(".concat(ur(w)?w/B:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(C,", ").concat(S,")")),N.length&&(y.transform=N.join(" ")),T.createElement("text",AO({},Xn(y,!0),{ref:t,x:C,y:S,className:Cn("recharts-text",v),textAnchor:o,fill:u.includes("url")?qq:u}),f.map((_,F)=>{var U=_.words.join(b?"":" ");return T.createElement("tspan",{x:C,dy:F===0?I:a,key:"".concat(U,"-").concat(F)},U)}))});B1.displayName="Text";var knt=["offset"],Bnt=["labelRef"];function Wq(e,t){if(e==null)return{};var r,n,a=Tnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){jnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jnt(e,t,r){return(t=Int(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Int(e){var t=Fnt(e,"string");return typeof t=="symbol"?t:t+""}function Fnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Df.apply(null,arguments)}var Ont=e=>{var{value:t,formatter:r}=e,n=Ts(e.children)?t:e.children;return typeof r=="function"?r(n):n},JL=e=>e!=null&&typeof e=="function",Dnt=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Rnt=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,v=Dnt(f,h),b=v>=0?1:-1,y,C;a==="insideStart"?(y=f+b*s,C=p):a==="insideEnd"?(y=h-b*s,C=!p):a==="end"&&(y=h+b*s,C=p),C=v<=0?C:!C;var S=ta(o,l,g,y),I=ta(o,l,g,y+(C?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(I.x,",").concat(I.y),B=Ts(e.id)?jw("recharts-radial-line-"):e.id;return T.createElement("text",Df({},r,{dominantBaseline:"central",className:Cn("recharts-radial-bar-label",i)}),T.createElement("defs",null,T.createElement("path",{id:B,d:N})),T.createElement("textPath",{xlinkHref:"#".concat(B)},t))},Pnt=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=ta(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=ta(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Lnt=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:l}=t,u=l>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,v=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ws(ws({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var C={x:s+o/2,y:i+l+d,textAnchor:"middle",verticalAnchor:h};return ws(ws({},C),r?{height:Math.max(r.y+r.height-(i+l),0),width:o}:{})}if(a==="left"){var S={x:s-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"};return ws(ws({},S),r?{width:Math.max(S.x-r.x,0),height:l}:{})}if(a==="right"){var I={x:s+o+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"};return ws(ws({},I),r?{width:Math.max(r.x+r.width-I.x,0),height:l}:{})}var N=r?{width:o,height:l}:{};return a==="insideLeft"?ws({x:s+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"},N):a==="insideRight"?ws({x:s+o-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"},N):a==="insideTop"?ws({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},N):a==="insideBottom"?ws({x:s+o/2,y:i+l-d,textAnchor:"middle",verticalAnchor:f},N):a==="insideTopLeft"?ws({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},N):a==="insideTopRight"?ws({x:s+o-g,y:i+d,textAnchor:v,verticalAnchor:h},N):a==="insideBottomLeft"?ws({x:s+g,y:i+l-d,textAnchor:b,verticalAnchor:f},N):a==="insideBottomRight"?ws({x:s+o-g,y:i+l-d,textAnchor:v,verticalAnchor:f},N):a&&typeof a=="object"&&(ur(a.x)||gp(a.x))&&(ur(a.y)||gp(a.y))?ws({x:s+bl(a.x,o),y:i+bl(a.y,l),textAnchor:"end",verticalAnchor:"end"},N):ws({x:s+o/2,y:i+l/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Mnt=e=>"cx"in e&&ur(e.cx);function $l(e){var{offset:t=5}=e,r=Wq(e,knt),n=ws({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:l,className:u="",textBreakAll:d,labelRef:f}=n,h=ir(w1),p=hL(),g=s==="center"?p:h??p,v=a||g;if(!v||Ts(i)&&Ts(o)&&!T.isValidElement(l)&&typeof l!="function")return null;var b=ws(ws({},n),{},{viewBox:v});if(T.isValidElement(l)){var{labelRef:y}=b,C=Wq(b,Bnt);return T.cloneElement(l,C)}var S;if(typeof l=="function"){if(S=T.createElement(l,b),T.isValidElement(S))return S}else S=Ont(n);var I=Mnt(v),N=Xn(n,!0);if(I&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Rnt(n,S,N,v);var B=I?Pnt(v,n.offset,n.position):Lnt(n,v);return T.createElement(B1,Df({ref:f,className:Cn("recharts-label",u)},N,B,{breakAll:d}),S)}$l.displayName="Label";var Kce=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:l,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:v,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(v)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:v};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:v}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},Unt=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?T.createElement($l,Df({key:"label-implicit"},n)):VA(e)?T.createElement($l,Df({key:"label-implicit",value:e},n)):T.isValidElement(e)?e.type===$l?T.cloneElement(e,ws({key:"label-implicit"},n)):T.createElement($l,Df({key:"label-implicit",content:e},n)):JL(e)?T.createElement($l,Df({key:"label-implicit",content:e},n)):e&&typeof e=="object"?T.createElement($l,Df({},e,{key:"label-implicit"},n)):null},Qnt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=Kce(t),o=w2(a,$l).map((u,d)=>T.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var l=Unt(t.label,r||i,s);return[l,...o]};$l.parseViewBox=Kce;$l.renderCallByParent=Qnt;var Kj={},qj={},Yq;function Hnt(){return Yq||(Yq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(qj)),qj}var Wj={},Jq;function Vnt(){return Jq||(Jq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(Wj)),Wj}var Zq;function znt(){return Zq||(Zq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hnt(),r=Vnt(),n=eL();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(Kj)),Kj}var Xj,eW;function $nt(){return eW||(eW=1,Xj=znt().last),Xj}var Gnt=$nt();const qce=yl(Gnt);var Knt=["valueAccessor"],qnt=["data","dataKey","clockWise","id","textBreakAll"];function z5(){return z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z5.apply(null,arguments)}function tW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tW(Object(r),!0).forEach(function(n){Wnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wnt(e,t,r){return(t=Xnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xnt(e){var t=Ynt(e,"string");return typeof t=="symbol"?t:t+""}function Ynt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nW(e,t){if(e==null)return{};var r,n,a=Jnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Znt=e=>Array.isArray(e.value)?qce(e.value):e.value;function W0(e){var{valueAccessor:t=Znt}=e,r=nW(e,Knt),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,l=nW(r,qnt);return!n||!n.length?null:T.createElement(ds,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ts(a)?t(u,d):Da(u&&u.payload,a),h=Ts(i)?{}:{id:"".concat(i,"-").concat(d)};return T.createElement($l,z5({},Xn(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:$l.parseViewBox(Ts(s)?u:rW(rW({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}W0.displayName="LabelList";function eat(e,t){return e?e===!0?T.createElement(W0,{key:"labelList-implicit",data:t}):T.isValidElement(e)||JL(e)?T.createElement(W0,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?T.createElement(W0,z5({data:t},e,{key:"labelList-implicit"})):null:null}function tat(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=w2(n,W0).map((i,o)=>T.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=eat(e.label,t);return[s,...a]}W0.renderCallByParent=tat;var rat=["points","className","baseLinePoints","connectNulls"];function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(null,arguments)}function nat(e,t){if(e==null)return{};var r,n,a=aat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aW=e=>e&&e.x===+e.x&&e.y===+e.y,sat=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{aW(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),aW(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Uy=(e,t)=>{var r=sat(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},iat=(e,t,r)=>{var n=Uy(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Uy(t.reverse(),r).slice(1))},Wce=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=nat(e,rat);if(!t||!t.length)return null;var i=Cn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",l=iat(t,n,a);return T.createElement("g",{className:i},T.createElement("path",$v({},Xn(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:l})),o?T.createElement("path",$v({},Xn(s,!0),{fill:"none",d:Uy(t,a)})):null,o?T.createElement("path",$v({},Xn(s,!0),{fill:"none",d:Uy(n,a)})):null)}var u=Uy(t,a);return T.createElement("path",$v({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function fO(){return fO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fO.apply(null,arguments)}var ZL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Cn("recharts-dot",a);return t===+t&&r===+r&&n===+n?T.createElement("circle",fO({},nl(e),ZP(e),{className:s,cx:t,cy:r,r:n})):null},e8=e=>e.graphicalItems.polarItems,oat=ct([Ba,S2],SL),t8=ct([e8,Js,oat],kL),lat=ct([t8],BL),r8=ct([lat,ak],TL),Xce=ct([r8,Js,t8],IL),cat=ct([r8,Js,t8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Da(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),sW=()=>{},uat=ct([Js,rce,sW,cat,sW,In,Ba],OL),Yce=ct([Js,In,r8,Xce,C2,Ba,uat],DL),Jce=ct([Yce,Js,Nm],PL),dat=ct([Js,Yce,Jce,Ba],ML),n8=(e,t,r)=>{switch(t){case"angleAxis":return y1(e,r);case"radiusAxis":return _2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},a8=(e,t,r)=>{switch(t){case"angleAxis":return ket(e,r);case"radiusAxis":return Bet(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},T1=ct([n8,Nm,dat,a8],dk),Zce=ct([In,Xce,C1,Ba],UL),j1=ct([In,n8,Nm,T1,Jce,a8,B2,Zce,Ba],dce);ct([In,n8,T1,a8,B2,Zce,Ba],fce);var Aat=(e,t)=>j1(e,"angleAxis",t,!1),fat=ct([Aat],e=>{if(e)return e.map(t=>t.coordinate)}),hat=(e,t)=>j1(e,"radiusAxis",t,!1),mat=ct([hat],e=>{if(e)return e.map(t=>t.coordinate)}),pat=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function gat(e,t){if(e==null)return{};var r,n,a=vat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fh.apply(null,arguments)}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(n){xat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xat(e,t,r){return(t=bat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bat(e){var t=yat(e,"string");return typeof t=="symbol"?t:t+""}function yat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wat=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=ta(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},Eat=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=qx({stroke:"#ccc"},nl(e));return T.createElement("g",{className:"recharts-polar-grid-angle"},s.map(l=>{var u=ta(t,r,n,l),d=ta(t,r,a,l);return T.createElement("line",fh({},o,{key:"line-".concat(l),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},Cat=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=qx(qx({stroke:"#ccc"},nl(e)),{},{fill:"none"});return T.createElement("circle",fh({},s,{className:Cn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},_at=e=>{var{radius:t,index:r}=e,n=qx(qx({stroke:"#ccc"},nl(e)),{},{fill:"none"});return T.createElement("path",fh({},n,{className:Cn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:wat(t,e.cx,e.cy,e.polarAngles)}))},Sat=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:T.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?T.createElement(Cat,fh({key:s},e,{radius:n,index:a})):T.createElement(_at,fh({key:s},e,{radius:n,index:a}))}))},eue=e=>{var t,r,n,a,s,i,o,l,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:v,outerRadius:b}=e,y=gat(e,pat),C=ir(w1),S=qx({cx:(t=(r=C==null?void 0:C.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=C==null?void 0:C.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=C==null?void 0:C.innerRadius)!==null&&i!==void 0?i:v)!==null&&s!==void 0?s:0,outerRadius:(o=(l=C==null?void 0:C.outerRadius)!==null&&l!==void 0?l:b)!==null&&o!==void 0?o:0},y),{polarAngles:I,polarRadius:N,cx:B,cy:w,innerRadius:_,outerRadius:F}=S,U=ir(R=>fat(R,f)),D=ir(R=>mat(R,h)),k=Array.isArray(I)?I:U,L=Array.isArray(N)?N:D;return F<=0||k==null||L==null?null:T.createElement("g",{className:"recharts-polar-grid"},T.createElement(Eat,fh({cx:B,cy:w,innerRadius:_,outerRadius:F,gridType:u,radialLines:d},S,{polarAngles:k,polarRadius:L})),T.createElement(Sat,fh({cx:B,cy:w,innerRadius:_,outerRadius:F,gridType:u,radialLines:d},S,{polarAngles:k,polarRadius:L})))};eue.displayName="PolarGrid";var Yj={},Jj={},oW;function Nat(){return oW||(oW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l>s&&(s=l,a=o)}return a}e.maxBy=t}(Jj)),Jj}var lW;function kat(){return lW||(lW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nat(),r=K4(),n=sL();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(Yj)),Yj}var Zj,cW;function Bat(){return cW||(cW=1,Zj=kat().maxBy),Zj}var Tat=Bat();const jat=yl(Tat);var eI={},tI={},uW;function Iat(){return uW||(uW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l<s&&(s=l,a=o)}return a}e.minBy=t}(tI)),tI}var dW;function Fat(){return dW||(dW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iat(),r=K4(),n=sL();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(eI)),eI}var rI,AW;function Oat(){return AW||(AW=1,rI=Fat().minBy),rI}var Dat=Oat();const Rat=yl(Dat);var Pat={radiusAxis:{},angleAxis:{}},tue=Qc({name:"polarAxis",initialState:Pat,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Lat,removeRadiusAxis:Mat,addAngleAxis:Uat,removeAngleAxis:Qat}=tue.actions,Hat=tue.reducer,Vat=["cx","cy","angle","axisLine"],zat=["angle","tickFormatter","stroke","tick"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lw.apply(null,arguments)}function fW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fW(Object(r),!0).forEach(function(n){mk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mk(e,t,r){return(t=$at(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $at(e){var t=Gat(e,"string");return typeof t=="symbol"?t:t+""}function Gat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rue(e,t){if(e==null)return{};var r,n,a=Kat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Kat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nue="radiusAxis";function qat(e){var t=fs();return T.useEffect(()=>(t(Lat(e)),()=>{t(Mat(e))})),null}var Wat=(e,t,r,n)=>{var{coordinate:a}=e;return ta(r,n,a,t)},Xat=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Yat=(e,t,r,n)=>{var a=jat(n,i=>i.coordinate||0),s=Rat(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},Jat=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=rue(e,Vat),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),l=ta(r,n,o[0],a),u=ta(r,n,o[1],a),d=jA(jA(jA({},nl(i)),{},{fill:"none"},Xn(s,!1)),{},{x1:l.x,y1:l.y,x2:u.x,y2:u.y});return T.createElement("line",Lw({className:"recharts-polar-radius-axis-line"},d))},Zat=(e,t,r)=>{var n;return T.isValidElement(e)?n=T.cloneElement(e,t):typeof e=="function"?n=e(t):n=T.createElement(B1,Lw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},est=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=rue(e,zat),o=Xat(e.orientation),l=nl(i),u=Xn(s,!1),d=t.map((f,h)=>{var p=Wat(f,e.angle,e.cx,e.cy),g=jA(jA(jA(jA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},l),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return T.createElement(ds,Lw({className:Cn("recharts-polar-radius-axis-tick",Goe(s)),key:"tick-".concat(f.coordinate)},g1(e,f,h)),Zat(s,g,n?n(f.value,h):f.value))});return T.createElement(ds,{className:"recharts-polar-radius-axis-ticks"},d)},tst=e=>{var{radiusAxisId:t}=e,r=ir(w1),n=ir(l=>T1(l,"radiusAxis",t)),a=ir(l=>j1(l,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=jA(jA(jA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return T.createElement(ds,{className:Cn("recharts-polar-radius-axis",nue,s.className)},o&&Jat(s,a),i&&est(s,a),$l.renderCallByParent(s,Yat(s.angle,s.cx,s.cy,a)))};class pk extends T.PureComponent{render(){return T.createElement(T.Fragment,null,T.createElement(qat,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),T.createElement(tst,this.props))}}mk(pk,"displayName","PolarRadiusAxis");mk(pk,"axisType",nue);mk(pk,"defaultProps",zl);var rst=["children"];function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hh.apply(null,arguments)}function hW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hW(Object(r),!0).forEach(function(n){gk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gk(e,t,r){return(t=nst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nst(e){var t=ast(e,"string");return typeof t=="symbol"?t:t+""}function ast(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sst(e,t){if(e==null)return{};var r,n,a=ist(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ist(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ost=Math.PI/180,mW=1e-5,aue="angleAxis";function lst(e){var t=fs(),r=T.useMemo(()=>{var{children:s}=e,i=sst(e,rst);return i},[e]),n=ir(s=>y1(s,r.id)),a=r===n;return T.useEffect(()=>(t(Uat(r)),()=>{t(Qat(r))}),[t,r]),a?e.children:null}var cst=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,l=ta(r,n,a,e.coordinate),u=ta(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:l.x,y1:l.y,x2:u.x,y2:u.y}},ust=(e,t)=>{var r=Math.cos(-e.coordinate*ost);return r>mW?t==="outer"?"start":"end":r<-mW?t==="outer"?"end":"start":"middle"},dst=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=SA(SA({},nl(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return T.createElement(ZL,hh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var l=i.map(u=>ta(t,r,n,u.coordinate));return T.createElement(Wce,hh({className:"recharts-polar-angle-axis-line"},o,{points:l}))},Ast=e=>{var{tick:t,tickProps:r,value:n}=e;return t?T.isValidElement(t)?T.cloneElement(t,r):typeof t=="function"?t(r):T.createElement(B1,hh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},fst=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=nl(e),o=Xn(t,!1),l=SA(SA({},i),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=cst(d,e),p=ust(d,e.orientation),g=SA(SA(SA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return T.createElement(ds,hh({className:Cn("recharts-polar-angle-axis-tick",Goe(t)),key:"tick-".concat(d.coordinate)},g1(e,d,f)),r&&T.createElement("line",hh({className:"recharts-polar-angle-axis-tick-line"},l,h)),T.createElement(Ast,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return T.createElement(ds,{className:"recharts-polar-angle-axis-ticks"},u)},hst=e=>{var{angleAxisId:t}=e,r=ir(w1),n=ir(o=>T1(o,"angleAxis",t)),a=tc(),s=ir(o=>j1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=SA(SA(SA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return T.createElement(ds,{className:Cn("recharts-polar-angle-axis",aue,i.className)},T.createElement(dst,hh({},i,{ticks:s})),T.createElement(fst,hh({},i,{ticks:s})))};class vk extends T.PureComponent{render(){return this.props.radius<=0?null:T.createElement(lst,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},T.createElement(hst,this.props))}}gk(vk,"displayName","PolarAngleAxis");gk(vk,"axisType",aue);gk(vk,"defaultProps",_A);function pW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pW(Object(r),!0).forEach(function(n){mst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mst(e,t,r){return(t=pst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pst(e){var t=gst(e,"string");return typeof t=="symbol"?t:t+""}function gst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vst=(e,t)=>t,s8=ct([e8,vst],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),xst=[],i8=(e,t,r)=>(r==null?void 0:r.length)===0?xst:r,sue=ct([ak,s8,i8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>gW(gW({},t.presentationProps),s.props))),a!=null)return a}}),bst=ct([sue,s8,i8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Da(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:v1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),yst=ct([sue,s8,i8,Bi],(e,t,r,n)=>{if(!(t==null||e==null))return hit({offset:n,pieSettings:t,displayedData:e,cells:r})}),nI={},vW;function wst(){return vW||(vW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(nI)),nI}var aI,xW;function Est(){return xW||(xW=1,aI=wst().isPlainObject),aI}var Cst=Est();const _st=yl(Cst);function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$5.apply(null,arguments)}var bW=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},Sst={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nst=e=>{var t=Lu(e,Sst),r=T.useRef(),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:l,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||u!==+u||o===0&&l===0||u===0)return null;var v=Cn("recharts-trapezoid",d);return g?T.createElement(L5,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:l,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:C,height:S,x:I,y:N}=b;return T.createElement(L5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},T.createElement("path",$5({},Xn(t,!0),{className:v,d:bW(I,N,y,C,S),ref:r})))}):T.createElement("g",null,T.createElement("path",$5({},Xn(t,!0),{className:v,d:bW(s,i,o,l,u)})))},kst=["option","shapeType","propTransformer","activeClassName","isActive"];function Bst(e,t){if(e==null)return{};var r,n,a=Tst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yW(Object(r),!0).forEach(function(n){jst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jst(e,t,r){return(t=Ist(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ist(e){var t=Fst(e,"string");return typeof t=="symbol"?t:t+""}function Fst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ost(e,t){return G5(G5({},t),e)}function Dst(e,t){return e==="symbols"}function wW(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return T.createElement(hle,r);case"trapezoid":return T.createElement(Nst,r);case"sector":return T.createElement(gle,r);case"symbols":if(Dst(t))return T.createElement(doe,r);break;default:return null}}function Rst(e){return T.isValidElement(e)?e.props:e}function iue(e){var{option:t,shapeType:r,propTransformer:n=Ost,activeClassName:a="recharts-active-shape",isActive:s}=e,i=Bst(e,kst),o;if(T.isValidElement(t))o=T.cloneElement(t,G5(G5({},i),Rst(t)));else if(typeof t=="function")o=t(i);else if(_st(t)&&typeof t!="boolean"){var l=n(t,i);o=T.createElement(wW,{shapeType:r,elementProps:l})}else{var u=i;o=T.createElement(wW,{shapeType:r,elementProps:u})}return s?T.createElement(ds,{className:a},o):o}var o8=(e,t)=>{var r=fs();return(n,a)=>s=>{e==null||e(n,a,s),r(xce({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},l8=e=>{var t=fs();return(r,n)=>a=>{e==null||e(r,n,a),t(Ctt())}},c8=(e,t)=>{var r=fs();return(n,a)=>s=>{e==null||e(n,a,s),r(_tt({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function u8(e){var{fn:t,args:r}=e,n=fs(),a=tc();return T.useEffect(()=>{if(!a){var s=t(r);return n(ytt(s)),()=>{n(wtt(s))}}},[t,r,n,a]),null}var oue=()=>{};function Pst(e){var{legendPayload:t}=e,r=fs(),n=tc();return T.useEffect(()=>n?oue:(r(ale(t)),()=>{r(sle(t))}),[r,n,t]),null}function lue(e){var{legendPayload:t}=e,r=fs(),n=ir(In);return T.useEffect(()=>n!=="centric"&&n!=="radial"?oue:(r(ale(t)),()=>{r(sle(t))}),[r,n,t]),null}function d8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(jw(t)),n=T.useRef(e);return n.current!==e&&(r.current=jw(t),n.current=e),r.current}var sI,Lst=()=>{var[e]=T.useState(()=>jw("uid-"));return e},Mst=(sI=mAe.useId)!==null&&sI!==void 0?sI:Lst;function Ust(e,t){var r=Mst();return t||(e?"".concat(e,"-").concat(r):r)}var Qst=T.createContext(void 0),A8=e=>{var{id:t,type:r,children:n}=e,a=Ust("recharts-".concat(r),t);return T.createElement(Qst.Provider,{value:a},n(a))},Hst={cartesianItems:[],polarItems:[]},cue=Qc({name:"graphicalItems",initialState:Hst,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=Yf(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=Yf(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Yf(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:Vst,replaceCartesianGraphicalItem:zst,removeCartesianGraphicalItem:$st,addPolarGraphicalItem:Gst,removePolarGraphicalItem:Kst}=cue.actions,qst=cue.reducer;function Wst(e){var t=fs(),r=T.useRef(null);return T.useEffect(()=>{r.current===null?t(Vst(e)):r.current!==e&&t(zst({prev:r.current,next:e})),r.current=e},[t,e]),T.useEffect(()=>()=>{r.current&&(t($st(r.current)),r.current=null)},[t]),null}function uue(e){var t=fs();return T.useEffect(()=>(t(Gst(e)),()=>{t(Kst(e))}),[t,e]),null}function Xst(){}var Yst={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EW={t:0},iI={t:1};function f8(e){var t=Lu(e,Yst),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=fle("JavascriptAnimate",t.animationManager),[f,h]=T.useState(r?EW:iI),p=T.useRef(null);return T.useEffect(()=>{r||h(iI)},[r]),T.useEffect(()=>{if(!r||!n)return Xst;var g=Ale(EW,iI,ule(s),a,h,d.getTimeoutController()),v=()=>{p.current=g()};return d.start([l,i,v,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,l,o,d]),u(f.t)}var Jst=["onMouseEnter","onClick","onMouseLeave"],Zst=["id"],eit=["id"];function h8(e,t){if(e==null)return{};var r,n,a=tit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function CW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CW(Object(r),!0).forEach(function(n){rit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rit(e,t,r){return(t=nit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nit(e){var t=ait(e,"string");return typeof t=="symbol"?t:t+""}function ait(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mh.apply(null,arguments)}function sit(e){var t=T.useMemo(()=>w2(e.children,I2),[e.children]),r=ir(n=>bst(n,e.id,t));return r==null?null:T.createElement(lue,{legendPayload:r})}function iit(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:v1(o,t),hide:l,type:u,color:i,unit:""}}}var oit=(e,t)=>e>t?"start":e<t?"end":"middle",lit=(e,t,r)=>typeof t=="function"?t(e):bl(t,r,r*.8),cit=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=$oe(s,i),l=a+bl(e.cx,s,s/2),u=n+bl(e.cy,i,i/2),d=bl(e.innerRadius,o,0),f=lit(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},uit=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},dit=(e,t)=>{if(T.isValidElement(e))return T.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Cn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return T.createElement(ole,mh({},t,{type:"linear",className:r}))},Ait=(e,t,r)=>{if(T.isValidElement(e))return T.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),T.isValidElement(n)))return n;var a=Cn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return T.createElement(B1,mh({},t,{alignmentBaseline:"middle",className:a}),n)};function fit(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=nl(r),l=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,v=ta(h.cx,h.cy,h.outerRadius+d,g),b=Ss(Ss(Ss(Ss({},o),h),{},{stroke:"none"},l),{},{index:p,textAnchor:oit(v.x,h.cx)},v),y=Ss(Ss(Ss(Ss({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[ta(h.cx,h.cy,h.outerRadius,g),v],key:"line"});return T.createElement(ds,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&dit(s,y),Ait(a,b,Da(h,i)))});return T.createElement(ds,{className:"recharts-pie-labels"},f)}function due(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=ir(hm),{onMouseEnter:o,onClick:l,onMouseLeave:u}=a,d=h8(a,Jst),f=o8(o,a.dataKey),h=l8(u),p=c8(l,a.dataKey);return t==null?null:T.createElement(T.Fragment,null,t.map((g,v)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(v)===i,y=i?n:null,C=b?r:y,S=Ss(Ss({},g),{},{stroke:g.stroke,tabIndex:-1,[Yoe]:v,[Joe]:a.dataKey});return T.createElement(ds,mh({tabIndex:-1,className:"recharts-pie-sector"},g1(d,g,v),{onMouseEnter:f(g,v),onMouseLeave:h(g,v),onClick:p(g,v),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(v)}),T.createElement(iue,mh({option:C,isActive:b,shapeType:"sector"},S)))}),T.createElement(fit,{sectors:t,props:a,showLabels:s}))}function hit(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=uit(o,l),g=Math.abs(p),v=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(B=>Da(B,u,0)!==0).length,y=(g>=360?b:b-1)*v,C=g-b*h-y,S=n.reduce((B,w)=>{var _=Da(w,u,0);return B+(ur(_)?_:0)},0),I;if(S>0){var N;I=n.map((B,w)=>{var _=Da(B,u,0),F=Da(B,d,w),U=cit(r,s,B),D=(ur(_)?_:0)/S,k,L=Ss(Ss({},B),a&&a[w]&&a[w].props);w?k=N.endAngle+Xi(p)*v*(_!==0?1:0):k=o;var R=k+Xi(p)*((_!==0?h:0)+D*C),X=(k+R)/2,V=(U.innerRadius+U.outerRadius)/2,Z=[{name:F,value:_,payload:L,dataKey:u,type:f}],H=ta(U.cx,U.cy,V,X);return N=Ss(Ss(Ss(Ss({},r.presentationProps),{},{percent:D,cornerRadius:i,name:F,tooltipPayload:Z,midAngle:X,middleRadius:V,tooltipPosition:H},L),U),{},{value:Da(B,u),startAngle:k,endAngle:R,payload:L,paddingAngle:Xi(p)*v}),N})}return I}function mit(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=d8(t,"recharts-pie-"),p=r.current,[g,v]=T.useState(!0),b=T.useCallback(()=>{typeof f=="function"&&f(),v(!1)},[f]),y=T.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return T.createElement(f8,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},C=>{var S=[],I=n&&n[0],N=I.startAngle;return n.forEach((B,w)=>{var _=p&&p[w],F=w>0?fm(B,"paddingAngle",0):0;if(_){var U=Vv(_.endAngle-_.startAngle,B.endAngle-B.startAngle),D=Ss(Ss({},B),{},{startAngle:N+F,endAngle:N+U(C)+F});S.push(D),N=D.endAngle}else{var{endAngle:k,startAngle:L}=B,R=Vv(0,k-L),X=R(C),V=Ss(Ss({},B),{},{startAngle:N+F,endAngle:N+X+F});S.push(V),N=V.endAngle}}),r.current=S,T.createElement(ds,null,T.createElement(due,{sectors:S,activeShape:l,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function pit(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=T.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?T.createElement(mit,{props:e,previousSectorsRef:s}):T.createElement(due,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function git(e){var{hide:t,className:r,rootTabIndex:n}=e,a=Cn("recharts-pie",r);return t?null:T.createElement(ds,{tabIndex:n,className:a},T.createElement(pit,e))}var vit={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!bg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function xit(e){var{id:t}=e,r=h8(e,Zst),n=T.useMemo(()=>w2(e.children,I2),[e.children]),a=ir(s=>yst(s,t,n));return T.createElement(T.Fragment,null,T.createElement(u8,{fn:iit,args:Ss(Ss({},e),{},{sectors:a})}),T.createElement(git,mh({},r,{sectors:a})))}function Aue(e){var t=Lu(e,vit),{id:r}=t,n=h8(t,eit),a=nl(n);return T.createElement(A8,{id:r,type:"pie"},s=>T.createElement(T.Fragment,null,T.createElement(uue,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),T.createElement(sit,mh({},n,{id:s})),T.createElement(xit,mh({},n,{id:s})),n.children))}Aue.displayName="Pie";var bit=ct([Bi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),yit=ct([bit,Eh,Ch],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),fue=()=>ir(yit),wit=()=>ir(drt);function _W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_W(Object(r),!0).forEach(function(n){Eit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_W(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eit(e,t,r){return(t=Cit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cit(e){var t=_it(e,"string");return typeof t=="symbol"?t:t+""}function _it(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sit=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=SW(SW({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),ZP(a)),o;return T.isValidElement(a)?o=T.cloneElement(a,i):typeof a=="function"?o=a(i):o=T.createElement(ZL,i),T.createElement(ds,{className:"recharts-active-dot"},o)};function Nit(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=ir(hm),i=wit();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return Ts(o)?null:Sit({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function NW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NW(Object(r),!0).forEach(function(n){kit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kit(e,t,r){return(t=Bit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bit(e){var t=Tit(e,"string");return typeof t=="symbol"?t:t+""}function Tit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hue=(e,t)=>T1(e,"radiusAxis",t),jit=ct([hue],e=>{if(e!=null)return{scale:e}}),Iit=ct([_2,hue],(e,t)=>{if(!(e==null||t==null))return K5(K5({},e),{},{scale:t})}),Fit=(e,t,r,n)=>j1(e,"radiusAxis",t,n),mue=(e,t,r)=>y1(e,r),pue=(e,t,r)=>T1(e,"angleAxis",r),Oit=ct([mue,pue],(e,t)=>{if(!(e==null||t==null))return K5(K5({},e),{},{scale:t})}),Dit=(e,t,r,n)=>j1(e,"angleAxis",r,n),Rit=ct([mue,pue,w1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),Pit=(e,t,r,n,a)=>a,Lit=ct([In,Iit,Fit,Oit,Dit],(e,t,r,n,a)=>Cm(e,"radiusAxis")?Ow(t,r,!1):Ow(n,a,!1)),Mit=ct([e8,Pit],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),Uit=ct([jit,Rit,ak,Mit,Lit],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var l=s.slice(i,o+1);return Wit({radiusAxis:e,angleAxis:t,displayedData:l,dataKey:n,bandSize:a})}}),Qit=["id"];function Hit(e,t){if(e==null)return{};var r,n,a=Vit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kW(Object(r),!0).forEach(function(n){m8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m8(e,t,r){return(t=zit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zit(e){var t=$it(e,"string");return typeof t=="symbol"?t:t+""}function $it(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wx.apply(null,arguments)}function p8(e,t){return e&&e!=="none"?e:t}var Git=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:p8(n,a),value:v1(r,t),payload:e}]};function Kit(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:v1(s,t),hide:i,type:o,color:p8(r,a),unit:""}}}function qit(e,t){var r;return T.isValidElement(e)?r=T.cloneElement(e,t):typeof e=="function"?r=e(t):r=T.createElement(ZL,Wx({},t,{className:Cn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function Wit(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,l=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Da(h,r.dataKey,p),v=Da(h,a),b=r.scale(g)+d,y=Array.isArray(v)?qce(v):v,C=Ts(y)?void 0:t.scale(y);Array.isArray(v)&&v.length>=2&&(l=!0),u.push(pl(pl({},ta(i,o,C,b)),{},{name:g,value:v,cx:i,cy:o,radius:C,angle:b,payload:h}))});var f=[];return l&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=Ts(p)?void 0:t.scale(p);f.push(pl(pl({},h),{},{radius:g},ta(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:l,baseLinePoints:f}}function Xit(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=Hit(r,Qit),o=nl(i),l=Xn(n,!0),u=t.map((d,f)=>{var h=pl(pl(pl({key:"dot-".concat(f),r:3},o),l),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return qit(n,h)});return T.createElement(ds,{className:"recharts-radar-dots"},u)}function gue(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,l=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return T.isValidElement(a)?d=T.cloneElement(a,pl(pl({},r),{},{points:t})):typeof a=="function"?d=a(pl(pl({},r),{},{points:t})):d=T.createElement(Wce,Wx({},Xn(r,!0),{onMouseEnter:l,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),T.createElement(ds,{className:"recharts-radar-polygon"},d,T.createElement(Xit,{props:r,points:t}),n&&W0.renderCallByParent(r,t))}function Yit(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:l,onAnimationStart:u}=t,d=r.current,f=d8(t,"recharts-radar-"),[h,p]=T.useState(!0),g=T.useCallback(()=>{typeof l=="function"&&l(),p(!1)},[l]),v=T.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return T.createElement(f8,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:v},b=>{var y=d&&d.length/n.length,C=b===1?n:n.map((S,I)=>{var N=d&&d[Math.floor(I*y)];if(N){var B=Vv(N.x,S.x),w=Vv(N.y,S.y);return pl(pl({},S),{},{x:B(b),y:w(b)})}var _=Vv(S.cx,S.x),F=Vv(S.cy,S.y);return pl(pl({},S),{},{x:_(b),y:F(b)})});return b>0&&(r.current=C),T.createElement(gue,{points:C,props:t,showLabels:!h})})}function Jit(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=T.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?T.createElement(Yit,{props:e,previousPointsRef:a}):T.createElement(gue,{points:t,props:e,showLabels:!0})}var Zit={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!bg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class eot extends T.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=Cn("recharts-radar",r);return T.createElement(T.Fragment,null,T.createElement(ds,{className:a},T.createElement(Jit,this.props)),T.createElement(Nit,{points:n,mainColor:p8(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function tot(e){var t=tc(),r=ir(n=>Uit(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return T.createElement(eot,Wx({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class g8 extends T.PureComponent{render(){return T.createElement(A8,{id:this.props.id,type:"radar"},t=>T.createElement(T.Fragment,null,T.createElement(uue,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),T.createElement(lue,{legendPayload:Git(this.props)}),T.createElement(u8,{fn:Kit,args:this.props}),T.createElement(tot,Wx({},this.props,{id:t}))))}}m8(g8,"displayName","Radar");m8(g8,"defaultProps",Zit);var rot="Invariant failed";function not(e,t){throw new Error(rot)}var aot=["x","y"];function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(null,arguments)}function BW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BW(Object(r),!0).forEach(function(n){sot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sot(e,t,r){return(t=iot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iot(e){var t=oot(e,"string");return typeof t=="symbol"?t:t+""}function oot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lot(e,t){if(e==null)return{};var r,n,a=cot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uot(e,t){var{x:r,y:n}=e,a=lot(e,aot),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Qb(Qb(Qb(Qb(Qb({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function vue(e){return T.createElement(iue,hO({shapeType:"rectangle",propTransformer:uot,activeClassName:"recharts-active-bar"},e))}var dot=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||Ts(n);return s?t(n,a):(s||not(),r)}},Aot={},xue=Qc({name:"errorBars",initialState:Aot,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Sdt,removeErrorBar:Ndt}=xue.actions,fot=xue.reducer,hot=["children"];function mot(e,t){if(e==null)return{};var r,n,a=pot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var got={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},vot=T.createContext(got);function xot(e){var{children:t}=e,r=mot(e,hot);return T.createElement(vot.Provider,{value:r},t)}function bue(e,t){var r,n,a=ir(u=>_h(u,e)),s=ir(u=>Sm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:wc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Ec.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function bot(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=fue(),{needClipX:s,needClipY:i,needClip:o}=bue(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=a;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:s?l:l-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var yot=["onMouseEnter","onMouseLeave","onClick"],wot=["value","background","tooltipPosition"],Eot=["id"],Cot=["onMouseEnter","onClick","onMouseLeave"];function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xx.apply(null,arguments)}function TW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TW(Object(r),!0).forEach(function(n){_ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ot(e,t,r){return(t=Sot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sot(e){var t=Not(e,"string");return typeof t=="symbol"?t:t+""}function Not(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q5(e,t){if(e==null)return{};var r,n,a=kot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Bot=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:v1(r,t),payload:e}]};function Tot(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:v1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function jot(e){var t=ir(hm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:l}=s,u=q5(s,yot),d=o8(i,n),f=l8(o),h=c8(l,n);if(!a||r==null)return null;var p=Xn(a,!1);return T.createElement(T.Fragment,null,r.map((g,v)=>{var{value:b,background:y,tooltipPosition:C}=g,S=q5(g,wot);if(!y)return null;var I=d(g,v),N=f(g,v),B=h(g,v),w=Go(Go(Go(Go(Go({option:a,isActive:String(v)===t},S),{},{fill:"#eee"},y),p),g1(u,g,v)),{},{onMouseEnter:I,onMouseLeave:N,onClick:B,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return T.createElement(vue,Xx({key:"background-bar-".concat(v)},w))}))}function yue(e){var{data:t,props:r,showLabels:n}=e,a=nl(r),{id:s}=a,i=q5(a,Eot),{shape:o,dataKey:l,activeBar:u}=r,d=ir(hm),f=ir(Ice),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,v=q5(r,Cot),b=o8(h,l),y=l8(g),C=c8(p,l);return t?T.createElement(T.Fragment,null,t.map((S,I)=>{var N=u&&String(I)===d&&(f==null||l===f),B=N?u:o,w=Go(Go(Go({},i),S),{},{isActive:N,option:B,index:I,dataKey:l});return T.createElement(ds,Xx({className:"recharts-bar-rectangle"},g1(v,S,I),{onMouseEnter:b(S,I),onMouseLeave:y(S,I),onClick:C(S,I),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(I)}),T.createElement(vue,w))}),n&&W0.renderCallByParent(r,t)):null}function Iot(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=d8(t,"recharts-bar-"),[p,g]=T.useState(!1),v=T.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=T.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return T.createElement(f8,{begin:i,duration:o,isActive:s,easing:l,onAnimationEnd:v,onAnimationStart:b,key:h},y=>{var C=y===1?n:n==null?void 0:n.map((S,I)=>{var N=f&&f[I];if(N)return Go(Go({},S),{},{x:wv(N.x,S.x,y),y:wv(N.y,S.y,y),width:wv(N.width,S.width,y),height:wv(N.height,S.height,y)});if(a==="horizontal"){var B=wv(0,S.height,y);return Go(Go({},S),{},{y:S.y+S.height-B,height:B})}var w=wv(0,S.width,y);return Go(Go({},S),{},{width:w})});return y>0&&(r.current=C??null),C==null?null:T.createElement(ds,null,T.createElement(yue,{props:t,data:C,showLabels:!p}))})}function Fot(e){var{data:t,isAnimationActive:r}=e,n=T.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?T.createElement(Iot,{previousRectanglesRef:n,props:e}):T.createElement(yue,{props:e,data:t,showLabels:!0})}var wue=0,Oot=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Da(e,t)}};class Dot extends T.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:l,id:u}=this.props;if(t)return null;var d=Cn("recharts-bar",a),f=u;return T.createElement(ds,{className:d,id:u},o&&T.createElement("defs",null,T.createElement(bot,{clipPathId:f,xAxisId:s,yAxisId:i})),T.createElement(ds,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},T.createElement(jot,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),T.createElement(Fot,this.props)),this.props.children)}}var Rot={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!bg.isSsr,legendType:"rect",minPointSize:wue,xAxisId:0,yAxisId:0};function Pot(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=bue(t,r),h=mL(),p=tc(),g=w2(e.children,I2),v=ir(C=>ult(C,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=v==null?void 0:v[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,T.createElement(xot,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Oot,errorBarOffset:b},T.createElement(Dot,Xx({},e,{layout:h,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function Lot(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,v=d?g.scale.domain():null,b=SJe({numericAxis:g});return f.map((y,C)=>{var S,I,N,B,w,_;d?S=bJe(d[C],v):(S=Da(y,r),Array.isArray(S)||(S=[b,S]));var F=dot(n,wue)(S[1],C);if(t==="horizontal"){var U,[D,k]=[o.scale(S[0]),o.scale(S[1])];I=MK({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:y,index:C}),N=(U=k??D)!==null&&U!==void 0?U:void 0,B=a.size;var L=D-k;if(w=Pc(L)?0:L,_={x:I,y:h.top,width:B,height:h.height},Math.abs(F)>0&&Math.abs(w)<Math.abs(F)){var R=Xi(w||F)*(Math.abs(F)-Math.abs(w));N-=R,w+=R}}else{var[X,V]=[i.scale(S[0]),i.scale(S[1])];if(I=X,N=MK({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:C}),B=V-X,w=a.size,_={x:h.left,y:N,width:h.width,height:w},Math.abs(F)>0&&Math.abs(B)<Math.abs(F)){var Z=Xi(B||F)*(Math.abs(F)-Math.abs(B));B+=Z}}if(I==null||N==null||B==null||w==null)return null;var H=Go(Go({},y),{},{x:I,y:N,width:B,height:w,value:d?S:S[1],payload:y,background:_,tooltipPosition:{x:I+B/2,y:N+w/2}},p&&p[C]&&p[C].props);return H}).filter(Boolean)}function mO(e){var t=Lu(e,Rot),r=tc();return T.createElement(A8,{id:t.id,type:"bar"},n=>T.createElement(T.Fragment,null,T.createElement(Pst,{legendPayload:Bot(t)}),T.createElement(u8,{fn:Tot,args:t}),T.createElement(Wst,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:_Je(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(Pot,Xx({},t,{id:n}))))}mO.displayName="Bar";function jW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jW(Object(r),!0).forEach(function(n){Mot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mot(e,t,r){return(t=Uot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uot(e){var t=Qot(e,"string");return typeof t=="symbol"?t:t+""}function Qot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hot=(e,t)=>t,Vot=(e,t,r)=>r,zot=(e,t,r,n)=>n,$ot=(e,t,r,n,a)=>a,F2=ct([NL,$ot],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Got=ct([F2],e=>e==null?void 0:e.maxBarSize),Kot=(e,t,r,n,a,s)=>s,IW=(e,t,r)=>{var n=r??e;if(!Ts(n))return bl(n,t,0)},qot=ct([In,NL,Hot,Vot,zot],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Wot=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?oO(e,"yAxis",r,n):oO(e,"xAxis",t,n)},Xot=(e,t,r)=>{var n=In(e);return n==="horizontal"?bq(e,"xAxis",t):bq(e,"yAxis",r)},Yot=(e,t,r)=>{var n={},a=e.filter(lk),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=IW(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),l=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=IW(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},Jot=ct([qot,yet,Xot],Yot),Zot=(e,t,r,n,a)=>{var s,i,o=F2(e,t,r,n,a);if(o!=null){var l=In(e),u=Fle(e),{maxBarSize:d}=o,f=Ts(d)?u:d,h,p;return l==="horizontal"?(h=Kx(e,"xAxis",t,n),p=Gx(e,"xAxis",t,n)):(h=Kx(e,"yAxis",r,n),p=Gx(e,"yAxis",r,n)),(s=(i=Ow(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Eue=(e,t,r,n)=>{var a=In(e),s,i;return a==="horizontal"?(s=Kx(e,"xAxis",t,n),i=Gx(e,"xAxis",t,n)):(s=Kx(e,"yAxis",r,n),i=Gx(e,"yAxis",r,n)),Ow(s,i)};function elt(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=bl(e,r,0,!0),o,l=[];if(Uc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,C)=>y+(C.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,C)=>{var S,I={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(S=C.barSize)!==null&&S!==void 0?S:0}},N=[...y,I];return p=N[N.length-1].position,N},l)}else{var g=bl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var v=(r-2*g-(s-1)*i)/s;v>1&&(v>>=0);var b=Uc(a)?Math.min(v,a):v;o=n.reduce((y,C,S)=>[...y,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g+(v+i)*S+(v-b)/2,size:b}}],l)}return o}}var tlt=(e,t,r,n,a,s,i)=>{var o=Ts(i)?t:i,l=elt(r,n,a!==s?a:s,e,o);return a!==s&&l!=null&&(l=l.map(u=>i_(i_({},u),{},{position:i_(i_({},u.position),{},{offset:u.position.offset-a/2})}))),l},rlt=ct([Jot,Fle,bet,Ole,Zot,Eue,Got],tlt),nlt=(e,t,r,n)=>Kx(e,"xAxis",t,n),alt=(e,t,r,n)=>Kx(e,"yAxis",r,n),slt=(e,t,r,n)=>Gx(e,"xAxis",t,n),ilt=(e,t,r,n)=>Gx(e,"yAxis",r,n),olt=ct([rlt,F2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),llt=(e,t)=>{var r=CL(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},clt=ct([Wot,F2],llt),ult=ct([Bi,nlt,alt,slt,ilt,olt,In,gL,Eue,clt,F2,Kot],(e,t,r,n,a,s,i,o,l,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||l==null)){var{data:v}=d,b;if(v!=null&&v.length>0?b=v:b=h==null?void 0:h.slice(p,g+1),b!=null)return Lot({layout:i,barSettings:d,pos:s,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Cue=e=>{var{chartData:t}=e,r=fs(),n=tc();return T.useEffect(()=>n?()=>{}:(r(Tq(t)),()=>{r(Tq(void 0))}),[t,r,n]),null},FW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},_ue=Qc({name:"brush",initialState:FW,reducers:{setBrushSettings(e,t){return t.payload==null?FW:t.payload}}}),{setBrushSettings:kdt}=_ue.actions,dlt=_ue.reducer;function Alt(e,t,r){return(t=flt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function flt(e){var t=hlt(e,"string");return typeof t=="symbol"?t:t+""}function hlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v8{static create(t){return new v8(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Alt(v8,"EPS",1e-4);function mlt(e){return(e%180+180)%180}var plt=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=mlt(a),i=s*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},glt={dots:[],areas:[],lines:[]},Sue=Qc({name:"referenceElements",initialState:glt,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Yf(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Yf(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Yf(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Bdt,removeDot:Tdt,addArea:jdt,removeArea:Idt,addLine:Fdt,removeLine:Odt}=Sue.actions,vlt=Sue.reducer,xlt=T.createContext(void 0),blt=e=>{var{children:t}=e,[r]=T.useState("".concat(jw("recharts"),"-clip")),n=fue();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return T.createElement(xlt.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function oI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Nue(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function ylt(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return plt(n,r)}function wlt(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function W5(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function Elt(e,t){return Nue(e,t+1)}function Clt(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:Nue(n,u)};var v=l,b,y=()=>(b===void 0&&(b=r(g,v)),b),C=g.coordinate,S=l===0||W5(e,C,y,d,o);S||(l=0,d=i,u+=1),S&&(d=C+e*(y()/2+a),l+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function OW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OW(Object(r),!0).forEach(function(n){_lt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _lt(e,t,r){return(t=Slt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Slt(e){var t=Nlt(e,"string");return typeof t=="symbol"?t:t+""}function Nlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function klt(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,u=function(h){var p=s[h],g,v=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*v()/2-l);s[h]=p=Mo(Mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Mo(Mo({},p),{},{tickCoord:p.coordinate});var y=W5(e,p.tickCoord,v,o,l);y&&(l=p.tickCoord-e*(v()/2+a),s[h]=Mo(Mo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function Blt(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Mo(Mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=W5(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Mo(Mo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,v=function(C){var S=i[C],I,N=()=>(I===void 0&&(I=r(S,C)),I);if(C===0){var B=e*(S.coordinate-e*N()/2-l);i[C]=S=Mo(Mo({},S),{},{tickCoord:B<0?S.coordinate-B*e:S.coordinate})}else i[C]=S=Mo(Mo({},S),{},{tickCoord:S.coordinate});var w=W5(e,S.tickCoord,N,l,u);w&&(l=S.tickCoord+e*(N()/2+a),i[C]=Mo(Mo({},S),{},{isShow:!0}))},b=0;b<g;b++)v(b);return i}function x8(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(l)||bg.isSsr){var h;return(h=Elt(a,ur(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",v=d&&g==="width"?My(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(S,I)=>{var N=typeof u=="function"?u(S.value,I):S.value;return g==="width"?ylt(My(N,{fontSize:t,letterSpacing:r}),v,f):My(N,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Xi(a[1].coordinate-a[0].coordinate):1,C=wlt(s,y,g);return l==="equidistantPreserveStart"?Clt(y,C,b,a,i):(l==="preserveStart"||l==="preserveStartEnd"?p=Blt(y,C,b,a,i,l==="preserveStartEnd"):p=klt(y,C,b,a,i),p.filter(S=>S.isShow))}var Tlt=["viewBox"],jlt=["viewBox"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function DW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DW(Object(r),!0).forEach(function(n){b8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RW(e,t){if(e==null)return{};var r,n,a=Ilt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ilt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function b8(e,t,r){return(t=Flt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Flt(e){var t=Olt(e,"string");return typeof t=="symbol"?t:t+""}function Olt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class km extends T.Component{constructor(t){super(t),this.tickRefs=T.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=RW(t,Tlt),s=this.props,{viewBox:i}=s,o=RW(s,jlt);return!oI(n,i)||!oI(a,o)||!oI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:l,tickMargin:u}=this.props,d,f,h,p,g,v,b=l?-1:1,y=t.tickSize||o,C=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!l*s,h=p-b*y,v=h-b*u,g=C;break;case"left":h=p=t.coordinate,f=r+ +!l*a,d=f-b*y,g=d-b*u,v=C;break;case"right":h=p=t.coordinate,f=r+ +l*a,d=f+b*y,g=d+b*u,v=C;break;default:d=f=t.coordinate,p=n+ +l*s,h=p+b*y,v=h+b*u,g=C;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,l=Ei(Ei(Ei({},Xn(this.props,!1)),Xn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);l=Ei(Ei({},l),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);l=Ei(Ei({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return T.createElement("line",Gv({},l,{className:Cn("recharts-cartesian-axis-line",fm(o,"className"))}))}static renderTickItem(t,r,n){var a,s=Cn(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,Ei(Ei({},r),{},{className:s}));else if(typeof t=="function")a=t(Ei(Ei({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Cn(i,t.className)),a=T.createElement(B1,Gv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:l,padding:u}=this.props,d=x8(Ei(Ei({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=nl(this.props),g=Xn(i,!1),v=Ei(Ei({},p),{},{fill:"none"},Xn(a,!1)),b=d.map((y,C)=>{var{line:S,tick:I}=this.getTickLineCoord(y),N=Ei(Ei(Ei(Ei({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),I),{},{index:C,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return T.createElement(ds,Gv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},g1(this.props,y,C)),a&&T.createElement("line",Gv({},v,S,{className:Cn("recharts-cartesian-axis-tick-line",fm(a,"className"))})),i&&km.renderTickItem(i,N,"".concat(typeof o=="function"?o(y.value,C):y.value).concat(l||"")))});return b.length>0?T.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:T.createElement(ds,{className:Cn("recharts-cartesian-axis",a),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),$l.renderCallByParent(this.props))}}b8(km,"displayName","CartesianAxis");b8(km,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Dlt=["x1","y1","x2","y2","key"],Rlt=["offset"],Plt=["xAxisId","yAxisId"],Llt=["xAxisId","yAxisId"];function PW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PW(Object(r),!0).forEach(function(n){Mlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mlt(e,t,r){return(t=Ult(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ult(e){var t=Qlt(e,"string");return typeof t=="symbol"?t:t+""}function Qlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xp.apply(null,arguments)}function X5(e,t){if(e==null)return{};var r,n,a=Hlt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hlt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vlt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return T.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function kue(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,l=X5(t,Dlt),u=nl(l),{offset:d}=u,f=X5(u,Rlt);r=T.createElement("line",xp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function zlt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=X5(e,Plt),l=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return kue(n,f)});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function $lt(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=X5(e,Llt),l=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return kue(n,f)});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Glt(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%t.length;return T.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Klt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%r.length;return T.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var qlt=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return qoe(x8(Ko(Ko(Ko({},km.defaultProps),r),{},{ticks:Woe(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},Wlt=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return qoe(x8(Ko(Ko(Ko({},km.defaultProps),r),{},{ticks:Woe(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Xlt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function pO(e){var t=tle(),r=rle(),n=ele(),a=Ko(Ko({},Lu(e,Xlt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=tc(),v=ir(F=>yq(F,"xAxis",s,g)),b=ir(F=>yq(F,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(l)||l!==+l)return null;var y=a.verticalCoordinatesGenerator||qlt,C=a.horizontalCoordinatesGenerator||Wlt,{horizontalPoints:S,verticalPoints:I}=a;if((!S||!S.length)&&typeof C=="function"){var N=h&&h.length,B=C({yAxis:b?Ko(Ko({},b),{},{ticks:N?h:b.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);Ly(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(S=B)}if((!I||!I.length)&&typeof y=="function"){var w=p&&p.length,_=y({xAxis:v?Ko(Ko({},v),{},{ticks:w?p:v.ticks}):void 0,width:t,height:r,offset:n},w?!0:f);Ly(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(I=_)}return T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(Vlt,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),T.createElement(Glt,xp({},a,{horizontalPoints:S})),T.createElement(Klt,xp({},a,{verticalPoints:I})),T.createElement(zlt,xp({},a,{offset:n,horizontalPoints:S,xAxis:v,yAxis:b})),T.createElement($lt,xp({},a,{offset:n,verticalPoints:I,xAxis:v,yAxis:b})))}pO.displayName="CartesianGrid";function LW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LW(Object(r),!0).forEach(function(n){Ylt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ylt(e,t,r){return(t=Jlt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jlt(e){var t=Zlt(e,"string");return typeof t=="symbol"?t:t+""}function Zlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ect={xAxis:{},yAxis:{},zAxis:{}},Bue=Qc({name:"cartesianAxis",initialState:ect,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=MW(MW({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:tct,removeXAxis:rct,addYAxis:nct,removeYAxis:act,addZAxis:Ddt,removeZAxis:Rdt,updateYAxisWidth:sct}=Bue.actions,ict=Bue.reducer,oct=["children"],lct=["dangerouslySetInnerHTML","ticks"];function Tue(e,t,r){return(t=cct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cct(e){var t=uct(e,"string");return typeof t=="symbol"?t:t+""}function uct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(null,arguments)}function jue(e,t){if(e==null)return{};var r,n,a=dct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Act(e){var t=fs(),r=T.useMemo(()=>{var{children:s}=e,i=jue(e,oct);return i},[e]),n=ir(s=>_h(s,r.id)),a=r===n;return T.useEffect(()=>(t(tct(r)),()=>{t(rct(r))}),[r,t]),a?e.children:null}var fct=e=>{var{xAxisId:t,className:r}=e,n=ir(Zoe),a=tc(),s="xAxis",i=ir(p=>S1(p,s,t,a)),o=ir(p=>Ace(p,s,t,a)),l=ir(p=>lce(p,t)),u=ir(p=>htt(p,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=jue(e,lct);return T.createElement(km,gO({},h,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:Cn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},hct=e=>{var t,r,n,a,s;return T.createElement(Act,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},T.createElement(fct,e))};class Y5 extends T.Component{render(){return T.createElement(hct,this.props)}}Tue(Y5,"displayName","XAxis");Tue(Y5,"defaultProps",{allowDataOverflow:wc.allowDataOverflow,allowDecimals:wc.allowDecimals,allowDuplicatedCategory:wc.allowDuplicatedCategory,height:wc.height,hide:!1,mirror:wc.mirror,orientation:wc.orientation,padding:wc.padding,reversed:wc.reversed,scale:wc.scale,tickCount:wc.tickCount,type:wc.type,xAxisId:0});var mct=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=a+s,u=i+l+o+(r?n:0);return Math.round(u)}return 0},pct=["dangerouslySetInnerHTML","ticks"];function Iue(e,t,r){return(t=gct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gct(e){var t=vct(e,"string");return typeof t=="symbol"?t:t+""}function vct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vO.apply(null,arguments)}function xct(e,t){if(e==null)return{};var r,n,a=bct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yct(e){var t=fs();return T.useEffect(()=>(t(nct(e)),()=>{t(act(e))}),[e,t]),null}var wct=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=T.useRef(null),o=T.useRef(null),l=ir(Zoe),u=tc(),d=fs(),f="yAxis",h=ir(S=>S1(S,f,r,u)),p=ir(S=>cce(S,r)),g=ir(S=>mtt(S,r)),v=ir(S=>Ace(S,f,r,u));if(T.useLayoutEffect(()=>{var S;if(!(a!=="auto"||!p||JL(s)||T.isValidElement(s))){var I=i.current,N=I==null||(S=I.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:B,tickMargin:w}=I.props,_=mct({ticks:N,label:o.current,labelGapWithTick:5,tickSize:B,tickMargin:w});Math.round(p.width)!==Math.round(_)&&d(sct({id:r,width:_}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,C=xct(e,pct);return T.createElement(km,vO({},C,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:Cn("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:v}))},Ect=e=>{var t,r,n,a,s;return T.createElement(T.Fragment,null,T.createElement(yct,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),T.createElement(wct,e))},Cct={allowDataOverflow:Ec.allowDataOverflow,allowDecimals:Ec.allowDecimals,allowDuplicatedCategory:Ec.allowDuplicatedCategory,hide:!1,mirror:Ec.mirror,orientation:Ec.orientation,padding:Ec.padding,reversed:Ec.reversed,scale:Ec.scale,tickCount:Ec.tickCount,type:Ec.type,width:Ec.width,yAxisId:0};class J5 extends T.Component{render(){return T.createElement(Ect,this.props)}}Iue(J5,"displayName","YAxis");Iue(J5,"defaultProps",Cct);var lI={exports:{}},cI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UW;function _ct(){if(UW)return cI;UW=1;var e=Yx();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return cI.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(N){if(!y){if(y=!0,C=N,N=f(N),h!==void 0&&g.hasValue){var B=g.value;if(h(B,N))return S=B}return S=N}if(B=S,r(C,N))return B;var w=f(N);return h!==void 0&&h(B,w)?(C=N,B):(C=N,S=w)}var y=!1,C,S,I=d===void 0?null:d;return[function(){return b(u())},I===null?void 0:function(){return b(I())}]},[u,d,f,h]);var v=n(l,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),o(v),v},cI}var QW;function Sct(){return QW||(QW=1,lI.exports=_ct()),lI.exports}Sct();function Nct(e){e()}function kct(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Nct(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var HW={notify(){},get:()=>[]};function Bct(e,t){let r,n=HW,a=0,s=!1;function i(v){d();const b=n.subscribe(v);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(l),n=kct())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=HW)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var Tct=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jct=Tct(),Ict=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Fct=Ict(),Oct=()=>jct||Fct?T.useLayoutEffect:T.useEffect,Dct=Oct(),uI=Symbol.for("react-redux-context"),dI=typeof globalThis<"u"?globalThis:{};function Rct(){if(!T.createContext)return{};const e=dI[uI]??(dI[uI]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var Pct=Rct();function Lct(e){const{children:t,context:r,serverState:n,store:a}=e,s=T.useMemo(()=>{const l=Bct(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),i=T.useMemo(()=>a.getState(),[a]);Dct(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,i]);const o=r||Pct;return T.createElement(o.Provider,{value:s},t)}var Mct=Lct,Uct=(e,t)=>t,y8=ct([Uct,In,w1,Ti,kce,Sh,vrt,Bi],Ert),w8=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Fue=Ou("mouseClick"),Oue=E2();Oue.startListening({actionCreator:Fue,effect:(e,t)=>{var r=e.payload,n=y8(t.getState(),w8(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Stt({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var xO=Ou("mouseMove"),Due=E2();Due.startListening({actionCreator:xO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=HL(n,n.tooltip.settings.shared),s=y8(n,w8(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(yce({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(bce()))}});function Qct(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var VW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Rue=Qc({name:"rootProps",initialState:VW,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:VW.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Hct=Rue.reducer,{updateOptions:Vct}=Rue.actions,Pue=Qc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:zct}=Pue.actions,$ct=Pue.reducer,Lue=Ou("keyDown"),Mue=Ou("focus"),E8=E2();E8.startListening({actionCreator:Lue,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(VL(a,k1(r))),o=Sh(r);if(s==="Enter"){var l=V5(r,"axis","hover",String(a.index));t.dispatch(cO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=gtt(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=V5(r,"axis","hover",String(h));t.dispatch(cO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});E8.startListening({actionCreator:Mue,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=V5(r,"axis","hover",String(s));t.dispatch(cO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var vu=Ou("externalEvent"),Uue=E2();Uue.startListening({actionCreator:vu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:lrt(r),activeDataKey:Ice(r),activeIndex:hm(r),activeLabel:jce(r),activeTooltipIndex:hm(r),isTooltipActive:crt(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Gct=ct([N1],e=>e.tooltipItemPayloads),Kct=ct([Gct,T2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),Que=Ou("touchMove"),Hue=E2();Hue.startListening({actionCreator:Que,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=HL(n,n.tooltip.settings.shared);if(a==="axis"){var s=y8(n,w8({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(yce({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Yoe),d=(i=l.getAttribute(Joe))!==null&&i!==void 0?i:void 0,f=Kct(t.getState(),u,d);t.dispatch(xce({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var qct=woe({brush:dlt,cartesianAxis:ict,chartData:Mrt,errorBars:fot,graphicalItems:qst,layout:aJe,legend:HJe,options:Ort,polarAxis:Hat,polarOptions:$ct,referenceElements:vlt,rootProps:Hct,tooltip:Ntt}),Wct=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return BYe({reducer:qct,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Oue.middleware,Due.middleware,E8.middleware,Uue.middleware,Hue.middleware]),devTools:{serialize:{replacer:Qct},name:"recharts-".concat(r)}})};function Vue(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=tc(),s=T.useRef(null);if(a)return r;s.current==null&&(s.current=Wct(t,n));var i=iL;return T.createElement(Mct,{context:i,store:s.current},r)}function zue(e){var{layout:t,width:r,height:n,margin:a}=e,s=fs(),i=tc();return T.useEffect(()=>{i||(s(tJe(t)),s(rJe({width:r,height:n})),s(eJe(a)))},[s,i,t,r,n,a]),null}function $ue(e){var t=fs();return T.useEffect(()=>{t(Vct(e))},[t,e]),null}var Xct=["children"];function Yct(e,t){if(e==null)return{};var r,n,a=Jct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Z5(){return Z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z5.apply(null,arguments)}var Zct={width:"100%",height:"100%"},eut=T.forwardRef((e,t)=>{var r=tle(),n=rle(),a=ile();if(!zx(r)||!zx(n))return null;var{children:s,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,T.createElement(coe,Z5({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:Zct,ref:t}),s)}),tut=e=>{var{children:t}=e,r=ir(nk);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return T.createElement(coe,{width:n,height:a,x:i,y:s},t)},zW=T.forwardRef((e,t)=>{var{children:r}=e,n=Yct(e,Xct),a=tc();return a?T.createElement(tut,null,r):T.createElement(eut,Z5({ref:t},n),r)});function rut(){var e=fs(),[t,r]=T.useState(null),n=ir(FJe);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Uc(s)&&s!==n&&e(nJe(s))}},[t,e,n]),r}function $W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$W(Object(r),!0).forEach(function(n){aut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$W(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aut(e,t,r){return(t=sut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sut(e){var t=iut(e,"string");return typeof t=="symbol"?t:t+""}function iut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var out=T.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:v,style:b,width:y}=e,C=fs(),[S,I]=T.useState(null),[N,B]=T.useState(null);Hrt();var w=rut(),_=T.useCallback(P=>{w(P),typeof t=="function"&&t(P),I(P),B(P)},[w,t,I,B]),F=T.useCallback(P=>{C(Fue(P)),C(vu({handler:s,reactEvent:P}))},[C,s]),U=T.useCallback(P=>{C(xO(P)),C(vu({handler:u,reactEvent:P}))},[C,u]),D=T.useCallback(P=>{C(bce()),C(vu({handler:d,reactEvent:P}))},[C,d]),k=T.useCallback(P=>{C(xO(P)),C(vu({handler:f,reactEvent:P}))},[C,f]),L=T.useCallback(()=>{C(Mue())},[C]),R=T.useCallback(P=>{C(Lue(P.key))},[C]),X=T.useCallback(P=>{C(vu({handler:i,reactEvent:P}))},[C,i]),V=T.useCallback(P=>{C(vu({handler:o,reactEvent:P}))},[C,o]),Z=T.useCallback(P=>{C(vu({handler:l,reactEvent:P}))},[C,l]),H=T.useCallback(P=>{C(vu({handler:h,reactEvent:P}))},[C,h]),z=T.useCallback(P=>{C(vu({handler:v,reactEvent:P}))},[C,v]),q=T.useCallback(P=>{C(Que(P)),C(vu({handler:g,reactEvent:P}))},[C,g]),re=T.useCallback(P=>{C(vu({handler:p,reactEvent:P}))},[C,p]);return T.createElement(Lce.Provider,{value:S},T.createElement(uXe.Provider,{value:N},T.createElement("div",{className:Cn("recharts-wrapper",n),style:nut({position:"relative",cursor:"default",width:y,height:a},b),onClick:F,onContextMenu:X,onDoubleClick:V,onFocus:L,onKeyDown:R,onMouseDown:Z,onMouseEnter:U,onMouseLeave:D,onMouseMove:k,onMouseUp:H,onTouchEnd:re,onTouchMove:q,onTouchStart:z,ref:_},r)))}),lut=["children","className","width","height","style","compact","title","desc"];function cut(e,t){if(e==null)return{};var r,n,a=uut(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uut(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gue=T.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:l,desc:u}=e,d=cut(e,lut),f=nl(d);return o?T.createElement(zW,{otherAttributes:f,title:l,desc:u},r):T.createElement(out,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(zW,{otherAttributes:f,title:l,desc:u,ref:t},T.createElement(blt,null,r)))}),dut=["width","height"];function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(null,arguments)}function Aut(e,t){if(e==null)return{};var r,n,a=fut(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fut(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hut={top:5,right:5,bottom:5,left:5},mut={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:hut,reverseStackOrder:!1,syncMethod:"index"},put=T.forwardRef(function(t,r){var n,a=Lu(t.categoricalChartProps,mut),{width:s,height:i}=a,o=Aut(a,dut);if(!zx(s)||!zx(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(Vue,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},T.createElement(Cue,{chartData:h.data}),T.createElement(zue,{width:s,height:i,layout:a.layout,margin:a.margin}),T.createElement($ue,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(Gue,bO({},o,{width:s,height:i,ref:r})))}),gut=["axis","item"],GW=T.forwardRef((e,t)=>T.createElement(put,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gut,tooltipPayloadSearcher:YL,categoricalChartProps:e,ref:t}));function vut(e){var t=fs();return T.useEffect(()=>{t(zct(e))},[t,e]),null}var xut=["width","height","layout"];function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yO.apply(null,arguments)}function but(e,t){if(e==null)return{};var r,n,a=yut(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yut(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wut={top:5,right:5,bottom:5,left:5},Eut={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wut,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Kue=T.forwardRef(function(t,r){var n,a=Lu(t.categoricalChartProps,Eut),{width:s,height:i,layout:o}=a,l=but(a,xut);if(!zx(s)||!zx(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return T.createElement(Vue,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},T.createElement(Cue,{chartData:a.data}),T.createElement(zue,{width:s,height:i,layout:o,margin:a.margin}),T.createElement($ue,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(vut,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),T.createElement(Gue,yO({width:s,height:i},l,{ref:r})))}),Cut=["item"],_ut={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Sut=T.forwardRef((e,t)=>{var r=Lu(e,_ut);return T.createElement(Kue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Cut,tooltipPayloadSearcher:YL,categoricalChartProps:r,ref:t})}),Nut=["axis"],kut={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},But=T.forwardRef((e,t)=>{var r=Lu(e,kut);return T.createElement(Kue,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Nut,tooltipPayloadSearcher:YL,categoricalChartProps:r,ref:t})});const Tut=e=>{const[t,r]=T.useState(!1),[n,a]=T.useState(null);return T.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},que=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],jut=["Mecnica Industrial","Mecnica Automotriz"],Iut=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:que.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),KW=({empresas:e,isLoaded:t,route:r})=>{const n=T.useRef(null),a=T.useRef(null),s=T.useRef([]),i=T.useRef(null),o=e.filter(l=>{var u,d;return((u=l.coordenadas)==null?void 0:u.lat)&&((d=l.coordenadas)==null?void 0:d.lng)});return T.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(l=>l.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(l=>{const u=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:a.current,title:l.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${l.nombre}</div><div>${l.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),c.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[c.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:c.jsx("div",{className:"text-center p-6",children:c.jsx("p",{className:"text-gray-600 text-lg",children:" No hay empresas geo-localizadas"})})})]})},Fut=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,l=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return c.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[c.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),c.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,v;return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0],"  ",f.end_address.split(",")[0]]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text,"  ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&c.jsx("div",{className:"space-y-3",children:(v=f.steps)==null?void 0:v.map((b,y)=>b.transit&&c.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[c.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),c.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),c.jsxs("p",{className:"text-lg",children:["Duracin Total Estimada: ",Math.round(l/60)," min"]}),c.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&c.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},qW=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Out=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),c.jsx(s_,{width:"100%",height:300,children:c.jsxs(Sut,{children:[c.jsx(Aue,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>c.jsx(I2,{fill:t[n%t.length]},`cell-${n}`))}),c.jsx(a_,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),c.jsx(s_,{width:"100%",height:300,children:c.jsxs(GW,{data:e.porSupervisor,layout:"vertical",children:[c.jsx(pO,{strokeDasharray:"3 3"}),c.jsx(Y5,{type:"number"}),c.jsx(J5,{type:"category",dataKey:"name",width:150}),c.jsx(a_,{}),c.jsx(mO,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),c.jsx(s_,{width:"100%",height:300,children:c.jsxs(GW,{data:e.porComuna,children:[c.jsx(pO,{strokeDasharray:"3 3"}),c.jsx(Y5,{dataKey:"name"}),c.jsx(J5,{}),c.jsx(a_,{}),c.jsx(mO,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),c.jsx(s_,{width:"100%",height:300,children:c.jsxs(But,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[c.jsx(eue,{}),c.jsx(vk,{dataKey:"subject"}),c.jsx(pk,{angle:30,domain:[0,5]}),c.jsx(g8,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),c.jsx(a_,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),c.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:c.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>c.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[c.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),c.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," "]})]},r.id))})})]})]})},Dut=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState("list"),[i,o]=T.useState(null),[l,u]=T.useState(!0),[d,f]=T.useState(null),[h,p]=T.useState(null),[g,v]=T.useState(null),[b,y]=T.useState([]),[C,S]=T.useState(null),[I,N]=T.useState(!1),[B,w]=T.useState("DRIVING"),[_,F]=T.useState(""),[U,D]=T.useState([]),k="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:L}=Tut(k);T.useEffect(()=>{u(!0);const oe=QKe(t),ce=zKe(n),pe=GKe(D);return u(!1),()=>{oe(),ce(),pe()}},[]);const R=T.useMemo(()=>{const oe=e.reduce((Se,De)=>{const _e=De.area||"Sin especificar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ce=e.reduce((Se,De)=>{var he;const _e=((he=De.docenteSupervisor)==null?void 0:he.nombreCompleto)||"Sin asignar";return Se[_e]=(Se[_e]||0)+1,Se},{}),pe=e.reduce((Se,De)=>{const _e=De.direccion.split(",").map(je=>je.trim()),he=_e.length>1?_e[1]:"Desconocida";return Se[he]=(Se[he]||0)+1,Se},{}),Ie=que.map(Se=>{const De=e.flatMap(he=>{var je;return(je=he.calificaciones.find(He=>He.elemento===Se.elemento))==null?void 0:je.score}).filter(he=>he!=null),_e=De.length>0?De.reduce((he,je)=>he+je,0)/De.length:0;return{subject:Se.elemento.split(" ")[0],A:_e,fullMark:5}}),ne=e.map(Se=>{const De=Se.calificaciones.map(he=>he.score).filter(he=>he!=null),_e=De.length>0?De.reduce((he,je)=>he+je,0)/De.length:0;return{...Se,promedio:_e}}).filter(Se=>Se.promedio>0).sort((Se,De)=>De.promedio-Se.promedio);return{porEspecialidad:Object.entries(oe).map(([Se,De])=>({name:Se,value:De})),porSupervisor:Object.entries(ce).map(([Se,De])=>({name:Se,value:De})),porComuna:Object.entries(pe).map(([Se,De])=>({name:Se,value:De})),calificacionPorAmbito:Ie,ranking:ne}},[e]),X=async()=>{if(i)try{await HKe(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async oe=>{window.confirm("Est seguro de eliminar esta empresa?")&&await VKe(oe)},Z=(oe,ce)=>{o(pe=>pe?{...pe,[oe]:ce}:null)},H=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&L){const pe=await qW(oe.value.place_id);Z("direccion",oe.label||""),Z("coordenadas",pe)}else Z("direccion",(oe==null?void 0:oe.label)||"")},z=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},q=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&L){const pe=await qW(oe.value.place_id);v(pe)}},re=oe=>{y(ce=>ce.some(pe=>pe.id===oe.id)?ce.filter(pe=>pe.id!==oe.id):[...ce,oe])},P=()=>{if(!g||b.length===0||!L)return;N(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[B]},(pe,Ie)=>{N(!1),Ie===window.google.maps.DirectionsStatus.OK&&pe?S(pe):alert("No se pudo calcular la ruta: "+Ie)})},K=()=>{S(null),p(null),v(null),y([]),F("")},Y=async()=>{if(!_||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:_,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:B};try{await $Ke(oe),alert("Ruta guardada con xito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const pe=new gr("p","mm","a4"),Ie=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisin: ${_||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Se=(await YS(oe,{useCORS:!0})).toDataURL("image/png");pe.addImage(Se,"PNG",10,30,Ie-20,100);const _e=(await YS(ce)).toDataURL("image/png"),he=pe.getImageProperties(_e),je=he.height*(Ie-20)/he.width;pe.addImage(_e,"PNG",10,135,Ie-20,je),pe.save(`ruta-${_||"supervision"}.pdf`)},ie=oe=>{p({label:oe.startPoint.label,value:null}),v(oe.startPoint.coords),y(oe.empresas),w(oe.travelMode),F(oe.nombre),s("route")},Ae=async oe=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await KKe(oe),alert("Ruta eliminada."))};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),c.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&c.jsx("button",{onClick:()=>{s("list"),f(null),o(null),K()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),a==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[c.jsx(Abe,{size:18})," Dashboard"]}),c.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),c.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),c.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:()=>{o(Iut()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&c.jsx(Out,{data:R}),a==="saved-routes"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),c.jsx("div",{className:"space-y-3",children:U.length===0?c.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):U.map(oe=>c.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ie(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),c.jsx("button",{onClick:()=>Ae(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),c.jsx("input",{type:"text",value:_,onChange:oe=>F(oe.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),c.jsx(_G,{apiKey:k,selectProps:{value:h,onChange:q,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),c.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>w("DRIVING"),className:`w-full py-2 rounded-md transition ${B==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),c.jsx("button",{onClick:()=>w("TRANSIT"),className:`w-full py-2 rounded-md transition ${B==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),c.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>re(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:P,disabled:!g||b.length===0||I,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:I?"Calculando...":"Visualizar Ruta"}),c.jsx("button",{onClick:Y,disabled:!_||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),c.jsx("button",{onClick:te,disabled:!C,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),c.jsx("button",{onClick:K,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),c.jsx("div",{children:c.jsx(KW,{empresas:b,isLoaded:L,route:C})})]}),C&&c.jsx(Fut,{route:C,travelMode:B})]}),a==="map"&&c.jsx(KW,{empresas:e,isLoaded:L}),a==="list"&&c.jsx("div",{className:"space-y-3",children:e.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>z(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),c.jsx("button",{onClick:()=>V(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(U1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.nombre,onChange:oe=>Z("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(lbe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.rut,onChange:oe=>Z("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(JI,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),c.jsx("div",{className:"w-full pl-10",children:c.jsx(_G,{apiKey:k,selectProps:{value:d,onChange:H,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(eF,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.contacto,onChange:oe=>Z("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(mbe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"email",value:i.email||"",onChange:oe=>Z("email",oe.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(LA,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"number",value:i.cupos,onChange:oe=>Z("cupos",parseInt(oe.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(P1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.area||"",onChange:oe=>Z("area",oe.target.value),className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),jut.map(oe=>c.jsx("option",{value:oe,children:oe},oe))]})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(eF,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;Z("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>c.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),i.calificaciones.map((oe,ce)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[c.jsx(Rbe,{className:"w-5 h-5 text-slate-400"}),c.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),c.jsxs("select",{value:oe.score||"",onChange:pe=>{const Ie=[...i.calificaciones];Ie[ce].score=pe.target.value?parseInt(pe.target.value):null,Z("calificaciones",Ie)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[c.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(pe=>c.jsx("option",{value:pe,children:pe},pe))]})]},ce))]}),c.jsx("div",{className:"pt-6",children:c.jsx("button",{onClick:X,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})};var O2=e=>e.type==="checkbox",bp=e=>e instanceof Date,fl=e=>e==null;const Wue=e=>typeof e=="object";var Xs=e=>!fl(e)&&!Array.isArray(e)&&Wue(e)&&!bp(e),Rut=e=>Xs(e)&&e.target?O2(e.target)?e.target.checked:e.target.value:e,Put=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Lut=(e,t)=>e.has(Put(t)),Mut=e=>{const t=e.constructor&&e.constructor.prototype;return Xs(t)&&t.hasOwnProperty("isPrototypeOf")},C8=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xa(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(C8&&(e instanceof Blob||n))&&(r||Xs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Mut(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Xa(e[a]));else return e;return t}var xk=e=>/^\w*$/.test(e),Ya=e=>e===void 0,bk=e=>Array.isArray(e)?e.filter(Boolean):[],_8=e=>bk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,r)=>{if(!t||!Xs(e))return r;const n=(xk(t)?[t]:_8(t)).reduce((a,s)=>fl(a)?a:a[s],e);return Ya(n)||n===e?Ya(e[t])?r:e[t]:n},yA=e=>typeof e=="boolean",Ia=(e,t,r)=>{let n=-1;const a=xk(t)?[t]:_8(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let l=r;if(n!==i){const u=e[o];l=Xs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=l,e=e[o]}};const WW={BLUR:"blur",FOCUS_OUT:"focusout"},_u={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},If={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xue=lt.createContext(null);Xue.displayName="HookFormContext";const Uut=()=>lt.useContext(Xue);var Qut=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==_u.all&&(t._proxyFormState[i]=!n||_u.all),e[i]}});return a};const Yue=typeof window<"u"?lt.useLayoutEffect:lt.useEffect;var IA=e=>typeof e=="string",Hut=(e,t,r,n,a)=>IA(e)?(n&&t.watch.add(e),or(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),or(r,s))):(n&&(t.watchAll=!0),r),wO=e=>fl(e)||!Wue(e);function k0(e,t,r=new WeakSet){if(wO(e)||wO(t))return e===t;if(bp(e)&&bp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(bp(i)&&bp(o)||Xs(i)&&Xs(o)||Array.isArray(i)&&Array.isArray(o)?!k0(i,o,r):i!==o)return!1}}return!0}var Vut=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Wl=e=>Array.isArray(e)?e:[e],XW=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},ul=e=>Xs(e)&&!Object.keys(e).length,S8=e=>e.type==="file",pd=e=>typeof e=="function",eN=e=>{if(!C8)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Jue=e=>e.type==="select-multiple",N8=e=>e.type==="radio",zut=e=>N8(e)||O2(e),AI=e=>eN(e)&&e.isConnected;function $ut(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ya(e)?n++:e[t[n++]];return e}function Gut(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ya(e[t]))return!1;return!0}function Hs(e,t){const r=Array.isArray(t)?t:xk(t)?[t]:_8(t),n=r.length===1?e:$ut(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Xs(n)&&ul(n)||Array.isArray(n)&&Gut(n))&&Hs(e,r.slice(0,-1)),e}var Zue=e=>{for(const t in e)if(pd(e[t]))return!0;return!1};function tN(e,t={}){const r=Array.isArray(e);if(Xs(e)||r)for(const n in e)Array.isArray(e[n])||Xs(e[n])&&!Zue(e[n])?(t[n]=Array.isArray(e[n])?[]:{},tN(e[n],t[n])):fl(e[n])||(t[n]=!0);return t}function ede(e,t,r){const n=Array.isArray(e);if(Xs(e)||n)for(const a in e)Array.isArray(e[a])||Xs(e[a])&&!Zue(e[a])?Ya(t)||wO(r[a])?r[a]=Array.isArray(e[a])?tN(e[a],[]):{...tN(e[a])}:ede(e[a],fl(t)?{}:t[a],r[a]):r[a]=!k0(e[a],t[a]);return r}var Hb=(e,t)=>ede(e,t,tN(t));const YW={value:!1,isValid:!1},JW={value:!0,isValid:!0};var tde=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ya(e[0].attributes.value)?Ya(e[0].value)||e[0].value===""?JW:{value:e[0].value,isValid:!0}:JW:YW}return YW},rde=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ya(e)?e:t?e===""?NaN:e&&+e:r&&IA(e)?new Date(e):n?n(e):e;const ZW={isValid:!1,value:null};var nde=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ZW):ZW;function eX(e){const t=e.ref;return S8(t)?t.files:N8(t)?nde(e.refs).value:Jue(t)?[...t.selectedOptions].map(({value:r})=>r):O2(t)?tde(e.refs).value:rde(Ya(t.value)?e.ref.value:t.value,e)}var Kut=(e,t,r,n)=>{const a={};for(const s of e){const i=or(t,s);i&&Ia(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},rN=e=>e instanceof RegExp,Vb=e=>Ya(e)?e:rN(e)?e.source:Xs(e)?rN(e.value)?e.value.source:e.value:e,Kv=e=>({isOnSubmit:!e||e===_u.onSubmit,isOnBlur:e===_u.onBlur,isOnChange:e===_u.onChange,isOnAll:e===_u.all,isOnTouch:e===_u.onTouched});const tX="AsyncFunction";var qut=e=>!!e&&!!e.validate&&!!(pd(e.validate)&&e.validate.constructor.name===tX||Xs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===tX)),Wut=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),EO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const px=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=or(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(px(o,t))break}else if(Xs(o)&&px(o,t))break}}};function rX(e,t,r){const n=or(e,r);if(n||xk(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=or(t,s),o=or(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var Xut=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return ul(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||_u.all))},Yut=(e,t,r)=>!e||!t||e===t||Wl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Jut=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,Zut=(e,t)=>!bk(or(e,t)).length&&Hs(e,t),ade=(e,t,r)=>{const n=Wl(or(e,r));return Ia(n,"root",t[r]),Ia(e,r,n),e},Y_=e=>IA(e);function nX(e,t,r="validate"){if(Y_(e)||Array.isArray(e)&&e.every(Y_)||yA(e)&&!e)return{type:r,message:Y_(e)?e:"",ref:t}}var Ev=e=>Xs(e)&&!rN(e)?e:{value:e,message:""},CO=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:l,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:v,valueAsNumber:b,mount:y}=e._f,C=or(r,v);if(!y||t.has(v))return{};const S=o?o[0]:i,I=k=>{a&&S.reportValidity&&(S.setCustomValidity(yA(k)?"":k||""),S.reportValidity())},N={},B=N8(i),w=O2(i),_=B||w,F=(b||S8(i))&&Ya(i.value)&&Ya(C)||eN(i)&&i.value===""||C===""||Array.isArray(C)&&!C.length,U=Vut.bind(null,v,n,N),D=(k,L,R,X=If.maxLength,V=If.minLength)=>{const Z=k?L:R;N[v]={type:k?X:V,message:Z,ref:i,...U(k?X:V,Z)}};if(s?!Array.isArray(C)||!C.length:l&&(!_&&(F||fl(C))||yA(C)&&!C||w&&!tde(o).isValid||B&&!nde(o).isValid)){const{value:k,message:L}=Y_(l)?{value:!!l,message:l}:Ev(l);if(k&&(N[v]={type:If.required,message:L,ref:S,...U(If.required,L)},!n))return I(L),N}if(!F&&(!fl(f)||!fl(h))){let k,L;const R=Ev(h),X=Ev(f);if(!fl(C)&&!isNaN(C)){const V=i.valueAsNumber||C&&+C;fl(R.value)||(k=V>R.value),fl(X.value)||(L=V<X.value)}else{const V=i.valueAsDate||new Date(C),Z=q=>new Date(new Date().toDateString()+" "+q),H=i.type=="time",z=i.type=="week";IA(R.value)&&C&&(k=H?Z(C)>Z(R.value):z?C>R.value:V>new Date(R.value)),IA(X.value)&&C&&(L=H?Z(C)<Z(X.value):z?C<X.value:V<new Date(X.value))}if((k||L)&&(D(!!k,R.message,X.message,If.max,If.min),!n))return I(N[v].message),N}if((u||d)&&!F&&(IA(C)||s&&Array.isArray(C))){const k=Ev(u),L=Ev(d),R=!fl(k.value)&&C.length>+k.value,X=!fl(L.value)&&C.length<+L.value;if((R||X)&&(D(R,k.message,L.message),!n))return I(N[v].message),N}if(p&&!F&&IA(C)){const{value:k,message:L}=Ev(p);if(rN(k)&&!C.match(k)&&(N[v]={type:If.pattern,message:L,ref:i,...U(If.pattern,L)},!n))return I(L),N}if(g){if(pd(g)){const k=await g(C,r),L=nX(k,S);if(L&&(N[v]={...L,...U(If.validate,L.message)},!n))return I(L.message),N}else if(Xs(g)){let k={};for(const L in g){if(!ul(k)&&!n)break;const R=nX(await g[L](C,r),S,L);R&&(k={...R,...U(L,R.message)},I(R.message),n&&(N[v]=k))}if(!ul(k)&&(N[v]={ref:S,...k},!n))return N}}return I(!0),N};const edt={mode:_u.onSubmit,reValidateMode:_u.onChange,shouldFocusError:!0};function tdt(e={}){let t={...edt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:pd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Xs(t.defaultValues)||Xs(t.values)?Xa(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Xa(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:XW(),state:XW()},p=t.criteriaMode===_u.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},v=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?ul((await w()).errors):await F(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Pe=>{Pe&&(Oe?Ia(r.validatingFields,Pe,Oe):Hs(r.validatingFields,Pe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ul(r.validatingFields)}))},y=(ye,Oe=[],Pe,qe,Ze=!0,ot=!0)=>{if(qe&&Pe&&!t.disabled){if(i.action=!0,ot&&Array.isArray(or(n,ye))){const mt=Pe(or(n,ye),qe.argA,qe.argB);Ze&&Ia(n,ye,mt)}if(ot&&Array.isArray(or(r.errors,ye))){const mt=Pe(or(r.errors,ye),qe.argA,qe.argB);Ze&&Ia(r.errors,ye,mt),Zut(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&ot&&Array.isArray(or(r.touchedFields,ye))){const mt=Pe(or(r.touchedFields,ye),qe.argA,qe.argB);Ze&&Ia(r.touchedFields,ye,mt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Hb(a,s)),h.state.next({name:ye,isDirty:D(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ia(s,ye,Oe)},C=(ye,Oe)=>{Ia(r.errors,ye,Oe),h.state.next({errors:r.errors})},S=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},I=(ye,Oe,Pe,qe)=>{const Ze=or(n,ye);if(Ze){const ot=or(s,ye,Ya(Pe)?or(a,ye):Pe);Ya(ot)||qe&&qe.defaultChecked||Oe?Ia(s,ye,Oe?ot:eX(Ze._f)):R(ye,ot),i.mount&&v()}},N=(ye,Oe,Pe,qe,Ze)=>{let ot=!1,mt=!1;const Tt={name:ye};if(!t.disabled){if(!Pe||qe){(d.isDirty||f.isDirty)&&(mt=r.isDirty,r.isDirty=Tt.isDirty=D(),ot=mt!==Tt.isDirty);const Mt=k0(or(a,ye),Oe);mt=!!or(r.dirtyFields,ye),Mt?Hs(r.dirtyFields,ye):Ia(r.dirtyFields,ye,!0),Tt.dirtyFields=r.dirtyFields,ot=ot||(d.dirtyFields||f.dirtyFields)&&mt!==!Mt}if(Pe){const Mt=or(r.touchedFields,ye);Mt||(Ia(r.touchedFields,ye,Pe),Tt.touchedFields=r.touchedFields,ot=ot||(d.touchedFields||f.touchedFields)&&Mt!==Pe)}ot&&Ze&&h.state.next(Tt)}return ot?Tt:{}},B=(ye,Oe,Pe,qe)=>{const Ze=or(r.errors,ye),ot=(d.isValid||f.isValid)&&yA(Oe)&&r.isValid!==Oe;if(t.delayError&&Pe?(l=g(()=>C(ye,Pe)),l(t.delayError)):(clearTimeout(u),l=null,Pe?Ia(r.errors,ye,Pe):Hs(r.errors,ye)),(Pe?!k0(Ze,Pe):Ze)||!ul(qe)||ot){const mt={...qe,...ot&&yA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...mt},h.state.next(mt)}},w=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,Kut(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},_=async ye=>{const{errors:Oe}=await w(ye);if(ye)for(const Pe of ye){const qe=or(Oe,Pe);qe?Ia(r.errors,Pe,qe):Hs(r.errors,Pe)}else r.errors=Oe;return Oe},F=async(ye,Oe,Pe={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:ot,...mt}=Ze;if(ot){const Tt=o.array.has(ot.name),Mt=Ze._f&&qut(Ze._f);Mt&&d.validatingFields&&b([qe],!0);const Ot=await CO(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,Tt);if(Mt&&d.validatingFields&&b([qe]),Ot[ot.name]&&(Pe.valid=!1,Oe))break;!Oe&&(or(Ot,ot.name)?Tt?ade(r.errors,Ot,ot.name):Ia(r.errors,ot.name,Ot[ot.name]):Hs(r.errors,ot.name))}!ul(mt)&&await F(mt,Oe,Pe)}}return Pe.valid},U=()=>{for(const ye of o.unMount){const Oe=or(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Pe=>!AI(Pe)):!AI(Oe._f.ref))&&Ae(ye)}o.unMount=new Set},D=(ye,Oe)=>!t.disabled&&(ye&&Oe&&Ia(s,ye,Oe),!k0(q(),a)),k=(ye,Oe,Pe)=>Hut(ye,o,{...i.mount?s:Ya(Oe)?a:IA(ye)?{[ye]:Oe}:Oe},Pe,Oe),L=ye=>bk(or(i.mount?s:a,ye,t.shouldUnregister?or(a,ye,[]):[])),R=(ye,Oe,Pe={})=>{const qe=or(n,ye);let Ze=Oe;if(qe){const ot=qe._f;ot&&(!ot.disabled&&Ia(s,ye,rde(Oe,ot)),Ze=eN(ot.ref)&&fl(Oe)?"":Oe,Jue(ot.ref)?[...ot.ref.options].forEach(mt=>mt.selected=Ze.includes(mt.value)):ot.refs?O2(ot.ref)?ot.refs.forEach(mt=>{(!mt.defaultChecked||!mt.disabled)&&(Array.isArray(Ze)?mt.checked=!!Ze.find(Tt=>Tt===mt.value):mt.checked=Ze===mt.value||!!Ze)}):ot.refs.forEach(mt=>mt.checked=mt.value===Ze):S8(ot.ref)?ot.ref.value="":(ot.ref.value=Ze,ot.ref.type||h.state.next({name:ye,values:Xa(s)})))}(Pe.shouldDirty||Pe.shouldTouch)&&N(ye,Ze,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&z(ye)},X=(ye,Oe,Pe)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],ot=ye+"."+qe,mt=or(n,ot);(o.array.has(ye)||Xs(Ze)||mt&&!mt._f)&&!bp(Ze)?X(ot,Ze,Pe):R(ot,Ze,Pe)}},V=(ye,Oe,Pe={})=>{const qe=or(n,ye),Ze=o.array.has(ye),ot=Xa(Oe);Ia(s,ye,ot),Ze?(h.array.next({name:ye,values:Xa(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Pe.shouldDirty&&h.state.next({name:ye,dirtyFields:Hb(a,s),isDirty:D(ye,ot)})):qe&&!qe._f&&!fl(ot)?X(ye,ot,Pe):R(ye,ot,Pe),EO(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Xa(s)})},Z=async ye=>{i.mount=!0;const Oe=ye.target;let Pe=Oe.name,qe=!0;const Ze=or(n,Pe),ot=Mt=>{qe=Number.isNaN(Mt)||bp(Mt)&&isNaN(Mt.getTime())||k0(Mt,or(s,Pe,Mt))},mt=Kv(t.mode),Tt=Kv(t.reValidateMode);if(Ze){let Mt,Ot;const Qt=Oe.type?eX(Ze._f):Rut(ye),bt=ye.type===WW.BLUR||ye.type===WW.FOCUS_OUT,Nr=!Wut(Ze._f)&&!t.resolver&&!or(r.errors,Pe)&&!Ze._f.deps||Jut(bt,or(r.touchedFields,Pe),r.isSubmitted,Tt,mt),rr=EO(Pe,o,bt);Ia(s,Pe,Qt),bt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),l&&l(0)):Ze._f.onChange&&Ze._f.onChange(ye);const an=N(Pe,Qt,bt),Cr=!ul(an)||rr;if(!bt&&h.state.next({name:Pe,type:ye.type,values:Xa(s)}),Nr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?bt&&v():bt||v()),Cr&&h.state.next({name:Pe,...rr?{}:an});if(!bt&&rr&&h.state.next({...r}),t.resolver){const{errors:Vr}=await w([Pe]);if(ot(Qt),qe){const Fn=rX(r.errors,n,Pe),Ir=rX(Vr,n,Fn.name||Pe);Mt=Ir.error,Pe=Ir.name,Ot=ul(Vr)}}else b([Pe],!0),Mt=(await CO(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Pe],b([Pe]),ot(Qt),qe&&(Mt?Ot=!1:(d.isValid||f.isValid)&&(Ot=await F(n,!0)));qe&&(Ze._f.deps&&z(Ze._f.deps),B(Pe,Ot,Mt,an))}},H=(ye,Oe)=>{if(or(r.errors,Oe)&&ye.focus)return ye.focus(),1},z=async(ye,Oe={})=>{let Pe,qe;const Ze=Wl(ye);if(t.resolver){const ot=await _(Ya(ye)?ye:Ze);Pe=ul(ot),qe=ye?!Ze.some(mt=>or(ot,mt)):Pe}else ye?(qe=(await Promise.all(Ze.map(async ot=>{const mt=or(n,ot);return await F(mt&&mt._f?{[ot]:mt}:mt)}))).every(Boolean),!(!qe&&!r.isValid)&&v()):qe=Pe=await F(n);return h.state.next({...!IA(ye)||(d.isValid||f.isValid)&&Pe!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Pe}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&px(n,H,ye?Ze:o.mount),qe},q=ye=>{const Oe={...i.mount?s:a};return Ya(ye)?Oe:IA(ye)?or(Oe,ye):ye.map(Pe=>or(Oe,Pe))},re=(ye,Oe)=>({invalid:!!or((Oe||r).errors,ye),isDirty:!!or((Oe||r).dirtyFields,ye),error:or((Oe||r).errors,ye),isValidating:!!or(r.validatingFields,ye),isTouched:!!or((Oe||r).touchedFields,ye)}),P=ye=>{ye&&Wl(ye).forEach(Oe=>Hs(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},K=(ye,Oe,Pe)=>{const qe=(or(n,ye,{_f:{}})._f||{}).ref,Ze=or(r.errors,ye)||{},{ref:ot,message:mt,type:Tt,...Mt}=Ze;Ia(r.errors,ye,{...Mt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Pe&&Pe.shouldFocus&&qe&&qe.focus&&qe.focus()},Y=(ye,Oe)=>pd(ye)?h.state.subscribe({next:Pe=>"values"in Pe&&ye(k(void 0,Oe),Pe)}):k(ye,Oe,!0),te=ye=>h.state.subscribe({next:Oe=>{Yut(ye.name,Oe.name,ye.exact)&&Xut(Oe,ye.formState||d,je,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ie=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),Ae=(ye,Oe={})=>{for(const Pe of ye?Wl(ye):o.mount)o.mount.delete(Pe),o.array.delete(Pe),Oe.keepValue||(Hs(n,Pe),Hs(s,Pe)),!Oe.keepError&&Hs(r.errors,Pe),!Oe.keepDirty&&Hs(r.dirtyFields,Pe),!Oe.keepTouched&&Hs(r.touchedFields,Pe),!Oe.keepIsValidating&&Hs(r.validatingFields,Pe),!t.shouldUnregister&&!Oe.keepDefaultValue&&Hs(a,Pe);h.state.next({values:Xa(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:D()}:{}}),!Oe.keepIsValid&&v()},oe=({disabled:ye,name:Oe})=>{(yA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(ye,Oe={})=>{let Pe=or(n,ye);const qe=yA(Oe.disabled)||yA(t.disabled);return Ia(n,ye,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Pe?oe({disabled:yA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):I(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:Vb(Oe.min),max:Vb(Oe.max),minLength:Vb(Oe.minLength),maxLength:Vb(Oe.maxLength),pattern:Vb(Oe.pattern)}:{},name:ye,onChange:Z,onBlur:Z,ref:Ze=>{if(Ze){ce(ye,Oe),Pe=or(n,ye);const ot=Ya(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,mt=zut(ot),Tt=Pe._f.refs||[];if(mt?Tt.find(Mt=>Mt===ot):ot===Pe._f.ref)return;Ia(n,ye,{_f:{...Pe._f,...mt?{refs:[...Tt.filter(AI),ot,...Array.isArray(or(a,ye))?[{}]:[]],ref:{type:ot.type,name:ye}}:{ref:ot}}}),I(ye,!1,void 0,ot)}else Pe=or(n,ye,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(Lut(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},pe=()=>t.shouldFocusError&&px(n,H,o.mount),Ie=ye=>{yA(ye)&&(h.state.next({disabled:ye}),px(n,(Oe,Pe)=>{const qe=or(n,Pe);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},ne=(ye,Oe)=>async Pe=>{let qe;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let Ze=Xa(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ot,values:mt}=await w();r.errors=ot,Ze=Xa(mt)}else await F(n);if(o.disabled.size)for(const ot of o.disabled)Hs(Ze,ot);if(Hs(r.errors,"root"),ul(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Pe)}catch(ot){qe=ot}}else Oe&&await Oe({...r.errors},Pe),pe(),setTimeout(pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ul(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},Se=(ye,Oe={})=>{or(n,ye)&&(Ya(Oe.defaultValue)?V(ye,Xa(or(a,ye))):(V(ye,Oe.defaultValue),Ia(a,ye,Xa(Oe.defaultValue))),Oe.keepTouched||Hs(r.touchedFields,ye),Oe.keepDirty||(Hs(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?D(ye,Xa(or(a,ye))):D()),Oe.keepError||(Hs(r.errors,ye),d.isValid&&v()),h.state.next({...r}))},De=(ye,Oe={})=>{const Pe=ye?Xa(ye):a,qe=Xa(Pe),Ze=ul(ye),ot=Ze?a:qe;if(Oe.keepDefaultValues||(a=Pe),!Oe.keepValues){if(Oe.keepDirtyValues){const mt=new Set([...o.mount,...Object.keys(Hb(a,s))]);for(const Tt of Array.from(mt))or(r.dirtyFields,Tt)?Ia(ot,Tt,or(s,Tt)):V(Tt,or(ot,Tt))}else{if(C8&&Ya(ye))for(const mt of o.mount){const Tt=or(n,mt);if(Tt&&Tt._f){const Mt=Array.isArray(Tt._f.refs)?Tt._f.refs[0]:Tt._f.ref;if(eN(Mt)){const Ot=Mt.closest("form");if(Ot){Ot.reset();break}}}}if(Oe.keepFieldsRef)for(const mt of o.mount)V(mt,or(ot,mt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Xa(a):{}:Xa(ot),h.array.next({values:{...ot}}),h.state.next({values:{...ot}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!k0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?Hb(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?Hb(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(ye,Oe)=>De(pd(ye)?ye(s):ye,Oe),he=(ye,Oe={})=>{const Pe=or(n,ye),qe=Pe&&Pe._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&pd(Ze.select)&&Ze.select())}},je=ye=>{r={...r,...ye}},Xe={control:{register:ce,unregister:Ae,getFieldState:re,handleSubmit:ne,setError:K,_subscribe:te,_runSchema:w,_focusError:pe,_getWatch:k,_getDirty:D,_setValid:v,_setFieldArray:y,_setDisabledField:oe,_setErrors:S,_getFieldArray:L,_reset:De,_resetDefaultValues:()=>pd(t.defaultValues)&&t.defaultValues().then(ye=>{_e(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:Ie,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ie,trigger:z,register:ce,handleSubmit:ne,watch:Y,setValue:V,getValues:q,reset:_e,resetField:Se,clearErrors:P,unregister:Ae,setError:K,setFocus:he,getFieldState:re};return{...Xe,formControl:Xe}}var m0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},fI=(e,t,r={})=>r.shouldFocus||Ya(r.shouldFocus)?r.focusName||`${e}.${Ya(r.focusIndex)?t:r.focusIndex}.`:"",hI=(e,t)=>[...e,...Wl(t)],mI=e=>Array.isArray(e)?e.map(()=>{}):void 0;function pI(e,t,r){return[...e.slice(0,t),...Wl(r),...e.slice(t)]}var gI=(e,t,r)=>Array.isArray(e)?(Ya(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],vI=(e,t)=>[...Wl(t),...Wl(e)];function rdt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return bk(n).length?n:[]}var xI=(e,t)=>Ya(t)?[]:rdt(e,Wl(t).sort((r,n)=>r-n)),bI=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},aX=(e,t,r)=>(e[t]=r,e);function ndt(e){const t=Uut(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,l]=lt.useState(r._getFieldArray(n)),u=lt.useRef(r._getFieldArray(n).map(m0)),d=lt.useRef(o),f=lt.useRef(!1);d.current=o,r._names.array.add(n),lt.useMemo(()=>i&&r.register(n,i),[r,i,n]),Yue(()=>r._subjects.array.subscribe({next:({values:N,name:B})=>{if(B===n||!B){const w=or(N,n);Array.isArray(w)&&(l(w),u.current=w.map(m0))}}}).unsubscribe,[r,n]);const h=lt.useCallback(N=>{f.current=!0,r._setFieldArray(n,N)},[r,n]),p=(N,B)=>{const w=Wl(Xa(N)),_=hI(r._getFieldArray(n),w);r._names.focus=fI(n,_.length-1,B),u.current=hI(u.current,w.map(m0)),h(_),l(_),r._setFieldArray(n,_,hI,{argA:mI(N)})},g=(N,B)=>{const w=Wl(Xa(N)),_=vI(r._getFieldArray(n),w);r._names.focus=fI(n,0,B),u.current=vI(u.current,w.map(m0)),h(_),l(_),r._setFieldArray(n,_,vI,{argA:mI(N)})},v=N=>{const B=xI(r._getFieldArray(n),N);u.current=xI(u.current,N),h(B),l(B),!Array.isArray(or(r._fields,n))&&Ia(r._fields,n,void 0),r._setFieldArray(n,B,xI,{argA:N})},b=(N,B,w)=>{const _=Wl(Xa(B)),F=pI(r._getFieldArray(n),N,_);r._names.focus=fI(n,N,w),u.current=pI(u.current,N,_.map(m0)),h(F),l(F),r._setFieldArray(n,F,pI,{argA:N,argB:mI(B)})},y=(N,B)=>{const w=r._getFieldArray(n);bI(w,N,B),bI(u.current,N,B),h(w),l(w),r._setFieldArray(n,w,bI,{argA:N,argB:B},!1)},C=(N,B)=>{const w=r._getFieldArray(n);gI(w,N,B),gI(u.current,N,B),h(w),l(w),r._setFieldArray(n,w,gI,{argA:N,argB:B},!1)},S=(N,B)=>{const w=Xa(B),_=aX(r._getFieldArray(n),N,w);u.current=[..._].map((F,U)=>!F||U===N?m0():u.current[U]),h(_),l([..._]),r._setFieldArray(n,_,aX,{argA:N,argB:w},!0,!1)},I=N=>{const B=Wl(Xa(N));u.current=B.map(m0),h([...B]),l([...B]),r._setFieldArray(n,[...B],w=>w,{},!0,!1)};return lt.useEffect(()=>{if(r._state.action=!1,EO(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Kv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Kv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(N=>{const B=or(N.errors,n),w=or(r._formState.errors,n);(w?!B&&w.type||B&&(w.type!==B.type||w.message!==B.message):B&&B.type)&&(B?Ia(r._formState.errors,n,B):Hs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const N=or(r._fields,n);N&&N._f&&!(Kv(r._options.reValidateMode).isOnSubmit&&Kv(r._options.mode).isOnSubmit)&&CO(N,r._names.disabled,r._formValues,r._options.criteriaMode===_u.all,r._options.shouldUseNativeValidation,!0).then(B=>!ul(B)&&r._subjects.state.next({errors:ade(r._formState.errors,B,n)}))}r._subjects.state.next({name:n,values:Xa(r._formValues)}),r._names.focus&&px(r._fields,(N,B)=>{if(r._names.focus&&B.startsWith(r._names.focus)&&N.focus)return N.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),lt.useEffect(()=>(!or(r._formValues,n)&&r._setFieldArray(n),()=>{const N=(B,w)=>{const _=or(r._fields,B);_&&_._f&&(_._f.mount=w)};r._options.shouldUnregister||s?r.unregister(n):N(n,!1)}),[n,r,a,s]),{swap:lt.useCallback(y,[h,n,r]),move:lt.useCallback(C,[h,n,r]),prepend:lt.useCallback(g,[h,n,r]),append:lt.useCallback(p,[h,n,r]),remove:lt.useCallback(v,[h,n,r]),insert:lt.useCallback(b,[h,n,r]),update:lt.useCallback(S,[h,n,r]),replace:lt.useCallback(I,[h,n,r]),fields:lt.useMemo(()=>o.map((N,B)=>({...N,[a]:u.current[B]||m0()})),[o,a])}}function adt(e={}){const t=lt.useRef(void 0),r=lt.useRef(void 0),[n,a]=lt.useState({isDirty:!1,isValidating:!1,isLoading:pd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:pd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!pd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=tdt(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,Yue(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),lt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),lt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),lt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),lt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),lt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),lt.useEffect(()=>{e.values&&!k0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),lt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Qut(n,s),t.current}const _O=Lt(tn,"alternancias");async function sdt(e){return(await Zn(_O,{...e,createdAt:am(),updatedAt:am()})).id}async function idt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=tr(_O,Gr("createdAt","desc"),Ed(t));e&&(n=tr(_O,_n("especialidad","==",e),Gr("createdAt","desc"),Ed(t))),r&&(n=tr(n,kJ(r)));const a=await Za(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function odt(e,t){const r=mr(tn,"alternancias",e);await vh(r,{...t,updatedAt:am()})}async function ldt(e){const t=mr(tn,"alternancias",e);await Is(t)}async function cdt(e,t,r){const n=Lt(tn,"alternancias",e,t);await Zn(n,{...r,createdAt:am()})}async function udt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=RN(eZ,r);await ZJ(n,t);const a=await BD(n);return await cdt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const ddt=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(null),[s,i]=T.useState(!1),{register:o,control:l,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=adt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=ndt({control:l,name:"actividades"}),v=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||v.some(R=>b.includes(R))))return c.jsx("div",{className:"p-4 text-red-600",children:"Acceso no autorizado"});const C=R=>(R||"").replace(/\s*[-]\s*\d+\s*horas?$/i,"").trim(),S=(R,X)=>{var V;return!R||!X?[]:((V=w1e[R])==null?void 0:V[X])??[]},I=f("especialidad"),N=f("modulos")||[],B=T.useMemo(()=>I?x1e[I]??[]:[],[I]),w=T.useMemo(()=>I?y1e[I]??[]:[],[I]);T.useEffect(()=>{h("curso",[]),h("modulos",[]);const R=[...f("actividades")||[]].map(X=>({...X,modulo:"",oa:""}));h("actividades",R)},[I]),T.useEffect(()=>{const R=[...f("actividades")||[]].map(X=>X.modulo&&!N.includes(X.modulo)?{...X,modulo:"",oa:""}:X);h("actividades",R)},[N]);const _=async()=>{i(!0);const{items:R}=await idt({});r(R),i(!1)};T.useEffect(()=>{_()},[]);const F=async R=>{n?await odt(n,{...R}):await sdt({...R,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await _()},U=R=>{const X=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],V=Array.isArray(R.modulos)?R.modulos.map(H=>C(H)):[],Z=Array.isArray(R.actividades)?R.actividades.map(H=>({...H,modulo:H!=null&&H.modulo?C(H.modulo):"",oa:(H==null?void 0:H.oa)||""})):[];d({...R,curso:X,modulos:V,actividades:Z}),a(R.id)},D=async R=>{confirm("Eliminar esta alternancia?")&&(await ldt(R),await _())},k=async(R,X)=>{await udt(R,X),alert("Evidencia subida correctamente")},L=R=>{const X=Array.from(R.currentTarget.selectedOptions).map(V=>V.value);h("curso",X,{shouldDirty:!0})};return c.jsxs("div",{className:"p-4",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"Formacin por Alternancia"}),s?c.jsx("p",{className:"text-sm text-gray-600",children:"Cargando"}):c.jsx("div",{className:"mb-6",children:t.length===0?c.jsx("p",{className:"text-gray-500",children:"No hay alternancias registradas"}):c.jsx("ul",{className:"space-y-2",children:t.map(R=>c.jsxs("li",{className:"border p-2 rounded flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("span",{className:"text-sm",children:[c.jsx("strong",{children:R.especialidad})," "," ",Array.isArray(R.curso)?R.curso.join(", "):R.curso,"  ",R.institucion," "," ",Array.isArray(R.tipoAlternancia)?R.tipoAlternancia.join(", "):""]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("label",{className:"cursor-pointer bg-yellow-500 text-white px-2 py-1 rounded flex items-center gap-1",children:[c.jsx(uZ,{size:16}),c.jsx("input",{type:"file",className:"hidden",onChange:X=>X.target.files&&k(R.id,X.target.files[0])}),"Evidencia"]}),c.jsx("button",{type:"button",onClick:()=>U(R),className:"px-2 py-1 bg-blue-600 text-white rounded",children:"Editar"}),c.jsx("button",{type:"button",onClick:()=>D(R.id),className:"px-2 py-1 bg-red-600 text-white rounded",children:"Eliminar"})]})]},R.id))})}),c.jsxs("form",{onSubmit:u(F),className:"space-y-4 border p-4 rounded bg-white/60",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Especialidad"}),c.jsxs("select",{...o("especialidad"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona"}),g1e.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Curso (puedes elegir varios)"}),c.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:L,className:"border rounded p-2 w-full min-h-[140px]",disabled:!I,children:I?B.map(R=>c.jsx("option",{value:R,children:R},R)):c.jsx("option",{value:"",children:"Elige especialidad primero"})}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ctrl/Cmd + clic para seleccionar mltiples cursos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Institucin"}),c.jsxs("select",{...o("institucion"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona"}),v1e.map(R=>c.jsx("option",{value:R,children:R},R))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Mdulos"}),I?c.jsx("div",{className:"flex flex-wrap gap-4",children:w.map(R=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:R,...o("modulos")}),c.jsx("span",{className:"text-sm",children:R})]},R))}):c.jsx("p",{className:"text-sm text-gray-500",children:"Elige especialidad para ver los mdulos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Tipo de Alternancia"}),c.jsx("div",{className:"flex gap-4 flex-wrap",children:b1e.map(R=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:R,...o("tipoAlternancia")}),R]},R))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Fundamentacin tcnico-pedaggica"}),c.jsx("textarea",{...o("fundamentacion"),className:"border rounded p-2 w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Plan de actividades"}),g.fields.map((R,X)=>{const V=f(`actividades.${X}.modulo`)||"",Z=S(I,V);return c.jsxs("div",{className:"flex flex-col gap-2 mb-3 border rounded p-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[c.jsx("input",{placeholder:"Fecha",...o(`actividades.${X}.fecha`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Tipo",...o(`actividades.${X}.tipo`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Actividad",...o(`actividades.${X}.actividad`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Lugar",...o(`actividades.${X}.lugar`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Evidencias",...o(`actividades.${X}.evidencias`),className:"border p-1 rounded"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mdulo"}),c.jsxs("select",{...o(`actividades.${X}.modulo`),className:"border p-2 rounded w-full",disabled:!I||N.length===0,children:[c.jsx("option",{value:"",children:!I&&"Elige especialidad arriba"||N.length===0&&"Selecciona mdulos arriba"||"Selecciona"}),N.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Objetivo de Aprendizaje (OA)"}),c.jsxs("select",{...o(`actividades.${X}.oa`),className:"border p-2 rounded w-full",disabled:!V||Z.length===0,children:[c.jsx("option",{value:"",children:V?Z.length===0?"Sin OA definidos para este mdulo":"Selecciona":"Selecciona mdulo primero"}),Z.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",onClick:()=>g.remove(X),className:"text-red-600 inline-flex items-center gap-1",title:"Eliminar fila",children:[c.jsx(ug,{size:18}),"Eliminar"]})})]},R.id)}),c.jsxs("button",{type:"button",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),className:"px-2 py-1 bg-green-600 text-white rounded flex items-center gap-1",children:[c.jsx(Cp,{size:16})," Agregar actividad"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Anlisis Curricular"}),c.jsx("textarea",{...o("analisisCurricular"),className:"border rounded p-2 w-full"})]}),c.jsxs("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-2",children:[c.jsx(OD,{size:18}),"Guardar"]})]})]})},Adt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},fdt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,l=T.useMemo(()=>{const y=f1e[o]||[];return o!==Yt.ESTUDIANTE?y:y.filter(C=>{if(C.name==="Asistencia a Empresa"){const S=Adt(e.curso||"");return S.startsWith("3")||S.startsWith("4")}return!0})},[o,e.curso]),[u,d]=T.useState(null),[f,h]=T.useState(!1);T.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const p=T.useCallback(y=>{d(y),window.innerWidth<768&&h(!1)},[]),g=T.useCallback(y=>{const C=l.find(S=>S.name===y);C&&p(C)},[l,p]),v=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(Yxe,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestin LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(y=>c.jsxs("button",{onClick:()=>p(y),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===y.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[y.icon,c.jsx("span",{className:"ml-4",children:y.name})]},y.name))})]}),b=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Calendario Acadmico")return c.jsx(Owe,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(Mwe,{currentUser:e});if(u.name==="Mensajera Interna")return c.jsx(fOe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(Kwe,{});if(o===Yt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(_ye,{currentUser:e});if(u.name==="Administracin")return c.jsx(gFe,{});if(u.name==="Seguimiento Curricular")return c.jsx(FKe,{currentUser:e});if(u.name==="Acompaamiento docente")return c.jsx(sOe,{currentUser:e});if(u.name==="Anlisis Taxonmico")return c.jsx(R$,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(JV,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(bye,{currentUser:e});if(u.name==="Crear horarios")return c.jsx(lwe,{});if(u.name==="Seguimiento de acciones pedaggicas")return c.jsx(fwe,{});if(u.name==="Inclusin")return c.jsx(XH,{currentUser:e})}if(o===Yt.PROFESORADO){if(u.name==="Planificacin")return c.jsx(Swe,{currentUser:e});if(u.name==="Mis Acompaamientos")return c.jsx(Bze,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return c.jsx(mze,{});if(u.name==="Anlisis Taxonmico")return c.jsx(R$,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(JV,{});if(u.name==="Inclusin")return c.jsx(XH,{currentUser:e});if(u.name==="Actividades Remotas")return c.jsx(KFe,{});if(u.name==="Evaluacin de Aprendizajes")return c.jsx(qEe,{});if(u.name==="Evaluaciones Formativas")return c.jsx(K6e,{currentUser:e})}if(o===Yt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(NFe,{});if(u.name==="Asistencia Dual")return c.jsx(j6e,{});if(u.name==="Paol")return c.jsx(q8e,{});if(u.name==="Gestin de Empresas")return c.jsx(Dut,{});if(u.name==="Alternancia TP")return c.jsx(ddt,{})}if(o===Yt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(l6e,{currentUser:e});if(u.name==="Evaluacin Formativa")return c.jsx(wze,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return c.jsx(Nze,{currentUser:e});if(u.name==="Asistencia a Empresa")return c.jsx(E6e,{currentUser:e})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 dark:bg-slate-900",children:[c.jsx(tye,{currentUser:e,onLogout:t,onNavigate:g,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(!f),unreadMessagesCount:s,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&c.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${f?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(v,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-100 dark:bg-slate-900",children:c.jsx("div",{className:"p-6 md:p-8",children:b()})})]})]})},hdt=({onSelectProfile:e,isAdminView:t=!1})=>c.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),c.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),c.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(ID,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:A1e.map(r=>c.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[c.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),c.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),mdt=()=>{const[e,t]=T.useState(null),[r,n]=T.useState(null),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(null);T.useEffect(()=>{const C=UX(e2,async S=>{if(t(S),S)try{const I=await rZ(S.email);I?(n(I),I.profile===Yt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await WB())}catch{o("Error al conectar con la base de datos."),await WB()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>C()},[]);const h=async(C,S)=>{if(o(null),!C.trim()||!S.trim()){o("Por favor ingrese email y contrasea");return}try{await qxe(C.trim(),S)}catch(I){switch(I.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet.");break;default:o("Ocurri un error al intentar iniciar sesin.")}}},p=async C=>{try{await Wxe(C)}catch(S){console.error("Error al enviar email de recuperacin:",S)}},g=C=>{f(C),u(!1)},v=()=>{u(!0),f(null)},b=async()=>{try{await WB()}catch(C){console.error("Error al cerrar sesin:",C)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(ID,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return c.jsx(E1e,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(l&&r.profile===Yt.SUBDIRECCION)return c.jsx(hdt,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return c.jsx(fdt,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Yt.SUBDIRECCION?v:void 0,canChangeProfile:r.profile===Yt.SUBDIRECCION})},sde=document.getElementById("root");if(!sde)throw new Error("Could not find root element to mount to");const pdt=wAe.createRoot(sde);pdt.render(c.jsx(lt.StrictMode,{children:c.jsx(mdt,{})}));export{ga as _,vdt as c,yl as g};
