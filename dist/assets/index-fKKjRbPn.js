(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var UTe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wb={exports:{}},Ip={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZB;function g9(){if(ZB)return Ip;ZB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Ip.Fragment=e,Ip.jsx=n,Ip.jsxs=n,Ip}var eN;function x9(){return eN||(eN=1,Wb.exports=g9()),Wb.exports}var A=x9(),$b={exports:{}},Pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN;function v9(){if(tN)return Pn;tN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(Z){return Z===null||typeof Z!="object"?null:(Z=h&&Z[h]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function C(Z,Ae,j){this.props=Z,this.context=Ae,this.refs=w,this.updater=j||g}C.prototype.isReactComponent={},C.prototype.setState=function(Z,Ae){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,Ae,"setState")},C.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function T(){}T.prototype=C.prototype;function I(Z,Ae,j){this.props=Z,this.context=Ae,this.refs=w,this.updater=j||g}var k=I.prototype=new T;k.constructor=I,b(k,C.prototype),k.isPureReactComponent=!0;var R=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function _(Z,Ae,j,W,J,ne){return j=ne.ref,{$$typeof:t,type:Z,key:Ae,ref:j!==void 0?j:null,props:ne}}function N(Z,Ae){return _(Z.type,Ae,void 0,void 0,void 0,Z.props)}function B(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function O(Z){var Ae={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(j){return Ae[j]})}var M=/\/+/g;function L(Z,Ae){return typeof Z=="object"&&Z!==null&&Z.key!=null?O(""+Z.key):Ae.toString(36)}function H(){}function G(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(H,H):(Z.status="pending",Z.then(function(Ae){Z.status==="pending"&&(Z.status="fulfilled",Z.value=Ae)},function(Ae){Z.status==="pending"&&(Z.status="rejected",Z.reason=Ae)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function oe(Z,Ae,j,W,J){var ne=typeof Z;(ne==="undefined"||ne==="boolean")&&(Z=null);var ie=!1;if(Z===null)ie=!0;else switch(ne){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(Z.$$typeof){case t:case e:ie=!0;break;case d:return ie=Z._init,oe(ie(Z._payload),Ae,j,W,J)}}if(ie)return J=J(Z),ie=W===""?"."+L(Z,0):W,R(J)?(j="",ie!=null&&(j=ie.replace(M,"$&/")+"/"),oe(J,Ae,j,"",function(xe){return xe})):J!=null&&(B(J)&&(J=N(J,j+(J.key==null||Z&&Z.key===J.key?"":(""+J.key).replace(M,"$&/")+"/")+ie)),Ae.push(J)),1;ie=0;var de=W===""?".":W+":";if(R(Z))for(var me=0;me<Z.length;me++)W=Z[me],ne=de+L(W,me),ie+=oe(W,Ae,j,ne,J);else if(me=p(Z),typeof me=="function")for(Z=me.call(Z),me=0;!(W=Z.next()).done;)W=W.value,ne=de+L(W,me++),ie+=oe(W,Ae,j,ne,J);else if(ne==="object"){if(typeof Z.then=="function")return oe(G(Z),Ae,j,W,J);throw Ae=String(Z),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return ie}function q(Z,Ae,j){if(Z==null)return Z;var W=[],J=0;return oe(Z,W,"","",function(ne){return Ae.call(j,ne,J++)}),W}function X(Z){if(Z._status===-1){var Ae=Z._result;Ae=Ae(),Ae.then(function(j){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=j)},function(j){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=j)}),Z._status===-1&&(Z._status=0,Z._result=Ae)}if(Z._status===1)return Z._result.default;throw Z._result}var re=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function K(){}return Pn.Children={map:q,forEach:function(Z,Ae,j){q(Z,function(){Ae.apply(this,arguments)},j)},count:function(Z){var Ae=0;return q(Z,function(){Ae++}),Ae},toArray:function(Z){return q(Z,function(Ae){return Ae})||[]},only:function(Z){if(!B(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Pn.Component=C,Pn.Fragment=n,Pn.Profiler=s,Pn.PureComponent=I,Pn.StrictMode=r,Pn.Suspense=l,Pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Pn.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return D.H.useMemoCache(Z)}},Pn.cache=function(Z){return function(){return Z.apply(null,arguments)}},Pn.cloneElement=function(Z,Ae,j){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var W=b({},Z.props),J=Z.key,ne=void 0;if(Ae!=null)for(ie in Ae.ref!==void 0&&(ne=void 0),Ae.key!==void 0&&(J=""+Ae.key),Ae)!P.call(Ae,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Ae.ref===void 0||(W[ie]=Ae[ie]);var ie=arguments.length-2;if(ie===1)W.children=j;else if(1<ie){for(var de=Array(ie),me=0;me<ie;me++)de[me]=arguments[me+2];W.children=de}return _(Z.type,J,void 0,void 0,ne,W)},Pn.createContext=function(Z){return Z={$$typeof:i,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:a,_context:Z},Z},Pn.createElement=function(Z,Ae,j){var W,J={},ne=null;if(Ae!=null)for(W in Ae.key!==void 0&&(ne=""+Ae.key),Ae)P.call(Ae,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=Ae[W]);var ie=arguments.length-2;if(ie===1)J.children=j;else if(1<ie){for(var de=Array(ie),me=0;me<ie;me++)de[me]=arguments[me+2];J.children=de}if(Z&&Z.defaultProps)for(W in ie=Z.defaultProps,ie)J[W]===void 0&&(J[W]=ie[W]);return _(Z,ne,void 0,void 0,null,J)},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(Z){return{$$typeof:o,render:Z}},Pn.isValidElement=B,Pn.lazy=function(Z){return{$$typeof:d,_payload:{_status:-1,_result:Z},_init:X}},Pn.memo=function(Z,Ae){return{$$typeof:u,type:Z,compare:Ae===void 0?null:Ae}},Pn.startTransition=function(Z){var Ae=D.T,j={};D.T=j;try{var W=Z(),J=D.S;J!==null&&J(j,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(K,re)}catch(ne){re(ne)}finally{D.T=Ae}},Pn.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Pn.use=function(Z){return D.H.use(Z)},Pn.useActionState=function(Z,Ae,j){return D.H.useActionState(Z,Ae,j)},Pn.useCallback=function(Z,Ae){return D.H.useCallback(Z,Ae)},Pn.useContext=function(Z){return D.H.useContext(Z)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(Z,Ae){return D.H.useDeferredValue(Z,Ae)},Pn.useEffect=function(Z,Ae,j){var W=D.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(Z,Ae)},Pn.useId=function(){return D.H.useId()},Pn.useImperativeHandle=function(Z,Ae,j){return D.H.useImperativeHandle(Z,Ae,j)},Pn.useInsertionEffect=function(Z,Ae){return D.H.useInsertionEffect(Z,Ae)},Pn.useLayoutEffect=function(Z,Ae){return D.H.useLayoutEffect(Z,Ae)},Pn.useMemo=function(Z,Ae){return D.H.useMemo(Z,Ae)},Pn.useOptimistic=function(Z,Ae){return D.H.useOptimistic(Z,Ae)},Pn.useReducer=function(Z,Ae,j){return D.H.useReducer(Z,Ae,j)},Pn.useRef=function(Z){return D.H.useRef(Z)},Pn.useState=function(Z){return D.H.useState(Z)},Pn.useSyncExternalStore=function(Z,Ae,j){return D.H.useSyncExternalStore(Z,Ae,j)},Pn.useTransition=function(){return D.H.useTransition()},Pn.version="19.1.1",Pn}var nN;function xx(){return nN||(nN=1,$b.exports=v9()),$b.exports}var ee=xx();const At=OS(ee);var Yb={exports:{}},Fp={},Jb={exports:{}},Xb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN;function y9(){return rN||(rN=1,function(t){function e(q,X){var re=q.length;q.push(X);e:for(;0<re;){var K=re-1>>>1,Z=q[K];if(0<s(Z,X))q[K]=X,q[re]=Z,re=K;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],re=q.pop();if(re!==X){q[0]=re;e:for(var K=0,Z=q.length,Ae=Z>>>1;K<Ae;){var j=2*(K+1)-1,W=q[j],J=j+1,ne=q[J];if(0>s(W,re))J<Z&&0>s(ne,W)?(q[K]=ne,q[J]=re,K=J):(q[K]=W,q[j]=re,K=j);else if(J<Z&&0>s(ne,re))q[K]=ne,q[J]=re,K=J;else break e}}return X}function s(q,X){var re=q.sortIndex-X.sortIndex;return re!==0?re:q.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,p=3,g=!1,b=!1,w=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function R(q){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=q)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function D(q){if(w=!1,R(q),!b)if(n(l)!==null)b=!0,P||(P=!0,L());else{var X=n(u);X!==null&&oe(D,X.startTime-q)}}var P=!1,_=-1,N=5,B=-1;function O(){return C?!0:!(t.unstable_now()-B<N)}function M(){if(C=!1,P){var q=t.unstable_now();B=q;var X=!0;try{e:{b=!1,w&&(w=!1,I(_),_=-1),g=!0;var re=p;try{t:{for(R(q),h=n(l);h!==null&&!(h.expirationTime>q&&O());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var Z=K(h.expirationTime<=q);if(q=t.unstable_now(),typeof Z=="function"){h.callback=Z,R(q),X=!0;break t}h===n(l)&&r(l),R(q)}else r(l);h=n(l)}if(h!==null)X=!0;else{var Ae=n(u);Ae!==null&&oe(D,Ae.startTime-q),X=!1}}break e}finally{h=null,p=re,g=!1}X=void 0}}finally{X?L():P=!1}}}var L;if(typeof k=="function")L=function(){k(M)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=M,L=function(){G.postMessage(null)}}else L=function(){T(M,0)};function oe(q,X){_=T(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var re=p;p=X;try{return q()}finally{p=re}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=p;p=q;try{return X()}finally{p=re}},t.unstable_scheduleCallback=function(q,X,re){var K=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?K+re:K):re=K,q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,q={id:d++,callback:X,priorityLevel:q,startTime:re,expirationTime:Z,sortIndex:-1},re>K?(q.sortIndex=re,e(u,q),n(l)===null&&q===n(u)&&(w?(I(_),_=-1):w=!0,oe(D,re-K))):(q.sortIndex=Z,e(l,q),b||g||(b=!0,P||(P=!0,L()))),q},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(q){var X=p;return function(){var re=p;p=X;try{return q.apply(this,arguments)}finally{p=re}}}}(Xb)),Xb}var sN;function w9(){return sN||(sN=1,Jb.exports=y9()),Jb.exports}var Zb={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function b9(){if(aN)return xi;aN=1;var t=xx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xi.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},xi.flushSync=function(l){var u=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=d,r.d.f()}},xi.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},xi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},xi.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},xi.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},xi.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},xi.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},xi.requestFormReset=function(l){r.d.r(l)},xi.unstable_batchedUpdates=function(l,u){return l(u)},xi.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},xi.useFormStatus=function(){return i.H.useHostTransitionStatus()},xi.version="19.1.1",xi}var iN;function ND(){if(iN)return Zb.exports;iN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zb.exports=b9(),Zb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function C9(){if(oN)return Fp;oN=1;var t=w9(),e=xx(),n=ND();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var f=c,m=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(m=f.return),c=f.return;while(c)}return f.tag===3?m:null}function i(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(a(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=a(c),f===null)throw Error(r(188));return f!==c?null:c}for(var m=c,y=f;;){var F=m.return;if(F===null)break;var Q=F.alternate;if(Q===null){if(y=F.return,y!==null){m=y;continue}break}if(F.child===Q.child){for(Q=F.child;Q;){if(Q===m)return o(F),c;if(Q===y)return o(F),f;Q=Q.sibling}throw Error(r(188))}if(m.return!==y.return)m=F,y=Q;else{for(var le=!1,we=F.child;we;){if(we===m){le=!0,m=F,y=Q;break}if(we===y){le=!0,y=F,m=Q;break}we=we.sibling}if(!le){for(we=Q.child;we;){if(we===m){le=!0,m=Q,y=F;break}if(we===y){le=!0,y=Q,m=F;break}we=we.sibling}if(!le)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),k=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(c){return c===null||typeof c!="object"?null:(c=M&&c[M]||c["@@iterator"],typeof c=="function"?c:null)}var H=Symbol.for("react.client.reference");function G(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===H?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case k:return(c.displayName||"Context")+".Provider";case I:return(c._context.displayName||"Context")+".Consumer";case R:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return f=c.displayName||null,f!==null?f:G(c.type)||"Memo";case N:f=c._payload,c=c._init;try{return G(c(f))}catch{}}return null}var oe=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},K=[],Z=-1;function Ae(c){return{current:c}}function j(c){0>Z||(c.current=K[Z],K[Z]=null,Z--)}function W(c,f){Z++,K[Z]=c.current,c.current=f}var J=Ae(null),ne=Ae(null),ie=Ae(null),de=Ae(null);function me(c,f){switch(W(ie,f),W(ne,c),W(J,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?TB(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=TB(f),c=BB(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}j(J),W(J,c)}function xe(){j(J),j(ne),j(ie)}function Se(c){c.memoizedState!==null&&W(de,c);var f=J.current,m=BB(f,c.type);f!==m&&(W(ne,c),W(J,m))}function ge(c){ne.current===c&&(j(J),j(ne)),de.current===c&&(j(de),Sp._currentValue=re)}var ae=Object.prototype.hasOwnProperty,Fe=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,De=t.unstable_shouldYield,Ce=t.unstable_requestPaint,Ge=t.unstable_now,nt=t.unstable_getCurrentPriorityLevel,it=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,ut=t.unstable_LowPriority,kt=t.unstable_IdlePriority,Ft=t.log,Wt=t.unstable_setDisableYieldValue,Mt=null,Vt=null;function Jt(c){if(typeof Ft=="function"&&Wt(c),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Mt,c)}catch{}}var Pt=Math.clz32?Math.clz32:xn,It=Math.log,xt=Math.LN2;function xn(c){return c>>>=0,c===0?32:31-(It(c)/xt|0)|0}var $t=256,ir=4194304;function mn(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Fn(c,f,m){var y=c.pendingLanes;if(y===0)return 0;var F=0,Q=c.suspendedLanes,le=c.pingedLanes;c=c.warmLanes;var we=y&134217727;return we!==0?(y=we&~Q,y!==0?F=mn(y):(le&=we,le!==0?F=mn(le):m||(m=we&~c,m!==0&&(F=mn(m))))):(we=y&~Q,we!==0?F=mn(we):le!==0?F=mn(le):m||(m=y&~c,m!==0&&(F=mn(m)))),F===0?0:f!==0&&f!==F&&(f&Q)===0&&(Q=F&-F,m=f&-f,Q>=m||Q===32&&(m&4194048)!==0)?f:F}function Er(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Bn(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(){var c=$t;return $t<<=1,($t&4194048)===0&&($t=256),c}function Xn(){var c=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),c}function Wr(c){for(var f=[],m=0;31>m;m++)f.push(c);return f}function cs(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Dn(c,f,m,y,F,Q){var le=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var we=c.entanglements,Re=c.expirationTimes,Ze=c.hiddenUpdates;for(m=le&~m;0<m;){var ft=31-Pt(m),wt=1<<ft;we[ft]=0,Re[ft]=-1;var rt=Ze[ft];if(rt!==null)for(Ze[ft]=null,ft=0;ft<rt.length;ft++){var st=rt[ft];st!==null&&(st.lane&=-536870913)}m&=~wt}y!==0&&tn(c,y,0),Q!==0&&F===0&&c.tag!==0&&(c.suspendedLanes|=Q&~(le&~f))}function tn(c,f,m){c.pendingLanes|=f,c.suspendedLanes&=~f;var y=31-Pt(f);c.entangledLanes|=f,c.entanglements[y]=c.entanglements[y]|1073741824|m&4194090}function On(c,f){var m=c.entangledLanes|=f;for(c=c.entanglements;m;){var y=31-Pt(m),F=1<<y;F&f|c[y]&f&&(c[y]|=f),m&=~F}}function ra(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Or(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function ms(){var c=X.p;return c!==0?c:(c=window.event,c===void 0?32:KB(c.type))}function xa(c,f){var m=X.p;try{return X.p=c,f()}finally{X.p=m}}var Ht=Math.random().toString(36).slice(2),or="__reactFiber$"+Ht,Zn="__reactProps$"+Ht,_r="__reactContainer$"+Ht,kr="__reactEvents$"+Ht,Qr="__reactListeners$"+Ht,fe="__reactHandles$"+Ht,Ne="__reactResources$"+Ht,Ee="__reactMarker$"+Ht;function _e(c){delete c[or],delete c[Zn],delete c[kr],delete c[Qr],delete c[fe]}function Te(c){var f=c[or];if(f)return f;for(var m=c.parentNode;m;){if(f=m[_r]||m[or]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(c=FB(c);c!==null;){if(m=c[or])return m;c=FB(c)}return f}c=m,m=c.parentNode}return null}function ke(c){if(c=c[or]||c[_r]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function qe(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function tt(c){var f=c[Ne];return f||(f=c[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Qe(c){c[Ee]=!0}var We=new Set,Je={};function yt(c,f){Nt(c,f),Nt(c+"Capture",f)}function Nt(c,f){for(Je[c]=f,c=0;c<f.length;c++)We.add(f[c])}var jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Rt={};function un(c){return ae.call(Rt,c)?!0:ae.call(Tt,c)?!1:jt.test(c)?Rt[c]=!0:(Tt[c]=!0,!1)}function Un(c,f,m){if(un(f))if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+m)}}function Ln(c,f,m){if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+m)}}function Qn(c,f,m,y){if(y===null)c.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(f,m,""+y)}}var _s,oi;function Ss(c){if(_s===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);_s=f&&f[1]||"",oi=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_s+c+oi}var sa=!1;function Ps(c,f){if(!c||sa)return"";sa=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(st){var rt=st}Reflect.construct(c,[],wt)}else{try{wt.call()}catch(st){rt=st}c.call(wt.prototype)}}else{try{throw Error()}catch(st){rt=st}(wt=c())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(st){if(st&&rt&&typeof st.stack=="string")return[st.stack,rt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=y.DetermineComponentFrameRoot(),le=Q[0],we=Q[1];if(le&&we){var Re=le.split(`
`),Ze=we.split(`
`);for(F=y=0;y<Re.length&&!Re[y].includes("DetermineComponentFrameRoot");)y++;for(;F<Ze.length&&!Ze[F].includes("DetermineComponentFrameRoot");)F++;if(y===Re.length||F===Ze.length)for(y=Re.length-1,F=Ze.length-1;1<=y&&0<=F&&Re[y]!==Ze[F];)F--;for(;1<=y&&0<=F;y--,F--)if(Re[y]!==Ze[F]){if(y!==1||F!==1)do if(y--,F--,0>F||Re[y]!==Ze[F]){var ft=`
`+Re[y].replace(" at new "," at ");return c.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",c.displayName)),ft}while(1<=y&&0<=F);break}}}finally{sa=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?Ss(m):""}function va(c){switch(c.tag){case 26:case 27:case 5:return Ss(c.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 15:return Ps(c.type,!1);case 11:return Ps(c.type.render,!1);case 1:return Ps(c.type,!0);case 31:return Ss("Activity");default:return""}}function Hr(c){try{var f="";do f+=va(c),c=c.return;while(c);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function aa(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Nc(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function UA(c){var f=Nc(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),y=""+c[f];if(!c.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var F=m.get,Q=m.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return F.call(this)},set:function(le){y=""+le,Q.call(this,le)}}),Object.defineProperty(c,f,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(le){y=""+le},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Xo(c){c._valueTracker||(c._valueTracker=UA(c))}function Iu(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var m=f.getValue(),y="";return c&&(y=Nc(c)?c.checked?"true":"false":c.value),c=y,c!==m?(f.setValue(c),!0):!1}function ya(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var kc=/[\n"\\]/g;function lr(c){return c.replace(kc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function wa(c,f,m,y,F,Q,le,we){c.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?c.type=le:c.removeAttribute("type"),f!=null?le==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+aa(f)):c.value!==""+aa(f)&&(c.value=""+aa(f)):le!=="submit"&&le!=="reset"||c.removeAttribute("value"),f!=null?el(c,le,aa(f)):m!=null?el(c,le,aa(m)):y!=null&&c.removeAttribute("value"),F==null&&Q!=null&&(c.defaultChecked=!!Q),F!=null&&(c.checked=F&&typeof F!="function"&&typeof F!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?c.name=""+aa(we):c.removeAttribute("name")}function Zo(c,f,m,y,F,Q,le,we){if(Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(c.type=Q),f!=null||m!=null){if(!(Q!=="submit"&&Q!=="reset"||f!=null))return;m=m!=null?""+aa(m):"",f=f!=null?""+aa(f):m,we||f===c.value||(c.value=f),c.defaultValue=f}y=y??F,y=typeof y!="function"&&typeof y!="symbol"&&!!y,c.checked=we?c.checked:!!y,c.defaultChecked=!!y,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(c.name=le)}function el(c,f,m){f==="number"&&ya(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function Ji(c,f,m,y){if(c=c.options,f){f={};for(var F=0;F<m.length;F++)f["$"+m[F]]=!0;for(m=0;m<c.length;m++)F=f.hasOwnProperty("$"+c[m].value),c[m].selected!==F&&(c[m].selected=F),F&&y&&(c[m].defaultSelected=!0)}else{for(m=""+aa(m),f=null,F=0;F<c.length;F++){if(c[F].value===m){c[F].selected=!0,y&&(c[F].defaultSelected=!0);return}f!==null||c[F].disabled||(f=c[F])}f!==null&&(f.selected=!0)}}function gr(c,f,m){if(f!=null&&(f=""+aa(f),f!==c.value&&(c.value=f),m==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=m!=null?""+aa(m):""}function tl(c,f,m,y){if(f==null){if(y!=null){if(m!=null)throw Error(r(92));if(oe(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),f=m}m=aa(f),c.defaultValue=m,y=c.textContent,y===m&&y!==""&&y!==null&&(c.value=y)}function li(c,f){if(f){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=f;return}}c.textContent=f}var Co=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function LA(c,f,m){var y=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":y?c.setProperty(f,m):typeof m!="number"||m===0||Co.has(f)?f==="float"?c.cssFloat=m:c[f]=(""+m).trim():c[f]=m+"px"}function Fu(c,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?c.setProperty(y,""):y==="float"?c.cssFloat="":c[y]="");for(var F in f)y=f[F],f.hasOwnProperty(F)&&m[F]!==y&&LA(c,F,y)}else for(var Q in f)f.hasOwnProperty(Q)&&LA(c,Q,f[Q])}function Ru(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(c){return Ic.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Xi=null;function Ir(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var So=null,Zi=null;function dn(c){var f=ke(c);if(f&&(c=f.stateNode)){var m=c[Zn]||null;e:switch(c=f.stateNode,f.type){case"input":if(wa(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+lr(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var y=m[f];if(y!==c&&y.form===c.form){var F=y[Zn]||null;if(!F)throw Error(r(90));wa(y,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(f=0;f<m.length;f++)y=m[f],y.form===c.form&&Iu(y)}break e;case"textarea":gr(c,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&Ji(c,!!m.multiple,f,!1)}}}var eo=!1;function MA(c,f,m){if(eo)return c(f,m);eo=!0;try{var y=c(f);return y}finally{if(eo=!1,(So!==null||Zi!==null)&&(C1(),So&&(f=So,c=Zi,Zi=So=null,dn(f),c)))for(f=0;f<c.length;f++)dn(c[f])}}function ka(c,f){var m=c.stateNode;if(m===null)return null;var y=m[Zn]||null;if(y===null)return null;m=y[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(ci)try{var to={};Object.defineProperty(to,"passive",{get:function(){qa=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{qa=!1}var ui=null,nl=null,To=null;function Du(){if(To)return To;var c,f=nl,m=f.length,y,F="value"in ui?ui.value:ui.textContent,Q=F.length;for(c=0;c<m&&f[c]===F[c];c++);var le=m-c;for(y=1;y<=le&&f[m-y]===F[Q-y];y++);return To=F.slice(c,1<y?1-y:void 0)}function Ai(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ia(){return!0}function no(){return!1}function Ts(c){function f(m,y,F,Q,le){this._reactName=m,this._targetInst=F,this.type=y,this.nativeEvent=Q,this.target=le,this.currentTarget=null;for(var we in c)c.hasOwnProperty(we)&&(m=c[we],this[we]=m?m(Q):Q[we]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Ia:no,this.isPropagationStopped=no,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),f}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=Ts(Kn),ro=d({},Kn,{view:0,detail:0}),Uu=Ts(ro),jl,Ol,Oi,Fa=d({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Oi&&(Oi&&c.type==="mousemove"?(jl=c.screenX-Oi.screenX,Ol=c.screenY-Oi.screenY):Ol=jl=0,Oi=c),jl)},movementY:function(c){return"movementY"in c?c.movementY:Ol}}),Bs=Ts(Fa),PA=d({},Fa,{dataTransfer:0}),sl=Ts(PA),ba=d({},ro,{relatedTarget:0}),al=Ts(ba),Bo=d({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=Ts(Bo),Ql=d({},Kn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Rc=Ts(Ql),Lu=d({},Kn,{data:0}),Hl=Ts(Lu),il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Dc[c])?!!f[c]:!1}function ol(){return Gl}var jA=d({},ro,{key:function(c){if(c.key){var f=il[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Ai(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Vl[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(c){return c.type==="keypress"?Ai(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ai(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),No=Ts(jA),ll=d({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=Ts(ll),Ra=d({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),Uc=Ts(Ra),V=d({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ue=Ts(V),Ie=d({},Fa,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Ts(Ie),He=d({},Kn,{newState:0,oldState:0}),ot=Ts(He),_t=[9,13,27,32],Ot=ci&&"CompositionEvent"in window,S=null;ci&&"documentMode"in document&&(S=document.documentMode);var Y=ci&&"TextEvent"in window&&!S,se=ci&&(!Ot||S&&8<S&&11>=S),ye=" ",Oe=!1;function Xe(c,f){switch(c){case"keyup":return _t.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var fn=!1;function Wn(c,f){switch(c){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(Oe=!0,ye);case"textInput":return c=f.data,c===ye&&Oe?null:c;default:return null}}function Sn(c,f){if(fn)return c==="compositionend"||!Ot&&Xe(c,f)?(c=Du(),To=nl=ui=null,fn=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return se&&f.locale!=="ko"?null:f.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sr(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!xr[c.type]:f==="textarea"}function so(c,f,m,y){So?Zi?Zi.push(y):Zi=[y]:So=y,f=N1(f,"onChange"),0<f.length&&(m=new rl("onChange","change",null,m,y),c.push({event:m,listeners:f}))}var ps=null,di=null;function cl(c){bB(c,0)}function Lc(c){var f=qe(c);if(Iu(f))return c}function OA(c,f){if(c==="change")return f}var Mu=!1;if(ci){var js;if(ci){var Mc="oninput"in document;if(!Mc){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Mc=typeof Pu.oninput=="function"}js=Mc}else js=!1;Mu=js&&(!document.documentMode||9<document.documentMode)}function ju(){ps&&(ps.detachEvent("onpropertychange",QA),di=ps=null)}function QA(c){if(c.propertyName==="value"&&Lc(di)){var f=[];so(f,di,c,Ir(c)),MA(cl,f)}}function fi(c,f,m){c==="focusin"?(ju(),ps=f,di=m,ps.attachEvent("onpropertychange",QA)):c==="focusout"&&ju()}function Km(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Lc(di)}function gf(c,f){if(c==="click")return Lc(f)}function Mh(c,f){if(c==="input"||c==="change")return Lc(f)}function ao(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var ia=typeof Object.is=="function"?Object.is:ao;function Pc(c,f){if(ia(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var m=Object.keys(c),y=Object.keys(f);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var F=m[y];if(!ae.call(f,F)||!ia(c[F],f[F]))return!1}return!0}function xf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function ql(c,f){var m=xf(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=f&&y>=f)return{node:m,offset:f-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=xf(m)}}function jc(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?jc(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function Ka(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=ya(c.document);f instanceof c.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)c=f.contentWindow;else break;f=ya(c.document)}return f}function Ca(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Oc=ci&&"documentMode"in document&&11>=document.documentMode,hi=null,ko=null,ul=null,Io=!1;function us(c,f,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Io||hi==null||hi!==ya(y)||(y=hi,"selectionStart"in y&&Ca(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ul&&Pc(ul,y)||(ul=y,y=N1(ko,"onSelect"),0<y.length&&(f=new rl("onSelect","select",null,f,m),c.push({event:f,listeners:y}),f.target=hi)))}function Fo(c,f){var m={};return m[c.toLowerCase()]=f.toLowerCase(),m["Webkit"+c]="webkit"+f,m["Moz"+c]="moz"+f,m}var Ns={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},mi={},Ou={};ci&&(Ou=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Al(c){if(mi[c])return mi[c];if(!Ns[c])return c;var f=Ns[c],m;for(m in f)if(f.hasOwnProperty(m)&&m in Ou)return mi[c]=f[m];return c}var HA=Al("animationend"),Qc=Al("animationiteration"),Hc=Al("animationstart"),Vc=Al("transitionrun"),Qu=Al("transitionstart"),VA=Al("transitioncancel"),Gc=Al("transitionend"),Kl=new Map,Hu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hu.push("scrollEnd");function As(c,f){Kl.set(c,f),yt(f,[c])}var Qi=new WeakMap;function Vn(c,f){if(typeof c=="object"&&c!==null){var m=Qi.get(c);return m!==void 0?m:(f={value:c,source:f,stack:Hr(f)},Qi.set(c,f),f)}return{value:c,source:f,stack:Hr(f)}}var Gn=[],Vr=0,gs=0;function io(){for(var c=Vr,f=gs=Vr=0;f<c;){var m=Gn[f];Gn[f++]=null;var y=Gn[f];Gn[f++]=null;var F=Gn[f];Gn[f++]=null;var Q=Gn[f];if(Gn[f++]=null,y!==null&&F!==null){var le=y.pending;le===null?F.next=F:(F.next=le.next,le.next=F),y.pending=F}Q!==0&&Ph(m,F,Q)}}function zc(c,f,m,y){Gn[Vr++]=c,Gn[Vr++]=f,Gn[Vr++]=m,Gn[Vr++]=y,gs|=y,c.lanes|=y,c=c.alternate,c!==null&&(c.lanes|=y)}function qc(c,f,m,y){return zc(c,f,m,y),Vu(c)}function Wl(c,f){return zc(c,null,null,f),Vu(c)}function Ph(c,f,m){c.lanes|=m;var y=c.alternate;y!==null&&(y.lanes|=m);for(var F=!1,Q=c.return;Q!==null;)Q.childLanes|=m,y=Q.alternate,y!==null&&(y.childLanes|=m),Q.tag===22&&(c=Q.stateNode,c===null||c._visibility&1||(F=!0)),c=Q,Q=Q.return;return c.tag===3?(Q=c.stateNode,F&&f!==null&&(F=31-Pt(m),c=Q.hiddenUpdates,y=c[F],y===null?c[F]=[f]:y.push(f),f.lane=m|536870912),Q):null}function Vu(c){if(50<xp)throw xp=0,xb=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var oa={};function oo(c,f,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Da(c,f,m,y){return new oo(c,f,m,y)}function GA(c){return c=c.prototype,!(!c||!c.isReactComponent)}function dl(c,f){var m=c.alternate;return m===null?(m=Da(c.tag,f,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=f,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,f=c.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function vf(c,f){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,f=m.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Gu(c,f,m,y,F,Q){var le=0;if(y=c,typeof c=="function")GA(c)&&(le=1);else if(typeof c=="string")le=s9(c,m,J.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case B:return c=Da(31,m,f,F),c.elementType=B,c.lanes=Q,c;case b:return $l(m.children,F,Q,f);case w:le=8,F|=24;break;case C:return c=Da(12,m,f,F|2),c.elementType=C,c.lanes=Q,c;case D:return c=Da(13,m,f,F),c.elementType=D,c.lanes=Q,c;case P:return c=Da(19,m,f,F),c.elementType=P,c.lanes=Q,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case T:case k:le=10;break e;case I:le=9;break e;case R:le=11;break e;case _:le=14;break e;case N:le=16,y=null;break e}le=29,m=Error(r(130,c===null?"null":typeof c,"")),y=null}return f=Da(le,m,f,F),f.elementType=c,f.type=y,f.lanes=Q,f}function $l(c,f,m,y){return c=Da(7,c,y,f),c.lanes=m,c}function jh(c,f,m){return c=Da(6,c,null,f),c.lanes=m,c}function yf(c,f,m){return f=Da(4,c.children!==null?c.children:[],c.key,f),f.lanes=m,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Kc=[],Yl=0,zA=null,Oh=0,lo=[],Hi=0,zu=null,Jl=1,Xl="";function qu(c,f){Kc[Yl++]=Oh,Kc[Yl++]=zA,zA=c,Oh=f}function Kx(c,f,m){lo[Hi++]=Jl,lo[Hi++]=Xl,lo[Hi++]=zu,zu=c;var y=Jl;c=Xl;var F=32-Pt(y)-1;y&=~(1<<F),m+=1;var Q=32-Pt(f)+F;if(30<Q){var le=F-F%5;Q=(y&(1<<le)-1).toString(32),y>>=le,F-=le,Jl=1<<32-Pt(f)+F|m<<F|y,Xl=Q+c}else Jl=1<<Q|m<<F|y,Xl=c}function wf(c){c.return!==null&&(qu(c,1),Kx(c,1,0))}function bf(c){for(;c===zA;)zA=Kc[--Yl],Kc[Yl]=null,Oh=Kc[--Yl],Kc[Yl]=null;for(;c===zu;)zu=lo[--Hi],lo[Hi]=null,Xl=lo[--Hi],lo[Hi]=null,Jl=lo[--Hi],lo[Hi]=null}var Os=null,ds=null,hr=!1,Wc=null,fl=!1,Wm=Error(r(519));function Ku(c){var f=Error(r(418,""));throw qA(Vn(f,c)),Wm}function Wx(c){var f=c.stateNode,m=c.type,y=c.memoizedProps;switch(f[or]=c,f[Zn]=y,m){case"dialog":tr("cancel",f),tr("close",f);break;case"iframe":case"object":case"embed":tr("load",f);break;case"video":case"audio":for(m=0;m<yp.length;m++)tr(yp[m],f);break;case"source":tr("error",f);break;case"img":case"image":case"link":tr("error",f),tr("load",f);break;case"details":tr("toggle",f);break;case"input":tr("invalid",f),Zo(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Xo(f);break;case"select":tr("invalid",f);break;case"textarea":tr("invalid",f),tl(f,y.value,y.defaultValue,y.children),Xo(f)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||y.suppressHydrationWarning===!0||SB(f.textContent,m)?(y.popover!=null&&(tr("beforetoggle",f),tr("toggle",f)),y.onScroll!=null&&tr("scroll",f),y.onScrollEnd!=null&&tr("scrollend",f),y.onClick!=null&&(f.onclick=k1),f=!0):f=!1,f||Ku(c)}function Zl(c){for(Os=c.return;Os;)switch(Os.tag){case 5:case 13:fl=!1;return;case 27:case 3:fl=!0;return;default:Os=Os.return}}function Wa(c){if(c!==Os)return!1;if(!hr)return Zl(c),hr=!0,!1;var f=c.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||Db(c.type,c.memoizedProps)),m=!m),m&&ds&&Ku(c),Zl(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(f===0){ds=oc(c.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;c=c.nextSibling}ds=null}}else f===27?(f=ds,cd(c.type)?(c=Pb,Pb=null,ds=c):ds=f):ds=Os?oc(c.stateNode.nextSibling):null;return!0}function Vi(){ds=Os=null,hr=!1}function $x(){var c=Wc;return c!==null&&(Ao===null?Ao=c:Ao.push.apply(Ao,c),Wc=null),c}function qA(c){Wc===null?Wc=[c]:Wc.push(c)}var hl=Ae(null),la=null,ec=null;function $c(c,f,m){W(hl,f._currentValue),f._currentValue=m}function ml(c){c._currentValue=hl.current,j(hl)}function Qh(c,f,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),c===m)break;c=c.return}}function Hh(c,f,m,y){var F=c.child;for(F!==null&&(F.return=c);F!==null;){var Q=F.dependencies;if(Q!==null){var le=F.child;Q=Q.firstContext;e:for(;Q!==null;){var we=Q;Q=F;for(var Re=0;Re<f.length;Re++)if(we.context===f[Re]){Q.lanes|=m,we=Q.alternate,we!==null&&(we.lanes|=m),Qh(Q.return,m,c),y||(le=null);break e}Q=we.next}}else if(F.tag===18){if(le=F.return,le===null)throw Error(r(341));le.lanes|=m,Q=le.alternate,Q!==null&&(Q.lanes|=m),Qh(le,m,c),le=null}else le=F.child;if(le!==null)le.return=F;else for(le=F;le!==null;){if(le===c){le=null;break}if(F=le.sibling,F!==null){F.return=le.return,le=F;break}le=le.return}F=le}}function KA(c,f,m,y){c=null;for(var F=f,Q=!1;F!==null;){if(!Q){if((F.flags&524288)!==0)Q=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var le=F.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var we=F.type;ia(F.pendingProps.value,le.value)||(c!==null?c.push(we):c=[we])}}else if(F===de.current){if(le=F.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(c!==null?c.push(Sp):c=[Sp])}F=F.return}c!==null&&Hh(f,c,m,y),f.flags|=262144}function Vh(c){for(c=c.firstContext;c!==null;){if(!ia(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function pl(c){la=c,ec=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Qs(c){return Gh(la,c)}function Yc(c,f){return la===null&&pl(c),Gh(c,f)}function Gh(c,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},ec===null){if(c===null)throw Error(r(308));ec=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else ec=ec.next=f;return m}var Vw=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(m,y){c.push(y)}};this.abort=function(){f.aborted=!0,c.forEach(function(m){return m()})}},Yx=t.unstable_scheduleCallback,Gw=t.unstable_NormalPriority,Hs={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $m(){return{controller:new Vw,data:new Map,refCount:0}}function Cf(c){c.refCount--,c.refCount===0&&Yx(Gw,function(){c.controller.abort()})}var Ef=null,Ym=0,Wu=0,tc=null;function zw(c,f){if(Ef===null){var m=Ef=[];Ym=0,Wu=_b(),tc={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Ym++,f.then(Jx,Jx),f}function Jx(){if(--Ym===0&&Ef!==null){tc!==null&&(tc.status="fulfilled");var c=Ef;Ef=null,Wu=0,tc=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Xx(c,f){var m=[],y={status:"pending",value:null,reason:null,then:function(F){m.push(F)}};return c.then(function(){y.status="fulfilled",y.value=f;for(var F=0;F<m.length;F++)(0,m[F])(f)},function(F){for(y.status="rejected",y.reason=F,F=0;F<m.length;F++)(0,m[F])(void 0)}),y}var E=q.S;q.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&zw(c,f),E!==null&&E(c,f)};var U=Ae(null);function z(){var c=U.current;return c!==null?c:Xr.pooledCache}function te(c,f){f===null?W(U,U.current):W(U,f.pool)}function ce(){var c=z();return c===null?null:{parent:Hs._currentValue,pool:c}}var he=Error(r(460)),pe=Error(r(474)),ve=Error(r(542)),be={then:function(){}};function Be(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Le(){}function Ye(c,f,m){switch(m=c[m],m===void 0?c.push(f):m!==f&&(f.then(Le,Le),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,gt(c),c;default:if(typeof f.status=="string")f.then(Le,Le);else{if(c=Xr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(y){if(f.status==="pending"){var F=f;F.status="fulfilled",F.value=y}},function(y){if(f.status==="pending"){var F=f;F.status="rejected",F.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,gt(c),c}throw Ke=f,he}}var Ke=null;function Ve(){if(Ke===null)throw Error(r(459));var c=Ke;return Ke=null,c}function gt(c){if(c===he||c===ve)throw Error(r(483))}var at=!1;function Me(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function je(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ct(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function vt(c,f,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(Rr&2)!==0){var F=y.pending;return F===null?f.next=f:(f.next=F.next,F.next=f),y.pending=f,f=Vu(c),Ph(c,null,m),f}return zc(c,y,f,m),Vu(c)}function ht(c,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var y=f.lanes;y&=c.pendingLanes,m|=y,f.lanes=m,On(c,m)}}function Gt(c,f){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var F=null,Q=null;if(m=m.firstBaseUpdate,m!==null){do{var le={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};Q===null?F=Q=le:Q=Q.next=le,m=m.next}while(m!==null);Q===null?F=Q=f:Q=Q.next=f}else F=Q=f;m={baseState:y.baseState,firstBaseUpdate:F,lastBaseUpdate:Q,shared:y.shared,callbacks:y.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=f}var Lt=!1;function nn(){if(Lt){var c=tc;if(c!==null)throw c}}function Qt(c,f,m,y){Lt=!1;var F=c.updateQueue;at=!1;var Q=F.firstBaseUpdate,le=F.lastBaseUpdate,we=F.shared.pending;if(we!==null){F.shared.pending=null;var Re=we,Ze=Re.next;Re.next=null,le===null?Q=Ze:le.next=Ze,le=Re;var ft=c.alternate;ft!==null&&(ft=ft.updateQueue,we=ft.lastBaseUpdate,we!==le&&(we===null?ft.firstBaseUpdate=Ze:we.next=Ze,ft.lastBaseUpdate=Re))}if(Q!==null){var wt=F.baseState;le=0,ft=Ze=Re=null,we=Q;do{var rt=we.lane&-536870913,st=rt!==we.lane;if(st?(dr&rt)===rt:(y&rt)===rt){rt!==0&&rt===Wu&&(Lt=!0),ft!==null&&(ft=ft.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var En=c,hn=we;rt=f;var zr=m;switch(hn.tag){case 1:if(En=hn.payload,typeof En=="function"){wt=En.call(zr,wt,rt);break e}wt=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=hn.payload,rt=typeof En=="function"?En.call(zr,wt,rt):En,rt==null)break e;wt=d({},wt,rt);break e;case 2:at=!0}}rt=we.callback,rt!==null&&(c.flags|=64,st&&(c.flags|=8192),st=F.callbacks,st===null?F.callbacks=[rt]:st.push(rt))}else st={lane:rt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ft===null?(Ze=ft=st,Re=wt):ft=ft.next=st,le|=rt;if(we=we.next,we===null){if(we=F.shared.pending,we===null)break;st=we,we=st.next,st.next=null,F.lastBaseUpdate=st,F.shared.pending=null}}while(!0);ft===null&&(Re=wt),F.baseState=Re,F.firstBaseUpdate=Ze,F.lastBaseUpdate=ft,Q===null&&(F.shared.lanes=0),ad|=le,c.lanes=le,c.memoizedState=wt}}function ur(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function vr(c,f){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)ur(m[c],f)}var Hn=Ae(null),Mn=Ae(0);function Tr(c,f){c=sA,W(Mn,c),W(Hn,f),sA=c|f.baseLanes}function yr(){W(Mn,sA),W(Hn,Hn.current)}function Tn(){sA=Mn.current,j(Hn),j(Mn)}var Fr=0,An=null,vn=null,cr=null,Ar=!1,ca=!1,Vs=!1,xs=0,vs=0,ks=null,co=0;function wr(){throw Error(r(321))}function Is(c,f){if(f===null)return!1;for(var m=0;m<f.length&&m<c.length;m++)if(!ia(c[m],f[m]))return!1;return!0}function Ro(c,f,m,y,F,Q){return Fr=Q,An=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,q.H=c===null||c.memoizedState===null?iT:oT,Vs=!1,Q=m(y,F),Vs=!1,ca&&(Q=$u(f,m,y,F)),Jc(c),Q}function Jc(c){q.H=u1;var f=vn!==null&&vn.next!==null;if(Fr=0,cr=vn=An=null,Ar=!1,vs=0,ks=null,f)throw Error(r(300));c===null||Ua||(c=c.dependencies,c!==null&&Vh(c)&&(Ua=!0))}function $u(c,f,m,y){An=c;var F=0;do{if(ca&&(ks=null),vs=0,ca=!1,25<=F)throw Error(r(301));if(F+=1,cr=vn=null,c.updateQueue!=null){var Q=c.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}q.H=mQ,Q=f(m,y)}while(ca);return Q}function Xc(){var c=q.H,f=c.useState()[0];return f=typeof f.then=="function"?Zc(f):f,c=c.useState()[0],(vn!==null?vn.memoizedState:null)!==c&&(An.flags|=1024),f}function Jr(){var c=xs!==0;return xs=0,c}function _f(c,f,m){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~m}function zh(c){if(Ar){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ar=!1}Fr=0,cr=vn=An=null,ca=!1,vs=xs=0,ks=null}function $a(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?An.memoizedState=cr=c:cr=cr.next=c,cr}function ns(){if(vn===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=vn.next;var f=cr===null?An.memoizedState:cr.next;if(f!==null)cr=f,vn=c;else{if(c===null)throw An.alternate===null?Error(r(467)):Error(r(310));vn=c,c={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},cr===null?An.memoizedState=cr=c:cr=cr.next=c}return cr}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(c){var f=vs;return vs+=1,ks===null&&(ks=[]),c=Ye(ks,c,f),f=An,(cr===null?f.memoizedState:cr.next)===null&&(f=f.alternate,q.H=f===null||f.memoizedState===null?iT:oT),c}function pi(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Zc(c);if(c.$$typeof===k)return Qs(c)}throw Error(r(438,String(c)))}function eu(c){var f=null,m=An.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var y=An.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(F){return F.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=Yu(),An.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(c),y=0;y<c;y++)m[y]=O;return f.index++,m}function gi(c,f){return typeof f=="function"?f(c):f}function Sf(c){var f=ns();return WA(f,vn,c)}function WA(c,f,m){var y=c.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var F=c.baseQueue,Q=y.pending;if(Q!==null){if(F!==null){var le=F.next;F.next=Q.next,Q.next=le}f.baseQueue=F=Q,y.pending=null}if(Q=c.baseState,F===null)c.memoizedState=Q;else{f=F.next;var we=le=null,Re=null,Ze=f,ft=!1;do{var wt=Ze.lane&-536870913;if(wt!==Ze.lane?(dr&wt)===wt:(Fr&wt)===wt){var rt=Ze.revertLane;if(rt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),wt===Wu&&(ft=!0);else if((Fr&rt)===rt){Ze=Ze.next,rt===Wu&&(ft=!0);continue}else wt={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Re===null?(we=Re=wt,le=Q):Re=Re.next=wt,An.lanes|=rt,ad|=rt;wt=Ze.action,Vs&&m(Q,wt),Q=Ze.hasEagerState?Ze.eagerState:m(Q,wt)}else rt={lane:wt,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Re===null?(we=Re=rt,le=Q):Re=Re.next=rt,An.lanes|=wt,ad|=wt;Ze=Ze.next}while(Ze!==null&&Ze!==f);if(Re===null?le=Q:Re.next=we,!ia(Q,c.memoizedState)&&(Ua=!0,ft&&(m=tc,m!==null)))throw m;c.memoizedState=Q,c.baseState=le,c.baseQueue=Re,y.lastRenderedState=Q}return F===null&&(y.lanes=0),[c.memoizedState,y.dispatch]}function qh(c){var f=ns(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=m.dispatch,F=m.pending,Q=f.memoizedState;if(F!==null){m.pending=null;var le=F=F.next;do Q=c(Q,le.action),le=le.next;while(le!==F);ia(Q,f.memoizedState)||(Ua=!0),f.memoizedState=Q,f.baseQueue===null&&(f.baseState=Q),m.lastRenderedState=Q}return[Q,y]}function Tf(c,f,m){var y=An,F=ns(),Q=hr;if(Q){if(m===void 0)throw Error(r(407));m=m()}else m=f();var le=!ia((vn||F).memoizedState,m);le&&(F.memoizedState=m,Ua=!0),F=F.queue;var we=$A.bind(null,y,F,c);if(XA(2048,8,we,[c]),F.getSnapshot!==f||le||cr!==null&&cr.memoizedState.tag&1){if(y.flags|=2048,rc(9,If(),Bf.bind(null,y,F,m,f),null),Xr===null)throw Error(r(349));Q||(Fr&124)!==0||Kh(y,f,m)}return m}function Kh(c,f,m){c.flags|=16384,c={getSnapshot:f,value:m},f=An.updateQueue,f===null?(f=Yu(),An.updateQueue=f,f.stores=[c]):(m=f.stores,m===null?f.stores=[c]:m.push(c))}function Bf(c,f,m,y){f.value=m,f.getSnapshot=y,Zx(f)&&e1(c)}function $A(c,f,m){return m(function(){Zx(f)&&e1(c)})}function Zx(c){var f=c.getSnapshot;c=c.value;try{var m=f();return!ia(c,m)}catch{return!0}}function e1(c){var f=Wl(c,2);f!==null&&jo(f,c,2)}function Nf(c){var f=$a();if(typeof c=="function"){var m=c;if(c=m(),Vs){Jt(!0);try{m()}finally{Jt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:c},f}function nc(c,f,m,y){return c.baseState=m,WA(c,vn,typeof y=="function"?y:gi)}function qw(c,f,m,y,F){if(c1(c))throw Error(r(485));if(c=f.action,c!==null){var Q={payload:F,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){Q.listeners.push(le)}};q.T!==null?m(!0):Q.isTransition=!1,y(Q),m=f.pending,m===null?(Q.next=f.pending=Q,t1(f,Q)):(Q.next=m.next,f.pending=m.next=Q)}}function t1(c,f){var m=f.action,y=f.payload,F=c.state;if(f.isTransition){var Q=q.T,le={};q.T=le;try{var we=m(F,y),Re=q.S;Re!==null&&Re(le,we),n1(c,f,we)}catch(Ze){YA(c,f,Ze)}finally{q.T=Q}}else try{Q=m(F,y),n1(c,f,Q)}catch(Ze){YA(c,f,Ze)}}function n1(c,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){Jm(c,f,y)},function(y){return YA(c,f,y)}):Jm(c,f,m)}function Jm(c,f,m){f.status="fulfilled",f.value=m,Xm(f),c.state=m,f=c.pending,f!==null&&(m=f.next,m===f?c.pending=null:(m=m.next,f.next=m,t1(c,m)))}function YA(c,f,m){var y=c.pending;if(c.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=m,Xm(f),f=f.next;while(f!==y)}c.action=null}function Xm(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function Zm(c,f){return f}function kf(c,f){if(hr){var m=Xr.formState;if(m!==null){e:{var y=An;if(hr){if(ds){t:{for(var F=ds,Q=fl;F.nodeType!==8;){if(!Q){F=null;break t}if(F=oc(F.nextSibling),F===null){F=null;break t}}Q=F.data,F=Q==="F!"||Q==="F"?F:null}if(F){ds=oc(F.nextSibling),y=F.data==="F!";break e}}Ku(y)}y=!1}y&&(f=m[0])}}return m=$a(),m.memoizedState=m.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zm,lastRenderedState:f},m.queue=y,m=rT.bind(null,An,y),y.dispatch=m,y=Nf(!1),Q=Kw.bind(null,An,!1,y.queue),y=$a(),F={state:f,dispatch:null,action:c,pending:null},y.queue=F,m=qw.bind(null,An,F,Q,m),F.dispatch=m,y.memoizedState=c,[f,m,!1]}function Wh(c){var f=ns();return JA(f,vn,c)}function JA(c,f,m){if(f=WA(c,f,Zm)[0],c=Sf(gi)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=Zc(f)}catch(le){throw le===he?ve:le}else y=f;f=ns();var F=f.queue,Q=F.dispatch;return m!==f.memoizedState&&(An.flags|=2048,rc(9,If(),r1.bind(null,F,m),null)),[y,Q,c]}function r1(c,f){c.action=f}function s1(c){var f=ns(),m=vn;if(m!==null)return JA(f,m,c);ns(),f=f.memoizedState,m=ns();var y=m.queue.dispatch;return m.memoizedState=c,[f,y,!1]}function rc(c,f,m,y){return c={tag:c,create:m,deps:y,inst:f,next:null},f=An.updateQueue,f===null&&(f=Yu(),An.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,f.lastEffect=c),c}function If(){return{destroy:void 0,resource:void 0}}function $h(){return ns().memoizedState}function Do(c,f,m,y){var F=$a();y=y===void 0?null:y,An.flags|=c,F.memoizedState=rc(1|f,If(),m,y)}function XA(c,f,m,y){var F=ns();y=y===void 0?null:y;var Q=F.memoizedState.inst;vn!==null&&y!==null&&Is(y,vn.memoizedState.deps)?F.memoizedState=rc(f,Q,m,y):(An.flags|=c,F.memoizedState=rc(1|f,Q,m,y))}function ep(c,f){Do(8390656,8,c,f)}function a1(c,f){XA(2048,8,c,f)}function tp(c,f){return XA(4,2,c,f)}function Ju(c,f){return XA(4,4,c,f)}function i1(c,f){if(typeof f=="function"){c=c();var m=f(c);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function np(c,f,m){m=m!=null?m.concat([c]):null,XA(4,4,i1.bind(null,f,c),m)}function rp(){}function sp(c,f){var m=ns();f=f===void 0?null:f;var y=m.memoizedState;return f!==null&&Is(f,y[1])?y[0]:(m.memoizedState=[c,f],c)}function o1(c,f){var m=ns();f=f===void 0?null:f;var y=m.memoizedState;if(f!==null&&Is(f,y[1]))return y[0];if(y=c(),Vs){Jt(!0);try{c()}finally{Jt(!1)}}return m.memoizedState=[y,f],y}function Xu(c,f,m){return m===void 0||(Fr&1073741824)!==0?c.memoizedState=f:(c.memoizedState=m,c=ZT(),An.lanes|=c,ad|=c,m)}function Yh(c,f,m,y){return ia(m,f)?m:Hn.current!==null?(c=Xu(c,m,y),ia(c,f)||(Ua=!0),c):(Fr&42)===0?(Ua=!0,c.memoizedState=m):(c=ZT(),An.lanes|=c,ad|=c,f)}function Ff(c,f,m,y,F){var Q=X.p;X.p=Q!==0&&8>Q?Q:8;var le=q.T,we={};q.T=we,Kw(c,!1,f,m);try{var Re=F(),Ze=q.S;if(Ze!==null&&Ze(we,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var ft=Xx(Re,y);lp(c,f,ft,Po(c))}else lp(c,f,y,Po(c))}catch(wt){lp(c,f,{then:function(){},status:"rejected",reason:wt},Po())}finally{X.p=Q,q.T=le}}function sc(){}function gl(c,f,m,y){if(c.tag!==5)throw Error(r(476));var F=ac(c).queue;Ff(c,F,f,re,m===null?sc:function(){return Rf(c),m(y)})}function ac(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:re},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:m},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Rf(c){var f=ac(c).next.queue;lp(c,f,{},Po())}function Df(){return Qs(Sp)}function ap(){return ns().memoizedState}function l1(){return ns().memoizedState}function ip(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var m=Po();c=ct(m);var y=vt(f,c,m);y!==null&&(jo(y,f,m),ht(y,f,m)),f={cache:$m()},c.payload=f;return}f=f.return}}function op(c,f,m){var y=Po();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},c1(c)?sT(f,m):(m=qc(c,f,m,y),m!==null&&(jo(m,c,y),aT(m,f,y)))}function rT(c,f,m){var y=Po();lp(c,f,m,y)}function lp(c,f,m,y){var F={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(c1(c))sT(f,F);else{var Q=c.alternate;if(c.lanes===0&&(Q===null||Q.lanes===0)&&(Q=f.lastRenderedReducer,Q!==null))try{var le=f.lastRenderedState,we=Q(le,m);if(F.hasEagerState=!0,F.eagerState=we,ia(we,le))return zc(c,f,F,0),Xr===null&&io(),!1}catch{}finally{}if(m=qc(c,f,F,y),m!==null)return jo(m,c,y),aT(m,f,y),!0}return!1}function Kw(c,f,m,y){if(y={lane:2,revertLane:_b(),action:y,hasEagerState:!1,eagerState:null,next:null},c1(c)){if(f)throw Error(r(479))}else f=qc(c,m,y,2),f!==null&&jo(f,c,2)}function c1(c){var f=c.alternate;return c===An||f!==null&&f===An}function sT(c,f){ca=Ar=!0;var m=c.pending;m===null?f.next=f:(f.next=m.next,m.next=f),c.pending=f}function aT(c,f,m){if((m&4194048)!==0){var y=f.lanes;y&=c.pendingLanes,m|=y,f.lanes=m,On(c,m)}}var u1={readContext:Qs,use:pi,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useLayoutEffect:wr,useInsertionEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useSyncExternalStore:wr,useId:wr,useHostTransitionStatus:wr,useFormState:wr,useActionState:wr,useOptimistic:wr,useMemoCache:wr,useCacheRefresh:wr},iT={readContext:Qs,use:pi,useCallback:function(c,f){return $a().memoizedState=[c,f===void 0?null:f],c},useContext:Qs,useEffect:ep,useImperativeHandle:function(c,f,m){m=m!=null?m.concat([c]):null,Do(4194308,4,i1.bind(null,f,c),m)},useLayoutEffect:function(c,f){return Do(4194308,4,c,f)},useInsertionEffect:function(c,f){Do(4,2,c,f)},useMemo:function(c,f){var m=$a();f=f===void 0?null:f;var y=c();if(Vs){Jt(!0);try{c()}finally{Jt(!1)}}return m.memoizedState=[y,f],y},useReducer:function(c,f,m){var y=$a();if(m!==void 0){var F=m(f);if(Vs){Jt(!0);try{m(f)}finally{Jt(!1)}}}else F=f;return y.memoizedState=y.baseState=F,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:F},y.queue=c,c=c.dispatch=op.bind(null,An,c),[y.memoizedState,c]},useRef:function(c){var f=$a();return c={current:c},f.memoizedState=c},useState:function(c){c=Nf(c);var f=c.queue,m=rT.bind(null,An,f);return f.dispatch=m,[c.memoizedState,m]},useDebugValue:rp,useDeferredValue:function(c,f){var m=$a();return Xu(m,c,f)},useTransition:function(){var c=Nf(!1);return c=Ff.bind(null,An,c.queue,!0,!1),$a().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,m){var y=An,F=$a();if(hr){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),Xr===null)throw Error(r(349));(dr&124)!==0||Kh(y,f,m)}F.memoizedState=m;var Q={value:m,getSnapshot:f};return F.queue=Q,ep($A.bind(null,y,Q,c),[c]),y.flags|=2048,rc(9,If(),Bf.bind(null,y,Q,m,f),null),m},useId:function(){var c=$a(),f=Xr.identifierPrefix;if(hr){var m=Xl,y=Jl;m=(y&~(1<<32-Pt(y)-1)).toString(32)+m,f="«"+f+"R"+m,m=xs++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=co++,f="«"+f+"r"+m.toString(32)+"»";return c.memoizedState=f},useHostTransitionStatus:Df,useFormState:kf,useActionState:kf,useOptimistic:function(c){var f=$a();f.memoizedState=f.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=Kw.bind(null,An,!0,m),m.dispatch=f,[c,f]},useMemoCache:eu,useCacheRefresh:function(){return $a().memoizedState=ip.bind(null,An)}},oT={readContext:Qs,use:pi,useCallback:sp,useContext:Qs,useEffect:a1,useImperativeHandle:np,useInsertionEffect:tp,useLayoutEffect:Ju,useMemo:o1,useReducer:Sf,useRef:$h,useState:function(){return Sf(gi)},useDebugValue:rp,useDeferredValue:function(c,f){var m=ns();return Yh(m,vn.memoizedState,c,f)},useTransition:function(){var c=Sf(gi)[0],f=ns().memoizedState;return[typeof c=="boolean"?c:Zc(c),f]},useSyncExternalStore:Tf,useId:ap,useHostTransitionStatus:Df,useFormState:Wh,useActionState:Wh,useOptimistic:function(c,f){var m=ns();return nc(m,vn,c,f)},useMemoCache:eu,useCacheRefresh:l1},mQ={readContext:Qs,use:pi,useCallback:sp,useContext:Qs,useEffect:a1,useImperativeHandle:np,useInsertionEffect:tp,useLayoutEffect:Ju,useMemo:o1,useReducer:qh,useRef:$h,useState:function(){return qh(gi)},useDebugValue:rp,useDeferredValue:function(c,f){var m=ns();return vn===null?Xu(m,c,f):Yh(m,vn.memoizedState,c,f)},useTransition:function(){var c=qh(gi)[0],f=ns().memoizedState;return[typeof c=="boolean"?c:Zc(c),f]},useSyncExternalStore:Tf,useId:ap,useHostTransitionStatus:Df,useFormState:s1,useActionState:s1,useOptimistic:function(c,f){var m=ns();return vn!==null?nc(m,vn,c,f):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:eu,useCacheRefresh:l1},Jh=null,cp=0;function A1(c){var f=cp;return cp+=1,Jh===null&&(Jh=[]),Ye(Jh,c,f)}function up(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function d1(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function lT(c){var f=c._init;return f(c._payload)}function cT(c){function f(ze,Pe){if(c){var $e=ze.deletions;$e===null?(ze.deletions=[Pe],ze.flags|=16):$e.push(Pe)}}function m(ze,Pe){if(!c)return null;for(;Pe!==null;)f(ze,Pe),Pe=Pe.sibling;return null}function y(ze){for(var Pe=new Map;ze!==null;)ze.key!==null?Pe.set(ze.key,ze):Pe.set(ze.index,ze),ze=ze.sibling;return Pe}function F(ze,Pe){return ze=dl(ze,Pe),ze.index=0,ze.sibling=null,ze}function Q(ze,Pe,$e){return ze.index=$e,c?($e=ze.alternate,$e!==null?($e=$e.index,$e<Pe?(ze.flags|=67108866,Pe):$e):(ze.flags|=67108866,Pe)):(ze.flags|=1048576,Pe)}function le(ze){return c&&ze.alternate===null&&(ze.flags|=67108866),ze}function we(ze,Pe,$e,mt){return Pe===null||Pe.tag!==6?(Pe=jh($e,ze.mode,mt),Pe.return=ze,Pe):(Pe=F(Pe,$e),Pe.return=ze,Pe)}function Re(ze,Pe,$e,mt){var Xt=$e.type;return Xt===b?ft(ze,Pe,$e.props.children,mt,$e.key):Pe!==null&&(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===N&&lT(Xt)===Pe.type)?(Pe=F(Pe,$e.props),up(Pe,$e),Pe.return=ze,Pe):(Pe=Gu($e.type,$e.key,$e.props,null,ze.mode,mt),up(Pe,$e),Pe.return=ze,Pe)}function Ze(ze,Pe,$e,mt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==$e.containerInfo||Pe.stateNode.implementation!==$e.implementation?(Pe=yf($e,ze.mode,mt),Pe.return=ze,Pe):(Pe=F(Pe,$e.children||[]),Pe.return=ze,Pe)}function ft(ze,Pe,$e,mt,Xt){return Pe===null||Pe.tag!==7?(Pe=$l($e,ze.mode,mt,Xt),Pe.return=ze,Pe):(Pe=F(Pe,$e),Pe.return=ze,Pe)}function wt(ze,Pe,$e){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=jh(""+Pe,ze.mode,$e),Pe.return=ze,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case p:return $e=Gu(Pe.type,Pe.key,Pe.props,null,ze.mode,$e),up($e,Pe),$e.return=ze,$e;case g:return Pe=yf(Pe,ze.mode,$e),Pe.return=ze,Pe;case N:var mt=Pe._init;return Pe=mt(Pe._payload),wt(ze,Pe,$e)}if(oe(Pe)||L(Pe))return Pe=$l(Pe,ze.mode,$e,null),Pe.return=ze,Pe;if(typeof Pe.then=="function")return wt(ze,A1(Pe),$e);if(Pe.$$typeof===k)return wt(ze,Yc(ze,Pe),$e);d1(ze,Pe)}return null}function rt(ze,Pe,$e,mt){var Xt=Pe!==null?Pe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Xt!==null?null:we(ze,Pe,""+$e,mt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:return $e.key===Xt?Re(ze,Pe,$e,mt):null;case g:return $e.key===Xt?Ze(ze,Pe,$e,mt):null;case N:return Xt=$e._init,$e=Xt($e._payload),rt(ze,Pe,$e,mt)}if(oe($e)||L($e))return Xt!==null?null:ft(ze,Pe,$e,mt,null);if(typeof $e.then=="function")return rt(ze,Pe,A1($e),mt);if($e.$$typeof===k)return rt(ze,Pe,Yc(ze,$e),mt);d1(ze,$e)}return null}function st(ze,Pe,$e,mt,Xt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return ze=ze.get($e)||null,we(Pe,ze,""+mt,Xt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case p:return ze=ze.get(mt.key===null?$e:mt.key)||null,Re(Pe,ze,mt,Xt);case g:return ze=ze.get(mt.key===null?$e:mt.key)||null,Ze(Pe,ze,mt,Xt);case N:var $n=mt._init;return mt=$n(mt._payload),st(ze,Pe,$e,mt,Xt)}if(oe(mt)||L(mt))return ze=ze.get($e)||null,ft(Pe,ze,mt,Xt,null);if(typeof mt.then=="function")return st(ze,Pe,$e,A1(mt),Xt);if(mt.$$typeof===k)return st(ze,Pe,$e,Yc(Pe,mt),Xt);d1(Pe,mt)}return null}function En(ze,Pe,$e,mt){for(var Xt=null,$n=null,sn=Pe,pn=Pe=0,Ma=null;sn!==null&&pn<$e.length;pn++){sn.index>pn?(Ma=sn,sn=null):Ma=sn.sibling;var br=rt(ze,sn,$e[pn],mt);if(br===null){sn===null&&(sn=Ma);break}c&&sn&&br.alternate===null&&f(ze,sn),Pe=Q(br,Pe,pn),$n===null?Xt=br:$n.sibling=br,$n=br,sn=Ma}if(pn===$e.length)return m(ze,sn),hr&&qu(ze,pn),Xt;if(sn===null){for(;pn<$e.length;pn++)sn=wt(ze,$e[pn],mt),sn!==null&&(Pe=Q(sn,Pe,pn),$n===null?Xt=sn:$n.sibling=sn,$n=sn);return hr&&qu(ze,pn),Xt}for(sn=y(sn);pn<$e.length;pn++)Ma=st(sn,ze,pn,$e[pn],mt),Ma!==null&&(c&&Ma.alternate!==null&&sn.delete(Ma.key===null?pn:Ma.key),Pe=Q(Ma,Pe,pn),$n===null?Xt=Ma:$n.sibling=Ma,$n=Ma);return c&&sn.forEach(function(hd){return f(ze,hd)}),hr&&qu(ze,pn),Xt}function hn(ze,Pe,$e,mt){if($e==null)throw Error(r(151));for(var Xt=null,$n=null,sn=Pe,pn=Pe=0,Ma=null,br=$e.next();sn!==null&&!br.done;pn++,br=$e.next()){sn.index>pn?(Ma=sn,sn=null):Ma=sn.sibling;var hd=rt(ze,sn,br.value,mt);if(hd===null){sn===null&&(sn=Ma);break}c&&sn&&hd.alternate===null&&f(ze,sn),Pe=Q(hd,Pe,pn),$n===null?Xt=hd:$n.sibling=hd,$n=hd,sn=Ma}if(br.done)return m(ze,sn),hr&&qu(ze,pn),Xt;if(sn===null){for(;!br.done;pn++,br=$e.next())br=wt(ze,br.value,mt),br!==null&&(Pe=Q(br,Pe,pn),$n===null?Xt=br:$n.sibling=br,$n=br);return hr&&qu(ze,pn),Xt}for(sn=y(sn);!br.done;pn++,br=$e.next())br=st(sn,ze,pn,br.value,mt),br!==null&&(c&&br.alternate!==null&&sn.delete(br.key===null?pn:br.key),Pe=Q(br,Pe,pn),$n===null?Xt=br:$n.sibling=br,$n=br);return c&&sn.forEach(function(p9){return f(ze,p9)}),hr&&qu(ze,pn),Xt}function zr(ze,Pe,$e,mt){if(typeof $e=="object"&&$e!==null&&$e.type===b&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:e:{for(var Xt=$e.key;Pe!==null;){if(Pe.key===Xt){if(Xt=$e.type,Xt===b){if(Pe.tag===7){m(ze,Pe.sibling),mt=F(Pe,$e.props.children),mt.return=ze,ze=mt;break e}}else if(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===N&&lT(Xt)===Pe.type){m(ze,Pe.sibling),mt=F(Pe,$e.props),up(mt,$e),mt.return=ze,ze=mt;break e}m(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}$e.type===b?(mt=$l($e.props.children,ze.mode,mt,$e.key),mt.return=ze,ze=mt):(mt=Gu($e.type,$e.key,$e.props,null,ze.mode,mt),up(mt,$e),mt.return=ze,ze=mt)}return le(ze);case g:e:{for(Xt=$e.key;Pe!==null;){if(Pe.key===Xt)if(Pe.tag===4&&Pe.stateNode.containerInfo===$e.containerInfo&&Pe.stateNode.implementation===$e.implementation){m(ze,Pe.sibling),mt=F(Pe,$e.children||[]),mt.return=ze,ze=mt;break e}else{m(ze,Pe);break}else f(ze,Pe);Pe=Pe.sibling}mt=yf($e,ze.mode,mt),mt.return=ze,ze=mt}return le(ze);case N:return Xt=$e._init,$e=Xt($e._payload),zr(ze,Pe,$e,mt)}if(oe($e))return En(ze,Pe,$e,mt);if(L($e)){if(Xt=L($e),typeof Xt!="function")throw Error(r(150));return $e=Xt.call($e),hn(ze,Pe,$e,mt)}if(typeof $e.then=="function")return zr(ze,Pe,A1($e),mt);if($e.$$typeof===k)return zr(ze,Pe,Yc(ze,$e),mt);d1(ze,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Pe!==null&&Pe.tag===6?(m(ze,Pe.sibling),mt=F(Pe,$e),mt.return=ze,ze=mt):(m(ze,Pe),mt=jh($e,ze.mode,mt),mt.return=ze,ze=mt),le(ze)):m(ze,Pe)}return function(ze,Pe,$e,mt){try{cp=0;var Xt=zr(ze,Pe,$e,mt);return Jh=null,Xt}catch(sn){if(sn===he||sn===ve)throw sn;var $n=Da(29,sn,null,ze.mode);return $n.lanes=mt,$n.return=ze,$n}finally{}}}var Xh=cT(!0),uT=cT(!1),xl=Ae(null),tu=null;function ZA(c){var f=c.alternate;W(Ea,Ea.current&1),W(xl,c),tu===null&&(f===null||Hn.current!==null||f.memoizedState!==null)&&(tu=c)}function AT(c){if(c.tag===22){if(W(Ea,Ea.current),W(xl,c),tu===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(tu=c)}}else ed()}function ed(){W(Ea,Ea.current),W(xl,xl.current)}function Zu(c){j(xl),tu===c&&(tu=null),j(Ea)}var Ea=Ae(0);function f1(c){for(var f=c;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Mb(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Ww(c,f,m,y){f=c.memoizedState,m=m(y,f),m=m==null?f:d({},f,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var $w={enqueueSetState:function(c,f,m){c=c._reactInternals;var y=Po(),F=ct(y);F.payload=f,m!=null&&(F.callback=m),f=vt(c,F,y),f!==null&&(jo(f,c,y),ht(f,c,y))},enqueueReplaceState:function(c,f,m){c=c._reactInternals;var y=Po(),F=ct(y);F.tag=1,F.payload=f,m!=null&&(F.callback=m),f=vt(c,F,y),f!==null&&(jo(f,c,y),ht(f,c,y))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var m=Po(),y=ct(m);y.tag=2,f!=null&&(y.callback=f),f=vt(c,y,m),f!==null&&(jo(f,c,m),ht(f,c,m))}};function dT(c,f,m,y,F,Q,le){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,Q,le):f.prototype&&f.prototype.isPureReactComponent?!Pc(m,y)||!Pc(F,Q):!0}function fT(c,f,m,y){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,y),f.state!==c&&$w.enqueueReplaceState(f,f.state,null)}function Uf(c,f){var m=f;if("ref"in f){m={};for(var y in f)y!=="ref"&&(m[y]=f[y])}if(c=c.defaultProps){m===f&&(m=d({},m));for(var F in c)m[F]===void 0&&(m[F]=c[F])}return m}var h1=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function hT(c){h1(c)}function mT(c){console.error(c)}function pT(c){h1(c)}function m1(c,f){try{var m=c.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function gT(c,f,m){try{var y=c.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function Yw(c,f,m){return m=ct(m),m.tag=3,m.payload={element:null},m.callback=function(){m1(c,f)},m}function xT(c){return c=ct(c),c.tag=3,c}function vT(c,f,m,y){var F=m.type.getDerivedStateFromError;if(typeof F=="function"){var Q=y.value;c.payload=function(){return F(Q)},c.callback=function(){gT(f,m,y)}}var le=m.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(c.callback=function(){gT(f,m,y),typeof F!="function"&&(id===null?id=new Set([this]):id.add(this));var we=y.stack;this.componentDidCatch(y.value,{componentStack:we!==null?we:""})})}function pQ(c,f,m,y,F){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=m.alternate,f!==null&&KA(f,m,F,!0),m=xl.current,m!==null){switch(m.tag){case 13:return tu===null?yb():m.alternate===null&&Fs===0&&(Fs=3),m.flags&=-257,m.flags|=65536,m.lanes=F,y===be?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([y]):f.add(y),bb(c,y,F)),!1;case 22:return m.flags|=65536,y===be?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([y]):m.add(y)),bb(c,y,F)),!1}throw Error(r(435,m.tag))}return bb(c,y,F),yb(),!1}if(hr)return f=xl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=F,y!==Wm&&(c=Error(r(422),{cause:y}),qA(Vn(c,m)))):(y!==Wm&&(f=Error(r(423),{cause:y}),qA(Vn(f,m))),c=c.current.alternate,c.flags|=65536,F&=-F,c.lanes|=F,y=Vn(y,m),F=Yw(c.stateNode,y,F),Gt(c,F),Fs!==4&&(Fs=2)),!1;var Q=Error(r(520),{cause:y});if(Q=Vn(Q,m),gp===null?gp=[Q]:gp.push(Q),Fs!==4&&(Fs=2),f===null)return!0;y=Vn(y,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,c=F&-F,m.lanes|=c,c=Yw(m.stateNode,y,c),Gt(m,c),!1;case 1:if(f=m.type,Q=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(id===null||!id.has(Q))))return m.flags|=65536,F&=-F,m.lanes|=F,F=xT(F),vT(F,c,m,y),Gt(m,F),!1}m=m.return}while(m!==null);return!1}var yT=Error(r(461)),Ua=!1;function Ya(c,f,m,y){f.child=c===null?uT(f,null,m,y):Xh(f,c.child,m,y)}function wT(c,f,m,y,F){m=m.render;var Q=f.ref;if("ref"in y){var le={};for(var we in y)we!=="ref"&&(le[we]=y[we])}else le=y;return pl(f),y=Ro(c,f,m,le,Q,F),we=Jr(),c!==null&&!Ua?(_f(c,f,F),eA(c,f,F)):(hr&&we&&wf(f),f.flags|=1,Ya(c,f,y,F),f.child)}function bT(c,f,m,y,F){if(c===null){var Q=m.type;return typeof Q=="function"&&!GA(Q)&&Q.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=Q,CT(c,f,Q,y,F)):(c=Gu(m.type,null,y,f,f.mode,F),c.ref=f.ref,c.return=f,f.child=c)}if(Q=c.child,!sb(c,F)){var le=Q.memoizedProps;if(m=m.compare,m=m!==null?m:Pc,m(le,y)&&c.ref===f.ref)return eA(c,f,F)}return f.flags|=1,c=dl(Q,y),c.ref=f.ref,c.return=f,f.child=c}function CT(c,f,m,y,F){if(c!==null){var Q=c.memoizedProps;if(Pc(Q,y)&&c.ref===f.ref)if(Ua=!1,f.pendingProps=y=Q,sb(c,F))(c.flags&131072)!==0&&(Ua=!0);else return f.lanes=c.lanes,eA(c,f,F)}return Jw(c,f,m,y,F)}function ET(c,f,m){var y=f.pendingProps,F=y.children,Q=c!==null?c.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=Q!==null?Q.baseLanes|m:m,c!==null){for(F=f.child=c.child,Q=0;F!==null;)Q=Q|F.lanes|F.childLanes,F=F.sibling;f.childLanes=Q&~y}else f.childLanes=0,f.child=null;return _T(c,f,y,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&te(f,Q!==null?Q.cachePool:null),Q!==null?Tr(f,Q):yr(),AT(f);else return f.lanes=f.childLanes=536870912,_T(c,f,Q!==null?Q.baseLanes|m:m,m)}else Q!==null?(te(f,Q.cachePool),Tr(f,Q),ed(),f.memoizedState=null):(c!==null&&te(f,null),yr(),ed());return Ya(c,f,F,m),f.child}function _T(c,f,m,y){var F=z();return F=F===null?null:{parent:Hs._currentValue,pool:F},f.memoizedState={baseLanes:m,cachePool:F},c!==null&&te(f,null),yr(),AT(f),c!==null&&KA(c,f,y,!0),null}function p1(c,f){var m=f.ref;if(m===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(f.flags|=4194816)}}function Jw(c,f,m,y,F){return pl(f),m=Ro(c,f,m,y,void 0,F),y=Jr(),c!==null&&!Ua?(_f(c,f,F),eA(c,f,F)):(hr&&y&&wf(f),f.flags|=1,Ya(c,f,m,F),f.child)}function ST(c,f,m,y,F,Q){return pl(f),f.updateQueue=null,m=$u(f,y,m,F),Jc(c),y=Jr(),c!==null&&!Ua?(_f(c,f,Q),eA(c,f,Q)):(hr&&y&&wf(f),f.flags|=1,Ya(c,f,m,Q),f.child)}function TT(c,f,m,y,F){if(pl(f),f.stateNode===null){var Q=oa,le=m.contextType;typeof le=="object"&&le!==null&&(Q=Qs(le)),Q=new m(y,Q),f.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=$w,f.stateNode=Q,Q._reactInternals=f,Q=f.stateNode,Q.props=y,Q.state=f.memoizedState,Q.refs={},Me(f),le=m.contextType,Q.context=typeof le=="object"&&le!==null?Qs(le):oa,Q.state=f.memoizedState,le=m.getDerivedStateFromProps,typeof le=="function"&&(Ww(f,m,le,y),Q.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(le=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),le!==Q.state&&$w.enqueueReplaceState(Q,Q.state,null),Qt(f,y,Q,F),nn(),Q.state=f.memoizedState),typeof Q.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(c===null){Q=f.stateNode;var we=f.memoizedProps,Re=Uf(m,we);Q.props=Re;var Ze=Q.context,ft=m.contextType;le=oa,typeof ft=="object"&&ft!==null&&(le=Qs(ft));var wt=m.getDerivedStateFromProps;ft=typeof wt=="function"||typeof Q.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,ft||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(we||Ze!==le)&&fT(f,Q,y,le),at=!1;var rt=f.memoizedState;Q.state=rt,Qt(f,y,Q,F),nn(),Ze=f.memoizedState,we||rt!==Ze||at?(typeof wt=="function"&&(Ww(f,m,wt,y),Ze=f.memoizedState),(Re=at||dT(f,m,Re,y,rt,Ze,le))?(ft||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=Ze),Q.props=y,Q.state=Ze,Q.context=le,y=Re):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{Q=f.stateNode,je(c,f),le=f.memoizedProps,ft=Uf(m,le),Q.props=ft,wt=f.pendingProps,rt=Q.context,Ze=m.contextType,Re=oa,typeof Ze=="object"&&Ze!==null&&(Re=Qs(Ze)),we=m.getDerivedStateFromProps,(Ze=typeof we=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(le!==wt||rt!==Re)&&fT(f,Q,y,Re),at=!1,rt=f.memoizedState,Q.state=rt,Qt(f,y,Q,F),nn();var st=f.memoizedState;le!==wt||rt!==st||at||c!==null&&c.dependencies!==null&&Vh(c.dependencies)?(typeof we=="function"&&(Ww(f,m,we,y),st=f.memoizedState),(ft=at||dT(f,m,ft,y,rt,st,Re)||c!==null&&c.dependencies!==null&&Vh(c.dependencies))?(Ze||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(y,st,Re),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(y,st,Re)),typeof Q.componentDidUpdate=="function"&&(f.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Q.componentDidUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=st),Q.props=y,Q.state=st,Q.context=Re,y=ft):(typeof Q.componentDidUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),y=!1)}return Q=y,p1(c,f),y=(f.flags&128)!==0,Q||y?(Q=f.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:Q.render(),f.flags|=1,c!==null&&y?(f.child=Xh(f,c.child,null,F),f.child=Xh(f,null,m,F)):Ya(c,f,m,F),f.memoizedState=Q.state,c=f.child):c=eA(c,f,F),c}function BT(c,f,m,y){return Vi(),f.flags|=256,Ya(c,f,m,y),f.child}var Xw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zw(c){return{baseLanes:c,cachePool:ce()}}function eb(c,f,m){return c=c!==null?c.childLanes&~m:0,f&&(c|=vl),c}function NT(c,f,m){var y=f.pendingProps,F=!1,Q=(f.flags&128)!==0,le;if((le=Q)||(le=c!==null&&c.memoizedState===null?!1:(Ea.current&2)!==0),le&&(F=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,c===null){if(hr){if(F?ZA(f):ed(),hr){var we=ds,Re;if(Re=we){e:{for(Re=we,we=fl;Re.nodeType!==8;){if(!we){we=null;break e}if(Re=oc(Re.nextSibling),Re===null){we=null;break e}}we=Re}we!==null?(f.memoizedState={dehydrated:we,treeContext:zu!==null?{id:Jl,overflow:Xl}:null,retryLane:536870912,hydrationErrors:null},Re=Da(18,null,null,0),Re.stateNode=we,Re.return=f,f.child=Re,Os=f,ds=null,Re=!0):Re=!1}Re||Ku(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return Mb(we)?f.lanes=32:f.lanes=536870912,null;Zu(f)}return we=y.children,y=y.fallback,F?(ed(),F=f.mode,we=g1({mode:"hidden",children:we},F),y=$l(y,F,m,null),we.return=f,y.return=f,we.sibling=y,f.child=we,F=f.child,F.memoizedState=Zw(m),F.childLanes=eb(c,le,m),f.memoizedState=Xw,y):(ZA(f),tb(f,we))}if(Re=c.memoizedState,Re!==null&&(we=Re.dehydrated,we!==null)){if(Q)f.flags&256?(ZA(f),f.flags&=-257,f=nb(c,f,m)):f.memoizedState!==null?(ed(),f.child=c.child,f.flags|=128,f=null):(ed(),F=y.fallback,we=f.mode,y=g1({mode:"visible",children:y.children},we),F=$l(F,we,m,null),F.flags|=2,y.return=f,F.return=f,y.sibling=F,f.child=y,Xh(f,c.child,null,m),y=f.child,y.memoizedState=Zw(m),y.childLanes=eb(c,le,m),f.memoizedState=Xw,f=F);else if(ZA(f),Mb(we)){if(le=we.nextSibling&&we.nextSibling.dataset,le)var Ze=le.dgst;le=Ze,y=Error(r(419)),y.stack="",y.digest=le,qA({value:y,source:null,stack:null}),f=nb(c,f,m)}else if(Ua||KA(c,f,m,!1),le=(m&c.childLanes)!==0,Ua||le){if(le=Xr,le!==null&&(y=m&-m,y=(y&42)!==0?1:ra(y),y=(y&(le.suspendedLanes|m))!==0?0:y,y!==0&&y!==Re.retryLane))throw Re.retryLane=y,Wl(c,y),jo(le,c,y),yT;we.data==="$?"||yb(),f=nb(c,f,m)}else we.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=Re.treeContext,ds=oc(we.nextSibling),Os=f,hr=!0,Wc=null,fl=!1,c!==null&&(lo[Hi++]=Jl,lo[Hi++]=Xl,lo[Hi++]=zu,Jl=c.id,Xl=c.overflow,zu=f),f=tb(f,y.children),f.flags|=4096);return f}return F?(ed(),F=y.fallback,we=f.mode,Re=c.child,Ze=Re.sibling,y=dl(Re,{mode:"hidden",children:y.children}),y.subtreeFlags=Re.subtreeFlags&65011712,Ze!==null?F=dl(Ze,F):(F=$l(F,we,m,null),F.flags|=2),F.return=f,y.return=f,y.sibling=F,f.child=y,y=F,F=f.child,we=c.child.memoizedState,we===null?we=Zw(m):(Re=we.cachePool,Re!==null?(Ze=Hs._currentValue,Re=Re.parent!==Ze?{parent:Ze,pool:Ze}:Re):Re=ce(),we={baseLanes:we.baseLanes|m,cachePool:Re}),F.memoizedState=we,F.childLanes=eb(c,le,m),f.memoizedState=Xw,y):(ZA(f),m=c.child,c=m.sibling,m=dl(m,{mode:"visible",children:y.children}),m.return=f,m.sibling=null,c!==null&&(le=f.deletions,le===null?(f.deletions=[c],f.flags|=16):le.push(c)),f.child=m,f.memoizedState=null,m)}function tb(c,f){return f=g1({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function g1(c,f){return c=Da(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function nb(c,f,m){return Xh(f,c.child,null,m),c=tb(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function kT(c,f,m){c.lanes|=f;var y=c.alternate;y!==null&&(y.lanes|=f),Qh(c.return,f,m)}function rb(c,f,m,y,F){var Q=c.memoizedState;Q===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:F}:(Q.isBackwards=f,Q.rendering=null,Q.renderingStartTime=0,Q.last=y,Q.tail=m,Q.tailMode=F)}function IT(c,f,m){var y=f.pendingProps,F=y.revealOrder,Q=y.tail;if(Ya(c,f,y.children,m),y=Ea.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&kT(c,m,f);else if(c.tag===19)kT(c,m,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}switch(W(Ea,y),F){case"forwards":for(m=f.child,F=null;m!==null;)c=m.alternate,c!==null&&f1(c)===null&&(F=m),m=m.sibling;m=F,m===null?(F=f.child,f.child=null):(F=m.sibling,m.sibling=null),rb(f,!1,F,m,Q);break;case"backwards":for(m=null,F=f.child,f.child=null;F!==null;){if(c=F.alternate,c!==null&&f1(c)===null){f.child=F;break}c=F.sibling,F.sibling=m,m=F,F=c}rb(f,!0,m,null,Q);break;case"together":rb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function eA(c,f,m){if(c!==null&&(f.dependencies=c.dependencies),ad|=f.lanes,(m&f.childLanes)===0)if(c!==null){if(KA(c,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,m=dl(c,c.pendingProps),f.child=m,m.return=f;c.sibling!==null;)c=c.sibling,m=m.sibling=dl(c,c.pendingProps),m.return=f;m.sibling=null}return f.child}function sb(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Vh(c)))}function gQ(c,f,m){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),$c(f,Hs,c.memoizedState.cache),Vi();break;case 27:case 5:Se(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:$c(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(ZA(f),f.flags|=128,null):(m&f.child.childLanes)!==0?NT(c,f,m):(ZA(f),c=eA(c,f,m),c!==null?c.sibling:null);ZA(f);break;case 19:var F=(c.flags&128)!==0;if(y=(m&f.childLanes)!==0,y||(KA(c,f,m,!1),y=(m&f.childLanes)!==0),F){if(y)return IT(c,f,m);f.flags|=128}if(F=f.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),W(Ea,Ea.current),y)break;return null;case 22:case 23:return f.lanes=0,ET(c,f,m);case 24:$c(f,Hs,c.memoizedState.cache)}return eA(c,f,m)}function FT(c,f,m){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ua=!0;else{if(!sb(c,m)&&(f.flags&128)===0)return Ua=!1,gQ(c,f,m);Ua=(c.flags&131072)!==0}else Ua=!1,hr&&(f.flags&1048576)!==0&&Kx(f,Oh,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var y=f.elementType,F=y._init;if(y=F(y._payload),f.type=y,typeof y=="function")GA(y)?(c=Uf(y,c),f.tag=1,f=TT(null,f,y,c,m)):(f.tag=0,f=Jw(null,f,y,c,m));else{if(y!=null){if(F=y.$$typeof,F===R){f.tag=11,f=wT(null,f,y,c,m);break e}else if(F===_){f.tag=14,f=bT(null,f,y,c,m);break e}}throw f=G(y)||y,Error(r(306,f,""))}}return f;case 0:return Jw(c,f,f.type,f.pendingProps,m);case 1:return y=f.type,F=Uf(y,f.pendingProps),TT(c,f,y,F,m);case 3:e:{if(me(f,f.stateNode.containerInfo),c===null)throw Error(r(387));y=f.pendingProps;var Q=f.memoizedState;F=Q.element,je(c,f),Qt(f,y,null,m);var le=f.memoizedState;if(y=le.cache,$c(f,Hs,y),y!==Q.cache&&Hh(f,[Hs],m,!0),nn(),y=le.element,Q.isDehydrated)if(Q={element:y,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=Q,f.memoizedState=Q,f.flags&256){f=BT(c,f,y,m);break e}else if(y!==F){F=Vn(Error(r(424)),f),qA(F),f=BT(c,f,y,m);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(ds=oc(c.firstChild),Os=f,hr=!0,Wc=null,fl=!0,m=uT(f,null,y,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Vi(),y===F){f=eA(c,f,m);break e}Ya(c,f,y,m)}f=f.child}return f;case 26:return p1(c,f),c===null?(m=LB(f.type,null,f.pendingProps,null))?f.memoizedState=m:hr||(m=f.type,c=f.pendingProps,y=I1(ie.current).createElement(m),y[or]=f,y[Zn]=c,Xa(y,m,c),Qe(y),f.stateNode=y):f.memoizedState=LB(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Se(f),c===null&&hr&&(y=f.stateNode=RB(f.type,f.pendingProps,ie.current),Os=f,fl=!0,F=ds,cd(f.type)?(Pb=F,ds=oc(y.firstChild)):ds=F),Ya(c,f,f.pendingProps.children,m),p1(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&hr&&((F=y=ds)&&(y=zQ(y,f.type,f.pendingProps,fl),y!==null?(f.stateNode=y,Os=f,ds=oc(y.firstChild),fl=!1,F=!0):F=!1),F||Ku(f)),Se(f),F=f.type,Q=f.pendingProps,le=c!==null?c.memoizedProps:null,y=Q.children,Db(F,Q)?y=null:le!==null&&Db(F,le)&&(f.flags|=32),f.memoizedState!==null&&(F=Ro(c,f,Xc,null,null,m),Sp._currentValue=F),p1(c,f),Ya(c,f,y,m),f.child;case 6:return c===null&&hr&&((c=m=ds)&&(m=qQ(m,f.pendingProps,fl),m!==null?(f.stateNode=m,Os=f,ds=null,c=!0):c=!1),c||Ku(f)),null;case 13:return NT(c,f,m);case 4:return me(f,f.stateNode.containerInfo),y=f.pendingProps,c===null?f.child=Xh(f,null,y,m):Ya(c,f,y,m),f.child;case 11:return wT(c,f,f.type,f.pendingProps,m);case 7:return Ya(c,f,f.pendingProps,m),f.child;case 8:return Ya(c,f,f.pendingProps.children,m),f.child;case 12:return Ya(c,f,f.pendingProps.children,m),f.child;case 10:return y=f.pendingProps,$c(f,f.type,y.value),Ya(c,f,y.children,m),f.child;case 9:return F=f.type._context,y=f.pendingProps.children,pl(f),F=Qs(F),y=y(F),f.flags|=1,Ya(c,f,y,m),f.child;case 14:return bT(c,f,f.type,f.pendingProps,m);case 15:return CT(c,f,f.type,f.pendingProps,m);case 19:return IT(c,f,m);case 31:return y=f.pendingProps,m=f.mode,y={mode:y.mode,children:y.children},c===null?(m=g1(y,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=dl(c.child,y),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return ET(c,f,m);case 24:return pl(f),y=Qs(Hs),c===null?(F=z(),F===null&&(F=Xr,Q=$m(),F.pooledCache=Q,Q.refCount++,Q!==null&&(F.pooledCacheLanes|=m),F=Q),f.memoizedState={parent:y,cache:F},Me(f),$c(f,Hs,F)):((c.lanes&m)!==0&&(je(c,f),Qt(f,null,null,m),nn()),F=c.memoizedState,Q=f.memoizedState,F.parent!==y?(F={parent:y,cache:y},f.memoizedState=F,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=F),$c(f,Hs,y)):(y=Q.cache,$c(f,Hs,y),y!==F.cache&&Hh(f,[Hs],m,!0))),Ya(c,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function tA(c){c.flags|=4}function RT(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!QB(f)){if(f=xl.current,f!==null&&((dr&4194048)===dr?tu!==null:(dr&62914560)!==dr&&(dr&536870912)===0||f!==tu))throw Ke=be,pe;c.flags|=8192}}function x1(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Xn():536870912,c.lanes|=f,n0|=f)}function Ap(c,f){if(!hr)switch(c.tailMode){case"hidden":f=c.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function ys(c){var f=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(f)for(var F=c.child;F!==null;)m|=F.lanes|F.childLanes,y|=F.subtreeFlags&65011712,y|=F.flags&65011712,F.return=c,F=F.sibling;else for(F=c.child;F!==null;)m|=F.lanes|F.childLanes,y|=F.subtreeFlags,y|=F.flags,F.return=c,F=F.sibling;return c.subtreeFlags|=y,c.childLanes=m,f}function xQ(c,f,m){var y=f.pendingProps;switch(bf(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(f),null;case 1:return ys(f),null;case 3:return m=f.stateNode,y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),ml(Hs),xe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(Wa(f)?tA(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,$x())),ys(f),null;case 26:return m=f.memoizedState,c===null?(tA(f),m!==null?(ys(f),RT(f,m)):(ys(f),f.flags&=-16777217)):m?m!==c.memoizedState?(tA(f),ys(f),RT(f,m)):(ys(f),f.flags&=-16777217):(c.memoizedProps!==y&&tA(f),ys(f),f.flags&=-16777217),null;case 27:ge(f),m=ie.current;var F=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==y&&tA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return ys(f),null}c=J.current,Wa(f)?Wx(f):(c=RB(F,y,m),f.stateNode=c,tA(f))}return ys(f),null;case 5:if(ge(f),m=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==y&&tA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return ys(f),null}if(c=J.current,Wa(f))Wx(f);else{switch(F=I1(ie.current),c){case 1:c=F.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=F.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=F.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=F.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=F.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof y.is=="string"?F.createElement("select",{is:y.is}):F.createElement("select"),y.multiple?c.multiple=!0:y.size&&(c.size=y.size);break;default:c=typeof y.is=="string"?F.createElement(m,{is:y.is}):F.createElement(m)}}c[or]=f,c[Zn]=y;e:for(F=f.child;F!==null;){if(F.tag===5||F.tag===6)c.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===f)break e;for(;F.sibling===null;){if(F.return===null||F.return===f)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}f.stateNode=c;e:switch(Xa(c,m,y),m){case"button":case"input":case"select":case"textarea":c=!!y.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&tA(f)}}return ys(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==y&&tA(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(r(166));if(c=ie.current,Wa(f)){if(c=f.stateNode,m=f.memoizedProps,y=null,F=Os,F!==null)switch(F.tag){case 27:case 5:y=F.memoizedProps}c[or]=f,c=!!(c.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||SB(c.nodeValue,m)),c||Ku(f)}else c=I1(c).createTextNode(y),c[or]=f,f.stateNode=c}return ys(f),null;case 13:if(y=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(F=Wa(f),y!==null&&y.dehydrated!==null){if(c===null){if(!F)throw Error(r(318));if(F=f.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[or]=f}else Vi(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ys(f),F=!1}else F=$x(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=F),F=!0;if(!F)return f.flags&256?(Zu(f),f):(Zu(f),null)}if(Zu(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=y!==null,c=c!==null&&c.memoizedState!==null,m){y=f.child,F=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(F=y.alternate.memoizedState.cachePool.pool);var Q=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(Q=y.memoizedState.cachePool.pool),Q!==F&&(y.flags|=2048)}return m!==c&&m&&(f.child.flags|=8192),x1(f,f.updateQueue),ys(f),null;case 4:return xe(),c===null&&Nb(f.stateNode.containerInfo),ys(f),null;case 10:return ml(f.type),ys(f),null;case 19:if(j(Ea),F=f.memoizedState,F===null)return ys(f),null;if(y=(f.flags&128)!==0,Q=F.rendering,Q===null)if(y)Ap(F,!1);else{if(Fs!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(Q=f1(c),Q!==null){for(f.flags|=128,Ap(F,!1),c=Q.updateQueue,f.updateQueue=c,x1(f,c),f.subtreeFlags=0,c=m,m=f.child;m!==null;)vf(m,c),m=m.sibling;return W(Ea,Ea.current&1|2),f.child}c=c.sibling}F.tail!==null&&Ge()>w1&&(f.flags|=128,y=!0,Ap(F,!1),f.lanes=4194304)}else{if(!y)if(c=f1(Q),c!==null){if(f.flags|=128,y=!0,c=c.updateQueue,f.updateQueue=c,x1(f,c),Ap(F,!0),F.tail===null&&F.tailMode==="hidden"&&!Q.alternate&&!hr)return ys(f),null}else 2*Ge()-F.renderingStartTime>w1&&m!==536870912&&(f.flags|=128,y=!0,Ap(F,!1),f.lanes=4194304);F.isBackwards?(Q.sibling=f.child,f.child=Q):(c=F.last,c!==null?c.sibling=Q:f.child=Q,F.last=Q)}return F.tail!==null?(f=F.tail,F.rendering=f,F.tail=f.sibling,F.renderingStartTime=Ge(),f.sibling=null,c=Ea.current,W(Ea,y?c&1|2:c&1),f):(ys(f),null);case 22:case 23:return Zu(f),Tn(),y=f.memoizedState!==null,c!==null?c.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(m&536870912)!==0&&(f.flags&128)===0&&(ys(f),f.subtreeFlags&6&&(f.flags|=8192)):ys(f),m=f.updateQueue,m!==null&&x1(f,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==m&&(f.flags|=2048),c!==null&&j(U),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),ml(Hs),ys(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function vQ(c,f){switch(bf(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return ml(Hs),xe(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return ge(f),null;case 13:if(Zu(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Vi()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return j(Ea),null;case 4:return xe(),null;case 10:return ml(f.type),null;case 22:case 23:return Zu(f),Tn(),c!==null&&j(U),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return ml(Hs),null;case 25:return null;default:return null}}function DT(c,f){switch(bf(f),f.tag){case 3:ml(Hs),xe();break;case 26:case 27:case 5:ge(f);break;case 4:xe();break;case 13:Zu(f);break;case 19:j(Ea);break;case 10:ml(f.type);break;case 22:case 23:Zu(f),Tn(),c!==null&&j(U);break;case 24:ml(Hs)}}function dp(c,f){try{var m=f.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var F=y.next;m=F;do{if((m.tag&c)===c){y=void 0;var Q=m.create,le=m.inst;y=Q(),le.destroy=y}m=m.next}while(m!==F)}}catch(we){$r(f,f.return,we)}}function td(c,f,m){try{var y=f.updateQueue,F=y!==null?y.lastEffect:null;if(F!==null){var Q=F.next;y=Q;do{if((y.tag&c)===c){var le=y.inst,we=le.destroy;if(we!==void 0){le.destroy=void 0,F=f;var Re=m,Ze=we;try{Ze()}catch(ft){$r(F,Re,ft)}}}y=y.next}while(y!==Q)}}catch(ft){$r(f,f.return,ft)}}function UT(c){var f=c.updateQueue;if(f!==null){var m=c.stateNode;try{vr(f,m)}catch(y){$r(c,c.return,y)}}}function LT(c,f,m){m.props=Uf(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(y){$r(c,f,y)}}function fp(c,f){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var y=c.stateNode;break;case 30:y=c.stateNode;break;default:y=c.stateNode}typeof m=="function"?c.refCleanup=m(y):m.current=y}}catch(F){$r(c,f,F)}}function nu(c,f){var m=c.ref,y=c.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(F){$r(c,f,F)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(F){$r(c,f,F)}else m.current=null}function MT(c){var f=c.type,m=c.memoizedProps,y=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(F){$r(c,c.return,F)}}function ab(c,f,m){try{var y=c.stateNode;OQ(y,c.type,m,f),y[Zn]=f}catch(F){$r(c,c.return,F)}}function PT(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&cd(c.type)||c.tag===4}function ib(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||PT(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&cd(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ob(c,f,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(c),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=k1));else if(y!==4&&(y===27&&cd(c.type)&&(m=c.stateNode,f=null),c=c.child,c!==null))for(ob(c,f,m),c=c.sibling;c!==null;)ob(c,f,m),c=c.sibling}function v1(c,f,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?m.insertBefore(c,f):m.appendChild(c);else if(y!==4&&(y===27&&cd(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(v1(c,f,m),c=c.sibling;c!==null;)v1(c,f,m),c=c.sibling}function jT(c){var f=c.stateNode,m=c.memoizedProps;try{for(var y=c.type,F=f.attributes;F.length;)f.removeAttributeNode(F[0]);Xa(f,y,m),f[or]=c,f[Zn]=m}catch(Q){$r(c,c.return,Q)}}var nA=!1,Gs=!1,lb=!1,OT=typeof WeakSet=="function"?WeakSet:Set,La=null;function yQ(c,f){if(c=c.containerInfo,Fb=M1,c=Ka(c),Ca(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var F=y.anchorOffset,Q=y.focusNode;y=y.focusOffset;try{m.nodeType,Q.nodeType}catch{m=null;break e}var le=0,we=-1,Re=-1,Ze=0,ft=0,wt=c,rt=null;t:for(;;){for(var st;wt!==m||F!==0&&wt.nodeType!==3||(we=le+F),wt!==Q||y!==0&&wt.nodeType!==3||(Re=le+y),wt.nodeType===3&&(le+=wt.nodeValue.length),(st=wt.firstChild)!==null;)rt=wt,wt=st;for(;;){if(wt===c)break t;if(rt===m&&++Ze===F&&(we=le),rt===Q&&++ft===y&&(Re=le),(st=wt.nextSibling)!==null)break;wt=rt,rt=wt.parentNode}wt=st}m=we===-1||Re===-1?null:{start:we,end:Re}}else m=null}m=m||{start:0,end:0}}else m=null;for(Rb={focusedElem:c,selectionRange:m},M1=!1,La=f;La!==null;)if(f=La,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,La=c;else for(;La!==null;){switch(f=La,Q=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&Q!==null){c=void 0,m=f,F=Q.memoizedProps,Q=Q.memoizedState,y=m.stateNode;try{var En=Uf(m.type,F,m.elementType===m.type);c=y.getSnapshotBeforeUpdate(En,Q),y.__reactInternalSnapshotBeforeUpdate=c}catch(hn){$r(m,m.return,hn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,m=c.nodeType,m===9)Lb(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Lb(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,La=c;break}La=f.return}}function QT(c,f,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:nd(c,m),y&4&&dp(5,m);break;case 1:if(nd(c,m),y&4)if(c=m.stateNode,f===null)try{c.componentDidMount()}catch(le){$r(m,m.return,le)}else{var F=Uf(m.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(F,f,c.__reactInternalSnapshotBeforeUpdate)}catch(le){$r(m,m.return,le)}}y&64&&UT(m),y&512&&fp(m,m.return);break;case 3:if(nd(c,m),y&64&&(c=m.updateQueue,c!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{vr(c,f)}catch(le){$r(m,m.return,le)}}break;case 27:f===null&&y&4&&jT(m);case 26:case 5:nd(c,m),f===null&&y&4&&MT(m),y&512&&fp(m,m.return);break;case 12:nd(c,m);break;case 13:nd(c,m),y&4&&GT(c,m),y&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=NQ.bind(null,m),KQ(c,m))));break;case 22:if(y=m.memoizedState!==null||nA,!y){f=f!==null&&f.memoizedState!==null||Gs,F=nA;var Q=Gs;nA=y,(Gs=f)&&!Q?rd(c,m,(m.subtreeFlags&8772)!==0):nd(c,m),nA=F,Gs=Q}break;case 30:break;default:nd(c,m)}}function HT(c){var f=c.alternate;f!==null&&(c.alternate=null,HT(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&_e(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var fs=null,uo=!1;function rA(c,f,m){for(m=m.child;m!==null;)VT(c,f,m),m=m.sibling}function VT(c,f,m){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Mt,m)}catch{}switch(m.tag){case 26:Gs||nu(m,f),rA(c,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Gs||nu(m,f);var y=fs,F=uo;cd(m.type)&&(fs=m.stateNode,uo=!1),rA(c,f,m),bp(m.stateNode),fs=y,uo=F;break;case 5:Gs||nu(m,f);case 6:if(y=fs,F=uo,fs=null,rA(c,f,m),fs=y,uo=F,fs!==null)if(uo)try{(fs.nodeType===9?fs.body:fs.nodeName==="HTML"?fs.ownerDocument.body:fs).removeChild(m.stateNode)}catch(Q){$r(m,f,Q)}else try{fs.removeChild(m.stateNode)}catch(Q){$r(m,f,Q)}break;case 18:fs!==null&&(uo?(c=fs,IB(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),kp(c)):IB(fs,m.stateNode));break;case 4:y=fs,F=uo,fs=m.stateNode.containerInfo,uo=!0,rA(c,f,m),fs=y,uo=F;break;case 0:case 11:case 14:case 15:Gs||td(2,m,f),Gs||td(4,m,f),rA(c,f,m);break;case 1:Gs||(nu(m,f),y=m.stateNode,typeof y.componentWillUnmount=="function"&&LT(m,f,y)),rA(c,f,m);break;case 21:rA(c,f,m);break;case 22:Gs=(y=Gs)||m.memoizedState!==null,rA(c,f,m),Gs=y;break;default:rA(c,f,m)}}function GT(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{kp(c)}catch(m){$r(f,f.return,m)}}function wQ(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new OT),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new OT),f;default:throw Error(r(435,c.tag))}}function cb(c,f){var m=wQ(c);f.forEach(function(y){var F=kQ.bind(null,c,y);m.has(y)||(m.add(y),y.then(F,F))})}function Uo(c,f){var m=f.deletions;if(m!==null)for(var y=0;y<m.length;y++){var F=m[y],Q=c,le=f,we=le;e:for(;we!==null;){switch(we.tag){case 27:if(cd(we.type)){fs=we.stateNode,uo=!1;break e}break;case 5:fs=we.stateNode,uo=!1;break e;case 3:case 4:fs=we.stateNode.containerInfo,uo=!0;break e}we=we.return}if(fs===null)throw Error(r(160));VT(Q,le,F),fs=null,uo=!1,Q=F.alternate,Q!==null&&(Q.return=null),F.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)zT(f,c),f=f.sibling}var ic=null;function zT(c,f){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Uo(f,c),Lo(c),y&4&&(td(3,c,c.return),dp(3,c),td(5,c,c.return));break;case 1:Uo(f,c),Lo(c),y&512&&(Gs||m===null||nu(m,m.return)),y&64&&nA&&(c=c.updateQueue,c!==null&&(y=c.callbacks,y!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var F=ic;if(Uo(f,c),Lo(c),y&512&&(Gs||m===null||nu(m,m.return)),y&4){var Q=m!==null?m.memoizedState:null;if(y=c.memoizedState,m===null)if(y===null)if(c.stateNode===null){e:{y=c.type,m=c.memoizedProps,F=F.ownerDocument||F;t:switch(y){case"title":Q=F.getElementsByTagName("title")[0],(!Q||Q[Ee]||Q[or]||Q.namespaceURI==="http://www.w3.org/2000/svg"||Q.hasAttribute("itemprop"))&&(Q=F.createElement(y),F.head.insertBefore(Q,F.querySelector("head > title"))),Xa(Q,y,m),Q[or]=c,Qe(Q),y=Q;break e;case"link":var le=jB("link","href",F).get(y+(m.href||""));if(le){for(var we=0;we<le.length;we++)if(Q=le[we],Q.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&Q.getAttribute("rel")===(m.rel==null?null:m.rel)&&Q.getAttribute("title")===(m.title==null?null:m.title)&&Q.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){le.splice(we,1);break t}}Q=F.createElement(y),Xa(Q,y,m),F.head.appendChild(Q);break;case"meta":if(le=jB("meta","content",F).get(y+(m.content||""))){for(we=0;we<le.length;we++)if(Q=le[we],Q.getAttribute("content")===(m.content==null?null:""+m.content)&&Q.getAttribute("name")===(m.name==null?null:m.name)&&Q.getAttribute("property")===(m.property==null?null:m.property)&&Q.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&Q.getAttribute("charset")===(m.charSet==null?null:m.charSet)){le.splice(we,1);break t}}Q=F.createElement(y),Xa(Q,y,m),F.head.appendChild(Q);break;default:throw Error(r(468,y))}Q[or]=c,Qe(Q),y=Q}c.stateNode=y}else OB(F,c.type,c.stateNode);else c.stateNode=PB(F,y,c.memoizedProps);else Q!==y?(Q===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):Q.count--,y===null?OB(F,c.type,c.stateNode):PB(F,y,c.memoizedProps)):y===null&&c.stateNode!==null&&ab(c,c.memoizedProps,m.memoizedProps)}break;case 27:Uo(f,c),Lo(c),y&512&&(Gs||m===null||nu(m,m.return)),m!==null&&y&4&&ab(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Uo(f,c),Lo(c),y&512&&(Gs||m===null||nu(m,m.return)),c.flags&32){F=c.stateNode;try{li(F,"")}catch(st){$r(c,c.return,st)}}y&4&&c.stateNode!=null&&(F=c.memoizedProps,ab(c,F,m!==null?m.memoizedProps:F)),y&1024&&(lb=!0);break;case 6:if(Uo(f,c),Lo(c),y&4){if(c.stateNode===null)throw Error(r(162));y=c.memoizedProps,m=c.stateNode;try{m.nodeValue=y}catch(st){$r(c,c.return,st)}}break;case 3:if(D1=null,F=ic,ic=F1(f.containerInfo),Uo(f,c),ic=F,Lo(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{kp(f.containerInfo)}catch(st){$r(c,c.return,st)}lb&&(lb=!1,qT(c));break;case 4:y=ic,ic=F1(c.stateNode.containerInfo),Uo(f,c),Lo(c),ic=y;break;case 12:Uo(f,c),Lo(c);break;case 13:Uo(f,c),Lo(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(mb=Ge()),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,cb(c,y)));break;case 22:F=c.memoizedState!==null;var Re=m!==null&&m.memoizedState!==null,Ze=nA,ft=Gs;if(nA=Ze||F,Gs=ft||Re,Uo(f,c),Gs=ft,nA=Ze,Lo(c),y&8192)e:for(f=c.stateNode,f._visibility=F?f._visibility&-2:f._visibility|1,F&&(m===null||Re||nA||Gs||Lf(c)),m=null,f=c;;){if(f.tag===5||f.tag===26){if(m===null){Re=m=f;try{if(Q=Re.stateNode,F)le=Q.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{we=Re.stateNode;var wt=Re.memoizedProps.style,rt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;we.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(st){$r(Re,Re.return,st)}}}else if(f.tag===6){if(m===null){Re=f;try{Re.stateNode.nodeValue=F?"":Re.memoizedProps}catch(st){$r(Re,Re.return,st)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=c.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,cb(c,m))));break;case 19:Uo(f,c),Lo(c),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,cb(c,y)));break;case 30:break;case 21:break;default:Uo(f,c),Lo(c)}}function Lo(c){var f=c.flags;if(f&2){try{for(var m,y=c.return;y!==null;){if(PT(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var F=m.stateNode,Q=ib(c);v1(c,Q,F);break;case 5:var le=m.stateNode;m.flags&32&&(li(le,""),m.flags&=-33);var we=ib(c);v1(c,we,le);break;case 3:case 4:var Re=m.stateNode.containerInfo,Ze=ib(c);ob(c,Ze,Re);break;default:throw Error(r(161))}}catch(ft){$r(c,c.return,ft)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function qT(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;qT(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function nd(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)QT(c,f.alternate,f),f=f.sibling}function Lf(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:td(4,f,f.return),Lf(f);break;case 1:nu(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&LT(f,f.return,m),Lf(f);break;case 27:bp(f.stateNode);case 26:case 5:nu(f,f.return),Lf(f);break;case 22:f.memoizedState===null&&Lf(f);break;case 30:Lf(f);break;default:Lf(f)}c=c.sibling}}function rd(c,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,F=c,Q=f,le=Q.flags;switch(Q.tag){case 0:case 11:case 15:rd(F,Q,m),dp(4,Q);break;case 1:if(rd(F,Q,m),y=Q,F=y.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(Ze){$r(y,y.return,Ze)}if(y=Q,F=y.updateQueue,F!==null){var we=y.stateNode;try{var Re=F.shared.hiddenCallbacks;if(Re!==null)for(F.shared.hiddenCallbacks=null,F=0;F<Re.length;F++)ur(Re[F],we)}catch(Ze){$r(y,y.return,Ze)}}m&&le&64&&UT(Q),fp(Q,Q.return);break;case 27:jT(Q);case 26:case 5:rd(F,Q,m),m&&y===null&&le&4&&MT(Q),fp(Q,Q.return);break;case 12:rd(F,Q,m);break;case 13:rd(F,Q,m),m&&le&4&&GT(F,Q);break;case 22:Q.memoizedState===null&&rd(F,Q,m),fp(Q,Q.return);break;case 30:break;default:rd(F,Q,m)}f=f.sibling}}function ub(c,f){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Cf(m))}function Ab(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Cf(c))}function ru(c,f,m,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)KT(c,f,m,y),f=f.sibling}function KT(c,f,m,y){var F=f.flags;switch(f.tag){case 0:case 11:case 15:ru(c,f,m,y),F&2048&&dp(9,f);break;case 1:ru(c,f,m,y);break;case 3:ru(c,f,m,y),F&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Cf(c)));break;case 12:if(F&2048){ru(c,f,m,y),c=f.stateNode;try{var Q=f.memoizedProps,le=Q.id,we=Q.onPostCommit;typeof we=="function"&&we(le,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Re){$r(f,f.return,Re)}}else ru(c,f,m,y);break;case 13:ru(c,f,m,y);break;case 23:break;case 22:Q=f.stateNode,le=f.alternate,f.memoizedState!==null?Q._visibility&2?ru(c,f,m,y):hp(c,f):Q._visibility&2?ru(c,f,m,y):(Q._visibility|=2,Zh(c,f,m,y,(f.subtreeFlags&10256)!==0)),F&2048&&ub(le,f);break;case 24:ru(c,f,m,y),F&2048&&Ab(f.alternate,f);break;default:ru(c,f,m,y)}}function Zh(c,f,m,y,F){for(F=F&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var Q=c,le=f,we=m,Re=y,Ze=le.flags;switch(le.tag){case 0:case 11:case 15:Zh(Q,le,we,Re,F),dp(8,le);break;case 23:break;case 22:var ft=le.stateNode;le.memoizedState!==null?ft._visibility&2?Zh(Q,le,we,Re,F):hp(Q,le):(ft._visibility|=2,Zh(Q,le,we,Re,F)),F&&Ze&2048&&ub(le.alternate,le);break;case 24:Zh(Q,le,we,Re,F),F&&Ze&2048&&Ab(le.alternate,le);break;default:Zh(Q,le,we,Re,F)}f=f.sibling}}function hp(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=c,y=f,F=y.flags;switch(y.tag){case 22:hp(m,y),F&2048&&ub(y.alternate,y);break;case 24:hp(m,y),F&2048&&Ab(y.alternate,y);break;default:hp(m,y)}f=f.sibling}}var mp=8192;function e0(c){if(c.subtreeFlags&mp)for(c=c.child;c!==null;)WT(c),c=c.sibling}function WT(c){switch(c.tag){case 26:e0(c),c.flags&mp&&c.memoizedState!==null&&i9(ic,c.memoizedState,c.memoizedProps);break;case 5:e0(c);break;case 3:case 4:var f=ic;ic=F1(c.stateNode.containerInfo),e0(c),ic=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=mp,mp=16777216,e0(c),mp=f):e0(c));break;default:e0(c)}}function $T(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function pp(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];La=y,JT(y,c)}$T(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)YT(c),c=c.sibling}function YT(c){switch(c.tag){case 0:case 11:case 15:pp(c),c.flags&2048&&td(9,c,c.return);break;case 3:pp(c);break;case 12:pp(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,y1(c)):pp(c);break;default:pp(c)}}function y1(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];La=y,JT(y,c)}$T(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:td(8,f,f.return),y1(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,y1(f));break;default:y1(f)}c=c.sibling}}function JT(c,f){for(;La!==null;){var m=La;switch(m.tag){case 0:case 11:case 15:td(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Cf(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,La=y;else e:for(m=c;La!==null;){y=La;var F=y.sibling,Q=y.return;if(HT(y),y===m){La=null;break e}if(F!==null){F.return=Q,La=F;break e}La=Q}}}var bQ={getCacheForType:function(c){var f=Qs(Hs),m=f.data.get(c);return m===void 0&&(m=c(),f.data.set(c,m)),m}},CQ=typeof WeakMap=="function"?WeakMap:Map,Rr=0,Xr=null,er=null,dr=0,Dr=0,Mo=null,sd=!1,t0=!1,db=!1,sA=0,Fs=0,ad=0,Mf=0,fb=0,vl=0,n0=0,gp=null,Ao=null,hb=!1,mb=0,w1=1/0,b1=null,id=null,Ja=0,od=null,r0=null,s0=0,pb=0,gb=null,XT=null,xp=0,xb=null;function Po(){if((Rr&2)!==0&&dr!==0)return dr&-dr;if(q.T!==null){var c=Wu;return c!==0?c:_b()}return ms()}function ZT(){vl===0&&(vl=(dr&536870912)===0||hr?na():536870912);var c=xl.current;return c!==null&&(c.flags|=32),vl}function jo(c,f,m){(c===Xr&&(Dr===2||Dr===9)||c.cancelPendingCommit!==null)&&(a0(c,0),ld(c,dr,vl,!1)),cs(c,m),((Rr&2)===0||c!==Xr)&&(c===Xr&&((Rr&2)===0&&(Mf|=m),Fs===4&&ld(c,dr,vl,!1)),su(c))}function eB(c,f,m){if((Rr&6)!==0)throw Error(r(327));var y=!m&&(f&124)===0&&(f&c.expiredLanes)===0||Er(c,f),F=y?SQ(c,f):wb(c,f,!0),Q=y;do{if(F===0){t0&&!y&&ld(c,f,0,!1);break}else{if(m=c.current.alternate,Q&&!EQ(m)){F=wb(c,f,!1),Q=!1;continue}if(F===2){if(Q=f,c.errorRecoveryDisabledLanes&Q)var le=0;else le=c.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var we=c;F=gp;var Re=we.current.memoizedState.isDehydrated;if(Re&&(a0(we,le).flags|=256),le=wb(we,le,!1),le!==2){if(db&&!Re){we.errorRecoveryDisabledLanes|=Q,Mf|=Q,F=4;break e}Q=Ao,Ao=F,Q!==null&&(Ao===null?Ao=Q:Ao.push.apply(Ao,Q))}F=le}if(Q=!1,F!==2)continue}}if(F===1){a0(c,0),ld(c,f,0,!0);break}e:{switch(y=c,Q=F,Q){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:ld(y,f,vl,!sd);break e;case 2:Ao=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(F=mb+300-Ge(),10<F)){if(ld(y,f,vl,!sd),Fn(y,0,!0)!==0)break e;y.timeoutHandle=NB(tB.bind(null,y,m,Ao,b1,hb,f,vl,Mf,n0,sd,Q,2,-0,0),F);break e}tB(y,m,Ao,b1,hb,f,vl,Mf,n0,sd,Q,0,-0,0)}}break}while(!0);su(c)}function tB(c,f,m,y,F,Q,le,we,Re,Ze,ft,wt,rt,st){if(c.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(_p={stylesheets:null,count:0,unsuspend:a9},WT(f),wt=o9(),wt!==null)){c.cancelPendingCommit=wt(lB.bind(null,c,f,Q,m,y,F,le,we,Re,ft,1,rt,st)),ld(c,Q,le,!Ze);return}lB(c,f,Q,m,y,F,le,we,Re)}function EQ(c){for(var f=c;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var F=m[y],Q=F.getSnapshot;F=F.value;try{if(!ia(Q(),F))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ld(c,f,m,y){f&=~fb,f&=~Mf,c.suspendedLanes|=f,c.pingedLanes&=~f,y&&(c.warmLanes|=f),y=c.expirationTimes;for(var F=f;0<F;){var Q=31-Pt(F),le=1<<Q;y[Q]=-1,F&=~le}m!==0&&tn(c,m,f)}function C1(){return(Rr&6)===0?(vp(0),!1):!0}function vb(){if(er!==null){if(Dr===0)var c=er.return;else c=er,ec=la=null,zh(c),Jh=null,cp=0,c=er;for(;c!==null;)DT(c.alternate,c),c=c.return;er=null}}function a0(c,f){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,HQ(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),vb(),Xr=c,er=m=dl(c.current,null),dr=f,Dr=0,Mo=null,sd=!1,t0=Er(c,f),db=!1,n0=vl=fb=Mf=ad=Fs=0,Ao=gp=null,hb=!1,(f&8)!==0&&(f|=f&32);var y=c.entangledLanes;if(y!==0)for(c=c.entanglements,y&=f;0<y;){var F=31-Pt(y),Q=1<<F;f|=c[F],y&=~Q}return sA=f,io(),m}function nB(c,f){An=null,q.H=u1,f===he||f===ve?(f=Ve(),Dr=3):f===pe?(f=Ve(),Dr=4):Dr=f===yT?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Mo=f,er===null&&(Fs=1,m1(c,Vn(f,c.current)))}function rB(){var c=q.H;return q.H=u1,c===null?u1:c}function sB(){var c=q.A;return q.A=bQ,c}function yb(){Fs=4,sd||(dr&4194048)!==dr&&xl.current!==null||(t0=!0),(ad&134217727)===0&&(Mf&134217727)===0||Xr===null||ld(Xr,dr,vl,!1)}function wb(c,f,m){var y=Rr;Rr|=2;var F=rB(),Q=sB();(Xr!==c||dr!==f)&&(b1=null,a0(c,f)),f=!1;var le=Fs;e:do try{if(Dr!==0&&er!==null){var we=er,Re=Mo;switch(Dr){case 8:vb(),le=6;break e;case 3:case 2:case 9:case 6:xl.current===null&&(f=!0);var Ze=Dr;if(Dr=0,Mo=null,i0(c,we,Re,Ze),m&&t0){le=0;break e}break;default:Ze=Dr,Dr=0,Mo=null,i0(c,we,Re,Ze)}}_Q(),le=Fs;break}catch(ft){nB(c,ft)}while(!0);return f&&c.shellSuspendCounter++,ec=la=null,Rr=y,q.H=F,q.A=Q,er===null&&(Xr=null,dr=0,io()),le}function _Q(){for(;er!==null;)aB(er)}function SQ(c,f){var m=Rr;Rr|=2;var y=rB(),F=sB();Xr!==c||dr!==f?(b1=null,w1=Ge()+500,a0(c,f)):t0=Er(c,f);e:do try{if(Dr!==0&&er!==null){f=er;var Q=Mo;t:switch(Dr){case 1:Dr=0,Mo=null,i0(c,f,Q,1);break;case 2:case 9:if(Be(Q)){Dr=0,Mo=null,iB(f);break}f=function(){Dr!==2&&Dr!==9||Xr!==c||(Dr=7),su(c)},Q.then(f,f);break e;case 3:Dr=7;break e;case 4:Dr=5;break e;case 7:Be(Q)?(Dr=0,Mo=null,iB(f)):(Dr=0,Mo=null,i0(c,f,Q,7));break;case 5:var le=null;switch(er.tag){case 26:le=er.memoizedState;case 5:case 27:var we=er;if(!le||QB(le)){Dr=0,Mo=null;var Re=we.sibling;if(Re!==null)er=Re;else{var Ze=we.return;Ze!==null?(er=Ze,E1(Ze)):er=null}break t}}Dr=0,Mo=null,i0(c,f,Q,5);break;case 6:Dr=0,Mo=null,i0(c,f,Q,6);break;case 8:vb(),Fs=6;break e;default:throw Error(r(462))}}TQ();break}catch(ft){nB(c,ft)}while(!0);return ec=la=null,q.H=y,q.A=F,Rr=m,er!==null?0:(Xr=null,dr=0,io(),Fs)}function TQ(){for(;er!==null&&!De();)aB(er)}function aB(c){var f=FT(c.alternate,c,sA);c.memoizedProps=c.pendingProps,f===null?E1(c):er=f}function iB(c){var f=c,m=f.alternate;switch(f.tag){case 15:case 0:f=ST(m,f,f.pendingProps,f.type,void 0,dr);break;case 11:f=ST(m,f,f.pendingProps,f.type.render,f.ref,dr);break;case 5:zh(f);default:DT(m,f),f=er=vf(f,sA),f=FT(m,f,sA)}c.memoizedProps=c.pendingProps,f===null?E1(c):er=f}function i0(c,f,m,y){ec=la=null,zh(f),Jh=null,cp=0;var F=f.return;try{if(pQ(c,F,f,m,dr)){Fs=1,m1(c,Vn(m,c.current)),er=null;return}}catch(Q){if(F!==null)throw er=F,Q;Fs=1,m1(c,Vn(m,c.current)),er=null;return}f.flags&32768?(hr||y===1?c=!0:t0||(dr&536870912)!==0?c=!1:(sd=c=!0,(y===2||y===9||y===3||y===6)&&(y=xl.current,y!==null&&y.tag===13&&(y.flags|=16384))),oB(f,c)):E1(f)}function E1(c){var f=c;do{if((f.flags&32768)!==0){oB(f,sd);return}c=f.return;var m=xQ(f.alternate,f,sA);if(m!==null){er=m;return}if(f=f.sibling,f!==null){er=f;return}er=f=c}while(f!==null);Fs===0&&(Fs=5)}function oB(c,f){do{var m=vQ(c.alternate,c);if(m!==null){m.flags&=32767,er=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(c=c.sibling,c!==null)){er=c;return}er=c=m}while(c!==null);Fs=6,er=null}function lB(c,f,m,y,F,Q,le,we,Re){c.cancelPendingCommit=null;do _1();while(Ja!==0);if((Rr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(Q=f.lanes|f.childLanes,Q|=gs,Dn(c,m,Q,le,we,Re),c===Xr&&(er=Xr=null,dr=0),r0=f,od=c,s0=m,pb=Q,gb=F,XT=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,IQ(Ct,function(){return fB(),null})):(c.callbackNode=null,c.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=q.T,q.T=null,F=X.p,X.p=2,le=Rr,Rr|=4;try{yQ(c,f,m)}finally{Rr=le,X.p=F,q.T=y}}Ja=1,cB(),uB(),AB()}}function cB(){if(Ja===1){Ja=0;var c=od,f=r0,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var y=X.p;X.p=2;var F=Rr;Rr|=4;try{zT(f,c);var Q=Rb,le=Ka(c.containerInfo),we=Q.focusedElem,Re=Q.selectionRange;if(le!==we&&we&&we.ownerDocument&&jc(we.ownerDocument.documentElement,we)){if(Re!==null&&Ca(we)){var Ze=Re.start,ft=Re.end;if(ft===void 0&&(ft=Ze),"selectionStart"in we)we.selectionStart=Ze,we.selectionEnd=Math.min(ft,we.value.length);else{var wt=we.ownerDocument||document,rt=wt&&wt.defaultView||window;if(rt.getSelection){var st=rt.getSelection(),En=we.textContent.length,hn=Math.min(Re.start,En),zr=Re.end===void 0?hn:Math.min(Re.end,En);!st.extend&&hn>zr&&(le=zr,zr=hn,hn=le);var ze=ql(we,hn),Pe=ql(we,zr);if(ze&&Pe&&(st.rangeCount!==1||st.anchorNode!==ze.node||st.anchorOffset!==ze.offset||st.focusNode!==Pe.node||st.focusOffset!==Pe.offset)){var $e=wt.createRange();$e.setStart(ze.node,ze.offset),st.removeAllRanges(),hn>zr?(st.addRange($e),st.extend(Pe.node,Pe.offset)):($e.setEnd(Pe.node,Pe.offset),st.addRange($e))}}}}for(wt=[],st=we;st=st.parentNode;)st.nodeType===1&&wt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<wt.length;we++){var mt=wt[we];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}M1=!!Fb,Rb=Fb=null}finally{Rr=F,X.p=y,q.T=m}}c.current=f,Ja=2}}function uB(){if(Ja===2){Ja=0;var c=od,f=r0,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var y=X.p;X.p=2;var F=Rr;Rr|=4;try{QT(c,f.alternate,f)}finally{Rr=F,X.p=y,q.T=m}}Ja=3}}function AB(){if(Ja===4||Ja===3){Ja=0,Ce();var c=od,f=r0,m=s0,y=XT;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ja=5:(Ja=0,r0=od=null,dB(c,c.pendingLanes));var F=c.pendingLanes;if(F===0&&(id=null),Or(m),f=f.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Mt,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=q.T,F=X.p,X.p=2,q.T=null;try{for(var Q=c.onRecoverableError,le=0;le<y.length;le++){var we=y[le];Q(we.value,{componentStack:we.stack})}}finally{q.T=f,X.p=F}}(s0&3)!==0&&_1(),su(c),F=c.pendingLanes,(m&4194090)!==0&&(F&42)!==0?c===xb?xp++:(xp=0,xb=c):xp=0,vp(0)}}function dB(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Cf(f)))}function _1(c){return cB(),uB(),AB(),fB()}function fB(){if(Ja!==5)return!1;var c=od,f=pb;pb=0;var m=Or(s0),y=q.T,F=X.p;try{X.p=32>m?32:m,q.T=null,m=gb,gb=null;var Q=od,le=s0;if(Ja=0,r0=od=null,s0=0,(Rr&6)!==0)throw Error(r(331));var we=Rr;if(Rr|=4,YT(Q.current),KT(Q,Q.current,le,m),Rr=we,vp(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Mt,Q)}catch{}return!0}finally{X.p=F,q.T=y,dB(c,f)}}function hB(c,f,m){f=Vn(m,f),f=Yw(c.stateNode,f,2),c=vt(c,f,2),c!==null&&(cs(c,2),su(c))}function $r(c,f,m){if(c.tag===3)hB(c,c,m);else for(;f!==null;){if(f.tag===3){hB(f,c,m);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(id===null||!id.has(y))){c=Vn(m,c),m=xT(2),y=vt(f,m,2),y!==null&&(vT(m,y,f,c),cs(y,2),su(y));break}}f=f.return}}function bb(c,f,m){var y=c.pingCache;if(y===null){y=c.pingCache=new CQ;var F=new Set;y.set(f,F)}else F=y.get(f),F===void 0&&(F=new Set,y.set(f,F));F.has(m)||(db=!0,F.add(m),c=BQ.bind(null,c,f,m),f.then(c,c))}function BQ(c,f,m){var y=c.pingCache;y!==null&&y.delete(f),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,Xr===c&&(dr&m)===m&&(Fs===4||Fs===3&&(dr&62914560)===dr&&300>Ge()-mb?(Rr&2)===0&&a0(c,0):fb|=m,n0===dr&&(n0=0)),su(c)}function mB(c,f){f===0&&(f=Xn()),c=Wl(c,f),c!==null&&(cs(c,f),su(c))}function NQ(c){var f=c.memoizedState,m=0;f!==null&&(m=f.retryLane),mB(c,m)}function kQ(c,f){var m=0;switch(c.tag){case 13:var y=c.stateNode,F=c.memoizedState;F!==null&&(m=F.retryLane);break;case 19:y=c.stateNode;break;case 22:y=c.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(f),mB(c,m)}function IQ(c,f){return Fe(c,f)}var S1=null,o0=null,Cb=!1,T1=!1,Eb=!1,Pf=0;function su(c){c!==o0&&c.next===null&&(o0===null?S1=o0=c:o0=o0.next=c),T1=!0,Cb||(Cb=!0,RQ())}function vp(c,f){if(!Eb&&T1){Eb=!0;do for(var m=!1,y=S1;y!==null;){if(c!==0){var F=y.pendingLanes;if(F===0)var Q=0;else{var le=y.suspendedLanes,we=y.pingedLanes;Q=(1<<31-Pt(42|c)+1)-1,Q&=F&~(le&~we),Q=Q&201326741?Q&201326741|1:Q?Q|2:0}Q!==0&&(m=!0,vB(y,Q))}else Q=dr,Q=Fn(y,y===Xr?Q:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(Q&3)===0||Er(y,Q)||(m=!0,vB(y,Q));y=y.next}while(m);Eb=!1}}function FQ(){pB()}function pB(){T1=Cb=!1;var c=0;Pf!==0&&(QQ()&&(c=Pf),Pf=0);for(var f=Ge(),m=null,y=S1;y!==null;){var F=y.next,Q=gB(y,f);Q===0?(y.next=null,m===null?S1=F:m.next=F,F===null&&(o0=m)):(m=y,(c!==0||(Q&3)!==0)&&(T1=!0)),y=F}vp(c)}function gB(c,f){for(var m=c.suspendedLanes,y=c.pingedLanes,F=c.expirationTimes,Q=c.pendingLanes&-62914561;0<Q;){var le=31-Pt(Q),we=1<<le,Re=F[le];Re===-1?((we&m)===0||(we&y)!==0)&&(F[le]=Bn(we,f)):Re<=f&&(c.expiredLanes|=we),Q&=~we}if(f=Xr,m=dr,m=Fn(c,c===f?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y=c.callbackNode,m===0||c===f&&(Dr===2||Dr===9)||c.cancelPendingCommit!==null)return y!==null&&y!==null&&et(y),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||Er(c,m)){if(f=m&-m,f===c.callbackPriority)return f;switch(y!==null&&et(y),Or(m)){case 2:case 8:m=dt;break;case 32:m=Ct;break;case 268435456:m=kt;break;default:m=Ct}return y=xB.bind(null,c),m=Fe(m,y),c.callbackPriority=f,c.callbackNode=m,f}return y!==null&&y!==null&&et(y),c.callbackPriority=2,c.callbackNode=null,2}function xB(c,f){if(Ja!==0&&Ja!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(_1()&&c.callbackNode!==m)return null;var y=dr;return y=Fn(c,c===Xr?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y===0?null:(eB(c,y,f),gB(c,Ge()),c.callbackNode!=null&&c.callbackNode===m?xB.bind(null,c):null)}function vB(c,f){if(_1())return null;eB(c,f,!0)}function RQ(){VQ(function(){(Rr&6)!==0?Fe(it,FQ):pB()})}function _b(){return Pf===0&&(Pf=na()),Pf}function yB(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:_o(""+c)}function wB(c,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,c.id&&m.setAttribute("form",c.id),f.parentNode.insertBefore(m,f),c=new FormData(c),m.parentNode.removeChild(m),c}function DQ(c,f,m,y,F){if(f==="submit"&&m&&m.stateNode===F){var Q=yB((F[Zn]||null).action),le=y.submitter;le&&(f=(f=le[Zn]||null)?yB(f.formAction):le.getAttribute("formAction"),f!==null&&(Q=f,le=null));var we=new rl("action","action",null,y,F);c.push({event:we,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Pf!==0){var Re=le?wB(F,le):new FormData(F);gl(m,{pending:!0,data:Re,method:F.method,action:Q},null,Re)}}else typeof Q=="function"&&(we.preventDefault(),Re=le?wB(F,le):new FormData(F),gl(m,{pending:!0,data:Re,method:F.method,action:Q},Q,Re))},currentTarget:F}]})}}for(var Sb=0;Sb<Hu.length;Sb++){var Tb=Hu[Sb],UQ=Tb.toLowerCase(),LQ=Tb[0].toUpperCase()+Tb.slice(1);As(UQ,"on"+LQ)}As(HA,"onAnimationEnd"),As(Qc,"onAnimationIteration"),As(Hc,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Vc,"onTransitionRun"),As(Qu,"onTransitionStart"),As(VA,"onTransitionCancel"),As(Gc,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yp));function bB(c,f){f=(f&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],F=y.event;y=y.listeners;e:{var Q=void 0;if(f)for(var le=y.length-1;0<=le;le--){var we=y[le],Re=we.instance,Ze=we.currentTarget;if(we=we.listener,Re!==Q&&F.isPropagationStopped())break e;Q=we,F.currentTarget=Ze;try{Q(F)}catch(ft){h1(ft)}F.currentTarget=null,Q=Re}else for(le=0;le<y.length;le++){if(we=y[le],Re=we.instance,Ze=we.currentTarget,we=we.listener,Re!==Q&&F.isPropagationStopped())break e;Q=we,F.currentTarget=Ze;try{Q(F)}catch(ft){h1(ft)}F.currentTarget=null,Q=Re}}}}function tr(c,f){var m=f[kr];m===void 0&&(m=f[kr]=new Set);var y=c+"__bubble";m.has(y)||(CB(f,c,2,!1),m.add(y))}function Bb(c,f,m){var y=0;f&&(y|=4),CB(m,c,y,f)}var B1="_reactListening"+Math.random().toString(36).slice(2);function Nb(c){if(!c[B1]){c[B1]=!0,We.forEach(function(m){m!=="selectionchange"&&(MQ.has(m)||Bb(m,!1,c),Bb(m,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[B1]||(f[B1]=!0,Bb("selectionchange",!1,f))}}function CB(c,f,m,y){switch(KB(f)){case 2:var F=u9;break;case 8:F=A9;break;default:F=Vb}m=F.bind(null,f,m,c),F=void 0,!qa||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(F=!0),y?F!==void 0?c.addEventListener(f,m,{capture:!0,passive:F}):c.addEventListener(f,m,!0):F!==void 0?c.addEventListener(f,m,{passive:F}):c.addEventListener(f,m,!1)}function kb(c,f,m,y,F){var Q=y;if((f&1)===0&&(f&2)===0&&y!==null)e:for(;;){if(y===null)return;var le=y.tag;if(le===3||le===4){var we=y.stateNode.containerInfo;if(we===F)break;if(le===4)for(le=y.return;le!==null;){var Re=le.tag;if((Re===3||Re===4)&&le.stateNode.containerInfo===F)return;le=le.return}for(;we!==null;){if(le=Te(we),le===null)return;if(Re=le.tag,Re===5||Re===6||Re===26||Re===27){y=Q=le;continue e}we=we.parentNode}}y=y.return}MA(function(){var Ze=Q,ft=Ir(m),wt=[];e:{var rt=Kl.get(c);if(rt!==void 0){var st=rl,En=c;switch(c){case"keypress":if(Ai(m)===0)break e;case"keydown":case"keyup":st=No;break;case"focusin":En="focus",st=al;break;case"focusout":En="blur",st=al;break;case"beforeblur":case"afterblur":st=al;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Uc;break;case HA:case Qc:case Hc:st=Fc;break;case Gc:st=ue;break;case"scroll":case"scrollend":st=Uu;break;case"wheel":st=Ue;break;case"copy":case"cut":case"paste":st=Rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=zl;break;case"toggle":case"beforetoggle":st=ot}var hn=(f&4)!==0,zr=!hn&&(c==="scroll"||c==="scrollend"),ze=hn?rt!==null?rt+"Capture":null:rt;hn=[];for(var Pe=Ze,$e;Pe!==null;){var mt=Pe;if($e=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||$e===null||ze===null||(mt=ka(Pe,ze),mt!=null&&hn.push(wp(Pe,mt,$e))),zr)break;Pe=Pe.return}0<hn.length&&(rt=new st(rt,En,null,m,ft),wt.push({event:rt,listeners:hn}))}}if((f&7)===0){e:{if(rt=c==="mouseover"||c==="pointerover",st=c==="mouseout"||c==="pointerout",rt&&m!==Xi&&(En=m.relatedTarget||m.fromElement)&&(Te(En)||En[_r]))break e;if((st||rt)&&(rt=ft.window===ft?ft:(rt=ft.ownerDocument)?rt.defaultView||rt.parentWindow:window,st?(En=m.relatedTarget||m.toElement,st=Ze,En=En?Te(En):null,En!==null&&(zr=a(En),hn=En.tag,En!==zr||hn!==5&&hn!==27&&hn!==6)&&(En=null)):(st=null,En=Ze),st!==En)){if(hn=Bs,mt="onMouseLeave",ze="onMouseEnter",Pe="mouse",(c==="pointerout"||c==="pointerover")&&(hn=zl,mt="onPointerLeave",ze="onPointerEnter",Pe="pointer"),zr=st==null?rt:qe(st),$e=En==null?rt:qe(En),rt=new hn(mt,Pe+"leave",st,m,ft),rt.target=zr,rt.relatedTarget=$e,mt=null,Te(ft)===Ze&&(hn=new hn(ze,Pe+"enter",En,m,ft),hn.target=$e,hn.relatedTarget=zr,mt=hn),zr=mt,st&&En)t:{for(hn=st,ze=En,Pe=0,$e=hn;$e;$e=l0($e))Pe++;for($e=0,mt=ze;mt;mt=l0(mt))$e++;for(;0<Pe-$e;)hn=l0(hn),Pe--;for(;0<$e-Pe;)ze=l0(ze),$e--;for(;Pe--;){if(hn===ze||ze!==null&&hn===ze.alternate)break t;hn=l0(hn),ze=l0(ze)}hn=null}else hn=null;st!==null&&EB(wt,rt,st,hn,!1),En!==null&&zr!==null&&EB(wt,zr,En,hn,!0)}}e:{if(rt=Ze?qe(Ze):window,st=rt.nodeName&&rt.nodeName.toLowerCase(),st==="select"||st==="input"&&rt.type==="file")var Xt=OA;else if(Sr(rt))if(Mu)Xt=Mh;else{Xt=Km;var $n=fi}else st=rt.nodeName,!st||st.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Ze&&Ru(Ze.elementType)&&(Xt=OA):Xt=gf;if(Xt&&(Xt=Xt(c,Ze))){so(wt,Xt,m,ft);break e}$n&&$n(c,rt,Ze),c==="focusout"&&Ze&&rt.type==="number"&&Ze.memoizedProps.value!=null&&el(rt,"number",rt.value)}switch($n=Ze?qe(Ze):window,c){case"focusin":(Sr($n)||$n.contentEditable==="true")&&(hi=$n,ko=Ze,ul=null);break;case"focusout":ul=ko=hi=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,us(wt,m,ft);break;case"selectionchange":if(Oc)break;case"keydown":case"keyup":us(wt,m,ft)}var sn;if(Ot)e:{switch(c){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else fn?Xe(c,m)&&(pn="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(pn="onCompositionStart");pn&&(se&&m.locale!=="ko"&&(fn||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&fn&&(sn=Du()):(ui=ft,nl="value"in ui?ui.value:ui.textContent,fn=!0)),$n=N1(Ze,pn),0<$n.length&&(pn=new Hl(pn,c,null,m,ft),wt.push({event:pn,listeners:$n}),sn?pn.data=sn:(sn=St(m),sn!==null&&(pn.data=sn)))),(sn=Y?Wn(c,m):Sn(c,m))&&(pn=N1(Ze,"onBeforeInput"),0<pn.length&&($n=new Hl("onBeforeInput","beforeinput",null,m,ft),wt.push({event:$n,listeners:pn}),$n.data=sn)),DQ(wt,c,Ze,m,ft)}bB(wt,f)})}function wp(c,f,m){return{instance:c,listener:f,currentTarget:m}}function N1(c,f){for(var m=f+"Capture",y=[];c!==null;){var F=c,Q=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||Q===null||(F=ka(c,m),F!=null&&y.unshift(wp(c,F,Q)),F=ka(c,f),F!=null&&y.push(wp(c,F,Q))),c.tag===3)return y;c=c.return}return[]}function l0(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function EB(c,f,m,y,F){for(var Q=f._reactName,le=[];m!==null&&m!==y;){var we=m,Re=we.alternate,Ze=we.stateNode;if(we=we.tag,Re!==null&&Re===y)break;we!==5&&we!==26&&we!==27||Ze===null||(Re=Ze,F?(Ze=ka(m,Q),Ze!=null&&le.unshift(wp(m,Ze,Re))):F||(Ze=ka(m,Q),Ze!=null&&le.push(wp(m,Ze,Re)))),m=m.return}le.length!==0&&c.push({event:f,listeners:le})}var PQ=/\r\n?/g,jQ=/\u0000|\uFFFD/g;function _B(c){return(typeof c=="string"?c:""+c).replace(PQ,`
`).replace(jQ,"")}function SB(c,f){return f=_B(f),_B(c)===f}function k1(){}function Gr(c,f,m,y,F,Q){switch(m){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||li(c,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&li(c,""+y);break;case"className":Ln(c,"class",y);break;case"tabIndex":Ln(c,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ln(c,m,y);break;case"style":Fu(c,y,Q);break;case"data":if(f!=="object"){Ln(c,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||m!=="href")){c.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=_o(""+y),c.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Q=="function"&&(m==="formAction"?(f!=="input"&&Gr(c,f,"name",F.name,F,null),Gr(c,f,"formEncType",F.formEncType,F,null),Gr(c,f,"formMethod",F.formMethod,F,null),Gr(c,f,"formTarget",F.formTarget,F,null)):(Gr(c,f,"encType",F.encType,F,null),Gr(c,f,"method",F.method,F,null),Gr(c,f,"target",F.target,F,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=_o(""+y),c.setAttribute(m,y);break;case"onClick":y!=null&&(c.onclick=k1);break;case"onScroll":y!=null&&tr("scroll",c);break;case"onScrollEnd":y!=null&&tr("scrollend",c);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(F.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":c.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){c.removeAttribute("xlink:href");break}m=_o(""+y),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""+y):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":y===!0?c.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,y):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?c.setAttribute(m,y):c.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?c.removeAttribute(m):c.setAttribute(m,y);break;case"popover":tr("beforetoggle",c),tr("toggle",c),Un(c,"popover",y);break;case"xlinkActuate":Qn(c,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qn(c,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qn(c,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qn(c,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qn(c,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qn(c,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Un(c,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Eo.get(m)||m,Un(c,m,y))}}function Ib(c,f,m,y,F,Q){switch(m){case"style":Fu(c,y,Q);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(F.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof y=="string"?li(c,y):(typeof y=="number"||typeof y=="bigint")&&li(c,""+y);break;case"onScroll":y!=null&&tr("scroll",c);break;case"onScrollEnd":y!=null&&tr("scrollend",c);break;case"onClick":y!=null&&(c.onclick=k1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(F=m.endsWith("Capture"),f=m.slice(2,F?m.length-7:void 0),Q=c[Zn]||null,Q=Q!=null?Q[m]:null,typeof Q=="function"&&c.removeEventListener(f,Q,F),typeof y=="function")){typeof Q!="function"&&Q!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(f,y,F);break e}m in c?c[m]=y:y===!0?c.setAttribute(m,""):Un(c,m,y)}}}function Xa(c,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tr("error",c),tr("load",c);var y=!1,F=!1,Q;for(Q in m)if(m.hasOwnProperty(Q)){var le=m[Q];if(le!=null)switch(Q){case"src":y=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Gr(c,f,Q,le,m,null)}}F&&Gr(c,f,"srcSet",m.srcSet,m,null),y&&Gr(c,f,"src",m.src,m,null);return;case"input":tr("invalid",c);var we=Q=le=F=null,Re=null,Ze=null;for(y in m)if(m.hasOwnProperty(y)){var ft=m[y];if(ft!=null)switch(y){case"name":F=ft;break;case"type":le=ft;break;case"checked":Re=ft;break;case"defaultChecked":Ze=ft;break;case"value":Q=ft;break;case"defaultValue":we=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,f));break;default:Gr(c,f,y,ft,m,null)}}Zo(c,Q,we,Re,Ze,le,F,!1),Xo(c);return;case"select":tr("invalid",c),y=le=Q=null;for(F in m)if(m.hasOwnProperty(F)&&(we=m[F],we!=null))switch(F){case"value":Q=we;break;case"defaultValue":le=we;break;case"multiple":y=we;default:Gr(c,f,F,we,m,null)}f=Q,m=le,c.multiple=!!y,f!=null?Ji(c,!!y,f,!1):m!=null&&Ji(c,!!y,m,!0);return;case"textarea":tr("invalid",c),Q=F=y=null;for(le in m)if(m.hasOwnProperty(le)&&(we=m[le],we!=null))switch(le){case"value":y=we;break;case"defaultValue":F=we;break;case"children":Q=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(91));break;default:Gr(c,f,le,we,m,null)}tl(c,y,F,Q),Xo(c);return;case"option":for(Re in m)if(m.hasOwnProperty(Re)&&(y=m[Re],y!=null))switch(Re){case"selected":c.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Gr(c,f,Re,y,m,null)}return;case"dialog":tr("beforetoggle",c),tr("toggle",c),tr("cancel",c),tr("close",c);break;case"iframe":case"object":tr("load",c);break;case"video":case"audio":for(y=0;y<yp.length;y++)tr(yp[y],c);break;case"image":tr("error",c),tr("load",c);break;case"details":tr("toggle",c);break;case"embed":case"source":case"link":tr("error",c),tr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in m)if(m.hasOwnProperty(Ze)&&(y=m[Ze],y!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Gr(c,f,Ze,y,m,null)}return;default:if(Ru(f)){for(ft in m)m.hasOwnProperty(ft)&&(y=m[ft],y!==void 0&&Ib(c,f,ft,y,m,void 0));return}}for(we in m)m.hasOwnProperty(we)&&(y=m[we],y!=null&&Gr(c,f,we,y,m,null))}function OQ(c,f,m,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,Q=null,le=null,we=null,Re=null,Ze=null,ft=null;for(st in m){var wt=m[st];if(m.hasOwnProperty(st)&&wt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Re=wt;default:y.hasOwnProperty(st)||Gr(c,f,st,null,y,wt)}}for(var rt in y){var st=y[rt];if(wt=m[rt],y.hasOwnProperty(rt)&&(st!=null||wt!=null))switch(rt){case"type":Q=st;break;case"name":F=st;break;case"checked":Ze=st;break;case"defaultChecked":ft=st;break;case"value":le=st;break;case"defaultValue":we=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,f));break;default:st!==wt&&Gr(c,f,rt,st,y,wt)}}wa(c,le,we,Re,Ze,ft,Q,F);return;case"select":st=le=we=rt=null;for(Q in m)if(Re=m[Q],m.hasOwnProperty(Q)&&Re!=null)switch(Q){case"value":break;case"multiple":st=Re;default:y.hasOwnProperty(Q)||Gr(c,f,Q,null,y,Re)}for(F in y)if(Q=y[F],Re=m[F],y.hasOwnProperty(F)&&(Q!=null||Re!=null))switch(F){case"value":rt=Q;break;case"defaultValue":we=Q;break;case"multiple":le=Q;default:Q!==Re&&Gr(c,f,F,Q,y,Re)}f=we,m=le,y=st,rt!=null?Ji(c,!!m,rt,!1):!!y!=!!m&&(f!=null?Ji(c,!!m,f,!0):Ji(c,!!m,m?[]:"",!1));return;case"textarea":st=rt=null;for(we in m)if(F=m[we],m.hasOwnProperty(we)&&F!=null&&!y.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Gr(c,f,we,null,y,F)}for(le in y)if(F=y[le],Q=m[le],y.hasOwnProperty(le)&&(F!=null||Q!=null))switch(le){case"value":rt=F;break;case"defaultValue":st=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:F!==Q&&Gr(c,f,le,F,y,Q)}gr(c,rt,st);return;case"option":for(var En in m)if(rt=m[En],m.hasOwnProperty(En)&&rt!=null&&!y.hasOwnProperty(En))switch(En){case"selected":c.selected=!1;break;default:Gr(c,f,En,null,y,rt)}for(Re in y)if(rt=y[Re],st=m[Re],y.hasOwnProperty(Re)&&rt!==st&&(rt!=null||st!=null))switch(Re){case"selected":c.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Gr(c,f,Re,rt,y,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in m)rt=m[hn],m.hasOwnProperty(hn)&&rt!=null&&!y.hasOwnProperty(hn)&&Gr(c,f,hn,null,y,rt);for(Ze in y)if(rt=y[Ze],st=m[Ze],y.hasOwnProperty(Ze)&&rt!==st&&(rt!=null||st!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,f));break;default:Gr(c,f,Ze,rt,y,st)}return;default:if(Ru(f)){for(var zr in m)rt=m[zr],m.hasOwnProperty(zr)&&rt!==void 0&&!y.hasOwnProperty(zr)&&Ib(c,f,zr,void 0,y,rt);for(ft in y)rt=y[ft],st=m[ft],!y.hasOwnProperty(ft)||rt===st||rt===void 0&&st===void 0||Ib(c,f,ft,rt,y,st);return}}for(var ze in m)rt=m[ze],m.hasOwnProperty(ze)&&rt!=null&&!y.hasOwnProperty(ze)&&Gr(c,f,ze,null,y,rt);for(wt in y)rt=y[wt],st=m[wt],!y.hasOwnProperty(wt)||rt===st||rt==null&&st==null||Gr(c,f,wt,rt,y,st)}var Fb=null,Rb=null;function I1(c){return c.nodeType===9?c:c.ownerDocument}function TB(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BB(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Db(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Ub=null;function QQ(){var c=window.event;return c&&c.type==="popstate"?c===Ub?!1:(Ub=c,!0):(Ub=null,!1)}var NB=typeof setTimeout=="function"?setTimeout:void 0,HQ=typeof clearTimeout=="function"?clearTimeout:void 0,kB=typeof Promise=="function"?Promise:void 0,VQ=typeof queueMicrotask=="function"?queueMicrotask:typeof kB<"u"?function(c){return kB.resolve(null).then(c).catch(GQ)}:NB;function GQ(c){setTimeout(function(){throw c})}function cd(c){return c==="head"}function IB(c,f){var m=f,y=0,F=0;do{var Q=m.nextSibling;if(c.removeChild(m),Q&&Q.nodeType===8)if(m=Q.data,m==="/$"){if(0<y&&8>y){m=y;var le=c.ownerDocument;if(m&1&&bp(le.documentElement),m&2&&bp(le.body),m&4)for(m=le.head,bp(m),le=m.firstChild;le;){var we=le.nextSibling,Re=le.nodeName;le[Ee]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&le.rel.toLowerCase()==="stylesheet"||m.removeChild(le),le=we}}if(F===0){c.removeChild(Q),kp(f);return}F--}else m==="$"||m==="$?"||m==="$!"?F++:y=m.charCodeAt(0)-48;else y=0;m=Q}while(m);kp(f)}function Lb(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Lb(m),_e(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function zQ(c,f,m,y){for(;c.nodeType===1;){var F=m;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(y){if(!c[Ee])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(Q=c.getAttribute("rel"),Q==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(Q!==F.rel||c.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||c.getAttribute("title")!==(F.title==null?null:F.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(Q=c.getAttribute("src"),(Q!==(F.src==null?null:F.src)||c.getAttribute("type")!==(F.type==null?null:F.type)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&Q&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var Q=F.name==null?null:""+F.name;if(F.type==="hidden"&&c.getAttribute("name")===Q)return c}else return c;if(c=oc(c.nextSibling),c===null)break}return null}function qQ(c,f,m){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=oc(c.nextSibling),c===null))return null;return c}function Mb(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function KQ(c,f){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")f();else{var y=function(){f(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),c._reactRetry=y}}function oc(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var Pb=null;function FB(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return c;f--}else m==="/$"&&f++}c=c.previousSibling}return null}function RB(c,f,m){switch(f=I1(m),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function bp(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);_e(c)}var yl=new Map,DB=new Set;function F1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var aA=X.d;X.d={f:WQ,r:$Q,D:YQ,C:JQ,L:XQ,m:ZQ,X:t9,S:e9,M:n9};function WQ(){var c=aA.f(),f=C1();return c||f}function $Q(c){var f=ke(c);f!==null&&f.tag===5&&f.type==="form"?Rf(f):aA.r(c)}var c0=typeof document>"u"?null:document;function UB(c,f,m){var y=c0;if(y&&typeof f=="string"&&f){var F=lr(f);F='link[rel="'+c+'"][href="'+F+'"]',typeof m=="string"&&(F+='[crossorigin="'+m+'"]'),DB.has(F)||(DB.add(F),c={rel:c,crossOrigin:m,href:f},y.querySelector(F)===null&&(f=y.createElement("link"),Xa(f,"link",c),Qe(f),y.head.appendChild(f)))}}function YQ(c){aA.D(c),UB("dns-prefetch",c,null)}function JQ(c,f){aA.C(c,f),UB("preconnect",c,f)}function XQ(c,f,m){aA.L(c,f,m);var y=c0;if(y&&c&&f){var F='link[rel="preload"][as="'+lr(f)+'"]';f==="image"&&m&&m.imageSrcSet?(F+='[imagesrcset="'+lr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(F+='[imagesizes="'+lr(m.imageSizes)+'"]')):F+='[href="'+lr(c)+'"]';var Q=F;switch(f){case"style":Q=u0(c);break;case"script":Q=A0(c)}yl.has(Q)||(c=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:c,as:f},m),yl.set(Q,c),y.querySelector(F)!==null||f==="style"&&y.querySelector(Cp(Q))||f==="script"&&y.querySelector(Ep(Q))||(f=y.createElement("link"),Xa(f,"link",c),Qe(f),y.head.appendChild(f)))}}function ZQ(c,f){aA.m(c,f);var m=c0;if(m&&c){var y=f&&typeof f.as=="string"?f.as:"script",F='link[rel="modulepreload"][as="'+lr(y)+'"][href="'+lr(c)+'"]',Q=F;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Q=A0(c)}if(!yl.has(Q)&&(c=d({rel:"modulepreload",href:c},f),yl.set(Q,c),m.querySelector(F)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ep(Q)))return}y=m.createElement("link"),Xa(y,"link",c),Qe(y),m.head.appendChild(y)}}}function e9(c,f,m){aA.S(c,f,m);var y=c0;if(y&&c){var F=tt(y).hoistableStyles,Q=u0(c);f=f||"default";var le=F.get(Q);if(!le){var we={loading:0,preload:null};if(le=y.querySelector(Cp(Q)))we.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},m),(m=yl.get(Q))&&jb(c,m);var Re=le=y.createElement("link");Qe(Re),Xa(Re,"link",c),Re._p=new Promise(function(Ze,ft){Re.onload=Ze,Re.onerror=ft}),Re.addEventListener("load",function(){we.loading|=1}),Re.addEventListener("error",function(){we.loading|=2}),we.loading|=4,R1(le,f,y)}le={type:"stylesheet",instance:le,count:1,state:we},F.set(Q,le)}}}function t9(c,f){aA.X(c,f);var m=c0;if(m&&c){var y=tt(m).hoistableScripts,F=A0(c),Q=y.get(F);Q||(Q=m.querySelector(Ep(F)),Q||(c=d({src:c,async:!0},f),(f=yl.get(F))&&Ob(c,f),Q=m.createElement("script"),Qe(Q),Xa(Q,"link",c),m.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},y.set(F,Q))}}function n9(c,f){aA.M(c,f);var m=c0;if(m&&c){var y=tt(m).hoistableScripts,F=A0(c),Q=y.get(F);Q||(Q=m.querySelector(Ep(F)),Q||(c=d({src:c,async:!0,type:"module"},f),(f=yl.get(F))&&Ob(c,f),Q=m.createElement("script"),Qe(Q),Xa(Q,"link",c),m.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},y.set(F,Q))}}function LB(c,f,m,y){var F=(F=ie.current)?F1(F):null;if(!F)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=u0(m.href),m=tt(F).hoistableStyles,y=m.get(f),y||(y={type:"style",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=u0(m.href);var Q=tt(F).hoistableStyles,le=Q.get(c);if(le||(F=F.ownerDocument||F,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Q.set(c,le),(Q=F.querySelector(Cp(c)))&&!Q._p&&(le.instance=Q,le.state.loading=5),yl.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},yl.set(c,m),Q||r9(F,c,m,le.state))),f&&y===null)throw Error(r(528,""));return le}if(f&&y!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=A0(m),m=tt(F).hoistableScripts,y=m.get(f),y||(y={type:"script",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function u0(c){return'href="'+lr(c)+'"'}function Cp(c){return'link[rel="stylesheet"]['+c+"]"}function MB(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function r9(c,f,m,y){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=c.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),Xa(f,"link",m),Qe(f),c.head.appendChild(f))}function A0(c){return'[src="'+lr(c)+'"]'}function Ep(c){return"script[async]"+c}function PB(c,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var y=c.querySelector('style[data-href~="'+lr(m.href)+'"]');if(y)return f.instance=y,Qe(y),y;var F=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(c.ownerDocument||c).createElement("style"),Qe(y),Xa(y,"style",F),R1(y,m.precedence,c),f.instance=y;case"stylesheet":F=u0(m.href);var Q=c.querySelector(Cp(F));if(Q)return f.state.loading|=4,f.instance=Q,Qe(Q),Q;y=MB(m),(F=yl.get(F))&&jb(y,F),Q=(c.ownerDocument||c).createElement("link"),Qe(Q);var le=Q;return le._p=new Promise(function(we,Re){le.onload=we,le.onerror=Re}),Xa(Q,"link",y),f.state.loading|=4,R1(Q,m.precedence,c),f.instance=Q;case"script":return Q=A0(m.src),(F=c.querySelector(Ep(Q)))?(f.instance=F,Qe(F),F):(y=m,(F=yl.get(Q))&&(y=d({},m),Ob(y,F)),c=c.ownerDocument||c,F=c.createElement("script"),Qe(F),Xa(F,"link",y),c.head.appendChild(F),f.instance=F);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,R1(y,m.precedence,c));return f.instance}function R1(c,f,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=y.length?y[y.length-1]:null,Q=F,le=0;le<y.length;le++){var we=y[le];if(we.dataset.precedence===f)Q=we;else if(Q!==F)break}Q?Q.parentNode.insertBefore(c,Q.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(c,f.firstChild))}function jb(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function Ob(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var D1=null;function jB(c,f,m){if(D1===null){var y=new Map,F=D1=new Map;F.set(m,y)}else F=D1,y=F.get(m),y||(y=new Map,F.set(m,y));if(y.has(c))return y;for(y.set(c,null),m=m.getElementsByTagName(c),F=0;F<m.length;F++){var Q=m[F];if(!(Q[Ee]||Q[or]||c==="link"&&Q.getAttribute("rel")==="stylesheet")&&Q.namespaceURI!=="http://www.w3.org/2000/svg"){var le=Q.getAttribute(f)||"";le=c+le;var we=y.get(le);we?we.push(Q):y.set(le,[Q])}}return y}function OB(c,f,m){c=c.ownerDocument||c,c.head.insertBefore(m,f==="title"?c.querySelector("head > title"):null)}function s9(c,f,m){if(m===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function QB(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var _p=null;function a9(){}function i9(c,f,m){if(_p===null)throw Error(r(475));var y=_p;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var F=u0(m.href),Q=c.querySelector(Cp(F));if(Q){c=Q._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(y.count++,y=U1.bind(y),c.then(y,y)),f.state.loading|=4,f.instance=Q,Qe(Q);return}Q=c.ownerDocument||c,m=MB(m),(F=yl.get(F))&&jb(m,F),Q=Q.createElement("link"),Qe(Q);var le=Q;le._p=new Promise(function(we,Re){le.onload=we,le.onerror=Re}),Xa(Q,"link",m),f.instance=Q}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=U1.bind(y),c.addEventListener("load",f),c.addEventListener("error",f))}}function o9(){if(_p===null)throw Error(r(475));var c=_p;return c.stylesheets&&c.count===0&&Qb(c,c.stylesheets),0<c.count?function(f){var m=setTimeout(function(){if(c.stylesheets&&Qb(c,c.stylesheets),c.unsuspend){var y=c.unsuspend;c.unsuspend=null,y()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(m)}}:null}function U1(){if(this.count--,this.count===0){if(this.stylesheets)Qb(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var L1=null;function Qb(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,L1=new Map,f.forEach(l9,c),L1=null,U1.call(c))}function l9(c,f){if(!(f.state.loading&4)){var m=L1.get(c);if(m)var y=m.get(null);else{m=new Map,L1.set(c,m);for(var F=c.querySelectorAll("link[data-precedence],style[data-precedence]"),Q=0;Q<F.length;Q++){var le=F[Q];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(m.set(le.dataset.precedence,le),y=le)}y&&m.set(null,y)}F=f.instance,le=F.getAttribute("data-precedence"),Q=m.get(le)||y,Q===y&&m.set(null,F),m.set(le,F),this.count++,y=U1.bind(this),F.addEventListener("load",y),F.addEventListener("error",y),Q?Q.parentNode.insertBefore(F,Q.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(F,c.firstChild)),f.state.loading|=4}}var Sp={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function c9(c,f,m,y,F,Q,le,we){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=y,this.onUncaughtError=F,this.onCaughtError=Q,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function HB(c,f,m,y,F,Q,le,we,Re,Ze,ft,wt){return c=new c9(c,f,m,le,we,Re,Ze,wt),f=1,Q===!0&&(f|=24),Q=Da(3,null,null,f),c.current=Q,Q.stateNode=c,f=$m(),f.refCount++,c.pooledCache=f,f.refCount++,Q.memoizedState={element:y,isDehydrated:m,cache:f},Me(Q),c}function VB(c){return c?(c=oa,c):oa}function GB(c,f,m,y,F,Q){F=VB(F),y.context===null?y.context=F:y.pendingContext=F,y=ct(f),y.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(y.callback=Q),m=vt(c,y,f),m!==null&&(jo(m,c,f),ht(m,c,f))}function zB(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<f?m:f}}function Hb(c,f){zB(c,f),(c=c.alternate)&&zB(c,f)}function qB(c){if(c.tag===13){var f=Wl(c,67108864);f!==null&&jo(f,c,67108864),Hb(c,67108864)}}var M1=!0;function u9(c,f,m,y){var F=q.T;q.T=null;var Q=X.p;try{X.p=2,Vb(c,f,m,y)}finally{X.p=Q,q.T=F}}function A9(c,f,m,y){var F=q.T;q.T=null;var Q=X.p;try{X.p=8,Vb(c,f,m,y)}finally{X.p=Q,q.T=F}}function Vb(c,f,m,y){if(M1){var F=Gb(y);if(F===null)kb(c,f,y,P1,m),WB(c,y);else if(f9(F,c,f,m,y))y.stopPropagation();else if(WB(c,y),f&4&&-1<d9.indexOf(c)){for(;F!==null;){var Q=ke(F);if(Q!==null)switch(Q.tag){case 3:if(Q=Q.stateNode,Q.current.memoizedState.isDehydrated){var le=mn(Q.pendingLanes);if(le!==0){var we=Q;for(we.pendingLanes|=2,we.entangledLanes|=2;le;){var Re=1<<31-Pt(le);we.entanglements[1]|=Re,le&=~Re}su(Q),(Rr&6)===0&&(w1=Ge()+500,vp(0))}}break;case 13:we=Wl(Q,2),we!==null&&jo(we,Q,2),C1(),Hb(Q,2)}if(Q=Gb(y),Q===null&&kb(c,f,y,P1,m),Q===F)break;F=Q}F!==null&&y.stopPropagation()}else kb(c,f,y,null,m)}}function Gb(c){return c=Ir(c),zb(c)}var P1=null;function zb(c){if(P1=null,c=Te(c),c!==null){var f=a(c);if(f===null)c=null;else{var m=f.tag;if(m===13){if(c=i(f),c!==null)return c;c=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return P1=c,null}function KB(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case it:return 2;case dt:return 8;case Ct:case ut:return 32;case kt:return 268435456;default:return 32}default:return 32}}var qb=!1,ud=null,Ad=null,dd=null,Tp=new Map,Bp=new Map,fd=[],d9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WB(c,f){switch(c){case"focusin":case"focusout":ud=null;break;case"dragenter":case"dragleave":Ad=null;break;case"mouseover":case"mouseout":dd=null;break;case"pointerover":case"pointerout":Tp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bp.delete(f.pointerId)}}function Np(c,f,m,y,F,Q){return c===null||c.nativeEvent!==Q?(c={blockedOn:f,domEventName:m,eventSystemFlags:y,nativeEvent:Q,targetContainers:[F]},f!==null&&(f=ke(f),f!==null&&qB(f)),c):(c.eventSystemFlags|=y,f=c.targetContainers,F!==null&&f.indexOf(F)===-1&&f.push(F),c)}function f9(c,f,m,y,F){switch(f){case"focusin":return ud=Np(ud,c,f,m,y,F),!0;case"dragenter":return Ad=Np(Ad,c,f,m,y,F),!0;case"mouseover":return dd=Np(dd,c,f,m,y,F),!0;case"pointerover":var Q=F.pointerId;return Tp.set(Q,Np(Tp.get(Q)||null,c,f,m,y,F)),!0;case"gotpointercapture":return Q=F.pointerId,Bp.set(Q,Np(Bp.get(Q)||null,c,f,m,y,F)),!0}return!1}function $B(c){var f=Te(c.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=i(m),f!==null){c.blockedOn=f,xa(c.priority,function(){if(m.tag===13){var y=Po();y=ra(y);var F=Wl(m,y);F!==null&&jo(F,m,y),Hb(m,y)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function j1(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var m=Gb(c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);Xi=y,m.target.dispatchEvent(y),Xi=null}else return f=ke(m),f!==null&&qB(f),c.blockedOn=m,!1;f.shift()}return!0}function YB(c,f,m){j1(c)&&m.delete(f)}function h9(){qb=!1,ud!==null&&j1(ud)&&(ud=null),Ad!==null&&j1(Ad)&&(Ad=null),dd!==null&&j1(dd)&&(dd=null),Tp.forEach(YB),Bp.forEach(YB)}function O1(c,f){c.blockedOn===f&&(c.blockedOn=null,qb||(qb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,h9)))}var Q1=null;function JB(c){Q1!==c&&(Q1=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Q1===c&&(Q1=null);for(var f=0;f<c.length;f+=3){var m=c[f],y=c[f+1],F=c[f+2];if(typeof y!="function"){if(zb(y||m)===null)continue;break}var Q=ke(m);Q!==null&&(c.splice(f,3),f-=3,gl(Q,{pending:!0,data:F,method:m.method,action:y},y,F))}}))}function kp(c){function f(Re){return O1(Re,c)}ud!==null&&O1(ud,c),Ad!==null&&O1(Ad,c),dd!==null&&O1(dd,c),Tp.forEach(f),Bp.forEach(f);for(var m=0;m<fd.length;m++){var y=fd[m];y.blockedOn===c&&(y.blockedOn=null)}for(;0<fd.length&&(m=fd[0],m.blockedOn===null);)$B(m),m.blockedOn===null&&fd.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var F=m[y],Q=m[y+1],le=F[Zn]||null;if(typeof Q=="function")le||JB(m);else if(le){var we=null;if(Q&&Q.hasAttribute("formAction")){if(F=Q,le=Q[Zn]||null)we=le.formAction;else if(zb(F)!==null)continue}else we=le.action;typeof we=="function"?m[y+1]=we:(m.splice(y,3),y-=3),JB(m)}}}function Kb(c){this._internalRoot=c}H1.prototype.render=Kb.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,y=Po();GB(m,y,c,f,null,null)},H1.prototype.unmount=Kb.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;GB(c.current,2,null,c,null,null),C1(),f[_r]=null}};function H1(c){this._internalRoot=c}H1.prototype.unstable_scheduleHydration=function(c){if(c){var f=ms();c={blockedOn:null,target:c,priority:f};for(var m=0;m<fd.length&&f!==0&&f<fd[m].priority;m++);fd.splice(m,0,c),m===0&&$B(c)}};var XB=e.version;if(XB!=="19.1.1")throw Error(r(527,XB,"19.1.1"));X.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var m9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var V1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!V1.isDisabled&&V1.supportsFiber)try{Mt=V1.inject(m9),Vt=V1}catch{}}return Fp.createRoot=function(c,f){if(!s(c))throw Error(r(299));var m=!1,y="",F=hT,Q=mT,le=pT,we=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(Q=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=HB(c,1,!1,null,null,m,y,F,Q,le,we,null),c[_r]=f.current,Nb(c),new Kb(f)},Fp.hydrateRoot=function(c,f,m){if(!s(c))throw Error(r(299));var y=!1,F="",Q=hT,le=mT,we=pT,Re=null,Ze=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(F=m.identifierPrefix),m.onUncaughtError!==void 0&&(Q=m.onUncaughtError),m.onCaughtError!==void 0&&(le=m.onCaughtError),m.onRecoverableError!==void 0&&(we=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Re=m.unstable_transitionCallbacks),m.formState!==void 0&&(Ze=m.formState)),f=HB(c,1,!0,f,m??null,y,F,Q,le,we,Re,Ze),f.context=VB(null),m=f.current,y=Po(),y=ra(y),F=ct(y),F.callback=null,vt(m,F,y),m=y,f.current.lanes=m,cs(f,m),su(f),c[_r]=f.current,Nb(c),new H1(f)},Fp.version="19.1.1",Fp}var lN;function E9(){if(lN)return Yb.exports;lN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yb.exports=C9(),Yb.exports}var _9=E9();const S9=OS(_9),T9=()=>{};var cN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},B9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],i=t[n++],o=t[n++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},ID={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let p=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||h==null)throw new N9;const p=a<<2|o>>4;if(r.push(p),u!==64){const g=o<<4&240|u>>2;if(r.push(g),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k9=function(t){const e=kD(t);return ID.encodeByteArray(e,!0)},b2=function(t){return k9(t).replace(/\./g,"")},FD=function(t){try{return ID.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=()=>I9().__FIREBASE_DEFAULTS__,R9=()=>{if(typeof process>"u"||typeof cN>"u")return;const t=cN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FD(t[1]);return e&&JSON.parse(e)},Ry=()=>{try{return T9()||F9()||R9()||D9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RD=t=>{var e,n;return(n=(e=Ry())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},U9=t=>{const e=RD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DD=()=>{var t;return(t=Ry())==null?void 0:t.config},UD=t=>{var e;return(e=Ry())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LD(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[b2(JSON.stringify(n)),b2(JSON.stringify(i)),""].join(".")}const hg={};function P9(){const t={prod:[],emulator:[]};for(const e of Object.keys(hg))hg[e]?t.emulator.push(e):t.prod.push(e);return t}function j9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let uN=!1;function MD(t,e){if(typeof window>"u"||typeof document>"u"||!Nm(window.location.host)||hg[t]===e||hg[t]||uN)return;hg[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",a=P9().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{uN=!0,i()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=j9(r),g=n("text"),b=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),C=document.getElementById(w)||document.createElement("a"),T=n("preprendIcon"),I=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const k=p.element;o(k),d(C,w);const R=u();l(I,T),k.append(I,b,C,R),document.body.appendChild(k)}a?(b.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Li())}function Q9(){var e;const t=(e=Ry())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z9(){const t=Li();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function q9(){return!Q9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K9(){try{return typeof indexedDB=="object"}catch{return!1}}function W9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="FirebaseError";class NA extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$9,Object.setPrototypeOf(this,NA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vx.prototype.create)}}class vx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?Y9(a,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new NA(s,o,r)}}function Y9(t,e){return t.replace(J9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const J9=/\{\$([^}]+)}/g;function X9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ch(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],i=e[s];if(AN(a)&&AN(i)){if(!ch(a,i))return!1}else if(a!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function AN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Wp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Z9(t,e){const n=new eH(t,e);return n.subscribe.bind(n)}class eH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tH(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=eC),s.error===void 0&&(s.error=eC),s.complete===void 0&&(s.complete=eC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return t&&t._delegate?t._delegate:t}class uh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nH=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new L9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sH(e))try{this.getOrInitializeService({instanceIdentifier:Qf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Qf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qf){return this.instances.has(e)}getOptions(e=Qf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&i.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qf){return this.component?this.component.multipleInstances?e:Qf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rH(t){return t===Qf?void 0:t}function sH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rr||(rr={}));const iH={debug:rr.DEBUG,verbose:rr.VERBOSE,info:rr.INFO,warn:rr.WARN,error:rr.ERROR,silent:rr.SILENT},oH=rr.INFO,lH={[rr.DEBUG]:"log",[rr.VERBOSE]:"log",[rr.INFO]:"info",[rr.WARN]:"warn",[rr.ERROR]:"error"},cH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lH[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let QS=class{constructor(e){this.name=e,this._logLevel=oH,this._logHandler=cH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rr.DEBUG,...e),this._logHandler(this,rr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rr.VERBOSE,...e),this._logHandler(this,rr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rr.INFO,...e),this._logHandler(this,rr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rr.WARN,...e),this._logHandler(this,rr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rr.ERROR,...e),this._logHandler(this,rr.ERROR,...e)}};const uH=(t,e)=>e.some(n=>t instanceof n);let dN,fN;function AH(){return dN||(dN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dH(){return fN||(fN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PD=new WeakMap,jE=new WeakMap,jD=new WeakMap,tC=new WeakMap,HS=new WeakMap;function fH(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{n(Pd(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&PD.set(n,t)}).catch(()=>{}),HS.set(e,t),e}function hH(t){if(jE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});jE.set(t,e)}let OE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mH(t){OE=t(OE)}function pH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nC(this),e,...n);return jD.set(r,e.sort?e.sort():[e]),Pd(r)}:dH().includes(t)?function(...e){return t.apply(nC(this),e),Pd(PD.get(this))}:function(...e){return Pd(t.apply(nC(this),e))}}function gH(t){return typeof t=="function"?pH(t):(t instanceof IDBTransaction&&hH(t),uH(t,AH())?new Proxy(t,OE):t)}function Pd(t){if(t instanceof IDBRequest)return fH(t);if(tC.has(t))return tC.get(t);const e=gH(t);return e!==t&&(tC.set(t,e),HS.set(e,t)),e}const nC=t=>HS.get(t);function xH(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=Pd(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Pd(i.result),l.oldVersion,l.newVersion,Pd(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const vH=["get","getKey","getAll","getAllKeys","count"],yH=["put","add","delete","clear"],rC=new Map;function hN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rC.get(e))return rC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vH.includes(n)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&l.done]))[0]};return rC.set(e,a),a}mH(t=>({...t,get:(e,n,r)=>hN(e,n)||t.get(e,n,r),has:(e,n)=>!!hN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const QE="@firebase/app",mN="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new QS("@firebase/app"),CH="@firebase/app-compat",EH="@firebase/analytics-compat",_H="@firebase/analytics",SH="@firebase/app-check-compat",TH="@firebase/app-check",BH="@firebase/auth",NH="@firebase/auth-compat",kH="@firebase/database",IH="@firebase/data-connect",FH="@firebase/database-compat",RH="@firebase/functions",DH="@firebase/functions-compat",UH="@firebase/installations",LH="@firebase/installations-compat",MH="@firebase/messaging",PH="@firebase/messaging-compat",jH="@firebase/performance",OH="@firebase/performance-compat",QH="@firebase/remote-config",HH="@firebase/remote-config-compat",VH="@firebase/storage",GH="@firebase/storage-compat",zH="@firebase/firestore",qH="@firebase/ai",KH="@firebase/firestore-compat",WH="firebase",$H="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="[DEFAULT]",YH={[QE]:"fire-core",[CH]:"fire-core-compat",[_H]:"fire-analytics",[EH]:"fire-analytics-compat",[TH]:"fire-app-check",[SH]:"fire-app-check-compat",[BH]:"fire-auth",[NH]:"fire-auth-compat",[kH]:"fire-rtdb",[IH]:"fire-data-connect",[FH]:"fire-rtdb-compat",[RH]:"fire-fn",[DH]:"fire-fn-compat",[UH]:"fire-iid",[LH]:"fire-iid-compat",[MH]:"fire-fcm",[PH]:"fire-fcm-compat",[jH]:"fire-perf",[OH]:"fire-perf-compat",[QH]:"fire-rc",[HH]:"fire-rc-compat",[VH]:"fire-gcs",[GH]:"fire-gcs-compat",[zH]:"fire-fst",[KH]:"fire-fst-compat",[qH]:"fire-vertex","fire-js":"fire-js",[WH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Map,JH=new Map,VE=new Map;function pN(t,e){try{t.container.addComponent(e)}catch(n){yA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hm(t){const e=t.name;if(VE.has(e))return yA.debug(`There were multiple attempts to register component ${e}.`),!1;VE.set(e,t);for(const n of C2.values())pN(n,t);for(const n of JH.values())pN(n,t);return!0}function VS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jd=new vx("app","Firebase",XH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=$H;function OD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:HE,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jd.create("bad-app-name",{appName:String(s)});if(n||(n=DD()),!n)throw jd.create("no-options");const a=C2.get(s);if(a){if(ch(n,a.options)&&ch(r,a.config))return a;throw jd.create("duplicate-app",{appName:s})}const i=new aH(s);for(const l of VE.values())i.addComponent(l);const o=new ZH(n,r,i);return C2.set(s,o),o}function QD(t=HE){const e=C2.get(t);if(!e&&t===HE&&DD())return OD();if(!e)throw jd.create("no-app",{appName:t});return e}function Od(t,e,n){let r=YH[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${r}" with version "${e}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yA.warn(i.join(" "));return}hm(new uh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firebase-heartbeat-database",tV=1,Lg="firebase-heartbeat-store";let sC=null;function HD(){return sC||(sC=xH(eV,tV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lg)}catch(n){console.warn(n)}}}}).catch(t=>{throw jd.create("idb-open",{originalErrorMessage:t.message})})),sC}async function nV(t){try{const n=(await HD()).transaction(Lg),r=await n.objectStore(Lg).get(VD(t));return await n.done,r}catch(e){if(e instanceof NA)yA.warn(e.message);else{const n=jd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yA.warn(n.message)}}}async function gN(t,e){try{const r=(await HD()).transaction(Lg,"readwrite");await r.objectStore(Lg).put(e,VD(t)),await r.done}catch(n){if(n instanceof NA)yA.warn(n.message);else{const r=jd.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yA.warn(r.message)}}}function VD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=1024,sV=30;class aV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>sV){const i=lV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xN(),{heartbeatsToSend:r,unsentEntries:s}=iV(this._heartbeatsCache.heartbeats),a=b2(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return yA.warn(n),""}}}function xN(){return new Date().toISOString().substring(0,10)}function iV(t,e=rV){const n=[];let r=t.slice();for(const s of t){const a=n.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),vN(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K9()?W9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vN(t){return b2(JSON.stringify({version:2,heartbeats:t})).length}function lV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){hm(new uh("platform-logger",e=>new wH(e),"PRIVATE")),hm(new uh("heartbeat",e=>new aV(e),"PRIVATE")),Od(QE,mN,t),Od(QE,mN,"esm2020"),Od("fire-js","")}cV("");function GD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uV=GD,zD=new vx("auth","Firebase",GD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new QS("@firebase/auth");function AV(t,...e){E2.logLevel<=rr.WARN&&E2.warn(`Auth (${km}): ${t}`,...e)}function Yv(t,...e){E2.logLevel<=rr.ERROR&&E2.error(`Auth (${km}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,...e){throw GS(t,...e)}function mu(t,...e){return GS(t,...e)}function qD(t,e,n){const r={...uV(),[e]:n};return new vx("auth","Firebase",r).create(e,{appName:t.name})}function Qd(t){return qD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zD.create(t,...e)}function bn(t,e,...n){if(!t)throw GS(e,...n)}function uA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yv(e),new Error(e)}function wA(t,e){t||uA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dV(){return yN()==="http:"||yN()==="https:"}function yN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dV()||V9()||"connection"in navigator)?navigator.onLine:!0}function hV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.shortDelay=e,this.longDelay=n,wA(n>e,"Short delay should be less than long delay!"),this.isMobile=O9()||G9()}get(){return fV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){wA(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;uA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;uA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;uA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gV=new wx(3e4,6e4);function cf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kA(t,e,n,r,s={}){return WD(t,s,async()=>{let a={},i={};r&&(e==="GET"?i=r:a={body:JSON.stringify(r)});const o=yx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return H9()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Nm(t.emulatorConfig.host)&&(u.credentials="include"),KD.fetch()(await $D(t,t.config.apiHost,n,o),u)})}async function WD(t,e,n){t._canInitEmulator=!1;const r={...mV,...e};try{const s=new vV(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw G1(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw G1(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw G1(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw G1(t,"user-disabled",i);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qD(t,d,u);bc(t,d)}}catch(s){if(s instanceof NA)throw s;bc(t,"network-request-failed",{message:String(s)})}}async function Dy(t,e,n,r,s={}){const a=await kA(t,e,n,r,s);return"mfaPendingCredential"in a&&bc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function $D(t,e,n,r){const s=`${e}${n}?${r}`,a=t,i=a.config.emulator?zS(t.config,s):`${t.config.apiScheme}://${s}`;return pV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function xV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mu(this.auth,"network-request-failed")),gV.get())})}}function G1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mu(t,e,r);return s.customData._tokenResponse=n,s}function wN(t){return t!==void 0&&t.enterprise!==void 0}class yV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wV(t,e){return kA(t,"GET","/v2/recaptchaConfig",cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e){return kA(t,"POST","/v1/accounts:delete",e)}async function _2(t,e){return kA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CV(t,e=!1){const n=Ga(t),r=await n.getIdToken(e),s=qS(r);bn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:mg(aC(s.auth_time)),issuedAtTime:mg(aC(s.iat)),expirationTime:mg(aC(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function aC(t){return Number(t)*1e3}function qS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yv("JWT malformed, contained fewer than 3 sections"),null;try{const s=FD(n);return s?JSON.parse(s):(Yv("Failed to decode base64 JWT payload"),null)}catch(s){return Yv("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bN(t){const e=qS(t);return bn(e,"internal-error"),bn(typeof e.exp<"u","internal-error"),bn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof NA&&EV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mg(this.lastLoginAt),this.creationTime=mg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Mg(t,_2(e,{idToken:n}));bn(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?YD(s.providerUserInfo):[],i=TV(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new zE(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function SV(t){const e=Ga(t);await S2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function YD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){const n=await WD(t,{},async()=>{const r=yx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await $D(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Nm(t.emulatorConfig.host)&&(l.credentials="include"),KD.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NV(t,e){return kA(t,"POST","/v2/accounts:revokeToken",cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bn(e.idToken,"internal-error"),bn(typeof e.idToken<"u","internal-error"),bn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bn(e.length!==0,"internal-error");const n=bN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await BV(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,i=new q0;return r&&(bn(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(bn(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(bn(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new q0,this.toJSON())}_performRefresh(){return uA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e){bn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pc{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new _V(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mg(this,this.stsTokenManager.getToken(this.auth,e));return bn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CV(this,e)}reload(){return SV(this)}_assign(e){this!==e&&(bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await S2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fc(this.auth.app))return Promise.reject(Qd(this.auth));const e=await this.getIdToken();return await Mg(this,bV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:b,stsTokenManager:w}=n;bn(h&&w,e,"internal-error");const C=q0.fromJSON(this.name,w);bn(typeof h=="string",e,"internal-error"),md(r,e.name),md(s,e.name),bn(typeof p=="boolean",e,"internal-error"),bn(typeof g=="boolean",e,"internal-error"),md(a,e.name),md(i,e.name),md(o,e.name),md(l,e.name),md(u,e.name),md(d,e.name);const T=new pc({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:C,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(T.providerData=b.map(I=>({...I}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new q0;s.updateFromServerResponse(n);const a=new pc({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await S2(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];bn(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?YD(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new q0;o.updateFromIdToken(r);const l=new pc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Map;function AA(t){wA(t instanceof Function,"Expected a class definition");let e=CN.get(t);return e?(wA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JD.type="NONE";const EN=JD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e,n){return`firebase:${t}:${e}:${n}`}class K0{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Jv(this.userKey,s.apiKey,a),this.fullPersistenceKey=Jv("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _2(this.auth,{idToken:e}).catch(()=>{});return n?pc._fromGetAccountInfoResponse(this.auth,n,e):null}return pc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new K0(AA(EN),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||AA(EN);const i=Jv(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const p=await _2(e,{idToken:d}).catch(()=>{});if(!p)break;h=await pc._fromGetAccountInfoResponse(e,p,d)}else h=pc._fromJSON(e,d);u!==a&&(o=h),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new K0(a,e,r):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new K0(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rU(e))return"Blackberry";if(sU(e))return"Webos";if(ZD(e))return"Safari";if((e.includes("chrome/")||eU(e))&&!e.includes("edge/"))return"Chrome";if(nU(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XD(t=Li()){return/firefox\//i.test(t)}function ZD(t=Li()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eU(t=Li()){return/crios\//i.test(t)}function tU(t=Li()){return/iemobile/i.test(t)}function nU(t=Li()){return/android/i.test(t)}function rU(t=Li()){return/blackberry/i.test(t)}function sU(t=Li()){return/webos/i.test(t)}function KS(t=Li()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kV(t=Li()){var e;return KS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function IV(){return z9()&&document.documentMode===10}function aU(t=Li()){return KS(t)||nU(t)||sU(t)||rU(t)||/windows phone/i.test(t)||tU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e=[]){let n;switch(t){case"Browser":n=_N(Li());break;case"Worker":n=`${_N(Li())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${km}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e={}){return kA(t,"GET","/v2/passwordPolicy",cf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=6;class UV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SN(this),this.idTokenSubscription=new SN(this),this.beforeStateQueue=new FV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=AA(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await K0.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _2(this,{idToken:e}),r=await pc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(fc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await S2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fc(this.app))return Promise.reject(Qd(this));const n=e?Ga(e):null;return n&&bn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fc(this.app)?Promise.reject(Qd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fc(this.app)?Promise.reject(Qd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(AA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RV(this),n=new UV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&AA(e)||this._popupRedirectResolver;bn(n,this,"argument-error"),this.redirectPersistenceManager=await K0.create(this,[AA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bn(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(fc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&AV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ch(t){return Ga(t)}class SN{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z9(n=>this.observer=n)}get next(){return bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MV(t){Uy=t}function oU(t){return Uy.loadJS(t)}function PV(){return Uy.recaptchaEnterpriseScript}function jV(){return Uy.gapiScript}function OV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QV{constructor(){this.enterprise=new HV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VV="recaptcha-enterprise",lU="NO_RECAPTCHA";class GV{constructor(e){this.type=VV,this.auth=Ch(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{wV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new yV(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;wN(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(lU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QV().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{r(this.auth).then(o=>{if(!n&&wN(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PV();l.length!==0&&(l+=o),oU(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function TN(t,e,n,r=!1,s=!1){const a=new GV(t);let i;if(s)i=lU;else try{i=await a.verify(n)}catch{i=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qE(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await TN(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await TN(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e){const n=VS(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ch(a,e??{}))return s;bc(s,"already-initialized")}return n.initialize({options:e})}function qV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(AA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KV(t,e,n){const r=Ch(t);bn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=cU(e),{host:i,port:o}=WV(e),l=o===null?"":`:${o}`,u={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){bn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bn(ch(u,r.config.emulator)&&ch(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Nm(i)?(LD(`${a}//${i}${l}`),MD("Auth",!0)):$V()}function cU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WV(t){const e=cU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:BN(r.substr(a.length+1))}}else{const[a,i]=r.split(":");return{host:a,port:BN(i)}}}function BN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $V(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return uA("not implemented")}_getIdTokenResponse(e){return uA("not implemented")}_linkToIdToken(e,n){return uA("not implemented")}_getReauthenticationResolver(e){return uA("not implemented")}}async function YV(t,e){return kA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e){return Dy(t,"POST","/v1/accounts:signInWithPassword",cf(t,e))}async function XV(t,e){return kA(t,"POST","/v1/accounts:sendOobCode",cf(t,e))}async function ZV(t,e){return XV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eG(t,e){return Dy(t,"POST","/v1/accounts:signInWithEmailLink",cf(t,e))}async function tG(t,e){return Dy(t,"POST","/v1/accounts:signInWithEmailLink",cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends WS{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qE(e,n,"signInWithPassword",JV);case"emailLink":return eG(e,{email:this._email,oobCode:this._password});default:bc(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qE(e,r,"signUpPassword",YV);case"emailLink":return tG(e,{idToken:n,email:this._email,oobCode:this._password});default:bc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(t,e){return Dy(t,"POST","/v1/accounts:signInWithIdp",cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG="http://localhost";class Ah extends WS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ah(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const i=new Ah(r,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return W0(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,W0(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,W0(e,n)}buildRequest(){const e={requestUri:nG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yx(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sG(t){const e=Kp(Wp(t)).link,n=e?Kp(Wp(e)).deep_link_id:null,r=Kp(Wp(t)).deep_link_id;return(r?Kp(Wp(r)).link:null)||r||n||e||t}class $S{constructor(e){const n=Kp(Wp(e)),r=n.apiKey??null,s=n.oobCode??null,a=rG(n.mode??null);bn(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=sG(e);try{return new $S(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.providerId=Im.PROVIDER_ID}static credential(e,n){return Pg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$S.parseLink(n);return bn(r,"argument-error"),Pg._fromEmailAndCode(e,r.code,r.tenantId)}}Im.PROVIDER_ID="password";Im.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Im.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends uU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends bx{constructor(){super("facebook.com")}static credential(e){return Ah._fromParams({providerId:Sd.PROVIDER_ID,signInMethod:Sd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sd.credentialFromTaggedObject(e)}static credentialFromError(e){return Sd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sd.credential(e.oauthAccessToken)}catch{return null}}}Sd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends bx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ah._fromParams({providerId:Td.PROVIDER_ID,signInMethod:Td.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Td.credentialFromTaggedObject(e)}static credentialFromError(e){return Td.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Td.credential(n,r)}catch{return null}}}Td.GOOGLE_SIGN_IN_METHOD="google.com";Td.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends bx{constructor(){super("github.com")}static credential(e){return Ah._fromParams({providerId:Bd.PROVIDER_ID,signInMethod:Bd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bd.credentialFromTaggedObject(e)}static credentialFromError(e){return Bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bd.credential(e.oauthAccessToken)}catch{return null}}}Bd.GITHUB_SIGN_IN_METHOD="github.com";Bd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends bx{constructor(){super("twitter.com")}static credential(e,n){return Ah._fromParams({providerId:Nd.PROVIDER_ID,signInMethod:Nd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nd.credentialFromTaggedObject(e)}static credentialFromError(e){return Nd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nd.credential(n,r)}catch{return null}}}Nd.TWITTER_SIGN_IN_METHOD="twitter.com";Nd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await pc._fromIdTokenResponse(e,r,s),i=NN(r);return new mm({user:a,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=NN(r);return new mm({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function NN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2 extends NA{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,T2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new T2(e,n,r,s)}}function AU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?T2._fromErrorAndOperation(t,a,e,r):a})}async function aG(t,e,n=!1){const r=await Mg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mm._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iG(t,e,n=!1){const{auth:r}=t;if(fc(r.app))return Promise.reject(Qd(r));const s="reauthenticate";try{const a=await Mg(t,AU(r,s,e,t),n);bn(a.idToken,r,"internal-error");const i=qS(a.idToken);bn(i,r,"internal-error");const{sub:o}=i;return bn(t.uid===o,r,"user-mismatch"),mm._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&bc(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(t,e,n=!1){if(fc(t.app))return Promise.reject(Qd(t));const r="signIn",s=await AU(t,r,e),a=await mm._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function oG(t,e){return dU(Ch(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lG(t){const e=Ch(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cG(t,e,n){const r=Ch(t);await qE(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ZV)}function uG(t,e,n){return fc(t.app)?Promise.reject(Qd(t)):oG(Ga(t),Im.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lG(t),r})}function AG(t,e,n,r){return Ga(t).onIdTokenChanged(e,n,r)}function dG(t,e,n){return Ga(t).beforeAuthStateChanged(e,n)}function fG(t,e,n,r){return Ga(t).onAuthStateChanged(e,n,r)}function hG(t){return Ga(t).signOut()}const B2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(B2,"1"),this.storage.removeItem(B2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=1e3,pG=10;class hU extends fU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},a=this.storage.getItem(r);IV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pG):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hU.type="LOCAL";const gG=hU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU extends fU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mU.type="SESSION";const pU=mU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ly(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async u=>u(n.origin,a)),l=await xG(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ly.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=YS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return window}function yG(t){pu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){return typeof pu().WorkerGlobalScope<"u"&&typeof pu().importScripts=="function"}async function wG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function CG(){return gU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="firebaseLocalStorageDb",EG=1,N2="firebaseLocalStorage",vU="fbase_key";class Cx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function My(t,e){return t.transaction([N2],e?"readwrite":"readonly").objectStore(N2)}function _G(){const t=indexedDB.deleteDatabase(xU);return new Cx(t).toPromise()}function KE(){const t=indexedDB.open(xU,EG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(N2,{keyPath:vU})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(N2)?e(r):(r.close(),await _G(),e(await KE()))})})}async function kN(t,e,n){const r=My(t,!0).put({[vU]:e,value:n});return new Cx(r).toPromise()}async function SG(t,e){const n=My(t,!1).get(e),r=await new Cx(n).toPromise();return r===void 0?null:r.value}function IN(t,e){const n=My(t,!0).delete(e);return new Cx(n).toPromise()}const TG=800,BG=3;class yU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BG)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ly._getInstance(CG()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await wG(),!this.activeServiceWorker)return;this.sender=new vG(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KE();return await kN(e,B2,"1"),await IN(e,B2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SG(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>IN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=My(s,!1).getAll();return new Cx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yU.type="LOCAL";const NG=yU;new wx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(t,e){return e?AA(e):(bn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends WS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return W0(e,this._buildIdpRequest())}_linkToIdToken(e,n){return W0(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return W0(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IG(t){return dU(t.auth,new JS(t),t.bypassAuthState)}function FG(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),iG(n,new JS(t),t.bypassAuthState)}async function RG(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),aG(n,new JS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IG;case"linkViaPopup":case"linkViaRedirect":return RG;case"reauthViaPopup":case"reauthViaRedirect":return FG;default:bc(this.auth,"internal-error")}}resolve(e){wA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=new wx(2e3,1e4);class O0 extends wU{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,O0.currentPopupAction&&O0.currentPopupAction.cancel(),O0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bn(e,this.auth,"internal-error"),e}async onExecution(){wA(this.filter.length===1,"Popup operations only handle one event");const e=YS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DG.get())};e()}}O0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UG="pendingRedirect",Xv=new Map;class LG extends wU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xv.get(this.auth._key());if(!e){try{const r=await MG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xv.set(this.auth._key(),e)}return this.bypassAuthState||Xv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MG(t,e){const n=OG(e),r=jG(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function PG(t,e){Xv.set(t._key(),e)}function jG(t){return AA(t._redirectPersistence)}function OG(t){return Jv(UG,t.config.apiKey,t.name)}async function QG(t,e,n=!1){if(fc(t.app))return Promise.reject(Qd(t));const r=Ch(t),s=kG(r,e),i=await new LG(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG=600*1e3;class VG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bU(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(mu(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HG&&this.cachedEventUids.clear(),this.cachedEventUids.has(FN(e))}saveEventToCache(e){this.cachedEventUids.add(FN(e)),this.lastProcessedEventTime=Date.now()}}function FN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zG(t,e={}){return kA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KG=/^https?/;async function WG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zG(t);for(const n of e)try{if($G(n))return}catch{}bc(t,"unauthorized-domain")}function $G(t){const e=GE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!KG.test(n))return!1;if(qG.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG=new wx(3e4,6e4);function RN(){const t=pu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JG(t){return new Promise((e,n)=>{var s,a,i;function r(){RN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RN(),n(mu(t,"network-request-failed"))},timeout:YG.get()})}if((a=(s=pu().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=pu().gapi)!=null&&i.load)r();else{const o=OV("iframefcb");return pu()[o]=()=>{gapi.load?r():n(mu(t,"network-request-failed"))},oU(`${jV()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Zv=null,e})}let Zv=null;function XG(t){return Zv=Zv||JG(t),Zv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZG=new wx(5e3,15e3),ez="__/auth/iframe",tz="emulator/auth/iframe",nz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sz(t){const e=t.config;bn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zS(e,tz):`https://${t.config.authDomain}/${ez}`,r={apiKey:e.apiKey,appName:t.name,v:km},s=rz.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${yx(r).slice(1)}`}async function az(t){const e=await XG(t),n=pu().gapi;return bn(n,t,"internal-error"),e.open({where:document.body,url:sz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nz,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const i=mu(t,"network-request-failed"),o=pu().setTimeout(()=>{a(i)},ZG.get());function l(){pu().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oz=500,lz=600,cz="_blank",uz="http://localhost";class DN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Az(t,e,n,r=oz,s=lz){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...iz,width:r.toString(),height:s.toString(),top:a,left:i},u=Li().toLowerCase();n&&(o=eU(u)?cz:n),XD(u)&&(e=e||uz,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(kV(u)&&o!=="_self")return dz(e||"",o),new DN(null);const h=window.open(e||"",o,d);bn(h,t,"popup-blocked");try{h.focus()}catch{}return new DN(h)}function dz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz="__/auth/handler",hz="emulator/auth/handler",mz=encodeURIComponent("fac");async function UN(t,e,n,r,s,a){bn(t.config.authDomain,t,"auth-domain-config-required"),bn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:km,eventId:s};if(e instanceof uU){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",X9(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof bx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${mz}=${encodeURIComponent(l)}`:"";return`${pz(t)}?${yx(o).slice(1)}${u}`}function pz({config:t}){return t.emulator?zS(t,hz):`https://${t.authDomain}/${fz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="webStorageSupport";class gz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pU,this._completeRedirectFn=QG,this._overrideRedirectResult=PG}async _openPopup(e,n,r,s){var i;wA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await UN(e,n,r,GE(),s);return Az(e,a,YS())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await UN(e,n,r,GE(),s);return yG(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(wA(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await az(e),r=new VG(e);return n.register("authEvent",s=>(bn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iC,{type:iC},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[iC];a!==void 0&&n(!!a),bc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aU()||ZD()||KS()}}const xz=gz;var LN="@firebase/auth",MN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wz(t){hm(new uh("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;bn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iU(t)},u=new LV(r,s,a,l);return qV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hm(new uh("auth-internal",e=>{const n=Ch(e.getProvider("auth").getImmediate());return(r=>new vz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Od(LN,MN,yz(t)),Od(LN,MN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=300,Cz=UD("authIdTokenMaxAge")||bz;let PN=null;const Ez=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Cz)return;const s=n==null?void 0:n.token;PN!==s&&(PN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _z(t=QD()){const e=VS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zV(t,{popupRedirectResolver:xz,persistence:[NG,gG,pU]}),r=UD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const i=Ez(a.toString());dG(n,i,()=>i(n.currentUser)),AG(n,o=>i(o))}}const s=RD("auth");return s&&KV(n,`http://${s}`),n}function Sz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}MV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=mu("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Sz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wz("Browser");var Tz="firebase",Bz="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Od(Tz,Bz,"app");var jN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hd,CU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,N){function B(){}B.prototype=N.prototype,_.D=N.prototype,_.prototype=new B,_.prototype.constructor=_,_.C=function(O,M,L){for(var H=Array(arguments.length-2),G=2;G<arguments.length;G++)H[G-2]=arguments[G];return N.prototype[M].apply(O,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,N,B){B||(B=0);var O=Array(16);if(typeof N=="string")for(var M=0;16>M;++M)O[M]=N.charCodeAt(B++)|N.charCodeAt(B++)<<8|N.charCodeAt(B++)<<16|N.charCodeAt(B++)<<24;else for(M=0;16>M;++M)O[M]=N[B++]|N[B++]<<8|N[B++]<<16|N[B++]<<24;N=_.g[0],B=_.g[1],M=_.g[2];var L=_.g[3],H=N+(L^B&(M^L))+O[0]+3614090360&4294967295;N=B+(H<<7&4294967295|H>>>25),H=L+(M^N&(B^M))+O[1]+3905402710&4294967295,L=N+(H<<12&4294967295|H>>>20),H=M+(B^L&(N^B))+O[2]+606105819&4294967295,M=L+(H<<17&4294967295|H>>>15),H=B+(N^M&(L^N))+O[3]+3250441966&4294967295,B=M+(H<<22&4294967295|H>>>10),H=N+(L^B&(M^L))+O[4]+4118548399&4294967295,N=B+(H<<7&4294967295|H>>>25),H=L+(M^N&(B^M))+O[5]+1200080426&4294967295,L=N+(H<<12&4294967295|H>>>20),H=M+(B^L&(N^B))+O[6]+2821735955&4294967295,M=L+(H<<17&4294967295|H>>>15),H=B+(N^M&(L^N))+O[7]+4249261313&4294967295,B=M+(H<<22&4294967295|H>>>10),H=N+(L^B&(M^L))+O[8]+1770035416&4294967295,N=B+(H<<7&4294967295|H>>>25),H=L+(M^N&(B^M))+O[9]+2336552879&4294967295,L=N+(H<<12&4294967295|H>>>20),H=M+(B^L&(N^B))+O[10]+4294925233&4294967295,M=L+(H<<17&4294967295|H>>>15),H=B+(N^M&(L^N))+O[11]+2304563134&4294967295,B=M+(H<<22&4294967295|H>>>10),H=N+(L^B&(M^L))+O[12]+1804603682&4294967295,N=B+(H<<7&4294967295|H>>>25),H=L+(M^N&(B^M))+O[13]+4254626195&4294967295,L=N+(H<<12&4294967295|H>>>20),H=M+(B^L&(N^B))+O[14]+2792965006&4294967295,M=L+(H<<17&4294967295|H>>>15),H=B+(N^M&(L^N))+O[15]+1236535329&4294967295,B=M+(H<<22&4294967295|H>>>10),H=N+(M^L&(B^M))+O[1]+4129170786&4294967295,N=B+(H<<5&4294967295|H>>>27),H=L+(B^M&(N^B))+O[6]+3225465664&4294967295,L=N+(H<<9&4294967295|H>>>23),H=M+(N^B&(L^N))+O[11]+643717713&4294967295,M=L+(H<<14&4294967295|H>>>18),H=B+(L^N&(M^L))+O[0]+3921069994&4294967295,B=M+(H<<20&4294967295|H>>>12),H=N+(M^L&(B^M))+O[5]+3593408605&4294967295,N=B+(H<<5&4294967295|H>>>27),H=L+(B^M&(N^B))+O[10]+38016083&4294967295,L=N+(H<<9&4294967295|H>>>23),H=M+(N^B&(L^N))+O[15]+3634488961&4294967295,M=L+(H<<14&4294967295|H>>>18),H=B+(L^N&(M^L))+O[4]+3889429448&4294967295,B=M+(H<<20&4294967295|H>>>12),H=N+(M^L&(B^M))+O[9]+568446438&4294967295,N=B+(H<<5&4294967295|H>>>27),H=L+(B^M&(N^B))+O[14]+3275163606&4294967295,L=N+(H<<9&4294967295|H>>>23),H=M+(N^B&(L^N))+O[3]+4107603335&4294967295,M=L+(H<<14&4294967295|H>>>18),H=B+(L^N&(M^L))+O[8]+1163531501&4294967295,B=M+(H<<20&4294967295|H>>>12),H=N+(M^L&(B^M))+O[13]+2850285829&4294967295,N=B+(H<<5&4294967295|H>>>27),H=L+(B^M&(N^B))+O[2]+4243563512&4294967295,L=N+(H<<9&4294967295|H>>>23),H=M+(N^B&(L^N))+O[7]+1735328473&4294967295,M=L+(H<<14&4294967295|H>>>18),H=B+(L^N&(M^L))+O[12]+2368359562&4294967295,B=M+(H<<20&4294967295|H>>>12),H=N+(B^M^L)+O[5]+4294588738&4294967295,N=B+(H<<4&4294967295|H>>>28),H=L+(N^B^M)+O[8]+2272392833&4294967295,L=N+(H<<11&4294967295|H>>>21),H=M+(L^N^B)+O[11]+1839030562&4294967295,M=L+(H<<16&4294967295|H>>>16),H=B+(M^L^N)+O[14]+4259657740&4294967295,B=M+(H<<23&4294967295|H>>>9),H=N+(B^M^L)+O[1]+2763975236&4294967295,N=B+(H<<4&4294967295|H>>>28),H=L+(N^B^M)+O[4]+1272893353&4294967295,L=N+(H<<11&4294967295|H>>>21),H=M+(L^N^B)+O[7]+4139469664&4294967295,M=L+(H<<16&4294967295|H>>>16),H=B+(M^L^N)+O[10]+3200236656&4294967295,B=M+(H<<23&4294967295|H>>>9),H=N+(B^M^L)+O[13]+681279174&4294967295,N=B+(H<<4&4294967295|H>>>28),H=L+(N^B^M)+O[0]+3936430074&4294967295,L=N+(H<<11&4294967295|H>>>21),H=M+(L^N^B)+O[3]+3572445317&4294967295,M=L+(H<<16&4294967295|H>>>16),H=B+(M^L^N)+O[6]+76029189&4294967295,B=M+(H<<23&4294967295|H>>>9),H=N+(B^M^L)+O[9]+3654602809&4294967295,N=B+(H<<4&4294967295|H>>>28),H=L+(N^B^M)+O[12]+3873151461&4294967295,L=N+(H<<11&4294967295|H>>>21),H=M+(L^N^B)+O[15]+530742520&4294967295,M=L+(H<<16&4294967295|H>>>16),H=B+(M^L^N)+O[2]+3299628645&4294967295,B=M+(H<<23&4294967295|H>>>9),H=N+(M^(B|~L))+O[0]+4096336452&4294967295,N=B+(H<<6&4294967295|H>>>26),H=L+(B^(N|~M))+O[7]+1126891415&4294967295,L=N+(H<<10&4294967295|H>>>22),H=M+(N^(L|~B))+O[14]+2878612391&4294967295,M=L+(H<<15&4294967295|H>>>17),H=B+(L^(M|~N))+O[5]+4237533241&4294967295,B=M+(H<<21&4294967295|H>>>11),H=N+(M^(B|~L))+O[12]+1700485571&4294967295,N=B+(H<<6&4294967295|H>>>26),H=L+(B^(N|~M))+O[3]+2399980690&4294967295,L=N+(H<<10&4294967295|H>>>22),H=M+(N^(L|~B))+O[10]+4293915773&4294967295,M=L+(H<<15&4294967295|H>>>17),H=B+(L^(M|~N))+O[1]+2240044497&4294967295,B=M+(H<<21&4294967295|H>>>11),H=N+(M^(B|~L))+O[8]+1873313359&4294967295,N=B+(H<<6&4294967295|H>>>26),H=L+(B^(N|~M))+O[15]+4264355552&4294967295,L=N+(H<<10&4294967295|H>>>22),H=M+(N^(L|~B))+O[6]+2734768916&4294967295,M=L+(H<<15&4294967295|H>>>17),H=B+(L^(M|~N))+O[13]+1309151649&4294967295,B=M+(H<<21&4294967295|H>>>11),H=N+(M^(B|~L))+O[4]+4149444226&4294967295,N=B+(H<<6&4294967295|H>>>26),H=L+(B^(N|~M))+O[11]+3174756917&4294967295,L=N+(H<<10&4294967295|H>>>22),H=M+(N^(L|~B))+O[2]+718787259&4294967295,M=L+(H<<15&4294967295|H>>>17),H=B+(L^(M|~N))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+N&4294967295,_.g[1]=_.g[1]+(M+(H<<21&4294967295|H>>>11))&4294967295,_.g[2]=_.g[2]+M&4294967295,_.g[3]=_.g[3]+L&4294967295}r.prototype.u=function(_,N){N===void 0&&(N=_.length);for(var B=N-this.blockSize,O=this.B,M=this.h,L=0;L<N;){if(M==0)for(;L<=B;)s(this,_,L),L+=this.blockSize;if(typeof _=="string"){for(;L<N;)if(O[M++]=_.charCodeAt(L++),M==this.blockSize){s(this,O),M=0;break}}else for(;L<N;)if(O[M++]=_[L++],M==this.blockSize){s(this,O),M=0;break}}this.h=M,this.o+=N},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var N=1;N<_.length-8;++N)_[N]=0;var B=8*this.o;for(N=_.length-8;N<_.length;++N)_[N]=B&255,B/=256;for(this.u(_),_=Array(16),N=B=0;4>N;++N)for(var O=0;32>O;O+=8)_[B++]=this.g[N]>>>O&255;return _};function a(_,N){var B=o;return Object.prototype.hasOwnProperty.call(B,_)?B[_]:B[_]=N(_)}function i(_,N){this.h=N;for(var B=[],O=!0,M=_.length-1;0<=M;M--){var L=_[M]|0;O&&L==N||(B[M]=L,O=!1)}this.g=B}var o={};function l(_){return-128<=_&&128>_?a(_,function(N){return new i([N|0],0>N?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return h;if(0>_)return C(u(-_));for(var N=[],B=1,O=0;_>=B;O++)N[O]=_/B|0,B*=4294967296;return new i(N,0)}function d(_,N){if(_.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(_.charAt(0)=="-")return C(d(_.substring(1),N));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(N,8)),O=h,M=0;M<_.length;M+=8){var L=Math.min(8,_.length-M),H=parseInt(_.substring(M,M+L),N);8>L?(L=u(Math.pow(N,L)),O=O.j(L).add(u(H))):(O=O.j(B),O=O.add(u(H)))}return O}var h=l(0),p=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(w(this))return-C(this).m();for(var _=0,N=1,B=0;B<this.g.length;B++){var O=this.i(B);_+=(0<=O?O:4294967296+O)*N,N*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(w(this))return"-"+C(this).toString(_);for(var N=u(Math.pow(_,6)),B=this,O="";;){var M=R(B,N).g;B=T(B,M.j(N));var L=((0<B.g.length?B.g[0]:B.h)>>>0).toString(_);if(B=M,b(B))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var N=0;N<_.g.length;N++)if(_.g[N]!=0)return!1;return!0}function w(_){return _.h==-1}t.l=function(_){return _=T(this,_),w(_)?-1:b(_)?0:1};function C(_){for(var N=_.g.length,B=[],O=0;O<N;O++)B[O]=~_.g[O];return new i(B,~_.h).add(p)}t.abs=function(){return w(this)?C(this):this},t.add=function(_){for(var N=Math.max(this.g.length,_.g.length),B=[],O=0,M=0;M<=N;M++){var L=O+(this.i(M)&65535)+(_.i(M)&65535),H=(L>>>16)+(this.i(M)>>>16)+(_.i(M)>>>16);O=H>>>16,L&=65535,H&=65535,B[M]=H<<16|L}return new i(B,B[B.length-1]&-2147483648?-1:0)};function T(_,N){return _.add(C(N))}t.j=function(_){if(b(this)||b(_))return h;if(w(this))return w(_)?C(this).j(C(_)):C(C(this).j(_));if(w(_))return C(this.j(C(_)));if(0>this.l(g)&&0>_.l(g))return u(this.m()*_.m());for(var N=this.g.length+_.g.length,B=[],O=0;O<2*N;O++)B[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<_.g.length;M++){var L=this.i(O)>>>16,H=this.i(O)&65535,G=_.i(M)>>>16,oe=_.i(M)&65535;B[2*O+2*M]+=H*oe,I(B,2*O+2*M),B[2*O+2*M+1]+=L*oe,I(B,2*O+2*M+1),B[2*O+2*M+1]+=H*G,I(B,2*O+2*M+1),B[2*O+2*M+2]+=L*G,I(B,2*O+2*M+2)}for(O=0;O<N;O++)B[O]=B[2*O+1]<<16|B[2*O];for(O=N;O<2*N;O++)B[O]=0;return new i(B,0)};function I(_,N){for(;(_[N]&65535)!=_[N];)_[N+1]+=_[N]>>>16,_[N]&=65535,N++}function k(_,N){this.g=_,this.h=N}function R(_,N){if(b(N))throw Error("division by zero");if(b(_))return new k(h,h);if(w(_))return N=R(C(_),N),new k(C(N.g),C(N.h));if(w(N))return N=R(_,C(N)),new k(C(N.g),N.h);if(30<_.g.length){if(w(_)||w(N))throw Error("slowDivide_ only works with positive integers.");for(var B=p,O=N;0>=O.l(_);)B=D(B),O=D(O);var M=P(B,1),L=P(O,1);for(O=P(O,2),B=P(B,2);!b(O);){var H=L.add(O);0>=H.l(_)&&(M=M.add(B),L=H),O=P(O,1),B=P(B,1)}return N=T(_,M.j(N)),new k(M,N)}for(M=h;0<=_.l(N);){for(B=Math.max(1,Math.floor(_.m()/N.m())),O=Math.ceil(Math.log(B)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=u(B),H=L.j(N);w(H)||0<H.l(_);)B-=O,L=u(B),H=L.j(N);b(L)&&(L=p),M=M.add(L),_=T(_,H)}return new k(M,_)}t.A=function(_){return R(this,_).h},t.and=function(_){for(var N=Math.max(this.g.length,_.g.length),B=[],O=0;O<N;O++)B[O]=this.i(O)&_.i(O);return new i(B,this.h&_.h)},t.or=function(_){for(var N=Math.max(this.g.length,_.g.length),B=[],O=0;O<N;O++)B[O]=this.i(O)|_.i(O);return new i(B,this.h|_.h)},t.xor=function(_){for(var N=Math.max(this.g.length,_.g.length),B=[],O=0;O<N;O++)B[O]=this.i(O)^_.i(O);return new i(B,this.h^_.h)};function D(_){for(var N=_.g.length+1,B=[],O=0;O<N;O++)B[O]=_.i(O)<<1|_.i(O-1)>>>31;return new i(B,_.h)}function P(_,N){var B=N>>5;N%=32;for(var O=_.g.length-B,M=[],L=0;L<O;L++)M[L]=0<N?_.i(L+B)>>>N|_.i(L+B+1)<<32-N:_.i(L+B);return new i(M,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CU=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Hd=i}).apply(typeof jN<"u"?jN:typeof self<"u"?self:typeof window<"u"?window:{});var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EU,$p,_U,e2,WE,SU,TU,BU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,Y,se){return S==Array.prototype||S==Object.prototype||(S[Y]=se.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof z1=="object"&&z1];for(var Y=0;Y<S.length;++Y){var se=S[Y];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var r=n(this);function s(S,Y){if(Y)e:{var se=r;S=S.split(".");for(var ye=0;ye<S.length-1;ye++){var Oe=S[ye];if(!(Oe in se))break e;se=se[Oe]}S=S[S.length-1],ye=se[S],Y=Y(ye),Y!=ye&&Y!=null&&e(se,S,{configurable:!0,writable:!0,value:Y})}}function a(S,Y){S instanceof String&&(S+="");var se=0,ye=!1,Oe={next:function(){if(!ye&&se<S.length){var Xe=se++;return{value:Y(Xe,S[Xe]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}s("Array.prototype.values",function(S){return S||function(){return a(this,function(Y,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(S){var Y=typeof S;return Y=Y!="object"?Y:S?Array.isArray(S)?"array":Y:"null",Y=="array"||Y=="object"&&typeof S.length=="number"}function u(S){var Y=typeof S;return Y=="object"&&S!=null||Y=="function"}function d(S,Y,se){return S.call.apply(S.bind,arguments)}function h(S,Y,se){if(!S)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,ye),S.apply(Y,Oe)}}return function(){return S.apply(Y,arguments)}}function p(S,Y,se){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(S,Y){var se=Array.prototype.slice.call(arguments,1);return function(){var ye=se.slice();return ye.push.apply(ye,arguments),S.apply(this,ye)}}function b(S,Y){function se(){}se.prototype=Y.prototype,S.aa=Y.prototype,S.prototype=new se,S.prototype.constructor=S,S.Qb=function(ye,Oe,Xe){for(var St=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)St[fn-2]=arguments[fn];return Y.prototype[Oe].apply(ye,St)}}function w(S){const Y=S.length;if(0<Y){const se=Array(Y);for(let ye=0;ye<Y;ye++)se[ye]=S[ye];return se}return[]}function C(S,Y){for(let se=1;se<arguments.length;se++){const ye=arguments[se];if(l(ye)){const Oe=S.length||0,Xe=ye.length||0;S.length=Oe+Xe;for(let St=0;St<Xe;St++)S[Oe+St]=ye[St]}else S.push(ye)}}class T{constructor(Y,se){this.i=Y,this.j=se,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function I(S){return/^[\s\xa0]*$/.test(S)}function k(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function R(S){return R[" "](S),S}R[" "]=function(){};var D=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function P(S,Y,se){for(const ye in S)Y.call(se,S[ye],ye,S)}function _(S,Y){for(const se in S)Y.call(void 0,S[se],se,S)}function N(S){const Y={};for(const se in S)Y[se]=S[se];return Y}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(S,Y){let se,ye;for(let Oe=1;Oe<arguments.length;Oe++){ye=arguments[Oe];for(se in ye)S[se]=ye[se];for(let Xe=0;Xe<B.length;Xe++)se=B[Xe],Object.prototype.hasOwnProperty.call(ye,se)&&(S[se]=ye[se])}}function M(S){var Y=1;S=S.split(":");const se=[];for(;0<Y&&S.length;)se.push(S.shift()),Y--;return S.length&&se.push(S.join(":")),se}function L(S){o.setTimeout(()=>{throw S},0)}function H(){var S=K;let Y=null;return S.g&&(Y=S.g,S.g=S.g.next,S.g||(S.h=null),Y.next=null),Y}class G{constructor(){this.h=this.g=null}add(Y,se){const ye=oe.get();ye.set(Y,se),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var oe=new T(()=>new q,S=>S.reset());class q{constructor(){this.next=this.g=this.h=null}set(Y,se){this.h=Y,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let X,re=!1,K=new G,Z=()=>{const S=o.Promise.resolve(void 0);X=()=>{S.then(Ae)}};var Ae=()=>{for(var S;S=H();){try{S.h.call(S.g)}catch(se){L(se)}var Y=oe;Y.j(S),100>Y.h&&(Y.h++,S.next=Y.g,Y.g=S)}re=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(S,Y){this.type=S,this.g=this.target=Y,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,Y=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const se=()=>{};o.addEventListener("test",se,Y),o.removeEventListener("test",se,Y)}catch{}return S}();function ne(S,Y){if(W.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var se=this.type=S.type,ye=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=Y,Y=S.relatedTarget){if(D){e:{try{R(Y.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(Y=null)}}else se=="mouseover"?Y=S.fromElement:se=="mouseout"&&(Y=S.toElement);this.relatedTarget=Y,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:ie[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&ne.aa.h.call(this)}}b(ne,W);var ie={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),me=0;function xe(S,Y,se,ye,Oe){this.listener=S,this.proxy=null,this.src=Y,this.type=se,this.capture=!!ye,this.ha=Oe,this.key=++me,this.da=this.fa=!1}function Se(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ge(S){this.src=S,this.g={},this.h=0}ge.prototype.add=function(S,Y,se,ye,Oe){var Xe=S.toString();S=this.g[Xe],S||(S=this.g[Xe]=[],this.h++);var St=Fe(S,Y,ye,Oe);return-1<St?(Y=S[St],se||(Y.fa=!1)):(Y=new xe(Y,this.src,Xe,!!ye,Oe),Y.fa=se,S.push(Y)),Y};function ae(S,Y){var se=Y.type;if(se in S.g){var ye=S.g[se],Oe=Array.prototype.indexOf.call(ye,Y,void 0),Xe;(Xe=0<=Oe)&&Array.prototype.splice.call(ye,Oe,1),Xe&&(Se(Y),S.g[se].length==0&&(delete S.g[se],S.h--))}}function Fe(S,Y,se,ye){for(var Oe=0;Oe<S.length;++Oe){var Xe=S[Oe];if(!Xe.da&&Xe.listener==Y&&Xe.capture==!!se&&Xe.ha==ye)return Oe}return-1}var et="closure_lm_"+(1e6*Math.random()|0),De={};function Ce(S,Y,se,ye,Oe){if(Array.isArray(Y)){for(var Xe=0;Xe<Y.length;Xe++)Ce(S,Y[Xe],se,ye,Oe);return null}return se=Wt(se),S&&S[de]?S.K(Y,se,u(ye)?!!ye.capture:!1,Oe):Ge(S,Y,se,!1,ye,Oe)}function Ge(S,Y,se,ye,Oe,Xe){if(!Y)throw Error("Invalid event type");var St=u(Oe)?!!Oe.capture:!!Oe,fn=kt(S);if(fn||(S[et]=fn=new ge(S)),se=fn.add(Y,se,ye,St,Xe),se.proxy)return se;if(ye=nt(),se.proxy=ye,ye.src=S,ye.listener=se,S.addEventListener)J||(Oe=St),Oe===void 0&&(Oe=!1),S.addEventListener(Y.toString(),ye,Oe);else if(S.attachEvent)S.attachEvent(Ct(Y.toString()),ye);else if(S.addListener&&S.removeListener)S.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return se}function nt(){function S(se){return Y.call(S.src,S.listener,se)}const Y=ut;return S}function it(S,Y,se,ye,Oe){if(Array.isArray(Y))for(var Xe=0;Xe<Y.length;Xe++)it(S,Y[Xe],se,ye,Oe);else ye=u(ye)?!!ye.capture:!!ye,se=Wt(se),S&&S[de]?(S=S.i,Y=String(Y).toString(),Y in S.g&&(Xe=S.g[Y],se=Fe(Xe,se,ye,Oe),-1<se&&(Se(Xe[se]),Array.prototype.splice.call(Xe,se,1),Xe.length==0&&(delete S.g[Y],S.h--)))):S&&(S=kt(S))&&(Y=S.g[Y.toString()],S=-1,Y&&(S=Fe(Y,se,ye,Oe)),(se=-1<S?Y[S]:null)&&dt(se))}function dt(S){if(typeof S!="number"&&S&&!S.da){var Y=S.src;if(Y&&Y[de])ae(Y.i,S);else{var se=S.type,ye=S.proxy;Y.removeEventListener?Y.removeEventListener(se,ye,S.capture):Y.detachEvent?Y.detachEvent(Ct(se),ye):Y.addListener&&Y.removeListener&&Y.removeListener(ye),(se=kt(Y))?(ae(se,S),se.h==0&&(se.src=null,Y[et]=null)):Se(S)}}}function Ct(S){return S in De?De[S]:De[S]="on"+S}function ut(S,Y){if(S.da)S=!0;else{Y=new ne(Y,this);var se=S.listener,ye=S.ha||S.src;S.fa&&dt(S),S=se.call(ye,Y)}return S}function kt(S){return S=S[et],S instanceof ge?S:null}var Ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wt(S){return typeof S=="function"?S:(S[Ft]||(S[Ft]=function(Y){return S.handleEvent(Y)}),S[Ft])}function Mt(){j.call(this),this.i=new ge(this),this.M=this,this.F=null}b(Mt,j),Mt.prototype[de]=!0,Mt.prototype.removeEventListener=function(S,Y,se,ye){it(this,S,Y,se,ye)};function Vt(S,Y){var se,ye=S.F;if(ye)for(se=[];ye;ye=ye.F)se.push(ye);if(S=S.M,ye=Y.type||Y,typeof Y=="string")Y=new W(Y,S);else if(Y instanceof W)Y.target=Y.target||S;else{var Oe=Y;Y=new W(ye,S),O(Y,Oe)}if(Oe=!0,se)for(var Xe=se.length-1;0<=Xe;Xe--){var St=Y.g=se[Xe];Oe=Jt(St,ye,!0,Y)&&Oe}if(St=Y.g=S,Oe=Jt(St,ye,!0,Y)&&Oe,Oe=Jt(St,ye,!1,Y)&&Oe,se)for(Xe=0;Xe<se.length;Xe++)St=Y.g=se[Xe],Oe=Jt(St,ye,!1,Y)&&Oe}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var S=this.i,Y;for(Y in S.g){for(var se=S.g[Y],ye=0;ye<se.length;ye++)Se(se[ye]);delete S.g[Y],S.h--}}this.F=null},Mt.prototype.K=function(S,Y,se,ye){return this.i.add(String(S),Y,!1,se,ye)},Mt.prototype.L=function(S,Y,se,ye){return this.i.add(String(S),Y,!0,se,ye)};function Jt(S,Y,se,ye){if(Y=S.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var Oe=!0,Xe=0;Xe<Y.length;++Xe){var St=Y[Xe];if(St&&!St.da&&St.capture==se){var fn=St.listener,Wn=St.ha||St.src;St.fa&&ae(S.i,St),Oe=fn.call(Wn,ye)!==!1&&Oe}}return Oe&&!ye.defaultPrevented}function Pt(S,Y,se){if(typeof S=="function")se&&(S=p(S,se));else if(S&&typeof S.handleEvent=="function")S=p(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:o.setTimeout(S,Y||0)}function It(S){S.g=Pt(()=>{S.g=null,S.i&&(S.i=!1,It(S))},S.l);const Y=S.h;S.h=null,S.m.apply(null,Y)}class xt extends j{constructor(Y,se){super(),this.m=Y,this.l=se,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(S){j.call(this),this.h=S,this.g={}}b(xn,j);var $t=[];function ir(S){P(S.g,function(Y,se){this.g.hasOwnProperty(se)&&dt(Y)},S),S.g={}}xn.prototype.N=function(){xn.aa.N.call(this),ir(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=o.JSON.stringify,Fn=o.JSON.parse,Er=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function Bn(){}Bn.prototype.h=null;function na(S){return S.h||(S.h=S.i())}function Xn(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cs(){W.call(this,"d")}b(cs,W);function Dn(){W.call(this,"c")}b(Dn,W);var tn={},On=null;function ra(){return On=On||new Mt}tn.La="serverreachability";function Or(S){W.call(this,tn.La,S)}b(Or,W);function ms(S){const Y=ra();Vt(Y,new Or(Y))}tn.STAT_EVENT="statevent";function xa(S,Y){W.call(this,tn.STAT_EVENT,S),this.stat=Y}b(xa,W);function Ht(S){const Y=ra();Vt(Y,new xa(Y,S))}tn.Ma="timingevent";function or(S,Y){W.call(this,tn.Ma,S),this.size=Y}b(or,W);function Zn(S,Y){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},Y)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function kr(S,Y,se,ye,Oe,Xe){S.info(function(){if(S.g)if(Xe)for(var St="",fn=Xe.split("&"),Wn=0;Wn<fn.length;Wn++){var Sn=fn[Wn].split("=");if(1<Sn.length){var xr=Sn[0];Sn=Sn[1];var Sr=xr.split("_");St=2<=Sr.length&&Sr[1]=="type"?St+(xr+"="+Sn+"&"):St+(xr+"=redacted&")}}else St=null;else St=Xe;return"XMLHTTP REQ ("+ye+") [attempt "+Oe+"]: "+Y+`
`+se+`
`+St})}function Qr(S,Y,se,ye,Oe,Xe,St){S.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Oe+"]: "+Y+`
`+se+`
`+Xe+" "+St})}function fe(S,Y,se,ye){S.info(function(){return"XMLHTTP TEXT ("+Y+"): "+Ee(S,se)+(ye?" "+ye:"")})}function Ne(S,Y){S.info(function(){return"TIMEOUT: "+Y})}_r.prototype.info=function(){};function Ee(S,Y){if(!S.g)return Y;if(!Y)return null;try{var se=JSON.parse(Y);if(se){for(S=0;S<se.length;S++)if(Array.isArray(se[S])){var ye=se[S];if(!(2>ye.length)){var Oe=ye[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Xe=Oe[0];if(Xe!="noop"&&Xe!="stop"&&Xe!="close")for(var St=1;St<Oe.length;St++)Oe[St]=""}}}}return mn(se)}catch{return Y}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function qe(){}b(qe,Bn),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},ke=new qe;function tt(S,Y,se,ye){this.j=S,this.i=Y,this.l=se,this.R=ye||1,this.U=new xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var We={},Je={};function yt(S,Y,se){S.L=1,S.v=tl(wa(Y)),S.m=se,S.P=!0,Nt(S,null)}function Nt(S,Y){S.F=Date.now(),Rt(S),S.A=wa(S.v);var se=S.A,ye=S.R;Array.isArray(ye)||(ye=[String(ye)]),dn(se.i,"t",ye),S.C=0,se=S.j.J,S.h=new Qe,S.g=ue(S.j,se?Y:null,!S.m),0<S.O&&(S.M=new xt(p(S.Y,S,S.g),S.O)),Y=S.U,se=S.g,ye=S.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&($t[0]=Oe.toString()),Oe=$t);for(var Xe=0;Xe<Oe.length;Xe++){var St=Ce(se,Oe[Xe],ye||Y.handleEvent,!1,Y.h||Y);if(!St)break;Y.g[St.key]=St}Y=S.H?N(S.H):{},S.m?(S.u||(S.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,Y)):(S.u="GET",S.g.ea(S.A,S.u,null,Y)),ms(),kr(S.i,S.u,S.A,S.l,S.R,S.m)}tt.prototype.ca=function(S){S=S.target;const Y=this.M;Y&&Bs(S)==3?Y.j():this.Y(S)},tt.prototype.Y=function(S){try{if(S==this.g)e:{const Sr=Bs(this.g);var Y=this.g.Ba();const so=this.g.Z();if(!(3>Sr)&&(Sr!=3||this.g&&(this.h.h||this.g.oa()||PA(this.g)))){this.J||Sr!=4||Y==7||(Y==8||0>=so?ms(3):ms(2)),Un(this);var se=this.g.Z();this.X=se;t:if(jt(this)){var ye=PA(this.g);S="";var Oe=ye.length,Xe=Bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),Ln(this);var St="";break t}this.h.i=new o.TextDecoder}for(Y=0;Y<Oe;Y++)this.h.h=!0,S+=this.h.i.decode(ye[Y],{stream:!(Xe&&Y==Oe-1)});ye.length=0,this.h.g+=S,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=se==200,Qr(this.i,this.u,this.A,this.l,this.R,Sr,se),this.o){if(this.T&&!this.K){t:{if(this.g){var fn,Wn=this.g;if((fn=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(fn)){var Sn=fn;break t}}Sn=null}if(se=Sn)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,se);else{this.o=!1,this.s=3,Ht(12),Qn(this),Ln(this);break e}}if(this.P){se=!0;let ps;for(;!this.J&&this.C<St.length;)if(ps=Tt(this,St),ps==Je){Sr==4&&(this.s=4,Ht(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(ps==We){this.s=4,Ht(15),fe(this.i,this.l,St,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,ps,null),_s(this,ps);if(jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Sr!=4||St.length!=0||this.h.h||(this.s=1,Ht(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,St,"[Invalid Chunked Response]"),Qn(this),Ln(this);else if(0<St.length&&!this.W){this.W=!0;var xr=this.j;xr.g==this&&xr.ba&&!xr.M&&(xr.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),ol(xr),xr.M=!0,Ht(11))}}else fe(this.i,this.l,St,null),_s(this,St);Sr==4&&Qn(this),this.o&&!this.J&&(Sr==4?ll(this.j,this):(this.o=!1,Rt(this)))}else sl(this.g),se==400&&0<St.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Qn(this),Ln(this)}}}catch{}finally{}};function jt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Tt(S,Y){var se=S.C,ye=Y.indexOf(`
`,se);return ye==-1?Je:(se=Number(Y.substring(se,ye)),isNaN(se)?We:(ye+=1,ye+se>Y.length?Je:(Y=Y.slice(ye,ye+se),S.C=ye+se,Y)))}tt.prototype.cancel=function(){this.J=!0,Qn(this)};function Rt(S){S.S=Date.now()+S.I,un(S,S.I)}function un(S,Y){if(S.B!=null)throw Error("WatchDog timer not null");S.B=Zn(p(S.ba,S),Y)}function Un(S){S.B&&(o.clearTimeout(S.B),S.B=null)}tt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Ne(this.i,this.A),this.L!=2&&(ms(),Ht(17)),Qn(this),this.s=2,Ln(this)):un(this,this.S-S)};function Ln(S){S.j.G==0||S.J||ll(S.j,S)}function Qn(S){Un(S);var Y=S.M;Y&&typeof Y.ma=="function"&&Y.ma(),S.M=null,ir(S.U),S.g&&(Y=S.g,S.g=null,Y.abort(),Y.ma())}function _s(S,Y){try{var se=S.j;if(se.G!=0&&(se.g==S||va(se.h,S))){if(!S.K&&va(se.h,S)&&se.G==3){try{var ye=se.Da.g.parse(Y)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Oe=ye;if(Oe[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<S.F)No(se),Fc(se);else break e;Gl(se),Ht(18)}}else se.za=Oe[1],0<se.za-se.T&&37500>Oe[2]&&se.F&&se.v==0&&!se.C&&(se.C=Zn(p(se.Za,se),6e3));if(1>=Ps(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Ra(se,11)}else if((S.K||se.g==S)&&No(se),!I(Y))for(Oe=se.Da.g.parse(Y),Y=0;Y<Oe.length;Y++){let Sn=Oe[Y];if(se.T=Sn[0],Sn=Sn[1],se.G==2)if(Sn[0]=="c"){se.K=Sn[1],se.ia=Sn[2];const xr=Sn[3];xr!=null&&(se.la=xr,se.j.info("VER="+se.la));const Sr=Sn[4];Sr!=null&&(se.Aa=Sr,se.j.info("SVER="+se.Aa));const so=Sn[5];so!=null&&typeof so=="number"&&0<so&&(ye=1.5*so,se.L=ye,se.j.info("backChannelRequestTimeoutMs_="+ye)),ye=se;const ps=S.g;if(ps){const di=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var Xe=ye.h;Xe.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(Xe.j=Xe.l,Xe.g=new Set,Xe.h&&(Hr(Xe,Xe.h),Xe.h=null))}if(ye.D){const cl=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(ye.ya=cl,gr(ye.I,ye.D,cl))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-S.F,se.j.info("Handshake RTT: "+se.R+"ms")),ye=se;var St=S;if(ye.qa=V(ye,ye.J?ye.ia:null,ye.W),St.K){aa(ye.h,St);var fn=St,Wn=ye.L;Wn&&(fn.I=Wn),fn.B&&(Un(fn),Rt(fn)),ye.g=St}else Dc(ye);0<se.i.length&&Rc(se)}else Sn[0]!="stop"&&Sn[0]!="close"||Ra(se,7);else se.G==3&&(Sn[0]=="stop"||Sn[0]=="close"?Sn[0]=="stop"?Ra(se,7):Bo(se):Sn[0]!="noop"&&se.l&&se.l.ta(Sn),se.v=0)}}ms(4)}catch{}}var oi=class{constructor(S,Y){this.g=S,this.map=Y}};function Ss(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Ps(S){return S.h?1:S.g?S.g.size:0}function va(S,Y){return S.h?S.h==Y:S.g?S.g.has(Y):!1}function Hr(S,Y){S.g?S.g.add(Y):S.h=Y}function aa(S,Y){S.h&&S.h==Y?S.h=null:S.g&&S.g.has(Y)&&S.g.delete(Y)}Ss.prototype.cancel=function(){if(this.i=Nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Nc(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let Y=S.i;for(const se of S.g.values())Y=Y.concat(se.D);return Y}return w(S.i)}function UA(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var Y=[],se=S.length,ye=0;ye<se;ye++)Y.push(S[ye]);return Y}Y=[],se=0;for(ye in S)Y[se++]=S[ye];return Y}function Xo(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var Y=[];S=S.length;for(var se=0;se<S;se++)Y.push(se);return Y}Y=[],se=0;for(const ye in S)Y[se++]=ye;return Y}}}function Iu(S,Y){if(S.forEach&&typeof S.forEach=="function")S.forEach(Y,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,Y,void 0);else for(var se=Xo(S),ye=UA(S),Oe=ye.length,Xe=0;Xe<Oe;Xe++)Y.call(void 0,ye[Xe],se&&se[Xe],S)}var ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kc(S,Y){if(S){S=S.split("&");for(var se=0;se<S.length;se++){var ye=S[se].indexOf("="),Oe=null;if(0<=ye){var Xe=S[se].substring(0,ye);Oe=S[se].substring(ye+1)}else Xe=S[se];Y(Xe,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function lr(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof lr){this.h=S.h,Zo(this,S.j),this.o=S.o,this.g=S.g,el(this,S.s),this.l=S.l;var Y=S.i,se=new Xi;se.i=Y.i,Y.g&&(se.g=new Map(Y.g),se.h=Y.h),Ji(this,se),this.m=S.m}else S&&(Y=String(S).match(ya))?(this.h=!1,Zo(this,Y[1]||"",!0),this.o=li(Y[2]||""),this.g=li(Y[3]||"",!0),el(this,Y[4]),this.l=li(Y[5]||"",!0),Ji(this,Y[6]||"",!0),this.m=li(Y[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}lr.prototype.toString=function(){var S=[],Y=this.j;Y&&S.push(Co(Y,Fu,!0),":");var se=this.g;return(se||Y=="file")&&(S.push("//"),(Y=this.o)&&S.push(Co(Y,Fu,!0),"@"),S.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&S.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&S.push("/"),S.push(Co(se,se.charAt(0)=="/"?Eo:Ru,!0))),(se=this.i.toString())&&S.push("?",se),(se=this.m)&&S.push("#",Co(se,_o)),S.join("")};function wa(S){return new lr(S)}function Zo(S,Y,se){S.j=se?li(Y,!0):Y,S.j&&(S.j=S.j.replace(/:$/,""))}function el(S,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);S.s=Y}else S.s=null}function Ji(S,Y,se){Y instanceof Xi?(S.i=Y,MA(S.i,S.h)):(se||(Y=Co(Y,Ic)),S.i=new Xi(Y,S.h))}function gr(S,Y,se){S.i.set(Y,se)}function tl(S){return gr(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function li(S,Y){return S?Y?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function Co(S,Y,se){return typeof S=="string"?(S=encodeURI(S).replace(Y,LA),se&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function LA(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Fu=/[#\/\?@]/g,Ru=/[#\?:]/g,Eo=/[#\?]/g,Ic=/[#\?@]/g,_o=/#/g;function Xi(S,Y){this.h=this.g=null,this.i=S||null,this.j=!!Y}function Ir(S){S.g||(S.g=new Map,S.h=0,S.i&&kc(S.i,function(Y,se){S.add(decodeURIComponent(Y.replace(/\+/g," ")),se)}))}t=Xi.prototype,t.add=function(S,Y){Ir(this),this.i=null,S=eo(this,S);var se=this.g.get(S);return se||this.g.set(S,se=[]),se.push(Y),this.h+=1,this};function So(S,Y){Ir(S),Y=eo(S,Y),S.g.has(Y)&&(S.i=null,S.h-=S.g.get(Y).length,S.g.delete(Y))}function Zi(S,Y){return Ir(S),Y=eo(S,Y),S.g.has(Y)}t.forEach=function(S,Y){Ir(this),this.g.forEach(function(se,ye){se.forEach(function(Oe){S.call(Y,Oe,ye,this)},this)},this)},t.na=function(){Ir(this);const S=Array.from(this.g.values()),Y=Array.from(this.g.keys()),se=[];for(let ye=0;ye<Y.length;ye++){const Oe=S[ye];for(let Xe=0;Xe<Oe.length;Xe++)se.push(Y[ye])}return se},t.V=function(S){Ir(this);let Y=[];if(typeof S=="string")Zi(this,S)&&(Y=Y.concat(this.g.get(eo(this,S))));else{S=Array.from(this.g.values());for(let se=0;se<S.length;se++)Y=Y.concat(S[se])}return Y},t.set=function(S,Y){return Ir(this),this.i=null,S=eo(this,S),Zi(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[Y]),this.h+=1,this},t.get=function(S,Y){return S?(S=this.V(S),0<S.length?String(S[0]):Y):Y};function dn(S,Y,se){So(S,Y),0<se.length&&(S.i=null,S.g.set(eo(S,Y),w(se)),S.h+=se.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],Y=Array.from(this.g.keys());for(var se=0;se<Y.length;se++){var ye=Y[se];const Xe=encodeURIComponent(String(ye)),St=this.V(ye);for(ye=0;ye<St.length;ye++){var Oe=Xe;St[ye]!==""&&(Oe+="="+encodeURIComponent(String(St[ye]))),S.push(Oe)}}return this.i=S.join("&")};function eo(S,Y){return Y=String(Y),S.j&&(Y=Y.toLowerCase()),Y}function MA(S,Y){Y&&!S.j&&(Ir(S),S.i=null,S.g.forEach(function(se,ye){var Oe=ye.toLowerCase();ye!=Oe&&(So(this,ye),dn(this,Oe,se))},S)),S.j=Y}function ka(S,Y){const se=new _r;if(o.Image){const ye=new Image;ye.onload=g(qa,se,"TestLoadImage: loaded",!0,Y,ye),ye.onerror=g(qa,se,"TestLoadImage: error",!1,Y,ye),ye.onabort=g(qa,se,"TestLoadImage: abort",!1,Y,ye),ye.ontimeout=g(qa,se,"TestLoadImage: timeout",!1,Y,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=S}else Y(!1)}function ci(S,Y){const se=new _r,ye=new AbortController,Oe=setTimeout(()=>{ye.abort(),qa(se,"TestPingServer: timeout",!1,Y)},1e4);fetch(S,{signal:ye.signal}).then(Xe=>{clearTimeout(Oe),Xe.ok?qa(se,"TestPingServer: ok",!0,Y):qa(se,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(Oe),qa(se,"TestPingServer: error",!1,Y)})}function qa(S,Y,se,ye,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),ye(se)}catch{}}function to(){this.g=new Er}function ui(S,Y,se){const ye=se||"";try{Iu(S,function(Oe,Xe){let St=Oe;u(Oe)&&(St=mn(Oe)),Y.push(ye+Xe+"="+encodeURIComponent(St))})}catch(Oe){throw Y.push(ye+"type="+encodeURIComponent("_badmap")),Oe}}function nl(S){this.l=S.Ub||null,this.j=S.eb||!1}b(nl,Bn),nl.prototype.g=function(){return new To(this.l,this.j)},nl.prototype.i=function(S){return function(){return S}}({});function To(S,Y){Mt.call(this),this.D=S,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(To,Mt),t=To.prototype,t.open=function(S,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=Y,this.readyState=1,Ia(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(Y.body=S),(this.D||o).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Du(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function Du(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var Y=S.value?S.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!S.done}))&&(this.response=this.responseText+=Y)}S.done?Ai(this):Ia(this),this.readyState==3&&Du(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,Ai(this))},t.Qa=function(S){this.g&&(this.response=S,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ia(S)}t.setRequestHeader=function(S,Y){this.u.append(S,Y)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],Y=this.h.entries();for(var se=Y.next();!se.done;)se=se.value,S.push(se[0]+": "+se[1]),se=Y.next();return S.join(`\r
`)};function Ia(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function no(S){let Y="";return P(S,function(se,ye){Y+=ye,Y+=":",Y+=se,Y+=`\r
`}),Y}function Ts(S,Y,se){e:{for(ye in se){var ye=!1;break e}ye=!0}ye||(se=no(se),typeof S=="string"?se!=null&&encodeURIComponent(String(se)):gr(S,Y,se))}function Kn(S){Mt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Kn,Mt);var rl=/^https?$/i,ro=["POST","PUT"];t=Kn.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,Y,se,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);Y=Y?Y.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?na(this.o):na(ke),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(Y,String(S),!0),this.B=!1}catch(Xe){Uu(this,Xe);return}if(S=se||"",se=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Oe in ye)se.set(Oe,ye[Oe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Xe of ye.keys())se.set(Xe,ye.get(Xe));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(se.keys()).find(Xe=>Xe.toLowerCase()=="content-type"),Oe=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ro,Y,void 0))||ye||Oe||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xe,St]of se)this.g.setRequestHeader(Xe,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fa(this),this.u=!0,this.g.send(S),this.u=!1}catch(Xe){Uu(this,Xe)}};function Uu(S,Y){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=Y,S.m=5,jl(S),Oi(S)}function jl(S){S.A||(S.A=!0,Vt(S,"complete"),Vt(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Vt(this,"complete"),Vt(this,"abort"),Oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Kn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ol(this):this.bb())},t.bb=function(){Ol(this)};function Ol(S){if(S.h&&typeof i<"u"&&(!S.v[1]||Bs(S)!=4||S.Z()!=2)){if(S.u&&Bs(S)==4)Pt(S.Ea,0,S);else if(Vt(S,"readystatechange"),Bs(S)==4){S.h=!1;try{const St=S.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var se;if(!(se=Y)){var ye;if(ye=St===0){var Oe=String(S.D).match(ya)[1]||null;!Oe&&o.self&&o.self.location&&(Oe=o.self.location.protocol.slice(0,-1)),ye=!rl.test(Oe?Oe.toLowerCase():"")}se=ye}if(se)Vt(S,"complete"),Vt(S,"success");else{S.m=6;try{var Xe=2<Bs(S)?S.g.statusText:""}catch{Xe=""}S.l=Xe+" ["+S.Z()+"]",jl(S)}}finally{Oi(S)}}}}function Oi(S,Y){if(S.g){Fa(S);const se=S.g,ye=S.v[0]?()=>{}:null;S.g=null,S.v=null,Y||Vt(S,"ready");try{se.onreadystatechange=ye}catch{}}}function Fa(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Bs(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Bs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var Y=this.g.responseText;return S&&Y.indexOf(S)==0&&(Y=Y.substring(S.length)),Fn(Y)}};function PA(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function sl(S){const Y={};S=(S.g&&2<=Bs(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<S.length;ye++){if(I(S[ye]))continue;var se=M(S[ye]);const Oe=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const Xe=Y[Oe]||[];Y[Oe]=Xe,Xe.push(se)}_(Y,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(S,Y,se){return se&&se.internalChannelParams&&se.internalChannelParams[S]||Y}function al(S){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,S),this.cb=ba("retryDelaySeedMs",1e4,S),this.Wa=ba("forwardChannelMaxRetries",2,S),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Ss(S&&S.concurrentRequestLimit),this.Da=new to,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=al.prototype,t.la=8,t.G=1,t.connect=function(S,Y,se,ye){Ht(0),this.W=S,this.H=Y||{},se&&ye!==void 0&&(this.H.OSID=se,this.H.OAID=ye),this.F=this.X,this.I=V(this,null,this.W),Rc(this)};function Bo(S){if(Ql(S),S.G==3){var Y=S.U++,se=wa(S.I);if(gr(se,"SID",S.K),gr(se,"RID",Y),gr(se,"TYPE","terminate"),il(S,se),Y=new tt(S,S.j,Y),Y.L=2,Y.v=tl(wa(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(Y.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=Y.v,se=!0),se||(Y.g=ue(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),Rt(Y)}Uc(S)}function Fc(S){S.g&&(ol(S),S.g.cancel(),S.g=null)}function Ql(S){Fc(S),S.u&&(o.clearTimeout(S.u),S.u=null),No(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Rc(S){if(!sa(S.h)&&!S.s){S.s=!0;var Y=S.Ga;X||Z(),re||(X(),re=!0),K.add(Y,S),S.B=0}}function Lu(S,Y){return Ps(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=Y.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=Zn(p(S.Ga,S,Y),zl(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Oe=new tt(this,this.j,S);let Xe=this.o;if(this.S&&(Xe?(Xe=N(Xe),O(Xe,this.S)):Xe=this.S),this.m!==null||this.O||(Oe.H=Xe,Xe=null),this.P)e:{for(var Y=0,se=0;se<this.i.length;se++){t:{var ye=this.i[se];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(Y+=ye,4096<Y){Y=se;break e}if(Y===4096||se===this.i.length-1){Y=se+1;break e}}Y=1e3}else Y=1e3;Y=Vl(this,Oe,Y),se=wa(this.I),gr(se,"RID",S),gr(se,"CVER",22),this.D&&gr(se,"X-HTTP-Session-Id",this.D),il(this,se),Xe&&(this.O?Y="headers="+encodeURIComponent(String(no(Xe)))+"&"+Y:this.m&&Ts(se,this.m,Xe)),Hr(this.h,Oe),this.Ua&&gr(se,"TYPE","init"),this.P?(gr(se,"$req",Y),gr(se,"SID","null"),Oe.T=!0,yt(Oe,se,null)):yt(Oe,se,Y),this.G=2}}else this.G==3&&(S?Hl(this,S):this.i.length==0||sa(this.h)||Hl(this))};function Hl(S,Y){var se;Y?se=Y.l:se=S.U++;const ye=wa(S.I);gr(ye,"SID",S.K),gr(ye,"RID",se),gr(ye,"AID",S.T),il(S,ye),S.m&&S.o&&Ts(ye,S.m,S.o),se=new tt(S,S.j,se,S.B+1),S.m===null&&(se.H=S.o),Y&&(S.i=Y.D.concat(S.i)),Y=Vl(S,se,1e3),se.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Hr(S.h,se),yt(se,ye,Y)}function il(S,Y){S.H&&P(S.H,function(se,ye){gr(Y,ye,se)}),S.l&&Iu({},function(se,ye){gr(Y,ye,se)})}function Vl(S,Y,se){se=Math.min(S.i.length,se);var ye=S.l?p(S.l.Na,S.l,S):null;e:{var Oe=S.i;let Xe=-1;for(;;){const St=["count="+se];Xe==-1?0<se?(Xe=Oe[0].g,St.push("ofs="+Xe)):Xe=0:St.push("ofs="+Xe);let fn=!0;for(let Wn=0;Wn<se;Wn++){let Sn=Oe[Wn].g;const xr=Oe[Wn].map;if(Sn-=Xe,0>Sn)Xe=Math.max(0,Oe[Wn].g-100),fn=!1;else try{ui(xr,St,"req"+Sn+"_")}catch{ye&&ye(xr)}}if(fn){ye=St.join("&");break e}}}return S=S.i.splice(0,se),Y.D=S,ye}function Dc(S){if(!S.g&&!S.u){S.Y=1;var Y=S.Fa;X||Z(),re||(X(),re=!0),K.add(Y,S),S.v=0}}function Gl(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=Zn(p(S.Fa,S),zl(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,jA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=Zn(p(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Fc(this),jA(this))};function ol(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function jA(S){S.g=new tt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var Y=wa(S.qa);gr(Y,"RID","rpc"),gr(Y,"SID",S.K),gr(Y,"AID",S.T),gr(Y,"CI",S.F?"0":"1"),!S.F&&S.ja&&gr(Y,"TO",S.ja),gr(Y,"TYPE","xmlhttp"),il(S,Y),S.m&&S.o&&Ts(Y,S.m,S.o),S.L&&(S.g.I=S.L);var se=S.g;S=S.ia,se.L=1,se.v=tl(wa(Y)),se.m=null,se.P=!0,Nt(se,S)}t.Za=function(){this.C!=null&&(this.C=null,Fc(this),Gl(this),Ht(19))};function No(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function ll(S,Y){var se=null;if(S.g==Y){No(S),ol(S),S.g=null;var ye=2}else if(va(S.h,Y))se=Y.D,aa(S.h,Y),ye=1;else return;if(S.G!=0){if(Y.o)if(ye==1){se=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var Oe=S.B;ye=ra(),Vt(ye,new or(ye,se)),Rc(S)}else Dc(S);else if(Oe=Y.s,Oe==3||Oe==0&&0<Y.X||!(ye==1&&Lu(S,Y)||ye==2&&Gl(S)))switch(se&&0<se.length&&(Y=S.h,Y.i=Y.i.concat(se)),Oe){case 1:Ra(S,5);break;case 4:Ra(S,10);break;case 3:Ra(S,6);break;default:Ra(S,2)}}}function zl(S,Y){let se=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(se*=2),se*Y}function Ra(S,Y){if(S.j.info("Error code "+Y),Y==2){var se=p(S.fb,S),ye=S.Xa;const Oe=!ye;ye=new lr(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zo(ye,"https"),tl(ye),Oe?ka(ye.toString(),se):ci(ye.toString(),se)}else Ht(2);S.G=0,S.l&&S.l.sa(Y),Uc(S),Ql(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Uc(S){if(S.G=0,S.ka=[],S.l){const Y=Nc(S.h);(Y.length!=0||S.i.length!=0)&&(C(S.ka,Y),C(S.ka,S.i),S.h.i.length=0,w(S.i),S.i.length=0),S.l.ra()}}function V(S,Y,se){var ye=se instanceof lr?wa(se):new lr(se);if(ye.g!="")Y&&(ye.g=Y+"."+ye.g),el(ye,ye.s);else{var Oe=o.location;ye=Oe.protocol,Y=Y?Y+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Xe=new lr(null);ye&&Zo(Xe,ye),Y&&(Xe.g=Y),Oe&&el(Xe,Oe),se&&(Xe.l=se),ye=Xe}return se=S.D,Y=S.ya,se&&Y&&gr(ye,se,Y),gr(ye,"VER",S.la),il(S,ye),ye}function ue(S,Y,se){if(Y&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=S.Ca&&!S.pa?new Kn(new nl({eb:se})):new Kn(S.pa),Y.Ha(S.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}t=Ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ue(){}Ue.prototype.g=function(S,Y){return new He(S,Y)};function He(S,Y){Mt.call(this),this.g=new al(Y),this.l=S,this.h=Y&&Y.messageUrlParams||null,S=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(S?S["X-WebChannel-Content-Type"]=Y.messageContentType:S={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(S?S["X-WebChannel-Client-Profile"]=Y.va:S={"X-WebChannel-Client-Profile":Y.va}),this.g.S=S,(S=Y&&Y.Sb)&&!I(S)&&(this.g.m=S),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!I(Y)&&(this.g.D=Y,S=this.h,S!==null&&Y in S&&(S=this.h,Y in S&&delete S[Y])),this.j=new Ot(this)}b(He,Mt),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Bo(this.g)},He.prototype.o=function(S){var Y=this.g;if(typeof S=="string"){var se={};se.__data__=S,S=se}else this.u&&(se={},se.__data__=mn(S),S=se);Y.i.push(new oi(Y.Ya++,S)),Y.G==3&&Rc(Y)},He.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,He.aa.N.call(this)};function ot(S){cs.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var Y=S.__sm__;if(Y){e:{for(const se in Y){S=se;break e}S=void 0}(this.i=S)&&(S=this.i,Y=Y!==null&&S in Y?Y[S]:void 0),this.data=Y}else this.data=S}b(ot,cs);function _t(){Dn.call(this),this.status=1}b(_t,Dn);function Ot(S){this.g=S}b(Ot,Ie),Ot.prototype.ua=function(){Vt(this.g,"a")},Ot.prototype.ta=function(S){Vt(this.g,new ot(S))},Ot.prototype.sa=function(S){Vt(this.g,new _t)},Ot.prototype.ra=function(){Vt(this.g,"b")},Ue.prototype.createWebChannel=Ue.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,BU=function(){return new Ue},TU=function(){return ra()},SU=tn,WE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,e2=_e,Te.COMPLETE="complete",_U=Te,Xn.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,$p=Xn,Kn.prototype.listenOnce=Kn.prototype.L,Kn.prototype.getLastError=Kn.prototype.Ka,Kn.prototype.getLastErrorCode=Kn.prototype.Ba,Kn.prototype.getStatus=Kn.prototype.Z,Kn.prototype.getResponseJson=Kn.prototype.Oa,Kn.prototype.getResponseText=Kn.prototype.oa,Kn.prototype.send=Kn.prototype.ea,Kn.prototype.setWithCredentials=Kn.prototype.Ha,EU=Kn}).apply(typeof z1<"u"?z1:typeof self<"u"?self:typeof window<"u"?window:{});const ON="@firebase/firestore",QN="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new QS("@firebase/firestore");function k0(){return dh.logLevel}function Yt(t,...e){if(dh.logLevel<=rr.DEBUG){const n=e.map(XS);dh.debug(`Firestore (${Fm}): ${t}`,...n)}}function bA(t,...e){if(dh.logLevel<=rr.ERROR){const n=e.map(XS);dh.error(`Firestore (${Fm}): ${t}`,...n)}}function pm(t,...e){if(dh.logLevel<=rr.WARN){const n=e.map(XS);dh.warn(`Firestore (${Fm}): ${t}`,...n)}}function XS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,NU(t,r,n)}function NU(t,e,n){let r=`FIRESTORE (${Fm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw bA(r),new Error(r)}function Nr(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||NU(e,s,r)}function In(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends NA{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Si.UNAUTHENTICATED))}shutdown(){}}class kz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Iz{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nr(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new mA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mA)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nr(typeof r.accessToken=="string",31837,{l:r}),new kU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nr(e===null||typeof e=="string",2055,{h:e}),new Si(e)}}class Fz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Fz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nr(this.o===void 0,3512);const r=a=>{a.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,Yt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Nr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Uz(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function sr(t,e){return t<e?-1:t>e?1:0}function $E(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return oC(s)===oC(a)?sr(s,a):oC(s)?1:-1}return sr(t.length,e.length)}const Lz=55296,Mz=57343;function oC(t){const e=t.charCodeAt(0);return e>=Lz&&e<=Mz}function gm(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__name__";class Au{constructor(e,n,r){n===void 0?n=0:n>e.length&&Cn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Cn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Au.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Au?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Au.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return sr(e.length,n.length)}static compareSegments(e,n){const r=Au.isNumericId(e),s=Au.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Au.extractNumericId(e).compare(Au.extractNumericId(n)):$E(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hd.fromString(e.substring(4,e.length-2))}}class Zr extends Au{construct(e,n,r){return new Zr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new zt(pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Zr(n)}static emptyPath(){return new Zr([])}}const Pz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ri extends Au{construct(e,n,r){return new ri(e,n,r)}static isValidIdentifier(e){return Pz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ri.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VN}static keyField(){return new ri([VN])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new zt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new zt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new zt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(a(),s++)}if(a(),i)throw new zt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ri(n)}static emptyPath(){return new ri([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.path=e}static fromPath(e){return new cn(Zr.fromString(e))}static fromName(e){return new cn(Zr.fromString(e).popFirst(5))}static empty(){return new cn(Zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new Zr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t,e,n){if(!n)throw new zt(pt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jz(t,e,n,r){if(e===!0&&r===!0)throw new zt(pt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GN(t){if(!cn.isDocumentKey(t))throw new zt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zN(t){if(cn.isDocumentKey(t))throw new zt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Py(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Cn(12329,{type:typeof t})}function Cc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Py(t);throw new zt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ex(t,e){if(!FU(t))throw new zt(pt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new zt(pt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=-62135596800,KN=1e6;class as{static now(){return as.fromMillis(Date.now())}static fromDate(e){return as.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*KN);return new as(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new zt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new zt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qN)throw new zt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KN}_compareTo(e){return this.seconds===e.seconds?sr(this.nanoseconds,e.nanoseconds):sr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:as._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ex(e,as._jsonSchema))return new as(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}as._jsonSchemaVersion="firestore/timestamp/1.0",as._jsonSchema={type:pa("string",as._jsonSchemaVersion),seconds:pa("number"),nanoseconds:pa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{static fromTimestamp(e){return new Nn(e)}static min(){return new Nn(new as(0,0))}static max(){return new Nn(new as(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=-1;function Oz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Nn.fromTimestamp(r===1e9?new as(n+1,0):new as(n,r));return new $d(s,cn.empty(),e)}function Qz(t){return new $d(t.readTime,t.key,jg)}class $d{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $d(Nn.min(),cn.empty(),jg)}static max(){return new $d(Nn.max(),cn.empty(),jg)}}function Hz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=cn.comparator(t.documentKey,e.documentKey),n!==0?n:sr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t){if(t.code!==pt.FAILED_PRECONDITION||t.message!==Vz)throw t;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Cn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new bt((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof bt?n:bt.resolve(n)}catch(n){return bt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):bt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):bt.reject(n)}static resolve(e){return new bt((n,r)=>{n(e)})}static reject(e){return new bt((n,r)=>{r(e)})}static waitFor(e){return new bt((n,r)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&n()},l=>r(l))}),i=!0,a===s&&n()})}static or(e){let n=bt.resolve(!1);for(const r of e)n=n.next(s=>s?bt.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new bt((r,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(d=>{i[u]=d,++o,o===a&&r(i)},d=>s(d))}})}static doWhile(e,n){return new bt((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function zz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=-1;function Oy(t){return t==null}function k2(t){return t===0&&1/t==-1/0}function qz(t){return typeof t=="number"&&Number.isInteger(t)&&!k2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="";function Kz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WN(e)),e=Wz(t.get(n),e);return WN(e)}function Wz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case RU:n+="";break;default:n+=a}}return n}function WN(t){return t+RU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.comparator=e,this.root=n||ti.EMPTY}insert(e,n){return new Cs(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new Cs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new q1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new q1(this.root,e,this.comparator,!1)}getReverseIterator(){return new q1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new q1(this.root,e,this.comparator,!0)}}class q1{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??ti.RED,this.left=s??ti.EMPTY,this.right=a??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new ti(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ti.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Cn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Cn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Cn(27949);return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1;ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Cn(57766)}get value(){throw Cn(16141)}get color(){throw Cn(16727)}get left(){throw Cn(29726)}get right(){throw Cn(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new ti(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.comparator=e,this.data=new Cs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YN(this.data.getIterator())}getIteratorFrom(e){return new YN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ta(this.comparator);return n.data=e,n}}class YN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.fields=e,e.sort(ri.comparator)}static empty(){return new qo([])}unionWith(e){let n=new Ta(ri.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new UU("Invalid base64 string: "+a):a}}(e);return new ii(n)}static fromUint8Array(e){const n=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new ii(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const $z=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yd(t){if(Nr(!!t,39018),typeof t=="string"){let e=0;const n=$z.exec(t);if(Nr(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ws(t.seconds),nanos:Ws(t.nanos)}}function Ws(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jd(t){return typeof t=="string"?ii.fromBase64String(t):ii.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="server_timestamp",MU="__type__",PU="__previous_value__",jU="__local_write_time__";function t5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MU])==null?void 0:r.stringValue)===LU}function Qy(t){const e=t.mapValue.fields[PU];return t5(e)?Qy(e):e}function Og(t){const e=Yd(t.mapValue.fields[jU].timestampValue);return new as(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,r,s,a,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const I2="(default)";class Qg{constructor(e,n){this.projectId=e,this.database=n||I2}static empty(){return new Qg("","")}get isDefaultDatabase(){return this.database===I2}isEqual(e){return e instanceof Qg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="__type__",Jz="__max__",K1={mapValue:{}},QU="__vector__",F2="value";function Xd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t5(t)?4:Zz(t)?9007199254740991:Xz(t)?10:11:Cn(28295,{value:t})}function Cu(t,e){if(t===e)return!0;const n=Xd(t);if(n!==Xd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Og(t).isEqual(Og(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=Yd(s.timestampValue),o=Yd(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Jd(s.bytesValue).isEqual(Jd(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Ws(s.geoPointValue.latitude)===Ws(a.geoPointValue.latitude)&&Ws(s.geoPointValue.longitude)===Ws(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ws(s.integerValue)===Ws(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=Ws(s.doubleValue),o=Ws(a.doubleValue);return i===o?k2(i)===k2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return gm(t.arrayValue.values||[],e.arrayValue.values||[],Cu);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if($N(i)!==$N(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Cu(i[l],o[l])))return!1;return!0}(t,e);default:return Cn(52216,{left:t})}}function Hg(t,e){return(t.values||[]).find(n=>Cu(n,e))!==void 0}function xm(t,e){if(t===e)return 0;const n=Xd(t),r=Xd(e);if(n!==r)return sr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sr(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=Ws(a.integerValue||a.doubleValue),l=Ws(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return JN(t.timestampValue,e.timestampValue);case 4:return JN(Og(t),Og(e));case 5:return $E(t.stringValue,e.stringValue);case 6:return function(a,i){const o=Jd(a),l=Jd(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=sr(o[u],l[u]);if(d!==0)return d}return sr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=sr(Ws(a.latitude),Ws(i.latitude));return o!==0?o:sr(Ws(a.longitude),Ws(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XN(t.arrayValue,e.arrayValue);case 10:return function(a,i){var p,g,b,w;const o=a.fields||{},l=i.fields||{},u=(p=o[F2])==null?void 0:p.arrayValue,d=(g=l[F2])==null?void 0:g.arrayValue,h=sr(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:XN(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===K1.mapValue&&i===K1.mapValue)return 0;if(a===K1.mapValue)return 1;if(i===K1.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=$E(l[h],d[h]);if(p!==0)return p;const g=xm(o[l[h]],u[d[h]]);if(g!==0)return g}return sr(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Cn(23264,{he:n})}}function JN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return sr(t,e);const n=Yd(t),r=Yd(e),s=sr(n.seconds,r.seconds);return s!==0?s:sr(n.nanos,r.nanos)}function XN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=xm(n[s],r[s]);if(a)return a}return sr(n.length,r.length)}function vm(t){return YE(t)}function YE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yd(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jd(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return cn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=YE(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const i of r)a?a=!1:s+=",",s+=`${i}:${YE(n.fields[i])}`;return s+"}"}(t.mapValue):Cn(61005,{value:t})}function t2(t){switch(Xd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qy(t);return e?16+t2(e):16;case 5:return 2*t.stringValue.length;case 6:return Jd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+t2(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return uf(r.fields,(a,i)=>{s+=a.length+t2(i)}),s}(t.mapValue);default:throw Cn(13486,{value:t})}}function ZN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function JE(t){return!!t&&"integerValue"in t}function n5(t){return!!t&&"arrayValue"in t}function e3(t){return!!t&&"nullValue"in t}function t3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function n2(t){return!!t&&"mapValue"in t}function Xz(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[OU])==null?void 0:r.stringValue)===QU}function pg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uf(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pg(t.arrayValue.values[n]);return e}return{...t}}function Zz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Jz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.value=e}static empty(){return new po({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!n2(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pg(n)}setAll(e){let n=ri.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=pg(i):s.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());n2(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];n2(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){uf(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new po(pg(this.value))}}function HU(t){const e=[];return uf(t.fields,(n,r)=>{const s=new ri([n]);if(n2(r)){const a=HU(r.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new qo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r,s,a,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ki(e,0,Nn.min(),Nn.min(),Nn.min(),po.empty(),0)}static newFoundDocument(e,n,r,s){return new ki(e,1,n,Nn.min(),r,s,0)}static newNoDocument(e,n){return new ki(e,2,n,Nn.min(),Nn.min(),po.empty(),0)}static newUnknownDocument(e,n){return new ki(e,3,n,Nn.min(),Nn.min(),po.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=po.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=po.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ki&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.position=e,this.inclusive=n}}function n3(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?r=cn.comparator(cn.fromName(i.referenceValue),n.key):r=xm(i,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function r3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cu(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n="asc"){this.field=e,this.dir=n}}function eq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{}class ma extends VU{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nq(e,n,r):n==="array-contains"?new aq(e,r):n==="in"?new iq(e,r):n==="not-in"?new oq(e,r):n==="array-contains-any"?new lq(e,r):new ma(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rq(e,r):new sq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xm(n,this.value)):n!==null&&Xd(this.value)===Xd(n)&&this.matchesComparison(xm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Cn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ec extends VU{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ec(e,n)}matches(e){return GU(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GU(t){return t.op==="and"}function zU(t){return tq(t)&&GU(t)}function tq(t){for(const e of t.filters)if(e instanceof Ec)return!1;return!0}function XE(t){if(t instanceof ma)return t.field.canonicalString()+t.op.toString()+vm(t.value);if(zU(t))return t.filters.map(e=>XE(e)).join(",");{const e=t.filters.map(n=>XE(n)).join(",");return`${t.op}(${e})`}}function qU(t,e){return t instanceof ma?function(r,s){return s instanceof ma&&r.op===s.op&&r.field.isEqual(s.field)&&Cu(r.value,s.value)}(t,e):t instanceof Ec?function(r,s){return s instanceof Ec&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,i,o)=>a&&qU(i,s.filters[o]),!0):!1}(t,e):void Cn(19439)}function KU(t){return t instanceof ma?function(n){return`${n.field.canonicalString()} ${n.op} ${vm(n.value)}`}(t):t instanceof Ec?function(n){return n.op.toString()+" {"+n.getFilters().map(KU).join(" ,")+"}"}(t):"Filter"}class nq extends ma{constructor(e,n,r){super(e,n,r),this.key=cn.fromName(r.referenceValue)}matches(e){const n=cn.comparator(e.key,this.key);return this.matchesComparison(n)}}class rq extends ma{constructor(e,n){super(e,"in",n),this.keys=WU("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sq extends ma{constructor(e,n){super(e,"not-in",n),this.keys=WU("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WU(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class aq extends ma{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n5(n)&&Hg(n.arrayValue,this.value)}}class iq extends ma{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hg(this.value.arrayValue,n)}}class oq extends ma{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hg(this.value.arrayValue,n)}}class lq extends ma{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n5(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e,n=null,r=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function s3(t,e=null,n=[],r=[],s=null,a=null,i=null){return new cq(t,e,n,r,s,a,i)}function r5(t){const e=In(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>XE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Oy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vm(r)).join(",")),e.Te=n}return e.Te}function s5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qU(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!r3(t.startAt,e.startAt)&&r3(t.endAt,e.endAt)}function ZE(t){return cn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n=null,r=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uq(t,e,n,r,s,a,i,o){return new Um(t,e,n,r,s,a,i,o)}function a5(t){return new Um(t)}function a3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $U(t){return t.collectionGroup!==null}function gg(t){const e=In(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ta(ri.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Vg(a,r))}),n.has(ri.keyField().canonicalString())||e.Ie.push(new Vg(ri.keyField(),r))}return e.Ie}function gu(t){const e=In(t);return e.Ee||(e.Ee=Aq(e,gg(t))),e.Ee}function Aq(t,e){if(t.limitType==="F")return s3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Vg(s.field,a)});const n=t.endAt?new R2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new R2(t.startAt.position,t.startAt.inclusive):null;return s3(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function e_(t,e){const n=t.filters.concat([e]);return new Um(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function t_(t,e,n){return new Um(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hy(t,e){return s5(gu(t),gu(e))&&t.limitType===e.limitType}function YU(t){return`${r5(gu(t))}|lt:${t.limitType}`}function I0(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KU(s)).join(", ")}]`),Oy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>vm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>vm(s)).join(",")),`Target(${r})`}(gu(t))}; limitType=${t.limitType})`}function Vy(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):cn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of gg(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,l){const u=n3(i,o,l);return i.inclusive?u<=0:u<0}(r.startAt,gg(r),s)||r.endAt&&!function(i,o,l){const u=n3(i,o,l);return i.inclusive?u>=0:u>0}(r.endAt,gg(r),s))}(t,e)}function dq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JU(t){return(e,n)=>{let r=!1;for(const s of gg(t)){const a=fq(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function fq(t,e,n){const r=t.field.isKeyField()?cn.comparator(e.key,n.key):function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?xm(l,u):Cn(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Cn(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uf(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return DU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new Cs(cn.comparator);function CA(){return hq}const XU=new Cs(cn.comparator);function Yp(...t){let e=XU;for(const n of t)e=e.insert(n.key,n);return e}function ZU(t){let e=XU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wf(){return xg()}function eL(){return xg()}function xg(){return new Eh(t=>t.toString(),(t,e)=>t.isEqual(e))}const mq=new Cs(cn.comparator),pq=new Ta(cn.comparator);function ar(...t){let e=pq;for(const n of t)e=e.add(n);return e}const gq=new Ta(sr);function xq(){return gq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k2(e)?"-0":e}}function tL(t){return{integerValue:""+t}}function vq(t,e){return qz(e)?tL(e):i5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this._=void 0}}function yq(t,e,n){return t instanceof D2?function(s,a){const i={fields:{[MU]:{stringValue:LU},[jU]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&t5(a)&&(a=Qy(a)),a&&(i.fields[PU]=a),{mapValue:i}}(n,e):t instanceof Gg?rL(t,e):t instanceof zg?sL(t,e):function(s,a){const i=nL(s,a),o=i3(i)+i3(s.Ae);return JE(i)&&JE(s.Ae)?tL(o):i5(s.serializer,o)}(t,e)}function wq(t,e,n){return t instanceof Gg?rL(t,e):t instanceof zg?sL(t,e):n}function nL(t,e){return t instanceof U2?function(r){return JE(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class D2 extends Gy{}class Gg extends Gy{constructor(e){super(),this.elements=e}}function rL(t,e){const n=aL(e);for(const r of t.elements)n.some(s=>Cu(s,r))||n.push(r);return{arrayValue:{values:n}}}class zg extends Gy{constructor(e){super(),this.elements=e}}function sL(t,e){let n=aL(e);for(const r of t.elements)n=n.filter(s=>!Cu(s,r));return{arrayValue:{values:n}}}class U2 extends Gy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function i3(t){return Ws(t.integerValue||t.doubleValue)}function aL(t){return n5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function bq(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gg&&s instanceof Gg||r instanceof zg&&s instanceof zg?gm(r.elements,s.elements,Cu):r instanceof U2&&s instanceof U2?Cu(r.Ae,s.Ae):r instanceof D2&&s instanceof D2}(t.transform,e.transform)}class Cq{constructor(e,n){this.version=e,this.transformResults=n}}class Dl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dl}static exists(e){return new Dl(void 0,e)}static updateTime(e){return new Dl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function r2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zy{}function iL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new o5(t.key,Dl.none()):new _x(t.key,t.data,Dl.none());{const n=t.data,r=po.empty();let s=new Ta(ri.comparator);for(let a of e.fields)if(!s.has(a)){let i=n.field(a);i===null&&a.length>1&&(a=a.popLast(),i=n.field(a)),i===null?r.delete(a):r.set(a,i),s=s.add(a)}return new Af(t.key,r,new qo(s.toArray()),Dl.none())}}function Eq(t,e,n){t instanceof _x?function(s,a,i){const o=s.value.clone(),l=l3(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Af?function(s,a,i){if(!r2(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=l3(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(oL(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function vg(t,e,n,r){return t instanceof _x?function(a,i,o,l){if(!r2(a.precondition,i))return o;const u=a.value.clone(),d=c3(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Af?function(a,i,o,l){if(!r2(a.precondition,i))return o;const u=c3(a.fieldTransforms,l,i),d=i.data;return d.setAll(oL(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,i,o){return r2(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function _q(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=nL(r.transform,s||null);a!=null&&(n===null&&(n=po.empty()),n.set(r.field,a))}return n||null}function o3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gm(r,s,(a,i)=>bq(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _x extends zy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Af extends zy{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function l3(t,e,n){const r=new Map;Nr(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);r.set(a.field,wq(i,o,n[s]))}return r}function c3(t,e,n){const r=new Map;for(const s of t){const a=s.transform,i=n.data.field(s.field);r.set(s.field,yq(a,i,e))}return r}class o5 extends zy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sq extends zy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Eq(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eL();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=n.has(s.key)?null:o;const l=iL(i,o);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Nn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ar())}isEqual(e){return this.batchId===e.batchId&&gm(this.mutations,e.mutations,(n,r)=>o3(n,r))&&gm(this.baseMutations,e.baseMutations,(n,r)=>o3(n,r))}}class l5{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Nr(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return mq}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,r[i].version);return new l5(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aa,fr;function kq(t){switch(t){case pt.OK:return Cn(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return Cn(15467,{code:t})}}function lL(t){if(t===void 0)return bA("GRPC error has no .code"),pt.UNKNOWN;switch(t){case Aa.OK:return pt.OK;case Aa.CANCELLED:return pt.CANCELLED;case Aa.UNKNOWN:return pt.UNKNOWN;case Aa.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Aa.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Aa.INTERNAL:return pt.INTERNAL;case Aa.UNAVAILABLE:return pt.UNAVAILABLE;case Aa.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Aa.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Aa.NOT_FOUND:return pt.NOT_FOUND;case Aa.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Aa.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Aa.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Aa.ABORTED:return pt.ABORTED;case Aa.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Aa.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Aa.DATA_LOSS:return pt.DATA_LOSS;default:return Cn(39323,{code:t})}}(fr=Aa||(Aa={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=new Hd([4294967295,4294967295],0);function u3(t){const e=Iq().encode(t),n=new CU;return n.update(e),new Uint8Array(n.digest())}function A3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hd([n,r],0),new Hd([s,a],0)]}class c5{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jp(`Invalid padding: ${n}`);if(r<0)throw new Jp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hd.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hd.fromNumber(r)));return s.compare(Fq)===1&&(s=new Hd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=u3(e),[r,s]=A3(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);if(!this.we(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new c5(a,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=u3(e),[r,s]=A3(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qy(Nn.min(),s,new Cs(sr),CA(),ar())}}class Sx{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sx(r,n,ar(),ar(),ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class cL{constructor(e,n){this.targetId=e,this.Ce=n}}class uL{constructor(e,n,r=ii.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class d3{constructor(){this.ve=0,this.Fe=f3(),this.Me=ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ar(),n=ar(),r=ar();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Cn(38017,{changeType:a})}}),new Sx(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=f3()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Rq{constructor(e){this.Ge=e,this.ze=new Map,this.je=CA(),this.Je=W1(),this.He=W1(),this.Ye=new Cs(sr)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Cn(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(ZE(a))if(r===0){const i=new cn(a.path);this.et(n,i,ki.newNoDocument(i,Nn.min()))}else Nr(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let i,o;try{i=Jd(r).toUint8Array()}catch(l){if(l instanceof UU)return pm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new c5(i,s,a)}catch(l){return pm(l instanceof Jp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&ZE(o.target)){const l=new cn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,ki.newNoDocument(l,e))}a.Be&&(n.set(i,a.ke()),a.qe())}});let r=ar();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new qy(e,n,this.Ye,this.je,r);return this.je=CA(),this.Je=W1(),this.He=W1(),this.Ye=new Cs(sr),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new d3,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ta(sr),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ta(sr),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d3),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function W1(){return new Cs(cn.comparator)}function f3(){return new Cs(cn.comparator)}const Dq={asc:"ASCENDING",desc:"DESCENDING"},Uq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lq={and:"AND",or:"OR"};class Mq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function n_(t,e){return t.useProto3Json||Oy(e)?e:{value:e}}function L2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pq(t,e){return L2(t,e.toTimestamp())}function xu(t){return Nr(!!t,49232),Nn.fromTimestamp(function(n){const r=Yd(n);return new as(r.seconds,r.nanos)}(t))}function u5(t,e){return r_(t,e).canonicalString()}function r_(t,e){const n=function(s){return new Zr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dL(t){const e=Zr.fromString(t);return Nr(gL(e),10190,{key:e.toString()}),e}function s_(t,e){return u5(t.databaseId,e.path)}function lC(t,e){const n=dL(e);if(n.get(1)!==t.databaseId.projectId)throw new zt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new cn(hL(n))}function fL(t,e){return u5(t.databaseId,e)}function jq(t){const e=dL(t);return e.length===4?Zr.emptyPath():hL(e)}function a_(t){return new Zr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hL(t){return Nr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h3(t,e,n){return{name:s_(t,e),fields:n.value.mapValue.fields}}function Oq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Cn(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Nr(d===void 0||typeof d=="string",58123),ii.fromBase64String(d||"")):(Nr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ii.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?pt.UNKNOWN:lL(u.code);return new zt(d,u.message||"")}(i);n=new uL(r,s,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lC(t,r.document.name),a=xu(r.document.updateTime),i=r.document.createTime?xu(r.document.createTime):Nn.min(),o=new po({mapValue:{fields:r.document.fields}}),l=ki.newFoundDocument(s,a,i,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new s2(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lC(t,r.document),a=r.readTime?xu(r.readTime):Nn.min(),i=ki.newNoDocument(s,a),o=r.removedTargetIds||[];n=new s2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lC(t,r.document),a=r.removedTargetIds||[];n=new s2([],a,s,null)}else{if(!("filter"in e))return Cn(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,i=new Nq(s,a),o=r.targetId;n=new cL(o,i)}}return n}function Qq(t,e){let n;if(e instanceof _x)n={update:h3(t,e.key,e.value)};else if(e instanceof o5)n={delete:s_(t,e.key)};else if(e instanceof Af)n={update:h3(t,e.key,e.data),updateMask:Yq(e.fieldMask)};else{if(!(e instanceof Sq))return Cn(16599,{Vt:e.type});n={verify:s_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,i){const o=i.transform;if(o instanceof D2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Gg)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zg)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof U2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Cn(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Pq(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Cn(27497)}(t,e.precondition)),n}function Hq(t,e){return t&&t.length>0?(Nr(e!==void 0,14353),t.map(n=>function(s,a){let i=s.updateTime?xu(s.updateTime):xu(a);return i.isEqual(Nn.min())&&(i=xu(a)),new Cq(i,s.transformResults||[])}(n,e))):[]}function Vq(t,e){return{documents:[fL(t,e.path)]}}function Gq(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fL(t,s);const a=function(u){if(u.length!==0)return pL(Ec.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const i=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:F0(p.field),direction:Kq(p.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=n_(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function zq(t){let e=jq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Nr(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const p=mL(h);return p instanceof Ec&&zU(p)?p.getFilters():[p]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(p=>function(b){return new Vg(R0(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(h){let p;return p=typeof h=="object"?h.value:h,Oy(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new R2(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new R2(g,p)}(n.endAt)),uq(e,s,i,a,o,"F",l,u)}function qq(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Cn(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=R0(n.unaryFilter.field);return ma.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=R0(n.unaryFilter.field);return ma.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=R0(n.unaryFilter.field);return ma.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=R0(n.unaryFilter.field);return ma.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Cn(61313);default:return Cn(60726)}}(t):t.fieldFilter!==void 0?function(n){return ma.create(R0(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Cn(58110);default:return Cn(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ec.create(n.compositeFilter.filters.map(r=>mL(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Cn(1026)}}(n.compositeFilter.op))}(t):Cn(30097,{filter:t})}function Kq(t){return Dq[t]}function Wq(t){return Uq[t]}function $q(t){return Lq[t]}function F0(t){return{fieldPath:t.canonicalString()}}function R0(t){return ri.fromServerFormat(t.fieldPath)}function pL(t){return t instanceof ma?function(n){if(n.op==="=="){if(t3(n.value))return{unaryFilter:{field:F0(n.field),op:"IS_NAN"}};if(e3(n.value))return{unaryFilter:{field:F0(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t3(n.value))return{unaryFilter:{field:F0(n.field),op:"IS_NOT_NAN"}};if(e3(n.value))return{unaryFilter:{field:F0(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:F0(n.field),op:Wq(n.op),value:n.value}}}(t):t instanceof Ec?function(n){const r=n.getFilters().map(s=>pL(s));return r.length===1?r[0]:{compositeFilter:{op:$q(n.op),filters:r}}}(t):Cn(54877,{filter:t})}function Yq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,s,a=Nn.min(),i=Nn.min(),o=ii.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.yt=e}}function Xq(t){const e=zq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?t_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.Cn=new eK}addToCollectionParentIndex(e,n){return this.Cn.add(n),bt.resolve()}getCollectionParents(e,n){return bt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return bt.resolve()}deleteFieldIndex(e,n){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,n){return bt.resolve()}getDocumentsMatchingTarget(e,n){return bt.resolve(null)}getIndexType(e,n){return bt.resolve(0)}getFieldIndexes(e,n){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,n){return bt.resolve($d.min())}getMinOffsetFromCollectionGroup(e,n){return bt.resolve($d.min())}updateCollectionGroup(e,n,r){return bt.resolve()}updateIndexEntries(e,n){return bt.resolve()}}class eK{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ta(Zr.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ta(Zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xL=41943040;class ho{static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(xL,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ym(0)}static cr(){return new ym(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="LruGarbageCollector",tK=1048576;function g3([t,e],[n,r]){const s=sr(t,n);return s===0?sr(e,r):s}class nK{constructor(e){this.Ir=e,this.buffer=new Ta(g3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();g3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Yt(p3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dm(n)?Yt(p3,"Ignoring IndexedDB error during garbage collection: ",n):await Rm(n)}await this.Vr(3e5)})}}class sK{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return bt.resolve(jy.ce);const r=new nK(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Yt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(m3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m3):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),k0()<=rr.DEBUG&&Yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function aK(t,e){return new sK(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(){this.changes=new Eh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ki.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?bt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vg(r.mutation,s,qo.empty(),as.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ar()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ar()){const s=Wf();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let i=Yp();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Wf();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ar()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let a=CA();const i=xg(),o=function(){return xg()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Af)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),vg(d.mutation,u,d.mutation.getFieldMask(),as.now())):i.set(u.key,qo.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>i.set(u,d)),n.forEach((u,d)=>o.set(u,new oK(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const r=xg();let s=new Cs((i,o)=>i-o),a=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||qo.empty();d=o.applyToLocalView(u,d),r.set(l,d);const h=(s.get(o.batchId)||ar()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=eL();d.forEach(p=>{if(!a.has(p)){const g=iL(n.get(p),r.get(p));g!==null&&h.set(p,g),a=a.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return bt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return cn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$U(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):bt.resolve(Wf());let o=jg,l=a;return i.next(u=>bt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,ar())).next(d=>({batchId:o,changes:ZU(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new cn(n)).next(r=>{let s=Yp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let i=Yp();return this.indexManager.getCollectionParents(e,a).next(o=>bt.forEach(o,l=>{const u=function(h,p){return new Um(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,p)=>{i=i.insert(h,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(i=>{a.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,ki.newInvalidDocument(d)))});let o=Yp();return i.forEach((l,u)=>{const d=a.get(l);d!==void 0&&vg(d.mutation,u,qo.empty(),as.now()),Vy(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return bt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xu(s.createTime)}}(n)),bt.resolve()}getNamedQuery(e,n){return bt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Xq(s.bundledQuery),readTime:xu(s.readTime)}}(n)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(){this.overlays=new Cs(cn.comparator),this.qr=new Map}getOverlay(e,n){return bt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wf();return bt.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),bt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),bt.resolve()}getOverlaysForCollection(e,n,r){const s=Wf(),a=n.length+1,i=new cn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&s.set(l.getKey(),l)}return bt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Cs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Wf(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Wf(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return bt.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Bq(n,r));let a=this.qr.get(n);a===void 0&&(a=ar(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(){this.sessionToken=ii.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(){this.Qr=new Ta(ja.$r),this.Ur=new Ta(ja.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ja(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ja(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new cn(new Zr([])),r=new ja(n,e),s=new ja(n,e+1),a=[];return this.Ur.forEachInRange([r,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new cn(new Zr([])),r=new ja(n,e),s=new ja(n,e+1);let a=ar();return this.Ur.forEachInRange([r,s],i=>{a=a.add(i.key)}),a}containsKey(e){const n=new ja(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ja{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return cn.comparator(e.key,n.key)||sr(e.Yr,n.Yr)}static Kr(e,n){return sr(e.Yr,n.Yr)||cn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ta(ja.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Tq(a,n,r,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new ja(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,n){return bt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return bt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?e5:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ja(n,0),s=new ja(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),bt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ta(sr);return n.forEach(s=>{const a=new ja(s,0),i=new ja(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{r=r.add(o.Yr)})}),bt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;cn.isDocumentKey(a)||(a=a.child(""));const i=new ja(new cn(a),0);let o=new Ta(sr);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Nr(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return bt.forEach(n.mutations,s=>{const a=new ja(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ja(n,0),s=this.Zr.firstAfterOrEqual(r);return bt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e){this.ri=e,this.docs=function(){return new Cs(cn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return bt.resolve(r?r.document.mutableCopy():ki.newInvalidDocument(n))}getEntries(e,n){let r=CA();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ki.newInvalidDocument(s))}),bt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=CA();const i=n.path,o=new cn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Hz(Qz(d),r)<=0||(s.has(d.key)||Vy(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return bt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Cn(9500)}ii(e,n){return bt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hK(this)}getSize(e){return bt.resolve(this.size)}}class hK extends iK{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),bt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e){this.persistence=e,this.si=new Eh(n=>r5(n),s5),this.lastRemoteSnapshotVersion=Nn.min(),this.highestTargetId=0,this.oi=0,this._i=new A5,this.targetCount=0,this.ai=ym.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),bt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ym(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,bt.resolve()}updateTargetData(e,n){return this.Pr(n),bt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),bt.waitFor(a).next(()=>s)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return bt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),bt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),bt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),bt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return bt.resolve(r)}containsKey(e,n){return bt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.ui={},this.overlays={},this.ci=new jy(0),this.li=!1,this.li=!0,this.hi=new AK,this.referenceDelegate=e(this),this.Pi=new mK(this),this.indexManager=new Zq,this.remoteDocumentCache=function(s){return new fK(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Jq(n),this.Ii=new cK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new dK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Yt("MemoryPersistence","Starting transaction:",e);const s=new pK(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return bt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class pK extends Gz{constructor(e){super(),this.currentSequenceNumber=e}}class d5{constructor(e){this.persistence=e,this.Ri=new A5,this.Vi=null}static mi(e){return new d5(e)}get fi(){if(this.Vi)return this.Vi;throw Cn(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),bt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),bt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),bt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,r=>{const s=cn.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Nn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return bt.or([()=>bt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class M2{constructor(e,n){this.persistence=e,this.pi=new Eh(r=>Kz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=aK(this,n)}static mi(e,n){return new M2(e,n)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return bt.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?bt.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,a.removeEntry(i,Nn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=t2(e.data.value)),n}br(e,n,r){return bt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return bt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ar(),s=ar();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new f5(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return q9()?8:zz(Li())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new gK;return this.Ss(e,n,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(k0()<=rr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",I0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(k0()<=rr.DEBUG&&Yt("QueryEngine","Query:",I0(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(k0()<=rr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",I0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gu(n))):bt.resolve())}ys(e,n){if(a3(n))return bt.resolve(null);let r=gu(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=t_(n,null,"F"),r=gu(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const i=ar(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,o);return this.Cs(n,u,i,l.readTime)?this.ys(e,t_(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,s){return a3(n)||s.isEqual(Nn.min())?bt.resolve(null):this.ps.getDocuments(e,r).next(a=>{const i=this.Ds(n,a);return this.Cs(n,i,r,s)?bt.resolve(null):(k0()<=rr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),I0(n)),this.vs(e,i,n,Oz(s,jg)).next(o=>o))})}Ds(e,n){let r=new Ta(JU(e));return n.forEach((s,a)=>{Vy(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return k0()<=rr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",I0(n)),this.ps.getDocumentsMatchingQuery(e,n,$d.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="LocalStore",vK=3e8;class yK{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Cs(sr),this.xs=new Eh(a=>r5(a),s5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function wK(t,e,n,r){return new yK(t,e,n,r)}async function yL(t,e){const n=In(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const i=[],o=[];let l=ar();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function bK(t,e){const n=In(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,p=h.keys();let g=bt.resolve();return p.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(w=>{const C=u.docVersions.get(b);Nr(C!==null,48541),w.version.compareTo(C)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ar();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function wL(t){const e=In(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function CK(t,e){const n=In(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;o.push(n.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(a,d.addedDocuments,h)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ii.EMPTY_BYTE_STRING,Nn.min()).withLastLimboFreeSnapshotVersion(Nn.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(w,C,T){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=vK?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,d)&&o.push(n.Pi.updateTargetData(a,g))});let l=CA(),u=ar();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(EK(a,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(Nn.min())){const d=n.Pi.getLastRemoteSnapshotVersion(a).next(h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return bt.waitFor(o).next(()=>i.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.Ms=s,a))}function EK(t,e,n){let r=ar(),s=ar();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let i=CA();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Nn.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Yt(h5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:s}})}function _K(t,e){const n=In(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=e5),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SK(t,e){const n=In(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,bt.resolve(s)):n.Pi.allocateTargetId(r).next(i=>(s=new Id(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function i_(t,e,n){const r=In(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Dm(i))throw i;Yt(h5,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function x3(t,e,n){const r=In(t);let s=Nn.min(),a=ar();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=In(l),p=h.xs.get(d);return p!==void 0?bt.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(r,i,gu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?s:Nn.min(),n?a:ar())).next(o=>(TK(r,dq(e),o),{documents:o,Qs:a})))}function TK(t,e,n){let r=t.Os.get(e)||Nn.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class v3{constructor(){this.activeTargetIds=xq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BK{constructor(){this.Mo=new v3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new v3,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="ConnectivityMonitor";class w3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Yt(y3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Yt(y3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1=null;function o_(){return $1===null?$1=function(){return 268435456+Math.round(2147483648*Math.random())}():$1++,"0x"+$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="RestConnection",kK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===I2?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const i=o_(),o=this.zo(e,n.toUriEncodedString());Yt(cC,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:u}=new URL(o),d=Nm(u);return this.Jo(e,o,l,r,d).then(h=>(Yt(cC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw pm(cC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,s,a,i){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=kK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="WebChannelConnection";class RK extends IK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const i=o_();return new Promise((o,l)=>{const u=new EU;u.setWithCredentials(!0),u.listenOnce(_U.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case e2.NO_ERROR:const h=u.getResponseJson();Yt(vi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case e2.TIMEOUT:Yt(vi,`RPC '${e}' ${i} timed out`),l(new zt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case e2.HTTP_ERROR:const p=u.getStatus();if(Yt(vi,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const w=function(T){const I=T.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(I)>=0?I:pt.UNKNOWN}(b.status);l(new zt(w,b.message))}else l(new zt(pt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new zt(pt.UNAVAILABLE,"Connection failed."));break;default:Cn(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Yt(vi,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Yt(vi,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=o_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=BU(),o=TU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");Yt(vi,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let p=!1,g=!1;const b=new FK({Yo:C=>{g?Yt(vi,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(Yt(vi,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Yt(vi,`RPC '${e}' stream ${s} sending:`,C),h.send(C))},Zo:()=>h.close()}),w=(C,T,I)=>{C.listen(T,k=>{try{I(k)}catch(R){setTimeout(()=>{throw R},0)}})};return w(h,$p.EventType.OPEN,()=>{g||(Yt(vi,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),w(h,$p.EventType.CLOSE,()=>{g||(g=!0,Yt(vi,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(h))}),w(h,$p.EventType.ERROR,C=>{g||(g=!0,pm(vi,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),b.a_(new zt(pt.UNAVAILABLE,"The operation could not be completed")))}),w(h,$p.EventType.MESSAGE,C=>{var T;if(!g){const I=C.data[0];Nr(!!I,16349);const k=I,R=(k==null?void 0:k.error)||((T=k[0])==null?void 0:T.error);if(R){Yt(vi,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let P=function(B){const O=Aa[B];if(O!==void 0)return lL(O)}(D),_=R.message;P===void 0&&(P=pt.INTERNAL,_="Unknown error status: "+D+" with message "+R.message),g=!0,b.a_(new zt(P,_)),h.close()}else Yt(vi,`RPC '${e}' stream ${s} received:`,I),b.u_(I)}}),w(o,SU.STAT_EVENT,C=>{C.stat===WE.PROXY?Yt(vi,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===WE.NOPROXY&&Yt(vi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function uC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t){return new Mq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Yt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="PersistentStream";class CL{constructor(e,n,r,s,a,i,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bL(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pt.RESOURCE_EXHAUSTED?(bA(n.toString()),bA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new zt(pt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Yt(b3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Yt(b3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DK extends CL{constructor(e,n,r,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Oq(this.serializer,e),r=function(a){if(!("targetChange"in a))return Nn.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Nn.min():i.readTime?xu(i.readTime):Nn.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=a_(this.serializer),n.addTarget=function(a,i){let o;const l=i.target;if(o=ZE(l)?{documents:Vq(a,l)}:{query:Gq(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=AL(a,i.resumeToken);const u=n_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Nn.min())>0){o.readTime=L2(a,i.snapshotVersion.toTimestamp());const u=n_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=qq(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=a_(this.serializer),n.removeTarget=e,this.q_(n)}}class UK extends CL{constructor(e,n,r,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Nr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Hq(e.writeResults,e.commitTime),r=xu(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=a_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qq(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{}class MK extends LK{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new zt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,r_(n,r),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new zt(pt.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,r_(n,r),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new zt(pt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bA(n),this.aa=!1):Yt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="RemoteStore";class jK{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{_h(this)&&(Yt(fh,"Restarting streams for network reachability change."),await async function(l){const u=In(l);u.Ea.add(4),await Tx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Wy(u)}(this))})}),this.Ra=new PK(r,s)}}async function Wy(t){if(_h(t))for(const e of t.da)await e(!0)}async function Tx(t){for(const e of t.da)await e(!1)}function EL(t,e){const n=In(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),x5(n)?g5(n):Lm(n).O_()&&p5(n,e))}function m5(t,e){const n=In(t),r=Lm(n);n.Ia.delete(e),r.O_()&&_L(n,e),n.Ia.size===0&&(r.O_()?r.L_():_h(n)&&n.Ra.set("Unknown"))}function p5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lm(t).Y_(e)}function _L(t,e){t.Va.Ue(e),Lm(t).Z_(e)}function g5(t){t.Va=new Rq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Lm(t).start(),t.Ra.ua()}function x5(t){return _h(t)&&!Lm(t).x_()&&t.Ia.size>0}function _h(t){return In(t).Ea.size===0}function SL(t){t.Va=void 0}async function OK(t){t.Ra.set("Online")}async function QK(t){t.Ia.forEach((e,n)=>{p5(t,e)})}async function HK(t,e){SL(t),x5(t)?(t.Ra.ha(e),g5(t)):t.Ra.set("Unknown")}async function VK(t,e,n){if(t.Ra.set("Online"),e instanceof uL&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(r){Yt(fh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await P2(t,r)}else if(e instanceof s2?t.Va.Ze(e):e instanceof cL?t.Va.st(e):t.Va.tt(e),!n.isEqual(Nn.min()))try{const r=await wL(t.localStore);n.compareTo(r)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(ii.EMPTY_BYTE_STRING,d.snapshotVersion)),_L(a,l);const h=new Id(d.target,l,u,d.sequenceNumber);p5(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Yt(fh,"Failed to raise snapshot:",r),await P2(t,r)}}async function P2(t,e,n){if(!Dm(e))throw e;t.Ea.add(1),await Tx(t),t.Ra.set("Offline"),n||(n=()=>wL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Yt(fh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wy(t)})}function TL(t,e){return e().catch(n=>P2(t,n,e))}async function $y(t){const e=In(t),n=Zd(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e5;for(;GK(e);)try{const s=await _K(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,zK(e,s)}catch(s){await P2(e,s)}BL(e)&&NL(e)}function GK(t){return _h(t)&&t.Ta.length<10}function zK(t,e){t.Ta.push(e);const n=Zd(t);n.O_()&&n.X_&&n.ea(e.mutations)}function BL(t){return _h(t)&&!Zd(t).x_()&&t.Ta.length>0}function NL(t){Zd(t).start()}async function qK(t){Zd(t).ra()}async function KK(t){const e=Zd(t);for(const n of t.Ta)e.ea(n.mutations)}async function WK(t,e,n){const r=t.Ta.shift(),s=l5.from(r,e,n);await TL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $y(t)}async function $K(t,e){e&&Zd(t).X_&&await async function(r,s){if(function(i){return kq(i)&&i!==pt.ABORTED}(s.code)){const a=r.Ta.shift();Zd(r).B_(),await TL(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await $y(r)}}(t,e),BL(t)&&NL(t)}async function C3(t,e){const n=In(t);n.asyncQueue.verifyOperationInProgress(),Yt(fh,"RemoteStore received new credentials");const r=_h(n);n.Ea.add(3),await Tx(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wy(n)}async function YK(t,e){const n=In(t);e?(n.Ea.delete(2),await Wy(n)):e||(n.Ea.add(2),await Tx(n),n.Ra.set("Unknown"))}function Lm(t){return t.ma||(t.ma=function(n,r,s){const a=In(n);return a.sa(),new DK(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:OK.bind(null,t),t_:QK.bind(null,t),r_:HK.bind(null,t),H_:VK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),x5(t)?g5(t):t.Ra.set("Unknown")):(await t.ma.stop(),SL(t))})),t.ma}function Zd(t){return t.fa||(t.fa=function(n,r,s){const a=In(n);return a.sa(),new UK(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qK.bind(null,t),r_:$K.bind(null,t),ta:KK.bind(null,t),na:WK.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $y(t)):(await t.fa.stop(),t.Ta.length>0&&(Yt(fh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new mA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const i=Date.now()+r,o=new v5(e,n,i,s,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y5(t,e){if(bA("AsyncQueue",`${e}: ${t}`),Dm(t))return new zt(pt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{static emptySet(e){return new $0(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=Yp(),this.sortedSet=new Cs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $0)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.ga=new Cs(cn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Cn(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class wm{constructor(e,n,r,s,a,i,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new wm(e,n,$0.emptySet(n),i,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class XK{constructor(){this.queries=_3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=In(n),a=s.queries;s.queries=_3(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new zt(pt.ABORTED,"Firestore shutting down"))}}function _3(){return new Eh(t=>YU(t),Hy)}async function kL(t,e){const n=In(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new JK,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=y5(i,`Initialization of query '${I0(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&w5(n)}async function IL(t,e){const n=In(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZK(t,e){const n=In(t);let r=!1;for(const s of e){const a=s.query,i=n.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(r=!0);i.wa=s}}r&&w5(n)}function eW(t,e,n){const r=In(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function w5(t){t.Ca.forEach(e=>{e.next()})}var l_,S3;(S3=l_||(l_={})).Ma="default",S3.Cache="cache";class FL{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==l_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.key=e}}class DL{constructor(e){this.key=e}}class tW{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ar(),this.mutatedKeys=ar(),this.eu=JU(e),this.tu=new $0(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new E3,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),g=Vy(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?b!==w&&(r.track({type:3,doc:g}),C=!0):this.su(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||u)&&(o=!0)),C&&(g?(i=i.add(g),a=w?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:i,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cn(20277,{Rt:C})}};return w(g)-w(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new wm(this.query,e.tu,a,i,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new E3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ar(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new DL(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new RL(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ar();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const b5="SyncEngine";class nW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rW{constructor(e){this.key=e,this.hu=!1}}class sW{constructor(e,n,r,s,a,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Eh(o=>YU(o),Hy),this.Iu=new Map,this.Eu=new Set,this.du=new Cs(cn.comparator),this.Au=new Map,this.Ru=new A5,this.Vu={},this.mu=new Map,this.fu=ym.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aW(t,e,n=!0){const r=OL(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await UL(r,e,n,!0),s}async function iW(t,e){const n=OL(t);await UL(n,e,!0,!1)}async function UL(t,e,n,r){const s=await SK(t.localStore,gu(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await oW(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&EL(t.remoteStore,s),o}async function oW(t,e,n,r,s){t.pu=(h,p,g)=>async function(w,C,T,I){let k=C.view.ru(T);k.Cs&&(k=await x3(w.localStore,C.query,!1).then(({documents:_})=>C.view.ru(_,k)));const R=I&&I.targetChanges.get(C.targetId),D=I&&I.targetMismatches.get(C.targetId)!=null,P=C.view.applyChanges(k,w.isPrimaryClient,R,D);return B3(w,C.targetId,P.au),P.snapshot}(t,h,p,g);const a=await x3(t.localStore,e,!0),i=new tW(e,a.Qs),o=i.ru(a.documents),l=Sx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);B3(t,n,u.au);const d=new nW(e,n,i);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function lW(t,e,n){const r=In(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(i=>!Hy(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await i_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&m5(r.remoteStore,s.targetId),c_(r,s.targetId)}).catch(Rm)):(c_(r,s.targetId),await i_(r.localStore,s.targetId,!0))}async function cW(t,e){const n=In(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m5(n.remoteStore,r.targetId))}async function uW(t,e,n){const r=gW(t);try{const s=await function(i,o){const l=In(i),u=as.now(),d=o.reduce((g,b)=>g.add(b.key),ar());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=CA(),w=ar();return l.Ns.getEntries(g,d).next(C=>{b=C,b.forEach((T,I)=>{I.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(C=>{h=C;const T=[];for(const I of o){const k=_q(I,h.get(I.key).overlayedDocument);k!=null&&T.push(new Af(I.key,k,HU(k.value.mapValue),Dl.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,T,o)}).next(C=>{p=C;const T=C.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(g,C.batchId,T)})}).then(()=>({batchId:p.batchId,changes:ZU(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Cs(sr)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(r,s.batchId,n),await Bx(r,s.changes),await $y(r.remoteStore)}catch(s){const a=y5(s,"Failed to persist write");n.reject(a)}}async function LL(t,e){const n=In(t);try{const r=await CK(n.localStore,e);e.targetChanges.forEach((s,a)=>{const i=n.Au.get(a);i&&(Nr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?Nr(i.hu,14607):s.removedDocuments.size>0&&(Nr(i.hu,42227),i.hu=!1))}),await Bx(n,r,e)}catch(r){await Rm(r)}}function T3(t,e,n){const r=In(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=In(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(o)&&(u=!0)}),u&&w5(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AW(t,e,n){const r=In(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let i=new Cs(cn.comparator);i=i.insert(a,ki.newNoDocument(a,Nn.min()));const o=ar().add(a),l=new qy(Nn.min(),new Map,new Cs(sr),i,o);await LL(r,l),r.du=r.du.remove(a),r.Au.delete(e),C5(r)}else await i_(r.localStore,e,!1).then(()=>c_(r,e,n)).catch(Rm)}async function dW(t,e){const n=In(t),r=e.batch.batchId;try{const s=await bK(n.localStore,e);PL(n,r,null),ML(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bx(n,s)}catch(s){await Rm(s)}}async function fW(t,e,n){const r=In(t);try{const s=await function(i,o){const l=In(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Nr(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);PL(r,e,n),ML(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bx(r,s)}catch(s){await Rm(s)}}function ML(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function PL(t,e,n){const r=In(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function c_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||jL(t,r)})}function jL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(m5(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),C5(t))}function B3(t,e,n){for(const r of n)r instanceof RL?(t.Ru.addReference(r.key,e),hW(t,r)):r instanceof DL?(Yt(b5,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||jL(t,r.key)):Cn(19791,{wu:r})}function hW(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Yt(b5,"New document in limbo: "+n),t.Eu.add(r),C5(t))}function C5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new cn(Zr.fromString(e)),r=t.fu.next();t.Au.set(r,new rW(n)),t.du=t.du.insert(n,r),EL(t.remoteStore,new Id(gu(a5(n.path)),r,"TargetPurposeLimboResolution",jy.ce))}}async function Bx(t,e,n){const r=In(t),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=f5.As(l.targetId,u);a.push(h)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(l,u){const d=In(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(u,p=>bt.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>bt.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Dm(h))throw h;Yt(h5,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=d.Ms.get(p),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(p,w)}}}(r.localStore,a))}async function mW(t,e){const n=In(t);if(!n.currentUser.isEqual(e)){Yt(b5,"User change. New user:",e.toKey());const r=await yL(n.localStore,e);n.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new zt(pt.CANCELLED,i))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bx(n,r.Ls)}}function pW(t,e){const n=In(t),r=n.Au.get(e);if(r&&r.hu)return ar().add(r.key);{let s=ar();const a=n.Iu.get(e);if(!a)return s;for(const i of a){const o=n.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function OL(t){const e=In(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AW.bind(null,e),e.Pu.H_=ZK.bind(null,e.eventManager),e.Pu.yu=eW.bind(null,e.eventManager),e}function gW(t){const e=In(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fW.bind(null,e),e}class j2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ky(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wK(this.persistence,new xK,e.initialUser,this.serializer)}Cu(e){return new vL(d5.mi,this.serializer)}Du(e){return new BK}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}j2.provider={build:()=>new j2};class xW extends j2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Nr(this.persistence.referenceDelegate instanceof M2,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new rK(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new vL(r=>M2.mi(r,n),this.serializer)}}class u_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mW.bind(null,this.syncEngine),await YK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XK}()}createDatastore(e){const n=Ky(e.databaseInfo.databaseId),r=function(a){return new RK(a)}(e.databaseInfo);return function(a,i,o,l){return new MK(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,i,o){return new jK(r,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>T3(this.syncEngine,n,0),function(){return w3.v()?new w3:new NK}())}createSyncEngine(e,n){return function(s,a,i,o,l,u,d){const h=new sW(s,a,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=In(s);Yt(fh,"RemoteStore shutting down."),a.Ea.add(5),await Tx(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}u_.provider={build:()=>new u_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="FirestoreClient";class vW{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Si.UNAUTHENTICATED,this.clientId=ZS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async i=>{Yt(ef,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Yt(ef,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=y5(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function AC(t,e){t.asyncQueue.verifyOperationInProgress(),Yt(ef,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await yL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function N3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yW(t);Yt(ef,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>C3(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>C3(e.remoteStore,s)),t._onlineComponents=e}async function yW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Yt(ef,"Using user provided OfflineComponentProvider");try{await AC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===pt.FAILED_PRECONDITION||s.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pm("Error using user provided cache. Falling back to memory cache: "+n),await AC(t,new j2)}}else Yt(ef,"Using default OfflineComponentProvider"),await AC(t,new xW(void 0));return t._offlineComponents}async function HL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Yt(ef,"Using user provided OnlineComponentProvider"),await N3(t,t._uninitializedComponentsProvider._online)):(Yt(ef,"Using default OnlineComponentProvider"),await N3(t,new u_))),t._onlineComponents}function wW(t){return HL(t).then(e=>e.syncEngine)}async function VL(t){const e=await HL(t),n=e.eventManager;return n.onListen=aW.bind(null,e.syncEngine),n.onUnlisten=lW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cW.bind(null,e.syncEngine),n}function bW(t,e,n={}){const r=new mA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new QL({next:p=>{d.Nu(),i.enqueueAndForget(()=>IL(a,h));const g=p.docs.has(o);!g&&p.fromCache?u.reject(new zt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new zt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new FL(a5(o.path),d,{includeMetadataChanges:!0,qa:!0});return kL(a,h)}(await VL(t),t.asyncQueue,e,n,r)),r.promise}function CW(t,e,n={}){const r=new mA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new QL({next:p=>{d.Nu(),i.enqueueAndForget(()=>IL(a,h)),p.fromCache&&l.source==="server"?u.reject(new zt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new FL(o,d,{includeMetadataChanges:!0,qa:!0});return kL(a,h)}(await VL(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="firestore.googleapis.com",I3=!0;class F3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new zt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zL,this.ssl=I3}else this.host=e.host,this.ssl=e.ssl??I3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tK)throw new zt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GL(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new zt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new zt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new zt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yy{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new zt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nz;switch(r.type){case"firstParty":return new Rz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new zt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=k3.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),k3.delete(n),r.terminate())}(this),Promise.resolve()}}function EW(t,e,n,r={}){var u;t=Cc(t,Yy);const s=Nm(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(LD(`https://${o}`),MD("Firestore",!0)),a.host!==zL&&a.host!==o&&pm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:r};if(!ch(l,i)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Si.MOCK_USER;else{d=M9(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new zt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Si(p)}t._authCredentials=new kz(new kU(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sh(this.firestore,e,this._query)}}class Xs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xs(this.firestore,e,this._key)}toJSON(){return{type:Xs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ex(n,Xs._jsonSchema))return new Xs(e,r||null,new cn(Zr.fromString(n.referencePath)))}}Xs._jsonSchemaVersion="firestore/documentReference/1.0",Xs._jsonSchema={type:pa("string",Xs._jsonSchemaVersion),referencePath:pa("string")};class Vd extends Sh{constructor(e,n,r){super(e,n,a5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xs(this.firestore,null,new cn(e))}withConverter(e){return new Vd(this.firestore,e,this._path)}}function Wi(t,e,...n){if(t=Ga(t),IU("collection","path",e),t instanceof Yy){const r=Zr.fromString(e,...n);return zN(r),new Vd(t,null,r)}{if(!(t instanceof Xs||t instanceof Vd))throw new zt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zr.fromString(e,...n));return zN(r),new Vd(t.firestore,null,r)}}function $i(t,e,...n){if(t=Ga(t),arguments.length===1&&(e=ZS.newId()),IU("doc","path",e),t instanceof Yy){const r=Zr.fromString(e,...n);return GN(r),new Xs(t,null,new cn(r))}{if(!(t instanceof Xs||t instanceof Vd))throw new zt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zr.fromString(e,...n));return GN(r),new Xs(t.firestore,t instanceof Vd?t.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="AsyncQueue";class D3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bL(this,"async_queue_retry"),this._c=()=>{const r=uC();r&&Yt(R3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=uC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=uC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dm(e))throw e;Yt(R3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,bA("INTERNAL UNHANDLED ERROR: ",U3(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=v5.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Cn(47125,{Pc:U3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function U3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Th extends Yy{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new D3,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D3(e),this._firestoreClient=void 0,await e}}}function _W(t,e){const n=typeof t=="object"?t:QD(),r=typeof t=="string"?t:I2,s=VS(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=U9("firestore");a&&EW(s,...a)}return s}function E5(t){if(t._terminated)throw new zt(pt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SW(t),t._firestoreClient}function SW(t){var r,s,a;const e=t._freezeSettings(),n=function(o,l,u,d){return new Yz(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GL(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new vW(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(ii.fromBase64String(e))}catch(n){throw new zt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nl(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ex(e,Nl._jsonSchema))return Nl.fromBase64String(e.bytes)}}Nl._jsonSchemaVersion="firestore/bytes/1.0",Nl._jsonSchema={type:pa("string",Nl._jsonSchemaVersion),bytes:pa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new zt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new zt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new zt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return sr(this._lat,e._lat)||sr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vu._jsonSchemaVersion}}static fromJSON(e){if(Ex(e,vu._jsonSchema))return new vu(e.latitude,e.longitude)}}vu._jsonSchemaVersion="firestore/geoPoint/1.0",vu._jsonSchema={type:pa("string",vu._jsonSchemaVersion),latitude:pa("number"),longitude:pa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ex(e,yu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yu(e.vectorValues);throw new zt(pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yu._jsonSchemaVersion="firestore/vectorValue/1.0",yu._jsonSchema={type:pa("string",yu._jsonSchemaVersion),vectorValues:pa("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW=/^__.*__$/;class BW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Af(e,this.data,this.fieldMask,n,this.fieldTransforms):new _x(e,this.data,n,this.fieldTransforms)}}class qL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Af(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cn(40011,{Ac:t})}}class S5{constructor(e,n,r,s,a,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new S5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return O2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KL(this.Ac)&&TW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ky(e)}Cc(e,n,r,s=!1){return new S5({Ac:e,methodName:n,Dc:r,path:ri.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xy(t){const e=t._freezeSettings(),n=Ky(t._databaseId);return new NW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WL(t,e,n,r,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);T5("Data must be an object, but it was:",i,r);const o=$L(r,i);let l,u;if(a.merge)l=new qo(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const p=A_(e,h,n);if(!i.contains(p))throw new zt(pt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);JL(d,p)||d.push(p)}l=new qo(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new BW(new po(o),l,u)}class Zy extends _5{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zy}}function kW(t,e,n,r){const s=t.Cc(1,e,n);T5("Data must be an object, but it was:",s,r);const a=[],i=po.empty();uf(r,(l,u)=>{const d=B5(e,l,n);u=Ga(u);const h=s.yc(d);if(u instanceof Zy)a.push(d);else{const p=Nx(u,h);p!=null&&(a.push(d),i.set(d,p))}});const o=new qo(a);return new qL(i,o,s.fieldTransforms)}function IW(t,e,n,r,s,a){const i=t.Cc(1,e,n),o=[A_(e,r,n)],l=[s];if(a.length%2!=0)throw new zt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(A_(e,a[p])),l.push(a[p+1]);const u=[],d=po.empty();for(let p=o.length-1;p>=0;--p)if(!JL(u,o[p])){const g=o[p];let b=l[p];b=Ga(b);const w=i.yc(g);if(b instanceof Zy)u.push(g);else{const C=Nx(b,w);C!=null&&(u.push(g),d.set(g,C))}}const h=new qo(u);return new qL(d,h,i.fieldTransforms)}function FW(t,e,n,r=!1){return Nx(n,t.Cc(r?4:3,e))}function Nx(t,e){if(YL(t=Ga(t)))return T5("Unsupported field value:",e,t),$L(t,e);if(t instanceof _5)return function(r,s){if(!KL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let i=0;for(const o of r){let l=Nx(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Ga(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vq(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=as.fromDate(r);return{timestampValue:L2(s.serializer,a)}}if(r instanceof as){const a=new as(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:L2(s.serializer,a)}}if(r instanceof vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nl)return{bytesValue:AL(s.serializer,r._byteString)};if(r instanceof Xs){const a=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:u5(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yu)return function(i,o){return{mapValue:{fields:{[OU]:{stringValue:QU},[F2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return i5(o.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Py(r)}`)}(t,e)}function $L(t,e){const n={};return DU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uf(t,(r,s)=>{const a=Nx(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function YL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof as||t instanceof vu||t instanceof Nl||t instanceof Xs||t instanceof _5||t instanceof yu)}function T5(t,e,n){if(!YL(n)||!FU(n)){const r=Py(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function A_(t,e,n){if((e=Ga(e))instanceof Jy)return e._internalPath;if(typeof e=="string")return B5(t,e);throw O2("Field path arguments must be of type string or ",t,!1,void 0,n)}const RW=new RegExp("[~\\*/\\[\\]]");function B5(t,e,n){if(e.search(RW)>=0)throw O2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jy(...e.split("."))._internalPath}catch{throw O2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function O2(t,e,n,r,s){const a=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new zt(pt.INVALID_ARGUMENT,o+t+l)}function JL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ew("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DW extends XL{data(){return super.data()}}function ew(t,e){return typeof e=="string"?B5(t,e):e instanceof Jy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new zt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N5{}class ZL extends N5{}function df(t,e,...n){let r=[];e instanceof N5&&r.push(e),r=r.concat(n),function(a){const i=a.filter(l=>l instanceof k5).length,o=a.filter(l=>l instanceof tw).length;if(i>1||i>0&&o>0)throw new zt(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tw extends ZL{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tw(e,n,r)}_apply(e){const n=this._parse(e);return t8(e._query,n),new Sh(e.firestore,e.converter,e_(e._query,n))}_parse(e){const n=Xy(e.firestore);return function(a,i,o,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new zt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){M3(h,d);const b=[];for(const w of h)b.push(L3(l,a,w));p={arrayValue:{values:b}}}else p=L3(l,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||M3(h,d),p=FW(o,i,h,d==="in"||d==="not-in");return ma.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function e8(t,e,n){const r=e,s=ew("where",t);return tw._create(s,r,n)}class k5 extends N5{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new k5(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ec.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)t8(i,l),i=e_(i,l)}(e._query,n),new Sh(e.firestore,e.converter,e_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class I5 extends ZL{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new I5(e,n)}_apply(e){const n=function(s,a,i){if(s.startAt!==null)throw new zt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new zt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vg(a,i)}(e._query,this._field,this._direction);return new Sh(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new Um(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ff(t,e="asc"){const n=e,r=ew("orderBy",t);return I5._create(r,n)}function L3(t,e,n){if(typeof(n=Ga(n))=="string"){if(n==="")throw new zt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$U(e)&&n.indexOf("/")!==-1)throw new zt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Zr.fromString(n));if(!cn.isDocumentKey(r))throw new zt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ZN(t,new cn(r))}if(n instanceof Xs)return ZN(t,n._key);throw new zt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Py(n)}.`)}function M3(t,e){if(!Array.isArray(t)||t.length===0)throw new zt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t8(t,e){const n=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new zt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new zt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LW{convertValue(e,n="none"){switch(Xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ws(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Cn(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uf(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[F2].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>Ws(i.doubleValue));return new yu(n)}convertGeoPoint(e){return new vu(Ws(e.latitude),Ws(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Og(e));default:return null}}convertTimestamp(e){const n=Yd(e);return new as(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Zr.fromString(e);Nr(gL(r),9688,{name:e});const s=new Qg(r.get(1),r.get(3)),a=new cn(r.popFirst(5));return s.isEqual(n)||bA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Xp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zf extends XL{constructor(e,n,r,s,a,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new a2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ew("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zf._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zf._jsonSchema={type:pa("string",Zf._jsonSchemaVersion),bundleSource:pa("string","DocumentSnapshot"),bundleName:pa("string"),bundle:pa("string")};class a2 extends Zf{data(e={}){return super.data(e)}}class Y0{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new a2(this._firestore,this._userDataWriter,r.key,r,new Xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new zt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new a2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xp(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new a2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xp(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:MW(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Y0._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ZS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cn(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){t=Cc(t,Xs);const e=Cc(t.firestore,Th);return bW(E5(e),t._key).then(n=>jW(e,t,n))}Y0._jsonSchemaVersion="firestore/querySnapshot/1.0",Y0._jsonSchema={type:pa("string",Y0._jsonSchemaVersion),bundleSource:pa("string","QuerySnapshot"),bundleName:pa("string"),bundle:pa("string")};class s8 extends LW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xs(this.firestore,null,n)}}function Eu(t){t=Cc(t,Sh);const e=Cc(t.firestore,Th),n=E5(e),r=new s8(e);return UW(t._query),CW(n,t._query).then(s=>new Y0(e,r,t,s))}function PW(t,e,n){t=Cc(t,Xs);const r=Cc(t.firestore,Th),s=n8(t.converter,e);return nw(r,[WL(Xy(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dl.none())])}function kx(t,e,n,...r){t=Cc(t,Xs);const s=Cc(t.firestore,Th),a=Xy(s);let i;return i=typeof(e=Ga(e))=="string"||e instanceof Jy?IW(a,"updateDoc",t._key,e,n,r):kW(a,"updateDoc",t._key,e),nw(s,[i.toMutation(t._key,Dl.exists(!0))])}function Mm(t){return nw(Cc(t.firestore,Th),[new o5(t._key,Dl.none())])}function Ix(t,e){const n=Cc(t.firestore,Th),r=$i(t),s=n8(t.converter,e);return nw(n,[WL(Xy(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dl.exists(!1))]).then(()=>r)}function nw(t,e){return function(r,s){const a=new mA;return r.asyncQueue.enqueueAndForget(async()=>uW(await wW(r),s,a)),a.promise}(E5(t),e)}function jW(t,e,n){const r=n.docs.get(e._key),s=new s8(t);return new Zf(t,s,e._key,r,new Xp(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Fm=s})(km),hm(new uh("firestore",(r,{instanceIdentifier:s,options:a})=>{const i=r.getProvider("app").getImmediate(),o=new Th(new Iz(r.getProvider("auth-internal")),new Dz(i,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new zt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qg(u.options.projectId,d)}(i,s),i);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Od(ON,QN,e),Od(ON,QN,"esm2020")})();const OW={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},a8=OD(OW),Y1=_z(a8),ts=_W(a8);var en=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(en||{}),zn=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(zn||{}),Gf=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Gf||{});const ga="w-6 h-6",rw="w-24 h-24",F5=()=>A.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),QW=()=>A.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M9 18h6"}),A.jsx("path",{d:"M10 22h4"}),A.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),HW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),VW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Zp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),eg=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i8=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),GW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:rw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),zW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:rw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),qW=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:rw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),KW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:rw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),WW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),P3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),J1=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),dC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X1=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),fC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),j3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),$W=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),YW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),JW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),XW=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),O3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),ZW=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),hC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),e$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ga,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),t$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ga,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Q3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ga,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),n$=[{id:en.SUBDIRECCION,label:"Subdirección Pedagógica",icon:A.jsx(GW,{})},{id:en.PROFESORADO,label:"Profesorado",icon:A.jsx(zW,{})},{id:en.COORDINACION_TP,label:"Coordinación TP",icon:A.jsx(qW,{})},{id:en.ESTUDIANTE,label:"Estudiantes",icon:A.jsx(KW,{})}],r$={[en.SUBDIRECCION]:[{name:"Dashboard",icon:A.jsx(WW,{})},{name:"Administración",icon:A.jsx(XW,{})},{name:"Seguimiento Curricular",icon:A.jsx(t$,{})},{name:"Acompañamiento docente",icon:A.jsx(JW,{})},{name:"Análisis Taxonómico",icon:A.jsx(Q3,{})},{name:"Interdisciplinario",icon:A.jsx(hC,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:A.jsx(P3,{})},{name:"Crear horarios",icon:A.jsx(dC,{})},{name:"Seguimiento de acciones pedagógicas",icon:A.jsx(X1,{})},{name:"Inclusión",icon:A.jsx(O3,{})},{name:"Calendario Académico",icon:A.jsx(J1,{})},{name:"Muro de Anuncios",icon:A.jsx(Zp,{})},{name:"Mensajería Interna",icon:A.jsx(eg,{})},{name:"Generador de Actas",icon:A.jsx(fC,{})}],[en.PROFESORADO]:[{name:"Planificación",icon:A.jsx(j3,{})},{name:"Mis Acompañamientos",icon:A.jsx(ZW,{})},{name:"Recursos de Aprendizaje",icon:A.jsx($W,{})},{name:"Análisis Taxonómico",icon:A.jsx(Q3,{})},{name:"Interdisciplinario",icon:A.jsx(hC,{})},{name:"Inclusión",icon:A.jsx(O3,{})},{name:"Actividades Remotas",icon:A.jsx(YW,{})},{name:"Evaluación de Aprendizajes",icon:A.jsx(fC,{})},{name:"Evaluaciones Formativas",icon:A.jsx(X1,{})},{name:"Calendario Académico",icon:A.jsx(J1,{})},{name:"Muro de Anuncios",icon:A.jsx(Zp,{})},{name:"Mensajería Interna",icon:A.jsx(eg,{})},{name:"Generador de Actas",icon:A.jsx(P3,{})}],[en.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:A.jsx(X1,{})},{name:"Asistencia Dual",icon:A.jsx(dC,{})},{name:"Pañol",icon:A.jsx(e$,{})},{name:"Calendario Académico",icon:A.jsx(J1,{})},{name:"Muro de Anuncios",icon:A.jsx(Zp,{})},{name:"Mensajería Interna",icon:A.jsx(eg,{})},{name:"Generador de Actas",icon:A.jsx(fC,{})}],[en.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:A.jsx(j3,{})},{name:"Evaluación Formativa",icon:A.jsx(X1,{})},{name:"Tareas Interdisciplinarias",icon:A.jsx(hC,{})},{name:"Asistencia a Empresa",icon:A.jsx(dC,{})},{name:"Calendario Académico",icon:A.jsx(J1,{})},{name:"Muro de Anuncios",icon:A.jsx(Zp,{})},{name:"Mensajería Interna",icon:A.jsx(eg,{})}]},H3=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],Rp=["Pendiente","En Proceso","Cumplida"],Q2=["1º Medio","2º Medio","3º Medio","4º Medio"],$o=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Zs=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],d_=["Juan Pérez","María González","Carlos Soto","Ana Fernández","Luis Rojas","Laura Muñoz","Pedro Castillo","Sofía Reyes","Diego Flores","Valentina Castro"],i2=["Lunes","Martes","Miércoles","Jueves","Viernes"],f_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],s$={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},D0={[zn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[zn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[zn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[zn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},a$=Object.values(Gf),mC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],pC=["Vinculado","Desvinculado","En proceso","Empresa"],eh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],i$=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],H2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],V2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],o8=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],Z1=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],o$=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState("login"),u=p=>{p.preventDefault(),t(r,a)},d=p=>{p.preventDefault(),e(r),l("forgot_sent")},h=()=>o==="forgot"?A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),A.jsx("div",{children:A.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),A.jsx("div",{className:"text-sm text-center",children:A.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?A.jsxs("div",{className:"text-center",children:[A.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),A.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",A.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contraseña."]}),A.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),A.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):A.jsxs("form",{onSubmit:u,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&A.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:A.jsx("p",{children:n})}),A.jsx("div",{className:"text-sm text-center",children:A.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),A.jsx("div",{children:A.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(F5,{})}),A.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),A.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),A.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},gC=({trigger:t,children:e,onOpen:n})=>{const[r,s]=ee.useState(!1),a=ee.useRef(null),i=()=>{const l=!r;s(l),l&&n&&n()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return ee.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),A.jsxs("div",{className:"relative",ref:a,children:[A.jsx("div",{onClick:i,children:t}),r&&A.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},V3="usuariosLiceo",l$=({user:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const u=localStorage.getItem(V3);let d=u?JSON.parse(u):[];const h=d.findIndex(p=>p.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(V3,JSON.stringify(d)),n(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:A.jsxs("form",{onSubmit:i,children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),A.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),A.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),A.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),A.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},G3="usuariosLiceo",c$=({user:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState(""),[a,i]=ee.useState(""),[o,l]=ee.useState(null),u=d=>{if(d.preventDefault(),l(null),!r){l("La contraseña no puede estar en blanco.");return}if(r!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:r};try{const p=localStorage.getItem(G3);let g=p?JSON.parse(p):[];const b=g.findIndex(w=>w.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(G3,JSON.stringify(g)),n(h),e()}catch(p){console.error("Failed to save new password:",p),l("No se pudo guardar la nueva contraseña.")}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:A.jsxs("form",{onSubmit:u,children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),A.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&A.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:A.jsx("p",{children:o})})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},z3="anunciosMuro",q3="mensajesInternos",K3="lir-read-status",u$=({user:t})=>{if(t.fotoUrl)return A.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return A.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},A$=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:s,toggleSidebar:a,unreadMessagesCount:i,refreshUnreadCount:o})=>{const[l,u]=ee.useState([]),[d,h]=ee.useState([]),[p,g]=ee.useState(!1),[b,w]=ee.useState(!1),C=ee.useCallback(()=>{try{const R=localStorage.getItem(`${K3}-${t.id}`);return R?JSON.parse(R):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),T=ee.useCallback(R=>{try{localStorage.setItem(`${K3}-${t.id}`,JSON.stringify(R))}catch(D){console.error("Failed to set read status:",D)}},[t.id]);ee.useEffect(()=>{const R=JSON.parse(localStorage.getItem(z3)||"[]"),D=C();u(R.filter(_=>!D.announcements.includes(_.id)));const P=JSON.parse(localStorage.getItem(q3)||"[]");h(P.filter(_=>_.para===t.email).sort((_,N)=>new Date(N.fecha).getTime()-new Date(_.fecha).getTime()).slice(0,5))},[t.id,C,i]);const I=()=>{const R=C(),D=JSON.parse(localStorage.getItem(z3)||"[]").map(P=>P.id);R.announcements=D,T(R),u([])},k=()=>{const R=C(),P=JSON.parse(localStorage.getItem(q3)||"[]").filter(_=>_.para===t.email).map(_=>_.id);R.messages=[...new Set([...R.messages,...P])],T(R),o()};return A.jsxs(A.Fragment,{children:[A.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:A.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:a,children:A.jsx(HW,{})}),A.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[A.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),A.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),A.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),A.jsx("div",{className:"flex-1 flex justify-center",children:A.jsx("button",{onClick:()=>n("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:A.jsx(VW,{})})}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(gC,{onOpen:I,trigger:A.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[A.jsx(Zp,{}),l.length>0&&A.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l.length})]}),children:A.jsxs("div",{className:"p-2",children:[A.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),A.jsxs("ul",{className:"mt-1",children:[l.slice(0,3).map(R=>A.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[A.jsx("p",{className:"font-bold dark:text-slate-200",children:R.titulo}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:R.mensaje})]},R.id)),l.length===0&&A.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),A.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),A.jsx(gC,{onOpen:k,trigger:A.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[A.jsx(eg,{}),i>0&&A.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:i})]}),children:A.jsxs("div",{className:"p-2",children:[A.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),A.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(R=>A.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[A.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",R.de]}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:R.asunto})]},R.id)),d.length===0&&A.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),A.jsx("button",{onClick:()=>n("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),A.jsx(gC,{trigger:A.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:A.jsx(u$,{user:t})}),children:A.jsxs("div",{className:"p-2",children:[A.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),A.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[A.jsx("li",{children:A.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),A.jsx("li",{children:A.jsx("button",{onClick:()=>w(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),t.email==="subdi@lir.cl"&&A.jsx("li",{children:A.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cambiar Perfil"})}),A.jsx("li",{children:A.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&A.jsx(l$,{user:t,onClose:()=>g(!1),onSave:r}),b&&A.jsx(c$,{user:t,onClose:()=>w(!1),onSave:r})]})},d$=Array.from({length:12},(t,e)=>e+1),f$="usuariosLiceo",W3="reemplazosDocentes",$3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},h$=({selectedBlocks:t,onChange:e,legend:n})=>A.jsxs("fieldset",{children:[A.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),A.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:d$.map(r=>A.jsxs("label",{className:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700 transition-colors",children:[A.jsx("input",{type:"checkbox",value:r,checked:t.includes(r),onChange:e,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),A.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:r})]},r))})]}),m$=()=>{const[t,e]=ee.useState(()=>{try{const C=localStorage.getItem(W3);return C?JSON.parse(C):[]}catch(C){return console.error("Error al leer reemplazos de localStorage",C),[]}}),[n,r]=ee.useState([]),[s,a]=ee.useState($3),[i,o]=ee.useState(""),[l,u]=ee.useState(null);ee.useEffect(()=>{try{const C=localStorage.getItem(f$);if(C){const I=JSON.parse(C).filter(k=>k.profile===en.PROFESORADO).map(k=>k.nombreCompleto).sort();r(I)}}catch(C){console.error("Error al cargar profesores desde localStorage",C)}},[]),ee.useEffect(()=>{try{localStorage.setItem(W3,JSON.stringify(t))}catch(C){console.error("Error al guardar reemplazos en localStorage",C)}},[t]);const d=ee.useCallback(C=>{const{name:T,value:I}=C.target;a(k=>({...k,[T]:I}))},[]),h=ee.useCallback(C=>{const T=parseInt(C.target.value,10);a(I=>{const k=I.bloquesAfectados,R=k.includes(T)?k.filter(D=>D!==T):[...k,T].sort((D,P)=>D-P);return{...I,bloquesAfectados:R}})},[]),p=ee.useCallback(C=>{C.preventDefault(),u(null);const{docenteAusente:T,asignaturaAusente:I,curso:k,diaAusencia:R,bloquesAfectados:D,docenteReemplazante:P,asignaturaReemplazante:_}=s;if(!T||!I||!k||!R||!P||!_||D.length===0){u("Todos los campos son obligatorios y debe seleccionar al menos un bloque.");return}const N=I.trim().toLowerCase()===_.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",B={id:crypto.randomUUID(),...s,resultado:N};e(O=>[B,...O]),a($3)},[s]),g=ee.useCallback(C=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&e(T=>T.filter(I=>I.id!==C))},[]),b=ee.useMemo(()=>{if(!i)return t;const C=i.toLowerCase();return t.filter(T=>T.docenteAusente.toLowerCase().includes(C)||T.docenteReemplazante.toLowerCase().includes(C)||T.diaAusencia.includes(C)||T.curso.toLowerCase().includes(C))},[t,i]),w="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),A.jsxs("form",{onSubmit:p,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),A.jsxs("select",{name:"docenteAusente",value:s.docenteAusente,onChange:d,className:w,children:[A.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(C=>A.jsx("option",{value:C,children:C},C))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignaturaAusente",value:s.asignaturaAusente,onChange:d,className:w,children:[A.jsx("option",{value:"",children:"Seleccione una asignatura"}),$o.map(C=>A.jsx("option",{value:C,children:C},C))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:s.curso,onChange:d,className:w,children:[A.jsx("option",{value:"",children:"Seleccione un curso"}),Zs.map(C=>A.jsx("option",{value:C,children:C},C))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),A.jsx("input",{type:"date",name:"diaAusencia",value:s.diaAusencia,onChange:d,className:w})]}),A.jsx(h$,{legend:"Bloques Afectados",selectedBlocks:s.bloquesAfectados,onChange:h})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),A.jsxs("select",{name:"docenteReemplazante",value:s.docenteReemplazante,onChange:d,className:w,children:[A.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(C=>A.jsx("option",{value:C,children:C},C))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignaturaReemplazante",value:s.asignaturaReemplazante,onChange:d,className:w,children:[A.jsx("option",{value:"",children:"Seleccione una asignatura"}),$o.map(C=>A.jsx("option",{value:C,children:C},C))]})]})]})]}),l&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),A.jsx("div",{className:"pt-4 text-right",children:A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Registrar Reemplazo"})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:i,onChange:C=>o(C.target.value),className:w+" md:w-1/2"})}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),A.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(C=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:C.diaAusencia}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:C.curso}),A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[C.docenteAusente,A.jsx("br",{}),A.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.asignaturaAusente})]}),A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[C.docenteReemplazante,A.jsx("br",{}),A.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.asignaturaReemplazante})]}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:C.bloquesAfectados.join(", ")}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${C.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:C.resultado})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:A.jsx("button",{onClick:()=>g(C.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},C.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron registros."})})})]})})]})]})},p$="acompanamientoDocenteRecords",g$="eventosCalendario",x$="acompanamientoDocenteCustomRubrica",au=({title:t,value:e,description:n})=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),A.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),jf=({title:t,data:e,colorClass:n,valueFormatter:r=s=>String(s)})=>{const s=ee.useMemo(()=>e.map(i=>typeof i.value=="number"?i.value:parseFloat(String(i.value))||0),[e]),a=ee.useMemo(()=>Math.max(...s,1),[s]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),A.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((i,o)=>(typeof o.value=="number"?o.value:0)-(typeof i.value=="number"?i.value:0)).map((i,o)=>{const l=typeof i.value=="number"?i.value:parseFloat(String(i.value))||0;return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:i.label}),A.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(i.value)})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:A.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${l/a*100}%`}})})]},i.label+o)}):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},v$=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(V2);ee.useEffect(()=>{const h=()=>{try{const p=localStorage.getItem("reemplazosDocentes");p&&e(JSON.parse(p));const g=localStorage.getItem(p$);g&&r(JSON.parse(g));const b=localStorage.getItem(g$);b&&a(JSON.parse(b));const w=localStorage.getItem(x$);o(w?JSON.parse(w):V2)}catch(p){console.error("Error al leer datos de localStorage para el dashboard",p)}};return h(),window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[]);const l=ee.useMemo(()=>{const h=t.length;if(h===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const p=t.filter(k=>k.resultado==="Hora realizada").length,g=h-p,b=`${(p/h*100).toFixed(1)}%`,w=(k,R)=>k.reduce((D,P)=>{const _=P[R];return typeof _=="string"&&(D[_]=(D[_]||0)+1),D},{}),C=w(t,"docenteAusente"),T=w(t,"docenteReemplazante"),I=w(t,"curso");return{totalInasistencias:h,horasRealizadas:p,horasCubiertas:g,tasaCobertura:b,inasistenciasPorDocente:Object.entries(C).map(([k,R])=>({label:k,value:R})),reemplazosPorDocente:Object.entries(T).map(([k,R])=>({label:k,value:R})),inasistenciasPorCurso:Object.entries(I).map(([k,R])=>({label:k,value:R})),distribucionResultados:[{label:"Hora Realizada",value:p},{label:"Hora Cubierta",value:g}]}},[t]),u=ee.useMemo(()=>{const h=n.length;if(h===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const p=new Map;i.forEach(R=>{R.criteria.forEach(D=>{p.set(D.name,R.domain)})});let g=0,b=0;const w={},C={};n.forEach(R=>{w[R.docente]||(w[R.docente]={total:0,count:0}),Object.entries(R.rubricaResultados).forEach(([D,P])=>{g+=P,b++,w[R.docente].total+=P,w[R.docente].count++;const _=p.get(D);_&&(C[_]||(C[_]={total:0,count:0}),C[_].total+=P,C[_].count++)})});const T=b>0?(g/b).toFixed(2):"N/A",I=Object.entries(w).map(([R,D])=>({label:R,value:D.count>0?(D.total/D.count).toFixed(2):0})),k=Object.entries(C).map(([R,D])=>({label:R,value:D.count>0?(D.total/D.count).toFixed(2):0}));return{totalAcompanamientos:h,promedioGeneral:T,desempenoPorDocente:I,desempenoPorDominio:k}},[n,i]),d=ee.useMemo(()=>{const h={[zn.EVALUACION]:0,[zn.ACTO]:0,[zn.ACTIVIDAD_FOCALIZADA]:0,[zn.SALIDA_PEDAGOGICA]:0};for(const g of s)h.hasOwnProperty(g.type)&&h[g.type]++;const p=Object.entries(h).map(([g,b])=>({label:D0[g].label,value:b}));return{totalEvaluaciones:h[zn.EVALUACION],totalActos:h[zn.ACTO],totalActividadesFocalizadas:h[zn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:h[zn.SALIDA_PEDAGOGICA],distribucionEventos:p}},[s]);return l.totalInasistencias===0&&u.totalAcompanamientos===0&&s.length===0?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("span",{className:"text-6xl mb-4",children:"📊"}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes (Inasistencias, Acompañamiento, etc)."})]}):A.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.totalInasistencias>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Dashboard de Inasistencias"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(au,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales"}),A.jsx(au,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura"}),A.jsx(au,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura"}),A.jsx(au,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx(jf,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400"}),A.jsx(jf,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400"}),A.jsx(jf,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400"}),A.jsx(jf,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400"})]})]}),u.totalAcompanamientos>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Dashboard de Acompañamiento Docente"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(au,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados"}),A.jsx(au,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx(jf,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:h=>Number(h).toFixed(2)}),A.jsx(jf,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:h=>Number(h).toFixed(2)})]})]}),s.length>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen del Calendario Académico"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(au,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados"}),A.jsx(au,{title:"Actos",value:d.totalActos,description:"Eventos registrados"}),A.jsx(au,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados"}),A.jsx(au,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados"})]}),A.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:A.jsx(jf,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400"})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let y$,w$;function b$(){return{geminiUrl:y$,vertexUrl:w$}}function C$(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const i=b$();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(a=i.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bh{}function rn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function v(t,e,n){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(a+1),n[u])}else for(const u of l)v(u,e.slice(a+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(a+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>x(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Y3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Y3||(Y3={}));var J3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(J3||(J3={}));var Bt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Bt||(Bt={}));var X3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(X3||(X3={}));var Z3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Z3||(Z3={}));var ek;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ek||(ek={}));var tk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tk||(tk={}));var nk;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(nk||(nk={}));var rk;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rk||(rk={}));var sk;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sk||(sk={}));var ak;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ak||(ak={}));var ik;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ik||(ik={}));var ok;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ok||(ok={}));var lk;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lk||(lk={}));var ck;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(ck||(ck={}));var uk;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uk||(uk={}));var G2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(G2||(G2={}));var Ak;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ak||(Ak={}));var m_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(m_||(m_={}));var dk;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dk||(dk={}));var fk;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(fk||(fk={}));var hk;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hk||(hk={}));var mk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mk||(mk={}));var pk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(pk||(pk={}));var gk;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gk||(gk={}));var xk;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xk||(xk={}));var vk;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(vk||(vk={}));var yk;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yk||(yk={}));var wk;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wk||(wk={}));var bk;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(bk||(bk={}));var Ck;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ck||(Ck={}));var Ek;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ek||(Ek={}));var _k;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_k||(_k={}));var Sk;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Sk||(Sk={}));var Tk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Tk||(Tk={}));var Bk;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bk||(Bk={}));var Nk;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nk||(Nk={}));var kk;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(kk||(kk={}));var Ik;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ik||(Ik={}));var Fk;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Fk||(Fk={}));var Rk;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rk||(Rk={}));var Q0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Q0||(Q0={}));class p_{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dp{get text(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const p of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(p))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,u+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Dk{}class Uk{}class E${}class _${}class Lk{}class Mk{}class Pk{}class S${}class jk{}class Ok{}class Qk{}class Hk{}class T${}class B${}class N${}class Vk{}class k${get text(){var e,n,r;let s="",a=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class z2{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new z2;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const s=e.response;if(s){const a=new jk,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?h_(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,r.response=a}}else{const s=e.response;if(s){const a=new jk,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?h_(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=a}}return r}}class I${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function l8(t,e){const n=jr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function c8(t){return Array.isArray(t)?t.map(e=>q2(e)):[q2(t)]}function q2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function u8(t){const e=q2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function A8(t){const e=q2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gk(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function d8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gk(e)):[Gk(t)]}function g_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Di(t){if(t==null)throw new Error("ContentUnion is required");return g_(t)?t:{role:"user",parts:d8(t)}}function f8(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Di(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Di(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Di(n)):[Di(e)]}function Ul(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zk(t)||qk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Di(t)]}const e=[],n=[],r=g_(t[0]);for(const s of t){const a=g_(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(zk(s)||qk(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:d8(n)}),e}function F$(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Bt).includes(n[0].toUpperCase())?n[0].toUpperCase():Bt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Bt).includes(r.toUpperCase())?r.toUpperCase():Bt.TYPE_UNSPECIFIED})}}function J0(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&F$(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(Bt).includes(o.toUpperCase())?o.toUpperCase():Bt.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=J0(o);else if(r.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(J0(u))}e[i]=l}else if(s.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=J0(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function R5(t){return J0(t)}function D5(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function U5(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Pm(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=J0(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=J0(e.response));return t}function jm(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function R$(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function IA(t,e){if(typeof e!="string")throw new Error("name must be a string");return R$(t,e,"cachedContents")}function h8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Nh(t){return h_(t)}function D$(t){return t!=null&&typeof t=="object"&&"name"in t}function U$(t){return t!=null&&typeof t=="object"&&"video"in t}function L$(t){return t!=null&&typeof t=="object"&&"uri"in t}function m8(t){var e;let n;if(D$(t)&&(n=t.name),!(L$(t)&&(n=t.uri,n===void 0))&&!(U$(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function p8(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function g8(t){for(const e of["models","tunedModels","publisherModels"])if(M$(t,e))return t[e];return[]}function M$(t,e){return t!==null&&typeof t=="object"&&e in t}function P$(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function j$(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const i=P$(s,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function x8(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function O$(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Om(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function v8(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q$(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function H$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function V$(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function G$(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Q$(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],H$(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],V$(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function y8(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>G$(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function z$(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const C=x(t,["minimum"]);C!=null&&v(e,["minimum"],C);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const R=x(t,["propertyOrdering"]);R!=null&&v(e,["propertyOrdering"],R);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function q$(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function K$(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function W$(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function $$(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],W$(n)),e}function Y$(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function J$(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],Y$(n)),e}function X$(){return{}}function Z$(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>K$(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],$$(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],J$(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],X$());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function eY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function tY(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function nY(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],tY(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function rY(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],eY(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],nY(r)),e}function sY(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function w8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],sY(n)),e}function aY(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],w8(r)),e}function iY(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>aY(s))),v(e,["speakerVoiceConfigs"],r)}return e}function oY(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],w8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],iY(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function lY(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function cY(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],y8(Di(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const C=x(e,["responseMimeType"]);C!=null&&v(r,["responseMimeType"],C);const T=x(e,["responseSchema"]);T!=null&&v(r,["responseSchema"],z$(R5(T)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(L=>q$(L))),v(n,["safetySettings"],M)}const R=x(e,["tools"]);if(n!==void 0&&R!=null){let M=jm(R);Array.isArray(M)&&(M=M.map(L=>Z$(Pm(L)))),v(n,["tools"],M)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&v(n,["toolConfig"],rY(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&v(n,["cachedContent"],IA(t,P));const _=x(e,["responseModalities"]);_!=null&&v(r,["responseModalities"],_);const N=x(e,["mediaResolution"]);N!=null&&v(r,["mediaResolution"],N);const B=x(e,["speechConfig"]);if(B!=null&&v(r,["speechConfig"],oY(D5(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(r,["thinkingConfig"],lY(O)),r}function uY(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["request","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>y8(o))),v(n,["request","contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["request","generationConfig"],cY(t,a,n)),n}function AY(t,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(e,["fileName"]);r!=null&&v(n,["fileName"],r);const s=x(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>uY(t,i))),v(n,["requests","requests"],a)}return n}function dY(t,e){const n={},r=x(t,["displayName"]);if(e!==void 0&&r!=null&&v(e,["batch","displayName"],r),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fY(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["src"]);s!=null&&v(n,["batch","inputConfig"],AY(t,x8(t,s)));const a=x(e,["config"]);return a!=null&&v(n,["config"],dY(a,n)),n}function hY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function mY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function pY(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);if(e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function gY(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],pY(n,e)),e}function xY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function vY(t){const e={},n=x(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsSource","uris"],r);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigquerySource","inputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yY(t){const e={},n=x(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsDestination","outputUriPrefix"],r);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigqueryDestination","outputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function wY(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["dest"]);return e!==void 0&&s!=null&&v(e,["outputConfig"],yY(O$(s))),n}function bY(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],jr(t,r));const s=x(e,["src"]);s!=null&&v(n,["inputConfig"],vY(x8(t,s)));const a=x(e,["config"]);return a!=null&&v(n,["config"],wY(a,n)),n}function CY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function EY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function _Y(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function SY(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],_Y(n,e)),e}function TY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Om(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function BY(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function NY(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function kY(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function IY(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],BY(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],NY(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],kY(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function FY(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>IY(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function RY(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function DY(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function UY(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>DY(s))),v(e,["urlMetadata"],r)}return e}function LY(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],FY(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],RY(r));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],UY(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function MY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>LY(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function b8(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function PY(t){const e={},n=x(t,["response"]);n!=null&&v(e,["response"],MY(n));const r=x(t,["error"]);return r!=null&&v(e,["error"],b8(r)),e}function jY(t){const e={},n=x(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const r=x(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>PY(a))),v(e,["inlinedResponses"],s)}return e}function x_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata","displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["metadata","state"]);s!=null&&v(e,["state"],v8(s));const a=x(t,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],jY(u)),e}function OY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>x_(i))),v(e,["batchJobs"],a)}return e}function QY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const s=x(t,["error"]);return s!=null&&v(e,["error"],b8(s)),e}function C8(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function HY(t){const e={},n=x(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsSource","uris"]);r!=null&&v(e,["gcsUri"],r);const s=x(t,["bigquerySource","inputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function VY(t){const e={},n=x(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsDestination","outputUriPrefix"]);r!=null&&v(e,["gcsUri"],r);const s=x(t,["bigqueryDestination","outputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function v_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],v8(s));const a=x(t,["error"]);a!=null&&v(e,["error"],C8(a));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],HY(h));const p=x(t,["outputConfig"]);return p!=null&&v(e,["dest"],VY(p)),e}function GY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>v_(i))),v(e,["batchJobs"],a)}return e}function zY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const s=x(t,["error"]);return s!=null&&v(e,["error"],C8(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(hh||(hh={}));class Fx{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qY extends Bh{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Fx(hh.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=bY(this.apiClient,e);return o=rn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>v_(d))}else{const u=fY(this.apiClient,e);return o=rn("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>x_(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=CY(this.apiClient,e);return o=rn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>v_(d))}else{const u=hY(this.apiClient,e);return o=rn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>x_(d))}}async cancel(e){var n,r,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=EY(this.apiClient,e);i=rn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=mY(this.apiClient,e);i=rn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=SY(e);return o=rn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=GY(d),p=new Vk;return Object.assign(p,h),p})}else{const u=gY(e);return o=rn("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=OY(d),p=new Vk;return Object.assign(p,h),p})}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=TY(this.apiClient,e);return o=rn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>zY(d))}else{const u=xY(this.apiClient,e);return o=rn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>QY(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KY(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function WY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function $Y(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function YY(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],KY(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],WY(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],$Y(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Kk(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>YY(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function JY(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function XY(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function ZY(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],XY(n)),e}function eJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function tJ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],eJ(n)),e}function nJ(){return{}}function rJ(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>JY(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],ZY(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],tJ(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],nJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function sJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function aJ(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function iJ(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],aJ(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function oJ(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],sJ(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],iJ(r)),e}function lJ(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Ul(i);Array.isArray(d)&&(d=d.map(h=>Kk(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],Kk(Di(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>rJ(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],oJ(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],l8(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],lJ(s,n)),n}function uJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function AJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function dJ(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function fJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],dJ(s,n)),n}function hJ(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function mJ(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],hJ(n,e)),e}function pJ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function gJ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function xJ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function vJ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],pJ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],gJ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],xJ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Wk(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>vJ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function yJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function wJ(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function bJ(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],wJ(n)),e}function CJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function EJ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],CJ(n)),e}function _J(){return{}}function SJ(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function TJ(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],SJ(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function BJ(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],TJ(n)),e}function NJ(){return{}}function kJ(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>yJ(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],bJ(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],EJ(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],_J());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],BJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],NJ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function IJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function FJ(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function RJ(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],FJ(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function DJ(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],IJ(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],RJ(r)),e}function UJ(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Ul(i);Array.isArray(h)&&(h=h.map(p=>Wk(p))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],Wk(Di(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>kJ(p))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],DJ(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),n}function LJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],l8(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],UJ(s,n)),n}function MJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function PJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function jJ(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function OJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],IA(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],jJ(s,n)),n}function QJ(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function HJ(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],QJ(n,e)),e}function o2(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function VJ(){return{}}function GJ(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>o2(i))),v(e,["cachedContents"],a)}return e}function l2(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function zJ(){return{}}function qJ(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>l2(i))),v(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KJ extends Bh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fx(hh.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=LJ(this.apiClient,e);return o=rn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>l2(d))}else{const u=cJ(this.apiClient,e);return o=rn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>o2(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=MJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>l2(d))}else{const u=uJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>o2(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=PJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=zJ(),h=new Qk;return Object.assign(h,d),h})}else{const u=AJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=VJ(),h=new Qk;return Object.assign(h,d),h})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=OJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>l2(d))}else{const u=fJ(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>o2(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=HJ(e);return o=rn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=qJ(d),p=new Hk;return Object.assign(p,h),p})}else{const u=mJ(e);return o=rn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=GJ(d),p=new Hk;return Object.assign(p,h),p})}}}function $k(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(t){return this instanceof rs?(this.v=t,this):new rs(t)}function X0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){r[g]&&(s[g]=function(w){return new Promise(function(C,T){a.push([g,w,C,T])>1||l(g,w)})},b&&(s[g]=b(s[g])))}function l(g,b){try{u(r[g](b))}catch(w){p(a[0][3],w)}}function u(g){g.value instanceof rs?Promise.resolve(g.value.v).then(d,h):p(a[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function p(g,b){g(b),a.shift(),a.length&&l(a[0][0],a[0][1])}}function yg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $k=="function"?$k(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WJ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:E8(n)}function E8(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function $J(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yk(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!E8(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class YJ{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new JJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class JJ{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),$J(a)}async sendMessage(e){var n;await this.sendPromise;const r=Di(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,u=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(r,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=Di(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?Yk(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return X0(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,p=yg(e),g;g=yield rs(p.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(WJ(b)){const w=(s=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;w!==void 0&&d.push(w)}yield yield rs(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=p.return)&&(yield rs(l.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Yk(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XJ(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function ZJ(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],XJ(n,e)),e}function eX(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function tX(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],eX(w)),e}function nX(t){const e={},n=x(t,["file"]);n!=null&&v(e,["file"],tX(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function rX(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],m8(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function sX(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],m8(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function aX(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function y_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const p=x(t,["state"]);p!=null&&v(e,["state"],p);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],aX(w)),e}function iX(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>y_(i))),v(e,["files"],a)}return e}function oX(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function lX(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cX extends Bh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fx(hh.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>y_(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ZJ(e);return a=rn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=iX(l),d=new T$;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=nX(e);return a=rn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=oX(l),d=new B$;return Object.assign(d,u),d})}}async get(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=rX(e);return a=rn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>y_(l))}}async delete(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=sX(e);return a=rn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=lX(),u=new N$;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uX(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function _8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],uX(n)),e}function AX(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],_8(r)),e}function dX(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>AX(s))),v(e,["speakerVoiceConfigs"],r)}return e}function fX(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],_8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],dX(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function hX(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function mX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function pX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function gX(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],hX(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],mX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],pX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function xX(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>gX(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function vX(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yX(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function wX(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],yX(n)),e}function bX(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function CX(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],bX(n)),e}function EX(){return{}}function _X(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>vX(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],wX(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],CX(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],EX());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function SX(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Jk(){return{}}function TX(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function BX(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],TX(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function NX(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function kX(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],NX(r)),e}function IX(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function FX(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],fX(U5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],xX(Di(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let D=jm(b);Array.isArray(D)&&(D=D.map(P=>_X(Pm(P)))),v(e,["setup","tools"],D)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],SX(w));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&v(e,["setup","inputAudioTranscription"],Jk());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],Jk());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],BX(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],kX(k));const R=x(t,["proactivity"]);return e!==void 0&&R!=null&&v(e,["setup","proactivity"],IX(R)),n}function RX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],FX(s,n)),n}function DX(){return{}}function UX(){return{}}function LX(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],c8(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],A8(r));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],u8(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],DX()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],UX()),e}function S8(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function MX(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>S8(s))),v(e,["weightedPrompts"],r)}return e}function T8(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function PX(t){const e={},n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],T8(n)),e}function B8(t){const e={},n=x(t,["model"]);return n!=null&&v(e,["model"],n),e}function N8(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>S8(s))),v(e,["weightedPrompts"],r)}return e}function w_(t){const e={},n=x(t,["setup"]);n!=null&&v(e,["setup"],B8(n));const r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],N8(r));const s=x(t,["musicGenerationConfig"]);s!=null&&v(e,["musicGenerationConfig"],T8(s));const a=x(t,["playbackControl"]);return a!=null&&v(e,["playbackControl"],a),e}function jX(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function OX(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],jX(n)),e}function QX(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],OX(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function HX(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function VX(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function GX(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function zX(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],HX(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],VX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],GX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function qX(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>zX(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function KX(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function WX(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function $X(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],WX(n)),e}function YX(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function JX(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],YX(n)),e}function XX(){return{}}function ZX(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function eZ(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],ZX(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function tZ(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],eZ(n)),e}function nZ(){return{}}function rZ(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>KX(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],$X(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],JX(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],XX());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],tZ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],nZ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function sZ(t){const e={},n=x(t,["handle"]);n!=null&&v(e,["handle"],n);const r=x(t,["transparent"]);return r!=null&&v(e,["transparent"],r),e}function Xk(){return{}}function aZ(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function iZ(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],aZ(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function oZ(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function lZ(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],oZ(r)),e}function cZ(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function uZ(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],QX(U5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],qX(Di(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let D=jm(b);Array.isArray(D)&&(D=D.map(P=>rZ(Pm(P)))),v(e,["setup","tools"],D)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],sZ(w));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&v(e,["setup","inputAudioTranscription"],Xk());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],Xk());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],iZ(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],lZ(k));const R=x(t,["proactivity"]);return e!==void 0&&R!=null&&v(e,["setup","proactivity"],cZ(R)),n}function AZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],uZ(s,n)),n}function dZ(){return{}}function fZ(){return{}}function hZ(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],c8(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],A8(r));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],u8(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],dZ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],fZ()),e}function mZ(){return{}}function pZ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function gZ(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function xZ(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function vZ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],pZ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],gZ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],xZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function yZ(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>vZ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Zk(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function wZ(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function bZ(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wZ(s))),v(e,["urlMetadata"],r)}return e}function CZ(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],yZ(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],Zk(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],Zk(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],bZ(u)),e}function EZ(t){const e={},n=x(t,["id"]);n!=null&&v(e,["id"],n);const r=x(t,["args"]);r!=null&&v(e,["args"],r);const s=x(t,["name"]);return s!=null&&v(e,["name"],s),e}function _Z(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>EZ(s))),v(e,["functionCalls"],r)}return e}function SZ(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function ev(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function TZ(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const s=x(t,["responseTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>ev(g))),v(e,["promptTokensDetails"],p)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>ev(g))),v(e,["cacheTokensDetails"],p)}const d=x(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>ev(g))),v(e,["responseTokensDetails"],p)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>ev(g))),v(e,["toolUsePromptTokensDetails"],p)}return e}function BZ(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function NZ(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function kZ(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],mZ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],CZ(r));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],_Z(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],SZ(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],TZ(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],BZ(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],NZ(l)),e}function IZ(){return{}}function FZ(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function RZ(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>FZ(s))),v(e,["weightedPrompts"],r)}return e}function DZ(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const p=x(t,["onlyBassAndDrums"]);return p!=null&&v(e,["onlyBassAndDrums"],p),e}function UZ(t){const e={},n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],RZ(n));const r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],DZ(r)),e}function LZ(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);r!=null&&v(e,["mimeType"],r);const s=x(t,["sourceMetadata"]);return s!=null&&v(e,["sourceMetadata"],UZ(s)),e}function MZ(t){const e={},n=x(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>LZ(s))),v(e,["audioChunks"],r)}return e}function PZ(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["filteredReason"]);return r!=null&&v(e,["filteredReason"],r),e}function jZ(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],IZ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],MZ(r));const s=x(t,["filteredPrompt"]);return s!=null&&v(e,["filteredPrompt"],PZ(s)),e}function OZ(t){const e={},n=x(t,["sessionId"]);return n!=null&&v(e,["sessionId"],n),e}function QZ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function HZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function VZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function GZ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],QZ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],HZ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],VZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function zZ(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>GZ(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function eI(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function qZ(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],zZ(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],eI(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],eI(l)),e}function KZ(t){const e={},n=x(t,["args"]);n!=null&&v(e,["args"],n);const r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}function WZ(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>KZ(s))),v(e,["functionCalls"],r)}return e}function $Z(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function tv(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function YZ(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const s=x(t,["candidatesTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>tv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>tv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>tv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>tv(b))),v(e,["toolUsePromptTokensDetails"],g)}const p=x(t,["trafficType"]);return p!=null&&v(e,["trafficType"],p),e}function JZ(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function XZ(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function ZZ(t){const e={},n=x(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],OZ(n));const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],qZ(r));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],WZ(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],$Z(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],YZ(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],JZ(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],XZ(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function tee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function nee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ree(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],eee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],tee(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],nee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function aw(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ree(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function see(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const C=x(t,["minimum"]);C!=null&&v(e,["minimum"],C);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const R=x(t,["propertyOrdering"]);R!=null&&v(e,["propertyOrdering"],R);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function aee(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function iee(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function oee(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function lee(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],oee(n)),e}function cee(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function uee(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],cee(n)),e}function Aee(){return{}}function dee(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>iee(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],lee(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],uee(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Aee());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function fee(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function hee(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function mee(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],hee(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function pee(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],fee(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],mee(r)),e}function gee(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function k8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],gee(n)),e}function xee(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],k8(r)),e}function vee(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>xee(s))),v(e,["speakerVoiceConfigs"],r)}return e}function yee(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],k8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],vee(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function wee(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function bee(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],aw(Di(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const C=x(e,["responseMimeType"]);C!=null&&v(r,["responseMimeType"],C);const T=x(e,["responseSchema"]);T!=null&&v(r,["responseSchema"],see(R5(T)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(L=>aee(L))),v(n,["safetySettings"],M)}const R=x(e,["tools"]);if(n!==void 0&&R!=null){let M=jm(R);Array.isArray(M)&&(M=M.map(L=>dee(Pm(L)))),v(n,["tools"],M)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&v(n,["toolConfig"],pee(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&v(n,["cachedContent"],IA(t,P));const _=x(e,["responseModalities"]);_!=null&&v(r,["responseModalities"],_);const N=x(e,["mediaResolution"]);N!=null&&v(r,["mediaResolution"],N);const B=x(e,["speechConfig"]);if(B!=null&&v(r,["speechConfig"],yee(D5(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(r,["thinkingConfig"],wee(O)),r}function tI(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>aw(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["generationConfig"],bee(t,a,n)),n}function Cee(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["requests[]","taskType"],r);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Eee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);s!=null&&v(n,["requests[]","content"],f8(t,s));const a=x(e,["config"]);a!=null&&v(n,["config"],Cee(a,n));const i=x(e,["model"]);return i!==void 0&&v(n,["requests[]","model"],jr(t,i)),n}function _ee(t,e){const n={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(t,["numberOfImages"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const a=x(t,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const p=x(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&v(e,["parameters","outputOptions","compressionQuality"],p),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function See(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(n,["config"],_ee(a,n)),n}function Tee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function Bee(t,e,n){const r={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],p8(t,o)),r}function Nee(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],Bee(t,r,n)),n}function kee(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function Iee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],kee(s,n)),n}function Fee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function Ree(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Dee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>aw(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],Ree(a)),n}function Uee(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Nh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Lee(t,e){const n={},r=x(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(t,["durationSeconds"]);if(e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(t,["aspectRatio"]);if(e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Mee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["image"]);if(a!=null&&v(n,["instances[0]","image"],Uee(a)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(n,["config"],Lee(i,n)),n}function Pee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function jee(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Oee(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Qee(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Pee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],jee(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Oee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Qm(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Qee(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Hee(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const p=x(t,["maximum"]);p!=null&&v(e,["maximum"],p);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const C=x(t,["minimum"]);C!=null&&v(e,["minimum"],C);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const R=x(t,["propertyOrdering"]);R!=null&&v(e,["propertyOrdering"],R);const D=x(t,["required"]);D!=null&&v(e,["required"],D);const P=x(t,["title"]);P!=null&&v(e,["title"],P);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function Vee(t){const e={},n=x(t,["featureSelectionPreference"]);return n!=null&&v(e,["featureSelectionPreference"],n),e}function Gee(t){const e={},n=x(t,["method"]);n!=null&&v(e,["method"],n);const r=x(t,["category"]);r!=null&&v(e,["category"],r);const s=x(t,["threshold"]);return s!=null&&v(e,["threshold"],s),e}function zee(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function qee(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function Kee(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],qee(n)),e}function Wee(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function $ee(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],Wee(n)),e}function Yee(){return{}}function Jee(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function Xee(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],Jee(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Zee(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],Xee(n)),e}function ete(){return{}}function I8(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>zee(p))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],Kee(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],$ee(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],Yee());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Zee(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],ete());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function tte(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function nte(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function rte(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],nte(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function ste(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],tte(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],rte(r)),e}function ate(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function ite(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],ate(n)),e}function ote(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],ite(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function lte(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function cte(t,e,n){const r={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],Qm(Di(s)));const a=x(e,["temperature"]);a!=null&&v(r,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&v(r,["logprobs"],p);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const C=x(e,["responseMimeType"]);C!=null&&v(r,["responseMimeType"],C);const T=x(e,["responseSchema"]);T!=null&&v(r,["responseSchema"],Hee(R5(T)));const I=x(e,["responseJsonSchema"]);I!=null&&v(r,["responseJsonSchema"],I);const k=x(e,["routingConfig"]);k!=null&&v(r,["routingConfig"],k);const R=x(e,["modelSelectionConfig"]);R!=null&&v(r,["modelConfig"],Vee(R));const D=x(e,["safetySettings"]);if(n!==void 0&&D!=null){let oe=D;Array.isArray(oe)&&(oe=oe.map(q=>Gee(q))),v(n,["safetySettings"],oe)}const P=x(e,["tools"]);if(n!==void 0&&P!=null){let oe=jm(P);Array.isArray(oe)&&(oe=oe.map(q=>I8(Pm(q)))),v(n,["tools"],oe)}const _=x(e,["toolConfig"]);n!==void 0&&_!=null&&v(n,["toolConfig"],ste(_));const N=x(e,["labels"]);n!==void 0&&N!=null&&v(n,["labels"],N);const B=x(e,["cachedContent"]);n!==void 0&&B!=null&&v(n,["cachedContent"],IA(t,B));const O=x(e,["responseModalities"]);O!=null&&v(r,["responseModalities"],O);const M=x(e,["mediaResolution"]);M!=null&&v(r,["mediaResolution"],M);const L=x(e,["speechConfig"]);L!=null&&v(r,["speechConfig"],ote(D5(L)));const H=x(e,["audioTimestamp"]);H!=null&&v(r,["audioTimestamp"],H);const G=x(e,["thinkingConfig"]);return G!=null&&v(r,["thinkingConfig"],lte(G)),r}function nI(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>Qm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["generationConfig"],cte(t,a,n)),n}function ute(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["instances[]","task_type"],r);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["instances[]","title"],s);const a=x(t,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),n}function Ate(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);s!=null&&v(n,["instances[]","content"],f8(t,s));const a=x(e,["config"]);return a!=null&&v(n,["config"],ute(a,n)),n}function dte(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const C=x(t,["addWatermark"]);e!==void 0&&C!=null&&v(e,["parameters","addWatermark"],C);const T=x(t,["imageSize"]);e!==void 0&&T!=null&&v(e,["parameters","sampleImageSize"],T);const I=x(t,["enhancePrompt"]);return e!==void 0&&I!=null&&v(e,["parameters","enhancePrompt"],I),n}function fte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(n,["config"],dte(a,n)),n}function iw(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Nh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function hte(t){const e={},n=x(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const r=x(t,["segmentationClasses"]);r!=null&&v(e,["maskClasses"],r);const s=x(t,["maskDilation"]);return s!=null&&v(e,["dilation"],s),e}function mte(t){const e={},n=x(t,["controlType"]);n!=null&&v(e,["controlType"],n);const r=x(t,["enableControlImageComputation"]);return r!=null&&v(e,["computeControl"],r),e}function pte(t){const e={},n=x(t,["styleDescription"]);return n!=null&&v(e,["styleDescription"],n),e}function gte(t){const e={},n=x(t,["subjectType"]);n!=null&&v(e,["subjectType"],n);const r=x(t,["subjectDescription"]);return r!=null&&v(e,["subjectDescription"],r),e}function xte(t){const e={},n=x(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],iw(n));const r=x(t,["referenceId"]);r!=null&&v(e,["referenceId"],r);const s=x(t,["referenceType"]);s!=null&&v(e,["referenceType"],s);const a=x(t,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],hte(a));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],mte(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],pte(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],gte(l)),e}function vte(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const p=x(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const C=x(t,["addWatermark"]);e!==void 0&&C!=null&&v(e,["parameters","addWatermark"],C);const T=x(t,["editMode"]);e!==void 0&&T!=null&&v(e,["parameters","editMode"],T);const I=x(t,["baseSteps"]);return e!==void 0&&I!=null&&v(e,["parameters","editConfig","baseSteps"],I),n}function yte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>xte(l))),v(n,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(n,["config"],vte(i,n)),n}function wte(t,e){const n={},r=x(t,["includeRaiReason"]);e!==void 0&&r!=null&&v(e,["parameters","includeRaiReason"],r);const s=x(t,["outputMimeType"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","mimeType"],s);const a=x(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","compressionQuality"],a);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),n}function bte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["image"]);s!=null&&v(n,["instances[0]","image"],iw(s));const a=x(e,["upscaleFactor"]);a!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],a);const i=x(e,["config"]);return i!=null&&v(n,["config"],wte(i,n)),n}function Cte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function Ete(t,e,n){const r={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],p8(t,o)),r}function _te(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],Ete(t,r,n)),n}function Ste(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function Tte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],Ste(s,n)),n}function Bte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function Nte(t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&v(e,["systemInstruction"],Qm(Di(r)));const s=x(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>I8(o))),v(e,["tools"],i)}const a=x(t,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],a),n}function kte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>Qm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],Nte(a,n)),n}function Ite(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["contents"]);if(s!=null){let i=Ul(s);Array.isArray(i)&&(i=i.map(o=>Qm(o))),v(n,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function Fte(t){const e={},n=x(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["videoBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Nh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Rte(t,e){const n={},r=x(t,["numberOfVideos"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const s=x(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);const a=x(t,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const p=x(t,["negativePrompt"]);e!==void 0&&p!=null&&v(e,["parameters","negativePrompt"],p);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const w=x(t,["lastFrame"]);e!==void 0&&w!=null&&v(e,["instances[0]","lastFrame"],iw(w));const C=x(t,["compressionQuality"]);return e!==void 0&&C!=null&&v(e,["parameters","compressionQuality"],C),n}function Dte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],jr(t,r));const s=x(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&v(n,["instances[0]","image"],iw(a));const i=x(e,["video"]);i!=null&&v(n,["instances[0]","video"],Fte(i));const o=x(e,["config"]);return o!=null&&v(n,["config"],Rte(o,n)),n}function Ute(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Lte(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Mte(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Pte(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Ute(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Lte(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Mte(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function jte(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Pte(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Ote(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function Qte(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function Hte(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Qte(s))),v(e,["urlMetadata"],r)}return e}function Vte(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],jte(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],Ote(r));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Hte(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function rI(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Vte(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function Gte(t){const e={},n=x(t,["values"]);return n!=null&&v(e,["values"],n),e}function zte(){return{}}function qte(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Gte(i))),v(e,["embeddings"],a)}return x(t,["metadata"])!=null&&v(e,["metadata"],zte()),e}function Kte(t){const e={},n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Nh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function F8(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function Wte(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],Kte(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const s=x(t,["_self"]);return s!=null&&v(e,["safetyAttributes"],F8(s)),e}function $te(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Wte(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],F8(s)),e}function Yte(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function b_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["version"]);a!=null&&v(e,["version"],a);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],Yte(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function Jte(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["_self"]);if(s!=null){let a=g8(s);Array.isArray(a)&&(a=a.map(i=>b_(i))),v(e,["models"],a)}return e}function Xte(){return{}}function Zte(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);r!=null&&v(e,["totalTokens"],r);const s=x(t,["cachedContentTokenCount"]);return s!=null&&v(e,["cachedContentTokenCount"],s),e}function ene(t){const e={},n=x(t,["video","uri"]);n!=null&&v(e,["uri"],n);const r=x(t,["video","encodedVideo"]);r!=null&&v(e,["videoBytes"],Nh(r));const s=x(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function tne(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],ene(n)),e}function nne(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>tne(i))),v(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function rne(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],nne(i)),e}function sne(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function ane(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function ine(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function one(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],sne(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],ane(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],ine(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function lne(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>one(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function cne(t){const e={},n=x(t,["citations"]);return n!=null&&v(e,["citations"],n),e}function une(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function Ane(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>une(s))),v(e,["urlMetadata"],r)}return e}function dne(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],lne(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],cne(r));const s=x(t,["finishMessage"]);s!=null&&v(e,["finishMessage"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Ane(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function sI(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>dne(d))),v(e,["candidates"],u)}const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const a=x(t,["responseId"]);a!=null&&v(e,["responseId"],a);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function fne(t){const e={},n=x(t,["truncated"]);n!=null&&v(e,["truncated"],n);const r=x(t,["token_count"]);return r!=null&&v(e,["tokenCount"],r),e}function hne(t){const e={},n=x(t,["values"]);n!=null&&v(e,["values"],n);const r=x(t,["statistics"]);return r!=null&&v(e,["statistics"],fne(r)),e}function mne(t){const e={},n=x(t,["billableCharacterCount"]);return n!=null&&v(e,["billableCharacterCount"],n),e}function pne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>hne(i))),v(e,["embeddings"],a)}const s=x(t,["metadata"]);return s!=null&&v(e,["metadata"],mne(s)),e}function gne(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Nh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function R8(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function L5(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],gne(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const s=x(t,["_self"]);s!=null&&v(e,["safetyAttributes"],R8(s));const a=x(t,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function xne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>L5(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],R8(s)),e}function vne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>L5(a))),v(e,["generatedImages"],s)}return e}function yne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>L5(a))),v(e,["generatedImages"],s)}return e}function wne(t){const e={},n=x(t,["endpoint"]);n!=null&&v(e,["name"],n);const r=x(t,["deployedModelId"]);return r!=null&&v(e,["deployedModelId"],r),e}function bne(t){const e={},n=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function Cne(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const s=x(t,["step"]);return s!=null&&v(e,["step"],s),e}function C_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["versionId"]);a!=null&&v(e,["version"],a);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>wne(p))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],bne(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>Cne(p))),v(e,["checkpoints"],h)}return e}function Ene(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["_self"]);if(s!=null){let a=g8(s);Array.isArray(a)&&(a=a.map(i=>C_(i))),v(e,["models"],a)}return e}function _ne(){return{}}function Sne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);return r!=null&&v(e,["totalTokens"],r),e}function Tne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["tokensInfo"]);return r!=null&&v(e,["tokensInfo"],r),e}function Bne(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["videoBytes"],Nh(r));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Nne(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],Bne(n)),e}function kne(t){const e={},n=x(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Nne(i))),v(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Ine(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response"]);return i!=null&&v(e,["response"],kne(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fne="Content-Type",Rne="X-Server-Timeout",Dne="User-Agent",E_="x-goog-api-client",Une="1.12.0",Lne=`google-genai-sdk/${Une}`,Mne="v1beta1",Pne="v1beta",aI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class jne{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Mne,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Pne,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>s.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&One(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await iI(s),new p_(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await iI(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return X0(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield rs(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),g=p.status,b=p.code,w=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new sw({message:w,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(aI);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield rs(new p_(p)),i=i.slice(d[0].length),d=i.match(aI)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Lne+" "+this.clientOptions.userAgentExtra;return e[Dne]=n,e[E_]=n,e[Fne]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(Rne,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,n);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:rn("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function iI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new sw({message:s,status:n}):new Error(s)}}function One(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qne="mcp_used/unknown";let Hne=!1;function D8(t){for(const e of t)if(Vne(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Hne}function U8(t){var e;const n=(e=t[E_])!==null&&e!==void 0?e:"";t[E_]=(n+` ${Qne}`).trimStart()}function Vne(t){return t!==null&&typeof t=="object"&&t instanceof M5}function Gne(t,e=100){return X0(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield rs(t.listTools({cursor:r}));for(const i of a.tools)yield yield rs(i),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class M5{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new M5(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(n=void 0,yg(Gne(d))),u;u=await l.next(),e=u.done,!e;o=!0){s=u.value,o=!1;const h=s;i.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=d}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),j$(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zne(t,e,n){const r=new I$;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=jZ(s);Object.assign(r,a),e(r)}class qne{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=$ne(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(k=>{u=k}),h=e.callbacks,p=function(){u({})},g=this.apiClient,b={onopen:p,onmessage:k=>{zne(g,h.onmessage,k)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(k){}},w=this.webSocketFactory.create(l,Wne(i),b);w.connect(),await d;const C=jr(this.apiClient,e.model),T=B8({model:C}),I=w_({setup:T});return w.send(JSON.stringify(I)),new Kne(w,this.apiClient)}}class Kne{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=MX(e),r=N8(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=PX(e),r=w_(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=w_({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Q0.PLAY)}pause(){this.sendPlaybackControl(Q0.PAUSE)}stop(){this.sendPlaybackControl(Q0.STOP)}resetContext(){this.sendPlaybackControl(Q0.RESET_CONTEXT)}close(){this.conn.close()}}function Wne(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function $ne(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yne="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Jne(t,e,n){const r=new k$;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=ZZ(a);Object.assign(r,i)}else{const i=kZ(a);Object.assign(r,i)}e(r)}class Xne{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new qne(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&D8(e.config.tools)&&U8(h);const p=nre(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const B=this.apiClient.getApiKey();let O="BidiGenerateContent",M="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",M="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${M}=${B}`}let g=()=>{};const b=new Promise(B=>{g=B}),w=e.callbacks,C=function(){var B;(B=w==null?void 0:w.onopen)===null||B===void 0||B.call(w),g({})},T=this.apiClient,I={onopen:C,onmessage:B=>{Jne(T,w.onmessage,B)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(B){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(B){}},k=this.webSocketFactory.create(d,tre(p),I);k.connect(),await b;let R=jr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const B=this.apiClient.getProject(),O=this.apiClient.getLocation();R=`projects/${B}/locations/${O}/`+R}let D={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[G2.AUDIO]}:e.config.responseModalities=[G2.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],_=[];for(const B of P)if(this.isCallableTool(B)){const O=B;_.push(await O.tool())}else _.push(B);_.length>0&&(e.config.tools=_);const N={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=AZ(this.apiClient,N):D=RX(this.apiClient,N),delete D.config,k.send(JSON.stringify(D)),new ere(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Zne={turnComplete:!0};class ere{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ul(n.turns),e.isVertexAI()?r=r.map(s=>Qm(s)):r=r.map(s=>aw(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Yne)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Zne),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:hZ(e)}:n={realtimeInput:LX(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function tre(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function nre(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oI=10;function lI(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Z0(i)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Z0(t){return"callTool"in t&&typeof t.callTool=="function"}function rre(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Z0(s)))!==null&&r!==void 0?r:!1}function sre(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!Z0(s)))!==null&&r!==void 0?r:!1}function cI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class are extends Bh{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rre(n)||lI(n.config))return await this.generateContentInternal(l);if(sre(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=Ul(l.contents),p=(a=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:oI;let g=0;for(;g<p&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,w=[];for(const C of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Z0(C)){const I=await C.callTool(u.functionCalls);w.push(...I)}g++,d={role:"user",parts:w},l.contents=Ul(l.contents),l.contents.push(b),l.contents.push(d),cI(l.config)&&(h.push(b),h.push(d))}return cI(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),lI(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Fx(hh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>Z0(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&D8(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),U8(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Z0(i)){const o=i,l=await o.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:oI;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var p,g;return X0(this,arguments,function*(){for(var b,w,C,T;o<a;){i&&(o++,i=!1);const D=yield rs(u.processParamsMaybeAddMcpUsage(h)),P=yield rs(u.generateContentStreamInternal(D)),_=[],N=[];try{for(var I=!0,k=(w=void 0,yg(P)),R;R=yield rs(k.next()),b=R.done,!b;I=!0){T=R.value,I=!1;const B=T;if(yield yield rs(B),B.candidates&&(!((p=B.candidates[0])===null||p===void 0)&&p.content)){N.push(B.candidates[0].content);for(const O of(g=B.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<a&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(O.functionCall.name)){const M=yield rs(d.get(O.functionCall.name).callTool([O.functionCall]));_.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(B){w={error:B}}finally{try{!I&&!b&&(C=k.return)&&(yield rs(C.call(k)))}finally{if(w)throw w.error}}if(_.length>0){i=!0;const B=new Dp;B.candidates=[{content:{role:"user",parts:_}}],yield yield rs(B);const O=[];O.push(...N),O.push({role:"user",parts:_});const M=Ul(h.contents).concat(O);h.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=nI(this.apiClient,e);return o=rn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=sI(d),p=new Dp;return Object.assign(p,h),p})}else{const u=tI(this.apiClient,e);return o=rn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=rI(d),p=new Dp;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=nI(this.apiClient,e);return o=rn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return X0(this,arguments,function*(){var p,g,b,w;try{for(var C=!0,T=yg(h),I;I=yield rs(T.next()),p=I.done,!p;C=!0){w=I.value,C=!1;const k=w,R=sI(yield rs(k.json()));R.sdkHttpResponse={headers:k.headers};const D=new Dp;Object.assign(D,R),yield yield rs(D)}}catch(k){g={error:k}}finally{try{!C&&!p&&(b=T.return)&&(yield rs(b.call(T)))}finally{if(g)throw g.error}}})})}else{const u=tI(this.apiClient,e);return o=rn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return X0(this,arguments,function*(){var p,g,b,w;try{for(var C=!0,T=yg(h),I;I=yield rs(T.next()),p=I.done,!p;C=!0){w=I.value,C=!1;const k=w,R=rI(yield rs(k.json()));R.sdkHttpResponse={headers:k.headers};const D=new Dp;Object.assign(D,R),yield yield rs(D)}}catch(k){g={error:k}}finally{try{!C&&!p&&(b=T.return)&&(yield rs(b.call(T)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Ate(this.apiClient,e);return o=rn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=pne(d),p=new Dk;return Object.assign(p,h),p})}else{const u=Eee(this.apiClient,e);return o=rn("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=qte(d),p=new Dk;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=fte(this.apiClient,e);return o=rn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=xne(d),p=new Uk;return Object.assign(p,h),p})}else{const u=See(this.apiClient,e);return o=rn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=$te(d),p=new Uk;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=yte(this.apiClient,e);return a=rn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=vne(l),d=new E$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=bte(this.apiClient,e);return a=rn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=yne(l),d=new _$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Cte(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>C_(d))}else{const u=Tee(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>b_(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=_te(this.apiClient,e);return o=rn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Ene(d),p=new Lk;return Object.assign(p,h),p})}else{const u=Nee(this.apiClient,e);return o=rn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Jte(d),p=new Lk;return Object.assign(p,h),p})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Tte(this.apiClient,e);return o=rn("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>C_(d))}else{const u=Iee(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>b_(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Bte(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=_ne(),h=new Mk;return Object.assign(h,d),h})}else{const u=Fee(this.apiClient,e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Xte(),h=new Mk;return Object.assign(h,d),h})}}async countTokens(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kte(this.apiClient,e);return o=rn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Sne(d),p=new Pk;return Object.assign(p,h),p})}else{const u=Dee(this.apiClient,e);return o=rn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Zte(d),p=new Pk;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Ite(this.apiClient,e);return a=rn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Tne(l),d=new S$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Dte(this.apiClient,e);return o=rn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Ine(d),p=new z2;return Object.assign(p,h),p})}else{const u=Mee(this.apiClient,e);return o=rn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=rne(d),p=new z2;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ire(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function ore(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function lre(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["operationName"],n);const r=x(t,["resourceName"]);r!=null&&v(e,["_url","resourceName"],r);const s=x(t,["config"]);return s!=null&&v(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cre extends Bh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ore(e);return o=rn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else{const u=ire(e);return o=rn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=lre(e);return a=rn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ure(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function L8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],ure(n)),e}function Are(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],L8(r)),e}function dre(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Are(s))),v(e,["speakerVoiceConfigs"],r)}return e}function fre(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],L8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],dre(r));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function hre(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function mre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function pre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function gre(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],hre(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],mre(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],pre(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function xre(t){const e={},n=x(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>gre(a))),v(e,["parts"],s)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function vre(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yre(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function wre(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],yre(n)),e}function bre(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function Cre(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],bre(n)),e}function Ere(){return{}}function _re(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>vre(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],wre(r));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],Cre(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Ere());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function Sre(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uI(){return{}}function Tre(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Bre(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],Tre(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function Nre(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function kre(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],Nre(r)),e}function Ire(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function Fre(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],fre(U5(h)));const p=x(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],xre(Di(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let D=jm(b);Array.isArray(D)&&(D=D.map(P=>_re(Pm(P)))),v(e,["setup","tools"],D)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],Sre(w));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&v(e,["setup","inputAudioTranscription"],uI());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],uI());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],Bre(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],kre(k));const R=x(t,["proactivity"]);return e!==void 0&&R!=null&&v(e,["setup","proactivity"],Ire(R)),n}function Rre(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],jr(t,r));const s=x(e,["config"]);return s!=null&&v(n,["config"],Fre(s,n)),n}function Dre(t,e,n){const r={},s=x(e,["expireTime"]);n!==void 0&&s!=null&&v(n,["expireTime"],s);const a=x(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&v(n,["newSessionExpireTime"],a);const i=x(e,["uses"]);n!==void 0&&i!=null&&v(n,["uses"],i);const o=x(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&v(n,["bidiGenerateContentSetup"],Rre(t,o));const l=x(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&v(n,["fieldMask"],l),r}function Ure(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],Dre(t,r,n)),n}function Lre(t){const e={},n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mre(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function Pre(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=Mre(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class jre extends Bh{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=Ure(this.apiClient,e);a=rn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=Pre(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>Lre(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ore(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function Qre(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function Hre(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],Qre(n,e)),e}function Vre(t){const e={},n=x(t,["textInput"]);n!=null&&v(e,["textInput"],n);const r=x(t,["output"]);return r!=null&&v(e,["output"],r),e}function Gre(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Vre(s))),v(e,["examples","examples"],r)}return e}function zre(t,e){const n={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(t,["epochCount"]);e!==void 0&&s!=null&&v(e,["tuningTask","hyperparameters","epochCount"],s);const a=x(t,["learningRateMultiplier"]);if(a!=null&&v(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),n}function qre(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["tuningTask","trainingData"],Gre(r));const s=x(t,["config"]);return s!=null&&v(e,["config"],zre(s,e)),e}function Kre(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function Wre(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function $re(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],Wre(n,e)),e}function Yre(t,e){const n={},r=x(t,["gcsUri"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=x(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Jre(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&v(n,["validationDatasetUri"],r);const s=x(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function Xre(t,e){const n={},r=x(t,["validationDataset"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec"],Jre(r,n));const s=x(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&v(e,["tunedModelDisplayName"],s);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Zre(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],Yre(r,e));const s=x(t,["config"]);return s!=null&&v(e,["config"],Xre(s,e)),e}function ese(t){const e={},n=x(t,["name"]);n!=null&&v(e,["model"],n);const r=x(t,["name"]);return r!=null&&v(e,["endpoint"],r),e}function M8(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],h8(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],ese(h));const p=x(t,["distillationSpec"]);p!=null&&v(e,["distillationSpec"],p);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const w=x(t,["pipelineJob"]);w!=null&&v(e,["pipelineJob"],w);const C=x(t,["satisfiesPzi"]);C!=null&&v(e,["satisfiesPzi"],C);const T=x(t,["satisfiesPzs"]);T!=null&&v(e,["satisfiesPzs"],T);const I=x(t,["serviceAccount"]);I!=null&&v(e,["serviceAccount"],I);const k=x(t,["tunedModelDisplayName"]);return k!=null&&v(e,["tunedModelDisplayName"],k),e}function tse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>M8(i))),v(e,["tuningJobs"],a)}return e}function nse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["metadata"]);s!=null&&v(e,["metadata"],s);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function rse(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const s=x(t,["step"]);s!=null&&v(e,["step"],s);const a=x(t,["endpoint"]);return a!=null&&v(e,["endpoint"],a),e}function sse(t){const e={},n=x(t,["model"]);n!=null&&v(e,["model"],n);const r=x(t,["endpoint"]);r!=null&&v(e,["endpoint"],r);const s=x(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>rse(i))),v(e,["checkpoints"],a)}return e}function __(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const s=x(t,["state"]);s!=null&&v(e,["state"],h8(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const p=x(t,["tunedModel"]);p!=null&&v(e,["tunedModel"],sse(p));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const w=x(t,["encryptionSpec"]);w!=null&&v(e,["encryptionSpec"],w);const C=x(t,["partnerModelTuningSpec"]);C!=null&&v(e,["partnerModelTuningSpec"],C);const T=x(t,["distillationSpec"]);T!=null&&v(e,["distillationSpec"],T);const I=x(t,["experiment"]);I!=null&&v(e,["experiment"],I);const k=x(t,["labels"]);k!=null&&v(e,["labels"],k);const R=x(t,["pipelineJob"]);R!=null&&v(e,["pipelineJob"],R);const D=x(t,["satisfiesPzi"]);D!=null&&v(e,["satisfiesPzi"],D);const P=x(t,["satisfiesPzs"]);P!=null&&v(e,["satisfiesPzs"],P);const _=x(t,["serviceAccount"]);_!=null&&v(e,["serviceAccount"],_);const N=x(t,["tunedModelDisplayName"]);return N!=null&&v(e,["tunedModelDisplayName"],N),e}function ase(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const s=x(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>__(i))),v(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ise extends Bh{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Fx(hh.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:m_.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Kre(e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>__(d))}else{const u=Ore(e);return o=rn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>M8(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$re(e);return o=rn("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=ase(d),p=new Ok;return Object.assign(p,h),p})}else{const u=Hre(e);return o=rn("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=tse(d),p=new Ok;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Zre(e);return a=rn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>__(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=qre(e);return a=rn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>nse(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ose{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lse=1024*1024*8,cse=3,use=1e3,Ase=2,xC="x-goog-upload-status";async function dse(t,e,n){var r,s,a;let i=0,o=0,l=new p_(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(lse,i-o),p=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=use;for(;g<cse&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[xC]));)g++,await hse(b),b=b*Ase;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[xC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[xC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function fse(t){return{size:t.size,type:t.type}}function hse(t){return new Promise(e=>setTimeout(e,t))}class mse{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dse(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fse(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pse{create(e,n,r){return new gse(e,n,r)}}class gse{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AI="x-goog-api-key";class xse{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(AI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(AI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vse="gl-node/";class Ba{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=C$(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new xse(this.apiKey);this.apiClient=new jne({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vse+"web",uploader:new mse,downloader:new ose}),this.models=new are(this.apiClient),this.live=new Xne(this.apiClient,s,new pse),this.batches=new qY(this.apiClient),this.chats=new YJ(this.models,this.apiClient),this.caches=new KJ(this.apiClient),this.files=new cX(this.apiClient),this.operations=new cre(this.apiClient),this.authTokens=new jre(this.apiClient),this.tunings=new ise(this.apiClient)}}const dI="apiCallLogs",yse="lir-sessionUser",yo=t=>{try{const e=localStorage.getItem(yse);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesión.");return}const n=JSON.parse(e),r=localStorage.getItem(dI),s=r?JSON.parse(r):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:n.id,userEmail:n.email,module:t},...s].slice(0,2e3);localStorage.setItem(dI,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},vC="asignacionesHorario",yC="horariosGenerados",wse="usuariosLiceo",bse=({horarios:t})=>Object.keys(t).length===0?A.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):A.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full border-collapse",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Zs.map(e=>A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),A.jsx("tbody",{children:i2.map(e=>A.jsxs(At.Fragment,{children:[A.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:A.jsx("th",{colSpan:2+Zs.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),f_.map(({bloque:n,inicio:r,fin:s})=>A.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${s}`}),Zs.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[n];return A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?A.jsxs("div",{className:"flex flex-col justify-center h-full",children:[A.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),A.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):A.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),Cse=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState({curso:"",asignatura:"",profesor:""}),[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState(Zs[0]),[d,h]=ee.useState(!1),[p,g]=ee.useState(null),[b,w]=ee.useState(null),[C,T]=ee.useState(null),[I,k]=ee.useState({asignatura:"",profesor:""}),[R,D]=ee.useState("edicion"),[P,_]=ee.useState("");ee.useEffect(()=>{try{const q=localStorage.getItem(vC);q&&e(JSON.parse(q));const X=localStorage.getItem(yC);X&&o(JSON.parse(X));const re=localStorage.getItem(wse);if(re){const Z=JSON.parse(re).filter(Ae=>Ae.profile===en.PROFESORADO).map(Ae=>Ae.nombreCompleto).sort();a(Z)}}catch(q){console.error("Error al cargar datos de localStorage",q),g("No se pudieron cargar los datos guardados.")}},[]);const N=q=>{if(q.preventDefault(),!n.curso||!n.asignatura||!n.profesor){g("Todos los campos de la asignación son obligatorios.");return}const X=[...t,{...n,id:crypto.randomUUID()}];e(X),localStorage.setItem(vC,JSON.stringify(X)),r({curso:"",asignatura:"",profesor:""}),g(null)},B=q=>{const X=t.filter(re=>re.id!==q);e(X),localStorage.setItem(vC,JSON.stringify(X))},O=async()=>{if(t.length===0){g("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),g(null),w(null);try{yo("Crear Horarios");const q=new Ba({apiKey:void 0}),X=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${i2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(f_,null,2)}
                - Cursos del liceo: ${Zs.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(s$,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${P||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional antes o después. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,re=await q.models.generateContent({model:"gemini-2.5-flash",contents:X,config:{responseMimeType:"application/json"}}),K=JSON.parse(re.text);o(K),localStorage.setItem(yC,JSON.stringify(K)),w("¡Horario generado y guardado con éxito!")}catch(q){console.error("Error al generar horario con IA:",q),g("Ocurrió un error al contactar con la IA o al procesar la respuesta. Por favor, inténtelo de nuevo.")}finally{h(!1)}},M=(q,X,re)=>{T({dia:q,bloque:X}),k({asignatura:(re==null?void 0:re.asignatura)||"",profesor:(re==null?void 0:re.profesor)||""})},L=()=>{if(!C)return;const{dia:q,bloque:X}=C,re={...i};re[l]||(re[l]={}),re[l][q]||(re[l][q]={}),re[l][q][X]={asignatura:I.asignatura||null,profesor:I.profesor||null},o(re),localStorage.setItem(yC,JSON.stringify(re)),T(null)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=()=>{const q=i[l]||{};return A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[A.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),i2.map(X=>A.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:X},X))]})}),A.jsx("tbody",{children:f_.map(({bloque:X,inicio:re,fin:K})=>A.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[A.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:X}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${re} - ${K}`})]}),i2.map(Z=>{var W;const Ae=(C==null?void 0:C.dia)===Z&&(C==null?void 0:C.bloque)===X,j=(W=q[Z])==null?void 0:W[X];return A.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Ae&&M(Z,X,j),children:Ae?A.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[A.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:J=>k(ne=>({...ne,asignatura:J.target.value})),className:H+" text-xs mb-1"}),A.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:J=>k(ne=>({...ne,profesor:J.target.value})),className:H+" text-xs"}),A.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[A.jsx("button",{onClick:()=>T(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),A.jsx("button",{onClick:L,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):j!=null&&j.asignatura?A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:j.asignatura}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",j.profesor,")"]})]}):A.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${Z}-${X}`)})]},X))})]})})},oe=()=>A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),A.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:n.curso,onChange:q=>r(X=>({...X,curso:q.target.value})),className:H,children:[A.jsx("option",{value:"",children:"Seleccione"}),Zs.map(q=>A.jsx("option",{value:q,children:q},q))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:q=>r(X=>({...X,asignatura:q.target.value})),className:H,children:[A.jsx("option",{value:"",children:"Seleccione"}),$o.map(q=>A.jsx("option",{value:q,children:q},q))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),A.jsxs("select",{name:"profesor",value:n.profesor,onChange:q=>r(X=>({...X,profesor:q.target.value})),className:H,children:[A.jsx("option",{value:"",children:"Seleccione"}),s.map(q=>A.jsx("option",{value:q,children:q},q))]})]}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),A.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:A.jsx("ul",{className:"space-y-2",children:t.map(q=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[A.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[q.curso," - ",q.asignatura," - ",A.jsx("strong",{children:q.profesor})]}),A.jsx("button",{onClick:()=>B(q.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},q.id))})})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),A.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:P,onChange:q=>_(q.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:H})]}),A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsxs("button",{onClick:O,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),p&&A.jsx("p",{className:"text-red-600",children:p}),b&&A.jsx("p",{className:"text-green-600",children:b})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),A.jsx("select",{id:"selectCurso",value:l,onChange:q=>u(q.target.value),className:H+" md:w-1/3",children:Zs.map(q=>A.jsx("option",{value:q,children:q},q))})]}),Object.keys(i).length>0?G():A.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>D("edicion"),className:`${R==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),A.jsx("button",{onClick:()=>D("global"),className:`${R==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),R==="edicion"?oe():A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),A.jsx(bse,{horarios:i})]})]})},ow="acciones",Ese=async()=>{try{const t=df(Wi(ts,ow),ff("fechaRegistro","desc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},_se=async t=>{try{return{id:(await Ix(Wi(ts,ow),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},fI=async(t,e)=>{try{const n=$i(ts,ow,t);await kx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acción:",n,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},Sse=async t=>{try{const e=$i(ts,ow,t);await Mm(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},hI={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},Tse={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Bse=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(!1),[s,a]=ee.useState(null),[i,o]=ee.useState(hI),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[p,g]=ee.useState(""),[b,w]=ee.useState(""),C=ee.useCallback(async()=>{r(!0);try{const B=await Ese();e(B),a(null)}catch(B){console.error("Error al cargar acciones desde Firestore",B),a("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{r(!1)}},[]);ee.useEffect(()=>{C()},[C]);const T=ee.useCallback(B=>{const{name:O,value:M}=B.target;o(L=>({...L,[O]:M}))},[]),I=ee.useCallback(()=>{o(hI),u(null),a(null)},[]),k=ee.useCallback(async B=>{B.preventDefault();const{fechaRegistro:O,responsable:M,area:L,descripcion:H,fechaCumplimiento:G,estado:oe}=i;if(!O||!M||!L||!H||!G){a("Todos los campos son obligatorios.");return}try{l?await fI(l,i):await _se(i),await C(),I()}catch(q){console.error("Error al guardar acción:",q),a("Error al guardar la acción en la nube.")}},[i,l,C,I]),R=ee.useCallback(B=>{window.scrollTo({top:0,behavior:"smooth"}),u(B.id),o(B)},[]),D=ee.useCallback(async B=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await Sse(B),await C()}catch(O){console.error("Error al eliminar acción:",O),a("No se pudo eliminar la acción en la nube.")}},[C]),P=ee.useCallback(async B=>{try{const O=t.find(M=>M.id===B);if(O){const L=(Rp.indexOf(O.estado)+1)%Rp.length,H=Rp[L];await fI(B,{estado:H}),await C()}}catch(O){console.error("Error al cambiar estado:",O),a("No se pudo cambiar el estado de la acción en la nube.")}},[t,C]),_=ee.useMemo(()=>t.filter(B=>{const O=d===""||B.responsable.toLowerCase().includes(d.toLowerCase())||B.descripcion.toLowerCase().includes(d.toLowerCase()),M=p===""||B.area===p,L=b===""||B.estado===b;return O&&M&&L}),[t,d,p,b]),N="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),n&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),s&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),A.jsxs("form",{onSubmit:k,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),A.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:T,className:N})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),A.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:T,placeholder:"Nombre del responsable",className:N})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),A.jsxs("select",{name:"area",value:i.area,onChange:T,className:N,children:[A.jsx("option",{value:"",children:"Seleccione un área"}),H3.map(B=>A.jsx("option",{value:B,children:B},B))]})]}),A.jsxs("div",{className:"lg:col-span-3",children:[A.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),A.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:T,rows:3,placeholder:"Detalle de la acción a realizar...",className:N})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),A.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:T,className:N})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),A.jsx("select",{name:"estado",value:i.estado,onChange:T,className:N,children:Rp.map(B=>A.jsx("option",{value:B,children:B},B))})]})]}),A.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&A.jsx("button",{type:"button",onClick:I,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:B=>h(B.target.value),className:N+" md:col-span-1"}),A.jsxs("select",{value:p,onChange:B=>g(B.target.value),className:N,children:[A.jsx("option",{value:"",children:"Filtrar por Área"}),H3.map(B=>A.jsx("option",{value:B,children:B},B))]}),A.jsxs("select",{value:b,onChange:B=>w(B.target.value),className:N,children:[A.jsx("option",{value:"",children:"Filtrar por Estado"}),Rp.map(B=>A.jsx("option",{value:B,children:B},B))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&_.length>0?_.map(B=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:B.responsable}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:B.area}),A.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:B.descripcion}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("span",{children:["Reg: ",B.fechaRegistro]}),A.jsxs("span",{className:"font-semibold",children:["Comp: ",B.fechaCumplimiento]})]})}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Tse[B.estado]}`,children:B.estado})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[A.jsx("button",{onClick:()=>P(B.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),A.jsx("button",{onClick:()=>R(B),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),A.jsx("button",{onClick:()=>D(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},B.id)):!n&&A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})},wC="planificacionesDocente",mI="actividadesCalendario",bC="eventosCalendario",Nse=({lesson:t,onClose:e,onSave:n})=>{const[r,s]=ee.useState(t),a=o=>{s({...r,[o.target.name]:o.target.value})},i=()=>{n(r),e()};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),A.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(r).map(([o,l])=>A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:o.replace(/([A-Z])/g," $1")}),A.jsx("textarea",{name:o,value:l,onChange:a,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},o))}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[A.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{onClick:i,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},kse=({plan:t,onEditLesson:e,onUseLesson:n})=>A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),A.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((r,s)=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",r.actividades]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Habilidad (Bloom):"})," ",r.habilidadesBloom]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Perfil de Egreso:"})," ",r.perfilEgreso]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Interdisciplinariedad:"})," ",r.asignaturasInterdisciplinariedad]})]}),A.jsxs("div",{className:"flex gap-2 mt-4",children:[A.jsx("button",{onClick:()=>e(s,r),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300",children:"Editar"}),A.jsx("button",{onClick:()=>n(r,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200",children:"Usar para Plan de Clase"})]})]},s))})]}),Ise=({plan:t,onBack:e,onSave:n})=>{const[r,s]=ee.useState(t),a=i=>{const{name:o,value:l}=i.target,[u,d]=o.split(".");s(u==="momentosClase"?h=>({...h,momentosClase:{...h.momentosClase,[d]:l}}):h=>({...h,[o]:l}))};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),A.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),A.jsx("textarea",{name:"momentosClase.inicio",value:r.momentosClase.inicio,onChange:a,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),A.jsx("textarea",{name:"momentosClase.desarrollo",value:r.momentosClase.desarrollo,onChange:a,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),A.jsx("textarea",{name:"momentosClase.cierre",value:r.momentosClase.cierre,onChange:a,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700"})]})]}),A.jsx("div",{className:"text-right mt-6",children:A.jsx("button",{onClick:()=>n(r),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]})},Fse=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("list"),[s,a]=ee.useState(null),[i,o]=ee.useState(!1),[l,u]=ee.useState(!1),d={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=ee.useState(d);ee.useEffect(()=>{const D=localStorage.getItem(mI);D&&e(JSON.parse(D))},[]),ee.useEffect(()=>{if(n==="summary"&&s)try{const D=localStorage.getItem(bC),_=(D?JSON.parse(D):[]).some(N=>N.type===zn.ACTIVIDAD_FOCALIZADA&&N.date===s.fecha&&N.responsables===s.nombre&&N.ubicacion===s.ubicacion);u(_)}catch(D){console.error("Could not check calendar",D)}},[n,s]);const g=D=>{e(D),localStorage.setItem(mI,JSON.stringify(D))},b=D=>{const{name:P,value:_}=D.target;p(N=>({...N,[P]:_}))},w=(D,P,_)=>{p(N=>({...N,tareas:N.tareas.map(B=>B.id===D?{...B,[P]:_}:B)}))},C=()=>{p(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},T=D=>{p(P=>({...P,tareas:P.tareas.filter(_=>_.id!==D)}))},I=async D=>{D.preventDefault(),o(!0);const P=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
        - Nombre: ${h.nombre}
        - Descripción: ${h.descripcion}
        - Tareas: ${h.tareas.map(_=>_.descripcion).join(", ")}
        El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{yo("Planificación - Actividad Calendario");const N=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P}),B={id:crypto.randomUUID(),...h,objetivo:N.text.replace(/(\*\*|\*)/g,"")};g([B,...t]),a(B),r("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");const N={id:crypto.randomUUID(),...h,objetivo:"No generado"};g([N,...t]),a(N),r("summary")}finally{o(!1)}},k=D=>{if(!D)return;const P={date:D.fecha,type:zn.ACTIVIDAD_FOCALIZADA,responsables:D.nombre,ubicacion:D.ubicacion,horario:D.hora};try{const _=localStorage.getItem(bC),N=_?JSON.parse(_):[],B=[{...P,id:crypto.randomUUID()},...N];localStorage.setItem(bC,JSON.stringify(B)),u(!0),alert("Actividad añadida al Calendario Académico.")}catch(_){console.error("Error adding to calendar:",_),alert("Hubo un error al agregar la actividad al calendario.")}},R="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?A.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:A.jsxs("form",{onSubmit:I,className:"space-y-8",children:[A.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("input",{name:"nombre",value:h.nombre,onChange:b,placeholder:"Nombre de la Actividad",className:R,required:!0}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:b,className:R,required:!0}),A.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:b,className:R,required:!0})]}),A.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:b,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:R,required:!0}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:b,placeholder:"Ubicación",className:R,required:!0}),A.jsx("input",{name:"participantes",value:h.participantes,onChange:b,placeholder:"Participantes",className:R,required:!0})]}),A.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:b,placeholder:"Recursos Generales Necesarios",rows:2,className:R})]})]}),A.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),A.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md",children:"+ Agregar Tarea"})]}),A.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((D,P)=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[A.jsx("button",{type:"button",onClick:()=>T(D.id),className:"absolute top-1 right-1 text-red-500 text-lg",children:"×"}),A.jsx("textarea",{value:D.descripcion,onChange:_=>w(D.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${P+1}`,rows:2,className:R,required:!0}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[A.jsx("input",{value:D.responsable,onChange:_=>w(D.id,"responsable",_.target.value),placeholder:"Responsable",className:R,required:!0}),A.jsx("input",{value:D.recursos,onChange:_=>w(D.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:R})]})]},D.id))})]}),A.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[A.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),A.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),A.jsxs("div",{className:"flex justify-end gap-4",children:[A.jsx("button",{type:"button",onClick:()=>r("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg",children:"Cancelar"}),A.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center",children:i?A.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[A.jsx("span",{className:"text-2xl",children:"✓"}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),A.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),A.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),A.jsxs("div",{className:"space-y-4 text-sm",children:[A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Nombre:"})," ",A.jsx("span",{children:s.nombre})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"})," ",A.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),A.jsx("p",{children:s.descripcion})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Ubicación:"})," ",A.jsx("span",{children:s.ubicacion})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Participantes:"})," ",A.jsx("span",{children:s.participantes})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),A.jsx("p",{children:s.recursosGenerales})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),A.jsx("p",{children:s.objetivo})]})]}),A.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[A.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),A.jsx("button",{onClick:()=>k(s),disabled:l,className:`font-bold px-4 py-2 rounded-lg transition-colors ${l?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:l?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),A.jsx("button",{onClick:()=>{r("list"),a(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),A.jsx("button",{onClick:()=>{r("form"),p(d)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),A.jsx("div",{className:"space-y-3",children:t.length>0?t.map(D=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Rse=({currentUser:t})=>{const[e,n]=ee.useState([]),r={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[s,a]=ee.useState(r),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(null),[p,g]=ee.useState("unidad"),[b,w]=ee.useState(null),[C,T]=ee.useState(null),I=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),k=ee.useMemo(()=>{const q=t.cursos||[],X=new Set;return q.forEach(re=>{re.startsWith("1º")?X.add("1º Medio"):re.startsWith("2º")?X.add("2º Medio"):re.startsWith("3º")?X.add("3º Medio"):re.startsWith("4º")&&X.add("4º Medio")}),Array.from(X)},[t.cursos]);ee.useEffect(()=>{a(q=>({...q,asignatura:I[0]||"",nivel:k[0]||""}))},[I,k]);const R=ee.useCallback(q=>{n(q),localStorage.setItem(wC,JSON.stringify(q)),window.dispatchEvent(new Event("storage"))},[]);ee.useEffect(()=>{try{const q=localStorage.getItem(wC);q&&n(JSON.parse(q))}catch(q){console.error("Error al cargar planificaciones de localStorage",q)}},[]);const D=q=>{const{name:X,value:re}=q.target;a(K=>({...K,[X]:X==="cantidadClases"?parseInt(re,10):re}))},P=()=>{const{asignatura:q,nivel:X,nombreUnidad:re,contenidos:K,cantidadClases:Z,observaciones:Ae,ideasParaUnidad:j}=s;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

        **Información Base:**
        - Asignatura: ${q}
        - Nivel: ${X}
        - Nombre de la Unidad: "${re}"
        - Contenidos clave a trabajar (insumo principal): "${K}"
        - Cantidad de clases para la unidad: ${Z}
        - Ideas y perspectiva del docente para la unidad: "${j||"Ninguna. Sé creativo."}"
        - Observaciones y énfasis del docente: "${Ae||"Ninguna"}"

        Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
        1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
        2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
        3.  **detallesLeccion**: Un array con EXACTAMENTE ${Z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
            - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
            - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
            - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
            - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
            - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
            - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

        Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},_=async q=>{if(q.preventDefault(),u(!0),h(null),!s.contenidos||!s.nombreUnidad){h("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),u(!1);return}try{yo("Planificación - Unidad");const X=new Ba({apiKey:void 0}),re=P(),K={type:Bt.OBJECT,properties:{objetivosAprendizaje:{type:Bt.STRING},indicadoresEvaluacion:{type:Bt.STRING},detallesLeccion:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{objetivosAprendizaje:{type:Bt.STRING},contenidosConceptuales:{type:Bt.STRING},habilidadesBloom:{type:Bt.STRING},perfilEgreso:{type:Bt.STRING},actividades:{type:Bt.STRING},asignaturasInterdisciplinariedad:{type:Bt.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},Z=await X.models.generateContent({model:"gemini-2.5-flash",contents:re,config:{responseMimeType:"application/json",responseSchema:K}}),Ae=JSON.parse(Z.text),j={id:(i==null?void 0:i.id)||crypto.randomUUID(),fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:s.asignatura,nivel:s.nivel,nombreUnidad:s.nombreUnidad,contenidos:s.contenidos,cantidadClases:s.cantidadClases,observaciones:s.observaciones,ideasParaUnidad:s.ideasParaUnidad,objetivosAprendizaje:Ae.objetivosAprendizaje,indicadoresEvaluacion:Ae.indicadoresEvaluacion,detallesLeccion:Ae.detallesLeccion},W=i?e.map(J=>J.id===i.id?j:J):[j,...e];R(W),o(j)}catch(X){console.error("Error al generar planificación con IA",X),h("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{u(!1)}},N=async(q,X)=>{u(!0),h(null);const re=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
        
        - Asignatura: ${X.asignatura}
        - Nivel: ${X.nivel}
        - Objetivo de la clase: ${q.objetivosAprendizaje}
        - Contenidos: ${q.contenidosConceptuales}
        - Actividades sugeridas: ${q.actividades}
        
        Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{yo("Planificación - Utilizar Clase");const K=new Ba({apiKey:void 0}),Z={type:Bt.OBJECT,properties:{inicio:{type:Bt.STRING},desarrollo:{type:Bt.STRING},cierre:{type:Bt.STRING}},required:["inicio","desarrollo","cierre"]},Ae=await K.models.generateContent({model:"gemini-2.5-flash",contents:re,config:{responseMimeType:"application/json",responseSchema:Z}}),j=JSON.parse(Ae.text),W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:X.asignatura,nivel:X.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:j,detalleLeccionOrigen:q},J=JSON.parse(localStorage.getItem(wC)||"[]"),ne=[W,...J];R(ne),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),g("clase")}catch(K){console.error("Error al generar plan de clase con IA",K),h("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{u(!1)}},B=q=>{q.tipo==="Unidad"&&(a({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),o(q),window.scrollTo({top:0,behavior:"smooth"}))},O=q=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?")){const X=e.filter(re=>re.id!==q);R(X),(i==null?void 0:i.id)===q&&(o(null),a(r))}},M=(q,X)=>{i&&T({planId:i.id,lessonIndex:q,lessonData:X})},L=q=>{if(!C)return;const{planId:X,lessonIndex:re}=C,K=e.map(Ae=>{if(Ae.id===X&&Ae.tipo==="Unidad"){const j=[...Ae.detallesLeccion];return j[re]=q,{...Ae,detallesLeccion:j}}return Ae});R(K);const Z=K.find(Ae=>Ae.id===X);Z&&o(Z),T(null)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",G=()=>A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),A.jsxs("form",{onSubmit:_,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsx("select",{name:"asignatura",value:s.asignatura,onChange:D,className:H,children:I.length>0?I.map(q=>A.jsx("option",{value:q,children:q},q)):A.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),A.jsx("select",{name:"nivel",value:s.nivel,onChange:D,className:H,children:k.length>0?k.map(q=>A.jsx("option",{value:q,children:q},q)):A.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",name:"nombreUnidad",value:s.nombreUnidad,onChange:D,className:H,placeholder:"Ej: La Célula y sus procesos"})]}),A.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[A.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("textarea",{name:"contenidos",value:s.contenidos,onChange:D,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:H})]}),A.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[A.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),A.jsx("textarea",{name:"ideasParaUnidad",value:s.ideasParaUnidad,onChange:D,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:H})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),A.jsx("input",{type:"number",name:"cantidadClases",value:s.cantidadClases,onChange:D,className:H,min:"1",max:"20"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),A.jsx("textarea",{name:"observaciones",value:s.observaciones,onChange:D,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:H})]})]}),A.jsx("div",{className:"pt-4 text-right",children:A.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?A.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i?"Regenerar":"Generar Plan"})}),d&&A.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d})]})]}),i&&A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),A.jsx(kse,{plan:i,onEditLesson:M,onUseLesson:N})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),A.jsx("div",{className:"space-y-4",children:e.filter(q=>q.tipo==="Unidad").length>0?e.filter(q=>q.tipo==="Unidad").map(q=>A.jsx("div",{className:`p-4 border rounded-lg ${(i==null?void 0:i.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>B(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),A.jsx("button",{onClick:()=>O(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},q.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),oe=()=>{const q=e.filter(X=>X.tipo==="Clase").sort((X,re)=>new Date(re.fechaCreacion).getTime()-new Date(X.fechaCreacion).getTime());return b?A.jsx(Ise,{plan:b,onBack:()=>w(null),onSave:X=>{const re=e.map(K=>K.id===X.id?X:K);R(re),w(X)}}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),A.jsx("div",{className:"space-y-4",children:q.length>0?q.map(X=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:X.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(X.fechaCreacion).toLocaleString("es-CL")]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",X.contenidos]})]}),A.jsx("div",{className:"flex items-center gap-2",children:A.jsx("button",{onClick:()=>w(X),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},X.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>g("unidad"),className:`${p==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),A.jsx("button",{onClick:()=>g("clase"),className:`${p==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),A.jsx("button",{onClick:()=>g("calendario"),className:`${p==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),p==="unidad"&&G(),p==="clase"&&oe(),p==="calendario"&&A.jsx(Fse,{}),C&&A.jsx(Nse,{lesson:C.lessonData,onClose:()=>T(null),onSave:L})]})},lw="events",Dse=async()=>{try{const t=df(Wi(ts,lw),ff("date","asc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},Use=async t=>{try{return{id:(await Ix(Wi(ts,lw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},Lse=async(t,e)=>{try{const n=$i(ts,lw,t);await kx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar evento:",n,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},Mse=async t=>{try{const e=$i(ts,lw,t);await Mm(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},Pse=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],jse=t=>{switch(t.type){case zn.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case zn.ACTO:return`Acto: ${t.ubicacion}`;case zn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case zn.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Ose=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s,date:a,isLoading:i})=>{const[o,l]=ee.useState({});ee.useEffect(()=>{l(s||{type:zn.EVALUACION,subtype:Gf.PRUEBA_PARCIAL,asignatura:$o[0],curso:Zs[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=w=>{const{name:C,value:T}=w.target;l(I=>({...I,[C]:T}))},h=w=>{l(C=>{if(C.type===zn.SALIDA_PEDAGOGICA){const T=C.cursos||[],I=T.includes(w)?T.filter(k=>k!==w):[...T,w];return{...C,cursos:I.sort()}}return C})},p=w=>{switch(w.preventDefault(),o.type){case zn.EVALUACION:n({date:a,type:zn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos,enlace:o.subtype===Gf.RUBRICA||o.subtype===Gf.PAUTA_COTEJO?o.enlace:void 0});break;case zn.ACTO:n({date:a,type:zn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario});break;case zn.ACTIVIDAD_FOCALIZADA:n({date:a,type:zn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario});break;case zn.SALIDA_PEDAGOGICA:n({date:a,type:zn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos});break}};if(!t)return null;const g=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case zn.EVALUACION:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),A.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:a$.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:$o.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Zs.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),A.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos,onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Gf.RUBRICA||o.subtype===Gf.PAUTA_COTEJO)&&A.jsxs("div",{children:[A.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),A.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace,onChange:d,placeholder:"https://...",className:u})]})]});case zn.ACTO:case zn.ACTIVIDAD_FOCALIZADA:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),A.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),A.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),A.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario,onChange:d,required:!0,className:u})]})]});case zn.SALIDA_PEDAGOGICA:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),A.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),A.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion,onChange:d,required:!0,className:u})]}),A.jsxs("fieldset",{children:[A.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),A.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:Zs.map(w=>A.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[A.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(w),onChange:()=>h(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{children:w})]},w))})]})]});default:return null}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:w=>w.stopPropagation(),children:A.jsxs("form",{onSubmit:p,children:[A.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),A.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(zn).map(w=>A.jsx("option",{value:w,children:w},w))})]}),b()]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[A.jsx("div",{children:s&&r&&A.jsx("button",{type:"button",onClick:r,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),A.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},Qse=({profile:t})=>{const[e,n]=ee.useState(new Date),[r,s]=ee.useState([]),[a,i]=ee.useState(!1),[o,l]=ee.useState(null),[u,d]=ee.useState(!1),[h,p]=ee.useState(Object.values(zn)),[g,b]=ee.useState(!1),[w,C]=ee.useState(null),[T,I]=ee.useState(null),k=ee.useCallback(async()=>{i(!0);try{const M=await Dse();s(M),l(null)}catch(M){console.error("Error al cargar eventos desde Firestore",M),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);ee.useEffect(()=>{k()},[k]);const R=ee.useMemo(()=>{const M=e.getFullYear(),L=e.getMonth(),H=new Date(M,L,1).getDay(),G=new Date(M,L+1,0).getDate(),oe=[];let q=1;for(let X=0;X<6;X++){const re=[];for(let K=0;K<7;K++)X===0&&K<H||q>G?re.push(null):(re.push(new Date(M,L,q)),q++);if(oe.push(re),q>G)break}return oe},[e]),D=M=>{p(L=>L.includes(M)?L.filter(H=>H!==M):[...L,M])},P=()=>{h.length===Object.values(zn).length?p([]):p(Object.values(zn))},_=M=>{t!==en.ESTUDIANTE&&(C(M.toISOString().split("T")[0]),I(null),b(!0))},N=(M,L)=>{L.stopPropagation(),t!==en.ESTUDIANTE&&(C(M.date),I(M),b(!0))},B=async M=>{d(!0);try{T?await Lse(T.id,M):await Use(M),await k(),b(!1)}catch(L){console.error("Error al guardar evento:",L),l("Error al guardar el evento en la nube.")}finally{d(!1)}},O=async()=>{if(T){d(!0);try{await Mse(T.id),await k(),b(!1)}catch(M){console.error("Error al eliminar evento:",M),l("No se pudo eliminar el evento en la nube.")}finally{d(!1)}}};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&r.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),A.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),A.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[A.jsx("button",{onClick:P,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(zn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(zn).map(M=>A.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(M)?`shadow-sm ${D0[M].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[A.jsx("input",{type:"checkbox",checked:h.includes(M),onChange:()=>D(M),className:"hidden"}),A.jsx("span",{children:D0[M].icon}),A.jsx("span",{children:D0[M].label})]},M))]})]}),A.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[A.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[A.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),A.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),A.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),A.jsx("div",{className:"grid grid-cols-7",children:Pse.map(M=>A.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:M},M))}),A.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:R.flat().map((M,L)=>{const H=M&&M.toDateString()===new Date().toDateString(),G=M==null?void 0:M.toISOString().split("T")[0],oe=G?r.filter(q=>q.date===G&&h.includes(q.type)):[];return A.jsx("div",{onClick:()=>M&&_(M),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${M?t!==en.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:M&&A.jsxs(A.Fragment,{children:[A.jsx("span",{className:`self-end text-sm font-semibold ${H?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:M.getDate()}),A.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:oe.map(q=>A.jsxs("div",{onClick:X=>N(q,X),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${D0[q.type].color}`,children:[A.jsx("span",{children:D0[q.type].icon}),A.jsx("span",{className:"truncate",children:jse(q)})]},q.id))}),t!==en.ESTUDIANTE&&A.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},L)})})]}),g&&A.jsx(Ose,{isOpen:g,onClose:()=>b(!1),onSave:B,onDelete:O,event:T,date:w,isLoading:u})]})},cw="anuncios",Hse=async()=>{try{const t=df(Wi(ts,cw),ff("fechaPublicacion","desc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},Vse=async t=>{try{return{id:(await Ix(Wi(ts,cw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Gse=async(t,e)=>{try{const n=$i(ts,cw,t);await kx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar anuncio:",n,"ID:",t),new Error("No se pudo actualizar el anuncio")}},zse=async t=>{try{const e=$i(ts,cw,t);await Mm(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},pI=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],qse=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=ee.useState({tipo:"Todos",cursos:[]}),h=ee.useCallback(async()=>{s(!0);try{const _=await Hse();n(_),i(null)}catch(_){console.error("Error al cargar anuncios desde Firestore",_),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);ee.useEffect(()=>{h()},[h]);const p=_=>{const{name:N,value:B}=_.target;l(O=>({...O,[N]:B}))},g=_=>{d({tipo:_,cursos:_==="Cursos"?[]:void 0})},b=_=>{d(N=>{var O;if(N.tipo!=="Cursos")return N;const B=(O=N.cursos)!=null&&O.includes(_)?N.cursos.filter(M=>M!==_):[...N.cursos||[],_];return{...N,cursos:B}})},w=async _=>{if(_.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const N={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await Vse(N),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(N){console.error("Error al crear anuncio:",N),i("Error al publicar el anuncio en la nube.")}},C=async _=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await zse(_),await h()}catch(N){console.error("Error al eliminar anuncio:",N),i("No se pudo eliminar el anuncio en la nube.")}},T=async _=>{try{const N=e.find(B=>B.id===_);N&&(await Gse(_,{destacado:!N.destacado}),await h())}catch(N){console.error("Error al actualizar anuncio:",N),i("No se pudo actualizar el estado del anuncio en la nube.")}},I=ee.useMemo(()=>[...e].sort((_,N)=>_.destacado&&!N.destacado?-1:!_.destacado&&N.destacado?1:new Date(N.fechaPublicacion).getTime()-new Date(_.fechaPublicacion).getTime()),[e]),k=ee.useMemo(()=>{const _=t.profile,N=t.curso;return I.filter(B=>{if(_===en.SUBDIRECCION)return!0;if(!B.destinatarios)return _!==en.ESTUDIANTE;const{tipo:O,cursos:M}=B.destinatarios;return O==="Todos"||O==="Profesores"&&_===en.PROFESORADO||O==="Coordinación TP"&&_===en.COORDINACION_TP?!0:O==="Cursos"?_===en.ESTUDIANTE?M==null?void 0:M.includes(N||""):!0:!1})},[I,t]),R=_=>t.profile===en.ESTUDIANTE?!1:t.profile===en.SUBDIRECCION||t.profile===_.profileCreador,D=()=>t.profile===en.SUBDIRECCION||t.profile===en.PROFESORADO,P="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==en.ESTUDIANTE?A.jsxs(A.Fragment,{children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),A.jsxs("form",{onSubmit:w,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),A.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:p,required:!0,className:P})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),A.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:p,required:!0,rows:4,className:P})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),A.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(_=>A.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[A.jsx("input",{type:"radio",name:"destinatarioTipo",value:_,checked:u.tipo===_,onChange:()=>g(_),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),A.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:_.replace("Coordinación TP","Coord. TP")})]},_))})]}),u.tipo==="Cursos"&&A.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Zs.map(_=>{var N;return A.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:(N=u.cursos)==null?void 0:N.includes(_),onChange:()=>b(_),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),A.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:_})]},_)})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),A.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:p,placeholder:"https://ejemplo.com/documento.pdf",className:P})]}),A.jsx("div",{className:"pt-2 text-right",children:A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!r&&k.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!r&&k.length>0&&k.map((_,N)=>{const B=pI[N%pI.length];return A.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[_.destacado&&A.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:A.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),A.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:_.titulo}),A.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:_.mensaje}),_.adjunto&&A.jsx("div",{className:"font-sans text-sm mb-4",children:A.jsxs("a",{href:_.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),A.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:_.autor}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(_.fechaPublicacion).toLocaleString("es-CL")})]}),A.jsxs("div",{className:"flex items-center",children:[D()&&A.jsx("button",{onClick:()=>T(_.id),title:_.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:A.jsx("span",{className:`text-xl transition-opacity ${_.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),R(_)&&A.jsx("button",{onClick:()=>C(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},_.id)})})]})},CC="actasDeReunion",P8=window.SpeechRecognition||window.webkitSpeechRecognition,gI=!!P8,Kse=({isListening:t})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Wse=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(null),[s,a]=ee.useState({tipoReunion:mC[0],asistentes:"",textoReunion:""}),[i,o]=ee.useState(!1),[l,u]=ee.useState(!1),[d,h]=ee.useState(null),p=ee.useRef(null);ee.useEffect(()=>{try{const R=localStorage.getItem(CC);if(R){const D=JSON.parse(R);e(D),D.length>0&&!n&&r(D[0])}}catch(R){console.error("Error al leer actas de localStorage",R)}},[n]);const g=R=>{const{name:D,value:P}=R.target;a(_=>({..._,[D]:P}))},b=ee.useCallback(()=>{var R;if(!gI){h("El reconocimiento de voz no es compatible con este navegador.");return}i?(R=p.current)==null||R.stop():(p.current=new P8,p.current.lang="es-CL",p.current.continuous=!0,p.current.interimResults=!0,p.current.onresult=D=>{let P="";for(let _=D.resultIndex;_<D.results.length;++_)D.results[_].isFinal&&(P+=D.results[_][0].transcript+". ");a(_=>({..._,textoReunion:_.textoReunion+P}))},p.current.onstart=()=>o(!0),p.current.onend=()=>o(!1),p.current.onerror=D=>{console.error("Speech recognition error",D.error),h(`Error de reconocimiento: ${D.error}`),o(!1)},p.current.start())},[i]),w=async R=>{R.preventDefault();const{tipoReunion:D,asistentes:P,textoReunion:_}=s;if(!D||!P.trim()||!_.trim()){h("Todos los campos son obligatorios.");return}u(!0),h(null);try{yo("Generador de Actas");const N=new Ba({apiKey:void 0}),B=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${_}"
                
                Asistentes a la reunión para referencia de nombres: ${P}
            `,O={type:Bt.OBJECT,properties:{temas:{type:Bt.ARRAY,description:"Lista de los principales temas tratados en la reunión.",items:{type:Bt.STRING}},acuerdos:{type:Bt.ARRAY,description:"Lista de los acuerdos o decisiones tomadas.",items:{type:Bt.STRING}},plazos:{type:Bt.ARRAY,description:"Lista de fechas límite o plazos mencionados en el texto.",items:{type:Bt.STRING}},responsables:{type:Bt.ARRAY,description:"Lista de las personas asignadas como responsables de tareas.",items:{type:Bt.STRING}}},required:["temas","acuerdos","plazos","responsables"]},M=await N.models.generateContent({model:"gemini-2.5-flash",contents:B,config:{responseMimeType:"application/json",responseSchema:O}}),L=JSON.parse(M.text),H={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...s,...L},G=[H,...t];e(G),localStorage.setItem(CC,JSON.stringify(G)),a({tipoReunion:mC[0],asistentes:"",textoReunion:""}),r(H)}catch(N){console.error("Error al analizar acta con IA:",N),h("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{u(!1)}},C=R=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?")){const D=t.filter(P=>P.id!==R);e(D),localStorage.setItem(CC,JSON.stringify(D)),(n==null?void 0:n.id)===R&&r(D.length>0?D[0]:null)}},T=R=>{r(R)},I=R=>R.temas||R.acuerdos||R.plazos||R.responsables?A.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),R.temas&&R.temas.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:R.temas.map((P,_)=>A.jsx("li",{children:P},_))})]}),R.acuerdos&&R.acuerdos.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:R.acuerdos.map((P,_)=>A.jsx("li",{children:P},_))})]}),R.plazos&&R.plazos.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:R.plazos.map((P,_)=>A.jsx("li",{children:P},_))})]}),R.responsables&&R.responsables.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:R.responsables.map((P,_)=>A.jsx("li",{children:P},_))})]})]}):null,k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[A.jsxs("div",{className:"md:col-span-1 space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),A.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",A.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),A.jsxs("form",{onSubmit:w,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),A.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:g,required:!0,className:k,children:mC.map(R=>A.jsx("option",{value:R,children:R},R))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),A.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:g,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:k})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),A.jsxs("div",{className:"relative",children:[A.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:g,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:k}),gI&&A.jsx("button",{type:"button",onClick:b,title:i?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:A.jsx(Kse,{isListening:i})})]})]}),d&&A.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d}),A.jsx("div",{className:"pt-2 text-right",children:A.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?A.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),A.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.sort((R,D)=>new Date(D.fechaCreacion).getTime()-new Date(R.fechaCreacion).getTime()).map(R=>A.jsxs("button",{onClick:()=>T(R),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===R.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:R.tipoReunion}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(R.fechaCreacion).toLocaleDateString("es-CL")})]},R.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),A.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?A.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),A.jsx("button",{onClick:()=>C(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[A.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),A.jsx("h2",{children:"Asistentes"}),A.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((R,D)=>R.trim()&&A.jsx("li",{children:R.trim()},D))}),I(n),A.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:A.jsx("p",{children:n.textoReunion})})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[A.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),A.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},$se="modulepreload",Yse=function(t){return"/"+t},xI={},S_=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(u=>{if(u=Yse(u),u in xI)return;xI[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":$se,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Mr(t){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(t)}var Fi=Uint8Array,Ko=Uint16Array,P5=Int32Array,uw=new Fi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Aw=new Fi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),T_=new Fi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j8=function(t,e){for(var n=new Ko(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new P5(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},O8=j8(uw,2),Q8=O8.b,B_=O8.r;Q8[28]=258,B_[258]=28;var H8=j8(Aw,0),Jse=H8.b,vI=H8.r,N_=new Ko(32768);for(var is=0;is<32768;++is){var pd=(is&43690)>>1|(is&21845)<<1;pd=(pd&52428)>>2|(pd&13107)<<2,pd=(pd&61680)>>4|(pd&3855)<<4,N_[is]=((pd&65280)>>8|(pd&255)<<8)>>1}var wu=function(t,e,n){for(var r=t.length,s=0,a=new Ko(e);s<r;++s)t[s]&&++a[t[s]-1];var i=new Ko(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(n){o=new Ko(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)o[N_[h]>>l]=u}else for(o=new Ko(r),s=0;s<r;++s)t[s]&&(o[s]=N_[i[t[s]-1]++]>>15-t[s]);return o},tf=new Fi(288);for(var is=0;is<144;++is)tf[is]=8;for(var is=144;is<256;++is)tf[is]=9;for(var is=256;is<280;++is)tf[is]=7;for(var is=280;is<288;++is)tf[is]=8;var qg=new Fi(32);for(var is=0;is<32;++is)qg[is]=5;var Xse=wu(tf,9,0),Zse=wu(tf,9,1),eae=wu(qg,5,0),tae=wu(qg,5,1),EC=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},lc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},_C=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},j5=function(t){return(t+7)/8|0},V8=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Fi(t.subarray(e,n))},nae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dc=function(t,e,n){var r=new Error(e||nae[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,dc),!n)throw r;return r},rae=function(t,e,n,r){var s=t.length,a=0;if(!s||e.f&&!e.l)return n||new Fi(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new Fi(s*3));var u=function(ge){var ae=n.length;if(ge>ae){var Fe=new Fi(Math.max(ae*2,ge));Fe.set(n),n=Fe}},d=e.f||0,h=e.p||0,p=e.b||0,g=e.l,b=e.d,w=e.m,C=e.n,T=s*8;do{if(!g){d=lc(t,h,1);var I=lc(t,h+1,3);if(h+=3,I)if(I==1)g=Zse,b=tae,w=9,C=5;else if(I==2){var P=lc(t,h,31)+257,_=lc(t,h+10,15)+4,N=P+lc(t,h+5,31)+1;h+=14;for(var B=new Fi(N),O=new Fi(19),M=0;M<_;++M)O[T_[M]]=lc(t,h+M*3,7);h+=_*3;for(var L=EC(O),H=(1<<L)-1,G=wu(O,L,1),M=0;M<N;){var oe=G[lc(t,h,H)];h+=oe&15;var k=oe>>4;if(k<16)B[M++]=k;else{var q=0,X=0;for(k==16?(X=3+lc(t,h,3),h+=2,q=B[M-1]):k==17?(X=3+lc(t,h,7),h+=3):k==18&&(X=11+lc(t,h,127),h+=7);X--;)B[M++]=q}}var re=B.subarray(0,P),K=B.subarray(P);w=EC(re),C=EC(K),g=wu(re,w,1),b=wu(K,C,1)}else dc(1);else{var k=j5(h)+4,R=t[k-4]|t[k-3]<<8,D=k+R;if(D>s){l&&dc(0);break}o&&u(p+R),n.set(t.subarray(k,D),p),e.b=p+=R,e.p=h=D*8,e.f=d;continue}if(h>T){l&&dc(0);break}}o&&u(p+131072);for(var Z=(1<<w)-1,Ae=(1<<C)-1,j=h;;j=h){var q=g[_C(t,h)&Z],W=q>>4;if(h+=q&15,h>T){l&&dc(0);break}if(q||dc(2),W<256)n[p++]=W;else if(W==256){j=h,g=null;break}else{var J=W-254;if(W>264){var M=W-257,ne=uw[M];J=lc(t,h,(1<<ne)-1)+Q8[M],h+=ne}var ie=b[_C(t,h)&Ae],de=ie>>4;ie||dc(3),h+=ie&15;var K=Jse[de];if(de>3){var ne=Aw[de];K+=_C(t,h)&(1<<ne)-1,h+=ne}if(h>T){l&&dc(0);break}o&&u(p+131072);var me=p+J;if(p<K){var xe=a-K,Se=Math.min(K,me);for(xe+p<0&&dc(3);p<Se;++p)n[p]=r[xe+p]}for(;p<me;++p)n[p]=n[p-K]}}e.l=g,e.p=j,e.b=p,e.f=d,g&&(d=1,e.m=w,e.d=b,e.n=C)}while(!d);return p!=n.length&&i?V8(n,0,p):n.subarray(0,p)},iA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Up=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},SC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return{t:z8,l:0};if(s==1){var i=new Fi(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(D,P){return D.f-P.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[u].f<n[h].f?u++:h++],l=n[u!=d&&n[u].f<n[h].f?u++:h++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<s;++r)a[r].s>p&&(p=a[r].s);var g=new Ko(p+1),b=k_(n[d-1],g,0);if(b>e){var r=0,w=0,C=b-e,T=1<<C;for(a.sort(function(P,_){return g[_.s]-g[P.s]||P.f-_.f});r<s;++r){var I=a[r].s;if(g[I]>e)w+=T-(1<<b-g[I]),g[I]=e;else break}for(w>>=C;w>0;){var k=a[r].s;g[k]<e?w-=1<<e-g[k]++-1:++r}for(;r>=0&&w;--r){var R=a[r].s;g[R]==e&&(--g[R],++w)}b=e}return{t:new Fi(g),l:b}},k_=function(t,e,n){return t.s==-1?Math.max(k_(t.l,e,n+1),k_(t.r,e,n+1)):e[t.s]=n},yI=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ko(++e),r=0,s=t[0],a=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:n.subarray(0,r),n:e}},Lp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},G8=function(t,e,n){var r=n.length,s=j5(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<r;++a)t[s+a+4]=n[a];return(s+4+r)*8},wI=function(t,e,n,r,s,a,i,o,l,u,d){iA(e,d++,n),++s[256];for(var h=SC(s,15),p=h.t,g=h.l,b=SC(a,15),w=b.t,C=b.l,T=yI(p),I=T.c,k=T.n,R=yI(w),D=R.c,P=R.n,_=new Ko(19),N=0;N<I.length;++N)++_[I[N]&31];for(var N=0;N<D.length;++N)++_[D[N]&31];for(var B=SC(_,7),O=B.t,M=B.l,L=19;L>4&&!O[T_[L-1]];--L);var H=u+5<<3,G=Lp(s,tf)+Lp(a,qg)+i,oe=Lp(s,p)+Lp(a,w)+i+14+3*L+Lp(_,O)+2*_[16]+3*_[17]+7*_[18];if(l>=0&&H<=G&&H<=oe)return G8(e,d,t.subarray(l,l+u));var q,X,re,K;if(iA(e,d,1+(oe<G)),d+=2,oe<G){q=wu(p,g,0),X=p,re=wu(w,C,0),K=w;var Z=wu(O,M,0);iA(e,d,k-257),iA(e,d+5,P-1),iA(e,d+10,L-4),d+=14;for(var N=0;N<L;++N)iA(e,d+3*N,O[T_[N]]);d+=3*L;for(var Ae=[I,D],j=0;j<2;++j)for(var W=Ae[j],N=0;N<W.length;++N){var J=W[N]&31;iA(e,d,Z[J]),d+=O[J],J>15&&(iA(e,d,W[N]>>5&127),d+=W[N]>>12)}}else q=Xse,X=tf,re=eae,K=qg;for(var N=0;N<o;++N){var ne=r[N];if(ne>255){var J=ne>>18&31;Up(e,d,q[J+257]),d+=X[J+257],J>7&&(iA(e,d,ne>>23&31),d+=uw[J]);var ie=ne&31;Up(e,d,re[ie]),d+=K[ie],ie>3&&(Up(e,d,ne>>5&8191),d+=Aw[ie])}else Up(e,d,q[ne]),d+=X[ne]}return Up(e,d,q[256]),d+X[256]},sae=new P5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),z8=new Fi(0),aae=function(t,e,n,r,s,a){var i=a.z||t.length,o=new Fi(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=sae[e-1],p=h>>13,g=h&8191,b=(1<<n)-1,w=a.p||new Ko(32768),C=a.h||new Ko(b+1),T=Math.ceil(n/3),I=2*T,k=function(et){return(t[et]^t[et+1]<<T^t[et+2]<<I)&b},R=new P5(25e3),D=new Ko(288),P=new Ko(32),_=0,N=0,B=a.i||0,O=0,M=a.w||0,L=0;B+2<i;++B){var H=k(B),G=B&32767,oe=C[H];if(w[G]=oe,C[H]=G,M<=B){var q=i-B;if((_>7e3||O>24576)&&(q>423||!u)){d=wI(t,l,0,R,D,P,N,O,L,B-L,d),O=_=N=0,L=B;for(var X=0;X<286;++X)D[X]=0;for(var X=0;X<30;++X)P[X]=0}var re=2,K=0,Z=g,Ae=G-oe&32767;if(q>2&&H==k(B-Ae))for(var j=Math.min(p,q)-1,W=Math.min(32767,B),J=Math.min(258,q);Ae<=W&&--Z&&G!=oe;){if(t[B+re]==t[B+re-Ae]){for(var ne=0;ne<J&&t[B+ne]==t[B+ne-Ae];++ne);if(ne>re){if(re=ne,K=Ae,ne>j)break;for(var ie=Math.min(Ae,ne-2),de=0,X=0;X<ie;++X){var me=B-Ae+X&32767,xe=w[me],Se=me-xe&32767;Se>de&&(de=Se,oe=me)}}}G=oe,oe=w[G],Ae+=G-oe&32767}if(K){R[O++]=268435456|B_[re]<<18|vI[K];var ge=B_[re]&31,ae=vI[K]&31;N+=uw[ge]+Aw[ae],++D[257+ge],++P[ae],M=B+re,++_}else R[O++]=t[B],++D[t[B]]}}for(B=Math.max(B,M);B<i;++B)R[O++]=t[B],++D[t[B]];d=wI(t,l,u,R,D,P,N,O,L,B-L,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=C,a.p=w,a.i=B,a.w=M)}else{for(var B=a.w||0;B<i+u;B+=65535){var Fe=B+65535;Fe>=i&&(l[d/8|0]=u,Fe=i),d=G8(l,d+1,t.subarray(B,Fe))}a.i=i}return V8(o,0,r+j5(d)+s)},q8=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,a=n.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},iae=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Fi(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return aae(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},K8=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},oae=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=q8();s.p(e.dictionary),K8(t,2,s.d())}},lae=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&dc(6,"invalid zlib data"),(t[1]>>5&1)==1&&dc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function I_(t,e){e||(e={});var n=q8();n.p(t);var r=iae(t,e,e.dictionary?6:2,4);return oae(r,e),K8(r,r.length-4,n.d()),r}function cae(t,e){return rae(t.subarray(lae(t),-4),{i:2},e,e)}var uae=typeof TextDecoder<"u"&&new TextDecoder,Aae=0;try{uae.decode(z8,{stream:!0}),Aae=1}catch{}var yn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function TC(){yn.console&&typeof yn.console.log=="function"&&yn.console.log.apply(yn.console,arguments)}var Yr={log:TC,warn:function(t){yn.console&&(typeof yn.console.warn=="function"?yn.console.warn.apply(yn.console,arguments):TC.call(null,arguments))},error:function(t){yn.console&&(typeof yn.console.error=="function"?yn.console.error.apply(yn.console,arguments):TC(t))}};function BC(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Hf(r.response,e,n)},r.onerror=function(){Yr.error("could not download file")},r.send()}function bI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function nv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var wg,F_,Hf=yn.saveAs||((typeof window>"u"?"undefined":Mr(window))!=="object"||window!==yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yn.URL||yn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?bI(s.href)?BC(t,e,n):nv(s,s.target="_blank"):nv(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){nv(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(bI(t))BC(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){nv(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Mr(a)!=="object"&&(Yr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return BC(t,e,n);var s=t.type==="application/octet-stream",a=/constructor/i.test(yn.HTMLElement)||yn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":Mr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=yn.URL||yn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function W8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function NC(t,e){var n=t[0],r=t[1],s=t[2],a=t[3];n=yi(n,r,s,a,e[0],7,-680876936),a=yi(a,n,r,s,e[1],12,-389564586),s=yi(s,a,n,r,e[2],17,606105819),r=yi(r,s,a,n,e[3],22,-1044525330),n=yi(n,r,s,a,e[4],7,-176418897),a=yi(a,n,r,s,e[5],12,1200080426),s=yi(s,a,n,r,e[6],17,-1473231341),r=yi(r,s,a,n,e[7],22,-45705983),n=yi(n,r,s,a,e[8],7,1770035416),a=yi(a,n,r,s,e[9],12,-1958414417),s=yi(s,a,n,r,e[10],17,-42063),r=yi(r,s,a,n,e[11],22,-1990404162),n=yi(n,r,s,a,e[12],7,1804603682),a=yi(a,n,r,s,e[13],12,-40341101),s=yi(s,a,n,r,e[14],17,-1502002290),n=wi(n,r=yi(r,s,a,n,e[15],22,1236535329),s,a,e[1],5,-165796510),a=wi(a,n,r,s,e[6],9,-1069501632),s=wi(s,a,n,r,e[11],14,643717713),r=wi(r,s,a,n,e[0],20,-373897302),n=wi(n,r,s,a,e[5],5,-701558691),a=wi(a,n,r,s,e[10],9,38016083),s=wi(s,a,n,r,e[15],14,-660478335),r=wi(r,s,a,n,e[4],20,-405537848),n=wi(n,r,s,a,e[9],5,568446438),a=wi(a,n,r,s,e[14],9,-1019803690),s=wi(s,a,n,r,e[3],14,-187363961),r=wi(r,s,a,n,e[8],20,1163531501),n=wi(n,r,s,a,e[13],5,-1444681467),a=wi(a,n,r,s,e[2],9,-51403784),s=wi(s,a,n,r,e[7],14,1735328473),n=bi(n,r=wi(r,s,a,n,e[12],20,-1926607734),s,a,e[5],4,-378558),a=bi(a,n,r,s,e[8],11,-2022574463),s=bi(s,a,n,r,e[11],16,1839030562),r=bi(r,s,a,n,e[14],23,-35309556),n=bi(n,r,s,a,e[1],4,-1530992060),a=bi(a,n,r,s,e[4],11,1272893353),s=bi(s,a,n,r,e[7],16,-155497632),r=bi(r,s,a,n,e[10],23,-1094730640),n=bi(n,r,s,a,e[13],4,681279174),a=bi(a,n,r,s,e[0],11,-358537222),s=bi(s,a,n,r,e[3],16,-722521979),r=bi(r,s,a,n,e[6],23,76029189),n=bi(n,r,s,a,e[9],4,-640364487),a=bi(a,n,r,s,e[12],11,-421815835),s=bi(s,a,n,r,e[15],16,530742520),n=Ci(n,r=bi(r,s,a,n,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Ci(a,n,r,s,e[7],10,1126891415),s=Ci(s,a,n,r,e[14],15,-1416354905),r=Ci(r,s,a,n,e[5],21,-57434055),n=Ci(n,r,s,a,e[12],6,1700485571),a=Ci(a,n,r,s,e[3],10,-1894986606),s=Ci(s,a,n,r,e[10],15,-1051523),r=Ci(r,s,a,n,e[1],21,-2054922799),n=Ci(n,r,s,a,e[8],6,1873313359),a=Ci(a,n,r,s,e[15],10,-30611744),s=Ci(s,a,n,r,e[6],15,-1560198380),r=Ci(r,s,a,n,e[13],21,1309151649),n=Ci(n,r,s,a,e[4],6,-145523070),a=Ci(a,n,r,s,e[11],10,-1120210379),s=Ci(s,a,n,r,e[2],15,718787259),r=Ci(r,s,a,n,e[9],21,-343485551),t[0]=Fd(n,t[0]),t[1]=Fd(r,t[1]),t[2]=Fd(s,t[2]),t[3]=Fd(a,t[3])}function dw(t,e,n,r,s,a){return e=Fd(Fd(e,t),Fd(r,a)),Fd(e<<s|e>>>32-s,n)}function yi(t,e,n,r,s,a,i){return dw(e&n|~e&r,t,e,s,a,i)}function wi(t,e,n,r,s,a,i){return dw(e&r|n&~r,t,e,s,a,i)}function bi(t,e,n,r,s,a,i){return dw(e^n^r,t,e,s,a,i)}function Ci(t,e,n,r,s,a,i){return dw(n^(e|~r),t,e,s,a,i)}function $8(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)NC(r,dae(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(NC(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,NC(r,s),r}function dae(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}wg=yn.atob.bind(yn),F_=yn.btoa.bind(yn);var CI="0123456789abcdef".split("");function fae(t){for(var e="",n=0;n<4;n++)e+=CI[t>>8*n+4&15]+CI[t>>8*n&15];return e}function hae(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function R_(t){return $8(t).map(hae).join("")}var mae=function(t){for(var e=0;e<t.length;e++)t[e]=fae(t[e]);return t.join("")}($8("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fd(t,e){if(mae){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D_(t,e){var n,r,s,a;if(t!==n){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var h=e.length,p=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=d,i=o[(o[p]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var EI={print:4,modify:8,copy:16,"annot-forms":32};function U0(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(EI.perm!==void 0)throw new Error("Invalid permission: "+o);s+=EI[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=R_(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=D_(this.encryptionKey,this.padding)}function L0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function _I(t){if(Mr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[n]){var i=e[n][a];try{i[0].apply(t,r)}catch(o){yn.console&&Yr.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function K2(t){if(!(this instanceof K2))return new K2(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Y8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function zf(t,e,n,r,s){if(!(this instanceof zf))return new zf(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Y8.call(this,r,s)}function H0(t,e,n,r,s){if(!(this instanceof H0))return new H0(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Y8.call(this,r,s)}function an(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;Mr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=_I;var b="1.3",w=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var T=g.__private__.getPageFormat=function(V){return C[V]};s=s||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},k=I.COMPAT;function R(){this.saveGraphicsState(),Ce(new Ht(xt,0,0,-xt,0,Ra()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",k=I.ADVANCED}function D(){this.restoreGraphicsState(),u="S",k=I.COMPAT}var P=g.__private__.combineFontStyleAndFontWeight=function(V,ue){if(V=="bold"&&ue=="normal"||V=="bold"&&ue==400||V=="normal"&&ue=="italic"||V=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(V=ue==400||ue==="normal"?V==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||V!=="normal"?(ue==700?"bold":ue)+""+V:"bold"),V};g.advancedAPI=function(V){var ue=k===I.COMPAT;return ue&&R.call(this),typeof V!="function"||(V(this),ue&&D.call(this)),this},g.compatAPI=function(V){var ue=k===I.ADVANCED;return ue&&D.call(this),typeof V!="function"||(V(this),ue&&R.call(this)),this},g.isAdvancedAPI=function(){return k===I.ADVANCED};var _,N=function(V){if(k!==I.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=g.roundToPrecision=g.__private__.roundToPrecision=function(V,ue){var Ie=e||ue;if(isNaN(V)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Ie).replace(/0+$/,"")};_=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return B(V,16)};var O=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return B(V,2)},M=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return B(V,3)},L=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return k===I.COMPAT?V*xt:k===I.ADVANCED?V:void 0},H=function(V){return k===I.COMPAT?Ra()-V:k===I.ADVANCED?V:void 0},G=function(V){return L(H(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var oe,q="00000000000000000000000000000000",X=g.__private__.getFileId=function(){return q},re=g.__private__.setFileId=function(V){return q=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ir=new U0(d.userPermissions,d.userPassword,d.ownerPassword,q)),q};g.setFileId=function(V){return re(V),this},g.getFileId=function(){return X()};var K=g.__private__.convertDateToPDFDate=function(V){var ue=V.getTimezoneOffset(),Ie=ue<0?"+":"-",Ue=Math.floor(Math.abs(ue/60)),He=Math.abs(ue%60),ot=[Ie,J(Ue),"'",J(He),"'"].join("");return["D:",V.getFullYear(),J(V.getMonth()+1),J(V.getDate()),J(V.getHours()),J(V.getMinutes()),J(V.getSeconds()),ot].join("")},Z=g.__private__.convertPDFDateToDate=function(V){var ue=parseInt(V.substr(2,4),10),Ie=parseInt(V.substr(6,2),10)-1,Ue=parseInt(V.substr(8,2),10),He=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),_t=parseInt(V.substr(14,2),10);return new Date(ue,Ie,Ue,He,ot,_t,0)},Ae=g.__private__.setCreationDate=function(V){var ue;if(V===void 0&&(V=new Date),V instanceof Date)ue=K(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=V}return oe=ue},j=g.__private__.getCreationDate=function(V){var ue=oe;return V==="jsDate"&&(ue=Z(oe)),ue};g.setCreationDate=function(V){return Ae(V),this},g.getCreationDate=function(V){return j(V)};var W,J=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},ne=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ie=0,de=[],me=[],xe=0,Se=[],ge=[],ae=!1,Fe=me,et=function(){ie=0,xe=0,me=[],de=[],Se=[],Ee=Qr(),_e=Qr()};g.__private__.setCustomOutputDestination=function(V){ae=!0,Fe=V};var De=function(V){ae||(Fe=V)};g.__private__.resetCustomOutputDestination=function(){ae=!1,Fe=me};var Ce=g.__private__.out=function(V){return V=V.toString(),xe+=V.length+1,Fe.push(V),Fe},Ge=g.__private__.write=function(V){return Ce(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},nt=g.__private__.getArrayBuffer=function(V){for(var ue=V.length,Ie=new ArrayBuffer(ue),Ue=new Uint8Array(Ie);ue--;)Ue[ue]=V.charCodeAt(ue);return Ie},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return it};var dt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return dt=k===I.ADVANCED?V/xt:V,this};var Ct,ut=g.__private__.getFontSize=g.getFontSize=function(){return k===I.COMPAT?dt:dt*xt},kt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return kt=V,this},g.__private__.getR2L=g.getR2L=function(){return kt};var Ft,Wt=g.__private__.setZoomMode=function(V){var ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Ct=V;else if(isNaN(V)){if(ue.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Ct=V}else Ct=parseInt(V,10)};g.__private__.getZoomMode=function(){return Ct};var Mt,Vt=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Ft=V};g.__private__.getPageMode=function(){return Ft};var Jt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Mt=V};g.__private__.getLayoutMode=function(){return Mt},g.__private__.setDisplayMode=g.setDisplayMode=function(V,ue,Ie){return Wt(V),Jt(ue),Vt(Ie),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Pt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[V]},g.__private__.getDocumentProperties=function(){return Pt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var ue in Pt)Pt.hasOwnProperty(ue)&&V[ue]&&(Pt[ue]=V[ue]);return this},g.__private__.setDocumentProperty=function(V,ue){if(Object.keys(Pt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[V]=ue};var It,xt,xn,$t,ir,mn={},Fn={},Er=[],Bn={},na={},Xn={},Wr={},cs=null,Dn=0,tn=[],On=new _I(g),ra=t.hotfixes||[],Or={},ms={},xa=[],Ht=function V(ue,Ie,Ue,He,ot,_t){if(!(this instanceof V))return new V(ue,Ie,Ue,He,ot,_t);isNaN(ue)&&(ue=1),isNaN(Ie)&&(Ie=0),isNaN(Ue)&&(Ue=0),isNaN(He)&&(He=1),isNaN(ot)&&(ot=0),isNaN(_t)&&(_t=0),this._matrix=[ue,Ie,Ue,He,ot,_t]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(V)},Ht.prototype.multiply=function(V){var ue=V.sx*this.sx+V.shy*this.shx,Ie=V.sx*this.shy+V.shy*this.sy,Ue=V.shx*this.sx+V.sy*this.shx,He=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,_t=V.tx*this.shy+V.ty*this.sy+this.ty;return new Ht(ue,Ie,Ue,He,ot,_t)},Ht.prototype.decompose=function(){var V=this.sx,ue=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty,_t=Math.sqrt(V*V+ue*ue),Ot=(V/=_t)*Ie+(ue/=_t)*Ue;Ie-=V*Ot,Ue-=ue*Ot;var S=Math.sqrt(Ie*Ie+Ue*Ue);return Ot/=S,V*(Ue/=S)<ue*(Ie/=S)&&(V=-V,ue=-ue,Ot=-Ot,_t=-_t),{scale:new Ht(_t,0,0,S,0,0),translate:new Ht(1,0,0,1,He,ot),rotate:new Ht(V,ue,-ue,V,0,0),skew:new Ht(1,0,Ot,1,0,0)}},Ht.prototype.toString=function(V){return this.join(" ")},Ht.prototype.inversed=function(){var V=this.sx,ue=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty,_t=1/(V*Ue-ue*Ie),Ot=Ue*_t,S=-ue*_t,Y=-Ie*_t,se=V*_t;return new Ht(Ot,S,Y,se,-Ot*He-Y*ot,-S*He-se*ot)},Ht.prototype.applyToPoint=function(V){var ue=V.x*this.sx+V.y*this.shx+this.tx,Ie=V.x*this.shy+V.y*this.sy+this.ty;return new Vl(ue,Ie)},Ht.prototype.applyToRectangle=function(V){var ue=this.applyToPoint(V),Ie=this.applyToPoint(new Vl(V.x+V.w,V.y+V.h));return new Dc(ue.x,ue.y,Ie.x-ue.x,Ie.y-ue.y)},Ht.prototype.clone=function(){var V=this.sx,ue=this.shy,Ie=this.shx,Ue=this.sy,He=this.tx,ot=this.ty;return new Ht(V,ue,Ie,Ue,He,ot)},g.Matrix=Ht;var or=g.matrixMult=function(V,ue){return ue.multiply(V)},Zn=new Ht(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Zn;var _r=function(V,ue){if(!na[V]){var Ie=(ue instanceof zf?"Sh":"P")+(Object.keys(Bn).length+1).toString(10);ue.id=Ie,na[V]=Ie,Bn[Ie]=ue,On.publish("addPattern",ue)}};g.ShadingPattern=zf,g.TilingPattern=H0,g.addShadingPattern=function(V,ue){return N("addShadingPattern()"),_r(V,ue),this},g.beginTilingPattern=function(V){N("beginTilingPattern()"),ol(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,ue){N("endTilingPattern()"),ue.stream=ge[W].join(`
`),_r(V,ue),On.publish("endTilingPattern",ue),xa.pop().restore()};var kr=g.__private__.newObject=function(){var V=Qr();return fe(V,!0),V},Qr=g.__private__.newObjectDeferred=function(){return ie++,de[ie]=function(){return xe},ie},fe=function(V,ue){return ue=typeof ue=="boolean"&&ue,de[V]=xe,ue&&Ce(V+" 0 obj"),V},Ne=g.__private__.newAdditionalObject=function(){var V={objId:Qr(),content:""};return Se.push(V),V},Ee=Qr(),_e=Qr(),Te=g.__private__.decodeColorString=function(V){var ue=V.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length===5&&(ue[4]==="k"||ue[4]==="K")&&(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Ie=parseFloat(ue[0]);ue=[Ie,Ie,Ie,"r"]}for(var Ue="#",He=0;He<3;He++)Ue+=("0"+Math.floor(255*parseFloat(ue[He])).toString(16)).slice(-2);return Ue},ke=g.__private__.encodeColorString=function(V){var ue;typeof V=="string"&&(V={ch1:V});var Ie=V.ch1,Ue=V.ch2,He=V.ch3,ot=V.ch4,_t=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var Ot=new W8(Ie);if(Ot.ok)Ie=Ot.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var S=parseInt(Ie.substr(1),16);Ie=S>>16&255,Ue=S>>8&255,He=255&S}if(Ue===void 0||ot===void 0&&Ie===Ue&&Ue===He)if(typeof Ie=="string")ue=Ie+" "+_t[0];else switch(V.precision){case 2:ue=O(Ie/255)+" "+_t[0];break;case 3:default:ue=M(Ie/255)+" "+_t[0]}else if(ot===void 0||Mr(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return ue=["1.","1.","1.",_t[1]].join(" ");if(typeof Ie=="string")ue=[Ie,Ue,He,_t[1]].join(" ");else switch(V.precision){case 2:ue=[O(Ie/255),O(Ue/255),O(He/255),_t[1]].join(" ");break;default:case 3:ue=[M(Ie/255),M(Ue/255),M(He/255),_t[1]].join(" ")}}else if(typeof Ie=="string")ue=[Ie,Ue,He,ot,_t[2]].join(" ");else switch(V.precision){case 2:ue=[O(Ie),O(Ue),O(He),O(ot),_t[2]].join(" ");break;case 3:default:ue=[M(Ie),M(Ue),M(He),M(ot),_t[2]].join(" ")}return ue},qe=g.__private__.getFilters=function(){return i},tt=g.__private__.putStream=function(V){var ue=(V=V||{}).data||"",Ie=V.filters||qe(),Ue=V.alreadyAppliedFilters||[],He=V.addLength1||!1,ot=ue.length,_t=V.objectId,Ot=function(fn){return fn};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ot=Ir.encryptor(_t,0));var S={};Ie===!0&&(Ie=["FlateEncode"]);var Y=V.additionalKeyValues||[],se=(S=an.API.processDataByFilters!==void 0?an.API.processDataByFilters(ue,Ie):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(S.data.length!==0&&(Y.push({key:"Length",value:S.data.length}),He===!0&&Y.push({key:"Length1",value:ot})),se.length!=0)if(se.split("/").length-1==1)Y.push({key:"Filter",value:se});else{Y.push({key:"Filter",value:"["+se+"]"});for(var ye=0;ye<Y.length;ye+=1)if(Y[ye].key==="DecodeParms"){for(var Oe=[],Xe=0;Xe<S.reverseChain.split("/").length-1;Xe+=1)Oe.push("null");Oe.push(Y[ye].value),Y[ye].value="["+Oe.join(" ")+"]"}}Ce("<<");for(var St=0;St<Y.length;St++)Ce("/"+Y[St].key+" "+Y[St].value);Ce(">>"),S.data.length!==0&&(Ce("stream"),Ce(Ot(S.data)),Ce("endstream"))},Qe=g.__private__.putPage=function(V){var ue=V.number,Ie=V.data,Ue=V.objId,He=V.contentsObjId;fe(Ue,!0),Ce("<</Type /Page"),Ce("/Parent "+V.rootDictionaryObjId+" 0 R"),Ce("/Resources "+V.resourceDictionaryObjId+" 0 R"),Ce("/MediaBox ["+parseFloat(_(V.mediaBox.bottomLeftX))+" "+parseFloat(_(V.mediaBox.bottomLeftY))+" "+_(V.mediaBox.topRightX)+" "+_(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Ce("/CropBox ["+_(V.cropBox.bottomLeftX)+" "+_(V.cropBox.bottomLeftY)+" "+_(V.cropBox.topRightX)+" "+_(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Ce("/BleedBox ["+_(V.bleedBox.bottomLeftX)+" "+_(V.bleedBox.bottomLeftY)+" "+_(V.bleedBox.topRightX)+" "+_(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Ce("/TrimBox ["+_(V.trimBox.bottomLeftX)+" "+_(V.trimBox.bottomLeftY)+" "+_(V.trimBox.topRightX)+" "+_(V.trimBox.topRightY)+"]"),V.artBox!==null&&Ce("/ArtBox ["+_(V.artBox.bottomLeftX)+" "+_(V.artBox.bottomLeftY)+" "+_(V.artBox.topRightX)+" "+_(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Ce("/UserUnit "+V.userUnit),On.publish("putPage",{objId:Ue,pageContext:tn[ue],pageNumber:ue,page:Ie}),Ce("/Contents "+He+" 0 R"),Ce(">>"),Ce("endobj");var ot=Ie.join(`
`);return k===I.ADVANCED&&(ot+=`
Q`),fe(He,!0),tt({data:ot,filters:qe(),objectId:He}),Ce("endobj"),Ue},We=g.__private__.putPages=function(){var V,ue,Ie=[];for(V=1;V<=Dn;V++)tn[V].objId=Qr(),tn[V].contentsObjId=Qr();for(V=1;V<=Dn;V++)Ie.push(Qe({number:V,data:ge[V],objId:tn[V].objId,contentsObjId:tn[V].contentsObjId,mediaBox:tn[V].mediaBox,cropBox:tn[V].cropBox,bleedBox:tn[V].bleedBox,trimBox:tn[V].trimBox,artBox:tn[V].artBox,userUnit:tn[V].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:_e}));fe(Ee,!0),Ce("<</Type /Pages");var Ue="/Kids [";for(ue=0;ue<Dn;ue++)Ue+=Ie[ue]+" 0 R ";Ce(Ue+"]"),Ce("/Count "+Dn),Ce(">>"),Ce("endobj"),On.publish("postPutPages")},Je=function(V){On.publish("putFont",{font:V,out:Ce,newObject:kr,putStream:tt}),V.isAlreadyPutted!==!0&&(V.objectNumber=kr(),Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+L0(V.postScriptName)),Ce("/Subtype /Type1"),typeof V.encoding=="string"&&Ce("/Encoding /"+V.encoding),Ce("/FirstChar 32"),Ce("/LastChar 255"),Ce(">>"),Ce("endobj"))},yt=function(){for(var V in mn)mn.hasOwnProperty(V)&&(h===!1||h===!0&&p.hasOwnProperty(V))&&Je(mn[V])},Nt=function(V){V.objectNumber=kr();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[_(V.x),_(V.y),_(V.x+V.width),_(V.y+V.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Ie=V.pages[1].join(`
`);tt({data:Ie,additionalKeyValues:ue,objectId:V.objectNumber}),Ce("endobj")},jt=function(){for(var V in Or)Or.hasOwnProperty(V)&&Nt(Or[V])},Tt=function(V,ue){var Ie,Ue=[],He=1/(ue-1);for(Ie=0;Ie<1;Ie+=He)Ue.push(Ie);if(Ue.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var _t={offset:1,color:V[V.length-1].color};V.push(_t)}for(var Ot="",S=0,Y=0;Y<Ue.length;Y++){for(Ie=Ue[Y];Ie>V[S+1].offset;)S++;var se=V[S].offset,ye=(Ie-se)/(V[S+1].offset-se),Oe=V[S].color,Xe=V[S+1].color;Ot+=ne(Math.round((1-ye)*Oe[0]+ye*Xe[0]).toString(16))+ne(Math.round((1-ye)*Oe[1]+ye*Xe[1]).toString(16))+ne(Math.round((1-ye)*Oe[2]+ye*Xe[2]).toString(16))}return Ot.trim()},Rt=function(V,ue){ue||(ue=21);var Ie=kr(),Ue=Tt(V.colors,ue),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+ue+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Ue,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Ce("endobj"),V.objectNumber=kr(),Ce("<< /ShadingType "+V.type),Ce("/ColorSpace /DeviceRGB");var ot="/Coords ["+_(parseFloat(V.coords[0]))+" "+_(parseFloat(V.coords[1]))+" ";V.type===2?ot+=_(parseFloat(V.coords[2]))+" "+_(parseFloat(V.coords[3])):ot+=_(parseFloat(V.coords[2]))+" "+_(parseFloat(V.coords[3]))+" "+_(parseFloat(V.coords[4]))+" "+_(parseFloat(V.coords[5])),Ce(ot+="]"),V.matrix&&Ce("/Matrix ["+V.matrix.toString()+"]"),Ce("/Function "+Ie+" 0 R"),Ce("/Extend [true true]"),Ce(">>"),Ce("endobj")},un=function(V,ue){var Ie=Qr(),Ue=kr();ue.push({resourcesOid:Ie,objectOid:Ue}),V.objectNumber=Ue;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+V.boundingBox.map(_).join(" ")+"]"}),He.push({key:"XStep",value:_(V.xStep)}),He.push({key:"YStep",value:_(V.yStep)}),He.push({key:"Resources",value:Ie+" 0 R"}),V.matrix&&He.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),tt({data:V.stream,additionalKeyValues:He,objectId:V.objectNumber}),Ce("endobj")},Un=function(V){var ue;for(ue in Bn)Bn.hasOwnProperty(ue)&&(Bn[ue]instanceof zf?Rt(Bn[ue]):Bn[ue]instanceof H0&&un(Bn[ue],V))},Ln=function(V){for(var ue in V.objectNumber=kr(),Ce("<<"),V)switch(ue){case"opacity":Ce("/ca "+O(V[ue]));break;case"stroke-opacity":Ce("/CA "+O(V[ue]))}Ce(">>"),Ce("endobj")},Qn=function(){var V;for(V in Xn)Xn.hasOwnProperty(V)&&Ln(Xn[V])},_s=function(){for(var V in Ce("/XObject <<"),Or)Or.hasOwnProperty(V)&&Or[V].objectNumber>=0&&Ce("/"+V+" "+Or[V].objectNumber+" 0 R");On.publish("putXobjectDict"),Ce(">>")},oi=function(){Ir.oid=kr(),Ce("<<"),Ce("/Filter /Standard"),Ce("/V "+Ir.v),Ce("/R "+Ir.r),Ce("/U <"+Ir.toHexString(Ir.U)+">"),Ce("/O <"+Ir.toHexString(Ir.O)+">"),Ce("/P "+Ir.P),Ce(">>"),Ce("endobj")},Ss=function(){for(var V in Ce("/Font <<"),mn)mn.hasOwnProperty(V)&&(h===!1||h===!0&&p.hasOwnProperty(V))&&Ce("/"+V+" "+mn[V].objectNumber+" 0 R");Ce(">>")},sa=function(){if(Object.keys(Bn).length>0){for(var V in Ce("/Shading <<"),Bn)Bn.hasOwnProperty(V)&&Bn[V]instanceof zf&&Bn[V].objectNumber>=0&&Ce("/"+V+" "+Bn[V].objectNumber+" 0 R");On.publish("putShadingPatternDict"),Ce(">>")}},Ps=function(V){if(Object.keys(Bn).length>0){for(var ue in Ce("/Pattern <<"),Bn)Bn.hasOwnProperty(ue)&&Bn[ue]instanceof g.TilingPattern&&Bn[ue].objectNumber>=0&&Bn[ue].objectNumber<V&&Ce("/"+ue+" "+Bn[ue].objectNumber+" 0 R");On.publish("putTilingPatternDict"),Ce(">>")}},va=function(){if(Object.keys(Xn).length>0){var V;for(V in Ce("/ExtGState <<"),Xn)Xn.hasOwnProperty(V)&&Xn[V].objectNumber>=0&&Ce("/"+V+" "+Xn[V].objectNumber+" 0 R");On.publish("putGStateDict"),Ce(">>")}},Hr=function(V){fe(V.resourcesOid,!0),Ce("<<"),Ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ss(),sa(),Ps(V.objectOid),va(),_s(),Ce(">>"),Ce("endobj")},aa=function(){var V=[];yt(),Qn(),jt(),Un(V),On.publish("putResources"),V.forEach(Hr),Hr({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),On.publish("postPutResources")},Nc=function(){On.publish("putAdditionalObjects");for(var V=0;V<Se.length;V++){var ue=Se[V];fe(ue.objId,!0),Ce(ue.content),Ce("endobj")}On.publish("postPutAdditionalObjects")},UA=function(V){Fn[V.fontName]=Fn[V.fontName]||{},Fn[V.fontName][V.fontStyle]=V.id},Xo=function(V,ue,Ie,Ue,He){var ot={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:V,fontName:ue,fontStyle:Ie,encoding:Ue,isStandardFont:He||!1,metadata:{}};return On.publish("addFont",{font:ot,instance:this}),mn[ot.id]=ot,UA(ot),ot.id},Iu=function(V){for(var ue=0,Ie=it.length;ue<Ie;ue++){var Ue=Xo.call(this,V[ue][0],V[ue][1],V[ue][2],it[ue][3],!0);h===!1&&(p[Ue]=!0);var He=V[ue][0].split("-");UA({id:Ue,fontName:He[0],fontStyle:He[1]||""})}On.publish("addFonts",{fonts:mn,dictionary:Fn})},ya=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Ue){var ue=Ue.stack||"";~ue.indexOf(" at ")&&(ue=ue.split(" at ")[1]);var Ie="Error in function "+ue.split(`
`)[0].split("<")[0]+": "+Ue.message;if(!yn.console)throw new Error(Ie);yn.console.error(Ie,Ue),yn.alert&&alert(Ie)}},V.foo.bar=V,V.foo},kc=function(V,ue){var Ie,Ue,He,ot,_t,Ot,S,Y,se;if(He=(ue=ue||{}).sourceEncoding||"Unicode",_t=ue.outputEncoding,(ue.autoencode||_t)&&mn[It].metadata&&mn[It].metadata[He]&&mn[It].metadata[He].encoding&&(ot=mn[It].metadata[He].encoding,!_t&&mn[It].encoding&&(_t=mn[It].encoding),!_t&&ot.codePages&&(_t=ot.codePages[0]),typeof _t=="string"&&(_t=ot[_t]),_t)){for(S=!1,Ot=[],Ie=0,Ue=V.length;Ie<Ue;Ie++)(Y=_t[V.charCodeAt(Ie)])?Ot.push(String.fromCharCode(Y)):Ot.push(V[Ie]),Ot[Ie].charCodeAt(0)>>8&&(S=!0);V=Ot.join("")}for(Ie=V.length;S===void 0&&Ie!==0;)V.charCodeAt(Ie-1)>>8&&(S=!0),Ie--;if(!S)return V;for(Ot=ue.noBOM?[]:[254,255],Ie=0,Ue=V.length;Ie<Ue;Ie++){if((se=(Y=V.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(se),Ot.push(Y-(se<<8))}return String.fromCharCode.apply(void 0,Ot)},lr=g.__private__.pdfEscape=g.pdfEscape=function(V,ue){return kc(V,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wa=g.__private__.beginPage=function(V){ge[++Dn]=[],tn[Dn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},Ji(Dn),De(ge[W])},Zo=function(V,ue){var Ie,Ue,He;switch(n=ue||n,typeof V=="string"&&(Ie=T(V.toLowerCase()),Array.isArray(Ie)&&(Ue=Ie[0],He=Ie[1])),Array.isArray(V)&&(Ue=V[0]*xt,He=V[1]*xt),isNaN(Ue)&&(Ue=s[0],He=s[1]),(Ue>14400||He>14400)&&(Yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),He=Math.min(14400,He)),s=[Ue,He],n.substr(0,1)){case"l":He>Ue&&(s=[He,Ue]);break;case"p":Ue>He&&(s=[He,Ue])}wa(s),Uu(rl),Ce(ba),Lu!==0&&Ce(Lu+" J"),Hl!==0&&Ce(Hl+" j"),On.publish("addPage",{pageNumber:Dn})},el=function(V){V>0&&V<=Dn&&(ge.splice(V,1),tn.splice(V,1),Dn--,W>Dn&&(W=Dn),this.setPage(W))},Ji=function(V){V>0&&V<=Dn&&(W=V)},gr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ge.length-1},tl=function(V,ue,Ie){var Ue,He=void 0;return Ie=Ie||{},V=V!==void 0?V:mn[It].fontName,ue=ue!==void 0?ue:mn[It].fontStyle,Ue=V.toLowerCase(),Fn[Ue]!==void 0&&Fn[Ue][ue]!==void 0?He=Fn[Ue][ue]:Fn[V]!==void 0&&Fn[V][ue]!==void 0?He=Fn[V][ue]:Ie.disableWarning===!1&&Yr.warn("Unable to look up font label for font '"+V+"', '"+ue+"'. Refer to getFontList() for available fonts."),He||Ie.noFallback||(He=Fn.times[ue])==null&&(He=Fn.times.normal),He},li=g.__private__.putInfo=function(){var V=kr(),ue=function(Ue){return Ue};for(var Ie in d!==null&&(ue=Ir.encryptor(V,0)),Ce("<<"),Ce("/Producer ("+lr(ue("jsPDF "+an.version))+")"),Pt)Pt.hasOwnProperty(Ie)&&Pt[Ie]&&Ce("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+lr(ue(Pt[Ie]))+")");Ce("/CreationDate ("+lr(ue(oe))+")"),Ce(">>"),Ce("endobj")},Co=g.__private__.putCatalog=function(V){var ue=(V=V||{}).rootDictionaryObjId||Ee;switch(kr(),Ce("<<"),Ce("/Type /Catalog"),Ce("/Pages "+ue+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":Ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ce("/OpenAction [3 0 R /Fit]");break;case"original":Ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Ct;Ie.substr(Ie.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&Ce("/OpenAction [3 0 R /XYZ null null "+O(Ct)+"]")}switch(Mt||(Mt="continuous"),Mt){case"continuous":Ce("/PageLayout /OneColumn");break;case"single":Ce("/PageLayout /SinglePage");break;case"two":case"twoleft":Ce("/PageLayout /TwoColumnLeft");break;case"tworight":Ce("/PageLayout /TwoColumnRight")}Ft&&Ce("/PageMode /"+Ft),On.publish("putCatalog"),Ce(">>"),Ce("endobj")},LA=g.__private__.putTrailer=function(){Ce("trailer"),Ce("<<"),Ce("/Size "+(ie+1)),Ce("/Root "+ie+" 0 R"),Ce("/Info "+(ie-1)+" 0 R"),d!==null&&Ce("/Encrypt "+Ir.oid+" 0 R"),Ce("/ID [ <"+q+"> <"+q+"> ]"),Ce(">>")},Fu=g.__private__.putHeader=function(){Ce("%PDF-"+b),Ce("%ºß¬à")},Ru=g.__private__.putXRef=function(){var V="0000000000";Ce("xref"),Ce("0 "+(ie+1)),Ce("0000000000 65535 f ");for(var ue=1;ue<=ie;ue++)typeof de[ue]=="function"?Ce((V+de[ue]()).slice(-10)+" 00000 n "):de[ue]!==void 0?Ce((V+de[ue]).slice(-10)+" 00000 n "):Ce("0000000000 00000 n ")},Eo=g.__private__.buildDocument=function(){et(),De(me),On.publish("buildDocument"),Fu(),We(),Nc(),aa(),d!==null&&oi(),li(),Co();var V=xe;return Ru(),LA(),Ce("startxref"),Ce(""+V),Ce("%%EOF"),De(ge[W]),me.join(`
`)},Ic=g.__private__.getBlob=function(V){return new Blob([nt(V)],{type:"application/pdf"})},_o=g.output=g.__private__.output=ya(function(V,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",V){case void 0:return Eo();case"save":g.save(ue.filename);break;case"arraybuffer":return nt(Eo());case"blob":return Ic(Eo());case"bloburi":case"bloburl":if(yn.URL!==void 0&&typeof yn.URL.createObjectURL=="function")return yn.URL&&yn.URL.createObjectURL(Ic(Eo()))||void 0;Yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Ue=Eo();try{Ie=F_(Ue)}catch{Ie=F_(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(He=ue.pdfObjectUrl,ot="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",Ot=yn.open();return Ot!==null&&Ot.document.write(_t),Ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',Y=yn.open();if(Y!==null){Y.document.write(S);var se=this;Y.document.documentElement.querySelector("#pdfViewer").onload=function(){Y.document.title=ue.filename,Y.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return Y}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',Oe=yn.open();if(Oe!==null&&(Oe.document.write(ye),Oe.document.title=ue.filename),Oe||typeof safari>"u")return Oe;break;case"datauri":case"dataurl":return yn.document.location.href=this.output("datauristring",ue);default:return null}}),Xi=function(V){return Array.isArray(ra)===!0&&ra.indexOf(V)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Xi("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var Ir=null;Ae(),re();var So=function(V){return d!==null?Ir.encryptor(V,0):function(ue){return ue}},Zi=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tn[V].objId,pageNumber:V,pageContext:tn[V]}},dn=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in tn)if(tn[ue].objId===V)break;return Zi(ue)},eo=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:tn[W].objId,pageNumber:W,pageContext:tn[W]}};g.addPage=function(){return Zo.apply(this,arguments),this},g.setPage=function(){return Ji.apply(this,arguments),De.call(this,ge[W]),this},g.insertPage=function(V){return this.addPage(),this.movePage(W,V),this},g.movePage=function(V,ue){var Ie,Ue;if(V>ue){Ie=ge[V],Ue=tn[V];for(var He=V;He>ue;He--)ge[He]=ge[He-1],tn[He]=tn[He-1];ge[ue]=Ie,tn[ue]=Ue,this.setPage(ue)}else if(V<ue){Ie=ge[V],Ue=tn[V];for(var ot=V;ot<ue;ot++)ge[ot]=ge[ot+1],tn[ot]=tn[ot+1];ge[ue]=Ie,tn[ue]=Ue,this.setPage(ue)}return this},g.deletePage=function(){return el.apply(this,arguments),this},g.__private__.text=g.text=function(V,ue,Ie,Ue,He){var ot,_t,Ot,S,Y,se,ye,Oe,Xe,St=(Ue=Ue||{}).scope||this;if(typeof V=="number"&&typeof ue=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var fn=Ie;Ie=ue,ue=V,V=fn}if(arguments[3]instanceof Ht?(N("The transform parameter of text() with a Matrix value"),Xe=He):(Ot=arguments[4],S=arguments[5],Mr(ye=arguments[3])==="object"&&ye!==null||(typeof Ot=="string"&&(S=Ot,Ot=null),typeof ye=="string"&&(S=ye,ye=null),typeof ye=="number"&&(Ot=ye,ye=null),Ue={flags:ye,angle:Ot,align:S})),isNaN(ue)||isNaN(Ie)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return St;var Wn="",Sn=!1,xr=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:Kn,Sr=St.internal.scaleFactor;function so(Vn){return Vn=Vn.split("	").join(Array(Ue.TabLen||9).join(" ")),lr(Vn,ye)}function ps(Vn){for(var Gn,Vr=Vn.concat(),gs=[],io=Vr.length;io--;)typeof(Gn=Vr.shift())=="string"?gs.push(Gn):Array.isArray(Vn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?gs.push(Gn[0]):gs.push([Gn[0],Gn[1],Gn[2]]);return gs}function di(Vn,Gn){var Vr;if(typeof Vn=="string")Vr=Gn(Vn)[0];else if(Array.isArray(Vn)){for(var gs,io,zc=Vn.concat(),qc=[],Wl=zc.length;Wl--;)typeof(gs=zc.shift())=="string"?qc.push(Gn(gs)[0]):Array.isArray(gs)&&typeof gs[0]=="string"&&(io=Gn(gs[0],gs[1],gs[2]),qc.push([io[0],io[1],io[2]]));Vr=qc}return Vr}var cl=!1,Lc=!0;if(typeof V=="string")cl=!0;else if(Array.isArray(V)){var OA=V.concat();_t=[];for(var Mu,js=OA.length;js--;)(typeof(Mu=OA.shift())!="string"||Array.isArray(Mu)&&typeof Mu[0]!="string")&&(Lc=!1);cl=Lc}if(cl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Mc=dt/St.internal.scaleFactor,Pu=Mc*(xr-1);switch(Ue.baseline){case"bottom":Ie-=Pu;break;case"top":Ie+=Mc-Pu;break;case"hanging":Ie+=Mc-2*Pu;break;case"middle":Ie+=Mc/2-Pu}if((se=Ue.maxWidth||0)>0&&(typeof V=="string"?V=St.splitTextToSize(V,se):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Vn,Gn){return Vn.concat(St.splitTextToSize(Gn,se))},[]))),ot={text:V,x:ue,y:Ie,options:Ue,mutex:{pdfEscape:lr,activeFontKey:It,fonts:mn,activeFontSize:dt}},On.publish("preProcessText",ot),V=ot.text,Ot=(Ue=ot.options).angle,!(Xe instanceof Ht)&&Ot&&typeof Ot=="number"){Ot*=Math.PI/180,Ue.rotationDirection===0&&(Ot=-Ot),k===I.ADVANCED&&(Ot=-Ot);var ju=Math.cos(Ot),QA=Math.sin(Ot);Xe=new Ht(ju,QA,-QA,ju,0,0)}else Ot&&Ot instanceof Ht&&(Xe=Ot);k!==I.ADVANCED||Xe||(Xe=Zn),(Y=Ue.charSpace||Ql)!==void 0&&(Wn+=_(L(Y))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oe=Ue.horizontalScale)!==void 0&&(Wn+=_(100*Oe)+` Tz
`),Ue.lang;var fi=-1,Km=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,gf=St.internal.getCurrentPageInfo().pageContext;switch(Km){case 0:case!1:case"fill":fi=0;break;case 1:case!0:case"stroke":fi=1;break;case 2:case"fillThenStroke":fi=2;break;case 3:case"invisible":fi=3;break;case 4:case"fillAndAddForClipping":fi=4;break;case 5:case"strokeAndAddPathForClipping":fi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fi=6;break;case 7:case"addToPathForClipping":fi=7}var Mh=gf.usedRenderingMode!==void 0?gf.usedRenderingMode:-1;fi!==-1?Wn+=fi+` Tr
`:Mh!==-1&&(Wn+=`0 Tr
`),fi!==-1&&(gf.usedRenderingMode=fi),S=Ue.align||"left";var ao,ia=dt*xr,Pc=St.internal.pageSize.getWidth(),xf=mn[It];Y=Ue.charSpace||Ql,se=Ue.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var ql=[],jc=function(Vn){return St.getStringUnitWidth(Vn,{font:xf,charSpace:Y,fontSize:dt,doKerning:!1})*dt/Sr};if(Object.prototype.toString.call(V)==="[object Array]"){var Ka;_t=ps(V),S!=="left"&&(ao=_t.map(jc));var Ca,Oc=0;if(S==="right"){ue-=ao[0],V=[],js=_t.length;for(var hi=0;hi<js;hi++)hi===0?(Ca=Fa(ue),Ka=Bs(Ie)):(Ca=L(Oc-ao[hi]),Ka=-ia),V.push([_t[hi],Ca,Ka]),Oc=ao[hi]}else if(S==="center"){ue-=ao[0]/2,V=[],js=_t.length;for(var ko=0;ko<js;ko++)ko===0?(Ca=Fa(ue),Ka=Bs(Ie)):(Ca=L((Oc-ao[ko])/2),Ka=-ia),V.push([_t[ko],Ca,Ka]),Oc=ao[ko]}else if(S==="left"){V=[],js=_t.length;for(var ul=0;ul<js;ul++)V.push(_t[ul])}else if(S==="justify"&&xf.encoding==="Identity-H"){V=[],js=_t.length,se=se!==0?se:Pc;for(var Io=0,us=0;us<js;us++)if(Ka=us===0?Bs(Ie):-ia,Ca=us===0?Fa(ue):Io,us<js-1){var Fo=L((se-ao[us])/(_t[us].split(" ").length-1)),Ns=_t[us].split(" ");V.push([Ns[0]+" ",Ca,Ka]),Io=0;for(var mi=1;mi<Ns.length;mi++){var Ou=(jc(Ns[mi-1]+" "+Ns[mi])-jc(Ns[mi]))*Sr+Fo;mi==Ns.length-1?V.push([Ns[mi],Ou,0]):V.push([Ns[mi]+" ",Ou,0]),Io-=Ou}}else V.push([_t[us],Ca,Ka]);V.push(["",Io,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],js=_t.length,se=se!==0?se:Pc,us=0;us<js;us++)Ka=us===0?Bs(Ie):-ia,Ca=us===0?Fa(ue):0,us<js-1?ql.push(_(L((se-ao[us])/(_t[us].split(" ").length-1)))):ql.push(0),V.push([_t[us],Ca,Ka])}}var Al=typeof Ue.R2L=="boolean"?Ue.R2L:kt;Al===!0&&(V=di(V,function(Vn,Gn,Vr){return[Vn.split("").reverse().join(""),Gn,Vr]})),ot={text:V,x:ue,y:Ie,options:Ue,mutex:{pdfEscape:lr,activeFontKey:It,fonts:mn,activeFontSize:dt}},On.publish("postProcessText",ot),V=ot.text,Sn=ot.mutex.isHex||!1;var HA=mn[It].encoding;HA!=="WinAnsiEncoding"&&HA!=="StandardEncoding"||(V=di(V,function(Vn,Gn,Vr){return[so(Vn),Gn,Vr]})),_t=ps(V),V=[];for(var Qc,Hc,Vc,Qu=0,VA=1,Gc=Array.isArray(_t[0])?VA:Qu,Kl="",Hu=function(Vn,Gn,Vr){var gs="";return Vr instanceof Ht?(Vr=typeof Ue.angle=="number"?or(Vr,new Ht(1,0,0,1,Vn,Gn)):or(new Ht(1,0,0,1,Vn,Gn),Vr),k===I.ADVANCED&&(Vr=or(new Ht(1,0,0,-1,0,0),Vr)),gs=Vr.join(" ")+` Tm
`):gs=_(Vn)+" "+_(Gn)+` Td
`,gs},As=0;As<_t.length;As++){switch(Kl="",Gc){case VA:Vc=(Sn?"<":"(")+_t[As][0]+(Sn?">":")"),Qc=parseFloat(_t[As][1]),Hc=parseFloat(_t[As][2]);break;case Qu:Vc=(Sn?"<":"(")+_t[As]+(Sn?">":")"),Qc=Fa(ue),Hc=Bs(Ie)}ql!==void 0&&ql[As]!==void 0&&(Kl=ql[As]+` Tw
`),As===0?V.push(Kl+Hu(Qc,Hc,Xe)+Vc):Gc===Qu?V.push(Kl+Vc):Gc===VA&&V.push(Kl+Hu(Qc,Hc,Xe)+Vc)}V=Gc===Qu?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Qi=`BT
/`;return Qi+=It+" "+dt+` Tf
`,Qi+=_(dt*xr)+` TL
`,Qi+=Bo+`
`,Qi+=Wn,Qi+=V,Ce(Qi+="ET"),p[It]=!0,St};var MA=g.__private__.clip=g.clip=function(V){return Ce(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return MA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ce("n"),this};var ka=g.__private__.isValidStyle=function(V){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ue=!0),ue};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return ka(V)&&(u=V),this};var ci=g.__private__.getStyle=g.getStyle=function(V){var ue=u;switch(V){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=V}return ue},qa=g.close=function(){return Ce("h"),this};g.stroke=function(){return Ce("S"),this},g.fill=function(V){return to("f",V),this},g.fillEvenOdd=function(V){return to("f*",V),this},g.fillStroke=function(V){return to("B",V),this},g.fillStrokeEvenOdd=function(V){return to("B*",V),this};var to=function(V,ue){Mr(ue)==="object"?To(ue,V):Ce(V)},ui=function(V){V===null||k===I.ADVANCED&&V===void 0||(V=ci(V),Ce(V))};function nl(V,ue,Ie,Ue,He){var ot=new H0(ue||this.boundingBox,Ie||this.xStep,Ue||this.yStep,this.gState,He||this.matrix);ot.stream=this.stream;var _t=V+"$$"+this.cloneIndex+++"$$";return _r(_t,ot),ot}var To=function(V,ue){var Ie=na[V.key],Ue=Bn[Ie];if(Ue instanceof zf)Ce("q"),Ce(Du(ue)),Ue.gState&&g.setGState(Ue.gState),Ce(V.matrix.toString()+" cm"),Ce("/"+Ie+" sh"),Ce("Q");else if(Ue instanceof H0){var He=new Ht(1,0,0,-1,0,Ra());V.matrix&&(He=He.multiply(V.matrix||Zn),Ie=nl.call(Ue,V.key,V.boundingBox,V.xStep,V.yStep,He).id),Ce("q"),Ce("/Pattern cs"),Ce("/"+Ie+" scn"),Ue.gState&&g.setGState(Ue.gState),Ce(ue),Ce("Q")}},Du=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ai=g.moveTo=function(V,ue){return Ce(_(L(V))+" "+_(G(ue))+" m"),this},Ia=g.lineTo=function(V,ue){return Ce(_(L(V))+" "+_(G(ue))+" l"),this},no=g.curveTo=function(V,ue,Ie,Ue,He,ot){return Ce([_(L(V)),_(G(ue)),_(L(Ie)),_(G(Ue)),_(L(He)),_(G(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,ue,Ie,Ue,He){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||isNaN(Ue)||!ka(He))throw new Error("Invalid arguments passed to jsPDF.line");return k===I.COMPAT?this.lines([[Ie-V,Ue-ue]],V,ue,[1,1],He||"S"):this.lines([[Ie-V,Ue-ue]],V,ue,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,ue,Ie,Ue,He,ot){var _t,Ot,S,Y,se,ye,Oe,Xe,St,fn,Wn,Sn;if(typeof V=="number"&&(Sn=Ie,Ie=ue,ue=V,V=Sn),Ue=Ue||[1,1],ot=ot||!1,isNaN(ue)||isNaN(Ie)||!Array.isArray(V)||!Array.isArray(Ue)||!ka(He)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ai(ue,Ie),_t=Ue[0],Ot=Ue[1],Y=V.length,fn=ue,Wn=Ie,S=0;S<Y;S++)(se=V[S]).length===2?(fn=se[0]*_t+fn,Wn=se[1]*Ot+Wn,Ia(fn,Wn)):(ye=se[0]*_t+fn,Oe=se[1]*Ot+Wn,Xe=se[2]*_t+fn,St=se[3]*Ot+Wn,fn=se[4]*_t+fn,Wn=se[5]*Ot+Wn,no(ye,Oe,Xe,St,fn,Wn));return ot&&qa(),ui(He),this},g.path=function(V){for(var ue=0;ue<V.length;ue++){var Ie=V[ue],Ue=Ie.c;switch(Ie.op){case"m":Ai(Ue[0],Ue[1]);break;case"l":Ia(Ue[0],Ue[1]);break;case"c":no.apply(this,Ue);break;case"h":qa()}}return this},g.__private__.rect=g.rect=function(V,ue,Ie,Ue,He){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||isNaN(Ue)||!ka(He))throw new Error("Invalid arguments passed to jsPDF.rect");return k===I.COMPAT&&(Ue=-Ue),Ce([_(L(V)),_(G(ue)),_(L(Ie)),_(L(Ue)),"re"].join(" ")),ui(He),this},g.__private__.triangle=g.triangle=function(V,ue,Ie,Ue,He,ot,_t){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||isNaN(Ue)||isNaN(He)||isNaN(ot)||!ka(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-V,Ue-ue],[He-Ie,ot-Ue],[V-He,ue-ot]],V,ue,[1,1],_t,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,ue,Ie,Ue,He,ot,_t){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||isNaN(Ue)||isNaN(He)||isNaN(ot)||!ka(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ot=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ie),ot=Math.min(ot,.5*Ue),this.lines([[Ie-2*He,0],[He*Ot,0,He,ot-ot*Ot,He,ot],[0,Ue-2*ot],[0,ot*Ot,-He*Ot,ot,-He,ot],[2*He-Ie,0],[-He*Ot,0,-He,-ot*Ot,-He,-ot],[0,2*ot-Ue],[0,-ot*Ot,He*Ot,-ot,He,-ot]],V+He,ue,[1,1],_t,!0),this},g.__private__.ellipse=g.ellipse=function(V,ue,Ie,Ue,He){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||isNaN(Ue)||!ka(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Ie,_t=4/3*(Math.SQRT2-1)*Ue;return Ai(V+Ie,ue),no(V+Ie,ue-_t,V+ot,ue-Ue,V,ue-Ue),no(V-ot,ue-Ue,V-Ie,ue-_t,V-Ie,ue),no(V-Ie,ue+_t,V-ot,ue+Ue,V,ue+Ue),no(V+ot,ue+Ue,V+Ie,ue+_t,V+Ie,ue),ui(He),this},g.__private__.circle=g.circle=function(V,ue,Ie,Ue){if(isNaN(V)||isNaN(ue)||isNaN(Ie)||!ka(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ue,Ie,Ie,Ue)},g.setFont=function(V,ue,Ie){return Ie&&(ue=P(ue,Ie)),It=tl(V,ue,{disableWarning:!1}),this};var Ts=g.__private__.getFont=g.getFont=function(){return mn[tl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,ue,Ie={};for(V in Fn)if(Fn.hasOwnProperty(V))for(ue in Ie[V]=[],Fn[V])Fn[V].hasOwnProperty(ue)&&Ie[V].push(ue);return Ie},g.addFont=function(V,ue,Ie,Ue,He){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Ie=P(Ie,Ue)),He=He||"Identity-H",Xo.call(this,V,ue,Ie,He)};var Kn,rl=t.lineWidth||.200025,ro=g.__private__.getLineWidth=g.getLineWidth=function(){return rl},Uu=g.__private__.setLineWidth=g.setLineWidth=function(V){return rl=V,Ce(_(L(V))+" w"),this};g.__private__.setLineDash=an.API.setLineDash=an.API.setLineDashPattern=function(V,ue){if(V=V||[],ue=ue||0,isNaN(ue)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Ie){return _(L(Ie))}).join(" "),ue=_(L(ue)),Ce("["+V+"] "+ue+" d"),this};var jl=g.__private__.getLineHeight=g.getLineHeight=function(){return dt*Kn};g.__private__.getLineHeight=g.getLineHeight=function(){return dt*Kn};var Ol=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Kn=V),this},Oi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Kn};Ol(t.lineHeight);var Fa=g.__private__.getHorizontalCoordinate=function(V){return L(V)},Bs=g.__private__.getVerticalCoordinate=function(V){return k===I.ADVANCED?V:tn[W].mediaBox.topRightY-tn[W].mediaBox.bottomLeftY-L(V)},PA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return _(Fa(V))},sl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return _(Bs(V))},ba=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Te(ba)},g.__private__.setStrokeColor=g.setDrawColor=function(V,ue,Ie,Ue){return ba=ke({ch1:V,ch2:ue,ch3:Ie,ch4:Ue,pdfColorType:"draw",precision:2}),Ce(ba),this};var al=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Te(al)},g.__private__.setFillColor=g.setFillColor=function(V,ue,Ie,Ue){return al=ke({ch1:V,ch2:ue,ch3:Ie,ch4:Ue,pdfColorType:"fill",precision:2}),Ce(al),this};var Bo=t.textColor||"0 g",Fc=g.__private__.getTextColor=g.getTextColor=function(){return Te(Bo)};g.__private__.setTextColor=g.setTextColor=function(V,ue,Ie,Ue){return Bo=ke({ch1:V,ch2:ue,ch3:Ie,ch4:Ue,pdfColorType:"text",precision:3}),this};var Ql=t.charSpace,Rc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ql||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ql=V,this};var Lu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var ue=g.CapJoinStyles[V];if(ue===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lu=ue,Ce(ue+" J"),this};var Hl=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var ue=g.CapJoinStyles[V];if(ue===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hl=ue,Ce(ue+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ce(_(L(V))+" M"),this},g.GState=K2,g.setGState=function(V){(V=typeof V=="string"?Xn[Wr[V]]:il(null,V)).equals(cs)||(Ce("/"+V.id+" gs"),cs=V)};var il=function(V,ue){if(!V||!Wr[V]){var Ie=!1;for(var Ue in Xn)if(Xn.hasOwnProperty(Ue)&&Xn[Ue].equals(ue)){Ie=!0;break}if(Ie)ue=Xn[Ue];else{var He="GS"+(Object.keys(Xn).length+1).toString(10);Xn[He]=ue,ue.id=He}return V&&(Wr[V]=ue.id),On.publish("addGState",ue),ue}};g.addGState=function(V,ue){return il(V,ue),this},g.saveGraphicsState=function(){return Ce("q"),Er.push({key:It,size:dt,color:Bo}),this},g.restoreGraphicsState=function(){Ce("Q");var V=Er.pop();return It=V.key,dt=V.size,Bo=V.color,cs=null,this},g.setCurrentTransformationMatrix=function(V){return Ce(V.toString()+" cm"),this},g.comment=function(V){return Ce("#"+V),this};var Vl=function(V,ue){var Ie=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ot){isNaN(ot)||(Ie=parseFloat(ot))}});var Ue=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(ot){isNaN(ot)||(Ue=parseFloat(ot))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(ot){He=ot.toString()}}),this},Dc=function(V,ue,Ie,Ue){Vl.call(this,V,ue),this.type="rect";var He=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(_t){isNaN(_t)||(He=parseFloat(_t))}});var ot=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(_t){isNaN(_t)||(ot=parseFloat(_t))}}),this},Gl=function(){this.page=Dn,this.currentPage=W,this.pages=ge.slice(0),this.pagesContext=tn.slice(0),this.x=xn,this.y=$t,this.matrix=ir,this.width=ll(W),this.height=Ra(W),this.outputDestination=Fe,this.id="",this.objectNumber=-1};Gl.prototype.restore=function(){Dn=this.page,W=this.currentPage,tn=this.pagesContext,ge=this.pages,xn=this.x,$t=this.y,ir=this.matrix,zl(W,this.width),Uc(W,this.height),Fe=this.outputDestination};var ol=function(V,ue,Ie,Ue,He){xa.push(new Gl),Dn=W=0,ge=[],xn=V,$t=ue,ir=He,wa([Ie,Ue])},jA=function(V){if(ms[V])xa.pop().restore();else{var ue=new Gl,Ie="Xo"+(Object.keys(Or).length+1).toString(10);ue.id=Ie,ms[V]=Ie,Or[Ie]=ue,On.publish("addFormObject",ue),xa.pop().restore()}};for(var No in g.beginFormObject=function(V,ue,Ie,Ue,He){return ol(V,ue,Ie,Ue,He),this},g.endFormObject=function(V){return jA(V),this},g.doFormObject=function(V,ue){var Ie=Or[ms[V]];return Ce("q"),Ce(ue.toString()+" cm"),Ce("/"+Ie.id+" Do"),Ce("Q"),this},g.getFormObject=function(V){var ue=Or[ms[V]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},g.save=function(V,ue){return V=V||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(Hf(Ic(Eo()),V),typeof Hf.unload=="function"&&yn.setTimeout&&setTimeout(Hf.unload,911),this):new Promise(function(Ie,Ue){try{var He=Hf(Ic(Eo()),V);typeof Hf.unload=="function"&&yn.setTimeout&&setTimeout(Hf.unload,911),Ie(He)}catch(ot){Ue(ot.message)}})},an.API)an.API.hasOwnProperty(No)&&(No==="events"&&an.API.events.length?function(V,ue){var Ie,Ue,He;for(He=ue.length-1;He!==-1;He--)Ie=ue[He][0],Ue=ue[He][1],V.subscribe.apply(V,[Ie].concat(typeof Ue=="function"?[Ue]:Ue))}(On,an.API.events):g[No]=an.API[No]);var ll=g.getPageWidth=function(V){return(tn[V=V||W].mediaBox.topRightX-tn[V].mediaBox.bottomLeftX)/xt},zl=g.setPageWidth=function(V,ue){tn[V].mediaBox.topRightX=ue*xt+tn[V].mediaBox.bottomLeftX},Ra=g.getPageHeight=function(V){return(tn[V=V||W].mediaBox.topRightY-tn[V].mediaBox.bottomLeftY)/xt},Uc=g.setPageHeight=function(V,ue){tn[V].mediaBox.topRightY=ue*xt+tn[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:lr,getStyle:ci,getFont:Ts,getFontSize:ut,getCharSpace:Rc,getTextColor:Fc,getLineHeight:jl,getLineHeightFactor:Oi,getLineWidth:ro,write:Ge,getHorizontalCoordinate:Fa,getVerticalCoordinate:Bs,getCoordinateString:PA,getVerticalCoordinateString:sl,collections:{},newObject:kr,newAdditionalObject:Ne,newObjectDeferred:Qr,newObjectDeferredBegin:fe,getFilters:qe,putStream:tt,events:On,scaleFactor:xt,pageSize:{getWidth:function(){return ll(W)},setWidth:function(V){zl(W,V)},getHeight:function(){return Ra(W)},setHeight:function(V){Uc(W,V)}},encryptionOptions:d,encryption:Ir,getEncryptor:So,output:_o,getNumberOfPages:gr,pages:ge,out:Ce,f2:O,f3:M,getPageInfo:Zi,getPageInfoByObjId:dn,getCurrentPageInfo:eo,getPDFVersion:w,Point:Vl,Rectangle:Dc,Matrix:Ht,hasHotfix:Xi},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ll(W)},set:function(V){zl(W,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ra(W)},set:function(V){Uc(W,V)},enumerable:!0,configurable:!0}),Iu.call(g,it),It="F1",Zo(s,n),On.publish("initialized"),g}U0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},U0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},U0.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},U0.prototype.processOwnerPassword=function(t,e){return D_(R_(e).substr(0,5),t)},U0.prototype.encryptor=function(t,e){var n=R_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return D_(n,r)}},K2.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Mr(t)!==Mr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},an.API={events:[]},an.version="2.5.2";var Rs=an.API,O5=1,kh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},d0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kn=function(t){return t.toFixed(2)},gd=function(t){return t.toFixed(5)};Rs.__acroform__={};var bo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},SI=function(t){return t*O5},lu=function(t){var e=new X8,n=Zt.internal.getHeight(t)||0,r=Zt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(kn(r)),Number(kn(n))],e},pae=Rs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},gae=Rs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},xae=Rs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},$s=Rs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xae(t,e-1)},Ys=Rs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pae(t,e-1)},Js=Rs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return gae(t,e-1)},vae=Rs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(kn(l.lowerLeft_X)),Number(kn(l.lowerLeft_Y)),Number(kn(l.upperRight_X)),Number(kn(l.upperRight_Y))]},yae=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=U_(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+kn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=lu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},U_=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(M){return M.split(`
`)}):s.map(function(M){return[M]});var a=n,i=Zt.internal.getHeight(t)||0;i=i<0?-i:i;var o=Zt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(M,L,H){if(M+1<s.length){var G=L+" "+s[M+1][0];return rv(G,t,H).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,h=rv("3",t,a).height,p=t.multiline?i-a:(i-h)/2,g=p+=2,b=0,w=0,C=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+rv(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var T="",I=0,k=0;k<s.length;k++)if(s.hasOwnProperty(k)){var R=!1;if(s[k].length!==1&&C!==s[k].length-1){if((h+2)*(I+2)+2>i)continue e;T+=s[k][C],R=!0,w=k,k--}else{T=(T+=s[k][C]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var D=parseInt(k),P=l(D,T,a),_=k>=s.length-1;if(P&&!_){T+=" ",C=0;continue}if(P||_){if(_)w=D;else if(t.multiline&&(h+2)*(I+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(I+2)+2>i)continue e;w=D}}for(var N="",B=b;B<=w;B++){var O=s[B];if(t.multiline){if(B===w){N+=O[C]+" ",C=(C+1)%O.length;continue}if(B===b){N+=O[O.length-1]+" ";continue}}N+=O[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=rv(N,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=kn(u)+" "+kn(g)+` Td
`,e+="("+kh(N)+`) Tj
`,e+=-kn(u)+` 0 Td
`,g=-(a+2),d=0,b=R?w:w+1,I++,T=""}break}return r.text=e,r.fontSize=a,r},rv=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},wae={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bae=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Cae=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Mr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},Eae=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(_c.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(wae)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");O5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Z8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&bae(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var i in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=vae(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Zt.createDefaultAppearanceStream(o),Mr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=yae(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&Cae(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},J8=Rs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),Mr(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+kh(r(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kC=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+kh(r(t))+")"},fu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fu.prototype.toString=function(){return this.objId+" 0 R"},fu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},fu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:J8(s,this.objId,this.scope)}):s instanceof fu?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var X8=function(){fu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};bo(X8,fu);var Z8=function(){fu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+kh(n(t))+")"}},set:function(n){t=n}})};bo(Z8,fu);var _c=function t(){fu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$s(e,3)},set:function(T){T?this.F=Ys(e,3):this.F=Js(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');n=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof W2)return;a="FieldObject"+t.FieldNum++}var T=function(I){return I};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+kh(T(a))+")"},set:function(T){a=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(T){a=T}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(T){i=T}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/O5:u},set:function(T){u=T}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof W2||this instanceof th))return kC(h,this.objId,this.scope)},set:function(T){T=T.toString(),h=T}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Qa?p:kC(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=this instanceof Qa?T:T.substr(0,1)==="("?d0(T.substr(1,T.length-2)):d0(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?d0(p.substr(1,p.length-1)):p},set:function(T){T=T.toString(),p=this instanceof Qa?"/"+T:T}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Qa?g:kC(g,this.objId,this.scope)},set:function(T){T=T.toString(),g=this instanceof Qa?T:T.substr(0,1)==="("?d0(T.substr(1,T.length-2)):d0(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?d0(g.substr(1,g.length-1)):g},set:function(T){T=T.toString(),g=this instanceof Qa?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(T){T=!!T,w=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(T){b=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,1)},set:function(T){T?this.Ff=Ys(this.Ff,1):this.Ff=Js(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,2)},set:function(T){T?this.Ff=Ys(this.Ff,2):this.Ff=Js(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,3)},set:function(T){T?this.Ff=Ys(this.Ff,3):this.Ff=Js(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');C=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(C){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};bo(_c,fu);var em=function(){_c.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return J8(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,18)},set:function(n){n?this.Ff=Ys(this.Ff,18):this.Ff=Js(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ys(this.Ff,19):this.Ff=Js(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,20)},set:function(n){n?(this.Ff=Ys(this.Ff,20),e.sort()):this.Ff=Js(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,22)},set:function(n){n?this.Ff=Ys(this.Ff,22):this.Ff=Js(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(n){n?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,27)},set:function(n){n?this.Ff=Ys(this.Ff,27):this.Ff=Js(this.Ff,27)}}),this.hasAppearanceStream=!1};bo(em,_c);var tm=function(){em.call(this),this.fontName="helvetica",this.combo=!1};bo(tm,em);var nm=function(){tm.call(this),this.combo=!0};bo(nm,tm);var c2=function(){nm.call(this),this.edit=!0};bo(c2,nm);var Qa=function(){_c.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,15)},set:function(n){n?this.Ff=Ys(this.Ff,15):this.Ff=Js(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,16)},set:function(n){n?this.Ff=Ys(this.Ff,16):this.Ff=Js(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,17)},set:function(n){n?this.Ff=Ys(this.Ff,17):this.Ff=Js(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(n){n?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+kh(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Mr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};bo(Qa,_c);var u2=function(){Qa.call(this),this.pushButton=!0};bo(u2,Qa);var rm=function(){Qa.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};bo(rm,Qa);var W2=function(){var t,e;_c.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),r)i.push("/"+a+" ("+kh(s(r[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){Mr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bo(W2,_c),rm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},rm.prototype.createOption=function(t){var e=new W2;return e.Parent=this,e.optionName=t,this.Kids.push(e),_ae.call(this.scope,e),e};var A2=function(){Qa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zt.CheckBox.createAppearanceStream()};bo(A2,Qa);var th=function(){_c.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,13)},set:function(e){e?this.Ff=Ys(this.Ff,13):this.Ff=Js(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,21)},set:function(e){e?this.Ff=Ys(this.Ff,21):this.Ff=Js(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(e){e?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,24)},set:function(e){e?this.Ff=Ys(this.Ff,24):this.Ff=Js(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,25)},set:function(e){e?this.Ff=Ys(this.Ff,25):this.Ff=Js(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(e){e?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bo(th,_c);var d2=function(){th.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,14)},set:function(t){t?this.Ff=Ys(this.Ff,14):this.Ff=Js(this.Ff,14)}}),this.password=!0};bo(d2,th);var Zt={CheckBox:{createAppearanceStream:function(){return{N:{On:Zt.CheckBox.YesNormal},D:{On:Zt.CheckBox.YesPushDown,Off:Zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=U_(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+kn(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=lu(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],a=Zt.internal.getHeight(t),i=Zt.internal.getWidth(t),o=U_(t,t.caption);return s.push("1 g"),s.push("0 0 "+kn(i)+" "+kn(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+kn(i-1)+" "+kn(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+kn(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Circle.YesNormal,e.D[t]=Zt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Zt.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+gd(Zt.internal.getWidth(t)/2)+" "+gd(Zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Zt.internal.Bezier_C).toFixed(5)),i=Number((r*Zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gd(Zt.internal.getWidth(t)/2)+" "+gd(Zt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+gd(Zt.internal.getWidth(t)/2)+" "+gd(Zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gd(Zt.internal.getWidth(t)/2)+" "+gd(Zt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Cross.YesNormal,e.D[t]=Zt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lu(t);e.scope=t.scope;var n=[],r=Zt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+kn(Zt.internal.getWidth(t)-2)+" "+kn(Zt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(kn(r.x1.x)+" "+kn(r.x1.y)+" m"),n.push(kn(r.x2.x)+" "+kn(r.x2.y)+" l"),n.push(kn(r.x4.x)+" "+kn(r.x4.y)+" m"),n.push(kn(r.x3.x)+" "+kn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=Zt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+kn(Zt.internal.getWidth(t)-2)+" "+kn(Zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(kn(n.x1.x)+" "+kn(n.x1.y)+" m"),r.push(kn(n.x2.x)+" "+kn(n.x2.y)+" l"),r.push(kn(n.x4.x)+" "+kn(n.x4.y)+" m"),r.push(kn(n.x3.x)+" "+kn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Zt.internal.getWidth(t),n=Zt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Zt.internal.getWidth=function(t){var e=0;return Mr(t)==="object"&&(e=SI(t.Rect[2])),e},Zt.internal.getHeight=function(t){var e=0;return Mr(t)==="object"&&(e=SI(t.Rect[3])),e};var _ae=Rs.addField=function(t){if(Eae(this,t),!(t instanceof _c))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Rs.AcroFormChoiceField=em,Rs.AcroFormListBox=tm,Rs.AcroFormComboBox=nm,Rs.AcroFormEditBox=c2,Rs.AcroFormButton=Qa,Rs.AcroFormPushButton=u2,Rs.AcroFormRadioButton=rm,Rs.AcroFormCheckBox=A2,Rs.AcroFormTextField=th,Rs.AcroFormPasswordField=d2,Rs.AcroFormAppearance=Zt,Rs.AcroForm={ChoiceField:em,ListBox:tm,ComboBox:nm,EditBox:c2,Button:Qa,PushButton:u2,RadioButton:rm,CheckBox:A2,TextField:th,PasswordField:d2,Appearance:Zt},an.AcroForm={ChoiceField:em,ListBox:tm,ComboBox:nm,EditBox:c2,Button:Qa,PushButton:u2,RadioButton:rm,CheckBox:A2,TextField:th,PasswordField:d2,Appearance:Zt};an.AcroForm;function eM(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(M,L){var H,G,oe,q,X,re=e;if((L=L||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(P(M))for(X in n)for(oe=n[X],H=0;H<oe.length;H+=1){for(q=!0,G=0;G<oe[H].length;G+=1)if(oe[H][G]!==void 0&&oe[H][G]!==M[G]){q=!1;break}if(q===!0){re=X;break}}else for(X in n)for(oe=n[X],H=0;H<oe.length;H+=1){for(q=!0,G=0;G<oe[H].length;G+=1)if(oe[H][G]!==void 0&&oe[H][G]!==M.charCodeAt(G)){q=!1;break}if(q===!0){re=X;break}}return re===e&&L!==e&&(re=L),re},s=function M(L){for(var H=this.internal.write,G=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:L.width}),q.push({key:"Height",value:L.height}),L.colorSpace===C.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===C.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var X="",re=0,K=L.transparency.length;re<K;re++)X+=L.transparency[re]+" "+L.transparency[re]+" ";q.push({key:"Mask",value:"["+X+"]"})}L.sMask!==void 0&&q.push({key:"SMask",value:L.objectId+1+" 0 R"});var Z=L.filter!==void 0?["/"+L.filter]:void 0;if(G({data:L.data,additionalKeyValues:q,alreadyAppliedFilters:Z,objectId:L.objectId}),H("endobj"),"sMask"in L&&L.sMask!==void 0){var Ae="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,j={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:Ae,data:L.sMask};"filter"in L&&(j.filter=L.filter),M.call(this,j)}if(L.colorSpace===C.INDEXED){var W=this.internal.newObject();G({data:N(new Uint8Array(L.palette)),objectId:W}),H("endobj")}},a=function(){var M=this.internal.collections.addImage_images;for(var L in M)s.call(this,M[L])},i=function(){var M,L=this.internal.collections.addImage_images,H=this.internal.write;for(var G in L)H("/I"+(M=L[G]).index,M.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var M=this.internal.collections.addImage_images;return o.call(this),M},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(M){return typeof t["process"+M.toUpperCase()]=="function"},h=function(M){return Mr(M)==="object"&&M.nodeType===1},p=function(M,L){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var H=""+M.getAttribute("src");if(H.indexOf("data:image/")===0)return wg(unescape(H).split("base64,").pop());var G=t.loadFile(H,!0);if(G!==void 0)return G}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var oe;switch(L){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return wg(M.toDataURL(oe,1).split("base64,").pop())}},g=function(M){var L=this.internal.collections.addImage_images;if(L){for(var H in L)if(M===L[H].alias)return L[H]}},b=function(M,L,H){return M||L||(M=-96,L=-96),M<0&&(M=-1*H.width*72/M/this.internal.scaleFactor),L<0&&(L=-1*H.height*72/L/this.internal.scaleFactor),M===0&&(M=L*H.width/H.height),L===0&&(L=M*H.height/H.width),[M,L]},w=function(M,L,H,G,oe,q){var X=b.call(this,H,G,oe),re=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,Z=l.call(this);if(H=X[0],G=X[1],Z[oe.index]=oe,q){q*=Math.PI/180;var Ae=Math.cos(q),j=Math.sin(q),W=function(ne){return ne.toFixed(4)},J=[W(Ae),W(j),W(-1*j),W(Ae),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,re(M),K(L+G),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([re(H),"0","0",re(G),"0","0","cm"].join(" "))):this.internal.write([re(H),"0","0",re(G),re(M),K(L+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(M){var L,H,G=0;if(typeof M=="string")for(H=M.length,L=0;L<H;L++)G=(G<<5)-G+M.charCodeAt(L),G|=0;else if(P(M))for(H=M.byteLength/2,L=0;L<H;L++)G=(G<<5)-G+M[L],G|=0;return G},k=t.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var L=!0;return M.length===0&&(L=!1),M.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(L=!1),L},R=t.__addimage__.extractImageFromDataUrl=function(M){var L=(M=M||"").split("base64,"),H=null;if(L.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(G)&&(H={mimeType:G[1],charset:G[2],data:L[1]})}return H},D=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(M){return D()&&M instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(M){return D()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},_=t.__addimage__.binaryStringToUint8Array=function(M){for(var L=M.length,H=new Uint8Array(L),G=0;G<L;G++)H[G]=M.charCodeAt(G);return H},N=t.__addimage__.arrayBufferToBinaryString=function(M){for(var L="",H=P(M)?M:new Uint8Array(M),G=0;G<H.length;G+=8192)L+=String.fromCharCode.apply(null,H.subarray(G,G+8192));return L};t.addImage=function(){var M,L,H,G,oe,q,X,re,K;if(typeof arguments[1]=="number"?(L=e,H=arguments[1],G=arguments[2],oe=arguments[3],q=arguments[4],X=arguments[5],re=arguments[6],K=arguments[7]):(L=arguments[1],H=arguments[2],G=arguments[3],oe=arguments[4],q=arguments[5],X=arguments[6],re=arguments[7],K=arguments[8]),Mr(M=arguments[0])==="object"&&!h(M)&&"imageData"in M){var Z=M;M=Z.imageData,L=Z.format||L||e,H=Z.x||H||0,G=Z.y||G||0,oe=Z.w||Z.width||oe,q=Z.h||Z.height||q,X=Z.alias||X,re=Z.compression||re,K=Z.rotation||Z.angle||K}var Ae=this.internal.getFilters();if(re===void 0&&Ae.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(H)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=B.call(this,M,L,X,re);return w.call(this,H,G,oe,q,j,K),this};var B=function(M,L,H,G){var oe,q,X;if(typeof M=="string"&&r(M)===e){M=unescape(M);var re=O(M,!1);(re!==""||(re=t.loadFile(M,!0))!==void 0)&&(M=re)}if(h(M)&&(M=p(M,L)),L=r(M,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((X=H)==null||X.length===0)&&(H=function(K){return typeof K=="string"||P(K)?I(K):P(K.data)?I(K.data):null}(M)),(oe=g.call(this,H))||(D()&&(M instanceof Uint8Array||L==="RGBA"||(q=M,M=_(M))),oe=this["process"+L.toUpperCase()](M,u.call(this),H,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in t.image_compression?K:T.NONE}(G),q)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},O=t.__addimage__.convertBase64ToBinaryString=function(M,L){var H;L=typeof L!="boolean"||L;var G,oe="";if(typeof M=="string"){G=(H=R(M))!==null?H.data:M;try{oe=wg(G)}catch(q){if(L)throw k(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};t.getImageProperties=function(M){var L,H,G="";if(h(M)&&(M=p(M)),typeof M=="string"&&r(M)===e&&((G=O(M,!1))===""&&(G=t.loadFile(M)||""),M=G),H=r(M),!d(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!D()||M instanceof Uint8Array||(M=_(M)),!(L=this["process"+H.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=H,L}})(an.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};an.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(w.objId),I=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(T(r.contents))+")",a+=" /Popup "+C.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+g(T(I))+") >>",w.content=a;var k=w.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(a+=" /Open true"),a+=" >>",C.content=a,this.internal.write(w.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(b(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+s),h:u(r+a)},options:i,type:"link"})},t.textWithLink=function(n,r,s,a){var i,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(n,r,s,a),s+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,s-u,o,i,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(an.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&s.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&a(w)&&e[w.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(w){var C=0,T=n,I="",k=0;for(C=0;C<w.length;C+=1)T[w.charCodeAt(C)]!==void 0?(k++,typeof(T=T[w.charCodeAt(C)])=="number"&&(I+=String.fromCharCode(T),T=n,k=0),C===w.length-1&&(T=n,I+=w.charAt(C-(k-1)),C-=k-1,k=0)):(T=n,I+=w.charAt(C-k),C-=k,k=0);return I};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(w,C,T){return i(w)?a(w)===!1?-1:!u(w)||!i(C)&&!i(T)||!i(T)&&o(C)||o(w)&&!i(C)||o(w)&&l(C)||o(w)&&o(C)?0:d(w)&&i(C)&&!o(C)&&i(T)&&u(T)?3:o(w)||!i(T)?1:2:-1},g=function(w){var C=0,T=0,I=0,k="",R="",D="",P=(w=w||"").split("\\s+"),_=[];for(C=0;C<P.length;C+=1){for(_.push(""),T=0;T<P[C].length;T+=1)k=P[C][T],R=P[C][T-1],D=P[C][T+1],i(k)?(I=p(k,R,D),_[C]+=I!==-1?String.fromCharCode(e[k.charCodeAt(0)][I]):k):_[C]+=k;_[C]=h(_[C])}return _.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(C)){var I=0;for(T=[],I=0;I<C.length;I+=1)Array.isArray(C[I])?T.push([g(C[I][0]),C[I][1],C[I][2]]):T.push([g(C[I])]);w=T}else w=g(C);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}(an.API),an.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(an.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,w=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var T=u.maxWidth;T>0?typeof l=="string"?l=this.splitTextToSize(l,T):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,R){return k.concat(C.splitTextToSize(R,T))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)g<(w=this.getStringUnitWidth(l[I],{font:h})*d)&&(g=w);return g!==0&&(b=l.length),{w:g/=p,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,b,w,C,T=[],I=[],k=[],R={},D={},P=[],_=[],N=(p=p||{}).autoSize||!1,B=p.printHeaders!==!1,O=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,M=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,H=p.headerBackgroundColor||"#c8c8c8",G=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=G,this.setFontSize(O),h==null)I=T=Object.keys(d[0]),k=T.map(function(){return"left"});else if(Array.isArray(h)&&Mr(h[0])==="object")for(T=h.map(function(Z){return Z.name}),I=h.map(function(Z){return Z.prompt||Z.name||""}),k=h.map(function(Z){return Z.align||"left"}),g=0;g<h.length;g+=1)D[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(I=T=h,k=T.map(function(){return"left"}));if(N||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<T.length;g+=1){for(R[C=T[g]]=d.map(function(Z){return Z[C]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(I[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=R[C],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)P.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[C]=Math.max.apply(null,P)+L+L,P=[]}if(B){var oe={};for(g=0;g<T.length;g+=1)oe[T[g]]={},oe[T[g]].text=I[g],oe[T[g]].align=k[g];var q=o.call(this,oe,D);_=T.map(function(Z){return new a(l,u,D[Z],q,oe[Z].text,void 0,oe[Z].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var X=h.reduce(function(Z,Ae){return Z[Ae.name]=Ae.align,Z},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var re=o.call(this,d[g],D);for(w=0;w<T.length;w+=1){var K=d[g][T[w]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:w,data:K},this),i.call(this,new a(l,u,D[T[w]],re,K,g+2,X[T[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(an.API);var tM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L_=eM(nM),rM=[100,200,300,400,500,600,700,800,900],Sae=eM(rM);function M_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return tM[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof L_[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function TI(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var Tae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function NI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Bae(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Tae,n.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=M_(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+NI(a)+"' and default family '"+r+"'.");if(i=function(l,u){if(u[l])return u[l];var d=L_[l],h=d<=L_.normal?-1:1,p=TI(u,nM,d,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=tM[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=Sae[l],h=TI(u,rM,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+NI(a)+"'.");return i}function kI(t){return t.trimLeft()}function Nae(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function kae(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var sv,II,FI,IC=["times"];(function(t){var e,n,r,s,a,i,o,l,u,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=j;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(De){J=!!De}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(De){ne=!!De}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(De){isNaN(De)||(ie=De)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(De){isNaN(De)||(de=De)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(De){var Ce;typeof De=="number"?Ce=[De,De,De,De]:((Ce=new Array(4))[0]=De[0],Ce[1]=De.length>=2?De[1]:Ce[0],Ce[2]=De.length>=3?De[2]:Ce[0],Ce[3]=De.length>=4?De[3]:Ce[1]),u.margin=Ce}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(De){me=De}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(De){xe=De}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(De){Se=De}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(De){De instanceof d&&(u=De)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(De){u.path=De}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(De){ge=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var Ce;Ce=p(De),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var Ce=p(De);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ae=null;function Fe(De,Ce){if(ae===null){var Ge=function(nt){var it=[];return Object.keys(nt).forEach(function(dt){nt[dt].forEach(function(Ct){var ut=null;switch(Ct){case"bold":ut={family:dt,weight:"bold"};break;case"italic":ut={family:dt,style:"italic"};break;case"bolditalic":ut={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:dt}}ut!==null&&(ut.ref={name:dt,style:Ct},it.push(ut))})}),it}(De.getFontList());ae=function(nt){for(var it={},dt=0;dt<nt.length;++dt){var Ct=M_(nt[dt]),ut=Ct.family,kt=Ct.stretch,Ft=Ct.style,Wt=Ct.weight;it[ut]=it[ut]||{},it[ut][kt]=it[ut][kt]||{},it[ut][kt][Ft]=it[ut][kt][Ft]||{},it[ut][kt][Ft][Wt]=Ct}return it}(Ge.concat(Ce))}return ae}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(De){ae=null,et=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var Ce;if(this.ctx.font=De,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Ge=Ce[1],nt=(Ce[2],Ce[3]),it=Ce[4],dt=(Ce[5],Ce[6]),Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(Ct==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var ut=function(Pt){var It,xt,xn=[],$t=Pt.trim();if($t==="")return IC;if($t in BI)return[BI[$t]];for(;$t!=="";){switch(xt=null,It=($t=kI($t)).charAt(0)){case'"':case"'":xt=Nae($t.substring(1),It);break;default:xt=kae($t)}if(xt===null||(xn.push(xt[0]),($t=kI(xt[1]))!==""&&$t.charAt(0)!==","))return IC;$t=$t.replace(/^,/,"")}return xn}(dt);if(this.fontFaces){var kt=Bae(Fe(this.pdf,this.fontFaces),ut.map(function(Pt){return{family:Pt,stretch:"normal",weight:nt,style:Ge}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Ft="";(nt==="bold"||parseInt(nt,10)>=700||Ge==="bold")&&(Ft="bold"),Ge==="italic"&&(Ft+="italic"),Ft.length===0&&(Ft="normal");for(var Wt="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<ut.length;Vt++){if(this.pdf.internal.getFont(ut[Vt],Ft,{noFallback:!0,disableWarning:!0})!==void 0){Wt=ut[Vt];break}if(Ft==="bolditalic"&&this.pdf.internal.getFont(ut[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=ut[Vt],Ft="bold";else if(this.pdf.internal.getFont(ut[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=ut[Vt],Ft="normal";break}}if(Wt===""){for(var Jt=0;Jt<ut.length;Jt++)if(Mt[ut[Jt]]){Wt=Mt[ut[Jt]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,Ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){R.call(this,"fill",!1)},h.prototype.stroke=function(){R.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,W){if(isNaN(j)||isNaN(W))throw Yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(j,W)},h.prototype.closePath=function(){var j=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Mr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){j=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,W){if(isNaN(j)||isNaN(W))throw Yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,W,J,ne){if(isNaN(J)||isNaN(ne)||isNaN(j)||isNaN(W))throw Yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(J,ne)),de=this.ctx.transform.applyToPoint(new i(j,W));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},h.prototype.bezierCurveTo=function(j,W,J,ne,ie,de){if(isNaN(ie)||isNaN(de)||isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw Yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new i(ie,de)),xe=this.ctx.transform.applyToPoint(new i(j,W)),Se=this.ctx.transform.applyToPoint(new i(J,ne));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Se.x,y2:Se.y,x:me.x,y:me.y}),this.ctx.lastPoint=new i(me.x,me.y)},h.prototype.arc=function(j,W,J,ne,ie,de){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne)||isNaN(ie))throw Yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new i(j,W));j=me.x,W=me.y;var xe=this.ctx.transform.applyToPoint(new i(0,J)),Se=this.ctx.transform.applyToPoint(new i(0,0));J=Math.sqrt(Math.pow(xe.x-Se.x,2)+Math.pow(xe.y-Se.y,2))}Math.abs(ie-ne)>=2*Math.PI&&(ne=0,ie=2*Math.PI),this.path.push({type:"arc",x:j,y:W,radius:J,startAngle:ne,endAngle:ie,counterclockwise:de})},h.prototype.arcTo=function(j,W,J,ne,ie){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw Yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,W),this.lineTo(j+J,W),this.lineTo(j+J,W+ne),this.lineTo(j,W+ne),this.lineTo(j,W),this.lineTo(j+J,W),this.lineTo(j,W)},h.prototype.fillRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw Yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,W,J,ne),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},h.prototype.strokeRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw Yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(j,W,J,ne),this.stroke())},h.prototype.clearRect=function(j,W,J,ne){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne))throw Yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,W,J,ne))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(j){var W,J,ne,ie;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))W=0,J=0,ne=0,ie=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(de!==null)W=parseInt(de[1]),J=parseInt(de[2]),ne=parseInt(de[3]),ie=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)W=parseInt(de[1]),J=parseInt(de[2]),ne=parseInt(de[3]),ie=parseFloat(de[4]);else{if(ie=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new W8(j);j=me.ok?me.toHex():"#000000"}j.length===4?(W=j.substring(1,2),W+=W,J=j.substring(2,3),J+=J,ne=j.substring(3,4),ne+=ne):(W=j.substring(1,3),J=j.substring(3,5),ne=j.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),ne=parseInt(ne,16)}}return{r:W,g:J,b:ne,a:ie,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,W,J,ne){if(isNaN(W)||isNaN(J)||typeof j!="string")throw Yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!g.call(this)){var ie=re(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:j,x:W,y:J,scale:de,angle:ie,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(j,W,J,ne){if(isNaN(W)||isNaN(J)||typeof j!="string")throw Yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ne=isNaN(ne)?void 0:ne;var ie=re(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:j,x:W,y:J,scale:de,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(j){if(typeof j!="string")throw Yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,ne=W.internal.getFontSize(),ie=W.getStringUnitWidth(j)*ne/W.internal.scaleFactor,de=function(me){var xe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new de({width:ie*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(j,W){if(isNaN(j)||isNaN(W))throw Yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(j,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(j){if(isNaN(j))throw Yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(j,W){if(isNaN(j)||isNaN(W))throw Yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,j,W);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(j,W,J,ne,ie,de){if(isNaN(j)||isNaN(W)||isNaN(J)||isNaN(ne)||isNaN(ie)||isNaN(de))throw Yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(j,W,J,ne,ie,de);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(j,W,J,ne,ie,de){j=isNaN(j)?1:j,W=isNaN(W)?0:W,J=isNaN(J)?0:J,ne=isNaN(ne)?1:ne,ie=isNaN(ie)?0:ie,de=isNaN(de)?0:de,this.ctx.transform=new l(j,W,J,ne,ie,de)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,W,J,ne,ie,de,me,xe,Se){var ge=this.pdf.getImageProperties(j),ae=1,Fe=1,et=1,De=1;ne!==void 0&&xe!==void 0&&(et=xe/ne,De=Se/ie,ae=ge.width/ne*xe/ne,Fe=ge.height/ie*Se/ie),de===void 0&&(de=W,me=J,W=0,J=0),ne!==void 0&&xe===void 0&&(xe=ne,Se=ie),ne===void 0&&xe===void 0&&(xe=ge.width,Se=ge.height);for(var Ce,Ge=this.ctx.transform.decompose(),nt=re(Ge.rotate.shx),it=new l,dt=(it=(it=(it=it.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new o(de-W*et,me-J*De,ne*ae,ie*Fe)),Ct=C.call(this,dt),ut=[],kt=0;kt<Ct.length;kt+=1)ut.indexOf(Ct[kt])===-1&&ut.push(Ct[kt]);if(k(ut),this.autoPaging)for(var Ft=ut[0],Wt=ut[ut.length-1],Mt=Ft;Mt<Wt+1;Mt++){this.pdf.setPage(Mt);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=Mt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Mt===1?0:Pt+(Mt-2)*It;if(this.ctx.clip_path.length!==0){var xn=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ce,this.posX+this.margin[3],-xt+Jt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=xn}var $t=JSON.parse(JSON.stringify(dt));$t=I([$t],this.posX+this.margin[3],-xt+Jt+this.ctx.prevPageLastElemOffset)[0];var ir=(Mt>Ft||Mt<Wt)&&w.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,It,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,nt),ir&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,nt)};var C=function(j,W,J){var ne=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ne.push(Math.floor((j.y+ie)/J)+1);break;case"arc":ne.push(Math.floor((j.y+ie-j.radius)/J)+1),ne.push(Math.floor((j.y+ie+j.radius)/J)+1);break;case"qct":var de=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ne.push(Math.floor((de.y+ie)/J)+1),ne.push(Math.floor((de.y+de.h+ie)/J)+1);break;case"bct":var me=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ne.push(Math.floor((me.y+ie)/J)+1),ne.push(Math.floor((me.y+me.h+ie)/J)+1);break;case"rect":ne.push(Math.floor((j.y+ie)/J)+1),ne.push(Math.floor((j.y+j.h+ie)/J)+1)}for(var xe=0;xe<ne.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ne[xe];)T.call(this);return ne},T=function(){var j=this.fillStyle,W=this.strokeStyle,J=this.font,ne=this.lineCap,ie=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=W,this.font=J,this.lineCap=ne,this.lineWidth=ie,this.lineJoin=de},I=function(j,W,J){for(var ne=0;ne<j.length;ne++)switch(j[ne].type){case"bct":j[ne].x2+=W,j[ne].y2+=J;case"qct":j[ne].x1+=W,j[ne].y1+=J;case"mt":case"lt":case"arc":default:j[ne].x+=W,j[ne].y+=J}return j},k=function(j){return j.sort(function(W,J){return W-J})},R=function(j,W){for(var J,ne,ie=this.fillStyle,de=this.strokeStyle,me=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),ge=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),et=[],De=0;De<Fe.length;De++)if(Fe[De].x!==void 0)for(var Ce=C.call(this,Fe[De]),Ge=0;Ge<Ce.length;Ge+=1)et.indexOf(Ce[Ge])===-1&&et.push(Ce[Ge]);for(var nt=0;nt<et.length;nt++)for(;this.pdf.internal.getNumberOfPages()<et[nt];)T.call(this);if(k(et),this.autoPaging)for(var it=et[0],dt=et[et.length-1],Ct=it;Ct<dt+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=ie,this.strokeStyle=de,this.lineCap=me,this.lineWidth=Se,this.lineJoin=ge;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Ct===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=Ct===1?0:Ft+(Ct-2)*Wt;if(this.ctx.clip_path.length!==0){var Vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(J,this.posX+this.margin[3],-Mt+kt+this.ctx.prevPageLastElemOffset),D.call(this,j,!0),this.path=Vt}if(ne=JSON.parse(JSON.stringify(ae)),this.path=I(ne,this.posX+this.margin[3],-Mt+kt+this.ctx.prevPageLastElemOffset),W===!1||Ct===0){var Jt=(Ct>it||Ct<dt)&&w.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Wt,null).clip().discardPath()),D.call(this,j,W),Jt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Se,D.call(this,j,W),this.lineWidth=xe;this.path=ae},D=function(j,W){if((j!=="stroke"||W||!b.call(this))&&(j==="stroke"||W||!g.call(this))){for(var J,ne,ie=[],de=this.path,me=0;me<de.length;me++){var xe=de[me];switch(xe.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:xe,deltas:[],abs:[]});break;case"lt":var Se=ie.length;if(de[me-1]&&!isNaN(de[me-1].x)&&(J=[xe.x-de[me-1].x,xe.y-de[me-1].y],Se>0)){for(;Se>=0;Se--)if(ie[Se-1].close!==!0&&ie[Se-1].begin!==!0){ie[Se-1].deltas.push(J),ie[Se-1].abs.push(xe);break}}break;case"bct":J=[xe.x1-de[me-1].x,xe.y1-de[me-1].y,xe.x2-de[me-1].x,xe.y2-de[me-1].y,xe.x-de[me-1].x,xe.y-de[me-1].y],ie[ie.length-1].deltas.push(J);break;case"qct":var ge=de[me-1].x+2/3*(xe.x1-de[me-1].x),ae=de[me-1].y+2/3*(xe.y1-de[me-1].y),Fe=xe.x+2/3*(xe.x1-xe.x),et=xe.y+2/3*(xe.y1-xe.y),De=xe.x,Ce=xe.y;J=[ge-de[me-1].x,ae-de[me-1].y,Fe-de[me-1].x,et-de[me-1].y,De-de[me-1].x,Ce-de[me-1].y],ie[ie.length-1].deltas.push(J);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(xe)}}ne=W?null:j==="stroke"?"stroke":"fill";for(var Ge=!1,nt=0;nt<ie.length;nt++)if(ie[nt].arc)for(var it=ie[nt].abs,dt=0;dt<it.length;dt++){var Ct=it[dt];Ct.type==="arc"?N.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,W,!Ge):H.call(this,Ct.x,Ct.y),Ge=!0}else if(ie[nt].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(ie[nt].begin!==!0){var ut=ie[nt].start.x,kt=ie[nt].start.y;G.call(this,ie[nt].deltas,ut,kt),Ge=!0}ne&&B.call(this,ne),W&&O.call(this)}},P=function(j){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-J;case"top":return j+W-J;case"hanging":return j+W-2*J;case"middle":return j+W/2-J;case"ideographic":return j;case"alphabetic":default:return j}},_=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(W,J){this.colorStops.push([W,J])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(j,W,J,ne,ie,de,me,xe,Se){for(var ge=q.call(this,J,ne,ie,de),ae=0;ae<ge.length;ae++){var Fe=ge[ae];ae===0&&(Se?M.call(this,Fe.x1+j,Fe.y1+W):H.call(this,Fe.x1+j,Fe.y1+W)),oe.call(this,j,W,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}xe?O.call(this):B.call(this,me)},B=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(j,W){this.pdf.internal.out(n(j)+" "+r(W)+" m")},L=function(j){var W;switch(j.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var J=this.pdf.getTextDimensions(j.text),ne=P.call(this,j.y),ie=_.call(this,ne)-J.h,de=this.ctx.transform.applyToPoint(new i(j.x,ne)),me=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Se,ge,ae,Fe=this.ctx.transform.applyToRectangle(new o(j.x,ne,J.w,J.h)),et=xe.applyToRectangle(new o(j.x,ie,J.w,J.h)),De=C.call(this,et),Ce=[],Ge=0;Ge<De.length;Ge+=1)Ce.indexOf(De[Ge])===-1&&Ce.push(De[Ge]);if(k(Ce),this.autoPaging)for(var nt=Ce[0],it=Ce[Ce.length-1],dt=nt;dt<it+1;dt++){this.pdf.setPage(dt);var Ct=dt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ft=kt-this.margin[0],Wt=this.pdf.internal.pageSize.width-this.margin[1],Mt=Wt-this.margin[3],Vt=dt===1?0:ut+(dt-2)*Ft;if(this.ctx.clip_path.length!==0){var Jt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Se,this.posX+this.margin[3],-1*Vt+Ct),D.call(this,"fill",!0),this.path=Jt}var Pt=I([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Vt+Ct+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale);var It=this.autoPaging!=="text";if(It||Pt.y+Pt.h<=kt){if(It||Pt.y>=Ct&&Pt.x<=Wt){var xt=It?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Wt-Pt.x)[0],xn=I([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Vt+Ct+this.ctx.prevPageLastElemOffset)[0],$t=It&&(dt>nt||dt<it)&&w.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Ft,null).clip().discardPath()),this.pdf.text(xt,xn.x,xn.y,{angle:j.angle,align:W,renderingMode:j.renderingMode}),$t&&this.pdf.restoreGraphicsState()}}else Pt.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-Pt.y);j.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=ae)}else j.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale),this.pdf.text(j.text,de.x+this.posX,de.y+this.posY,{angle:j.angle,align:W,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=ae)},H=function(j,W,J,ne){J=J||0,ne=ne||0,this.pdf.internal.out(n(j+J)+" "+r(W+ne)+" l")},G=function(j,W,J){return this.pdf.lines(j,W,J,null,null)},oe=function(j,W,J,ne,ie,de,me,xe){this.pdf.internal.out([e(s(J+j)),e(a(ne+W)),e(s(ie+j)),e(a(de+W)),e(s(me+j)),e(a(xe+W)),"c"].join(" "))},q=function(j,W,J,ne){for(var ie=2*Math.PI,de=Math.PI/2;W>J;)W-=ie;var me=Math.abs(J-W);me<ie&&ne&&(me=ie-me);for(var xe=[],Se=ne?-1:1,ge=W;me>1e-5;){var ae=ge+Se*Math.min(me,de);xe.push(X.call(this,j,ge,ae)),me-=Math.abs(ae-ge),ge=ae}return xe},X=function(j,W,J){var ne=(J-W)/2,ie=j*Math.cos(ne),de=j*Math.sin(ne),me=ie,xe=-de,Se=me*me+xe*xe,ge=Se+me*ie+xe*de,ae=4/3*(Math.sqrt(2*Se*ge)-ge)/(me*de-xe*ie),Fe=me-ae*xe,et=xe+ae*me,De=Fe,Ce=-et,Ge=ne+W,nt=Math.cos(Ge),it=Math.sin(Ge);return{x1:j*Math.cos(W),y1:j*Math.sin(W),x2:Fe*nt-et*it,y2:Fe*it+et*nt,x3:De*nt-Ce*it,y3:De*it+Ce*nt,x4:j*Math.cos(J),y4:j*Math.sin(J)}},re=function(j){return 180*j/Math.PI},K=function(j,W,J,ne,ie,de){var me=j+.5*(J-j),xe=W+.5*(ne-W),Se=ie+.5*(J-ie),ge=de+.5*(ne-de),ae=Math.min(j,ie,me,Se),Fe=Math.max(j,ie,me,Se),et=Math.min(W,de,xe,ge),De=Math.max(W,de,xe,ge);return new o(ae,et,Fe-ae,De-et)},Z=function(j,W,J,ne,ie,de,me,xe){var Se,ge,ae,Fe,et,De,Ce,Ge,nt,it,dt,Ct,ut,kt,Ft=J-j,Wt=ne-W,Mt=ie-J,Vt=de-ne,Jt=me-ie,Pt=xe-de;for(ge=0;ge<41;ge++)nt=(Ce=(ae=j+(Se=ge/40)*Ft)+Se*((et=J+Se*Mt)-ae))+Se*(et+Se*(ie+Se*Jt-et)-Ce),it=(Ge=(Fe=W+Se*Wt)+Se*((De=ne+Se*Vt)-Fe))+Se*(De+Se*(de+Se*Pt-De)-Ge),ge==0?(dt=nt,Ct=it,ut=nt,kt=it):(dt=Math.min(dt,nt),Ct=Math.min(Ct,it),ut=Math.max(ut,nt),kt=Math.max(kt,it));return new o(Math.round(dt),Math.round(Ct),Math.round(ut-dt),Math.round(kt-Ct))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,W,J=(j=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(an.API),function(t){var e=function(a){var i,o,l,u,d,h,p,g,b,w;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(w=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)%85,o.push(h+33,p+33,g+33,b+33,w+33)):o.push(122);return function(C,T){for(var I=T;I>0;I--)C.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(a){var i,o,l,u,d,h=String,p="length",g=255,b="charCodeAt",w="slice",C="replace";for(a[w](-2),a=a[w](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),l=[],u=0,d=(a+=i="uuuuu"[w](a[p]%5||5))[p];d>u;u+=5)o=52200625*(a[b](u)-33)+614125*(a[b](u+1)-33)+7225*(a[b](u+2)-33)+85*(a[b](u+3)-33)+(a[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(T,I){for(var k=I;k>0;k--)T.pop()}(l,i[p]),h.fromCharCode.apply(h,l)},r=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=I_(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(an.API),function(t){t.loadFile=function(e,n,r){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,p=0,g=function(b){var w=b.length,C=[],T=String.fromCharCode;for(p=0;p<w;p+=1)C.push(T(255&b.charCodeAt(p)));return C.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(s,a,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(an.API),function(t){function e(){return(yn.html2canvas?Promise.resolve(yn.html2canvas):S_(()=>Promise.resolve().then(()=>Xwe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(yn.DOMPurify?Promise.resolve(yn.DOMPurify):S_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=Mr(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var g=u[p],b=g.src.find(function(w){return w.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||an.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,an.getPageSize=function(i,o,l){if(Mr(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,w=0;if(p.hasOwnProperty(h))b=p[h][1]/d,w=p[h][0]/d;else try{b=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",w>b&&(g=w,w=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>w&&(g=w,w=b,b=g)}return{width:w,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(M_):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(an.API),an.API.addJS=function(t){return FI=t,this.internal.events.subscribe("postPutResources",function(){sv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),II=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+FI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sv!==void 0&&II!==void 0&&this.internal.out("/Names <</JavaScript "+sv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=n.internal.newObject();d.push(h);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var i={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var i=r.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(an.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,w={width:0,height:0,numcomponents:1},C=4;C<b;C+=2){if(C+=g,e.indexOf(h.charCodeAt(C+1))!==-1){p=256*h.charCodeAt(C+5)+h.charCodeAt(C+6),w={width:256*h.charCodeAt(C+7)+h.charCodeAt(C+8),height:p,numcomponents:h.charCodeAt(C+9)};break}g=256*h.charCodeAt(C+2)+h.charCodeAt(C+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:s}}return d}}(an.API);var f0,av,RI,DI,UI,Iae=function(){var t,e,n;function r(a){var i,o,l,u,d,h,p,g,b,w,C,T,I,k;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var R,D;for(D=[],R=0;R<4;++R)D.push(String.fromCharCode(this.data[this.pos++]));return D}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,T=0;0<=i?T<i:T>i;0<=i?++T:--T)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(I=0;0<=w?I<w:I>w;0<=w?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(C=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,C.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,p,g,b){var w,C,T,I,k,R,D,P,_,N,B,O,M,L,H,G,oe,q,X,re,K,Z=Math.ceil((u.width-h)/g),Ae=Math.ceil((u.height-p)/b),j=u.width==Z&&u.height==Ae;for(L=i*Z,O=j?o:new Uint8Array(L*Ae),R=a.length,M=0,C=0;M<Ae&&l<R;){switch(a[l++]){case 0:for(I=oe=0;oe<L;I=oe+=1)O[C++]=a[l++];break;case 1:for(I=q=0;q<L;I=q+=1)w=a[l++],k=I<i?0:O[C-i],O[C++]=(w+k)%256;break;case 2:for(I=X=0;X<L;I=X+=1)w=a[l++],T=(I-I%i)/i,H=M&&O[(M-1)*L+T*i+I%i],O[C++]=(H+w)%256;break;case 3:for(I=re=0;re<L;I=re+=1)w=a[l++],T=(I-I%i)/i,k=I<i?0:O[C-i],H=M&&O[(M-1)*L+T*i+I%i],O[C++]=(w+Math.floor((k+H)/2))%256;break;case 4:for(I=K=0;K<L;I=K+=1)w=a[l++],T=(I-I%i)/i,k=I<i?0:O[C-i],M===0?H=G=0:(H=O[(M-1)*L+T*i+I%i],G=T&&O[(M-1)*L+(T-1)*i+I%i]),D=k+H-G,P=Math.abs(D-k),N=Math.abs(D-H),B=Math.abs(D-G),_=P<=N&&P<=B?k:N<=B?H:G,O[C++]=(w+_)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!j){var W=((p+M*b)*u.width+h)*i,J=M*L;for(I=0;I<Z;I+=1){for(var ne=0;ne<i;ne+=1)o[W++]=O[J++];W+=(g-1)*i}}M++}}return a=cae(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var a,i,o,l,u,d,h,p,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,p=o.length;h<p;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[a++])!=null?g:255;return u},r.prototype.copyToImageData=function(a,i){var o,l,u,d,h,p,g,b,w,C,T;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=a.data||a).length,h=w||i,d=p=0,l===1)for(;d<b;)g=w?4*i[d/4]:p,C=h[g++],u[d++]=C,u[d++]=C,u[d++]=C,u[d++]=o?h[g++]:255,p=g;else for(;d<b;)g=w?4*i[d/4]:p,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,p=g},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(yn)==="[object Window]"){try{e=yn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var i,o,l,u,d,h,p,g;if(this.animation){for(g=[],o=d=0,h=(p=this.animation.frames).length;d<h;o=++d)i=p[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},r.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(a){var i,o,l,u,d,h,p=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],p.renderFrame(a,g),u>1&&o/u<d)return p.animation._timeout=setTimeout(i,b.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Fae(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,p=null,g=0,b=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],(1&w)==0&&(p=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++],D=R>>6&1,P=1<<(7&R)+1,_=o,N=l,B=!1;R>>7&&(B=!0,_=e,N=P,e+=3*P);var O=e;for(e++;;){var M;if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}d.push({x:C,y:T,width:I,height:k,has_local_palette:B,palette_offset:_,palette_size:N,data_offset:O,data_length:e-O,transparent_index:p,interlaced:!!D,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,H){var G=this.frameInfo(L),oe=G.width*G.height,q=new Uint8Array(oe);LI(t,G.data_offset,q,oe);var X=G.palette_offset,re=G.transparent_index;re===null&&(re=256);var K=G.width,Z=n-K,Ae=K,j=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),J=j,ne=4*Z;G.interlaced===!0&&(ne+=4*n*7);for(var ie=8,de=0,me=q.length;de<me;++de){var xe=q[de];if(Ae===0&&(Ae=K,(J+=ne)>=W&&(ne=4*Z+4*n*(ie-1),J=j+(K+Z)*(ie<<1),ie>>=1)),xe===re)J+=4;else{var Se=t[X+3*xe],ge=t[X+3*xe+1],ae=t[X+3*xe+2];H[J++]=ae,H[J++]=ge,H[J++]=Se,H[J++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(L,H){var G=this.frameInfo(L),oe=G.width*G.height,q=new Uint8Array(oe);LI(t,G.data_offset,q,oe);var X=G.palette_offset,re=G.transparent_index;re===null&&(re=256);var K=G.width,Z=n-K,Ae=K,j=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),J=j,ne=4*Z;G.interlaced===!0&&(ne+=4*n*7);for(var ie=8,de=0,me=q.length;de<me;++de){var xe=q[de];if(Ae===0&&(Ae=K,(J+=ne)>=W&&(ne=4*Z+4*n*(ie-1),J=j+(K+Z)*(ie<<1),ie>>=1)),xe===re)J+=4;else{var Se=t[X+3*xe],ge=t[X+3*xe+1],ae=t[X+3*xe+2];H[J++]=Se,H[J++]=ge,H[J++]=ae,H[J++]=255}--Ae}}}function LI(t,e,n,r){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,h=0,p=0,g=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var C=h&u;if(h>>=l,d-=l,C!==a){if(C===i)break;for(var T=C<o?C:w,I=0,k=T;k>a;)k=b[k]>>8,++I;var R=k;if(p+I+(T!==C?1:0)>r)return void Yr.log("Warning, gif stream longer than expected.");n[p++]=R;var D=p+=I;for(T!==C&&(n[p++]=R),k=T;I--;)k=b[k],n[--D]=255&k,k>>=8;w!==null&&o<4096&&(b[o++]=w<<8|R,o>=u+1&&l<12&&(++l,u=u<<1|1)),w=C}else o=i+1,u=(1<<(l=s+1))-1,w=null}return p!==r&&Yr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function FC(t){var e,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),b=new Array(64),w=[],C=0,T=7,I=new Array(64),k=new Array(64),R=new Array(64),D=new Array(256),P=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(j,W){for(var J=0,ne=0,ie=new Array,de=1;de<=16;de++){for(var me=1;me<=j[de];me++)ie[W[ne]]=[],ie[W[ne]][0]=J,ie[W[ne]][1]=de,ne++,J++;J*=2}return ie}function X(j){for(var W=j[0],J=j[1]-1;J>=0;)W&1<<J&&(C|=1<<T),J--,--T<0&&(C==255?(re(255),re(0)):re(C),T=7,C=0)}function re(j){w.push(j)}function K(j){re(j>>8&255),re(255&j)}function Z(j,W,J,ne,ie){for(var de,me=ie[0],xe=ie[240],Se=function(it,dt){var Ct,ut,kt,Ft,Wt,Mt,Vt,Jt,Pt,It,xt=0;for(Pt=0;Pt<8;++Pt){Ct=it[xt],ut=it[xt+1],kt=it[xt+2],Ft=it[xt+3],Wt=it[xt+4],Mt=it[xt+5],Vt=it[xt+6];var xn=Ct+(Jt=it[xt+7]),$t=Ct-Jt,ir=ut+Vt,mn=ut-Vt,Fn=kt+Mt,Er=kt-Mt,Bn=Ft+Wt,na=Ft-Wt,Xn=xn+Bn,Wr=xn-Bn,cs=ir+Fn,Dn=ir-Fn;it[xt]=Xn+cs,it[xt+4]=Xn-cs;var tn=.707106781*(Dn+Wr);it[xt+2]=Wr+tn,it[xt+6]=Wr-tn;var On=.382683433*((Xn=na+Er)-(Dn=mn+$t)),ra=.5411961*Xn+On,Or=1.306562965*Dn+On,ms=.707106781*(cs=Er+mn),xa=$t+ms,Ht=$t-ms;it[xt+5]=Ht+ra,it[xt+3]=Ht-ra,it[xt+1]=xa+Or,it[xt+7]=xa-Or,xt+=8}for(xt=0,Pt=0;Pt<8;++Pt){Ct=it[xt],ut=it[xt+8],kt=it[xt+16],Ft=it[xt+24],Wt=it[xt+32],Mt=it[xt+40],Vt=it[xt+48];var or=Ct+(Jt=it[xt+56]),Zn=Ct-Jt,_r=ut+Vt,kr=ut-Vt,Qr=kt+Mt,fe=kt-Mt,Ne=Ft+Wt,Ee=Ft-Wt,_e=or+Ne,Te=or-Ne,ke=_r+Qr,qe=_r-Qr;it[xt]=_e+ke,it[xt+32]=_e-ke;var tt=.707106781*(qe+Te);it[xt+16]=Te+tt,it[xt+48]=Te-tt;var Qe=.382683433*((_e=Ee+fe)-(qe=kr+Zn)),We=.5411961*_e+Qe,Je=1.306562965*qe+Qe,yt=.707106781*(ke=fe+kr),Nt=Zn+yt,jt=Zn-yt;it[xt+40]=jt+We,it[xt+24]=jt-We,it[xt+8]=Nt+Je,it[xt+56]=Nt-Je,xt++}for(Pt=0;Pt<64;++Pt)It=it[Pt]*dt[Pt],g[Pt]=It>0?It+.5|0:It-.5|0;return g}(j,W),ge=0;ge<64;++ge)b[_[ge]]=Se[ge];var ae=b[0]-J;J=b[0],ae==0?X(ne[0]):(X(ne[p[de=32767+ae]]),X(h[de]));for(var Fe=63;Fe>0&&b[Fe]==0;)Fe--;if(Fe==0)return X(me),J;for(var et,De=1;De<=Fe;){for(var Ce=De;b[De]==0&&De<=Fe;)++De;var Ge=De-Ce;if(Ge>=16){et=Ge>>4;for(var nt=1;nt<=et;++nt)X(xe);Ge&=15}de=32767+b[De],X(ie[(Ge<<4)+p[de]]),X(h[de]),De++}return Fe!=63&&X(me),J}function Ae(j){j=Math.min(Math.max(j,1),100),a!=j&&(function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ie=i((J[ne]*W+50)/100);ie=Math.min(Math.max(ie,1),255),o[_[ne]]=ie}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var xe=i((de[me]*W+50)/100);xe=Math.min(Math.max(xe,1),255),l[_[me]]=xe}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,ae=0;ae<8;ae++)for(var Fe=0;Fe<8;Fe++)u[ge]=1/(o[_[ge]]*Se[ae]*Se[Fe]*8),d[ge]=1/(l[_[ge]]*Se[ae]*Se[Fe]*8),ge++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),a=j)}this.encode=function(j,W){W&&Ae(W),w=new Array,C=0,T=7,K(65496),K(65504),K(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),K(1),K(1),re(0),re(0),function(){K(65499),K(132),re(0);for(var ut=0;ut<64;ut++)re(o[ut]);re(1);for(var kt=0;kt<64;kt++)re(l[kt])}(),function(ut,kt){K(65472),K(17),re(8),K(kt),K(ut),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(j.width,j.height),function(){K(65476),K(418),re(0);for(var ut=0;ut<16;ut++)re(N[ut+1]);for(var kt=0;kt<=11;kt++)re(B[kt]);re(16);for(var Ft=0;Ft<16;Ft++)re(O[Ft+1]);for(var Wt=0;Wt<=161;Wt++)re(M[Wt]);re(1);for(var Mt=0;Mt<16;Mt++)re(L[Mt+1]);for(var Vt=0;Vt<=11;Vt++)re(H[Vt]);re(17);for(var Jt=0;Jt<16;Jt++)re(G[Jt+1]);for(var Pt=0;Pt<=161;Pt++)re(oe[Pt])}(),K(65498),K(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var J=0,ne=0,ie=0;C=0,T=7,this.encode.displayName="_encode_";for(var de,me,xe,Se,ge,ae,Fe,et,De,Ce=j.data,Ge=j.width,nt=j.height,it=4*Ge,dt=0;dt<nt;){for(de=0;de<it;){for(ge=it*dt+de,Fe=-1,et=0,De=0;De<64;De++)ae=ge+(et=De>>3)*it+(Fe=4*(7&De)),dt+et>=nt&&(ae-=it*(dt+1+et-nt)),de+Fe>=it&&(ae-=de+Fe-it+4),me=Ce[ae++],xe=Ce[ae++],Se=Ce[ae++],I[De]=(P[me]+P[xe+256>>0]+P[Se+512>>0]>>16)-128,k[De]=(P[me+768>>0]+P[xe+1024>>0]+P[Se+1280>>0]>>16)-128,R[De]=(P[me+1280>>0]+P[xe+1536>>0]+P[Se+1792>>0]>>16)-128;J=Z(I,u,J,e,r),ne=Z(k,d,ne,n,s),ie=Z(R,d,ie,n,s),de+=32}dt+=8}if(T>=0){var Ct=[];Ct[1]=T+1,Ct[0]=(1<<T+1)-1,X(Ct)}return K(65497),new Uint8Array(w)},t=t||50,function(){for(var j=String.fromCharCode,W=0;W<256;W++)D[W]=j(W)}(),e=q(N,B),n=q(L,H),r=q(O,M),s=q(G,oe),function(){for(var j=1,W=2,J=1;J<=15;J++){for(var ne=j;ne<W;ne++)p[32767+ne]=J,h[32767+ne]=[],h[32767+ne][1]=J,h[32767+ne][0]=ne;for(var ie=-(W-1);ie<=-j;ie++)p[32767+ie]=J,h[32767+ie]=[],h[32767+ie][1]=J,h[32767+ie][0]=W-1+ie;j<<=1,W<<=1}}(),function(){for(var j=0;j<256;j++)P[j]=19595*j,P[j+256>>0]=38470*j,P[j+512>>0]=7471*j+32768,P[j+768>>0]=-11059*j,P[j+1024>>0]=-21709*j,P[j+1280>>0]=32768*j+8421375,P[j+1536>>0]=-27439*j,P[j+1792>>0]=-5329*j}(),Ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MI(t){function e(N){if(!N)throw Error("assert :P")}function n(N,B,O){for(var M=0;4>M;M++)if(N[B+M]!=O.charCodeAt(M))return!0;return!1}function r(N,B,O,M,L){for(var H=0;H<L;H++)N[B+H]=O[M+H]}function s(N,B,O,M){for(var L=0;L<M;L++)N[B+L]=O}function a(N){return new Int32Array(N)}function i(N,B){for(var O=[],M=0;M<N;M++)O.push(new B);return O}function o(N,B){var O=[];return function M(L,H,G){for(var oe=G[H],q=0;q<oe&&(L.push(G.length>H+1?[]:new B),!(G.length<H+1));q++)M(L[q],H+1,G)}(O,0,N),O}var l=function(){var N=this;function B(E,U){for(var z=1<<U-1>>>0;E&z;)z>>>=1;return z?(E&z-1)+z:E}function O(E,U,z,te,ce){e(!(te%z));do E[U+(te-=z)]=ce;while(0<te)}function M(E,U,z,te,ce){if(e(2328>=ce),512>=ce)var he=a(512);else if((he=a(ce))==null)return 0;return function(pe,ve,be,Be,Le,Ye){var Ke,Ve,gt=ve,at=1<<be,Me=a(16),je=a(16);for(e(Le!=0),e(Be!=null),e(pe!=null),e(0<be),Ve=0;Ve<Le;++Ve){if(15<Be[Ve])return 0;++Me[Be[Ve]]}if(Me[0]==Le)return 0;for(je[1]=0,Ke=1;15>Ke;++Ke){if(Me[Ke]>1<<Ke)return 0;je[Ke+1]=je[Ke]+Me[Ke]}for(Ve=0;Ve<Le;++Ve)Ke=Be[Ve],0<Be[Ve]&&(Ye[je[Ke]++]=Ve);if(je[15]==1)return(Be=new L).g=0,Be.value=Ye[0],O(pe,gt,1,at,Be),at;var ct,vt=-1,ht=at-1,Gt=0,Lt=1,nn=1,Qt=1<<be;for(Ve=0,Ke=1,Le=2;Ke<=be;++Ke,Le<<=1){if(Lt+=nn<<=1,0>(nn-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke])(Be=new L).g=Ke,Be.value=Ye[Ve++],O(pe,gt+Gt,Le,Qt,Be),Gt=B(Gt,Ke)}for(Ke=be+1,Le=2;15>=Ke;++Ke,Le<<=1){if(Lt+=nn<<=1,0>(nn-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke]){if(Be=new L,(Gt&ht)!=vt){for(gt+=Qt,ct=1<<(vt=Ke)-be;15>vt&&!(0>=(ct-=Me[vt]));)++vt,ct<<=1;at+=Qt=1<<(ct=vt-be),pe[ve+(vt=Gt&ht)].g=ct+be,pe[ve+vt].value=gt-ve-vt}Be.g=Ke-be,Be.value=Ye[Ve++],O(pe,gt+(Gt>>be),Le,Qt,Be),Gt=B(Gt,Ke)}}return Lt!=2*je[15]-1?0:at}(E,U,z,te,ce,he)}function L(){this.value=this.g=0}function H(){this.value=this.g=0}function G(){this.G=i(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(js,H)}function oe(E,U,z,te){e(E!=null),e(U!=null),e(2147483648>te),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=U,E.pa=z,E.Jd=U,E.Yc=z+te,E.Zc=4<=te?z+te-4+1:z,de(E)}function q(E,U){for(var z=0;0<U--;)z|=xe(E,128)<<U;return z}function X(E,U){var z=q(E,U);return me(E)?-z:z}function re(E,U,z,te){var ce,he=0;for(e(E!=null),e(U!=null),e(4294967288>te),E.Sb=te,E.Ra=0,E.u=0,E.h=0,4<te&&(te=4),ce=0;ce<te;++ce)he+=U[z+ce]<<8*ce;E.Ra=he,E.bb=te,E.oa=U,E.pa=z}function K(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<ju-8>>>0,++E.bb,E.u-=8;J(E)&&(E.h=1,E.u=0)}function Z(E,U){if(e(0<=U),!E.h&&U<=Pu){var z=W(E)&Mc[U];return E.u+=U,K(E),z}return E.h=1,E.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(E){return E.Ra>>>(E.u&ju-1)>>>0}function J(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>ju}function ne(E,U){E.u=U,E.h=J(E)}function ie(E){E.u>=QA&&(e(E.u>=QA),K(E))}function de(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function me(E){return q(E,1)}function xe(E,U){var z=E.Ca;0>E.b&&de(E);var te=E.b,ce=z*U>>>8,he=(E.I>>>te>ce)+0;for(he?(z-=ce,E.I-=ce+1<<te>>>0):z=ce+1,te=z,ce=0;256<=te;)ce+=8,te>>=8;return te=7^ce+fi[te],E.b-=te,E.Ca=(z<<te)-1,he}function Se(E,U,z){E[U+0]=z>>24&255,E[U+1]=z>>16&255,E[U+2]=z>>8&255,E[U+3]=z>>0&255}function ge(E,U){return E[U+0]<<0|E[U+1]<<8}function ae(E,U){return ge(E,U)|E[U+2]<<16}function Fe(E,U){return ge(E,U)|ge(E,U+2)<<16}function et(E,U){var z=1<<U;return e(E!=null),e(0<U),E.X=a(z),E.X==null?0:(E.Mb=32-U,E.Xa=U,1)}function De(E,U){e(E!=null),e(U!=null),e(E.Xa==U.Xa),r(U.X,0,E.X,0,1<<U.Xa)}function Ce(){this.X=[],this.Xa=this.Mb=0}function Ge(E,U,z,te){e(z!=null),e(te!=null);var ce=z[0],he=te[0];return ce==0&&(ce=(E*he+U/2)/U),he==0&&(he=(U*ce+E/2)/E),0>=ce||0>=he?0:(z[0]=ce,te[0]=he,1)}function nt(E,U){return E+(1<<U)-1>>>U}function it(E,U){return((4278255360&E)+(4278255360&U)>>>0&4278255360)+((16711935&E)+(16711935&U)>>>0&16711935)>>>0}function dt(E,U){N[U]=function(z,te,ce,he,pe,ve,be){var Be;for(Be=0;Be<pe;++Be){var Le=N[E](ve[be+Be-1],ce,he+Be);ve[be+Be]=it(z[te+Be],Le)}}}function Ct(){this.ud=this.hd=this.jd=0}function ut(E,U){return((4278124286&(E^U))>>>1)+(E&U)>>>0}function kt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Ft(E,U){return kt(E+(E-U+.5>>1))}function Wt(E,U,z){return Math.abs(U-z)-Math.abs(E-z)}function Mt(E,U,z,te,ce,he,pe){for(te=he[pe-1],z=0;z<ce;++z)he[pe+z]=te=it(E[U+z],te)}function Vt(E,U,z,te,ce){var he;for(he=0;he<z;++he){var pe=E[U+he],ve=pe>>8&255,be=16711935&(be=(be=16711935&pe)+((ve<<16)+ve));te[ce+he]=(4278255360&pe)+be>>>0}}function Jt(E,U){U.jd=E>>0&255,U.hd=E>>8&255,U.ud=E>>16&255}function Pt(E,U,z,te,ce,he){var pe;for(pe=0;pe<te;++pe){var ve=U[z+pe],be=ve>>>8,Be=ve,Le=255&(Le=(Le=ve>>>16)+((E.jd<<24>>24)*(be<<24>>24)>>>5));Be=255&(Be=(Be=Be+((E.hd<<24>>24)*(be<<24>>24)>>>5))+((E.ud<<24>>24)*(Le<<24>>24)>>>5)),ce[he+pe]=(4278255360&ve)+(Le<<16)+Be}}function It(E,U,z,te,ce){N[U]=function(he,pe,ve,be,Be,Le,Ye,Ke,Ve){for(be=Ye;be<Ke;++be)for(Ye=0;Ye<Ve;++Ye)Be[Le++]=ce(ve[te(he[pe++])])},N[E]=function(he,pe,ve,be,Be,Le,Ye){var Ke=8>>he.b,Ve=he.Ea,gt=he.K[0],at=he.w;if(8>Ke)for(he=(1<<he.b)-1,at=(1<<Ke)-1;pe<ve;++pe){var Me,je=0;for(Me=0;Me<Ve;++Me)Me&he||(je=te(be[Be++])),Le[Ye++]=ce(gt[je&at]),je>>=Ke}else N["VP8LMapColor"+z](be,Be,gt,at,Le,Ye,pe,ve,Ve)}}function xt(E,U,z,te,ce){for(z=U+z;U<z;){var he=E[U++];te[ce++]=he>>16&255,te[ce++]=he>>8&255,te[ce++]=he>>0&255}}function xn(E,U,z,te,ce){for(z=U+z;U<z;){var he=E[U++];te[ce++]=he>>16&255,te[ce++]=he>>8&255,te[ce++]=he>>0&255,te[ce++]=he>>24&255}}function $t(E,U,z,te,ce){for(z=U+z;U<z;){var he=(pe=E[U++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;te[ce++]=he,te[ce++]=pe}}function ir(E,U,z,te,ce){for(z=U+z;U<z;){var he=(pe=E[U++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;te[ce++]=he,te[ce++]=pe}}function mn(E,U,z,te,ce){for(z=U+z;U<z;){var he=E[U++];te[ce++]=he>>0&255,te[ce++]=he>>8&255,te[ce++]=he>>16&255}}function Fn(E,U,z,te,ce,he){if(he==0)for(z=U+z;U<z;)Se(te,((he=E[U++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ce+=32;else r(te,ce,E,U,z)}function Er(E,U){N[U][0]=N[E+"0"],N[U][1]=N[E+"1"],N[U][2]=N[E+"2"],N[U][3]=N[E+"3"],N[U][4]=N[E+"4"],N[U][5]=N[E+"5"],N[U][6]=N[E+"6"],N[U][7]=N[E+"7"],N[U][8]=N[E+"8"],N[U][9]=N[E+"9"],N[U][10]=N[E+"10"],N[U][11]=N[E+"11"],N[U][12]=N[E+"12"],N[U][13]=N[E+"13"],N[U][14]=N[E+"0"],N[U][15]=N[E+"0"]}function Bn(E){return E==yf||E==Kc||E==Yl||E==zA}function na(){this.eb=[],this.size=this.A=this.fb=0}function Xn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new na,this.f.kb=new Xn,this.sd=null}function cs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tn(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function On(E,U){var z=E.T,te=U.ba.f.RGBA,ce=te.eb,he=te.fb+E.ka*te.A,pe=la[U.ba.S],ve=E.y,be=E.O,Be=E.f,Le=E.N,Ye=E.ea,Ke=E.W,Ve=U.cc,gt=U.dc,at=U.Mc,Me=U.Nc,je=E.ka,ct=E.ka+E.T,vt=E.U,ht=vt+1>>1;for(je==0?pe(ve,be,null,null,Be,Le,Ye,Ke,Be,Le,Ye,Ke,ce,he,null,null,vt):(pe(U.ec,U.fc,ve,be,Ve,gt,at,Me,Be,Le,Ye,Ke,ce,he-te.A,ce,he,vt),++z);je+2<ct;je+=2)Ve=Be,gt=Le,at=Ye,Me=Ke,Le+=E.Rc,Ke+=E.Rc,he+=2*te.A,pe(ve,(be+=2*E.fa)-E.fa,ve,be,Ve,gt,at,Me,Be,Le,Ye,Ke,ce,he-te.A,ce,he,vt);return be+=E.fa,E.j+ct<E.o?(r(U.ec,U.fc,ve,be,vt),r(U.cc,U.dc,Be,Le,ht),r(U.Mc,U.Nc,Ye,Ke,ht),z--):1&ct||pe(ve,be,null,null,Be,Le,Ye,Ke,Be,Le,Ye,Ke,ce,he+te.A,null,null,vt),z}function ra(E,U,z){var te=E.F,ce=[E.J];if(te!=null){var he=E.U,pe=U.ba.S,ve=pe==Gu||pe==Yl;U=U.ba.f.RGBA;var be=[0],Be=E.ka;be[0]=E.T,E.Kb&&(Be==0?--be[0]:(--Be,ce[0]-=E.width),E.j+E.ka+E.T==E.o&&(be[0]=E.o-E.j-Be));var Le=U.eb;Be=U.fb+Be*U.A,E=Gn(te,ce[0],E.width,he,be,Le,Be+(ve?0:3),U.A),e(z==be),E&&Bn(pe)&&Qi(Le,Be,ve,he,be,U.A)}return 0}function Or(E){var U=E.ma,z=U.ba.S,te=11>z,ce=z==GA||z==vf||z==Gu||z==$l||z==12||Bn(z);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Lc(U.Oa,E,ce?11:12))return 0;if(ce&&Bn(z)&&_t(),E.da)alert("todo:use_scaling");else{if(te){if(U.Ib=tn,E.Kb){if(z=E.U+1>>1,U.memory=a(E.U+2*z),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+E.U,U.Mc=U.cc,U.Nc=U.dc+z,U.Ib=On,_t()}}else alert("todo:EmitYUV");ce&&(U.Jb=ra,te&&He())}if(te&&!Yx){for(E=0;256>E;++E)Gw[E]=89858*(E-128)+Qs>>pl,Cf[E]=-22014*(E-128)+Qs,$m[E]=-45773*(E-128),Hs[E]=113618*(E-128)+Qs>>pl;for(E=Yc;E<Gh;++E)U=76283*(E-16)+Qs>>pl,Ef[E-Yc]=xr(U,255),Ym[E-Yc]=xr(U+8>>4,15);Yx=1}return 1}function ms(E){var U=E.ma,z=E.U,te=E.T;return e(!(1&E.ka)),0>=z||0>=te?0:(z=U.Ib(E,U),U.Jb!=null&&U.Jb(E,U,z),U.Dc+=z,1)}function xa(E){E.ma.memory=null}function Ht(E,U,z,te){return Z(E,8)!=47?0:(U[0]=Z(E,14)+1,z[0]=Z(E,14)+1,te[0]=Z(E,1),Z(E,3)!=0?0:!E.h)}function or(E,U){if(4>E)return E+1;var z=E-2>>1;return(2+(1&E)<<z)+Z(U,z)+1}function Zn(E,U){return 120<U?U-120:1<=(z=((z=Xl[U-1])>>4)*E+(8-(15&z)))?z:1;var z}function _r(E,U,z){var te=W(z),ce=E[U+=255&te].g-8;return 0<ce&&(ne(z,z.u+8),te=W(z),U+=E[U].value,U+=te&(1<<ce)-1),ne(z,z.u+E[U].g),E[U].value}function kr(E,U,z){return z.g+=E.g,z.value+=E.value<<U>>>0,e(8>=z.g),E.g}function Qr(E,U,z){var te=E.xc;return e((U=te==0?0:E.vc[E.md*(z>>te)+(U>>te)])<E.Wb),E.Ya[U]}function fe(E,U,z,te){var ce=E.ab,he=E.c*U,pe=E.C;U=pe+U;var ve=z,be=te;for(te=E.Ta,z=E.Ua;0<ce--;){var Be=E.gc[ce],Le=pe,Ye=U,Ke=ve,Ve=be,gt=(be=te,ve=z,Be.Ea);switch(e(Le<Ye),e(Ye<=Be.nc),Be.hc){case 2:Mh(Ke,Ve,(Ye-Le)*gt,be,ve);break;case 0:var at=Le,Me=Ye,je=be,ct=ve,vt=(Qt=Be).Ea;at==0&&(Km(Ke,Ve,null,null,1,je,ct),Mt(Ke,Ve+1,0,0,vt-1,je,ct+1),Ve+=vt,ct+=vt,++at);for(var ht=1<<Qt.b,Gt=ht-1,Lt=nt(vt,Qt.b),nn=Qt.K,Qt=Qt.w+(at>>Qt.b)*Lt;at<Me;){var ur=nn,vr=Qt,Hn=1;for(gf(Ke,Ve,je,ct-vt,1,je,ct);Hn<vt;){var Mn=(Hn&~Gt)+ht;Mn>vt&&(Mn=vt),(0,ql[ur[vr++]>>8&15])(Ke,Ve+ +Hn,je,ct+Hn-vt,Mn-Hn,je,ct+Hn),Hn=Mn}Ve+=vt,ct+=vt,++at&Gt||(Qt+=Lt)}Ye!=Be.nc&&r(be,ve-gt,be,ve+(Ye-Le-1)*gt,gt);break;case 1:for(gt=Ke,Me=Ve,vt=(Ke=Be.Ea)-(ct=Ke&~(je=(Ve=1<<Be.b)-1)),at=nt(Ke,Be.b),ht=Be.K,Be=Be.w+(Le>>Be.b)*at;Le<Ye;){for(Gt=ht,Lt=Be,nn=new Ct,Qt=Me+ct,ur=Me+Ke;Me<Qt;)Jt(Gt[Lt++],nn),jc(nn,gt,Me,Ve,be,ve),Me+=Ve,ve+=Ve;Me<ur&&(Jt(Gt[Lt++],nn),jc(nn,gt,Me,vt,be,ve),Me+=vt,ve+=vt),++Le&je||(Be+=at)}break;case 3:if(Ke==be&&Ve==ve&&0<Be.b){for(Me=be,Ke=gt=ve+(Ye-Le)*gt-(ct=(Ye-Le)*nt(Be.Ea,Be.b)),Ve=be,je=ve,at=[],ct=(vt=ct)-1;0<=ct;--ct)at[ct]=Ve[je+ct];for(ct=vt-1;0<=ct;--ct)Me[Ke+ct]=at[ct];ao(Be,Le,Ye,be,gt,be,ve)}else ao(Be,Le,Ye,Ke,Ve,be,ve)}ve=te,be=z}be!=z&&r(te,z,ve,be,he)}function Ne(E,U){var z=E.V,te=E.Ba+E.c*E.C,ce=U-E.C;if(e(U<=E.l.o),e(16>=ce),0<ce){var he=E.l,pe=E.Ta,ve=E.Ua,be=he.width;if(fe(E,ce,z,te),ce=ve=[ve],e((z=E.C)<(te=U)),e(he.v<he.va),te>he.o&&(te=he.o),z<he.j){var Be=he.j-z;z=he.j,ce[0]+=Be*be}if(z>=te?z=0:(ce[0]+=4*he.v,he.ka=z-he.j,he.U=he.va-he.v,he.T=te-z,z=1),z){if(ve=ve[0],11>(z=E.ca).S){var Le=z.f.RGBA,Ye=(te=z.S,ce=he.U,he=he.T,Be=Le.eb,Le.A),Ke=he;for(Le=Le.fb+E.Ma*Le.A;0<Ke--;){var Ve=pe,gt=ve,at=ce,Me=Be,je=Le;switch(te){case Da:Ka(Ve,gt,at,Me,je);break;case GA:Ca(Ve,gt,at,Me,je);break;case yf:Ca(Ve,gt,at,Me,je),Qi(Me,je,0,at,1,0);break;case dl:ko(Ve,gt,at,Me,je);break;case vf:Fn(Ve,gt,at,Me,je,1);break;case Kc:Fn(Ve,gt,at,Me,je,1),Qi(Me,je,0,at,1,0);break;case Gu:Fn(Ve,gt,at,Me,je,0);break;case Yl:Fn(Ve,gt,at,Me,je,0),Qi(Me,je,1,at,1,0);break;case $l:Oc(Ve,gt,at,Me,je);break;case zA:Oc(Ve,gt,at,Me,je),Vn(Me,je,at,1,0);break;case jh:hi(Ve,gt,at,Me,je);break;default:e(0)}ve+=be,Le+=Ye}E.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=z.height)}}E.C=U,e(E.C<=E.i)}function Ee(E){var U;if(0<E.ua)return 0;for(U=0;U<E.Wb;++U){var z=E.Ya[U].G,te=E.Ya[U].H;if(0<z[1][te[1]+0].g||0<z[2][te[2]+0].g||0<z[3][te[3]+0].g)return 0}return 1}function _e(E,U,z,te,ce,he){if(E.Z!=0){var pe=E.qd,ve=E.rd;for(e(hl[E.Z]!=null);U<z;++U)hl[E.Z](pe,ve,te,ce,te,ce,he),pe=te,ve=ce,ce+=he;E.qd=pe,E.rd=ve}}function Te(E,U){var z=E.l.ma,te=z.Z==0||z.Z==1?E.l.j:E.C;if(te=E.C<te?te:E.C,e(U<=E.l.o),U>te){var ce=E.l.width,he=z.ca,pe=z.tb+ce*te,ve=E.V,be=E.Ba+E.c*te,Be=E.gc;e(E.ab==1),e(Be[0].hc==3),Pc(Be[0],te,U,ve,be,he,pe),_e(z,te,U,he,pe,ce)}E.C=E.Ma=U}function ke(E,U,z,te,ce,he,pe){var ve=E.$/te,be=E.$%te,Be=E.m,Le=E.s,Ye=z+E.$,Ke=Ye;ce=z+te*ce;var Ve=z+te*he,gt=280+Le.ua,at=E.Pb?ve:16777216,Me=0<Le.ua?Le.Wa:null,je=Le.wc,ct=Ye<Ve?Qr(Le,be,ve):null;e(E.C<he),e(Ve<=ce);var vt=!1;e:for(;;){for(;vt||Ye<Ve;){var ht=0;if(ve>=at){var Gt=Ye-z;e((at=E).Pb),at.wd=at.m,at.xd=Gt,0<at.s.ua&&De(at.s.Wa,at.s.vb),at=ve+Kx}if(be&je||(ct=Qr(Le,be,ve)),e(ct!=null),ct.Qb&&(U[Ye]=ct.qb,vt=!0),!vt)if(ie(Be),ct.jc){ht=Be,Gt=U;var Lt=Ye,nn=ct.pd[W(ht)&js-1];e(ct.jc),256>nn.g?(ne(ht,ht.u+nn.g),Gt[Lt]=nn.value,ht=0):(ne(ht,ht.u+nn.g-256),e(256<=nn.value),ht=nn.value),ht==0&&(vt=!0)}else ht=_r(ct.G[0],ct.H[0],Be);if(Be.h)break;if(vt||256>ht){if(!vt)if(ct.nd)U[Ye]=(ct.qb|ht<<8)>>>0;else{if(ie(Be),vt=_r(ct.G[1],ct.H[1],Be),ie(Be),Gt=_r(ct.G[2],ct.H[2],Be),Lt=_r(ct.G[3],ct.H[3],Be),Be.h)break;U[Ye]=(Lt<<24|vt<<16|ht<<8|Gt)>>>0}if(vt=!1,++Ye,++be>=te&&(be=0,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(E,ve),Me!=null))for(;Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else if(280>ht){if(ht=or(ht-256,Be),Gt=_r(ct.G[4],ct.H[4],Be),ie(Be),Gt=Zn(te,Gt=or(Gt,Be)),Be.h)break;if(Ye-z<Gt||ce-Ye<ht)break e;for(Lt=0;Lt<ht;++Lt)U[Ye+Lt]=U[Ye+Lt-Gt];for(Ye+=ht,be+=ht;be>=te;)be-=te,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(E,ve);if(e(Ye<=ce),be&je&&(ct=Qr(Le,be,ve)),Me!=null)for(;Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else{if(!(ht<gt))break e;for(vt=ht-280,e(Me!=null);Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht;ht=Ye,e(!(vt>>>(Gt=Me).Xa)),U[ht]=Gt.X[vt],vt=!0}vt||e(Be.h==J(Be))}if(E.Pb&&Be.h&&Ye<ce)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&De(E.s.vb,E.s.Wa);else{if(Be.h)break e;pe!=null&&pe(E,ve>he?he:ve),E.a=0,E.$=Ye-z}return 1}return E.a=3,0}function qe(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var U=E.Wa;U!=null&&(U.X=null),E.vb=null,e(E!=null)}function tt(){var E=new jA;return E==null?null:(E.a=0,E.xb=qA,Er("Predictor","VP8LPredictors"),Er("Predictor","VP8LPredictors_C"),Er("PredictorAdd","VP8LPredictorsAdd"),Er("PredictorAdd","VP8LPredictorsAdd_C"),Mh=Vt,jc=Pt,Ka=xt,Ca=xn,Oc=$t,hi=ir,ko=mn,N.VP8LMapColor32b=ia,N.VP8LMapColor8b=xf,E)}function Qe(E,U,z,te,ce){var he=1,pe=[E],ve=[U],be=te.m,Be=te.s,Le=null,Ye=0;e:for(;;){if(z)for(;he&&Z(be,1);){var Ke=pe,Ve=ve,gt=te,at=1,Me=gt.m,je=gt.gc[gt.ab],ct=Z(Me,2);if(gt.Oc&1<<ct)he=0;else{switch(gt.Oc|=1<<ct,je.hc=ct,je.Ea=Ke[0],je.nc=Ve[0],je.K=[null],++gt.ab,e(4>=gt.ab),ct){case 0:case 1:je.b=Z(Me,3)+2,at=Qe(nt(je.Ea,je.b),nt(je.nc,je.b),0,gt,je.K),je.K=je.K[0];break;case 3:var vt,ht=Z(Me,8)+1,Gt=16<ht?0:4<ht?1:2<ht?2:3;if(Ke[0]=nt(je.Ea,Gt),je.b=Gt,vt=at=Qe(ht,1,0,gt,je.K)){var Lt,nn=ht,Qt=je,ur=1<<(8>>Qt.b),vr=a(ur);if(vr==null)vt=0;else{var Hn=Qt.K[0],Mn=Qt.w;for(vr[0]=Qt.K[0][0],Lt=1;Lt<1*nn;++Lt)vr[Lt]=it(Hn[Mn+Lt],vr[Lt-1]);for(;Lt<4*ur;++Lt)vr[Lt]=0;Qt.K[0]=null,Qt.K[0]=vr,vt=1}}at=vt;break;case 2:break;default:e(0)}he=at}}if(pe=pe[0],ve=ve[0],he&&Z(be,1)&&!(he=1<=(Ye=Z(be,4))&&11>=Ye)){te.a=3;break e}var Tr;if(Tr=he)t:{var yr,Tn,Fr,An=te,vn=pe,cr=ve,Ar=Ye,ca=z,Vs=An.m,xs=An.s,vs=[null],ks=1,co=0,wr=qu[Ar];n:for(;;){if(ca&&Z(Vs,1)){var Is=Z(Vs,3)+2,Ro=nt(vn,Is),Jc=nt(cr,Is),$u=Ro*Jc;if(!Qe(Ro,Jc,0,An,vs))break n;for(vs=vs[0],xs.xc=Is,yr=0;yr<$u;++yr){var Xc=vs[yr]>>8&65535;vs[yr]=Xc,Xc>=ks&&(ks=Xc+1)}}if(Vs.h)break n;for(Tn=0;5>Tn;++Tn){var Jr=Hi[Tn];!Tn&&0<Ar&&(Jr+=1<<Ar),co<Jr&&(co=Jr)}var _f=i(ks*wr,L),zh=ks,$a=i(zh,G);if($a==null)var ns=null;else e(65536>=zh),ns=$a;var Yu=a(co);if(ns==null||Yu==null||_f==null){An.a=1;break n}var Zc=_f;for(yr=Fr=0;yr<ks;++yr){var pi=ns[yr],eu=pi.G,gi=pi.H,Sf=0,WA=1,qh=0;for(Tn=0;5>Tn;++Tn){Jr=Hi[Tn],eu[Tn]=Zc,gi[Tn]=Fr,!Tn&&0<Ar&&(Jr+=1<<Ar);s:{var Tf,Kh=Jr,Bf=An,$A=Yu,Zx=Zc,e1=Fr,Nf=0,nc=Bf.m,qw=Z(nc,1);if(s($A,0,0,Kh),qw){var t1=Z(nc,1)+1,n1=Z(nc,1),Jm=Z(nc,n1==0?1:8);$A[Jm]=1,t1==2&&($A[Jm=Z(nc,8)]=1);var YA=1}else{var Xm=a(19),Zm=Z(nc,4)+4;if(19<Zm){Bf.a=3;var kf=0;break s}for(Tf=0;Tf<Zm;++Tf)Xm[Jl[Tf]]=Z(nc,3);var Wh=void 0,JA=void 0,r1=Bf,s1=Xm,rc=Kh,If=$A,$h=0,Do=r1.m,XA=8,ep=i(128,L);r:for(;M(ep,0,7,s1,19);){if(Z(Do,1)){var a1=2+2*Z(Do,3);if((Wh=2+Z(Do,a1))>rc)break r}else Wh=rc;for(JA=0;JA<rc&&Wh--;){ie(Do);var tp=ep[0+(127&W(Do))];ne(Do,Do.u+tp.g);var Ju=tp.value;if(16>Ju)If[JA++]=Ju,Ju!=0&&(XA=Ju);else{var i1=Ju==16,np=Ju-16,rp=lo[np],sp=Z(Do,Oh[np])+rp;if(JA+sp>rc)break r;for(var o1=i1?XA:0;0<sp--;)If[JA++]=o1}}$h=1;break r}$h||(r1.a=3),YA=$h}(YA=YA&&!nc.h)&&(Nf=M(Zx,e1,8,$A,Kh)),YA&&Nf!=0?kf=Nf:(Bf.a=3,kf=0)}if(kf==0)break n;if(WA&&zu[Tn]==1&&(WA=Zc[Fr].g==0),Sf+=Zc[Fr].g,Fr+=kf,3>=Tn){var Xu,Yh=Yu[0];for(Xu=1;Xu<Jr;++Xu)Yu[Xu]>Yh&&(Yh=Yu[Xu]);qh+=Yh}}if(pi.nd=WA,pi.Qb=0,WA&&(pi.qb=(eu[3][gi[3]+0].value<<24|eu[1][gi[1]+0].value<<16|eu[2][gi[2]+0].value)>>>0,Sf==0&&256>eu[0][gi[0]+0].value&&(pi.Qb=1,pi.qb+=eu[0][gi[0]+0].value<<8)),pi.jc=!pi.Qb&&6>qh,pi.jc){var Ff,sc=pi;for(Ff=0;Ff<js;++Ff){var gl=Ff,ac=sc.pd[gl],Rf=sc.G[0][sc.H[0]+gl];256<=Rf.value?(ac.g=Rf.g+256,ac.value=Rf.value):(ac.g=0,ac.value=0,gl>>=kr(Rf,8,ac),gl>>=kr(sc.G[1][sc.H[1]+gl],16,ac),gl>>=kr(sc.G[2][sc.H[2]+gl],0,ac),kr(sc.G[3][sc.H[3]+gl],24,ac))}}}xs.vc=vs,xs.Wb=ks,xs.Ya=ns,xs.yc=_f,Tr=1;break t}Tr=0}if(!(he=Tr)){te.a=3;break e}if(0<Ye){if(Be.ua=1<<Ye,!et(Be.Wa,Ye)){te.a=1,he=0;break e}}else Be.ua=0;var Df=te,ap=pe,l1=ve,ip=Df.s,op=ip.xc;if(Df.c=ap,Df.i=l1,ip.md=nt(ap,op),ip.wc=op==0?-1:(1<<op)-1,z){te.xb=$x;break e}if((Le=a(pe*ve))==null){te.a=1,he=0;break e}he=(he=ke(te,Le,0,pe,ve,ve,null))&&!be.h;break e}return he?(ce!=null?ce[0]=Le:(e(Le==null),e(z)),te.$=0,z||qe(Be)):qe(Be),he}function We(E,U){var z=E.c*E.i,te=z+U+16*U;return e(E.c<=U),E.V=a(te),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+z+U,1)}function Je(E,U){var z=E.C,te=U-z,ce=E.V,he=E.Ba+E.c*z;for(e(U<=E.l.o);0<te;){var pe=16<te?16:te,ve=E.l.ma,be=E.l.width,Be=be*pe,Le=ve.ca,Ye=ve.tb+be*z,Ke=E.Ta,Ve=E.Ua;fe(E,pe,ce,he),Vr(Ke,Ve,Le,Ye,Be),_e(ve,z,z+pe,Le,Ye,be),te-=pe,ce+=pe*E.c,z+=pe}e(z==U),E.C=E.Ma=U}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Tt(){this.Yb=function(){var E=[];return function U(z,te,ce){for(var he=ce[te],pe=0;pe<he&&(z.push(ce.length>te+1?[]:0),!(ce.length<te+1));pe++)U(z[pe],te+1,ce)}(E,0,[3,11]),E}()}function Rt(){this.jb=a(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function un(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function Ln(){this.Na=this.la=0}function Qn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _s(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new _s),this.aa=0,this.l=new Ps}function Ss(){this.y=a(16),this.f=a(8),this.ea=a(8)}function sa(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new yt,this.Kc=new Nt,this.ed=new un,this.Qa=new jt,this.Ic=this.$c=this.Aa=0,this.D=new oi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,Ae),this.ia=0,this.pb=i(4,Qn),this.Pa=new Rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ss),this.Hd=0,this.rb=Array(new Ln),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _s),this.L=this.aa=0,this.gd=o([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function va(){var E=new sa;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Os||(Os=UA)),E}function Hr(E,U,z){return E.a==0&&(E.a=U,E.sc=z,E.cb=0),0}function aa(E,U,z){return 3<=z&&E[U+0]==157&&E[U+1]==1&&E[U+2]==42}function Nc(E,U){if(E==null)return 0;if(E.a=0,E.sc="OK",U==null)return Hr(E,2,"null VP8Io passed to VP8GetHeaders()");var z=U.data,te=U.w,ce=U.ha;if(4>ce)return Hr(E,7,"Truncated header.");var he=z[te+0]|z[te+1]<<8|z[te+2]<<16,pe=E.Od;if(pe.Rb=!(1&he),pe.td=he>>1&7,pe.yd=he>>4&1,pe.ub=he>>5,3<pe.td)return Hr(E,3,"Incorrect keyframe parameters.");if(!pe.yd)return Hr(E,4,"Frame not displayable.");te+=3,ce-=3;var ve=E.Kc;if(pe.Rb){if(7>ce)return Hr(E,7,"cannot parse picture header");if(!aa(z,te,ce))return Hr(E,3,"Bad code word");ve.c=16383&(z[te+4]<<8|z[te+3]),ve.Td=z[te+4]>>6,ve.i=16383&(z[te+6]<<8|z[te+5]),ve.Ud=z[te+6]>>6,te+=7,ce-=7,E.za=ve.c+15>>4,E.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,s((he=E.Pa).jb,0,255,he.jb.length),e((he=E.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,s(he.Zb,0,0,he.Zb.length),s(he.Lb,0,0,he.Lb)}if(pe.ub>ce)return Hr(E,7,"bad partition length");oe(he=E.m,z,te,pe.ub),te+=pe.ub,ce-=pe.ub,pe.Rb&&(ve.Ld=me(he),ve.Kd=me(he)),ve=E.Qa;var be,Be=E.Pa;if(e(he!=null),e(ve!=null),ve.Cb=me(he),ve.Cb){if(ve.Bb=me(he),me(he)){for(ve.Fb=me(he),be=0;4>be;++be)ve.Zb[be]=me(he)?X(he,7):0;for(be=0;4>be;++be)ve.Lb[be]=me(he)?X(he,6):0}if(ve.Bb)for(be=0;3>be;++be)Be.jb[be]=me(he)?q(he,8):255}else ve.Bb=0;if(he.Ka)return Hr(E,3,"cannot parse segment header");if((ve=E.ed).zd=me(he),ve.Tb=q(he,6),ve.wb=q(he,3),ve.Pc=me(he),ve.Pc&&me(he)){for(Be=0;4>Be;++Be)me(he)&&(ve.vd[Be]=X(he,6));for(Be=0;4>Be;++Be)me(he)&&(ve.od[Be]=X(he,6))}if(E.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return Hr(E,3,"cannot parse filter header");var Le=ce;if(ce=be=te,te=be+Le,ve=Le,E.Xb=(1<<q(E.m,2))-1,Le<3*(Be=E.Xb))z=7;else{for(be+=3*Be,ve-=3*Be,Le=0;Le<Be;++Le){var Ye=z[ce+0]|z[ce+1]<<8|z[ce+2]<<16;Ye>ve&&(Ye=ve),oe(E.Jc[+Le],z,be,Ye),be+=Ye,ve-=Ye,ce+=3}oe(E.Jc[+Be],z,be,ve),z=be<te?0:5}if(z!=0)return Hr(E,z,"cannot parse partitions");for(z=q(be=E.m,7),ce=me(be)?X(be,4):0,te=me(be)?X(be,4):0,ve=me(be)?X(be,4):0,Be=me(be)?X(be,4):0,be=me(be)?X(be,4):0,Le=E.Qa,Ye=0;4>Ye;++Ye){if(Le.Cb){var Ke=Le.Zb[Ye];Le.Fb||(Ke+=z)}else{if(0<Ye){E.pb[Ye]=E.pb[0];continue}Ke=z}var Ve=E.pb[Ye];Ve.Sc[0]=wf[xr(Ke+ce,127)],Ve.Sc[1]=bf[xr(Ke+0,127)],Ve.Eb[0]=2*wf[xr(Ke+te,127)],Ve.Eb[1]=101581*bf[xr(Ke+ve,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=wf[xr(Ke+Be,117)],Ve.Qc[1]=bf[xr(Ke+be,127)],Ve.lc=Ke+be}if(!pe.Rb)return Hr(E,4,"Not a key frame.");for(me(he),pe=E.Pa,z=0;4>z;++z){for(ce=0;8>ce;++ce)for(te=0;3>te;++te)for(ve=0;11>ve;++ve)Be=xe(he,Ku[z][ce][te][ve])?q(he,8):fl[z][ce][te][ve],pe.Wc[z][ce].Yb[te][ve]=Be;for(ce=0;17>ce;++ce)pe.Xc[z][ce]=pe.Wc[z][Wx[ce]]}return E.kc=me(he),E.kc&&(E.Bd=q(he,8)),E.cb=1}function UA(E,U,z,te,ce,he,pe){var ve=U[ce].Yb[z];for(z=0;16>ce;++ce){if(!xe(E,ve[z+0]))return ce;for(;!xe(E,ve[z+1]);)if(ve=U[++ce].Yb[0],z=0,ce==16)return 16;var be=U[ce+1].Yb;if(xe(E,ve[z+2])){var Be=E,Le=0;if(xe(Be,(Ke=ve)[(Ye=z)+3]))if(xe(Be,Ke[Ye+6])){for(ve=0,Ye=2*(Le=xe(Be,Ke[Ye+8]))+(Ke=xe(Be,Ke[Ye+9+Le])),Le=0,Ke=ds[Ye];Ke[ve];++ve)Le+=Le+xe(Be,Ke[ve]);Le+=3+(8<<Ye)}else xe(Be,Ke[Ye+7])?(Le=7+2*xe(Be,165),Le+=xe(Be,145)):Le=5+xe(Be,159);else Le=xe(Be,Ke[Ye+4])?3+xe(Be,Ke[Ye+5]):2;ve=be[2]}else Le=1,ve=be[1];be=pe+hr[ce],0>(Be=E).b&&de(Be);var Ye,Ke=Be.b,Ve=(Ye=Be.Ca>>1)-(Be.I>>Ke)>>31;--Be.b,Be.Ca+=Ve,Be.Ca|=1,Be.I-=(Ye+1&Ve)<<Ke,he[be]=((Le^Ve)-Ve)*te[(0<ce)+0]}return 16}function Xo(E){var U=E.rb[E.sb-1];U.la=0,U.Na=0,s(E.zc,0,0,E.zc.length),E.ja=0}function Iu(E,U){if(E==null)return 0;if(U==null)return Hr(E,2,"NULL VP8Io parameter in VP8Decode().");if(!E.cb&&!Nc(E,U))return 0;if(e(E.cb),U.ac==null||U.ac(U)){U.ob&&(E.L=0);var z=tc[E.L];if(E.L==2?(E.yb=0,E.zb=0):(E.yb=U.v-z>>4,E.zb=U.j-z>>4,0>E.yb&&(E.yb=0),0>E.zb&&(E.zb=0)),E.Va=U.o+15+z>>4,E.Hb=U.va+15+z>>4,E.Hb>E.za&&(E.Hb=E.za),E.Va>E.Ub&&(E.Va=E.Ub),0<E.L){var te=E.ed;for(z=0;4>z;++z){var ce;if(E.Qa.Cb){var he=E.Qa.Lb[z];E.Qa.Fb||(he+=te.Tb)}else he=te.Tb;for(ce=0;1>=ce;++ce){var pe=E.gd[z][ce],ve=he;if(te.Pc&&(ve+=te.vd[0],ce&&(ve+=te.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var be=ve;0<te.wb&&(be=4<te.wb?be>>2:be>>1)>9-te.wb&&(be=9-te.wb),1>be&&(be=1),pe.dd=be,pe.tc=2*ve+be,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ce}}}z=0}else Hr(E,6,"Frame setup failed"),z=E.a;if(z=z==0){if(z){E.$c=0,0<E.Aa||(E.Ic=Jx);e:{z=E.Ic,te=4*(be=E.za);var Be=32*be,Le=be+1,Ye=0<E.L?be*(0<E.Aa?2:1):0,Ke=(E.Aa==2?2:1)*be;if((pe=te+832+(ce=3*(16*z+tc[E.L])/2*Be)+(he=E.Fa!=null&&0<E.Fa.length?E.Kc.c*E.Kc.i:0))!=pe)z=0;else{if(pe>E.Vb){if(E.Vb=0,E.Ec=a(pe),E.Fc=0,E.Ec==null){z=Hr(E,1,"no memory during frame initialization.");break e}E.Vb=pe}pe=E.Ec,ve=E.Fc,E.Ac=pe,E.Bc=ve,ve+=te,E.Gd=i(Be,Ss),E.Hd=0,E.rb=i(Le+1,Ln),E.sb=1,E.wa=Ye?i(Ye,Un):null,E.Y=0,E.D.Nb=0,E.D.wa=E.wa,E.D.Y=E.Y,0<E.Aa&&(E.D.Y+=be),e(!0),E.oc=pe,E.pc=ve,ve+=832,E.ya=i(Ke,_s),E.aa=0,E.D.ya=E.ya,E.D.aa=E.aa,E.Aa==2&&(E.D.aa+=be),E.R=16*be,E.B=8*be,be=(Be=tc[E.L])*E.R,Be=Be/2*E.B,E.sa=pe,E.ta=ve+be,E.qa=E.sa,E.ra=E.ta+16*z*E.R+Be,E.Ha=E.qa,E.Ia=E.ra+8*z*E.B+Be,E.$c=0,ve+=ce,E.mb=he?pe:null,E.nb=he?ve:null,e(ve+he<=E.Fc+E.Vb),Xo(E),s(E.Ac,E.Bc,0,te),z=1}}if(z){if(U.ka=0,U.y=E.sa,U.O=E.ta,U.f=E.qa,U.N=E.ra,U.ea=E.Ha,U.Vd=E.Ia,U.fa=E.R,U.Rc=E.B,U.F=null,U.J=0,!Wl){for(z=-255;255>=z;++z)gs[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)io[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)zc[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)qc[255+z]=0>z?0:255<z?255:z;Wl=1}ul=li,Io=el,Fo=Ji,Ns=gr,mi=tl,us=Zo,Ou=al,Al=Bo,HA=Rc,Qc=Lu,Hc=Fc,Vc=Ql,Qu=Hl,VA=il,Gc=Oi,Kl=Fa,Hu=Bs,As=PA,Wa[0]=ka,Wa[1]=LA,Wa[2]=eo,Wa[3]=MA,Wa[4]=ci,Wa[5]=to,Wa[6]=qa,Wa[7]=ui,Wa[8]=To,Wa[9]=nl,Zl[0]=Xi,Zl[1]=Ru,Zl[2]=Eo,Zl[3]=Ic,Zl[4]=Ir,Zl[5]=So,Zl[6]=Zi,Vi[0]=no,Vi[1]=Fu,Vi[2]=Du,Vi[3]=Ai,Vi[4]=Kn,Vi[5]=Ts,Vi[6]=rl,z=1}else z=0}z&&(z=function(Ve,gt){for(Ve.M=0;Ve.M<Ve.Va;++Ve.M){var at,Me=Ve.Jc[Ve.M&Ve.Xb],je=Ve.m,ct=Ve;for(at=0;at<ct.za;++at){var vt=je,ht=ct,Gt=ht.Ac,Lt=ht.Bc+4*at,nn=ht.zc,Qt=ht.ya[ht.aa+at];if(ht.Qa.Bb?Qt.$b=xe(vt,ht.Pa.jb[0])?2+xe(vt,ht.Pa.jb[2]):xe(vt,ht.Pa.jb[1]):Qt.$b=0,ht.kc&&(Qt.Ad=xe(vt,ht.Bd)),Qt.Za=!xe(vt,145)+0,Qt.Za){var ur=Qt.Ob,vr=0;for(ht=0;4>ht;++ht){var Hn,Mn=nn[0+ht];for(Hn=0;4>Hn;++Hn){Mn=Wm[Gt[Lt+Hn]][Mn];for(var Tr=Wc[xe(vt,Mn[0])];0<Tr;)Tr=Wc[2*Tr+xe(vt,Mn[Tr])];Mn=-Tr,Gt[Lt+Hn]=Mn}r(ur,vr,Gt,Lt,4),vr+=4,nn[0+ht]=Mn}}else Mn=xe(vt,156)?xe(vt,128)?1:3:xe(vt,163)?2:0,Qt.Ob[0]=Mn,s(Gt,Lt,Mn,4),s(nn,0,Mn,4);Qt.Dd=xe(vt,142)?xe(vt,114)?xe(vt,183)?1:3:2:0}if(ct.m.Ka)return Hr(Ve,7,"Premature end-of-partition0 encountered.");for(;Ve.ja<Ve.za;++Ve.ja){if(ct=Me,vt=(je=Ve).rb[je.sb-1],Gt=je.rb[je.sb+je.ja],at=je.ya[je.aa+je.ja],Lt=je.kc?at.Ad:0)vt.la=Gt.la=0,at.Za||(vt.Na=Gt.Na=0),at.Hc=0,at.Gc=0,at.ia=0;else{var yr,Tn;if(vt=Gt,Gt=ct,Lt=je.Pa.Xc,nn=je.ya[je.aa+je.ja],Qt=je.pb[nn.$b],ht=nn.ad,ur=0,vr=je.rb[je.sb-1],Mn=Hn=0,s(ht,ur,0,384),nn.Za)var Fr=0,An=Lt[3];else{Tr=a(16);var vn=vt.Na+vr.Na;if(vn=Os(Gt,Lt[1],vn,Qt.Eb,0,Tr,0),vt.Na=vr.Na=(0<vn)+0,1<vn)ul(Tr,0,ht,ur);else{var cr=Tr[0]+3>>3;for(Tr=0;256>Tr;Tr+=16)ht[ur+Tr]=cr}Fr=1,An=Lt[0]}var Ar=15&vt.la,ca=15&vr.la;for(Tr=0;4>Tr;++Tr){var Vs=1&ca;for(cr=Tn=0;4>cr;++cr)Ar=Ar>>1|(Vs=(vn=Os(Gt,An,vn=Vs+(1&Ar),Qt.Sc,Fr,ht,ur))>Fr)<<7,Tn=Tn<<2|(3<vn?3:1<vn?2:ht[ur+0]!=0),ur+=16;Ar>>=4,ca=ca>>1|Vs<<7,Hn=(Hn<<8|Tn)>>>0}for(An=Ar,Fr=ca>>4,yr=0;4>yr;yr+=2){for(Tn=0,Ar=vt.la>>4+yr,ca=vr.la>>4+yr,Tr=0;2>Tr;++Tr){for(Vs=1&ca,cr=0;2>cr;++cr)vn=Vs+(1&Ar),Ar=Ar>>1|(Vs=0<(vn=Os(Gt,Lt[2],vn,Qt.Qc,0,ht,ur)))<<3,Tn=Tn<<2|(3<vn?3:1<vn?2:ht[ur+0]!=0),ur+=16;Ar>>=2,ca=ca>>1|Vs<<5}Mn|=Tn<<4*yr,An|=Ar<<4<<yr,Fr|=(240&ca)<<yr}vt.la=An,vr.la=Fr,nn.Hc=Hn,nn.Gc=Mn,nn.ia=43690&Mn?0:Qt.ia,Lt=!(Hn|Mn)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[at.$b][at.Za],je.wa[je.Y+je.ja].La|=!Lt),ct.Ka)return Hr(Ve,7,"Premature end-of-file encountered.")}if(Xo(Ve),je=gt,ct=1,at=(Me=Ve).D,vt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(at.M=Me.M,at.uc=vt,di(Me,at),ct=1,at=(Tn=Me.D).Nb,vt=(Mn=tc[Me.L])*Me.R,Gt=Mn/2*Me.B,Tr=16*at*Me.R,cr=8*at*Me.B,Lt=Me.sa,nn=Me.ta-vt+Tr,Qt=Me.qa,ht=Me.ra-Gt+cr,ur=Me.Ha,vr=Me.Ia-Gt+cr,ca=(Ar=Tn.M)==0,Hn=Ar>=Me.Va-1,Me.Aa==2&&di(Me,Tn),Tn.uc)for(Vs=(vn=Me).D.M,e(vn.D.uc),Tn=vn.yb;Tn<vn.Hb;++Tn){Fr=Tn,An=Vs;var xs=(vs=(Jr=vn).D).Nb;yr=Jr.R;var vs=vs.wa[vs.Y+Fr],ks=Jr.sa,co=Jr.ta+16*xs*yr+16*Fr,wr=vs.dd,Is=vs.tc;if(Is!=0)if(e(3<=Is),Jr.L==1)0<Fr&&Kl(ks,co,yr,Is+4),vs.La&&As(ks,co,yr,Is),0<An&&Gc(ks,co,yr,Is+4),vs.La&&Hu(ks,co,yr,Is);else{var Ro=Jr.B,Jc=Jr.qa,$u=Jr.ra+8*xs*Ro+8*Fr,Xc=Jr.Ha,Jr=Jr.Ia+8*xs*Ro+8*Fr;xs=vs.ld,0<Fr&&(Al(ks,co,yr,Is+4,wr,xs),Qc(Jc,$u,Xc,Jr,Ro,Is+4,wr,xs)),vs.La&&(Vc(ks,co,yr,Is,wr,xs),VA(Jc,$u,Xc,Jr,Ro,Is,wr,xs)),0<An&&(Ou(ks,co,yr,Is+4,wr,xs),HA(Jc,$u,Xc,Jr,Ro,Is+4,wr,xs)),vs.La&&(Hc(ks,co,yr,Is,wr,xs),Qu(Jc,$u,Xc,Jr,Ro,Is,wr,xs))}}if(Me.ia&&alert("todo:DitherRow"),je.put!=null){if(Tn=16*Ar,Ar=16*(Ar+1),ca?(je.y=Me.sa,je.O=Me.ta+Tr,je.f=Me.qa,je.N=Me.ra+cr,je.ea=Me.Ha,je.W=Me.Ia+cr):(Tn-=Mn,je.y=Lt,je.O=nn,je.f=Qt,je.N=ht,je.ea=ur,je.W=vr),Hn||(Ar-=Mn),Ar>je.o&&(Ar=je.o),je.F=null,je.J=null,Me.Fa!=null&&0<Me.Fa.length&&Tn<Ar&&(je.J=Uc(Me,je,Tn,Ar-Tn),je.F=Me.mb,je.F==null&&je.F.length==0)){ct=Hr(Me,3,"Could not decode alpha data.");break e}Tn<je.j&&(Mn=je.j-Tn,Tn=je.j,e(!(1&Mn)),je.O+=Me.R*Mn,je.N+=Me.B*(Mn>>1),je.W+=Me.B*(Mn>>1),je.F!=null&&(je.J+=je.width*Mn)),Tn<Ar&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=Tn-je.j,je.U=je.va-je.v,je.T=Ar-Tn,ct=je.put(je))}at+1!=Me.Ic||Hn||(r(Me.sa,Me.ta-vt,Lt,nn+16*Me.R,vt),r(Me.qa,Me.ra-Gt,Qt,ht+8*Me.B,Gt),r(Me.Ha,Me.Ia-Gt,ur,vr+8*Me.B,Gt))}if(!ct)return Hr(Ve,6,"Output aborted.")}return 1}(E,U)),U.bc!=null&&U.bc(U),z&=1}return z?(E.cb=0,z):0}function ya(E,U,z,te,ce){ce=E[U+z+32*te]+(ce>>3),E[U+z+32*te]=-256&ce?0>ce?0:255:ce}function kc(E,U,z,te,ce,he){ya(E,U,0,z,te+ce),ya(E,U,1,z,te+he),ya(E,U,2,z,te-he),ya(E,U,3,z,te-ce)}function lr(E){return(20091*E>>16)+E}function wa(E,U,z,te){var ce,he=0,pe=a(16);for(ce=0;4>ce;++ce){var ve=E[U+0]+E[U+8],be=E[U+0]-E[U+8],Be=(35468*E[U+4]>>16)-lr(E[U+12]),Le=lr(E[U+4])+(35468*E[U+12]>>16);pe[he+0]=ve+Le,pe[he+1]=be+Be,pe[he+2]=be-Be,pe[he+3]=ve-Le,he+=4,U++}for(ce=he=0;4>ce;++ce)ve=(E=pe[he+0]+4)+pe[he+8],be=E-pe[he+8],Be=(35468*pe[he+4]>>16)-lr(pe[he+12]),ya(z,te,0,0,ve+(Le=lr(pe[he+4])+(35468*pe[he+12]>>16))),ya(z,te,1,0,be+Be),ya(z,te,2,0,be-Be),ya(z,te,3,0,ve-Le),he++,te+=32}function Zo(E,U,z,te){var ce=E[U+0]+4,he=35468*E[U+4]>>16,pe=lr(E[U+4]),ve=35468*E[U+1]>>16;kc(z,te,0,ce+pe,E=lr(E[U+1]),ve),kc(z,te,1,ce+he,E,ve),kc(z,te,2,ce-he,E,ve),kc(z,te,3,ce-pe,E,ve)}function el(E,U,z,te,ce){wa(E,U,z,te),ce&&wa(E,U+16,z,te+4)}function Ji(E,U,z,te){Io(E,U+0,z,te,1),Io(E,U+32,z,te+128,1)}function gr(E,U,z,te){var ce;for(E=E[U+0]+4,ce=0;4>ce;++ce)for(U=0;4>U;++U)ya(z,te,U,ce,E)}function tl(E,U,z,te){E[U+0]&&Ns(E,U+0,z,te),E[U+16]&&Ns(E,U+16,z,te+4),E[U+32]&&Ns(E,U+32,z,te+128),E[U+48]&&Ns(E,U+48,z,te+128+4)}function li(E,U,z,te){var ce,he=a(16);for(ce=0;4>ce;++ce){var pe=E[U+0+ce]+E[U+12+ce],ve=E[U+4+ce]+E[U+8+ce],be=E[U+4+ce]-E[U+8+ce],Be=E[U+0+ce]-E[U+12+ce];he[0+ce]=pe+ve,he[8+ce]=pe-ve,he[4+ce]=Be+be,he[12+ce]=Be-be}for(ce=0;4>ce;++ce)pe=(E=he[0+4*ce]+3)+he[3+4*ce],ve=he[1+4*ce]+he[2+4*ce],be=he[1+4*ce]-he[2+4*ce],Be=E-he[3+4*ce],z[te+0]=pe+ve>>3,z[te+16]=Be+be>>3,z[te+32]=pe-ve>>3,z[te+48]=Be-be>>3,te+=64}function Co(E,U,z){var te,ce=U-32,he=oa,pe=255-E[ce-1];for(te=0;te<z;++te){var ve,be=he,Be=pe+E[U-1];for(ve=0;ve<z;++ve)E[U+ve]=be[Be+E[ce+ve]];U+=32}}function LA(E,U){Co(E,U,4)}function Fu(E,U){Co(E,U,8)}function Ru(E,U){Co(E,U,16)}function Eo(E,U){var z;for(z=0;16>z;++z)r(E,U+32*z,E,U-32,16)}function Ic(E,U){var z;for(z=16;0<z;--z)s(E,U,E[U-1],16),U+=32}function _o(E,U,z){var te;for(te=0;16>te;++te)s(U,z+32*te,E,16)}function Xi(E,U){var z,te=16;for(z=0;16>z;++z)te+=E[U-1+32*z]+E[U+z-32];_o(te>>5,E,U)}function Ir(E,U){var z,te=8;for(z=0;16>z;++z)te+=E[U-1+32*z];_o(te>>4,E,U)}function So(E,U){var z,te=8;for(z=0;16>z;++z)te+=E[U+z-32];_o(te>>4,E,U)}function Zi(E,U){_o(128,E,U)}function dn(E,U,z){return E+2*U+z+2>>2}function eo(E,U){var z,te=U-32;for(te=new Uint8Array([dn(E[te-1],E[te+0],E[te+1]),dn(E[te+0],E[te+1],E[te+2]),dn(E[te+1],E[te+2],E[te+3]),dn(E[te+2],E[te+3],E[te+4])]),z=0;4>z;++z)r(E,U+32*z,te,0,te.length)}function MA(E,U){var z=E[U-1],te=E[U-1+32],ce=E[U-1+64],he=E[U-1+96];Se(E,U+0,16843009*dn(E[U-1-32],z,te)),Se(E,U+32,16843009*dn(z,te,ce)),Se(E,U+64,16843009*dn(te,ce,he)),Se(E,U+96,16843009*dn(ce,he,he))}function ka(E,U){var z,te=4;for(z=0;4>z;++z)te+=E[U+z-32]+E[U-1+32*z];for(te>>=3,z=0;4>z;++z)s(E,U+32*z,te,4)}function ci(E,U){var z=E[U-1+0],te=E[U-1+32],ce=E[U-1+64],he=E[U-1-32],pe=E[U+0-32],ve=E[U+1-32],be=E[U+2-32],Be=E[U+3-32];E[U+0+96]=dn(te,ce,E[U-1+96]),E[U+1+96]=E[U+0+64]=dn(z,te,ce),E[U+2+96]=E[U+1+64]=E[U+0+32]=dn(he,z,te),E[U+3+96]=E[U+2+64]=E[U+1+32]=E[U+0+0]=dn(pe,he,z),E[U+3+64]=E[U+2+32]=E[U+1+0]=dn(ve,pe,he),E[U+3+32]=E[U+2+0]=dn(be,ve,pe),E[U+3+0]=dn(Be,be,ve)}function qa(E,U){var z=E[U+1-32],te=E[U+2-32],ce=E[U+3-32],he=E[U+4-32],pe=E[U+5-32],ve=E[U+6-32],be=E[U+7-32];E[U+0+0]=dn(E[U+0-32],z,te),E[U+1+0]=E[U+0+32]=dn(z,te,ce),E[U+2+0]=E[U+1+32]=E[U+0+64]=dn(te,ce,he),E[U+3+0]=E[U+2+32]=E[U+1+64]=E[U+0+96]=dn(ce,he,pe),E[U+3+32]=E[U+2+64]=E[U+1+96]=dn(he,pe,ve),E[U+3+64]=E[U+2+96]=dn(pe,ve,be),E[U+3+96]=dn(ve,be,be)}function to(E,U){var z=E[U-1+0],te=E[U-1+32],ce=E[U-1+64],he=E[U-1-32],pe=E[U+0-32],ve=E[U+1-32],be=E[U+2-32],Be=E[U+3-32];E[U+0+0]=E[U+1+64]=he+pe+1>>1,E[U+1+0]=E[U+2+64]=pe+ve+1>>1,E[U+2+0]=E[U+3+64]=ve+be+1>>1,E[U+3+0]=be+Be+1>>1,E[U+0+96]=dn(ce,te,z),E[U+0+64]=dn(te,z,he),E[U+0+32]=E[U+1+96]=dn(z,he,pe),E[U+1+32]=E[U+2+96]=dn(he,pe,ve),E[U+2+32]=E[U+3+96]=dn(pe,ve,be),E[U+3+32]=dn(ve,be,Be)}function ui(E,U){var z=E[U+0-32],te=E[U+1-32],ce=E[U+2-32],he=E[U+3-32],pe=E[U+4-32],ve=E[U+5-32],be=E[U+6-32],Be=E[U+7-32];E[U+0+0]=z+te+1>>1,E[U+1+0]=E[U+0+64]=te+ce+1>>1,E[U+2+0]=E[U+1+64]=ce+he+1>>1,E[U+3+0]=E[U+2+64]=he+pe+1>>1,E[U+0+32]=dn(z,te,ce),E[U+1+32]=E[U+0+96]=dn(te,ce,he),E[U+2+32]=E[U+1+96]=dn(ce,he,pe),E[U+3+32]=E[U+2+96]=dn(he,pe,ve),E[U+3+64]=dn(pe,ve,be),E[U+3+96]=dn(ve,be,Be)}function nl(E,U){var z=E[U-1+0],te=E[U-1+32],ce=E[U-1+64],he=E[U-1+96];E[U+0+0]=z+te+1>>1,E[U+2+0]=E[U+0+32]=te+ce+1>>1,E[U+2+32]=E[U+0+64]=ce+he+1>>1,E[U+1+0]=dn(z,te,ce),E[U+3+0]=E[U+1+32]=dn(te,ce,he),E[U+3+32]=E[U+1+64]=dn(ce,he,he),E[U+3+64]=E[U+2+64]=E[U+0+96]=E[U+1+96]=E[U+2+96]=E[U+3+96]=he}function To(E,U){var z=E[U-1+0],te=E[U-1+32],ce=E[U-1+64],he=E[U-1+96],pe=E[U-1-32],ve=E[U+0-32],be=E[U+1-32],Be=E[U+2-32];E[U+0+0]=E[U+2+32]=z+pe+1>>1,E[U+0+32]=E[U+2+64]=te+z+1>>1,E[U+0+64]=E[U+2+96]=ce+te+1>>1,E[U+0+96]=he+ce+1>>1,E[U+3+0]=dn(ve,be,Be),E[U+2+0]=dn(pe,ve,be),E[U+1+0]=E[U+3+32]=dn(z,pe,ve),E[U+1+32]=E[U+3+64]=dn(te,z,pe),E[U+1+64]=E[U+3+96]=dn(ce,te,z),E[U+1+96]=dn(he,ce,te)}function Du(E,U){var z;for(z=0;8>z;++z)r(E,U+32*z,E,U-32,8)}function Ai(E,U){var z;for(z=0;8>z;++z)s(E,U,E[U-1],8),U+=32}function Ia(E,U,z){var te;for(te=0;8>te;++te)s(U,z+32*te,E,8)}function no(E,U){var z,te=8;for(z=0;8>z;++z)te+=E[U+z-32]+E[U-1+32*z];Ia(te>>4,E,U)}function Ts(E,U){var z,te=4;for(z=0;8>z;++z)te+=E[U+z-32];Ia(te>>3,E,U)}function Kn(E,U){var z,te=4;for(z=0;8>z;++z)te+=E[U-1+32*z];Ia(te>>3,E,U)}function rl(E,U){Ia(128,E,U)}function ro(E,U,z){var te=E[U-z],ce=E[U+0],he=3*(ce-te)+Ph[1020+E[U-2*z]-E[U+z]],pe=Vu[112+(he+4>>3)];E[U-z]=oa[255+te+Vu[112+(he+3>>3)]],E[U+0]=oa[255+ce-pe]}function Uu(E,U,z,te){var ce=E[U+0],he=E[U+z];return oo[255+E[U-2*z]-E[U-z]]>te||oo[255+he-ce]>te}function jl(E,U,z,te){return 4*oo[255+E[U-z]-E[U+0]]+oo[255+E[U-2*z]-E[U+z]]<=te}function Ol(E,U,z,te,ce){var he=E[U-3*z],pe=E[U-2*z],ve=E[U-z],be=E[U+0],Be=E[U+z],Le=E[U+2*z],Ye=E[U+3*z];return 4*oo[255+ve-be]+oo[255+pe-Be]>te?0:oo[255+E[U-4*z]-he]<=ce&&oo[255+he-pe]<=ce&&oo[255+pe-ve]<=ce&&oo[255+Ye-Le]<=ce&&oo[255+Le-Be]<=ce&&oo[255+Be-be]<=ce}function Oi(E,U,z,te){var ce=2*te+1;for(te=0;16>te;++te)jl(E,U+te,z,ce)&&ro(E,U+te,z)}function Fa(E,U,z,te){var ce=2*te+1;for(te=0;16>te;++te)jl(E,U+te*z,1,ce)&&ro(E,U+te*z,1)}function Bs(E,U,z,te){var ce;for(ce=3;0<ce;--ce)Oi(E,U+=4*z,z,te)}function PA(E,U,z,te){var ce;for(ce=3;0<ce;--ce)Fa(E,U+=4,z,te)}function sl(E,U,z,te,ce,he,pe,ve){for(he=2*he+1;0<ce--;){if(Ol(E,U,z,he,pe))if(Uu(E,U,z,ve))ro(E,U,z);else{var be=E,Be=U,Le=z,Ye=be[Be-2*Le],Ke=be[Be-Le],Ve=be[Be+0],gt=be[Be+Le],at=be[Be+2*Le],Me=27*(ct=Ph[1020+3*(Ve-Ke)+Ph[1020+Ye-gt]])+63>>7,je=18*ct+63>>7,ct=9*ct+63>>7;be[Be-3*Le]=oa[255+be[Be-3*Le]+ct],be[Be-2*Le]=oa[255+Ye+je],be[Be-Le]=oa[255+Ke+Me],be[Be+0]=oa[255+Ve-Me],be[Be+Le]=oa[255+gt-je],be[Be+2*Le]=oa[255+at-ct]}U+=te}}function ba(E,U,z,te,ce,he,pe,ve){for(he=2*he+1;0<ce--;){if(Ol(E,U,z,he,pe))if(Uu(E,U,z,ve))ro(E,U,z);else{var be=E,Be=U,Le=z,Ye=be[Be-Le],Ke=be[Be+0],Ve=be[Be+Le],gt=Vu[112+((at=3*(Ke-Ye))+4>>3)],at=Vu[112+(at+3>>3)],Me=gt+1>>1;be[Be-2*Le]=oa[255+be[Be-2*Le]+Me],be[Be-Le]=oa[255+Ye+at],be[Be+0]=oa[255+Ke-gt],be[Be+Le]=oa[255+Ve-Me]}U+=te}}function al(E,U,z,te,ce,he){sl(E,U,z,1,16,te,ce,he)}function Bo(E,U,z,te,ce,he){sl(E,U,1,z,16,te,ce,he)}function Fc(E,U,z,te,ce,he){var pe;for(pe=3;0<pe;--pe)ba(E,U+=4*z,z,1,16,te,ce,he)}function Ql(E,U,z,te,ce,he){var pe;for(pe=3;0<pe;--pe)ba(E,U+=4,1,z,16,te,ce,he)}function Rc(E,U,z,te,ce,he,pe,ve){sl(E,U,ce,1,8,he,pe,ve),sl(z,te,ce,1,8,he,pe,ve)}function Lu(E,U,z,te,ce,he,pe,ve){sl(E,U,1,ce,8,he,pe,ve),sl(z,te,1,ce,8,he,pe,ve)}function Hl(E,U,z,te,ce,he,pe,ve){ba(E,U+4*ce,ce,1,8,he,pe,ve),ba(z,te+4*ce,ce,1,8,he,pe,ve)}function il(E,U,z,te,ce,he,pe,ve){ba(E,U+4,1,ce,8,he,pe,ve),ba(z,te+4,1,ce,8,he,pe,ve)}function Vl(){this.ba=new Wr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Dc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ol(){this.ua=0,this.Wa=new Ce,this.vb=new Ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new L}function jA(){this.xb=this.a=0,this.l=new Ps,this.ca=new Wr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ol,this.ab=0,this.gc=i(4,Gl),this.Oc=0}function No(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ll(E,U,z,te,ce,he,pe){for(E=E==null?0:E[U+0],U=0;U<pe;++U)ce[he+U]=E+z[te+U]&255,E=ce[he+U]}function zl(E,U,z,te,ce,he,pe){var ve;if(E==null)ll(null,null,z,te,ce,he,pe);else for(ve=0;ve<pe;++ve)ce[he+ve]=E[U+ve]+z[te+ve]&255}function Ra(E,U,z,te,ce,he,pe){if(E==null)ll(null,null,z,te,ce,he,pe);else{var ve,be=E[U+0],Be=be,Le=be;for(ve=0;ve<pe;++ve)Be=Le+(be=E[U+ve])-Be,Le=z[te+ve]+(-256&Be?0>Be?0:255:Be)&255,Be=be,ce[he+ve]=Le}}function Uc(E,U,z,te){var ce=U.width,he=U.o;if(e(E!=null&&U!=null),0>z||0>=te||z+te>he)return null;if(!E.Cc){if(E.ga==null){var pe;if(E.ga=new No,(pe=E.ga==null)||(pe=U.width*U.o,e(E.Gb.length==0),E.Gb=a(pe),E.Uc=0,E.Gb==null?pe=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,pe=1),pe=!pe),!pe){pe=E.ga;var ve=E.Fa,be=E.P,Be=E.qc,Le=E.mb,Ye=E.nb,Ke=be+1,Ve=Be-1,gt=pe.l;if(e(ve!=null&&Le!=null&&U!=null),hl[0]=null,hl[1]=ll,hl[2]=zl,hl[3]=Ra,pe.ca=Le,pe.tb=Ye,pe.c=U.width,pe.i=U.height,e(0<pe.c&&0<pe.i),1>=Be)U=0;else if(pe.$a=ve[be+0]>>0&3,pe.Z=ve[be+0]>>2&3,pe.Lc=ve[be+0]>>4&3,be=ve[be+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||be)U=0;else if(gt.put=ms,gt.ac=Or,gt.bc=xa,gt.ma=pe,gt.width=U.width,gt.height=U.height,gt.Da=U.Da,gt.v=U.v,gt.va=U.va,gt.j=U.j,gt.o=U.o,pe.$a)e:{e(pe.$a==1),U=tt();t:for(;;){if(U==null){U=0;break e}if(e(pe!=null),pe.mc=U,U.c=pe.c,U.i=pe.i,U.l=pe.l,U.l.ma=pe,U.l.width=pe.c,U.l.height=pe.i,U.a=0,re(U.m,ve,Ke,Ve),!Qe(pe.c,pe.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Ee(U.s)?(pe.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=a(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(pe.ic=0,U=We(U,pe.c)),!U))break t;U=1;break e}pe.mc=null,U=0}else U=Ve>=pe.c*pe.i;pe=!U}if(pe)return null;E.ga.Lc!=1?E.Ga=0:te=he-z}e(E.ga!=null),e(z+te<=he);e:{if(U=(ve=E.ga).c,he=ve.l.o,ve.$a==0){if(Ke=E.rc,Ve=E.Vc,gt=E.Fa,be=E.P+1+z*U,Be=E.mb,Le=E.nb+z*U,e(be<=E.P+E.qc),ve.Z!=0)for(e(hl[ve.Z]!=null),pe=0;pe<te;++pe)hl[ve.Z](Ke,Ve,gt,be,Be,Le,U),Ke=Be,Ve=Le,Le+=U,be+=U;else for(pe=0;pe<te;++pe)r(Be,Le,gt,be,U),Ke=Be,Ve=Le,Le+=U,be+=U;E.rc=Ke,E.Vc=Ve}else{if(e(ve.mc!=null),U=z+te,e((pe=ve.mc)!=null),e(U<=pe.i),pe.C>=U)U=1;else if(ve.ic||He(),ve.ic){ve=pe.V,Ke=pe.Ba,Ve=pe.c;var at=pe.i,Me=(gt=1,be=pe.$/Ve,Be=pe.$%Ve,Le=pe.m,Ye=pe.s,pe.$),je=Ve*at,ct=Ve*U,vt=Ye.wc,ht=Me<ct?Qr(Ye,Be,be):null;e(Me<=je),e(U<=at),e(Ee(Ye));t:for(;;){for(;!Le.h&&Me<ct;){if(Be&vt||(ht=Qr(Ye,Be,be)),e(ht!=null),ie(Le),256>(at=_r(ht.G[0],ht.H[0],Le)))ve[Ke+Me]=at,++Me,++Be>=Ve&&(Be=0,++be<=U&&!(be%16)&&Te(pe,be));else{if(!(280>at)){gt=0;break t}at=or(at-256,Le);var Gt,Lt=_r(ht.G[4],ht.H[4],Le);if(ie(Le),!(Me>=(Lt=Zn(Ve,Lt=or(Lt,Le)))&&je-Me>=at)){gt=0;break t}for(Gt=0;Gt<at;++Gt)ve[Ke+Me+Gt]=ve[Ke+Me+Gt-Lt];for(Me+=at,Be+=at;Be>=Ve;)Be-=Ve,++be<=U&&!(be%16)&&Te(pe,be);Me<ct&&Be&vt&&(ht=Qr(Ye,Be,be))}e(Le.h==J(Le))}Te(pe,be>U?U:be);break t}!gt||Le.h&&Me<je?(gt=0,pe.a=Le.h?5:3):pe.$=Me,U=gt}else U=ke(pe,pe.V,pe.Ba,pe.c,pe.i,U,Je);if(!U){te=0;break e}}z+te>=he&&(E.Cc=1),te=1}if(!te)return null;if(E.Cc&&((te=E.ga)!=null&&(te.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+z*ce}function V(E,U,z,te,ce,he){for(;0<ce--;){var pe,ve=E,be=U+(z?1:0),Be=E,Le=U+(z?0:3);for(pe=0;pe<te;++pe){var Ye=Be[Le+4*pe];Ye!=255&&(Ye*=32897,ve[be+4*pe+0]=ve[be+4*pe+0]*Ye>>23,ve[be+4*pe+1]=ve[be+4*pe+1]*Ye>>23,ve[be+4*pe+2]=ve[be+4*pe+2]*Ye>>23)}U+=he}}function ue(E,U,z,te,ce){for(;0<te--;){var he;for(he=0;he<z;++he){var pe=E[U+2*he+0],ve=15&(Be=E[U+2*he+1]),be=4369*ve,Be=(240&Be|Be>>4)*be>>16;E[U+2*he+0]=(240&pe|pe>>4)*be>>16&240|(15&pe|pe<<4)*be>>16>>4&15,E[U+2*he+1]=240&Be|ve}U+=ce}}function Ie(E,U,z,te,ce,he,pe,ve){var be,Be,Le=255;for(Be=0;Be<ce;++Be){for(be=0;be<te;++be){var Ye=E[U+be];he[pe+4*be]=Ye,Le&=Ye}U+=z,pe+=ve}return Le!=255}function Ue(E,U,z,te,ce){var he;for(he=0;he<ce;++he)z[te+he]=E[U+he]>>8}function He(){Qi=V,Vn=ue,Gn=Ie,Vr=Ue}function ot(E,U,z){N[E]=function(te,ce,he,pe,ve,be,Be,Le,Ye,Ke,Ve,gt,at,Me,je,ct,vt){var ht,Gt=vt-1>>1,Lt=ve[be+0]|Be[Le+0]<<16,nn=Ye[Ke+0]|Ve[gt+0]<<16;e(te!=null);var Qt=3*Lt+nn+131074>>2;for(U(te[ce+0],255&Qt,Qt>>16,at,Me),he!=null&&(Qt=3*nn+Lt+131074>>2,U(he[pe+0],255&Qt,Qt>>16,je,ct)),ht=1;ht<=Gt;++ht){var ur=ve[be+ht]|Be[Le+ht]<<16,vr=Ye[Ke+ht]|Ve[gt+ht]<<16,Hn=Lt+ur+nn+vr+524296,Mn=Hn+2*(ur+nn)>>3;Qt=Mn+Lt>>1,Lt=(Hn=Hn+2*(Lt+vr)>>3)+ur>>1,U(te[ce+2*ht-1],255&Qt,Qt>>16,at,Me+(2*ht-1)*z),U(te[ce+2*ht-0],255&Lt,Lt>>16,at,Me+(2*ht-0)*z),he!=null&&(Qt=Hn+nn>>1,Lt=Mn+vr>>1,U(he[pe+2*ht-1],255&Qt,Qt>>16,je,ct+(2*ht-1)*z),U(he[pe+2*ht+0],255&Lt,Lt>>16,je,ct+(2*ht+0)*z)),Lt=ur,nn=vr}1&vt||(Qt=3*Lt+nn+131074>>2,U(te[ce+vt-1],255&Qt,Qt>>16,at,Me+(vt-1)*z),he!=null&&(Qt=3*nn+Lt+131074>>2,U(he[pe+vt-1],255&Qt,Qt>>16,je,ct+(vt-1)*z)))}}function _t(){la[Da]=ec,la[GA]=ml,la[dl]=$c,la[vf]=Qh,la[Gu]=Hh,la[$l]=KA,la[jh]=Vh,la[yf]=ml,la[Kc]=Qh,la[Yl]=Hh,la[zA]=KA}function Ot(E){return E&-16384?0>E?0:255:E>>Vw}function S(E,U){return Ot((19077*E>>8)+(26149*U>>8)-14234)}function Y(E,U,z){return Ot((19077*E>>8)-(6419*U>>8)-(13320*z>>8)+8708)}function se(E,U){return Ot((19077*E>>8)+(33050*U>>8)-17685)}function ye(E,U,z,te,ce){te[ce+0]=S(E,z),te[ce+1]=Y(E,U,z),te[ce+2]=se(E,U)}function Oe(E,U,z,te,ce){te[ce+0]=se(E,U),te[ce+1]=Y(E,U,z),te[ce+2]=S(E,z)}function Xe(E,U,z,te,ce){var he=Y(E,U,z);U=he<<3&224|se(E,U)>>3,te[ce+0]=248&S(E,z)|he>>5,te[ce+1]=U}function St(E,U,z,te,ce){var he=240&se(E,U)|15;te[ce+0]=240&S(E,z)|Y(E,U,z)>>4,te[ce+1]=he}function fn(E,U,z,te,ce){te[ce+0]=255,ye(E,U,z,te,ce+1)}function Wn(E,U,z,te,ce){Oe(E,U,z,te,ce),te[ce+3]=255}function Sn(E,U,z,te,ce){ye(E,U,z,te,ce),te[ce+3]=255}function xr(E,U){return 0>E?0:E>U?U:E}function Sr(E,U,z){N[E]=function(te,ce,he,pe,ve,be,Be,Le,Ye){for(var Ke=Le+(-2&Ye)*z;Le!=Ke;)U(te[ce+0],he[pe+0],ve[be+0],Be,Le),U(te[ce+1],he[pe+0],ve[be+0],Be,Le+z),ce+=2,++pe,++be,Le+=2*z;1&Ye&&U(te[ce+0],he[pe+0],ve[be+0],Be,Le)}}function so(E,U,z){return z==0?E==0?U==0?6:5:U==0?4:0:z}function ps(E,U,z,te,ce){switch(E>>>30){case 3:Io(U,z,te,ce,0);break;case 2:us(U,z,te,ce);break;case 1:Ns(U,z,te,ce)}}function di(E,U){var z,te,ce=U.M,he=U.Nb,pe=E.oc,ve=E.pc+40,be=E.oc,Be=E.pc+584,Le=E.oc,Ye=E.pc+600;for(z=0;16>z;++z)pe[ve+32*z-1]=129;for(z=0;8>z;++z)be[Be+32*z-1]=129,Le[Ye+32*z-1]=129;for(0<ce?pe[ve-1-32]=be[Be-1-32]=Le[Ye-1-32]=129:(s(pe,ve-32-1,127,21),s(be,Be-32-1,127,9),s(Le,Ye-32-1,127,9)),te=0;te<E.za;++te){var Ke=U.ya[U.aa+te];if(0<te){for(z=-1;16>z;++z)r(pe,ve+32*z-4,pe,ve+32*z+12,4);for(z=-1;8>z;++z)r(be,Be+32*z-4,be,Be+32*z+4,4),r(Le,Ye+32*z-4,Le,Ye+32*z+4,4)}var Ve=E.Gd,gt=E.Hd+te,at=Ke.ad,Me=Ke.Hc;if(0<ce&&(r(pe,ve-32,Ve[gt].y,0,16),r(be,Be-32,Ve[gt].f,0,8),r(Le,Ye-32,Ve[gt].ea,0,8)),Ke.Za){var je=pe,ct=ve-32+16;for(0<ce&&(te>=E.za-1?s(je,ct,Ve[gt].y[15],4):r(je,ct,Ve[gt+1].y,0,4)),z=0;4>z;z++)je[ct+128+z]=je[ct+256+z]=je[ct+384+z]=je[ct+0+z];for(z=0;16>z;++z,Me<<=2)je=pe,ct=ve+Wu[z],Wa[Ke.Ob[z]](je,ct),ps(Me,at,16*+z,je,ct)}else if(je=so(te,ce,Ke.Ob[0]),Zl[je](pe,ve),Me!=0)for(z=0;16>z;++z,Me<<=2)ps(Me,at,16*+z,pe,ve+Wu[z]);for(z=Ke.Gc,je=so(te,ce,Ke.Dd),Vi[je](be,Be),Vi[je](Le,Ye),Me=at,je=be,ct=Be,255&(Ke=z>>0)&&(170&Ke?Fo(Me,256,je,ct):mi(Me,256,je,ct)),Ke=Le,Me=Ye,255&(z>>=8)&&(170&z?Fo(at,320,Ke,Me):mi(at,320,Ke,Me)),ce<E.Ub-1&&(r(Ve[gt].y,0,pe,ve+480,16),r(Ve[gt].f,0,be,Be+224,8),r(Ve[gt].ea,0,Le,Ye+224,8)),z=8*he*E.B,Ve=E.sa,gt=E.ta+16*te+16*he*E.R,at=E.qa,Ke=E.ra+8*te+z,Me=E.Ha,je=E.Ia+8*te+z,z=0;16>z;++z)r(Ve,gt+z*E.R,pe,ve+32*z,16);for(z=0;8>z;++z)r(at,Ke+z*E.B,be,Be+32*z,8),r(Me,je+z*E.B,Le,Ye+32*z,8)}}function cl(E,U,z,te,ce,he,pe,ve,be){var Be=[0],Le=[0],Ye=0,Ke=be!=null?be.kd:0,Ve=be??new Dc;if(E==null||12>z)return 7;Ve.data=E,Ve.w=U,Ve.ha=z,U=[U],z=[z],Ve.gb=[Ve.gb];e:{var gt=U,at=z,Me=Ve.gb;if(e(E!=null),e(at!=null),e(Me!=null),Me[0]=0,12<=at[0]&&!n(E,gt[0],"RIFF")){if(n(E,gt[0]+8,"WEBP")){Me=3;break e}var je=Fe(E,gt[0]+4);if(12>je||4294967286<je){Me=3;break e}if(Ke&&je>at[0]-8){Me=7;break e}Me[0]=je,gt[0]+=12,at[0]-=12}Me=0}if(Me!=0)return Me;for(je=0<Ve.gb[0],z=z[0];;){e:{var ct=E;at=U,Me=z;var vt=Be,ht=Le,Gt=gt=[0];if((Qt=Ye=[Ye])[0]=0,8>Me[0])Me=7;else{if(!n(ct,at[0],"VP8X")){if(Fe(ct,at[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Lt=Fe(ct,at[0]+8),nn=1+ae(ct,at[0]+12);if(2147483648<=nn*(ct=1+ae(ct,at[0]+15))){Me=3;break e}Gt!=null&&(Gt[0]=Lt),vt!=null&&(vt[0]=nn),ht!=null&&(ht[0]=ct),at[0]+=18,Me[0]-=18,Qt[0]=1}Me=0}}if(Ye=Ye[0],gt=gt[0],Me!=0)return Me;if(at=!!(2&gt),!je&&Ye)return 3;if(he!=null&&(he[0]=!!(16&gt)),pe!=null&&(pe[0]=at),ve!=null&&(ve[0]=0),pe=Be[0],gt=Le[0],Ye&&at&&be==null){Me=0;break}if(4>z){Me=7;break}if(je&&Ye||!je&&!Ye&&!n(E,U[0],"ALPH")){z=[z],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{Lt=E,Me=U,je=z;var Qt=Ve.gb;vt=Ve.na,ht=Ve.P,Gt=Ve.Sa,nn=22,e(Lt!=null),e(je!=null),ct=Me[0];var ur=je[0];for(e(vt!=null),e(Gt!=null),vt[0]=null,ht[0]=null,Gt[0]=0;;){if(Me[0]=ct,je[0]=ur,8>ur){Me=7;break e}var vr=Fe(Lt,ct+4);if(4294967286<vr){Me=3;break e}var Hn=8+vr+1&-2;if(nn+=Hn,0<Qt&&nn>Qt){Me=3;break e}if(!n(Lt,ct,"VP8 ")||!n(Lt,ct,"VP8L")){Me=0;break e}if(ur[0]<Hn){Me=7;break e}n(Lt,ct,"ALPH")||(vt[0]=Lt,ht[0]=ct+8,Gt[0]=vr),ct+=Hn,ur-=Hn}}if(z=z[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Me!=0)break}z=[z],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(Qt=E,Me=U,je=z,vt=Ve.gb[0],ht=Ve.Ja,Gt=Ve.xa,Lt=Me[0],ct=!n(Qt,Lt,"VP8 "),nn=!n(Qt,Lt,"VP8L"),e(Qt!=null),e(je!=null),e(ht!=null),e(Gt!=null),8>je[0])Me=7;else{if(ct||nn){if(Qt=Fe(Qt,Lt+4),12<=vt&&Qt>vt-12){Me=3;break e}if(Ke&&Qt>je[0]-8){Me=7;break e}ht[0]=Qt,Me[0]+=8,je[0]-=8,Gt[0]=nn}else Gt[0]=5<=je[0]&&Qt[Lt+0]==47&&!(Qt[Lt+4]>>5),ht[0]=je[0];Me=0}if(z=z[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],U=U[0],Me!=0)break;if(4294967286<Ve.Ja)return 3;if(ve==null||at||(ve[0]=Ve.xa?2:1),pe=[pe],gt=[gt],Ve.xa){if(5>z){Me=7;break}ve=pe,Ke=gt,at=he,E==null||5>z?E=0:5<=z&&E[U+0]==47&&!(E[U+4]>>5)?(je=[0],Qt=[0],vt=[0],re(ht=new j,E,U,z),Ht(ht,je,Qt,vt)?(ve!=null&&(ve[0]=je[0]),Ke!=null&&(Ke[0]=Qt[0]),at!=null&&(at[0]=vt[0]),E=1):E=0):E=0}else{if(10>z){Me=7;break}ve=gt,E==null||10>z||!aa(E,U+3,z-3)?E=0:(Ke=E[U+0]|E[U+1]<<8|E[U+2]<<16,at=16383&(E[U+7]<<8|E[U+6]),E=16383&(E[U+9]<<8|E[U+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=Ve.Ja||!at||!E?E=0:(pe&&(pe[0]=at),ve&&(ve[0]=E),E=1))}if(!E||(pe=pe[0],gt=gt[0],Ye&&(Be[0]!=pe||Le[0]!=gt)))return 3;be!=null&&(be[0]=Ve,be.offset=U-be.w,e(4294967286>U-be.w),e(be.offset==be.ha-z));break}return Me==0||Me==7&&Ye&&be==null?(he!=null&&(he[0]|=Ve.na!=null&&0<Ve.na.length),te!=null&&(te[0]=pe),ce!=null&&(ce[0]=gt),0):Me}function Lc(E,U,z){var te=U.width,ce=U.height,he=0,pe=0,ve=te,be=ce;if(U.Da=E!=null&&0<E.Da,U.Da&&(ve=E.cd,be=E.bd,he=E.v,pe=E.j,11>z||(he&=-2,pe&=-2),0>he||0>pe||0>=ve||0>=be||he+ve>te||pe+be>ce))return 0;if(U.v=he,U.j=pe,U.va=he+ve,U.o=pe+be,U.U=ve,U.T=be,U.da=E!=null&&0<E.da,U.da){if(!Ge(ve,be,z=[E.ib],he=[E.hb]))return 0;U.ib=z[0],U.hb=he[0]}return U.ob=E!=null&&E.ob,U.Kb=E==null||!E.Sd,U.da&&(U.ob=U.ib<3*te/4&&U.hb<3*ce/4,U.Kb=0),1}function OA(E){if(E==null)return 2;if(11>E.S){var U=E.f.RGBA;U.fb+=(E.height-1)*U.A,U.A=-U.A}else U=E.f.kb,E=E.height,U.O+=(E-1)*U.fa,U.fa=-U.fa,U.N+=(E-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(E-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(E-1)*U.lb,U.lb=-U.lb);return 0}function Mu(E,U,z,te){if(te==null||0>=E||0>=U)return 2;if(z!=null){if(z.Da){var ce=z.cd,he=z.bd,pe=-2&z.v,ve=-2&z.j;if(0>pe||0>ve||0>=ce||0>=he||pe+ce>E||ve+he>U)return 2;E=ce,U=he}if(z.da){if(!Ge(E,U,ce=[z.ib],he=[z.hb]))return 2;E=ce[0],U=he[0]}}te.width=E,te.height=U;e:{var be=te.width,Be=te.height;if(E=te.S,0>=be||0>=Be||!(E>=Da&&13>E))E=2;else{if(0>=te.Rd&&te.sd==null){pe=he=ce=U=0;var Le=(ve=be*Xx[E])*Be;if(11>E||(he=(Be+1)/2*(U=(be+1)/2),E==12&&(pe=(ce=be)*Be)),(Be=a(Le+2*he+pe))==null){E=1;break e}te.sd=Be,11>E?((be=te.f.RGBA).eb=Be,be.fb=0,be.A=ve,be.size=Le):((be=te.f.kb).y=Be,be.O=0,be.fa=ve,be.Fd=Le,be.f=Be,be.N=0+Le,be.Ab=U,be.Cd=he,be.ea=Be,be.W=0+Le+he,be.Db=U,be.Ed=he,E==12&&(be.F=Be,be.J=0+Le+2*he),be.Tc=pe,be.lb=ce)}if(U=1,ce=te.S,he=te.width,pe=te.height,ce>=Da&&13>ce)if(11>ce)E=te.f.RGBA,U&=(ve=Math.abs(E.A))*(pe-1)+he<=E.size,U&=ve>=he*Xx[ce],U&=E.eb!=null;else{E=te.f.kb,ve=(he+1)/2,Le=(pe+1)/2,be=Math.abs(E.fa),Be=Math.abs(E.Ab);var Ye=Math.abs(E.Db),Ke=Math.abs(E.lb),Ve=Ke*(pe-1)+he;U&=be*(pe-1)+he<=E.Fd,U&=Be*(Le-1)+ve<=E.Cd,U=(U&=Ye*(Le-1)+ve<=E.Ed)&be>=he&Be>=ve&Ye>=ve,U&=E.y!=null,U&=E.f!=null,U&=E.ea!=null,ce==12&&(U&=Ke>=he,U&=Ve<=E.Tc,U&=E.F!=null)}else U=0;E=U?0:2}}return E!=0||z!=null&&z.fd&&(E=OA(te)),E}var js=64,Mc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pu=24,ju=32,QA=8,fi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(E){return E},N.Predictor2=function(E,U,z){return U[z+0]},N.Predictor3=function(E,U,z){return U[z+1]},N.Predictor4=function(E,U,z){return U[z-1]},N.Predictor5=function(E,U,z){return ut(ut(E,U[z+1]),U[z+0])},N.Predictor6=function(E,U,z){return ut(E,U[z-1])},N.Predictor7=function(E,U,z){return ut(E,U[z+0])},N.Predictor8=function(E,U,z){return ut(U[z-1],U[z+0])},N.Predictor9=function(E,U,z){return ut(U[z+0],U[z+1])},N.Predictor10=function(E,U,z){return ut(ut(E,U[z-1]),ut(U[z+0],U[z+1]))},N.Predictor11=function(E,U,z){var te=U[z+0];return 0>=Wt(te>>24&255,E>>24&255,(U=U[z-1])>>24&255)+Wt(te>>16&255,E>>16&255,U>>16&255)+Wt(te>>8&255,E>>8&255,U>>8&255)+Wt(255&te,255&E,255&U)?te:E},N.Predictor12=function(E,U,z){var te=U[z+0];return(kt((E>>24&255)+(te>>24&255)-((U=U[z-1])>>24&255))<<24|kt((E>>16&255)+(te>>16&255)-(U>>16&255))<<16|kt((E>>8&255)+(te>>8&255)-(U>>8&255))<<8|kt((255&E)+(255&te)-(255&U)))>>>0},N.Predictor13=function(E,U,z){var te=U[z-1];return(Ft((E=ut(E,U[z+0]))>>24&255,te>>24&255)<<24|Ft(E>>16&255,te>>16&255)<<16|Ft(E>>8&255,te>>8&255)<<8|Ft(E>>0&255,te>>0&255))>>>0};var Km=N.PredictorAdd0;N.PredictorAdd1=Mt,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var gf=N.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Mh,ao=N.ColorIndexInverseTransform,ia=N.MapARGB,Pc=N.VP8LColorIndexInverseTransformAlpha,xf=N.MapAlpha,ql=N.VP8LPredictorsAdd=[];ql.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var jc,Ka,Ca,Oc,hi,ko,ul,Io,us,Fo,Ns,mi,Ou,Al,HA,Qc,Hc,Vc,Qu,VA,Gc,Kl,Hu,As,Qi,Vn,Gn,Vr,gs=a(511),io=a(2041),zc=a(225),qc=a(767),Wl=0,Ph=io,Vu=zc,oa=qc,oo=gs,Da=0,GA=1,dl=2,vf=3,Gu=4,$l=5,jh=6,yf=7,Kc=8,Yl=9,zA=10,Oh=[2,3,7],lo=[3,3,11],Hi=[280,256,256,256,40],zu=[0,1,1,1,0],Jl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Kx=8,wf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Os=null,ds=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ku=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zl=[],Wa=[],Vi=[],$x=1,qA=2,hl=[],la=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Oe,3),ot("UpsampleRgbaLinePair",Sn,4),ot("UpsampleBgraLinePair",Wn,4),ot("UpsampleArgbLinePair",fn,4),ot("UpsampleRgba4444LinePair",St,2),ot("UpsampleRgb565LinePair",Xe,2);var ec=N.UpsampleRgbLinePair,$c=N.UpsampleBgrLinePair,ml=N.UpsampleRgbaLinePair,Qh=N.UpsampleBgraLinePair,Hh=N.UpsampleArgbLinePair,KA=N.UpsampleRgba4444LinePair,Vh=N.UpsampleRgb565LinePair,pl=16,Qs=1<<pl-1,Yc=-227,Gh=482,Vw=6,Yx=0,Gw=a(256),Hs=a(256),$m=a(256),Cf=a(256),Ef=a(Gh-Yc),Ym=a(Gh-Yc);Sr("YuvToRgbRow",ye,3),Sr("YuvToBgrRow",Oe,3),Sr("YuvToRgbaRow",Sn,4),Sr("YuvToBgraRow",Wn,4),Sr("YuvToArgbRow",fn,4),Sr("YuvToRgba4444Row",St,2),Sr("YuvToRgb565Row",Xe,2);var Wu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tc=[0,2,8],zw=[8,7,6,4,4,2,2,2,1,1,1,1],Jx=1;this.WebPDecodeRGBA=function(E,U,z,te,ce){var he=GA,pe=new Vl,ve=new Wr;pe.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var be=ve.width,Be=ve.height,Le=new cs;if(Le==null||E==null)var Ye=2;else e(Le!=null),Ye=cl(E,U,z,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(Ye!=0?be=0:(be!=null&&(be[0]=Le.width[0]),Be!=null&&(Be[0]=Le.height[0]),be=1),be){ve.width=ve.width[0],ve.height=ve.height[0],te!=null&&(te[0]=ve.width),ce!=null&&(ce[0]=ve.height);e:{if(te=new Ps,(ce=new Dc).data=E,ce.w=U,ce.ha=z,ce.kd=1,U=[0],e(ce!=null),((E=cl(ce.data,ce.w,ce.ha,null,null,null,U,null,ce))==0||E==7)&&U[0]&&(E=4),(U=E)==0){if(e(pe!=null),te.data=ce.data,te.w=ce.w+ce.offset,te.ha=ce.ha-ce.offset,te.put=ms,te.ac=Or,te.bc=xa,te.ma=pe,ce.xa){if((E=tt())==null){pe=1;break e}if(function(Ke,Ve){var gt=[0],at=[0],Me=[0];t:for(;;){if(Ke==null)return 0;if(Ve==null)return Ke.a=2,0;if(Ke.l=Ve,Ke.a=0,re(Ke.m,Ve.data,Ve.w,Ve.ha),!Ht(Ke.m,gt,at,Me)){Ke.a=3;break t}if(Ke.xb=qA,Ve.width=gt[0],Ve.height=at[0],!Qe(gt[0],at[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(E,te)){if(te=(U=Mu(te.width,te.height,pe.Oa,pe.ba))==0){t:{te=E;n:for(;;){if(te==null){te=0;break t}if(e(te.s.yc!=null),e(te.s.Ya!=null),e(0<te.s.Wb),e((z=te.l)!=null),e((ce=z.ma)!=null),te.xb!=0){if(te.ca=ce.ba,te.tb=ce.tb,e(te.ca!=null),!Lc(ce.Oa,z,vf)){te.a=2;break n}if(!We(te,z.width)||z.da)break n;if((z.da||Bn(te.ca.S))&&He(),11>te.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),te.ca.f.kb.F!=null&&He()),te.Pb&&0<te.s.ua&&te.s.vb.X==null&&!et(te.s.vb,te.s.Wa.Xa)){te.a=1;break n}te.xb=0}if(!ke(te,te.V,te.Ba,te.c,te.i,z.o,Ne))break n;ce.Dc=te.Ma,te=1;break t}e(te.a!=0),te=0}te=!te}te&&(U=E.a)}else U=E.a}else{if((E=new va)==null){pe=1;break e}if(E.Fa=ce.na,E.P=ce.P,E.qc=ce.Sa,Nc(E,te)){if((U=Mu(te.width,te.height,pe.Oa,pe.ba))==0){if(E.Aa=0,z=pe.Oa,e((ce=E)!=null),z!=null){if(0<(be=0>(be=z.Md)?0:100<be?255:255*be/100)){for(Be=Le=0;4>Be;++Be)12>(Ye=ce.pb[Be]).lc&&(Ye.ia=be*zw[0>Ye.lc?0:Ye.lc]>>3),Le|=Ye.ia;Le&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=z.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}Iu(E,te)||(U=E.a)}}else U=E.a}U==0&&pe.Oa!=null&&pe.Oa.fd&&(U=OA(pe.ba))}pe=U}he=pe!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var Xx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,B){for(var O="",M=0;M<4;M++)O+=String.fromCharCode(N[B++]);return O}function d(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16)>>>0}function h(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16|N[B+3]<<24)>>>0}new l;var p=[0],g=[0],b=[],w=new l,C=t,T=function(N,B){var O={},M=0,L=!1,H=0,G=0;if(O.frames=[],!function(W,J,ne,ie){for(var de=0;de<ie;de++)if(W[J+de]!=ne.charCodeAt(de))return!0;return!1}(N,B,"RIFF",4)){var oe,q;for(h(N,B+=4),B+=8;B<N.length;){var X=u(N,B),re=h(N,B+=4);B+=4;var K=re+(1&re);switch(X){case"VP8 ":case"VP8L":O.frames[M]===void 0&&(O.frames[M]={}),(j=O.frames[M]).src_off=L?G:B-8,j.src_size=H+re+8,M++,L&&(L=!1,H=0,G=0);break;case"VP8X":(j=O.header={}).feature_flags=N[B];var Z=B+4;j.canvas_width=1+d(N,Z),Z+=3,j.canvas_height=1+d(N,Z),Z+=3;break;case"ALPH":L=!0,H=K+8,G=B-8;break;case"ANIM":(j=O.header).bgcolor=h(N,B),Z=B+4,j.loop_count=(oe=N)[(q=Z)+0]<<0|oe[q+1]<<8,Z+=2;break;case"ANMF":var Ae,j;(j=O.frames[M]={}).offset_x=2*d(N,B),B+=3,j.offset_y=2*d(N,B),B+=3,j.width=1+d(N,B),B+=3,j.height=1+d(N,B),B+=3,j.duration=d(N,B),B+=3,Ae=N[B++],j.dispose=1&Ae,j.blend=Ae>>1&1}X!="ANMF"&&(B+=K)}return O}}(C,0);T.response=C,T.rgbaoutput=!0,T.dataurl=!1;var I=T.header?T.header:null,k=T.frames?T.frames:null;if(I){I.loop_counter=I.loop_count,p=[I.canvas_height],g=[I.canvas_width];for(var R=0;R<k.length&&k[R].blend!=0;R++);}var D=k[0],P=w.WebPDecodeRGBA(C,D.src_off,D.src_size,g,p);D.rgba=P,D.imgwidth=g[0],D.imgheight=p[0];for(var _=0;_<g[0]*p[0]*4;_++)b[_]=P[_];return this.width=g,this.height=p,this.data=b,this}(function(t){var e=function(){return typeof I_=="function"},n=function(p,g,b,w){var C=4,T=i;switch(w){case t.image_compression.FAST:C=1,T=a;break;case t.image_compression.MEDIUM:C=6,T=o;break;case t.image_compression.SLOW:C=9,T=l}p=r(p,g,b,T);var I=I_(p,{level:C});return t.__addimage__.arrayBufferToBinaryString(I)},r=function(p,g,b,w){for(var C,T,I,k=p.length/g,R=new Uint8Array(p.length+k),D=d(),P=0;P<k;P+=1){if(I=P*g,C=p.subarray(I,I+g),w)R.set(w(C,b,T),I+P);else{for(var _,N=D.length,B=[];_<N;_+=1)B[_]=D[_](C,b,T);var O=h(B.concat());R.set(B[O],I+P)}T=C}return R},s=function(p){var g=Array.apply([],p);return g.unshift(0),g},a=function(p,g){var b,w=[],C=p.length;w[0]=1;for(var T=0;T<C;T+=1)b=p[T-g]||0,w[T+1]=p[T]-b+256&255;return w},i=function(p,g,b){var w,C=[],T=p.length;C[0]=2;for(var I=0;I<T;I+=1)w=b&&b[I]||0,C[I+1]=p[I]-w+256&255;return C},o=function(p,g,b){var w,C,T=[],I=p.length;T[0]=3;for(var k=0;k<I;k+=1)w=p[k-g]||0,C=b&&b[k]||0,T[k+1]=p[k]+256-(w+C>>>1)&255;return T},l=function(p,g,b){var w,C,T,I,k=[],R=p.length;k[0]=4;for(var D=0;D<R;D+=1)w=p[D-g]||0,C=b&&b[D]||0,T=b&&b[D-g]||0,I=u(w,C,T),k[D+1]=p[D]-I+256&255;return k},u=function(p,g,b){if(p===g&&g===b)return p;var w=Math.abs(g-b),C=Math.abs(p-b),T=Math.abs(p+g-b-b);return w<=C&&w<=T?p:C<=T?g:b},d=function(){return[s,a,i,o,l]},h=function(p){var g=p.map(function(b){return b.reduce(function(w,C){return w+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(p,g,b,w){var C,T,I,k,R,D,P,_,N,B,O,M,L,H,G,oe=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(I=new Iae(p)).imgData,T=I.bits,C=I.colorSpace,R=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){N=(_=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,O=new Uint8Array(N*I.colors),B=new Uint8Array(N);var X,re=I.pixelBitlength-I.bits;for(H=0,G=0;H<N;H++){for(L=_[H],X=0;X<re;)O[G++]=L>>>X&255,X+=I.bits;B[H]=L>>>X&255}}if(I.bits===16){N=(_=new Uint32Array(I.decodePixels().buffer)).length,O=new Uint8Array(N*(32/I.pixelBitlength)*I.colors),B=new Uint8Array(N*(32/I.pixelBitlength)),M=I.colors>1,H=0,G=0;for(var K=0;H<N;)L=_[H++],O[G++]=L>>>0&255,M&&(O[G++]=L>>>16&255,L=_[H++],O[G++]=L>>>0&255),B[K++]=L>>>16&255;T=8}w!==t.image_compression.NONE&&e()?(p=n(O,I.width*I.colors,I.colors,w),P=n(B,I.width,1,w)):(p=O,P=B,oe=void 0)}if(I.colorType===3&&(C=this.color_spaces.INDEXED,D=I.palette,I.transparency.indexed)){var Z=I.transparency.indexed,Ae=0;for(H=0,N=Z.length;H<N;++H)Ae+=Z[H];if((Ae/=255)===N-1&&Z.indexOf(0)!==-1)k=[Z.indexOf(0)];else if(Ae!==N){for(_=I.decodePixels(),B=new Uint8Array(_.length),H=0,N=_.length;H<N;H++)B[H]=Z[_[H]];P=n(B,I.width,1)}}var j=function(W){var J;switch(W){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(w);return oe===this.decode.FLATE_DECODE&&(q="/Predictor "+j+" "),q+="/Colors "+R+" /BitsPerComponent "+T+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:b,data:p,index:g,filter:oe,decodeParameters:q,transparency:k,palette:D,sMask:P,predictor:j,width:I.width,height:I.height,bitsPerComponent:T,colorSpace:C}}}})(an.API),function(t){t.processGIF89A=function(e,n,r,s){var a=new Fae(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new FC(100).encode(u,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(an.API),cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Yr.log("bit decode error:"+n)}},cc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},cc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},cc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},cc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},cc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},cc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},cc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},cc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var a=new cc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new FC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(an.API),MI.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var a=new MI(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new FC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(an.API),an.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=r[u],h=r[u+1],p=r[u+2],g=r[u+3];a[o++]=d,a[o++]=h,a[o++]=p,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},an.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},f0=an.API,av=f0.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,p=0,g=t.length,b=0,w=o[0]||l,C=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(p=h&&Mr(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/d:0,C.push((o[r]||w)/l+p)),b=r;return C},RI=f0.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return f0.processArabic&&(t=f0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:av.apply(this,arguments).reduce(function(a,i){return a+i},0)},DI=function(t,e,n,r){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<n;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>r&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},UI=function(t,e,n){n||(n={});var r,s,a,i,o,l,u,d=[],h=[d],p=n.textIndent||0,g=0,b=0,w=t.split(" "),C=av.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var T=Array(l).join(" "),I=[];w.map(function(R){(R=R.split(/\s*\n/)).length>1?I=I.concat(R.map(function(D,P){return(P&&D.length?`
`:"")+D})):I.push(R[0])}),w=I,l=RI.apply(this,[T,n])}for(a=0,i=w.length;a<i;a++){var k=0;if(r=w[a],l&&r[0]==`
`&&(r=r.substr(1),k=1),p+g+(b=(s=av.apply(this,[r,n])).reduce(function(R,D){return R+D},0))>e||k){if(b>e){for(o=DI.apply(this,[r,s,e-(p+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(R,D){return R+D},0)}else d=[r];h.push(d),p=b+l,g=C}else d.push(r),p+=g+b,g=C}return u=l?function(R,D){return(D?T:"")+R.join(" ")}:function(R){return R.join(" ")},h.map(u)},f0.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(UI.apply(this,[r[o],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var p,g,b,w,C=["{"];for(var T in h){if(p=h[T],isNaN(parseInt(T,10))?g="'"+T+"'":(T=parseInt(T,10),g=(g=a(T).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof p=="number")p<0?(b=a(p).slice(3),w="-"):(b=a(p).slice(2),w=""),b=w+b.slice(0,-1)+r[b.slice(-1)];else{if(Mr(p)!=="object")throw new Error("Don't know what to do with value type "+Mr(p)+".");b=i(p)}C.push(g+b)}return C.push("}"),C.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,b,w,C={},T=1,I=C,k=[],R="",D="",P=h.length-1,_=1;_<P;_+=1)(w=h[_])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(w):w=="{"?(k.push([I,b]),I={},b=void 0):w=="}"?((g=k.pop())[0][g[1]]=I,b=void 0,I=g[0]):w=="-"?T=-1:b===void 0?n.hasOwnProperty(w)?(R+=n[w],b=parseInt(R,16)*T,T=1,R=""):R+=w:n.hasOwnProperty(w)?(D+=n[w],I[b]=parseInt(D,16)*T,T=1,b=void 0,D=""):D+=w;return C},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var p=h.font,g=d.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])}(an.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(wg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,r)}}])}(an),function(t){function e(){return(yn.canvg?Promise.resolve(yn.canvg):S_(()=>import("./index.es-DVcYchkh.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}an.API.addSvgAsImage=function(n,r,s,a,i,o,l,u){if(isNaN(r)||isNaN(s))throw Yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw Yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(p)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,s,a,i,l,u)})}}(),an.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},an.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function p(b,w){var C,T=!1;for(C=0;C<b.length;C+=1)b[C]===w&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if(Mr(t)==="object"){for(s in t)if(a=t[s],p(o,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&p(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?w.push("/"+b+" /"+n[b].value):w.push("/"+b+" "+n[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(an.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,p=a.length;h<p;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var i,o,l,u,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(o=Object.keys(a).sort(function(g,b){return g-b})).length;h<p;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<p.length;b++)g+=String.fromCharCode(p[b]);var w=u();d({data:g,addLength1:!0,objectId:w}),l("endobj");var C=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var T=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+L0(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var I=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+L0(o.fontName)),l("/FontDescriptor "+T+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+L0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var b=u();d({data:p,addLength1:!0,objectId:b}),l("endobj");var w=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var C=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+L0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var T=0;T<o.metadata.hmtx.widths.length;T++)o.metadata.hmtx.widths[T]=parseInt(o.metadata.hmtx.widths[T]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+L0(o.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},h=a.mutex||{},p=h.pdfEscape,g=h.activeFontKey,b=h.fonts,w=g,C="",T=0,I="",k=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(I=o,w=g,Array.isArray(o)&&(I=o[0]),T=0;T<I.length;T+=1)b[w].metadata.hasOwnProperty("cmap")&&(i=b[w].metadata.cmap.unicode.codeMap[I[T].charCodeAt(0)]),i||I[T].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?C+=I[T]:C+="";var R="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?R=p(C,w).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(R=n(C,b[w])),h.isHex=!0,{text:R,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(an),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(an.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,a,i,o,l,u,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,k=0;this.__bidiEngine__={};var R=function(M){var L=M.charCodeAt(),H=L>>8,G=w[H];return G!==void 0?h[256*G+(255&L)]:H===252||H===253?"AL":T.test(H)?"L":H===8?"R":"N"},D=function(M){for(var L,H=0;H<M.length;H++){if((L=R(M.charAt(H)))==="L")return!1;if(L==="R")return!0}return!1},P=function(M,L,H,G){var oe,q,X,re,K=L[G];switch(K){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(K="AN");break;case"AL":I=!0,K="R";break;case"WS":K="N";break;case"CS":G<1||G+1>=L.length||(oe=H[G-1])!=="EN"&&oe!=="AN"||(q=L[G+1])!=="EN"&&q!=="AN"?K="N":I&&(q="AN"),K=q===oe?q:"N";break;case"ES":K=(oe=G>0?H[G-1]:"B")==="EN"&&G+1<L.length&&L[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&H[G-1]==="EN"){K="EN";break}if(I){K="N";break}for(X=G+1,re=L.length;X<re&&L[X]==="ET";)X++;K=X<re&&L[X]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(re=L.length,X=G+1;X<re&&L[X]==="NSM";)X++;if(X<re){var Z=M[G],Ae=Z>=1425&&Z<=2303||Z===64286;if(oe=L[X],Ae&&(oe==="R"||oe==="AL")){K="R";break}}}K=G<1||(oe=L[G-1])==="B"?"N":H[G-1];break;case"B":I=!1,s=!0,K=k;break;case"S":a=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":K="N"}return K},_=function(M,L,H){var G=M.split("");return H&&N(G,H,{hiLevel:k}),G.reverse(),L&&L.reverse(),G.join("")},N=function(M,L,H){var G,oe,q,X,re,K=-1,Z=M.length,Ae=0,j=[],W=k?g:p,J=[];for(I=!1,s=!1,a=!1,oe=0;oe<Z;oe++)J[oe]=R(M[oe]);for(q=0;q<Z;q++){if(re=Ae,j[q]=P(M,J,j,q),G=240&(Ae=W[re][b[j[q]]]),Ae&=15,L[q]=X=W[Ae][5],G>0)if(G===16){for(oe=K;oe<q;oe++)L[oe]=1;K=-1}else K=-1;if(W[Ae][6])K===-1&&(K=q);else if(K>-1){for(oe=K;oe<q;oe++)L[oe]=X;K=-1}J[q]==="B"&&(L[q]=0),H.hiLevel|=X}a&&function(ne,ie,de){for(var me=0;me<de;me++)if(ne[me]==="S"){ie[me]=k;for(var xe=me-1;xe>=0&&ne[xe]==="WS";xe--)ie[xe]=k}}(J,L,Z)},B=function(M,L,H,G,oe){if(!(oe.hiLevel<M)){if(M===1&&k===1&&!s)return L.reverse(),void(H&&H.reverse());for(var q,X,re,K,Z=L.length,Ae=0;Ae<Z;){if(G[Ae]>=M){for(re=Ae+1;re<Z&&G[re]>=M;)re++;for(K=Ae,X=re-1;K<X;K++,X--)q=L[K],L[K]=L[X],L[X]=q,H&&(q=H[K],H[K]=H[X],H[X]=q);Ae=re}Ae++}}},O=function(M,L,H){var G=M.split(""),oe={hiLevel:k};return H||(H=[]),N(G,H,oe),function(q,X,re){if(re.hiLevel!==0&&d)for(var K,Z=0;Z<q.length;Z++)X[Z]===1&&(K=C.indexOf(q[Z]))>=0&&(q[Z]=C[K+1])}(G,H,oe),B(2,G,L,H,oe),B(1,G,L,H,oe),G.join("")};return this.__bidiEngine__.doBidiReorder=function(M,L,H){if(function(oe,q){if(q)for(var X=0;X<oe.length;X++)q[X]=X;o===void 0&&(o=D(oe)),u===void 0&&(u=D(oe))}(M,L),i||!l||u)if(i&&l&&o^u)k=o?1:0,M=_(M,L,H);else if(!i&&l&&u)k=o?1:0,M=O(M,L,H),M=_(M,L);else if(!i||o||l||u){if(i&&!l&&o^u)M=_(M,L),o?(k=0,M=O(M,L,H)):(k=1,M=O(M,L,H),M=_(M,L));else if(i&&o&&!l&&u)k=1,M=O(M,L,H),M=_(M,L);else if(!i&&!l&&o^u){var G=d;o?(k=1,M=O(M,L,H),k=0,d=!1,M=O(M,L,H),d=G):(k=0,M=O(M,L,H),M=_(M,L),k=1,d=!1,M=O(M,L,H),d=G,M=_(M,L))}}else k=0,M=O(M,L,H);else k=o?1:0,M=O(M,L,H);return M},this.__bidiEngine__.setOptions=function(M){M&&(i=M.isInputVisual,l=M.isOutputVisual,o=M.isInputRtl,u=M.isOutputRtl,d=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),i=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([n.doBidiReorder(s[o])]);r.text=i}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(an),an.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new nf(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Kae(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Rae(this.contents),this.head=new Uae(this),this.name=new Oae(this),this.cmap=new sM(this),this.toUnicode={},this.hhea=new Lae(this),this.maxp=new Qae(this),this.hmtx=new Hae(this),this.post=new Pae(this),this.os2=new Mae(this),this.loca=new qae(this),this.glyf=new Vae(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Sc,nf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,a,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),Rae=function(){var t;function e(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,a,i,o,l,u,d,h,p,g,b,w;for(w in g=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(s=new nf).writeInt(this.scalarType),s.writeShort(g),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*g,u=s.pos+a,o=null,b=[],n)for(p=n[w],s.writeString(w),s.writeInt(t(p)),s.writeInt(u),s.writeInt(p.length),b=b.concat(p),w==="head"&&(o=u),u+=p.length;u%4;)b.push(0),u++;return s.write(b),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,a,i;for(n=aM.call(n);n.length%4;)n.push(0);for(a=new nf(n),s=0,r=0,i=n.length;r<i;r=r+=4)s+=a.readUInt32();return 4294967295&s},e}(),Dae={}.hasOwnProperty,_u=function(t,e){for(var n in e)Dae.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Sc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Uae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new nf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),PI=function(){function t(e,n){var r,s,a,i,o,l,u,d,h,p,g,b,w,C,T,I,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,a=function(){var R,D;for(D=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)D.push(e.readUInt16());return D}(),e.pos+=2,w=function(){var R,D;for(D=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)D.push(e.readUInt16());return D}(),u=function(){var R,D;for(D=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)D.push(e.readUInt16());return D}(),d=function(){var R,D;for(D=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)D.push(e.readUInt16());return D}(),s=(this.length-e.pos+this.offset)/2,o=function(){var R,D;for(D=[],l=R=0;0<=s?R<s:R>s;l=0<=s?++R:--R)D.push(e.readUInt16());return D}(),l=T=0,k=a.length;T<k;l=++T)for(C=a[l],r=I=b=w[l];b<=C?I<=C:I>=C;r=b<=C?++I:--I)d[l]===0?i=r+u[l]:(i=o[d[l]/2+(r-b)-(p-l)]||0)!==0&&(i+=u[l]),this.codeMap[r]=65535&i}e.pos=h}return t.encode=function(e,n){var r,s,a,i,o,l,u,d,h,p,g,b,w,C,T,I,k,R,D,P,_,N,B,O,M,L,H,G,oe,q,X,re,K,Z,Ae,j,W,J,ne,ie,de,me,xe,Se,ge,ae;switch(G=new nf,i=Object.keys(e).sort(function(Fe,et){return Fe-et}),n){case"macroman":for(w=0,C=function(){var Fe=[];for(b=0;b<256;++b)Fe.push(0);return Fe}(),I={0:0},a={},oe=0,K=i.length;oe<K;oe++)I[xe=e[s=i[oe]]]==null&&(I[xe]=++w),a[s]={old:e[s],new:I[e[s]]},C[s]=I[e[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(C),{charMap:a,subtable:G.data,maxGlyphID:w+1};case"unicode":for(L=[],h=[],k=0,I={},r={},T=u=null,q=0,Z=i.length;q<Z;q++)I[D=e[s=i[q]]]==null&&(I[D]=++k),r[s]={old:D,new:I[D]},o=I[D]-s,T!=null&&o===u||(T&&h.push(T),L.push(s),u=o),T=s;for(T&&h.push(T),h.push(65535),L.push(65535),O=2*(B=L.length),N=2*Math.pow(Math.log(B)/Math.LN2,2),p=Math.log(N/2)/Math.LN2,_=2*B-N,l=[],P=[],g=[],b=X=0,Ae=L.length;X<Ae;b=++X){if(M=L[b],d=h[b],M===65535){l.push(0),P.push(0);break}if(M-(H=r[M].new)>=32768)for(l.push(0),P.push(2*(g.length+B-b)),s=re=M;M<=d?re<=d:re>=d;s=M<=d?++re:--re)g.push(r[s].new);else l.push(H-M),P.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*B+2*g.length),G.writeUInt16(0),G.writeUInt16(O),G.writeUInt16(N),G.writeUInt16(p),G.writeUInt16(_),de=0,j=h.length;de<j;de++)s=h[de],G.writeUInt16(s);for(G.writeUInt16(0),me=0,W=L.length;me<W;me++)s=L[me],G.writeUInt16(s);for(Se=0,J=l.length;Se<J;Se++)o=l[Se],G.writeUInt16(o);for(ge=0,ne=P.length;ge<ne;ge++)R=P[ge],G.writeUInt16(R);for(ae=0,ie=g.length;ae<ie;ae++)w=g[ae],G.writeUInt16(w);return{charMap:r,subtable:G.data,maxGlyphID:k+1}}},t}(),sM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new PI(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=PI.encode(n,r),(a=new nf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),Lae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Mae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Pae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(s=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),jae=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Oae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,a,i,o,l,u,d,h,p,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},i=h=0,p=s.length;h<p;i=++h)a=s[i],n.pos=a.offset,d=n.readString(a.length),o=new jae(d,a),u[g=a.nameID]==null&&(u[g]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Qae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Hae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,a,i,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)h.push(n.readInt16());return h}(),this.widths=(function(){var d,h,p,g;for(g=[],d=0,h=(p=this.metrics).length;d<h;d++)i=p[d],g.push(i.advance);return g}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),aM=[].slice,Vae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,a,i,o,l,u,d,h,p;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(n),(a=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new nf(r.read(a))).readShort(),d=l.readShort(),p=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[n]=o===-1?new zae(l,d,p,u,h):new Gae(l,o,d,p,u,h),this.cache[n]))},e.prototype.encode=function(n,r,s){var a,i,o,l,u;for(o=[],i=[],l=0,u=r.length;l<u;l++)a=n[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),Gae=function(){function t(e,n,r,s,a,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),zae=function(){function t(e,n,r,s,a){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new nf(aM.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),qae=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _u(e,Sc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),Kae=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],s[a]=r;return s},t.prototype.encode=function(e,n){var r,s,a,i,o,l,u,d,h,p,g,b,w,C,T;for(s in r=sM.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},T=r.charMap)g[(l=T[s]).old]=l.new;for(b in p=r.maxGlyphID,i)b in g||(g[b]=p++);return d=function(I){var k,R;for(k in R={},I)R[I[k]]=k;return R}(g),h=Object.keys(d).sort(function(I,k){return I-k}),w=function(){var I,k,R;for(R=[],I=0,k=h.length;I<k;I++)o=h[I],R.push(d[o]);return R}(),a=this.font.glyf.encode(i,w,g),u=this.font.loca.encode(a.offsets,w),C={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();an.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+n},e}();function iM(t,e,n,r,s){r=r||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,h="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(d):t,p=h.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*u:r.valign==="bottom"&&(n-=p*u),r.halign==="center"||r.halign==="right"){var g=o;if(r.halign==="center"&&(g*=.5),h&&p>=1){for(var b=0;b<h.length;b++)s.text(h[b],e-s.getStringUnitWidth(h[b])*g,n),n+=u;return s}e-=s.getStringUnitWidth(t)*g}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var jI={},sm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:jI=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,a){return this.jsPDFDocument.rect(e,n,r,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return jI||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),P_=function(t,e){return P_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},P_(t,e)};function oM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lM=function(t){oM(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function Wae(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function $ae(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function $2(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function cM(t,e,n,r){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=uM(s,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function uM(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function fw(t,e){var n,r,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function AM(t,e){var n=fw(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function Yae(t,e,n,r,s){var a={},i=1.3333333333333333,o=RC(e,function(k){return s.getComputedStyle(k).backgroundColor});o!=null&&(a.fillColor=o);var l=RC(e,function(k){return s.getComputedStyle(k).color});l!=null&&(a.textColor=l);var u=Xae(r,n);u&&(a.cellPadding=u);var d="borderTopColor",h=i*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(a.lineWidth=g)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var b=RC(e,function(k){return s.getComputedStyle(k)[d]});b!=null&&(a.lineColor=b);var w=["left","right","center","justify"];w.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),w=["middle","bottom","top"],w.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(a.fontSize=C/i);var T=Jae(r);T&&(a.fontStyle=T);var I=(r.fontFamily||"").toLowerCase();return t.indexOf(I)!==-1&&(a.font=I),a}function Jae(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function RC(t,e){var n=dM(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function dM(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:dM(t.parentElement,e):n}function Xae(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),i=fw(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function fM(t,e,n,r,s){var a,i;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],w=(i=(a=b==null?void 0:b.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),C=Zae(l,u,n,b,r,s);C&&(w==="thead"?d.push(C):w==="tfoot"?p.push(C):h.push(C))}return{head:d,body:h,foot:p}}function Zae(t,e,n,r,s,a){for(var i=new lM(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=Yae(t,l,e,u,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:eie(l)})}}var h=n.getComputedStyle(r);if(i.length>0&&(s||h.display!=="none"))return i}function eie(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function tie(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function dA(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function hM(t,e){var n=new sm(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();tie(s,r,e);var a=dA({},s,r,e),i;typeof window<"u"&&(i=window);var o=nie(s,r,e),l=rie(s,r,e),u=sie(n,a),d=iie(n,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function nie(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=n[l];r.columnStyles=dA({},u,d,h)}else{var p=[t,e,n],g=p.map(function(b){return b[l]||{}});r[l]=dA({},g[0],g[1],g[2])}},a=0,i=Object.keys(r);a<i.length;a++){var o=i[a];s(o)}return r}function rie(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=r;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function sie(t,e){var n,r,s,a,i,o,l,u,d,h,p,g,b=fw(e.margin,40/t.scaleFactor()),w=(n=aie(t,e.startY))!==null&&n!==void 0?n:b.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var T;e.showHead===!0?T="everyPage":e.showHead===!1?T="never":T=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var I=(a=e.useCss)!==null&&a!==void 0?a:!1,k=e.theme||(I?"plain":"striped"),R=!!e.horizontalPageBreak,D=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:I,theme:k,startY:w,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:T,showFoot:C,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:R,horizontalPageBreakRepeat:D,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function aie(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function iie(t,e,n){var r=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=fM(t,e.html,n,i,e.useCss)||{};r=o.head||r,s=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||oie(r,s,a);return{columns:l,head:r,body:s,foot:a}}function oie(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(r)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var j_=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),lie=function(t){oM(e,t);function e(n,r,s,a,i,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(j_),cie=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,a,i){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new lie(e,this,r,s,a,i),h=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new j_(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new j_(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),mM=function(){function t(e,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof lM&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,a){var i=r.cells[a.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t}(),pM=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=fw(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),uie=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var a=s[r],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function Aie(t,e){die(t,e);var n=[],r=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=O_(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=O_(n,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),hie(e),mie(e,t),fie(e)}function die(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=AM(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var h=u.padding("horizontal");u.contentWidth=$2(u.text,u.styles,t)+h;var p=$2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/n;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function O_(t,e,n){for(var r=e,s=t.reduce(function(g,b){return g+b.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=r*o,u=i.width+l,d=n(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>n(g):!0});p.length&&(e=O_(p,e,n))}return e}function fie(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=r.length-s,p=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function hie(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(s){var u=s;delete r.cells[l.index],s=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function mie(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var a=s[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=OI(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=OI(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<p*u.rowSpan?n={height:p,count:u.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function OI(t,e,n,r,s){return t.map(function(a){return pie(a,e,n,r,s)})}function pie(t,e,n,r,s){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=$2(t,n,r))return t;for(;e<$2(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function gM(t,e){var n=new sm(t),r=gie(e,n.scaleFactor()),s=new cie(e,r);return Aie(n,s),n.applyStyles(n.userStyles),s}function gie(t,e){var n=t.content,r=vie(n.columns);if(n.head.length===0){var s=QI(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=QI(r,"foot");s&&n.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:r,head:DC("head",n.head,r,i,a,e),body:DC("body",n.body,r,i,a,e),foot:DC("foot",n.foot,r,i,a,e)}}function DC(t,e,n,r,s,a){var i={},o=e.map(function(l,u){for(var d=0,h={},p=0,g=0,b=0,w=n;b<w.length;b++){var C=w[b];if(i[C.index]==null||i[C.index].left===0)if(g===0){var T=void 0;Array.isArray(l)?T=l[C.index-p-d]:T=l[C.dataKey];var I={};typeof T=="object"&&!Array.isArray(T)&&(I=(T==null?void 0:T.styles)||{});var k=yie(t,C,u,s,r,a,I),R=new pM(T,k,t);h[C.dataKey]=R,h[C.index]=R,g=R.colSpan-1,i[C.index]={left:R.rowSpan-1,times:g}}else g--,p++;else i[C.index].left--,g=i[C.index].times,d++}return new mM(l,u,t,h)});return o}function QI(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=xie(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function xie(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function vie(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new uie(s,e,n)})}function yie(t,e,n,r,s,a,i){var o=$ae(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=dA({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},p=t==="body"&&n%2===0?dA({},o.alternateRow,s.alternateRowStyles):{},g=Wae(a),b=dA({},g,u,p,h);return dA(b,i)}function wie(t,e,n){var r;n===void 0&&(n={});var s=AM(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var g=e.columns.find(function(b){return b.dataKey===p||b.index===p});g&&!a.has(g.index)&&(a.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),s-=g.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||s>=h)u=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function bie(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=wie(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function xM(t,e){var n=e.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,g){return p+g.height},0);o+=u}var d=new sm(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(yM(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=dA({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?Cie(d,e,h,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return EA(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,g){var b=g===e.body.length-1;Y2(d,e,p,b,h,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return EA(d,e,p,a,e.columns)})),cM(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Cie(t,e,n,r){var s=bie(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?bg(t,e,n,r,u.columns,!0):HI(t,e,r,u.columns),Eie(t,e,n,r,u.columns),UC(t,e,r,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?bg(t,e,n,r,d,!0):HI(t,e,r,d),u=VI(t,e,i+1,r,d),UC(t,e,r,d)}var h=u-i;s.slice(1).forEach(function(p){t.applyStyles(t.userStyles),bg(t,e,n,r,p.columns,!0),VI(t,e,i+1,r,p.columns,h),UC(t,e,r,p.columns)}),i=u};i<e.body.length-1;)l()}function HI(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return EA(t,e,a,n,r)})}function Eie(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;Y2(t,e,a,o,n,r,s)})}function VI(t,e,n,r,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,u){var d=n+u===e.body.length-1,h=vM(t,e,d,r);l.canEntireRowFit(h,s)&&(EA(t,e,l,r,s),o=n+u)}),o}function UC(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return EA(t,e,a,n,r)})}function _ie(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/r);return Math.max(0,a)}function Sie(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new pM(u.raw,u.styles,u.section);d=dA(d,u),d.text=[];var h=_ie(u,e,r);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var p=r.scaleFactor(),g=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,g),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var b=new mM(t.raw,-1,t.section,s,!0);b.height=a;for(var w=0,C=n.columns;w<C.length;w++){var l=C[w],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function Tie(t,e,n,r){var s=t.pageSize().height,a=r.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Y2(t,e,n,r,s,a,i){var o=vM(t,e,r,a);if(n.canEntireRowFit(o,i))EA(t,e,n,a,i);else if(Tie(t,n,o,e)){var l=Sie(n,o,e,t);EA(t,e,n,a,i),bg(t,e,s,a,i),Y2(t,e,l,r,s,a,i)}else bg(t,e,s,a,i),Y2(t,e,n,r,s,a,i)}function EA(t,e,n,r,s){r.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}Bie(t,l,r);var d=l.getTextPos();iM(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function Bie(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=uM(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),Nie(t,e,n,r.lineWidth))}function Nie(t,e,n,r){var s,a,i,o;r.top&&(s=n.x,a=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,a,i,o)),r.bottom&&(s=n.x,a=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,a,i,o)),r.left&&(s=n.x,a=n.y,i=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,a,i,o)),r.right&&(s=n.x+e.width,a=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,a,i,o));function l(u,d,h,p,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,p,g,"S")}}function vM(t,e,n,r){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function bg(t,e,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return EA(t,e,o,r,s)}),e.callEndPageHooks(t,r);var i=e.settings.margin;cM(t,e,n,r),yM(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return EA(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function yM(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function kie(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=hM(this,r),a=gM(this,s);return xM(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){iM(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return sm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){sm.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new sm(this),a=fM(s,e,window,n,!1),i=a.head,o=a.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var LC;function Wo(t,e){var n=hM(t,e),r=gM(t,n);xM(t,r)}try{if(typeof window<"u"&&window){var GI=window,zI=GI.jsPDF||((LC=GI.jspdf)===null||LC===void 0?void 0:LC.jsPDF);zI&&kie(zI)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Iie="usuariosLiceo",qI="rubricasInteractivas",KI="evaluacionesPruebas",WI="rubricasEstaticas",Fie=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],$I={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},f2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Rie=({open:t})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):A.jsxs(A.Fragment,{children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Die=({item:t,index:e,showAnswers:n})=>{const r=ee.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&A.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=n&&a===t.respuestaCorrecta;return A.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[A.jsx("div",{className:"w-5 h-5 border rounded-full"}),A.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&A.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&A.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[A.jsx("span",{children:"V ___ F ___"}),n&&A.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&A.jsxs("div",{className:"mt-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),A.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),A.jsx("div",{className:"space-y-2",children:r.map((s,a)=>A.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),n&&A.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[A.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),A.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>A.jsxs("li",{children:[A.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&A.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[A.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return A.jsxs("div",{className:"pt-2",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),A.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=n&&l===i.respuestaCorrecta;return A.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[A.jsx("div",{className:"w-5 h-5 border rounded-full"}),A.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return A.jsxs("div",{className:"pt-2",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),A.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},Uie=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(null),[s,a]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState(!1),p={nombre:"",asignatura:$o[0],nivel:Q2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=ee.useState(p);ee.useEffect(()=>{try{const N=localStorage.getItem(KI);N&&e(JSON.parse(N))}catch(N){console.error("Error loading tests from localStorage",N)}},[]);const w=N=>{e(N),localStorage.setItem(KI,JSON.stringify(N))},C=N=>{const{name:B,value:O}=N.target;b(M=>({...M,[B]:O}))},T=N=>{b(B=>{const O={...B.tiposActividad};return O[N]?delete O[N]:O[N]=$I[N][0],{...B,tiposActividad:O}})},I=(N,B)=>{b(O=>({...O,tiposActividad:{...O.tiposActividad,[N]:B}}))},k=N=>{b(B=>{const O=B.selectedNee.includes(N)?B.selectedNee.filter(M=>M!==N):[...B.selectedNee,N];return{...B,selectedNee:O}})},R=async N=>{if(N.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),u(null);const B=Object.entries(g.tiposActividad).map(([L,H])=>`- ${H} ítem(s) de tipo '${L}'`).join(`
`),O=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",M=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${B}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${O}

            Tu respuesta DEBE ser un único objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
                - 'id': Un UUID.
                - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
                - 'instrucciones': Instrucciones para esa actividad específica.
                - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                    - 'id': Un UUID.
                    - 'tipo': El tipo de ítem.
                    - 'pregunta': El enunciado de la pregunta.
                    - 'puntaje': Un puntaje numérico.
                    - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                    - Campos adicionales según el tipo:
                        - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                        - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                        - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                        - Para 'Comprensión de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener también 'habilidadBloom').
                        - Para 'Desarrollo': no necesita campos adicionales.
        `;try{yo("Evaluación - Pruebas");const H=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:M,config:{responseMimeType:"application/json"}}),G=JSON.parse(H.text);let oe=0;G.actividades.forEach(X=>{X.items.forEach(re=>{oe+=re.puntaje||0,re.tipo==="Comprensión de lectura"&&re.preguntas.forEach(K=>{oe+=K.puntaje||0})})});const q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:oe,actividades:G.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};r(q),h(!1)}catch(L){console.error(L),u("Error al generar la prueba con IA. Inténtelo de nuevo.")}finally{a(!1)}},D=()=>{n&&(w([n,...t.filter(N=>N.id!==n.id)]),alert("Prueba guardada con éxito."))},P=N=>{window.confirm("¿Eliminar esta prueba?")&&(w(t.filter(B=>B.id!==N)),(n==null?void 0:n.id)===N&&r(null))},_=async N=>{o(!0);const B=new an("p","mm","a4"),O=20,M=B.internal.pageSize.getHeight(),L=B.internal.pageSize.getWidth(),H=L-O*2;let G=O;const oe=re=>{re.setFillColor(230,230,230),re.rect(0,0,L,25,"F"),re.setFontSize(9),re.setTextColor(0,0,0),re.text("LICEO INDUSTRIAL DE RECOLETA",O,15,{align:"left"}),re.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",L-O,15,{align:"right"})};oe(B),G=30,B.setTextColor(0,0,0),B.setFont("helvetica","bold"),B.setFontSize(16),B.text(N.nombre,L/2,G,{align:"center"}),G+=10,Wo(B,{startY:G,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},N.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},N.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},N.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:N.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:N.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:re=>{oe(B)}}),G=B.lastAutoTable.finalY+10;const q=re=>{G+re>M-O&&(B.addPage(),oe(B),G=O+15,B.setTextColor(0,0,0))},X=(re,K)=>{B.setFont("helvetica",K.isBold?"bold":"normal"),B.setFontSize(K.fontSize);const Z=Array.isArray(re)?re.join(`
`):re;return B.getTextDimensions(Z,{maxWidth:K.width}).h};for(const re of N.actividades){let K=X(re.titulo,{fontSize:12,width:H,isBold:!0})+X(re.instrucciones,{fontSize:10,width:H})+12;q(K),B.setFont("helvetica","bold"),B.setFontSize(12),B.setTextColor(0,0,0),B.text(re.titulo,O,G),G+=8,B.setFont("helvetica","normal"),B.setFontSize(10);const Z=B.splitTextToSize(re.instrucciones,H);B.text(Z,O,G),G+=Z.length*(10*.35*1.15)+4;for(const[Ae,j]of re.items.entries()){let W=0;const J=`${Ae+1}. ${j.pregunta} (${j.puntaje} pts)`;switch(W+=X(J,{fontSize:10,width:H,isBold:!0}),j.tipo){case"Selección múltiple":j.opciones.forEach(de=>{W+=X(de,{fontSize:10,width:H-5})+3}),W+=7;break;case"Verdadero o Falso":W+=10;break;case"Desarrollo":W+=30;break;case"Términos pareados":W+=j.pares.length*12+20;break;case"Comprensión de lectura":const ie=j;W+=X(ie.texto,{fontSize:10,width:H-10})+10,ie.preguntas.forEach(de=>{const me=`${de.pregunta} (${de.puntaje} pts)`;W+=X(me,{fontSize:10,width:H-5,isBold:!0}),de.tipo==="Selección múltiple"?(de.opciones.forEach(xe=>{W+=X(xe,{fontSize:10,width:H-10})+3}),W+=7):de.tipo==="Desarrollo"&&(W+=30),W+=5}),W+=15;break}q(W),B.setFont("helvetica","bold"),B.setFontSize(10),B.setTextColor(0,0,0);const ne=B.splitTextToSize(J,H);if(B.text(ne,O,G),G+=ne.length*5+4,B.setFont("helvetica","normal"),j.tipo==="Selección múltiple")j.opciones.forEach((ie,de)=>{B.text(`${String.fromCharCode(65+de)}) ${ie}`,O+5,G),G+=7});else if(j.tipo==="Verdadero o Falso")B.text("V ______   F ______",O+5,G),G+=10;else if(j.tipo==="Desarrollo")B.setDrawColor(200,200,200),B.setFillColor(245,245,245),B.rect(O,G,H,25,"FD"),G+=30;else if(j.tipo==="Términos pareados"){const ie=[...j.pares.map(me=>me.definicion)].sort(()=>Math.random()-.5),de=j.pares.map((me,xe)=>[`${xe+1}. ${me.concepto}`,`(   ) ${ie[xe]}`]);Wo(B,{startY:G,head:[["Columna A: Concepto","Columna B: Definición"]],body:de,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:me=>oe(B)}),G=B.lastAutoTable.finalY+10}else if(j.tipo==="Comprensión de lectura"){const ie=j;B.setFillColor(240,240,240),B.setDrawColor(200,200,200);const de=B.splitTextToSize(ie.texto,H-10),me=de.length*(10*.35*1.15)+8;B.rect(O,G,H,me,"FD"),G+=4,B.setFont("helvetica","normal"),B.setFontSize(10),B.setTextColor(0,0,0),B.text(de,O+5,G),G+=me;for(const[xe,Se]of ie.preguntas.entries()){const ge=`${xe+1}. ${Se.pregunta} (${Se.puntaje} pts)`;B.setFont("helvetica","bold");const ae=B.splitTextToSize(ge,H-5);B.text(ae,O+5,G),G+=ae.length*5+4,B.setFont("helvetica","normal"),Se.tipo==="Selección múltiple"?Se.opciones.forEach((Fe,et)=>{B.text(`${String.fromCharCode(65+et)}) ${Fe}`,O+10,G),G+=7}):Se.tipo==="Desarrollo"&&(B.setDrawColor(200,200,200),B.setFillColor(245,245,245),B.rect(O+5,G,H-5,25,"FD"),G+=30)}}G+=5}}B.save(`${N.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[A.jsx(Rie,{open:!d})," ",A.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),A.jsx("button",{onClick:D,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),A.jsxs("button",{onClick:()=>_(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":A.jsx(i8,{})," PDF"]})]})]}),A.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[A.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[A.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),A.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),A.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),A.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),A.jsxs("p",{className:"text-right",children:[A.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),A.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[A.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&A.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(N=>A.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:N.titulo}),A.jsx("p",{className:"italic text-sm mb-4",children:N.instrucciones}),A.jsx("div",{className:"space-y-6",children:N.items.map((B,O)=>A.jsx(Die,{item:B,index:O,showAnswers:d},B.id))})]},N.id))]})]}):A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),A.jsxs("form",{onSubmit:R,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:C,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),A.jsx("div",{}),A.jsx("select",{name:"asignatura",value:g.asignatura,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:$o.map(N=>A.jsx("option",{children:N},N))}),A.jsx("select",{name:"nivel",value:g.nivel,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Q2.map(N=>A.jsx("option",{children:N},N))})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),A.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((N,B)=>A.jsx("button",{type:"button",onClick:()=>b(O=>({...O,dificultad:N})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${B===0?"rounded-l-lg":""} ${B===2?"rounded-r-lg":""}
                                            ${g.dificultad===N?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:N},N))})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:g.isNee,onChange:N=>b(B=>({...B,isNee:N.target.checked,selectedNee:N.target.checked?B.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&A.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:H2.map(N=>A.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(N),onChange:()=>k(N),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:N})]},N))})]})]})]}),A.jsx("textarea",{name:"contenido",value:g.contenido,onChange:C,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("div",{className:"space-y-3",children:Fie.map(N=>A.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[N],onChange:()=>T(N),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:N})]}),g.tiposActividad[N]&&A.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[A.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),$I[N].map(B=>A.jsx("button",{type:"button",onClick:()=>I(N,B),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[N]===B?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:B},B))]})]},N))}),l&&A.jsx("p",{className:"text-red-500 text-sm",children:l}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),A.jsx("div",{className:"space-y-2",children:t.length>0?t.map(N=>A.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[N.asignatura," - ",N.nivel," (",new Date(N.fechaCreacion).toLocaleDateString(),")"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>r(N),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),A.jsx("button",{onClick:()=>P(N.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},N.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Lie=({rubricas:t,onUpdate:e})=>{const[n,r]=ee.useState(null),[s,a]=ee.useState("list"),[i,o]=ee.useState(!1),[l,u]=ee.useState(""),d=async(R,D)=>{if(!R.trim()||!D.trim()){alert("El título y la descripción son obligatorios.");return}o(!0);const P=`Crea una rúbrica de evaluación detallada sobre "${R}" con el propósito de "${D}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,_={type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{dimension:{type:Bt.STRING},insuficiente:{type:Bt.STRING},suficiente:{type:Bt.STRING},competente:{type:Bt.STRING},avanzado:{type:Bt.STRING}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{yo("Evaluación - Rúbricas");const B=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:_}}),O=JSON.parse(B.text),M={id:crypto.randomUUID(),titulo:R,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:O.map(L=>({id:crypto.randomUUID(),nombre:L.dimension,niveles:{insuficiente:L.insuficiente,suficiente:L.suficiente,competente:L.competente,avanzado:L.avanzado}}))};r(M)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{o(!1)}},h=async()=>{if(!l.trim()||!n)return;const R=crypto.randomUUID(),D={id:R,nombre:l,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};r(N=>N?{...N,dimensiones:[...N.dimensiones,D]}:null),u("");const P=`Para una rúbrica sobre "${n.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${l}". Considera las dimensiones existentes como contexto: ${n.dimensiones.map(N=>N.nombre).join(", ")}.`,_={type:Bt.OBJECT,properties:{insuficiente:{type:Bt.STRING},suficiente:{type:Bt.STRING},competente:{type:Bt.STRING},avanzado:{type:Bt.STRING}},required:["insuficiente","suficiente","competente","avanzado"]};try{yo("Evaluación - Rúbricas (Añadir Dimensión)");const B=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:_}}),O=JSON.parse(B.text);r(M=>M?{...M,dimensiones:M.dimensiones.map(L=>L.id===R?{...L,niveles:O,isLoading:!1}:L)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),r(B=>B?{...B,dimensiones:B.dimensiones.filter(O=>O.id!==R)}:null)}},p=()=>{if(!n)return;const D=t.some(P=>P.id===n.id)?t.map(P=>P.id===n.id?n:P):[n,...t];e(D),a("list"),r(null)},g=R=>{r(R),a("form")},b=R=>{window.confirm("¿Eliminar esta rúbrica?")&&e(t.filter(D=>D.id!==R))},w=()=>{r({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),a("form")},C=(R,D,P)=>{n&&r(_=>_?{..._,dimensiones:_.dimensiones.map(N=>N.id!==R?N:D==="nombre"?{...N,nombre:P}:{...N,niveles:{...N.niveles,[D]:P}})}:null)},T=(R,D)=>{r(P=>P?{...P,[R]:D}:null)},I=R=>{n&&r(D=>D?{...D,dimensiones:D.dimensiones.filter(P=>P.id!==R)}:null)},k=()=>{if(!n)return null;const R="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${R} resize-none text-sm`;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),A.jsx("button",{onClick:()=>a("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),A.jsx("input",{value:n.titulo,onChange:P=>T("titulo",P.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${R} mt-1`})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),A.jsx("textarea",{value:n.descripcion,onChange:P=>T("descripcion",P.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${R} mt-1`})]})]}),n.dimensiones.length===0&&A.jsx("div",{className:"text-center py-4",children:A.jsx("button",{onClick:()=>d(n.titulo,n.descripcion),disabled:i||!n.titulo||!n.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:i?"Generando...":"✨ Generar Rúbrica con IA"})}),n.dimensiones.length>0&&A.jsxs("div",{className:"space-y-4",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:A.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(P=>A.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:P},P))})}),A.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.dimensiones.map(P=>A.jsxs("tr",{children:[A.jsx("td",{className:"p-2 w-1/5",children:A.jsx("textarea",{value:P.nombre,onChange:_=>C(P.id,"nombre",_.target.value),rows:4,className:D})}),Object.keys(P.niveles).map(_=>A.jsx("td",{className:"p-2 w-1/5",children:P.isLoading?A.jsx("div",{className:"flex justify-center items-center h-full",children:A.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):A.jsx("textarea",{value:P.niveles[_],onChange:N=>C(P.id,_,N.target.value),rows:4,className:D})},_)),A.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:A.jsx("button",{onClick:()=>I(P.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},P.id))})]})}),A.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[A.jsxs("div",{className:"flex-grow",children:[A.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),A.jsx("input",{value:l,onChange:P=>u(P.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${R} mt-1`})]}),A.jsx("button",{onClick:h,disabled:!l.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),A.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:A.jsx("button",{onClick:p,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return s==="list"?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),A.jsx("button",{onClick:w,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(R=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:R.titulo}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:R.descripcion})]}),A.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[A.jsx("button",{onClick:()=>g(R),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),A.jsx("button",{onClick:()=>b(R.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},R.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):k()},Mie=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=ee.useState([]),[s,a]=ee.useState(null),[i,o]=ee.useState(null),[l,u]=ee.useState({rubricaEstaticaId:"",curso:""}),[d,h]=ee.useState(null);ee.useEffect(()=>{try{const k=localStorage.getItem(qI);k&&r(JSON.parse(k))}catch(k){console.error("Error loading interactive rubrics",k)}},[]);const p=k=>{r(k),localStorage.setItem(qI,JSON.stringify(k))},g=k=>{k.preventDefault();const R=e.find(P=>P.id===l.rubricaEstaticaId);if(!R||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const D={id:crypto.randomUUID(),nombre:R.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:R.id,resultados:{}};p([D,...n]),u({rubricaEstaticaId:"",curso:""})},b=k=>{a(k),o(JSON.parse(JSON.stringify(k)))},w=(k,R,D)=>{i&&o(P=>{if(!P)return null;const _=JSON.parse(JSON.stringify(P));return _.resultados[k]||(_.resultados[k]={puntajes:{},feedback:""}),_.resultados[k].puntajes[R]=D,_})},C=()=>{i&&(p(n.map(k=>k.id===i.id?i:k)),a(i),alert("Cambios guardados."))},T=ee.useCallback(k=>{const R=i,D=e.find(M=>M.id===(R==null?void 0:R.rubricaEstaticaId));if(!R||!D)return{score:0,maxScore:0,grade:"N/A"};const P=D.dimensiones.length*4,_=R.resultados[k];if(!_)return{score:0,maxScore:P,grade:"1.0"};const N=Object.values(_.puntajes).reduce((M,L)=>M+L,0),B=1+6*(N/P),O=P>0?B.toFixed(1):"1.0";return{score:N,maxScore:P,grade:O}},[i,e]),I=async k=>{if(!i)return;const R=e.find(N=>N.id===i.rubricaEstaticaId),D=i.resultados[k];if(!R||!D||Object.keys(D.puntajes).length===0)return;h(k);const _=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${R.dimensiones.map(N=>`${N.nombre}: ${D.puntajes[N.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{yo("Evaluación - Rúbricas Interactivas (Feedback)");const B=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:_});o(O=>{if(!O)return null;const M=JSON.parse(JSON.stringify(O));return M.resultados[k].feedback=B.text.replace(/(\*\*|\*)/g,""),M})}catch(N){console.error(N),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const k=e.find(D=>D.id===s.rubricaEstaticaId),R=t.filter(D=>D.profile===en.ESTUDIANTE&&f2(D.curso||"")===s.curso).map(D=>D.nombreCompleto).sort();return k?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),A.jsx("p",{className:"text-slate-500",children:s.curso})]}),A.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(D=>A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:D.nombre},D.id)),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),A.jsx("tbody",{children:R.map(D=>{var B;const{score:P,maxScore:_,grade:N}=T(D);return A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[A.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:D}),k.dimensiones.map(O=>A.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:A.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(M=>{var L;return A.jsx("button",{onClick:()=>w(D,O.nombre,M),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((L=i.resultados[D])==null?void 0:L.puntajes[O.nombre])===M?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:M},M)})})},O.id)),A.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[P,"/",_]}),A.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:N}),A.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:A.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[A.jsx("p",{className:"text-xs w-full",children:((B=i.resultados[D])==null?void 0:B.feedback)||"Sin generar"}),A.jsx("button",{onClick:()=>I(D),disabled:d===D,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===D?"...":"Generar IA"})]})})]},D)})})]})}),A.jsx("div",{className:"mt-6 flex justify-end",children:A.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):A.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",A.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),A.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[A.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[A.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>A.jsx("option",{value:k.id,children:k.titulo},k.id))]}),A.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un Curso"}),Zs.map(k=>A.jsx("option",{value:k,children:k},k))]}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),A.jsx("div",{className:"space-y-2",children:n.map(k=>A.jsxs("button",{onClick:()=>b(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[A.jsx("p",{className:"font-semibold",children:k.nombre}),A.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Pie=({allUsers:t})=>{const[e,n]=ee.useState(""),r=ee.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===en.ESTUDIANTE&&a.curso).map(a=>f2(a.curso)))).sort(),[t]),s=ee.useMemo(()=>{const a=t.filter(i=>i.profile===en.ESTUDIANTE);return e?a.filter(i=>f2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),A.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",A.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),A.jsxs("select",{id:"curso-filter",value:e,onChange:a=>n(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(a=>A.jsx("option",{value:a,children:a},a))]})]}),A.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:f2(a.curso||"")}),A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},jie=()=>{const[t,e]=ee.useState("pruebas"),[n,r]=ee.useState([]),[s,a]=ee.useState([]);ee.useEffect(()=>{const l=()=>{try{const u=localStorage.getItem(Iie);u&&r(JSON.parse(u));const d=localStorage.getItem(WI);d&&a(JSON.parse(d))}catch(u){console.error("Error loading data for evaluation module",u)}};return l(),window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=l=>{a(l),localStorage.setItem(WI,JSON.stringify(l)),window.dispatchEvent(new Event("storage"))},o=({tabName:l,label:u})=>A.jsx("button",{onClick:()=>e(l),className:`${t===l?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:u});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx(o,{tabName:"pruebas",label:"Pruebas y Guías"}),A.jsx(o,{tabName:"rubricas",label:"Generador de Rúbricas"}),A.jsx(o,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),A.jsx(o,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),A.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&A.jsx(Uie,{}),t==="rubricas"&&A.jsx(Lie,{rubricas:s,onUpdate:i}),t==="rubricasInteractivas"&&A.jsx(Mie,{allUsers:n,rubricasEstaticas:s}),t==="nominas"&&A.jsx(Pie,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var J2={};J2.version="0.18.5";var wM=1252,Oie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Q5={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},H5=function(t){Oie.indexOf(t)!=-1&&(wM=Q5[0]=t)};function Qie(){H5(1252)}var gc=function(t){H5(t)};function V5(){gc(1200),Qie()}function YI(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function Hie(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function bM(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var tg=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?Hie(t.slice(2)):e==254&&n==255?bM(t.slice(2)):e==65279?t.slice(1):t},iv=function(e){return String.fromCharCode(e)},JI=function(e){return String.fromCharCode(e)},Kg,Rd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Wg(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),a=n>>2,r=t.charCodeAt(u++),i=(n&3)<<4|r>>4,s=t.charCodeAt(u++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=Rd.charAt(a)+Rd.charAt(i)+Rd.charAt(o)+Rd.charAt(l);return e}function Yo(t){var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=Rd.indexOf(t.charAt(u++)),i=Rd.indexOf(t.charAt(u++)),n=a<<2|i>>4,e+=String.fromCharCode(n),o=Rd.indexOf(t.charAt(u++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Rd.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var qn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),FA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function rf(t){return qn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function XI(t){return qn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Go=function(e){return qn?FA(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function hw(t){if(typeof ArrayBuffer>"u")return Go(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function hf(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Vie(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function G5(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return G5(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var Ha=qn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:FA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Gie(t){for(var e=[],n=0,r=t.length+250,s=rf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(i&3)<<4,s[n++]=128|o&63}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|i&63;n>r&&(e.push(s.slice(0,n)),n=0,s=rf(65535),r=65530)}return e.push(s.slice(0,n)),Ha(e)}var Ki=/\u0000/g,ng=/[\u0001-\u0006]/g;function am(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function xc(t,e){var n=""+t;return n.length>=e?n:Ds("0",e-n.length)+n}function z5(t,e){var n=""+t;return n.length>=e?n:Ds(" ",e-n.length)+n}function X2(t,e){var n=""+t;return n.length>=e?n:n+Ds(" ",e-n.length)}function zie(t,e){var n=""+Math.round(t);return n.length>=e?n:Ds("0",e-n.length)+n}function qie(t,e){var n=""+t;return n.length>=e?n:Ds("0",e-n.length)+n}var ZI=Math.pow(2,32);function h0(t,e){if(t>ZI||t<-ZI)return zie(t,e);var n=Math.round(t);return qie(n,e)}function Z2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var eF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],MC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Kie(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var gn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},tF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Wie={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ey(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(s);u<e&&(h=Math.floor(s),o=h*i+a,d=h*u+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!n)return[0,r*o,d];var p=Math.floor(r*o/d);return[p,r*o-p*d,d]}function $f(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,i=[],o={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=eoe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var CM=new Date(1899,11,31,0,0,0),$ie=CM.getTime(),Yie=new Date(1900,2,1,0,0,0);function EM(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Yie&&(n+=1440*60*1e3),(n-($ie+(t.getTimezoneOffset()-CM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function q5(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Jie(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Xie(t){var e=t<0?12:11,n=q5(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function Zie(t){var e=q5(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function $g(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Xie(t):e===10?n=t.toFixed(10).substr(0,12):n=Zie(t),q5(Jie(n.toUpperCase()))}function mh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):$g(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ml(14,EM(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function eoe(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function toe(t,e,n,r){var s="",a=0,i=0,o=n.y,l,u=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,u=e.length;break;case 3:return MC[n.m-1][1];case 5:return MC[n.m-1][0];default:return MC[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,u=e.length;break;case 3:return eF[n.q][0];default:return eF[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?xc(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(n.S+n.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=xc(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?xc(l,u):"";return d}function Dd(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var _M=/%/g;function noe(t,e,n){var r=e.replace(_M,""),s=e.length-r.length;return pA(t,r,n*Math.pow(10,2*s))+Ds("%",s)}function roe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return pA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function SM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+SM(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var TM=/# (\?+)( ?)\/( ?)(\d+)/;function soe(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(a===0?"":""+a)+" "+(i===0?Ds(" ",t[1].length+1+t[4].length):z5(i,t[1].length)+t[2]+"/"+t[3]+xc(o,t[4].length))}function aoe(t,e,n){return n+(e===0?"":""+e)+Ds(" ",t[1].length+2+t[4].length)}var BM=/^#*0*\.([0#]+)/,NM=/\).*[0#]/,kM=/\(###\) ###\\?-####/;function zi(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function nF(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function rF(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function ioe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function ooe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function bl(t,e,n){if(t.charCodeAt(0)===40&&!e.match(NM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?bl("n",r,n):"("+bl("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return roe(t,e,n);if(e.indexOf("%")!==-1)return noe(t,e,n);if(e.indexOf("E")!==-1)return SM(e,n);if(e.charCodeAt(0)===36)return"$"+bl(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+h0(l,e.length);if(e.match(/^[#?]+$/))return s=h0(n,0),s==="0"&&(s=""),s.length>e.length?s:zi(e.substr(0,e.length-s.length))+s;if(a=e.match(TM))return soe(a,l,u);if(e.match(/^#+0+$/))return u+h0(l,e.length-e.indexOf("0"));if(a=e.match(BM))return s=nF(n,a[1].length).replace(/^([^\.]+)$/,"$1."+zi(a[1])).replace(/\.$/,"."+zi(a[1])).replace(/\.(\d*)$/,function(b,w){return"."+w+Ds("0",zi(a[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+nF(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Dd(h0(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+bl(t,e,-n):Dd(""+(Math.floor(n)+ioe(n,a[1].length)))+"."+xc(rF(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return bl(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=am(bl(t,e.replace(/[\\-]/g,""),n)),i=0,am(am(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(kM))return s=bl(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=ey(l,Math.pow(10,i)-1,!1),s=""+u,d=pA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=X2(o[2],i),d.length<a[4].length&&(d=zi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=ey(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?z5(o[1],i)+a[2]+"/"+a[3]+X2(o[2],i):Ds(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=h0(n,0),e.length<=s.length?s:zi(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return zi(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=rF(n,a[1].length),n<0?"-"+bl(t,e,-n):Dd(ooe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?xc(0,3-b.length):"")+b})+"."+xc(i,a[1].length);switch(e){case"###,##0.00":return bl(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=Dd(h0(l,0));return g!=="0"?u+g:"";case"###,###.00":return bl(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return bl(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function loe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return pA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function coe(t,e,n){var r=e.replace(_M,""),s=e.length-r.length;return pA(t,r,n*Math.pow(10,2*s))+Ds("%",s)}function IM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+IM(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function cu(t,e,n){if(t.charCodeAt(0)===40&&!e.match(NM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?cu("n",r,n):"("+cu("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return loe(t,e,n);if(e.indexOf("%")!==-1)return coe(t,e,n);if(e.indexOf("E")!==-1)return IM(e,n);if(e.charCodeAt(0)===36)return"$"+cu(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+xc(l,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:zi(e.substr(0,e.length-s.length))+s;if(a=e.match(TM))return aoe(a,l,u);if(e.match(/^#+0+$/))return u+xc(l,e.length-e.indexOf("0"));if(a=e.match(BM))return s=(""+n).replace(/^([^\.]+)$/,"$1."+zi(a[1])).replace(/\.$/,"."+zi(a[1])),s=s.replace(/\.(\d*)$/,function(b,w){return"."+w+Ds("0",zi(a[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Dd(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+cu(t,e,-n):Dd(""+n)+"."+Ds("0",a[1].length);if(a=e.match(/^#,#*,#0/))return cu(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=am(cu(t,e.replace(/[\\-]/g,""),n)),i=0,am(am(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(kM))return s=cu(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=ey(l,Math.pow(10,i)-1,!1),s=""+u,d=pA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=X2(o[2],i),d.length<a[4].length&&(d=zi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=ey(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?z5(o[1],i)+a[2]+"/"+a[3]+X2(o[2],i):Ds(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:zi(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return zi(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+cu(t,e,-n):Dd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?xc(0,3-b.length):"")+b})+"."+xc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Dd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return cu(t,e.slice(0,e.lastIndexOf(".")),n)+zi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function pA(t,e,n){return(n|0)===n?cu(t,e,n):bl(t,e,n)}function uoe(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var FM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Hm(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":Z2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(FM))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Aoe(t,e,n,r){for(var s=[],a="",i=0,o="",l="t",u,d,h,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Z2(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";s[s.length]={t:b,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=$f(e,n,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=$f(e,n),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var w={t:o,v:o};if(u==null&&(u=$f(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(w.v=u.H>=12?"P":"A"),w.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(w.v=u.H>=12?"PM":"AM"),w.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(w.v=u.H>=12?"下午":"上午"),w.t="T",i+=5,p="h"):(w.t="t",++i),u==null&&w.t==="T")return"";s[s.length]=w,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(FM)){if(u==null&&(u=$f(e,n),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Hm(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var C=0,T=0,I;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",C<1&&(C=1);break;case"s":(I=s[i].v.match(/\.0+$/))&&(T=Math.max(T,I[0].length-1)),C<3&&(C=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",C<2&&(C=2));break;case"X":break;case"Z":C<1&&s[i].v.match(/[Hh]/)&&(C=1),C<2&&s[i].v.match(/[Mm]/)&&(C=2),C<3&&s[i].v.match(/[Ss]/)&&(C=3)}switch(C){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var k="",R;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=toe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(R=i+1;s[R]!=null&&((o=s[R].t)==="?"||o==="D"||(o===" "||o==="t")&&s[R+1]!=null&&(s[R+1].t==="?"||s[R+1].t==="t"&&s[R+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[R].v==="/"||s[R].v===" "&&s[R+1]!=null&&s[R+1].t=="?"));)s[i].v+=s[R].v,s[R]={v:"",t:";"},++R;k+=s[i].v,i=R-1;break;case"G":s[i].t="t",s[i].v=mh(e,n);break}var D="",P,_;if(k.length>0){k.charCodeAt(0)==40?(P=e<0&&k.charCodeAt(0)===45?-e:e,_=pA("n",k,P)):(P=e<0&&r>1?-e:e,_=pA("n",k,P),P<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),R=_.length-1;var N=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){N=i;break}var B=s.length;if(N===s.length&&_.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(R>=s[i].v.length-1?(R-=s[i].v.length,s[i].v=_.substr(R+1,s[i].v.length)):R<0?s[i].v="":(s[i].v=_.substr(0,R+1),R=-1),s[i].t="t",B=i);R>=0&&B<s.length&&(s[B].v=_.substr(0,R+1)+s[B].v)}else if(N!==s.length&&_.indexOf("E")===-1){for(R=_.indexOf(".")-1,i=N;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===N?s[i].v.indexOf(".")-1:s[i].v.length-1,D=s[i].v.substr(d+1);d>=0;--d)R>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(D=_.charAt(R--)+D);s[i].v=D,s[i].t="t",B=i}for(R>=0&&B<s.length&&(s[B].v=_.substr(0,R+1)+s[B].v),R=_.indexOf(".")+1,i=N;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==N)){for(d=s[i].v.indexOf(".")>-1&&i===N?s[i].v.indexOf(".")+1:0,D=s[i].v.substr(0,d);d<s[i].v.length;++d)R<_.length&&(D+=_.charAt(R++));s[i].v=D,s[i].t="t",B=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=pA(s[i].t,s[i].v,P),s[i].t="t");var O="";for(i=0;i!==s.length;++i)s[i]!=null&&(O+=s[i].v);return O}var sF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function aF(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function doe(t,e){var n=uoe(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(sF),o=n[1].match(sF);return aF(e,i)?[r,n[0]]:aF(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,a]}function Ml(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:gn)[t],r==null&&(r=n.table&&n.table[tF[t]]||gn[tF[t]]),r==null&&(r=Wie[t]||"General");break}if(Z2(r,0))return mh(e,n);e instanceof Date&&(e=EM(e,n.date1904));var s=doe(r,e);if(Z2(s[1]))return mh(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Aoe(s[1],e,n,s[0])}function gA(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(gn[n]==null){e<0&&(e=n);continue}if(gn[n]==t){e=n;break}}e<0&&(e=391)}return gn[e]=t,e}function mw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&gA(t[e],e)}function Vm(){gn=Kie()}var foe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},RM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function hoe(t){var e=typeof t=="number"?gn[t]:t;return e=e.replace(RM,"(\\d+)"),new RegExp("^"+e+"$")}function moe(t,e,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(RM)||[]).forEach(function(h,p){var g=parseInt(n[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:r==-1&&s==-1&&a==-1?d:u+"T"+d}var poe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,N=new Array(256),B=0;B!=256;++B)_=B,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,N[B]=_;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(_){var N=0,B=0,O=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)M[O]=_[O];for(O=0;O!=256;++O)for(B=_[O],N=256+O;N<4096;N+=256)B=M[N]=B>>>8^_[B&255];var L=[];for(O=1;O!=16;++O)L[O-1]=typeof Int32Array<"u"?M.subarray(O*256,O*256+256):M.slice(O*256,O*256+256);return L}var s=r(n),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],h=s[6],p=s[7],g=s[8],b=s[9],w=s[10],C=s[11],T=s[12],I=s[13],k=s[14];function R(_,N){for(var B=N^-1,O=0,M=_.length;O<M;)B=B>>>8^n[(B^_.charCodeAt(O++))&255];return~B}function D(_,N){for(var B=N^-1,O=_.length-15,M=0;M<O;)B=k[_[M++]^B&255]^I[_[M++]^B>>8&255]^T[_[M++]^B>>16&255]^C[_[M++]^B>>>24]^w[_[M++]]^b[_[M++]]^g[_[M++]]^p[_[M++]]^h[_[M++]]^d[_[M++]]^u[_[M++]]^l[_[M++]]^o[_[M++]]^i[_[M++]]^a[_[M++]]^n[_[M++]];for(O+=15;M<O;)B=B>>>8^n[(B^_[M++])&255];return~B}function P(_,N){for(var B=N^-1,O=0,M=_.length,L=0,H=0;O<M;)L=_.charCodeAt(O++),L<128?B=B>>>8^n[(B^L)&255]:L<2048?(B=B>>>8^n[(B^(192|L>>6&31))&255],B=B>>>8^n[(B^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,H=_.charCodeAt(O++)&1023,B=B>>>8^n[(B^(240|L>>8&7))&255],B=B>>>8^n[(B^(128|L>>2&63))&255],B=B>>>8^n[(B^(128|H>>6&15|(L&3)<<4))&255],B=B>>>8^n[(B^(128|H&63))&255]):(B=B>>>8^n[(B^(224|L>>12&15))&255],B=B>>>8^n[(B^(128|L>>6&63))&255],B=B>>>8^n[(B^(128|L&63))&255]);return~B}return t.table=n,t.bstr=R,t.buf=D,t.str=P,t}(),ln=function(){var e={};e.version="1.2.1";function n(fe,Ne){for(var Ee=fe.split("/"),_e=Ne.split("/"),Te=0,ke=0,qe=Math.min(Ee.length,_e.length);Te<qe;++Te){if(ke=Ee[Te].length-_e[Te].length)return ke;if(Ee[Te]!=_e[Te])return Ee[Te]<_e[Te]?-1:1}return Ee.length-_e.length}function r(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:r(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(0,Ne+1)}function s(fe){if(fe.charAt(fe.length-1)=="/")return s(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(Ne+1)}function a(fe,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var Ee=Ne.getHours();Ee=Ee<<6|Ne.getMinutes(),Ee=Ee<<5|Ne.getSeconds()>>>1,fe.write_shift(2,Ee);var _e=Ne.getFullYear()-1980;_e=_e<<4|Ne.getMonth()+1,_e=_e<<5|Ne.getDate(),fe.write_shift(2,_e)}function i(fe){var Ne=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,_e=new Date,Te=Ee&31;Ee>>>=5;var ke=Ee&15;Ee>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ee+1980),_e.setMonth(ke-1),_e.setDate(Te);var qe=Ne&31;Ne>>>=5;var tt=Ne&63;return Ne>>>=6,_e.setHours(Ne),_e.setMinutes(tt),_e.setSeconds(qe<<1),_e}function o(fe){ni(fe,0);for(var Ne={},Ee=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Te=fe.read_shift(2),ke=fe.l+Te,qe={};switch(_e){case 21589:Ee=fe.read_shift(1),Ee&1&&(qe.mtime=fe.read_shift(4)),Te>5&&(Ee&2&&(qe.atime=fe.read_shift(4)),Ee&4&&(qe.ctime=fe.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}fe.l=ke,Ne[_e]=qe}return Ne}var l;function u(){return l||(l={})}function d(fe,Ne){if(fe[0]==80&&fe[1]==75)return Xn(fe,Ne);if((fe[0]|32)==109&&(fe[1]|32)==105)return xa(fe,Ne);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,_e=512,Te=0,ke=0,qe=0,tt=0,Qe=0,We=[],Je=fe.slice(0,512);ni(Je,0);var yt=h(Je);switch(Ee=yt[0],Ee){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(yt[1]==0)return Xn(fe,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}_e!==512&&(Je=fe.slice(0,_e),ni(Je,28));var Nt=fe.slice(0,_e);p(Je,Ee);var jt=Je.read_shift(4,"i");if(Ee===3&&jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+jt);Je.l+=4,qe=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),tt=Je.read_shift(4,"i"),Te=Je.read_shift(4,"i"),Qe=Je.read_shift(4,"i"),ke=Je.read_shift(4,"i");for(var Tt=-1,Rt=0;Rt<109&&(Tt=Je.read_shift(4,"i"),!(Tt<0));++Rt)We[Rt]=Tt;var un=g(fe,_e);C(Qe,ke,un,_e,We);var Un=I(un,qe,We,_e);Un[qe].name="!Directory",Te>0&&tt!==H&&(Un[tt].name="!MiniFAT"),Un[We[0]].name="!FAT",Un.fat_addrs=We,Un.ssz=_e;var Ln={},Qn=[],_s=[],oi=[];k(qe,Un,un,Qn,Te,Ln,_s,tt),b(_s,oi,Qn),Qn.shift();var Ss={FileIndex:_s,FullPaths:oi};return Ne&&Ne.raw&&(Ss.raw={header:Nt,sectors:un}),Ss}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(G,"Header Signature: "),fe.l+=16;var Ne=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Ne]}function p(fe,Ne){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,Ne){for(var Ee=Math.ceil(fe.length/Ne)-1,_e=[],Te=1;Te<Ee;++Te)_e[Te-1]=fe.slice(Te*Ne,(Te+1)*Ne);return _e[Ee-1]=fe.slice(Ee*Ne),_e}function b(fe,Ne,Ee){for(var _e=0,Te=0,ke=0,qe=0,tt=0,Qe=Ee.length,We=[],Je=[];_e<Qe;++_e)We[_e]=Je[_e]=_e,Ne[_e]=Ee[_e];for(;tt<Je.length;++tt)_e=Je[tt],Te=fe[_e].L,ke=fe[_e].R,qe=fe[_e].C,We[_e]===_e&&(Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]),ke!==-1&&We[ke]!==ke&&(We[_e]=We[ke])),qe!==-1&&(We[qe]=_e),Te!==-1&&_e!=We[_e]&&(We[Te]=We[_e],Je.lastIndexOf(Te)<tt&&Je.push(Te)),ke!==-1&&_e!=We[_e]&&(We[ke]=We[_e],Je.lastIndexOf(ke)<tt&&Je.push(ke));for(_e=1;_e<Qe;++_e)We[_e]===_e&&(ke!==-1&&We[ke]!==ke?We[_e]=We[ke]:Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]));for(_e=1;_e<Qe;++_e)if(fe[_e].type!==0){if(tt=_e,tt!=We[tt])do tt=We[tt],Ne[_e]=Ne[tt]+"/"+Ne[_e];while(tt!==0&&We[tt]!==-1&&tt!=We[tt]);We[_e]=-1}for(Ne[0]+="/",_e=1;_e<Qe;++_e)fe[_e].type!==2&&(Ne[_e]+="/")}function w(fe,Ne,Ee){for(var _e=fe.start,Te=fe.size,ke=[],qe=_e;Ee&&Te>0&&qe>=0;)ke.push(Ne.slice(qe*L,qe*L+L)),Te-=L,qe=qf(Ee,qe*4);return ke.length===0?lt(0):Ha(ke).slice(0,fe.size)}function C(fe,Ne,Ee,_e,Te){var ke=H;if(fe===H){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var qe=Ee[fe],tt=(_e>>>2)-1;if(!qe)return;for(var Qe=0;Qe<tt&&(ke=qf(qe,Qe*4))!==H;++Qe)Te.push(ke);C(qf(qe,_e-4),Ne-1,Ee,_e,Te)}}function T(fe,Ne,Ee,_e,Te){var ke=[],qe=[];Te||(Te=[]);var tt=_e-1,Qe=0,We=0;for(Qe=Ne;Qe>=0;){Te[Qe]=!0,ke[ke.length]=Qe,qe.push(fe[Qe]);var Je=Ee[Math.floor(Qe*4/_e)];if(We=Qe*4&tt,_e<4+We)throw new Error("FAT boundary crossed: "+Qe+" 4 "+_e);if(!fe[Je])break;Qe=qf(fe[Je],We)}return{nodes:ke,data:gF([qe])}}function I(fe,Ne,Ee,_e){var Te=fe.length,ke=[],qe=[],tt=[],Qe=[],We=_e-1,Je=0,yt=0,Nt=0,jt=0;for(Je=0;Je<Te;++Je)if(tt=[],Nt=Je+Ne,Nt>=Te&&(Nt-=Te),!qe[Nt]){Qe=[];var Tt=[];for(yt=Nt;yt>=0;){Tt[yt]=!0,qe[yt]=!0,tt[tt.length]=yt,Qe.push(fe[yt]);var Rt=Ee[Math.floor(yt*4/_e)];if(jt=yt*4&We,_e<4+jt)throw new Error("FAT boundary crossed: "+yt+" 4 "+_e);if(!fe[Rt]||(yt=qf(fe[Rt],jt),Tt[yt]))break}ke[Nt]={nodes:tt,data:gF([Qe])}}return ke}function k(fe,Ne,Ee,_e,Te,ke,qe,tt){for(var Qe=0,We=_e.length?2:0,Je=Ne[fe].data,yt=0,Nt=0,jt;yt<Je.length;yt+=128){var Tt=Je.slice(yt,yt+128);ni(Tt,64),Nt=Tt.read_shift(2),jt=Z5(Tt,0,Nt-We),_e.push(jt);var Rt={name:jt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},un=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);un!==0&&(Rt.ct=R(Tt,Tt.l-8));var Un=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);Un!==0&&(Rt.mt=R(Tt,Tt.l-8)),Rt.start=Tt.read_shift(4,"i"),Rt.size=Tt.read_shift(4,"i"),Rt.size<0&&Rt.start<0&&(Rt.size=Rt.type=0,Rt.start=H,Rt.name=""),Rt.type===5?(Qe=Rt.start,Te>0&&Qe!==H&&(Ne[Qe].name="!StreamData")):Rt.size>=4096?(Rt.storage="fat",Ne[Rt.start]===void 0&&(Ne[Rt.start]=T(Ee,Rt.start,Ne.fat_addrs,Ne.ssz)),Ne[Rt.start].name=Rt.name,Rt.content=Ne[Rt.start].data.slice(0,Rt.size)):(Rt.storage="minifat",Rt.size<0?Rt.size=0:Qe!==H&&Rt.start!==H&&Ne[Qe]&&(Rt.content=w(Rt,Ne[Qe].data,(Ne[tt]||{}).data))),Rt.content&&ni(Rt.content,0),ke[jt]=Rt,qe.push(Rt)}}function R(fe,Ne){return new Date((Vo(fe,Ne+4)/1e7*Math.pow(2,32)+Vo(fe,Ne)/1e7-11644473600)*1e3)}function D(fe,Ne){return u(),d(l.readFileSync(fe),Ne)}function P(fe,Ne){var Ee=Ne&&Ne.type;switch(Ee||qn&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return D(fe,Ne);case"base64":return d(Go(Yo(fe)),Ne);case"binary":return d(Go(fe),Ne)}return d(fe,Ne)}function _(fe,Ne){var Ee=Ne||{},_e=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),N(fe)}function N(fe){var Ne="Sh33tJ5";if(!ln.find(fe,"/"+Ne)){var Ee=lt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Ne,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Ne),B(fe)}}function B(fe,Ne){_(fe);for(var Ee=!1,_e=!1,Te=fe.FullPaths.length-1;Te>=0;--Te){var ke=fe.FileIndex[Te];switch(ke.type){case 0:_e?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ke.R*ke.L*ke.C)&&(Ee=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Ne)){var qe=new Date(1987,1,19),tt=0,Qe=Object.create?Object.create(null):{},We=[];for(Te=0;Te<fe.FullPaths.length;++Te)Qe[fe.FullPaths[Te]]=!0,fe.FileIndex[Te].type!==0&&We.push([fe.FullPaths[Te],fe.FileIndex[Te]]);for(Te=0;Te<We.length;++Te){var Je=r(We[Te][0]);_e=Qe[Je],_e||(We.push([Je,{name:s(Je).replace("/",""),type:1,clsid:q,ct:qe,mt:qe,content:null}]),Qe[Je]=!0)}for(We.sort(function(jt,Tt){return n(jt[0],Tt[0])}),fe.FullPaths=[],fe.FileIndex=[],Te=0;Te<We.length;++Te)fe.FullPaths[Te]=We[Te][0],fe.FileIndex[Te]=We[Te][1];for(Te=0;Te<We.length;++Te){var yt=fe.FileIndex[Te],Nt=fe.FullPaths[Te];if(yt.name=s(Nt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||q,Te===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Nt.slice(-1)=="/"){for(tt=Te+1;tt<We.length&&r(fe.FullPaths[tt])!=Nt;++tt);for(yt.C=tt>=We.length?-1:tt,tt=Te+1;tt<We.length&&r(fe.FullPaths[tt])!=r(Nt);++tt);yt.R=tt>=We.length?-1:tt,yt.type=1}else r(fe.FullPaths[Te+1]||"")==r(Nt)&&(yt.R=Te+1),yt.type=2}}}function O(fe,Ne){var Ee=Ne||{};if(Ee.fileType=="mad")return Ht(fe,Ee);switch(B(fe),Ee.fileType){case"zip":return cs(fe,Ee)}var _e=function(jt){for(var Tt=0,Rt=0,un=0;un<jt.FileIndex.length;++un){var Un=jt.FileIndex[un];if(Un.content){var Ln=Un.content.length;Ln>0&&(Ln<4096?Tt+=Ln+63>>6:Rt+=Ln+511>>9)}}for(var Qn=jt.FullPaths.length+3>>2,_s=Tt+7>>3,oi=Tt+127>>7,Ss=_s+Rt+Qn+oi,sa=Ss+127>>7,Ps=sa<=109?0:Math.ceil((sa-109)/127);Ss+sa+Ps+127>>7>sa;)Ps=++sa<=109?0:Math.ceil((sa-109)/127);var va=[1,Ps,sa,oi,Qn,Rt,Tt,0];return jt.FileIndex[0].size=Tt<<6,va[7]=(jt.FileIndex[0].start=va[0]+va[1]+va[2]+va[3]+va[4]+va[5])+(va[6]+7>>3),va}(fe),Te=lt(_e[7]<<9),ke=0,qe=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,oe[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,_e[2]),Te.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:H),Te.write_shift(4,_e[3]),Te.write_shift(-4,_e[1]?_e[0]-1:H),Te.write_shift(4,_e[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1)}if(_e[1])for(qe=0;qe<_e[1];++qe){for(;ke<236+qe*127;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1);Te.write_shift(-4,qe===_e[1]-1?H:qe+1)}var tt=function(jt){for(qe+=jt;ke<qe-1;++ke)Te.write_shift(-4,ke+1);jt&&(++ke,Te.write_shift(-4,H))};for(qe=ke=0,qe+=_e[1];ke<qe;++ke)Te.write_shift(-4,X.DIFSECT);for(qe+=_e[2];ke<qe;++ke)Te.write_shift(-4,X.FATSECT);tt(_e[3]),tt(_e[4]);for(var Qe=0,We=0,Je=fe.FileIndex[0];Qe<fe.FileIndex.length;++Qe)Je=fe.FileIndex[Qe],Je.content&&(We=Je.content.length,!(We<4096)&&(Je.start=qe,tt(We+511>>9)));for(tt(_e[6]+7>>3);Te.l&511;)Te.write_shift(-4,X.ENDOFCHAIN);for(qe=ke=0,Qe=0;Qe<fe.FileIndex.length;++Qe)Je=fe.FileIndex[Qe],Je.content&&(We=Je.content.length,!(!We||We>=4096)&&(Je.start=qe,tt(We+63>>6)));for(;Te.l&511;)Te.write_shift(-4,X.ENDOFCHAIN);for(ke=0;ke<_e[4]<<2;++ke){var yt=fe.FullPaths[ke];if(!yt||yt.length===0){for(Qe=0;Qe<17;++Qe)Te.write_shift(4,0);for(Qe=0;Qe<3;++Qe)Te.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)Te.write_shift(4,0);continue}Je=fe.FileIndex[ke],ke===0&&(Je.start=Je.size?Je.start-1:H);var Nt=ke===0&&Ee.root||Je.name;if(We=2*(Nt.length+1),Te.write_shift(64,Nt,"utf16le"),Te.write_shift(2,We),Te.write_shift(1,Je.type),Te.write_shift(1,Je.color),Te.write_shift(-4,Je.L),Te.write_shift(-4,Je.R),Te.write_shift(-4,Je.C),Je.clsid)Te.write_shift(16,Je.clsid,"hex");else for(Qe=0;Qe<4;++Qe)Te.write_shift(4,0);Te.write_shift(4,Je.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Je.start),Te.write_shift(4,Je.size),Te.write_shift(4,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Je=fe.FileIndex[ke],Je.size>=4096)if(Te.l=Je.start+1<<9,qn&&Buffer.isBuffer(Je.content))Je.content.copy(Te,Te.l,0,Je.size),Te.l+=Je.size+511&-512;else{for(Qe=0;Qe<Je.size;++Qe)Te.write_shift(1,Je.content[Qe]);for(;Qe&511;++Qe)Te.write_shift(1,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Je=fe.FileIndex[ke],Je.size>0&&Je.size<4096)if(qn&&Buffer.isBuffer(Je.content))Je.content.copy(Te,Te.l,0,Je.size),Te.l+=Je.size+63&-64;else{for(Qe=0;Qe<Je.size;++Qe)Te.write_shift(1,Je.content[Qe]);for(;Qe&63;++Qe)Te.write_shift(1,0)}if(qn)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function M(fe,Ne){var Ee=fe.FullPaths.map(function(Qe){return Qe.toUpperCase()}),_e=Ee.map(function(Qe){var We=Qe.split("/");return We[We.length-(Qe.slice(-1)=="/"?2:1)]}),Te=!1;Ne.charCodeAt(0)===47?(Te=!0,Ne=Ee[0].slice(0,-1)+Ne):Te=Ne.indexOf("/")!==-1;var ke=Ne.toUpperCase(),qe=Te===!0?Ee.indexOf(ke):_e.indexOf(ke);if(qe!==-1)return fe.FileIndex[qe];var tt=!ke.match(ng);for(ke=ke.replace(Ki,""),tt&&(ke=ke.replace(ng,"!")),qe=0;qe<Ee.length;++qe)if((tt?Ee[qe].replace(ng,"!"):Ee[qe]).replace(Ki,"")==ke||(tt?_e[qe].replace(ng,"!"):_e[qe]).replace(Ki,"")==ke)return fe.FileIndex[qe];return null}var L=64,H=-2,G="d0cf11e0a1b11ae1",oe=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(fe,Ne,Ee){u();var _e=O(fe,Ee);l.writeFileSync(Ne,_e)}function K(fe){for(var Ne=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Ne[Ee]=String.fromCharCode(fe[Ee]);return Ne.join("")}function Z(fe,Ne){var Ee=O(fe,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),l.writeFileSync(Ne.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:K(Ee);case"base64":return Wg(typeof Ee=="string"?Ee:K(Ee));case"buffer":if(qn)return Buffer.isBuffer(Ee)?Ee:FA(Ee);case"array":return typeof Ee=="string"?Go(Ee):Ee}return Ee}var Ae;function j(fe){try{var Ne=fe.InflateRaw,Ee=new Ne;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)Ae=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function W(fe,Ne){if(!Ae)return Bn(fe,Ne);var Ee=Ae.InflateRaw,_e=new Ee,Te=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Te}function J(fe){return Ae?Ae.deflateRawSync(fe):It(fe)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(fe){var Ne=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var xe=typeof Uint8Array<"u",Se=xe?new Uint8Array(256):[],ge=0;ge<256;++ge)Se[ge]=me(ge);function ae(fe,Ne){var Ee=Se[fe&255];return Ne<=8?Ee>>>8-Ne:(Ee=Ee<<8|Se[fe>>8&255],Ne<=16?Ee>>>16-Ne:(Ee=Ee<<8|Se[fe>>16&255],Ee>>>24-Ne))}function Fe(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=6?0:fe[_e+1]<<8))>>>Ee&3}function et(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=5?0:fe[_e+1]<<8))>>>Ee&7}function De(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=4?0:fe[_e+1]<<8))>>>Ee&15}function Ce(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=3?0:fe[_e+1]<<8))>>>Ee&31}function Ge(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=1?0:fe[_e+1]<<8))>>>Ee&127}function nt(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3,ke=(1<<Ee)-1,qe=fe[Te]>>>_e;return Ee<8-_e||(qe|=fe[Te+1]<<8-_e,Ee<16-_e)||(qe|=fe[Te+2]<<16-_e,Ee<24-_e)||(qe|=fe[Te+3]<<24-_e),qe&ke}function it(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return _e<=5?fe[Te]|=(Ee&7)<<_e:(fe[Te]|=Ee<<_e&255,fe[Te+1]=(Ee&7)>>8-_e),Ne+3}function dt(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee=(Ee&1)<<_e,fe[Te]|=Ee,Ne+1}function Ct(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee,Ne+8}function ut(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee&255,fe[Te+2]=Ee>>>8,Ne+16}function kt(fe,Ne){var Ee=fe.length,_e=2*Ee>Ne?2*Ee:Ne+5,Te=0;if(Ee>=Ne)return fe;if(qn){var ke=XI(_e);if(fe.copy)fe.copy(ke);else for(;Te<fe.length;++Te)ke[Te]=fe[Te];return ke}else if(xe){var qe=new Uint8Array(_e);if(qe.set)qe.set(fe);else for(;Te<Ee;++Te)qe[Te]=fe[Te];return qe}return fe.length=_e,fe}function Ft(fe){for(var Ne=new Array(fe),Ee=0;Ee<fe;++Ee)Ne[Ee]=0;return Ne}function Wt(fe,Ne,Ee){var _e=1,Te=0,ke=0,qe=0,tt=0,Qe=fe.length,We=xe?new Uint16Array(32):Ft(32);for(ke=0;ke<32;++ke)We[ke]=0;for(ke=Qe;ke<Ee;++ke)fe[ke]=0;Qe=fe.length;var Je=xe?new Uint16Array(Qe):Ft(Qe);for(ke=0;ke<Qe;++ke)We[Te=fe[ke]]++,_e<Te&&(_e=Te),Je[ke]=0;for(We[0]=0,ke=1;ke<=_e;++ke)We[ke+16]=tt=tt+We[ke-1]<<1;for(ke=0;ke<Qe;++ke)tt=fe[ke],tt!=0&&(Je[ke]=We[tt+16]++);var yt=0;for(ke=0;ke<Qe;++ke)if(yt=fe[ke],yt!=0)for(tt=ae(Je[ke],_e)>>_e-yt,qe=(1<<_e+4-yt)-1;qe>=0;--qe)Ne[tt|qe<<yt]=yt&15|ke<<4;return _e}var Mt=xe?new Uint16Array(512):Ft(512),Vt=xe?new Uint16Array(32):Ft(32);if(!xe){for(var Jt=0;Jt<512;++Jt)Mt[Jt]=0;for(Jt=0;Jt<32;++Jt)Vt[Jt]=0}(function(){for(var fe=[],Ne=0;Ne<32;Ne++)fe.push(5);Wt(fe,Vt,32);var Ee=[];for(Ne=0;Ne<=143;Ne++)Ee.push(8);for(;Ne<=255;Ne++)Ee.push(9);for(;Ne<=279;Ne++)Ee.push(7);for(;Ne<=287;Ne++)Ee.push(8);Wt(Ee,Mt,288)})();var Pt=function(){for(var Ne=xe?new Uint8Array(32768):[],Ee=0,_e=0;Ee<de.length-1;++Ee)for(;_e<de[Ee+1];++_e)Ne[_e]=Ee;for(;_e<32768;++_e)Ne[_e]=29;var Te=xe?new Uint8Array(259):[];for(Ee=0,_e=0;Ee<ie.length-1;++Ee)for(;_e<ie[Ee+1];++_e)Te[_e]=Ee;function ke(tt,Qe){for(var We=0;We<tt.length;){var Je=Math.min(65535,tt.length-We),yt=We+Je==tt.length;for(Qe.write_shift(1,+yt),Qe.write_shift(2,Je),Qe.write_shift(2,~Je&65535);Je-- >0;)Qe[Qe.l++]=tt[We++]}return Qe.l}function qe(tt,Qe){for(var We=0,Je=0,yt=xe?new Uint16Array(32768):[];Je<tt.length;){var Nt=Math.min(65535,tt.length-Je);if(Nt<10){for(We=it(Qe,We,+(Je+Nt==tt.length)),We&7&&(We+=8-(We&7)),Qe.l=We/8|0,Qe.write_shift(2,Nt),Qe.write_shift(2,~Nt&65535);Nt-- >0;)Qe[Qe.l++]=tt[Je++];We=Qe.l*8;continue}We=it(Qe,We,+(Je+Nt==tt.length)+2);for(var jt=0;Nt-- >0;){var Tt=tt[Je];jt=(jt<<5^Tt)&32767;var Rt=-1,un=0;if((Rt=yt[jt])&&(Rt|=Je&-32768,Rt>Je&&(Rt-=32768),Rt<Je))for(;tt[Rt+un]==tt[Je+un]&&un<250;)++un;if(un>2){Tt=Te[un],Tt<=22?We=Ct(Qe,We,Se[Tt+1]>>1)-1:(Ct(Qe,We,3),We+=5,Ct(Qe,We,Se[Tt-23]>>5),We+=3);var Un=Tt<8?0:Tt-4>>2;Un>0&&(ut(Qe,We,un-ie[Tt]),We+=Un),Tt=Ne[Je-Rt],We=Ct(Qe,We,Se[Tt]>>3),We-=3;var Ln=Tt<4?0:Tt-2>>1;Ln>0&&(ut(Qe,We,Je-Rt-de[Tt]),We+=Ln);for(var Qn=0;Qn<un;++Qn)yt[jt]=Je&32767,jt=(jt<<5^tt[Je])&32767,++Je;Nt-=un-1}else Tt<=143?Tt=Tt+48:We=dt(Qe,We,1),We=Ct(Qe,We,Se[Tt]),yt[jt]=Je&32767,++Je}We=Ct(Qe,We,0)-1}return Qe.l=(We+7)/8|0,Qe.l}return function(Qe,We){return Qe.length<8?ke(Qe,We):qe(Qe,We)}}();function It(fe){var Ne=lt(50+Math.floor(fe.length*1.1)),Ee=Pt(fe,Ne);return Ne.slice(0,Ee)}var xt=xe?new Uint16Array(32768):Ft(32768),xn=xe?new Uint16Array(32768):Ft(32768),$t=xe?new Uint16Array(128):Ft(128),ir=1,mn=1;function Fn(fe,Ne){var Ee=Ce(fe,Ne)+257;Ne+=5;var _e=Ce(fe,Ne)+1;Ne+=5;var Te=De(fe,Ne)+4;Ne+=4;for(var ke=0,qe=xe?new Uint8Array(19):Ft(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,We=xe?new Uint8Array(8):Ft(8),Je=xe?new Uint8Array(8):Ft(8),yt=qe.length,Nt=0;Nt<Te;++Nt)qe[ne[Nt]]=ke=et(fe,Ne),Qe<ke&&(Qe=ke),We[ke]++,Ne+=3;var jt=0;for(We[0]=0,Nt=1;Nt<=Qe;++Nt)Je[Nt]=jt=jt+We[Nt-1]<<1;for(Nt=0;Nt<yt;++Nt)(jt=qe[Nt])!=0&&(tt[Nt]=Je[jt]++);var Tt=0;for(Nt=0;Nt<yt;++Nt)if(Tt=qe[Nt],Tt!=0){jt=Se[tt[Nt]]>>8-Tt;for(var Rt=(1<<7-Tt)-1;Rt>=0;--Rt)$t[jt|Rt<<Tt]=Tt&7|Nt<<3}var un=[];for(Qe=1;un.length<Ee+_e;)switch(jt=$t[Ge(fe,Ne)],Ne+=jt&7,jt>>>=3){case 16:for(ke=3+Fe(fe,Ne),Ne+=2,jt=un[un.length-1];ke-- >0;)un.push(jt);break;case 17:for(ke=3+et(fe,Ne),Ne+=3;ke-- >0;)un.push(0);break;case 18:for(ke=11+Ge(fe,Ne),Ne+=7;ke-- >0;)un.push(0);break;default:un.push(jt),Qe<jt&&(Qe=jt);break}var Un=un.slice(0,Ee),Ln=un.slice(Ee);for(Nt=Ee;Nt<286;++Nt)Un[Nt]=0;for(Nt=_e;Nt<30;++Nt)Ln[Nt]=0;return ir=Wt(Un,xt,286),mn=Wt(Ln,xn,30),Ne}function Er(fe,Ne){if(fe[0]==3&&!(fe[1]&3))return[rf(Ne),2];for(var Ee=0,_e=0,Te=XI(Ne||1<<18),ke=0,qe=Te.length>>>0,tt=0,Qe=0;(_e&1)==0;){if(_e=et(fe,Ee),Ee+=3,_e>>>1)_e>>1==1?(tt=9,Qe=5):(Ee=Fn(fe,Ee),tt=ir,Qe=mn);else{Ee&7&&(Ee+=8-(Ee&7));var We=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,We>0)for(!Ne&&qe<ke+We&&(Te=kt(Te,ke+We),qe=Te.length);We-- >0;)Te[ke++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Ne&&qe<ke+32767&&(Te=kt(Te,ke+32767),qe=Te.length);var Je=nt(fe,Ee,tt),yt=_e>>>1==1?Mt[Je]:xt[Je];if(Ee+=yt&15,yt>>>=4,(yt>>>8&255)===0)Te[ke++]=yt;else{if(yt==256)break;yt-=257;var Nt=yt<8?0:yt-4>>2;Nt>5&&(Nt=0);var jt=ke+ie[yt];Nt>0&&(jt+=nt(fe,Ee,Nt),Ee+=Nt),Je=nt(fe,Ee,Qe),yt=_e>>>1==1?Vt[Je]:xn[Je],Ee+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Rt=de[yt];for(Tt>0&&(Rt+=nt(fe,Ee,Tt),Ee+=Tt),!Ne&&qe<jt&&(Te=kt(Te,jt+100),qe=Te.length);ke<jt;)Te[ke]=Te[ke-Rt],++ke}}}return Ne?[Te,Ee+7>>>3]:[Te.slice(0,ke),Ee+7>>>3]}function Bn(fe,Ne){var Ee=fe.slice(fe.l||0),_e=Er(Ee,Ne);return fe.l+=_e[1],_e[0]}function na(fe,Ne){if(fe)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function Xn(fe,Ne){var Ee=fe;ni(Ee,0);var _e=[],Te=[],ke={FileIndex:_e,FullPaths:Te};_(ke,{root:Ne.root});for(var qe=Ee.length-4;(Ee[qe]!=80||Ee[qe+1]!=75||Ee[qe+2]!=5||Ee[qe+3]!=6)&&qe>=0;)--qe;Ee.l=qe+4,Ee.l+=4;var tt=Ee.read_shift(2);Ee.l+=6;var Qe=Ee.read_shift(4);for(Ee.l=Qe,qe=0;qe<tt;++qe){Ee.l+=20;var We=Ee.read_shift(4),Je=Ee.read_shift(4),yt=Ee.read_shift(2),Nt=Ee.read_shift(2),jt=Ee.read_shift(2);Ee.l+=8;var Tt=Ee.read_shift(4),Rt=o(Ee.slice(Ee.l+yt,Ee.l+yt+Nt));Ee.l+=yt+Nt+jt;var un=Ee.l;Ee.l=Tt+4,Wr(Ee,We,Je,ke,Rt),Ee.l=un}return ke}function Wr(fe,Ne,Ee,_e,Te){fe.l+=2;var ke=fe.read_shift(2),qe=fe.read_shift(2),tt=i(fe);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=fe.read_shift(4),We=fe.read_shift(4),Je=fe.read_shift(4),yt=fe.read_shift(2),Nt=fe.read_shift(2),jt="",Tt=0;Tt<yt;++Tt)jt+=String.fromCharCode(fe[fe.l++]);if(Nt){var Rt=o(fe.slice(fe.l,fe.l+Nt));(Rt[21589]||{}).mt&&(tt=Rt[21589].mt),((Te||{})[21589]||{}).mt&&(tt=Te[21589].mt)}fe.l+=Nt;var un=fe.slice(fe.l,fe.l+We);switch(qe){case 8:un=W(fe,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var Un=!1;ke&8&&(Qe=fe.read_shift(4),Qe==134695760&&(Qe=fe.read_shift(4),Un=!0),We=fe.read_shift(4),Je=fe.read_shift(4)),We!=Ne&&na(Un,"Bad compressed size: "+Ne+" != "+We),Je!=Ee&&na(Un,"Bad uncompressed size: "+Ee+" != "+Je),Zn(_e,jt,un,{unsafe:!0,mt:tt})}function cs(fe,Ne){var Ee=Ne||{},_e=[],Te=[],ke=lt(1),qe=Ee.compression?8:0,tt=0,Qe=0,We=0,Je=0,yt=0,Nt=fe.FullPaths[0],jt=Nt,Tt=fe.FileIndex[0],Rt=[],un=0;for(Qe=1;Qe<fe.FullPaths.length;++Qe)if(jt=fe.FullPaths[Qe].slice(Nt.length),Tt=fe.FileIndex[Qe],!(!Tt.size||!Tt.content||jt=="Sh33tJ5")){var Un=Je,Ln=lt(jt.length);for(We=0;We<jt.length;++We)Ln.write_shift(1,jt.charCodeAt(We)&127);Ln=Ln.slice(0,Ln.l),Rt[yt]=poe.buf(Tt.content,0);var Qn=Tt.content;qe==8&&(Qn=J(Qn)),ke=lt(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,tt),ke.write_shift(2,qe),Tt.mt?a(ke,Tt.mt):ke.write_shift(4,0),ke.write_shift(-4,Rt[yt]),ke.write_shift(4,Qn.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Ln.length),ke.write_shift(2,0),Je+=ke.length,_e.push(ke),Je+=Ln.length,_e.push(Ln),Je+=Qn.length,_e.push(Qn),ke=lt(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,tt),ke.write_shift(2,qe),ke.write_shift(4,0),ke.write_shift(-4,Rt[yt]),ke.write_shift(4,Qn.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Ln.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Un),un+=ke.l,Te.push(ke),un+=Ln.length,Te.push(Ln),++yt}return ke=lt(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,yt),ke.write_shift(2,yt),ke.write_shift(4,un),ke.write_shift(4,Je),ke.write_shift(2,0),Ha([Ha(_e),Ha(Te),ke])}var Dn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function tn(fe,Ne){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",_e=Ee.match(/\.([^\.]+)$/);return _e&&Dn[_e[1]]||Ne&&(_e=(Ee=Ne).match(/[\.\\]([^\.\\])+$/),_e&&Dn[_e[1]])?Dn[_e[1]]:"application/octet-stream"}function On(fe){for(var Ne=Wg(fe),Ee=[],_e=0;_e<Ne.length;_e+=76)Ee.push(Ne.slice(_e,_e+76));return Ee.join(`\r
`)+`\r
`}function ra(fe){var Ne=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Je=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],_e=Ne.split(`\r
`),Te=0;Te<_e.length;++Te){var ke=_e[Te];if(ke.length==0){Ee.push("");continue}for(var qe=0;qe<ke.length;){var tt=76,Qe=ke.slice(qe,qe+tt);Qe.charAt(tt-1)=="="?tt--:Qe.charAt(tt-2)=="="?tt-=2:Qe.charAt(tt-3)=="="&&(tt-=3),Qe=ke.slice(qe,qe+tt),qe+=tt,qe<ke.length&&(Qe+="="),Ee.push(Qe)}}return Ee.join(`\r
`)}function Or(fe){for(var Ne=[],Ee=0;Ee<fe.length;++Ee){for(var _e=fe[Ee];Ee<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ee];Ne.push(_e)}for(var Te=0;Te<Ne.length;++Te)Ne[Te]=Ne[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Go(Ne.join(`\r
`))}function ms(fe,Ne,Ee){for(var _e="",Te="",ke="",qe,tt=0;tt<10;++tt){var Qe=Ne[tt];if(!Qe||Qe.match(/^\s*$/))break;var We=Qe.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":_e=We[2].trim();break;case"content-type":ke=We[2].trim();break;case"content-transfer-encoding":Te=We[2].trim();break}}switch(++tt,Te.toLowerCase()){case"base64":qe=Go(Yo(Ne.slice(tt).join("")));break;case"quoted-printable":qe=Or(Ne.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Je=Zn(fe,_e.slice(Ee.length),qe,{unsafe:!0});ke&&(Je.ctype=ke)}function xa(fe,Ne){if(K(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Ne&&Ne.root||"",_e=(qn&&Buffer.isBuffer(fe)?fe.toString("binary"):K(fe)).split(`\r
`),Te=0,ke="";for(Te=0;Te<_e.length;++Te)if(ke=_e[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ee||(Ee=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),ke.slice(0,Ee.length)!=Ee););var qe=(_e[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var tt="--"+(qe[1]||""),Qe=[],We=[],Je={FileIndex:Qe,FullPaths:We};_(Je);var yt,Nt=0;for(Te=0;Te<_e.length;++Te){var jt=_e[Te];jt!==tt&&jt!==tt+"--"||(Nt++&&ms(Je,_e.slice(yt,Te),Ee),yt=Te)}return Je}function Ht(fe,Ne){var Ee=Ne||{},_e=Ee.boundary||"SheetJS";_e="------="+_e;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ke=fe.FullPaths[0],qe=ke,tt=fe.FileIndex[0],Qe=1;Qe<fe.FullPaths.length;++Qe)if(qe=fe.FullPaths[Qe].slice(ke.length),tt=fe.FileIndex[Qe],!(!tt.size||!tt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(un){return"_x"+un.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(un){return"_u"+un.charCodeAt(0).toString(16)+"_"});for(var We=tt.content,Je=qn&&Buffer.isBuffer(We)?We.toString("binary"):K(We),yt=0,Nt=Math.min(1024,Je.length),jt=0,Tt=0;Tt<=Nt;++Tt)(jt=Je.charCodeAt(Tt))>=32&&jt<128&&++yt;var Rt=yt>=Nt*4/5;Te.push(_e),Te.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+qe),Te.push("Content-Transfer-Encoding: "+(Rt?"quoted-printable":"base64")),Te.push("Content-Type: "+tn(tt,qe)),Te.push(""),Te.push(Rt?ra(Je):On(Je))}return Te.push(_e+`--\r
`),Te.join(`\r
`)}function or(fe){var Ne={};return _(Ne,fe),Ne}function Zn(fe,Ne,Ee,_e){var Te=_e&&_e.unsafe;Te||_(fe);var ke=!Te&&ln.find(fe,Ne);if(!ke){var qe=fe.FullPaths[0];Ne.slice(0,qe.length)==qe?qe=Ne:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Ne).replace("//","/")),ke={name:s(Ne),type:2},fe.FileIndex.push(ke),fe.FullPaths.push(qe),Te||ln.utils.cfb_gc(fe)}return ke.content=Ee,ke.size=Ee?Ee.length:0,_e&&(_e.CLSID&&(ke.clsid=_e.CLSID),_e.mt&&(ke.mt=_e.mt),_e.ct&&(ke.ct=_e.ct)),ke}function _r(fe,Ne){_(fe);var Ee=ln.find(fe,Ne);if(Ee){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ee)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function kr(fe,Ne,Ee){_(fe);var _e=ln.find(fe,Ne);if(_e){for(var Te=0;Te<fe.FileIndex.length;++Te)if(fe.FileIndex[Te]==_e)return fe.FileIndex[Te].name=s(Ee),fe.FullPaths[Te]=Ee,!0}return!1}function Qr(fe){B(fe,!0)}return e.find=M,e.read=P,e.parse=d,e.write=Z,e.writeFile=re,e.utils={cfb_new:or,cfb_add:Zn,cfb_del:_r,cfb_mov:kr,cfb_gc:Qr,ReadShift:Cg,CheckField:tP,prep_blob:ni,bconcat:Ha,use_zlib:j,_deflateRaw:It,_inflateRaw:Bn,consts:X},e}();function goe(t){return typeof t=="string"?hw(t):Array.isArray(t)?Vie(t):t}function Rx(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=hw(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?hu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([goe(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=hf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function xoe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function Ms(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function iF(t,e){for(var n=[],r=Ms(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function pw(t){for(var e=[],n=Ms(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function gw(t){for(var e=[],n=Ms(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function voe(t){for(var e=[],n=Ms(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var ty=new Date(1899,11,30,0,0,0);function Na(t,e){var n=t.getTime(),r=ty.getTime()+(t.getTimezoneOffset()-ty.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var DM=new Date,yoe=ty.getTime()+(DM.getTimezoneOffset()-ty.getTimezoneOffset())*6e4,oF=DM.getTimezoneOffset();function xw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+yoe),e.getTimezoneOffset()!==oF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-oF)*6e4),e}function woe(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var lF=new Date("2017-02-19T19:06:09.000Z"),UM=isNaN(lF.getFullYear())?new Date("2/19/17"):lF,boe=UM.getFullYear()==2017;function os(t,e){var n=new Date(t);if(boe)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(UM.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function ph(t,e){if(qn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return hu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return hu(bM(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return hu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return hu(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function ls(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ls(t[n]));return e}function Ds(t,e){for(var n="";n.length<e;)n+=t;return n}function vc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var Coe=["january","february","march","april","may","june","july","august","september","october","november","december"];function bm(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Coe.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var Eoe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function LM(t){return t?t.content&&t.type?ph(t.content,!0):t.data?tg(t.data):t.asNodeBuffer&&qn?tg(t.asNodeBuffer().toString("binary")):t.asBinary?tg(t.asBinary()):t._data&&t._data.getContent?tg(ph(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function MM(t){if(!t)return null;if(t.data)return YI(t.data);if(t.asNodeBuffer&&qn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?YI(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function _oe(t){return t&&t.name.slice(-4)===".bin"?MM(t):LM(t)}function _l(t,e){for(var n=t.FullPaths||Ms(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function K5(t,e){var n=_l(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function da(t,e,n){if(!n)return _oe(K5(t,e));if(!e)return null;try{return da(t,e)}catch{return null}}function zo(t,e,n){if(!n)return LM(K5(t,e));if(!e)return null;try{return zo(t,e)}catch{return null}}function Soe(t,e,n){return MM(K5(t,e))}function cF(t){for(var e=t.FullPaths||Ms(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function jn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return qn?r=FA(n):r=Gie(n),ln.utils.cfb_add(t,e,r)}ln.utils.cfb_add(t,e,n)}else t.file(e,n)}function W5(){return ln.utils.cfb_new()}function PM(t,e){switch(e.type){case"base64":return ln.read(t,{type:"base64"});case"binary":return ln.read(t,{type:"binary"});case"buffer":case"array":return ln.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function rg(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var ta=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Toe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,uF=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Boe=/<[^>]*>/g,ji=ta.match(uF)?uF:Boe,Noe=/<\w*:/,koe=/<(\/?)\w+:/;function _n(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var i=t.match(Toe),o=0,l="",u=0,d="",h="",p=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(p=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+p,h.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,r[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[g]&&d.slice(o-3,o)=="ext")continue;r[g]=l,r[g.toLowerCase()]=l}}return r}function Su(t){return t.replace(koe,"<$1")}var jM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$5=pw(jM),mr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return jM[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),Y5=/[&<>'"]/g,Ioe=/[\u0000-\u0008\u000b-\u001f]/g;function Pr(t){var e=t+"";return e.replace(Y5,function(n){return $5[n]}).replace(Ioe,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function AF(t){return Pr(t).replace(/ /g,"_x0020_")}var OM=/[\u0000-\u001f]/g;function J5(t){var e=t+"";return e.replace(Y5,function(n){return $5[n]}).replace(/\n/g,"<br/>").replace(OM,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Foe(t){var e=t+"";return e.replace(Y5,function(n){return $5[n]}).replace(OM,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var dF=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function Roe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ss(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function PC(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function fF(t){var e=rf(2*t.length),n,r,s=1,a=0,i=0,o;for(r=0;r<t.length;r+=s)s=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),s=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function hF(t){return FA(t,"binary").toString("utf8")}var ov="foo bar bazâð£",Kr=qn&&(hF(ov)==PC(ov)&&hF||fF(ov)==PC(ov)&&fF)||PC,hu=qn?function(t){return FA(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Yg=function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),QM=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),Doe=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),Uoe=/<\/?(?:vt:)?variant>/g,Loe=/<(?:vt:)([^>]*)>([\s\S]*)</;function mF(t,e){var n=_n(t),r=t.match(Doe(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var i=a.replace(Uoe,"").match(Loe);i&&s.push({v:Kr(i[2]),t:i[1]})}),s}var HM=/(^\s|\s$|\n)/;function si(t,e){return"<"+t+(e.match(HM)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Jg(t){return Ms(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Dt(t,e,n){return"<"+t+(n!=null?Jg(n):"")+(e!=null?(e.match(HM)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Q_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function Moe(t,e){switch(typeof t){case"string":var n=Dt("vt:lpwstr",Pr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Dt((t|0)==t?"vt:i4":"vt:r8",Pr(String(t)));case"boolean":return Dt("vt:bool",t?"true":"false")}if(t instanceof Date)return Dt("vt:filetime",Q_(t));throw new Error("Unable to serialize "+t)}function X5(t){if(qn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Kr(hf(G5(t)));throw new Error("Bad input format: expected Buffer or string")}var Xg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Sa={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ih=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ho={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Poe(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function joe(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[n+o]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var pF=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},gF=qn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:FA(e)})):pF(t)}:pF,xF=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(fA(t,s)));return r.join("").replace(Ki,"")},Z5=qn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(Ki,""):xF(t,e,n)}:xF,vF=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},VM=qn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):vF(t,e,n)}:vF,yF=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(M0(t,s)));return r.join("")},Dx=qn?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):yF(e,n,r)}:yF,GM=function(t,e){var n=Vo(t,e);return n>0?Dx(t,e+4,e+4+n-1):""},zM=GM,qM=function(t,e){var n=Vo(t,e);return n>0?Dx(t,e+4,e+4+n-1):""},KM=qM,WM=function(t,e){var n=2*Vo(t,e);return n>0?Dx(t,e+4,e+4+n-1):""},$M=WM,YM=function(e,n){var r=Vo(e,n);return r>0?Z5(e,n+4,n+4+r):""},JM=YM,XM=function(t,e){var n=Vo(t,e);return n>0?Dx(t,e+4,e+4+n):""},ZM=XM,eP=function(t,e){return Poe(t,e)},ny=eP,e4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};qn&&(zM=function(e,n){if(!Buffer.isBuffer(e))return GM(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},KM=function(e,n){if(!Buffer.isBuffer(e))return qM(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},$M=function(e,n){if(!Buffer.isBuffer(e))return WM(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},JM=function(e,n){if(!Buffer.isBuffer(e))return YM(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},ZM=function(e,n){if(!Buffer.isBuffer(e))return XM(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},ny=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):eP(e,n)},e4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var M0=function(t,e){return t[e]},fA=function(t,e){return t[e+1]*256+t[e]},Ooe=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Vo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},qf=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Qoe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Cg(t,e){var n="",r,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,qn&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(fA(this,u)),u+=2;t*=2;break;case"utf8":n=Dx(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Z5(this,this.l,this.l+t);break;case"wstr":return Cg.call(this,t,"dbcs");case"lpstr-ansi":n=zM(this,this.l),t=4+Vo(this,this.l);break;case"lpstr-cp":n=KM(this,this.l),t=4+Vo(this,this.l);break;case"lpwstr":n=$M(this,this.l),t=4+2*Vo(this,this.l);break;case"lpp4":t=4+Vo(this,this.l),n=JM(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Vo(this,this.l),n=ZM(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=M0(this,this.l+t++))!==0;)a.push(iv(i));n=a.join("");break;case"_wstr":for(t=0,n="";(i=fA(this,this.l+t))!==0;)a.push(iv(i)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=M0(this,u),this.l=u+1,o=Cg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(iv(fA(this,u))),u+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=M0(this,u),this.l=u+1,o=Cg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(iv(M0(this,u))),u+=1}n=a.join("");break;default:switch(t){case 1:return r=M0(this,this.l),this.l++,r;case 2:return r=(e==="i"?Ooe:fA)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?qf:Qoe)(this,this.l),this.l+=4,r):(s=Vo(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=ny(this,this.l):s=ny([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=VM(this,this.l,t);break}}return this.l+=t,n}var Hoe=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Voe=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Goe=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function zoe(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)Goe(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Hoe(this,e,this.l);break;case 8:if(r=8,n==="f"){joe(this,e,this.l);break}case 16:break;case-4:r=4,Voe(this,e,this.l);break}return this.l+=r,this}function tP(t,e){var n=VM(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function ni(t,e){t.l=e,t.read_shift=Cg,t.chk=tP,t.write_shift=zoe}function Mi(t,e){t.l+=e}function lt(t){var e=rf(t);return ni(e,0),e}function RA(t,e,n){if(t){var r,s,a;ni(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=sx[o]||sx[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,n);if(t.l=l,e(d,u,o))return}}}function xo(){var t=[],e=qn?256:2048,n=function(u){var d=lt(u);return ni(d,0),d},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(u){return r&&u<r.length-r.l?r:(s(),r=n(Math.max(u+1,e)))},i=function(){return s(),Ha(t)},o=function(u){s(),r=u,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Et(t,e,n,r){var s=+e,a;if(!isNaN(s)){r||(r=sx[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&e4(n)&&t.push(n)}}function Eg(t,e,n){var r=ls(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function wF(t,e,n){var r=ls(t);return r.s=Eg(r.s,e.s,n),r.e=Eg(r.e,e.s,n),r}function _g(t,e){if(t.cRel&&t.c<0)for(t=ls(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ls(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=wn(t);return!t.cRel&&t.cRel!=null&&(n=Woe(n)),!t.rRel&&t.rRel!=null&&(n=qoe(n)),n}function jC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ws(t.s.c)+":"+(t.e.cRel?"":"$")+ws(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ea(t.s.r)+":"+(t.e.rRel?"":"$")+ea(t.e.r):_g(t.s,e.biff)+":"+_g(t.e,e.biff)}function t4(t){return parseInt(Koe(t),10)-1}function ea(t){return""+(t+1)}function qoe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Koe(t){return t.replace(/\$(\d+)$/,"$1")}function n4(t){for(var e=$oe(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ws(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Woe(t){return t.replace(/^([A-Z])/,"$$$1")}function $oe(t){return t.replace(/^\$([A-Z])/,"$1")}function Yoe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function bs(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function wn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function wo(t){var e=t.indexOf(":");return e==-1?{s:bs(t),e:bs(t)}:{s:bs(t.slice(0,e)),e:bs(t.slice(e+1))}}function Rn(t,e){return typeof e>"u"||typeof e=="number"?Rn(t.s,t.e):(typeof t!="string"&&(t=wn(t)),typeof e!="string"&&(e=wn(e)),t==e?t:t+":"+e)}function pr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function bF(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ml(t.z,n?Na(e):e)}catch{}try{return t.w=Ml((t.XF||{}).numFmtId||(n?14:0),n?Na(e):e)}catch{return""+e}}function _A(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?DA[t.v]||t.v:e==null?bF(t,t.v):bF(t,e))}function mf(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function nP(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?bs(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=pr(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},b=i+h,w=o+p;if(u.s.r>b&&(u.s.r=b),u.s.c>w&&(u.s.c=w),u.e.r<b&&(u.e.r=b),u.e.c<w&&(u.e.c=w),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||gn[14],r.cellDates?(g.t="d",g.w=Ml(g.z,Na(g.v))):(g.t="n",g.v=Na(g.v),g.w=Ml(g.z,g.v))):g.t="s";if(s)a[b]||(a[b]=[]),a[b][w]&&a[b][w].z&&(g.z=a[b][w].z),a[b][w]=g;else{var C=wn({c:w,r:b});a[C]&&a[C].z&&(g.z=a[C].z),a[C]=g}}}return u.s.c<1e7&&(a["!ref"]=Rn(u)),a}function Gm(t,e){return nP(null,t,e)}function Joe(t){return t.read_shift(4,"i")}function yc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function Ui(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Va(t,e){var n=!1;return e==null&&(n=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Xoe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Zoe(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function r4(t,e){var n=t.l,r=t.read_shift(1),s=Ui(t),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(Xoe(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function ele(t,e){var n=!1;return e==null&&(n=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),Va(t.t,e),n?e.slice(0,e.l):e}var tle=r4;function nle(t,e){var n=!1;return e==null&&(n=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),Va(t.t,e),e.write_shift(4,1),Zoe({},e),n?e.slice(0,e.l):e}function Pl(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Fh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Rh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Dh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var rle=Ui,rP=Va;function s4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function ry(t,e){var n=!1;return e==null&&(n=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var sle=Ui,H_=s4,a4=ry;function i4(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?ny([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):qf(e,0)>>2;return n?s/100:s}function sP(t,e){e==null&&(e=lt(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function aP(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function ale(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Uh=aP,zm=ale;function Ri(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function gh(t,e){return(e||lt(8)).write_shift(8,t,"f")}function ile(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var u=nh[s];u&&(e.rgb=ex(u));break;case 2:e.rgb=ex([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function sy(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function ole(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function lle(t,e){e||(e=lt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function iP(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function cle(t){return iP(t,1)}function ule(t){return iP(t,2)}var o4=2,fo=3,lv=11,CF=12,ay=19,cv=64,Ale=65,dle=71,fle=4108,hle=4126,Oa=80,oP=81,mle=[Oa,oP],V_={1:{n:"CodePage",t:o4},2:{n:"Category",t:Oa},3:{n:"PresentationFormat",t:Oa},4:{n:"ByteCount",t:fo},5:{n:"LineCount",t:fo},6:{n:"ParagraphCount",t:fo},7:{n:"SlideCount",t:fo},8:{n:"NoteCount",t:fo},9:{n:"HiddenCount",t:fo},10:{n:"MultimediaClipCount",t:fo},11:{n:"ScaleCrop",t:lv},12:{n:"HeadingPairs",t:fle},13:{n:"TitlesOfParts",t:hle},14:{n:"Manager",t:Oa},15:{n:"Company",t:Oa},16:{n:"LinksUpToDate",t:lv},17:{n:"CharacterCount",t:fo},19:{n:"SharedDoc",t:lv},22:{n:"HyperlinksChanged",t:lv},23:{n:"AppVersion",t:fo,p:"version"},24:{n:"DigSig",t:Ale},26:{n:"ContentType",t:Oa},27:{n:"ContentStatus",t:Oa},28:{n:"Language",t:Oa},29:{n:"Version",t:Oa},255:{},2147483648:{n:"Locale",t:ay},2147483651:{n:"Behavior",t:ay},1919054434:{}},G_={1:{n:"CodePage",t:o4},2:{n:"Title",t:Oa},3:{n:"Subject",t:Oa},4:{n:"Author",t:Oa},5:{n:"Keywords",t:Oa},6:{n:"Comments",t:Oa},7:{n:"Template",t:Oa},8:{n:"LastAuthor",t:Oa},9:{n:"RevNumber",t:Oa},10:{n:"EditTime",t:cv},11:{n:"LastPrinted",t:cv},12:{n:"CreatedDate",t:cv},13:{n:"ModifiedDate",t:cv},14:{n:"PageCount",t:fo},15:{n:"WordCount",t:fo},16:{n:"CharCount",t:fo},17:{n:"Thumbnail",t:dle},18:{n:"Application",t:Oa},19:{n:"DocSecurity",t:fo},255:{},2147483648:{n:"Locale",t:ay},2147483651:{n:"Behavior",t:ay},1919054434:{}},EF={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ple=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function gle(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var xle=gle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),nh=ls(xle),DA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},lP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},z_={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},uv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function l4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function vle(t){var e=l4();if(!t||!t.match)return e;var n={};if((t.match(ji)||[]).forEach(function(r){var s=_n(r);switch(s[0].replace(Noe,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[z_[s.ContentType]]!==void 0&&e[z_[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Sa.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function cP(t,e){var n=voe(z_),r=[],s;r[r.length]=ta,r[r.length]=Dt("Types",null,{xmlns:Sa.CT,"xmlns:xsd":Sa.xsd,"xmlns:xsi":Sa.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Dt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],r[r.length]=Dt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:uv[l][e.bookType]||uv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Dt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:uv[l][e.bookType]||uv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Dt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Jn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Zg(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Sg(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(ji)||[]).forEach(function(s){var a=_n(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:rg(a.Target,e);n[o]=i,r[a.Id]=i}}),n["!id"]=r,n}function im(t){var e=[ta,Dt("Relationships",null,{xmlns:Sa.RELS})];return Ms(t["!id"]).forEach(function(n){e[e.length]=Dt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Lr(t,e,n,r,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[Jn.HLINK,Jn.XPATH,Jn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var yle="application/vnd.oasis.opendocument.spreadsheet";function wle(t,e){for(var n=X5(t),r,s;r=Xg.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=_n(r[0],!1),s.path=="/"&&s.type!==yle)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function ble(t){var e=[ta];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function _F(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Cle(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Ele(t){var e=[ta];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(_F(t[n][0],t[n][1])),e.push(Cle("",t[n][0]));return e.push(_F("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function uP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+J2.version+"</meta:generator></office:meta></office:document-meta>"}var Ll=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],_le=function(){for(var t=new Array(Ll.length),e=0;e<Ll.length;++e){var n=Ll[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function AP(t){var e={};t=Kr(t);for(var n=0;n<Ll.length;++n){var r=Ll[n],s=t.match(_le[n]);s!=null&&s.length>0&&(e[r[1]]=mr(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=os(e[r[1]]))}return e}function OC(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Pr(e),r[r.length]=n?Dt(t,e,n):si(t,e))}function dP(t,e){var n=e||{},r=[ta,Dt("cp:coreProperties",null,{"xmlns:cp":Sa.CORE_PROPS,"xmlns:dc":Sa.dc,"xmlns:dcterms":Sa.dcterms,"xmlns:dcmitype":Sa.dcmitype,"xmlns:xsi":Sa.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&OC("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Q_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&OC("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Q_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=Ll.length;++a){var i=Ll[a],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&OC(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var rh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],fP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function hP(t,e,n,r){var s=[];if(typeof t=="string")s=mF(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?mF(e,r).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function Sle(t,e,n){var r={};return e||(e={}),t=Kr(t),rh.forEach(function(s){var a=(t.match(Yg(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=mr(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(r[s[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&hP(r.HeadingPairs,r.TitlesOfParts,e,n),e}function mP(t){var e=[],n=Dt;return t||(t={}),t.Application="SheetJS",e[e.length]=ta,e[e.length]=Dt("Properties",null,{xmlns:Sa.EXT_PROPS,"xmlns:vt":Sa.vt}),rh.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=Pr(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Pr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Tle=/<[^>]+>[^<]*/g;function Ble(t,e){var n={},r="",s=t.match(Tle);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=_n(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=mr(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":n[r]=mr(d);break;case"bool":n[r]=ss(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=os(d);break;case"cy":case"error":n[r]=mr(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function pP(t){var e=[ta,Dt("Properties",null,{xmlns:Sa.CUST_PROPS,"xmlns:vt":Sa.vt})];if(!t)return e.join("");var n=1;return Ms(t).forEach(function(s){++n,e[e.length]=Dt("property",Moe(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Pr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var q_={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},QC;function Nle(t,e,n){QC||(QC=pw(q_)),e=QC[e]||e,t[e]=n}function kle(t,e){var n=[];return Ms(q_).map(function(r){for(var s=0;s<Ll.length;++s)if(Ll[s][1]==r)return Ll[s];for(s=0;s<rh.length;++s)if(rh[s][1]==r)return rh[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(si(q_[r[1]]||r[1],s))}}),Dt("DocumentProperties",n.join(""),{xmlns:Ho.o})}function Ile(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&Ms(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<Ll.length;++i)if(a==Ll[i][1])return;for(i=0;i<rh.length;++i)if(a==rh[i][1])return;for(i=0;i<n.length;++i)if(a==n[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Dt(AF(a),o,{"dt:dt":l}))}}),e&&Ms(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Dt(AF(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Ho.o+'">'+s.join("")+"</"+r+">"}function c4(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Fle(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=lt(8);return i.write_shift(4,r),i.write_shift(4,s),i}function gP(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function xP(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function vP(t,e,n){return e===31?xP(t):gP(t,e,n)}function K_(t,e,n){return vP(t,e,n===!1?0:4)}function Rle(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return vP(t,e,0)}function Dle(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(Ki,""),t.l-s&2&&(t.l+=2)}return n}function Ule(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(Ki,"");return n}function Lle(t){var e=t.l,n=iy(t,oP);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=iy(t,fo);return[n,r]}function Mle(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(Lle(t));return n}function SF(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),i=t.read_shift(4);r[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Ki,"").replace(ng,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function yP(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function Ple(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function iy(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==CF&&r!==e&&mle.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===CF?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return gP(t,r,4).replace(Ki,"");case 31:return xP(t);case 64:return c4(t);case 65:return yP(t);case 71:return Ple(t);case 80:return K_(t,r,!a.raw).replace(Ki,"");case 81:return Rle(t,r).replace(Ki,"");case 4108:return Mle(t);case 4126:case 4127:return r==4127?Dle(t):Ule(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function TF(t,e){var n=lt(4),r=lt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=lt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Fle(e);break;case 31:case 80:for(r=lt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ha([n,r])}function BF(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+n]}a.sort(function(I,k){return I[1]-k[1]});var p={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var g=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(g=!1,t.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[a[i][0]];if(p[b.n]=iy(t,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:gc(o=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(a[i][0]===1){if(o=p.CodePage=iy(t,o4),gc(o),l!==-1){var w=t.l;t.l=a[l][1],u=SF(t,o),t.l=w}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=SF(t,o)}else{var C=u[a[i][0]],T;switch(t[t.l]){case 65:t.l+=4,T=yP(t);break;case 30:t.l+=4,T=K_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,T=K_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,T=t.read_shift(4,"i");break;case 19:t.l+=4,T=t.read_shift(4);break;case 5:t.l+=4,T=t.read_shift(8,"f");break;case 11:t.l+=4,T=qs(t,4);break;case 64:t.l+=4,T=os(c4(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[C]=T}}return t.l=n+r,p}var wP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jle(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function NF(t,e,n){var r=lt(8),s=[],a=[],i=8,o=0,l=lt(8),u=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=lt(8),u.write_shift(4,0),s.unshift(u);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ha(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(wP.indexOf(t[o][0])>-1||fP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=n[g];if(b.p=="version"&&typeof p=="string"){var w=p.split(".");p=(+w[0]<<16)+(+w[1]||0)}l=TF(b.t,p)}else{var C=jle(p);C==-1&&(C=31,p=String(p)),l=TF(C,p)}a.push(l),u=lt(8),u.write_shift(4,e?g:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),Ha([r].concat(s).concat(a))}function kF(t,e,n){var r=t.content;if(!r)return{};ni(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),d=r.read_shift(16);if(d!==ln.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),s===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);s===2&&(i=r.read_shift(16),l=r.read_shift(4));var h=BF(r,e),p={SystemIdentifier:u};for(var g in h)p[g]=h[g];if(p.FMTID=a,s===1)return p;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var b;try{b=BF(r,null)}catch{}for(g in b)p[g]=b[g];return p.FMTID=[a,i],p}function IF(t,e,n,r,s,a){var i=lt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,ln.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=NF(t,n,r);if(o.push(l),s){var u=NF(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Ha(o)}function xd(t,e){return t.read_shift(e),null}function Ole(t,e){e||(e=lt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Qle(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function qs(t,e){return t.read_shift(e)===1}function qi(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function fa(t){return t.read_shift(2,"u")}function Tl(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function bP(t,e){return Qle(t,e,fa)}function Hle(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function CP(t,e,n){return n||(n=lt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function Ux(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?t.read_shift(r,s):"";return i}function Vle(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),i=0,o,l={};s&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),r&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Gle(t){var e=t.t||"",n=lt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=lt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return Ha(s)}function xh(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Lx(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):xh(t,r,n)}function Lh(t,e,n){if(n.biff>5)return Lx(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function EP(t,e,n){return n||(n=lt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function zle(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function qle(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(Ki,"");return r&&(t.l+=24),s}function Kle(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(Ki,"");return n+i}function Wle(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return qle(t);case"0303000000000000c000000000000046":return Kle(t);default:throw new Error("Unsupported Moniker "+n)}}function Av(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(Ki,""):"";return n}function FF(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function $le(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,h;s&16&&(a=Av(t,n-t.l)),s&128&&(i=Av(t,n-t.l)),(s&257)===257&&(o=Av(t,n-t.l)),(s&257)===1&&(l=Wle(t,n-t.l)),s&8&&(u=Av(t,n-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=c4(t)),t.l=n;var p=i||o||l||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return d&&(g.guid=d),h&&(g.time=h),a&&(g.Tooltip=a),g}function Yle(t){var e=lt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(a==28)r=r.slice(1),FF(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),a&8&&FF(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function _P(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function SP(t,e){var n=_P(t);return n[3]=0,n}function Tu(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function vh(t,e,n,r){return r||(r=lt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function Jle(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function Xle(t,e,n){return e===0?"":Lh(t,e,n)}function Zle(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[s,a,i]}function TP(t){var e=t.read_shift(2),n=i4(t);return[e,n]}function ece(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=Ux(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function vw(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function BP(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function NP(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var tce=NP;function kP(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function nce(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function rce(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Ei(t){t.l+=2,t.l+=t.read_shift(2)}var sce={0:Ei,4:Ei,5:Ei,6:Ei,7:rce,8:Ei,9:Ei,10:Ei,11:Ei,12:Ei,13:nce,14:Ei,15:Ei,16:Ei,17:Ei,18:Ei,19:Ei,20:Ei,21:kP};function ace(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(sce[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function dv(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function u4(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=lt(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function ice(t,e){return e===0||t.read_shift(2),1200}function oce(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=Lh(t,0,n);return t.read_shift(e+r-t.l),s}function lce(t,e){var n=!e||e.biff==8,r=lt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function cce(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function uce(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=Ux(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}function Ace(t,e){var n=!e||e.biff>=8?2:1,r=lt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function dce(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<n;++i)a.push(Vle(t));return a.Count=r,a.Unique=s,a}function fce(t,e){var n=lt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=Gle(t[s]);var a=Ha([n].concat(r));return a.parts=[n.length].concat(r.map(function(i){return i.length})),a}function hce(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function mce(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function pce(t){var e=Jle(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function gce(t){return t.read_shift(2),t.read_shift(4)}function RF(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function xce(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function vce(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function yce(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function wce(t){var e=lt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function bce(){}function Cce(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=Ux(t,0,n),r}function Ece(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,a=lt(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function _ce(t){var e=Tu(t);return e.isst=t.read_shift(4),e}function Sce(t,e,n,r){var s=lt(10);return vh(t,e,r,s),s.write_shift(4,n),s}function Tce(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=Tu(t);n.biff==2&&t.l++;var a=Lx(t,r-t.l,n);return s.val=a,s}function Bce(t,e,n,r,s){var a=!s||s.biff==8,i=lt(8+ +a+(1+a)*n.length);return vh(t,e,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}function Nce(t,e,n){var r=t.read_shift(2),s=Lh(t,0,n);return[r,s]}function kce(t,e,n,r){var s=n&&n.biff==5;r||(r=lt(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}var Ice=Lh;function DF(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function Fce(t,e){var n=e.biff==8||!e.biff?4:2,r=lt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Rce(t){var e=t.read_shift(2),n=t.read_shift(2),r=TP(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function Dce(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(TP(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:i,rkrec:a}}function Uce(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:i,ixfe:a}}function Lce(t,e,n,r){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=ple[o>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Mce(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=Lce(t,e,r.fStyle,n),r}function UF(t,e,n,r){var s=n&&n.biff==5;r||(r=lt(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function Pce(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function jce(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function LF(t,e,n){var r=Tu(t);(n.biff==2||e==9)&&++t.l;var s=Hle(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function Oce(t,e,n,r,s,a){var i=lt(8);return vh(t,e,r,i),CP(n,a,i),i}function Qce(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=Tu(t),s=Ri(t);return r.val=s,r}function Hce(t,e,n,r){var s=lt(14);return vh(t,e,r,s),gh(n,s),s}var MF=Xle;function Vce(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=xh(t,a),o=[];r>t.l;)o.push(Lx(t));return[a,s,i,o]}function PF(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=ece(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var Gce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function jF(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var u=xh(t,i,n);s&32&&(u=Gce[u.charCodeAt(0)]);var d=r-t.l;n&&n.biff==2&&--d;var h=r==t.l||o===0||!(d>0)?[]:ahe(t,d,n,o);return{chKey:a,Name:u,itab:l,rgce:h}}function IP(t,e,n){if(n.biff<8)return zce(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(Zle(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function zce(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=Ux(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function qce(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=xh(t,r,n),i=xh(t,s,n);return[a,i]}function Kce(t,e,n){var r=NP(t);t.l++;var s=t.read_shift(1);return e-=8,[ihe(t,e,n),s,r]}function OF(t,e,n){var r=tce(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,rhe(t,e,n)]}function Wce(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function $ce(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=Lh(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},o,i,a]}}function Yce(t,e,n){return $ce(t,e,n)}function Jce(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(vw(t));return n}function Xce(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)BP(t[n],e);return e}function Zce(t,e,n){if(n&&n.biff<8)return tue(t,e,n);var r=kP(t),s=ace(t,e-22,r[1]);return{cmo:r,ft:s}}var eue={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function tue(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((eue[r]||Mi)(t,e,n)),{cmo:[s,r,a],ft:i}}function nue(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=zle(t,6,n);var o=t.read_shift(2);t.read_shift(2),fa(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-r!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=xh(t,t.lens[u+1]-t.lens[u]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function rue(t,e){var n=vw(t);t.l+=16;var r=$le(t,e-24);return[n,r]}function sue(t){var e=lt(24),n=bs(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return Ha([e,Yle(t[1])])}function aue(t,e){t.read_shift(2);var n=vw(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(Ki,""),[n,r]}function iue(t){var e=t[1].Tooltip,n=lt(10+2*(e.length+1));n.write_shift(2,2048);var r=bs(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function oue(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=EF[n]||n,n=t.read_shift(2),e[1]=EF[n]||n,e}function lue(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function cue(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(SP(t));return n}function uue(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(SP(t));return n}function Aue(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function FP(t,e,n){if(!n.cellStyles)return Mi(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function due(t,e){var n=lt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function fue(t,e){var n={};return e<32||(t.l+=16,n.header=Ri(t),n.footer=Ri(t),t.l+=2),n}function hue(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}function mue(t){for(var e=lt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var pue=Tu,gue=bP,xue=Lx;function vue(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function yue(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=Tu(t);++t.l;var s=Lh(t,e-7,n);return r.t="str",r.val=s,r}function wue(t){var e=Tu(t);++t.l;var n=Ri(t);return e.t="n",e.val=n,e}function bue(t,e,n){var r=lt(15);return Ox(r,t,e),r.write_shift(8,n,"f"),r}function Cue(t){var e=Tu(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function Eue(t,e,n){var r=lt(9);return Ox(r,t,e),r.write_shift(2,n),r}function _ue(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Sue(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Tue(t,e,n){var r=t.l+e,s=Tu(t),a=t.read_shift(2),i=xh(t,a,n);return t.l=r,s.t="str",s.val=i,s}var Bue=[2,3,48,49,131,139,140,245],W_=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=pw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var u=[],d=rf(1);switch(l.type){case"base64":d=Go(Yo(o));break;case"binary":d=Go(o);break;case"buffer":case"array":d=o;break}ni(d,0);var h=d.read_shift(1),p=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var w=0,C=521;h==2&&(w=d.read_shift(2)),d.l+=3,h!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),h!=2&&(C=d.read_shift(2));var T=d.read_shift(2),I=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(I=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var k=[],R={},D=Math.min(d.length,h==2?521:C-10-(g?264:0)),P=b?32:11;d.l<D&&d[d.l]!=13;)switch(R={},R.name=Kg.utils.decode(I,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,R.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(R.offset=d.read_shift(4)),R.len=d.read_shift(1),h==2&&(R.offset=d.read_shift(2)),R.dec=d.read_shift(1),R.name.length&&k.push(R),h!=2&&(d.l+=b?13:14),R.type){case"B":(!g||R.len!=8)&&l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+R.type)}if(d[d.l]!==13&&(d.l=C-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=C;var _=0,N=0;for(u[0]=[],N=0;N!=k.length;++N)u[0][N]=k[N].name;for(;w-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++_]=[],N=0,N=0;N!=k.length;++N){var B=d.slice(d.l,d.l+k[N].len);d.l+=k[N].len,ni(B,0);var O=Kg.utils.decode(I,B);switch(k[N].type){case"C":O.trim().length&&(u[_][N]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[_][N]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[_][N]=O;break;case"F":u[_][N]=parseFloat(O.trim());break;case"+":case"I":u[_][N]=b?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[_][N]=!0;break;case"N":case"F":u[_][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[_][N]="##MEMO##"+(b?parseInt(O.trim(),10):B.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[_][N]=+O||0);break;case"@":u[_][N]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[_][N]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[_][N]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][N]=-B.read_shift(-8,"f");break;case"B":if(g&&k[N].len==8){u[_][N]=B.read_shift(8,"f");break}case"G":case"P":B.l+=k[N].len;break;case"0":if(k[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[N].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=k,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Gm(n(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function s(o,l){try{return mf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&gc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=xo(),h=cy(o,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),b=o["!cols"]||[],w=0,C=0,T=0,I=1;for(w=0;w<p.length;++w){if(((b[w]||{}).DBF||{}).name){p[w]=b[w].DBF.name,++T;continue}if(p[w]!=null){if(++T,typeof p[w]=="number"&&(p[w]=p[w].toString(10)),typeof p[w]!="string")throw new Error("DBF Invalid column name "+p[w]+" |"+typeof p[w]+"|");if(p.indexOf(p[w])!==w){for(C=0;C<1024;++C)if(p.indexOf(p[w]+"_"+C)==-1){p[w]+="_"+C;break}}}}var k=pr(o["!ref"]),R=[],D=[],P=[];for(w=0;w<=k.e.c-k.s.c;++w){var _="",N="",B=0,O=[];for(C=0;C<g.length;++C)g[C][w]!=null&&O.push(g[C][w]);if(O.length==0||p[w]==null){R[w]="?";continue}for(C=0;C<O.length;++C){switch(typeof O[C]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=O[C]instanceof Date?"D":"C";break;default:N="C"}B=Math.max(B,String(O[C]).length),_=_&&_!=N?"C":N}B>250&&(B=250),N=((b[w]||{}).DBF||{}).type,N=="C"&&b[w].DBF.len>B&&(B=b[w].DBF.len),_=="B"&&N=="N"&&(_="N",P[w]=b[w].DBF.dec,B=b[w].DBF.len),D[w]=_=="C"||N=="N"?B:a[_]||0,I+=D[w],R[w]=_}var M=d.next(32);for(M.write_shift(4,318902576),M.write_shift(4,g.length),M.write_shift(2,296+32*T),M.write_shift(2,I),w=0;w<4;++w)M.write_shift(4,0);for(M.write_shift(4,0|(+e[wM]||3)<<8),w=0,C=0;w<p.length;++w)if(p[w]!=null){var L=d.next(32),H=(p[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,H,"sbcs"),L.write_shift(1,R[w]=="?"?"C":R[w],"sbcs"),L.write_shift(4,C),L.write_shift(1,D[w]||a[R[w]]||0),L.write_shift(1,P[w]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),C+=D[w]||a[R[w]]||0}var G=d.next(264);for(G.write_shift(4,13),w=0;w<65;++w)G.write_shift(4,0);for(w=0;w<g.length;++w){var oe=d.next(I);for(oe.write_shift(1,0),C=0;C<p.length;++C)if(p[C]!=null)switch(R[C]){case"L":oe.write_shift(1,g[w][C]==null?63:g[w][C]?84:70);break;case"B":oe.write_shift(8,g[w][C]||0,"f");break;case"N":var q="0";for(typeof g[w][C]=="number"&&(q=g[w][C].toFixed(P[C]||0)),T=0;T<D[C]-q.length;++T)oe.write_shift(1,32);oe.write_shift(1,q,"sbcs");break;case"D":g[w][C]?(oe.write_shift(4,("0000"+g[w][C].getFullYear()).slice(-4),"sbcs"),oe.write_shift(2,("00"+(g[w][C].getMonth()+1)).slice(-2),"sbcs"),oe.write_shift(2,("00"+g[w][C].getDate()).slice(-2),"sbcs")):oe.write_shift(8,"00000000","sbcs");break;case"C":var X=String(g[w][C]!=null?g[w][C]:"").slice(0,D[C]);for(oe.write_shift(1,X,"sbcs"),T=0;T<D[C]-X.length;++T)oe.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),RP=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ms(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(p,g){var b=t[g];return typeof b=="number"?JI(b):b},r=function(p,g,b){var w=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return w==59?p:JI(w)};t["|"]=254;function s(p,g){switch(g.type){case"base64":return a(Yo(p),g);case"binary":return a(p,g);case"buffer":return a(qn&&Buffer.isBuffer(p)?p.toString("binary"):hf(p),g);case"array":return a(ph(p),g)}throw new Error("Unrecognized type "+g.type)}function a(p,g){var b=p.split(/[\n\r]+/),w=-1,C=-1,T=0,I=0,k=[],R=[],D=null,P={},_=[],N=[],B=[],O=0,M;for(+g.codepage>=0&&gc(+g.codepage);T!==b.length;++T){O=0;var L=b[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),H=L.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),G=H[0],oe;if(L.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&R.push(L.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,X=!1,re=!1,K=!1,Z=-1,Ae=-1;for(I=1;I<H.length;++I)switch(H[I].charAt(0)){case"A":break;case"X":C=parseInt(H[I].slice(1))-1,X=!0;break;case"Y":for(w=parseInt(H[I].slice(1))-1,X||(C=0),M=k.length;M<=w;++M)k[M]=[];break;case"K":oe=H[I].slice(1),oe.charAt(0)==='"'?oe=oe.slice(1,oe.length-1):oe==="TRUE"?oe=!0:oe==="FALSE"?oe=!1:isNaN(vc(oe))?isNaN(bm(oe).getDate())||(oe=os(oe)):(oe=vc(oe),D!==null&&Hm(D)&&(oe=xw(oe))),q=!0;break;case"E":K=!0;var j=om(H[I].slice(1),{r:w,c:C});k[w][C]=[k[w][C],j];break;case"S":re=!0,k[w][C]=[k[w][C],"S5S"];break;case"G":break;case"R":Z=parseInt(H[I].slice(1))-1;break;case"C":Ae=parseInt(H[I].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}if(q&&(k[w][C]&&k[w][C].length==2?k[w][C][0]=oe:k[w][C]=oe,D=null),re){if(K)throw new Error("SYLK shared formula cannot have own formula");var W=Z>-1&&k[Z][Ae];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");k[w][C][1]=JP(W[1],{r:w-Z,c:C-Ae})}break;case"F":var J=0;for(I=1;I<H.length;++I)switch(H[I].charAt(0)){case"X":C=parseInt(H[I].slice(1))-1,++J;break;case"Y":for(w=parseInt(H[I].slice(1))-1,M=k.length;M<=w;++M)k[M]=[];break;case"M":O=parseInt(H[I].slice(1))/20;break;case"F":break;case"G":break;case"P":D=R[parseInt(H[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=H[I].slice(1).split(" "),M=parseInt(B[0],10);M<=parseInt(B[1],10);++M)O=parseInt(B[2],10),N[M-1]=O===0?{hidden:!0}:{wch:O},sf(N[M-1]);break;case"C":C=parseInt(H[I].slice(1))-1,N[C]||(N[C]={});break;case"R":w=parseInt(H[I].slice(1))-1,_[w]||(_[w]={}),O>0?(_[w].hpt=O,_[w].hpx=Em(O)):O===0&&(_[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}J<1&&(D=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}}return _.length>0&&(P["!rows"]=_),N.length>0&&(P["!cols"]=N),g&&g.sheetRows&&(k=k.slice(0,g.sheetRows)),[k,P]}function i(p,g){var b=s(p,g),w=b[0],C=b[1],T=Gm(w,g);return Ms(C).forEach(function(I){T[I]=C[I]}),T}function o(p,g){return mf(i(p,g),g)}function l(p,g,b,w){var C="C;Y"+(b+1)+";X"+(w+1)+";K";switch(p.t){case"n":C+=p.v||0,p.f&&!p.F&&(C+=";E"+p4(p.f,{r:b,c:w}));break;case"b":C+=p.v?"TRUE":"FALSE";break;case"e":C+=p.w||p.v;break;case"d":C+='"'+(p.w||p.v)+'"';break;case"s":C+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return C}function u(p,g){g.forEach(function(b,w){var C="F;W"+(w+1)+" "+(w+1)+" ";b.hidden?C+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=tx(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=nx(b.wpx)),typeof b.wch=="number"&&(C+=Math.round(b.wch))),C.charAt(C.length-1)!=" "&&p.push(C)})}function d(p,g){g.forEach(function(b,w){var C="F;";b.hidden?C+="M0;":b.hpt?C+="M"+20*b.hpt+";":b.hpx&&(C+="M"+20*rx(b.hpx)+";"),C.length>2&&p.push(C+"R"+(w+1))})}function h(p,g){var b=["ID;PWXL;N;E"],w=[],C=pr(p["!ref"]),T,I=Array.isArray(p),k=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&d(b,p["!rows"]),b.push("B;Y"+(C.e.r-C.s.r+1)+";X"+(C.e.c-C.s.c+1)+";D"+[C.s.c,C.s.r,C.e.c,C.e.r].join(" "));for(var R=C.s.r;R<=C.e.r;++R)for(var D=C.s.c;D<=C.e.c;++D){var P=wn({r:R,c:D});T=I?(p[R]||[])[D]:p[P],!(!T||T.v==null&&(!T.f||T.F))&&w.push(l(T,p,R,D))}return b.join(k)+k+w.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),DP=function(){function t(a,i){switch(i.type){case"base64":return e(Yo(a),i);case"binary":return e(a,i);case"buffer":return e(qn&&Buffer.isBuffer(a)?a.toString("binary"):hf(a),i);case"array":return e(ph(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var p=o[d].trim().split(","),g=p[0],b=p[1];++d;for(var w=o[d]||"";(w.match(/["]/g)||[]).length&1&&d<o.length-1;)w+=`
`+o[++d];switch(w=w.trim(),+g){case-1:if(w==="BOT"){h[++l]=[],u=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?h[l][u]=!0:w==="FALSE"?h[l][u]=!1:isNaN(vc(b))?isNaN(bm(b).getDate())?h[l][u]=b:h[l][u]=os(b):h[l][u]=vc(b),++u;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),h[l][u++]=w!==""?w:null;break}if(w==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function n(a,i){return Gm(t(a,i),i)}function r(a,i){return mf(n(a,i),i)}var s=function(){var a=function(l,u,d,h,p){l.push(u),l.push(d+","+h),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=pr(l["!ref"]),h,p=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var w=wn({r:g,c:b});if(h=p?(l[g]||[])[b]:l[w],!h){i(u,1,0,"");continue}switch(h.t){case"n":var C=h.w;!C&&h.v!=null&&(C=h.v),C==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,C,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Ml(h.z||gn[14],Na(os(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,I=u.join(T);return I}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),UP=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,p){for(var g=h.split(`
`),b=-1,w=-1,C=0,T=[];C!==g.length;++C){var I=g[C].trim().split(":");if(I[0]==="cell"){var k=bs(I[1]);if(T.length<=k.r)for(b=T.length;b<=k.r;++b)T[b]||(T[b]=[]);switch(b=k.r,w=k.c,I[2]){case"t":T[b][w]=t(I[3]);break;case"v":T[b][w]=+I[3];break;case"vtf":var R=I[I.length-1];case"vtc":switch(I[3]){case"nl":T[b][w]=!!+I[4];break;default:T[b][w]=+I[4];break}I[2]=="vtf"&&(T[b][w]=[T[b][w],R])}}}return p&&p.sheetRows&&(T=T.slice(0,p.sheetRows)),T}function r(h,p){return Gm(n(h,p),p)}function s(h,p){return mf(r(h,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],b,w="",C=wo(h["!ref"]),T=Array.isArray(h),I=C.s.r;I<=C.e.r;++I)for(var k=C.s.c;k<=C.e.c;++k)if(w=wn({r:I,c:k}),b=T?(h[I]||[])[k]:h[w],!(!b||b.v==null||b.t==="z")){switch(g=["cell",w,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var R=Na(os(b.v));g[2]="vtc",g[3]="nd",g[4]=""+R,g[5]=b.w||Ml(b.z||gn[14],R);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(C.e.c-C.s.c+1)+":r:"+(C.e.r-C.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[a,i,o,i,u(h),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:d}}(),Cm=function(){function t(d,h,p,g,b){b.raw?h[p][g]=d:d===""||(d==="TRUE"?h[p][g]=!0:d==="FALSE"?h[p][g]=!1:isNaN(vc(d))?isNaN(bm(d).getDate())?h[p][g]=d:h[p][g]=os(d):h[p][g]=vc(d))}function e(d,h){var p=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),w=b.length-1;w>=0&&b[w].length===0;)--w;for(var C=10,T=0,I=0;I<=w;++I)T=b[I].indexOf(" "),T==-1?T=b[I].length:T++,C=Math.max(C,T);for(I=0;I<=w;++I){g[I]=[];var k=0;for(t(b[I].slice(0,C).trim(),g,I,k,p),k=1;k<=(b[I].length-C)/10+1;++k)t(b[I].slice(C+(k-1)*10,C+k*10).trim(),g,I,k,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(d){for(var h={},p=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?p=!p:!p&&b in n&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(w,C){return w[0]-C[0]||r[w[1]]-r[C[1]]}),n[b.pop()[1]]||44}function a(d,h){var p=h||{},g="",b=p.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):p&&p.FS?g=p.FS:g=s(d.slice(0,1024));var C=0,T=0,I=0,k=0,R=0,D=g.charCodeAt(0),P=!1,_=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=p.dateNF!=null?hoe(p.dateNF):null;function O(){var M=d.slice(k,R),L={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)L.t="z";else if(p.raw)L.t="s",L.v=M;else if(M.trim().length===0)L.t="s",L.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(L.t="s",L.v=M.slice(2,-1).replace(/""/g,'"')):Vde(M)?(L.t="n",L.f=M.slice(1)):(L.t="s",L.v=M);else if(M=="TRUE")L.t="b",L.v=!0;else if(M=="FALSE")L.t="b",L.v=!1;else if(!isNaN(I=vc(M)))L.t="n",p.cellText!==!1&&(L.w=M),L.v=I;else if(!isNaN(bm(M).getDate())||B&&M.match(B)){L.z=p.dateNF||gn[14];var H=0;B&&M.match(B)&&(M=moe(M,p.dateNF,M.match(B)||[]),H=1),p.cellDates?(L.t="d",L.v=os(M,H)):(L.t="n",L.v=Na(os(M,H))),p.cellText!==!1&&(L.w=Ml(L.z,L.v instanceof Date?Na(L.v):L.v)),p.cellNF||delete L.z}else L.t="s",L.v=M;if(L.t=="z"||(p.dense?(b[C]||(b[C]=[]),b[C][T]=L):b[wn({c:T,r:C})]=L),k=R+1,N=d.charCodeAt(k),w.e.c<T&&(w.e.c=T),w.e.r<C&&(w.e.r=C),_==D)++T;else if(T=0,++C,p.sheetRows&&p.sheetRows<=C)return!0}e:for(;R<d.length;++R)switch(_=d.charCodeAt(R)){case 34:N===34&&(P=!P);break;case D:case 10:case 13:if(!P&&O())break e;break}return R-k>0&&O(),b["!ref"]=Rn(w),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):Gm(e(d,h),h)}function o(d,h){var p="",g=h.type=="string"?[0,0,0,0]:E4(d,h);switch(h.type){case"base64":p=Yo(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof Kg<"u"||(p=qn&&Buffer.isBuffer(d)?d.toString("binary"):hf(d));break;case"array":p=ph(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=Kr(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=Kr(p):h.type=="binary"&&typeof Kg<"u",p.slice(0,19)=="socialcalc:version:"?UP.to_sheet(h.type=="string"?p:Kr(p),h):i(p,h)}function l(d,h){return mf(o(d,h),h)}function u(d){for(var h=[],p=pr(d["!ref"]),g,b=Array.isArray(d),w=p.s.r;w<=p.e.r;++w){for(var C=[],T=p.s.c;T<=p.e.c;++T){var I=wn({r:w,c:T});if(g=b?(d[w]||[])[T]:d[I],!g||g.v==null){C.push("          ");continue}for(var k=(g.w||(_A(g),g.w)||"").slice(0,10);k.length<10;)k+=" ";C.push(k+(T===0?" ":""))}h.push(C.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function Nue(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=RP.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return Cm.to_workbook(t,e)}}var sh=function(){function t(j,W,J){if(j){ni(j,j.l||0);for(var ne=J.Enum||Z;j.l<j.length;){var ie=j.read_shift(2),de=ne[ie]||ne[65535],me=j.read_shift(2),xe=j.l+me,Se=de.f&&de.f(j,me,J);if(j.l=xe,W(Se,de,ie))return}}}function e(j,W){switch(W.type){case"base64":return n(Go(Yo(j)),W);case"binary":return n(Go(j),W);case"buffer":case"array":return n(j,W)}throw"Unsupported type "+W.type}function n(j,W){if(!j)return j;var J=W||{},ne=J.dense?[]:{},ie="Sheet1",de="",me=0,xe={},Se=[],ge=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Fe=J.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)J.Enum=Z,t(j,function(Ge,nt,it){switch(it){case 0:J.vers=Ge,Ge>=4096&&(J.qpro=!0);break;case 6:ae=Ge;break;case 204:Ge&&(de=Ge);break;case 222:de=Ge;break;case 15:case 51:J.qpro||(Ge[1].v=Ge[1].v.slice(1));case 13:case 14:case 16:it==14&&(Ge[2]&112)==112&&(Ge[2]&15)>1&&(Ge[2]&15)<15&&(Ge[1].z=J.dateNF||gn[14],J.cellDates&&(Ge[1].t="d",Ge[1].v=xw(Ge[1].v))),J.qpro&&Ge[3]>me&&(ne["!ref"]=Rn(ae),xe[ie]=ne,Se.push(ie),ne=J.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=Ge[3],ie=de||"Sheet"+(me+1),de="");var dt=J.dense?(ne[Ge[0].r]||[])[Ge[0].c]:ne[wn(Ge[0])];if(dt){dt.t=Ge[1].t,dt.v=Ge[1].v,Ge[1].z!=null&&(dt.z=Ge[1].z),Ge[1].f!=null&&(dt.f=Ge[1].f);break}J.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[wn(Ge[0])]=Ge[1];break}},J);else if(j[2]==26||j[2]==14)J.Enum=Ae,j[2]==14&&(J.qpro=!0,j.l=0),t(j,function(Ge,nt,it){switch(it){case 204:ie=Ge;break;case 22:Ge[1].v=Ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ge[3]>me&&(ne["!ref"]=Rn(ae),xe[ie]=ne,Se.push(ie),ne=J.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=Ge[3],ie="Sheet"+(me+1)),Fe>0&&Ge[0].r>=Fe)break;J.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[wn(Ge[0])]=Ge[1],ae.e.c<Ge[0].c&&(ae.e.c=Ge[0].c),ae.e.r<Ge[0].r&&(ae.e.r=Ge[0].r);break;case 27:Ge[14e3]&&(ge[Ge[14e3][0]]=Ge[14e3][1]);break;case 1537:ge[Ge[0]]=Ge[1],Ge[0]==me&&(ie=Ge[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(ne["!ref"]=Rn(ae),xe[de||ie]=ne,Se.push(de||ie),!ge.length)return{SheetNames:Se,Sheets:xe};for(var et={},De=[],Ce=0;Ce<ge.length;++Ce)xe[Se[Ce]]?(De.push(ge[Ce]||Se[Ce]),et[ge[Ce]]=xe[ge[Ce]]||xe[Se[Ce]]):(De.push(ge[Ce]),et[ge[Ce]]={"!ref":"A1"});return{SheetNames:De,Sheets:et}}function r(j,W){var J=W||{};if(+J.codepage>=0&&gc(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=xo(),ie=pr(j["!ref"]),de=Array.isArray(j),me=[];Ut(ne,0,a(1030)),Ut(ne,6,l(ie));for(var xe=Math.min(ie.e.r,8191),Se=ie.s.r;Se<=xe;++Se)for(var ge=ea(Se),ae=ie.s.c;ae<=ie.e.c;++ae){Se===ie.s.r&&(me[ae]=ws(ae));var Fe=me[ae]+ge,et=de?(j[Se]||[])[ae]:j[Fe];if(!(!et||et.t=="z"))if(et.t=="n")(et.v|0)==et.v&&et.v>=-32768&&et.v<=32767?Ut(ne,13,g(Se,ae,et.v)):Ut(ne,14,w(Se,ae,et.v));else{var De=_A(et);Ut(ne,15,h(Se,ae,De.slice(0,239)))}}return Ut(ne,1),ne.end()}function s(j,W){var J=W||{};if(+J.codepage>=0&&gc(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=xo();Ut(ne,0,i(j));for(var ie=0,de=0;ie<j.SheetNames.length;++ie)(j.Sheets[j.SheetNames[ie]]||{})["!ref"]&&Ut(ne,27,K(j.SheetNames[ie],de++));var me=0;for(ie=0;ie<j.SheetNames.length;++ie){var xe=j.Sheets[j.SheetNames[ie]];if(!(!xe||!xe["!ref"])){for(var Se=pr(xe["!ref"]),ge=Array.isArray(xe),ae=[],Fe=Math.min(Se.e.r,8191),et=Se.s.r;et<=Fe;++et)for(var De=ea(et),Ce=Se.s.c;Ce<=Se.e.c;++Ce){et===Se.s.r&&(ae[Ce]=ws(Ce));var Ge=ae[Ce]+De,nt=ge?(xe[et]||[])[Ce]:xe[Ge];if(!(!nt||nt.t=="z"))if(nt.t=="n")Ut(ne,23,O(et,Ce,me,nt.v));else{var it=_A(nt);Ut(ne,22,_(et,Ce,me,it.slice(0,239)))}}++me}}return Ut(ne,1),ne.end()}function a(j){var W=lt(2);return W.write_shift(2,j),W}function i(j){var W=lt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var J=0,ne=0,ie=0,de=0;de<j.SheetNames.length;++de){var me=j.SheetNames[de],xe=j.Sheets[me];if(!(!xe||!xe["!ref"])){++ie;var Se=wo(xe["!ref"]);J<Se.e.r&&(J=Se.e.r),ne<Se.e.c&&(ne=Se.e.c)}}return J>8191&&(J=8191),W.write_shift(2,J),W.write_shift(1,ie),W.write_shift(1,ne),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(j,W,J){var ne={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&J.qpro?(ne.s.c=j.read_shift(1),j.l++,ne.s.r=j.read_shift(2),ne.e.c=j.read_shift(1),j.l++,ne.e.r=j.read_shift(2),ne):(ne.s.c=j.read_shift(2),ne.s.r=j.read_shift(2),W==12&&J.qpro&&(j.l+=2),ne.e.c=j.read_shift(2),ne.e.r=j.read_shift(2),W==12&&J.qpro&&(j.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(j){var W=lt(8);return W.write_shift(2,j.s.c),W.write_shift(2,j.s.r),W.write_shift(2,j.e.c),W.write_shift(2,j.e.r),W}function u(j,W,J){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(ne[0].c=j.read_shift(1),ne[3]=j.read_shift(1),ne[0].r=j.read_shift(2),j.l+=2):(ne[2]=j.read_shift(1),ne[0].c=j.read_shift(2),ne[0].r=j.read_shift(2)),ne}function d(j,W,J){var ne=j.l+W,ie=u(j,W,J);if(ie[1].t="s",J.vers==20768){j.l++;var de=j.read_shift(1);return ie[1].v=j.read_shift(de,"utf8"),ie}return J.qpro&&j.l++,ie[1].v=j.read_shift(ne-j.l,"cstr"),ie}function h(j,W,J){var ne=lt(7+J.length);ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(1,39);for(var ie=0;ie<ne.length;++ie){var de=J.charCodeAt(ie);ne.write_shift(1,de>=128?95:de)}return ne.write_shift(1,0),ne}function p(j,W,J){var ne=u(j,W,J);return ne[1].v=j.read_shift(2,"i"),ne}function g(j,W,J){var ne=lt(7);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(2,J,"i"),ne}function b(j,W,J){var ne=u(j,W,J);return ne[1].v=j.read_shift(8,"f"),ne}function w(j,W,J){var ne=lt(13);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,j),ne.write_shift(8,J,"f"),ne}function C(j,W,J){var ne=j.l+W,ie=u(j,W,J);if(ie[1].v=j.read_shift(8,"f"),J.qpro)j.l=ne;else{var de=j.read_shift(2);R(j.slice(j.l,j.l+de),ie),j.l+=de}return ie}function T(j,W,J){var ne=W&32768;return W&=-32769,W=(ne?j:0)+(W>=8192?W-16384:W),(ne?"":"$")+(J?ws(W):ea(W))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function R(j,W){ni(j,0);for(var J=[],ne=0,ie="",de="",me="",xe="";j.l<j.length;){var Se=j[j.l++];switch(Se){case 0:J.push(j.read_shift(8,"f"));break;case 1:de=T(W[0].c,j.read_shift(2),!0),ie=T(W[0].r,j.read_shift(2),!1),J.push(de+ie);break;case 2:{var ge=T(W[0].c,j.read_shift(2),!0),ae=T(W[0].r,j.read_shift(2),!1);de=T(W[0].c,j.read_shift(2),!0),ie=T(W[0].r,j.read_shift(2),!1),J.push(ge+ae+":"+de+ie)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(j.read_shift(2));break;case 6:{for(var Fe="";Se=j[j.l++];)Fe+=String.fromCharCode(Se);J.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:xe=J.pop(),me=J.pop(),J.push(["AND","OR"][Se-20]+"("+me+","+xe+")");break;default:if(Se<32&&k[Se])xe=J.pop(),me=J.pop(),J.push(me+k[Se]+xe);else if(I[Se]){if(ne=I[Se][1],ne==69&&(ne=j[j.l++]),ne>J.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+J.join("|")+"|");return}var et=J.slice(-ne);J.length-=ne,J.push(I[Se][0]+"("+et.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}J.length==1?W[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function D(j){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=j.read_shift(2),W[3]=j[j.l++],W[0].c=j[j.l++],W}function P(j,W){var J=D(j);return J[1].t="s",J[1].v=j.read_shift(W-4,"cstr"),J}function _(j,W,J,ne){var ie=lt(6+ne.length);ie.write_shift(2,j),ie.write_shift(1,J),ie.write_shift(1,W),ie.write_shift(1,39);for(var de=0;de<ne.length;++de){var me=ne.charCodeAt(de);ie.write_shift(1,me>=128?95:me)}return ie.write_shift(1,0),ie}function N(j,W){var J=D(j);J[1].v=j.read_shift(2);var ne=J[1].v>>1;if(J[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return J[1].v=ne,J}function B(j,W){var J=D(j),ne=j.read_shift(4),ie=j.read_shift(4),de=j.read_shift(2);if(de==65535)return ne===0&&ie===3221225472?(J[1].t="e",J[1].v=15):ne===0&&ie===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var me=de&32768;return de=(de&32767)-16446,J[1].v=(1-me*2)*(ie*Math.pow(2,de+32)+ne*Math.pow(2,de)),J}function O(j,W,J,ne){var ie=lt(14);if(ie.write_shift(2,j),ie.write_shift(1,J),ie.write_shift(1,W),ne==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var de=0,me=0,xe=0,Se=0;return ne<0&&(de=1,ne=-ne),me=Math.log2(ne)|0,ne/=Math.pow(2,me-31),Se=ne>>>0,(Se&2147483648)==0&&(ne/=2,++me,Se=ne>>>0),ne-=Se,Se|=2147483648,Se>>>=0,ne*=Math.pow(2,32),xe=ne>>>0,ie.write_shift(4,xe),ie.write_shift(4,Se),me+=16383+(de?32768:0),ie.write_shift(2,me),ie}function M(j,W){var J=B(j);return j.l+=W-14,J}function L(j,W){var J=D(j),ne=j.read_shift(4);return J[1].v=ne>>6,J}function H(j,W){var J=D(j),ne=j.read_shift(8,"f");return J[1].v=ne,J}function G(j,W){var J=H(j);return j.l+=W-10,J}function oe(j,W){return j[j.l+W-1]==0?j.read_shift(W,"cstr"):""}function q(j,W){var J=j[j.l++];J>W-1&&(J=W-1);for(var ne="";ne.length<J;)ne+=String.fromCharCode(j[j.l++]);return ne}function X(j,W,J){if(!(!J.qpro||W<21)){var ne=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var ie=j.read_shift(W-21,"cstr");return[ne,ie]}}function re(j,W){for(var J={},ne=j.l+W;j.l<ne;){var ie=j.read_shift(2);if(ie==14e3){for(J[ie]=[0,""],J[ie][0]=j.read_shift(2);j[j.l];)J[ie][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return J}function K(j,W){var J=lt(5+j.length);J.write_shift(2,14e3),J.write_shift(2,W);for(var ne=0;ne<j.length;++ne){var ie=j.charCodeAt(ne);J[J.l++]=ie>127?95:ie}return J[J.l++]=0,J}var Z={0:{n:"BOF",f:fa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:C},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:oe},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},Ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}();function kue(t){var e={},n=t.match(ji),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=_n(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=Q5[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Iue=function(){var t=Yg("t"),e=Yg("rPr");function n(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:mr(i[1])},l=a.match(e);return l&&(o.s=kue(l[1])),o}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(s).map(n).filter(function(o){return o.v})}}(),Fue=function(){var e=/(\r\n|\n)/g;function n(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}}(),Rue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Due=/<(?:\w+:)?r>/,Uue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function A4(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=mr(Kr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Kr(t),n&&(r.h=J5(r.t))):t.match(Due)&&(r.r=Kr(t),r.t=mr(Kr((t.replace(Uue,"").match(Rue)||[]).join("").replace(ji,""))),n&&(r.h=Fue(Iue(r.r)))),r):{t:""}}var Lue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Mue=/<(?:\w+:)?(?:si|sstItem)>/g,Pue=/<\/(?:\w+:)?(?:si|sstItem)>/;function jue(t,e){var n=[],r="";if(!t)return n;var s=t.match(Lue);if(s){r=s[2].replace(Mue,"").split(Pue);for(var a=0;a!=r.length;++a){var i=A4(r[a].trim(),e);i!=null&&(n[n.length]=i)}s=_n(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}var Oue=/^\s|\s$|[\t\n\r]/;function LP(t,e){if(!e.bookSST)return"";var n=[ta];n[n.length]=Dt("sst",null,{xmlns:Ih[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Oue)&&(a+=' xml:space="preserve"'),a+=">"+Pr(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Que(t){return[t.read_shift(4),t.read_shift(4)]}function Hue(t,e){var n=[],r=!1;return RA(t,function(a,i,o){switch(o){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Vue(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Gue=ele;function zue(t){var e=xo();Et(e,159,Vue(t));for(var n=0;n<t.length;++n)Et(e,19,Gue(t[n]));return Et(e,160),e.end()}function MP(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function xA(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function que(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=xA(t,4),e.U=xA(t,4),e.W=xA(t,4),e}function Kue(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function Wue(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(Kue(t));return e}function $ue(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Yue(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=xA(t,4),e.U=xA(t,4),e.W=xA(t,4),e}function Jue(t){var e=Yue(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function PP(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function jP(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function Xue(t){var e=xA(t);switch(e.Minor){case 2:return[e.Minor,Zue(t)];case 3:return[e.Minor,eAe()];case 4:return[e.Minor,tAe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Zue(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=PP(t,n),s=jP(t,t.length-t.l);return{t:"Std",h:r,v:s}}function eAe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function tAe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(ji,function(a){var i=_n(a);switch(Su(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function nAe(t,e){var n={},r=n.EncryptionVersionInfo=xA(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=PP(t,s),e-=s,n.EncryptionVerifier=jP(t,e),n}function rAe(t){var e={},n=e.EncryptionVersionInfo=xA(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function d4(t){var e=0,n,r=MP(t),s=r.length+1,a,i,o,l,u;for(n=rf(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)i=n[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var OP=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},s=function(i,o){return r(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=n[l]),d*=2,--l;return o};return function(i){for(var o=MP(i),l=a(o),u=o.length,d=rf(16),h=0;h!=16;++h)d[h]=0;var p,g,b;for((u&1)===1&&(p=l>>8,d[u]=s(t[0],p),--u,p=l&255,g=o[o.length-1],d[u]=s(g,p));u>0;)--u,p=l>>8,d[u]=s(o[u],p),--u,p=l&255,d[u]=s(o[u],p);for(u=15,b=15-o.length;b>0;)p=l>>8,d[u]=s(t[b],p),--u,--b,p=l&255,d[u]=s(o[u],p),--u,--b;return d}}(),sAe=function(t,e,n,r,s){s||(s=e),r||(r=OP(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=r[n],i=(i>>5|i<<3)&255,s[a]=i,++n;return[s,n,r]},aAe=function(t){var e=0,n=OP(t);return function(r){var s=sAe("",r,e,n);return e=s[1],s[0]}};function iAe(t,e,n,r){var s={key:fa(t),verificationBytes:fa(t)};return n.password&&(s.verifier=d4(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=aAe(n.password)),s}function oAe(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=rAe(t):r.Data=nAe(t,e),r}function lAe(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?oAe(t,e-2,r):iAe(t,n.biff>=8?e:e-2,n,r),r}var QP=function(){function t(s,a){switch(a.type){case"base64":return e(Yo(s),a);case"binary":return e(s,a);case"buffer":return e(qn&&Buffer.isBuffer(s)?s.toString("binary"):hf(s),a);case"array":return e(ph(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var p=/\\\w+\b/g,g=0,b,w=-1;b=p.exec(d);){switch(b[0]){case"\\cell":var C=d.slice(g,p.lastIndex-b[0].length);if(C[0]==" "&&(C=C.slice(1)),++w,C.length){var T={v:C,t:"s"};Array.isArray(o)?o[h][w]=T:o[wn({r:h,c:w})]=T}break}g=p.lastIndex}w>u.e.c&&(u.e.c=w)}),o["!ref"]=Rn(u),o}function n(s,a){return mf(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=pr(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=wn({r:u,c:d});o=l?(s[u]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(_A(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function cAe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ex(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function uAe(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,u/2]}function AAe(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,i=[a,a,a],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function oy(t,e){if(e===0)return t;var n=uAe(cAe(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),ex(AAe(n))}var HP=6,dAe=15,fAe=1,Ii=HP;function tx(t){return Math.floor((t+Math.round(128/Ii)/256)*Ii)}function nx(t){return Math.floor((t-5)/Ii*100+.5)/100}function ly(t){return Math.round((t*Ii+5)/Ii*256)/256}function HC(t){return ly(nx(tx(t)))}function f4(t){var e=Math.abs(t-HC(t)),n=Ii;if(e>.005)for(Ii=fAe;Ii<dAe;++Ii)Math.abs(t-HC(t))<=e&&(e=Math.abs(t-HC(t)),n=Ii);Ii=n}function sf(t){t.width?(t.wpx=tx(t.width),t.wch=nx(t.wpx),t.MDW=Ii):t.wpx?(t.wch=nx(t.wpx),t.width=ly(t.wch),t.MDW=Ii):typeof t.wch=="number"&&(t.width=ly(t.wch),t.wpx=tx(t.width),t.MDW=Ii),t.customWidth&&delete t.customWidth}var hAe=96,VP=hAe;function rx(t){return t*96/VP}function Em(t){return t*VP/96}var mAe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function pAe(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(ji)||[]).forEach(function(i){var o=_n(i);switch(Su(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=ss(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=ss(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function gAe(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(ji)||[]).forEach(function(i){var o=_n(i);switch(Su(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function xAe(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(ji)||[]).forEach(function(i){var o=_n(i);switch(Su(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Kr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?ss(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?ss(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?ss(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?ss(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?ss(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?ss(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?ss(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Q5[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=ss(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=nh[s.color.index];s.color.index==81&&(l=nh[1]),l||(l=nh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=oy(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function vAe(t,e,n){e.NumberFmt=[];for(var r=Ms(gn),s=0;s<r.length;++s)e.NumberFmt[r[s]]=gn[r[s]];var a=t[0].match(ji);if(a)for(s=0;s<a.length;++s){var i=_n(a[s]);switch(Su(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=mr(Kr(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}gA(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function yAe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Dt("numFmt",null,{numFmtId:r,formatCode:Pr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Dt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var fv=["numFmtId","fillId","fontId","borderId","xfId"],hv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function wAe(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(ji)||[]).forEach(function(a){var i=_n(a),o=0;switch(Su(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<fv.length;++o)r[fv[o]]&&(r[fv[o]]=parseInt(r[fv[o]],10));for(o=0;o<hv.length;++o)r[hv[o]]&&(r[hv[o]]=ss(r[hv[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ss(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function bAe(t){var e=[];return e[e.length]=Dt("cellXfs",null),t.forEach(function(n){e[e.length]=Dt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Dt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var CAe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&vAe(h,d,u),(h=o.match(s))&&xAe(h,d,l,u),(h=o.match(r))&&gAe(h,d,l,u),(h=o.match(a))&&pAe(h,d,l,u),(h=o.match(n))&&wAe(h,d,u),d}}();function GP(t,e){var n=[ta,Dt("styleSheet",null,{xmlns:Ih[0],"xmlns:vt":Sa.vt})],r;return t.SSF&&(r=yAe(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=bAe(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function EAe(t,e){var n=t.read_shift(2),r=Ui(t);return[n,r]}function _Ae(t,e,n){n||(n=lt(6+4*e.length)),n.write_shift(2,t),Va(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function SAe(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=ole(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=ile(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ui(t),r}function TAe(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),lle(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),sy(t.color,e);var r=0;return r=2,e.write_shift(1,r),Va(t.name,e),e.length>e.l?e.slice(0,e.l):e}var BAe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],VC,NAe=Mi;function QF(t,e){e||(e=lt(84)),VC||(VC=pw(BAe));var n=VC[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(sy({auto:1},e),sy({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function kAe(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function zP(t,e,n){n||(n=lt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Mp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var IAe=Mi;function FAe(t,e){return e||(e=lt(51)),e.write_shift(1,0),Mp(null,e),Mp(null,e),Mp(null,e),Mp(null,e),Mp(null,e),e.length>e.l?e.slice(0,e.l):e}function RAe(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),ry(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function DAe(t,e,n){var r=lt(2052);return r.write_shift(4,t),ry(e,r),ry(n,r),r.length>r.l?r.slice(0,r.l):r}function UAe(t,e,n){var r={};r.NumberFmt=[];for(var s in gn)r.NumberFmt[s]=gn[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return RA(t,function(l,u,d){switch(d){case 44:r.NumberFmt[l[0]]=l[1],gA(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=oy(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function LAe(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(Et(t,615,yc(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Et(t,44,_Ae(s,e[s]))}),Et(t,616))}}function MAe(t){var e=1;Et(t,611,yc(e)),Et(t,43,TAe({sz:12,color:{theme:1},name:"Calibri",family:2})),Et(t,612)}function PAe(t){var e=2;Et(t,603,yc(e)),Et(t,45,QF({patternType:"none"})),Et(t,45,QF({patternType:"gray125"})),Et(t,604)}function jAe(t){var e=1;Et(t,613,yc(e)),Et(t,46,FAe()),Et(t,614)}function OAe(t){var e=1;Et(t,626,yc(e)),Et(t,47,zP({numFmtId:0},65535)),Et(t,627)}function QAe(t,e){Et(t,617,yc(e.length)),e.forEach(function(n){Et(t,47,zP(n,0))}),Et(t,618)}function HAe(t){var e=1;Et(t,619,yc(e)),Et(t,48,RAe({xfId:0,name:"Normal"})),Et(t,620)}function VAe(t){var e=0;Et(t,505,yc(e)),Et(t,506)}function GAe(t){var e=0;Et(t,508,DAe(e,"TableStyleMedium9","PivotStyleMedium4")),Et(t,509)}function zAe(t,e){var n=xo();return Et(n,278),LAe(n,t.SSF),MAe(n),PAe(n),jAe(n),OAe(n),QAe(n,e.cellXfs),HAe(n),VAe(n),GAe(n),Et(n,279),n.end()}var qAe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function KAe(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(ji)||[]).forEach(function(s){var a=_n(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[qAe.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function WAe(){}function $Ae(){}var YAe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,JAe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,XAe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function ZAe(t,e,n){e.themeElements={};var r;[["clrScheme",YAe,KAe],["fontScheme",JAe,WAe],["fmtScheme",XAe,$Ae]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var ede=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function qP(t,e){(!t||t.length===0)&&(t=h4());var n,r={};if(!(n=t.match(ede)))throw new Error("themeElements not found in theme");return ZAe(n[0],r,e),r.raw=t,r}function h4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[ta];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function tde(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var i;try{i=PM(a,{type:"array"})}catch{return}var o=zo(i,"theme/theme/theme1.xml",!0);if(o)return qP(o,n)}}function nde(t){return t.read_shift(4)}function rde(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=sde(t,4);break;case 2:e.xclrValue=_P(t);break;case 3:e.xclrValue=nde(t);break;case 4:t.l+=4;break}return t.l+=8,e}function sde(t,e){return Mi(t,e)}function ade(t,e){return Mi(t,e)}function ide(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=rde(t);break;case 6:r[1]=ade(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function ode(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(ide(t,n-t.l));return{ixfe:r,ext:a}}function lde(t,e){e.forEach(function(n){n[0]})}function cde(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ui(t)}}function ude(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Va(t.name,e),e.slice(0,e.l)}function Ade(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function dde(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function fde(t,e){var n=lt(8+2*e.length);return n.write_shift(4,t),Va(e,n),n.slice(0,n.l)}function hde(t){return t.l+=4,t.read_shift(4)!=0}function mde(t,e){var n=lt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function pde(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return RA(t,function(l,u,d){switch(d){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function gde(){var t=xo();return Et(t,332),Et(t,334,yc(1)),Et(t,335,ude({name:"XLDAPR",version:12e4,flags:3496657072})),Et(t,336),Et(t,339,fde(1,"XLDAPR")),Et(t,52),Et(t,35,yc(514)),Et(t,4096,yc(0)),Et(t,4097,Tl(1)),Et(t,36),Et(t,53),Et(t,340),Et(t,337,mde(1)),Et(t,51,dde([[1,0]])),Et(t,338),Et(t,333),t.end()}function xde(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,i;return t.replace(ji,function(o){var l=_n(o);switch(Su(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==l.name&&(i=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):a==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function KP(){var t=[ta];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function vde(t){var e=[];if(!t)return e;var n=1;return(t.match(ji)||[]).forEach(function(r){var s=_n(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function yde(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=wn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function wde(t,e,n){var r=[];return RA(t,function(a,i,o){switch(o){case 63:r.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function bde(t,e,n,r){if(!t)return t;var s=r||{},a=!1;RA(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function Cde(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var V0=1024;function WP(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Dt("xml",null,{"xmlns:v":Ho.v,"xmlns:o":Ho.o,"xmlns:x":Ho.x,"xmlns:mv":Ho.mv}).replace(/\/>/,">"),Dt("o:shapelayout",Dt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Dt("v:shapetype",[Dt("v:stroke",null,{joinstyle:"miter"}),Dt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];V0<t*1e3;)V0+=1e3;return e.forEach(function(a){var i=bs(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Dt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Dt("v:fill",l,o),d={on:"t",obscured:"t"};++V0,s=s.concat(["<v:shape"+Jg({id:"_x0000_s"+V0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Dt("v:shadow",null,d),Dt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",si("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),si("x:AutoFill","False"),si("x:Row",String(i.r)),si("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function HF(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(i){var o=bs(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=pr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Rn(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:n};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!n&&a.c[h].T)return;n&&!a.c[h].T&&a.c.splice(h,1)}if(n&&r){for(h=0;h<r.length;++h)if(d.a==r[h].id){d.a=r[h].name||d.a;break}}a.c.push(d)})}function Ede(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=_n(o[0]),u={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=bs(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!h&&!!h[1]&&A4(h[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=p.h),r.push(u)}}}}),r}function $P(t){var e=[ta,Dt("comments",null,{xmlns:Ih[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var a=Pr(s.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=n.indexOf(Pr(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(si("t",Pr(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(si("t",Pr(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function _de(t,e){var n=[],r=!1,s={},a=0;return t.replace(ji,function(o,l){var u=_n(o);switch(Su(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),n}function Sde(t,e,n){var r=[ta,Dt("ThreadedComments",null,{xmlns:Sa.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Dt("threadedComment",si("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Tde(t,e){var n=[],r=!1;return t.replace(ji,function(a){var i=_n(a);switch(Su(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),n}function Bde(t){var e=[ta,Dt("personList",null,{xmlns:Sa.TCMNT,"xmlns:x":Ih[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Dt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Nde(t){var e={};e.iauthor=t.read_shift(4);var n=Uh(t);return e.rfx=n.s,e.ref=wn(n.s),t.l+=16,e}function kde(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),zm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Ide=Ui;function Fde(t){return Va(t.slice(0,54))}function Rde(t,e){var n=[],r=[],s={},a=!1;return RA(t,function(o,l,u){switch(u){case 632:r.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function Dde(t){var e=xo(),n=[];return Et(e,628),Et(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),Et(e,632,Fde(s.a)))})}),Et(e,631),Et(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var a={s:bs(r[0]),e:bs(r[0])};Et(e,635,kde([a,s])),s.t&&s.t.length>0&&Et(e,637,nle(s)),Et(e,636),delete s.iauthor})}),Et(e,634),Et(e,629),e.end()}var Ude="application/vnd.ms-office.vbaProject";function Lde(t){var e=ln.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ln.utils.cfb_add(e,s,t.FileIndex[r].content)}}),ln.write(e)}function Mde(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&ln.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var YP=["xlsb","xlsm","xlam","biff8","xla"];function Pde(){return{"!type":"dialog"}}function jde(){return{"!type":"dialog"}}function Ode(){return{"!type":"macro"}}function Qde(){return{"!type":"macro"}}var om=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+ws(d)+(l?"":"$")+ea(u)}return function(s,a){return e=a,s.replace(t,n)}}(),m4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,p4=function(){return function(e,n){return e.replace(m4,function(r,s,a,i,o,l){var u=n4(i)-(a?0:n.c),d=t4(l)-(o?0:n.r),h=d==0?"":o?d+1:"["+d+"]",p=u==0?"":a?u+1:"["+u+"]";return s+"R"+h+"C"+p})}}();function JP(t,e){return t.replace(m4,function(n,r,s,a,i,o){return r+(s=="$"?s+a:ws(n4(a)+e.c))+(i=="$"?i+o:ea(t4(o)+e.r))})}function Hde(t,e,n){var r=wo(e),s=r.s,a=bs(n),i={r:a.r-s.r,c:a.c-s.c};return JP(t,i)}function Vde(t){return t.length!=1}function VF(t){return t.replace(/_xlfn\./g,"")}function ua(t){t.l+=1}function af(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function XP(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return ZP(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),i=af(t),o=af(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function ZP(t){var e=af(t),n=af(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function Gde(t,e,n){if(n.biff<8)return ZP(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=af(t),i=af(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function e7(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return zde(t);var r=t.read_shift(n&&n.biff==12?4:2),s=af(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function zde(t){var e=af(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function qde(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Kde(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Wde(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Wde(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function $de(t,e,n){var r=(t[t.l++]&96)>>5,s=XP(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function Yde(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=XP(t,a,n);return[r,s,i]}function Jde(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Xde(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function Zde(t,e,n){var r=(t[t.l++]&96)>>5,s=Gde(t,e-1,n);return[r,s]}function efe(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function GF(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function tfe(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function nfe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function rfe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function sfe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function afe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function t7(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function ife(t){return t.read_shift(2),t7(t)}function ofe(t){return t.read_shift(2),t7(t)}function lfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=e7(t,0,n);return[r,s]}function cfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=Kde(t,0,n);return[r,s]}function ufe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=e7(t,0,n);return[r,s,a]}function Afe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[hhe[s],s7[s],r]}function dfe(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:ffe(t);return[s,(a[0]===0?s7:fhe)[a[1]]]}function ffe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function hfe(t,e,n){t.l+=n&&n.biff==2?3:4}function mfe(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function pfe(t){return t.l++,DA[t.read_shift(1)]}function gfe(t){return t.l++,t.read_shift(2)}function xfe(t){return t.l++,t.read_shift(1)!==0}function vfe(t){return t.l++,Ri(t)}function yfe(t,e,n){return t.l++,Ux(t,e-1,n)}function wfe(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=qs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=DA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Ri(t);break;case 2:n[1]=Lh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function bfe(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?Uh:vw)(t));return s}function Cfe(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=wfe(t,n.biff);return i}function Efe(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function _fe(t,e,n){if(n.biff==5)return Sfe(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function Sfe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function Tfe(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Bfe(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Nfe(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function kfe(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var Ife=Mi,Ffe=Mi,Rfe=Mi;function Mx(t,e,n){return t.l+=2,[qde(t)]}function g4(t){return t.l+=6,[]}var Dfe=Mx,Ufe=g4,Lfe=g4,Mfe=Mx;function n7(t){return t.l+=2,[fa(t),t.read_shift(2)&1]}var Pfe=Mx,jfe=n7,Ofe=g4,Qfe=Mx,Hfe=Mx,Vfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Gfe(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=Vfe[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:s,C:a}}function zfe(t){return t.l+=2,[t.read_shift(4)]}function qfe(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function Kfe(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function Wfe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function $fe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Yfe(t){return t.l+=4,[0,0]}var zF={1:{n:"PtgExp",f:mfe},2:{n:"PtgTbl",f:Rfe},3:{n:"PtgAdd",f:ua},4:{n:"PtgSub",f:ua},5:{n:"PtgMul",f:ua},6:{n:"PtgDiv",f:ua},7:{n:"PtgPower",f:ua},8:{n:"PtgConcat",f:ua},9:{n:"PtgLt",f:ua},10:{n:"PtgLe",f:ua},11:{n:"PtgEq",f:ua},12:{n:"PtgGe",f:ua},13:{n:"PtgGt",f:ua},14:{n:"PtgNe",f:ua},15:{n:"PtgIsect",f:ua},16:{n:"PtgUnion",f:ua},17:{n:"PtgRange",f:ua},18:{n:"PtgUplus",f:ua},19:{n:"PtgUminus",f:ua},20:{n:"PtgPercent",f:ua},21:{n:"PtgParen",f:ua},22:{n:"PtgMissArg",f:ua},23:{n:"PtgStr",f:yfe},26:{n:"PtgSheet",f:qfe},27:{n:"PtgEndSheet",f:Kfe},28:{n:"PtgErr",f:pfe},29:{n:"PtgBool",f:xfe},30:{n:"PtgInt",f:gfe},31:{n:"PtgNum",f:vfe},32:{n:"PtgArray",f:efe},33:{n:"PtgFunc",f:Afe},34:{n:"PtgFuncVar",f:dfe},35:{n:"PtgName",f:Efe},36:{n:"PtgRef",f:lfe},37:{n:"PtgArea",f:$de},38:{n:"PtgMemArea",f:Tfe},39:{n:"PtgMemErr",f:Ife},40:{n:"PtgMemNoMem",f:Ffe},41:{n:"PtgMemFunc",f:Bfe},42:{n:"PtgRefErr",f:Nfe},43:{n:"PtgAreaErr",f:Jde},44:{n:"PtgRefN",f:cfe},45:{n:"PtgAreaN",f:Zde},46:{n:"PtgMemAreaN",f:Wfe},47:{n:"PtgMemNoMemN",f:$fe},57:{n:"PtgNameX",f:_fe},58:{n:"PtgRef3d",f:ufe},59:{n:"PtgArea3d",f:Yde},60:{n:"PtgRefErr3d",f:kfe},61:{n:"PtgAreaErr3d",f:Xde},255:{}},Jfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Xfe={1:{n:"PtgElfLel",f:n7},2:{n:"PtgElfRw",f:Qfe},3:{n:"PtgElfCol",f:Dfe},6:{n:"PtgElfRwV",f:Hfe},7:{n:"PtgElfColV",f:Mfe},10:{n:"PtgElfRadical",f:Pfe},11:{n:"PtgElfRadicalS",f:Ofe},13:{n:"PtgElfColS",f:Ufe},15:{n:"PtgElfColSV",f:Lfe},16:{n:"PtgElfRadicalLel",f:jfe},25:{n:"PtgList",f:Gfe},29:{n:"PtgSxName",f:zfe},255:{}},Zfe={0:{n:"PtgAttrNoop",f:Yfe},1:{n:"PtgAttrSemi",f:afe},2:{n:"PtgAttrIf",f:rfe},4:{n:"PtgAttrChoose",f:tfe},8:{n:"PtgAttrGoto",f:nfe},16:{n:"PtgAttrSum",f:hfe},32:{n:"PtgAttrBaxcel",f:GF},33:{n:"PtgAttrBaxcel",f:GF},64:{n:"PtgAttrSpace",f:ife},65:{n:"PtgAttrSpaceSemi",f:ofe},128:{n:"PtgAttrIfError",f:sfe},255:{}};function Px(t,e,n,r){if(r.biff<8)return Mi(t,e);for(var s=t.l+e,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=Cfe(t,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=bfe(t,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=s-t.l,e!==0&&a.push(Mi(t,e)),a}function jx(t,e,n){for(var r=t.l+e,s,a,i=[];r!=t.l;)e=r-t.l,a=t[t.l],s=zF[a]||zF[Jfe[a]],(a===24||a===25)&&(s=(a===24?Xfe:Zfe)[t[t.l+1]]),!s||!s.f?Mi(t,e):i.push([s.n,s.f(t,e,n)]);return i}function ehe(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var the={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function nhe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function r7(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function qF(t,e,n){var r=r7(t,e,n);return r=="#REF"?r:nhe(r,n)}function Bi(t,e,n,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,p=0,g,b="";if(!t[0]||!t[0][0])return"";for(var w=-1,C="",T=0,I=t[0].length;T<I;++T){var k=t[0][T];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:C=Ds(" ",t[0][w][1][1]);break;case 1:C=Ds("\r",t[0][w][1][1]);break;default:if(C="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}u=u+C,w=-1}o.push(u+the[k[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Eg(k[1][1],i,s),o.push(_g(d,a));break;case"PtgRefN":d=n?Eg(k[1][1],n,s):k[1][1],o.push(_g(d,a));break;case"PtgRef3d":h=k[1][1],d=Eg(k[1][2],i,s),b=qF(r,h,s),o.push(b+"!"+_g(d,a));break;case"PtgFunc":case"PtgFuncVar":var R=k[1][0],D=k[1][1];R||(R=0),R&=127;var P=R==0?[]:o.slice(-R);o.length-=R,D==="User"&&(D=P.shift()),o.push(D+"("+P.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":g=wF(k[1][1],n?{s:n}:i,s),o.push(jC(g,s));break;case"PtgArea":g=wF(k[1][1],i,s),o.push(jC(g,s));break;case"PtgArea3d":h=k[1][1],g=k[1][2],b=qF(r,h,s),o.push(b+"!"+jC(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=k[1][2];var _=(r.names||[])[p-1]||(r[0]||[])[p],N=_?_.Name:"SH33TJSNAME"+String(p);N&&N.slice(0,6)=="_xlfn."&&!s.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var B=k[1][1];p=k[1][2];var O;if(s.biff<=5)B<0&&(B=-B),r[B]&&(O=r[B][p]);else{var M="";if(((r[B]||[])[0]||[])[0]==14849||(((r[B]||[])[0]||[])[0]==1025?r[B][p]&&r[B][p].itab>0&&(M=r.SheetNames[r[B][p].itab-1]+"!"):M=r.SheetNames[p-1]+"!"),r[B]&&r[B][p])M+=r[B][p].Name;else if(r[0]&&r[0][p])M+=r[0][p].Name;else{var L=(r7(r,B,s)||"").split(";;");L[p-1]?M=L[p-1]:M+="SH33TJSERRX"}o.push(M);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var H="(",G=")";if(w>=0){switch(C="",t[0][w][1][0]){case 2:H=Ds(" ",t[0][w][1][1])+H;break;case 3:H=Ds("\r",t[0][w][1][1])+H;break;case 4:G=Ds(" ",t[0][w][1][1])+G;break;case 5:G=Ds("\r",t[0][w][1][1])+G;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(H+o.pop()+G);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:k[1][1],r:k[1][0]};var oe={c:n.c,r:n.r};if(r.sharedf[wn(d)]){var q=r.sharedf[wn(d)];o.push(Bi(q,i,oe,r,s))}else{var X=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Bi(u[1],i,oe,r,s)),X=!0;break}X||o.push(k[1])}break;case"PtgArray":o.push("{"+ehe(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&w>=0&&re.indexOf(t[0][T][0])==-1){k=t[0][w];var K=!0;switch(k[1][0]){case 4:K=!1;case 0:C=Ds(" ",k[1][1]);break;case 5:K=!1;case 1:C=Ds("\r",k[1][1]);break;default:if(C="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((K?C:"")+o.pop()+(K?"":C)),w=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function rhe(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Mi(t,e-2)];var o=jx(t,i,n);return e!==i+s&&(a=Px(t,e-i-s,o,n)),t.l=r,[o,a]}function she(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Mi(t,e-2)];var o=jx(t,i,n);return e!==i+s&&(a=Px(t,e-i-s,o,n)),t.l=r,[o,a]}function ahe(t,e,n,r){var s=t.l+e,a=jx(t,r,n),i;return s!==t.l&&(i=Px(t,s-t.l,a,n)),[a,i]}function ihe(t,e,n){var r=t.l+e,s,a=t.read_shift(2),i=jx(t,a,n);return a==65535?[[],Mi(t,e-2)]:(e!==a+2&&(s=Px(t,r-a-2,i,n)),[i,s])}function ohe(t){var e;if(fA(t,t.l+6)!==65535)return[Ri(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function lhe(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return gh(t);return gh(0)}function GC(t,e,n){var r=t.l+e,s=Tu(t);n.biff==2&&++t.l;var a=ohe(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=she(t,r-t.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function che(t,e,n,r,s){var a=vh(e,n,s),i=lhe(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Ha([a,i,o,u]);return h}function yw(t,e,n){var r=t.read_shift(4),s=jx(t,r,n),a=t.read_shift(4),i=a>0?Px(t,a,s,n):null;return[s,i]}var uhe=yw,ww=yw,Ahe=yw,dhe=yw,fhe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},s7={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},hhe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function KF(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function mhe(t){var e="of:="+t.replace(m4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function zC(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function phe(t){return t.replace(/\./,"!")}var Tg={},lm={},Bg=typeof Map<"u";function x4(t,e,n){var r=0,s=t.length;if(n){if(Bg?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=Bg?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(Bg?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function bw(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Ii=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=nx(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=ly(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function ah(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function pf(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){gA(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===r)return s;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function a7(t,e,n,r,s,a){try{r.cellNF&&(t.z=gn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=os(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(gn[e]==null&&gA(foe[e]||"General",e),t.t==="e")t.w=t.w||DA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=$g(t.v);else if(t.t==="d"){var i=Na(t.v);(i|0)===i?t.w=i.toString(10):t.w=$g(i)}else{if(t.v===void 0)return"";t.w=mh(t.v,lm)}else t.t==="d"?t.w=Ml(e,Na(t.v),lm):t.w=Ml(e,t.v,lm)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=oy(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=oy(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&a.Fills)throw o}}}function ghe(t,e,n){if(t&&t["!ref"]){var r=pr(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function xhe(t,e){var n=pr(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=Rn(n))}var vhe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,yhe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,whe=/<(?:\w:)?hyperlink [^>]*>/mg,bhe=/"(\w*:\w*)"/,Che=/<(?:\w:)?col\b[^>]*[\/]?>/g,Ehe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,_he=/<(?:\w:)?pageMargins[^>]*\/>/g,i7=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,She=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,The=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Bhe(t,e,n,r,s,a,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(yhe);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var p=u.match(i7);p?v4(p[0],o,s,n):(p=u.match(She))&&khe(p[0],p[1]||"",o,s,n);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(bhe);b&&xhe(o,b[1])}var w=u.match(The);w&&w[1]&&Vhe(w[1],s);var C=[];if(e.cellStyles){var T=u.match(Che);T&&Phe(C,T)}h&&qhe(h[1],o,e,l,a,i);var I=d.match(Ehe);I&&(o["!autofilter"]=Ohe(I[0]));var k=[],R=d.match(vhe);if(R)for(g=0;g!=R.length;++g)k[g]=pr(R[g].slice(R[g].indexOf('"')+1));var D=d.match(whe);D&&Uhe(o,D,r);var P=d.match(_he);if(P&&(o["!margins"]=Lhe(_n(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Rn(l)),e.sheetRows>0&&o["!ref"]){var _=pr(o["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>l.e.r&&(_.e.r=l.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>l.e.c&&(_.e.c=l.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Rn(_))}return C.length>0&&(o["!cols"]=C),k.length>0&&(o["!merges"]=k),o}function Nhe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Rn(t[n])+'"/>';return e+"</mergeCells>"}function v4(t,e,n,r){var s=_n(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=mr(Kr(s.codeName)))}function khe(t,e,n,r,s){v4(t.slice(0,t.indexOf(">")),n,r,s)}function Ihe(t,e,n,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}a=!0,i.codeName=hu(Pr(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Dt("outlinePr",null,u)}!a&&!o||(s[s.length]=Dt("sheetPr",o,i))}var Fhe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Rhe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Dhe(t){var e={sheet:1};return Fhe.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),Rhe.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=d4(t.password).toString(16).toUpperCase()),Dt("sheetProtection",null,e)}function Uhe(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=_n(Kr(e[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+mr(a.location))):(a.Target="#"+mr(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=pr(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=wn({c:u,r:l});r?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function Lhe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function Mhe(t){return ah(t),Dt("pageMargins",null,t)}function Phe(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=_n(e[r],!0);s.hidden&&(s.hidden=ss(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,f4(s.width)),sf(s);a<=i;)t[a++]=ls(s)}}function jhe(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=Dt("col",null,bw(s,r)));return n[n.length]="</cols>",n.join("")}function Ohe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Qhe(t,e,n,r){var s=typeof t.ref=="string"?t.ref:Rn(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=wo(s);i.s.r==i.e.r&&(i.e.r=wo(e["!ref"]).e.r,s=Rn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Dt("autoFilter",null,{ref:s})}var Hhe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Vhe(t,e){e.Views||(e.Views=[{}]),(t.match(Hhe)||[]).forEach(function(n,r){var s=_n(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),ss(s.rightToLeft)&&(e.Views[r].RTL=!0)})}function Ghe(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Dt("sheetViews",Dt("sheetView",null,s),{})}function zhe(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=DA[t.v];break;case"d":r&&r.cellDates?s=os(t.v,-1).toISOString():(t=ls(t),t.t="n",s=""+(t.v=Na(os(t.v)))),typeof t.z>"u"&&(t.z=gn[14]);break;default:s=t.v;break}var o=si("v",Pr(s)),l={r:e},u=pf(r.cellXfs,t,r);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=si("v",""+x4(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Dt("f",Pr(t.f),d)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Dt("c",o,l)}var qhe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Yg("v"),i=Yg("f");return function(l,u,d,h,p,g){for(var b=0,w="",C=[],T=[],I=0,k=0,R=0,D="",P,_,N=0,B=0,O,M,L=0,H=0,G=Array.isArray(g.CellXf),oe,q=[],X=[],re=Array.isArray(u),K=[],Z={},Ae=!1,j=!!d.sheetStubs,W=l.split(e),J=0,ne=W.length;J!=ne;++J){w=W[J].trim();var ie=w.length;if(ie!==0){var de=0;e:for(b=0;b<ie;++b)switch(w[b]){case">":if(w[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(_=_n(w.slice(de,b),!0),N=_.r!=null?parseInt(_.r,10):N+1,B=-1,d.sheetRows&&d.sheetRows<N)continue;Z={},Ae=!1,_.ht&&(Ae=!0,Z.hpt=parseFloat(_.ht),Z.hpx=Em(Z.hpt)),_.hidden=="1"&&(Ae=!0,Z.hidden=!0),_.outlineLevel!=null&&(Ae=!0,Z.level=+_.outlineLevel),Ae&&(K[N-1]=Z)}break;case"<":de=b;break}if(de>=b)break;if(_=_n(w.slice(de,b),!0),N=_.r!=null?parseInt(_.r,10):N+1,B=-1,!(d.sheetRows&&d.sheetRows<N)){h.s.r>N-1&&(h.s.r=N-1),h.e.r<N-1&&(h.e.r=N-1),d&&d.cellStyles&&(Z={},Ae=!1,_.ht&&(Ae=!0,Z.hpt=parseFloat(_.ht),Z.hpx=Em(Z.hpt)),_.hidden=="1"&&(Ae=!0,Z.hidden=!0),_.outlineLevel!=null&&(Ae=!0,Z.level=+_.outlineLevel),Ae&&(K[N-1]=Z)),C=w.slice(b).split(t);for(var me=0;me!=C.length&&C[me].trim().charAt(0)=="<";++me);for(C=C.slice(me),b=0;b!=C.length;++b)if(w=C[b].trim(),w.length!==0){if(T=w.match(n),I=b,k=0,R=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,T!=null&&T.length===2){for(I=0,D=T[1],k=0;k!=D.length&&!((R=D.charCodeAt(k)-64)<1||R>26);++k)I=26*I+R;--I,B=I}else++B;for(k=0;k!=w.length&&w.charCodeAt(k)!==62;++k);if(++k,_=_n(w.slice(0,k),!0),_.r||(_.r=wn({r:N-1,c:B})),D=w.slice(k),P={t:""},(T=D.match(a))!=null&&T[1]!==""&&(P.v=mr(T[1])),d.cellFormula){if((T=D.match(i))!=null&&T[1]!==""){if(P.f=mr(Kr(T[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=VF(P.f)),T[0].indexOf('t="array"')>-1)P.F=(D.match(s)||[])[1],P.F.indexOf(":")>-1&&q.push([pr(P.F),P.F]);else if(T[0].indexOf('t="shared"')>-1){M=_n(T[0]);var xe=mr(Kr(T[1]));d.xlfn||(xe=VF(xe)),X[parseInt(M.si,10)]=[M,xe,_.r]}}else(T=D.match(/<f[^>]*\/>/))&&(M=_n(T[0]),X[M.si]&&(P.f=Hde(X[M.si][1],X[M.si][2],_.r)));var Se=bs(_.r);for(k=0;k<q.length;++k)Se.r>=q[k][0].s.r&&Se.r<=q[k][0].e.r&&Se.c>=q[k][0].s.c&&Se.c<=q[k][0].e.c&&(P.F=q[k][1])}if(_.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(j)P.t="z";else continue;else P.t=_.t||"n";switch(h.s.c>B&&(h.s.c=B),h.e.c<B&&(h.e.c=B),P.t){case"n":if(P.v==""||P.v==null){if(!j)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!j)continue;P.t="z"}else O=Tg[parseInt(P.v,10)],P.v=O.t,P.r=O.r,d.cellHTML&&(P.h=O.h);break;case"str":P.t="s",P.v=P.v!=null?Kr(P.v):"",d.cellHTML&&(P.h=J5(P.v));break;case"inlineStr":T=D.match(r),P.t="s",T!=null&&(O=A4(T[1]))?(P.v=O.t,d.cellHTML&&(P.h=O.h)):P.v="";break;case"b":P.v=ss(P.v);break;case"d":d.cellDates?P.v=os(P.v,1):(P.v=Na(os(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=lP[P.v];break}if(L=H=0,oe=null,G&&_.s!==void 0&&(oe=g.CellXf[_.s],oe!=null&&(oe.numFmtId!=null&&(L=oe.numFmtId),d.cellStyles&&oe.fillId!=null&&(H=oe.fillId))),a7(P,L,H,d,p,g),d.cellDates&&G&&P.t=="n"&&Hm(gn[L])&&(P.t="d",P.v=xw(P.v)),_.cm&&d.xlmeta){var ge=(d.xlmeta.Cell||[])[+_.cm-1];ge&&ge.type=="XLDAPR"&&(P.D=!0)}if(re){var ae=bs(_.r);u[ae.r]||(u[ae.r]=[]),u[ae.r][ae.c]=P}else u[_.r]=P}}}}K.length>0&&(u["!rows"]=K)}}();function Khe(t,e,n,r){var s=[],a=[],i=pr(t["!ref"]),o="",l,u="",d=[],h=0,p=0,g=t["!rows"],b=Array.isArray(t),w={r:u},C,T=-1;for(p=i.s.c;p<=i.e.c;++p)d[p]=ws(p);for(h=i.s.r;h<=i.e.r;++h){for(a=[],u=ea(h),p=i.s.c;p<=i.e.c;++p){l=d[p]+u;var I=b?(t[h]||[])[p]:t[l];I!==void 0&&(o=zhe(I,l,t,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(w={r:u},g&&g[h]&&(C=g[h],C.hidden&&(w.hidden=1),T=-1,C.hpx?T=rx(C.hpx):C.hpt&&(T=C.hpt),T>-1&&(w.ht=T,w.customHeight=1),C.level&&(w.outlineLevel=C.level)),s[s.length]=Dt("row",a.join(""),w))}if(g)for(;h<g.length;++h)g&&g[h]&&(w={r:h+1},C=g[h],C.hidden&&(w.hidden=1),T=-1,C.hpx?T=rx(C.hpx):C.hpt&&(T=C.hpt),T>-1&&(w.ht=T,w.customHeight=1),C.level&&(w.outlineLevel=C.level),s[s.length]=Dt("row","",w));return s.join("")}function o7(t,e,n,r){var s=[ta,Dt("worksheet",null,{xmlns:Ih[0],"xmlns:r":Sa.r})],a=n.SheetNames[t],i=0,o="",l=n.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=pr(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Rn(d)}r||(r={}),l["!comments"]=[];var h=[];Ihe(l,n,t,e,s),s[s.length]=Dt("dimension",null,{ref:u}),s[s.length]=Ghe(l,e,t,n),e.sheetFormat&&(s[s.length]=Dt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=jhe(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Khe(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=Dhe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Qhe(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Nhe(l["!merges"]));var p=-1,g,b=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(b=Lr(r,-1,Pr(w[1].Target).replace(/#.*$/,""),Jn.HLINK),g["r:id"]="rId"+b),(p=w[1].Target.indexOf("#"))>-1&&(g.location=Pr(w[1].Target.slice(p+1))),w[1].Tooltip&&(g.tooltip=Pr(w[1].Tooltip)),s[s.length]=Dt("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Mhe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=si("ignoredErrors",Dt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=Lr(r,-1,"../drawings/drawing"+(t+1)+".xml",Jn.DRAW),s[s.length]=Dt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=Lr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jn.VML),s[s.length]=Dt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Whe(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}function $he(t,e,n){var r=lt(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;s.hpx?a=rx(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(n)?(n[u.r]||[])[u.c]:n[wn(u)];b&&(h<0&&(h=g),p=g)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,p))}var w=r.l;return r.l=l,r.write_shift(4,o),r.l=w,r.length>r.l?r.slice(0,r.l):r}function Yhe(t,e,n,r){var s=$he(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&Et(t,0,s)}var Jhe=Uh,Xhe=zm;function Zhe(){}function e0e(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=rle(t),n}function t0e(t,e,n){n==null&&(n=lt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return sy({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),rP(t,n),n.slice(0,n.l)}function n0e(t){var e=Pl(t);return[e]}function r0e(t,e,n){return n==null&&(n=lt(8)),Fh(e,n)}function s0e(t){var e=Rh(t);return[e]}function a0e(t,e,n){return n==null&&(n=lt(4)),Dh(e,n)}function i0e(t){var e=Pl(t),n=t.read_shift(1);return[e,n,"b"]}function o0e(t,e,n){return n==null&&(n=lt(9)),Fh(e,n),n.write_shift(1,t.v?1:0),n}function l0e(t){var e=Rh(t),n=t.read_shift(1);return[e,n,"b"]}function c0e(t,e,n){return n==null&&(n=lt(5)),Dh(e,n),n.write_shift(1,t.v?1:0),n}function u0e(t){var e=Pl(t),n=t.read_shift(1);return[e,n,"e"]}function A0e(t,e,n){return n==null&&(n=lt(9)),Fh(e,n),n.write_shift(1,t.v),n}function d0e(t){var e=Rh(t),n=t.read_shift(1);return[e,n,"e"]}function f0e(t,e,n){return n==null&&(n=lt(8)),Dh(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function h0e(t){var e=Pl(t),n=t.read_shift(4);return[e,n,"s"]}function m0e(t,e,n){return n==null&&(n=lt(12)),Fh(e,n),n.write_shift(4,e.v),n}function p0e(t){var e=Rh(t),n=t.read_shift(4);return[e,n,"s"]}function g0e(t,e,n){return n==null&&(n=lt(8)),Dh(e,n),n.write_shift(4,e.v),n}function x0e(t){var e=Pl(t),n=Ri(t);return[e,n,"n"]}function v0e(t,e,n){return n==null&&(n=lt(16)),Fh(e,n),gh(t.v,n),n}function l7(t){var e=Rh(t),n=Ri(t);return[e,n,"n"]}function y0e(t,e,n){return n==null&&(n=lt(12)),Dh(e,n),gh(t.v,n),n}function w0e(t){var e=Pl(t),n=i4(t);return[e,n,"n"]}function b0e(t,e,n){return n==null&&(n=lt(12)),Fh(e,n),sP(t.v,n),n}function C0e(t){var e=Rh(t),n=i4(t);return[e,n,"n"]}function E0e(t,e,n){return n==null&&(n=lt(8)),Dh(e,n),sP(t.v,n),n}function _0e(t){var e=Pl(t),n=r4(t);return[e,n,"is"]}function S0e(t){var e=Pl(t),n=Ui(t);return[e,n,"str"]}function T0e(t,e,n){return n==null&&(n=lt(12+4*t.v.length)),Fh(e,n),Va(t.v,n),n.length>n.l?n.slice(0,n.l):n}function B0e(t){var e=Rh(t),n=Ui(t);return[e,n,"str"]}function N0e(t,e,n){return n==null&&(n=lt(8+4*t.v.length)),Dh(e,n),Va(t.v,n),n.length>n.l?n.slice(0,n.l):n}function k0e(t,e,n){var r=t.l+e,s=Pl(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(n.cellFormula){t.l+=2;var o=ww(t,r-t.l,n);i[3]=Bi(o,null,s,n.supbooks,n)}else t.l=r;return i}function I0e(t,e,n){var r=t.l+e,s=Pl(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(n.cellFormula){t.l+=2;var o=ww(t,r-t.l,n);i[3]=Bi(o,null,s,n.supbooks,n)}else t.l=r;return i}function F0e(t,e,n){var r=t.l+e,s=Pl(t);s.r=n["!row"];var a=Ri(t),i=[s,a,"n"];if(n.cellFormula){t.l+=2;var o=ww(t,r-t.l,n);i[3]=Bi(o,null,s,n.supbooks,n)}else t.l=r;return i}function R0e(t,e,n){var r=t.l+e,s=Pl(t);s.r=n["!row"];var a=Ui(t),i=[s,a,"str"];if(n.cellFormula){t.l+=2;var o=ww(t,r-t.l,n);i[3]=Bi(o,null,s,n.supbooks,n)}else t.l=r;return i}var D0e=Uh,U0e=zm;function L0e(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function M0e(t,e){var n=t.l+e,r=Uh(t),s=s4(t),a=Ui(t),i=Ui(t),o=Ui(t);t.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function P0e(t,e){var n=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));zm({s:bs(t[0]),e:bs(t[0])},n),a4("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return Va(s||"",n),Va(t[1].Tooltip||"",n),Va("",n),n.slice(0,n.l)}function j0e(){}function O0e(t,e,n){var r=t.l+e,s=aP(t),a=t.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=uhe(t,r-t.l,n);i[1]=o}else t.l=r;return i}function Q0e(t,e,n){var r=t.l+e,s=Uh(t),a=[s];if(n.cellFormula){var i=dhe(t,r-t.l,n);a[1]=i,t.l=r}else t.l=r;return a}function H0e(t,e,n){n==null&&(n=lt(18));var r=bw(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var c7=["left","right","top","bottom","header","footer"];function V0e(t){var e={};return c7.forEach(function(n){e[n]=Ri(t)}),e}function G0e(t,e){return e==null&&(e=lt(48)),ah(t),c7.forEach(function(n){gh(t[n],e)}),e}function z0e(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function q0e(t,e,n){n==null&&(n=lt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function K0e(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),zm(t,e),e}function W0e(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?d4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function $0e(){}function Y0e(){}function J0e(t,e,n,r,s,a,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,p=!1,g,b,w,C,T,I,k,R,D,P=[];o.biff=12,o["!row"]=0;var _=0,N=!1,B=[],O={},M=o.supbooks||s.supbooks||[[]];if(M.sharedf=O,M.arrayf=B,M.SheetNames=s.SheetNames||s.Sheets.map(function(re){return re.name}),!o.supbooks&&(o.supbooks=M,s.Names))for(var L=0;L<s.Names.length;++L)M[0][L+1]=s.Names[L];var H=[],G=[],oe=!1;sx[16]={n:"BrtShortReal",f:l7};var q;if(RA(t,function(K,Z,Ae){if(!p)switch(Ae){case 148:u=K;break;case 0:g=K,o.sheetRows&&o.sheetRows<=g.r&&(p=!0),R=ea(C=g.r),o["!row"]=g.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=Em(K.hpt)),G[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:K[2]},K[2]){case"n":b.v=K[1];break;case"s":k=Tg[K[1]],b.v=k.t,b.r=k.r;break;case"b":b.v=!!K[1];break;case"e":b.v=K[1],o.cellText!==!1&&(b.w=DA[b.v]);break;case"str":b.t="s",b.v=K[1];break;case"is":b.t="s",b.v=K[1].t;break}if((w=i.CellXf[K[0].iStyleRef])&&a7(b,w.numFmtId,null,o,a,i),T=K[0].c==-1?T+1:K[0].c,o.dense?(l[C]||(l[C]=[]),l[C][T]=b):l[ws(T)+R]=b,o.cellFormula){for(N=!1,_=0;_<B.length;++_){var j=B[_];g.r>=j[0].s.r&&g.r<=j[0].e.r&&T>=j[0].s.c&&T<=j[0].e.c&&(b.F=Rn(j[0]),N=!0)}!N&&K.length>3&&(b.f=K[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&w&&b.t=="n"&&Hm(gn[w.numFmtId])){var W=$f(b.v);W&&(b.t="d",b.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}q&&(q.type=="XLDAPR"&&(b.D=!0),q=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},T=K[0].c==-1?T+1:K[0].c,o.dense?(l[C]||(l[C]=[]),l[C][T]=b):l[ws(T)+R]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),q&&(q.type=="XLDAPR"&&(b.D=!0),q=void 0);break;case 176:P.push(K);break;case 49:q=((o.xlmeta||{}).Cell||[])[K-1];break;case 494:var J=r["!id"][K.relId];for(J?(K.Target=J.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=J):K.relId==""&&(K.Target="#"+K.loc),C=K.rfx.s.r;C<=K.rfx.e.r;++C)for(T=K.rfx.s.c;T<=K.rfx.e.c;++T)o.dense?(l[C]||(l[C]=[]),l[C][T]||(l[C][T]={t:"z",v:void 0}),l[C][T].l=K):(I=wn({c:T,r:C}),l[I]||(l[I]={t:"z",v:void 0}),l[I].l=K);break;case 426:if(!o.cellFormula)break;B.push(K),D=o.dense?l[C][T]:l[ws(T)+R],D.f=Bi(K[1],d,{r:g.r,c:T},M,o),D.F=Rn(K[0]);break;case 427:if(!o.cellFormula)break;O[wn(K[0].s)]=K[1],D=o.dense?l[C][T]:l[ws(T)+R],D.f=Bi(K[1],d,{r:g.r,c:T},M,o);break;case 60:if(!o.cellStyles)break;for(;K.e>=K.s;)H[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},oe||(oe=!0,f4(K.w/256)),sf(H[K.e+1]);break;case 161:l["!autofilter"]={ref:Rn(K)};break;case 476:l["!margins"]=K;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),K.name&&(s.Sheets[n].CodeName=K.name),(K.above||K.left)&&(l["!outline"]={above:K.above,left:K.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),K.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!Z.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+Ae.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Rn(u||d)),o.sheetRows&&l["!ref"]){var X=pr(l["!ref"]);o.sheetRows<=+X.e.r&&(X.e.r=o.sheetRows-1,X.e.r>d.e.r&&(X.e.r=d.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>d.e.c&&(X.e.c=d.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Rn(X))}return P.length>0&&(l["!merges"]=P),H.length>0&&(l["!cols"]=H),G.length>0&&(l["!rows"]=G),l}function X0e(t,e,n,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ls(e),e.z=e.z||gn[14],e.v=Na(os(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=pf(s.cellXfs,e,s),e.l&&a["!links"].push([wn(l),e.l]),e.c&&a["!comments"].push([wn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=x4(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Et(t,18,g0e(e,l)):Et(t,7,m0e(e,l))):(l.t="str",i?Et(t,17,N0e(e,l)):Et(t,6,T0e(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Et(t,13,E0e(e,l)):Et(t,2,b0e(e,l)):i?Et(t,16,y0e(e,l)):Et(t,5,v0e(e,l)),!0;case"b":return l.t="b",i?Et(t,15,c0e(e,l)):Et(t,4,o0e(e,l)),!0;case"e":return l.t="e",i?Et(t,14,f0e(e,l)):Et(t,3,A0e(e,l)),!0}return i?Et(t,12,a0e(e,l)):Et(t,1,r0e(e,l)),!0}function Z0e(t,e,n,r){var s=pr(e["!ref"]||"A1"),a,i="",o=[];Et(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=ea(d),Yhe(t,e,s,d);var h=!1;if(d<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(o[p]=ws(p)),a=o[p]+i;var g=l?(e[d]||[])[p]:e[a];if(!g){h=!1;continue}h=X0e(t,g,d,p,r,e,h)}}Et(t,146)}function eme(t,e){!e||!e["!merges"]||(Et(t,177,L0e(e["!merges"].length)),e["!merges"].forEach(function(n){Et(t,176,U0e(n))}),Et(t,178))}function tme(t,e){!e||!e["!cols"]||(Et(t,390),e["!cols"].forEach(function(n,r){n&&Et(t,60,H0e(r,n))}),Et(t,391))}function nme(t,e){!e||!e["!ref"]||(Et(t,648),Et(t,649,K0e(pr(e["!ref"]))),Et(t,650))}function rme(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=Lr(n,-1,r[1].Target.replace(/#.*$/,""),Jn.HLINK);Et(t,494,P0e(r,s))}}),delete e["!links"]}function sme(t,e,n,r){if(e["!comments"].length>0){var s=Lr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Jn.VML);Et(t,551,a4("rId"+s)),e["!legacy"]=s}}function ame(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Rn(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=wo(a);o.s.r==o.e.r&&(o.e.r=wo(e["!ref"]).e.r,a=Rn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Et(t,161,zm(pr(a))),Et(t,162)}}function ime(t,e,n){Et(t,133),Et(t,137,q0e(e,n)),Et(t,138),Et(t,134)}function ome(t,e){e["!protect"]&&Et(t,535,W0e(e["!protect"]))}function lme(t,e,n,r){var s=xo(),a=n.SheetNames[t],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=pr(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Et(s,129),(n.vbaraw||i["!outline"])&&Et(s,147,t0e(o,i["!outline"])),Et(s,148,Xhe(l)),ime(s,i,n.Workbook),tme(s,i),Z0e(s,i,t,e),ome(s,i),ame(s,i,n,t),eme(s,i),rme(s,i,r),i["!margins"]&&Et(s,476,G0e(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&nme(s,i),sme(s,i,t,r),Et(s,130),s.end()}function cme(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var s=mr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function ume(t,e,n,r,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var p=cme(h);d.s.r=d.s.c=0,d.e.c=o,u=ws(o),p[0].forEach(function(g,b){i[u+ea(b)]={t:"n",v:g,z:p[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Rn(d)),i}function Ame(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(i7);return o&&v4(o[0],a,s,n),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function dme(t,e){t.l+=10;var n=Ui(t);return{name:n}}function fme(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return RA(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),l.name&&(s.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var y4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],hme=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],mme=[],pme=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function WF(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=ss(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function $F(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=ss(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function u7(t){$F(t.WBProps,y4),$F(t.CalcPr,pme),WF(t.WBView,hme),WF(t.Sheets,mme),lm.date1904=ss(t.WBProps.date1904)}function gme(t){return!t.Workbook||!t.Workbook.WBProps?"false":ss(t.Workbook.WBProps.date1904)?"true":"false"}var xme="][*?/\\".split("");function A7(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return xme.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function vme(t,e,n){t.forEach(function(r,s){A7(r);for(var a=0;a<s;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function yme(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];vme(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)ghe(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var wme=/<\w+:workbook/;function bme(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(t.replace(ji,function(l,u){var d=_n(l);switch(Su(d[0])){case"<?xml":break;case"<workbook":l.match(wme)&&(s="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":y4.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":n.WBProps[h[0]]=ss(d[h[0]]);break;case"int":n.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:n.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(n.WBProps.CodeName=Kr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=mr(Kr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=Kr(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),ss(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=mr(Kr(t.slice(i,u))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Ih.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return u7(n),n}function d7(t){var e=[ta];e[e.length]=Dt("workbook",null,{xmlns:Ih[0],"xmlns:r":Sa.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(y4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Dt("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Pr(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Dt("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Dt("definedName",Pr(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Cme(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=H_(t),n.name=Ui(t),n}function Eme(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),a4(t.strRelID,e),Va(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function _me(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?Ui(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Sme(t,e){e||(e=lt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),rP(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Tme(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function Bme(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=sle(t),i=Ahe(t,0,n),o=s4(t);t.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Nme(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],sx[16]={n:"BrtFRTArchID$",f:Tme},RA(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Bi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(d),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),u7(n),n.Names=a,n.supbooks=i,n}function kme(t,e){Et(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};Et(t,156,Eme(s))}Et(t,144)}function Ime(t,e){e||(e=lt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Va("SheetJS",e),Va(J2.version,e),Va(J2.version,e),Va("7262",e),e.length>e.l?e.slice(0,e.l):e}function Fme(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function Rme(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&a==-1&&(a=r);a>s||(Et(t,135),Et(t,158,Fme(s)),Et(t,136))}}function Dme(t,e){var n=xo();return Et(n,131),Et(n,128,Ime()),Et(n,153,Sme(t.Workbook&&t.Workbook.WBProps||null)),Rme(n,t),kme(n,t),Et(n,132),n.end()}function Ume(t,e,n){return e.slice(-4)===".bin"?Nme(t,n):bme(t,n)}function Lme(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?J0e(t,r,n,s,a,i,o):Bhe(t,r,n,s,a,i,o)}function Mme(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?fme(t,r,n,s,a):Ame(t,r,n,s,a)}function Pme(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Ode():Qde()}function jme(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Pde():jde()}function Ome(t,e,n,r){return e.slice(-4)===".bin"?UAe(t,n,r):CAe(t,n,r)}function Qme(t,e,n){return qP(t,n)}function Hme(t,e,n){return e.slice(-4)===".bin"?Hue(t,n):jue(t,n)}function Vme(t,e,n){return e.slice(-4)===".bin"?Rde(t,n):Ede(t,n)}function Gme(t,e,n){return e.slice(-4)===".bin"?wde(t):vde(t)}function zme(t,e,n,r){return n.slice(-4)===".bin"?bde(t,e,n,r):void 0}function qme(t,e,n){return e.slice(-4)===".bin"?pde(t,e,n):xde(t,e,n)}function Kme(t,e,n){return(e.slice(-4)===".bin"?Dme:d7)(t)}function Wme(t,e,n,r,s){return(e.slice(-4)===".bin"?lme:o7)(t,n,r,s)}function $me(t,e,n){return(e.slice(-4)===".bin"?zAe:GP)(t,n)}function Yme(t,e,n){return(e.slice(-4)===".bin"?zue:LP)(t,n)}function Jme(t,e,n){return(e.slice(-4)===".bin"?Dde:$P)(t)}function Xme(t){return(t.slice(-4)===".bin"?gde:KP)()}var f7=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,h7=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function uc(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(f7),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(h7),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}function Zme(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(f7),s,a,i,o;if(r)for(o=0;o!=r.length;++o)s=r[o].match(h7),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),n[i]=s[2].slice(1,s[2].length-1));return n}var Ng;function epe(t,e){var n=Ng[t]||mr(t);return n==="General"?mh(e):Ml(n,e)}function tpe(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ss(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=os(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[mr(e)]=s}function npe(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||DA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=$g(t.v):t.w=mh(t.v):t.w=epe(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=Ng[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&Hm(r)){var s=$f(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function rpe(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=mAe[r.Pattern]||r.Pattern)}t[e.ID]=e}function spe(t,e,n,r,s,a,i,o,l,u){var d="General",h=r.StyleID,p={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&g.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=ss(t);break;case"String":r.t="s",r.r=dF(mr(t)),r.v=t.indexOf("<")>-1?mr(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(os(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=mr(t):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=lP[t],u.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=dF(e||t));break}if(npe(r,d,u),u.cellFormula!==!1)if(r.Formula){var w=mr(r.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),r.f=om(w,s),delete r.Formula,r.ArrayRange=="RC"?r.F=om("RC:RC",s):r.ArrayRange&&(r.F=om(r.ArrayRange,s),l.push([pr(r.F),r.F]))}else for(b=0;b<l.length;++b)s.r>=l[b][0].s.r&&s.r<=l[b][0].e.r&&s.c>=l[b][0].s.c&&s.c<=l[b][0].e.c&&(r.F=l[b][1]);u.cellStyles&&(g.forEach(function(C){!p.patternType&&C.patternType&&(p.patternType=C.patternType)}),r.s=p),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function ape(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function qC(t,e){var n=e||{};Vm();var r=tg(X5(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Kr(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ls(n);return i.type="string",Cm.to_workbook(r,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(nt){s.indexOf("<"+nt)>=0&&(a=!0)}),a)return Gpe(r,n);Ng={"General Number":"General","General Date":gn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":gn[15],"Short Date":gn[14],"Long Time":gn[19],"Medium Time":gn[18],"Short Time":gn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:gn[2],Standard:gn[4],Percent:gn[10],Scientific:gn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],p=n.dense?[]:{},g="",b={},w={},C=uc('<Data ss:Type="String">'),T=0,I=0,k=0,R={s:{r:2e6,c:2e6},e:{r:0,c:0}},D={},P={},_="",N=0,B=[],O={},M={},L=0,H=[],G=[],oe={},q=[],X,re=!1,K=[],Z=[],Ae={},j=0,W=0,J={Sheets:[],WBProps:{date1904:!1}},ne={};Xg.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=Xg.exec(r);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?spe(r.slice(T,o.index),_,C,l[l.length-1][0]=="comment"?oe:b,{c:I,r:k},D,q[I],w,K,n):(_="",C=uc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(G.length>0&&(b.c=G),(!n.sheetRows||n.sheetRows>k)&&b.v!==void 0&&(n.dense?(p[k]||(p[k]=[]),p[k][I]=b):p[ws(I)+ea(k)]=b),b.HRef&&(b.l={Target:mr(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(j=I+(parseInt(b.MergeAcross,10)|0),W=k+(parseInt(b.MergeDown,10)|0),B.push({s:{c:I,r:k},e:{c:j,r:W}})),!n.sheetStubs)b.MergeAcross?I=j+1:++I;else if(b.MergeAcross||b.MergeDown){for(var de=I;de<=j;++de)for(var me=k;me<=W;++me)(de>I||me>k)&&(n.dense?(p[me]||(p[me]=[]),p[me][de]={t:"z"}):p[ws(de)+ea(me)]={t:"z"});I=j+1}else++I;else b=Zme(o[0]),b.Index&&(I=+b.Index-1),I<R.s.c&&(R.s.c=I),I>R.e.c&&(R.e.c=I),o[0].slice(-2)==="/>"&&++I,G=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(k<R.s.r&&(R.s.r=k),k>R.e.r&&(R.e.r=k),o[0].slice(-2)==="/>"&&(w=uc(o[0]),w.Index&&(k=+w.Index-1)),I=0,++k):(w=uc(o[0]),w.Index&&(k=+w.Index-1),Ae={},(w.AutoFitHeight=="0"||w.Height)&&(Ae.hpx=parseInt(w.Height,10),Ae.hpt=rx(Ae.hpx),Z[k]=Ae),w.Hidden=="1"&&(Ae.hidden=!0,Z[k]=Ae));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),R.s.r<=R.e.r&&R.s.c<=R.e.c&&(p["!ref"]=Rn(R),n.sheetRows&&n.sheetRows<=R.e.r&&(p["!fullref"]=p["!ref"],R.e.r=n.sheetRows-1,p["!ref"]=Rn(R))),B.length&&(p["!merges"]=B),q.length>0&&(p["!cols"]=q),Z.length>0&&(p["!rows"]=Z),d[g]=p}else R={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=I=0,l.push([o[3],!1]),u=uc(o[0]),g=mr(u.Name),p=n.dense?[]:{},B=[],K=[],Z=[],ne={name:g,Hidden:0},J.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),q=[],re=!1}break;case"style":o[1]==="/"?rpe(D,P,n):P=uc(o[0]);break;case"numberformat":P.nf=mr(uc(o[0]).Format||"General"),Ng[P.nf]&&(P.nf=Ng[P.nf]);for(var xe=0;xe!=392&&gn[xe]!=P.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(gn[xe]==null){gA(P.nf,xe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(X=uc(o[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!re&&X.wpx>10){re=!0,Ii=HP;for(var Se=0;Se<q.length;++Se)q[Se]&&sf(q[Se])}re&&sf(X),q[X.Index-1||q.length]=X;for(var ge=0;ge<+X.Span;++ge)q[q.length]=ls(X);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var ae=_n(o[0]),Fe={Name:ae.Name,Ref:om(ae.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Fe.Sheet=J.Sheets.length-1),J.Names.push(Fe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?_+=r.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;P.Interior=uc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Nle(O,ie,r.slice(L,o.index)):L=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));ape(oe),G.push(oe)}else l.push([o[3],!1]),u=uc(o[0]),oe={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var et=uc(o[0]);p["!autofilter"]={ref:om(et.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return e6(r,n);var De=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(L,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else L=o.index+o[0].length;break;case"header":p["!margins"]||ah(p["!margins"]={},"xlml"),isNaN(+_n(o[0]).Margin)||(p["!margins"].header=+_n(o[0]).Margin);break;case"footer":p["!margins"]||ah(p["!margins"]={},"xlml"),isNaN(+_n(o[0]).Margin)||(p["!margins"].footer=+_n(o[0]).Margin);break;case"pagemargins":var Ce=_n(o[0]);p["!margins"]||ah(p["!margins"]={},"xlml"),isNaN(+Ce.Top)||(p["!margins"].top=+Ce.Top),isNaN(+Ce.Left)||(p["!margins"].left=+Ce.Left),isNaN(+Ce.Right)||(p["!margins"].right=+Ce.Right),isNaN(+Ce.Bottom)||(p["!margins"].bottom=+Ce.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?tpe(M,ie,H,r.slice(L,o.index)):(H=o,L=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ge={};return!n.bookSheets&&!n.bookProps&&(Ge.Sheets=d),Ge.SheetNames=h,Ge.Workbook=J,Ge.SSF=ls(gn),Ge.Props=O,Ge.Custprops=M,Ge}function $_(t,e){switch(b4(e=e||{}),e.type||"base64"){case"base64":return qC(Yo(t),e);case"binary":case"buffer":case"file":return qC(t,e);case"array":return qC(hf(t),e)}}function ipe(t,e){var n=[];return t.Props&&n.push(kle(t.Props,e)),t.Custprops&&n.push(Ile(t.Props,t.Custprops)),n.join("")}function ope(){return""}function lpe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(Dt("NumberFormat",null,{"ss:Format":Pr(gn[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};n.push(Dt("Style",a.join(""),i))}),Dt("Styles",n.join(""))}function m7(t){return Dt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+p4(t.Ref,{r:0,c:0})})}function cpe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(m7(s)))}return Dt("Names",n.join(""))}function upe(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(m7(o)))}return a.join("")}function Ape(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Dt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Dt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Dt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Dt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(si("ProtectContents","True")),t["!protect"].objects&&s.push(si("ProtectObjects","True")),t["!protect"].scenarios&&s.push(si("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(si("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(si("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Dt("WorksheetOptions",s.join(""),{xmlns:Ho.x})}function dpe(t){return t.map(function(e){var n=Roe(e.t||""),r=Dt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Dt("Comment",r,{"ss:Author":e.a})}).join("")}function fpe(t,e,n,r,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Pr(p4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=bs(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Pr(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Pr(t.l.Tooltip))),n["!merges"])for(var u=n["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",p="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=DA[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||gn[14]);break;case"s":h="String",p=Foe(t.v||"");break}var g=pf(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?p:"",w=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(w+=dpe(t.c)),Dt("Cell",w,o)}function hpe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Em(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function mpe(t,e,n,r){if(!t["!ref"])return"";var s=pr(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(C,T){sf(C);var I=!!C.width,k=bw(T,C),R={"ss:Index":T+1};I&&(R["ss:Width"]=tx(k.width)),C.hidden&&(R["ss:Hidden"]="1"),o.push(Dt("Column",null,R))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[hpe(u,(t["!rows"]||[])[u])],h=s.s.c;h<=s.e.c;++h){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>u)&&!(a[i].e.c<h)&&!(a[i].e.r<u)){(a[i].s.c!=h||a[i].s.r!=u)&&(p=!0);break}if(!p){var g={r:u,c:h},b=wn(g),w=l?(t[u]||[])[h]:t[b];d.push(fpe(w,b,t,e,n,r,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function ppe(t,e,n){var r=[],s=n.SheetNames[t],a=n.Sheets[s],i=a?upe(a,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?mpe(a,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(Ape(a,e,t,n)),r.join("")}function gpe(t,e){e||(e={}),t.SSF||(t.SSF=ls(gn)),t.SSF&&(Vm(),mw(t.SSF),e.revssf=gw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],pf(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(ipe(t,e)),n.push(ope()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Dt("Worksheet",ppe(r,e,t),{"ss:Name":Pr(t.SheetNames[r])}));return n[2]=lpe(t,e),n[3]=cpe(t),ta+Dt("Workbook",n.join(""),{xmlns:Ho.ss,"xmlns:o":Ho.o,"xmlns:x":Ho.x,"xmlns:ss":Ho.ss,"xmlns:dt":Ho.dt,"xmlns:html":Ho.html})}function xpe(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=cle(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=ule(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var vpe=[60,1084,2066,2165,2175];function ype(t,e,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=fA(n,n.l),u=Y_[l],d=0;u!=null&&vpe.indexOf(l)>-1;)a=fA(n,n.l+2),d=n.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=n.slice(d,n.l+4+a),i.push(o),n.l+=4+a,u=Y_[l=fA(n,n.l)];var h=Ha(i);ni(h,0);var p=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(p),p+=i[g].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,s)}function iu(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=gn[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||DA[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=$g(t.v):t.w=mh(t.v):t.w=Ml(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&Hm(gn[r]||String(r))){var s=$f(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function mv(t,e,n){return{v:t,ixfe:e,t:n}}function wpe(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},h,p="",g,b,w,C,T={},I=[],k,R,D=[],P=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},B=function(It){return It<8?nh[It]:It<64&&P[It-8]||nh[It]},O=function(It,xt,xn){var $t=xt.XF.data;if(!(!$t||!$t.patternType||!xn||!xn.cellStyles)){xt.s={},xt.s.patternType=$t.patternType;var ir;(ir=ex(B($t.icvFore)))&&(xt.s.fgColor={rgb:ir}),(ir=ex(B($t.icvBack)))&&(xt.s.bgColor={rgb:ir})}},M=function(It,xt,xn){if(!(Ae>1)&&!(xn.sheetRows&&It.r>=xn.sheetRows)){if(xn.cellStyles&&xt.XF&&xt.XF.data&&O(It,xt,xn),delete xt.ixfe,delete xt.XF,h=It,p=wn(It),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),It.r<i.s.r&&(i.s.r=It.r),It.c<i.s.c&&(i.s.c=It.c),It.r+1>i.e.r&&(i.e.r=It.r+1),It.c+1>i.e.c&&(i.e.c=It.c+1),xn.cellFormula&&xt.f){for(var $t=0;$t<I.length;++$t)if(!(I[$t][0].s.c>It.c||I[$t][0].s.r>It.r)&&!(I[$t][0].e.c<It.c||I[$t][0].e.r<It.r)){xt.F=Rn(I[$t][0]),(I[$t][0].s.c!=It.c||I[$t][0].s.r!=It.r)&&delete xt.f,xt.f&&(xt.f=""+Bi(I[$t][1],i,It,K,L));break}}xn.dense?(s[It.r]||(s[It.r]=[]),s[It.r][It.c]=xt):s[p]=xt}},L={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:I,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(L.password=e.password);var H,G=[],oe=[],q=[],X=[],re=!1,K=[];K.SheetNames=L.snames,K.sharedf=L.sharedf,K.arrayf=L.arrayf,K.names=[],K.XTI=[];var Z=0,Ae=0,j=0,W=[],J=[],ne;L.codepage=1200,gc(1200);for(var ie=!1;t.l<t.length-1;){var de=t.l,me=t.read_shift(2);if(me===0&&Z===10)break;var xe=t.l===t.length?0:t.read_shift(2),Se=Y_[me];if(Se&&Se.f){if(e.bookSheets&&Z===133&&me!==133)break;if(Z=me,Se.r===2||Se.r==12){var ge=t.read_shift(2);if(xe-=2,!L.enc&&ge!==me&&((ge&255)<<8|ge>>8)!==me)throw new Error("rt mismatch: "+ge+"!="+me);Se.r==12&&(t.l+=10,xe-=10)}var ae={};if(me===10?ae=Se.f(t,xe,L):ae=ype(me,Se,t,xe,L),Ae==0&&[9,521,1033,2057].indexOf(Z)===-1)continue;switch(me){case 34:n.opts.Date1904=_.WBProps.date1904=ae;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(L.enc||(t.l=0),L.enc=ae,!e.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=ae;break;case 66:var Fe=Number(ae);switch(Fe){case 21010:Fe=1200;break;case 32768:Fe=1e4;break;case 32769:Fe=1252;break}gc(L.codepage=Fe),ie=!0;break;case 317:L.rrtabid=ae;break;case 25:L.winlocked=ae;break;case 439:n.opts.RefreshAll=ae;break;case 12:n.opts.CalcCount=ae;break;case 16:n.opts.CalcDelta=ae;break;case 17:n.opts.CalcIter=ae;break;case 13:n.opts.CalcMode=ae;break;case 14:n.opts.CalcPrecision=ae;break;case 95:n.opts.CalcSaveRecalc=ae;break;case 15:L.CalcRefMode=ae;break;case 2211:n.opts.FullCalc=ae;break;case 129:ae.fDialog&&(s["!type"]="dialog"),ae.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ae.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:D.push(ae);break;case 430:K.push([ae]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(ae);break;case 24:case 536:ne={Name:ae.Name,Ref:Bi(ae.rgce,i,null,K,L)},ae.itab>0&&(ne.Sheet=ae.itab-1),K.names.push(ne),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(J[ae.itab-1]={ref:Rn(ae.rgce[0][0][1][2])});break;case 22:L.ExternCount=ae;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(ae),K.XTI=K.XTI.concat(ae);break;case 2196:if(L.biff<8)break;ne!=null&&(ne.Comment=ae[1]);break;case 18:s["!protect"]=ae;break;case 19:ae!==0&&L.WTF&&console.error("Password verifier: "+ae);break;case 133:a[ae.pos]=ae,L.snames.push(ae.name);break;case 10:{if(--Ae)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Rn(i),e.sheetRows&&e.sheetRows<=i.e.r){var et=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Rn(i),i.e.r=et}i.e.r++,i.e.c++}G.length>0&&(s["!merges"]=G),oe.length>0&&(s["!objects"]=oe),q.length>0&&(s["!cols"]=q),X.length>0&&(s["!rows"]=X),_.Sheets.push(N)}u===""?d=s:r[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),L.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(L.biff=5,ie=!0,gc(L.codepage=28591)),L.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(L.biff=2),Ae++)break;if(s=e.dense?[]:{},L.biff<8&&!ie&&(ie=!0,gc(L.codepage=e.codepage||1252)),L.biff<5||ae.BIFFVer==0&&ae.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:t.l-xe,name:u};a[De.pos]=De,L.snames.push(u)}else u=(a[de]||{name:""}).name;ae.dt==32&&(s["!type"]="chart"),ae.dt==64&&(s["!type"]="macro"),G=[],oe=[],L.arrayf=I=[],q=[],X=[],re=!1,N={Hidden:(a[de]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[ae.r]||[])[ae.c]:s[wn({c:ae.c,r:ae.r})])&&++ae.c,k={ixfe:ae.ixfe,XF:D[ae.ixfe]||{},v:ae.val,t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 5:case 517:k={ixfe:ae.ixfe,XF:D[ae.ixfe],v:ae.val,t:ae.t},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 638:k={ixfe:ae.ixfe,XF:D[ae.ixfe],v:ae.rknum,t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 189:for(var Ce=ae.c;Ce<=ae.C;++Ce){var Ge=ae.rkrec[Ce-ae.c][0];k={ixfe:Ge,XF:D[Ge],v:ae.rkrec[Ce-ae.c][1],t:"n"},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:Ce,r:ae.r},k,e)}break;case 6:case 518:case 1030:{if(ae.val=="String"){o=ae;break}if(k=mv(ae.val,ae.cell.ixfe,ae.tt),k.XF=D[k.ixfe],e.cellFormula){var nt=ae.formula;if(nt&&nt[0]&&nt[0][0]&&nt[0][0][0]=="PtgExp"){var it=nt[0][0][1][0],dt=nt[0][0][1][1],Ct=wn({r:it,c:dt});T[Ct]?k.f=""+Bi(ae.formula,i,ae.cell,K,L):k.F=((e.dense?(s[it]||[])[dt]:s[Ct])||{}).F}else k.f=""+Bi(ae.formula,i,ae.cell,K,L)}j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M(ae.cell,k,e),o=ae}break;case 7:case 519:if(o)o.val=ae,k=mv(ae,o.cell.ixfe,"s"),k.XF=D[k.ixfe],e.cellFormula&&(k.f=""+Bi(o.formula,i,o.cell,K,L)),j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M(o.cell,k,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{I.push(ae);var ut=wn(ae[0].s);if(g=e.dense?(s[ae[0].s.r]||[])[ae[0].s.c]:s[ut],e.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+Bi(ae[1],i,ae[0],K,L),g.F=Rn(ae[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;T[wn(o.cell)]=ae[0],g=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[wn(o.cell)],(g||{}).f=""+Bi(ae[0],i,h,K,L)}}break;case 253:k=mv(l[ae.isst].t,ae.ixfe,"s"),l[ae.isst].h&&(k.h=l[ae.isst].h),k.XF=D[k.ixfe],j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 513:e.sheetStubs&&(k={ixfe:ae.ixfe,XF:D[ae.ixfe],t:"z"},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e));break;case 190:if(e.sheetStubs)for(var kt=ae.c;kt<=ae.C;++kt){var Ft=ae.ixfe[kt-ae.c];k={ixfe:Ft,XF:D[Ft],t:"z"},j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:kt,r:ae.r},k,e)}break;case 214:case 516:case 4:k=mv(ae.val,ae.ixfe,"s"),k.XF=D[k.ixfe],j>0&&(k.z=W[k.ixfe>>8&63]),iu(k,e,n.opts.Date1904),M({c:ae.c,r:ae.r},k,e);break;case 0:case 512:Ae===1&&(i=ae);break;case 252:l=ae;break;case 1054:if(L.biff==4){W[j++]=ae[1];for(var Wt=0;Wt<j+163&&gn[Wt]!=ae[1];++Wt);Wt>=163&&gA(ae[1],j+163)}else gA(ae[1],ae[0]);break;case 30:{W[j++]=ae;for(var Mt=0;Mt<j+163&&gn[Mt]!=ae;++Mt);Mt>=163&&gA(ae,j+163)}break;case 229:G=G.concat(ae);break;case 93:oe[ae.cmo[0]]=L.lastobj=ae;break;case 438:L.lastobj.TxO=ae;break;case 127:L.lastobj.ImData=ae;break;case 440:for(C=ae[0].s.r;C<=ae[0].e.r;++C)for(w=ae[0].s.c;w<=ae[0].e.c;++w)g=e.dense?(s[C]||[])[w]:s[wn({c:w,r:C})],g&&(g.l=ae[1]);break;case 2048:for(C=ae[0].s.r;C<=ae[0].e.r;++C)for(w=ae[0].s.c;w<=ae[0].e.c;++w)g=e.dense?(s[C]||[])[w]:s[wn({c:w,r:C})],g&&g.l&&(g.l.Tooltip=ae[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;g=e.dense?(s[ae[0].r]||[])[ae[0].c]:s[wn(ae[0])];var Vt=oe[ae[2]];g||(e.dense?(s[ae[0].r]||(s[ae[0].r]=[]),g=s[ae[0].r][ae[0].c]={t:"z"}):g=s[wn(ae[0])]={t:"z"},i.e.r=Math.max(i.e.r,ae[0].r),i.s.r=Math.min(i.s.r,ae[0].r),i.e.c=Math.max(i.e.c,ae[0].c),i.s.c=Math.min(i.s.c,ae[0].c)),g.c||(g.c=[]),b={a:ae[1],t:Vt.TxO.t},g.c.push(b)}break;case 2173:lde(D[ae.ixfe],ae.ext);break;case 125:{if(!L.cellStyles)break;for(;ae.e>=ae.s;)q[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},re||(re=!0,f4(ae.w/256)),sf(q[ae.e+1])}break;case 520:{var Jt={};ae.level!=null&&(X[ae.r]=Jt,Jt.level=ae.level),ae.hidden&&(X[ae.r]=Jt,Jt.hidden=!0),ae.hpt&&(X[ae.r]=Jt,Jt.hpt=ae.hpt,Jt.hpx=Em(ae.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||ah(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ae;break;case 161:s["!margins"]||ah(s["!margins"]={}),s["!margins"].header=ae.header,s["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(_.Views[0].RTL=!0);break;case 146:P=ae;break;case 2198:H=ae;break;case 140:R=ae;break;case 442:u?N.CodeName=ae||N.name:_.WBProps.CodeName=ae||"ThisWorkbook";break}}else Se||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=xe}return n.SheetNames=Ms(a).sort(function(Pt,It){return Number(Pt)-Number(It)}).map(function(Pt){return a[Pt].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&J.forEach(function(Pt,It){n.Sheets[n.SheetNames[It]]["!autofilter"]=Pt}),n.Strings=l,n.SSF=ls(gn),L.enc&&(n.Encryption=L.enc),H&&(n.Themes=H),n.Metadata={},R!==void 0&&(n.Metadata.Country=R),K.names.length>0&&(_.Names=K.names),n.Workbook=_,n}var kg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function bpe(t,e,n){var r=ln.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=kF(r,V_,kg.DSI);for(var a in s)e[a]=s[a]}catch(u){if(n.WTF)throw u}var i=ln.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=kF(i,G_,kg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(n.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(hP(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function Cpe(t,e){var n=[],r=[],s=[],a=0,i,o=iF(V_,"n"),l=iF(G_,"n");if(t.Props)for(i=Ms(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=Ms(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)wP.indexOf(s[a][0])>-1||fP.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);r.length&&ln.utils.cfb_add(e,"/SummaryInformation",IF(r,kg.SI,l,G_)),(n.length||u.length)&&ln.utils.cfb_add(e,"/DocumentSummaryInformation",IF(n,kg.DSI,o,V_,u.length?u:null,kg.UDI))}function p7(t,e){e||(e={}),b4(e),V5(),e.codepage&&H5(e.codepage);var n,r;if(t.FullPaths){if(ln.find(t,"/encryption"))throw new Error("File is password-protected");n=ln.find(t,"!CompObj"),r=ln.find(t,"/Workbook")||ln.find(t,"/Book")}else{switch(e.type){case"base64":t=Go(Yo(t));break;case"binary":t=Go(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ni(t,0),r={content:t}}var s,a;if(n&&xpe(n),e.bookProps&&!e.bookSheets)s={};else{var i=qn?"buffer":"array";if(r&&r.content)s=wpe(r.content,e);else if((a=ln.find(t,"PerfectOffice_MAIN"))&&a.content)s=sh.to_workbook(a.content,(e.type=i,e));else if((a=ln.find(t,"NativeContent_MAIN"))&&a.content)s=sh.to_workbook(a.content,(e.type=i,e));else throw(a=ln.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ln.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Lde(t))}var o={};return t.FullPaths&&bpe(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function Epe(t,e){var n=e||{},r=ln.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return ln.utils.cfb_add(r,s,g7(t,n)),n.biff==8&&(t.Props||t.Custprops)&&Cpe(t,r),n.biff==8&&t.vbaraw&&Mde(r,ln.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var sx={0:{f:Whe},1:{f:n0e},2:{f:w0e},3:{f:u0e},4:{f:i0e},5:{f:x0e},6:{f:S0e},7:{f:h0e},8:{f:R0e},9:{f:F0e},10:{f:k0e},11:{f:I0e},12:{f:s0e},13:{f:C0e},14:{f:d0e},15:{f:l0e},16:{f:l7},17:{f:B0e},18:{f:p0e},19:{f:r4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Bme},40:{},42:{},43:{f:SAe},44:{f:EAe},45:{f:NAe},46:{f:IAe},47:{f:kAe},48:{},49:{f:Joe},50:{},51:{f:Ade},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:FP},62:{f:_0e},63:{f:yde},64:{f:$0e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Mi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:z0e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:e0e},148:{f:Jhe,p:16},151:{f:j0e},152:{},153:{f:_me},154:{},155:{},156:{f:Cme},157:{},158:{},159:{T:1,f:Que},160:{T:-1},161:{T:1,f:Uh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:D0e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:cde},336:{T:-1},337:{f:hde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:H_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:IP},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:O0e},427:{f:Q0e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:V0e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Zhe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:M0e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:H_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Ide},633:{T:1},634:{T:-1},635:{T:1,f:Nde},636:{T:-1},637:{f:tle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:dme},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Y0e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Y_={6:{f:GC},10:{f:xd},12:{f:fa},13:{f:fa},14:{f:qs},15:{f:qs},16:{f:Ri},17:{f:qs},18:{f:qs},19:{f:fa},20:{f:MF},21:{f:MF},23:{f:IP},24:{f:jF},25:{f:qs},26:{},27:{},28:{f:Yce},29:{},34:{f:qs},35:{f:PF},38:{f:Ri},39:{f:Ri},40:{f:Ri},41:{f:Ri},42:{f:qs},43:{f:qs},47:{f:lAe},49:{f:Cce},51:{f:fa},60:{},61:{f:xce},64:{f:qs},65:{f:bce},66:{f:fa},77:{},80:{},81:{},82:{},85:{f:fa},89:{},90:{},91:{},92:{f:oce},93:{f:Zce},94:{},95:{f:qs},96:{},97:{},99:{f:qs},125:{f:FP},128:{f:Pce},129:{f:cce},130:{f:fa},131:{f:qs},132:{f:qs},133:{f:uce},134:{},140:{f:oue},141:{f:fa},144:{},146:{f:uue},151:{},152:{},153:{},154:{},155:{},156:{f:fa},157:{},158:{},160:{f:gue},161:{f:fue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Dce},190:{f:Uce},193:{f:xd},197:{},198:{},199:{},200:{},201:{},202:{f:qs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:fa},220:{},221:{f:qs},222:{},224:{f:Mce},225:{f:ice},226:{f:xd},227:{},229:{f:Jce},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:dce},253:{f:_ce},255:{f:hce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:bP},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qs},353:{f:xd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Vce},431:{f:qs},432:{},433:{},434:{},437:{},438:{f:nue},439:{f:qs},440:{f:rue},441:{},442:{f:Lx},443:{},444:{f:fa},445:{},446:{},448:{f:xd},449:{f:gce,r:2},450:{f:xd},512:{f:DF},513:{f:pue},515:{f:Qce},516:{f:Tce},517:{f:LF},519:{f:xue},520:{f:mce},523:{},545:{f:OF},549:{f:RF},566:{},574:{f:yce},638:{f:Rce},659:{},1048:{},1054:{f:Nce},1084:{},1212:{f:Kce},2048:{f:aue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:dv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:xd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Aue,r:12},2173:{f:ode,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:qce,r:12},2197:{},2198:{f:tde,r:12},2199:{},2200:{},2201:{},2202:{f:Wce,r:12},2203:{f:xd},2204:{},2205:{},2206:{},2207:{},2211:{f:pce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:fa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:hue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:cue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:DF},1:{},2:{f:Cue},3:{f:wue},4:{f:yue},5:{f:LF},7:{f:_ue},8:{},9:{f:dv},11:{},22:{f:fa},30:{f:Ice},31:{},32:{},33:{f:OF},36:{},37:{f:RF},50:{f:Sue},62:{},52:{},67:{},68:{f:fa},69:{},86:{},126:{},127:{f:vue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Tue},223:{},234:{},354:{},421:{},518:{f:GC},521:{f:dv},536:{f:jF},547:{f:PF},561:{},579:{},1030:{f:GC},1033:{f:dv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ut(t,e,n,r){var s=e;if(!isNaN(s)){var a=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&e4(n)&&t.push(n)}}function _pe(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return Ut(t,e,n,s);var a=e;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u}}}function Ox(t,e,n){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function Spe(t,e,n,r){var s=lt(9);return Ox(s,t,e),CP(n,r||"b",s),s}function Tpe(t,e,n){var r=lt(8+2*n.length);return Ox(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Bpe(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Na(os(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Ut(t,2,Eue(n,r,s)):Ut(t,3,bue(n,r,s));return;case"b":case"e":Ut(t,5,Spe(n,r,e.v,e.t));return;case"s":case"str":Ut(t,4,Tpe(n,r,(e.v||"").slice(0,255)));return}Ut(t,1,Ox(null,n,r))}function Npe(t,e,n,r){var s=Array.isArray(e),a=pr(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Rn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=ea(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=ws(d)),i=l[d]+o;var h=s?(e[u]||[])[d]:e[i];h&&Bpe(t,h,u,d)}}}function kpe(t,e){for(var n=e||{},r=xo(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(s=a);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Ut(r,n.biff==4?1033:n.biff==3?521:9,u4(t,16,n)),Npe(r,t.Sheets[t.SheetNames[s]],s,n),Ut(r,10),r.end()}function Ipe(t,e,n){Ut(t,49,Ece({sz:12,name:"Arial"},n))}function Fpe(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Ut(t,1054,kce(s,e[s],n))})}function Rpe(t,e){var n=lt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Ut(t,2151,n),n=lt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),BP(pr(e["!ref"]||"A1"),n),n.write_shift(4,4),Ut(t,2152,n)}function Dpe(t,e){for(var n=0;n<16;++n)Ut(t,224,UF({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Ut(t,224,UF(r,0,e))})}function Upe(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Ut(t,440,sue(r)),r[1].Tooltip&&Ut(t,2048,iue(r))}delete e["!links"]}function Lpe(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&Ut(t,125,due(bw(s,r),s))})}}function Mpe(t,e,n,r,s){var a=16+pf(s.cellXfs,e,s);if(e.v==null&&!e.bf){Ut(t,513,vh(n,r,a));return}if(e.bf)Ut(t,6,che(e,n,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Na(os(e.v)):e.v;Ut(t,515,Hce(n,r,i,a));break;case"b":case"e":Ut(t,517,Oce(n,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=x4(s.Strings,e.v,s.revStrings);Ut(t,253,Sce(n,r,o,a))}else Ut(t,516,Bce(n,r,(e.v||"").slice(0,255),a,s));break;default:Ut(t,513,vh(n,r,a))}}function Ppe(t,e,n){var r=xo(),s=n.SheetNames[t],a=n.Sheets[s]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,h="",p=[],g=pr(a["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Ut(r,2057,u4(n,16,e)),Ut(r,13,Tl(1)),Ut(r,12,Tl(100)),Ut(r,15,qi(!0)),Ut(r,17,qi(!1)),Ut(r,16,gh(.001)),Ut(r,95,qi(!0)),Ut(r,42,qi(!1)),Ut(r,43,qi(!1)),Ut(r,130,Tl(1)),Ut(r,128,jce()),Ut(r,131,qi(!1)),Ut(r,132,qi(!1)),u&&Lpe(r,a["!cols"]),Ut(r,512,Fce(g,e)),u&&(a["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){h=ea(w);for(var C=g.s.c;C<=g.e.c;++C){w===g.s.r&&(p[C]=ws(C)),d=p[C]+h;var T=l?(a[w]||[])[C]:a[d];T&&(Mpe(r,T,w,C,e),u&&T.l&&a["!links"].push([d,T.l]))}}var I=o.CodeName||o.name||s;return u&&Ut(r,574,wce((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Ut(r,229,Xce(a["!merges"])),u&&Upe(r,a),Ut(r,442,EP(I)),u&&Rpe(r,a),Ut(r,10),r.end()}function jpe(t,e,n){var r=xo(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=n.biff==8,l=n.biff==5;if(Ut(r,2057,u4(t,5,n)),n.bookType=="xla"&&Ut(r,135),Ut(r,225,o?Tl(1200):null),Ut(r,193,Ole(2)),l&&Ut(r,191),l&&Ut(r,192),Ut(r,226),Ut(r,92,lce("SheetJS",n)),Ut(r,66,Tl(o?1200:1252)),o&&Ut(r,353,Tl(0)),o&&Ut(r,448),Ut(r,317,mue(t.SheetNames.length)),o&&t.vbaraw&&Ut(r,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Ut(r,442,EP(u))}Ut(r,156,Tl(17)),Ut(r,25,qi(!1)),Ut(r,18,qi(!1)),Ut(r,19,Tl(0)),o&&Ut(r,431,qi(!1)),o&&Ut(r,444,Tl(0)),Ut(r,61,vce()),Ut(r,64,qi(!1)),Ut(r,141,Tl(0)),Ut(r,34,qi(gme(t)=="true")),Ut(r,14,qi(!0)),o&&Ut(r,439,qi(!1)),Ut(r,218,Tl(0)),Ipe(r,t,n),Fpe(r,t.SSF,n),Dpe(r,n),o&&Ut(r,352,qi(!1));var d=r.end(),h=xo();o&&Ut(h,140,lue()),o&&n.Strings&&_pe(h,252,fce(n.Strings)),Ut(h,10);var p=h.end(),g=xo(),b=0,w=0;for(w=0;w<t.SheetNames.length;++w)b+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var C=d.length+b+p.length;for(w=0;w<t.SheetNames.length;++w){var T=a[w]||{};Ut(g,133,Ace({pos:C,hs:T.Hidden||0,dt:0,name:t.SheetNames[w]},n)),C+=e[w].length}var I=g.end();if(b!=I.length)throw new Error("BS8 "+b+" != "+I.length);var k=[];return d.length&&k.push(d),I.length&&k.push(I),p.length&&k.push(p),Ha(k)}function Ope(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=ls(gn)),t&&t.SSF&&(Vm(),mw(t.SSF),n.revssf=gw(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,C4(n),n.cellXfs=[],pf(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=Ppe(s,n,t);return r.unshift(jpe(t,r,n)),Ha(r)}function g7(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=wo(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return Ope(t,e);case 4:case 3:case 2:return kpe(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function YF(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=Eoe(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var w=l[i].trim(),C=w.slice(0,3).toLowerCase();if(C=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}d=0;continue}if(!(C!="<td"&&C!="<th")){var T=w.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var I=T[o].trim();if(I.match(/<t[dh]/i)){for(var k=I,R=0;k.charAt(0)=="<"&&(R=k.indexOf(">"))>-1;)k=k.slice(R+1);for(var D=0;D<b.length;++D){var P=b[D];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,D=-1)}var _=_n(I.slice(0,I.indexOf(">")));p=_.colspan?+_.colspan:1,((h=+_.rowspan)>1||p>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+p-1}});var N=_.t||_["data-t"]||"";if(!k.length){d+=p;continue}if(k=QM(k),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!k.length){d+=p;continue}var B={t:"s",v:k};n.raw||!k.trim().length||N=="s"||(k==="TRUE"?B={t:"b",v:!0}:k==="FALSE"?B={t:"b",v:!1}:isNaN(vc(k))?isNaN(bm(k).getDate())||(B={t:"d",v:os(k)},n.cellDates||(B={t:"n",v:Na(B.v)}),B.z=n.dateNF||gn[14]):B={t:"n",v:vc(k)}),n.dense?(r[u]||(r[u]=[]),r[u][d]=B):r[wn({r:u,c:d})]=B,d+=p}}}}return r["!ref"]=Rn(g),b.length&&(r["!merges"]=b),r}function Qpe(t,e,n,r){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>n||s[u].s.c>i)&&!(s[u].e.r<n||s[u].e.c<i)){if(s[u].s.r<n||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=wn({r:n,c:i}),h=r.dense?(t[n]||[])[i]:t[d],p=h&&h.v!=null&&(h.h||J5(h.w||(_A(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(r.id||"sjs")+"-"+d,a.push(Dt("td",p,g))}}var b="<tr>";return b+a.join("")+"</tr>"}var Hpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Vpe="</body></html>";function Gpe(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return mf(YF(n[0],e),e);var r=T4();return n.forEach(function(s,a){B4(r,YF(s,e),"Sheet"+(a+1))}),r}function zpe(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function x7(t,e){var n=e||{},r=n.header!=null?n.header:Hpe,s=n.footer!=null?n.footer:Vpe,a=[r],i=wo(t["!ref"]);n.dense=Array.isArray(t),a.push(zpe(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(Qpe(t,i,o,n));return a.push("</table>"+s),a.join("")}function v7(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?bs(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=wo(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var h=[],p=0,g=t["!rows"]||(t["!rows"]=[]),b=0,w=0,C=0,T=0,I=0,k=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&w<l;++b){var R=o[b];if(JF(R)){if(r.display)continue;g[w]={hidden:!0}}var D=R.children;for(C=T=0;C<D.length;++C){var P=D[C];if(!(r.display&&JF(P))){var _=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):QM(P.innerHTML),N=P.getAttribute("data-z")||P.getAttribute("z");for(p=0;p<h.length;++p){var B=h[p];B.s.c==T+a&&B.s.r<w+s&&w+s<=B.e.r&&(T=B.e.c+1-a,p=-1)}k=+P.getAttribute("colspan")||1,((I=+P.getAttribute("rowspan")||1)>1||k>1)&&h.push({s:{r:w+s,c:T+a},e:{r:w+s+(I||1)-1,c:T+a+(k||1)-1}});var O={t:"s",v:_},M=P.getAttribute("data-t")||P.getAttribute("t")||"";_!=null&&(_.length==0?O.t=M||"z":r.raw||_.trim().length==0||M=="s"||(_==="TRUE"?O={t:"b",v:!0}:_==="FALSE"?O={t:"b",v:!1}:isNaN(vc(_))?isNaN(bm(_).getDate())||(O={t:"d",v:os(_)},r.cellDates||(O={t:"n",v:Na(O.v)}),O.z=r.dateNF||gn[14]):O={t:"n",v:vc(_)})),O.z===void 0&&N!=null&&(O.z=N);var L="",H=P.getElementsByTagName("A");if(H&&H.length)for(var G=0;G<H.length&&!(H[G].hasAttribute("href")&&(L=H[G].getAttribute("href"),L.charAt(0)!="#"));++G);L&&L.charAt(0)!="#"&&(O.l={Target:L}),r.dense?(t[w+s]||(t[w+s]=[]),t[w+s][T+a]=O):t[wn({c:T+a,r:w+s})]=O,u.e.c<T+a&&(u.e.c=T+a),T+=k}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,w-1+s),t["!ref"]=Rn(u),w>=l&&(t["!fullref"]=Rn((u.e.r=o.length-b+w-1+s,u))),t}function y7(t,e){var n=e||{},r=n.dense?[]:{};return v7(r,t,e)}function qpe(t,e){return mf(y7(t,e),e)}function JF(t){var e="",n=Kpe(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Kpe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Wpe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=mr(e.replace(/<[^>]*>/g,""));return[n]}var XF={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function w7(t,e){var n=e||{},r=X5(t),s=[],a,i,o={name:""},l="",u=0,d,h,p={},g=[],b=n.dense?[]:{},w,C,T={value:""},I="",k=0,R=[],D=-1,P=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,B={},O=[],M={},L=0,H=0,G=[],oe=1,q=1,X=[],re={Names:[]},K={},Z=["",""],Ae=[],j={},W="",J=0,ne=!1,ie=!1,de=0;for(Xg.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=Xg.exec(r);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"工作表":w[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?b["!ref"]=Rn(_):b["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=_.e.r&&(b["!fullref"]=b["!ref"],_.e.r=n.sheetRows-1,b["!ref"]=Rn(_)),O.length&&(b["!merges"]=O),G.length&&(b["!rows"]=G),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),p[d.name]=b,ie=!1):w[0].charAt(w[0].length-2)!=="/"&&(d=_n(w[0],!1),D=P=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,b=n.dense?[]:{},O=[],G=[],ie=!0);break;case"table-row-group":w[1]==="/"?--N:++N;break;case"table-row":case"行":if(w[1]==="/"){D+=oe,oe=1;break}if(h=_n(w[0],!1),h.行号?D=h.行号-1:D==-1&&(D=0),oe=+h["number-rows-repeated"]||1,oe<10)for(de=0;de<oe;++de)N>0&&(G[D+de]={level:N});P=-1;break;case"covered-table-cell":w[1]!=="/"&&++P,n.sheetStubs&&(n.dense?(b[D]||(b[D]=[]),b[D][P]={t:"z"}):b[wn({r:D,c:P})]={t:"z"}),I="",R=[];break;case"table-cell":case"数据":if(w[0].charAt(w[0].length-2)==="/")++P,T=_n(w[0],!1),q=parseInt(T["number-columns-repeated"]||"1",10),C={t:"z",v:null},T.formula&&n.cellFormula!=!1&&(C.f=KF(mr(T.formula))),(T.数据类型||T["value-type"])=="string"&&(C.t="s",C.v=mr(T["string-value"]||""),n.dense?(b[D]||(b[D]=[]),b[D][P]=C):b[wn({r:D,c:P})]=C),P+=q-1;else if(w[1]!=="/"){++P,I="",k=0,R=[],q=1;var me=oe?D+oe-1:D;if(P>_.e.c&&(_.e.c=P),P<_.s.c&&(_.s.c=P),D<_.s.r&&(_.s.r=D),me>_.e.r&&(_.e.r=me),T=_n(w[0],!1),Ae=[],j={},C={t:T.数据类型||T["value-type"],v:null},n.cellFormula)if(T.formula&&(T.formula=mr(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(L=parseInt(T["number-matrix-rows-spanned"],10)||0,H=parseInt(T["number-matrix-columns-spanned"],10)||0,M={s:{r:D,c:P},e:{r:D+L-1,c:P+H-1}},C.F=Rn(M),X.push([M,C.F])),T.formula)C.f=KF(T.formula);else for(de=0;de<X.length;++de)D>=X[de][0].s.r&&D<=X[de][0].e.r&&P>=X[de][0].s.c&&P<=X[de][0].e.c&&(C.F=X[de][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(L=parseInt(T["number-rows-spanned"],10)||0,H=parseInt(T["number-columns-spanned"],10)||0,M={s:{r:D,c:P},e:{r:D+L-1,c:P+H-1}},O.push(M)),T["number-columns-repeated"]&&(q=parseInt(T["number-columns-repeated"],10)),C.t){case"boolean":C.t="b",C.v=ss(T["boolean-value"]);break;case"float":C.t="n",C.v=parseFloat(T.value);break;case"percentage":C.t="n",C.v=parseFloat(T.value);break;case"currency":C.t="n",C.v=parseFloat(T.value);break;case"date":C.t="d",C.v=os(T["date-value"]),n.cellDates||(C.t="n",C.v=Na(C.v)),C.z="m/d/yy";break;case"time":C.t="n",C.v=woe(T["time-value"])/86400,n.cellDates&&(C.t="d",C.v=xw(C.v)),C.z="HH:MM:SS";break;case"number":C.t="n",C.v=parseFloat(T.数据数值);break;default:if(C.t==="string"||C.t==="text"||!C.t)C.t="s",T["string-value"]!=null&&(I=mr(T["string-value"]),R=[]);else throw new Error("Unsupported value type "+C.t)}}else{if(ne=!1,C.t==="s"&&(C.v=I||"",R.length&&(C.R=R),ne=k==0),K.Target&&(C.l=K),Ae.length>0&&(C.c=Ae,Ae=[]),I&&n.cellText!==!1&&(C.w=I),ne&&(C.t="z",delete C.v),(!ne||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=D))for(var xe=0;xe<oe;++xe){if(q=parseInt(T["number-columns-repeated"]||"1",10),n.dense)for(b[D+xe]||(b[D+xe]=[]),b[D+xe][P]=xe==0?C:ls(C);--q>0;)b[D+xe][P+q]=ls(C);else for(b[wn({r:D+xe,c:P})]=C;--q>0;)b[wn({r:D+xe,c:P+q})]=ls(C);_.e.c<=P&&(_.e.c=P)}q=parseInt(T["number-columns-repeated"]||"1",10),P+=q-1,q=0,C={},I="",R=[]}K={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a;j.t=I,R.length&&(j.R=R),j.a=W,Ae.push(j)}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);W="",J=0,I="",k=0,R=[];break;case"creator":w[1]==="/"?W=r.slice(J,w.index):J=w.index+w[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);I="",k=0,R=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(B[o.name]=l,(a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=_n(w[0],!1),s.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=_n(w[0],!1),l+=XF[w[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=_n(w[0],!1),l+=XF[w[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(u,w.index);break}else u=w.index+w[0].length;break;case"named-range":i=_n(w[0],!1),Z=zC(i["cell-range-address"]);var Se={Name:i.name,Ref:Z[0]+"!"+Z[1]};ie&&(Se.Sheet=g.length),re.Names.push(Se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(w[1]==="/"&&(!T||!T["string-value"])){var ge=Wpe(r.slice(k,w.index));I=(I.length>0?I+`
`:"")+ge[0]}else _n(w[0],!1),k=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{Z=zC(_n(w[0])["target-range-address"]),p[Z[0]]["!autofilter"]={ref:Z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(K=_n(w[0],!1),!K.href)break;K.Target=mr(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(Z=zC(K.Target.slice(1)),K.Target="#"+Z[0]+"!"+Z[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(n.WTF)throw new Error(w)}}var ae={Sheets:p,SheetNames:g,Workbook:re};return n.bookSheets&&delete ae.Sheets,ae}function ZF(t,e){e=e||{},_l(t,"META-INF/manifest.xml")&&wle(da(t,"META-INF/manifest.xml"),e);var n=zo(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=w7(Kr(n),e);return _l(t,"meta.xml")&&(r.Props=AP(da(t,"meta.xml"))),r}function e6(t,e){return w7(t,e)}var $pe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Jg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ta+e}}(),t6=function(){var t=function(a){return Pr(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Pr(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=wo(a["!ref"]||"A1"),p=a["!merges"]||[],g=0,b=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",C=a["!rows"]||[];for(u=0;u<h.s.r;++u)w=C[u]?' table:style-name="ro'+C[u].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;u<=h.e.r;++u){for(w=C[u]?' table:style-name="ro'+C[u].ods+'"':"",l.push("        <table:table-row"+w+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var T=!1,I={},k="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>d)&&!(p[g].s.r>u)&&!(p[g].e.c<d)&&!(p[g].e.r<u)){(p[g].s.c!=d||p[g].s.r!=u)&&(T=!0),I["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,I["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(T){l.push(n);continue}var R=wn({r:u,c:d}),D=b?(a[u]||[])[d]:a[R];if(D&&D.f&&(I["table:formula"]=Pr(mhe(D.f)),D.F&&D.F.slice(0,R.length)==R)){var P=wo(D.F);I["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,I["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!D){l.push(e);continue}switch(D.t){case"b":k=D.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=D.v?"true":"false";break;case"n":k=D.w||String(D.v||0),I["office:value-type"]="float",I["office:value"]=D.v||0;break;case"s":case"str":k=D.v==null?"":D.v,I["office:value-type"]="string";break;case"d":k=D.w||os(D.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=os(D.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var _=t(k);if(D.l&&D.l.Target){var N=D.l.Target;N=N.charAt(0)=="#"?"#"+phe(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),_=Dt("text:a",_,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+Dt("table:table-cell",Dt("text:p",_,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;sf(h),h.ods=o;var p=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ta],u=Jg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Jg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(uP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function b7(t,e){if(e.bookType=="fods")return t6(t,e);var n=W5(),r="",s=[],a=[];return r="mimetype",jn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",jn(n,r,t6(t,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",jn(n,r,$pe(t,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",jn(n,r,ta+uP()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",jn(n,r,Ele(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",jn(n,r,ble(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function yh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function J_(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Kr(hf(t))}function Ype(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Go(hu(t))}function Jpe(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function of(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function n6(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Xpe(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function Zpe(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=n>=0?0:128}function ax(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Ur(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Ls(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Cr(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=ax(t,n),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=ax(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function Za(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(Ur(r*8+s.type)),s.type==2&&e.push(Ur(s.data.length)),e.push(s.data))})}),of(e)}function w4(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function Cl(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=ax(t,r),a=Cr(t.slice(r[0],r[0]+s));r[0]+=s;var i={id:Ls(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Cr(o.data),u=Ls(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+u)}),r[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=Ls(a[3][0].data)>>>0>0),n.push(i)}return n}function m0(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Ur(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Ur(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Ur(i.data.length)}],r[2].push({data:Za(i.meta),type:2})});var a=Za(r);e.push(Ur(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),of(e)}function ege(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=ax(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}s.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(u=(e[n[0]++]>>2)+1,a==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[of(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=of(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function El(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(ege(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return of(e)}function p0(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var a=Ur(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return of(e)}function tge(t,e,n,r){var s=yh(t),a=s.getUint32(4,!0),i=(r>1?12:8)+n6(a&(r>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=n6(a&(r>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:n[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function nge(t,e,n){var r=yh(t),s=r.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=Xpe(t,a),a+=16),s&2&&(u=r.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=r.getUint32(a,!0),a+=4),s&16&&(i=r.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function KC(t,e){var n=new Uint8Array(32),r=yh(n),s=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,Zpe(n,s,t.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,s)}function WC(t,e){var n=new Uint8Array(32),r=yh(n),s=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,s)}function rge(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return tge(t,e,n,t[0]);case 5:return nge(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ti(t){var e=Cr(t);return ax(e[1][0].data)}function r6(t,e){var n=Cr(e.data),r=Ls(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(i){var o=Cr(i.data),l=Ls(o[1][0].data)>>>0;switch(r){case 1:a[l]=J_(o[3][0].data);break;case 8:{var u=t[Ti(o[9][0].data)][0],d=Cr(u.data),h=t[Ti(d[1][0].data)][0],p=Ls(h.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=Cr(h.data);a[l]=g[3].map(function(b){return J_(b.data)}).join("")}break}}),a}function sge(t,e){var n,r,s,a,i,o,l,u,d,h,p,g,b,w,C=Cr(t),T=Ls(C[1][0].data)>>>0,I=Ls(C[2][0].data)>>>0,k=((r=(n=C[8])==null?void 0:n[0])==null?void 0:r.data)&&Ls(C[8][0].data)>0||!1,R,D;if((a=(s=C[7])==null?void 0:s[0])!=null&&a.data&&e!=0)R=(o=(i=C[7])==null?void 0:i[0])==null?void 0:o.data,D=(u=(l=C[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=C[4])==null?void 0:d[0])!=null&&h.data&&e!=1)R=(g=(p=C[4])==null?void 0:p[0])==null?void 0:g.data,D=(w=(b=C[3])==null?void 0:b[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var P=k?4:1,_=yh(R),N=[],B=0;B<R.length/2;++B){var O=_.getUint16(B*2,!0);O<65535&&N.push([B,O])}if(N.length!=I)throw"Expected ".concat(I," cells, found ").concat(N.length);var M=[];for(B=0;B<N.length-1;++B)M[N[B][0]]=D.subarray(N[B][1]*P,N[B+1][1]*P);return N.length>=1&&(M[N[N.length-1][0]]=D.subarray(N[N.length-1][1]*P)),{R:T,cells:M}}function age(t,e){var n,r=Cr(e.data),s=(n=r==null?void 0:r[7])!=null&&n[0]?Ls(r[7][0].data)>>>0>0?1:0:-1,a=w4(r[5],function(i){return sge(i,s)});return{nrows:Ls(r[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function ige(t,e,n){var r,s=Cr(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Ls(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Ls(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=Rn(a);var i=Cr(s[4][0].data),o=r6(t,t[Ti(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?r6(t,t[Ti(i[17][0].data)][0]):[],u=Cr(i[3][0].data),d=0;u[1].forEach(function(h){var p=Cr(h.data),g=t[Ti(p[2][0].data)][0],b=Ls(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var w=age(t,g);w.data.forEach(function(C,T){C.forEach(function(I,k){var R=wn({r:d+T,c:k}),D=rge(I,o,l);D&&(n[R]=D)})}),d+=w.nrows})}function oge(t,e){var n=Cr(e.data),r={"!ref":"A1"},s=t[Ti(n[2][0].data)],a=Ls(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return ige(t,s[0],r),r}function lge(t,e){var n,r=Cr(e.data),s={name:(n=r[1])!=null&&n[0]?J_(r[1][0].data):"",sheets:[]},a=w4(r[2],Ti);return a.forEach(function(i){t[i].forEach(function(o){var l=Ls(o.meta[1][0].data);l==6e3&&s.sheets.push(oge(t,o))})}),s}function cge(t,e){var n=T4(),r=Cr(e.data),s=w4(r[1],Ti);if(s.forEach(function(a){t[a].forEach(function(i){var o=Ls(i.meta[1][0].data);if(o==2){var l=lge(t,i);l.sheets.forEach(function(u,d){B4(n,u,d==0?l.name:l.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function $C(t){var e,n,r,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=El(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Cl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(r=(n=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&Ls(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=Ls(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return cge(a,o)}function uge(t,e,n){var r,s,a,i;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Ls(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=yh(t[7][0].data),d=0,h=[],p=yh(t[4][0].data),g=0,b=[],w=0;w<e.length;++w){if(e[w]==null){u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535);continue}u.setUint16(w*2,d,!0),p.setUint16(w*2,g,!0);var C,T;switch(typeof e[w]){case"string":C=KC({t:"s",v:e[w]},n),T=WC({t:"s",v:e[w]},n);break;case"number":C=KC({t:"n",v:e[w]},n),T=WC({t:"n",v:e[w]},n);break;case"boolean":C=KC({t:"b",v:e[w]},n),T=WC({t:"b",v:e[w]},n);break;default:throw new Error("Unsupported value "+e[w])}h.push(C),d+=C.length,b.push(T),g+=T.length,++l}for(t[2][0].data=Ur(l);w<t[7][0].data.length/2;++w)u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535,!0);return t[6][0].data=of(h),t[3][0].data=of(b),l}function Age(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=wo(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Rn(r)));var a=cy(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},l=[],u=ln.read(e.numbers,{type:"base64"});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0],ne=W[1];if(J.type==2&&J.name.match(/\.iwa/)){var ie=J.content,de=El(ie),me=Cl(de);me.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:ne,type:Ls(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(W,J){return W-J});var d=l.filter(function(W){return W>1}).map(function(W){return[W,Ur(W)]});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0];if(W[1],!!J.name.match(/\.iwa/)){var ne=Cl(El(J.content));ne.forEach(function(ie){ie.messages.forEach(function(de){d.forEach(function(me){ie.messages.some(function(xe){return Ls(xe.meta[1][0].data)!=11006&&Jpe(xe.data,me[1])})&&o[me[0]].deps.push(ie.id)})})})}});for(var h=ln.find(u,o[1].location),p=Cl(El(h.content)),g,b=0;b<p.length;++b){var w=p[b];w.id==1&&(g=w)}var C=Ti(Cr(g.messages[0].data)[1][0].data);for(h=ln.find(u,o[C].location),p=Cl(El(h.content)),b=0;b<p.length;++b)w=p[b],w.id==C&&(g=w);for(C=Ti(Cr(g.messages[0].data)[2][0].data),h=ln.find(u,o[C].location),p=Cl(El(h.content)),b=0;b<p.length;++b)w=p[b],w.id==C&&(g=w);for(C=Ti(Cr(g.messages[0].data)[2][0].data),h=ln.find(u,o[C].location),p=Cl(El(h.content)),b=0;b<p.length;++b)w=p[b],w.id==C&&(g=w);var T=Cr(g.messages[0].data);{T[6][0].data=Ur(r.e.r+1),T[7][0].data=Ur(r.e.c+1);var I=Ti(T[46][0].data),k=ln.find(u,o[I].location),R=Cl(El(k.content));{for(var D=0;D<R.length&&R[D].id!=I;++D);if(R[D].id!=I)throw"Bad ColumnRowUIDMapArchive";var P=Cr(R[D].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var _=0;_<=r.e.c;++_){var N=[];N[1]=N[2]=[{type:0,data:Ur(_+420690)}],P[1].push({type:2,data:Za(N)}),P[2].push({type:0,data:Ur(_)}),P[3].push({type:0,data:Ur(_)})}P[4]=[],P[5]=[],P[6]=[];for(var B=0;B<=r.e.r;++B)N=[],N[1]=N[2]=[{type:0,data:Ur(B+726270)}],P[4].push({type:2,data:Za(N)}),P[5].push({type:0,data:Ur(B)}),P[6].push({type:0,data:Ur(B)});R[D].messages[0].data=Za(P)}k.content=p0(m0(R)),k.size=k.content.length,delete T[46];var O=Cr(T[4][0].data);{O[7][0].data=Ur(r.e.r+1);var M=Cr(O[1][0].data),L=Ti(M[2][0].data);k=ln.find(u,o[L].location),R=Cl(El(k.content));{if(R[0].id!=L)throw"Bad HeaderStorageBucket";var H=Cr(R[0].messages[0].data);for(B=0;B<a.length;++B){var G=Cr(H[2][0].data);G[1][0].data=Ur(B),G[4][0].data=Ur(a[B].length),H[2][B]={type:H[2][0].type,data:Za(G)}}R[0].messages[0].data=Za(H)}k.content=p0(m0(R)),k.size=k.content.length;var oe=Ti(O[2][0].data);k=ln.find(u,o[oe].location),R=Cl(El(k.content));{if(R[0].id!=oe)throw"Bad HeaderStorageBucket";for(H=Cr(R[0].messages[0].data),_=0;_<=r.e.c;++_)G=Cr(H[2][0].data),G[1][0].data=Ur(_),G[4][0].data=Ur(r.e.r+1),H[2][_]={type:H[2][0].type,data:Za(G)};R[0].messages[0].data=Za(H)}k.content=p0(m0(R)),k.size=k.content.length;var q=Ti(O[4][0].data);(function(){for(var W=ln.find(u,o[q].location),J=Cl(El(W.content)),ne,ie=0;ie<J.length;++ie){var de=J[ie];de.id==q&&(ne=de)}var me=Cr(ne.messages[0].data);{me[3]=[];var xe=[];i.forEach(function(ae,Fe){xe[1]=[{type:0,data:Ur(Fe)}],xe[2]=[{type:0,data:Ur(1)}],xe[3]=[{type:2,data:Ype(ae)}],me[3].push({type:2,data:Za(xe)})})}ne.messages[0].data=Za(me);var Se=m0(J),ge=p0(Se);W.content=ge,W.size=W.content.length})();var X=Cr(O[3][0].data);{var re=X[1][0];delete X[2];var K=Cr(re.data);{var Z=Ti(K[2][0].data);(function(){for(var W=ln.find(u,o[Z].location),J=Cl(El(W.content)),ne,ie=0;ie<J.length;++ie){var de=J[ie];de.id==Z&&(ne=de)}var me=Cr(ne.messages[0].data);{delete me[6],delete X[7];var xe=new Uint8Array(me[5][0].data);me[5]=[];for(var Se=0,ge=0;ge<=r.e.r;++ge){var ae=Cr(xe);Se+=uge(ae,a[ge],i),ae[1][0].data=Ur(ge),me[5].push({data:Za(ae),type:2})}me[1]=[{type:0,data:Ur(r.e.c+1)}],me[2]=[{type:0,data:Ur(r.e.r+1)}],me[3]=[{type:0,data:Ur(Se)}],me[4]=[{type:0,data:Ur(r.e.r+1)}]}ne.messages[0].data=Za(me);var Fe=m0(J),et=p0(Fe);W.content=et,W.size=W.content.length})()}re.data=Za(K)}O[3][0].data=Za(X)}T[4][0].data=Za(O)}g.messages[0].data=Za(T);var Ae=m0(p),j=p0(Ae);return h.content=j,h.size=h.content.length,u}function C7(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function b4(t){C7([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function C4(t){C7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function dge(t){return Jn.WS.indexOf(t)>-1?"sheet":t==Jn.CS?"chart":t==Jn.DS?"dialog":t==Jn.MS?"macro":t&&t.length?t:"sheet"}function fge(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,dge(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function hge(t,e,n,r,s,a,i,o,l,u,d,h){try{a[r]=Sg(zo(t,n,!0),e);var p=da(t,e),g;switch(o){case"sheet":g=Lme(p,e,s,l,a[r],u,d,h);break;case"chart":if(g=Mme(p,e,s,l,a[r],u,d,h),!g||!g["!drawel"])break;var b=rg(g["!drawel"].Target,e),w=Zg(b),C=Cde(zo(t,b,!0),Sg(zo(t,w,!0),b)),T=rg(C,b),I=Zg(T);g=ume(zo(t,T,!0),T,l,Sg(zo(t,I,!0),T),u,g);break;case"macro":g=Pme(p,e,s,l,a[r],u,d,h);break;case"dialog":g=jme(p,e,s,l,a[r],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=g;var k=[];a&&a[r]&&Ms(a[r]).forEach(function(R){var D="";if(a[r][R].Type==Jn.CMNT){D=rg(a[r][R].Target,e);var P=Vme(da(t,D,!0),D,l);if(!P||!P.length)return;HF(g,P,!1)}a[r][R].Type==Jn.TCMNT&&(D=rg(a[r][R].Target,e),k=k.concat(_de(da(t,D,!0),l)))}),k&&k.length&&HF(g,k,!0,l.people||[])}catch(R){if(l.WTF)throw R}}function wl(t){return t.charAt(0)=="/"?t.slice(1):t}function mge(t,e){if(Vm(),e=e||{},b4(e),_l(t,"META-INF/manifest.xml")||_l(t,"objectdata.xml"))return ZF(t,e);if(_l(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof $C<"u"){if(t.FileIndex)return $C(t);var n=ln.utils.cfb_new();return cF(t).forEach(function(G){jn(n,G,Soe(t,G))}),$C(n)}throw new Error("Unsupported NUMBERS file")}if(!_l(t,"[Content_Types].xml"))throw _l(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):_l(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=cF(t),s=vle(zo(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",da(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!da(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Tg=[],s.sst)try{Tg=Hme(da(t,wl(s.sst)),s.sst,e)}catch(G){if(e.WTF)throw G}e.cellStyles&&s.themes.length&&(l=Qme(zo(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=Ome(da(t,wl(s.style)),s.style,l,e))}s.links.map(function(G){try{var oe=Sg(zo(t,Zg(wl(G))),G);return zme(da(t,wl(G)),oe,G,e)}catch{}});var d=Ume(da(t,wl(s.workbooks[0])),s.workbooks[0],e),h={},p="";s.coreprops.length&&(p=da(t,wl(s.coreprops[0]),!0),p&&(h=AP(p)),s.extprops.length!==0&&(p=da(t,wl(s.extprops[0]),!0),p&&Sle(p,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(p=zo(t,wl(s.custprops[0]),!0),p&&(g=Ble(p,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(oe){return oe.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var w={};e.bookDeps&&s.calcchain&&(w=Gme(da(t,wl(s.calcchain)),s.calcchain));var C=0,T={},I,k;{var R=d.Sheets;h.Worksheets=R.length,h.SheetNames=[];for(var D=0;D!=R.length;++D)h.SheetNames[D]=R[D].name}var P=a?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),N=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");_l(t,N)||(N="xl/_rels/workbook."+P+".rels");var B=Sg(zo(t,N,!0),N.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=qme(da(t,wl(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Tde(da(t,wl(s.people[0])),e)),B&&(B=fge(B,d.Sheets));var O=da(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(C=0;C!=h.Worksheets;++C){var M="sheet";if(B&&B[C]?(I="xl/"+B[C][1].replace(/[\/]?xl\//,""),_l(t,I)||(I=B[C][1]),_l(t,I)||(I=N.replace(/_rels\/.*$/,"")+B[C][1]),M=B[C][2]):(I="xl/worksheets/sheet"+(C+1-O)+"."+P,I=I.replace(/sheet0\./,"sheet.")),k=I.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(C!=e.sheets)continue e;break;case"string":if(h.SheetNames[C].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var L=!1,H=0;H!=e.sheets.length;++H)typeof e.sheets[H]=="number"&&e.sheets[H]==C&&(L=1),typeof e.sheets[H]=="string"&&e.sheets[H].toLowerCase()==h.SheetNames[C].toLowerCase()&&(L=1);if(!L)continue e}}hge(t,I,k,h.SheetNames[C],C,T,i,M,e,d,l,u)}return b={Directory:s,Workbook:d,Props:h,Custprops:g,Deps:w,Sheets:i,SheetNames:h.SheetNames,Strings:Tg,Styles:u,Themes:l,SSF:ls(gn)},e&&e.bookFiles&&(t.files?(b.keys=r,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(G,oe){G=G.replace(/^Root Entry[\/]/,""),b.keys.push(G),b.files[G]=t.FileIndex[oe]}))),e&&e.bookVBA&&(s.vba.length>0?b.vbaraw=da(t,wl(s.vba[0]),!0):s.defaults&&s.defaults.bin===Ude&&(b.vbaraw=da(t,"xl/vbaProject.bin",!0))),b}function pge(t,e){var n=e||{},r="Workbook",s=ln.find(t,r);try{if(r="/!DataSpaces/Version",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(que(s.content),r="/!DataSpaces/DataSpaceMap",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=Wue(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=$ue(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);Jue(s.content)}catch{}if(r="/EncryptionInfo",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=Xue(s.content);if(r="/EncryptedPackage",s=ln.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function gge(t,e){return e.bookType=="ods"?b7(t,e):e.bookType=="numbers"?Age(t,e):e.bookType=="xlsb"?xge(t,e):vge(t,e)}function xge(t,e){V0=1024,t&&!t.SSF&&(t.SSF=ls(gn)),t&&t.SSF&&(Vm(),mw(t.SSF),e.revssf=gw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Bg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=YP.indexOf(e.bookType)>-1,s=l4();C4(e=e||{});var a=W5(),i="",o=0;if(e.cellXfs=[],pf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",jn(a,i,dP(t.Props,e)),s.coreprops.push(i),Lr(e.rels,2,i,Jn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,jn(a,i,mP(t.Props)),s.extprops.push(i),Lr(e.rels,3,i,Jn.EXT_PROPS),t.Custprops!==t.Props&&Ms(t.Custprops||{}).length>0&&(i="docProps/custom.xml",jn(a,i,pP(t.Custprops)),s.custprops.push(i),Lr(e.rels,4,i,Jn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,jn(a,i,Wme(o-1,i,e,t,d)),s.sheets.push(i),Lr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Jn.WS[0])}if(h){var g=h["!comments"],b=!1,w="";g&&g.length>0&&(w="xl/comments"+o+"."+n,jn(a,w,Jme(g,w)),s.comments.push(w),Lr(d,-1,"../comments"+o+"."+n,Jn.CMNT),b=!0),h["!legacy"]&&b&&jn(a,"xl/drawings/vmlDrawing"+o+".vml",WP(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&jn(a,Zg(i),im(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,jn(a,i,Yme(e.Strings,i,e)),s.strs.push(i),Lr(e.wbrels,-1,"sharedStrings."+n,Jn.SST)),i="xl/workbook."+n,jn(a,i,Kme(t,i)),s.workbooks.push(i),Lr(e.rels,1,i,Jn.WB),i="xl/theme/theme1.xml",jn(a,i,h4(t.Themes,e)),s.themes.push(i),Lr(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),i="xl/styles."+n,jn(a,i,$me(t,i,e)),s.styles.push(i),Lr(e.wbrels,-1,"styles."+n,Jn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",jn(a,i,t.vbaraw),s.vba.push(i),Lr(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),i="xl/metadata."+n,jn(a,i,Xme(i)),s.metadata.push(i),Lr(e.wbrels,-1,"metadata."+n,Jn.XLMETA),jn(a,"[Content_Types].xml",cP(s,e)),jn(a,"_rels/.rels",im(e.rels)),jn(a,"xl/_rels/workbook."+n+".rels",im(e.wbrels)),delete e.revssf,delete e.ssf,a}function vge(t,e){V0=1024,t&&!t.SSF&&(t.SSF=ls(gn)),t&&t.SSF&&(Vm(),mw(t.SSF),e.revssf=gw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Bg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=YP.indexOf(e.bookType)>-1,s=l4();C4(e=e||{});var a=W5(),i="",o=0;if(e.cellXfs=[],pf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",jn(a,i,dP(t.Props,e)),s.coreprops.push(i),Lr(e.rels,2,i,Jn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,jn(a,i,mP(t.Props)),s.extprops.push(i),Lr(e.rels,3,i,Jn.EXT_PROPS),t.Custprops!==t.Props&&Ms(t.Custprops||{}).length>0&&(i="docProps/custom.xml",jn(a,i,pP(t.Custprops)),s.custprops.push(i),Lr(e.rels,4,i,Jn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,jn(a,i,o7(o-1,e,t,h)),s.sheets.push(i),Lr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Jn.WS[0])}if(p){var b=p["!comments"],w=!1,C="";if(b&&b.length>0){var T=!1;b.forEach(function(I){I[1].forEach(function(k){k.T==!0&&(T=!0)})}),T&&(C="xl/threadedComments/threadedComment"+o+"."+n,jn(a,C,Sde(b,d,e)),s.threadedcomments.push(C),Lr(h,-1,"../threadedComments/threadedComment"+o+"."+n,Jn.TCMNT)),C="xl/comments"+o+"."+n,jn(a,C,$P(b)),s.comments.push(C),Lr(h,-1,"../comments"+o+"."+n,Jn.CMNT),w=!0}p["!legacy"]&&w&&jn(a,"xl/drawings/vmlDrawing"+o+".vml",WP(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&jn(a,Zg(i),im(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,jn(a,i,LP(e.Strings,e)),s.strs.push(i),Lr(e.wbrels,-1,"sharedStrings."+n,Jn.SST)),i="xl/workbook."+n,jn(a,i,d7(t)),s.workbooks.push(i),Lr(e.rels,1,i,Jn.WB),i="xl/theme/theme1.xml",jn(a,i,h4(t.Themes,e)),s.themes.push(i),Lr(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),i="xl/styles."+n,jn(a,i,GP(t,e)),s.styles.push(i),Lr(e.wbrels,-1,"styles."+n,Jn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",jn(a,i,t.vbaraw),s.vba.push(i),Lr(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),i="xl/metadata."+n,jn(a,i,KP()),s.metadata.push(i),Lr(e.wbrels,-1,"metadata."+n,Jn.XLMETA),d.length>1&&(i="xl/persons/person.xml",jn(a,i,Bde(d)),s.people.push(i),Lr(e.wbrels,-1,"persons/person.xml",Jn.PEOPLE)),jn(a,"[Content_Types].xml",cP(s,e)),jn(a,"_rels/.rels",im(e.rels)),jn(a,"xl/_rels/workbook."+n+".rels",im(e.wbrels)),delete e.revssf,delete e.ssf,a}function E4(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Yo(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function yge(t,e){return ln.find(t,"EncryptedPackage")?pge(t,e):p7(t,e)}function wge(t,e){var n,r=t,s=e||{};return s.type||(s.type=qn&&Buffer.isBuffer(t)?"buffer":"base64"),n=PM(r,s),mge(n,s)}function E7(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return $_(t.slice(n),e);default:break e}return Cm.to_workbook(t,e)}function bge(t,e){var n="",r=E4(t,e);switch(e.type){case"base64":n=Yo(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=ph(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Kr(n)),e.type="binary",E7(n,e)}function Cge(t,e){var n=t;return e.type=="base64"&&(n=Yo(n)),n=Kg.utils.decode(1200,n.slice(2),"str"),e.type="binary",E7(n,e)}function Ege(t){return t.match(/[^\x00-\x7F]/)?hu(t):t}function YC(t,e,n,r){return r?(n.type="string",Cm.to_workbook(t,n)):Cm.to_workbook(e,n)}function ix(t,e){V5();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return ix(new Uint8Array(t),(n=ls(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),lm={},n.dateNF&&(lm.dateNF=n.dateNF),n.type||(n.type=qn&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=qn?"buffer":"binary",r=xoe(t),typeof Uint8Array<"u"&&!qn&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=Ege(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=ls(n),n.type="array",ix(G5(r),n)}switch((s=E4(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return yge(ln.read(r,n),n);break;case 9:if(s[1]<=8)return p7(r,n);break;case 60:return $_(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Nue(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return DP.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?wge(r,n):YC(t,r,n,a);case 239:return s[3]===60?$_(r,n):YC(t,r,n,a);case 255:if(s[1]===254)return Cge(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return sh.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return sh.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return W_.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return QP.to_workbook(r,n);break;case 10:case 13:case 32:return bge(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Bue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?W_.to_workbook(r,n):YC(t,r,n,a)}function _7(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Rx(e.file,ln.write(t,{type:qn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ln.write(t,e)}function _ge(t,e){var n=ls(e||{}),r=gge(t,n);return Sge(r,n)}function Sge(t,e){var n={},r=qn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?ln.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(hw(s))}return e.password&&typeof encrypt_agile<"u"?_7(encrypt_agile(s,e.password),e):e.type==="file"?Rx(e.file,s):e.type=="string"?Kr(s):s}function Tge(t,e){var n=e||{},r=Epe(t,n);return _7(r,n)}function uu(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Wg(hu(r));case"binary":return hu(r);case"string":return t;case"file":return Rx(e.file,r,"utf8");case"buffer":return qn?FA(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):uu(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Bge(t,e){switch(e.type){case"base64":return Wg(t);case"binary":return t;case"string":return t;case"file":return Rx(e.file,t,"binary");case"buffer":return qn?FA(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function pv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Wg(n):e.type=="string"?Kr(n):n;case"file":return Rx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function S7(t,e){V5(),yme(t);var n=ls(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=S7(t,n);return n.type="array",hw(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return uu(gpe(t,n),n);case"slk":case"sylk":return uu(RP.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return uu(x7(t.Sheets[t.SheetNames[s]],n),n);case"txt":return Bge(T7(t.Sheets[t.SheetNames[s]],n),n);case"csv":return uu(S4(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return uu(DP.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return pv(W_.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return uu(Cm.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return uu(QP.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return uu(UP.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return uu(b7(t,n),n);case"wk1":return pv(sh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return pv(sh.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),pv(g7(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Tge(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return _ge(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Nge(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function _4(t,e,n){var r={};return r.type="file",r.file=e,Nge(r),S7(t,r)}function kge(t,e,n,r,s,a,i,o){var l=ea(n),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:n,enumerable:!1})}catch{p.__rowNum__=n}else p.__rowNum__=n;if(!i||t[n])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[n][g]:t[r[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;a[g]!=null&&(p[a[g]]=u);continue}var w=b.v;switch(b.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(a[g]!=null){if(w==null)if(b.t=="e"&&w===null)p[a[g]]=null;else if(u!==void 0)p[a[g]]=u;else if(d&&w===null)p[a[g]]=null;else continue;else p[a[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?w:_A(b,w,o);w!=null&&(h=!1)}}return{row:p,isempty:h}}function cy(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof d){case"string":l=pr(d);break;case"number":l=pr(t["!ref"]),l.s.r=d;break;default:l=d}r>0&&(s=0);var h=ea(l.s.r),p=[],g=[],b=0,w=0,C=Array.isArray(t),T=l.s.r,I=0,k={};C&&!t[T]&&(t[T]=[]);var R=u.skipHidden&&t["!cols"]||[],D=u.skipHidden&&t["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(R[I]||{}).hidden)switch(p[I]=ws(I),n=C?t[T][I]:t[p[I]+h],r){case 1:a[I]=I-l.s.c;break;case 2:a[I]=p[I];break;case 3:a[I]=u.header[I-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=_A(n,null,u),w=k[i]||0,!w)k[i]=1;else{do o=i+"_"+w++;while(k[o]);k[i]=w,k[o]=1}a[I]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(D[T]||{}).hidden){var P=kge(t,l,T,p,r,a,C,u);(P.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=P.row)}return g.length=b,g}var s6=/"/g;function Ige(t,e,n,r,s,a,i,o){for(var l=!0,u=[],d="",h=ea(n),p=e.s.c;p<=e.e.c;++p)if(r[p]){var g=o.dense?(t[n]||[])[p]:t[r[p]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:_A(g,null,o));for(var b=0,w=0;b!==d.length;++b)if((w=d.charCodeAt(b))===s||w===a||w===34||o.forceQuotes){d='"'+d.replace(s6,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(s6,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function S4(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=pr(t["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];r.dense=Array.isArray(t);for(var p=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(h[b]=ws(b));for(var w=0,C=s.s.r;C<=s.e.r;++C)(g[C]||{}).hidden||(d=Ige(t,s,C,h,i,l,a,r),d!=null&&(r.strip&&(d=d.replace(u,"")),(d||r.blankrows!==!1)&&n.push((w++?o:"")+d)));return delete r.dense,n.join("")}function T7(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=S4(t,e);return n}function Fge(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=pr(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=ws(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=ea(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,n=u?(t[d]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function B7(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?bs(r.origin):r.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=pr(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var p=r.header||[],g=0;e.forEach(function(w,C){Ms(w).forEach(function(T){(g=p.indexOf(T))==-1&&(p[g=p.length]=T);var I=w[T],k="z",R="",D=wn({c:o+g,r:i+C+s});u=ox(a,D),I&&typeof I=="object"&&!(I instanceof Date)?a[D]=I:(typeof I=="number"?k="n":typeof I=="boolean"?k="b":typeof I=="string"?k="s":I instanceof Date?(k="d",r.cellDates||(k="n",I=Na(I)),R=r.dateNF||gn[14]):I===null&&r.nullError&&(k="e",I=0),u?(u.t=k,u.v=I,delete u.w,delete u.R,R&&(u.z=R)):a[D]=u={t:k,v:I},R&&(u.z=R))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var b=ea(i);if(s)for(g=0;g<p.length;++g)a[ws(g+o)+b]={t:"s",v:p[g]};return a["!ref"]=Rn(d),a}function Rge(t,e){return B7(null,t,e)}function ox(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=bs(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ox(t,wn(e)):ox(t,wn({r:e,c:n||0}))}function Dge(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function T4(){return{SheetNames:[],Sheets:{}}}function B4(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=i+s)!=-1;++s);}if(A7(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function Uge(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=Dge(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function Lge(t,e){return t.z=e,t}function N7(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function Mge(t,e,n){return N7(t,"#"+e,n)}function Pge(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function jge(t,e,n,r){for(var s=typeof e!="string"?e:pr(e),a=typeof e=="string"?e:Rn(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=ox(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return t}var kl={encode_col:ws,encode_row:ea,encode_cell:wn,encode_range:Rn,decode_col:n4,decode_row:t4,split_cell:Yoe,decode_cell:bs,decode_range:wo,format_cell:_A,sheet_add_aoa:nP,sheet_add_json:B7,sheet_add_dom:v7,aoa_to_sheet:Gm,json_to_sheet:Rge,table_to_sheet:y7,table_to_book:qpe,sheet_to_csv:S4,sheet_to_txt:T7,sheet_to_json:cy,sheet_to_html:x7,sheet_to_formulae:Fge,sheet_to_row_object_array:cy,sheet_get_cell:ox,book_new:T4,book_append_sheet:B4,book_set_sheet_visibility:Uge,cell_set_number_format:Lge,cell_set_hyperlink:N7,cell_set_internal_link:Mge,cell_add_comment:Pge,sheet_set_array_formula:jge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Oge=async()=>{try{const t=df(Wi(ts,"apiLogs"),ff("timestamp","desc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},Qge=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let r=0,s=0;const a=[];for(const l of n)try{const u=Wi(ts,l),d=await Eu(u),h=d.size;r+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let p=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&p++}),s+=p}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Wi(ts,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=df(l,e8("timestamp",">=",u.toISOString()),ff("timestamp","desc")),h=await Eu(d),p={};h.docs.forEach(g=>{const b=g.data(),w=new Date(b.timestamp).toLocaleDateString("es-CL");p[w]=(p[w]||0)+1}),Object.entries(p).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:r,collectionsActivity:a.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},a6=500,g0=({title:t,value:e,description:n,alert:r})=>A.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),A.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),JC=({title:t,data:e,colorClass:n})=>{const r=ee.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),A.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),A.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:A.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/r*100}%`}})})]},s.label)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Hge=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(!1),[s,a]=ee.useState(null),[i,o]=ee.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=ee.useCallback(async()=>{r(!0);try{const g=await Oge();e(g),a(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),a("No se pudieron cargar los logs de API desde la nube.")}finally{r(!1)}},[]),u=ee.useCallback(async()=>{try{const g=await Qge();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}},[]);ee.useEffect(()=>{l(),u();const g=setInterval(()=>{l(),u()},300*1e3);return()=>clearInterval(g)},[l,u]);const{stats:d,userStats:h,moduleStats:p}=ee.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),w=b-g.getDay()*24*60*60*1e3,C=new Date(g.getFullYear(),g.getMonth(),1).getTime(),T={today:0,week:0,month:0},I={},k={};t.forEach(P=>{const _=new Date(P.timestamp).getTime();_>=b&&T.today++,_>=w&&T.week++,_>=C&&T.month++,I[P.userId]||(I[P.userId]={email:P.userEmail,today:0,month:0,total:0}),I[P.userId].total++,_>=b&&I[P.userId].today++,_>=C&&I[P.userId].month++,k[P.module]=(k[P.module]||0)+1});const R=Object.values(I).sort((P,_)=>_.total-P.total),D=Object.entries(k).map(([P,_])=>({label:P,value:_})).sort((P,_)=>_.value-P.value);return{stats:T,userStats:R,moduleStats:D}},[t]);return A.jsxs("div",{className:"space-y-8",children:[n&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas desde la nube..."}),s&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsx(g0,{title:"Llamadas Hoy",value:n?"--":d.today,description:`Límite recomendado: ${a6}`,alert:d.today>a6}),A.jsx(g0,{title:"Llamadas esta Semana",value:n?"--":d.week}),A.jsx(g0,{title:"Llamadas este Mes",value:n?"--":d.month})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[A.jsx(JC,{title:"Uso por Módulo",data:p,colorClass:"bg-sky-500"}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),A.jsx("div",{className:"overflow-x-auto max-h-96",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&h.length>0?h.map(g=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),A.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),A.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),A.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:n?"Cargando...":"No hay registros."})})})]})})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore en tiempo real."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsx(g0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),A.jsx(g0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),A.jsx(g0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[A.jsx(JC,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),A.jsx(JC,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},Cw=Wi(ts,"usuarios");async function k7(){return(await Eu(Cw)).docs.map(e=>({id:e.id,...e.data()}))}async function XC(t){await PW($i(Cw,t.email),t)}async function i6(t,e){await kx($i(Cw,t),e)}async function Vge(t){await Mm($i(Cw,t))}const o6=Object.values(en),Gge=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.371-2.371A6 6 0 0115 7zm-3.707 5.293L6 17.586V20h2.414l5.293-5.293a1 1 0 00-1.414-1.414z"})}),l6=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},zge=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(!1),[s,a]=ee.useState("Usuarios"),[i,o]=ee.useState({nombreCompleto:"",email:"",rut:"",profile:en.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[p,g]=ee.useState(""),[b,w]=ee.useState(""),[C,T]=ee.useState(null),[I,k]=ee.useState(null),[R,D]=ee.useState(null),P=ee.useCallback(async()=>{r(!0);try{const K=await k7();e(K)}catch(K){console.error("Error al cargar usuarios desde Firestore",K),T("No se pudieron cargar los usuarios desde la nube.")}finally{r(!1)}},[]);ee.useEffect(()=>{P()},[P]);const _=ee.useCallback(K=>{const{name:Z,value:Ae}=K.target;o(j=>({...j,[Z]:Ae,curso:Z==="profile"&&Ae!==en.ESTUDIANTE?"":j.curso}))},[]),N=ee.useCallback((K,Z)=>{o(Ae=>{const j=Ae[K]||[],W=j.includes(Z)?j.filter(J=>J!==Z):[...j,Z];return{...Ae,[K]:W}})},[]),B=ee.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:en.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),T(null)},[]),O=ee.useCallback(async K=>{var Se;K.preventDefault();const{nombreCompleto:Z,email:Ae,profile:j,curso:W,cursos:J,asignaturas:ne}=i;if(!Z.trim()||!Ae.trim()){T("Nombre Completo y Email son obligatorios.");return}if(j===en.ESTUDIANTE&&!W){T('El campo "Curso" es obligatorio para el perfil de Estudiante.');return}const ie=j===en.ESTUDIANTE?l6(W||""):void 0,de=j===en.PROFESORADO?J:void 0,me=j===en.PROFESORADO?ne:void 0,xe=(Se=i.password)!=null&&Se.trim()?i.password.trim():void 0;try{l?await i6(i.email,{...i,password:xe,curso:ie,cursos:de,asignaturas:me}):await XC({...i,password:xe,curso:ie,cursos:de,asignaturas:me}),await P(),B()}catch(ge){console.error("Error al guardar usuario:",ge),T("Error al guardar el usuario en la nube.")}},[i,l,P,B]),M=ee.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),u(K.id),o({nombreCompleto:K.nombreCompleto,email:K.email,rut:K.rut,profile:K.profile,password:"",curso:K.curso,cursos:K.cursos||[],asignaturas:K.asignaturas||[]})},[]),L=ee.useCallback(async K=>{if(window.confirm("¿Está seguro de que desea eliminar este usuario?"))try{await Vge(K),await P()}catch(Z){console.error("Error al eliminar usuario:",Z),T("No se pudo borrar el usuario en la nube.")}},[P]),H=async()=>{if(window.confirm(`ADVERTENCIA: Esta acción es irreversible.

¿Está seguro de que desea restablecer las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta')?

Cualquier contraseña personalizada será eliminada.`))try{await Promise.all(t.map(Z=>i6(Z.email,{password:void 0}))),await P(),alert("Todas las contraseñas han sido restablecidas exitosamente a 'recoleta'.")}catch(Z){console.error("Error al restablecer contraseñas:",Z),T("Error al restablecer contraseñas en la nube.")}},G=ee.useMemo(()=>Array.from(new Set(t.filter(K=>K.profile===en.ESTUDIANTE&&K.curso).map(K=>K.curso))).sort(),[t]),oe=ee.useMemo(()=>t.filter(K=>(d===""||K.nombreCompleto.toLowerCase().includes(d.toLowerCase())||K.email.toLowerCase().includes(d.toLowerCase()))&&(p===""||K.profile===p)&&(b===""||K.curso===b)),[t,d,p,b]),q=async K=>{var j;const Z=(j=K.target.files)==null?void 0:j[0];if(!Z)return;k({message:"Procesando archivo de estudiantes...",isError:!1});const Ae=new FileReader;Ae.onload=async W=>{var J;try{const ne=new Uint8Array((J=W.target)==null?void 0:J.result),ie=ix(ne,{type:"array"}),de=ie.SheetNames[0],me=ie.Sheets[de],xe=kl.sheet_to_json(me);if(xe.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(xe[0]).map(Fe=>Fe.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("curso"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo', y 'Curso'.");const ge={};Object.keys(xe[0]).forEach(Fe=>{ge[Fe.trim().toLowerCase()]=Fe});const ae=xe.map(Fe=>{const et=Fe[ge.nombre],De=Fe[ge.correo],Ce=Fe[ge.curso];return!et||!De||!Ce?null:{id:crypto.randomUUID(),nombreCompleto:String(et).trim(),email:String(De).trim(),profile:en.ESTUDIANTE,curso:l6(String(Ce).trim())}}).filter(Fe=>Fe!==null&&!t.some(et=>et.email.toLowerCase()===Fe.email.toLowerCase()));ae.length>0&&(await Promise.all(ae.map(Fe=>XC(Fe))),await P()),k({message:`Carga completada. Se agregaron ${ae.length} nuevos estudiantes.`,isError:!1})}catch(ne){k({message:`Error: ${ne.message}`,isError:!0})}finally{K.target&&(K.target.value="")}},Ae.readAsArrayBuffer(Z)},X=async K=>{var j;const Z=(j=K.target.files)==null?void 0:j[0];if(!Z)return;D({message:"Procesando archivo de personal...",isError:!1});const Ae=new FileReader;Ae.onload=async W=>{var J;try{const ne=new Uint8Array((J=W.target)==null?void 0:J.result),ie=ix(ne,{type:"array"}),de=ie.SheetNames[0],me=ie.Sheets[de],xe=kl.sheet_to_json(me);if(xe.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(xe[0]).map(Ce=>Ce.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("perfil"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo' y 'Perfil'.");const ge={};Object.keys(xe[0]).forEach(Ce=>{ge[Ce.trim().toLowerCase()]=Ce});const ae=Se.includes("curso");let Fe=0;const et=xe.map(Ce=>{const Ge=Ce[ge.nombre],nt=Ce[ge.correo],it=Ce[ge.perfil];if(!Ge||!nt||!it)return null;const dt=String(it).trim();return dt===en.ESTUDIANTE||!Object.values(en).includes(dt)?(console.warn(`Perfil inválido o de estudiante omitido: ${dt}`),null):ae&&Ce[ge.curso]?(console.warn(`Fila omitida: El perfil '${dt}' es para personal, pero se encontró una columna 'Curso' con datos. Use la carga de Estudiantes para este tipo de archivo.`),Fe++,null):{id:crypto.randomUUID(),nombreCompleto:String(Ge).trim(),email:String(nt).trim(),profile:dt}}).filter(Ce=>Ce!==null&&!t.some(Ge=>Ge.email.toLowerCase()===Ce.email.toLowerCase()));et.length>0&&(await Promise.all(et.map(Ce=>XC(Ce))),await P());let De=`Carga completada. Se agregaron ${et.length} nuevos miembros del personal.`;Fe>0&&(De+=` Se omitieron ${Fe} filas porque parecían ser de estudiantes (contenían una columna 'Curso'). Por favor, use la opción 'Cargar Estudiantes' para ellas.`),D({message:De,isError:!1})}catch(ne){D({message:`Error: ${ne.message}`,isError:!0})}finally{K.target&&(K.target.value="")}},Ae.readAsArrayBuffer(Z)},re="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),A.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&A.jsxs("div",{className:"space-y-8",children:[n&&A.jsx("div",{className:"text-center text-amber-600",children:"Cargando usuarios desde la nube..."}),C&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:C}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay usuarios registrados en la nube."}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),A.jsxs("form",{onSubmit:O,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),A.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:_,className:re,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),A.jsx("input",{type:"email",name:"email",value:i.email,onChange:_,className:re,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),A.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:_,placeholder:"Dejar en blanco para no cambiar",className:re})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),A.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:_,placeholder:"12.345.678-9",className:re})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),A.jsx("select",{name:"profile",value:i.profile,onChange:_,className:re,required:!0,children:o6.map(K=>A.jsx("option",{value:K,children:K},K))})]}),i.profile===en.ESTUDIANTE&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:i.curso,onChange:_,className:re,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un curso"}),Zs.map(K=>A.jsx("option",{value:K,children:K},K))]})]})]}),i.profile===en.PROFESORADO&&A.jsxs("div",{className:"lg:col-span-3 mt-6 pt-6 border-t dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200",children:"Asignaciones de Profesor"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Cursos Asignados"}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:Zs.map(K=>A.jsxs("label",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",checked:(i.cursos||[]).includes(K),onChange:()=>N("cursos",K),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),A.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K})]},K))})]}),A.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Asignaturas Asignadas"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:$o.map(K=>A.jsxs("label",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",checked:(i.asignaturas||[]).includes(K),onChange:()=>N("asignaturas",K),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),A.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 truncate",title:K,children:K})]},K))})]})]})]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center col-span-full pt-2",children:['Nota: La contraseña por defecto para todos los usuarios es "',A.jsx("strong",{children:"recoleta"}),'".']}),C&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:C}),A.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&A.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cargas Masivas desde Excel"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Estudiantes"}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",A.jsx("strong",{children:"Nombre"}),", ",A.jsx("strong",{children:"Correo"}),", ",A.jsx("strong",{children:"Curso"}),"."]}),A.jsx("input",{type:"file",onChange:q,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),I&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${I.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:I.message})]}),A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Personal (Profesores, etc.)"}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",A.jsx("strong",{children:"Nombre"}),", ",A.jsx("strong",{children:"Correo"}),", ",A.jsx("strong",{children:"Perfil"}),"."]}),A.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),R&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${R.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:R.message})]})]})]}),!n&&t.length>0&&A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:K=>h(K.target.value),className:re}),A.jsxs("select",{value:p,onChange:K=>g(K.target.value),className:re,children:[A.jsx("option",{value:"",children:"Filtrar por Perfil"}),o6.map(K=>A.jsx("option",{value:K,children:K},K))]}),A.jsxs("select",{value:b,onChange:K=>w(K.target.value),className:re,children:[A.jsx("option",{value:"",children:"Filtrar por Curso"}),G.map(K=>A.jsx("option",{value:K,children:K},K))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nombre Completo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Perfil / Curso"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:oe.map(K=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:K.nombreCompleto}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.email}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300",children:[K.profile," ",K.curso&&`(${K.curso})`]})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[A.jsx("button",{onClick:()=>M(K),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),A.jsx("button",{onClick:()=>L(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},K.id))})]})})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Gestión de Contraseñas Masivas"}),A.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:"Esta acción restablecerá las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta'). Úselo con precaución."})})]})}),A.jsx("div",{className:"mt-4",children:A.jsxs("button",{onClick:H,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[A.jsx(Gge,{}),"Restablecer Todas las Contraseñas"]})})]})]}),s==="Monitor de Uso"&&A.jsx(Hge,{})]})},c6="seguimientoDualRecords",qge={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Kge=({record:t,onSave:e,onClose:n})=>{const[r,s]=ee.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:p}=l.target;s(g=>({...g,[u]:h==="checkbox"?p:d}))},o=()=>{e(r)};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),A.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),A.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),A.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),A.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),A.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),A.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),A.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),A.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),A.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Wge=()=>{const[t,e]=ee.useState([]),n=ee.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:eh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:pC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[r,s]=ee.useState(n),[a,i]=ee.useState(null),[o,l]=ee.useState(""),[u,d]=ee.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[h,p]=ee.useState(null),[g,b]=ee.useState(null),[w,C]=ee.useState(!1),[T,I]=ee.useState(null);ee.useEffect(()=>{try{const X=localStorage.getItem(c6);X&&e(JSON.parse(X))}catch(X){console.error("Error al cargar datos de localStorage",X)}},[]);const k=ee.useCallback(X=>{e(X),localStorage.setItem(c6,JSON.stringify(X))},[]),R=ee.useCallback(X=>{const{name:re,value:K}=X.target;s(Z=>({...Z,[re]:K}))},[]),D=ee.useCallback(X=>{const{name:re,value:K}=X.target;d(Z=>({...Z,[re]:K}))},[]),P=ee.useCallback(()=>{s(n),i(null),p(null)},[n]),_=ee.useCallback(X=>{X.preventDefault();const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Ae=>!r[Ae].trim());if(K){p(`El campo '${K}' es obligatorio.`);return}const Z=a?t.map(Ae=>Ae.id===a?{...Ae,...r}:Ae):[{...r,id:crypto.randomUUID()},...t];k(Z),P()},[r,a,t,k,P]),N=ee.useCallback(X=>{window.scrollTo({top:0,behavior:"smooth"}),i(X.id),s(X)},[]),B=ee.useCallback(X=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&k(t.filter(re=>re.id!==X))},[t,k]),O=X=>{I(X),C(!0)},M=()=>{I(null),C(!1)},L=X=>{const re=t.map(K=>K.id===X.id?X:K);k(re),M()},H=()=>{const X=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],re=kl.aoa_to_sheet([X]),K=kl.book_new();kl.book_append_sheet(K,re,"Plantilla"),_4(K,"Plantilla_Seguimiento_Dual.xlsx")},G=X=>{var Z;const re=(Z=X.target.files)==null?void 0:Z[0];if(!re)return;b({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=Ae=>{var j;try{const W=new Uint8Array((j=Ae.target)==null?void 0:j.result),J=ix(W,{type:"array",cellDates:!0}),ne=J.SheetNames[0],ie=J.Sheets[ne],de=kl.sheet_to_json(ie);if(de.length===0)throw new Error("El archivo está vacío.");const me={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},xe=Object.keys(de[0]).map(Fe=>Fe.trim().toLowerCase()),ge=["nombre","rut","curso 2025","empresa","estado"].find(Fe=>!xe.includes(Fe));if(ge)throw new Error(`Falta la columna requerida: '${ge}'`);const ae=de.map(Fe=>{const et={id:crypto.randomUUID()};for(const De in Fe){const Ce=me[De.trim().toLowerCase()];if(Ce){let Ge=Fe[De];Ge instanceof Date&&(Ge=Ge.toISOString().split("T")[0]),typeof Ge=="boolean"||typeof Ge=="string"&&(Ge.toLowerCase()==="true"||Ge.toLowerCase()==="false")?et[Ce]=String(Ge).toLowerCase()==="true":et[Ce]=Ge}}return!et.nombreEstudiante||!et.rutEstudiante?null:et}).filter(Boolean);ae.length>0?(k([...ae,...t]),b({message:`Carga exitosa. Se agregaron ${ae.length} nuevos registros.`,isError:!1})):b({message:"No se encontraron nuevos registros válidos para agregar.",isError:!1})}catch(W){console.error(W),b({message:`Error al procesar el archivo: ${W.message}`,isError:!0})}},K.readAsArrayBuffer(re)},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=ee.useMemo(()=>t.filter(X=>(o===""||X.nombreEstudiante.toLowerCase().includes(o.toLowerCase())||X.nombreEmpresa.toLowerCase().includes(o.toLowerCase())||X.rutEstudiante.includes(o))&&(u.curso===""||X.curso===u.curso)&&(u.empresa===""||X.nombreEmpresa===u.empresa)&&(u.estado===""||X.estado===u.estado)&&(u.comuna===""||X.comuna===u.comuna)&&(u.profesor===""||X.profesorTutorEmpresa===u.profesor)).sort((X,re)=>X.nombreEstudiante.localeCompare(re.nombreEstudiante)),[t,o,u]);return ee.useMemo(()=>{const X=new Set,re=new Set;return t.forEach(K=>{K.nombreEmpresa&&X.add(K.nombreEmpresa),K.comuna&&re.add(K.comuna)}),{empresas:Array.from(X).sort(),comunas:Array.from(re).sort()}},[t]),A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Práctica Dual"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:a?"Editando registro existente.":"Registre un nuevo estudiante en práctica."}),A.jsxs("form",{onSubmit:_,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),A.jsx("input",{type:"text",name:"nombreEstudiante",value:r.nombreEstudiante,onChange:R,className:oe,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),A.jsx("input",{type:"text",name:"rutEstudiante",value:r.rutEstudiante,onChange:R,className:oe,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsx("select",{name:"curso",value:r.curso,onChange:R,className:oe,required:!0,children:eh.map(X=>A.jsx("option",{value:X,children:X},X))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),A.jsxs("select",{name:"profesorTutorEmpresa",value:r.profesorTutorEmpresa,onChange:R,className:oe,children:[A.jsx("option",{value:"",children:"Seleccione un profesor"}),d_.map(X=>A.jsx("option",{value:X,children:X},X))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),A.jsx("input",{type:"text",name:"nombreEmpresa",value:r.nombreEmpresa,onChange:R,className:oe,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),A.jsx("input",{type:"text",name:"rutEmpresa",value:r.rutEmpresa,onChange:R,className:oe})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),A.jsx("input",{type:"text",name:"direccionEmpresa",value:r.direccionEmpresa,onChange:R,className:oe})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),A.jsx("input",{type:"text",name:"comuna",value:r.comuna,onChange:R,className:oe})]}),A.jsxs("div",{className:"lg:col-span-4",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),A.jsx("select",{name:"estado",value:r.estado,onChange:R,className:oe,children:pC.map(X=>A.jsx("option",{value:X,children:X},X))})]})]}),r.estado==="Desvinculado"&&A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),A.jsx("input",{type:"date",name:"fechaDesvinculacion",value:r.fechaDesvinculacion||"",onChange:R,className:`${oe} border-red-300`})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),A.jsx("input",{type:"text",name:"motivoDesvinculacion",value:r.motivoDesvinculacion||"",onChange:R,className:`${oe} border-red-300`})]})]}),h&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:h}),A.jsxs("div",{className:"flex justify-end items-center gap-4",children:[a&&A.jsx("button",{type:"button",onClick:P,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:a?"Actualizar":"Agregar"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[A.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),A.jsx("input",{type:"file",onChange:G,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:o,onChange:X=>l(X.target.value),className:`${oe} md:col-span-2 lg:col-span-1`}),A.jsxs("select",{name:"curso",value:u.curso,onChange:D,className:oe,children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),eh.map(X=>A.jsx("option",{children:X},X))]}),A.jsxs("select",{name:"estado",value:u.estado,onChange:D,className:oe,children:[A.jsx("option",{value:"",children:"Todos los Estados"}),pC.map(X=>A.jsx("option",{children:X},X))]}),A.jsxs("select",{name:"profesor",value:u.profesor,onChange:D,className:oe,children:[A.jsx("option",{value:"",children:"Todos los Profesores"}),d_.map(X=>A.jsx("option",{children:X},X))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(X=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[A.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:X.nombreEstudiante}),A.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:X.curso})]}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:X.nombreEmpresa}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:X.profesorTutorEmpresa}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:A.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${qge[X.estado]}`,children:X.estado})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[A.jsx("button",{onClick:()=>O(X),className:"text-blue-600 hover:underline",children:"Supervisión"}),A.jsx("button",{onClick:()=>N(X),className:"text-yellow-600 hover:underline",children:"Editar"}),A.jsx("button",{onClick:()=>B(X.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},X.id))})]})})]}),w&&T&&A.jsx(Kge,{record:T,onClose:M,onSave:L})]})},u6="actividadesRemotas",$ge="respuestasActividades",Yge="usuariosLiceo",ZC={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},Jge=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),Xge=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!1),[p,g]=ee.useState(null),[b,w]=ee.useState(""),[C,T]=ee.useState(null),[I,k]=ee.useState([]),R={asignatura:$o[0],nivel:Q2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[D,P]=ee.useState(R);ee.useEffect(()=>{try{const ie=localStorage.getItem(u6);ie&&e(JSON.parse(ie));const de=localStorage.getItem($ge);de&&r(JSON.parse(de));const me=localStorage.getItem(Yge);me&&a(JSON.parse(me))}catch(ie){console.error("Error al cargar datos desde localStorage",ie)}},[]);const _=ie=>{P(de=>({...de,[ie.target.name]:ie.target.value}))},N=ie=>{P(de=>({...de,recursos:{...de.recursos,[ie.target.name]:ie.target.value}}))},B=ie=>{ie.target.files&&k(Array.from(ie.target.files))},O=ie=>{P(de=>{const me=de.tipos.includes(ie)?de.tipos.filter(Se=>Se!==ie):[...de.tipos,ie],xe={...de.cantidadPreguntas};return me.includes(ie)?xe[ie]||(xe[ie]=ZC[ie][0]):delete xe[ie],{...de,tipos:me,cantidadPreguntas:xe}})},M=(ie,de)=>{P(me=>({...me,cantidadPreguntas:{...me.cantidadPreguntas,[ie]:de}}))},L=ie=>{P(de=>{var xe;const me=(xe=de.cursosDestino)!=null&&xe.includes(ie)?de.cursosDestino.filter(Se=>Se!==ie):[...de.cursosDestino||[],ie];return{...de,cursosDestino:me}})},H=ie=>{P(de=>{var xe;const me=(xe=de.estudiantesDestino)!=null&&xe.includes(ie)?de.estudiantesDestino.filter(Se=>Se!==ie):[...de.estudiantesDestino||[],ie];return{...de,estudiantesDestino:me}})},G=ie=>{const de={Quiz:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{pregunta:{type:Bt.STRING},opciones:{type:Bt.ARRAY,items:{type:Bt.STRING}},respuestaCorrecta:{type:Bt.STRING}}}},"Comprensión de Lectura":{type:Bt.OBJECT,properties:{texto:{type:Bt.STRING},preguntas:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{pregunta:{type:Bt.STRING},opciones:{type:Bt.ARRAY,items:{type:Bt.STRING}},respuestaCorrecta:{type:Bt.STRING}}}}}},"Términos Pareados":{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{id:{type:Bt.STRING},concepto:{type:Bt.STRING},definicion:{type:Bt.STRING}}}},Desarrollo:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{pregunta:{type:Bt.STRING},rubrica:{type:Bt.STRING}}}}},me={};return ie.forEach(xe=>{me[xe]=de[xe]}),{type:Bt.OBJECT,properties:{introduccion:{type:Bt.STRING,description:"Una breve introducción motivadora para el estudiante sobre el tema."},actividades:{type:Bt.OBJECT,properties:me,required:ie}},required:["introduccion","actividades"]}},oe=()=>{const{tipos:ie,contenido:de,asignatura:me,nivel:xe,cantidadPreguntas:Se}=D;let ge=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${de}"
Asignatura: ${me}
Nivel: ${xe}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${de}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return ie.forEach(ae=>{const Fe=Se[ae]||ZC[ae][0];switch(ae){case"Quiz":ge+=`- **Quiz**: Genera un quiz de ${Fe} preguntas de selección múltiple sobre el contenido. Cada una con 4 opciones.
`;break;case"Comprensión de Lectura":ge+=`- **Comprensión de Lectura**: Genera ${Fe} actividad(es) de comprensión. Cada una con un texto de 150-200 palabras y 4 preguntas de selección múltiple.
`;break;case"Términos Pareados":ge+=`- **Términos Pareados**: Genera ${Fe} pares de términos pareados (concepto y definición).
`;break;case"Desarrollo":ge+=`- **Desarrollo**: Genera ${Fe} pregunta(s) de desarrollo con una rúbrica simple en texto.
`;break}}),ge},q=async ie=>{if(ie.preventDefault(),!D.contenido.trim()||D.tipos.length===0){g("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),g(null);try{const de=await Promise.all(I.map(async et=>({nombre:et.name,url:await Jge(et)})));yo("Actividades Remotas");const me=new Ba({apiKey:void 0}),xe=oe(),Se=G(D.tipos),ge=await me.models.generateContent({model:"gemini-2.5-flash",contents:xe,config:{responseMimeType:"application/json",responseSchema:Se}}),ae=JSON.parse(ge.text),Fe={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...D,recursos:{...D.recursos,archivos:de},introduccion:ae.introduccion,generatedContent:ae.actividades};T(Fe)}catch(de){console.error("Error al generar actividad con IA",de),g("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo.")}finally{h(!1)}},X=()=>{if(!C)return;const ie=[C,...t];e(ie),localStorage.setItem(u6,JSON.stringify(ie)),P(R),k([]),u(!1),T(null),o(C)},re=ee.useMemo(()=>{var me,xe;if(!i||!s)return[];const ie=s.filter(Se=>{var ge;return Se.profile===en.ESTUDIANTE&&((ge=i.cursosDestino)==null?void 0:ge.includes(Se.curso||""))}).map(Se=>Se.nombreCompleto),de=i.estudiantesDestino||[];if(!((me=i.cursosDestino)!=null&&me.length)&&!((xe=i.estudiantesDestino)!=null&&xe.length)){const Se=i.nivel.charAt(0);return s.filter(ge=>{var ae;return ge.profile===en.ESTUDIANTE&&((ae=ge.curso)==null?void 0:ae.startsWith(Se))}).map(ge=>ge.nombreCompleto).sort()}return Array.from(new Set([...ie,...de])).sort()},[i,s]),K=ee.useMemo(()=>n.filter(ie=>ie.actividadId===(i==null?void 0:i.id)),[n,i]),Z=ee.useMemo(()=>s.filter(ie=>ie.profile===en.ESTUDIANTE).sort((ie,de)=>ie.nombreCompleto.localeCompare(de.nombreCompleto)),[s]),Ae=ee.useMemo(()=>b.trim()?Z.filter(ie=>ie.nombreCompleto.toLowerCase().includes(b.toLowerCase())):Z,[Z,b]),j=()=>A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),A.jsxs("p",{className:"text-slate-500",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),A.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),A.jsxs("div",{className:"mt-6 border-t pt-6",children:[A.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-4",children:"Resultados de Estudiantes"}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[A.jsx("thead",{className:"bg-slate-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:re.map(ie=>{const de=K.find(me=>me.estudianteId===ie);return A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800",children:ie}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:de?A.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):A.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:de?`${de.puntaje}/${de.puntajeMaximo}`:"-"}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:de?new Date(de.fechaCompletado).toLocaleString("es-CL"):"-"})]},ie)})})]})})]})]}),W=()=>{var ie,de;return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Nueva Actividad Remota"}),A.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),A.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),A.jsxs("form",{onSubmit:q,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),A.jsx("select",{name:"asignatura",value:D.asignatura,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm",children:$o.map(me=>A.jsx("option",{value:me,children:me},me))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),A.jsx("select",{name:"nivel",value:D.nivel,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm",children:Q2.map(me=>A.jsx("option",{value:me,children:me},me))})]}),A.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50",children:[A.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Recursos de Aprendizaje (Opcional)"}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),A.jsx("textarea",{name:"instrucciones",value:(ie=D.recursos)==null?void 0:ie.instrucciones,onChange:N,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),A.jsx("textarea",{name:"enlaces",value:(de=D.recursos)==null?void 0:de.enlaces,onChange:N,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),A.jsx("input",{type:"file",multiple:!0,onChange:B,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),A.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50",children:[A.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Destinatarios"}),A.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Zs.map(me=>{var xe;return A.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:(xe=D.cursosDestino)==null?void 0:xe.includes(me),onChange:()=>L(me),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{className:"text-sm font-medium text-slate-700",children:me})]},me)})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),A.jsx("input",{type:"text",placeholder:"Buscar...",value:b,onChange:me=>w(me.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Ae.map(me=>{var xe;return A.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:(xe=D.estudiantesDestino)==null?void 0:xe.includes(me.nombreCompleto),onChange:()=>H(me.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:me.nombreCompleto,children:me.nombreCompleto})]},me.id)})})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),A.jsx("div",{className:"space-y-3",children:i$.map(me=>A.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:D.tipos.includes(me),onChange:()=>O(me),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:me})]}),D.tipos.includes(me)&&A.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[A.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),ZC[me].map(xe=>A.jsx("button",{type:"button",onClick:()=>M(me,xe),className:`px-3 py-1 rounded-full font-semibold text-xs ${D.cantidadPreguntas[me]===xe?"bg-amber-500 text-white":"bg-slate-200"}`,children:xe},xe))]})]},me))})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("textarea",{name:"contenido",value:D.contenido,onChange:_,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),A.jsx("input",{type:"date",name:"plazoEntrega",value:D.plazoEntrega,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),p&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:p}),A.jsx("div",{className:"pt-4 text-right",children:A.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?A.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},J=()=>{var ie;return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),A.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),A.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[A.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[A.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),A.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:C==null?void 0:C.introduccion})]}),(C==null?void 0:C.recursos)&&(C.recursos.instrucciones||C.recursos.enlaces||((ie=C.recursos.archivos)==null?void 0:ie.length))&&A.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[A.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),A.jsxs("div",{className:"space-y-3",children:[C.recursos.instrucciones&&A.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:C.recursos.instrucciones}),C.recursos.enlaces&&A.jsx("div",{children:C.recursos.enlaces.split(`
`).map((de,me)=>de.trim()&&A.jsx("a",{href:de,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:de},me))}),C.recursos.archivos&&C.recursos.archivos.length>0&&A.jsx("ul",{className:"list-disc list-inside",children:C.recursos.archivos.map(de=>A.jsx("li",{className:"text-slate-700",children:de.nombre},de.nombre))})]})]}),C==null?void 0:C.tipos.map(de=>{const me=C.generatedContent[de];return me?A.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:de}),A.jsxs("div",{className:"space-y-4 text-sm",children:[de==="Quiz"&&me.map((xe,Se)=>A.jsxs("div",{children:[A.jsxs("p",{className:"font-semibold",children:[Se+1,". ",xe.pregunta]}),A.jsx("ul",{className:"list-disc pl-5 mt-1",children:xe.opciones.map(ge=>A.jsx("li",{children:ge},ge))}),A.jsxs("p",{className:"text-xs text-green-600",children:["R: ",xe.respuestaCorrecta]})]},Se)),de==="Comprensión de Lectura"&&A.jsxs("div",{children:[A.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-2 rounded",children:me.texto}),me.preguntas.map((xe,Se)=>A.jsxs("div",{className:"mt-2",children:[A.jsxs("p",{className:"font-semibold",children:[Se+1,". ",xe.pregunta]}),A.jsx("ul",{className:"list-disc pl-5 mt-1",children:xe.opciones.map(ge=>A.jsx("li",{children:ge},ge))}),A.jsxs("p",{className:"text-xs text-green-600",children:["R: ",xe.respuestaCorrecta]})]},Se))]}),de==="Términos Pareados"&&A.jsx("ul",{className:"list-disc pl-5",children:me.map(xe=>A.jsxs("li",{children:[A.jsxs("strong",{children:[xe.concepto,":"]})," ",xe.definicion]},xe.id))}),de==="Desarrollo"&&me.map((xe,Se)=>A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold",children:xe.pregunta}),A.jsxs("p",{className:"text-xs italic mt-1",children:["Rúbrica: ",xe.rubrica]})]},Se))]})]},de):null})]}),A.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[A.jsx("button",{onClick:()=>T(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{onClick:X,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},ne=()=>A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),A.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),A.jsx("div",{className:"space-y-4",children:t.length>0?t.map(ie=>{var xe,Se;const de=[];(xe=ie.cursosDestino)!=null&&xe.length&&de.push(`Cursos: ${ie.cursosDestino.join(", ")}`),(Se=ie.estudiantesDestino)!=null&&Se.length&&de.push(`Estudiantes: ${ie.estudiantesDestino.length}`);const me=de.length?de.join(" | "):`Todo ${ie.nivel}`;return A.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"font-bold text-slate-800",children:[ie.asignatura," - ",ie.tipos.join(", ")]}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",me," | Creado: ",new Date(ie.fechaCreacion).toLocaleDateString("es-CL")]})]}),A.jsx("button",{onClick:()=>o(ie),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ie.id)}):A.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return A.jsx("div",{className:"animate-fade-in",children:C?J():i?j():l?W():ne()})},Zge="actividadesRemotas",eE="respuestasActividades",exe=t=>[...t].sort(()=>Math.random()-.5),txe=(t,e)=>{if(e===0)return"1.0";const r=e*.6;let s;return t>=r?s=4+(t-r)*3/(e-r):s=1+t*3/(r||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},A6=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),nxe=({actividad:t,onComplete:e,currentUser:n})=>{var I,k,R,D;const[r,s]=ee.useState({}),[a,i]=ee.useState(!1),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),[h,p]=ee.useState({}),g=`progress-${n.id}-${t.id}`;ee.useEffect(()=>{const P={};t.tipos.forEach(_=>{if(_==="Términos Pareados"){const N=t.generatedContent[_];N&&(P[_]=exe(N.map(B=>B.definicion)))}}),p(P);try{const _=localStorage.getItem(g);_&&s(JSON.parse(_))}catch(_){console.error("Could not load saved progress",_)}},[t,g]);const b=(P,_)=>{s(N=>({...N,[P]:_}))},w=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(r)),d(!0),setTimeout(()=>d(!1),2e3)}catch(P){console.error("Could not save progress",P),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},C=async()=>{i(!0);let P=0,_=0;const N=[],B={};for(const M of t.tipos){const L=t.generatedContent[M],H=r[M];if(M==="Quiz"||M==="Comprensión de Lectura"){const G=M==="Quiz"?L:L.preguntas,oe=H||{};let q=0,X=0;G.forEach((re,K)=>{X+=1,oe[K]===re.respuestaCorrecta&&(q+=1)}),P+=q,_+=X,N.push(`${M}: ${q}/${X} correctas.`),B[M]={puntaje:q,puntajeMaximo:X}}else if(M==="Términos Pareados"){const G=L,oe=H||{};let q=0,X=0;G.forEach(re=>{X+=2,oe[re.id]===re.definicion&&(q+=2)}),P+=q,_+=X,N.push(`${M}: ${q/2}/${G.length} correctas.`),B[M]={puntaje:q,puntajeMaximo:X}}else if(M==="Desarrollo"){const G=L,oe=H||{};let q=0,X=0;for(let re=0;re<G.length;re++){const K=G[re];X+=3;try{yo("Autoaprendizaje - Evaluar Desarrollo");const Z=new Ba({apiKey:void 0}),Ae=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${K.pregunta}". Rúbrica: "${K.rubrica}". Respuesta: "${oe[re]||""}". Proporciona también una frase corta de feedback.`,j={type:Bt.OBJECT,properties:{puntaje:{type:Bt.INTEGER,description:"Un puntaje de 0 a 3."},feedback:{type:Bt.STRING}},required:["puntaje","feedback"]},W=await Z.models.generateContent({model:"gemini-2.5-flash",contents:Ae,config:{responseMimeType:"application/json",responseSchema:j}}),J=JSON.parse(W.text),ne=Math.max(0,Math.min(3,J.puntaje||0));q+=ne,N.push(`${M} #${re+1}: Puntaje ${ne}/3. (${J.feedback})`)}catch(Z){console.error(Z),N.push(`${M} #${re+1}: No se pudo evaluar automáticamente.`)}}P+=q,_+=X,B[M]={puntaje:q,puntajeMaximo:X}}}let O=`¡Buen trabajo! Tu puntaje total es ${P} de ${_}.`;e({respuestas:r,puntaje:P,puntajeMaximo:_,retroalimentacion:O,calificacion:txe(P,_),puntajesPorSeccion:B}),localStorage.removeItem(g),i(!1)},T=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((I=t.recursos.archivos)==null?void 0:I.length));return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[A.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),A.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),T&&A.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[A.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),A.jsxs("div",{className:"space-y-4",children:[((k=t.recursos)==null?void 0:k.instrucciones)&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((R=t.recursos)==null?void 0:R.enlaces)&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((P,_)=>P.trim()&&A.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:P},_))]}),((D=t.recursos)==null?void 0:D.archivos)&&t.recursos.archivos.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),A.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((P,_)=>A.jsx("li",{children:A.jsx("a",{href:P.url,download:P.nombre,className:"text-blue-500 hover:underline",children:P.nombre})},_))})]})]})]}),t.tipos.map(P=>{const _=t.generatedContent[P];if(!_)return null;switch(P){case"Quiz":case"Comprensión de Lectura":{const N=P==="Quiz",B=_,O=N?B:B.preguntas;return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),!N&&A.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:B.texto}),A.jsx("div",{className:"space-y-6",children:O.map((M,L)=>A.jsxs("div",{children:[A.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[L+1,". ",M.pregunta]}),A.jsx("div",{className:"mt-2 space-y-2",children:M.opciones.map((H,G)=>{var oe;return A.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[A.jsx("input",{type:"radio",name:`q-${P}-${L}-${t.id}`,value:H,checked:((oe=r[P])==null?void 0:oe[L])===H,onChange:()=>b(P,{...r[P]||{},[L]:H}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),A.jsx("span",{children:H})]},G)})})]},`${P}-${L}`))})]},P)}case"Términos Pareados":{const N=_,B=h[P]||[];return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),N.map(O=>A.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:O.concepto},O.id))]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),N.map(O=>{var M;return A.jsx("div",{className:"h-14 flex items-center",children:A.jsxs("select",{value:((M=r[P])==null?void 0:M[O.id])||"",onChange:L=>b(P,{...r[P]||{},[O.id]:L.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[A.jsx("option",{value:"",children:"Seleccionar definición..."}),B.map((L,H)=>A.jsx("option",{value:L,children:L},H))]})},O.id)})]})]})]},P)}case"Desarrollo":{const N=_;return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),N.map((B,O)=>{var M;return A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:B.pregunta}),A.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[A.jsx("strong",{children:"Rúbrica:"})," ",B.rubrica]}),A.jsx("textarea",{value:((M=r[P])==null?void 0:M[O])||"",onChange:L=>b(P,{...r[P]||{},[O]:L.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},O)})]},P)}default:return null}}),A.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[A.jsx("button",{onClick:w,disabled:a||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?A.jsxs(A.Fragment,{children:[A.jsx(A6,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),A.jsx("button",{onClick:C,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?A.jsxs(A.Fragment,{children:[A.jsx(A6,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},rxe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState("list"),[u,d]=ee.useState(null),[h,p]=ee.useState(null);ee.useEffect(()=>{try{const C=localStorage.getItem(Zge);if(C){const I=JSON.parse(C),k=t.curso||"",R=t.nombreCompleto,D=I.filter(P=>{var O,M,L,H;const _=!((O=P.cursosDestino)!=null&&O.length)&&!((M=P.estudiantesDestino)!=null&&M.length),N=((L=P.cursosDestino)==null?void 0:L.includes(k))??!1,B=((H=P.estudiantesDestino)==null?void 0:H.includes(R))??!1;if(N||B)return!0;if(_&&k){const G=P.nivel.charAt(0),oe=k.charAt(0);return G===oe}return!1});n(D)}const T=localStorage.getItem(eE);if(T){const I=JSON.parse(T).filter(k=>k.estudianteId===t.nombreCompleto);s(I)}}catch(C){console.error("Error loading data",C)}},[t]);const g=C=>{p(C)},b=()=>{h&&(i(h),l("activity"),p(null))},w=ee.useCallback(async C=>{if(!a)return;let T;const I=`
            Un estudiante ha completado una actividad sobre "${a.contenido}".
            Su puntaje total fue ${C.puntaje} de ${C.puntajeMaximo}.
            Detalle por sección: ${JSON.stringify(C.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(C.respuestas.Desarrollo||{})}
            
            Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un párrafo breve y motivador sobre el desempeño general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con áreas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback específico para esa sección.
        `;try{yo("Autoaprendizaje - Retroalimentación Detallada");const _=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:I,config:{responseMimeType:"application/json"}});T=JSON.parse(_.text.trim().replace(/(\*\*|\*)/g,""))}catch(P){console.error("Error generating detailed feedback:",P)}const k={id:crypto.randomUUID(),actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...C,retroalimentacionDetallada:T},R=JSON.parse(localStorage.getItem(eE)||"[]"),D=[k,...R.filter(P=>!(P.actividadId===k.actividadId&&P.estudianteId===k.estudianteId))];localStorage.setItem(eE,JSON.stringify(D)),s(P=>[k,...P.filter(_=>_.actividadId!==k.actividadId)]),d(k),l("result")},[a,t.nombreCompleto]);if(o==="activity"&&a)return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),A.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),A.jsx(nxe,{actividad:a,onComplete:w,currentUser:t})]});if(o==="result"&&u){const C=u.retroalimentacionDetallada,T=u.puntajesPorSeccion||{},I=(k,R)=>{const D=R>0?k/R:0;return D<.4?"bg-red-100 text-red-800":D<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return A.jsxs("div",{className:"space-y-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),C?A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),A.jsx("p",{className:"text-slate-600 mb-6",children:C.resumenGeneral}),A.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[A.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),A.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${I(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),A.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:C.areasDeFortaleza.map((k,R)=>A.jsx("li",{children:k},R))})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),A.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:C.areasDeMejora.map((k,R)=>A.jsx("li",{children:k},R))})]})]})]}),A.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(T).map(([k,{puntaje:R,puntajeMaximo:D}])=>{var P;return A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsx("h3",{className:"text-xl font-bold",children:k}),A.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${I(R,D)}`,children:[R," / ",D]})]}),A.jsx("p",{className:"text-slate-500 text-sm",children:(P=C.feedbackPorSeccion)==null?void 0:P[k]})]},k)})}),A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),A.jsx("div",{className:"space-y-4",children:C.planDeMejora.map((k,R)=>A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold",children:k.paso}),A.jsx("p",{className:"text-slate-600 text-sm",children:k.detalle})]})]},R))})]})]}):A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[A.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[A.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),A.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),A.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),A.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),A.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[A.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),A.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),A.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),A.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",A.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),A.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),A.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[A.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),A.jsx("div",{className:"space-y-4",children:e.length>0?e.map(C=>{const T=r.find(k=>k.actividadId===C.id),I=!!T;return A.jsx("div",{className:`p-4 border rounded-lg ${I?"bg-green-50":"bg-slate-50"}`,children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"font-bold text-slate-800",children:[C.asignatura," - ",C.tipos.join(", ")]}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",C.plazoEntrega]})]}),I?A.jsxs("div",{className:"text-right",children:[A.jsx("button",{onClick:()=>{d(T),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),A.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",T.puntaje,"/",T.puntajeMaximo]})]}):A.jsx("button",{onClick:()=>g(C),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},C.id)}):A.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},d6="estudiantesInclusion",sxe="usuariosLiceo",axe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[s,a]=ee.useState("intervenciones"),[i,o]=ee.useState(t),[l,u]=ee.useState(null),d={responsable:"",accion:"",observaciones:""},[h,p]=ee.useState(d),[g,b]=ee.useState({trimestre:"T1",meta:""}),[w,C]=ee.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[T,I]=ee.useState(null),[k,R]=ee.useState(!1),D={motivo:"",acuerdos:"",asistentes:""},[P,_]=ee.useState(D),N=()=>{n(i)},B=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ge;l?ge=(i.intervenciones||[]).map(Fe=>Fe.id===l.id?{...Fe,...h}:Fe):ge=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const ae=ge.sort((Fe,et)=>new Date(et.fecha).getTime()-new Date(Fe.fecha).getTime());o(Fe=>({...Fe,intervenciones:ae})),p(d),u(null)},O=ge=>{u(ge),p({responsable:ge.responsable,accion:ge.accion,observaciones:ge.observaciones})},M=ge=>{window.confirm("¿Eliminar esta intervención?")&&o(ae=>({...ae,intervenciones:(ae.intervenciones||[]).filter(Fe=>Fe.id!==ge)}))},L=ge=>{const{name:ae,value:Fe}=ge.target;o(et=>({...et,[ae]:Fe,fechaActualizacionApoyos:new Date().toISOString()}))},H=()=>{if(!g.meta.trim())return;const ge={...g,id:crypto.randomUUID(),cumplida:!1};o(ae=>({...ae,metasProgreso:[...ae.metasProgreso||[],ge]})),b({trimestre:"T1",meta:""})},G=ge=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).map(Fe=>Fe.id===ge?{...Fe,cumplida:!Fe.cumplida}:Fe)}))},oe=ge=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).filter(Fe=>Fe.id!==ge)}))},q=ee.useMemo(()=>{const ge=i.metasProgreso||[];if(ge.length===0)return{percent:0,color:"bg-slate-300"};const ae=ge.filter(De=>De.cumplida).length,Fe=Math.round(ae/ge.length*100),et=Fe<40?"bg-red-500":Fe<75?"bg-yellow-500":"bg-green-500";return{percent:Fe,color:et}},[i.metasProgreso]),X=ee.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const ge=new Date(i.fechaActualizacionApoyos),ae=new Date;return ae.setMonth(ae.getMonth()-3),ge<ae},[i.fechaActualizacionApoyos]),re=()=>{if(!w.titulo.trim()||!w.fecha)return;const ge={...w,id:crypto.randomUUID(),resuelta:!1};o(ae=>({...ae,alertas:[...ae.alertas||[],ge].sort((Fe,et)=>new Date(Fe.fecha).getTime()-new Date(et.fecha).getTime())})),C({titulo:"",fecha:new Date().toISOString().split("T")[0]})},K=ge=>{o(ae=>({...ae,alertas:(ae.alertas||[]).map(Fe=>Fe.id===ge?{...Fe,resuelta:!Fe.resuelta}:Fe)}))},Z=ge=>{o(ae=>({...ae,alertas:(ae.alertas||[]).filter(Fe=>Fe.id!==ge)}))},Ae=ge=>{ge.target.files&&ge.target.files[0]&&I(ge.target.files[0])},j=()=>{if(!T)return;R(!0);const ge=new FileReader;ge.readAsDataURL(T),ge.onloadend=()=>{const ae={id:crypto.randomUUID(),nombre:T.name,url:ge.result,fechaSubida:new Date().toISOString()};o(Fe=>({...Fe,archivos:[ae,...Fe.archivos||[]]})),I(null),R(!1)},ge.onerror=()=>{alert("Error al leer el archivo."),R(!1)}},W=ge=>{window.confirm("¿Eliminar este archivo?")&&o(ae=>({...ae,archivos:(ae.archivos||[]).filter(Fe=>Fe.id!==ge)}))},J=()=>{if(!P.motivo.trim()||!P.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ge={...P,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ae=>({...ae,reuniones:[ge,...ae.reuniones||[]].sort((Fe,et)=>new Date(et.fecha).getTime()-new Date(Fe.fecha).getTime())})),_(D)},ne=ge=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ae=>({...ae,reuniones:(ae.reuniones||[]).filter(Fe=>Fe.id!==ge)}))},ie=()=>{var it,dt,Ct;const ge=new an("p","mm","a4"),ae=20,Fe=ge.internal.pageSize.getWidth(),et=ge.internal.pageSize.getHeight();let De=ae;const Ce=ut=>{ut.setFontSize(10),ut.setTextColor(100),ut.text("Ficha de Seguimiento - Módulo Inclusión",ae,15)};Ce(ge),ge.setFontSize(18),ge.setFont("helvetica","bold"),ge.setTextColor(40),ge.text(i.nombre,ae,De+10),De+=15,ge.setFontSize(11),ge.setFont("helvetica","normal"),ge.setTextColor(80),ge.text(`Curso: ${i.curso}`,ae,De),ge.text(`Dificultad: ${i.dificultad}`,ae,De+6),De+=15;const Ge=ut=>{De+ut>et-ae&&(ge.addPage(),Ce(ge),De=ae)},nt=ut=>{Ge(15),ge.setFontSize(14),ge.setFont("helvetica","bold"),ge.text(ut,ae,De),De+=10};if((it=i.intervenciones)!=null&&it.length&&(nt("Historial de Intervenciones"),Wo(ge,{startY:De,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.responsable,ut.accion,ut.observaciones]),theme:"grid",didDrawPage:ut=>Ce(ge)}),De=ge.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){Ge(30),nt("Seguimiento y Apoyos"),ge.setFontSize(11),ge.setFont("helvetica","normal");const ut=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,kt=ge.splitTextToSize(ut,Fe-ae*2);ge.text(kt,ae,De),De+=kt.length*5+10}(dt=i.metasProgreso)!=null&&dt.length&&(Ge(30),nt("Metas de Progreso"),Wo(ge,{startY:De,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ut=>[ut.trimestre,ut.meta,ut.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ut=>Ce(ge)}),De=ge.lastAutoTable.finalY+10),(Ct=i.reuniones)!=null&&Ct.length&&(nt("Reuniones con Apoderados"),Wo(ge,{startY:De,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.motivo,ut.acuerdos,ut.asistentes]),theme:"grid",didDrawPage:ut=>Ce(ge)})),ge.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},de=()=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),A.jsxs("select",{value:h.responsable,onChange:ge=>p(ae=>({...ae,responsable:ge.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(ge=>A.jsx("option",{value:ge,children:ge},ge))]}),A.jsx("textarea",{value:h.accion,onChange:ge=>p(ae=>({...ae,accion:ge.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:h.observaciones,onChange:ge=>p(ae=>({...ae,observaciones:ge.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsxs("div",{className:"flex justify-end gap-2",children:[l&&A.jsx("button",{onClick:()=>{u(null),p(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),A.jsx("button",{onClick:B,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),A.jsx("div",{className:"space-y-3",children:(i.intervenciones||[]).map(ge=>A.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ge.accion}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:ge.observaciones}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ge.fecha).toLocaleString("es-CL")," - ",ge.responsable]})]}),A.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[A.jsx("button",{onClick:()=>O(ge),className:"text-blue-500",children:"✏️"}),A.jsx("button",{onClick:()=>M(ge.id),className:"text-red-500",children:"🗑️"})]})]})},ge.id))})]}),me=()=>A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),X&&A.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),A.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),A.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",q.percent,"%"]}),A.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:A.jsx("div",{className:`${q.color} h-4 rounded-full transition-all duration-500`,style:{width:`${q.percent}%`}})})]}),A.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[A.jsxs("select",{value:g.trimestre,onChange:ge=>b(ae=>({...ae,trimestre:ge.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"T1",children:"T1"}),A.jsx("option",{value:"T2",children:"T2"}),A.jsx("option",{value:"T3",children:"T3"})]}),A.jsx("input",{value:g.meta,onChange:ge=>b(ae=>({...ae,meta:ge.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:H,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),A.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(ge=>A.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[A.jsx("input",{type:"checkbox",checked:ge.cumplida,onChange:()=>G(ge.id),className:"h-5 w-5 rounded text-amber-500"}),A.jsxs("span",{className:`flex-grow text-sm ${ge.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[A.jsxs("strong",{children:[ge.trimestre,":"]})," ",ge.meta]}),A.jsx("button",{onClick:()=>oe(ge.id),className:"text-red-500 text-sm",children:"🗑️"})]},ge.id))})]})]}),xe=()=>A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),A.jsx("input",{type:"text",value:w.titulo,onChange:ge=>C(ae=>({...ae,titulo:ge.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),A.jsx("input",{type:"date",value:w.fecha,onChange:ge=>C(ae=>({...ae,fecha:ge.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),A.jsx("button",{onClick:re,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(ge=>A.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[A.jsx("input",{type:"checkbox",checked:ge.resuelta,onChange:()=>K(ge.id),className:"h-5 w-5 rounded text-amber-500"}),A.jsxs("span",{className:`flex-grow text-sm ${ge.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ge.titulo," (",new Date(ge.fecha+"T12:00:00").toLocaleDateString(),")"]}),A.jsx("button",{onClick:()=>Z(ge.id),className:"text-red-500 text-sm",children:"🗑️"})]},ge.id))})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),A.jsx("input",{type:"file",onChange:Ae,className:"w-full text-sm"}),A.jsx("button",{onClick:j,disabled:!T||k,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:k?"Subiendo...":"Subir"})]}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(ge=>A.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[A.jsx("a",{href:ge.url,download:ge.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:ge.nombre}),A.jsx("button",{onClick:()=>W(ge.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},ge.id))})]})]}),Se=()=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),A.jsx("input",{value:P.motivo,onChange:ge=>_(ae=>({...ae,motivo:ge.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:P.acuerdos,onChange:ge=>_(ae=>({...ae,acuerdos:ge.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("input",{value:P.asistentes,onChange:ge=>_(ae=>({...ae,asistentes:ge.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("div",{className:"text-right",children:A.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),A.jsx("div",{className:"space-y-3",children:(i.reuniones||[]).map(ge=>A.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ge.motivo}),A.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[A.jsx("strong",{children:"Acuerdos:"})," ",ge.acuerdos]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ge.fecha).toLocaleString("es-CL")," - Asistentes: ",ge.asistentes]})]}),A.jsx("button",{onClick:()=>ne(ge.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},ge.id))})]});return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ge=>ge.stopPropagation(),children:[A.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:ie,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),A.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),A.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:A.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ge=>A.jsx("button",{onClick:()=>a(ge),className:`${s===ge?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:ge==="alertas"?"Alertas y Archivos":ge==="seguimiento"?"Seguimiento y Metas":ge},ge))})}),A.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&de(),s==="seguimiento"&&me(),s==="reuniones"&&Se(),s==="alertas"&&xe()]}),A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[A.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),A.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},ixe=({student:t,onClose:e,onConfirm:n})=>{const[r,s]=ee.useState(H2[0]),a=()=>{n(t,r)};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[A.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),A.jsx("select",{id:"dificultad",value:r,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:H2.map(i=>A.jsx("option",{value:i,children:i},i))})]}),A.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},f6=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,p]=ee.useState(""),[g,b]=ee.useState("");ee.useEffect(()=>{try{const _=localStorage.getItem(d6);_&&n(JSON.parse(_));const N=localStorage.getItem(sxe);N&&s(JSON.parse(N))}catch(_){console.error("Error al cargar datos de Inclusión desde localStorage",_)}},[]);const w=ee.useCallback(_=>{n(_),localStorage.setItem(d6,JSON.stringify(_))},[]),C=(_,N)=>{if(e.some(O=>O.nombre===_.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const B={id:crypto.randomUUID(),nombre:_.nombreCompleto,curso:_.curso||"",dificultad:N,intervenciones:[],archivos:[],reuniones:[]};w([B,...e]),i(B)},T=_=>{w(e.map(N=>N.id===_.id?_:N)),i(_)},I=_=>{window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión?")&&(w(e.filter(N=>N.id!==_)),(a==null?void 0:a.id)===_&&i(null))},k=_=>{const N=D.map(B=>({Nombre:B.nombre,Curso:B.curso,Dificultad:B.dificultad,"N° Intervenciones":B.intervenciones.length,"Alertas Pendientes":(B.alertas||[]).filter(O=>!O.resuelta).length}));if(_==="xlsx"){const B=kl.json_to_sheet(N),O=kl.book_new();kl.book_append_sheet(O,B,"Estudiantes_Inclusion"),_4(O,"Estudiantes_Inclusion.xlsx")}else{const B=new an;B.text("Listado de Estudiantes - Programa de Inclusión",14,15),Wo(B,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),B.save("Estudiantes_Inclusion.pdf")}},R=ee.useMemo(()=>r.filter(_=>{var N;return _.profile===en.ESTUDIANTE&&(((N=t.cursos)==null?void 0:N.includes(_.curso||""))||t.profile===en.SUBDIRECCION)}).filter(_=>!e.some(N=>N.nombre===_.nombreCompleto)),[r,e,t]),D=ee.useMemo(()=>e.filter(_=>_.nombre.toLowerCase().includes(u.toLowerCase())&&(h===""||_.curso===h)&&(g===""||_.dificultad===g)).sort((_,N)=>_.nombre.localeCompare(N.nombre)),[e,u,h,g]),P=ee.useMemo(()=>r.filter(_=>_.profile===en.PROFESORADO).map(_=>_.nombreCompleto).sort(),[r]);return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Estudiantes en PIE"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>k("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),A.jsx("button",{onClick:()=>k("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:u,onChange:_=>d(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsxs("select",{value:h,onChange:_=>p(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),Zs.map(_=>A.jsx("option",{children:_},_))]}),A.jsxs("select",{value:g,onChange:_=>b(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Todas las Dificultades"}),H2.map(_=>A.jsx("option",{children:_},_))]})]}),A.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(_=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[_.curso," - ",_.dificultad]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>i(_),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),A.jsx("button",{onClick:()=>I(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},_.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),A.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:R.map(_=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:_.nombreCompleto}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.curso})]}),A.jsx("button",{onClick:()=>l(_),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},_.id))})]})]}),o&&A.jsx(ixe,{student:o,onClose:()=>l(null),onConfirm:(_,N)=>{C(_,N),l(null)}}),a&&A.jsx(axe,{student:a,onClose:()=>i(null),onSave:T,profesores:P})]})},h6="asistenciaDualRecords",oxe=({currentUser:t})=>{const[e,n]=ee.useState(t.curso||""),[r,s]=ee.useState([]),[a,i]=ee.useState(!1),[o,l]=ee.useState(null),u=`asistenciaPersonalDual-${t.id}`;ee.useEffect(()=>{try{const p=localStorage.getItem(u);p&&s(JSON.parse(p))}catch(p){console.error("Error al cargar historial de asistencia",p),l({text:"No se pudo cargar el historial local.",type:"error"})}},[u]);const d=p=>{const g=[p,...r];s(g),localStorage.setItem(u,JSON.stringify(g));try{const b=localStorage.getItem(h6),w=b?JSON.parse(b):[],C=[p,...w];localStorage.setItem(h6,JSON.stringify(C))}catch(b){console.error("Error al guardar en el historial compartido",b),l({text:"Se registró su asistencia, pero hubo un problema al notificar a coordinación.",type:"error"})}},h=p=>{if(!e){l({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),l(null),navigator.geolocation.getCurrentPosition(g=>{const b={id:crypto.randomUUID(),nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};d(b),i(!1),l({text:`¡Marca de ${p} registrada con éxito!`,type:"success"})},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}l({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Asistencia a Empresa"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),A.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 mb-1",children:"Seleccione su curso"}),A.jsxs("select",{id:"curso",value:e,onChange:p=>n(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2",children:[A.jsx("option",{value:"",children:"-- Mi curso --"}),eh.map(p=>A.jsx("option",{value:p,children:p},p))]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[A.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),A.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&A.jsxs("div",{className:"text-center text-slate-600 pt-4 flex items-center justify-center gap-2",children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("span",{children:"Obteniendo ubicación..."})]}),o&&A.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text})]})]}),A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mi Historial de Asistencia"}),A.jsx("div",{className:"overflow-x-auto max-h-96",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[A.jsx("thead",{className:"bg-slate-50 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha y Hora"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Tipo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Curso"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:r.length>0?r.map(p=>A.jsxs("tr",{className:"hover:bg-slate-50",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(p.fechaHora).toLocaleString("es-CL")}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.tipo})}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:p.curso})]},p.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},lxe="asistenciaDualRecords",cxe="usuariosLiceo",gv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},uxe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Axe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd",transform:"rotate(180 10 10)"})}),dxe=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState(new Date),[i,o]=ee.useState("todos"),[l,u]=ee.useState("");ee.useEffect(()=>{const T=()=>{const I=localStorage.getItem(lxe);I&&e(JSON.parse(I));const k=localStorage.getItem(cxe);k&&r(JSON.parse(k))};return T(),window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]);const{monthDays:d,monthName:h,year:p}=ee.useMemo(()=>{const T=s.getFullYear(),I=s.getMonth();return{monthDays:new Date(T,I+1,0).getDate(),monthName:s.toLocaleString("es-CL",{month:"long"}),year:T}},[s]),g=ee.useMemo(()=>{let T=n.filter(I=>I.profile===en.ESTUDIANTE&&I.curso&&eh.includes(gv(I.curso)));return i!=="todos"&&(T=T.filter(I=>gv(I.curso||"")===i)),l&&(T=T.filter(I=>I.nombreCompleto.toLowerCase().includes(l.toLowerCase()))),T.sort((I,k)=>I.nombreCompleto.localeCompare(k.nombreCompleto))},[n,i,l]),b=ee.useMemo(()=>{const T=new Map,I=s.getMonth(),k=s.getFullYear();return t.filter(D=>{const P=new Date(D.fechaHora);return P.getMonth()!==I||P.getFullYear()!==k?!1:i==="todos"?eh.includes(gv(D.curso||"")):gv(D.curso||"")===i}).forEach(D=>{const P=new Date(D.fechaHora).getDate();T.has(D.nombreEstudiante)||T.set(D.nombreEstudiante,new Map);const _=T.get(D.nombreEstudiante);_.has(P)||_.set(P,{});const N=_.get(P);D.tipo==="Entrada"?(!N.entrada||new Date(D.fechaHora)<new Date(N.entrada.fechaHora))&&(N.entrada=D):D.tipo==="Salida"&&(!N.salida||new Date(D.fechaHora)>new Date(N.salida.fechaHora))&&(N.salida=D)}),T},[t,s,i]),w=T=>{a(I=>{const k=new Date(I);return k.setMonth(k.getMonth()+T),k})},C=["D","L","M","M","J","V","S"];return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[A.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[A.jsx("button",{onClick:()=>w(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:"<"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${h} ${p}`}),A.jsx("button",{onClick:()=>w(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:">"})]}),A.jsxs("select",{value:i,onChange:T=>o(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"todos",children:"Todos los Cursos"}),eh.map(T=>A.jsx("option",{value:T,children:T},T))]}),A.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:l,onChange:T=>u(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:d},(T,I)=>{const R=new Date(p,s.getMonth(),I+1).getDay(),D=R===0||R===6;return A.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${D?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[A.jsx("div",{className:"font-semibold",children:C[R]}),A.jsx("div",{children:I+1})]},I)})]})}),A.jsx("tbody",{children:g.length>0?g.map(T=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[A.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:T.nombreCompleto}),Array.from({length:d},(I,k)=>{var N;const R=k+1,D=(N=b.get(T.nombreCompleto))==null?void 0:N.get(R),P=new Date(p,s.getMonth(),k+1),_=P.getDay()===0||P.getDay()===6;return A.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${_?"bg-slate-100 dark:bg-slate-700/50":""}`,children:A.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(D==null?void 0:D.entrada)&&A.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var B,O;return window.open(`https://www.google.com/maps?q=${(B=D.entrada)==null?void 0:B.ubicacion.latitud},${(O=D.entrada)==null?void 0:O.ubicacion.longitud}`,"_blank")},children:[A.jsx(uxe,{}),A.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(D.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(D==null?void 0:D.salida)&&A.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var B,O;return window.open(`https://www.google.com/maps?q=${(B=D.salida)==null?void 0:B.ubicacion.latitud},${(O=D.salida)==null?void 0:O.ubicacion.longitud}`,"_blank")},children:[A.jsx(Axe,{}),A.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(D.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},R)})]},T.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:d+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},m6="evaluacionesFormativas",p6="calificacionesFormativas",g6="trabajosGrupalesFormativos",fxe="usuariosLiceo",I7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},uy={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},F7=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},hxe=({cursos:t,onSelect:e})=>A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=F7(n);return A.jsxs("div",{className:"space-y-2 text-center",children:[A.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[A.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),A.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[A.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),A.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),A.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):A.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),A.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),mxe=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const s=F7(t);return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),A.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),A.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>A.jsxs("button",{onClick:()=>n(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[A.jsx("span",{className:"text-2xl",children:uy[a]||uy.Default}),A.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):A.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),A.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},pxe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=ee.useState(null),[p,g]=ee.useState(null);ee.useEffect(()=>{try{const B=localStorage.getItem(m6);B&&a(JSON.parse(B));const O=localStorage.getItem(p6);O&&o(JSON.parse(O))}catch(B){console.error("Error al cargar datos",B)}},[]);const b=B=>{a(B),localStorage.setItem(m6,JSON.stringify(B))},w=B=>{o(B),localStorage.setItem(p6,JSON.stringify(B))},C=ee.useMemo(()=>n.filter(B=>B.profile===en.ESTUDIANTE&&I7(B.curso||"")===t).map(B=>B.nombreCompleto).sort((B,O)=>B.localeCompare(O)),[n,t]),T=ee.useMemo(()=>s.filter(B=>B.curso===t&&B.asignatura===e).sort((B,O)=>new Date(B.fecha).getTime()-new Date(O.fecha).getTime()),[s,t,e]),I=B=>{const{name:O,value:M}=B.target;d?h(L=>L?{...L,[O]:M}:null):u(L=>({...L,[O]:M}))},k=B=>{if(B.preventDefault(),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const O={id:crypto.randomUUID(),asignatura:e,curso:t,...l};b([...s,O]);const M=C.reduce((L,H)=>(L[H]="trabajado",L),{});w({...i,[O.id]:M}),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),g(null)},R=(B,O)=>{var H;const L=(((H=i[B])==null?void 0:H[O])||"trabajado")==="trabajado"?"no trabajado":"trabajado";w({...i,[B]:{...i[B]||{},[O]:L}})},D=B=>h(B),P=()=>{d&&(b(s.map(B=>B.id===d.id?d:B)),h(null))},_=B=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?")){b(s.filter(M=>M.id!==B));const O={...i};delete O[B],w(O)}},N=ee.useCallback(B=>{if(T.length===0)return"-";let O=0,M=0;return T.forEach(L=>{var G;const H=(G=i[L.id])==null?void 0:G[B];H==="trabajado"?(O+=7,M++):H==="no trabajado"&&(O+=2,M++)}),M===0?"-":(O/M).toFixed(1)},[i,T]);return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),A.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),A.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),A.jsxs("div",{className:"w-full",children:[A.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),A.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"w-full",children:[A.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),A.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsx("div",{className:"w-full",children:A.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&A.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),T.map(B=>A.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===B.id?A.jsxs("div",{className:"flex flex-col gap-1",children:[A.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),A.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),A.jsx("button",{onClick:P,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("span",{className:"font-semibold",children:B.nombreActividad}),A.jsx("span",{className:"font-normal text-slate-500",children:B.fecha}),A.jsxs("div",{className:"flex gap-2 mt-1",children:[A.jsx("button",{onClick:()=>D(B),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),A.jsx("button",{onClick:()=>_(B.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},B.id)),A.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:C.map(B=>A.jsxs("tr",{children:[A.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:B}),T.map(O=>{var H;const L=((H=i[O.id])==null?void 0:H[B])==="trabajado";return A.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:A.jsx("button",{onClick:()=>R(O.id,B),className:`text-3xl transition-opacity duration-200 ${L?"opacity-100":"opacity-20"}`,children:uy[e]||uy.Default})},O.id)}),A.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:N(B)})]},B))})]})})]})},gxe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=ee.useState({}),[p,g]=ee.useState(2);ee.useEffect(()=>{try{const D=localStorage.getItem(g6);D&&a(JSON.parse(D))}catch(D){console.error("Error al cargar trabajos grupales",D)}},[]);const b=D=>{a(D),localStorage.setItem(g6,JSON.stringify(D))},w=ee.useMemo(()=>n.filter(D=>D.profile===en.ESTUDIANTE&&I7(D.curso||"")===t).sort((D,P)=>D.nombreCompleto.localeCompare(P.nombreCompleto)),[n,t]);ee.useEffect(()=>{if(i){const D={};i.grupos.forEach(P=>{P.integrantes.forEach(_=>{D[_.nombre]={groupNumber:String(P.numero),role:_.rol||""}})}),h(D)}else h({})},[i]);const C=D=>{if(D.preventDefault(),!l.nombre.trim())return;const P={id:crypto.randomUUID(),curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};b([P,...s]),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})},T=()=>{if(!i)return;const D=new Map;for(const N of w){const B=d[N.nombreCompleto];if(B&&B.groupNumber){const O=parseInt(B.groupNumber,10);isNaN(O)||(D.has(O)||D.set(O,[]),D.get(O).push({nombre:N.nombreCompleto,rol:B.role||void 0}))}}const P=Array.from(D.entries()).map(([N,B])=>({numero:N,integrantes:B})).sort((N,B)=>N.numero-B.numero),_={...i,grupos:P};b(s.map(N=>N.id===_.id?_:N)),o(_),alert("Grupos guardados con éxito.")},I=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const D=[...w].sort(()=>Math.random()-.5),P={};D.forEach((_,N)=>{var B;P[_.nombreCompleto]={groupNumber:String(N%p+1),role:((B=d[_.nombreCompleto])==null?void 0:B.role)||""}}),h(P)},k=(D,P,_)=>{h(N=>({...N,[D]:{...N[D],[P]:_}}))},R=ee.useMemo(()=>{const D=new Map;return Object.entries(d).forEach(([P,_])=>{_.groupNumber&&(D.has(_.groupNumber)||D.set(_.groupNumber,[]),D.get(_.groupNumber).push({nombre:P,rol:_.role}))}),Array.from(D.entries()).sort((P,_)=>parseInt(P[0])-parseInt(_[0]))},[d]);return i?A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),A.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),A.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"md:col-span-1 space-y-4",children:[A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"number",value:p,onChange:D=>g(parseInt(D.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),A.jsx("button",{onClick:I,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),A.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),A.jsx("table",{className:"w-full text-sm",children:A.jsx("tbody",{children:w.map(D=>{var P;return A.jsxs("tr",{children:[A.jsx("td",{className:"py-1 pr-2",children:D.nombreCompleto}),A.jsx("td",{className:"py-1",children:A.jsx("input",{type:"number",value:((P=d[D.nombreCompleto])==null?void 0:P.groupNumber)||"",onChange:_=>k(D.nombreCompleto,"groupNumber",_.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},D.id)})})})]})]}),A.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),A.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:R.map(([D,P])=>A.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[A.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",D]}),A.jsx("ul",{className:"space-y-2",children:P.map(_=>A.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[A.jsx("span",{className:"flex-1 truncate",children:_.nombre}),A.jsxs("select",{value:_.rol||"",onChange:N=>k(_.nombre,"role",N.target.value),className:"p-1 border rounded text-xs w-32",children:[A.jsx("option",{value:"",children:"-- Asignar Rol --"}),o8.map(N=>A.jsx("option",{value:N,children:N},N))]})]},_.nombre))})]},D))})]})]})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),A.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),A.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[A.jsx("input",{value:l.nombre,onChange:D=>u({...l,nombre:D.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),A.jsx("input",{type:"date",value:l.fecha,onChange:D=>u({...l,fecha:D.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.filter(D=>D.curso===t&&D.asignatura===e).map(D=>A.jsxs("button",{onClick:()=>o(D),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[A.jsx("p",{className:"font-bold",children:D.nombreActividad}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",D.fechaPresentacion]})]},D.id))]})]})},xxe=({currentUser:t})=>{const[e,n]=ee.useState("calificaciones"),[r,s]=ee.useState(null),[a,i]=ee.useState(null),[o,l]=ee.useState([]);ee.useEffect(()=>{try{const g=localStorage.getItem(fxe);g&&l(JSON.parse(g))}catch(g){console.error("Error al cargar usuarios",g)}},[]);const u=ee.useMemo(()=>t.cursos||[],[t.cursos]),d=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),h=({tab:g,label:b})=>A.jsx("button",{onClick:()=>n(g),className:`${e===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),p=()=>{if(!r)return A.jsx(hxe,{cursos:u,onSelect:s});if(!a)return A.jsx(mxe,{curso:r,asignaturas:d,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return A.jsx(pxe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return A.jsx(gxe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx(h,{tab:"calificaciones",label:"Calificaciones"}),A.jsx(h,{tab:"grupos",label:"Trabajos Grupales"})]})}),A.jsx("div",{className:"mt-6",children:p()})]})},Qx="acompanamientos",vxe=async()=>{try{const t=df(Wi(ts,Qx),ff("fecha","desc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},yxe=async t=>{try{return{id:(await Ix(Wi(ts,Qx),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},wxe=async(t,e)=>{try{const n=$i(ts,Qx,t);await kx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acompañamiento:",n,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},bxe=async t=>{try{const e=$i(ts,Qx,t);await Mm(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},Cxe=async t=>{try{const e=df(Wi(ts,Qx),e8("docente","==",t),ff("fecha","desc"));return(await Eu(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},Exe=async()=>{try{const t=$i(ts,"configuracion","rubricaAcompanamiento"),e=await r8(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},_xe=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),[s,a]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState("list"),[p,g]=ee.useState(null),[b,w]=ee.useState(!1),[C,T]=ee.useState(!1),I=V2,k=ee.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,D]=ee.useState(k),P=ee.useCallback(async()=>{a(!0);try{const re=await vxe();e(re),u(null)}catch(re){console.error("Error al cargar acompañamientos desde Firestore",re),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),_=ee.useCallback(async()=>{o(!0);try{const K=(await k7()).filter(Z=>Z.profile===en.PROFESORADO).map(Z=>Z.nombreCompleto).sort();r(K)}catch(re){console.error("Error al cargar profesores desde Firestore",re),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);ee.useEffect(()=>{P(),_()},[P,_]);const N=re=>{D(K=>({...K,[re.target.name]:re.target.value}))},B=(re,K)=>{D(Z=>({...Z,rubricaResultados:{...Z.rubricaResultados,[re]:K}}))},O=async()=>{w(!0);const{rubricaResultados:re,observacionesGenerales:K}=R;let Z=`Resultados de la Rúbrica:
`;I.forEach(j=>{j.criteria.forEach(W=>{const J=re[W.name];if(J&&W.levels[J-1]){const ne=W.levels[J-1];Z+=`- Criterio: "${W.name}" | Nivel: ${J} (${ne})
`}})}),Z+=`
Observaciones Generales del Evaluador:
${K||"No se proveyeron observaciones adicionales."}`;const Ae=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${Z}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{yo("Acompañamiento - Consolidar Feedback");const J=(await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:Ae})).text.replace(/(\*\*|\*)/g,"");D(ne=>({...ne,retroalimentacionConsolidada:J}))}catch(j){console.error("Error al generar retroalimentación con IA",j),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{w(!1)}},M=async()=>{const re=p;if(!re)return;T(!0);const K=t.find(Se=>Se.id===re);if(!K){T(!1);return}const Z=new an({orientation:"p",unit:"mm",format:"a4"}),Ae=20,j=Z.internal.pageSize.getWidth(),W=Z.internal.pageSize.getHeight(),J=j-Ae*2;let ne=Ae;const ie=Se=>{Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(100),Se.text("LICEO INDUSTRIAL DE RECOLETA",j/2,15,{align:"center"})};ie(Z),Z.setFont("helvetica","bold"),Z.setFontSize(18),Z.setTextColor(40),Z.text("Informe de Acompañamiento Docente",j/2,ne+10,{align:"center"}),ne+=25,Wo(Z,{startY:ne,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},K.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(K.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},K.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},K.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ne=Z.lastAutoTable.finalY+10;const de=[],me=["Débil","Incipiente","Satisfactorio","Avanzado"];I.forEach(Se=>{de.push([{content:Se.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Se.criteria.forEach(ge=>{const ae=K.rubricaResultados[ge.name],Fe=ae?me[ae-1]:"No evaluado";de.push([ge.name,Fe])})}),Wo(Z,{startY:ne,head:[["Indicador","Nivel de Logro"]],body:de,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Se=>{Se.pageNumber>1&&ie(Z)}}),ne=Z.lastAutoTable.finalY+15;const xe=(Se,ge)=>{ne>W-Ae-10&&(Z.addPage(),ie(Z),ne=Ae),Z.setFont("helvetica",ge.style),Z.setFontSize(ge.size);const ae=Z.splitTextToSize(Se,J),Fe=ae.length*(ge.size*.352778*1.15);ne+Fe>W-Ae&&(Z.addPage(),ie(Z),ne=Ae),Z.text(ae,Ae,ne,{align:"left"}),ne+=Fe+(ge.isTitle?5:8)};K.retroalimentacionConsolidada?K.retroalimentacionConsolidada.split(/(?=## )/).forEach(ge=>{if(ge.trim()){const ae=ge.trim().split(`
`),Fe=ae[0].replace("## ",""),et=ae.slice(1).join(`
`).trim();xe(Fe,{size:14,style:"bold",isTitle:!0}),xe(et,{size:11,style:"normal",isTitle:!1})}}):(xe("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),xe("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),Z.save(`Acompanamiento_${K.docente.replace(/\s/g,"_")}_${new Date(K.fecha).toLocaleDateString("es-CL")}.pdf`),T(!1)},L=async re=>{if(re.preventDefault(),!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let K=p;if(p)await wxe(p,R);else{const Z=await yxe(R);g(Z.id),D({...R}),K=Z.id}await P(),K&&alert("¡Guardado correctamente!")}catch(K){console.error("Error al guardar acompañamiento:",K),u("Error al guardar el registro en la nube.")}},H=()=>{D(k),g(null),h("form"),u(null)},G=re=>{D(re),g(re.id),h("form"),u(null)},oe=async re=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await bxe(re),await P()}catch(K){console.error("Error al eliminar acompañamiento:",K),u("No se pudo eliminar el registro en la nube.")}},q=()=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),A.jsx("button",{onClick:H,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),A.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(re=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.docente}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[re.curso," - ",re.asignatura]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(re.fecha).toLocaleDateString("es-CL")]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>G(re),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),A.jsx("button",{onClick:()=>oe(re.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},re.id))})]}),X=()=>A.jsx("div",{className:"animate-fade-in",children:A.jsxs("form",{onSubmit:L,className:"space-y-8",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:p?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),A.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),A.jsxs("select",{name:"docente",value:R.docente,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[A.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),n.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:R.curso,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione"}),Zs.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignatura",value:R.asignatura,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione"}),$o.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),A.jsx("input",{type:"text",name:"bloques",value:R.bloques,onChange:N,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:I.map(re=>A.jsx(At.Fragment,{children:re.criteria.map((K,Z)=>A.jsxs("tr",{children:[Z===0&&A.jsx("td",{rowSpan:re.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:re.domain}),A.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:K.name}),K.levels.map((Ae,j)=>{const W=j+1,J=R.rubricaResultados[K.name]===W;return A.jsx("td",{onClick:()=>B(K.name,W),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${J?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:Ae},W)})]},K.name))},re.domain))})]})}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),A.jsx("textarea",{name:"observacionesGenerales",value:R.observacionesGenerales,onChange:N,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("textarea",{name:"retroalimentacionConsolidada",value:R.retroalimentacionConsolidada,onChange:N,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),A.jsx("button",{type:"button",onClick:O,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),A.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[A.jsx("button",{type:"button",onClick:M,disabled:!p||C,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:C?"...":"Exportar PDF"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),A.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?q():X()})]})},tE="mensajesInternos",Sxe="usuariosLiceo",x6="lir-read-status",Txe=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=ee.useState("inbox"),[s,a]=ee.useState([]),[i,o]=ee.useState([]),[l,u]=ee.useState(null),[d,h]=ee.useState({announcements:[],messages:[]}),p={para:"",asunto:"",cuerpo:""},[g,b]=ee.useState(p);ee.useEffect(()=>{try{const _=localStorage.getItem(tE);_&&a(JSON.parse(_));const N=localStorage.getItem(Sxe);N&&o(JSON.parse(N));const B=localStorage.getItem(`${x6}-${t.id}`);B&&h(JSON.parse(B))}catch(_){console.error("Error loading messaging data",_)}},[t.id]);const w=_=>{a(_),localStorage.setItem(tE,JSON.stringify(_))},C=_=>{h(_),localStorage.setItem(`${x6}-${t.id}`,JSON.stringify(_)),e()},T=_=>{if(u(_),n==="inbox"&&!d.messages.includes(_.id)){const N={...d,messages:[...d.messages,_.id]};C(N)}},I=_=>{if(_.preventDefault(),!g.para||!g.asunto.trim()||!g.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={id:crypto.randomUUID(),de:t.email,para:g.para,asunto:g.asunto,cuerpo:g.cuerpo,fecha:new Date().toISOString()},B=localStorage.getItem(tE),O=B?JSON.parse(B):[],M=[N,...O];w(M),b(p),r("sent")},k=_=>{window.confirm("¿Está seguro de que desea eliminar este mensaje?")&&(w(s.filter(N=>N.id!==_)),u(null))},R=_=>{b({para:_.de,asunto:`Re: ${_.asunto}`,cuerpo:`

--- Mensaje Original ---
${_.cuerpo}`}),r("compose")},D=ee.useMemo(()=>s.filter(_=>_.para===t.email).sort((_,N)=>new Date(N.fecha).getTime()-new Date(_.fecha).getTime()),[s,t.email]),P=ee.useMemo(()=>s.filter(_=>_.de===t.email).sort((_,N)=>new Date(N.fecha).getTime()-new Date(_.fecha).getTime()),[s,t.email]);return A.jsxs("div",{className:"bg-white rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[A.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 flex flex-col",children:[A.jsx("div",{className:"p-4 border-b",children:A.jsx("button",{onClick:()=>{r("compose"),u(null)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700",children:"Redactar"})}),A.jsxs("nav",{className:"p-2 space-y-1",children:[A.jsx("button",{onClick:()=>{r("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Recibidos"}),A.jsx("button",{onClick:()=>{r("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Enviados"})]})]}),n!=="compose"&&A.jsx("div",{className:"w-1/3 md:w-2/5 border-r overflow-y-auto",children:(n==="inbox"?D:P).map(_=>{const N=n==="inbox"&&!d.messages.includes(_.id);return A.jsxs("div",{onClick:()=>T(_),className:`p-4 border-b cursor-pointer ${(l==null?void 0:l.id)===_.id?"bg-amber-50":"hover:bg-slate-50"}`,children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsx("p",{className:`font-bold truncate ${N?"text-slate-800":"text-slate-600"}`,children:n==="inbox"?_.de:`Para: ${_.para}`}),N&&A.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),A.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 font-semibold":"text-slate-500"}`,children:_.asunto}),A.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(_.fecha).toLocaleString("es-CL")})]},_.id)})}),A.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Nuevo Mensaje"}),A.jsxs("form",{onSubmit:I,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 mb-1",children:"Para:"}),A.jsxs("select",{id:"para",value:g.para,onChange:_=>b({...g,para:_.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm",children:[A.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(_=>_.email!==t.email).map(_=>A.jsxs("option",{value:_.email,children:[_.nombreCompleto," (",_.email,")"]},_.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto:"}),A.jsx("input",{type:"text",id:"asunto",value:g.asunto,onChange:_=>b({...g,asunto:_.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 mb-1",children:"Cuerpo del Mensaje:"}),A.jsx("textarea",{id:"cuerpo",value:g.cuerpo,onChange:_=>b({...g,cuerpo:_.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700",children:"Enviar Mensaje"})})]})]}):l?A.jsxs("div",{children:[A.jsxs("div",{className:"border-b pb-4 mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:l.asunto}),A.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:[A.jsx("strong",{children:"De:"})," ",l.de," ",A.jsx("br",{}),A.jsx("strong",{children:"Para:"})," ",l.para," ",A.jsx("br",{}),A.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),A.jsx("div",{className:"whitespace-pre-wrap text-slate-700",children:l.cuerpo}),A.jsxs("div",{className:"mt-8 pt-4 border-t flex gap-2",children:[n==="inbox"&&A.jsx("button",{onClick:()=>R(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Responder"}),A.jsx("button",{onClick:()=>k(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200",children:"Eliminar"})]})]}):A.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500",children:A.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X_=function(t,e){return X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},X_(t,e)};function Tc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Z_=function(){return Z_=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Z_.apply(this,arguments)};function Gi(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(h){i(h)}}function l(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,[])).next())})}function _i(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function xv(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||e)}var SA=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ew=function(t,e){return SA.fromClientRect(t,e.getBoundingClientRect())},Bxe=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new SA(0,0,r,s)},_w=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Ks=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},v6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vv=0;vv<v6.length;vv++)Nxe[v6.charCodeAt(vv)]=vv;var y6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yv=0;yv<y6.length;yv++)sg[y6.charCodeAt(yv)]=yv;var kxe=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=sg[t.charCodeAt(r)],i=sg[t.charCodeAt(r+1)],o=sg[t.charCodeAt(r+2)],l=sg[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},Ixe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Fxe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},ih=5,N4=11,nE=2,Rxe=N4-ih,R7=65536>>ih,Dxe=1<<ih,rE=Dxe-1,Uxe=1024>>ih,Lxe=R7+Uxe,Mxe=Lxe,Pxe=32,jxe=Mxe+Pxe,Oxe=65536>>N4,Qxe=1<<Rxe,Hxe=Qxe-1,w6=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Vxe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Gxe=function(t,e){var n=kxe(t),r=Array.isArray(n)?Fxe(n):new Uint32Array(n),s=Array.isArray(n)?Ixe(n):new Uint16Array(n),a=24,i=w6(s,a/2,r[4]/2),o=r[5]===2?w6(s,(a+r[4])/2):Vxe(r,Math.ceil((a+r[4])/4));return new zxe(r[0],r[1],r[2],r[3],i,o)},zxe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>ih],n=(n<<nE)+(e&rE),this.data[n];if(e<=65535)return n=this.index[R7+(e-55296>>ih)],n=(n<<nE)+(e&rE),this.data[n];if(e<this.highStart)return n=jxe-Oxe+(e>>N4),n=this.index[n],n+=e>>ih&Hxe,n=this.index[n],n=(n<<nE)+(e&rE),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),b6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wv=0;wv<b6.length;wv++)qxe[b6.charCodeAt(wv)]=wv;var Kxe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",C6=50,Wxe=1,D7=2,U7=3,$xe=4,Yxe=5,E6=7,L7=8,_6=9,Ud=10,eS=11,S6=12,tS=13,Jxe=14,ag=15,nS=16,bv=17,Pp=18,Xxe=19,T6=20,rS=21,jp=22,sE=23,x0=24,Qo=25,ig=26,og=27,v0=28,Zxe=29,Kf=30,e1e=31,Cv=32,Ev=33,sS=34,aS=35,iS=36,lx=37,oS=38,h2=39,m2=40,aE=41,M7=42,t1e=43,n1e=[9001,65288],P7="!",nr="×",_v="÷",lS=Gxe(Kxe),oA=[Kf,iS],cS=[Wxe,D7,U7,Yxe],j7=[Ud,L7],B6=[og,ig],r1e=cS.concat(j7),N6=[oS,h2,m2,sS,aS],s1e=[ag,tS],a1e=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(a,i){var o=lS.get(a);if(o>C6?(s.push(!0),o-=C6):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(i),n.push(nS);if(o===$xe||o===eS){if(i===0)return r.push(i),n.push(Kf);var l=n[i-1];return r1e.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(Kf))}if(r.push(i),o===e1e)return n.push(e==="strict"?rS:lx);if(o===M7||o===Zxe)return n.push(Kf);if(o===t1e)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(lx):n.push(Kf);n.push(o)}),[r,n,s]},iE=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==Ud)break}if(s===Ud)for(var a=n;a>0;){a--;var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==Ud)break}if(o!==Ud)break}return!1},k6=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Ud)n--;else return r}return 0},i1e=function(t,e,n,r,s){if(n[r]===0)return nr;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return nr;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,d=e[o];if(l===D7&&d===U7)return nr;if(cS.indexOf(l)!==-1)return P7;if(cS.indexOf(d)!==-1||j7.indexOf(d)!==-1)return nr;if(k6(a,e)===L7)return _v;if(lS.get(t[a])===eS||(l===Cv||l===Ev)&&lS.get(t[o])===eS||l===E6||d===E6||l===_6||[Ud,tS,ag].indexOf(l)===-1&&d===_6||[bv,Pp,Xxe,x0,v0].indexOf(d)!==-1||k6(a,e)===jp||iE(sE,jp,a,e)||iE([bv,Pp],rS,a,e)||iE(S6,S6,a,e))return nr;if(l===Ud)return _v;if(l===sE||d===sE)return nr;if(d===nS||l===nS)return _v;if([tS,ag,rS].indexOf(d)!==-1||l===Jxe||u===iS&&s1e.indexOf(l)!==-1||l===v0&&d===iS||d===T6||oA.indexOf(d)!==-1&&l===Qo||oA.indexOf(l)!==-1&&d===Qo||l===og&&[lx,Cv,Ev].indexOf(d)!==-1||[lx,Cv,Ev].indexOf(l)!==-1&&d===ig||oA.indexOf(l)!==-1&&B6.indexOf(d)!==-1||B6.indexOf(l)!==-1&&oA.indexOf(d)!==-1||[og,ig].indexOf(l)!==-1&&(d===Qo||[jp,ag].indexOf(d)!==-1&&e[o+1]===Qo)||[jp,ag].indexOf(l)!==-1&&d===Qo||l===Qo&&[Qo,v0,x0].indexOf(d)!==-1)return nr;if([Qo,v0,x0,bv,Pp].indexOf(d)!==-1)for(var h=a;h>=0;){var p=e[h];if(p===Qo)return nr;if([v0,x0].indexOf(p)!==-1)h--;else break}if([og,ig].indexOf(d)!==-1)for(var h=[bv,Pp].indexOf(l)!==-1?i:a;h>=0;){var p=e[h];if(p===Qo)return nr;if([v0,x0].indexOf(p)!==-1)h--;else break}if(oS===l&&[oS,h2,sS,aS].indexOf(d)!==-1||[h2,sS].indexOf(l)!==-1&&[h2,m2].indexOf(d)!==-1||[m2,aS].indexOf(l)!==-1&&d===m2||N6.indexOf(l)!==-1&&[T6,ig].indexOf(d)!==-1||N6.indexOf(d)!==-1&&l===og||oA.indexOf(l)!==-1&&oA.indexOf(d)!==-1||l===x0&&oA.indexOf(d)!==-1||oA.concat(Qo).indexOf(l)!==-1&&d===jp&&n1e.indexOf(t[o])===-1||oA.concat(Qo).indexOf(d)!==-1&&l===Pp)return nr;if(l===aE&&d===aE){for(var g=n[a],b=1;g>0&&(g--,e[g]===aE);)b++;if(b%2!==0)return nr}return l===Cv&&d===Ev?nr:_v},o1e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=a1e(t,e.lineBreak),r=n[0],s=n[1],a=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Qo,Kf,M7].indexOf(o)!==-1?lx:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,i]},l1e=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===P7,this.start=r,this.end=s}return t.prototype.slice=function(){return Ks.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),c1e=function(t,e){var n=_w(t),r=o1e(n,e),s=r[0],a=r[1],i=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=nr;u<o&&(d=i1e(n,a,s,++u,i))===nr;);if(d!==nr||u===o){var h=new l1e(n,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},u1e=1,A1e=2,Hx=4,I6=8,Ay=10,F6=47,Ig=92,d1e=9,f1e=32,Sv=34,Op=61,h1e=35,m1e=36,p1e=37,Tv=39,Bv=40,Qp=41,g1e=95,mo=45,x1e=33,v1e=60,y1e=62,w1e=64,b1e=91,C1e=93,E1e=61,_1e=123,Nv=63,S1e=125,R6=124,T1e=126,B1e=128,D6=65533,oE=42,Yf=43,N1e=44,k1e=58,I1e=59,cx=46,F1e=0,R1e=8,D1e=11,U1e=14,L1e=31,M1e=127,ou=-1,O7=48,Q7=97,H7=101,P1e=102,j1e=117,O1e=122,V7=65,G7=69,z7=70,Q1e=85,H1e=90,Ni=function(t){return t>=O7&&t<=57},V1e=function(t){return t>=55296&&t<=57343},y0=function(t){return Ni(t)||t>=V7&&t<=z7||t>=Q7&&t<=P1e},G1e=function(t){return t>=Q7&&t<=O1e},z1e=function(t){return t>=V7&&t<=H1e},q1e=function(t){return G1e(t)||z1e(t)},K1e=function(t){return t>=B1e},kv=function(t){return t===Ay||t===d1e||t===f1e},dy=function(t){return q1e(t)||K1e(t)||t===g1e},U6=function(t){return dy(t)||Ni(t)||t===mo},W1e=function(t){return t>=F1e&&t<=R1e||t===D1e||t>=U1e&&t<=L1e||t===M1e},Cd=function(t,e){return t!==Ig?!1:e!==Ay},Iv=function(t,e,n){return t===mo?dy(e)||Cd(e,n):dy(t)?!0:!!(t===Ig&&Cd(t,e))},lE=function(t,e,n){return t===Yf||t===mo?Ni(e)?!0:e===cx&&Ni(n):Ni(t===cx?e:t)},$1e=function(t){var e=0,n=1;(t[e]===Yf||t[e]===mo)&&(t[e]===mo&&(n=-1),e++);for(var r=[];Ni(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Ks.apply(void 0,r),10):0;t[e]===cx&&e++;for(var a=[];Ni(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(Ks.apply(void 0,a),10):0;(t[e]===G7||t[e]===H7)&&e++;var l=1;(t[e]===Yf||t[e]===mo)&&(t[e]===mo&&(l=-1),e++);for(var u=[];Ni(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Ks.apply(void 0,u),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},Y1e={type:2},J1e={type:3},X1e={type:4},Z1e={type:13},eve={type:8},tve={type:21},nve={type:9},rve={type:10},sve={type:11},ave={type:12},ive={type:14},Fv={type:23},ove={type:1},lve={type:25},cve={type:24},uve={type:26},Ave={type:27},dve={type:28},fve={type:29},hve={type:31},uS={type:32},q7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(_w(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==uS;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Sv:return this.consumeStringToken(Sv);case h1e:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(U6(n)||Cd(r,s)){var a=Iv(n,r,s)?A1e:u1e,i=this.consumeName();return{type:5,value:i,flags:a}}break;case m1e:if(this.peekCodePoint(0)===Op)return this.consumeCodePoint(),Z1e;break;case Tv:return this.consumeStringToken(Tv);case Bv:return Y1e;case Qp:return J1e;case oE:if(this.peekCodePoint(0)===Op)return this.consumeCodePoint(),ive;break;case Yf:if(lE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case N1e:return X1e;case mo:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(lE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Iv(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===mo&&u===y1e)return this.consumeCodePoint(),this.consumeCodePoint(),cve;break;case cx:if(lE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case F6:if(this.peekCodePoint(0)===oE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===oE&&(d=this.consumeCodePoint(),d===F6))return this.consumeToken();if(d===ou)return this.consumeToken()}break;case k1e:return uve;case I1e:return Ave;case v1e:if(this.peekCodePoint(0)===x1e&&this.peekCodePoint(1)===mo&&this.peekCodePoint(2)===mo)return this.consumeCodePoint(),this.consumeCodePoint(),lve;break;case w1e:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Iv(h,p,g)){var i=this.consumeName();return{type:7,value:i}}break;case b1e:return dve;case Ig:if(Cd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case C1e:return fve;case E1e:if(this.peekCodePoint(0)===Op)return this.consumeCodePoint(),eve;break;case _1e:return sve;case S1e:return ave;case j1e:case Q1e:var b=this.peekCodePoint(0),w=this.peekCodePoint(1);return b===Yf&&(y0(w)||w===Nv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case R6:if(this.peekCodePoint(0)===Op)return this.consumeCodePoint(),nve;if(this.peekCodePoint(0)===R6)return this.consumeCodePoint(),tve;break;case T1e:if(this.peekCodePoint(0)===Op)return this.consumeCodePoint(),rve;break;case ou:return uS}return kv(e)?(this.consumeWhiteSpace(),hve):Ni(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):dy(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ks(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();y0(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Nv&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Ks.apply(void 0,e.map(function(l){return l===Nv?O7:l})),16),a=parseInt(Ks.apply(void 0,e.map(function(l){return l===Nv?z7:l})),16);return{type:30,start:s,end:a}}var i=parseInt(Ks.apply(void 0,e),16);if(this.peekCodePoint(0)===mo&&y0(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];y0(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var a=parseInt(Ks.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Bv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Bv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ou)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Tv||n===Sv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ou||this.peekCodePoint(0)===Qp)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Fv)}for(;;){var s=this.consumeCodePoint();if(s===ou||s===Qp)return{type:22,value:Ks.apply(void 0,e)};if(kv(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ou||this.peekCodePoint(0)===Qp?(this.consumeCodePoint(),{type:22,value:Ks.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Fv);if(s===Sv||s===Tv||s===Bv||W1e(s))return this.consumeBadUrlRemnants(),Fv;if(s===Ig)if(Cd(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Fv;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;kv(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Qp||e===ou)return;Cd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Ks.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===ou||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===Ay)return this._value.splice(0,r),ove;if(s===Ig){var a=this._value[r+1];a!==ou&&a!==void 0&&(a===Ay?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Cd(s,a)&&(n+=this.consumeStringSlice(r),n+=Ks(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Hx,r=this.peekCodePoint(0);for((r===Yf||r===mo)&&e.push(this.consumeCodePoint());Ni(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===cx&&Ni(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=I6;Ni(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===G7||r===H7)&&((s===Yf||s===mo)&&Ni(a)||Ni(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=I6;Ni(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[$1e(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Iv(s,a,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===p1e?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(y0(e)){for(var n=Ks(e);y0(this.peekCodePoint(0))&&n.length<6;)n+=Ks(this.consumeCodePoint());kv(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||V1e(r)||r>1114111?D6:r}return e===ou?D6:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(U6(n))e+=Ks(n);else if(Cd(n,this.peekCodePoint(0)))e+=Ks(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),K7=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new q7;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||pve(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?uS:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Vx=function(t){return t.type===15},qm=function(t){return t.type===17},qr=function(t){return t.type===20},mve=function(t){return t.type===0},AS=function(t,e){return qr(t)&&t.value===e},W7=function(t){return t.type!==31},_m=function(t){return t.type!==31&&t.type!==4},Bu=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},pve=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},lf=function(t){return t.type===17||t.type===15},ha=function(t){return t.type===16||lf(t)},$7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ai={type:17,number:0,flags:Hx},k4={type:16,number:50,flags:Hx},Ld={type:16,number:100,flags:Hx},lg=function(t,e,n){var r=t[0],s=t[1];return[es(r,e),es(typeof s<"u"?s:r,n)]},es=function(t,e){if(t.type===16)return t.number/100*e;if(Vx(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Y7="deg",J7="grad",X7="rad",Z7="turn",Sw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Y7:return Math.PI*e.number/180;case J7:return Math.PI/200*e.number;case X7:return e.number;case Z7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},ej=function(t){return t.type===15&&(t.unit===Y7||t.unit===J7||t.unit===X7||t.unit===Z7)},tj=function(t){var e=t.filter(qr).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ai,ai];case"to top":case"bottom":return Il(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ai,Ld];case"to right":case"left":return Il(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ld,Ld];case"to bottom":case"top":return Il(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ld,ai];case"to left":case"right":return Il(270)}return 0},Il=function(t){return Math.PI*t/180},Gd={name:"color",parse:function(t,e){if(e.type===18){var n=gve[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return Md(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return Md(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return Md(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return Md(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=vA[e.value.toUpperCase()];if(typeof o<"u")return o}return vA.TRANSPARENT}},zd=function(t){return(255&t)===0},Pa=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},Md=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},L6=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},M6=function(t,e){var n=e.filter(_m);if(n.length===3){var r=n.map(L6),s=r[0],a=r[1],i=r[2];return Md(s,a,i,1)}if(n.length===4){var o=n.map(L6),s=o[0],a=o[1],i=o[2],l=o[3];return Md(s,a,i,l)}return 0};function cE(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var P6=function(t,e){var n=e.filter(_m),r=n[0],s=n[1],a=n[2],i=n[3],o=(r.type===17?Il(r.number):Sw.parse(t,r))/(Math.PI*2),l=ha(s)?s.number/100:0,u=ha(a)?a.number/100:0,d=typeof i<"u"&&ha(i)?es(i,1):1;if(l===0)return Md(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,p=u*2-h,g=cE(p,h,o+1/3),b=cE(p,h,o),w=cE(p,h,o-1/3);return Md(g*255,b*255,w*255,d)},gve={hsl:P6,hsla:P6,rgb:M6,rgba:M6},Fg=function(t,e){return Gd.parse(t,K7.create(e).parseComponentValue())},vA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},xve={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(qr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},vve={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tw=function(t,e){var n=Gd.parse(t,e[0]),r=e[1];return r&&ha(r)?{color:n,stop:r}:{color:n,stop:null}},j6=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=ai),r.stop===null&&(r.stop=Ld);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=es(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var u=null,i=0;i<s.length;i++){var d=s[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,p=s[u-1],g=(d-p)/(h+1),b=1;b<=h;b++)s[u+b-1]=g*b;u=null}}return t.map(function(w,C){var T=w.color;return{color:T,stop:Math.max(Math.min(1,s[C]/e),0)}})},yve=function(t,e,n){var r=e/2,s=n/2,a=es(t[0],e)-r,i=s-es(t[1],n);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},wve=function(t,e,n){var r=typeof t=="number"?t:yve(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,u=Math.cos(r-Math.PI/2)*o;return[s,a-u,a+u,i-l,i+l]},Ac=function(t,e){return Math.sqrt(t*t+e*e)},O6=function(t,e,n,r,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],d=Ac(n-l,r-u);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},bve=function(t,e,n,r,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)a=i=Math.min(Ac(e,n),Ac(e,n-s),Ac(e-r,n),Ac(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=O6(r,s,e,n,!0),u=l[0],d=l[1];a=Ac(u-e,(d-n)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)a=i=Math.max(Ac(e,n),Ac(e,n-s),Ac(e-r,n),Ac(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=O6(r,s,e,n,!1),u=h[0],d=h[1];a=Ac(u-e,(d-n)/o),i=o*a}break}return Array.isArray(t.size)&&(a=es(t.size[0],r),i=t.size.length===2?es(t.size[1],s):a),[a,i]},Cve=function(t,e){var n=Il(180),r=[];return Bu(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){n=tj(s);return}else if(ej(i)){n=Sw.parse(t,i);return}}var o=Tw(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Rv=function(t,e){var n=Il(180),r=[];return Bu(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=tj(s);return}else if(ej(i)){n=(Sw.parse(t,i)+Il(270))%Il(360);return}}var o=Tw(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Eve=function(t,e){var n=Il(180),r=[],s=1,a=0,i=3,o=[];return Bu(e).forEach(function(l,u){var d=l[0];if(u===0){if(qr(d)&&d.value==="linear"){s=1;return}else if(qr(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=Gd.parse(t,d.values[0]);r.push({stop:ai,color:h})}else if(d.name==="to"){var h=Gd.parse(t,d.values[0]);r.push({stop:Ld,color:h})}else if(d.name==="color-stop"){var p=d.values.filter(_m);if(p.length===2){var h=Gd.parse(t,p[1]),g=p[0];qm(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),s===1?{angle:(n+Il(180))%Il(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}},nj="closest-side",rj="farthest-side",sj="closest-corner",aj="farthest-corner",ij="circle",oj="ellipse",lj="cover",cj="contain",_ve=function(t,e){var n=0,r=3,s=[],a=[];return Bu(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,p){if(u)if(qr(p))switch(p.value){case"center":return a.push(k4),h;case"top":case"left":return a.push(ai),h;case"right":case"bottom":return a.push(Ld),h}else(ha(p)||lf(p))&&a.push(p);else if(qr(p))switch(p.value){case ij:return n=0,!1;case oj:return n=1,!1;case"at":return u=!0,!1;case nj:return r=0,!1;case lj:case rj:return r=1,!1;case cj:case sj:return r=2,!1;case aj:return r=3,!1}else if(lf(p)||ha(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return h},l)}if(l){var d=Tw(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:a,type:2}},Dv=function(t,e){var n=0,r=3,s=[],a=[];return Bu(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(qr(h))switch(h.value){case"center":return a.push(k4),!1;case"top":case"left":return a.push(ai),!1;case"right":case"bottom":return a.push(Ld),!1}else if(ha(h)||lf(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(qr(h))switch(h.value){case ij:return n=0,!1;case oj:return n=1,!1;case cj:case nj:return r=0,!1;case rj:return r=1,!1;case sj:return r=2,!1;case lj:case aj:return r=3,!1}else if(lf(h)||ha(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},l)),l){var u=Tw(t,i);s.push(u)}}),{size:r,shape:n,stops:s,position:a,type:2}},Sve=function(t){return t.type===1},Tve=function(t){return t.type===2},I4={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=uj[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Bve(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!uj[t.name])}var uj={"linear-gradient":Cve,"-moz-linear-gradient":Rv,"-ms-linear-gradient":Rv,"-o-linear-gradient":Rv,"-webkit-linear-gradient":Rv,"radial-gradient":_ve,"-moz-radial-gradient":Dv,"-ms-radial-gradient":Dv,"-o-radial-gradient":Dv,"-webkit-radial-gradient":Dv,"-webkit-gradient":Eve},Nve={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return _m(r)&&Bve(r)}).map(function(r){return I4.parse(t,r)})}},kve={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(qr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ive={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Bu(e).map(function(n){return n.filter(ha)}).map($7)}},Fve={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Bu(e).map(function(n){return n.filter(qr).map(function(r){return r.value}).join(" ")}).map(Rve)}},Rve=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(cm||(cm={}));var Dve={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Bu(e).map(function(n){return n.filter(Uve)})}},Uve=function(t){return qr(t)||ha(t)},Bw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Lve=Bw("top"),Mve=Bw("right"),Pve=Bw("bottom"),jve=Bw("left"),Nw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return $7(n.filter(ha))}}},Ove=Nw("top-left"),Qve=Nw("top-right"),Hve=Nw("bottom-right"),Vve=Nw("bottom-left"),kw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Gve=kw("top"),zve=kw("right"),qve=kw("bottom"),Kve=kw("left"),Iw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Vx(n)?n.number:0}}},Wve=Iw("top"),$ve=Iw("right"),Yve=Iw("bottom"),Jve=Iw("left"),Xve={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zve={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},e2e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).reduce(function(n,r){return n|t2e(r.value)},0)}},t2e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},n2e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},r2e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},fy;(function(t){t.NORMAL="normal",t.STRICT="strict"})(fy||(fy={}));var s2e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return fy.STRICT;case"normal":default:return fy.NORMAL}}},a2e={name:"line-height",initialValue:"normal",prefix:!1,type:4},Q6=function(t,e){return qr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ha(t)?es(t,e):e},i2e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:I4.parse(t,e)}},o2e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},dS={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Fw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},l2e=Fw("top"),c2e=Fw("right"),u2e=Fw("bottom"),A2e=Fw("left"),d2e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},f2e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Rw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},h2e=Rw("top"),m2e=Rw("right"),p2e=Rw("bottom"),g2e=Rw("left"),x2e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},v2e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},y2e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&AS(e[0],"none")?[]:Bu(e).map(function(n){for(var r={color:vA.TRANSPARENT,offsetX:ai,offsetY:ai,blur:ai},s=0,a=0;a<n.length;a++){var i=n[a];lf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=Gd.parse(t,i)}return r})}},w2e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},b2e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=_2e[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},C2e=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},E2e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,a,i,o]:null},_2e={matrix:C2e,matrix3d:E2e},H6={type:16,number:50,flags:Hx},S2e=[H6,H6],T2e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(ha);return n.length!==2?S2e:[n[0],n[1]]}},B2e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Rg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Rg||(Rg={}));var N2e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Rg.BREAK_ALL;case"keep-all":return Rg.KEEP_ALL;case"normal":default:return Rg.NORMAL}}},k2e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(qm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Aj={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},I2e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return qm(e)?e.number:1}},F2e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},R2e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},D2e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},U2e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},L2e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(qm(e))return e.number;if(qr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},M2e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(qr).map(function(n){return n.value})}},P2e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_a=function(t,e){return(t&e)!==0},j2e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},O2e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(W7),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&qm(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},Q2e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(W7),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(qr(a)&&a.value!=="none"){var o=i&&qm(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},H2e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Vx).map(function(n){return Aj.parse(t,n)})}},V2e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(mve);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},V6=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},G2e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&AS(e[0],"none")?[]:Bu(e).map(function(n){for(var r={color:255,offsetX:ai,offsetY:ai,blur:ai,spread:ai,inset:!1},s=0,a=0;a<n.length;a++){var i=n[a];AS(i,"inset")?r.inset=!0:lf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=Gd.parse(t,i)}return r})}},z2e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(qr).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},q2e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},K2e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Vx(e)?e.number:0}},W2e=function(){function t(e,n){var r,s;this.animationDuration=Kt(e,H2e,n.animationDuration),this.backgroundClip=Kt(e,xve,n.backgroundClip),this.backgroundColor=Kt(e,vve,n.backgroundColor),this.backgroundImage=Kt(e,Nve,n.backgroundImage),this.backgroundOrigin=Kt(e,kve,n.backgroundOrigin),this.backgroundPosition=Kt(e,Ive,n.backgroundPosition),this.backgroundRepeat=Kt(e,Fve,n.backgroundRepeat),this.backgroundSize=Kt(e,Dve,n.backgroundSize),this.borderTopColor=Kt(e,Lve,n.borderTopColor),this.borderRightColor=Kt(e,Mve,n.borderRightColor),this.borderBottomColor=Kt(e,Pve,n.borderBottomColor),this.borderLeftColor=Kt(e,jve,n.borderLeftColor),this.borderTopLeftRadius=Kt(e,Ove,n.borderTopLeftRadius),this.borderTopRightRadius=Kt(e,Qve,n.borderTopRightRadius),this.borderBottomRightRadius=Kt(e,Hve,n.borderBottomRightRadius),this.borderBottomLeftRadius=Kt(e,Vve,n.borderBottomLeftRadius),this.borderTopStyle=Kt(e,Gve,n.borderTopStyle),this.borderRightStyle=Kt(e,zve,n.borderRightStyle),this.borderBottomStyle=Kt(e,qve,n.borderBottomStyle),this.borderLeftStyle=Kt(e,Kve,n.borderLeftStyle),this.borderTopWidth=Kt(e,Wve,n.borderTopWidth),this.borderRightWidth=Kt(e,$ve,n.borderRightWidth),this.borderBottomWidth=Kt(e,Yve,n.borderBottomWidth),this.borderLeftWidth=Kt(e,Jve,n.borderLeftWidth),this.boxShadow=Kt(e,G2e,n.boxShadow),this.color=Kt(e,Xve,n.color),this.direction=Kt(e,Zve,n.direction),this.display=Kt(e,e2e,n.display),this.float=Kt(e,n2e,n.cssFloat),this.fontFamily=Kt(e,D2e,n.fontFamily),this.fontSize=Kt(e,U2e,n.fontSize),this.fontStyle=Kt(e,P2e,n.fontStyle),this.fontVariant=Kt(e,M2e,n.fontVariant),this.fontWeight=Kt(e,L2e,n.fontWeight),this.letterSpacing=Kt(e,r2e,n.letterSpacing),this.lineBreak=Kt(e,s2e,n.lineBreak),this.lineHeight=Kt(e,a2e,n.lineHeight),this.listStyleImage=Kt(e,i2e,n.listStyleImage),this.listStylePosition=Kt(e,o2e,n.listStylePosition),this.listStyleType=Kt(e,dS,n.listStyleType),this.marginTop=Kt(e,l2e,n.marginTop),this.marginRight=Kt(e,c2e,n.marginRight),this.marginBottom=Kt(e,u2e,n.marginBottom),this.marginLeft=Kt(e,A2e,n.marginLeft),this.opacity=Kt(e,I2e,n.opacity);var a=Kt(e,d2e,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Kt(e,f2e,n.overflowWrap),this.paddingTop=Kt(e,h2e,n.paddingTop),this.paddingRight=Kt(e,m2e,n.paddingRight),this.paddingBottom=Kt(e,p2e,n.paddingBottom),this.paddingLeft=Kt(e,g2e,n.paddingLeft),this.paintOrder=Kt(e,z2e,n.paintOrder),this.position=Kt(e,v2e,n.position),this.textAlign=Kt(e,x2e,n.textAlign),this.textDecorationColor=Kt(e,F2e,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Kt(e,R2e,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Kt(e,y2e,n.textShadow),this.textTransform=Kt(e,w2e,n.textTransform),this.transform=Kt(e,b2e,n.transform),this.transformOrigin=Kt(e,T2e,n.transformOrigin),this.visibility=Kt(e,B2e,n.visibility),this.webkitTextStrokeColor=Kt(e,q2e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kt(e,K2e,n.webkitTextStrokeWidth),this.wordBreak=Kt(e,N2e,n.wordBreak),this.zIndex=Kt(e,k2e,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return zd(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return _a(this.display,4)||_a(this.display,33554432)||_a(this.display,268435456)||_a(this.display,536870912)||_a(this.display,67108864)||_a(this.display,134217728)},t}(),$2e=function(){function t(e,n){this.content=Kt(e,j2e,n.content),this.quotes=Kt(e,V2e,n.quotes)}return t}(),G6=function(){function t(e,n){this.counterIncrement=Kt(e,O2e,n.counterIncrement),this.counterReset=Kt(e,Q2e,n.counterReset)}return t}(),Kt=function(t,e,n){var r=new q7,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var a=new K7(r.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,qr(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Sw.parse(t,a.parseComponentValue());case"color":return Gd.parse(t,a.parseComponentValue());case"image":return I4.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return lf(o)?o:ai;case"length-percentage":var l=a.parseComponentValue();return ha(l)?l:ai;case"time":return Aj.parse(t,a.parseComponentValue())}break}},Y2e="data-html2canvas-debug",J2e=function(t){var e=t.getAttribute(Y2e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},fS=function(t,e){var n=J2e(t);return n===1||e===n},Nu=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,fS(n,3))debugger;this.styles=new W2e(e,window.getComputedStyle(n,null)),pS(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Ew(this.context,n),fS(n,4)&&(this.flags|=16)}return t}(),X2e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",z6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uv=0;Uv<z6.length;Uv++)cg[z6.charCodeAt(Uv)]=Uv;var Z2e=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=cg[t.charCodeAt(r)],i=cg[t.charCodeAt(r+1)],o=cg[t.charCodeAt(r+2)],l=cg[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},eye=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},tye=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},oh=5,F4=11,uE=2,nye=F4-oh,dj=65536>>oh,rye=1<<oh,AE=rye-1,sye=1024>>oh,aye=dj+sye,iye=aye,oye=32,lye=iye+oye,cye=65536>>F4,uye=1<<nye,Aye=uye-1,q6=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},dye=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},fye=function(t,e){var n=Z2e(t),r=Array.isArray(n)?tye(n):new Uint32Array(n),s=Array.isArray(n)?eye(n):new Uint16Array(n),a=24,i=q6(s,a/2,r[4]/2),o=r[5]===2?q6(s,(a+r[4])/2):dye(r,Math.ceil((a+r[4])/4));return new hye(r[0],r[1],r[2],r[3],i,o)},hye=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>oh],n=(n<<uE)+(e&AE),this.data[n];if(e<=65535)return n=this.index[dj+(e-55296>>oh)],n=(n<<uE)+(e&AE),this.data[n];if(e<this.highStart)return n=lye-cye+(e>>F4),n=this.index[n],n+=e>>oh&Aye,n=this.index[n],n=(n<<uE)+(e&AE),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),K6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lv=0;Lv<K6.length;Lv++)mye[K6.charCodeAt(Lv)]=Lv;var pye=1,dE=2,fE=3,W6=4,$6=5,gye=7,Y6=8,hE=9,mE=10,J6=11,X6=12,Z6=13,eR=14,pE=15,xye=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},vye=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},yye=fye(X2e),Sl="×",gE="÷",wye=function(t){return yye.get(t)},bye=function(t,e,n){var r=n-2,s=e[r],a=e[n-1],i=e[n];if(a===dE&&i===fE)return Sl;if(a===dE||a===fE||a===W6||i===dE||i===fE||i===W6)return gE;if(a===Y6&&[Y6,hE,J6,X6].indexOf(i)!==-1||(a===J6||a===hE)&&(i===hE||i===mE)||(a===X6||a===mE)&&i===mE||i===Z6||i===$6||i===gye||a===pye)return Sl;if(a===Z6&&i===eR){for(;s===$6;)s=e[--r];if(s===eR)return Sl}if(a===pE&&i===pE){for(var o=0;s===pE;)o++,s=e[--r];if(o%2===0)return Sl}return gE},Cye=function(t){var e=xye(t),n=e.length,r=0,s=0,a=e.map(wye);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Sl;r<n&&(i=bye(e,a,++r))===Sl;);if(i!==Sl||r===n){var o=vye.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},Eye=function(t){for(var e=Cye(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},_ye=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(r),a===e)return!0}}return!1},Sye=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=_w(r.data).map(function(l){return Ks(l)}),a=0,i={},o=s.every(function(l,u){n.setStart(r,a),n.setEnd(r,a+l.length);var d=n.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},Tye=function(){return typeof new Image().crossOrigin<"u"},Bye=function(){return typeof new XMLHttpRequest().responseType=="string"},Nye=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},tR=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},kye=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=e.toDataURL();s.src=a;var i=hS(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),nR(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=n+"px",tR(l)?nR(hS(n,n,0,0,u)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),tR(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},hS=function(t,e,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},nR=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ei={get SUPPORT_RANGE_BOUNDS(){var t=_ye(document);return Object.defineProperty(ei,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ei.SUPPORT_RANGE_BOUNDS&&Sye(document);return Object.defineProperty(ei,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Nye(document);return Object.defineProperty(ei,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?kye(document):Promise.resolve(!1);return Object.defineProperty(ei,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Tye();return Object.defineProperty(ei,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Bye();return Object.defineProperty(ei,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ei,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ei,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Dg=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Iye=function(t,e,n,r){var s=Dye(e,n),a=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(ei.SUPPORT_RANGE_BOUNDS){var l=rR(r,i,o.length).getClientRects();if(l.length>1){var u=R4(o),d=0;u.forEach(function(p){a.push(new Dg(p,SA.fromDOMRectList(t,rR(r,d+i,p.length).getClientRects()))),d+=p.length})}else a.push(new Dg(o,SA.fromDOMRectList(t,l)))}else{var h=r.splitText(o.length);a.push(new Dg(o,Fye(t,r))),r=h}else ei.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),a},Fye=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var a=Ew(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return SA.EMPTY},rR=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},R4=function(t){if(ei.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Eye(t)},Rye=function(t,e){if(ei.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return Lye(t,e)},Dye=function(t,e){return e.letterSpacing!==0?R4(t):Rye(t,e)},Uye=[32,160,4961,65792,65793,4153,4241],Lye=function(t,e){for(var n=c1e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,a=function(){if(s.value){var i=s.value.slice(),o=_w(i),l="";o.forEach(function(u){Uye.indexOf(u)===-1?l+=Ks(u):(l.length&&r.push(l),r.push(Ks(u)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)a();return r},Mye=function(){function t(e,n,r){this.text=Pye(n.data,r.textTransform),this.textBounds=Iye(e,this.text,r,n)}return t}(),Pye=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(jye,Oye);case 2:return t.toUpperCase();default:return t}},jye=/(^|\s|:|-|\(|\))([a-z])/g,Oye=function(t,e,n){return t.length>0?e+n.toUpperCase():t},fj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Nu),hj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(Nu),mj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=new XMLSerializer,i=Ew(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Nu),pj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Nu),mS=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(Nu),Qye=[{type:15,flags:0,unit:"px",number:3}],Hye=[{type:16,flags:0,number:50}],Vye=function(t){return t.width>t.height?new SA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new SA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Gye=function(t){var e=t.type===zye?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},hy="checkbox",my="radio",zye="password",sR=707406591,D4=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=Gye(r),(s.type===hy||s.type===my)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Vye(s.bounds)),s.type){case hy:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Qye;break;case my:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Hye;break}return s}return e}(Nu),gj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(Nu),xj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Nu),vj=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=wj(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?Fg(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):vA.TRANSPARENT,i=r.contentWindow.document.body?Fg(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):vA.TRANSPARENT;s.backgroundColor=zd(a)?zd(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(Nu),qye=["OL","UL","MENU"],p2=function(t,e,n,r){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,bj(s)&&s.data.trim().length>0)n.textNodes.push(new Mye(t,s,n.styles));else if(G0(s))if(Sj(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return p2(t,o,n,r)});else{var i=yj(t,s);i.styles.isVisible()&&(Kye(s,i,r)?i.flags|=4:Wye(i.styles)&&(i.flags|=2),qye.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?p2(t,s.shadowRoot,i,r):!py(s)&&!Cj(s)&&!gy(s)&&p2(t,s,i,r))}},yj=function(t,e){return gS(e)?new fj(t,e):Ej(e)?new hj(t,e):Cj(e)?new mj(t,e):$ye(e)?new pj(t,e):Yye(e)?new mS(t,e):Jye(e)?new D4(t,e):gy(e)?new gj(t,e):py(e)?new xj(t,e):_j(e)?new vj(t,e):new Nu(t,e)},wj=function(t,e){var n=yj(t,e);return n.flags|=4,p2(t,e,n,n),n},Kye=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||U4(t)&&n.styles.isTransparent()},Wye=function(t){return t.isPositioned()||t.isFloating()},bj=function(t){return t.nodeType===Node.TEXT_NODE},G0=function(t){return t.nodeType===Node.ELEMENT_NODE},pS=function(t){return G0(t)&&typeof t.style<"u"&&!g2(t)},g2=function(t){return typeof t.className=="object"},$ye=function(t){return t.tagName==="LI"},Yye=function(t){return t.tagName==="OL"},Jye=function(t){return t.tagName==="INPUT"},Xye=function(t){return t.tagName==="HTML"},Cj=function(t){return t.tagName==="svg"},U4=function(t){return t.tagName==="BODY"},Ej=function(t){return t.tagName==="CANVAS"},aR=function(t){return t.tagName==="VIDEO"},gS=function(t){return t.tagName==="IMG"},_j=function(t){return t.tagName==="IFRAME"},iR=function(t){return t.tagName==="STYLE"},Zye=function(t){return t.tagName==="SCRIPT"},py=function(t){return t.tagName==="TEXTAREA"},gy=function(t){return t.tagName==="SELECT"},Sj=function(t){return t.tagName==="SLOT"},oR=function(t){return t.tagName.indexOf("-")>0},ewe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,a=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),lR={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},cR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},twe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},nwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},w0=function(t,e,n,r,s,a){return t<e||t>n?ux(t,s,a.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+a},Tj=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},zs=function(t,e,n,r,s){var a=n-e+1;return(t<0?"-":"")+(Tj(Math.abs(t),a,r,function(i){return Ks(Math.floor(i%a)+e)})+s)},Of=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return Tj(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},P0=1,wd=2,bd=4,ug=8,lA=function(t,e,n,r,s,a){if(t<-9999||t>9999)return ux(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&_a(a,P0)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&_a(a,wd)||u===1&&l===1&&_a(a,bd)&&t>100||u===1&&l>1&&_a(a,ug)?o=e[u]+(l>0?n[l-1]:"")+o:u===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},uR="十百千萬",AR="拾佰仟萬",dR="マイナス",xE="마이너스",ux=function(t,e,n){var r=n?". ":"",s=n?"、":"",a=n?", ":"",i=n?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=zs(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Of(t,"〇一二三四五六七八九",s);case 6:return w0(t,1,3999,lR,3,r).toLowerCase();case 7:return w0(t,1,3999,lR,3,r);case 8:return zs(t,945,969,!1,r);case 9:return zs(t,97,122,!1,r);case 10:return zs(t,65,90,!1,r);case 11:return zs(t,1632,1641,!0,r);case 12:case 49:return w0(t,1,9999,cR,3,r);case 35:return w0(t,1,9999,cR,3,r).toLowerCase();case 13:return zs(t,2534,2543,!0,r);case 14:case 30:return zs(t,6112,6121,!0,r);case 15:return Of(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Of(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return lA(t,"零一二三四五六七八九",uR,"負",s,wd|bd|ug);case 47:return lA(t,"零壹貳參肆伍陸柒捌玖",AR,"負",s,P0|wd|bd|ug);case 42:return lA(t,"零一二三四五六七八九",uR,"负",s,wd|bd|ug);case 41:return lA(t,"零壹贰叁肆伍陆柒捌玖",AR,"负",s,P0|wd|bd|ug);case 26:return lA(t,"〇一二三四五六七八九","十百千万",dR,s,0);case 25:return lA(t,"零壱弐参四伍六七八九","拾百千万",dR,s,P0|wd|bd);case 31:return lA(t,"영일이삼사오육칠팔구","십백천만",xE,a,P0|wd|bd);case 33:return lA(t,"零一二三四五六七八九","十百千萬",xE,a,0);case 32:return lA(t,"零壹貳參四五六七八九","拾百千",xE,a,P0|wd|bd);case 18:return zs(t,2406,2415,!0,r);case 20:return w0(t,1,19999,nwe,3,r);case 21:return zs(t,2790,2799,!0,r);case 22:return zs(t,2662,2671,!0,r);case 22:return w0(t,1,10999,twe,3,r);case 23:return Of(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Of(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return zs(t,3302,3311,!0,r);case 28:return Of(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Of(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return zs(t,3792,3801,!0,r);case 37:return zs(t,6160,6169,!0,r);case 38:return zs(t,4160,4169,!0,r);case 39:return zs(t,2918,2927,!0,r);case 40:return zs(t,1776,1785,!0,r);case 43:return zs(t,3046,3055,!0,r);case 44:return zs(t,3174,3183,!0,r);case 45:return zs(t,3664,3673,!0,r);case 46:return zs(t,3872,3881,!0,r);case 3:default:return zs(t,48,57,!0,r)}},Bj="data-html2canvas-ignore",fR=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new ewe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=rwe(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,u=iwe(s).then(function(){return Gi(r,void 0,void 0,function(){var d,h;return _i(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(uwe),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,awe(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(lwe(document.doctype)+"<html></html>"),cwe(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(fS(e,2))debugger;if(Ej(e))return this.createCanvasClone(e);if(aR(e))return this.createVideoClone(e);if(iR(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return gS(n)&&(gS(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),oR(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return vE(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!G0(n)||!Zye(n)&&!n.hasAttribute(Bj)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!G0(n)||!iR(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(G0(a)&&Sj(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,a,r)},t.prototype.cloneNode=function(e,n){if(bj(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&G0(e)&&(pS(e)||g2(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&pS(s)&&(this.clonedReferenceElement=s),U4(s)&&fwe(s);var l=this.counters.parse(new G6(this.context,a)),u=this.resolvePseudoContent(e,s,i,Ug.BEFORE);oR(e)&&(n=!0),aR(e)||this.cloneChildNodes(e,s,n),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Ug.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||g2(e))&&!_j(e)||n)&&vE(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(py(e)||gy(e))&&(py(s)||gy(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var a=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new G6(this.context,r));var l=new $2e(this.context,r),u=o.createElement("html2canvaspseudoelement");vE(r,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var p=o.createElement("img");p.src=h.value,p.style.opacity="1",u.appendChild(p)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(qr);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(_m),w=b[0],C=b[1];if(w&&qr(w)){var T=a.counters.getCounterValue(w.value),I=C&&qr(C)?dS.parse(a.context,C.value):3;u.appendChild(o.createTextNode(ux(T,I,!1)))}}else if(h.name==="counters"){var k=h.values.filter(_m),w=k[0],R=k[1],C=k[2];if(w&&qr(w)){var D=a.counters.getCounterValues(w.value),P=C&&qr(C)?dS.parse(a.context,C.value):3,_=R&&R.type===0?R.value:"",N=D.map(function(M){return ux(M,P,!1)}).join(_);u.appendChild(o.createTextNode(N))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(V6(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(V6(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=xS+" "+vS;var d=s===Ug.BEFORE?" "+xS:" "+vS;return g2(n)?n.className.baseValue+=d:n.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ug;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ug||(Ug={}));var rwe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Bj,"true"),t.body.appendChild(n),n},swe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},awe=function(t){return Promise.all([].slice.call(t.images,0).map(swe))},iwe=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},owe=["all","d","content"],vE=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);owe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},lwe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},cwe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},uwe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Awe=":before",dwe=":after",xS="___html2canvas___pseudoelement_before",vS="___html2canvas___pseudoelement_after",hR=`{
    content: "" !important;
    display: none !important;
}`,fwe=function(t){hwe(t,"."+xS+Awe+hR+`
         .`+vS+dwe+hR)},hwe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},Nj=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),mwe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(wE(e)||vwe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Gi(this,void 0,void 0,function(){var n,r,s,a,i=this;return _i(this,function(o){switch(o.label){case 0:return n=Nj.isSameOrigin(e),r=!yE(e)&&this._options.useCORS===!0&&ei.SUPPORT_CORS_IMAGES&&!n,s=!yE(e)&&!n&&!wE(e)&&typeof this._options.proxy=="string"&&ei.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!yE(e)&&!wE(e)&&!s&&!r?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(ywe(a)||r)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=ei.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(p){return i(p)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var u=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),pwe=/^data:image\/svg\+xml/i,gwe=/^data:image\/.*;base64,/i,xwe=/^data:image\/.*/i,vwe=function(t){return ei.SUPPORT_SVG_DRAWING||!wwe(t)},yE=function(t){return xwe.test(t)},ywe=function(t){return gwe.test(t)},wE=function(t){return t.substr(0,4)==="blob"},wwe=function(t){return t.substr(-3).toLowerCase()==="svg"||pwe.test(t)},qt=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),b0=function(t,e,n){return new qt(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Mv=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=b0(this.start,this.startControl,e),s=b0(this.startControl,this.endControl,e),a=b0(this.endControl,this.end,e),i=b0(r,s,e),o=b0(s,a,e),l=b0(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Bl=function(t){return t.type===1},bwe=function(){function t(e){var n=e.styles,r=e.bounds,s=lg(n.borderTopLeftRadius,r.width,r.height),a=s[0],i=s[1],o=lg(n.borderTopRightRadius,r.width,r.height),l=o[0],u=o[1],d=lg(n.borderBottomRightRadius,r.width,r.height),h=d[0],p=d[1],g=lg(n.borderBottomLeftRadius,r.width,r.height),b=g[0],w=g[1],C=[];C.push((a+l)/r.width),C.push((b+h)/r.width),C.push((i+w)/r.height),C.push((u+p)/r.height);var T=Math.max.apply(Math,C);T>1&&(a/=T,i/=T,l/=T,u/=T,h/=T,p/=T,b/=T,w/=T);var I=r.width-l,k=r.height-p,R=r.width-h,D=r.height-w,P=n.borderTopWidth,_=n.borderRightWidth,N=n.borderBottomWidth,B=n.borderLeftWidth,O=es(n.paddingTop,e.bounds.width),M=es(n.paddingRight,e.bounds.width),L=es(n.paddingBottom,e.bounds.width),H=es(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?hs(r.left+B/3,r.top+P/3,a-B/3,i-P/3,Br.TOP_LEFT):new qt(r.left+B/3,r.top+P/3),this.topRightBorderDoubleOuterBox=a>0||i>0?hs(r.left+I,r.top+P/3,l-_/3,u-P/3,Br.TOP_RIGHT):new qt(r.left+r.width-_/3,r.top+P/3),this.bottomRightBorderDoubleOuterBox=h>0||p>0?hs(r.left+R,r.top+k,h-_/3,p-N/3,Br.BOTTOM_RIGHT):new qt(r.left+r.width-_/3,r.top+r.height-N/3),this.bottomLeftBorderDoubleOuterBox=b>0||w>0?hs(r.left+B/3,r.top+D,b-B/3,w-N/3,Br.BOTTOM_LEFT):new qt(r.left+B/3,r.top+r.height-N/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?hs(r.left+B*2/3,r.top+P*2/3,a-B*2/3,i-P*2/3,Br.TOP_LEFT):new qt(r.left+B*2/3,r.top+P*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?hs(r.left+I,r.top+P*2/3,l-_*2/3,u-P*2/3,Br.TOP_RIGHT):new qt(r.left+r.width-_*2/3,r.top+P*2/3),this.bottomRightBorderDoubleInnerBox=h>0||p>0?hs(r.left+R,r.top+k,h-_*2/3,p-N*2/3,Br.BOTTOM_RIGHT):new qt(r.left+r.width-_*2/3,r.top+r.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||w>0?hs(r.left+B*2/3,r.top+D,b-B*2/3,w-N*2/3,Br.BOTTOM_LEFT):new qt(r.left+B*2/3,r.top+r.height-N*2/3),this.topLeftBorderStroke=a>0||i>0?hs(r.left+B/2,r.top+P/2,a-B/2,i-P/2,Br.TOP_LEFT):new qt(r.left+B/2,r.top+P/2),this.topRightBorderStroke=a>0||i>0?hs(r.left+I,r.top+P/2,l-_/2,u-P/2,Br.TOP_RIGHT):new qt(r.left+r.width-_/2,r.top+P/2),this.bottomRightBorderStroke=h>0||p>0?hs(r.left+R,r.top+k,h-_/2,p-N/2,Br.BOTTOM_RIGHT):new qt(r.left+r.width-_/2,r.top+r.height-N/2),this.bottomLeftBorderStroke=b>0||w>0?hs(r.left+B/2,r.top+D,b-B/2,w-N/2,Br.BOTTOM_LEFT):new qt(r.left+B/2,r.top+r.height-N/2),this.topLeftBorderBox=a>0||i>0?hs(r.left,r.top,a,i,Br.TOP_LEFT):new qt(r.left,r.top),this.topRightBorderBox=l>0||u>0?hs(r.left+I,r.top,l,u,Br.TOP_RIGHT):new qt(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||p>0?hs(r.left+R,r.top+k,h,p,Br.BOTTOM_RIGHT):new qt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||w>0?hs(r.left,r.top+D,b,w,Br.BOTTOM_LEFT):new qt(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||i>0?hs(r.left+B,r.top+P,Math.max(0,a-B),Math.max(0,i-P),Br.TOP_LEFT):new qt(r.left+B,r.top+P),this.topRightPaddingBox=l>0||u>0?hs(r.left+Math.min(I,r.width-_),r.top+P,I>r.width+_?0:Math.max(0,l-_),Math.max(0,u-P),Br.TOP_RIGHT):new qt(r.left+r.width-_,r.top+P),this.bottomRightPaddingBox=h>0||p>0?hs(r.left+Math.min(R,r.width-B),r.top+Math.min(k,r.height-N),Math.max(0,h-_),Math.max(0,p-N),Br.BOTTOM_RIGHT):new qt(r.left+r.width-_,r.top+r.height-N),this.bottomLeftPaddingBox=b>0||w>0?hs(r.left+B,r.top+Math.min(D,r.height-N),Math.max(0,b-B),Math.max(0,w-N),Br.BOTTOM_LEFT):new qt(r.left+B,r.top+r.height-N),this.topLeftContentBox=a>0||i>0?hs(r.left+B+H,r.top+P+O,Math.max(0,a-(B+H)),Math.max(0,i-(P+O)),Br.TOP_LEFT):new qt(r.left+B+H,r.top+P+O),this.topRightContentBox=l>0||u>0?hs(r.left+Math.min(I,r.width+B+H),r.top+P+O,I>r.width+B+H?0:l-B+H,u-(P+O),Br.TOP_RIGHT):new qt(r.left+r.width-(_+M),r.top+P+O),this.bottomRightContentBox=h>0||p>0?hs(r.left+Math.min(R,r.width-(B+H)),r.top+Math.min(k,r.height+P+O),Math.max(0,h-(_+M)),p-(N+L),Br.BOTTOM_RIGHT):new qt(r.left+r.width-(_+M),r.top+r.height-(N+L)),this.bottomLeftContentBox=b>0||w>0?hs(r.left+B+H,r.top+D,Math.max(0,b-(B+H)),w-(N+L),Br.BOTTOM_LEFT):new qt(r.left+B+H,r.top+r.height-(N+L))}return t}(),Br;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Br||(Br={}));var hs=function(t,e,n,r,s){var a=4*((Math.sqrt(2)-1)/3),i=n*a,o=r*a,l=t+n,u=e+r;switch(s){case Br.TOP_LEFT:return new Mv(new qt(t,u),new qt(t,u-o),new qt(l-i,e),new qt(l,e));case Br.TOP_RIGHT:return new Mv(new qt(t,e),new qt(t+i,e),new qt(l,u-o),new qt(l,u));case Br.BOTTOM_RIGHT:return new Mv(new qt(l,e),new qt(l,e+o),new qt(t+i,u),new qt(t,u));case Br.BOTTOM_LEFT:default:return new Mv(new qt(l,u),new qt(l-i,u),new qt(t,e+o),new qt(t,e))}},xy=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Cwe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},vy=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Ewe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Pv=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),_we=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Swe=function(t){return t.type===0},kj=function(t){return t.type===1},Twe=function(t){return t.type===2},mR=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},Bwe=function(t,e,n,r,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,n);case 1:return a.add(e+r,n);case 2:return a.add(e+r,n+s);case 3:return a.add(e,n+s)}return a})},Ij=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Fj=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new bwe(this.container),this.container.styles.opacity<1&&this.effects.push(new _we(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new Ewe(r,s,a))}if(this.container.styles.overflowX!==0){var i=xy(this.curves),o=vy(this.curves);mR(i,o)?this.effects.push(new Pv(i,6)):(this.effects.push(new Pv(i,2)),this.effects.push(new Pv(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(l){return!kj(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=xy(r.curves),o=vy(r.curves);mR(i,o)||s.unshift(new Pv(o,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(l){return _a(l.target,e)})},t}(),yS=function(t,e,n,r){t.container.elements.forEach(function(s){var a=_a(s.flags,4),i=_a(s.flags,2),o=new Fj(s,t);_a(s.styles.display,2048)&&r.push(o);var l=_a(s.flags,8)?[]:r;if(a||i){var u=a||s.styles.isPositioned()?n:e,d=new Ij(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var p=0;u.negativeZIndex.some(function(b,w){return h>b.element.container.styles.zIndex.order?(p=w,!1):p>0}),u.negativeZIndex.splice(p,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,w){return h>=b.element.container.styles.zIndex.order?(g=w+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);yS(o,d,a?d:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),yS(o,e,n,l);_a(s.flags,8)&&Rj(s,l)})},Rj=function(t,e){for(var n=t instanceof mS?t.start:1,r=t instanceof mS?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof pj&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=ux(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},Nwe=function(t){var e=new Fj(t,null),n=new Ij(e),r=[];return yS(e,n,n,r),Rj(e.container,r),n},pR=function(t,e){switch(e){case 0:return Fl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Fl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Fl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Fl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},kwe=function(t,e){switch(e){case 0:return Fl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Fl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Fl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Fl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Iwe=function(t,e){switch(e){case 0:return Fl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Fl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Fl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Fl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Fwe=function(t,e){switch(e){case 0:return jv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return jv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return jv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return jv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},jv=function(t,e){var n=[];return Bl(t)?n.push(t.subdivide(.5,!1)):n.push(t),Bl(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Fl=function(t,e,n,r){var s=[];return Bl(t)?s.push(t.subdivide(.5,!1)):s.push(t),Bl(n)?s.push(n.subdivide(.5,!0)):s.push(n),Bl(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Bl(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},Dj=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},yy=function(t){var e=t.styles,n=t.bounds,r=es(e.paddingLeft,n.width),s=es(e.paddingRight,n.width),a=es(e.paddingTop,n.width),i=es(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},Rwe=function(t,e){return t===0?e.bounds:t===2?yy(e):Dj(e)},Dwe=function(t,e){return t===0?e.bounds:t===2?yy(e):Dj(e)},bE=function(t,e,n){var r=Rwe(j0(t.styles.backgroundOrigin,e),t),s=Dwe(j0(t.styles.backgroundClip,e),t),a=Uwe(j0(t.styles.backgroundSize,e),n,r),i=a[0],o=a[1],l=lg(j0(t.styles.backgroundPosition,e),r.width-i,r.height-o),u=Lwe(j0(t.styles.backgroundRepeat,e),l,a,r,s),d=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[u,d,h,i,o]},C0=function(t){return qr(t)&&t.value===cm.AUTO},Ov=function(t){return typeof t=="number"},Uwe=function(t,e,n){var r=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(ha(i)&&o&&ha(o))return[es(i,n.width),es(o,n.height)];var l=Ov(a);if(qr(i)&&(i.value===cm.CONTAIN||i.value===cm.COVER)){if(Ov(a)){var u=n.width/n.height;return u<a!=(i.value===cm.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var d=Ov(r),h=Ov(s),p=d||h;if(C0(i)&&(!o||C0(o))){if(d&&h)return[r,s];if(!l&&!p)return[n.width,n.height];if(p&&l){var g=d?r:s*a,b=h?s:r/a;return[g,b]}var w=d?r:n.width,C=h?s:n.height;return[w,C]}if(l){var T=0,I=0;return ha(i)?T=es(i,n.width):ha(o)&&(I=es(o,n.height)),C0(i)?T=I*a:(!o||C0(o))&&(I=T/a),[T,I]}var k=null,R=null;if(ha(i)?k=es(i,n.width):o&&ha(o)&&(R=es(o,n.height)),k!==null&&(!o||C0(o))&&(R=d&&h?k/r*s:n.height),R!==null&&C0(i)&&(k=d&&h?R/s*r:n.width),k!==null&&R!==null)return[k,R];throw new Error("Unable to calculate background-size for element")},j0=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},Lwe=function(t,e,n,r,s){var a=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new qt(Math.round(r.left),Math.round(r.top+i)),new qt(Math.round(r.left+r.width),Math.round(r.top+i)),new qt(Math.round(r.left+r.width),Math.round(l+r.top+i)),new qt(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new qt(Math.round(r.left+a),Math.round(r.top)),new qt(Math.round(r.left+a+o),Math.round(r.top)),new qt(Math.round(r.left+a+o),Math.round(r.height+r.top)),new qt(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new qt(Math.round(r.left+a),Math.round(r.top+i)),new qt(Math.round(r.left+a+o),Math.round(r.top+i)),new qt(Math.round(r.left+a+o),Math.round(r.top+i+l)),new qt(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new qt(Math.round(s.left),Math.round(s.top)),new qt(Math.round(s.left+s.width),Math.round(s.top)),new qt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new qt(Math.round(s.left),Math.round(s.height+s.top))]}},Mwe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",gR="Hidden Text",Pwe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=Mwe,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(gR)),r.appendChild(a),r.appendChild(s);var o=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(gR)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),Uj=function(){function t(e,n){this.context=e,this.options=n}return t}(),jwe=1e4,Owe=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Pwe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),Twe(n)&&(this.ctx.globalAlpha=n.opacity),Swe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),kj(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Gi(this,void 0,void 0,function(){var r;return _i(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Gi(this,void 0,void 0,function(){return _i(this,function(r){switch(r.label){case 0:if(_a(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=R4(n.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,n.bounds.top+s),o+a.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=zwe(n.fontFamily).join(", "),a=Vx(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(n,r){return Gi(this,void 0,void 0,function(){var s,a,i,o,l,u,d,h,p=this;return _i(this,function(g){return s=this.createFontStyle(r),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=r.paintOrder,n.textBounds.forEach(function(b){h.forEach(function(w){switch(w){case 0:p.ctx.fillStyle=Pa(r.color),p.renderTextWithLetterSpacing(b,r.letterSpacing,u);var C=r.textShadow;C.length&&b.text.trim().length&&(C.slice(0).reverse().forEach(function(T){p.ctx.shadowColor=Pa(T.color),p.ctx.shadowOffsetX=T.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=T.offsetY.number*p.options.scale,p.ctx.shadowBlur=T.blur.number,p.renderTextWithLetterSpacing(b,r.letterSpacing,u)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),r.textDecorationLine.length&&(p.ctx.fillStyle=Pa(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:p.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(p.ctx.strokeStyle=Pa(r.webkitTextStrokeColor),p.ctx.lineWidth=r.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=yy(n),i=vy(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Gi(this,void 0,void 0,function(){var r,s,a,i,o,l,I,I,u,d,h,p,R,g,b,D,w,C,T,I,k,R,D;return _i(this,function(P){switch(P.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,i=0,o=r.textNodes,P.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:P.sent(),P.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof fj))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return I=P.sent(),this.renderReplacedElement(r,s,I),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof hj&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof mj))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return I=P.sent(),this.renderReplacedElement(r,s,I),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof vj&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:d=P.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),P.label=14;case 14:if(r instanceof D4&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===hy?r.checked&&(this.ctx.save(),this.path([new qt(r.bounds.left+h*.39363,r.bounds.top+h*.79),new qt(r.bounds.left+h*.16,r.bounds.top+h*.5549),new qt(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new qt(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new qt(r.bounds.left+h*.72983,r.bounds.top+h*.23),new qt(r.bounds.left+h*.84,r.bounds.top+h*.34085),new qt(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=Pa(sR),this.ctx.fill(),this.ctx.restore()):r.type===my&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Pa(sR),this.ctx.fill(),this.ctx.restore())),Qwe(r)&&r.value.length){switch(p=this.createFontStyle(a),R=p[0],g=p[1],b=this.fontMetrics.getMetrics(R,g).baseline,this.ctx.font=R,this.ctx.fillStyle=Pa(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Vwe(r.styles.textAlign),D=yy(r),w=0,r.styles.textAlign){case 1:w+=D.width/2;break;case 2:w+=D.width;break}C=D.add(w,0,0,-D.height/2+1),this.ctx.save(),this.path([new qt(D.left,D.top),new qt(D.left+D.width,D.top),new qt(D.left+D.width,D.top+D.height),new qt(D.left,D.top+D.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dg(r.value,C),a.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_a(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];I=void 0,k=T.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return I=P.sent(),this.ctx.drawImage(I,r.bounds.left-(I.width+10),r.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(a)[0],this.ctx.font=R,this.ctx.fillStyle=Pa(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",D=new SA(r.bounds.left,r.bounds.top+es(r.styles.paddingTop,r.bounds.width),r.bounds.width,Q6(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dg(n.listValue,D),a.letterSpacing,Q6(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Gi(this,void 0,void 0,function(){var r,s,T,a,i,T,o,l,T,u,d,T,h,p,T,g,b,T,w,C,T;return _i(this,function(I){switch(I.label){case 0:if(_a(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:I.sent(),r=0,s=n.negativeZIndex,I.label=2;case 2:return r<s.length?(T=s[r],[4,this.renderStack(T)]):[3,5];case 3:I.sent(),I.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:I.sent(),a=0,i=n.nonInlineLevel,I.label=7;case 7:return a<i.length?(T=i[a],[4,this.renderNode(T)]):[3,10];case 8:I.sent(),I.label=9;case 9:return a++,[3,7];case 10:o=0,l=n.nonPositionedFloats,I.label=11;case 11:return o<l.length?(T=l[o],[4,this.renderStack(T)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:u=0,d=n.nonPositionedInlineLevel,I.label=15;case 15:return u<d.length?(T=d[u],[4,this.renderStack(T)]):[3,18];case 16:I.sent(),I.label=17;case 17:return u++,[3,15];case 18:h=0,p=n.inlineLevel,I.label=19;case 19:return h<p.length?(T=p[h],[4,this.renderNode(T)]):[3,22];case 20:I.sent(),I.label=21;case 21:return h++,[3,19];case 22:g=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return g<b.length?(T=b[g],[4,this.renderStack(T)]):[3,26];case 24:I.sent(),I.label=25;case 25:return g++,[3,23];case 26:w=0,C=n.positiveZIndex,I.label=27;case 27:return w<C.length?(T=C[w],[4,this.renderStack(T)]):[3,30];case 28:I.sent(),I.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var i=Bl(s)?s.start:s;a===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Bl(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Gi(this,void 0,void 0,function(){var r,s,a,i,o,l;return _i(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,p,g,O,q,X,H,G,N,b,O,q,X,H,G,w,C,T,I,k,R,D,P,_,N,B,O,M,L,H,G,oe,q,X,re,K,Z,Ae,j,W,J,ne;return _i(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];h=void 0,p=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,a.context.cache.match(p)];case 2:return h=ie.sent(),[3,4];case 3:return ie.sent(),a.context.logger.error("Error loading background-image "+p),[3,4];case 4:return h&&(g=bE(n,r,[h.width,h.height,h.width/h.height]),O=g[0],q=g[1],X=g[2],H=g[3],G=g[4],N=a.ctx.createPattern(a.resizeImage(h,H,G),"repeat"),a.renderRepeat(O,N,q,X)),[3,6];case 5:Sve(d)?(b=bE(n,r,[null,null,null]),O=b[0],q=b[1],X=b[2],H=b[3],G=b[4],w=wve(d.angle,H,G),C=w[0],T=w[1],I=w[2],k=w[3],R=w[4],D=document.createElement("canvas"),D.width=H,D.height=G,P=D.getContext("2d"),_=P.createLinearGradient(T,k,I,R),j6(d.stops,C).forEach(function(de){return _.addColorStop(de.stop,Pa(de.color))}),P.fillStyle=_,P.fillRect(0,0,H,G),H>0&&G>0&&(N=a.ctx.createPattern(D,"repeat"),a.renderRepeat(O,N,q,X))):Tve(d)&&(B=bE(n,r,[null,null,null]),O=B[0],M=B[1],L=B[2],H=B[3],G=B[4],oe=d.position.length===0?[k4]:d.position,q=es(oe[0],H),X=es(oe[oe.length-1],G),re=bve(d,q,X,H,G),K=re[0],Z=re[1],K>0&&Z>0&&(Ae=a.ctx.createRadialGradient(M+q,L+X,0,M+q,L+X,K),j6(d.stops,K*2).forEach(function(de){return Ae.addColorStop(de.stop,Pa(de.color))}),a.path(O),a.ctx.fillStyle=Ae,K!==Z?(j=n.bounds.left+.5*n.bounds.width,W=n.bounds.top+.5*n.bounds.height,J=Z/K,ne=1/J,a.ctx.save(),a.ctx.translate(j,W),a.ctx.transform(1,0,0,J,0,0),a.ctx.translate(-j,-W),a.ctx.fillRect(M,ne*(L-W)+W,H,G*ne),a.ctx.restore()):a.ctx.fill())),ie.label=6;case 6:return r--,[2]}})},a=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Gi(this,void 0,void 0,function(){return _i(this,function(a){return this.path(pR(s,r)),this.ctx.fillStyle=Pa(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,a){return Gi(this,void 0,void 0,function(){var i,o;return _i(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=kwe(a,s),this.path(i),this.ctx.fillStyle=Pa(n),this.ctx.fill(),o=Iwe(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Gi(this,void 0,void 0,function(){var r,s,a,i,o,l,u,d,h=this;return _i(this,function(p){switch(p.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!zd(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=Hwe(j0(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),zd(r.backgroundColor)||(this.ctx.fillStyle=Pa(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=xy(n.curves),w=g.inset?0:jwe,C=Bwe(b,-w+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(C)):(h.mask(b),h.ctx.clip(),h.path(C)),h.ctx.shadowOffsetX=g.offsetX.number+w,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Pa(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Pa(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),p.label=2;case 2:o=0,l=0,u=a,p.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!zd(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,a,i){return Gi(this,void 0,void 0,function(){var o,l,u,d,h,p,g,b,w,C,T,I,k,R,D,P,D,P;return _i(this,function(_){return this.ctx.save(),o=Fwe(a,s),l=pR(a,s),i===2&&(this.path(l),this.ctx.clip()),Bl(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Bl(l[1])?(h=l[1].end.x,p=l[1].end.y):(h=l[1].x,p=l[1].y),s===0||s===2?g=Math.abs(u-h):g=Math.abs(d-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=r<3?r*3:r*2,w=r<3?r*2:r,i===3&&(b=r,w=r),C=!0,g<=b*2?C=!1:g<=b*2+w?(T=g/(2*b+w),b*=T,w*=T):(I=Math.floor((g+w)/(b+w)),k=(g-I*b)/(I-1),R=(g-(I+1)*b)/I,w=R<=0||Math.abs(w-k)<Math.abs(w-R)?k:R),C&&(i===3?this.ctx.setLineDash([0,b+w]):this.ctx.setLineDash([b,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Pa(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Bl(l[0])&&(D=l[3],P=l[0],this.ctx.beginPath(),this.formatPath([new qt(D.end.x,D.end.y),new qt(P.start.x,P.start.y)]),this.ctx.stroke()),Bl(l[1])&&(D=l[1],P=l[2],this.ctx.beginPath(),this.formatPath([new qt(D.end.x,D.end.y),new qt(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Gi(this,void 0,void 0,function(){var r;return _i(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Pa(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Nwe(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Uj),Qwe=function(t){return t instanceof xj||t instanceof gj?!0:t instanceof D4&&t.type!==my&&t.type!==hy},Hwe=function(t,e){switch(t){case 0:return xy(e);case 2:return Cwe(e);case 1:default:return vy(e)}},Vwe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Gwe=["-apple-system","system-ui"],zwe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Gwe.indexOf(e)===-1}):t},qwe=function(t){Tc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Gi(this,void 0,void 0,function(){var r,s;return _i(this,function(a){switch(a.label){case 0:return r=hS(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Kwe(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Pa(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Uj),Kwe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Wwe=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,xv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,xv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,xv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,xv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),$we=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new Wwe({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new mwe(this,e)}return t.instanceCount=1,t}(),Lj=function(t,e){return e===void 0&&(e={}),Ywe(t,e)};typeof window<"u"&&Nj.setContext(window);var Ywe=function(t,e){return Gi(void 0,void 0,void 0,function(){var n,r,s,a,i,o,l,u,d,h,p,g,b,w,C,T,I,k,R,D,_,P,_,N,B,O,M,L,H,G,oe,q,X,re,K,Z,Ae,j,W,J;return _i(this,function(ne){switch(ne.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},a=Z_({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(H=e.windowHeight)!==null&&H!==void 0?H:r.innerHeight,scrollX:(G=e.scrollX)!==null&&G!==void 0?G:r.pageXOffset,scrollY:(oe=e.scrollY)!==null&&oe!==void 0?oe:r.pageYOffset},o=new SA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new $we(a,o),u=(q=e.foreignObjectRendering)!==null&&q!==void 0?q:!1,d={allowTaint:(X=e.allowTaint)!==null&&X!==void 0?X:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new fR(l,t,d),p=h.clonedReferenceElement,p?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=ne.sent(),b=U4(p)||Xye(p)?Bxe(p.ownerDocument):Ew(l,p),w=b.width,C=b.height,T=b.left,I=b.top,k=Jwe(l,p,e.backgroundColor),R={canvas:e.canvas,backgroundColor:k,scale:(K=(re=e.scale)!==null&&re!==void 0?re:r.devicePixelRatio)!==null&&K!==void 0?K:1,x:((Z=e.x)!==null&&Z!==void 0?Z:0)+T,y:((Ae=e.y)!==null&&Ae!==void 0?Ae:0)+I,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(w),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(C)},u?(l.logger.debug("Document cloned, using foreign object rendering"),_=new qwe(l,R),[4,_.render(p)]):[3,3];case 2:return D=ne.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+T+","+I+" with size "+w+"x"+C+" using computed rendering"),l.logger.debug("Starting DOM parsing"),P=wj(l,p),k===P.styles.backgroundColor&&(P.styles.backgroundColor=vA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),_=new Owe(l,R),[4,_.render(P)];case 4:D=ne.sent(),ne.label=5;case 5:return(!((J=e.removeContainer)!==null&&J!==void 0)||J)&&(fR.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,D]}})})},Jwe=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?Fg(t,getComputedStyle(r.documentElement).backgroundColor):vA.TRANSPARENT,a=r.body?Fg(t,getComputedStyle(r.body).backgroundColor):vA.TRANSPARENT,i=typeof n=="string"?Fg(t,n):n===null?vA.TRANSPARENT:4294967295;return e===r.documentElement?zd(s)?zd(a)?i:a:s:i};const Xwe=Object.freeze(Object.defineProperty({__proto__:null,default:Lj},Symbol.toStringTag,{value:"Module"})),xR="planificacionesInterdisciplinarias",vR="entregasTareasInterdisciplinarias",Zwe="usuariosLiceo",ebe=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=ee.useState(null),s=ee.useMemo(()=>{const l=[];return t.forEach(u=>{u.actividades.forEach(d=>l.push({...d,planId:u.id,type:"activity"})),u.fechasClave.forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=ee.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let w=0;w<g.length;w++)b=g.charCodeAt(w)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(d(l))%h.length;return A.jsx("div",{className:`w-9 h-9 rounded-full ${h[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,p]=ee.useState(l.activity),g=w=>{p({...h,[w.target.name]:w.target.value})},b=()=>{d(l.planId,h),u()};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),A.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),A.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),A.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),A.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[A.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),A.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[A.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),A.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const u=a(l),d=l.type==="activity";return A.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&r({planId:l.planId,activity:l}),children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&A.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},tbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),nbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),rbe=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),A.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),sbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),abe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ibe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),obe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),lbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),yR=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),vd=({icon:t,label:e,children:n,aiButton:r})=>A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,A.jsx("span",{children:e})]}),r]}),n]}),cbe=({initialPlan:t,onSave:e})=>{const[n,r]=ee.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,a]=ee.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[i,o]=ee.useState({nombre:"",fecha:""}),[l,u]=ee.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[d,h]=ee.useState(!1),[p,g]=ee.useState(!1);ee.useEffect(()=>{r(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const b=async R=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}R==="objetivos"?h(!0):g(!0);let D="";R==="objetivos"?D=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:D=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const _=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:D});r(N=>({...N,[R]:_.text.replace(/(\*\*|\*)/g,"")}))}catch(P){console.error(`Error al generar ${R}`,P),alert(`Hubo un error al generar los ${R}. Inténtelo de nuevo.`)}finally{R==="objetivos"?h(!1):g(!1)}},w=R=>{r(D=>({...D,[R.target.name]:R.target.value}))},C=(R,D)=>{r(P=>{const _=P[R],N=_.includes(D)?_.filter(B=>B!==D):[..._,D];return{...P,[R]:N}})},T=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}r(R=>({...R,actividades:[...R.actividades,{...s,id:crypto.randomUUID()}]})),a({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},I=()=>{!i.nombre||!i.fecha||(r(R=>({...R,fechasClave:[...R.fechasClave,{...i,id:crypto.randomUUID()}]})),o({nombre:"",fecha:""}))},k=()=>{var D;if(!l.instrucciones||!l.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const R={id:crypto.randomUUID(),numero:(((D=n.tareas)==null?void 0:D.length)||0)+1,...l};r(P=>({...P,tareas:[...P.tareas||[],R]})),u({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return A.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[A.jsx("div",{className:"text-center mb-12",children:A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:"Proyecto Interdisciplinario en Liceo Industrial Recoleta"})}),A.jsxs("div",{className:"space-y-6",children:[A.jsx(vd,{icon:A.jsx(tbe,{}),label:"Nombre del Proyecto",children:A.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:w,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(vd,{icon:A.jsx(nbe,{}),label:"Profesores",children:A.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:w,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(vd,{icon:A.jsx(rbe,{}),label:"Cursos",children:A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Zs.map(R=>A.jsx("button",{type:"button",onClick:()=>C("cursos",R),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(R)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:R},R))})}),A.jsx(vd,{icon:A.jsx(sbe,{}),label:"Asignaturas",children:A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:$o.map(R=>A.jsx("button",{type:"button",onClick:()=>C("asignaturas",R),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(R)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:R},R))})}),A.jsx(vd,{icon:A.jsx(abe,{}),label:"Descripción del Proyecto",children:A.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:w,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(vd,{icon:A.jsx(ibe,{}),label:"Objetivos",aiButton:A.jsx("button",{type:"button",onClick:()=>b("objetivos"),disabled:!n.descripcionProyecto.trim()||d,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:A.jsx(yR,{})}),children:d?A.jsx("div",{className:"p-4 text-center",children:"Generando..."}):A.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:w,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(vd,{icon:A.jsx(obe,{}),label:"Indicadores de Éxito",aiButton:A.jsx("button",{type:"button",onClick:()=>b("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:A.jsx(yR,{})}),children:p?A.jsx("div",{className:"p-4 text-center",children:"Generando..."}):A.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:w,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(vd,{icon:A.jsx(lbe,{}),label:"Carta Gantt",children:A.jsxs("div",{className:"space-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[A.jsx("input",{value:s.nombre,onChange:R=>a({...s,nombre:R.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),A.jsx("input",{type:"date",value:s.fechaInicio,onChange:R=>a({...s,fechaInicio:R.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("input",{type:"date",value:s.fechaFin,onChange:R=>a({...s,fechaFin:R.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:T,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:n.actividades.map(R=>A.jsx("li",{children:R.nombre},R.id))})]}),A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),A.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[A.jsx("input",{value:i.nombre,onChange:R=>o({...i,nombre:R.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),A.jsx("input",{type:"date",value:i.fecha,onChange:R=>o({...i,fecha:R.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:I,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:n.fechasClave.map(R=>A.jsxs("li",{children:[R.nombre," (",R.fecha,")"]},R.id))})]}),A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[A.jsx("input",{value:l.instrucciones,onChange:R=>u({...l,instrucciones:R.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),A.jsx("input",{type:"date",value:l.fechaEntrega,onChange:R=>u({...l,fechaEntrega:R.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(R=>A.jsxs("li",{children:[R.numero,". ",R.instrucciones]},R.id))})]})]})}),A.jsx("div",{className:"flex justify-end pt-6",children:A.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})})]})]})},wR=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("list"),[s,a]=ee.useState(null),[i,o]=ee.useState(null),[l,u]=ee.useState(null);ee.useEffect(()=>{try{const I=localStorage.getItem(xR);I&&e(JSON.parse(I))}catch(I){console.error("Error al cargar planificaciones interdisciplinarias",I)}},[]);const d=I=>{e(I),localStorage.setItem(xR,JSON.stringify(I))},h=ee.useCallback((I,k)=>{const R=t.map(D=>D.id===I?{...D,actividades:D.actividades.map(P=>P.id===k.id?k:P)}:D);d(R)},[t]),p=I=>{d(s?t.map(k=>k.id===s.id?I:k):[{...I,id:crypto.randomUUID()},...t]),r("list"),a(null)},g=I=>{a(I),r("form")},b=I=>{window.confirm("¿Está seguro de eliminar esta planificación?")&&d(t.filter(k=>k.id!==I))},w=()=>{a(null),r("form")},C=async I=>{o(I.id);const k=new an("p","mm","a4"),R=15,D=k.internal.pageSize.getWidth(),P=k.internal.pageSize.getHeight(),_=D-R*2;let N=R;const B=22,O=14,M=11,L=()=>{k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text("Proyecto Interdisciplinario",R,12),k.text("Liceo Industrial de Recoleta",D-R,12,{align:"right"}),k.setDrawColor(220),k.line(R,15,D-R,15)},H=re=>{N+re>P-R&&(k.addPage(),L(),N=R+15)},G=(re,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const Z=10;k.setFontSize(M);const Ae=Array.isArray(K)?K.join(", "):String(K),j=k.splitTextToSize(Ae,_),W=j.length*(M*.35*1.15);H(Z+W+12),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text(re,R,N),N+=6,k.setDrawColor(200),k.line(R,N,R+30,N),N+=8,k.setFont("helvetica","normal"),k.setFontSize(M),k.setTextColor(80),k.text(j,R,N),N+=W+12};L(),N=R+20,k.setFont("helvetica","bold"),k.setFontSize(B),k.setTextColor(0);const oe=k.splitTextToSize(I.nombreProyecto,_);if(k.text(oe,R,N),N+=oe.length*(B*.4)+10,Wo(k,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},I.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},I.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},I.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:M,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=k.lastAutoTable.finalY+15,G("Descripción del Proyecto",I.descripcionProyecto),G("Objetivos de Aprendizaje",I.objetivos),G("Indicadores de Logro",I.indicadoresLogro),I.tareas&&I.tareas.length>0){const re=I.tareas.map(Z=>[Z.numero.toString(),Z.instrucciones,Z.fechaEntrega]),K=(re.length+1)*10+15;H(K+15),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Tareas para Estudiantes",R,N),N+=10,Wo(k,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:re,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=k.lastAutoTable.finalY+15}const q=document.getElementById("gantt-container-vertical");if(q)try{const K=(await Lj(q,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");k.addPage(),L(),N=R+15,k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Cronograma del Proyecto",R,N),N+=10;const Z=k.getImageProperties(K),Ae=_,j=Z.height*Ae/Z.width;k.addImage(K,"PNG",R,N,Ae,j)}catch(re){console.error("Error generating timeline image:",re)}const X=k.internal.pages.length-1;for(let re=1;re<=X;re++)k.setPage(re),k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text(`Página ${re} de ${X}`,D-R,k.internal.pageSize.getHeight()-10,{align:"right"});k.save(`Proyecto_${I.nombreProyecto.replace(/\s/g,"_")}.pdf`),o(null)},T=({plan:I,onBack:k})=>{var L,H;const[R,D]=ee.useState([]),[P,_]=ee.useState([]),[N,B]=ee.useState(((L=I.tareas)==null?void 0:L[0])||null);ee.useEffect(()=>{try{const G=localStorage.getItem(Zwe);G&&D(JSON.parse(G));const oe=localStorage.getItem(vR);oe&&_(JSON.parse(oe))}catch(G){console.error(G)}},[]);const O=ee.useMemo(()=>R.filter(G=>G.profile===en.ESTUDIANTE&&I.cursos.includes(G.curso||"")).sort((G,oe)=>G.nombreCompleto.localeCompare(oe.nombreCompleto)),[R,I.cursos]),M=(G,oe)=>{const q=P.map(X=>X.id===G?{...X,feedbackProfesor:oe,fechaFeedback:new Date().toISOString()}:X);_(q),localStorage.setItem(vR,JSON.stringify(q))};return N?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Entregas de Tareas"}),A.jsx("button",{onClick:k,className:"font-semibold",children:"← Volver"})]}),A.jsx("select",{value:N.id,onChange:G=>{var oe;return B(((oe=I.tareas)==null?void 0:oe.find(q=>q.id===G.target.value))||null)},className:"mb-4 p-2 border rounded",children:(H=I.tareas)==null?void 0:H.map(G=>A.jsxs("option",{value:G.id,children:["Tarea ",G.numero,": ",G.instrucciones]},G.id))}),A.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:O.map(G=>{const oe=P.find(q=>q.planificacionId===I.id&&q.tareaId===N.id&&q.estudianteId===G.id);return A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[A.jsxs("p",{className:"font-bold",children:[G.nombreCompleto," - ",oe!=null&&oe.completada?A.jsx("span",{className:"text-green-600",children:"Entregado"}):A.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),oe&&A.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[oe.observacionesEstudiante&&A.jsxs("p",{children:[A.jsx("strong",{children:"Comentario:"})," ",oe.observacionesEstudiante]}),oe.enlaceUrl&&A.jsxs("p",{children:[A.jsx("strong",{children:"Enlace:"})," ",A.jsx("a",{href:oe.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:oe.enlaceUrl})]}),oe.archivoAdjunto&&A.jsxs("p",{children:[A.jsx("strong",{children:"Archivo:"})," ",A.jsx("a",{href:oe.archivoAdjunto.url,download:oe.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:oe.archivoAdjunto.nombre})]}),A.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:oe.feedbackProfesor||"",onBlur:q=>M(oe.id,q.target.value),rows:2,className:"w-full mt-2 p-1 border rounded"})]})]},G.id)})})]}):A.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return l?A.jsx(T,{plan:l,onBack:()=>u(null)}):A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n==="list"?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),A.jsx("button",{onClick:w,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),A.jsx("div",{className:"space-y-4",children:t.map(I=>A.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:I.nombreProyecto}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",I.cursos.join(", ")]})]}),A.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[A.jsx("button",{onClick:()=>u(I),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),A.jsx("button",{onClick:()=>C(I),disabled:i===I.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:i===I.id?"Exportando...":"Exportar PDF"}),A.jsx("button",{onClick:()=>g(I),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),A.jsx("button",{onClick:()=>b(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},I.id))})]}):A.jsx(cbe,{initialPlan:s,onSave:p}),t.length>0&&A.jsx("div",{id:"gantt-container-vertical",children:A.jsx(ebe,{planificaciones:t,onActivityUpdate:h})})]})},CE="pañolMaquinas",bR="pañolRegistros",ube=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=ee.useState(s),[o,l]=ee.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=ee.useState(u),[p,g]=ee.useState(null),[b,w]=ee.useState({maquinaId:"",curso:"",profesor:"",fecha:""});ee.useEffect(()=>{try{const L=localStorage.getItem(CE);if(L&&JSON.parse(L).length>0)e(JSON.parse(L));else{const G=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(G),localStorage.setItem(CE,JSON.stringify(G))}const H=localStorage.getItem(bR);H&&r(JSON.parse(H))}catch(L){console.error("Error al cargar datos de Pañol desde localStorage",L)}},[]);const C=ee.useCallback(L=>{e(L),localStorage.setItem(CE,JSON.stringify(L))},[]),T=ee.useCallback(L=>{r(L),localStorage.setItem(bR,JSON.stringify(L))},[]),I=L=>{L.preventDefault(),d.nombre.trim()&&(C(p?t.map(H=>H.id===p.id?{...p,...d}:H):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},k=ee.useCallback(L=>{if(n.some(H=>H.maquinaId===L)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&C(t.filter(H=>H.id!==L))},[t,n,C]),R=L=>{L.preventDefault();const H=o||a;if(!H.curso||!H.profesorResponsable.trim()||!H.maquinaId||H.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}T(o?n.map(G=>G.id===o.id?o:G):[{...a,id:crypto.randomUUID()},...n]),i(s),l(null)},D=ee.useCallback(L=>{window.confirm("¿Eliminar este registro de uso?")&&T(n.filter(H=>H.id!==L))},[n,T]),P=ee.useMemo(()=>n.filter(L=>(b.maquinaId===""||L.maquinaId===b.maquinaId)&&(b.curso===""||L.curso===b.curso)&&(b.profesor===""||L.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||L.fecha===b.fecha)).sort((L,H)=>new Date(H.fecha).getTime()-new Date(L.fecha).getTime()),[n,b]),_=ee.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),N=()=>{const L=P.map(oe=>{var q,X;return{Fecha:oe.fecha,Curso:oe.curso,Profesor:oe.profesorResponsable,Máquina:((q=_.get(oe.maquinaId))==null?void 0:q.nombre)||"N/A",Especialidad:((X=_.get(oe.maquinaId))==null?void 0:X.especialidad)||"N/A","Total Horas":oe.totalHoras,Observaciones:oe.observaciones}}),H=kl.json_to_sheet(L),G=kl.book_new();kl.book_append_sheet(G,H,"RegistrosPañol"),_4(G,"Registros_Pañol.xlsx")},B=()=>{const L=new an;Wo(L,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:P.map(H=>{var G,oe;return[H.fecha,H.curso,H.profesorResponsable,((G=_.get(H.maquinaId))==null?void 0:G.nombre)||"N/A",((oe=_.get(H.maquinaId))==null?void 0:oe.especialidad)||"N/A",H.totalHoras,H.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:H=>{L.setFontSize(10),L.setFont("helvetica","bold"),L.text("LICEO INDUSTRIAL DE RECOLETA",H.settings.margin.left,15)}}),L.save("Registros_Pañol.pdf")},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",M=()=>{const L=o||a,H=o?l:i;return A.jsxs("form",{onSubmit:R,className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),A.jsx("input",{name:"fecha",type:"date",value:L.fecha,onChange:G=>H({...L,fecha:G.target.value}),className:O,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Curso"}),A.jsxs("select",{name:"curso",value:L.curso,onChange:G=>H({...L,curso:G.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Curso"}),Zs.map(G=>A.jsx("option",{children:G},G))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),A.jsxs("select",{name:"profesorResponsable",value:L.profesorResponsable,onChange:G=>H({...L,profesorResponsable:G.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Profesor Responsable"}),d_.map(G=>A.jsx("option",{value:G,children:G},G))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),A.jsxs("select",{name:"maquinaId",value:L.maquinaId,onChange:G=>H({...L,maquinaId:G.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Máquina"}),t.map(G=>A.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),A.jsx("input",{name:"totalHoras",type:"number",value:L.totalHoras,onChange:G=>H({...L,totalHoras:Number(G.target.value)}),className:O,required:!0,min:"0.5",step:"0.5"})]}),A.jsxs("div",{className:"lg:col-span-3",children:[A.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),A.jsx("textarea",{name:"observaciones",value:L.observaciones,onChange:G=>H({...L,observaciones:G.target.value}),placeholder:"Observaciones...",className:`${O}`,rows:1})]})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&A.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),M()]}),A.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),A.jsxs("form",{onSubmit:I,className:"flex gap-2 mb-4",children:[A.jsx("input",{value:d.nombre,onChange:L=>h({...d,nombre:L.target.value}),placeholder:"Nombre máquina",className:O}),A.jsxs("select",{value:d.especialidad,onChange:L=>h({...d,especialidad:L.target.value}),className:O,children:[A.jsx("option",{value:"Industrial",children:"Industrial"}),A.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),A.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"✓":"+"})]}),A.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(L=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[A.jsxs("span",{children:[L.nombre," ",A.jsxs("span",{className:"text-xs text-slate-500",children:["(",L.especialidad,")"]})]}),A.jsxs("div",{className:"space-x-2",children:[A.jsx("button",{onClick:()=>{g(L),h(L)},className:"text-blue-500",children:"✏️"}),A.jsx("button",{onClick:()=>k(L.id),className:"text-red-500",children:"🗑️"})]})]},L.id))})]}),A.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:N,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),A.jsx("button",{onClick:B,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[A.jsx("input",{type:"date",value:b.fecha,onChange:L=>w({...b,fecha:L.target.value}),className:O}),A.jsxs("select",{value:b.curso,onChange:L=>w({...b,curso:L.target.value}),className:O,children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),Zs.map(L=>A.jsx("option",{children:L},L))]}),A.jsxs("select",{value:b.maquinaId,onChange:L=>w({...b,maquinaId:L.target.value}),className:O,children:[A.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(L=>A.jsx("option",{value:L.id,children:L.nombre},L.id))]}),A.jsx("input",{value:b.profesor,onChange:L=>w({...b,profesor:L.target.value}),placeholder:"Buscar profesor...",className:O})]}),A.jsx("div",{className:"max-h-96 overflow-y-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),A.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:P.map(L=>{var H;return A.jsxs("tr",{children:[A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.fecha}),A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((H=_.get(L.maquinaId))==null?void 0:H.nombre)||"N/A"}),A.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[L.profesorResponsable," (",L.curso,")"]}),A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.totalHoras}),A.jsxs("td",{className:"px-3 py-2 text-center",children:[A.jsx("button",{onClick:()=>l(L),className:"text-blue-500",children:"✏️"}),A.jsx("button",{onClick:()=>D(L.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},L.id)})})]})})]})]})]})};function Yi(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Yi(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var EE={exports:{}},_E={},SE={exports:{}},TE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function Abe(){if(CR)return TE;CR=1;var t=xx();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,p){var g=p(),b=r({inst:{value:g,getSnapshot:p}}),w=b[0].inst,C=b[1];return a(function(){w.value=g,w.getSnapshot=p,l(w)&&C({inst:w})},[h,g,p]),s(function(){return l(w)&&C({inst:w}),h(function(){l(w)&&C({inst:w})})},[h]),i(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function u(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return TE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,TE}var ER;function dbe(){return ER||(ER=1,SE.exports=Abe()),SE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R;function fbe(){if(_R)return _E;_R=1;var t=xx(),e=dbe();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return _E.useSyncExternalStoreWithSelector=function(u,d,h,p,g){var b=a(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function T(P){if(!I){if(I=!0,k=P,P=p(P),g!==void 0&&w.hasValue){var _=w.value;if(g(_,P))return R=_}return R=P}if(_=R,r(k,P))return _;var N=p(P);return g!==void 0&&g(_,N)?(k=P,_):(k=P,R=N)}var I=!1,k,R,D=h===void 0?null:h;return[function(){return T(d())},D===null?void 0:function(){return T(D())}]},[d,h,p,g]);var C=s(u,b[0],b[1]);return i(function(){w.hasValue=!0,w.value=C},[C]),l(C),C},_E}var SR;function hbe(){return SR||(SR=1,EE.exports=fbe()),EE.exports}var mbe=hbe();const pbe=OS(mbe),gbe={},TR=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(b=>b(e,g))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(gbe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,l);return l},xbe=t=>t?TR(t):TR,{useDebugValue:vbe}=At,{useSyncExternalStoreWithSelector:ybe}=pbe,wbe=t=>t;function Mj(t,e=wbe,n){const r=ybe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return vbe(r),r}const BR=(t,e)=>{const n=xbe(t),r=(s,a=e)=>Mj(n,s,a);return Object.assign(r,n),r},bbe=(t,e)=>t?BR(t,e):BR;function Pi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var Cbe={value:()=>{}};function Dw(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new x2(n)}function x2(t){this._=t}function Ebe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}x2.prototype=Dw.prototype={constructor:x2,on:function(t,e){var n=this._,r=Ebe(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=_be(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=NR(n[s],t.name,e);else if(e==null)for(s in n)n[s]=NR(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new x2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function _be(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function NR(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=Cbe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var wS="http://www.w3.org/1999/xhtml";const kR={svg:"http://www.w3.org/2000/svg",xhtml:wS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Uw(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),kR.hasOwnProperty(e)?{space:kR[e],local:t}:t}function Sbe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wS&&e.documentElement.namespaceURI===wS?e.createElement(t):e.createElementNS(n,t)}}function Tbe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pj(t){var e=Uw(t);return(e.local?Tbe:Sbe)(e)}function Bbe(){}function L4(t){return t==null?Bbe:function(){return this.querySelector(t)}}function Nbe(t){typeof t!="function"&&(t=L4(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=new Array(i),l,u,d=0;d<i;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Jo(r,this._parents)}function kbe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ibe(){return[]}function jj(t){return t==null?Ibe:function(){return this.querySelectorAll(t)}}function Fbe(t){return function(){return kbe(t.apply(this,arguments))}}function Rbe(t){typeof t=="function"?t=Fbe(t):t=jj(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var i=e[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(r.push(t.call(l,l.__data__,u,i)),s.push(l));return new Jo(r,s)}function Oj(t){return function(){return this.matches(t)}}function Qj(t){return function(e){return e.matches(t)}}var Dbe=Array.prototype.find;function Ube(t){return function(){return Dbe.call(this.children,t)}}function Lbe(){return this.firstElementChild}function Mbe(t){return this.select(t==null?Lbe:Ube(typeof t=="function"?t:Qj(t)))}var Pbe=Array.prototype.filter;function jbe(){return Array.from(this.children)}function Obe(t){return function(){return Pbe.call(this.children,t)}}function Qbe(t){return this.selectAll(t==null?jbe:Obe(typeof t=="function"?t:Qj(t)))}function Hbe(t){typeof t!="function"&&(t=Oj(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new Jo(r,this._parents)}function Hj(t){return new Array(t.length)}function Vbe(){return new Jo(this._enter||this._groups.map(Hj),this._parents)}function wy(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wy.prototype={constructor:wy,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Gbe(t){return function(){return t}}function zbe(t,e,n,r,s,a){for(var i=0,o,l=e.length,u=a.length;i<u;++i)(o=e[i])?(o.__data__=a[i],r[i]=o):n[i]=new wy(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function qbe(t,e,n,r,s,a,i){var o,l,u=new Map,d=e.length,h=a.length,p=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(p[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?s[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,a[o],o,a)+"",(l=u.get(g))?(r[o]=l,l.__data__=a[o],u.delete(g)):n[o]=new wy(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(p[o])===l&&(s[o]=l)}function Kbe(t){return t.__data__}function Wbe(t,e){if(!arguments.length)return Array.from(this,Kbe);var n=e?qbe:zbe,r=this._parents,s=this._groups;typeof t!="function"&&(t=Gbe(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=r[u],h=s[u],p=h.length,g=$be(t.call(d,d&&d.__data__,u,r)),b=g.length,w=o[u]=new Array(b),C=i[u]=new Array(b),T=l[u]=new Array(p);n(d,h,w,C,T,g,e);for(var I=0,k=0,R,D;I<b;++I)if(R=w[I]){for(I>=k&&(k=I+1);!(D=C[k])&&++k<b;);R._next=D||null}}return i=new Jo(i,r),i._enter=o,i._exit=l,i}function $be(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ybe(){return new Jo(this._exit||this._groups.map(Hj),this._parents)}function Jbe(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function Xbe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var u=n[l],d=r[l],h=u.length,p=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(p[b]=g);for(;l<s;++l)o[l]=n[l];return new Jo(o,this._parents)}function Zbe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function eCe(t){t||(t=tCe);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],o=i.length,l=s[a]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new Jo(s,this._parents).order()}function tCe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nCe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rCe(){return Array.from(this)}function sCe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function aCe(){let t=0;for(const e of this)++t;return t}function iCe(){return!this.node()}function oCe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function lCe(t){return function(){this.removeAttribute(t)}}function cCe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function uCe(t,e){return function(){this.setAttribute(t,e)}}function ACe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function dCe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fCe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hCe(t,e){var n=Uw(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?cCe:lCe:typeof e=="function"?n.local?fCe:dCe:n.local?ACe:uCe)(n,e))}function Vj(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mCe(t){return function(){this.style.removeProperty(t)}}function pCe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function gCe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xCe(t,e,n){return arguments.length>1?this.each((e==null?mCe:typeof e=="function"?gCe:pCe)(t,e,n??"")):Sm(this.node(),t)}function Sm(t,e){return t.style.getPropertyValue(e)||Vj(t).getComputedStyle(t,null).getPropertyValue(e)}function vCe(t){return function(){delete this[t]}}function yCe(t,e){return function(){this[t]=e}}function wCe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function bCe(t,e){return arguments.length>1?this.each((e==null?vCe:typeof e=="function"?wCe:yCe)(t,e)):this.node()[t]}function Gj(t){return t.trim().split(/^|\s+/)}function M4(t){return t.classList||new zj(t)}function zj(t){this._node=t,this._names=Gj(t.getAttribute("class")||"")}zj.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qj(t,e){for(var n=M4(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function Kj(t,e){for(var n=M4(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function CCe(t){return function(){qj(this,t)}}function ECe(t){return function(){Kj(this,t)}}function _Ce(t,e){return function(){(e.apply(this,arguments)?qj:Kj)(this,t)}}function SCe(t,e){var n=Gj(t+"");if(arguments.length<2){for(var r=M4(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?_Ce:e?CCe:ECe)(n,e))}function TCe(){this.textContent=""}function BCe(t){return function(){this.textContent=t}}function NCe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function kCe(t){return arguments.length?this.each(t==null?TCe:(typeof t=="function"?NCe:BCe)(t)):this.node().textContent}function ICe(){this.innerHTML=""}function FCe(t){return function(){this.innerHTML=t}}function RCe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function DCe(t){return arguments.length?this.each(t==null?ICe:(typeof t=="function"?RCe:FCe)(t)):this.node().innerHTML}function UCe(){this.nextSibling&&this.parentNode.appendChild(this)}function LCe(){return this.each(UCe)}function MCe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PCe(){return this.each(MCe)}function jCe(t){var e=typeof t=="function"?t:Pj(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function OCe(){return null}function QCe(t,e){var n=typeof t=="function"?t:Pj(t),r=e==null?OCe:typeof e=="function"?e:L4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function HCe(){var t=this.parentNode;t&&t.removeChild(this)}function VCe(){return this.each(HCe)}function GCe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zCe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qCe(t){return this.select(t?zCe:GCe)}function KCe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function WCe(t){return function(e){t.call(this,e,this.__data__)}}function $Ce(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function YCe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function JCe(t,e,n){return function(){var r=this.__on,s,a=WCe(e);if(r){for(var i=0,o=r.length;i<o;++i)if((s=r[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function XCe(t,e,n){var r=$Ce(t+""),s,a=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(s=0,d=o[l];s<a;++s)if((i=r[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?JCe:YCe,s=0;s<a;++s)this.each(o(r[s],e,n));return this}function Wj(t,e,n){var r=Vj(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function ZCe(t,e){return function(){return Wj(this,t,e)}}function eEe(t,e){return function(){return Wj(this,t,e.apply(this,arguments))}}function tEe(t,e){return this.each((typeof e=="function"?eEe:ZCe)(t,e))}function*nEe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var $j=[null];function Jo(t,e){this._groups=t,this._parents=e}function Gx(){return new Jo([[document.documentElement]],$j)}function rEe(){return this}Jo.prototype=Gx.prototype={constructor:Jo,select:Nbe,selectAll:Rbe,selectChild:Mbe,selectChildren:Qbe,filter:Hbe,data:Wbe,enter:Vbe,exit:Ybe,join:Jbe,merge:Xbe,selection:rEe,order:Zbe,sort:eCe,call:nCe,nodes:rCe,node:sCe,size:aCe,empty:iCe,each:oCe,attr:hCe,style:xCe,property:bCe,classed:SCe,text:kCe,html:DCe,raise:LCe,lower:PCe,append:jCe,insert:QCe,remove:VCe,clone:qCe,datum:KCe,on:XCe,dispatch:tEe,[Symbol.iterator]:nEe};function hc(t){return typeof t=="string"?new Jo([[document.querySelector(t)]],[document.documentElement]):new Jo([[t]],$j)}function sEe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function du(t,e){if(t=sEe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const aEe={passive:!1},Ax={capture:!0,passive:!1};function BE(t){t.stopImmediatePropagation()}function um(t){t.preventDefault(),t.stopImmediatePropagation()}function Yj(t){var e=t.document.documentElement,n=hc(t).on("dragstart.drag",um,Ax);"onselectstart"in e?n.on("selectstart.drag",um,Ax):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Jj(t,e){var n=t.document.documentElement,r=hc(t).on("dragstart.drag",null);e&&(r.on("click.drag",um,Ax),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qv=t=>()=>t;function bS(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}bS.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function iEe(t){return!t.ctrlKey&&!t.button}function oEe(){return this.parentNode}function lEe(t,e){return e??{x:t.x,y:t.y}}function cEe(){return navigator.maxTouchPoints||"ontouchstart"in this}function uEe(){var t=iEe,e=oEe,n=lEe,r=cEe,s={},a=Dw("start","drag","end"),i=0,o,l,u,d,h=0;function p(R){R.on("mousedown.drag",g).filter(r).on("touchstart.drag",C).on("touchmove.drag",T,aEe).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(R,D){if(!(d||!t.call(this,R,D))){var P=k(this,e.call(this,R,D),R,D,"mouse");P&&(hc(R.view).on("mousemove.drag",b,Ax).on("mouseup.drag",w,Ax),Yj(R.view),BE(R),u=!1,o=R.clientX,l=R.clientY,P("start",R))}}function b(R){if(um(R),!u){var D=R.clientX-o,P=R.clientY-l;u=D*D+P*P>h}s.mouse("drag",R)}function w(R){hc(R.view).on("mousemove.drag mouseup.drag",null),Jj(R.view,u),um(R),s.mouse("end",R)}function C(R,D){if(t.call(this,R,D)){var P=R.changedTouches,_=e.call(this,R,D),N=P.length,B,O;for(B=0;B<N;++B)(O=k(this,_,R,D,P[B].identifier,P[B]))&&(BE(R),O("start",R,P[B]))}}function T(R){var D=R.changedTouches,P=D.length,_,N;for(_=0;_<P;++_)(N=s[D[_].identifier])&&(um(R),N("drag",R,D[_]))}function I(R){var D=R.changedTouches,P=D.length,_,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),_=0;_<P;++_)(N=s[D[_].identifier])&&(BE(R),N("end",R,D[_]))}function k(R,D,P,_,N,B){var O=a.copy(),M=du(B||P,D),L,H,G;if((G=n.call(R,new bS("beforestart",{sourceEvent:P,target:p,identifier:N,active:i,x:M[0],y:M[1],dx:0,dy:0,dispatch:O}),_))!=null)return L=G.x-M[0]||0,H=G.y-M[1]||0,function oe(q,X,re){var K=M,Z;switch(q){case"start":s[N]=oe,Z=i++;break;case"end":delete s[N],--i;case"drag":M=du(re||X,D),Z=i;break}O.call(q,R,new bS(q,{sourceEvent:X,subject:G,target:p,identifier:N,active:Z,x:M[0]+L,y:M[1]+H,dx:M[0]-K[0],dy:M[1]-K[1],dispatch:O}),_)}}return p.filter=function(R){return arguments.length?(t=typeof R=="function"?R:Qv(!!R),p):t},p.container=function(R){return arguments.length?(e=typeof R=="function"?R:Qv(R),p):e},p.subject=function(R){return arguments.length?(n=typeof R=="function"?R:Qv(R),p):n},p.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:Qv(!!R),p):r},p.on=function(){var R=a.on.apply(a,arguments);return R===a?p:R},p.clickDistance=function(R){return arguments.length?(h=(R=+R)*R,p):Math.sqrt(h)},p}function P4(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xj(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zx(){}var dx=.7,by=1/dx,Am="\\s*([+-]?\\d+)\\s*",fx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AEe=/^#([0-9a-f]{3,8})$/,dEe=new RegExp(`^rgb\\(${Am},${Am},${Am}\\)$`),fEe=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),hEe=new RegExp(`^rgba\\(${Am},${Am},${Am},${fx}\\)$`),mEe=new RegExp(`^rgba\\(${bu},${bu},${bu},${fx}\\)$`),pEe=new RegExp(`^hsl\\(${fx},${bu},${bu}\\)$`),gEe=new RegExp(`^hsla\\(${fx},${bu},${bu},${fx}\\)$`),IR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P4(zx,hx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:FR,formatHex:FR,formatHex8:xEe,formatHsl:vEe,formatRgb:RR,toString:RR});function FR(){return this.rgb().formatHex()}function xEe(){return this.rgb().formatHex8()}function vEe(){return Zj(this).formatHsl()}function RR(){return this.rgb().formatRgb()}function hx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=AEe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?DR(e):n===3?new go(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Hv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Hv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dEe.exec(t))?new go(e[1],e[2],e[3],1):(e=fEe.exec(t))?new go(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hEe.exec(t))?Hv(e[1],e[2],e[3],e[4]):(e=mEe.exec(t))?Hv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pEe.exec(t))?MR(e[1],e[2]/100,e[3]/100,1):(e=gEe.exec(t))?MR(e[1],e[2]/100,e[3]/100,e[4]):IR.hasOwnProperty(t)?DR(IR[t]):t==="transparent"?new go(NaN,NaN,NaN,0):null}function DR(t){return new go(t>>16&255,t>>8&255,t&255,1)}function Hv(t,e,n,r){return r<=0&&(t=e=n=NaN),new go(t,e,n,r)}function yEe(t){return t instanceof zx||(t=hx(t)),t?(t=t.rgb(),new go(t.r,t.g,t.b,t.opacity)):new go}function CS(t,e,n,r){return arguments.length===1?yEe(t):new go(t,e,n,r??1)}function go(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}P4(go,CS,Xj(zx,{brighter(t){return t=t==null?by:Math.pow(by,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dx:Math.pow(dx,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new go(lh(this.r),lh(this.g),lh(this.b),Cy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UR,formatHex:UR,formatHex8:wEe,formatRgb:LR,toString:LR}));function UR(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}`}function wEe(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}${Jf((isNaN(this.opacity)?1:this.opacity)*255)}`}function LR(){const t=Cy(this.opacity);return`${t===1?"rgb(":"rgba("}${lh(this.r)}, ${lh(this.g)}, ${lh(this.b)}${t===1?")":`, ${t})`}`}function Cy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jf(t){return t=lh(t),(t<16?"0":"")+t.toString(16)}function MR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mc(t,e,n,r)}function Zj(t){if(t instanceof mc)return new mc(t.h,t.s,t.l,t.opacity);if(t instanceof zx||(t=hx(t)),!t)return new mc;if(t instanceof mc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new mc(i,o,l,t.opacity)}function bEe(t,e,n,r){return arguments.length===1?Zj(t):new mc(t,e,n,r??1)}function mc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}P4(mc,bEe,Xj(zx,{brighter(t){return t=t==null?by:Math.pow(by,t),new mc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dx:Math.pow(dx,t),new mc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new go(NE(t>=240?t-240:t+120,s,r),NE(t,s,r),NE(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new mc(PR(this.h),Vv(this.s),Vv(this.l),Cy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cy(this.opacity);return`${t===1?"hsl(":"hsla("}${PR(this.h)}, ${Vv(this.s)*100}%, ${Vv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function PR(t){return t=(t||0)%360,t<0?t+360:t}function Vv(t){return Math.max(0,Math.min(1,t||0))}function NE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const eO=t=>()=>t;function CEe(t,e){return function(n){return t+n*e}}function EEe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _Ee(t){return(t=+t)==1?tO:function(e,n){return n-e?EEe(e,n,t):eO(isNaN(e)?n:e)}}function tO(t,e){var n=e-t;return n?CEe(t,n):eO(isNaN(t)?e:t)}const jR=function t(e){var n=_Ee(e);function r(s,a){var i=n((s=CS(s)).r,(a=CS(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),u=tO(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function Ed(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ES=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kE=new RegExp(ES.source,"g");function SEe(t){return function(){return t}}function TEe(t){return function(e){return t(e)+""}}function BEe(t,e){var n=ES.lastIndex=kE.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=ES.exec(t))&&(s=kE.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:Ed(r,s)})),n=kE.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?TEe(l[0].x):SEe(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var OR=180/Math.PI,_S={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nO(t,e,n,r,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*OR,skewX:Math.atan(l)*OR,scaleX:i,scaleY:o}}var Gv;function NEe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?_S:nO(e.a,e.b,e.c,e.d,e.e,e.f)}function kEe(t){return t==null||(Gv||(Gv=document.createElementNS("http://www.w3.org/2000/svg","g")),Gv.setAttribute("transform",t),!(t=Gv.transform.baseVal.consolidate()))?_S:(t=t.matrix,nO(t.a,t.b,t.c,t.d,t.e,t.f))}function rO(t,e,n,r){function s(u){return u.length?u.pop()+" ":""}function a(u,d,h,p,g,b){if(u!==h||d!==p){var w=g.push("translate(",null,e,null,n);b.push({i:w-4,x:Ed(u,h)},{i:w-2,x:Ed(d,p)})}else(h||p)&&g.push("translate("+h+e+p+n)}function i(u,d,h,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Ed(u,d)})):d&&h.push(s(h)+"rotate("+d+r)}function o(u,d,h,p){u!==d?p.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Ed(u,d)}):d&&h.push(s(h)+"skewX("+d+r)}function l(u,d,h,p,g,b){if(u!==h||d!==p){var w=g.push(s(g)+"scale(",null,",",null,")");b.push({i:w-4,x:Ed(u,h)},{i:w-2,x:Ed(d,p)})}else(h!==1||p!==1)&&g.push(s(g)+"scale("+h+","+p+")")}return function(u,d){var h=[],p=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,h,p),i(u.rotate,d.rotate,h,p),o(u.skewX,d.skewX,h,p),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,p),u=d=null,function(g){for(var b=-1,w=p.length,C;++b<w;)h[(C=p[b]).i]=C.x(g);return h.join("")}}}var IEe=rO(NEe,"px, ","px)","deg)"),FEe=rO(kEe,", ",")",")"),REe=1e-12;function QR(t){return((t=Math.exp(t))+1/t)/2}function DEe(t){return((t=Math.exp(t))-1/t)/2}function UEe(t){return((t=Math.exp(2*t))-1)/(t+1)}const LEe=function t(e,n,r){function s(a,i){var o=a[0],l=a[1],u=a[2],d=i[0],h=i[1],p=i[2],g=d-o,b=h-l,w=g*g+b*b,C,T;if(w<REe)T=Math.log(p/u)/e,C=function(_){return[o+_*g,l+_*b,u*Math.exp(e*_*T)]};else{var I=Math.sqrt(w),k=(p*p-u*u+r*w)/(2*u*n*I),R=(p*p-u*u-r*w)/(2*p*n*I),D=Math.log(Math.sqrt(k*k+1)-k),P=Math.log(Math.sqrt(R*R+1)-R);T=(P-D)/e,C=function(_){var N=_*T,B=QR(D),O=u/(n*I)*(B*UEe(e*N+D)-DEe(D));return[o+O*g,l+O*b,u*B/QR(e*N+D)]}}return C.duration=T*1e3*e/Math.SQRT2,C}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var Tm=0,Ag=0,Hp=0,sO=1e3,Ey,dg,_y=0,wh=0,Lw=0,mx=typeof performance=="object"&&performance.now?performance:Date,aO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function j4(){return wh||(aO(MEe),wh=mx.now()+Lw)}function MEe(){wh=0}function Sy(){this._call=this._time=this._next=null}Sy.prototype=iO.prototype={constructor:Sy,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?j4():+n)+(e==null?0:+e),!this._next&&dg!==this&&(dg?dg._next=this:Ey=this,dg=this),this._call=t,this._time=n,SS()},stop:function(){this._call&&(this._call=null,this._time=1/0,SS())}};function iO(t,e,n){var r=new Sy;return r.restart(t,e,n),r}function PEe(){j4(),++Tm;for(var t=Ey,e;t;)(e=wh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tm}function HR(){wh=(_y=mx.now())+Lw,Tm=Ag=0;try{PEe()}finally{Tm=0,OEe(),wh=0}}function jEe(){var t=mx.now(),e=t-_y;e>sO&&(Lw-=e,_y=t)}function OEe(){for(var t,e=Ey,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ey=n);dg=t,SS(r)}function SS(t){if(!Tm){Ag&&(Ag=clearTimeout(Ag));var e=t-wh;e>24?(t<1/0&&(Ag=setTimeout(HR,t-mx.now()-Lw)),Hp&&(Hp=clearInterval(Hp))):(Hp||(_y=mx.now(),Hp=setInterval(jEe,sO)),Tm=1,aO(HR))}}function VR(t,e,n){var r=new Sy;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var QEe=Dw("start","end","cancel","interrupt"),HEe=[],oO=0,GR=1,TS=2,v2=3,zR=4,BS=5,y2=6;function Mw(t,e,n,r,s,a){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;VEe(t,n,{name:e,index:r,group:s,on:QEe,tween:HEe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:oO})}function O4(t,e){var n=Bc(t,e);if(n.state>oO)throw new Error("too late; already scheduled");return n}function ku(t,e){var n=Bc(t,e);if(n.state>v2)throw new Error("too late; already running");return n}function Bc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function VEe(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=iO(a,0,n.time);function a(u){n.state=GR,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,h,p,g;if(n.state!==GR)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===v2)return VR(i);g.state===zR?(g.state=y2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=y2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[d])}if(VR(function(){n.state===v2&&(n.state=zR,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=TS,n.on.call("start",t,t.__data__,n.index,n.group),n.state===TS){for(n.state=v2,s=new Array(p=n.tween.length),d=0,h=-1;d<p;++d)(g=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(s[++h]=g);s.length=h+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=BS,1),h=-1,p=s.length;++h<p;)s[h].call(t,d);n.state===BS&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=y2,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function w2(t,e){var n=t.__transition,r,s,a=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){a=!1;continue}s=r.state>TS&&r.state<BS,r.state=y2,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}a&&delete t.__transition}}function GEe(t){return this.each(function(){w2(this,t)})}function zEe(t,e){var n,r;return function(){var s=ku(this,t),a=s.tween;if(a!==n){r=n=a;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function qEe(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=ku(this,t),i=a.tween;if(i!==r){s=(r=i).slice();for(var o={name:e,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function KEe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Bc(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((e==null?zEe:qEe)(n,t,e))}function Q4(t,e,n){var r=t._id;return t.each(function(){var s=ku(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Bc(s,r).value[e]}}function lO(t,e){var n;return(typeof e=="number"?Ed:e instanceof hx?jR:(n=hx(e))?(e=n,jR):BEe)(t,e)}function WEe(t){return function(){this.removeAttribute(t)}}function $Ee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function YEe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===r?a:a=e(r=i,n)}}function JEe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?a:a=e(r=i,n)}}function XEe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function ZEe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function e_e(t,e){var n=Uw(t),r=n==="transform"?FEe:lO;return this.attrTween(t,typeof e=="function"?(n.local?ZEe:XEe)(n,r,Q4(this,"attr."+t,e)):e==null?(n.local?$Ee:WEe)(n):(n.local?JEe:YEe)(n,r,e))}function t_e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function n_e(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function r_e(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&n_e(t,a)),n}return s._value=e,s}function s_e(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&t_e(t,a)),n}return s._value=e,s}function a_e(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Uw(t);return this.tween(n,(r.local?r_e:s_e)(r,e))}function i_e(t,e){return function(){O4(this,t).delay=+e.apply(this,arguments)}}function o_e(t,e){return e=+e,function(){O4(this,t).delay=e}}function l_e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?i_e:o_e)(e,t)):Bc(this.node(),e).delay}function c_e(t,e){return function(){ku(this,t).duration=+e.apply(this,arguments)}}function u_e(t,e){return e=+e,function(){ku(this,t).duration=e}}function A_e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?c_e:u_e)(e,t)):Bc(this.node(),e).duration}function d_e(t,e){if(typeof e!="function")throw new Error;return function(){ku(this,t).ease=e}}function f_e(t){var e=this._id;return arguments.length?this.each(d_e(e,t)):Bc(this.node(),e).ease}function h_e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ku(this,t).ease=n}}function m_e(t){if(typeof t!="function")throw new Error;return this.each(h_e(this._id,t))}function p_e(t){typeof t!="function"&&(t=Oj(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new TA(r,this._parents,this._name,this._id)}function g_e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),i=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],d=l.length,h=i[o]=new Array(d),p,g=0;g<d;++g)(p=l[g]||u[g])&&(h[g]=p);for(;o<r;++o)i[o]=e[o];return new TA(i,this._parents,this._name,this._id)}function x_e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function v_e(t,e,n){var r,s,a=x_e(e)?O4:ku;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}function y_e(t,e){var n=this._id;return arguments.length<2?Bc(this.node(),n).on.on(t):this.each(v_e(n,t,e))}function w_e(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function b_e(){return this.on("end.remove",w_e(this._id))}function C_e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=L4(t));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,u=a[i]=new Array(l),d,h,p=0;p<l;++p)(d=o[p])&&(h=t.call(d,d.__data__,p,o))&&("__data__"in d&&(h.__data__=d.__data__),u[p]=h,Mw(u[p],e,n,p,u,Bc(d,n)));return new TA(a,this._parents,e,n)}function E_e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=jj(t));for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var p=t.call(d,d.__data__,h,l),g,b=Bc(d,n),w=0,C=p.length;w<C;++w)(g=p[w])&&Mw(g,e,n,w,p,b);a.push(p),i.push(d)}return new TA(a,i,e,n)}var __e=Gx.prototype.constructor;function S_e(){return new __e(this._groups,this._parents)}function T_e(t,e){var n,r,s;return function(){var a=Sm(this,t),i=(this.style.removeProperty(t),Sm(this,t));return a===i?null:a===n&&i===r?s:s=e(n=a,r=i)}}function cO(t){return function(){this.style.removeProperty(t)}}function B_e(t,e,n){var r,s=n+"",a;return function(){var i=Sm(this,t);return i===s?null:i===r?a:a=e(r=i,n)}}function N_e(t,e,n){var r,s,a;return function(){var i=Sm(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Sm(this,t))),i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o))}}function k_e(t,e){var n,r,s,a="style."+e,i="end."+a,o;return function(){var l=ku(this,t),u=l.on,d=l.value[a]==null?o||(o=cO(e)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(i,s=d),l.on=r}}function I_e(t,e,n){var r=(t+="")=="transform"?IEe:lO;return e==null?this.styleTween(t,T_e(t,r)).on("end.style."+t,cO(t)):typeof e=="function"?this.styleTween(t,N_e(t,r,Q4(this,"style."+t,e))).each(k_e(this._id,t)):this.styleTween(t,B_e(t,r,e),n).on("end.style."+t,null)}function F_e(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function R_e(t,e,n){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&F_e(t,i,n)),r}return a._value=e,a}function D_e(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,R_e(t,e,n??""))}function U_e(t){return function(){this.textContent=t}}function L_e(t){return function(){var e=t(this);this.textContent=e??""}}function M_e(t){return this.tween("text",typeof t=="function"?L_e(Q4(this,"text",t)):U_e(t==null?"":t+""))}function P_e(t){return function(e){this.textContent=t.call(this,e)}}function j_e(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&P_e(s)),e}return r._value=t,r}function O_e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,j_e(t))}function Q_e(){for(var t=this._name,e=this._id,n=uO(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Bc(l,e);Mw(l,t,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new TA(r,this._parents,t,n)}function H_e(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var u=ku(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),s===0&&a()})}var V_e=0;function TA(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function uO(){return++V_e}var cA=Gx.prototype;TA.prototype={constructor:TA,select:C_e,selectAll:E_e,selectChild:cA.selectChild,selectChildren:cA.selectChildren,filter:p_e,merge:g_e,selection:S_e,transition:Q_e,call:cA.call,nodes:cA.nodes,node:cA.node,size:cA.size,empty:cA.empty,each:cA.each,on:y_e,attr:e_e,attrTween:a_e,style:I_e,styleTween:D_e,text:M_e,textTween:O_e,remove:b_e,tween:KEe,delay:l_e,duration:A_e,ease:f_e,easeVarying:m_e,end:H_e,[Symbol.iterator]:cA[Symbol.iterator]};function G_e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var z_e={time:null,delay:0,duration:250,ease:G_e};function q_e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function K_e(t){var e,n;t instanceof TA?(e=t._id,t=t._name):(e=uO(),(n=z_e).time=j4(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&Mw(l,t,e,u,i,n||q_e(l,e));return new TA(r,this._parents,t,e)}Gx.prototype.interrupt=GEe;Gx.prototype.transition=K_e;const zv=t=>()=>t;function W_e(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function hA(t,e,n){this.k=t,this.x=e,this.y=n}hA.prototype={constructor:hA,scale:function(t){return t===1?this:new hA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new hA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qd=new hA(1,0,0);hA.prototype;function IE(t){t.stopImmediatePropagation()}function Vp(t){t.preventDefault(),t.stopImmediatePropagation()}function $_e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Y_e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function qR(){return this.__zoom||qd}function J_e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function X_e(){return navigator.maxTouchPoints||"ontouchstart"in this}function Z_e(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function eSe(){var t=$_e,e=Y_e,n=Z_e,r=J_e,s=X_e,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=LEe,u=Dw("start","zoom","end"),d,h,p,g=500,b=150,w=0,C=10;function T(G){G.property("__zoom",qR).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(G,oe,q,X){var re=G.selection?G.selection():G;re.property("__zoom",qR),G!==re?D(G,oe,q,X):re.interrupt().each(function(){P(this,arguments).event(X).start().zoom(null,typeof oe=="function"?oe.apply(this,arguments):oe).end()})},T.scaleBy=function(G,oe,q,X){T.scaleTo(G,function(){var re=this.__zoom.k,K=typeof oe=="function"?oe.apply(this,arguments):oe;return re*K},q,X)},T.scaleTo=function(G,oe,q,X){T.transform(G,function(){var re=e.apply(this,arguments),K=this.__zoom,Z=q==null?R(re):typeof q=="function"?q.apply(this,arguments):q,Ae=K.invert(Z),j=typeof oe=="function"?oe.apply(this,arguments):oe;return n(k(I(K,j),Z,Ae),re,i)},q,X)},T.translateBy=function(G,oe,q,X){T.transform(G,function(){return n(this.__zoom.translate(typeof oe=="function"?oe.apply(this,arguments):oe,typeof q=="function"?q.apply(this,arguments):q),e.apply(this,arguments),i)},null,X)},T.translateTo=function(G,oe,q,X,re){T.transform(G,function(){var K=e.apply(this,arguments),Z=this.__zoom,Ae=X==null?R(K):typeof X=="function"?X.apply(this,arguments):X;return n(qd.translate(Ae[0],Ae[1]).scale(Z.k).translate(typeof oe=="function"?-oe.apply(this,arguments):-oe,typeof q=="function"?-q.apply(this,arguments):-q),K,i)},X,re)};function I(G,oe){return oe=Math.max(a[0],Math.min(a[1],oe)),oe===G.k?G:new hA(oe,G.x,G.y)}function k(G,oe,q){var X=oe[0]-q[0]*G.k,re=oe[1]-q[1]*G.k;return X===G.x&&re===G.y?G:new hA(G.k,X,re)}function R(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function D(G,oe,q,X){G.on("start.zoom",function(){P(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(X).end()}).tween("zoom",function(){var re=this,K=arguments,Z=P(re,K).event(X),Ae=e.apply(re,K),j=q==null?R(Ae):typeof q=="function"?q.apply(re,K):q,W=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),J=re.__zoom,ne=typeof oe=="function"?oe.apply(re,K):oe,ie=l(J.invert(j).concat(W/J.k),ne.invert(j).concat(W/ne.k));return function(de){if(de===1)de=ne;else{var me=ie(de),xe=W/me[2];de=new hA(xe,j[0]-me[0]*xe,j[1]-me[1]*xe)}Z.zoom(null,de)}})}function P(G,oe,q){return!q&&G.__zooming||new _(G,oe)}function _(G,oe){this.that=G,this.args=oe,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,oe),this.taps=0}_.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,oe){return this.mouse&&G!=="mouse"&&(this.mouse[1]=oe.invert(this.mouse[0])),this.touch0&&G!=="touch"&&(this.touch0[1]=oe.invert(this.touch0[0])),this.touch1&&G!=="touch"&&(this.touch1[1]=oe.invert(this.touch1[0])),this.that.__zoom=oe,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var oe=hc(this.that).datum();u.call(G,this.that,new W_e(G,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:u}),oe)}};function N(G,...oe){if(!t.apply(this,arguments))return;var q=P(this,oe).event(G),X=this.__zoom,re=Math.max(a[0],Math.min(a[1],X.k*Math.pow(2,r.apply(this,arguments)))),K=du(G);if(q.wheel)(q.mouse[0][0]!==K[0]||q.mouse[0][1]!==K[1])&&(q.mouse[1]=X.invert(q.mouse[0]=K)),clearTimeout(q.wheel);else{if(X.k===re)return;q.mouse=[K,X.invert(K)],w2(this),q.start()}Vp(G),q.wheel=setTimeout(Z,b),q.zoom("mouse",n(k(I(X,re),q.mouse[0],q.mouse[1]),q.extent,i));function Z(){q.wheel=null,q.end()}}function B(G,...oe){if(p||!t.apply(this,arguments))return;var q=G.currentTarget,X=P(this,oe,!0).event(G),re=hc(G.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",W,!0),K=du(G,q),Z=G.clientX,Ae=G.clientY;Yj(G.view),IE(G),X.mouse=[K,this.__zoom.invert(K)],w2(this),X.start();function j(J){if(Vp(J),!X.moved){var ne=J.clientX-Z,ie=J.clientY-Ae;X.moved=ne*ne+ie*ie>w}X.event(J).zoom("mouse",n(k(X.that.__zoom,X.mouse[0]=du(J,q),X.mouse[1]),X.extent,i))}function W(J){re.on("mousemove.zoom mouseup.zoom",null),Jj(J.view,X.moved),Vp(J),X.event(J).end()}}function O(G,...oe){if(t.apply(this,arguments)){var q=this.__zoom,X=du(G.changedTouches?G.changedTouches[0]:G,this),re=q.invert(X),K=q.k*(G.shiftKey?.5:2),Z=n(k(I(q,K),X,re),e.apply(this,oe),i);Vp(G),o>0?hc(this).transition().duration(o).call(D,Z,X,G):hc(this).call(T.transform,Z,X,G)}}function M(G,...oe){if(t.apply(this,arguments)){var q=G.touches,X=q.length,re=P(this,oe,G.changedTouches.length===X).event(G),K,Z,Ae,j;for(IE(G),Z=0;Z<X;++Z)Ae=q[Z],j=du(Ae,this),j=[j,this.__zoom.invert(j),Ae.identifier],re.touch0?!re.touch1&&re.touch0[2]!==j[2]&&(re.touch1=j,re.taps=0):(re.touch0=j,K=!0,re.taps=1+!!d);d&&(d=clearTimeout(d)),K&&(re.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),w2(this),re.start())}}function L(G,...oe){if(this.__zooming){var q=P(this,oe).event(G),X=G.changedTouches,re=X.length,K,Z,Ae,j;for(Vp(G),K=0;K<re;++K)Z=X[K],Ae=du(Z,this),q.touch0&&q.touch0[2]===Z.identifier?q.touch0[0]=Ae:q.touch1&&q.touch1[2]===Z.identifier&&(q.touch1[0]=Ae);if(Z=q.that.__zoom,q.touch1){var W=q.touch0[0],J=q.touch0[1],ne=q.touch1[0],ie=q.touch1[1],de=(de=ne[0]-W[0])*de+(de=ne[1]-W[1])*de,me=(me=ie[0]-J[0])*me+(me=ie[1]-J[1])*me;Z=I(Z,Math.sqrt(de/me)),Ae=[(W[0]+ne[0])/2,(W[1]+ne[1])/2],j=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(q.touch0)Ae=q.touch0[0],j=q.touch0[1];else return;q.zoom("touch",n(k(Z,Ae,j),q.extent,i))}}function H(G,...oe){if(this.__zooming){var q=P(this,oe).event(G),X=G.changedTouches,re=X.length,K,Z;for(IE(G),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),K=0;K<re;++K)Z=X[K],q.touch0&&q.touch0[2]===Z.identifier?delete q.touch0:q.touch1&&q.touch1[2]===Z.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(Z=du(Z,this),Math.hypot(h[0]-Z[0],h[1]-Z[1])<C)){var Ae=hc(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return T.wheelDelta=function(G){return arguments.length?(r=typeof G=="function"?G:zv(+G),T):r},T.filter=function(G){return arguments.length?(t=typeof G=="function"?G:zv(!!G),T):t},T.touchable=function(G){return arguments.length?(s=typeof G=="function"?G:zv(!!G),T):s},T.extent=function(G){return arguments.length?(e=typeof G=="function"?G:zv([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),T):e},T.scaleExtent=function(G){return arguments.length?(a[0]=+G[0],a[1]=+G[1],T):[a[0],a[1]]},T.translateExtent=function(G){return arguments.length?(i[0][0]=+G[0][0],i[1][0]=+G[1][0],i[0][1]=+G[0][1],i[1][1]=+G[1][1],T):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},T.constrain=function(G){return arguments.length?(n=G,T):n},T.duration=function(G){return arguments.length?(o=+G,T):o},T.interpolate=function(G){return arguments.length?(l=G,T):l},T.on=function(){var G=u.on.apply(u,arguments);return G===u?T:G},T.clickDistance=function(G){return arguments.length?(w=(G=+G)*G,T):Math.sqrt(w)},T.tapDistance=function(G){return arguments.length?(C=+G,T):C},T}ND();const Pw=ee.createContext(null),tSe=Pw.Provider,BA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},AO=BA.error001();function Es(t,e){const n=ee.useContext(Pw);if(n===null)throw new Error(AO);return Mj(n,t,e)}const za=()=>{const t=ee.useContext(Pw);if(t===null)throw new Error(AO);return ee.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},nSe=t=>t.userSelectionActive?"none":"all";function dO({position:t,children:e,className:n,style:r,...s}){const a=Es(nSe),i=`${t}`.split("-");return At.createElement("div",{className:Yi(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},e)}function rSe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(dO,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const sSe=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=ee.useRef(null),[p,g]=ee.useState({x:0,y:0,width:0,height:0}),b=Yi(["react-flow__edge-textwrapper",u]);return ee.useEffect(()=>{if(h.current){const w=h.current.getBBox();g({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:At.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...d},s&&At.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:r},n),l)};var aSe=ee.memo(sSe);const H4=t=>({width:t.offsetWidth,height:t.offsetHeight}),Bm=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),V4=(t={x:0,y:0},e)=>({x:Bm(t.x,e[0][0],e[1][0]),y:Bm(t.y,e[0][1],e[1][1])}),KR=(t,e,n)=>t<e?Bm(Math.abs(t-e),1,50)/50:t>n?-Bm(Math.abs(t-n),1,50)/50:0,fO=(t,e)=>{const n=KR(t.x,35,e.width-35)*20,r=KR(t.y,35,e.height-35)*20;return[n,r]},hO=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},iSe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),G4=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),oSe=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),WR=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),NS=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},lSe=t=>Rl(t.width)&&Rl(t.height)&&Rl(t.x)&&Rl(t.y),Rl=t=>!isNaN(t)&&isFinite(t),Us=Symbol.for("internals"),mO=["Enter"," ","Escape"],cSe=(t,e)=>{},uSe=t=>"nativeEvent"in t;function kS(t){var s,a;const e=uSe(t)?t.nativeEvent:t,n=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const pO=t=>"clientX"in t,Kd=(t,e)=>{var a,i;const n=pO(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},Ty=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},qx=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:p}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&Rl(n)&&Rl(r)?At.createElement(aSe,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);qx.displayName="BaseEdge";function Gp(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function gO({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[a,o,s,i]}function xO({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+n*.125,u=e*.125+a*.375+o*.375+r*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var bh;(function(t){t.Strict="strict",t.Loose="loose"})(bh||(bh={}));var Xf;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Xf||(Xf={}));var px;(function(t){t.Partial="partial",t.Full="full"})(px||(px={}));var kd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(kd||(kd={}));var By;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(By||(By={}));var on;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(on||(on={}));function $R({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===on.Left||t===on.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function vO({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:s,targetPosition:a=on.Top}){const[i,o]=$R({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,u]=$R({pos:a,x1:r,y1:s,x2:t,y2:e}),[d,h,p,g]=xO({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${r},${s}`,d,h,p,g]}const z4=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=on.Bottom,targetPosition:a=on.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:b,interactionWidth:w})=>{const[C,T,I]=vO({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return At.createElement(qx,{path:C,labelX:T,labelY:I,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:b,interactionWidth:w})});z4.displayName="SimpleBezierEdge";const YR={[on.Left]:{x:-1,y:0},[on.Right]:{x:1,y:0},[on.Top]:{x:0,y:-1},[on.Bottom]:{x:0,y:1}},ASe=({source:t,sourcePosition:e=on.Bottom,target:n})=>e===on.Left||e===on.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},JR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function dSe({source:t,sourcePosition:e=on.Bottom,target:n,targetPosition:r=on.Top,center:s,offset:a}){const i=YR[e],o=YR[r],l={x:t.x+i.x*a,y:t.y+i.y*a},u={x:n.x+o.x*a,y:n.y+o.y*a},d=ASe({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",p=d[h];let g=[],b,w;const C={x:0,y:0},T={x:0,y:0},[I,k,R,D]=gO({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*o[h]===-1){b=s.x??I,w=s.y??k;const _=[{x:b,y:l.y},{x:b,y:u.y}],N=[{x:l.x,y:w},{x:u.x,y:w}];i[h]===p?g=h==="x"?_:N:g=h==="x"?N:_}else{const _=[{x:l.x,y:u.y}],N=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===p?N:_:g=i.y===p?_:N,e===r){const H=Math.abs(t[h]-n[h]);if(H<=a){const G=Math.min(a-1,a-H);i[h]===p?C[h]=(l[h]>t[h]?-1:1)*G:T[h]=(u[h]>n[h]?-1:1)*G}}if(e!==r){const H=h==="x"?"y":"x",G=i[h]===o[H],oe=l[H]>u[H],q=l[H]<u[H];(i[h]===1&&(!G&&oe||G&&q)||i[h]!==1&&(!G&&q||G&&oe))&&(g=h==="x"?_:N)}const B={x:l.x+C.x,y:l.y+C.y},O={x:u.x+T.x,y:u.y+T.y},M=Math.max(Math.abs(B.x-g[0].x),Math.abs(O.x-g[0].x)),L=Math.max(Math.abs(B.y-g[0].y),Math.abs(O.y-g[0].y));M>=L?(b=(B.x+O.x)/2,w=g[0].y):(b=g[0].x,w=(B.y+O.y)/2)}return[[t,{x:l.x+C.x,y:l.y+C.y},...g,{x:u.x+T.x,y:u.y+T.y},n],b,w,R,D]}function fSe(t,e,n,r){const s=Math.min(JR(t,e)/2,JR(e,n)/2,r),{x:a,y:i}=e;if(t.x===a&&a===n.x||t.y===i&&i===n.y)return`L${a} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${a+s*u},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function IS({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:s,targetPosition:a=on.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,p,g,b]=dSe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[d.reduce((C,T,I)=>{let k="";return I>0&&I<d.length-1?k=fSe(d[I-1],T,d[I+1],i):k=`${I===0?"M":"L"}${T.x} ${T.y}`,C+=k,C},""),h,p,g,b]}const jw=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=on.Bottom,targetPosition:p=on.Top,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:C})=>{const[T,I,k]=IS({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:p,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return At.createElement(qx,{path:T,labelX:I,labelY:k,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:C})});jw.displayName="SmoothStepEdge";const q4=ee.memo(t=>{var e;return At.createElement(jw,{...t,pathOptions:ee.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});q4.displayName="StepEdge";function hSe({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,i,o]=gO({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,i,o]}const K4=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[b,w,C]=hSe({sourceX:t,sourceY:e,targetX:n,targetY:r});return At.createElement(qx,{path:b,labelX:w,labelY:C,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:g})});K4.displayName="StraightEdge";function qv(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function XR({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case on.Left:return[e-qv(e-r,a),n];case on.Right:return[e+qv(r-e,a),n];case on.Top:return[e,n-qv(n-s,a)];case on.Bottom:return[e,n+qv(s-n,a)]}}function yO({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:s,targetPosition:a=on.Top,curvature:i=.25}){const[o,l]=XR({pos:n,x1:t,y1:e,x2:r,y2:s,c:i}),[u,d]=XR({pos:a,x1:r,y1:s,x2:t,y2:e,c:i}),[h,p,g,b]=xO({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${s}`,h,p,g,b]}const Ny=ee.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=on.Bottom,targetPosition:a=on.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:C})=>{const[T,I,k]=yO({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:w==null?void 0:w.curvature});return At.createElement(qx,{path:T,labelX:I,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:b,interactionWidth:C})});Ny.displayName="BezierEdge";const W4=ee.createContext(null),mSe=W4.Provider;W4.Consumer;const pSe=()=>ee.useContext(W4),gSe=t=>"id"in t&&"source"in t&&"target"in t,xSe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,FS=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,vSe=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),ySe=(t,e)=>{if(!t.source||!t.target)return e;let n;return gSe(t)?n={...t}:n={...t,id:xSe(t)},vSe(n,e)?e:e.concat(n)},RS=({x:t,y:e},[n,r,s],a,[i,o])=>{const l={x:(t-n)/s,y:(e-r)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},wO=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),dm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},$4=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:i}=dm(s,e).positionAbsolute;return iSe(r,G4({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return oSe(n)},bO=(t,e,[n,r,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},u=[];return t.forEach(d=>{const{width:h,height:p,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:w}=dm(d,o),C={x:w.x,y:w.y,width:h||0,height:p||0},T=NS(l,C),I=typeof h>"u"||typeof p>"u"||h===null||p===null,k=a&&T>0,R=(h||0)*(p||0);(I||k||T>=R||d.dragging)&&u.push(d)}),u},CO=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},EO=(t,e,n,r,s,a=.1)=>{const i=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(i,o),u=Bm(l,r,s),d=t.x+t.width/2,h=t.y+t.height/2,p=e/2-d*u,g=n/2-h*u;return{x:p,y:g,zoom:u}},Vf=(t,e=0)=>t.transition().duration(e);function ZR(t,e,n,r){return(e[n]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function wSe(t,e,n,r,s,a){const{x:i,y:o}=Kd(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const w=Y4(void 0,u),C=u.getAttribute("data-handleid"),T=a({nodeId:b,id:C,type:w});if(T){const I=s.find(k=>k.nodeId===b&&k.type===w&&k.id===C);return{handle:{id:C,type:w,nodeId:b,x:(I==null?void 0:I.x)||n.x,y:(I==null?void 0:I.y)||n.y},validHandleResult:T}}}}let d=[],h=1/0;if(s.forEach(b=>{const w=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(w<=r){const C=a(b);w<=h&&(w<h?d=[{handle:b,validHandleResult:C}]:w===h&&d.push({handle:b,validHandleResult:C}),h=w)}}),!d.length)return{handle:null,validHandleResult:_O()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:w})=>g?b.type==="target":p?w.isValid:!0)||d[0]}const bSe={source:null,target:null,sourceHandle:null,targetHandle:null},_O=()=>({handleDomNode:null,isValid:!1,connection:bSe,endHandle:null});function SO(t,e,n,r,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={..._O(),handleDomNode:l};if(l){const d=Y4(void 0,l),h=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),w={source:o?h:n,sourceHandle:o?p:r,target:o?n:h,targetHandle:o?r:p};u.connection=w,g&&b&&(e===bh.Strict?o&&d==="source"||!o&&d==="target":h!==n||p!==r)&&(u.endHandle={nodeId:h,handleId:p,type:d},u.isValid=a(w))}return u}function CSe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Us]){const{handleBounds:i}=a[Us];let o=[],l=[];i&&(o=ZR(a,i,"source",`${e}-${n}-${r}`),l=ZR(a,i,"target",`${e}-${n}-${r}`)),s.push(...o,...l)}return s},[])}function Y4(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function FE(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ESe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function TO({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=hO(t.target),{connectionMode:h,domNode:p,autoPanOnConnect:g,connectionRadius:b,onConnectStart:w,panBy:C,getNodes:T,cancelConnection:I}=a();let k=0,R;const{x:D,y:P}=Kd(t),_=d==null?void 0:d.elementFromPoint(D,P),N=Y4(l,_),B=p==null?void 0:p.getBoundingClientRect();if(!B||!N)return;let O,M=Kd(t,B),L=!1,H=null,G=!1,oe=null;const q=CSe({nodes:T(),nodeId:n,handleId:e,handleType:N}),X=()=>{if(!g)return;const[Z,Ae]=fO(M,B);C({x:Z,y:Ae}),k=requestAnimationFrame(X)};i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:e,type:N},connectionEndHandle:null}),w==null||w(t,{nodeId:n,handleId:e,handleType:N});function re(Z){const{transform:Ae}=a();M=Kd(Z,B);const{handle:j,validHandleResult:W}=wSe(Z,d,RS(M,Ae,!1,[1,1]),b,q,J=>SO(J,h,n,e,s?"target":"source",o,d));if(R=j,L||(X(),L=!0),oe=W.handleDomNode,H=W.connection,G=W.isValid,i({connectionPosition:R&&G?wO({x:R.x,y:R.y},Ae):M,connectionStatus:ESe(!!R,G),connectionEndHandle:W.endHandle}),!R&&!G&&!oe)return FE(O);H.source!==H.target&&oe&&(FE(O),O=oe,oe.classList.add("connecting","react-flow__handle-connecting"),oe.classList.toggle("valid",G),oe.classList.toggle("react-flow__handle-valid",G))}function K(Z){var Ae,j;(R||oe)&&H&&G&&(r==null||r(H)),(j=(Ae=a()).onConnectEnd)==null||j.call(Ae,Z),l&&(u==null||u(Z)),FE(O),I(),cancelAnimationFrame(k),L=!1,G=!1,H=null,oe=null,d.removeEventListener("mousemove",re),d.removeEventListener("mouseup",K),d.removeEventListener("touchmove",re),d.removeEventListener("touchend",K)}d.addEventListener("mousemove",re),d.addEventListener("mouseup",K),d.addEventListener("touchmove",re),d.addEventListener("touchend",K)}const eD=()=>!0,_Se=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),SSe=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},BO=ee.forwardRef(({type:t="source",position:e=on.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...p},g)=>{var B,O;const b=i||null,w=t==="target",C=za(),T=pSe(),{connectOnClick:I,noPanClassName:k}=Es(_Se,Pi),{connecting:R,clickConnecting:D}=Es(SSe(T,b,t),Pi);T||(O=(B=C.getState()).onError)==null||O.call(B,"010",BA.error010());const P=M=>{const{defaultEdgeOptions:L,onConnect:H,hasDefaultEdges:G}=C.getState(),oe={...L,...M};if(G){const{edges:q,setEdges:X}=C.getState();X(ySe(oe,q))}H==null||H(oe),o==null||o(oe)},_=M=>{if(!T)return;const L=pO(M);s&&(L&&M.button===0||!L)&&TO({event:M,handleId:b,nodeId:T,onConnect:P,isTarget:w,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||eD}),L?d==null||d(M):h==null||h(M)},N=M=>{const{onClickConnectStart:L,onClickConnectEnd:H,connectionClickStartHandle:G,connectionMode:oe,isValidConnection:q}=C.getState();if(!T||!G&&!s)return;if(!G){L==null||L(M,{nodeId:T,handleId:b,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:T,type:t,handleId:b}});return}const X=hO(M.target),re=n||q||eD,{connection:K,isValid:Z}=SO({nodeId:T,id:b,type:t},oe,G.nodeId,G.handleId||null,G.type,re,X);Z&&P(K),H==null||H(M),C.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":T,"data-handlepos":e,"data-id":`${T}-${b}-${t}`,className:Yi(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",k,u,{source:!w,target:w,connectable:r,connectablestart:s,connectableend:a,connecting:D,connectionindicator:r&&(s&&!R||a&&R)}]),onMouseDown:_,onTouchStart:_,onClick:I?N:void 0,ref:g,...p},l)});BO.displayName="Handle";var ky=ee.memo(BO);const NO=({data:t,isConnectable:e,targetPosition:n=on.Top,sourcePosition:r=on.Bottom})=>At.createElement(At.Fragment,null,At.createElement(ky,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,At.createElement(ky,{type:"source",position:r,isConnectable:e}));NO.displayName="DefaultNode";var DS=ee.memo(NO);const kO=({data:t,isConnectable:e,sourcePosition:n=on.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(ky,{type:"source",position:n,isConnectable:e}));kO.displayName="InputNode";var IO=ee.memo(kO);const FO=({data:t,isConnectable:e,targetPosition:n=on.Top})=>At.createElement(At.Fragment,null,At.createElement(ky,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);FO.displayName="OutputNode";var RO=ee.memo(FO);const J4=()=>null;J4.displayName="GroupNode";const TSe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Kv=t=>t.id;function BSe(t,e){return Pi(t.selectedNodes.map(Kv),e.selectedNodes.map(Kv))&&Pi(t.selectedEdges.map(Kv),e.selectedEdges.map(Kv))}const DO=ee.memo(({onSelectionChange:t})=>{const e=za(),{selectedNodes:n,selectedEdges:r}=Es(TSe,BSe);return ee.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});DO.displayName="SelectionListener";const NSe=t=>!!t.onSelectionChange;function kSe({onSelectionChange:t}){const e=Es(NSe);return t||e?At.createElement(DO,{onSelectionChange:t}):null}const ISe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function E0(t,e){ee.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Yn(t,e,n){ee.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const FSe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:p,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:w,maxZoom:C,nodeExtent:T,onNodesChange:I,onEdgesChange:k,elementsSelectable:R,connectionMode:D,snapGrid:P,snapToGrid:_,translateExtent:N,connectOnClick:B,defaultEdgeOptions:O,fitView:M,fitViewOptions:L,onNodesDelete:H,onEdgesDelete:G,onNodeDrag:oe,onNodeDragStart:q,onNodeDragStop:X,onSelectionDrag:re,onSelectionDragStart:K,onSelectionDragStop:Z,noPanClassName:Ae,nodeOrigin:j,rfId:W,autoPanOnConnect:J,autoPanOnNodeDrag:ne,onError:ie,connectionRadius:de,isValidConnection:me,nodeDragThreshold:xe})=>{const{setNodes:Se,setEdges:ge,setDefaultNodesAndEdges:ae,setMinZoom:Fe,setMaxZoom:et,setTranslateExtent:De,setNodeExtent:Ce,reset:Ge}=Es(ISe,Pi),nt=za();return ee.useEffect(()=>{const it=r==null?void 0:r.map(dt=>({...dt,...O}));return ae(n,it),()=>{Ge()}},[]),Yn("defaultEdgeOptions",O,nt.setState),Yn("connectionMode",D,nt.setState),Yn("onConnect",s,nt.setState),Yn("onConnectStart",a,nt.setState),Yn("onConnectEnd",i,nt.setState),Yn("onClickConnectStart",o,nt.setState),Yn("onClickConnectEnd",l,nt.setState),Yn("nodesDraggable",u,nt.setState),Yn("nodesConnectable",d,nt.setState),Yn("nodesFocusable",h,nt.setState),Yn("edgesFocusable",p,nt.setState),Yn("edgesUpdatable",g,nt.setState),Yn("elementsSelectable",R,nt.setState),Yn("elevateNodesOnSelect",b,nt.setState),Yn("snapToGrid",_,nt.setState),Yn("snapGrid",P,nt.setState),Yn("onNodesChange",I,nt.setState),Yn("onEdgesChange",k,nt.setState),Yn("connectOnClick",B,nt.setState),Yn("fitViewOnInit",M,nt.setState),Yn("fitViewOnInitOptions",L,nt.setState),Yn("onNodesDelete",H,nt.setState),Yn("onEdgesDelete",G,nt.setState),Yn("onNodeDrag",oe,nt.setState),Yn("onNodeDragStart",q,nt.setState),Yn("onNodeDragStop",X,nt.setState),Yn("onSelectionDrag",re,nt.setState),Yn("onSelectionDragStart",K,nt.setState),Yn("onSelectionDragStop",Z,nt.setState),Yn("noPanClassName",Ae,nt.setState),Yn("nodeOrigin",j,nt.setState),Yn("rfId",W,nt.setState),Yn("autoPanOnConnect",J,nt.setState),Yn("autoPanOnNodeDrag",ne,nt.setState),Yn("onError",ie,nt.setState),Yn("connectionRadius",de,nt.setState),Yn("isValidConnection",me,nt.setState),Yn("nodeDragThreshold",xe,nt.setState),E0(t,Se),E0(e,ge),E0(w,Fe),E0(C,et),E0(N,De),E0(T,Ce),null},tD={display:"none"},RSe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},UO="react-flow__node-desc",LO="react-flow__edge-desc",DSe="react-flow__aria-live",USe=t=>t.ariaLiveMessage;function LSe({rfId:t}){const e=Es(USe);return At.createElement("div",{id:`${DSe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:RSe},e)}function MSe({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${UO}-${t}`,style:tD},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${LO}-${t}`,style:tD},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(LSe,{rfId:t}))}var gx=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=ee.useState(!1),s=ee.useRef(!1),a=ee.useRef(new Set([])),[i,o]=ee.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,p)=>h.concat(...p),[]);return[u,d]}return[[],[]]},[t]);return ee.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&kS(g))return!1;const w=rD(g.code,o);a.current.add(g[w]),nD(i,a.current,!1)&&(g.preventDefault(),r(!0))},h=g=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&kS(g))return!1;const w=rD(g.code,o);nD(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(g[w]),g.key==="Meta"&&a.current.clear(),s.current=!1},p=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",p)}}},[t,r]),n};function nD(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function rD(t,e){return e.includes(t)?"code":"key"}function MO(t,e,n,r){var o,l;const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),i=dm(a,r);return MO(a,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=a[Us])==null?void 0:o.z)??0)>(n.z??0)?((l=a[Us])==null?void 0:l.z)??0:n.z??0},r)}function PO(t,e,n){t.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:o,z:l}=MO(r,t,{...r.position,z:((a=r[Us])==null?void 0:a.z)??0},e);r.positionAbsolute={x:i,y:o},r[Us].z=l,n!=null&&n[r.id]&&(r[Us].isParent=!0)}})}function RE(t,e,n,r){const s=new Map,a={},i=r?1e3:0;return t.forEach(o=>{var g;const l=(Rl(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Us,{enumerable:!1,value:{handleBounds:p||(g=u==null?void 0:u[Us])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,d)}),PO(s,n,a),s}function jO(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),p=e.initial&&!u&&d;if(o&&l&&(p||!e.initial)){const b=n().filter(C=>{var I;const T=e.includeHiddenNodes?C.width&&C.height:!C.hidden;return(I=e.nodes)!=null&&I.length?T&&e.nodes.some(k=>k.id===C.id):T}),w=b.every(C=>C.width&&C.height);if(b.length>0&&w){const C=$4(b,h),{x:T,y:I,zoom:k}=EO(C,r,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),R=qd.translate(T,I).scale(k);return typeof e.duration=="number"&&e.duration>0?o.transform(Vf(l,e.duration),R):o.transform(l,R),!0}}return!1}function PSe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Us]:r[Us],selected:n.selected})}),new Map(e)}function jSe(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Wv({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:PSe(t,s)}),i==null||i(t)),e!=null&&e.length&&(u&&r({edges:jSe(e,a)}),o==null||o(e))}const _0=()=>{},OSe={zoomIn:_0,zoomOut:_0,zoomTo:_0,getZoom:()=>1,setViewport:_0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:_0,fitBounds:_0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},QSe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),HSe=()=>{const t=za(),{d3Zoom:e,d3Selection:n}=Es(QSe,Pi);return ee.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Vf(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(Vf(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(Vf(n,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,u=qd.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(Vf(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>jO(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-s*d,p=l/2-a*d,g=qd.translate(h,p).scale(d);e.transform(Vf(n,i==null?void 0:i.duration),g)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:p}=EO(s,i,o,l,u,(a==null?void 0:a.padding)??.1),g=qd.translate(d,h).scale(p);e.transform(Vf(n,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),RS(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:u,y:d}=l.getBoundingClientRect(),h={x:s.x-u,y:s.y-d};return RS(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),u=wO(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:OSe,[e,n])};function Ow(){const t=HSe(),e=za(),n=ee.useCallback(()=>e.getState().getNodes().map(w=>({...w})),[]),r=ee.useCallback(w=>e.getState().nodeInternals.get(w),[]),s=ee.useCallback(()=>{const{edges:w=[]}=e.getState();return w.map(C=>({...C}))},[]),a=ee.useCallback(w=>{const{edges:C=[]}=e.getState();return C.find(T=>T.id===w)},[]),i=ee.useCallback(w=>{const{getNodes:C,setNodes:T,hasDefaultNodes:I,onNodesChange:k}=e.getState(),R=C(),D=typeof w=="function"?w(R):w;if(I)T(D);else if(k){const P=D.length===0?R.map(_=>({type:"remove",id:_.id})):D.map(_=>({item:_,type:"reset"}));k(P)}},[]),o=ee.useCallback(w=>{const{edges:C=[],setEdges:T,hasDefaultEdges:I,onEdgesChange:k}=e.getState(),R=typeof w=="function"?w(C):w;if(I)T(R);else if(k){const D=R.length===0?C.map(P=>({type:"remove",id:P.id})):R.map(P=>({item:P,type:"reset"}));k(D)}},[]),l=ee.useCallback(w=>{const C=Array.isArray(w)?w:[w],{getNodes:T,setNodes:I,hasDefaultNodes:k,onNodesChange:R}=e.getState();if(k){const P=[...T(),...C];I(P)}else if(R){const D=C.map(P=>({item:P,type:"add"}));R(D)}},[]),u=ee.useCallback(w=>{const C=Array.isArray(w)?w:[w],{edges:T=[],setEdges:I,hasDefaultEdges:k,onEdgesChange:R}=e.getState();if(k)I([...T,...C]);else if(R){const D=C.map(P=>({item:P,type:"add"}));R(D)}},[]),d=ee.useCallback(()=>{const{getNodes:w,edges:C=[],transform:T}=e.getState(),[I,k,R]=T;return{nodes:w().map(D=>({...D})),edges:C.map(D=>({...D})),viewport:{x:I,y:k,zoom:R}}},[]),h=ee.useCallback(({nodes:w,edges:C})=>{const{nodeInternals:T,getNodes:I,edges:k,hasDefaultNodes:R,hasDefaultEdges:D,onNodesDelete:P,onEdgesDelete:_,onNodesChange:N,onEdgesChange:B}=e.getState(),O=(w||[]).map(oe=>oe.id),M=(C||[]).map(oe=>oe.id),L=I().reduce((oe,q)=>{const X=q.parentNode||q.parentId,re=!O.includes(q.id)&&X&&oe.find(Z=>Z.id===X);return(typeof q.deletable=="boolean"?q.deletable:!0)&&(O.includes(q.id)||re)&&oe.push(q),oe},[]),H=k.filter(oe=>typeof oe.deletable=="boolean"?oe.deletable:!0),G=H.filter(oe=>M.includes(oe.id));if(L||G){const oe=CO(L,H),q=[...G,...oe],X=q.reduce((re,K)=>(re.includes(K.id)||re.push(K.id),re),[]);if((D||R)&&(D&&e.setState({edges:k.filter(re=>!X.includes(re.id))}),R&&(L.forEach(re=>{T.delete(re.id)}),e.setState({nodeInternals:new Map(T)}))),X.length>0&&(_==null||_(q),B&&B(X.map(re=>({id:re,type:"remove"})))),L.length>0&&(P==null||P(L),N)){const re=L.map(K=>({id:K.id,type:"remove"}));N(re)}}},[]),p=ee.useCallback(w=>{const C=lSe(w),T=C?null:e.getState().nodeInternals.get(w.id);return!C&&!T?[null,null,C]:[C?w:WR(T),T,C]},[]),g=ee.useCallback((w,C=!0,T)=>{const[I,k,R]=p(w);return I?(T||e.getState().getNodes()).filter(D=>{if(!R&&(D.id===k.id||!D.positionAbsolute))return!1;const P=WR(D),_=NS(P,I);return C&&_>0||_>=I.width*I.height}):[]},[]),b=ee.useCallback((w,C,T=!0)=>{const[I]=p(w);if(!I)return!1;const k=NS(I,C);return T&&k>0||k>=I.width*I.height},[]);return ee.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,n,r,s,a,i,o,l,u,d,h,g,b])}const VSe={actInsideInputWithModifier:!1};var GSe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=za(),{deleteElements:r}=Ow(),s=gx(t,VSe),a=gx(e);ee.useEffect(()=>{if(s){const{edges:i,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),ee.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function zSe(t){const e=za();ee.useEffect(()=>{let n;const r=()=>{var a,i;if(!t.current)return;const s=H4(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",BA.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const X4={position:"absolute",width:"100%",height:"100%",top:0,left:0},qSe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,$v=t=>({x:t.x,y:t.y,zoom:t.k}),S0=(t,e)=>t.target.closest(`.${e}`),sD=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),aD=t=>{const e=t.ctrlKey&&Ty()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},KSe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),WSe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Xf.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:p,translateExtent:g,minZoom:b,maxZoom:w,zoomActivationKeyCode:C,preventScrolling:T=!0,children:I,noWheelClassName:k,noPanClassName:R})=>{const D=ee.useRef(),P=za(),_=ee.useRef(!1),N=ee.useRef(!1),B=ee.useRef(null),O=ee.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:L,d3ZoomHandler:H,userSelectionActive:G}=Es(KSe,Pi),oe=gx(C),q=ee.useRef(0),X=ee.useRef(!1),re=ee.useRef();return zSe(B),ee.useEffect(()=>{if(B.current){const K=B.current.getBoundingClientRect(),Z=eSe().scaleExtent([b,w]).translateExtent(g),Ae=hc(B.current).call(Z),j=qd.translate(p.x,p.y).scale(Bm(p.zoom,b,w)),W=[[0,0],[K.width,K.height]],J=Z.constrain()(j,W,g);Z.transform(Ae,J),Z.wheelDelta(aD),P.setState({d3Zoom:Z,d3Selection:Ae,d3ZoomHandler:Ae.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:B.current.closest(".react-flow")})}},[]),ee.useEffect(()=>{L&&M&&(i&&!oe&&!G?L.on("wheel.zoom",K=>{if(S0(K,k))return!1;K.preventDefault(),K.stopImmediatePropagation();const Z=L.property("__zoom").k||1;if(K.ctrlKey&&a){const me=du(K),xe=aD(K),Se=Z*Math.pow(2,xe);M.scaleTo(L,Se,me,K);return}const Ae=K.deltaMode===1?20:1;let j=l===Xf.Vertical?0:K.deltaX*Ae,W=l===Xf.Horizontal?0:K.deltaY*Ae;!Ty()&&K.shiftKey&&l!==Xf.Vertical&&(j=K.deltaY*Ae,W=0),M.translateBy(L,-(j/Z)*o,-(W/Z)*o,{internal:!0});const J=$v(L.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:ie,onViewportChangeEnd:de}=P.getState();clearTimeout(re.current),X.current||(X.current=!0,e==null||e(K,J),ne==null||ne(J)),X.current&&(t==null||t(K,J),ie==null||ie(J),re.current=setTimeout(()=>{n==null||n(K,J),de==null||de(J),X.current=!1},150))},{passive:!1}):typeof H<"u"&&L.on("wheel.zoom",function(K,Z){if(!T&&K.type==="wheel"&&!K.ctrlKey||S0(K,k))return null;K.preventDefault(),H.call(this,K,Z)},{passive:!1}))},[G,i,l,L,M,H,oe,a,T,k,e,t,n]),ee.useEffect(()=>{M&&M.on("start",K=>{var j,W;if(!K.sourceEvent||K.sourceEvent.internal)return null;q.current=(j=K.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:Z}=P.getState(),Ae=$v(K.transform);_.current=!0,O.current=Ae,((W=K.sourceEvent)==null?void 0:W.type)==="mousedown"&&P.setState({paneDragging:!0}),Z==null||Z(Ae),e==null||e(K.sourceEvent,Ae)})},[M,e]),ee.useEffect(()=>{M&&(G&&!_.current?M.on("zoom",null):G||M.on("zoom",K=>{var Ae;const{onViewportChange:Z}=P.getState();if(P.setState({transform:[K.transform.x,K.transform.y,K.transform.k]}),N.current=!!(r&&sD(h,q.current??0)),(t||Z)&&!((Ae=K.sourceEvent)!=null&&Ae.internal)){const j=$v(K.transform);Z==null||Z(j),t==null||t(K.sourceEvent,j)}}))},[G,M,t,h,r]),ee.useEffect(()=>{M&&M.on("end",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;const{onViewportChangeEnd:Z}=P.getState();if(_.current=!1,P.setState({paneDragging:!1}),r&&sD(h,q.current??0)&&!N.current&&r(K.sourceEvent),N.current=!1,(n||Z)&&qSe(O.current,K.transform)){const Ae=$v(K.transform);O.current=Ae,clearTimeout(D.current),D.current=setTimeout(()=>{Z==null||Z(Ae),n==null||n(K.sourceEvent,Ae)},i?150:0)}})},[M,i,h,n,r]),ee.useEffect(()=>{M&&M.filter(K=>{const Z=oe||s,Ae=a&&K.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&K.button===1&&K.type==="mousedown"&&(S0(K,"react-flow__node")||S0(K,"react-flow__edge")))return!0;if(!h&&!Z&&!i&&!u&&!a||G||!u&&K.type==="dblclick"||S0(K,k)&&K.type==="wheel"||S0(K,R)&&(K.type!=="wheel"||i&&K.type==="wheel"&&!oe)||!a&&K.ctrlKey&&K.type==="wheel"||!Z&&!i&&!Ae&&K.type==="wheel"||!h&&(K.type==="mousedown"||K.type==="touchstart")||Array.isArray(h)&&!h.includes(K.button)&&K.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(K.button)||!K.button||K.button<=1;return(!K.ctrlKey||K.type==="wheel")&&j})},[G,M,s,a,i,u,h,d,oe]),At.createElement("div",{className:"react-flow__renderer",ref:B,style:X4},I)},$Se=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function YSe(){const{userSelectionActive:t,userSelectionRect:e}=Es($Se,Pi);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function iD(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function OO(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&iD(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&iD(r,i);break}case"remove":return r}return r.push(i),r},n)}function QO(t,e){return OO(t,e)}function JSe(t,e){return OO(t,e)}const _d=(t,e)=>({id:t,type:"select",selected:e});function z0(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(_d(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(_d(r.id,!1))),n},[])}const DE=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},XSe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),HO=ee.memo(({isSelecting:t,selectionMode:e=px.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const p=ee.useRef(null),g=za(),b=ee.useRef(0),w=ee.useRef(0),C=ee.useRef(),{userSelectionActive:T,elementsSelectable:I,dragging:k}=Es(XSe,Pi),R=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,w.current=0},D=H=>{a==null||a(H),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=H=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){H.preventDefault();return}i==null||i(H)},_=o?H=>o(H):void 0,N=H=>{const{resetSelectedElements:G,domNode:oe}=g.getState();if(C.current=oe==null?void 0:oe.getBoundingClientRect(),!I||!t||H.button!==0||H.target!==p.current||!C.current)return;const{x:q,y:X}=Kd(H,C.current);G(),g.setState({userSelectionRect:{width:0,height:0,startX:q,startY:X,x:q,y:X}}),r==null||r(H)},B=H=>{const{userSelectionRect:G,nodeInternals:oe,edges:q,transform:X,onNodesChange:re,onEdgesChange:K,nodeOrigin:Z,getNodes:Ae}=g.getState();if(!t||!C.current||!G)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=Kd(H,C.current),W=G.startX??0,J=G.startY??0,ne={...G,x:j.x<W?j.x:W,y:j.y<J?j.y:J,width:Math.abs(j.x-W),height:Math.abs(j.y-J)},ie=Ae(),de=bO(oe,ne,X,e===px.Partial,!0,Z),me=CO(de,q).map(Se=>Se.id),xe=de.map(Se=>Se.id);if(b.current!==xe.length){b.current=xe.length;const Se=z0(ie,xe);Se.length&&(re==null||re(Se))}if(w.current!==me.length){w.current=me.length;const Se=z0(q,me);Se.length&&(K==null||K(Se))}g.setState({userSelectionRect:ne})},O=H=>{if(H.button!==0)return;const{userSelectionRect:G}=g.getState();!T&&G&&H.target===p.current&&(D==null||D(H)),g.setState({nodesSelectionActive:b.current>0}),R(),s==null||s(H)},M=H=>{T&&(g.setState({nodesSelectionActive:b.current>0}),s==null||s(H)),R()},L=I&&(t||T);return At.createElement("div",{className:Yi(["react-flow__pane",{dragging:k,selection:t}]),onClick:L?void 0:DE(D,p),onContextMenu:DE(P,p),onWheel:DE(_,p),onMouseEnter:L?void 0:l,onMouseDown:L?N:void 0,onMouseMove:L?B:u,onMouseUp:L?O:void 0,onMouseLeave:L?M:d,ref:p,style:X4},h,At.createElement(YSe,null))});HO.displayName="Pane";function VO(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:VO(r,e):!1}function oD(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ZSe(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!VO(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function e5e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function GO(t,e,n,r,s=[0,0],a){const i=e5e(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:p,y:g}=dm(h,s).positionAbsolute;o=h&&Rl(p)&&Rl(g)&&Rl(h.width)&&Rl(h.height)?[[p+t.width*s[0],g+t.height*s[1]],[p+h.width-t.width+t.width*s[0],g+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",BA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:p,y:g}=dm(h,s).positionAbsolute;o=[[t.extent[0][0]+p,t.extent[0][1]+g],[t.extent[1][0]+p,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=n.get(l);u=dm(h,s).positionAbsolute}const d=o&&o!=="parent"?V4(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function UE({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const lD=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/n,y:(u.top-i.top-o.y)/n,...H4(l)}})};function zp(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function US({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",BA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([t])}function t5e(){const t=za();return ee.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function LE(t){return(e,n,r)=>t==null?void 0:t(e,r)}function zO({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=za(),[l,u]=ee.useState(!1),d=ee.useRef([]),h=ee.useRef({x:null,y:null}),p=ee.useRef(0),g=ee.useRef(null),b=ee.useRef({x:0,y:0}),w=ee.useRef(null),C=ee.useRef(!1),T=ee.useRef(!1),I=ee.useRef(!1),k=t5e();return ee.useEffect(()=>{if(t!=null&&t.current){const R=hc(t.current),D=({x:N,y:B})=>{const{nodeInternals:O,onNodeDrag:M,onSelectionDrag:L,updateNodePositions:H,nodeExtent:G,snapGrid:oe,snapToGrid:q,nodeOrigin:X,onError:re}=o.getState();h.current={x:N,y:B};let K=!1,Z={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&G){const j=$4(d.current,X);Z=G4(j)}if(d.current=d.current.map(j=>{const W={x:N-j.distance.x,y:B-j.distance.y};q&&(W.x=oe[0]*Math.round(W.x/oe[0]),W.y=oe[1]*Math.round(W.y/oe[1]));const J=[[G[0][0],G[0][1]],[G[1][0],G[1][1]]];d.current.length>1&&G&&!j.extent&&(J[0][0]=j.positionAbsolute.x-Z.x+G[0][0],J[1][0]=j.positionAbsolute.x+(j.width??0)-Z.x2+G[1][0],J[0][1]=j.positionAbsolute.y-Z.y+G[0][1],J[1][1]=j.positionAbsolute.y+(j.height??0)-Z.y2+G[1][1]);const ne=GO(j,W,O,J,X,re);return K=K||j.position.x!==ne.position.x||j.position.y!==ne.position.y,j.position=ne.position,j.positionAbsolute=ne.positionAbsolute,j}),!K)return;H(d.current,!0,!0),u(!0);const Ae=s?M:LE(L);if(Ae&&w.current){const[j,W]=UE({nodeId:s,dragItems:d.current,nodeInternals:O});Ae(w.current,j,W)}},P=()=>{if(!g.current)return;const[N,B]=fO(b.current,g.current);if(N!==0||B!==0){const{transform:O,panBy:M}=o.getState();h.current.x=(h.current.x??0)-N/O[2],h.current.y=(h.current.y??0)-B/O[2],M({x:N,y:B})&&D(h.current)}p.current=requestAnimationFrame(P)},_=N=>{var X;const{nodeInternals:B,multiSelectionActive:O,nodesDraggable:M,unselectNodesAndEdges:L,onNodeDragStart:H,onSelectionDragStart:G}=o.getState();T.current=!0;const oe=s?H:LE(G);(!i||!a)&&!O&&s&&((X=B.get(s))!=null&&X.selected||L()),s&&a&&i&&US({id:s,store:o,nodeRef:t});const q=k(N);if(h.current=q,d.current=ZSe(B,M,q,s),oe&&d.current){const[re,K]=UE({nodeId:s,dragItems:d.current,nodeInternals:B});oe(N.sourceEvent,re,K)}};if(e)R.on(".drag",null);else{const N=uEe().on("start",B=>{const{domNode:O,nodeDragThreshold:M}=o.getState();M===0&&_(B),I.current=!1;const L=k(B);h.current=L,g.current=(O==null?void 0:O.getBoundingClientRect())||null,b.current=Kd(B.sourceEvent,g.current)}).on("drag",B=>{var H,G;const O=k(B),{autoPanOnNodeDrag:M,nodeDragThreshold:L}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(I.current=!0),!I.current){if(!C.current&&T.current&&M&&(C.current=!0,P()),!T.current){const oe=O.xSnapped-(((H=h==null?void 0:h.current)==null?void 0:H.x)??0),q=O.ySnapped-(((G=h==null?void 0:h.current)==null?void 0:G.y)??0);Math.sqrt(oe*oe+q*q)>L&&_(B)}(h.current.x!==O.xSnapped||h.current.y!==O.ySnapped)&&d.current&&T.current&&(w.current=B.sourceEvent,b.current=Kd(B.sourceEvent,g.current),D(O))}}).on("end",B=>{if(!(!T.current||I.current)&&(u(!1),C.current=!1,T.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:O,nodeInternals:M,onNodeDragStop:L,onSelectionDragStop:H}=o.getState(),G=s?L:LE(H);if(O(d.current,!1,!1),G){const[oe,q]=UE({nodeId:s,dragItems:d.current,nodeInternals:M});G(B.sourceEvent,oe,q)}}}).filter(B=>{const O=B.target;return!B.button&&(!n||!oD(O,`.${n}`,t))&&(!r||oD(O,r,t))});return R.call(N),()=>{R.on(".drag",null)}}}},[t,e,n,r,a,o,s,i,k]),l}function qO(){const t=za();return ee.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(I=>I.selected&&(I.draggable||d&&typeof I.draggable>"u")),p=o?l[0]:5,g=o?l[1]:5,b=n.isShiftPressed?4:1,w=n.x*p*b,C=n.y*g*b,T=h.map(I=>{if(I.positionAbsolute){const k={x:I.positionAbsolute.x+w,y:I.positionAbsolute.y+C};o&&(k.x=l[0]*Math.round(k.x/l[0]),k.y=l[1]*Math.round(k.y/l[1]));const{positionAbsolute:R,position:D}=GO(I,k,r,s,void 0,u);I.position=D,I.positionAbsolute=R}return I});a(T,!0,!1)},[])}const fm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qp=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:p,onMouseLeave:g,onContextMenu:b,onDoubleClick:w,style:C,className:T,isDraggable:I,isSelectable:k,isConnectable:R,isFocusable:D,selectNodesOnDrag:P,sourcePosition:_,targetPosition:N,hidden:B,resizeObserver:O,dragHandle:M,zIndex:L,isParent:H,noDragClassName:G,noPanClassName:oe,initialized:q,disableKeyboardA11y:X,ariaLabel:re,rfId:K,hasHandleBounds:Z})=>{const Ae=za(),j=ee.useRef(null),W=ee.useRef(null),J=ee.useRef(_),ne=ee.useRef(N),ie=ee.useRef(r),de=k||I||d||h||p||g,me=qO(),xe=zp(n,Ae.getState,h),Se=zp(n,Ae.getState,p),ge=zp(n,Ae.getState,g),ae=zp(n,Ae.getState,b),Fe=zp(n,Ae.getState,w),et=Ge=>{const{nodeDragThreshold:nt}=Ae.getState();if(k&&(!P||!I||nt>0)&&US({id:n,store:Ae,nodeRef:j}),d){const it=Ae.getState().nodeInternals.get(n);it&&d(Ge,{...it})}},De=Ge=>{if(!kS(Ge)&&!X)if(mO.includes(Ge.key)&&k){const nt=Ge.key==="Escape";US({id:n,store:Ae,unselect:nt,nodeRef:j})}else I&&u&&Object.prototype.hasOwnProperty.call(fm,Ge.key)&&(Ae.setState({ariaLiveMessage:`Moved selected node ${Ge.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),me({x:fm[Ge.key].x,y:fm[Ge.key].y,isShiftPressed:Ge.shiftKey}))};ee.useEffect(()=>()=>{W.current&&(O==null||O.unobserve(W.current),W.current=null)},[]),ee.useEffect(()=>{if(j.current&&!B){const Ge=j.current;(!q||!Z||W.current!==Ge)&&(W.current&&(O==null||O.unobserve(W.current)),O==null||O.observe(Ge),W.current=Ge)}},[B,q,Z]),ee.useEffect(()=>{const Ge=ie.current!==r,nt=J.current!==_,it=ne.current!==N;j.current&&(Ge||nt||it)&&(Ge&&(ie.current=r),nt&&(J.current=_),it&&(ne.current=N),Ae.getState().updateNodeDimensions([{id:n,nodeElement:j.current,forceUpdate:!0}]))},[n,r,_,N]);const Ce=zO({nodeRef:j,disabled:B||!I,noDragClassName:G,handleSelector:M,nodeId:n,isSelectable:k,selectNodesOnDrag:P});return B?null:At.createElement("div",{className:Yi(["react-flow__node",`react-flow__node-${r}`,{[oe]:I},T,{selected:u,selectable:k,parent:H,dragging:Ce}]),ref:j,style:{zIndex:L,transform:`translate(${o}px,${l}px)`,pointerEvents:de?"all":"none",visibility:q?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:xe,onMouseMove:Se,onMouseLeave:ge,onContextMenu:ae,onClick:et,onDoubleClick:Fe,onKeyDown:D?De:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":X?void 0:`${UO}-${K}`,"aria-label":re},At.createElement(mSe,{value:n},At.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:i,selected:u,isConnectable:R,sourcePosition:_,targetPosition:N,dragging:Ce,dragHandle:M,zIndex:L})))};return e.displayName="NodeWrapper",ee.memo(e)};const n5e=t=>{const e=t.getNodes().filter(n=>n.selected);return{...$4(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function r5e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=za(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:u}=Es(n5e,Pi),d=qO(),h=ee.useRef(null);if(ee.useEffect(()=>{var b;n||(b=h.current)==null||b.focus({preventScroll:!0})},[n]),zO({nodeRef:h}),u||!s||!a)return null;const p=t?b=>{const w=r.getState().getNodes().filter(C=>C.selected);t(b,w)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(fm,b.key)&&d({x:fm[b.key].x,y:fm[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:Yi(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:a,top:o,left:i}}))}var s5e=ee.memo(r5e);const a5e=t=>t.nodesSelectionActive,KO=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:b,onSelectionEnd:w,multiSelectionKeyCode:C,panActivationKeyCode:T,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:R,zoomOnPinch:D,panOnScroll:P,panOnScrollSpeed:_,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:O,defaultViewport:M,translateExtent:L,minZoom:H,maxZoom:G,preventScrolling:oe,onSelectionContextMenu:q,noWheelClassName:X,noPanClassName:re,disableKeyboardA11y:K})=>{const Z=Es(a5e),Ae=gx(h),j=gx(T),W=j||O,J=j||P,ne=Ae||p&&W!==!0;return GSe({deleteKeyCode:o,multiSelectionKeyCode:C}),At.createElement(WSe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:k,zoomOnScroll:R,zoomOnPinch:D,panOnScroll:J,panOnScrollSpeed:_,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:!Ae&&W,defaultViewport:M,translateExtent:L,minZoom:H,maxZoom:G,zoomActivationKeyCode:I,preventScrolling:oe,noWheelClassName:X,noPanClassName:re},At.createElement(HO,{onSelectionStart:b,onSelectionEnd:w,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:W,isSelecting:!!ne,selectionMode:g},t,Z&&At.createElement(s5e,{onSelectionContextMenu:q,noPanClassName:re,disableKeyboardA11y:K})))};KO.displayName="FlowRenderer";var i5e=ee.memo(KO);function o5e(t){return Es(ee.useCallback(n=>t?bO(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function l5e(t){const e={input:qp(t.input||IO),default:qp(t.default||DS),output:qp(t.output||RO),group:qp(t.group||J4)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=qp(t[a]||DS),s),n);return{...e,...r}}const c5e=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},u5e=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),WO=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Es(u5e,Pi),o=o5e(t.onlyRenderVisibleElements),l=ee.useRef(),u=ee.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const p=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(p)});return l.current=d,d},[]);return ee.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:X4},o.map(d=>{var D,P,_;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",BA.error003(h)),h="default");const p=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||s&&typeof d.selectable>"u"),w=!!(d.connectable||n&&typeof d.connectable>"u"),C=!!(d.focusable||r&&typeof d.focusable>"u"),T=t.nodeExtent?V4(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,I=(T==null?void 0:T.x)??0,k=(T==null?void 0:T.y)??0,R=c5e({x:I,y:k,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||on.Bottom,targetPosition:d.targetPosition||on.Top,hidden:d.hidden,xPos:I,yPos:k,xPosOrigin:R.x,yPosOrigin:R.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:w,isFocusable:C,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((D=d[Us])==null?void 0:D.z)??0,isParent:!!((P=d[Us])!=null&&P.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((_=d[Us])!=null&&_.handleBounds)})}))};WO.displayName="NodeRenderer";var A5e=ee.memo(WO);const d5e=(t,e,n)=>n===on.Left?t-e:n===on.Right?t+e:t,f5e=(t,e,n)=>n===on.Top?t-e:n===on.Bottom?t+e:t,cD="react-flow__edgeupdater",uD=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:Yi([cD,`${cD}-${o}`]),cx:d5e(e,r,t),cy:f5e(n,r,t),r,stroke:"transparent",fill:"transparent"}),h5e=()=>!0;var T0=t=>{const e=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,style:C,source:T,target:I,sourceX:k,sourceY:R,targetX:D,targetY:P,sourcePosition:_,targetPosition:N,elementsSelectable:B,hidden:O,sourceHandleId:M,targetHandleId:L,onContextMenu:H,onMouseEnter:G,onMouseMove:oe,onMouseLeave:q,reconnectRadius:X,onReconnect:re,onReconnectStart:K,onReconnectEnd:Z,markerEnd:Ae,markerStart:j,rfId:W,ariaLabel:J,isFocusable:ne,isReconnectable:ie,pathOptions:de,interactionWidth:me,disableKeyboardA11y:xe})=>{const Se=ee.useRef(null),[ge,ae]=ee.useState(!1),[Fe,et]=ee.useState(!1),De=za(),Ce=ee.useMemo(()=>`url('#${FS(j,W)}')`,[j,W]),Ge=ee.useMemo(()=>`url('#${FS(Ae,W)}')`,[Ae,W]);if(O)return null;const nt=xt=>{var Er;const{edges:xn,addSelectedEdges:$t,unselectNodesAndEdges:ir,multiSelectionActive:mn}=De.getState(),Fn=xn.find(Bn=>Bn.id===n);Fn&&(B&&(De.setState({nodesSelectionActive:!1}),Fn.selected&&mn?(ir({nodes:[],edges:[Fn]}),(Er=Se.current)==null||Er.blur()):$t([n])),i&&i(xt,Fn))},it=Gp(n,De.getState,o),dt=Gp(n,De.getState,H),Ct=Gp(n,De.getState,G),ut=Gp(n,De.getState,oe),kt=Gp(n,De.getState,q),Ft=(xt,xn)=>{if(xt.button!==0)return;const{edges:$t,isValidConnection:ir}=De.getState(),mn=xn?I:T,Fn=(xn?L:M)||null,Er=xn?"target":"source",Bn=ir||h5e,na=xn,Xn=$t.find(Dn=>Dn.id===n);et(!0),K==null||K(xt,Xn,Er);const Wr=Dn=>{et(!1),Z==null||Z(Dn,Xn,Er)};TO({event:xt,handleId:Fn,nodeId:mn,onConnect:Dn=>re==null?void 0:re(Xn,Dn),isTarget:na,getState:De.getState,setState:De.setState,isValidConnection:Bn,edgeUpdaterType:Er,onReconnectEnd:Wr})},Wt=xt=>Ft(xt,!0),Mt=xt=>Ft(xt,!1),Vt=()=>ae(!0),Jt=()=>ae(!1),Pt=!B&&!i,It=xt=>{var xn;if(!xe&&mO.includes(xt.key)&&B){const{unselectNodesAndEdges:$t,addSelectedEdges:ir,edges:mn}=De.getState();xt.key==="Escape"?((xn=Se.current)==null||xn.blur(),$t({edges:[mn.find(Er=>Er.id===n)]})):ir([n])}};return At.createElement("g",{className:Yi(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:u,inactive:Pt,updating:ge}]),onClick:nt,onDoubleClick:it,onContextMenu:dt,onMouseEnter:Ct,onMouseMove:ut,onMouseLeave:kt,onKeyDown:ne?It:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${T} to ${I}`,"aria-describedby":ne?`${LO}-${W}`:void 0,ref:Se},!Fe&&At.createElement(t,{id:n,source:T,target:I,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,data:a,style:C,sourceX:k,sourceY:R,targetX:D,targetY:P,sourcePosition:_,targetPosition:N,sourceHandleId:M,targetHandleId:L,markerStart:Ce,markerEnd:Ge,pathOptions:de,interactionWidth:me}),ie&&At.createElement(At.Fragment,null,(ie==="source"||ie===!0)&&At.createElement(uD,{position:_,centerX:k,centerY:R,radius:X,onMouseDown:Wt,onMouseEnter:Vt,onMouseOut:Jt,type:"source"}),(ie==="target"||ie===!0)&&At.createElement(uD,{position:N,centerX:D,centerY:P,radius:X,onMouseDown:Mt,onMouseEnter:Vt,onMouseOut:Jt,type:"target"})))};return e.displayName="EdgeWrapper",ee.memo(e)};function m5e(t){const e={default:T0(t.default||Ny),straight:T0(t.bezier||K4),step:T0(t.step||q4),smoothstep:T0(t.step||jw),simplebezier:T0(t.simplebezier||z4)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=T0(t[a]||Ny),s),n);return{...e,...r}}function AD(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,a=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case on.Top:return{x:r+a/2,y:s};case on.Right:return{x:r+a,y:s+i/2};case on.Bottom:return{x:r+a/2,y:s+i};case on.Left:return{x:r,y:s+i/2}}}function dD(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const p5e=(t,e,n,r,s,a)=>{const i=AD(n,t,e),o=AD(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function g5e({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=G4({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*p)>0}function fD(t){var r,s,a,i,o;const e=((r=t==null?void 0:t[Us])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const x5e=[{level:0,isMaxLevel:!0,edges:[]}];function v5e(t,e,n=!1){let r=-1;const s=t.reduce((i,o)=>{var d,h;const l=Rl(o.zIndex);let u=l?o.zIndex:0;if(n){const p=e.get(o.target),g=e.get(o.source),b=o.selected||(p==null?void 0:p.selected)||(g==null?void 0:g.selected),w=Math.max(((d=g==null?void 0:g[Us])==null?void 0:d.z)||0,((h=p==null?void 0:p[Us])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?w:0)}return i[u]?i[u].push(o):i[u]=[o],r=u>r?u:r,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?x5e:a}function y5e(t,e,n){const r=Es(ee.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&g5e({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return v5e(r,e,n)}const w5e=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),b5e=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hD={[By.Arrow]:w5e,[By.ArrowClosed]:b5e};function C5e(t){const e=za();return ee.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(hD,t)?hD[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",BA.error009(t)),null)},[t])}const E5e=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=C5e(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:n,strokeWidth:i})):null},_5e=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=FS(i,e);r.includes(o)||(s.push({id:o,color:i.color||t,...i}),r.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},$O=({defaultColor:t,rfId:e})=>{const n=Es(ee.useCallback(_5e({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return At.createElement("defs",null,n.map(r=>At.createElement(E5e,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};$O.displayName="MarkerDefinitions";var S5e=ee.memo($O);const T5e=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),YO=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,children:C,disableKeyboardA11y:T})=>{const{edgesFocusable:I,edgesUpdatable:k,elementsSelectable:R,width:D,height:P,connectionMode:_,nodeInternals:N,onError:B}=Es(T5e,Pi),O=y5e(e,N,n);return D?At.createElement(At.Fragment,null,O.map(({level:M,edges:L,isMaxLevel:H})=>At.createElement("svg",{key:M,style:{zIndex:M},width:D,height:P,className:"react-flow__edges react-flow__container"},H&&At.createElement(S5e,{defaultColor:t,rfId:r}),At.createElement("g",null,L.map(G=>{const[oe,q,X]=fD(N.get(G.source)),[re,K,Z]=fD(N.get(G.target));if(!X||!Z)return null;let Ae=G.type||"default";s[Ae]||(B==null||B("011",BA.error011(Ae)),Ae="default");const j=s[Ae]||s.default,W=_===bh.Strict?K.target:(K.target??[]).concat(K.source??[]),J=dD(q.source,G.sourceHandle),ne=dD(W,G.targetHandle),ie=(J==null?void 0:J.position)||on.Bottom,de=(ne==null?void 0:ne.position)||on.Top,me=!!(G.focusable||I&&typeof G.focusable>"u"),xe=G.reconnectable||G.updatable,Se=typeof p<"u"&&(xe||k&&typeof xe>"u");if(!J||!ne)return B==null||B("008",BA.error008(J,G)),null;const{sourceX:ge,sourceY:ae,targetX:Fe,targetY:et}=p5e(oe,J,ie,re,ne,de);return At.createElement(j,{key:G.id,id:G.id,className:Yi([G.className,a]),type:Ae,data:G.data,selected:!!G.selected,animated:!!G.animated,hidden:!!G.hidden,label:G.label,labelStyle:G.labelStyle,labelShowBg:G.labelShowBg,labelBgStyle:G.labelBgStyle,labelBgPadding:G.labelBgPadding,labelBgBorderRadius:G.labelBgBorderRadius,style:G.style,source:G.source,target:G.target,sourceHandleId:G.sourceHandle,targetHandleId:G.targetHandle,markerEnd:G.markerEnd,markerStart:G.markerStart,sourceX:ge,sourceY:ae,targetX:Fe,targetY:et,sourcePosition:ie,targetPosition:de,elementsSelectable:R,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,rfId:r,ariaLabel:G.ariaLabel,isFocusable:me,isReconnectable:Se,pathOptions:"pathOptions"in G?G.pathOptions:void 0,interactionWidth:G.interactionWidth,disableKeyboardA11y:T})})))),C):null};YO.displayName="EdgeRenderer";var B5e=ee.memo(YO);const N5e=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function k5e({children:t}){const e=Es(N5e);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function I5e(t){const e=Ow(),n=ee.useRef(!1);ee.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const F5e={[on.Left]:on.Right,[on.Right]:on.Left,[on.Top]:on.Bottom,[on.Bottom]:on.Top},JO=({nodeId:t,handleType:e,style:n,type:r=kd.Bezier,CustomComponent:s,connectionStatus:a})=>{var P,_,N;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Es(ee.useCallback(B=>({fromNode:B.nodeInternals.get(t),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[t]),Pi),h=(P=i==null?void 0:i[Us])==null?void 0:P.handleBounds;let p=h==null?void 0:h[e];if(d===bh.Loose&&(p=p||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!p)return null;const g=o?p.find(B=>B.id===o):p[0],b=g?g.x+g.width/2:(i.width??0)/2,w=g?g.y+g.height/2:i.height??0,C=(((_=i.positionAbsolute)==null?void 0:_.x)??0)+b,T=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+w,I=g==null?void 0:g.position,k=I?F5e[I]:null;if(!I||!k)return null;if(s)return At.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:C,fromY:T,toX:l,toY:u,fromPosition:I,toPosition:k,connectionStatus:a});let R="";const D={sourceX:C,sourceY:T,sourcePosition:I,targetX:l,targetY:u,targetPosition:k};return r===kd.Bezier?[R]=yO(D):r===kd.Step?[R]=IS({...D,borderRadius:0}):r===kd.SmoothStep?[R]=IS(D):r===kd.SimpleBezier?[R]=vO(D):R=`M${C},${T} ${l},${u}`,At.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:n})};JO.displayName="ConnectionLine";const R5e=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function D5e({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Es(R5e,Pi);return!(s&&a&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:Yi(["react-flow__connection",u])},At.createElement(JO,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function mD(t,e){return ee.useRef(null),za(),ee.useMemo(()=>e(t),[t])}const XO=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:w,onSelectionEnd:C,connectionLineType:T,connectionLineStyle:I,connectionLineComponent:k,connectionLineContainerStyle:R,selectionKeyCode:D,selectionOnDrag:P,selectionMode:_,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:O,deleteKeyCode:M,onlyRenderVisibleElements:L,elementsSelectable:H,selectNodesOnDrag:G,defaultViewport:oe,translateExtent:q,minZoom:X,maxZoom:re,preventScrolling:K,defaultMarkerColor:Z,zoomOnScroll:Ae,zoomOnPinch:j,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:ne,zoomOnDoubleClick:ie,panOnDrag:de,onPaneClick:me,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ge,onPaneScroll:ae,onPaneContextMenu:Fe,onEdgeContextMenu:et,onEdgeMouseEnter:De,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ge,onReconnect:nt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,noDragClassName:ut,noWheelClassName:kt,noPanClassName:Ft,elevateEdgesOnSelect:Wt,disableKeyboardA11y:Mt,nodeOrigin:Vt,nodeExtent:Jt,rfId:Pt})=>{const It=mD(t,l5e),xt=mD(e,m5e);return I5e(a),At.createElement(i5e,{onPaneClick:me,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ge,onPaneContextMenu:Fe,onPaneScroll:ae,deleteKeyCode:M,selectionKeyCode:D,selectionOnDrag:P,selectionMode:_,onSelectionStart:w,onSelectionEnd:C,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:O,elementsSelectable:H,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:Ae,zoomOnPinch:j,zoomOnDoubleClick:ie,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:ne,panOnDrag:de,defaultViewport:oe,translateExtent:q,minZoom:X,maxZoom:re,onSelectionContextMenu:b,preventScrolling:K,noDragClassName:ut,noWheelClassName:kt,noPanClassName:Ft,disableKeyboardA11y:Mt},At.createElement(k5e,null,At.createElement(B5e,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:et,onEdgeMouseEnter:De,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ge,onReconnect:nt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,defaultMarkerColor:Z,noPanClassName:Ft,elevateEdgesOnSelect:!!Wt,disableKeyboardA11y:Mt,rfId:Pt},At.createElement(D5e,{style:I,type:T,component:k,containerStyle:R})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(A5e,{nodeTypes:It,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,selectNodesOnDrag:G,onlyRenderVisibleElements:L,noPanClassName:Ft,noDragClassName:ut,disableKeyboardA11y:Mt,nodeOrigin:Vt,nodeExtent:Jt,rfId:Pt})))};XO.displayName="GraphView";var U5e=ee.memo(XO);const LS=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],yd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:LS,nodeExtent:LS,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:bh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:cSe,isValidConnection:void 0},L5e=()=>bbe((t,e)=>({...yd,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:RE(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?RE(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(h.transform),g=n.reduce((w,C)=>{const T=s.get(C.id);if(T!=null&&T.hidden)s.set(T.id,{...T,[Us]:{...T[Us],handleBounds:void 0}});else if(T){const I=H4(C.nodeElement);!!(I.width&&I.height&&(T.width!==I.width||T.height!==I.height||C.forceUpdate))&&(s.set(T.id,{...T,[Us]:{...T[Us],handleBounds:{source:lD(".source",C.nodeElement,p,u),target:lD(".target",C.nodeElement,p,u)}},...I}),w.push({id:T.id,type:"dimensions",dimensions:I}))}return w},[]);PO(s,u);const b=i||a&&!i&&jO(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:s};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(a){const u=QO(n,o()),d=RE(u,s,i,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>_d(l,!0)):(i=z0(a(),n),o=z0(s,[])),Wv({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>_d(l,!0)):(i=z0(s,n),o=z0(a(),[])),Wv({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),i=n||a(),o=r||s,l=i.map(d=>(d.selected=!1,_d(d.id,!1))),u=o.map(d=>_d(d.id,!1));Wv({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(o=>o.selected).map(o=>_d(o.id,!1)),i=n.filter(o=>o.selected).map(o=>_d(o.id,!1));Wv({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=V4(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const u=qd.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:yd.connectionNodeId,connectionHandleId:yd.connectionHandleId,connectionHandleType:yd.connectionHandleType,connectionStatus:yd.connectionStatus,connectionStartHandle:yd.connectionStartHandle,connectionEndHandle:yd.connectionEndHandle}),reset:()=>t({...yd})}),Object.is),Z4=({children:t})=>{const e=ee.useRef(null);return e.current||(e.current=L5e()),At.createElement(tSe,{value:e.current},t)};Z4.displayName="ReactFlowProvider";const ZO=({children:t})=>ee.useContext(Pw)?At.createElement(At.Fragment,null,t):At.createElement(Z4,null,t);ZO.displayName="ReactFlowWrapper";const M5e={input:IO,default:DS,output:RO,group:J4},P5e={default:Ny,straight:K4,step:q4,smoothstep:jw,simplebezier:z4},j5e=[0,0],O5e=[15,15],Q5e={x:0,y:0,zoom:1},H5e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},eQ=ee.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=M5e,edgeTypes:i=P5e,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:p,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:C,onClickConnectEnd:T,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:R,onNodeContextMenu:D,onNodeDoubleClick:P,onNodeDragStart:_,onNodeDrag:N,onNodeDragStop:B,onNodesDelete:O,onEdgesDelete:M,onSelectionChange:L,onSelectionDragStart:H,onSelectionDrag:G,onSelectionDragStop:oe,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:re,connectionMode:K=bh.Strict,connectionLineType:Z=kd.Bezier,connectionLineStyle:Ae,connectionLineComponent:j,connectionLineContainerStyle:W,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:ie=!1,selectionMode:de=px.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:xe=Ty()?"Meta":"Control",zoomActivationKeyCode:Se=Ty()?"Meta":"Control",snapToGrid:ge=!1,snapGrid:ae=O5e,onlyRenderVisibleElements:Fe=!1,selectNodesOnDrag:et=!0,nodesDraggable:De,nodesConnectable:Ce,nodesFocusable:Ge,nodeOrigin:nt=j5e,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,defaultViewport:ut=Q5e,minZoom:kt=.5,maxZoom:Ft=2,translateExtent:Wt=LS,preventScrolling:Mt=!0,nodeExtent:Vt,defaultMarkerColor:Jt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:It=!0,panOnScroll:xt=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:$t=Xf.Free,zoomOnDoubleClick:ir=!0,panOnDrag:mn=!0,onPaneClick:Fn,onPaneMouseEnter:Er,onPaneMouseMove:Bn,onPaneMouseLeave:na,onPaneScroll:Xn,onPaneContextMenu:Wr,children:cs,onEdgeContextMenu:Dn,onEdgeDoubleClick:tn,onEdgeMouseEnter:On,onEdgeMouseMove:ra,onEdgeMouseLeave:Or,onEdgeUpdate:ms,onEdgeUpdateStart:xa,onEdgeUpdateEnd:Ht,onReconnect:or,onReconnectStart:Zn,onReconnectEnd:_r,reconnectRadius:kr=10,edgeUpdaterRadius:Qr=10,onNodesChange:fe,onEdgesChange:Ne,noDragClassName:Ee="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:qe,connectOnClick:tt=!0,attributionPosition:Qe,proOptions:We,defaultEdgeOptions:Je,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Nt=!1,disableKeyboardA11y:jt=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Rt=!0,connectionRadius:un=20,isValidConnection:Un,onError:Ln,style:Qn,id:_s,nodeDragThreshold:oi,...Ss},sa)=>{const Ps=_s||"1";return At.createElement("div",{...Ss,style:{...Qn,...H5e},ref:sa,className:Yi(["react-flow",s]),"data-testid":"rf__wrapper",id:_s},At.createElement(ZO,null,At.createElement(U5e,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:p,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:R,onNodeContextMenu:D,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:i,connectionLineType:Z,connectionLineStyle:Ae,connectionLineComponent:j,connectionLineContainerStyle:W,selectionKeyCode:ne,selectionOnDrag:ie,selectionMode:de,deleteKeyCode:J,multiSelectionKeyCode:xe,panActivationKeyCode:me,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Fe,selectNodesOnDrag:et,defaultViewport:ut,translateExtent:Wt,minZoom:kt,maxZoom:Ft,preventScrolling:Mt,zoomOnScroll:Pt,zoomOnPinch:It,zoomOnDoubleClick:ir,panOnScroll:xt,panOnScrollSpeed:xn,panOnScrollMode:$t,panOnDrag:mn,onPaneClick:Fn,onPaneMouseEnter:Er,onPaneMouseMove:Bn,onPaneMouseLeave:na,onPaneScroll:Xn,onPaneContextMenu:Wr,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:re,onEdgeContextMenu:Dn,onEdgeDoubleClick:tn,onEdgeMouseEnter:On,onEdgeMouseMove:ra,onEdgeMouseLeave:Or,onReconnect:or??ms,onReconnectStart:Zn??xa,onReconnectEnd:_r??Ht,reconnectRadius:kr??Qr,defaultMarkerColor:Jt,noDragClassName:Ee,noWheelClassName:_e,noPanClassName:Te,elevateEdgesOnSelect:Nt,rfId:Ps,disableKeyboardA11y:jt,nodeOrigin:nt,nodeExtent:Vt}),At.createElement(FSe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:C,onClickConnectEnd:T,nodesDraggable:De,nodesConnectable:Ce,nodesFocusable:Ge,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,elevateNodesOnSelect:yt,minZoom:kt,maxZoom:Ft,nodeExtent:Vt,onNodesChange:fe,onEdgesChange:Ne,snapToGrid:ge,snapGrid:ae,connectionMode:K,translateExtent:Wt,connectOnClick:tt,defaultEdgeOptions:Je,fitView:ke,fitViewOptions:qe,onNodesDelete:O,onEdgesDelete:M,onNodeDragStart:_,onNodeDrag:N,onNodeDragStop:B,onSelectionDrag:G,onSelectionDragStart:H,onSelectionDragStop:oe,noPanClassName:Te,nodeOrigin:nt,rfId:Ps,autoPanOnConnect:Tt,autoPanOnNodeDrag:Rt,onError:Ln,connectionRadius:un,isValidConnection:Un,nodeDragThreshold:oi}),At.createElement(kSe,{onSelectionChange:L}),cs,At.createElement(rSe,{proOptions:We,position:Qe}),At.createElement(MSe,{rfId:Ps,disableKeyboardA11y:jt})))});eQ.displayName="ReactFlow";function tQ(t){return e=>{const[n,r]=ee.useState(e),s=ee.useCallback(a=>r(i=>t(a,i)),[]);return[n,r,s]}}const V5e=tQ(QO),G5e=tQ(JSe);function z5e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function q5e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function K5e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function W5e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function $5e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const fg=({children:t,className:e,...n})=>At.createElement("button",{type:"button",className:Yi(["react-flow__controls-button",e]),...n},t);fg.displayName="ControlButton";const Y5e=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),nQ=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const p=za(),[g,b]=ee.useState(!1),{isInteractive:w,minZoomReached:C,maxZoomReached:T}=Es(Y5e,Pi),{zoomIn:I,zoomOut:k,fitView:R}=Ow();if(ee.useEffect(()=>{b(!0)},[]),!g)return null;const D=()=>{I(),a==null||a()},P=()=>{k(),i==null||i()},_=()=>{R(s),o==null||o()},N=()=>{p.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),l==null||l(!w)};return At.createElement(dO,{className:Yi(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(fg,{onClick:D,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T},At.createElement(z5e,null)),At.createElement(fg,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},At.createElement(q5e,null))),n&&At.createElement(fg,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view"},At.createElement(K5e,null)),r&&At.createElement(fg,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},w?At.createElement($5e,null):At.createElement(W5e,null)),d)};nQ.displayName="Controls";var J5e=ee.memo(nQ),wc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(wc||(wc={}));function X5e({color:t,dimensions:e,lineWidth:n}){return At.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Z5e({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const e4e={[wc.Dots]:"#91919a",[wc.Lines]:"#eee",[wc.Cross]:"#e2e2e2"},t4e={[wc.Dots]:1,[wc.Lines]:1,[wc.Cross]:6},n4e=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function rQ({id:t,variant:e=wc.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const u=ee.useRef(null),{transform:d,patternId:h}=Es(n4e,Pi),p=i||e4e[e],g=r||t4e[e],b=e===wc.Dots,w=e===wc.Cross,C=Array.isArray(n)?n:[n,n],T=[C[0]*d[2]||1,C[1]*d[2]||1],I=g*d[2],k=w?[I,I]:T,R=b?[I/a,I/a]:[k[0]/a,k[1]/a];return At.createElement("svg",{className:Yi(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%T[0],y:d[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`},b?At.createElement(Z5e,{color:p,radius:I/a}):At.createElement(X5e,{dimensions:k,color:p,lineWidth:s})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}rQ.displayName="Background";var r4e=ee.memo(rQ);function s4e(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const a4e=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Wd(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let B0=null;function sQ(t={}){return B0||(t.includeStyleProperties?(B0=t.includeStyleProperties,B0):(B0=Wd(window.getComputedStyle(document.documentElement)),B0))}function Iy(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function i4e(t){const e=Iy(t,"border-left-width"),n=Iy(t,"border-right-width");return t.clientWidth+e+n}function o4e(t){const e=Iy(t,"border-top-width"),n=Iy(t,"border-bottom-width");return t.clientHeight+e+n}function aQ(t,e={}){const n=e.width||i4e(t),r=e.height||o4e(t);return{width:n,height:r}}function l4e(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Oo=16384;function c4e(t){(t.width>Oo||t.height>Oo)&&(t.width>Oo&&t.height>Oo?t.width>t.height?(t.height*=Oo/t.width,t.width=Oo):(t.width*=Oo/t.height,t.height=Oo):t.width>Oo?(t.height*=Oo/t.width,t.width=Oo):(t.width*=Oo/t.height,t.height=Oo))}function Fy(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function u4e(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function A4e(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),u4e(s)}const vo=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||vo(n,e)};function d4e(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function f4e(t,e){return sQ(e).map(n=>{const r=t.getPropertyValue(n),s=t.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function h4e(t,e,n,r){const s=`.${t}:${e}`,a=n.cssText?d4e(n):f4e(n,r);return document.createTextNode(`${s}{${a}}`)}function pD(t,e,n,r){const s=window.getComputedStyle(t,n),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=a4e();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(h4e(i,n,s,r)),e.appendChild(o)}function m4e(t,e,n){pD(t,e,":before",n),pD(t,e,":after",n)}const gD="application/font-woff",xD="image/jpeg",p4e={woff:gD,woff2:gD,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:xD,jpeg:xD,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function g4e(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function eT(t){const e=g4e(t).toLowerCase();return p4e[e]||""}function x4e(t){return t.split(/,/)[1]}function MS(t){return t.search(/^(data:)/)!==-1}function v4e(t,e){return`data:${e};base64,${t}`}async function iQ(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const ME={};function y4e(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function tT(t,e,n){const r=y4e(t,e,n.includeQueryParams);if(ME[r]!=null)return ME[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await iQ(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),x4e(o)));s=v4e(a,e)}catch(a){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return ME[r]=s,s}async function w4e(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):Fy(e)}async function b4e(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return Fy(o)}const n=t.poster,r=eT(n),s=await tT(n,r,e);return Fy(s)}async function C4e(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Qw(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function E4e(t,e){return vo(t,HTMLCanvasElement)?w4e(t):vo(t,HTMLVideoElement)?b4e(t,e):vo(t,HTMLIFrameElement)?C4e(t,e):t.cloneNode(oQ(t))}const _4e=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",oQ=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function S4e(t,e,n){var r,s;if(oQ(e))return e;let a=[];return _4e(t)&&t.assignedNodes?a=Wd(t.assignedNodes()):vo(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=Wd(t.contentDocument.body.childNodes):a=Wd(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||vo(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>Qw(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function T4e(t,e,n){const r=e.style;if(!r)return;const s=window.getComputedStyle(t);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):sQ(n).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),vo(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(a,i,s.getPropertyPriority(a))})}function B4e(t,e){vo(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),vo(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function N4e(t,e){if(vo(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function k4e(t,e,n){return vo(e,Element)&&(T4e(t,e,n),m4e(t,e,n),B4e(t,e),N4e(t,e)),e}async function I4e(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!r[o]&&(r[o]=await Qw(u,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function Qw(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>E4e(r,e)).then(r=>S4e(t,r,e)).then(r=>k4e(t,r,e)).then(r=>I4e(r,e))}const lQ=/url\((['"]?)([^'"]+?)\1\)/g,F4e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,R4e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function D4e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function U4e(t){const e=[];return t.replace(lQ,(n,r,s)=>(e.push(s),n)),e.filter(n=>!MS(n))}async function L4e(t,e,n,r,s){try{const a=n?s4e(e,n):e,i=eT(e);let o;return s||(o=await tT(a,i,r)),t.replace(D4e(e),`$1${o}$3`)}catch{}return t}function M4e(t,{preferredFontFormat:e}){return e?t.replace(R4e,n=>{for(;;){const[r,,s]=F4e.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function cQ(t){return t.search(lQ)!==-1}async function uQ(t,e,n){if(!cQ(t))return t;const r=M4e(t,n);return U4e(r).reduce((a,i)=>a.then(o=>L4e(o,i,e,n)),Promise.resolve(r))}async function N0(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await uQ(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function P4e(t,e){await N0("background",t,e)||await N0("background-image",t,e),await N0("mask",t,e)||await N0("-webkit-mask",t,e)||await N0("mask-image",t,e)||await N0("-webkit-mask-image",t,e)}async function j4e(t,e){const n=vo(t,HTMLImageElement);if(!(n&&!MS(t.src))&&!(vo(t,SVGImageElement)&&!MS(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await tT(r,eT(r),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function O4e(t,e){const r=Wd(t.childNodes).map(s=>AQ(s,e));await Promise.all(r).then(()=>t)}async function AQ(t,e){vo(t,Element)&&(await P4e(t,e),await j4e(t,e),await O4e(t,e))}function Q4e(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const vD={};async function yD(t){let e=vD[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},vD[t]=e,e}async function wD(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),iQ(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>n)}function bD(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=o.exec(r),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function H4e(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{Wd(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,u=yD(l).then(d=>wD(d,e)).then(d=>bD(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:h,error:p})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&r.push(yD(s.href).then(o=>wD(o,e)).then(o=>bD(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{Wd(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function V4e(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>cQ(e.style.getPropertyValue("src")))}async function G4e(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Wd(t.ownerDocument.styleSheets),r=await H4e(n,e);return V4e(r)}function dQ(t){return t.trim().replace(/["']/g,"")}function z4e(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(dQ(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function q4e(t,e){const n=await G4e(t,e),r=z4e(t);return(await Promise.all(n.filter(a=>r.has(dQ(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return uQ(a.cssText,i,e)}))).join(`
`)}async function K4e(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await q4e(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function W4e(t,e={}){const{width:n,height:r}=aQ(t,e),s=await Qw(t,e,!0);return await K4e(s,e),await AQ(s,e),Q4e(s,e),await A4e(s,n,r)}async function $4e(t,e={}){const{width:n,height:r}=aQ(t,e),s=await W4e(t,e),a=await Fy(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||l4e(),u=e.canvasWidth||n,d=e.canvasHeight||r;return i.width=u*l,i.height=d*l,e.skipAutoScale||c4e(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function Hw(t,e={}){return(await $4e(t,e)).toDataURL()}const CD="recursosAprendizaje_mindMaps_v2",Y4e=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),J4e=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),X4e=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Z4e=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),PS=(t,e)=>t.children.length===0?e:t.children.reduce((n,r)=>n+PS(r,e),0),jS=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,u,d)=>{const h=l*250;n.push({id:o.id,position:{x:h,y:u},data:{label:o.label},type:l===0?"input":"default",sourcePosition:on.Right,targetPosition:on.Left});const p=PS(o,80);let g=u-p/2;o.children.forEach(b=>{const w=PS(b,80),C=g+w/2;r.push({id:`e-${o.id}-${b.id}`,source:o.id,target:b.id,type:"smoothstep",animated:!0}),i(b,l+1,C),g+=w})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;t.children.forEach((l,u)=>{const d=u/t.children.length*2*Math.PI,h=i*Math.cos(d),p=i*Math.sin(d);n.push({id:l.id,position:{x:h,y:p},data:{label:l.label}}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),l.children.forEach((g,b)=>{const w=d+(b-(l.children.length-1)/2)*.2,C=h+o*.5*Math.cos(w),T=p+o*.5*Math.sin(w);n.push({id:g.id,position:{x:C,y:T},data:{label:g.label}}),r.push({id:`e-${l.id}-${g.id}`,source:l.id,target:g.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},fQ=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return A.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[A.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),A.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&A.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),t.children.map(o=>A.jsx(fQ,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:s+1},o.id))]})},eTe=({mapData:t,onBack:e,onSave:n})=>{const[r,s]=ee.useState(t.treeData),[a,i]=ee.useState("tree"),[o,l]=ee.useState(!1),[u,d,h]=V5e([]),[p,g,b]=G5e([]),{fitView:w}=Ow();ee.useEffect(()=>{const{nodes:D,edges:P}=jS(r,a);d(D),g(P),setTimeout(()=>w({duration:300}),50)},[r,a,d,g,w]);const C=(D,P)=>{const _=JSON.parse(JSON.stringify(r)),N=B=>B.id===D?(B.label=P,!0):B.children.some(N);N(_),s(_)},T=D=>{const P=JSON.parse(JSON.stringify(r)),_=N=>N.id===D?(N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):N.children.some(_);_(P),s(P)},I=D=>{const P=JSON.parse(JSON.stringify(r)),_=N=>{const B=N.children.findIndex(O=>O.id===D);return B!==-1?(N.children.splice(B,1),!0):N.children.some(_)};_(P),s(P)},k=()=>{l(!0);const{nodes:D,edges:P}=jS(r,a);n({...t,treeData:r,nodes:D,edges:P}),setTimeout(()=>l(!1),1e3)},R=async D=>{const P=document.querySelector(".react-flow");P&&Hw(P,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(_=>{{const N=document.createElement("a");N.download=`${t.tema}.png`,N.href=_,N.click()}}).catch(_=>console.error("oops, something went wrong!",_))};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),A.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[A.jsxs(eQ,{nodes:u,edges:p,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[A.jsx(J5e,{}),A.jsx(r4e,{})]}),A.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:A.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[A.jsx(Y4e,{})," Pantalla completa"]})})]}),A.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),A.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[A.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[A.jsx(J4e,{})," Vista en árbol"]}),A.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[A.jsx(X4e,{})," Vista con tema central"]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:A.jsx(fQ,{node:r,onUpdate:C,onAddChild:T,onDelete:I})}),A.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[A.jsx("button",{onClick:()=>R(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),A.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},tTe=({onBack:t})=>{const[e,n]=ee.useState("list"),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(!1),[u,d]=ee.useState(""),[h,p]=ee.useState(""),[g,b]=ee.useState("");ee.useEffect(()=>{try{const D=localStorage.getItem(CD);D&&s(JSON.parse(D))}catch(D){console.error("Error loading mind maps",D)}},[]);const w=D=>{s(D),localStorage.setItem(CD,JSON.stringify(D))},C=async D=>{if(D.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const P=`Basado en el tema central "${u}", y considerando el contenido adicional "${g}", genera una estructura jerárquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lógico del tema en subtemas.

La respuesta DEBE ser un único objeto JSON válido. Cada nodo en el JSON debe tener las propiedades "id" (un string único generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const N=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json"}}),B=JSON.parse(N.text.trim()),{nodes:O,edges:M}=jS(B),L={id:crypto.randomUUID(),tema:u,nivel:h,treeData:B,nodes:O,edges:M,createdAt:new Date().toISOString()};i(L),n("editor")}catch(_){console.error("AI Generation Error:",_),alert("Hubo un error al generar el mapa mental con la IA. Inténtelo de nuevo.")}finally{l(!1)}},T=D=>{const _=r.findIndex(N=>N.id===D.id)>-1?r.map(N=>N.id===D.id?D:N):[D,...r];w(_)},I=D=>{i(D),n("editor")},k=D=>{window.confirm("¿Eliminar este mapa mental?")&&w(r.filter(P=>P.id!==D))},R=()=>{switch(e){case"editor":return a?A.jsx(Z4,{children:A.jsx(eTe,{mapData:a,onBack:()=>n("list"),onSave:T})}):null;case"config":return A.jsxs("div",{className:"max-w-2xl mx-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),A.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),A.jsxs("form",{onSubmit:C,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",id:"tema",value:u,onChange:D=>d(D.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),A.jsx("textarea",{id:"contenido",value:g,onChange:D=>b(D.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsx("div",{className:"flex justify-end pt-4",children:A.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:o?A.jsx(Z4e,{}):"Generar Mapa con IA"})})]})]});case"list":default:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),A.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.length>0?r.map(D=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[A.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:D.tema}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(D.createdAt).toLocaleDateString("es-CL")]}),A.jsxs("div",{className:"mt-4 flex gap-2",children:[A.jsx("button",{onClick:()=>I(D),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),A.jsx("button",{onClick:()=>k(D.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},D.id)):A.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("span",{className:"text-4xl",children:"🧠"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),R()]})},nTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),sTe=({onBack:t})=>{const[e,n]=ee.useState("Media"),[r,s]=ee.useState(10),[a,i]=ee.useState(!1),[o,l]=ee.useState(Array(10).fill("")),[u,d]=ee.useState(""),[h,p]=ee.useState(null),[g,b]=ee.useState({ai:!1,puzzle:!1}),w=ee.useRef(null);ee.useEffect(()=>{l(P=>{const _=Array(r).fill("");for(let N=0;N<Math.min(P.length,r);N++)_[N]=P[N];return _})},[r]);const C=(P,_)=>{const N=[...o];N[P]=_,l(N)},T=async()=>{if(u.trim()){b(P=>({...P,ai:!0}));try{const P=new Ba({apiKey:void 0}),_=`Genera una lista de ${r} palabras clave, en español, relacionadas con el tema "${u}". Las palabras no deben contener espacios ni caracteres especiales.`,N={type:Bt.OBJECT,properties:{palabras:{type:Bt.ARRAY,items:{type:Bt.STRING}}},required:["palabras"]},B=await P.models.generateContent({model:"gemini-2.5-flash",contents:_,config:{responseMimeType:"application/json",responseSchema:N}}),L=[...JSON.parse(B.text).palabras.map(H=>H.toUpperCase().replace(/\s/g,"")).slice(0,r)];for(;L.length<r;)L.push("");l(L)}catch(P){console.error("Error generating words with AI:",P),alert("No se pudieron generar las palabras. Inténtelo de nuevo.")}finally{b(P=>({...P,ai:!1}))}}},I=(P,_,N,B,O,M)=>{for(let L=0;L<P.length;L++){const H=N+L*O.y,G=B+L*O.x;if(H<0||H>=M||G<0||G>=M||_[H][G]&&_[H][G]!==P[L])return!1}return!0},k=(P,_,N,B,O)=>{for(let M=0;M<P.length;M++)_[N+M*O.y][B+M*O.x]=P[M]},R=()=>{b(P=>({...P,puzzle:!0})),p(null),setTimeout(()=>{const P=o.map(L=>L.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(P.length===0){alert("Por favor, ingrese al menos una palabra válida."),b(L=>({...L,puzzle:!1}));return}const _=Math.max(...P.map(L=>L.length));let N=Math.max(_,P.length)+2;e==="Media"&&(N+=3),e==="Difícil"&&(N+=5),N=Math.min(Math.max(N,10),25);const B=Array(N).fill(null).map(()=>Array(N).fill(null)),O=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];e!=="Fácil"&&O.push({x:1,y:-1}),e==="Difícil"&&O.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const L of P.sort((H,G)=>G.length-H.length)){let H=!1;for(let G=0;G<100;G++){const oe=O[Math.floor(Math.random()*O.length)],q=Math.floor(Math.random()*N),X=Math.floor(Math.random()*N);if(I(L,B,q,X,oe,N)){k(L,B,q,X,oe),H=!0;break}}H||console.warn(`No se pudo colocar la palabra: ${L}`)}const M=B.map(L=>L.map(H=>H||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)]));p({grid:M,words:P.sort()}),b(L=>({...L,puzzle:!1}))},100)},D=()=>{w.current&&Hw(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(P=>{const _=document.createElement("a");_.download="sopa-de-letras.png",_.href=P,_.click()}).catch(P=>{console.error("oops, something went wrong!",P),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:"🅰️"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!h&&A.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),A.jsxs("select",{value:e,onChange:P=>n(P.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{children:"Fácil"}),A.jsx("option",{children:"Media"}),A.jsx("option",{children:"Difícil"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>A.jsx("button",{onClick:()=>{s(P),i(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!a&&r===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),A.jsx("button",{onClick:()=>i(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${a?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),a&&A.jsx("input",{type:"number",value:r,onChange:P=>s(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{id:"ai-theme",type:"text",value:u,onChange:P=>d(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:T,disabled:g.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:g.ai?A.jsx(nTe,{}):A.jsxs(A.Fragment,{children:[A.jsx(rTe,{}),A.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map((P,_)=>A.jsx("input",{type:"text",value:P,onChange:N=>C(_,N.target.value),placeholder:`Palabra ${_+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},_))})]}),A.jsx("div",{className:"text-right pt-4",children:A.jsx("button",{onClick:R,disabled:g.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:g.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),h&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{ref:w,className:"p-6 bg-white",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[A.jsx("div",{className:"md:col-span-2",children:A.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${h.grid.length}, minmax(0, 1fr))`},children:h.grid.flat().map((P,_)=>A.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:P},_))})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),A.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:h.words.map(P=>A.jsx("li",{children:P},P))})]})]})}),A.jsxs("div",{className:"flex justify-end gap-4",children:[A.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),A.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]})},ED="recursosAprendizaje_timelines",aTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iTe=({timeline:t,onSave:e,onBack:n})=>{const[r,s]=ee.useState(t),a=ee.useRef(null),i=(d,h,p)=>{s(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:p}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},h=[...r.events,d].sort((p,g)=>parseInt(p.date)-parseInt(g.date));s(p=>({...p,events:h}))},l=d=>{s(h=>({...h,events:h.events.filter(p=>p.id!==d)}))},u=()=>{a.current&&Hw(a.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),A.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:A.jsxs("div",{ref:a,className:"relative p-10",children:[A.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),A.jsx("div",{className:"relative",children:r.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const p=h%2===0;return A.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[A.jsx("div",{className:"w-1/2",children:p&&A.jsx("div",{className:"text-right pr-8",children:A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[A.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),A.jsx("div",{className:"z-10 flex-shrink-0",children:A.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),A.jsx("div",{className:"w-1/2",children:!p&&A.jsx("div",{className:"text-left pl-8",children:A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[A.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),A.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(d=>A.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[A.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),A.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripción",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),A.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),A.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[A.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:u,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),A.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},oTe=({onBack:t})=>{const[e,n]=ee.useState("list"),[r,s]=ee.useState([]),[a,i]=ee.useState(null),[o,l]=ee.useState(!1),[u,d]=ee.useState(""),[h,p]=ee.useState(""),[g,b]=ee.useState("");ee.useEffect(()=>{try{const k=localStorage.getItem(ED);k&&s(JSON.parse(k))}catch(k){console.error("Error al cargar líneas de tiempo",k)}},[]);const w=k=>{s(k),localStorage.setItem(ED,JSON.stringify(k))},C=async k=>{if(k.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const R=h&&g?`entre ${h} y ${g}`:h?`a partir de ${h}`:g?`hasta ${g}`:"",D=`Genera una línea de tiempo sobre el tema "${u}" ${R}. Crea entre 5 y 10 hitos clave ordenados cronológicamente. Para cada hito, proporciona una fecha o año, una descripción breve y un emoji representativo.`,P={type:Bt.OBJECT,properties:{events:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{date:{type:Bt.STRING},description:{type:Bt.STRING},icon:{type:Bt.STRING}},required:["date","description"]}}},required:["events"]};try{const N=await new Ba({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json",responseSchema:P}}),B=JSON.parse(N.text),O={id:crypto.randomUUID(),tema:u,fechaInicio:h,fechaFin:g,createdAt:new Date().toISOString(),events:B.events.map(M=>({...M,id:crypto.randomUUID()}))};i(O),n("editor")}catch(_){console.error("AI Generation Error:",_),alert("Hubo un error al generar la línea de tiempo. Inténtelo de nuevo.")}finally{l(!1)}},T=k=>{r.findIndex(D=>D.id===k.id)>-1?w(r.map(D=>D.id===k.id?k:D)):w([k,...r]),n("list"),i(null)},I=k=>{window.confirm("¿Eliminar esta línea de tiempo?")&&w(r.filter(R=>R.id!==k))};return e==="editor"&&a?A.jsx(iTe,{timeline:a,onSave:T,onBack:()=>n("list")}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:"🕒"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),A.jsxs("form",{onSubmit:C,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",id:"tema",value:u,onChange:k=>d(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),A.jsx("input",{type:"text",id:"fechaInicio",value:h,onChange:k=>p(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),A.jsx("input",{type:"text",id:"fechaFin",value:g,onChange:k=>b(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?A.jsx(aTe,{}):"Generar con IA"})})]})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),r.length>0?r.map(k=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>{i(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),A.jsx("button",{onClick:()=>I(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},lTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),uTe=({onBack:t})=>{const[e,n]=ee.useState(10),[r,s]=ee.useState(!1),[a,i]=ee.useState(Array(10).fill("")),[o,l]=ee.useState(Array(10).fill("")),[u,d]=ee.useState(""),[h,p]=ee.useState(null),[g,b]=ee.useState(!1),[w,C]=ee.useState({ai:!1,puzzle:!1}),T=ee.useRef(null);ee.useEffect(()=>{const B=e;i(O=>Array.from({length:B},(M,L)=>O[L]||"")),l(O=>Array.from({length:B},(M,L)=>O[L]||""))},[e]);const I=(B,O)=>{const M=[...a];M[B]=O,i(M)},k=(B,O)=>{const M=[...o];M[B]=O,l(M)},R=async()=>{if(u.trim()){C(B=>({...B,ai:!0}));try{const B=new Ba({apiKey:void 0}),O=`Genera una lista de ${e} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${u}". Las palabras no deben contener espacios.`,M={type:Bt.OBJECT,properties:{items:{type:Bt.ARRAY,items:{type:Bt.OBJECT,properties:{word:{type:Bt.STRING},clue:{type:Bt.STRING}},required:["word","clue"]}}},required:["items"]},L=await B.models.generateContent({model:"gemini-2.5-flash",contents:O,config:{responseMimeType:"application/json",responseSchema:M}}),H=JSON.parse(L.text),G=H.items.map(q=>q.word.toUpperCase().replace(/\s/g,"")),oe=H.items.map(q=>q.clue);i(Array.from({length:e},(q,X)=>G[X]||"")),l(Array.from({length:e},(q,X)=>oe[X]||""))}catch(B){console.error("Error generating words/clues with AI:",B),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{C(B=>({...B,ai:!1}))}}},D=ee.useCallback(()=>{try{const B=a.map((ae,Fe)=>({word:ae.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:o[Fe]})).filter(ae=>ae.word.length>0);if(B.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;B.sort((ae,Fe)=>Fe.word.length-ae.word.length);const O=B[0].word.length,M=Math.max(O,B.length)*2;let L=Array.from({length:M},()=>Array(M).fill(null));const H=[],G=B.shift(),oe=Math.floor(M/2),q=Math.floor((M-G.word.length)/2);for(let ae=0;ae<G.word.length;ae++)L[oe][q+ae]=G.word[ae];H.push({word:G.word,clue:G.clue,direction:"across",row:oe,col:q});for(const ae of B){let Fe={score:-1,row:-1,col:-1,direction:"across"};for(const et of H)for(let De=0;De<et.word.length;De++)for(let Ce=0;Ce<ae.word.length;Ce++)if(et.word[De]===ae.word[Ce]){let Ge=0,nt,it,dt;et.direction==="across"?(dt="down",nt=et.row-Ce,it=et.col+De):(dt="across",nt=et.row+De,it=et.col-Ce);let Ct=!0;for(let ut=0;ut<ae.word.length;ut++){const kt=nt+(dt==="down"?ut:0),Ft=it+(dt==="across"?ut:0);if(kt<0||kt>=M||Ft<0||Ft>=M){Ct=!1;break}const Wt=L[kt][Ft],Mt=kt===et.row+(et.direction==="down"?De:0)&&Ft===et.col+(et.direction==="across"?De:0);if(Wt&&!Mt){Ct=!1;break}if(Wt&&Mt&&Wt!==ae.word[Ce]){Ct=!1;break}if(!Mt){if(dt==="across"&&(kt>0&&L[kt-1][Ft]||kt<M-1&&L[kt+1][Ft])){Ct=!1;break}if(dt==="down"&&(Ft>0&&L[kt][Ft-1]||Ft<M-1&&L[kt][Ft+1])){Ct=!1;break}}Wt&&Ge++}Ct&&Ge>Fe.score&&(Fe={score:Ge,row:nt,col:it,direction:dt})}if(Fe.score>-1){for(let et=0;et<ae.word.length;et++){const De=Fe.row+(Fe.direction==="down"?et:0),Ce=Fe.col+(Fe.direction==="across"?et:0);L[De][Ce]=ae.word[et]}H.push({word:ae.word,clue:ae.clue,direction:Fe.direction,row:Fe.row,col:Fe.col})}}let X=M,re=-1,K=M,Z=-1;H.forEach(ae=>{X=Math.min(X,ae.row),re=Math.max(re,ae.row+(ae.direction==="down"?ae.word.length-1:0)),K=Math.min(K,ae.col),Z=Math.max(Z,ae.col+(ae.direction==="across"?ae.word.length-1:0))}),re===-1&&(X=H[0].row,re=H[0].row,K=H[0].col,Z=H[0].col+H[0].word.length-1);const Ae=1,j=Math.max(0,X-Ae),W=Math.min(M,re+1+Ae),J=Math.max(0,K-Ae),ne=Math.min(M,Z+1+Ae),ie=L.slice(j,W).map(ae=>ae.slice(J,ne)),de=H.map(ae=>({...ae,row:ae.row-j,col:ae.col-J})).sort((ae,Fe)=>ae.row-Fe.row||ae.col-Fe.col);let me=1;const xe=[],Se=new Map;de.forEach(ae=>{const Fe=`${ae.row},${ae.col}`;Se.has(Fe)||Se.set(Fe,me++),xe.push({...ae,number:Se.get(Fe)})});const ge=ie.map(ae=>ae.map(Fe=>({char:Fe,number:null})));return xe.forEach(ae=>{const Fe=`${ae.row},${ae.col}`;ge[ae.row]&&ge[ae.row][ae.col]!==void 0&&(ge[ae.row][ae.col].number=Se.get(Fe))}),{grid:ge,clues:{across:xe.filter(ae=>ae.direction==="across").sort((ae,Fe)=>ae.number-Fe.number),down:xe.filter(ae=>ae.direction==="down").sort((ae,Fe)=>ae.number-Fe.number)}}}catch(B){return console.error("Error generating crossword grid:",B),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[a,o]),P=()=>{C(B=>({...B,puzzle:!0})),p(null),setTimeout(()=>{const B=D();B&&p(B),C(O=>({...O,puzzle:!1}))},100)},_=()=>{T.current&&(b(!1),setTimeout(()=>{Hw(T.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(B=>{const O=document.createElement("a");O.download="crucigrama.png",O.href=B,O.click()}).catch(B=>console.error("Error generating image",B))},100))},N=()=>h?A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{ref:T,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsx("div",{children:A.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${h.grid[0].length}, 2rem)`},children:h.grid.flat().map((B,O)=>A.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:B.char?"white":"black"},children:[B.number&&A.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:B.number}),g&&B.char&&A.jsx("span",{children:B.char})]},O))})}),A.jsxs("div",{className:"text-sm",children:[A.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),A.jsx("ul",{className:"space-y-1",children:h.clues.across.map(B=>A.jsxs("li",{children:[A.jsxs("strong",{children:[B.number,"."]})," ",B.clue]},`${B.word}-${B.clue}`))}),A.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),A.jsx("ul",{className:"space-y-1",children:h.clues.down.map(B=>A.jsxs("li",{children:[A.jsxs("strong",{children:[B.number,"."]})," ",B.clue]},`${B.word}-${B.clue}`))})]})]})}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("label",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:g,onChange:()=>b(!g),className:"h-5 w-5 rounded"}),A.jsx("span",{children:"Mostrar Solución"})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),A.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:"✏️"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),h?N():A.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(B=>A.jsx("button",{onClick:()=>{n(B),s(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!r&&e===B?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:B},B)),A.jsx("button",{onClick:()=>s(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${r?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),r&&A.jsx("input",{type:"number",value:e,onChange:B=>n(parseInt(B.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{id:"ai-theme",type:"text",value:u,onChange:B=>d(B.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:R,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?A.jsx(lTe,{}):A.jsxs(A.Fragment,{children:[A.jsx(cTe,{}),A.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),A.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((B,O)=>A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[A.jsx("input",{type:"text",value:a[O],onChange:M=>I(O,M.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:o[O],onChange:M=>k(O,M.target.value),placeholder:`Pista ${O+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},O))}),A.jsx("div",{className:"text-right pt-4",children:A.jsx("button",{onClick:P,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},ATe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],dTe=({recurso:t,onClick:e})=>A.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[A.jsx("div",{className:"text-6xl mb-4",children:t.icon}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),fTe=()=>{const[t,e]=ee.useState("menu"),n=()=>t==="mapasMentales"?A.jsx(tTe,{onBack:()=>e("menu")}):t==="sopaDeLetras"?A.jsx(sTe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?A.jsx(oTe,{onBack:()=>e("menu")}):t==="crucigramas"?A.jsx(uTe,{onBack:()=>e("menu")}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ATe.map(r=>A.jsx(dTe,{recurso:r,onClick:()=>e(r.id)},r.id))})]});return A.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},hTe="evaluacionesFormativas",mTe="calificacionesFormativas",PE="trabajosGrupalesFormativos",pTe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState({}),[a,i]=ee.useState([]),[o,l]=ee.useState(null),[u,d]=ee.useState(!1),[h,p]=ee.useState(null),g=ee.useRef(null);ee.useEffect(()=>{try{const I=localStorage.getItem(hTe);I&&n(JSON.parse(I));const k=localStorage.getItem(mTe);k&&s(JSON.parse(k));const R=localStorage.getItem(PE);R&&i(JSON.parse(R))}catch(I){console.error("Error al cargar datos desde localStorage",I)}},[]);const b=ee.useMemo(()=>{if(!t.curso)return[];const k=e.filter(R=>R.curso===t.curso).reduce((R,D)=>((R[D.asignatura]=R[D.asignatura]||[]).push(D),R),{});return Object.entries(k).map(([R,D])=>{let P=0,_=0;const N=D.map(O=>{var H;const M=(H=r[O.id])==null?void 0:H[t.nombreCompleto];let L="No Trabajado";return M==="trabajado"?(P+=7,_++,L="Trabajado"):M==="no trabajado"&&(P+=2,_++,L="No Trabajado"),{id:O.id,nombreActividad:O.nombreActividad,fecha:O.fecha,estado:L}}).filter(O=>{var M;return(M=r[O.id])==null?void 0:M[t.nombreCompleto]}),B=_>0?(P/_).toFixed(1):"N/A";return{asignatura:R,promedio:B,actividades:N.sort((O,M)=>new Date(M.fecha).getTime()-new Date(O.fecha).getTime())}}).filter(R=>R.actividades.length>0).sort((R,D)=>R.asignatura.localeCompare(D.asignatura))},[e,r,t]);ee.useEffect(()=>{if(b.reduce((_,N)=>_+N.actividades.length,0)===0){l(null);return}const k=b.reduce((_,N)=>{const B=parseFloat(N.promedio);return isNaN(B)?_:_+B},0),R=b.length>0?k/b.length:0,D=Z1.find(_=>R>=_.promedioMin&&R<=_.promedioMax)||null,P=Z1.filter(_=>R>=_.promedioMin);if(l({puntajeTotal:0,promedio:R,rangoActual:D,insigniasGanadas:P}),g.current!==null){const _=Z1.find(N=>g.current>=N.promedioMin&&g.current<=N.promedioMax)||null;D&&(!_||D.nombre!==_.nombre)&&p(D)}g.current=R},[b]);const w=ee.useMemo(()=>t.curso?a.filter(I=>I.curso===t.curso).map(I=>{const k=I.grupos.find(R=>R.integrantes.some(D=>D.nombre===t.nombreCompleto));return k?{...I,miGrupo:k}:null}).filter(I=>I!==null).sort((I,k)=>new Date(k.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[a,t]),C=(I,k)=>{const R=localStorage.getItem(PE),P=(R?JSON.parse(R):[]).map(_=>{if(_.id===I){const N=_.grupos.map(B=>{if(B.integrantes.some(M=>M.nombre===t.nombreCompleto)){const M=B.integrantes.map(L=>L.nombre===t.nombreCompleto?{...L,rol:k||void 0}:L);return{...B,integrantes:M}}return B});return{..._,grupos:N}}return _});localStorage.setItem(PE,JSON.stringify(P)),i(P)},T=I=>{const k=parseFloat(I);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[h&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>p(null),children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[A.jsx("div",{className:"text-8xl animate-bounce",children:h.emoji}),A.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),A.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:h.nombre}),A.jsx("p",{className:"text-slate-600 mt-4",children:h.mensaje}),A.jsx("button",{onClick:()=>p(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),u&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),A.jsx("div",{className:"overflow-y-auto space-y-3",children:Z1.map(I=>{const k=o==null?void 0:o.insigniasGanadas.some(R=>R.nombre===I.nombre);return A.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[A.jsx("div",{className:"text-5xl",children:I.emoji}),A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:I.nombre}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),o&&o.rangoActual&&A.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),A.jsx("h2",{className:"text-3xl font-bold",children:o.rangoActual.nombre}),A.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("div",{className:"text-7xl",children:o.rangoActual.emoji}),A.jsx("p",{className:"font-bold text-2xl mt-2",children:o.promedio.toFixed(1)}),A.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(I=>A.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),A.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),A.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${T(I.promedio)}`,children:I.promedio})]}),A.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(k=>A.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),A.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),A.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},I.asignatura))}):A.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[A.jsx("span",{className:"text-5xl",children:"📊"}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),A.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),w.length>0&&A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),A.jsx("div",{className:"space-y-4",children:w.map(I=>{const k=I.miGrupo.integrantes.filter(D=>D.nombre!==t.nombreCompleto&&D.rol).map(D=>D.rol),R=o8.filter(D=>!k.includes(D));return A.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[A.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),A.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentación: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),A.jsxs("div",{className:"mt-3 pt-3 border-t",children:[A.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),A.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(D=>A.jsxs("li",{className:"grid grid-cols-2 items-center",children:[A.jsx("span",{className:D.nombre===t.nombreCompleto?"font-bold":"",children:D.nombre}),D.nombre===t.nombreCompleto?A.jsxs("select",{value:D.rol||"",onChange:P=>C(I.id,P.target.value),className:"text-sm p-1 border rounded w-full",children:[A.jsx("option",{value:"",children:"-- Seleccionar rol --"}),D.rol&&!R.includes(D.rol)&&A.jsx("option",{value:D.rol,children:D.rol}),R.map(P=>A.jsx("option",{value:P,children:P},P))]}):A.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:D.rol||"Sin rol"})]},D.nombre))})]})]},I.id)})})]})]})},gTe="planificacionesInterdisciplinarias",_D="entregasTareasInterdisciplinarias",xTe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState([]),[a,i]=ee.useState(null);ee.useEffect(()=>{const p=()=>{try{const g=localStorage.getItem(gTe);g&&n(JSON.parse(g));const b=localStorage.getItem(_D);b&&s(JSON.parse(b))}catch(g){console.error("Error al cargar datos desde localStorage",g)}};return p(),window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[]);const o=ee.useMemo(()=>e.filter(p=>p.cursos.includes(t.curso||"")),[e,t.curso]),l=p=>{s(p),localStorage.setItem(_D,JSON.stringify(p)),window.dispatchEvent(new Event("storage"))},u=(p,g)=>{let b=r.find(w=>w.planificacionId===p&&w.tareaId===g&&w.estudianteId===t.id);return b||(b={id:crypto.randomUUID(),planificacionId:p,tareaId:g,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}),b},d=p=>{const g=r.findIndex(w=>w.id===p.id);let b;g>-1?b=r.map(w=>w.id===p.id?p:w):b=[...r,p],l(b)},h=({plan:p,tarea:g})=>{const b=ee.useMemo(()=>u(p.id,g.id),[p.id,g.id,r]),[w,C]=ee.useState(!1),[T,I]=ee.useState({observaciones:b.observacionesEstudiante||"",enlace:b.enlaceUrl||""}),k=P=>{var N;const _=(N=P.target.files)==null?void 0:N[0];if(_){const B=new FileReader;B.onloadend=()=>{d({...b,archivoAdjunto:{nombre:_.name,url:B.result},fechaCompletado:new Date().toISOString()})},B.readAsDataURL(_)}},R=()=>{d({...b,observacionesEstudiante:T.observaciones,enlaceUrl:T.enlace,fechaCompletado:new Date().toISOString()})},D=()=>{d({...b,completada:!b.completada,fechaCompletado:new Date().toISOString()})};return A.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("input",{type:"checkbox",checked:b.completada,onChange:D,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:`font-semibold ${b.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",g.numero,": ",g.instrucciones]}),A.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",g.fechaEntrega]}),g.recursoUrl&&A.jsx("a",{href:g.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),A.jsx("button",{onClick:()=>C(!w),className:"text-sm font-semibold",children:w?"Ocultar":"Entregar"})]}),w&&A.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[A.jsx("textarea",{value:T.observaciones,onChange:P=>I({...T,observaciones:P.target.value}),onBlur:R,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),A.jsx("input",{type:"url",value:T.enlace,onChange:P=>I({...T,enlace:P.target.value}),onBlur:R,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),A.jsx("input",{type:"file",onChange:k,className:"text-sm"}),b.archivoAdjunto&&A.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",b.archivoAdjunto.nombre]})]}),b.feedbackProfesor&&A.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[A.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),A.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:b.feedbackProfesor})]})]})};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),o.length>0?o.map(p=>{const g=p.tareas||[],w=r.filter(T=>T.planificacionId===p.id&&T.estudianteId===t.id).filter(T=>T.completada).length,C=g.length>0?w/g.length*100:0;return A.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[A.jsxs("button",{onClick:()=>i(a===p.id?null:p.id),className:"w-full text-left",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:p.nombreProyecto}),A.jsxs("div",{className:"mt-2 space-y-1",children:[A.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[A.jsx("span",{children:"Progreso"}),A.jsxs("span",{children:[Math.round(C),"%"]})]}),A.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:A.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${C}%`}})})]})]}),a===p.id&&A.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:g.length>0?g.map(T=>A.jsx(h,{plan:p,tarea:T},T.id)):A.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},p.id)}):A.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[A.jsx("span",{className:"text-5xl",children:"🎉"}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),A.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},vTe=({data:t})=>A.jsx("div",{className:"space-y-4",children:t.map((n,r)=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),A.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:A.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),yTe=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(V2),h=ee.useCallback(async()=>{s(!0);try{const C=(await Cxe(t.nombreCompleto)).sort((T,I)=>new Date(I.fecha).getTime()-new Date(T.fecha).getTime());n(C),i(null)}catch(w){console.error("Error al cargar acompañamientos desde Firestore",w),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),p=ee.useCallback(async()=>{try{const w=await Exe();w&&d(w)}catch(w){console.error("Error al cargar rúbrica personalizada",w)}},[]);ee.useEffect(()=>{h(),p()},[h,p]);const g=ee.useMemo(()=>{if(!o)return[];const w={};return u.forEach(C=>{w[C.domain]={total:0,count:0},C.criteria.forEach(T=>{const I=o.rubricaResultados[T.name];I&&(w[C.domain].total+=I,w[C.domain].count++)})}),Object.entries(w).map(([C,T])=>({label:C,value:T.count>0?T.total/T.count:0}))},[o,u]),b=w=>{const C=new an;C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(100),C.text("LICEO INDUSTRIAL DE RECOLETA",C.internal.pageSize.getWidth()/2,15,{align:"center"}),C.setFont("helvetica","bold"),C.setFontSize(16),C.setTextColor(40),C.text("Informe de Acompañamiento Docente",C.internal.pageSize.getWidth()/2,25,{align:"center"}),C.setFontSize(12),C.setFont("helvetica","normal"),Wo(C,{startY:35,body:[["Docente:",w.docente],["Fecha:",new Date(w.fecha).toLocaleDateString("es-CL")],["Asignatura:",w.asignatura],["Curso:",w.curso],["Bloques:",w.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let T=C.lastAutoTable.finalY+15;if(Object.keys(w.rubricaResultados).length>0){const R=[],D=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(P=>{R.push([{content:P.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),P.criteria.forEach(_=>{const N=w.rubricaResultados[_.name],B=N?D[N-1]:"No evaluado";R.push([_.name,B])})}),Wo(C,{startY:T,head:[["Indicador","Nivel de Logro"]],body:R,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),T=C.lastAutoTable.finalY+15}const I=(R,D)=>{if(!D)return;T>250&&(C.addPage(),T=20,C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(100),C.text("LICEO INDUSTRIAL DE RECOLETA",C.internal.pageSize.getWidth()/2,15,{align:"center"}),T=25),C.setFont("helvetica","bold"),C.setFontSize(14),C.setTextColor(40),C.text(R,14,T),T+=8,C.setFont("helvetica","normal"),C.setFontSize(11),C.setTextColor(60);const P=C.splitTextToSize(D.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);C.text(P,14,T),T+=P.length*5+10};I("Observaciones Generales",w.observacionesGenerales),I("Retroalimentación Consolidada",w.retroalimentacionConsolidada);const k=C.getNumberOfPages();for(let R=1;R<=k;R++)C.setPage(R),C.setFontSize(8),C.setTextColor(128),C.text(`Página ${R} de ${k}`,C.internal.pageSize.getWidth()/2,C.internal.pageSize.getHeight()-10,{align:"center"});C.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(w.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsxs("div",{children:[A.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),A.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),A.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[A.jsx(i8,{})," Exportar PDF"]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsx("div",{className:"lg:col-span-2 space-y-6",children:A.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[A.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),A.jsx("h3",{children:"Observaciones Generales"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx(vTe,{data:g})})]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!r&&e.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),A.jsx("div",{className:"space-y-4",children:!r&&e.length>0?e.map(w=>A.jsx("button",{onClick:()=>l(w),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[w.curso," - ",w.asignatura]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(w.fecha).toLocaleDateString("es-CL"),w.bloques&&` | Bloques: ${w.bloques}`]}),Object.keys(w.rubricaResultados).length>0&&A.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(w.rubricaResultados).length," criterios"]})]}),A.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},w.id)):!r&&A.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("span",{className:"text-5xl",children:"👍"}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},wTe="planificacionesDocente",bTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),CTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),ETe=({plan:t,onClose:e})=>{const n=s=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",s.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Indicadores de Evaluación:"})," ",s.indicadoresEvaluacion]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[A.jsx("strong",{children:"Contenidos Clave:"})," ",s.contenidos]})]}),A.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",s.cantidadClases,")"]}),A.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:s.detallesLeccion.map((a,i)=>A.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[A.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",a.actividades]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[A.jsxs("span",{children:[A.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),A.jsxs("span",{className:"md:col-span-2",children:[A.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]})]},i))})]}),r=s=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[A.jsx("strong",{children:"Contenidos:"})," ",s.contenidos]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.inicio})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.desarrollo})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.cierre})]})]})]});return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[A.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),A.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:A.jsx(CTe,{})})]}),A.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?n(t):r(t)})]})})},_Te=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState("1º"),[s,a]=ee.useState(null),[i,o]=ee.useState(null),l=ee.useCallback(()=>{try{const p=localStorage.getItem(wTe);p&&e(JSON.parse(p))}catch(p){console.error("Error al leer planificaciones de localStorage",p)}},[]);ee.useEffect(()=>(l(),window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}),[l]);const u=ee.useMemo(()=>{const g={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[n];return t.filter(b=>b.nivel===g)},[t,n]),d=p=>{a(g=>g===p?null:p)},h=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:A.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:h.map(p=>A.jsx("button",{onClick:()=>r(p.key),className:`${n===p.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:p.label},p.key))})}),A.jsx("div",{className:"space-y-4",children:$o.map(p=>{const g=u.filter(w=>w.asignatura===p);if(g.length===0)return null;const b=s===p;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[A.jsxs("button",{onClick:()=>d(p),className:"w-full flex justify-between items-center p-4 text-left",children:[A.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:p}),A.jsx("span",{className:`transform transition-transform duration-200 ${b?"rotate-180":""}`,children:A.jsx(bTe,{})})]}),b&&A.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:A.jsx("ul",{className:"space-y-3",children:g.length>0?g.map(w=>A.jsx("li",{children:A.jsxs("button",{onClick:()=>o(w),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[A.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.tipo==="Unidad"?w.nombreUnidad:w.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Autor: ",w.autor||"No especificado"," - Creado: ",new Date(w.fechaCreacion).toLocaleDateString("es-CL")]})]})},w.id)):A.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay planificaciones para esta asignatura."})})})]},p)})})]}),i&&A.jsx(ETe,{plan:i,onClose:()=>o(null)})]})},nT="analisis",STe=async()=>{try{const t=df(Wi(ts,nT),ff("uploadDate","desc"));return(await Eu(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},TTe=async t=>{try{return{id:(await Ix(Wi(ts,nT),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},BTe=async t=>{try{const e=$i(ts,nT,t);await Mm(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},SD=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],TD={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},NTe=()=>A.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),BD=({currentUser:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState(!1),[a,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,p]=ee.useState(!1),[g,b]=ee.useState(null),[w,C]=ee.useState(null),T=ee.useCallback(async()=>{s(!0);try{const P=await STe();n(P),i(null)}catch(P){console.error("Error al cargar análisis desde Firestore",P),i("No se pudieron cargar los análisis desde la nube.")}finally{s(!1)}},[]);ee.useEffect(()=>{T()},[T]);const I=async P=>{var N;const _=(N=P.target.files)==null?void 0:N[0];if(_){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(_.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),C(null),d("");return}b(_),d(_.name),i(null);const O=new FileReader;O.onloadend=()=>{const M=O.result.split(",")[1];if(!M){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),C(null);return}C({mimeType:_.type,data:M})},O.onerror=()=>{i("Error al leer el archivo."),C(null)},O.readAsDataURL(_)}},k=async()=>{if(!u.trim()||!w){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}p(!0),i(null);const P=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,_={type:Bt.OBJECT,properties:{analysisResults:{type:Bt.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:Bt.OBJECT,properties:{question:{type:Bt.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:Bt.STRING,description:"El nivel de Bloom correspondiente.",enum:SD}},required:["question","habilidadBloom"]}},summary:{type:Bt.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:Bt.INTEGER},Comprender:{type:Bt.INTEGER},Aplicar:{type:Bt.INTEGER},Analizar:{type:Bt.INTEGER},Evaluar:{type:Bt.INTEGER},Crear:{type:Bt.INTEGER}}}},required:["analysisResults","summary"]};try{yo("Análisis Taxonómico");const N=new Ba({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),B={inlineData:{mimeType:w.mimeType,data:w.data}},O=await N.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:P},B]},config:{responseMimeType:"application/json",responseSchema:_}}),M=JSON.parse(O.text),L={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:M.analysisResults,summary:M.summary},H=await TTe(L);await T(),l(H),d(""),b(null),C(null)}catch(N){console.error(N),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{p(!1)}},R=async P=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await BTe(P),await T(),(o==null?void 0:o.id)===P&&l(null)}catch(_){console.error("Error al eliminar análisis:",_),i("No se pudo eliminar el análisis en la nube.")}},D=ee.useMemo(()=>o?Object.values(o.summary).reduce((P,_)=>P+(_||0),0):0,[o]);return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),a&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),A.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:A.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),A.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[A.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[A.jsx("span",{children:"Cargue un archivo"}),A.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:I,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),A.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),A.jsx("input",{type:"text",id:"documentName",value:u,onChange:P=>d(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsx("button",{onClick:k,disabled:h||!w,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?A.jsx(NTe,{}):"Analizar con IA"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!r&&e.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!r&&e.length>0&&e.map(P=>A.jsxs("button",{onClick:()=>l(P),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===P.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[A.jsx("p",{className:"font-semibold truncate",children:P.documentName}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(P.uploadDate).toLocaleString("es-CL")})]},P.id))})]})]}),A.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),A.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",D," preguntas)"]}),A.jsx("div",{className:"space-y-3",children:SD.map(P=>{const _=o.summary[P]||0,N=D>0?_/D*100:0;return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:P}),A.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[_," (",N.toFixed(0),"%)"]})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:A.jsx("div",{className:`${TD[P]} h-4 rounded-full`,style:{width:`${N}%`}})})]},P)})})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),A.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((P,_)=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:P.question}),A.jsx("td",{className:"px-4 py-3 text-sm",children:A.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${TD[P.habilidadBloom]}`,children:P.habilidadBloom})})]},_))})]})})]})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[A.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},kTe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},ITe=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,unreadMessagesCount:s,refreshUnreadCount:a})=>{const i=t.profile,o=ee.useMemo(()=>{const C=r$[i]??[];return i!==en.ESTUDIANTE?C:C.filter(T=>{if(T.name==="Asistencia a Empresa"){const I=kTe(t.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[i,t.curso]),[l,u]=ee.useState(null),[d,h]=ee.useState(!1);ee.useEffect(()=>{o.length>0?u(o[0]):u(null)},[o]);const p=ee.useCallback(C=>{u(C),window.innerWidth<768&&h(!1)},[]),g=ee.useCallback(C=>{const T=o.find(I=>I.name===C);T&&p(T)},[o,p]),b=()=>A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[A.jsx(QW,{}),A.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),A.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:o.map(C=>A.jsxs("button",{onClick:()=>p(C),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(l==null?void 0:l.name)===C.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[C.icon,A.jsx("span",{className:"ml-4",children:C.name})]},C.name))})]}),w=()=>{if(!l)return A.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(l.name==="Calendario Académico")return A.jsx(Qse,{profile:i});if(l.name==="Muro de Anuncios")return A.jsx(qse,{currentUser:t});if(l.name==="Mensajería Interna")return A.jsx(Txe,{currentUser:t,refreshUnreadCount:a});if(l.name==="Generador de Actas")return A.jsx(Wse,{});if(i===en.SUBDIRECCION){if(l.name==="Dashboard")return A.jsx(v$,{});if(l.name==="Administración")return A.jsx(zge,{});if(l.name==="Seguimiento Curricular")return A.jsx(_Te,{});if(l.name==="Acompañamiento docente")return A.jsx(_xe,{});if(l.name==="Análisis Taxonómico")return A.jsx(BD,{currentUser:t});if(l.name==="Interdisciplinario")return A.jsx(wR,{});if(l.name==="Registro de inasistencias y reemplazos docentes")return A.jsx(m$,{});if(l.name==="Crear horarios")return A.jsx(Cse,{});if(l.name==="Seguimiento de acciones pedagógicas")return A.jsx(Bse,{});if(l.name==="Inclusión")return A.jsx(f6,{currentUser:t})}if(i===en.PROFESORADO){if(l.name==="Planificación")return A.jsx(Rse,{currentUser:t});if(l.name==="Mis Acompañamientos")return A.jsx(yTe,{currentUser:t});if(l.name==="Recursos de Aprendizaje")return A.jsx(fTe,{});if(l.name==="Análisis Taxonómico")return A.jsx(BD,{currentUser:t});if(l.name==="Interdisciplinario")return A.jsx(wR,{});if(l.name==="Inclusión")return A.jsx(f6,{currentUser:t});if(l.name==="Actividades Remotas")return A.jsx(Xge,{});if(l.name==="Evaluación de Aprendizajes")return A.jsx(jie,{});if(l.name==="Evaluaciones Formativas")return A.jsx(xxe,{currentUser:t})}if(i===en.COORDINACION_TP){if(l.name==="Seguimiento Dual")return A.jsx(Wge,{});if(l.name==="Asistencia Dual")return A.jsx(dxe,{});if(l.name==="Pañol")return A.jsx(ube,{})}if(i===en.ESTUDIANTE){if(l.name==="Auto-aprendizaje")return A.jsx(rxe,{currentUser:t});if(l.name==="Evaluación Formativa")return A.jsx(pTe,{currentUser:t});if(l.name==="Tareas Interdisciplinarias")return A.jsx(xTe,{currentUser:t});if(l.name==="Asistencia a Empresa")return A.jsx(oxe,{currentUser:t})}return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:l.name}),A.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:A.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",A.jsx("span",{className:"font-semibold",children:l.name}),"."]})})]})};return A.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[A.jsx(A$,{currentUser:t,onLogout:e,onNavigate:g,onUserUpdate:n,onChangeProfile:r,toggleSidebar:()=>h(!d),unreadMessagesCount:s,refreshUnreadCount:a}),A.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d&&A.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),A.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${d?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:A.jsx(b,{})}),A.jsx("main",{className:"flex-1 overflow-y-auto",children:A.jsx("div",{className:"p-6 md:p-8",children:w()})})]})]})},FTe=({onSelectProfile:t,isAdminView:e=!1})=>A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(F5,{})}),A.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:n$.map(n=>A.jsxs("button",{onClick:()=>t(n.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[A.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:n.icon}),A.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:n.label})]},n.id))}),A.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),RTe=()=>{const[t,e]=ee.useState(null),[n,r]=ee.useState(null),[s,a]=ee.useState(!0),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(null);ee.useEffect(()=>{console.log("🔄 Iniciando listener de Auth...");const T=fG(Y1,async I=>{try{if(console.log("🔄 Auth state changed:",(I==null?void 0:I.email)||"No user"),e(I),!I)r(null),h(null),u(!1);else{console.log("🔄 Cargando datos de Firestore para:",I.email);const k=$i(ts,"usuarios",I.email),R=await r8(k);if(R.exists()){const D=R.data();console.log("✅ Datos de usuario cargados:",D.nombreCompleto),r(D),D.profile===en.SUBDIRECCION&&u(!0)}else console.log("❌ Usuario no encontrado en Firestore"),r(null),o("Usuario no encontrado en la base de datos")}}catch(k){console.error("❌ Error al cargar datos del usuario:",k),r(null),o("Error al cargar datos del usuario")}finally{a(!1),console.log("✅ Auth inicialización completada")}});return()=>{console.log("🔄 Limpiando listener de Auth"),T()}},[]);const p=async(T,I)=>{o(null);try{console.log("🔄 Intentando login para:",T),await uG(Y1,T,I)}catch(k){switch(console.error("❌ Error de login:",k),k.code){case"auth/user-not-found":o("No existe una cuenta con este correo electrónico");break;case"auth/wrong-password":o("Contraseña incorrecta");break;case"auth/invalid-email":o("Correo electrónico inválido");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde");break;default:o("Credenciales incorrectas o usuario no registrado")}}},g=async T=>{try{await cG(Y1,T),console.log("✅ Email de recuperación enviado a:",T)}catch(I){console.error("❌ Error al enviar email de recuperación:",I)}},b=T=>{h(T),u(!1)},w=async()=>{await hG(Y1),e(null),r(null),h(null),u(!1)};if(s)return A.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(F5,{})}),A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."}),A.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-500",children:"Verificando autenticación y permisos"})]})});const C=()=>t&&l&&(n==null?void 0:n.profile)===en.SUBDIRECCION?A.jsx(FTe,{onSelectProfile:b,isAdminView:!0}):t&&n?A.jsx(ITe,{currentUser:{...n,profile:d||n.profile},onLogout:w}):A.jsx(o$,{onLoginAttempt:p,onForgotPasswordRequest:g,error:i});return A.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:C()})},hQ=document.getElementById("root");if(!hQ)throw new Error("Could not find root element to mount to");const DTe=S9.createRoot(hQ);DTe.render(A.jsx(At.StrictMode,{children:A.jsx(RTe,{})}));export{Mr as _,UTe as c,OS as g};
