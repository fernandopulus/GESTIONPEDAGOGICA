var $he=Object.defineProperty;var Ghe=(e,t,r)=>t in e?$he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var z3=(e,t,r)=>Ghe(e,typeof t!="symbol"?t+"":t,r);function Khe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var vgt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qhe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var $3={exports:{}},cy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x9;function Whe(){if(x9)return cy;x9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return cy.Fragment=t,cy.jsx=r,cy.jsxs=r,cy}var v9;function Xhe(){return v9||(v9=1,$3.exports=Whe()),$3.exports}var o=Xhe(),G3={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b9;function Yhe(){if(b9)return cn;b9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),A=Symbol.iterator;function h(Z){return Z===null||typeof Z!="object"?null:(Z=A&&Z[A]||Z["@@iterator"],typeof Z=="function"?Z:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(Z,G,D){this.props=Z,this.context=G,this.refs=x,this.updater=D||m}v.prototype.isReactComponent={},v.prototype.setState=function(Z,G){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,G,"setState")},v.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(Z,G,D){this.props=Z,this.context=G,this.refs=x,this.updater=D||m}var _=w.prototype=new y;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var j=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function E(Z,G,D,U,z,J){return D=J.ref,{$$typeof:e,type:Z,key:G,ref:D!==void 0?D:null,props:J}}function S(Z,G){return E(Z.type,G,void 0,void 0,void 0,Z.props)}function B(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function R(Z){var G={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(D){return G[D]})}var P=/\/+/g;function F(Z,G){return typeof Z=="object"&&Z!==null&&Z.key!=null?R(""+Z.key):G.toString(36)}function L(){}function M(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(L,L):(Z.status="pending",Z.then(function(G){Z.status==="pending"&&(Z.status="fulfilled",Z.value=G)},function(G){Z.status==="pending"&&(Z.status="rejected",Z.reason=G)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function ee(Z,G,D,U,z){var J=typeof Z;(J==="undefined"||J==="boolean")&&(Z=null);var re=!1;if(Z===null)re=!0;else switch(J){case"bigint":case"string":case"number":re=!0;break;case"object":switch(Z.$$typeof){case e:case t:re=!0;break;case d:return re=Z._init,ee(re(Z._payload),G,D,U,z)}}if(re)return z=z(Z),re=U===""?"."+F(Z,0):U,j(z)?(D="",re!=null&&(D=re.replace(P,"$&/")+"/"),ee(z,G,D,"",function(le){return le})):z!=null&&(B(z)&&(z=S(z,D+(z.key==null||Z&&Z.key===z.key?"":(""+z.key).replace(P,"$&/")+"/")+re)),G.push(z)),1;re=0;var oe=U===""?".":U+":";if(j(Z))for(var se=0;se<Z.length;se++)U=Z[se],J=oe+F(U,se),re+=ee(U,G,D,J,z);else if(se=h(Z),typeof se=="function")for(Z=se.call(Z),se=0;!(U=Z.next()).done;)U=U.value,J=oe+F(U,se++),re+=ee(U,G,D,J,z);else if(J==="object"){if(typeof Z.then=="function")return ee(M(Z),G,D,U,z);throw G=String(Z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return re}function V(Z,G,D){if(Z==null)return Z;var U=[],z=0;return ee(Z,U,"","",function(J){return G.call(D,J,z++)}),U}function q(Z){if(Z._status===-1){var G=Z._result;G=G(),G.then(function(D){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=D)},function(D){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=D)}),Z._status===-1&&(Z._status=0,Z._result=G)}if(Z._status===1)return Z._result.default;throw Z._result}var K=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function X(){}return cn.Children={map:V,forEach:function(Z,G,D){V(Z,function(){G.apply(this,arguments)},D)},count:function(Z){var G=0;return V(Z,function(){G++}),G},toArray:function(Z){return V(Z,function(G){return G})||[]},only:function(Z){if(!B(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},cn.Component=v,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=w,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,cn.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return k.H.useMemoCache(Z)}},cn.cache=function(Z){return function(){return Z.apply(null,arguments)}},cn.cloneElement=function(Z,G,D){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var U=g({},Z.props),z=Z.key,J=void 0;if(G!=null)for(re in G.ref!==void 0&&(J=void 0),G.key!==void 0&&(z=""+G.key),G)!I.call(G,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&G.ref===void 0||(U[re]=G[re]);var re=arguments.length-2;if(re===1)U.children=D;else if(1<re){for(var oe=Array(re),se=0;se<re;se++)oe[se]=arguments[se+2];U.children=oe}return E(Z.type,z,void 0,void 0,J,U)},cn.createContext=function(Z){return Z={$$typeof:i,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:s,_context:Z},Z},cn.createElement=function(Z,G,D){var U,z={},J=null;if(G!=null)for(U in G.key!==void 0&&(J=""+G.key),G)I.call(G,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(z[U]=G[U]);var re=arguments.length-2;if(re===1)z.children=D;else if(1<re){for(var oe=Array(re),se=0;se<re;se++)oe[se]=arguments[se+2];z.children=oe}if(Z&&Z.defaultProps)for(U in re=Z.defaultProps,re)z[U]===void 0&&(z[U]=re[U]);return E(Z,J,void 0,void 0,null,z)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(Z){return{$$typeof:l,render:Z}},cn.isValidElement=B,cn.lazy=function(Z){return{$$typeof:d,_payload:{_status:-1,_result:Z},_init:q}},cn.memo=function(Z,G){return{$$typeof:u,type:Z,compare:G===void 0?null:G}},cn.startTransition=function(Z){var G=k.T,D={};k.T=D;try{var U=Z(),z=k.S;z!==null&&z(D,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(X,K)}catch(J){K(J)}finally{k.T=G}},cn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},cn.use=function(Z){return k.H.use(Z)},cn.useActionState=function(Z,G,D){return k.H.useActionState(Z,G,D)},cn.useCallback=function(Z,G){return k.H.useCallback(Z,G)},cn.useContext=function(Z){return k.H.useContext(Z)},cn.useDebugValue=function(){},cn.useDeferredValue=function(Z,G){return k.H.useDeferredValue(Z,G)},cn.useEffect=function(Z,G,D){var U=k.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(Z,G)},cn.useId=function(){return k.H.useId()},cn.useImperativeHandle=function(Z,G,D){return k.H.useImperativeHandle(Z,G,D)},cn.useInsertionEffect=function(Z,G){return k.H.useInsertionEffect(Z,G)},cn.useLayoutEffect=function(Z,G){return k.H.useLayoutEffect(Z,G)},cn.useMemo=function(Z,G){return k.H.useMemo(Z,G)},cn.useOptimistic=function(Z,G){return k.H.useOptimistic(Z,G)},cn.useReducer=function(Z,G,D){return k.H.useReducer(Z,G,D)},cn.useRef=function(Z){return k.H.useRef(Z)},cn.useState=function(Z){return k.H.useState(Z)},cn.useSyncExternalStore=function(Z,G,D){return k.H.useSyncExternalStore(Z,G,D)},cn.useTransition=function(){return k.H.useTransition()},cn.version="19.1.1",cn}var y9;function Q1(){return y9||(y9=1,G3.exports=Yhe()),G3.exports}var C=Q1();const at=jl(C),Jhe=Khe({__proto__:null,default:at},[C]);var K3={exports:{}},uy={},q3={exports:{}},W3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w9;function Zhe(){return w9||(w9=1,function(e){function t(V,q){var K=V.length;V.push(q);e:for(;0<K;){var X=K-1>>>1,Z=V[X];if(0<a(Z,q))V[X]=q,V[K]=Z,K=X;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var q=V[0],K=V.pop();if(K!==q){V[0]=K;e:for(var X=0,Z=V.length,G=Z>>>1;X<G;){var D=2*(X+1)-1,U=V[D],z=D+1,J=V[z];if(0>a(U,K))z<Z&&0>a(J,U)?(V[X]=J,V[z]=K,X=z):(V[X]=U,V[D]=K,X=D);else if(z<Z&&0>a(J,K))V[X]=J,V[z]=K,X=z;else break e}}return q}function a(V,q){var K=V.sortIndex-q.sortIndex;return K!==0?K:V.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,A=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(V){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=V)n(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(u)}}function k(V){if(x=!1,j(V),!g)if(r(c)!==null)g=!0,I||(I=!0,F());else{var q=r(u);q!==null&&ee(k,q.startTime-V)}}var I=!1,E=-1,S=5,B=-1;function R(){return v?!0:!(e.unstable_now()-B<S)}function P(){if(v=!1,I){var V=e.unstable_now();B=V;var q=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),m=!0;var K=h;try{t:{for(j(V),A=r(c);A!==null&&!(A.expirationTime>V&&R());){var X=A.callback;if(typeof X=="function"){A.callback=null,h=A.priorityLevel;var Z=X(A.expirationTime<=V);if(V=e.unstable_now(),typeof Z=="function"){A.callback=Z,j(V),q=!0;break t}A===r(c)&&n(c),j(V)}else n(c);A=r(c)}if(A!==null)q=!0;else{var G=r(u);G!==null&&ee(k,G.startTime-V),q=!1}}break e}finally{A=null,h=K,m=!1}q=void 0}}finally{q?F():I=!1}}}var F;if(typeof _=="function")F=function(){_(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=P,F=function(){M.postMessage(null)}}else F=function(){y(P,0)};function ee(V,q){E=y(function(){V(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var K=h;h=q;try{return V()}finally{h=K}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=h;h=V;try{return q()}finally{h=K}},e.unstable_scheduleCallback=function(V,q,K){var X=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=K+Z,V={id:d++,callback:q,priorityLevel:V,startTime:K,expirationTime:Z,sortIndex:-1},K>X?(V.sortIndex=K,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,ee(k,K-X))):(V.sortIndex=Z,t(c,V),g||m||(g=!0,I||(I=!0,F()))),V},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(V){var q=h;return function(){var K=h;h=q;try{return V.apply(this,arguments)}finally{h=K}}}}(W3)),W3}var E9;function e0e(){return E9||(E9=1,q3.exports=Zhe()),q3.exports}var X3={exports:{}},Ro={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C9;function t0e(){if(C9)return Ro;C9=1;var e=Q1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ro.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ro.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Ro.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Ro.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Ro.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Ro.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,A=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:A,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:A,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ro.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Ro.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,A=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:A,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ro.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Ro.requestFormReset=function(c){n.d.r(c)},Ro.unstable_batchedUpdates=function(c,u){return c(u)},Ro.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Ro.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ro.version="19.1.1",Ro}var N9;function vJ(){if(N9)return X3.exports;N9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),X3.exports=t0e(),X3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _9;function r0e(){if(_9)return uy;_9=1;var e=e0e(),t=Q1(),r=vJ();function n(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function i(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(n(188))}function c(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(n(188));return p!==f?null:f}for(var b=f,N=p;;){var Q=b.return;if(Q===null)break;var W=Q.alternate;if(W===null){if(N=Q.return,N!==null){b=N;continue}break}if(Q.child===W.child){for(W=Q.child;W;){if(W===b)return l(Q),f;if(W===N)return l(Q),p;W=W.sibling}throw Error(n(188))}if(b.return!==N.return)b=Q,N=W;else{for(var de=!1,ye=Q.child;ye;){if(ye===b){de=!0,b=Q,N=W;break}if(ye===N){de=!0,N=Q,b=W;break}ye=ye.sibling}if(!de){for(ye=W.child;ye;){if(ye===b){de=!0,b=W,N=Q;break}if(ye===N){de=!0,N=W,b=Q;break}ye=ye.sibling}if(!de)throw Error(n(189))}}if(b.alternate!==N)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?f:p}function u(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=u(f),p!==null)return p;f=f.sibling}return null}var d=Object.assign,A=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}var L=Symbol.for("react.client.reference");function M(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===L?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case _:return(f.displayName||"Context")+".Provider";case w:return(f._context.displayName||"Context")+".Consumer";case j:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case E:return p=f.displayName||null,p!==null?p:M(f.type)||"Memo";case S:p=f._payload,f=f._init;try{return M(f(p))}catch{}}return null}var ee=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],Z=-1;function G(f){return{current:f}}function D(f){0>Z||(f.current=X[Z],X[Z]=null,Z--)}function U(f,p){Z++,X[Z]=f.current,f.current=p}var z=G(null),J=G(null),re=G(null),oe=G(null);function se(f,p){switch(U(re,p),U(J,f),U(z,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?G7(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=G7(p),f=K7(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}D(z),U(z,f)}function le(){D(z),D(J),D(re)}function ue(f){f.memoizedState!==null&&U(oe,f);var p=z.current,b=K7(p,f.type);p!==b&&(U(J,f),U(z,b))}function ke(f){J.current===f&&(D(z),D(J)),oe.current===f&&(D(oe),ay._currentValue=K)}var ae=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,je=e.unstable_cancelCallback,_e=e.unstable_shouldYield,me=e.unstable_requestPaint,Te=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,$e=e.unstable_IdlePriority,et=e.log,ct=e.unstable_setDisableYieldValue,gt=null,It=null;function Mt(f){if(typeof et=="function"&&ct(f),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(gt,f)}catch{}}var Pt=Math.clz32?Math.clz32:Br,Qt=Math.log,wt=Math.LN2;function Br(f){return f>>>=0,f===0?32:31-(Qt(f)/wt|0)|0}var tr=256,an=4194304;function Sr(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function $r(f,p,b){var N=f.pendingLanes;if(N===0)return 0;var Q=0,W=f.suspendedLanes,de=f.pingedLanes;f=f.warmLanes;var ye=N&134217727;return ye!==0?(N=ye&~W,N!==0?Q=Sr(N):(de&=ye,de!==0?Q=Sr(de):b||(b=ye&~f,b!==0&&(Q=Sr(b))))):(ye=N&~W,ye!==0?Q=Sr(ye):de!==0?Q=Sr(de):b||(b=N&~f,b!==0&&(Q=Sr(b)))),Q===0?0:p!==0&&p!==Q&&(p&W)===0&&(W=Q&-Q,b=p&-p,W>=b||W===32&&(b&4194048)!==0)?p:Q}function In(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Pr(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var f=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),f}function mn(){var f=an;return an<<=1,(an&62914560)===0&&(an=4194304),f}function la(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function ja(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function rn(f,p,b,N,Q,W){var de=f.pendingLanes;f.pendingLanes=b,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=b,f.entangledLanes&=b,f.errorRecoveryDisabledLanes&=b,f.shellSuspendCounter=0;var ye=f.entanglements,Pe=f.expirationTimes,lt=f.hiddenUpdates;for(b=de&~b;0<b;){var St=31-Pt(b),Ot=1<<St;ye[St]=0,Pe[St]=-1;var At=lt[St];if(At!==null)for(lt[St]=null,St=0;St<At.length;St++){var ht=At[St];ht!==null&&(ht.lane&=-536870913)}b&=~Ot}N!==0&&gr(f,N,0),W!==0&&Q===0&&f.tag!==0&&(f.suspendedLanes|=W&~(de&~p))}function gr(f,p,b){f.pendingLanes|=p,f.suspendedLanes&=~p;var N=31-Pt(p);f.entangledLanes|=p,f.entanglements[N]=f.entanglements[N]|1073741824|b&4194090}function Ze(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var N=31-Pt(b),Q=1<<N;Q&p|f[N]&p&&(f[N]|=p),b&=~Q}}function mt(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Je(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function xt(){var f=q.p;return f!==0?f:(f=window.event,f===void 0?32:A9(f.type))}function Et(f,p){var b=q.p;try{return q.p=f,p()}finally{q.p=b}}var bt=Math.random().toString(36).slice(2),nr="__reactFiber$"+bt,xr="__reactProps$"+bt,Wr="__reactContainer$"+bt,Zr="__reactEvents$"+bt,qr="__reactListeners$"+bt,he="__reactHandles$"+bt,Ie="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(f){delete f[nr],delete f[xr],delete f[Zr],delete f[qr],delete f[he]}function Se(f){var p=f[nr];if(p)return p;for(var b=f.parentNode;b;){if(p=b[Wr]||b[nr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=Y7(f);f!==null;){if(b=f[nr])return b;f=Y7(f)}return p}f=b,b=f.parentNode}return null}function Fe(f){if(f=f[nr]||f[Wr]){var p=f.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return f}return null}function Ye(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(n(33))}function dt(f){var p=f[Ie];return p||(p=f[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ge(f){f[Ce]=!0}var rt=new Set,it={};function Ft(f,p){zt(f,p),zt(f+"Capture",p)}function zt(f,p){for(it[f]=p,f=0;f<p.length;f++)rt.add(p[f])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function kr(f){return ae.call(Gt,f)?!0:ae.call(Ht,f)?!1:Jt.test(f)?Gt[f]=!0:(Ht[f]=!0,!1)}function sn(f,p,b){if(kr(p))if(b===null)f.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var N=p.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+b)}}function on(f,p,b){if(b===null)f.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+b)}}function An(f,p,b,N){if(N===null)f.removeAttribute(b);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(b);return}f.setAttributeNS(p,b,""+N)}}var hs,_o;function ms(f){if(hs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);hs=p&&p[1]||"",_o=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+f+_o}var ni=!1;function Ps(f,p){if(!f||ni)return"";ni=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(p){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ht){var At=ht}Reflect.construct(f,[],Ot)}else{try{Ot.call()}catch(ht){At=ht}f.call(Ot.prototype)}}else{try{throw Error()}catch(ht){At=ht}(Ot=f())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ht){if(ht&&At&&typeof ht.stack=="string")return[ht.stack,At.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=N.DetermineComponentFrameRoot(),de=W[0],ye=W[1];if(de&&ye){var Pe=de.split(`
`),lt=ye.split(`
`);for(Q=N=0;N<Pe.length&&!Pe[N].includes("DetermineComponentFrameRoot");)N++;for(;Q<lt.length&&!lt[Q].includes("DetermineComponentFrameRoot");)Q++;if(N===Pe.length||Q===lt.length)for(N=Pe.length-1,Q=lt.length-1;1<=N&&0<=Q&&Pe[N]!==lt[Q];)Q--;for(;1<=N&&0<=Q;N--,Q--)if(Pe[N]!==lt[Q]){if(N!==1||Q!==1)do if(N--,Q--,0>Q||Pe[N]!==lt[Q]){var St=`
`+Pe[N].replace(" at new "," at ");return f.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",f.displayName)),St}while(1<=N&&0<=Q);break}}}finally{ni=!1,Error.prepareStackTrace=b}return(b=f?f.displayName||f.name:"")?ms(b):""}function wi(f){switch(f.tag){case 26:case 27:case 5:return ms(f.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return Ps(f.type,!1);case 11:return Ps(f.type.render,!1);case 1:return Ps(f.type,!0);case 31:return ms("Activity");default:return""}}function xa(f){try{var p="";do p+=wi(f),f=f.return;while(f);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ai(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Zd(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Xh(f){var p=Zd(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),N=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var Q=b.get,W=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return Q.call(this)},set:function(de){N=""+de,W.call(this,de)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return N},setValue:function(de){N=""+de},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function eu(f){f._valueTracker||(f._valueTracker=Xh(f))}function pf(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),N="";return f&&(N=Zd(f)?f.checked?"true":"false":f.value),f=N,f!==b?(p.setValue(f),!0):!1}function Ei(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var eA=/[\n"\\]/g;function Fn(f){return f.replace(eA,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ci(f,p,b,N,Q,W,de,ye){f.name="",de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?f.type=de:f.removeAttribute("type"),p!=null?de==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+ai(p)):f.value!==""+ai(p)&&(f.value=""+ai(p)):de!=="submit"&&de!=="reset"||f.removeAttribute("value"),p!=null?ru(f,de,ai(p)):b!=null?ru(f,de,ai(b)):N!=null&&f.removeAttribute("value"),Q==null&&W!=null&&(f.defaultChecked=!!W),Q!=null&&(f.checked=Q&&typeof Q!="function"&&typeof Q!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?f.name=""+ai(ye):f.removeAttribute("name")}function tu(f,p,b,N,Q,W,de,ye){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(f.type=W),p!=null||b!=null){if(!(W!=="submit"&&W!=="reset"||p!=null))return;b=b!=null?""+ai(b):"",p=p!=null?""+ai(p):b,ye||p===f.value||(f.value=p),f.defaultValue=p}N=N??Q,N=typeof N!="function"&&typeof N!="symbol"&&!!N,f.checked=ye?f.checked:!!N,f.defaultChecked=!!N,de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"&&(f.name=de)}function ru(f,p,b){p==="number"&&Ei(f.ownerDocument)===f||f.defaultValue===""+b||(f.defaultValue=""+b)}function Tl(f,p,b,N){if(f=f.options,p){p={};for(var Q=0;Q<b.length;Q++)p["$"+b[Q]]=!0;for(b=0;b<f.length;b++)Q=p.hasOwnProperty("$"+f[b].value),f[b].selected!==Q&&(f[b].selected=Q),Q&&N&&(f[b].defaultSelected=!0)}else{for(b=""+ai(b),p=null,Q=0;Q<f.length;Q++){if(f[Q].value===b){f[Q].selected=!0,N&&(f[Q].defaultSelected=!0);return}p!==null||f[Q].disabled||(p=f[Q])}p!==null&&(p.selected=!0)}}function Vn(f,p,b){if(p!=null&&(p=""+ai(p),p!==f.value&&(f.value=p),b==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=b!=null?""+ai(b):""}function nu(f,p,b,N){if(p==null){if(N!=null){if(b!=null)throw Error(n(92));if(ee(N)){if(1<N.length)throw Error(n(93));N=N[0]}b=N}b==null&&(b=""),p=b}b=ai(p),f.defaultValue=b,N=f.textContent,N===b&&N!==""&&N!==null&&(f.value=N)}function So(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(f,p,b){var N=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?N?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":N?f.setProperty(p,b):typeof b!="number"||b===0||Ac.has(p)?p==="float"?f.cssFloat=b:f[p]=(""+b).trim():f[p]=b+"px"}function gf(f,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(f=f.style,b!=null){for(var N in b)!b.hasOwnProperty(N)||p!=null&&p.hasOwnProperty(N)||(N.indexOf("--")===0?f.setProperty(N,""):N==="float"?f.cssFloat="":f[N]="");for(var Q in p)N=p[Q],p.hasOwnProperty(Q)&&b[Q]!==N&&Yh(f,Q,N)}else for(var W in p)p.hasOwnProperty(W)&&Yh(f,W,p[W])}function xf(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hc(f){return tA.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var Il=null;function ca(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var mc=null,Fl=null;function Fr(f){var p=Fe(f);if(p&&(f=p.stateNode)){var b=f[xr]||null;e:switch(f=p.stateNode,p.type){case"input":if(Ci(f,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Fn(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var N=b[p];if(N!==f&&N.form===f.form){var Q=N[xr]||null;if(!Q)throw Error(n(90));Ci(N,Q.value,Q.defaultValue,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name)}}for(p=0;p<b.length;p++)N=b[p],N.form===f.form&&pf(N)}break e;case"textarea":Vn(f,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Tl(f,!!b.multiple,p,!1)}}}var Ol=!1;function Jh(f,p,b){if(Ol)return f(p,b);Ol=!0;try{var N=f(p);return N}finally{if(Ol=!1,(mc!==null||Fl!==null)&&(gC(),mc&&(p=mc,f=Fl,Fl=mc=null,Fr(p),f)))for(p=0;p<f.length;p++)Fr(f[p])}}function Mi(f,p){var b=f.stateNode;if(b===null)return null;var N=b[xr]||null;if(N===null)return null;b=N[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(f=f.type,N=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!N;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oo=!1;if(ko)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){oo=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{oo=!1}var jo=null,au=null,pc=null;function vf(){if(pc)return pc;var f,p=au,b=p.length,N,Q="value"in jo?jo.value:jo.textContent,W=Q.length;for(f=0;f<b&&p[f]===Q[f];f++);var de=b-f;for(N=1;N<=de&&p[b-N]===Q[W-N];N++);return pc=Q.slice(f,1<N?1-N:void 0)}function Bo(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function Ui(){return!0}function Pl(){return!1}function ps(f){function p(b,N,Q,W,de){this._reactName=b,this._targetInst=Q,this.type=N,this.nativeEvent=W,this.target=de,this.currentTarget=null;for(var ye in f)f.hasOwnProperty(ye)&&(b=f[ye],this[ye]=b?b(W):W[ye]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?Ui:Pl,this.isPropagationStopped=Pl,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),p}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=ps(bn),Rl=d({},bn,{view:0,detail:0}),bf=ps(Rl),Zu,ed,dl,Qi=d({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==dl&&(dl&&f.type==="mousemove"?(Zu=f.screenX-dl.screenX,ed=f.screenY-dl.screenY):ed=Zu=0,dl=f),Zu)},movementY:function(f){return"movementY"in f?f.movementY:ed}}),gs=ps(Qi),Zh=d({},Qi,{dataTransfer:0}),iu=ps(Zh),Ni=d({},Rl,{relatedTarget:0}),ou=ps(Ni),gc=d({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),rA=ps(gc),td=d({},bn,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),nA=ps(td),yf=d({},bn,{data:0}),rd=ps(yf),lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ad(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=aA[f])?!!p[f]:!1}function cu(){return ad}var e0=d({},Rl,{key:function(f){if(f.key){var p=lu[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=Bo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?nd[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(f){return f.type==="keypress"?Bo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Bo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),xc=ps(e0),uu=d({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=ps(uu),Hi=d({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),sA=ps(Hi),Y=d({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fe=ps(Y),De=d({},Qi,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=ps(De),Ke=d({},bn,{newState:0,oldState:0}),yt=ps(Ke),Lt=[9,13,27,32],Zt=ko&&"CompositionEvent"in window,O=null;ko&&"documentMode"in document&&(O=document.documentMode);var ne=ko&&"TextEvent"in window&&!O,ce=ko&&(!Zt||O&&8<O&&11>=O),be=" ",ze=!1;function ot(f,p){switch(f){case"keyup":return Lt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Or=!1;function yn(f,p){switch(f){case"compositionend":return Ut(p);case"keypress":return p.which!==32?null:(ze=!0,be);case"textInput":return f=p.data,f===be&&ze?null:f;default:return null}}function Xr(f,p){if(Or)return f==="compositionend"||!Zt&&ot(f,p)?(f=vf(),pc=au=jo=null,Or=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ce&&p.locale!=="ko"?null:p.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!zn[f.type]:p==="textarea"}function Ll(f,p,b,N){mc?Fl?Fl.push(N):Fl=[N]:mc=N,p=EC(p,"onChange"),0<p.length&&(b=new su("onChange","change",null,b,N),f.push({event:b,listeners:p}))}var es=null,To=null;function du(f){Q7(f,0)}function iA(f){var p=Ye(f);if(pf(p))return f}function t0(f,p){if(f==="change")return p}var wf=!1;if(ko){var Rs;if(ko){var oA="oninput"in document;if(!oA){var Ef=document.createElement("div");Ef.setAttribute("oninput","return;"),oA=typeof Ef.oninput=="function"}Rs=oA}else Rs=!1;wf=Rs&&(!document.documentMode||9<document.documentMode)}function Cf(){es&&(es.detachEvent("onpropertychange",r0),To=es=null)}function r0(f){if(f.propertyName==="value"&&iA(To)){var p=[];Ll(p,To,f,ca(f)),Jh(du,p)}}function Io(f,p,b){f==="focusin"?(Cf(),es=p,To=b,es.attachEvent("onpropertychange",r0)):f==="focusout"&&Cf()}function Nb(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return iA(To)}function rp(f,p){if(f==="click")return iA(p)}function ix(f,p){if(f==="input"||f==="change")return iA(p)}function Ml(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var si=typeof Object.is=="function"?Object.is:Ml;function lA(f,p){if(si(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),N=Object.keys(p);if(b.length!==N.length)return!1;for(N=0;N<b.length;N++){var Q=b[N];if(!ae.call(p,Q)||!si(f[Q],p[Q]))return!1}return!0}function np(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function id(f,p){var b=np(f);f=0;for(var N;b;){if(b.nodeType===3){if(N=f+b.textContent.length,f<=p&&N>=p)return{node:b,offset:p-f};f=N}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=np(b)}}function cA(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?cA(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function lo(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=Ei(f.document);p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=Ei(f.document)}return p}function _i(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var uA=ko&&"documentMode"in document&&11>=document.documentMode,Fo=null,vc=null,Au=null,bc=!1;function Ga(f,p,b){var N=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;bc||Fo==null||Fo!==Ei(N)||(N=Fo,"selectionStart"in N&&_i(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Au&&lA(Au,N)||(Au=N,N=EC(vc,"onSelect"),0<N.length&&(p=new su("onSelect","select",null,p,b),f.push({event:p,listeners:N}),p.target=Fo)))}function yc(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var xs={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionrun:yc("Transition","TransitionRun"),transitionstart:yc("Transition","TransitionStart"),transitioncancel:yc("Transition","TransitionCancel"),transitionend:yc("Transition","TransitionEnd")},Oo={},Nf={};ko&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function fu(f){if(Oo[f])return Oo[f];if(!xs[f])return f;var p=xs[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in Nf)return Oo[f]=p[b];return f}var n0=fu("animationend"),dA=fu("animationiteration"),AA=fu("animationstart"),fA=fu("transitionrun"),_f=fu("transitionstart"),a0=fu("transitioncancel"),hA=fu("transitionend"),od=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function Ka(f,p){od.set(f,p),Ft(p,[f])}var Al=new WeakMap;function pn(f,p){if(typeof f=="object"&&f!==null){var b=Al.get(f);return b!==void 0?b:(p={value:f,source:p,stack:xa(p)},Al.set(f,p),p)}return{value:f,source:p,stack:xa(p)}}var gn=[],va=0,ts=0;function Ul(){for(var f=va,p=ts=va=0;p<f;){var b=gn[p];gn[p++]=null;var N=gn[p];gn[p++]=null;var Q=gn[p];gn[p++]=null;var W=gn[p];if(gn[p++]=null,N!==null&&Q!==null){var de=N.pending;de===null?Q.next=Q:(Q.next=de.next,de.next=Q),N.pending=Q}W!==0&&ox(b,Q,W)}}function mA(f,p,b,N){gn[va++]=f,gn[va++]=p,gn[va++]=b,gn[va++]=N,ts|=N,f.lanes|=N,f=f.alternate,f!==null&&(f.lanes|=N)}function pA(f,p,b,N){return mA(f,p,b,N),kf(f)}function ld(f,p){return mA(f,null,null,p),kf(f)}function ox(f,p,b){f.lanes|=b;var N=f.alternate;N!==null&&(N.lanes|=b);for(var Q=!1,W=f.return;W!==null;)W.childLanes|=b,N=W.alternate,N!==null&&(N.childLanes|=b),W.tag===22&&(f=W.stateNode,f===null||f._visibility&1||(Q=!0)),f=W,W=W.return;return f.tag===3?(W=f.stateNode,Q&&p!==null&&(Q=31-Pt(b),f=W.hiddenUpdates,N=f[Q],N===null?f[Q]=[p]:N.push(p),p.lane=b|536870912),W):null}function kf(f){if(50<Xb)throw Xb=0,h3=null,Error(n(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var ii={};function Ql(f,p,b,N){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(f,p,b,N){return new Ql(f,p,b,N)}function s0(f){return f=f.prototype,!(!f||!f.isReactComponent)}function hu(f,p){var b=f.alternate;return b===null?(b=Vi(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&65011712,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b.refCleanup=f.refCleanup,b}function ap(f,p){f.flags&=65011714;var b=f.alternate;return b===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,p=b.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function jf(f,p,b,N,Q,W){var de=0;if(N=f,typeof f=="function")s0(f)&&(de=1);else if(typeof f=="string")de=Ihe(f,b,z.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case B:return f=Vi(31,b,p,Q),f.elementType=B,f.lanes=W,f;case g:return cd(b.children,Q,W,p);case x:de=8,Q|=24;break;case v:return f=Vi(12,b,p,Q|2),f.elementType=v,f.lanes=W,f;case k:return f=Vi(13,b,p,Q),f.elementType=k,f.lanes=W,f;case I:return f=Vi(19,b,p,Q),f.elementType=I,f.lanes=W,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:case _:de=10;break e;case w:de=9;break e;case j:de=11;break e;case E:de=14;break e;case S:de=16,N=null;break e}de=29,b=Error(n(130,f===null?"null":typeof f,"")),N=null}return p=Vi(de,b,p,Q),p.elementType=f,p.type=N,p.lanes=W,p}function cd(f,p,b,N){return f=Vi(7,f,N,p),f.lanes=b,f}function lx(f,p,b){return f=Vi(6,f,null,p),f.lanes=b,f}function sp(f,p,b){return p=Vi(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var gA=[],ud=0,i0=null,cx=0,Hl=[],fl=0,Bf=null,dd=1,Ad="";function Tf(f,p){gA[ud++]=cx,gA[ud++]=i0,i0=f,cx=p}function QE(f,p,b){Hl[fl++]=dd,Hl[fl++]=Ad,Hl[fl++]=Bf,Bf=f;var N=dd;f=Ad;var Q=32-Pt(N)-1;N&=~(1<<Q),b+=1;var W=32-Pt(p)+Q;if(30<W){var de=Q-Q%5;W=(N&(1<<de)-1).toString(32),N>>=de,Q-=de,dd=1<<32-Pt(p)+Q|b<<Q|N,Ad=W+f}else dd=1<<W|b<<Q|N,Ad=f}function ip(f){f.return!==null&&(Tf(f,1),QE(f,1,0))}function op(f){for(;f===i0;)i0=gA[--ud],gA[ud]=null,cx=gA[--ud],gA[ud]=null;for(;f===Bf;)Bf=Hl[--fl],Hl[fl]=null,Ad=Hl[--fl],Hl[fl]=null,dd=Hl[--fl],Hl[fl]=null}var Ls=null,qa=null,Un=!1,xA=null,mu=!1,_b=Error(n(519));function If(f){var p=Error(n(418,""));throw o0(pn(p,f)),_b}function HE(f){var p=f.stateNode,b=f.type,N=f.memoizedProps;switch(p[nr]=f,p[xr]=N,b){case"dialog":_n("cancel",p),_n("close",p);break;case"iframe":case"object":case"embed":_n("load",p);break;case"video":case"audio":for(b=0;b<Jb.length;b++)_n(Jb[b],p);break;case"source":_n("error",p);break;case"img":case"image":case"link":_n("error",p),_n("load",p);break;case"details":_n("toggle",p);break;case"input":_n("invalid",p),tu(p,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),eu(p);break;case"select":_n("invalid",p);break;case"textarea":_n("invalid",p),nu(p,N.value,N.defaultValue,N.children),eu(p)}b=N.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||N.suppressHydrationWarning===!0||$7(p.textContent,b)?(N.popover!=null&&(_n("beforetoggle",p),_n("toggle",p)),N.onScroll!=null&&_n("scroll",p),N.onScrollEnd!=null&&_n("scrollend",p),N.onClick!=null&&(p.onclick=CC),p=!0):p=!1,p||If(f)}function fd(f){for(Ls=f.return;Ls;)switch(Ls.tag){case 5:case 13:mu=!1;return;case 27:case 3:mu=!0;return;default:Ls=Ls.return}}function co(f){if(f!==Ls)return!1;if(!Un)return fd(f),Un=!0,!1;var p=f.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=f.type,b=!(b!=="form"&&b!=="button")||B3(f.type,f.memoizedProps)),b=!b),b&&qa&&If(f),fd(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8)if(b=f.data,b==="/$"){if(p===0){qa=yd(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;f=f.nextSibling}qa=null}}else p===27?(p=qa,C0(f.type)?(f=O3,O3=null,qa=f):qa=p):qa=Ls?yd(f.stateNode.nextSibling):null;return!0}function hl(){qa=Ls=null,Un=!1}function VE(){var f=xA;return f!==null&&($l===null?$l=f:$l.push.apply($l,f),xA=null),f}function o0(f){xA===null?xA=[f]:xA.push(f)}var pu=G(null),oi=null,hd=null;function vA(f,p,b){U(pu,p._currentValue),p._currentValue=b}function gu(f){f._currentValue=pu.current,D(pu)}function ux(f,p,b){for(;f!==null;){var N=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,N!==null&&(N.childLanes|=p)):N!==null&&(N.childLanes&p)!==p&&(N.childLanes|=p),f===b)break;f=f.return}}function dx(f,p,b,N){var Q=f.child;for(Q!==null&&(Q.return=f);Q!==null;){var W=Q.dependencies;if(W!==null){var de=Q.child;W=W.firstContext;e:for(;W!==null;){var ye=W;W=Q;for(var Pe=0;Pe<p.length;Pe++)if(ye.context===p[Pe]){W.lanes|=b,ye=W.alternate,ye!==null&&(ye.lanes|=b),ux(W.return,b,f),N||(de=null);break e}W=ye.next}}else if(Q.tag===18){if(de=Q.return,de===null)throw Error(n(341));de.lanes|=b,W=de.alternate,W!==null&&(W.lanes|=b),ux(de,b,f),de=null}else de=Q.child;if(de!==null)de.return=Q;else for(de=Q;de!==null;){if(de===f){de=null;break}if(Q=de.sibling,Q!==null){Q.return=de.return,de=Q;break}de=de.return}Q=de}}function l0(f,p,b,N){f=null;for(var Q=p,W=!1;Q!==null;){if(!W){if((Q.flags&524288)!==0)W=!0;else if((Q.flags&262144)!==0)break}if(Q.tag===10){var de=Q.alternate;if(de===null)throw Error(n(387));if(de=de.memoizedProps,de!==null){var ye=Q.type;si(Q.pendingProps.value,de.value)||(f!==null?f.push(ye):f=[ye])}}else if(Q===oe.current){if(de=Q.alternate,de===null)throw Error(n(387));de.memoizedState.memoizedState!==Q.memoizedState.memoizedState&&(f!==null?f.push(ay):f=[ay])}Q=Q.return}f!==null&&dx(p,f,b,N),p.flags|=262144}function Ax(f){for(f=f.firstContext;f!==null;){if(!si(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function xu(f){oi=f,hd=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Ms(f){return fx(oi,f)}function bA(f,p){return oi===null&&xu(f),fx(f,p)}function fx(f,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},hd===null){if(f===null)throw Error(n(308));hd=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else hd=hd.next=p;return b}var Mj=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(b,N){f.push(N)}};this.abort=function(){p.aborted=!0,f.forEach(function(b){return b()})}},zE=e.unstable_scheduleCallback,Uj=e.unstable_NormalPriority,Us={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sb(){return{controller:new Mj,data:new Map,refCount:0}}function lp(f){f.refCount--,f.refCount===0&&zE(Uj,function(){f.controller.abort()})}var cp=null,kb=0,Ff=0,md=null;function Qj(f,p){if(cp===null){var b=cp=[];kb=0,Ff=y3(),md={status:"pending",value:void 0,then:function(N){b.push(N)}}}return kb++,p.then($E,$E),p}function $E(){if(--kb===0&&cp!==null){md!==null&&(md.status="fulfilled");var f=cp;cp=null,Ff=0,md=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function GE(f,p){var b=[],N={status:"pending",value:null,reason:null,then:function(Q){b.push(Q)}};return f.then(function(){N.status="fulfilled",N.value=p;for(var Q=0;Q<b.length;Q++)(0,b[Q])(p)},function(Q){for(N.status="rejected",N.reason=Q,Q=0;Q<b.length;Q++)(0,b[Q])(void 0)}),N}var T=V.S;V.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Qj(f,p),T!==null&&T(f,p)};var H=G(null);function te(){var f=H.current;return f!==null?f:Ta.pooledCache}function ie(f,p){p===null?U(H,H.current):U(H,p.pool)}function Ae(){var f=te();return f===null?null:{parent:Us._currentValue,pool:f}}var pe=Error(n(460)),ge=Error(n(474)),ve=Error(n(542)),Ee={then:function(){}};function Be(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Ue(){}function st(f,p,b){switch(b=f[b],b===void 0?f.push(p):b!==p&&(p.then(Ue,Ue),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,Bt(f),f;default:if(typeof p.status=="string")p.then(Ue,Ue);else{if(f=Ta,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=p,f.status="pending",f.then(function(N){if(p.status==="pending"){var Q=p;Q.status="fulfilled",Q.value=N}},function(N){if(p.status==="pending"){var Q=p;Q.status="rejected",Q.reason=N}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,Bt(f),f}throw tt=p,pe}}var tt=null;function qe(){if(tt===null)throw Error(n(459));var f=tt;return tt=null,f}function Bt(f){if(f===pe||f===ve)throw Error(n(483))}var pt=!1;function Qe(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function _t(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Tt(f,p,b){var N=f.updateQueue;if(N===null)return null;if(N=N.shared,(da&2)!==0){var Q=N.pending;return Q===null?p.next=p:(p.next=Q.next,Q.next=p),N.pending=p,p=kf(f),ox(f,null,b),p}return mA(f,N,p,b),kf(f)}function kt(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var N=p.lanes;N&=f.pendingLanes,b|=N,p.lanes=b,Ze(f,b)}}function rr(f,p){var b=f.updateQueue,N=f.alternate;if(N!==null&&(N=N.updateQueue,b===N)){var Q=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var de={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};W===null?Q=W=de:W=W.next=de,b=b.next}while(b!==null);W===null?Q=W=p:W=W.next=p}else Q=W=p;b={baseState:N.baseState,firstBaseUpdate:Q,lastBaseUpdate:W,shared:N.shared,callbacks:N.callbacks},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}var Xt=!1;function br(){if(Xt){var f=md;if(f!==null)throw f}}function er(f,p,b,N){Xt=!1;var Q=f.updateQueue;pt=!1;var W=Q.firstBaseUpdate,de=Q.lastBaseUpdate,ye=Q.shared.pending;if(ye!==null){Q.shared.pending=null;var Pe=ye,lt=Pe.next;Pe.next=null,de===null?W=lt:de.next=lt,de=Pe;var St=f.alternate;St!==null&&(St=St.updateQueue,ye=St.lastBaseUpdate,ye!==de&&(ye===null?St.firstBaseUpdate=lt:ye.next=lt,St.lastBaseUpdate=Pe))}if(W!==null){var Ot=Q.baseState;de=0,St=lt=Pe=null,ye=W;do{var At=ye.lane&-536870913,ht=At!==ye.lane;if(ht?(Ln&At)===At:(N&At)===At){At!==0&&At===Ff&&(Xt=!0),St!==null&&(St=St.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Gr=f,Dr=ye;At=p;var ya=b;switch(Dr.tag){case 1:if(Gr=Dr.payload,typeof Gr=="function"){Ot=Gr.call(ya,Ot,At);break e}Ot=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Dr.payload,At=typeof Gr=="function"?Gr.call(ya,Ot,At):Gr,At==null)break e;Ot=d({},Ot,At);break e;case 2:pt=!0}}At=ye.callback,At!==null&&(f.flags|=64,ht&&(f.flags|=8192),ht=Q.callbacks,ht===null?Q.callbacks=[At]:ht.push(At))}else ht={lane:At,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},St===null?(lt=St=ht,Pe=Ot):St=St.next=ht,de|=At;if(ye=ye.next,ye===null){if(ye=Q.shared.pending,ye===null)break;ht=ye,ye=ht.next,ht.next=null,Q.lastBaseUpdate=ht,Q.shared.pending=null}}while(!0);St===null&&(Pe=Ot),Q.baseState=Pe,Q.firstBaseUpdate=lt,Q.lastBaseUpdate=St,W===null&&(Q.shared.lanes=0),b0|=de,f.lanes=de,f.memoizedState=Ot}}function Pn(f,p){if(typeof f!="function")throw Error(n(191,f));f.call(p)}function $n(f,p){var b=f.callbacks;if(b!==null)for(f.callbacks=null,f=0;f<b.length;f++)Pn(b[f],p)}var fn=G(null),ln=G(0);function ra(f,p){f=Vf,U(ln,f),U(fn,p),Vf=f|p.baseLanes}function Gn(){U(ln,Vf),U(fn,fn.current)}function Yr(){Vf=ln.current,D(fn),D(ln)}var ua=0,jr=null,Ur=null,On=null,Rn=!1,li=!1,Qs=!1,rs=0,ns=0,vs=null,Vl=0;function Kn(){throw Error(n(321))}function bs(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!si(f[b],p[b]))return!1;return!0}function wc(f,p,b,N,Q,W){return ua=W,jr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,V.H=f===null||f.memoizedState===null?NU:_U,Qs=!1,W=b(N,Q),Qs=!1,li&&(W=Of(p,b,N,Q)),yA(f),W}function yA(f){V.H=aC;var p=Ur!==null&&Ur.next!==null;if(ua=0,On=Ur=jr=null,Rn=!1,ns=0,vs=null,p)throw Error(n(300));f===null||zi||(f=f.dependencies,f!==null&&Ax(f)&&(zi=!0))}function Of(f,p,b,N){jr=f;var Q=0;do{if(li&&(vs=null),ns=0,li=!1,25<=Q)throw Error(n(301));if(Q+=1,On=Ur=null,f.updateQueue!=null){var W=f.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}V.H=Vfe,W=p(b,N)}while(li);return W}function wA(){var f=V.H,p=f.useState()[0];return p=typeof p.then=="function"?EA(p):p,f=f.useState()[0],(Ur!==null?Ur.memoizedState:null)!==f&&(jr.flags|=1024),p}function Ba(){var f=rs!==0;return rs=0,f}function up(f,p,b){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~b}function hx(f){if(Rn){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}Rn=!1}ua=0,On=Ur=jr=null,li=!1,ns=rs=0,vs=null}function uo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?jr.memoizedState=On=f:On=On.next=f,On}function La(){if(Ur===null){var f=jr.alternate;f=f!==null?f.memoizedState:null}else f=Ur.next;var p=On===null?jr.memoizedState:On.next;if(p!==null)On=p,Ur=f;else{if(f===null)throw jr.alternate===null?Error(n(467)):Error(n(310));Ur=f,f={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},On===null?jr.memoizedState=On=f:On=On.next=f}return On}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function EA(f){var p=ns;return ns+=1,vs===null&&(vs=[]),f=st(vs,f,p),p=jr,(On===null?p.memoizedState:On.next)===null&&(p=p.alternate,V.H=p===null||p.memoizedState===null?NU:_U),f}function Do(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return EA(f);if(f.$$typeof===_)return Ms(f)}throw Error(n(438,String(f)))}function CA(f){var p=null,b=jr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var N=jr.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(p={data:N.data.map(function(Q){return Q.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=Df(),jr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(f),N=0;N<f;N++)b[N]=R;return p.index++,b}function Po(f,p){return typeof p=="function"?p(f):p}function dp(f){var p=La();return c0(p,Ur,f)}function c0(f,p,b){var N=f.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=b;var Q=f.baseQueue,W=N.pending;if(W!==null){if(Q!==null){var de=Q.next;Q.next=W.next,W.next=de}p.baseQueue=Q=W,N.pending=null}if(W=f.baseState,Q===null)f.memoizedState=W;else{p=Q.next;var ye=de=null,Pe=null,lt=p,St=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Ln&Ot)===Ot:(ua&Ot)===Ot){var At=lt.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===Ff&&(St=!0);else if((ua&At)===At){lt=lt.next,At===Ff&&(St=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=Ot,de=W):Pe=Pe.next=Ot,jr.lanes|=At,b0|=At;Ot=lt.action,Qs&&b(W,Ot),W=lt.hasEagerState?lt.eagerState:b(W,Ot)}else At={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=At,de=W):Pe=Pe.next=At,jr.lanes|=Ot,b0|=Ot;lt=lt.next}while(lt!==null&&lt!==p);if(Pe===null?de=W:Pe.next=ye,!si(W,f.memoizedState)&&(zi=!0,St&&(b=md,b!==null)))throw b;f.memoizedState=W,f.baseState=de,f.baseQueue=Pe,N.lastRenderedState=W}return Q===null&&(N.lanes=0),[f.memoizedState,N.dispatch]}function mx(f){var p=La(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var N=b.dispatch,Q=b.pending,W=p.memoizedState;if(Q!==null){b.pending=null;var de=Q=Q.next;do W=f(W,de.action),de=de.next;while(de!==Q);si(W,p.memoizedState)||(zi=!0),p.memoizedState=W,p.baseQueue===null&&(p.baseState=W),b.lastRenderedState=W}return[W,N]}function Ap(f,p,b){var N=jr,Q=La(),W=Un;if(W){if(b===void 0)throw Error(n(407));b=b()}else b=p();var de=!si((Ur||Q).memoizedState,b);de&&(Q.memoizedState=b,zi=!0),Q=Q.queue;var ye=u0.bind(null,N,Q,f);if(f0(2048,8,ye,[f]),Q.getSnapshot!==p||de||On!==null&&On.memoizedState.tag&1){if(N.flags|=2048,gd(9,pp(),fp.bind(null,N,Q,b,p),null),Ta===null)throw Error(n(349));W||(ua&124)!==0||px(N,p,b)}return b}function px(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=jr.updateQueue,p===null?(p=Df(),jr.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function fp(f,p,b,N){p.value=b,p.getSnapshot=N,KE(p)&&qE(f)}function u0(f,p,b){return b(function(){KE(p)&&qE(f)})}function KE(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!si(f,b)}catch{return!0}}function qE(f){var p=ld(f,2);p!==null&&kc(p,f,2)}function hp(f){var p=uo();if(typeof f=="function"){var b=f;if(f=b(),Qs){Mt(!0);try{b()}finally{Mt(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:f},p}function pd(f,p,b,N){return f.baseState=b,c0(f,Ur,typeof N=="function"?N:Po)}function Hj(f,p,b,N,Q){if(nC(f))throw Error(n(485));if(f=p.action,f!==null){var W={payload:Q,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(de){W.listeners.push(de)}};V.T!==null?b(!0):W.isTransition=!1,N(W),b=p.pending,b===null?(W.next=p.pending=W,WE(p,W)):(W.next=b.next,p.pending=b.next=W)}}function WE(f,p){var b=p.action,N=p.payload,Q=f.state;if(p.isTransition){var W=V.T,de={};V.T=de;try{var ye=b(Q,N),Pe=V.S;Pe!==null&&Pe(de,ye),XE(f,p,ye)}catch(lt){d0(f,p,lt)}finally{V.T=W}}else try{W=b(Q,N),XE(f,p,W)}catch(lt){d0(f,p,lt)}}function XE(f,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(N){jb(f,p,N)},function(N){return d0(f,p,N)}):jb(f,p,b)}function jb(f,p,b){p.status="fulfilled",p.value=b,Bb(p),f.state=b,p=f.pending,p!==null&&(b=p.next,b===p?f.pending=null:(b=b.next,p.next=b,WE(f,b)))}function d0(f,p,b){var N=f.pending;if(f.pending=null,N!==null){N=N.next;do p.status="rejected",p.reason=b,Bb(p),p=p.next;while(p!==N)}f.action=null}function Bb(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function Tb(f,p){return p}function mp(f,p){if(Un){var b=Ta.formState;if(b!==null){e:{var N=jr;if(Un){if(qa){t:{for(var Q=qa,W=mu;Q.nodeType!==8;){if(!W){Q=null;break t}if(Q=yd(Q.nextSibling),Q===null){Q=null;break t}}W=Q.data,Q=W==="F!"||W==="F"?Q:null}if(Q){qa=yd(Q.nextSibling),N=Q.data==="F!";break e}}If(N)}N=!1}N&&(p=b[0])}}return b=uo(),b.memoizedState=b.baseState=p,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tb,lastRenderedState:p},b.queue=N,b=wU.bind(null,jr,N),N.dispatch=b,N=hp(!1),W=Vj.bind(null,jr,!1,N.queue),N=uo(),Q={state:p,dispatch:null,action:f,pending:null},N.queue=Q,b=Hj.bind(null,jr,Q,W,b),Q.dispatch=b,N.memoizedState=f,[p,b,!1]}function gx(f){var p=La();return A0(p,Ur,f)}function A0(f,p,b){if(p=c0(f,p,Tb)[0],f=dp(Po)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var N=EA(p)}catch(de){throw de===pe?ve:de}else N=p;p=La();var Q=p.queue,W=Q.dispatch;return b!==p.memoizedState&&(jr.flags|=2048,gd(9,pp(),YE.bind(null,Q,b),null)),[N,W,f]}function YE(f,p){f.action=p}function JE(f){var p=La(),b=Ur;if(b!==null)return A0(p,b,f);La(),p=p.memoizedState,b=La();var N=b.queue.dispatch;return b.memoizedState=f,[p,N,!1]}function gd(f,p,b,N){return f={tag:f,create:b,deps:N,inst:p,next:null},p=jr.updateQueue,p===null&&(p=Df(),jr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=f.next=f:(N=b.next,b.next=f,f.next=N,p.lastEffect=f),f}function pp(){return{destroy:void 0,resource:void 0}}function xx(){return La().memoizedState}function Ec(f,p,b,N){var Q=uo();N=N===void 0?null:N,jr.flags|=f,Q.memoizedState=gd(1|p,pp(),b,N)}function f0(f,p,b,N){var Q=La();N=N===void 0?null:N;var W=Q.memoizedState.inst;Ur!==null&&N!==null&&bs(N,Ur.memoizedState.deps)?Q.memoizedState=gd(p,W,b,N):(jr.flags|=f,Q.memoizedState=gd(1|p,W,b,N))}function Ib(f,p){Ec(8390656,8,f,p)}function ZE(f,p){f0(2048,8,f,p)}function Fb(f,p){return f0(4,2,f,p)}function Pf(f,p){return f0(4,4,f,p)}function eC(f,p){if(typeof p=="function"){f=f();var b=p(f);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Ob(f,p,b){b=b!=null?b.concat([f]):null,f0(4,4,eC.bind(null,p,f),b)}function Db(){}function Pb(f,p){var b=La();p=p===void 0?null:p;var N=b.memoizedState;return p!==null&&bs(p,N[1])?N[0]:(b.memoizedState=[f,p],f)}function tC(f,p){var b=La();p=p===void 0?null:p;var N=b.memoizedState;if(p!==null&&bs(p,N[1]))return N[0];if(N=f(),Qs){Mt(!0);try{f()}finally{Mt(!1)}}return b.memoizedState=[N,p],N}function Rf(f,p,b){return b===void 0||(ua&1073741824)!==0?f.memoizedState=p:(f.memoizedState=b,f=x7(),jr.lanes|=f,b0|=f,b)}function vx(f,p,b,N){return si(b,p)?b:fn.current!==null?(f=Rf(f,b,N),si(f,p)||(zi=!0),f):(ua&42)===0?(zi=!0,f.memoizedState=b):(f=x7(),jr.lanes|=f,b0|=f,p)}function gp(f,p,b,N,Q){var W=q.p;q.p=W!==0&&8>W?W:8;var de=V.T,ye={};V.T=ye,Vj(f,!1,p,b);try{var Pe=Q(),lt=V.S;if(lt!==null&&lt(ye,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var St=GE(Pe,N);Ub(f,p,St,Sc(f))}else Ub(f,p,N,Sc(f))}catch(Ot){Ub(f,p,{then:function(){},status:"rejected",reason:Ot},Sc())}finally{q.p=W,V.T=de}}function xd(){}function vu(f,p,b,N){if(f.tag!==5)throw Error(n(476));var Q=vd(f).queue;gp(f,Q,p,K,b===null?xd:function(){return xp(f),b(N)})}function vd(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:K},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:b},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function xp(f){var p=vd(f).next.queue;Ub(f,p,{},Sc())}function vp(){return Ms(ay)}function Rb(){return La().memoizedState}function rC(){return La().memoizedState}function Lb(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var b=Sc();f=_t(b);var N=Tt(p,f,b);N!==null&&(kc(N,p,b),kt(N,p,b)),p={cache:Sb()},f.payload=p;return}p=p.return}}function Mb(f,p,b){var N=Sc();b={lane:N,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},nC(f)?EU(p,b):(b=pA(f,p,b,N),b!==null&&(kc(b,f,N),CU(b,p,N)))}function wU(f,p,b){var N=Sc();Ub(f,p,b,N)}function Ub(f,p,b,N){var Q={lane:N,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(nC(f))EU(p,Q);else{var W=f.alternate;if(f.lanes===0&&(W===null||W.lanes===0)&&(W=p.lastRenderedReducer,W!==null))try{var de=p.lastRenderedState,ye=W(de,b);if(Q.hasEagerState=!0,Q.eagerState=ye,si(ye,de))return mA(f,p,Q,0),Ta===null&&Ul(),!1}catch{}finally{}if(b=pA(f,p,Q,N),b!==null)return kc(b,f,N),CU(b,p,N),!0}return!1}function Vj(f,p,b,N){if(N={lane:2,revertLane:y3(),action:N,hasEagerState:!1,eagerState:null,next:null},nC(f)){if(p)throw Error(n(479))}else p=pA(f,b,N,2),p!==null&&kc(p,f,2)}function nC(f){var p=f.alternate;return f===jr||p!==null&&p===jr}function EU(f,p){li=Rn=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function CU(f,p,b){if((b&4194048)!==0){var N=p.lanes;N&=f.pendingLanes,b|=N,p.lanes=b,Ze(f,b)}}var aC={readContext:Ms,use:Do,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},NU={readContext:Ms,use:Do,useCallback:function(f,p){return uo().memoizedState=[f,p===void 0?null:p],f},useContext:Ms,useEffect:Ib,useImperativeHandle:function(f,p,b){b=b!=null?b.concat([f]):null,Ec(4194308,4,eC.bind(null,p,f),b)},useLayoutEffect:function(f,p){return Ec(4194308,4,f,p)},useInsertionEffect:function(f,p){Ec(4,2,f,p)},useMemo:function(f,p){var b=uo();p=p===void 0?null:p;var N=f();if(Qs){Mt(!0);try{f()}finally{Mt(!1)}}return b.memoizedState=[N,p],N},useReducer:function(f,p,b){var N=uo();if(b!==void 0){var Q=b(p);if(Qs){Mt(!0);try{b(p)}finally{Mt(!1)}}}else Q=p;return N.memoizedState=N.baseState=Q,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:Q},N.queue=f,f=f.dispatch=Mb.bind(null,jr,f),[N.memoizedState,f]},useRef:function(f){var p=uo();return f={current:f},p.memoizedState=f},useState:function(f){f=hp(f);var p=f.queue,b=wU.bind(null,jr,p);return p.dispatch=b,[f.memoizedState,b]},useDebugValue:Db,useDeferredValue:function(f,p){var b=uo();return Rf(b,f,p)},useTransition:function(){var f=hp(!1);return f=gp.bind(null,jr,f.queue,!0,!1),uo().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,b){var N=jr,Q=uo();if(Un){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Ta===null)throw Error(n(349));(Ln&124)!==0||px(N,p,b)}Q.memoizedState=b;var W={value:b,getSnapshot:p};return Q.queue=W,Ib(u0.bind(null,N,W,f),[f]),N.flags|=2048,gd(9,pp(),fp.bind(null,N,W,b,p),null),b},useId:function(){var f=uo(),p=Ta.identifierPrefix;if(Un){var b=Ad,N=dd;b=(N&~(1<<32-Pt(N)-1)).toString(32)+b,p="«"+p+"R"+b,b=rs++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=Vl++,p="«"+p+"r"+b.toString(32)+"»";return f.memoizedState=p},useHostTransitionStatus:vp,useFormState:mp,useActionState:mp,useOptimistic:function(f){var p=uo();p.memoizedState=p.baseState=f;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Vj.bind(null,jr,!0,b),b.dispatch=p,[f,p]},useMemoCache:CA,useCacheRefresh:function(){return uo().memoizedState=Lb.bind(null,jr)}},_U={readContext:Ms,use:Do,useCallback:Pb,useContext:Ms,useEffect:ZE,useImperativeHandle:Ob,useInsertionEffect:Fb,useLayoutEffect:Pf,useMemo:tC,useReducer:dp,useRef:xx,useState:function(){return dp(Po)},useDebugValue:Db,useDeferredValue:function(f,p){var b=La();return vx(b,Ur.memoizedState,f,p)},useTransition:function(){var f=dp(Po)[0],p=La().memoizedState;return[typeof f=="boolean"?f:EA(f),p]},useSyncExternalStore:Ap,useId:Rb,useHostTransitionStatus:vp,useFormState:gx,useActionState:gx,useOptimistic:function(f,p){var b=La();return pd(b,Ur,f,p)},useMemoCache:CA,useCacheRefresh:rC},Vfe={readContext:Ms,use:Do,useCallback:Pb,useContext:Ms,useEffect:ZE,useImperativeHandle:Ob,useInsertionEffect:Fb,useLayoutEffect:Pf,useMemo:tC,useReducer:mx,useRef:xx,useState:function(){return mx(Po)},useDebugValue:Db,useDeferredValue:function(f,p){var b=La();return Ur===null?Rf(b,f,p):vx(b,Ur.memoizedState,f,p)},useTransition:function(){var f=mx(Po)[0],p=La().memoizedState;return[typeof f=="boolean"?f:EA(f),p]},useSyncExternalStore:Ap,useId:Rb,useHostTransitionStatus:vp,useFormState:JE,useActionState:JE,useOptimistic:function(f,p){var b=La();return Ur!==null?pd(b,Ur,f,p):(b.baseState=f,[f,b.queue.dispatch])},useMemoCache:CA,useCacheRefresh:rC},bx=null,Qb=0;function sC(f){var p=Qb;return Qb+=1,bx===null&&(bx=[]),st(bx,f,p)}function Hb(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function iC(f,p){throw p.$$typeof===A?Error(n(525)):(f=Object.prototype.toString.call(p),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function SU(f){var p=f._init;return p(f._payload)}function kU(f){function p(Xe,He){if(f){var nt=Xe.deletions;nt===null?(Xe.deletions=[He],Xe.flags|=16):nt.push(He)}}function b(Xe,He){if(!f)return null;for(;He!==null;)p(Xe,He),He=He.sibling;return null}function N(Xe){for(var He=new Map;Xe!==null;)Xe.key!==null?He.set(Xe.key,Xe):He.set(Xe.index,Xe),Xe=Xe.sibling;return He}function Q(Xe,He){return Xe=hu(Xe,He),Xe.index=0,Xe.sibling=null,Xe}function W(Xe,He,nt){return Xe.index=nt,f?(nt=Xe.alternate,nt!==null?(nt=nt.index,nt<He?(Xe.flags|=67108866,He):nt):(Xe.flags|=67108866,He)):(Xe.flags|=1048576,He)}function de(Xe){return f&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function ye(Xe,He,nt,jt){return He===null||He.tag!==6?(He=lx(nt,Xe.mode,jt),He.return=Xe,He):(He=Q(He,nt),He.return=Xe,He)}function Pe(Xe,He,nt,jt){var hr=nt.type;return hr===g?St(Xe,He,nt.props.children,jt,nt.key):He!==null&&(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&SU(hr)===He.type)?(He=Q(He,nt.props),Hb(He,nt),He.return=Xe,He):(He=jf(nt.type,nt.key,nt.props,null,Xe.mode,jt),Hb(He,nt),He.return=Xe,He)}function lt(Xe,He,nt,jt){return He===null||He.tag!==4||He.stateNode.containerInfo!==nt.containerInfo||He.stateNode.implementation!==nt.implementation?(He=sp(nt,Xe.mode,jt),He.return=Xe,He):(He=Q(He,nt.children||[]),He.return=Xe,He)}function St(Xe,He,nt,jt,hr){return He===null||He.tag!==7?(He=cd(nt,Xe.mode,jt,hr),He.return=Xe,He):(He=Q(He,nt),He.return=Xe,He)}function Ot(Xe,He,nt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=lx(""+He,Xe.mode,nt),He.return=Xe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return nt=jf(He.type,He.key,He.props,null,Xe.mode,nt),Hb(nt,He),nt.return=Xe,nt;case m:return He=sp(He,Xe.mode,nt),He.return=Xe,He;case S:var jt=He._init;return He=jt(He._payload),Ot(Xe,He,nt)}if(ee(He)||F(He))return He=cd(He,Xe.mode,nt,null),He.return=Xe,He;if(typeof He.then=="function")return Ot(Xe,sC(He),nt);if(He.$$typeof===_)return Ot(Xe,bA(Xe,He),nt);iC(Xe,He)}return null}function At(Xe,He,nt,jt){var hr=He!==null?He.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return hr!==null?null:ye(Xe,He,""+nt,jt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:return nt.key===hr?Pe(Xe,He,nt,jt):null;case m:return nt.key===hr?lt(Xe,He,nt,jt):null;case S:return hr=nt._init,nt=hr(nt._payload),At(Xe,He,nt,jt)}if(ee(nt)||F(nt))return hr!==null?null:St(Xe,He,nt,jt,null);if(typeof nt.then=="function")return At(Xe,He,sC(nt),jt);if(nt.$$typeof===_)return At(Xe,He,bA(Xe,nt),jt);iC(Xe,nt)}return null}function ht(Xe,He,nt,jt,hr){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return Xe=Xe.get(nt)||null,ye(He,Xe,""+jt,hr);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,Pe(He,Xe,jt,hr);case m:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,lt(He,Xe,jt,hr);case S:var wn=jt._init;return jt=wn(jt._payload),ht(Xe,He,nt,jt,hr)}if(ee(jt)||F(jt))return Xe=Xe.get(nt)||null,St(He,Xe,jt,hr,null);if(typeof jt.then=="function")return ht(Xe,He,nt,sC(jt),hr);if(jt.$$typeof===_)return ht(Xe,He,nt,bA(He,jt),hr);iC(He,jt)}return null}function Gr(Xe,He,nt,jt){for(var hr=null,wn=null,Er=He,Rr=He=0,Gi=null;Er!==null&&Rr<nt.length;Rr++){Er.index>Rr?(Gi=Er,Er=null):Gi=Er.sibling;var qn=At(Xe,Er,nt[Rr],jt);if(qn===null){Er===null&&(Er=Gi);break}f&&Er&&qn.alternate===null&&p(Xe,Er),He=W(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn,Er=Gi}if(Rr===nt.length)return b(Xe,Er),Un&&Tf(Xe,Rr),hr;if(Er===null){for(;Rr<nt.length;Rr++)Er=Ot(Xe,nt[Rr],jt),Er!==null&&(He=W(Er,He,Rr),wn===null?hr=Er:wn.sibling=Er,wn=Er);return Un&&Tf(Xe,Rr),hr}for(Er=N(Er);Rr<nt.length;Rr++)Gi=ht(Er,Xe,Rr,nt[Rr],jt),Gi!==null&&(f&&Gi.alternate!==null&&Er.delete(Gi.key===null?Rr:Gi.key),He=W(Gi,He,Rr),wn===null?hr=Gi:wn.sibling=Gi,wn=Gi);return f&&Er.forEach(function(j0){return p(Xe,j0)}),Un&&Tf(Xe,Rr),hr}function Dr(Xe,He,nt,jt){if(nt==null)throw Error(n(151));for(var hr=null,wn=null,Er=He,Rr=He=0,Gi=null,qn=nt.next();Er!==null&&!qn.done;Rr++,qn=nt.next()){Er.index>Rr?(Gi=Er,Er=null):Gi=Er.sibling;var j0=At(Xe,Er,qn.value,jt);if(j0===null){Er===null&&(Er=Gi);break}f&&Er&&j0.alternate===null&&p(Xe,Er),He=W(j0,He,Rr),wn===null?hr=j0:wn.sibling=j0,wn=j0,Er=Gi}if(qn.done)return b(Xe,Er),Un&&Tf(Xe,Rr),hr;if(Er===null){for(;!qn.done;Rr++,qn=nt.next())qn=Ot(Xe,qn.value,jt),qn!==null&&(He=W(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn);return Un&&Tf(Xe,Rr),hr}for(Er=N(Er);!qn.done;Rr++,qn=nt.next())qn=ht(Er,Xe,Rr,qn.value,jt),qn!==null&&(f&&qn.alternate!==null&&Er.delete(qn.key===null?Rr:qn.key),He=W(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn);return f&&Er.forEach(function(zhe){return p(Xe,zhe)}),Un&&Tf(Xe,Rr),hr}function ya(Xe,He,nt,jt){if(typeof nt=="object"&&nt!==null&&nt.type===g&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:e:{for(var hr=nt.key;He!==null;){if(He.key===hr){if(hr=nt.type,hr===g){if(He.tag===7){b(Xe,He.sibling),jt=Q(He,nt.props.children),jt.return=Xe,Xe=jt;break e}}else if(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&SU(hr)===He.type){b(Xe,He.sibling),jt=Q(He,nt.props),Hb(jt,nt),jt.return=Xe,Xe=jt;break e}b(Xe,He);break}else p(Xe,He);He=He.sibling}nt.type===g?(jt=cd(nt.props.children,Xe.mode,jt,nt.key),jt.return=Xe,Xe=jt):(jt=jf(nt.type,nt.key,nt.props,null,Xe.mode,jt),Hb(jt,nt),jt.return=Xe,Xe=jt)}return de(Xe);case m:e:{for(hr=nt.key;He!==null;){if(He.key===hr)if(He.tag===4&&He.stateNode.containerInfo===nt.containerInfo&&He.stateNode.implementation===nt.implementation){b(Xe,He.sibling),jt=Q(He,nt.children||[]),jt.return=Xe,Xe=jt;break e}else{b(Xe,He);break}else p(Xe,He);He=He.sibling}jt=sp(nt,Xe.mode,jt),jt.return=Xe,Xe=jt}return de(Xe);case S:return hr=nt._init,nt=hr(nt._payload),ya(Xe,He,nt,jt)}if(ee(nt))return Gr(Xe,He,nt,jt);if(F(nt)){if(hr=F(nt),typeof hr!="function")throw Error(n(150));return nt=hr.call(nt),Dr(Xe,He,nt,jt)}if(typeof nt.then=="function")return ya(Xe,He,sC(nt),jt);if(nt.$$typeof===_)return ya(Xe,He,bA(Xe,nt),jt);iC(Xe,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,He!==null&&He.tag===6?(b(Xe,He.sibling),jt=Q(He,nt),jt.return=Xe,Xe=jt):(b(Xe,He),jt=lx(nt,Xe.mode,jt),jt.return=Xe,Xe=jt),de(Xe)):b(Xe,He)}return function(Xe,He,nt,jt){try{Qb=0;var hr=ya(Xe,He,nt,jt);return bx=null,hr}catch(Er){if(Er===pe||Er===ve)throw Er;var wn=Vi(29,Er,null,Xe.mode);return wn.lanes=jt,wn.return=Xe,wn}finally{}}}var yx=kU(!0),jU=kU(!1),bu=G(null),NA=null;function h0(f){var p=f.alternate;U(Si,Si.current&1),U(bu,f),NA===null&&(p===null||fn.current!==null||p.memoizedState!==null)&&(NA=f)}function BU(f){if(f.tag===22){if(U(Si,Si.current),U(bu,f),NA===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(NA=f)}}else m0()}function m0(){U(Si,Si.current),U(bu,bu.current)}function Lf(f){D(bu),NA===f&&(NA=null),D(Si)}var Si=G(0);function oC(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||F3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function zj(f,p,b,N){p=f.memoizedState,b=b(N,p),b=b==null?p:d({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var $j={enqueueSetState:function(f,p,b){f=f._reactInternals;var N=Sc(),Q=_t(N);Q.payload=p,b!=null&&(Q.callback=b),p=Tt(f,Q,N),p!==null&&(kc(p,f,N),kt(p,f,N))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var N=Sc(),Q=_t(N);Q.tag=1,Q.payload=p,b!=null&&(Q.callback=b),p=Tt(f,Q,N),p!==null&&(kc(p,f,N),kt(p,f,N))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=Sc(),N=_t(b);N.tag=2,p!=null&&(N.callback=p),p=Tt(f,N,b),p!==null&&(kc(p,f,b),kt(p,f,b))}};function TU(f,p,b,N,Q,W,de){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(N,W,de):p.prototype&&p.prototype.isPureReactComponent?!lA(b,N)||!lA(Q,W):!0}function IU(f,p,b,N){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,N),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,N),p.state!==f&&$j.enqueueReplaceState(p,p.state,null)}function bp(f,p){var b=p;if("ref"in p){b={};for(var N in p)N!=="ref"&&(b[N]=p[N])}if(f=f.defaultProps){b===p&&(b=d({},b));for(var Q in f)b[Q]===void 0&&(b[Q]=f[Q])}return b}var lC=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function FU(f){lC(f)}function OU(f){console.error(f)}function DU(f){lC(f)}function cC(f,p){try{var b=f.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(N){setTimeout(function(){throw N})}}function PU(f,p,b){try{var N=f.onCaughtError;N(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(Q){setTimeout(function(){throw Q})}}function Gj(f,p,b){return b=_t(b),b.tag=3,b.payload={element:null},b.callback=function(){cC(f,p)},b}function RU(f){return f=_t(f),f.tag=3,f}function LU(f,p,b,N){var Q=b.type.getDerivedStateFromError;if(typeof Q=="function"){var W=N.value;f.payload=function(){return Q(W)},f.callback=function(){PU(p,b,N)}}var de=b.stateNode;de!==null&&typeof de.componentDidCatch=="function"&&(f.callback=function(){PU(p,b,N),typeof Q!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var ye=N.stack;this.componentDidCatch(N.value,{componentStack:ye!==null?ye:""})})}function zfe(f,p,b,N,Q){if(b.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(p=b.alternate,p!==null&&l0(p,b,Q,!0),b=bu.current,b!==null){switch(b.tag){case 13:return NA===null?p3():b.alternate===null&&ys===0&&(ys=3),b.flags&=-257,b.flags|=65536,b.lanes=Q,N===Ee?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([N]):p.add(N),x3(f,N,Q)),!1;case 22:return b.flags|=65536,N===Ee?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([N])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([N]):b.add(N)),x3(f,N,Q)),!1}throw Error(n(435,b.tag))}return x3(f,N,Q),p3(),!1}if(Un)return p=bu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=Q,N!==_b&&(f=Error(n(422),{cause:N}),o0(pn(f,b)))):(N!==_b&&(p=Error(n(423),{cause:N}),o0(pn(p,b))),f=f.current.alternate,f.flags|=65536,Q&=-Q,f.lanes|=Q,N=pn(N,b),Q=Gj(f.stateNode,N,Q),rr(f,Q),ys!==4&&(ys=2)),!1;var W=Error(n(520),{cause:N});if(W=pn(W,b),Wb===null?Wb=[W]:Wb.push(W),ys!==4&&(ys=2),p===null)return!0;N=pn(N,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,f=Q&-Q,b.lanes|=f,f=Gj(b.stateNode,N,f),rr(b,f),!1;case 1:if(p=b.type,W=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(y0===null||!y0.has(W))))return b.flags|=65536,Q&=-Q,b.lanes|=Q,Q=RU(Q),LU(Q,f,b,N),rr(b,Q),!1}b=b.return}while(b!==null);return!1}var MU=Error(n(461)),zi=!1;function Ao(f,p,b,N){p.child=f===null?jU(p,null,b,N):yx(p,f.child,b,N)}function UU(f,p,b,N,Q){b=b.render;var W=p.ref;if("ref"in N){var de={};for(var ye in N)ye!=="ref"&&(de[ye]=N[ye])}else de=N;return xu(p),N=wc(f,p,b,de,W,Q),ye=Ba(),f!==null&&!zi?(up(f,p,Q),Mf(f,p,Q)):(Un&&ye&&ip(p),p.flags|=1,Ao(f,p,N,Q),p.child)}function QU(f,p,b,N,Q){if(f===null){var W=b.type;return typeof W=="function"&&!s0(W)&&W.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=W,HU(f,p,W,N,Q)):(f=jf(b.type,null,N,p,p.mode,Q),f.ref=p.ref,f.return=p,p.child=f)}if(W=f.child,!e3(f,Q)){var de=W.memoizedProps;if(b=b.compare,b=b!==null?b:lA,b(de,N)&&f.ref===p.ref)return Mf(f,p,Q)}return p.flags|=1,f=hu(W,N),f.ref=p.ref,f.return=p,p.child=f}function HU(f,p,b,N,Q){if(f!==null){var W=f.memoizedProps;if(lA(W,N)&&f.ref===p.ref)if(zi=!1,p.pendingProps=N=W,e3(f,Q))(f.flags&131072)!==0&&(zi=!0);else return p.lanes=f.lanes,Mf(f,p,Q)}return Kj(f,p,b,N,Q)}function VU(f,p,b){var N=p.pendingProps,Q=N.children,W=f!==null?f.memoizedState:null;if(N.mode==="hidden"){if((p.flags&128)!==0){if(N=W!==null?W.baseLanes|b:b,f!==null){for(Q=p.child=f.child,W=0;Q!==null;)W=W|Q.lanes|Q.childLanes,Q=Q.sibling;p.childLanes=W&~N}else p.childLanes=0,p.child=null;return zU(f,p,N,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&ie(p,W!==null?W.cachePool:null),W!==null?ra(p,W):Gn(),BU(p);else return p.lanes=p.childLanes=536870912,zU(f,p,W!==null?W.baseLanes|b:b,b)}else W!==null?(ie(p,W.cachePool),ra(p,W),m0(),p.memoizedState=null):(f!==null&&ie(p,null),Gn(),m0());return Ao(f,p,Q,b),p.child}function zU(f,p,b,N){var Q=te();return Q=Q===null?null:{parent:Us._currentValue,pool:Q},p.memoizedState={baseLanes:b,cachePool:Q},f!==null&&ie(p,null),Gn(),BU(p),f!==null&&l0(f,p,N,!0),null}function uC(f,p){var b=p.ref;if(b===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(f===null||f.ref!==b)&&(p.flags|=4194816)}}function Kj(f,p,b,N,Q){return xu(p),b=wc(f,p,b,N,void 0,Q),N=Ba(),f!==null&&!zi?(up(f,p,Q),Mf(f,p,Q)):(Un&&N&&ip(p),p.flags|=1,Ao(f,p,b,Q),p.child)}function $U(f,p,b,N,Q,W){return xu(p),p.updateQueue=null,b=Of(p,N,b,Q),yA(f),N=Ba(),f!==null&&!zi?(up(f,p,W),Mf(f,p,W)):(Un&&N&&ip(p),p.flags|=1,Ao(f,p,b,W),p.child)}function GU(f,p,b,N,Q){if(xu(p),p.stateNode===null){var W=ii,de=b.contextType;typeof de=="object"&&de!==null&&(W=Ms(de)),W=new b(N,W),p.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=$j,p.stateNode=W,W._reactInternals=p,W=p.stateNode,W.props=N,W.state=p.memoizedState,W.refs={},Qe(p),de=b.contextType,W.context=typeof de=="object"&&de!==null?Ms(de):ii,W.state=p.memoizedState,de=b.getDerivedStateFromProps,typeof de=="function"&&(zj(p,b,de,N),W.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(de=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),de!==W.state&&$j.enqueueReplaceState(W,W.state,null),er(p,N,W,Q),br(),W.state=p.memoizedState),typeof W.componentDidMount=="function"&&(p.flags|=4194308),N=!0}else if(f===null){W=p.stateNode;var ye=p.memoizedProps,Pe=bp(b,ye);W.props=Pe;var lt=W.context,St=b.contextType;de=ii,typeof St=="object"&&St!==null&&(de=Ms(St));var Ot=b.getDerivedStateFromProps;St=typeof Ot=="function"||typeof W.getSnapshotBeforeUpdate=="function",ye=p.pendingProps!==ye,St||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ye||lt!==de)&&IU(p,W,N,de),pt=!1;var At=p.memoizedState;W.state=At,er(p,N,W,Q),br(),lt=p.memoizedState,ye||At!==lt||pt?(typeof Ot=="function"&&(zj(p,b,Ot,N),lt=p.memoizedState),(Pe=pt||TU(p,b,Pe,N,At,lt,de))?(St||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(p.flags|=4194308)):(typeof W.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=N,p.memoizedState=lt),W.props=N,W.state=lt,W.context=de,N=Pe):(typeof W.componentDidMount=="function"&&(p.flags|=4194308),N=!1)}else{W=p.stateNode,Ve(f,p),de=p.memoizedProps,St=bp(b,de),W.props=St,Ot=p.pendingProps,At=W.context,lt=b.contextType,Pe=ii,typeof lt=="object"&&lt!==null&&(Pe=Ms(lt)),ye=b.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==Ot||At!==Pe)&&IU(p,W,N,Pe),pt=!1,At=p.memoizedState,W.state=At,er(p,N,W,Q),br();var ht=p.memoizedState;de!==Ot||At!==ht||pt||f!==null&&f.dependencies!==null&&Ax(f.dependencies)?(typeof ye=="function"&&(zj(p,b,ye,N),ht=p.memoizedState),(St=pt||TU(p,b,St,N,At,ht,Pe)||f!==null&&f.dependencies!==null&&Ax(f.dependencies))?(lt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(N,ht,Pe),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(N,ht,Pe)),typeof W.componentDidUpdate=="function"&&(p.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof W.componentDidUpdate!="function"||de===f.memoizedProps&&At===f.memoizedState||(p.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===f.memoizedProps&&At===f.memoizedState||(p.flags|=1024),p.memoizedProps=N,p.memoizedState=ht),W.props=N,W.state=ht,W.context=Pe,N=St):(typeof W.componentDidUpdate!="function"||de===f.memoizedProps&&At===f.memoizedState||(p.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===f.memoizedProps&&At===f.memoizedState||(p.flags|=1024),N=!1)}return W=N,uC(f,p),N=(p.flags&128)!==0,W||N?(W=p.stateNode,b=N&&typeof b.getDerivedStateFromError!="function"?null:W.render(),p.flags|=1,f!==null&&N?(p.child=yx(p,f.child,null,Q),p.child=yx(p,null,b,Q)):Ao(f,p,b,Q),p.memoizedState=W.state,f=p.child):f=Mf(f,p,Q),f}function KU(f,p,b,N){return hl(),p.flags|=256,Ao(f,p,b,N),p.child}var qj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wj(f){return{baseLanes:f,cachePool:Ae()}}function Xj(f,p,b){return f=f!==null?f.childLanes&~b:0,p&&(f|=yu),f}function qU(f,p,b){var N=p.pendingProps,Q=!1,W=(p.flags&128)!==0,de;if((de=W)||(de=f!==null&&f.memoizedState===null?!1:(Si.current&2)!==0),de&&(Q=!0,p.flags&=-129),de=(p.flags&32)!==0,p.flags&=-33,f===null){if(Un){if(Q?h0(p):m0(),Un){var ye=qa,Pe;if(Pe=ye){e:{for(Pe=ye,ye=mu;Pe.nodeType!==8;){if(!ye){ye=null;break e}if(Pe=yd(Pe.nextSibling),Pe===null){ye=null;break e}}ye=Pe}ye!==null?(p.memoizedState={dehydrated:ye,treeContext:Bf!==null?{id:dd,overflow:Ad}:null,retryLane:536870912,hydrationErrors:null},Pe=Vi(18,null,null,0),Pe.stateNode=ye,Pe.return=p,p.child=Pe,Ls=p,qa=null,Pe=!0):Pe=!1}Pe||If(p)}if(ye=p.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return F3(ye)?p.lanes=32:p.lanes=536870912,null;Lf(p)}return ye=N.children,N=N.fallback,Q?(m0(),Q=p.mode,ye=dC({mode:"hidden",children:ye},Q),N=cd(N,Q,b,null),ye.return=p,N.return=p,ye.sibling=N,p.child=ye,Q=p.child,Q.memoizedState=Wj(b),Q.childLanes=Xj(f,de,b),p.memoizedState=qj,N):(h0(p),Yj(p,ye))}if(Pe=f.memoizedState,Pe!==null&&(ye=Pe.dehydrated,ye!==null)){if(W)p.flags&256?(h0(p),p.flags&=-257,p=Jj(f,p,b)):p.memoizedState!==null?(m0(),p.child=f.child,p.flags|=128,p=null):(m0(),Q=N.fallback,ye=p.mode,N=dC({mode:"visible",children:N.children},ye),Q=cd(Q,ye,b,null),Q.flags|=2,N.return=p,Q.return=p,N.sibling=Q,p.child=N,yx(p,f.child,null,b),N=p.child,N.memoizedState=Wj(b),N.childLanes=Xj(f,de,b),p.memoizedState=qj,p=Q);else if(h0(p),F3(ye)){if(de=ye.nextSibling&&ye.nextSibling.dataset,de)var lt=de.dgst;de=lt,N=Error(n(419)),N.stack="",N.digest=de,o0({value:N,source:null,stack:null}),p=Jj(f,p,b)}else if(zi||l0(f,p,b,!1),de=(b&f.childLanes)!==0,zi||de){if(de=Ta,de!==null&&(N=b&-b,N=(N&42)!==0?1:mt(N),N=(N&(de.suspendedLanes|b))!==0?0:N,N!==0&&N!==Pe.retryLane))throw Pe.retryLane=N,ld(f,N),kc(de,f,N),MU;ye.data==="$?"||p3(),p=Jj(f,p,b)}else ye.data==="$?"?(p.flags|=192,p.child=f.child,p=null):(f=Pe.treeContext,qa=yd(ye.nextSibling),Ls=p,Un=!0,xA=null,mu=!1,f!==null&&(Hl[fl++]=dd,Hl[fl++]=Ad,Hl[fl++]=Bf,dd=f.id,Ad=f.overflow,Bf=p),p=Yj(p,N.children),p.flags|=4096);return p}return Q?(m0(),Q=N.fallback,ye=p.mode,Pe=f.child,lt=Pe.sibling,N=hu(Pe,{mode:"hidden",children:N.children}),N.subtreeFlags=Pe.subtreeFlags&65011712,lt!==null?Q=hu(lt,Q):(Q=cd(Q,ye,b,null),Q.flags|=2),Q.return=p,N.return=p,N.sibling=Q,p.child=N,N=Q,Q=p.child,ye=f.child.memoizedState,ye===null?ye=Wj(b):(Pe=ye.cachePool,Pe!==null?(lt=Us._currentValue,Pe=Pe.parent!==lt?{parent:lt,pool:lt}:Pe):Pe=Ae(),ye={baseLanes:ye.baseLanes|b,cachePool:Pe}),Q.memoizedState=ye,Q.childLanes=Xj(f,de,b),p.memoizedState=qj,N):(h0(p),b=f.child,f=b.sibling,b=hu(b,{mode:"visible",children:N.children}),b.return=p,b.sibling=null,f!==null&&(de=p.deletions,de===null?(p.deletions=[f],p.flags|=16):de.push(f)),p.child=b,p.memoizedState=null,b)}function Yj(f,p){return p=dC({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function dC(f,p){return f=Vi(22,f,null,p),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function Jj(f,p,b){return yx(p,f.child,null,b),f=Yj(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function WU(f,p,b){f.lanes|=p;var N=f.alternate;N!==null&&(N.lanes|=p),ux(f.return,p,b)}function Zj(f,p,b,N,Q){var W=f.memoizedState;W===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:N,tail:b,tailMode:Q}:(W.isBackwards=p,W.rendering=null,W.renderingStartTime=0,W.last=N,W.tail=b,W.tailMode=Q)}function XU(f,p,b){var N=p.pendingProps,Q=N.revealOrder,W=N.tail;if(Ao(f,p,N.children,b),N=Si.current,(N&2)!==0)N=N&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&WU(f,b,p);else if(f.tag===19)WU(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}N&=1}switch(U(Si,N),Q){case"forwards":for(b=p.child,Q=null;b!==null;)f=b.alternate,f!==null&&oC(f)===null&&(Q=b),b=b.sibling;b=Q,b===null?(Q=p.child,p.child=null):(Q=b.sibling,b.sibling=null),Zj(p,!1,Q,b,W);break;case"backwards":for(b=null,Q=p.child,p.child=null;Q!==null;){if(f=Q.alternate,f!==null&&oC(f)===null){p.child=Q;break}f=Q.sibling,Q.sibling=b,b=Q,Q=f}Zj(p,!0,b,null,W);break;case"together":Zj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Mf(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),b0|=p.lanes,(b&p.childLanes)===0)if(f!==null){if(l0(f,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(n(153));if(p.child!==null){for(f=p.child,b=hu(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=hu(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function e3(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&Ax(f)))}function $fe(f,p,b){switch(p.tag){case 3:se(p,p.stateNode.containerInfo),vA(p,Us,f.memoizedState.cache),hl();break;case 27:case 5:ue(p);break;case 4:se(p,p.stateNode.containerInfo);break;case 10:vA(p,p.type,p.memoizedProps.value);break;case 13:var N=p.memoizedState;if(N!==null)return N.dehydrated!==null?(h0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?qU(f,p,b):(h0(p),f=Mf(f,p,b),f!==null?f.sibling:null);h0(p);break;case 19:var Q=(f.flags&128)!==0;if(N=(b&p.childLanes)!==0,N||(l0(f,p,b,!1),N=(b&p.childLanes)!==0),Q){if(N)return XU(f,p,b);p.flags|=128}if(Q=p.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),U(Si,Si.current),N)break;return null;case 22:case 23:return p.lanes=0,VU(f,p,b);case 24:vA(p,Us,f.memoizedState.cache)}return Mf(f,p,b)}function YU(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps)zi=!0;else{if(!e3(f,b)&&(p.flags&128)===0)return zi=!1,$fe(f,p,b);zi=(f.flags&131072)!==0}else zi=!1,Un&&(p.flags&1048576)!==0&&QE(p,cx,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var N=p.elementType,Q=N._init;if(N=Q(N._payload),p.type=N,typeof N=="function")s0(N)?(f=bp(N,f),p.tag=1,p=GU(null,p,N,f,b)):(p.tag=0,p=Kj(null,p,N,f,b));else{if(N!=null){if(Q=N.$$typeof,Q===j){p.tag=11,p=UU(null,p,N,f,b);break e}else if(Q===E){p.tag=14,p=QU(null,p,N,f,b);break e}}throw p=M(N)||N,Error(n(306,p,""))}}return p;case 0:return Kj(f,p,p.type,p.pendingProps,b);case 1:return N=p.type,Q=bp(N,p.pendingProps),GU(f,p,N,Q,b);case 3:e:{if(se(p,p.stateNode.containerInfo),f===null)throw Error(n(387));N=p.pendingProps;var W=p.memoizedState;Q=W.element,Ve(f,p),er(p,N,null,b);var de=p.memoizedState;if(N=de.cache,vA(p,Us,N),N!==W.cache&&dx(p,[Us],b,!0),br(),N=de.element,W.isDehydrated)if(W={element:N,isDehydrated:!1,cache:de.cache},p.updateQueue.baseState=W,p.memoizedState=W,p.flags&256){p=KU(f,p,N,b);break e}else if(N!==Q){Q=pn(Error(n(424)),p),o0(Q),p=KU(f,p,N,b);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(qa=yd(f.firstChild),Ls=p,Un=!0,xA=null,mu=!0,b=jU(p,null,N,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(hl(),N===Q){p=Mf(f,p,b);break e}Ao(f,p,N,b)}p=p.child}return p;case 26:return uC(f,p),f===null?(b=t9(p.type,null,p.pendingProps,null))?p.memoizedState=b:Un||(b=p.type,f=p.pendingProps,N=NC(re.current).createElement(b),N[nr]=p,N[xr]=f,ho(N,b,f),Ge(N),p.stateNode=N):p.memoizedState=t9(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return ue(p),f===null&&Un&&(N=p.stateNode=J7(p.type,p.pendingProps,re.current),Ls=p,mu=!0,Q=qa,C0(p.type)?(O3=Q,qa=yd(N.firstChild)):qa=Q),Ao(f,p,p.pendingProps.children,b),uC(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Un&&((Q=N=qa)&&(N=vhe(N,p.type,p.pendingProps,mu),N!==null?(p.stateNode=N,Ls=p,qa=yd(N.firstChild),mu=!1,Q=!0):Q=!1),Q||If(p)),ue(p),Q=p.type,W=p.pendingProps,de=f!==null?f.memoizedProps:null,N=W.children,B3(Q,W)?N=null:de!==null&&B3(Q,de)&&(p.flags|=32),p.memoizedState!==null&&(Q=wc(f,p,wA,null,null,b),ay._currentValue=Q),uC(f,p),Ao(f,p,N,b),p.child;case 6:return f===null&&Un&&((f=b=qa)&&(b=bhe(b,p.pendingProps,mu),b!==null?(p.stateNode=b,Ls=p,qa=null,f=!0):f=!1),f||If(p)),null;case 13:return qU(f,p,b);case 4:return se(p,p.stateNode.containerInfo),N=p.pendingProps,f===null?p.child=yx(p,null,N,b):Ao(f,p,N,b),p.child;case 11:return UU(f,p,p.type,p.pendingProps,b);case 7:return Ao(f,p,p.pendingProps,b),p.child;case 8:return Ao(f,p,p.pendingProps.children,b),p.child;case 12:return Ao(f,p,p.pendingProps.children,b),p.child;case 10:return N=p.pendingProps,vA(p,p.type,N.value),Ao(f,p,N.children,b),p.child;case 9:return Q=p.type._context,N=p.pendingProps.children,xu(p),Q=Ms(Q),N=N(Q),p.flags|=1,Ao(f,p,N,b),p.child;case 14:return QU(f,p,p.type,p.pendingProps,b);case 15:return HU(f,p,p.type,p.pendingProps,b);case 19:return XU(f,p,b);case 31:return N=p.pendingProps,b=p.mode,N={mode:N.mode,children:N.children},f===null?(b=dC(N,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=hu(f.child,N),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return VU(f,p,b);case 24:return xu(p),N=Ms(Us),f===null?(Q=te(),Q===null&&(Q=Ta,W=Sb(),Q.pooledCache=W,W.refCount++,W!==null&&(Q.pooledCacheLanes|=b),Q=W),p.memoizedState={parent:N,cache:Q},Qe(p),vA(p,Us,Q)):((f.lanes&b)!==0&&(Ve(f,p),er(p,null,null,b),br()),Q=f.memoizedState,W=p.memoizedState,Q.parent!==N?(Q={parent:N,cache:N},p.memoizedState=Q,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=Q),vA(p,Us,N)):(N=W.cache,vA(p,Us,N),N!==Q.cache&&dx(p,[Us],b,!0))),Ao(f,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function Uf(f){f.flags|=4}function JU(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!i9(p)){if(p=bu.current,p!==null&&((Ln&4194048)===Ln?NA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||p!==NA))throw tt=Ee,ge;f.flags|=8192}}function AC(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?mn():536870912,f.lanes|=p,Nx|=p)}function Vb(f,p){if(!Un)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var N=null;b!==null;)b.alternate!==null&&(N=b),b=b.sibling;N===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:N.sibling=null}}function as(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,N=0;if(p)for(var Q=f.child;Q!==null;)b|=Q.lanes|Q.childLanes,N|=Q.subtreeFlags&65011712,N|=Q.flags&65011712,Q.return=f,Q=Q.sibling;else for(Q=f.child;Q!==null;)b|=Q.lanes|Q.childLanes,N|=Q.subtreeFlags,N|=Q.flags,Q.return=f,Q=Q.sibling;return f.subtreeFlags|=N,f.childLanes=b,p}function Gfe(f,p,b){var N=p.pendingProps;switch(op(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(p),null;case 1:return as(p),null;case 3:return b=p.stateNode,N=null,f!==null&&(N=f.memoizedState.cache),p.memoizedState.cache!==N&&(p.flags|=2048),gu(Us),le(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(co(p)?Uf(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,VE())),as(p),null;case 26:return b=p.memoizedState,f===null?(Uf(p),b!==null?(as(p),JU(p,b)):(as(p),p.flags&=-16777217)):b?b!==f.memoizedState?(Uf(p),as(p),JU(p,b)):(as(p),p.flags&=-16777217):(f.memoizedProps!==N&&Uf(p),as(p),p.flags&=-16777217),null;case 27:ke(p),b=re.current;var Q=p.type;if(f!==null&&p.stateNode!=null)f.memoizedProps!==N&&Uf(p);else{if(!N){if(p.stateNode===null)throw Error(n(166));return as(p),null}f=z.current,co(p)?HE(p):(f=J7(Q,N,b),p.stateNode=f,Uf(p))}return as(p),null;case 5:if(ke(p),b=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==N&&Uf(p);else{if(!N){if(p.stateNode===null)throw Error(n(166));return as(p),null}if(f=z.current,co(p))HE(p);else{switch(Q=NC(re.current),f){case 1:f=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:f=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":f=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":f=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":f=Q.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof N.is=="string"?Q.createElement("select",{is:N.is}):Q.createElement("select"),N.multiple?f.multiple=!0:N.size&&(f.size=N.size);break;default:f=typeof N.is=="string"?Q.createElement(b,{is:N.is}):Q.createElement(b)}}f[nr]=p,f[xr]=N;e:for(Q=p.child;Q!==null;){if(Q.tag===5||Q.tag===6)f.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===p)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===p)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}p.stateNode=f;e:switch(ho(f,b,N),b){case"button":case"input":case"select":case"textarea":f=!!N.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Uf(p)}}return as(p),p.flags&=-16777217,null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==N&&Uf(p);else{if(typeof N!="string"&&p.stateNode===null)throw Error(n(166));if(f=re.current,co(p)){if(f=p.stateNode,b=p.memoizedProps,N=null,Q=Ls,Q!==null)switch(Q.tag){case 27:case 5:N=Q.memoizedProps}f[nr]=p,f=!!(f.nodeValue===b||N!==null&&N.suppressHydrationWarning===!0||$7(f.nodeValue,b)),f||If(p)}else f=NC(f).createTextNode(N),f[nr]=p,p.stateNode=f}return as(p),null;case 13:if(N=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Q=co(p),N!==null&&N.dehydrated!==null){if(f===null){if(!Q)throw Error(n(318));if(Q=p.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(n(317));Q[nr]=p}else hl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;as(p),Q=!1}else Q=VE(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=Q),Q=!0;if(!Q)return p.flags&256?(Lf(p),p):(Lf(p),null)}if(Lf(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=N!==null,f=f!==null&&f.memoizedState!==null,b){N=p.child,Q=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(Q=N.alternate.memoizedState.cachePool.pool);var W=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(W=N.memoizedState.cachePool.pool),W!==Q&&(N.flags|=2048)}return b!==f&&b&&(p.child.flags|=8192),AC(p,p.updateQueue),as(p),null;case 4:return le(),f===null&&N3(p.stateNode.containerInfo),as(p),null;case 10:return gu(p.type),as(p),null;case 19:if(D(Si),Q=p.memoizedState,Q===null)return as(p),null;if(N=(p.flags&128)!==0,W=Q.rendering,W===null)if(N)Vb(Q,!1);else{if(ys!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(W=oC(f),W!==null){for(p.flags|=128,Vb(Q,!1),f=W.updateQueue,p.updateQueue=f,AC(p,f),p.subtreeFlags=0,f=b,b=p.child;b!==null;)ap(b,f),b=b.sibling;return U(Si,Si.current&1|2),p.child}f=f.sibling}Q.tail!==null&&Te()>mC&&(p.flags|=128,N=!0,Vb(Q,!1),p.lanes=4194304)}else{if(!N)if(f=oC(W),f!==null){if(p.flags|=128,N=!0,f=f.updateQueue,p.updateQueue=f,AC(p,f),Vb(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!W.alternate&&!Un)return as(p),null}else 2*Te()-Q.renderingStartTime>mC&&b!==536870912&&(p.flags|=128,N=!0,Vb(Q,!1),p.lanes=4194304);Q.isBackwards?(W.sibling=p.child,p.child=W):(f=Q.last,f!==null?f.sibling=W:p.child=W,Q.last=W)}return Q.tail!==null?(p=Q.tail,Q.rendering=p,Q.tail=p.sibling,Q.renderingStartTime=Te(),p.sibling=null,f=Si.current,U(Si,N?f&1|2:f&1),p):(as(p),null);case 22:case 23:return Lf(p),Yr(),N=p.memoizedState!==null,f!==null?f.memoizedState!==null!==N&&(p.flags|=8192):N&&(p.flags|=8192),N?(b&536870912)!==0&&(p.flags&128)===0&&(as(p),p.subtreeFlags&6&&(p.flags|=8192)):as(p),b=p.updateQueue,b!==null&&AC(p,b.retryQueue),b=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),N=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(N=p.memoizedState.cachePool.pool),N!==b&&(p.flags|=2048),f!==null&&D(H),null;case 24:return b=null,f!==null&&(b=f.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),gu(Us),as(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function Kfe(f,p){switch(op(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return gu(Us),le(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return ke(p),null;case 13:if(Lf(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(n(340));hl()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return D(Si),null;case 4:return le(),null;case 10:return gu(p.type),null;case 22:case 23:return Lf(p),Yr(),f!==null&&D(H),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return gu(Us),null;case 25:return null;default:return null}}function ZU(f,p){switch(op(p),p.tag){case 3:gu(Us),le();break;case 26:case 27:case 5:ke(p);break;case 4:le();break;case 13:Lf(p);break;case 19:D(Si);break;case 10:gu(p.type);break;case 22:case 23:Lf(p),Yr(),f!==null&&D(H);break;case 24:gu(Us)}}function zb(f,p){try{var b=p.updateQueue,N=b!==null?b.lastEffect:null;if(N!==null){var Q=N.next;b=Q;do{if((b.tag&f)===f){N=void 0;var W=b.create,de=b.inst;N=W(),de.destroy=N}b=b.next}while(b!==Q)}}catch(ye){Ca(p,p.return,ye)}}function p0(f,p,b){try{var N=p.updateQueue,Q=N!==null?N.lastEffect:null;if(Q!==null){var W=Q.next;N=W;do{if((N.tag&f)===f){var de=N.inst,ye=de.destroy;if(ye!==void 0){de.destroy=void 0,Q=p;var Pe=b,lt=ye;try{lt()}catch(St){Ca(Q,Pe,St)}}}N=N.next}while(N!==W)}}catch(St){Ca(p,p.return,St)}}function e7(f){var p=f.updateQueue;if(p!==null){var b=f.stateNode;try{$n(p,b)}catch(N){Ca(f,f.return,N)}}}function t7(f,p,b){b.props=bp(f.type,f.memoizedProps),b.state=f.memoizedState;try{b.componentWillUnmount()}catch(N){Ca(f,p,N)}}function $b(f,p){try{var b=f.ref;if(b!==null){switch(f.tag){case 26:case 27:case 5:var N=f.stateNode;break;case 30:N=f.stateNode;break;default:N=f.stateNode}typeof b=="function"?f.refCleanup=b(N):b.current=N}}catch(Q){Ca(f,p,Q)}}function _A(f,p){var b=f.ref,N=f.refCleanup;if(b!==null)if(typeof N=="function")try{N()}catch(Q){Ca(f,p,Q)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Q){Ca(f,p,Q)}else b.current=null}function r7(f){var p=f.type,b=f.memoizedProps,N=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&N.focus();break e;case"img":b.src?N.src=b.src:b.srcSet&&(N.srcset=b.srcSet)}}catch(Q){Ca(f,f.return,Q)}}function t3(f,p,b){try{var N=f.stateNode;hhe(N,f.type,b,p),N[xr]=p}catch(Q){Ca(f,f.return,Q)}}function n7(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&C0(f.type)||f.tag===4}function r3(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||n7(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&C0(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function n3(f,p,b){var N=f.tag;if(N===5||N===6)f=f.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(f,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(f),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=CC));else if(N!==4&&(N===27&&C0(f.type)&&(b=f.stateNode,p=null),f=f.child,f!==null))for(n3(f,p,b),f=f.sibling;f!==null;)n3(f,p,b),f=f.sibling}function fC(f,p,b){var N=f.tag;if(N===5||N===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(N!==4&&(N===27&&C0(f.type)&&(b=f.stateNode),f=f.child,f!==null))for(fC(f,p,b),f=f.sibling;f!==null;)fC(f,p,b),f=f.sibling}function a7(f){var p=f.stateNode,b=f.memoizedProps;try{for(var N=f.type,Q=p.attributes;Q.length;)p.removeAttributeNode(Q[0]);ho(p,N,b),p[nr]=f,p[xr]=b}catch(W){Ca(f,f.return,W)}}var Qf=!1,Hs=!1,a3=!1,s7=typeof WeakSet=="function"?WeakSet:Set,$i=null;function qfe(f,p){if(f=f.containerInfo,k3=TC,f=lo(f),_i(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var N=b.getSelection&&b.getSelection();if(N&&N.rangeCount!==0){b=N.anchorNode;var Q=N.anchorOffset,W=N.focusNode;N=N.focusOffset;try{b.nodeType,W.nodeType}catch{b=null;break e}var de=0,ye=-1,Pe=-1,lt=0,St=0,Ot=f,At=null;t:for(;;){for(var ht;Ot!==b||Q!==0&&Ot.nodeType!==3||(ye=de+Q),Ot!==W||N!==0&&Ot.nodeType!==3||(Pe=de+N),Ot.nodeType===3&&(de+=Ot.nodeValue.length),(ht=Ot.firstChild)!==null;)At=Ot,Ot=ht;for(;;){if(Ot===f)break t;if(At===b&&++lt===Q&&(ye=de),At===W&&++St===N&&(Pe=de),(ht=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ht}b=ye===-1||Pe===-1?null:{start:ye,end:Pe}}else b=null}b=b||{start:0,end:0}}else b=null;for(j3={focusedElem:f,selectionRange:b},TC=!1,$i=p;$i!==null;)if(p=$i,f=p.child,(p.subtreeFlags&1024)!==0&&f!==null)f.return=p,$i=f;else for(;$i!==null;){switch(p=$i,W=p.alternate,f=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&W!==null){f=void 0,b=p,Q=W.memoizedProps,W=W.memoizedState,N=b.stateNode;try{var Gr=bp(b.type,Q,b.elementType===b.type);f=N.getSnapshotBeforeUpdate(Gr,W),N.__reactInternalSnapshotBeforeUpdate=f}catch(Dr){Ca(b,b.return,Dr)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,b=f.nodeType,b===9)I3(f);else if(b===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":I3(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=p.sibling,f!==null){f.return=p.return,$i=f;break}$i=p.return}}function i7(f,p,b){var N=b.flags;switch(b.tag){case 0:case 11:case 15:g0(f,b),N&4&&zb(5,b);break;case 1:if(g0(f,b),N&4)if(f=b.stateNode,p===null)try{f.componentDidMount()}catch(de){Ca(b,b.return,de)}else{var Q=bp(b.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(Q,p,f.__reactInternalSnapshotBeforeUpdate)}catch(de){Ca(b,b.return,de)}}N&64&&e7(b),N&512&&$b(b,b.return);break;case 3:if(g0(f,b),N&64&&(f=b.updateQueue,f!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{$n(f,p)}catch(de){Ca(b,b.return,de)}}break;case 27:p===null&&N&4&&a7(b);case 26:case 5:g0(f,b),p===null&&N&4&&r7(b),N&512&&$b(b,b.return);break;case 12:g0(f,b);break;case 13:g0(f,b),N&4&&c7(f,b),N&64&&(f=b.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(b=nhe.bind(null,b),yhe(f,b))));break;case 22:if(N=b.memoizedState!==null||Qf,!N){p=p!==null&&p.memoizedState!==null||Hs,Q=Qf;var W=Hs;Qf=N,(Hs=p)&&!W?x0(f,b,(b.subtreeFlags&8772)!==0):g0(f,b),Qf=Q,Hs=W}break;case 30:break;default:g0(f,b)}}function o7(f){var p=f.alternate;p!==null&&(f.alternate=null,o7(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&we(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Wa=null,zl=!1;function Hf(f,p,b){for(b=b.child;b!==null;)l7(f,p,b),b=b.sibling}function l7(f,p,b){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(gt,b)}catch{}switch(b.tag){case 26:Hs||_A(b,p),Hf(f,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Hs||_A(b,p);var N=Wa,Q=zl;C0(b.type)&&(Wa=b.stateNode,zl=!1),Hf(f,p,b),ey(b.stateNode),Wa=N,zl=Q;break;case 5:Hs||_A(b,p);case 6:if(N=Wa,Q=zl,Wa=null,Hf(f,p,b),Wa=N,zl=Q,Wa!==null)if(zl)try{(Wa.nodeType===9?Wa.body:Wa.nodeName==="HTML"?Wa.ownerDocument.body:Wa).removeChild(b.stateNode)}catch(W){Ca(b,p,W)}else try{Wa.removeChild(b.stateNode)}catch(W){Ca(b,p,W)}break;case 18:Wa!==null&&(zl?(f=Wa,X7(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,b.stateNode),ly(f)):X7(Wa,b.stateNode));break;case 4:N=Wa,Q=zl,Wa=b.stateNode.containerInfo,zl=!0,Hf(f,p,b),Wa=N,zl=Q;break;case 0:case 11:case 14:case 15:Hs||p0(2,b,p),Hs||p0(4,b,p),Hf(f,p,b);break;case 1:Hs||(_A(b,p),N=b.stateNode,typeof N.componentWillUnmount=="function"&&t7(b,p,N)),Hf(f,p,b);break;case 21:Hf(f,p,b);break;case 22:Hs=(N=Hs)||b.memoizedState!==null,Hf(f,p,b),Hs=N;break;default:Hf(f,p,b)}}function c7(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{ly(f)}catch(b){Ca(p,p.return,b)}}function Wfe(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new s7),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new s7),p;default:throw Error(n(435,f.tag))}}function s3(f,p){var b=Wfe(f);p.forEach(function(N){var Q=ahe.bind(null,f,N);b.has(N)||(b.add(N),N.then(Q,Q))})}function Cc(f,p){var b=p.deletions;if(b!==null)for(var N=0;N<b.length;N++){var Q=b[N],W=f,de=p,ye=de;e:for(;ye!==null;){switch(ye.tag){case 27:if(C0(ye.type)){Wa=ye.stateNode,zl=!1;break e}break;case 5:Wa=ye.stateNode,zl=!1;break e;case 3:case 4:Wa=ye.stateNode.containerInfo,zl=!0;break e}ye=ye.return}if(Wa===null)throw Error(n(160));l7(W,de,Q),Wa=null,zl=!1,W=Q.alternate,W!==null&&(W.return=null),Q.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)u7(p,f),p=p.sibling}var bd=null;function u7(f,p){var b=f.alternate,N=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Cc(p,f),Nc(f),N&4&&(p0(3,f,f.return),zb(3,f),p0(5,f,f.return));break;case 1:Cc(p,f),Nc(f),N&512&&(Hs||b===null||_A(b,b.return)),N&64&&Qf&&(f=f.updateQueue,f!==null&&(N=f.callbacks,N!==null&&(b=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=b===null?N:b.concat(N))));break;case 26:var Q=bd;if(Cc(p,f),Nc(f),N&512&&(Hs||b===null||_A(b,b.return)),N&4){var W=b!==null?b.memoizedState:null;if(N=f.memoizedState,b===null)if(N===null)if(f.stateNode===null){e:{N=f.type,b=f.memoizedProps,Q=Q.ownerDocument||Q;t:switch(N){case"title":W=Q.getElementsByTagName("title")[0],(!W||W[Ce]||W[nr]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=Q.createElement(N),Q.head.insertBefore(W,Q.querySelector("head > title"))),ho(W,N,b),W[nr]=f,Ge(W),N=W;break e;case"link":var de=a9("link","href",Q).get(N+(b.href||""));if(de){for(var ye=0;ye<de.length;ye++)if(W=de[ye],W.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&W.getAttribute("rel")===(b.rel==null?null:b.rel)&&W.getAttribute("title")===(b.title==null?null:b.title)&&W.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){de.splice(ye,1);break t}}W=Q.createElement(N),ho(W,N,b),Q.head.appendChild(W);break;case"meta":if(de=a9("meta","content",Q).get(N+(b.content||""))){for(ye=0;ye<de.length;ye++)if(W=de[ye],W.getAttribute("content")===(b.content==null?null:""+b.content)&&W.getAttribute("name")===(b.name==null?null:b.name)&&W.getAttribute("property")===(b.property==null?null:b.property)&&W.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&W.getAttribute("charset")===(b.charSet==null?null:b.charSet)){de.splice(ye,1);break t}}W=Q.createElement(N),ho(W,N,b),Q.head.appendChild(W);break;default:throw Error(n(468,N))}W[nr]=f,Ge(W),N=W}f.stateNode=N}else s9(Q,f.type,f.stateNode);else f.stateNode=n9(Q,N,f.memoizedProps);else W!==N?(W===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):W.count--,N===null?s9(Q,f.type,f.stateNode):n9(Q,N,f.memoizedProps)):N===null&&f.stateNode!==null&&t3(f,f.memoizedProps,b.memoizedProps)}break;case 27:Cc(p,f),Nc(f),N&512&&(Hs||b===null||_A(b,b.return)),b!==null&&N&4&&t3(f,f.memoizedProps,b.memoizedProps);break;case 5:if(Cc(p,f),Nc(f),N&512&&(Hs||b===null||_A(b,b.return)),f.flags&32){Q=f.stateNode;try{So(Q,"")}catch(ht){Ca(f,f.return,ht)}}N&4&&f.stateNode!=null&&(Q=f.memoizedProps,t3(f,Q,b!==null?b.memoizedProps:Q)),N&1024&&(a3=!0);break;case 6:if(Cc(p,f),Nc(f),N&4){if(f.stateNode===null)throw Error(n(162));N=f.memoizedProps,b=f.stateNode;try{b.nodeValue=N}catch(ht){Ca(f,f.return,ht)}}break;case 3:if(kC=null,Q=bd,bd=_C(p.containerInfo),Cc(p,f),bd=Q,Nc(f),N&4&&b!==null&&b.memoizedState.isDehydrated)try{ly(p.containerInfo)}catch(ht){Ca(f,f.return,ht)}a3&&(a3=!1,d7(f));break;case 4:N=bd,bd=_C(f.stateNode.containerInfo),Cc(p,f),Nc(f),bd=N;break;case 12:Cc(p,f),Nc(f);break;case 13:Cc(p,f),Nc(f),f.child.flags&8192&&f.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(d3=Te()),N&4&&(N=f.updateQueue,N!==null&&(f.updateQueue=null,s3(f,N)));break;case 22:Q=f.memoizedState!==null;var Pe=b!==null&&b.memoizedState!==null,lt=Qf,St=Hs;if(Qf=lt||Q,Hs=St||Pe,Cc(p,f),Hs=St,Qf=lt,Nc(f),N&8192)e:for(p=f.stateNode,p._visibility=Q?p._visibility&-2:p._visibility|1,Q&&(b===null||Pe||Qf||Hs||yp(f)),b=null,p=f;;){if(p.tag===5||p.tag===26){if(b===null){Pe=b=p;try{if(W=Pe.stateNode,Q)de=W.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none";else{ye=Pe.stateNode;var Ot=Pe.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;ye.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ht){Ca(Pe,Pe.return,ht)}}}else if(p.tag===6){if(b===null){Pe=p;try{Pe.stateNode.nodeValue=Q?"":Pe.memoizedProps}catch(ht){Ca(Pe,Pe.return,ht)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}N&4&&(N=f.updateQueue,N!==null&&(b=N.retryQueue,b!==null&&(N.retryQueue=null,s3(f,b))));break;case 19:Cc(p,f),Nc(f),N&4&&(N=f.updateQueue,N!==null&&(f.updateQueue=null,s3(f,N)));break;case 30:break;case 21:break;default:Cc(p,f),Nc(f)}}function Nc(f){var p=f.flags;if(p&2){try{for(var b,N=f.return;N!==null;){if(n7(N)){b=N;break}N=N.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var Q=b.stateNode,W=r3(f);fC(f,W,Q);break;case 5:var de=b.stateNode;b.flags&32&&(So(de,""),b.flags&=-33);var ye=r3(f);fC(f,ye,de);break;case 3:case 4:var Pe=b.stateNode.containerInfo,lt=r3(f);n3(f,lt,Pe);break;default:throw Error(n(161))}}catch(St){Ca(f,f.return,St)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function d7(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;d7(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function g0(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)i7(f,p.alternate,p),p=p.sibling}function yp(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:p0(4,p,p.return),yp(p);break;case 1:_A(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&t7(p,p.return,b),yp(p);break;case 27:ey(p.stateNode);case 26:case 5:_A(p,p.return),yp(p);break;case 22:p.memoizedState===null&&yp(p);break;case 30:yp(p);break;default:yp(p)}f=f.sibling}}function x0(f,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var N=p.alternate,Q=f,W=p,de=W.flags;switch(W.tag){case 0:case 11:case 15:x0(Q,W,b),zb(4,W);break;case 1:if(x0(Q,W,b),N=W,Q=N.stateNode,typeof Q.componentDidMount=="function")try{Q.componentDidMount()}catch(lt){Ca(N,N.return,lt)}if(N=W,Q=N.updateQueue,Q!==null){var ye=N.stateNode;try{var Pe=Q.shared.hiddenCallbacks;if(Pe!==null)for(Q.shared.hiddenCallbacks=null,Q=0;Q<Pe.length;Q++)Pn(Pe[Q],ye)}catch(lt){Ca(N,N.return,lt)}}b&&de&64&&e7(W),$b(W,W.return);break;case 27:a7(W);case 26:case 5:x0(Q,W,b),b&&N===null&&de&4&&r7(W),$b(W,W.return);break;case 12:x0(Q,W,b);break;case 13:x0(Q,W,b),b&&de&4&&c7(Q,W);break;case 22:W.memoizedState===null&&x0(Q,W,b),$b(W,W.return);break;case 30:break;default:x0(Q,W,b)}p=p.sibling}}function i3(f,p){var b=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==b&&(f!=null&&f.refCount++,b!=null&&lp(b))}function o3(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&lp(f))}function SA(f,p,b,N){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)A7(f,p,b,N),p=p.sibling}function A7(f,p,b,N){var Q=p.flags;switch(p.tag){case 0:case 11:case 15:SA(f,p,b,N),Q&2048&&zb(9,p);break;case 1:SA(f,p,b,N);break;case 3:SA(f,p,b,N),Q&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&lp(f)));break;case 12:if(Q&2048){SA(f,p,b,N),f=p.stateNode;try{var W=p.memoizedProps,de=W.id,ye=W.onPostCommit;typeof ye=="function"&&ye(de,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Pe){Ca(p,p.return,Pe)}}else SA(f,p,b,N);break;case 13:SA(f,p,b,N);break;case 23:break;case 22:W=p.stateNode,de=p.alternate,p.memoizedState!==null?W._visibility&2?SA(f,p,b,N):Gb(f,p):W._visibility&2?SA(f,p,b,N):(W._visibility|=2,wx(f,p,b,N,(p.subtreeFlags&10256)!==0)),Q&2048&&i3(de,p);break;case 24:SA(f,p,b,N),Q&2048&&o3(p.alternate,p);break;default:SA(f,p,b,N)}}function wx(f,p,b,N,Q){for(Q=Q&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var W=f,de=p,ye=b,Pe=N,lt=de.flags;switch(de.tag){case 0:case 11:case 15:wx(W,de,ye,Pe,Q),zb(8,de);break;case 23:break;case 22:var St=de.stateNode;de.memoizedState!==null?St._visibility&2?wx(W,de,ye,Pe,Q):Gb(W,de):(St._visibility|=2,wx(W,de,ye,Pe,Q)),Q&&lt&2048&&i3(de.alternate,de);break;case 24:wx(W,de,ye,Pe,Q),Q&&lt&2048&&o3(de.alternate,de);break;default:wx(W,de,ye,Pe,Q)}p=p.sibling}}function Gb(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=f,N=p,Q=N.flags;switch(N.tag){case 22:Gb(b,N),Q&2048&&i3(N.alternate,N);break;case 24:Gb(b,N),Q&2048&&o3(N.alternate,N);break;default:Gb(b,N)}p=p.sibling}}var Kb=8192;function Ex(f){if(f.subtreeFlags&Kb)for(f=f.child;f!==null;)f7(f),f=f.sibling}function f7(f){switch(f.tag){case 26:Ex(f),f.flags&Kb&&f.memoizedState!==null&&Ohe(bd,f.memoizedState,f.memoizedProps);break;case 5:Ex(f);break;case 3:case 4:var p=bd;bd=_C(f.stateNode.containerInfo),Ex(f),bd=p;break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=Kb,Kb=16777216,Ex(f),Kb=p):Ex(f));break;default:Ex(f)}}function h7(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function qb(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var N=p[b];$i=N,p7(N,f)}h7(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)m7(f),f=f.sibling}function m7(f){switch(f.tag){case 0:case 11:case 15:qb(f),f.flags&2048&&p0(9,f,f.return);break;case 3:qb(f);break;case 12:qb(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,hC(f)):qb(f);break;default:qb(f)}}function hC(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var N=p[b];$i=N,p7(N,f)}h7(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:p0(8,p,p.return),hC(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,hC(p));break;default:hC(p)}f=f.sibling}}function p7(f,p){for(;$i!==null;){var b=$i;switch(b.tag){case 0:case 11:case 15:p0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var N=b.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:lp(b.memoizedState.cache)}if(N=b.child,N!==null)N.return=b,$i=N;else e:for(b=f;$i!==null;){N=$i;var Q=N.sibling,W=N.return;if(o7(N),N===b){$i=null;break e}if(Q!==null){Q.return=W,$i=Q;break e}$i=W}}}var Xfe={getCacheForType:function(f){var p=Ms(Us),b=p.data.get(f);return b===void 0&&(b=f(),p.data.set(f,b)),b}},Yfe=typeof WeakMap=="function"?WeakMap:Map,da=0,Ta=null,Nn=null,Ln=0,Aa=0,_c=null,v0=!1,Cx=!1,l3=!1,Vf=0,ys=0,b0=0,wp=0,c3=0,yu=0,Nx=0,Wb=null,$l=null,u3=!1,d3=0,mC=1/0,pC=null,y0=null,fo=0,w0=null,_x=null,Sx=0,A3=0,f3=null,g7=null,Xb=0,h3=null;function Sc(){if((da&2)!==0&&Ln!==0)return Ln&-Ln;if(V.T!==null){var f=Ff;return f!==0?f:y3()}return xt()}function x7(){yu===0&&(yu=(Ln&536870912)===0||Un?fs():536870912);var f=bu.current;return f!==null&&(f.flags|=32),yu}function kc(f,p,b){(f===Ta&&(Aa===2||Aa===9)||f.cancelPendingCommit!==null)&&(kx(f,0),E0(f,Ln,yu,!1)),ja(f,b),((da&2)===0||f!==Ta)&&(f===Ta&&((da&2)===0&&(wp|=b),ys===4&&E0(f,Ln,yu,!1)),kA(f))}function v7(f,p,b){if((da&6)!==0)throw Error(n(327));var N=!b&&(p&124)===0&&(p&f.expiredLanes)===0||In(f,p),Q=N?ehe(f,p):g3(f,p,!0),W=N;do{if(Q===0){Cx&&!N&&E0(f,p,0,!1);break}else{if(b=f.current.alternate,W&&!Jfe(b)){Q=g3(f,p,!1),W=!1;continue}if(Q===2){if(W=p,f.errorRecoveryDisabledLanes&W)var de=0;else de=f.pendingLanes&-536870913,de=de!==0?de:de&536870912?536870912:0;if(de!==0){p=de;e:{var ye=f;Q=Wb;var Pe=ye.current.memoizedState.isDehydrated;if(Pe&&(kx(ye,de).flags|=256),de=g3(ye,de,!1),de!==2){if(l3&&!Pe){ye.errorRecoveryDisabledLanes|=W,wp|=W,Q=4;break e}W=$l,$l=Q,W!==null&&($l===null?$l=W:$l.push.apply($l,W))}Q=de}if(W=!1,Q!==2)continue}}if(Q===1){kx(f,0),E0(f,p,0,!0);break}e:{switch(N=f,W=Q,W){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:E0(N,p,yu,!v0);break e;case 2:$l=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(Q=d3+300-Te(),10<Q)){if(E0(N,p,yu,!v0),$r(N,0,!0)!==0)break e;N.timeoutHandle=q7(b7.bind(null,N,b,$l,pC,u3,p,yu,wp,Nx,v0,W,2,-0,0),Q);break e}b7(N,b,$l,pC,u3,p,yu,wp,Nx,v0,W,0,-0,0)}}break}while(!0);kA(f)}function b7(f,p,b,N,Q,W,de,ye,Pe,lt,St,Ot,At,ht){if(f.timeoutHandle=-1,Ot=p.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(ny={stylesheets:null,count:0,unsuspend:Fhe},f7(p),Ot=Dhe(),Ot!==null)){f.cancelPendingCommit=Ot(S7.bind(null,f,p,W,b,N,Q,de,ye,Pe,St,1,At,ht)),E0(f,W,de,!lt);return}S7(f,p,W,b,N,Q,de,ye,Pe)}function Jfe(f){for(var p=f;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var N=0;N<b.length;N++){var Q=b[N],W=Q.getSnapshot;Q=Q.value;try{if(!si(W(),Q))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function E0(f,p,b,N){p&=~c3,p&=~wp,f.suspendedLanes|=p,f.pingedLanes&=~p,N&&(f.warmLanes|=p),N=f.expirationTimes;for(var Q=p;0<Q;){var W=31-Pt(Q),de=1<<W;N[W]=-1,Q&=~de}b!==0&&gr(f,b,p)}function gC(){return(da&6)===0?(Yb(0),!1):!0}function m3(){if(Nn!==null){if(Aa===0)var f=Nn.return;else f=Nn,hd=oi=null,hx(f),bx=null,Qb=0,f=Nn;for(;f!==null;)ZU(f.alternate,f),f=f.return;Nn=null}}function kx(f,p){var b=f.timeoutHandle;b!==-1&&(f.timeoutHandle=-1,phe(b)),b=f.cancelPendingCommit,b!==null&&(f.cancelPendingCommit=null,b()),m3(),Ta=f,Nn=b=hu(f.current,null),Ln=p,Aa=0,_c=null,v0=!1,Cx=In(f,p),l3=!1,Nx=yu=c3=wp=b0=ys=0,$l=Wb=null,u3=!1,(p&8)!==0&&(p|=p&32);var N=f.entangledLanes;if(N!==0)for(f=f.entanglements,N&=p;0<N;){var Q=31-Pt(N),W=1<<Q;p|=f[Q],N&=~W}return Vf=p,Ul(),b}function y7(f,p){jr=null,V.H=aC,p===pe||p===ve?(p=qe(),Aa=3):p===ge?(p=qe(),Aa=4):Aa=p===MU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,_c=p,Nn===null&&(ys=1,cC(f,pn(p,f.current)))}function w7(){var f=V.H;return V.H=aC,f===null?aC:f}function E7(){var f=V.A;return V.A=Xfe,f}function p3(){ys=4,v0||(Ln&4194048)!==Ln&&bu.current!==null||(Cx=!0),(b0&134217727)===0&&(wp&134217727)===0||Ta===null||E0(Ta,Ln,yu,!1)}function g3(f,p,b){var N=da;da|=2;var Q=w7(),W=E7();(Ta!==f||Ln!==p)&&(pC=null,kx(f,p)),p=!1;var de=ys;e:do try{if(Aa!==0&&Nn!==null){var ye=Nn,Pe=_c;switch(Aa){case 8:m3(),de=6;break e;case 3:case 2:case 9:case 6:bu.current===null&&(p=!0);var lt=Aa;if(Aa=0,_c=null,jx(f,ye,Pe,lt),b&&Cx){de=0;break e}break;default:lt=Aa,Aa=0,_c=null,jx(f,ye,Pe,lt)}}Zfe(),de=ys;break}catch(St){y7(f,St)}while(!0);return p&&f.shellSuspendCounter++,hd=oi=null,da=N,V.H=Q,V.A=W,Nn===null&&(Ta=null,Ln=0,Ul()),de}function Zfe(){for(;Nn!==null;)C7(Nn)}function ehe(f,p){var b=da;da|=2;var N=w7(),Q=E7();Ta!==f||Ln!==p?(pC=null,mC=Te()+500,kx(f,p)):Cx=In(f,p);e:do try{if(Aa!==0&&Nn!==null){p=Nn;var W=_c;t:switch(Aa){case 1:Aa=0,_c=null,jx(f,p,W,1);break;case 2:case 9:if(Be(W)){Aa=0,_c=null,N7(p);break}p=function(){Aa!==2&&Aa!==9||Ta!==f||(Aa=7),kA(f)},W.then(p,p);break e;case 3:Aa=7;break e;case 4:Aa=5;break e;case 7:Be(W)?(Aa=0,_c=null,N7(p)):(Aa=0,_c=null,jx(f,p,W,7));break;case 5:var de=null;switch(Nn.tag){case 26:de=Nn.memoizedState;case 5:case 27:var ye=Nn;if(!de||i9(de)){Aa=0,_c=null;var Pe=ye.sibling;if(Pe!==null)Nn=Pe;else{var lt=ye.return;lt!==null?(Nn=lt,xC(lt)):Nn=null}break t}}Aa=0,_c=null,jx(f,p,W,5);break;case 6:Aa=0,_c=null,jx(f,p,W,6);break;case 8:m3(),ys=6;break e;default:throw Error(n(462))}}the();break}catch(St){y7(f,St)}while(!0);return hd=oi=null,V.H=N,V.A=Q,da=b,Nn!==null?0:(Ta=null,Ln=0,Ul(),ys)}function the(){for(;Nn!==null&&!_e();)C7(Nn)}function C7(f){var p=YU(f.alternate,f,Vf);f.memoizedProps=f.pendingProps,p===null?xC(f):Nn=p}function N7(f){var p=f,b=p.alternate;switch(p.tag){case 15:case 0:p=$U(b,p,p.pendingProps,p.type,void 0,Ln);break;case 11:p=$U(b,p,p.pendingProps,p.type.render,p.ref,Ln);break;case 5:hx(p);default:ZU(b,p),p=Nn=ap(p,Vf),p=YU(b,p,Vf)}f.memoizedProps=f.pendingProps,p===null?xC(f):Nn=p}function jx(f,p,b,N){hd=oi=null,hx(p),bx=null,Qb=0;var Q=p.return;try{if(zfe(f,Q,p,b,Ln)){ys=1,cC(f,pn(b,f.current)),Nn=null;return}}catch(W){if(Q!==null)throw Nn=Q,W;ys=1,cC(f,pn(b,f.current)),Nn=null;return}p.flags&32768?(Un||N===1?f=!0:Cx||(Ln&536870912)!==0?f=!1:(v0=f=!0,(N===2||N===9||N===3||N===6)&&(N=bu.current,N!==null&&N.tag===13&&(N.flags|=16384))),_7(p,f)):xC(p)}function xC(f){var p=f;do{if((p.flags&32768)!==0){_7(p,v0);return}f=p.return;var b=Gfe(p.alternate,p,Vf);if(b!==null){Nn=b;return}if(p=p.sibling,p!==null){Nn=p;return}Nn=p=f}while(p!==null);ys===0&&(ys=5)}function _7(f,p){do{var b=Kfe(f.alternate,f);if(b!==null){b.flags&=32767,Nn=b;return}if(b=f.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(f=f.sibling,f!==null)){Nn=f;return}Nn=f=b}while(f!==null);ys=6,Nn=null}function S7(f,p,b,N,Q,W,de,ye,Pe){f.cancelPendingCommit=null;do vC();while(fo!==0);if((da&6)!==0)throw Error(n(327));if(p!==null){if(p===f.current)throw Error(n(177));if(W=p.lanes|p.childLanes,W|=ts,rn(f,b,W,de,ye,Pe),f===Ta&&(Nn=Ta=null,Ln=0),_x=p,w0=f,Sx=b,A3=W,f3=Q,g7=N,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,she(Oe,function(){return I7(),null})):(f.callbackNode=null,f.callbackPriority=0),N=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||N){N=V.T,V.T=null,Q=q.p,q.p=2,de=da,da|=4;try{qfe(f,p,b)}finally{da=de,q.p=Q,V.T=N}}fo=1,k7(),j7(),B7()}}function k7(){if(fo===1){fo=0;var f=w0,p=_x,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=V.T,V.T=null;var N=q.p;q.p=2;var Q=da;da|=4;try{u7(p,f);var W=j3,de=lo(f.containerInfo),ye=W.focusedElem,Pe=W.selectionRange;if(de!==ye&&ye&&ye.ownerDocument&&cA(ye.ownerDocument.documentElement,ye)){if(Pe!==null&&_i(ye)){var lt=Pe.start,St=Pe.end;if(St===void 0&&(St=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(St,ye.value.length);else{var Ot=ye.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ht=At.getSelection(),Gr=ye.textContent.length,Dr=Math.min(Pe.start,Gr),ya=Pe.end===void 0?Dr:Math.min(Pe.end,Gr);!ht.extend&&Dr>ya&&(de=ya,ya=Dr,Dr=de);var Xe=id(ye,Dr),He=id(ye,ya);if(Xe&&He&&(ht.rangeCount!==1||ht.anchorNode!==Xe.node||ht.anchorOffset!==Xe.offset||ht.focusNode!==He.node||ht.focusOffset!==He.offset)){var nt=Ot.createRange();nt.setStart(Xe.node,Xe.offset),ht.removeAllRanges(),Dr>ya?(ht.addRange(nt),ht.extend(He.node,He.offset)):(nt.setEnd(He.node,He.offset),ht.addRange(nt))}}}}for(Ot=[],ht=ye;ht=ht.parentNode;)ht.nodeType===1&&Ot.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Ot.length;ye++){var jt=Ot[ye];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}TC=!!k3,j3=k3=null}finally{da=Q,q.p=N,V.T=b}}f.current=p,fo=2}}function j7(){if(fo===2){fo=0;var f=w0,p=_x,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=V.T,V.T=null;var N=q.p;q.p=2;var Q=da;da|=4;try{i7(f,p.alternate,p)}finally{da=Q,q.p=N,V.T=b}}fo=3}}function B7(){if(fo===4||fo===3){fo=0,me();var f=w0,p=_x,b=Sx,N=g7;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?fo=5:(fo=0,_x=w0=null,T7(f,f.pendingLanes));var Q=f.pendingLanes;if(Q===0&&(y0=null),Je(b),p=p.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(gt,p,void 0,(p.current.flags&128)===128)}catch{}if(N!==null){p=V.T,Q=q.p,q.p=2,V.T=null;try{for(var W=f.onRecoverableError,de=0;de<N.length;de++){var ye=N[de];W(ye.value,{componentStack:ye.stack})}}finally{V.T=p,q.p=Q}}(Sx&3)!==0&&vC(),kA(f),Q=f.pendingLanes,(b&4194090)!==0&&(Q&42)!==0?f===h3?Xb++:(Xb=0,h3=f):Xb=0,Yb(0)}}function T7(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,lp(p)))}function vC(f){return k7(),j7(),B7(),I7()}function I7(){if(fo!==5)return!1;var f=w0,p=A3;A3=0;var b=Je(Sx),N=V.T,Q=q.p;try{q.p=32>b?32:b,V.T=null,b=f3,f3=null;var W=w0,de=Sx;if(fo=0,_x=w0=null,Sx=0,(da&6)!==0)throw Error(n(331));var ye=da;if(da|=4,m7(W.current),A7(W,W.current,de,b),da=ye,Yb(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(gt,W)}catch{}return!0}finally{q.p=Q,V.T=N,T7(f,p)}}function F7(f,p,b){p=pn(b,p),p=Gj(f.stateNode,p,2),f=Tt(f,p,2),f!==null&&(ja(f,2),kA(f))}function Ca(f,p,b){if(f.tag===3)F7(f,f,b);else for(;p!==null;){if(p.tag===3){F7(p,f,b);break}else if(p.tag===1){var N=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(y0===null||!y0.has(N))){f=pn(b,f),b=RU(2),N=Tt(p,b,2),N!==null&&(LU(b,N,p,f),ja(N,2),kA(N));break}}p=p.return}}function x3(f,p,b){var N=f.pingCache;if(N===null){N=f.pingCache=new Yfe;var Q=new Set;N.set(p,Q)}else Q=N.get(p),Q===void 0&&(Q=new Set,N.set(p,Q));Q.has(b)||(l3=!0,Q.add(b),f=rhe.bind(null,f,p,b),p.then(f,f))}function rhe(f,p,b){var N=f.pingCache;N!==null&&N.delete(p),f.pingedLanes|=f.suspendedLanes&b,f.warmLanes&=~b,Ta===f&&(Ln&b)===b&&(ys===4||ys===3&&(Ln&62914560)===Ln&&300>Te()-d3?(da&2)===0&&kx(f,0):c3|=b,Nx===Ln&&(Nx=0)),kA(f)}function O7(f,p){p===0&&(p=mn()),f=ld(f,p),f!==null&&(ja(f,p),kA(f))}function nhe(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),O7(f,b)}function ahe(f,p){var b=0;switch(f.tag){case 13:var N=f.stateNode,Q=f.memoizedState;Q!==null&&(b=Q.retryLane);break;case 19:N=f.stateNode;break;case 22:N=f.stateNode._retryCache;break;default:throw Error(n(314))}N!==null&&N.delete(p),O7(f,b)}function she(f,p){return Ne(f,p)}var bC=null,Bx=null,v3=!1,yC=!1,b3=!1,Ep=0;function kA(f){f!==Bx&&f.next===null&&(Bx===null?bC=Bx=f:Bx=Bx.next=f),yC=!0,v3||(v3=!0,ohe())}function Yb(f,p){if(!b3&&yC){b3=!0;do for(var b=!1,N=bC;N!==null;){if(f!==0){var Q=N.pendingLanes;if(Q===0)var W=0;else{var de=N.suspendedLanes,ye=N.pingedLanes;W=(1<<31-Pt(42|f)+1)-1,W&=Q&~(de&~ye),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(b=!0,L7(N,W))}else W=Ln,W=$r(N,N===Ta?W:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(W&3)===0||In(N,W)||(b=!0,L7(N,W));N=N.next}while(b);b3=!1}}function ihe(){D7()}function D7(){yC=v3=!1;var f=0;Ep!==0&&(mhe()&&(f=Ep),Ep=0);for(var p=Te(),b=null,N=bC;N!==null;){var Q=N.next,W=P7(N,p);W===0?(N.next=null,b===null?bC=Q:b.next=Q,Q===null&&(Bx=b)):(b=N,(f!==0||(W&3)!==0)&&(yC=!0)),N=Q}Yb(f)}function P7(f,p){for(var b=f.suspendedLanes,N=f.pingedLanes,Q=f.expirationTimes,W=f.pendingLanes&-62914561;0<W;){var de=31-Pt(W),ye=1<<de,Pe=Q[de];Pe===-1?((ye&b)===0||(ye&N)!==0)&&(Q[de]=Pr(ye,p)):Pe<=p&&(f.expiredLanes|=ye),W&=~ye}if(p=Ta,b=Ln,b=$r(f,f===p?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),N=f.callbackNode,b===0||f===p&&(Aa===2||Aa===9)||f.cancelPendingCommit!==null)return N!==null&&N!==null&&je(N),f.callbackNode=null,f.callbackPriority=0;if((b&3)===0||In(f,b)){if(p=b&-b,p===f.callbackPriority)return p;switch(N!==null&&je(N),Je(b)){case 2:case 8:b=xe;break;case 32:b=Oe;break;case 268435456:b=$e;break;default:b=Oe}return N=R7.bind(null,f),b=Ne(b,N),f.callbackPriority=p,f.callbackNode=b,p}return N!==null&&N!==null&&je(N),f.callbackPriority=2,f.callbackNode=null,2}function R7(f,p){if(fo!==0&&fo!==5)return f.callbackNode=null,f.callbackPriority=0,null;var b=f.callbackNode;if(vC()&&f.callbackNode!==b)return null;var N=Ln;return N=$r(f,f===Ta?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),N===0?null:(v7(f,N,p),P7(f,Te()),f.callbackNode!=null&&f.callbackNode===b?R7.bind(null,f):null)}function L7(f,p){if(vC())return null;v7(f,p,!0)}function ohe(){ghe(function(){(da&6)!==0?Ne(We,ihe):D7()})}function y3(){return Ep===0&&(Ep=fs()),Ep}function M7(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:hc(""+f)}function U7(f,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,f.id&&b.setAttribute("form",f.id),p.parentNode.insertBefore(b,p),f=new FormData(f),b.parentNode.removeChild(b),f}function lhe(f,p,b,N,Q){if(p==="submit"&&b&&b.stateNode===Q){var W=M7((Q[xr]||null).action),de=N.submitter;de&&(p=(p=de[xr]||null)?M7(p.formAction):de.getAttribute("formAction"),p!==null&&(W=p,de=null));var ye=new su("action","action",null,N,Q);f.push({event:ye,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(Ep!==0){var Pe=de?U7(Q,de):new FormData(Q);vu(b,{pending:!0,data:Pe,method:Q.method,action:W},null,Pe)}}else typeof W=="function"&&(ye.preventDefault(),Pe=de?U7(Q,de):new FormData(Q),vu(b,{pending:!0,data:Pe,method:Q.method,action:W},W,Pe))},currentTarget:Q}]})}}for(var w3=0;w3<Sf.length;w3++){var E3=Sf[w3],che=E3.toLowerCase(),uhe=E3[0].toUpperCase()+E3.slice(1);Ka(che,"on"+uhe)}Ka(n0,"onAnimationEnd"),Ka(dA,"onAnimationIteration"),Ka(AA,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(fA,"onTransitionRun"),Ka(_f,"onTransitionStart"),Ka(a0,"onTransitionCancel"),Ka(hA,"onTransitionEnd"),zt("onMouseEnter",["mouseout","mouseover"]),zt("onMouseLeave",["mouseout","mouseover"]),zt("onPointerEnter",["pointerout","pointerover"]),zt("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dhe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jb));function Q7(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var N=f[b],Q=N.event;N=N.listeners;e:{var W=void 0;if(p)for(var de=N.length-1;0<=de;de--){var ye=N[de],Pe=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Pe!==W&&Q.isPropagationStopped())break e;W=ye,Q.currentTarget=lt;try{W(Q)}catch(St){lC(St)}Q.currentTarget=null,W=Pe}else for(de=0;de<N.length;de++){if(ye=N[de],Pe=ye.instance,lt=ye.currentTarget,ye=ye.listener,Pe!==W&&Q.isPropagationStopped())break e;W=ye,Q.currentTarget=lt;try{W(Q)}catch(St){lC(St)}Q.currentTarget=null,W=Pe}}}}function _n(f,p){var b=p[Zr];b===void 0&&(b=p[Zr]=new Set);var N=f+"__bubble";b.has(N)||(H7(p,f,2,!1),b.add(N))}function C3(f,p,b){var N=0;p&&(N|=4),H7(b,f,N,p)}var wC="_reactListening"+Math.random().toString(36).slice(2);function N3(f){if(!f[wC]){f[wC]=!0,rt.forEach(function(b){b!=="selectionchange"&&(dhe.has(b)||C3(b,!1,f),C3(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[wC]||(p[wC]=!0,C3("selectionchange",!1,p))}}function H7(f,p,b,N){switch(A9(p)){case 2:var Q=Lhe;break;case 8:Q=Mhe;break;default:Q=M3}b=Q.bind(null,p,b,f),Q=void 0,!oo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(Q=!0),N?Q!==void 0?f.addEventListener(p,b,{capture:!0,passive:Q}):f.addEventListener(p,b,!0):Q!==void 0?f.addEventListener(p,b,{passive:Q}):f.addEventListener(p,b,!1)}function _3(f,p,b,N,Q){var W=N;if((p&1)===0&&(p&2)===0&&N!==null)e:for(;;){if(N===null)return;var de=N.tag;if(de===3||de===4){var ye=N.stateNode.containerInfo;if(ye===Q)break;if(de===4)for(de=N.return;de!==null;){var Pe=de.tag;if((Pe===3||Pe===4)&&de.stateNode.containerInfo===Q)return;de=de.return}for(;ye!==null;){if(de=Se(ye),de===null)return;if(Pe=de.tag,Pe===5||Pe===6||Pe===26||Pe===27){N=W=de;continue e}ye=ye.parentNode}}N=N.return}Jh(function(){var lt=W,St=ca(b),Ot=[];e:{var At=od.get(f);if(At!==void 0){var ht=su,Gr=f;switch(f){case"keypress":if(Bo(b)===0)break e;case"keydown":case"keyup":ht=xc;break;case"focusin":Gr="focus",ht=ou;break;case"focusout":Gr="blur",ht=ou;break;case"beforeblur":case"afterblur":ht=ou;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=sA;break;case n0:case dA:case AA:ht=rA;break;case hA:ht=fe;break;case"scroll":case"scrollend":ht=bf;break;case"wheel":ht=Me;break;case"copy":case"cut":case"paste":ht=nA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=sd;break;case"toggle":case"beforetoggle":ht=yt}var Dr=(p&4)!==0,ya=!Dr&&(f==="scroll"||f==="scrollend"),Xe=Dr?At!==null?At+"Capture":null:At;Dr=[];for(var He=lt,nt;He!==null;){var jt=He;if(nt=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||nt===null||Xe===null||(jt=Mi(He,Xe),jt!=null&&Dr.push(Zb(He,jt,nt))),ya)break;He=He.return}0<Dr.length&&(At=new ht(At,Gr,null,b,St),Ot.push({event:At,listeners:Dr}))}}if((p&7)===0){e:{if(At=f==="mouseover"||f==="pointerover",ht=f==="mouseout"||f==="pointerout",At&&b!==Il&&(Gr=b.relatedTarget||b.fromElement)&&(Se(Gr)||Gr[Wr]))break e;if((ht||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ht?(Gr=b.relatedTarget||b.toElement,ht=lt,Gr=Gr?Se(Gr):null,Gr!==null&&(ya=s(Gr),Dr=Gr.tag,Gr!==ya||Dr!==5&&Dr!==27&&Dr!==6)&&(Gr=null)):(ht=null,Gr=lt),ht!==Gr)){if(Dr=gs,jt="onMouseLeave",Xe="onMouseEnter",He="mouse",(f==="pointerout"||f==="pointerover")&&(Dr=sd,jt="onPointerLeave",Xe="onPointerEnter",He="pointer"),ya=ht==null?At:Ye(ht),nt=Gr==null?At:Ye(Gr),At=new Dr(jt,He+"leave",ht,b,St),At.target=ya,At.relatedTarget=nt,jt=null,Se(St)===lt&&(Dr=new Dr(Xe,He+"enter",Gr,b,St),Dr.target=nt,Dr.relatedTarget=ya,jt=Dr),ya=jt,ht&&Gr)t:{for(Dr=ht,Xe=Gr,He=0,nt=Dr;nt;nt=Tx(nt))He++;for(nt=0,jt=Xe;jt;jt=Tx(jt))nt++;for(;0<He-nt;)Dr=Tx(Dr),He--;for(;0<nt-He;)Xe=Tx(Xe),nt--;for(;He--;){if(Dr===Xe||Xe!==null&&Dr===Xe.alternate)break t;Dr=Tx(Dr),Xe=Tx(Xe)}Dr=null}else Dr=null;ht!==null&&V7(Ot,At,ht,Dr,!1),Gr!==null&&ya!==null&&V7(Ot,ya,Gr,Dr,!0)}}e:{if(At=lt?Ye(lt):window,ht=At.nodeName&&At.nodeName.toLowerCase(),ht==="select"||ht==="input"&&At.type==="file")var hr=t0;else if(ta(At))if(wf)hr=ix;else{hr=Nb;var wn=Io}else ht=At.nodeName,!ht||ht.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?lt&&xf(lt.elementType)&&(hr=t0):hr=rp;if(hr&&(hr=hr(f,lt))){Ll(Ot,hr,b,St);break e}wn&&wn(f,At,lt),f==="focusout"&&lt&&At.type==="number"&&lt.memoizedProps.value!=null&&ru(At,"number",At.value)}switch(wn=lt?Ye(lt):window,f){case"focusin":(ta(wn)||wn.contentEditable==="true")&&(Fo=wn,vc=lt,Au=null);break;case"focusout":Au=vc=Fo=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Ga(Ot,b,St);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Ga(Ot,b,St)}var Er;if(Zt)e:{switch(f){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Or?ot(f,b)&&(Rr="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Rr="onCompositionStart");Rr&&(ce&&b.locale!=="ko"&&(Or||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Or&&(Er=vf()):(jo=St,au="value"in jo?jo.value:jo.textContent,Or=!0)),wn=EC(lt,Rr),0<wn.length&&(Rr=new rd(Rr,f,null,b,St),Ot.push({event:Rr,listeners:wn}),Er?Rr.data=Er:(Er=Ut(b),Er!==null&&(Rr.data=Er)))),(Er=ne?yn(f,b):Xr(f,b))&&(Rr=EC(lt,"onBeforeInput"),0<Rr.length&&(wn=new rd("onBeforeInput","beforeinput",null,b,St),Ot.push({event:wn,listeners:Rr}),wn.data=Er)),lhe(Ot,f,lt,b,St)}Q7(Ot,p)})}function Zb(f,p,b){return{instance:f,listener:p,currentTarget:b}}function EC(f,p){for(var b=p+"Capture",N=[];f!==null;){var Q=f,W=Q.stateNode;if(Q=Q.tag,Q!==5&&Q!==26&&Q!==27||W===null||(Q=Mi(f,b),Q!=null&&N.unshift(Zb(f,Q,W)),Q=Mi(f,p),Q!=null&&N.push(Zb(f,Q,W))),f.tag===3)return N;f=f.return}return[]}function Tx(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function V7(f,p,b,N,Q){for(var W=p._reactName,de=[];b!==null&&b!==N;){var ye=b,Pe=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Pe!==null&&Pe===N)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Pe=lt,Q?(lt=Mi(b,W),lt!=null&&de.unshift(Zb(b,lt,Pe))):Q||(lt=Mi(b,W),lt!=null&&de.push(Zb(b,lt,Pe)))),b=b.return}de.length!==0&&f.push({event:p,listeners:de})}var Ahe=/\r\n?/g,fhe=/\u0000|\uFFFD/g;function z7(f){return(typeof f=="string"?f:""+f).replace(Ahe,`
`).replace(fhe,"")}function $7(f,p){return p=z7(p),z7(f)===p}function CC(){}function ba(f,p,b,N,Q,W){switch(b){case"children":typeof N=="string"?p==="body"||p==="textarea"&&N===""||So(f,N):(typeof N=="number"||typeof N=="bigint")&&p!=="body"&&So(f,""+N);break;case"className":on(f,"class",N);break;case"tabIndex":on(f,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":on(f,b,N);break;case"style":gf(f,N,W);break;case"data":if(p!=="object"){on(f,"data",N);break}case"src":case"href":if(N===""&&(p!=="a"||b!=="href")){f.removeAttribute(b);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){f.removeAttribute(b);break}N=hc(""+N),f.setAttribute(b,N);break;case"action":case"formAction":if(typeof N=="function"){f.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(b==="formAction"?(p!=="input"&&ba(f,p,"name",Q.name,Q,null),ba(f,p,"formEncType",Q.formEncType,Q,null),ba(f,p,"formMethod",Q.formMethod,Q,null),ba(f,p,"formTarget",Q.formTarget,Q,null)):(ba(f,p,"encType",Q.encType,Q,null),ba(f,p,"method",Q.method,Q,null),ba(f,p,"target",Q.target,Q,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){f.removeAttribute(b);break}N=hc(""+N),f.setAttribute(b,N);break;case"onClick":N!=null&&(f.onclick=CC);break;case"onScroll":N!=null&&_n("scroll",f);break;case"onScrollEnd":N!=null&&_n("scrollend",f);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(b=N.__html,b!=null){if(Q.children!=null)throw Error(n(60));f.innerHTML=b}}break;case"multiple":f.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":f.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){f.removeAttribute("xlink:href");break}b=hc(""+N),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?f.setAttribute(b,""+N):f.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?f.setAttribute(b,""):f.removeAttribute(b);break;case"capture":case"download":N===!0?f.setAttribute(b,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?f.setAttribute(b,N):f.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?f.setAttribute(b,N):f.removeAttribute(b);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?f.removeAttribute(b):f.setAttribute(b,N);break;case"popover":_n("beforetoggle",f),_n("toggle",f),sn(f,"popover",N);break;case"xlinkActuate":An(f,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":An(f,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":An(f,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":An(f,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":An(f,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":An(f,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":An(f,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":An(f,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":An(f,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":sn(f,"is",N);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=fc.get(b)||b,sn(f,b,N))}}function S3(f,p,b,N,Q,W){switch(b){case"style":gf(f,N,W);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(b=N.__html,b!=null){if(Q.children!=null)throw Error(n(60));f.innerHTML=b}}break;case"children":typeof N=="string"?So(f,N):(typeof N=="number"||typeof N=="bigint")&&So(f,""+N);break;case"onScroll":N!=null&&_n("scroll",f);break;case"onScrollEnd":N!=null&&_n("scrollend",f);break;case"onClick":N!=null&&(f.onclick=CC);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Q=b.endsWith("Capture"),p=b.slice(2,Q?b.length-7:void 0),W=f[xr]||null,W=W!=null?W[b]:null,typeof W=="function"&&f.removeEventListener(p,W,Q),typeof N=="function")){typeof W!="function"&&W!==null&&(b in f?f[b]=null:f.hasAttribute(b)&&f.removeAttribute(b)),f.addEventListener(p,N,Q);break e}b in f?f[b]=N:N===!0?f.setAttribute(b,""):sn(f,b,N)}}}function ho(f,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",f),_n("load",f);var N=!1,Q=!1,W;for(W in b)if(b.hasOwnProperty(W)){var de=b[W];if(de!=null)switch(W){case"src":N=!0;break;case"srcSet":Q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(f,p,W,de,b,null)}}Q&&ba(f,p,"srcSet",b.srcSet,b,null),N&&ba(f,p,"src",b.src,b,null);return;case"input":_n("invalid",f);var ye=W=de=Q=null,Pe=null,lt=null;for(N in b)if(b.hasOwnProperty(N)){var St=b[N];if(St!=null)switch(N){case"name":Q=St;break;case"type":de=St;break;case"checked":Pe=St;break;case"defaultChecked":lt=St;break;case"value":W=St;break;case"defaultValue":ye=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,p));break;default:ba(f,p,N,St,b,null)}}tu(f,W,ye,Pe,lt,de,Q,!1),eu(f);return;case"select":_n("invalid",f),N=de=W=null;for(Q in b)if(b.hasOwnProperty(Q)&&(ye=b[Q],ye!=null))switch(Q){case"value":W=ye;break;case"defaultValue":de=ye;break;case"multiple":N=ye;default:ba(f,p,Q,ye,b,null)}p=W,b=de,f.multiple=!!N,p!=null?Tl(f,!!N,p,!1):b!=null&&Tl(f,!!N,b,!0);return;case"textarea":_n("invalid",f),W=Q=N=null;for(de in b)if(b.hasOwnProperty(de)&&(ye=b[de],ye!=null))switch(de){case"value":N=ye;break;case"defaultValue":Q=ye;break;case"children":W=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(91));break;default:ba(f,p,de,ye,b,null)}nu(f,N,Q,W),eu(f);return;case"option":for(Pe in b)if(b.hasOwnProperty(Pe)&&(N=b[Pe],N!=null))switch(Pe){case"selected":f.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:ba(f,p,Pe,N,b,null)}return;case"dialog":_n("beforetoggle",f),_n("toggle",f),_n("cancel",f),_n("close",f);break;case"iframe":case"object":_n("load",f);break;case"video":case"audio":for(N=0;N<Jb.length;N++)_n(Jb[N],f);break;case"image":_n("error",f),_n("load",f);break;case"details":_n("toggle",f);break;case"embed":case"source":case"link":_n("error",f),_n("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in b)if(b.hasOwnProperty(lt)&&(N=b[lt],N!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(f,p,lt,N,b,null)}return;default:if(xf(p)){for(St in b)b.hasOwnProperty(St)&&(N=b[St],N!==void 0&&S3(f,p,St,N,b,void 0));return}}for(ye in b)b.hasOwnProperty(ye)&&(N=b[ye],N!=null&&ba(f,p,ye,N,b,null))}function hhe(f,p,b,N){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Q=null,W=null,de=null,ye=null,Pe=null,lt=null,St=null;for(ht in b){var Ot=b[ht];if(b.hasOwnProperty(ht)&&Ot!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Pe=Ot;default:N.hasOwnProperty(ht)||ba(f,p,ht,null,N,Ot)}}for(var At in N){var ht=N[At];if(Ot=b[At],N.hasOwnProperty(At)&&(ht!=null||Ot!=null))switch(At){case"type":W=ht;break;case"name":Q=ht;break;case"checked":lt=ht;break;case"defaultChecked":St=ht;break;case"value":de=ht;break;case"defaultValue":ye=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:ht!==Ot&&ba(f,p,At,ht,N,Ot)}}Ci(f,de,ye,Pe,lt,St,W,Q);return;case"select":ht=de=ye=At=null;for(W in b)if(Pe=b[W],b.hasOwnProperty(W)&&Pe!=null)switch(W){case"value":break;case"multiple":ht=Pe;default:N.hasOwnProperty(W)||ba(f,p,W,null,N,Pe)}for(Q in N)if(W=N[Q],Pe=b[Q],N.hasOwnProperty(Q)&&(W!=null||Pe!=null))switch(Q){case"value":At=W;break;case"defaultValue":ye=W;break;case"multiple":de=W;default:W!==Pe&&ba(f,p,Q,W,N,Pe)}p=ye,b=de,N=ht,At!=null?Tl(f,!!b,At,!1):!!N!=!!b&&(p!=null?Tl(f,!!b,p,!0):Tl(f,!!b,b?[]:"",!1));return;case"textarea":ht=At=null;for(ye in b)if(Q=b[ye],b.hasOwnProperty(ye)&&Q!=null&&!N.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:ba(f,p,ye,null,N,Q)}for(de in N)if(Q=N[de],W=b[de],N.hasOwnProperty(de)&&(Q!=null||W!=null))switch(de){case"value":At=Q;break;case"defaultValue":ht=Q;break;case"children":break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Q!==W&&ba(f,p,de,Q,N,W)}Vn(f,At,ht);return;case"option":for(var Gr in b)if(At=b[Gr],b.hasOwnProperty(Gr)&&At!=null&&!N.hasOwnProperty(Gr))switch(Gr){case"selected":f.selected=!1;break;default:ba(f,p,Gr,null,N,At)}for(Pe in N)if(At=N[Pe],ht=b[Pe],N.hasOwnProperty(Pe)&&At!==ht&&(At!=null||ht!=null))switch(Pe){case"selected":f.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(f,p,Pe,At,N,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dr in b)At=b[Dr],b.hasOwnProperty(Dr)&&At!=null&&!N.hasOwnProperty(Dr)&&ba(f,p,Dr,null,N,At);for(lt in N)if(At=N[lt],ht=b[lt],N.hasOwnProperty(lt)&&At!==ht&&(At!=null||ht!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,p));break;default:ba(f,p,lt,At,N,ht)}return;default:if(xf(p)){for(var ya in b)At=b[ya],b.hasOwnProperty(ya)&&At!==void 0&&!N.hasOwnProperty(ya)&&S3(f,p,ya,void 0,N,At);for(St in N)At=N[St],ht=b[St],!N.hasOwnProperty(St)||At===ht||At===void 0&&ht===void 0||S3(f,p,St,At,N,ht);return}}for(var Xe in b)At=b[Xe],b.hasOwnProperty(Xe)&&At!=null&&!N.hasOwnProperty(Xe)&&ba(f,p,Xe,null,N,At);for(Ot in N)At=N[Ot],ht=b[Ot],!N.hasOwnProperty(Ot)||At===ht||At==null&&ht==null||ba(f,p,Ot,At,N,ht)}var k3=null,j3=null;function NC(f){return f.nodeType===9?f:f.ownerDocument}function G7(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K7(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function B3(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var T3=null;function mhe(){var f=window.event;return f&&f.type==="popstate"?f===T3?!1:(T3=f,!0):(T3=null,!1)}var q7=typeof setTimeout=="function"?setTimeout:void 0,phe=typeof clearTimeout=="function"?clearTimeout:void 0,W7=typeof Promise=="function"?Promise:void 0,ghe=typeof queueMicrotask=="function"?queueMicrotask:typeof W7<"u"?function(f){return W7.resolve(null).then(f).catch(xhe)}:q7;function xhe(f){setTimeout(function(){throw f})}function C0(f){return f==="head"}function X7(f,p){var b=p,N=0,Q=0;do{var W=b.nextSibling;if(f.removeChild(b),W&&W.nodeType===8)if(b=W.data,b==="/$"){if(0<N&&8>N){b=N;var de=f.ownerDocument;if(b&1&&ey(de.documentElement),b&2&&ey(de.body),b&4)for(b=de.head,ey(b),de=b.firstChild;de;){var ye=de.nextSibling,Pe=de.nodeName;de[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&de.rel.toLowerCase()==="stylesheet"||b.removeChild(de),de=ye}}if(Q===0){f.removeChild(W),ly(p);return}Q--}else b==="$"||b==="$?"||b==="$!"?Q++:N=b.charCodeAt(0)-48;else N=0;b=W}while(b);ly(p)}function I3(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":I3(b),we(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}f.removeChild(b)}}function vhe(f,p,b,N){for(;f.nodeType===1;){var Q=b;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!N&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(N){if(!f[Ce])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(W=f.getAttribute("rel"),W==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(W!==Q.rel||f.getAttribute("href")!==(Q.href==null||Q.href===""?null:Q.href)||f.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin)||f.getAttribute("title")!==(Q.title==null?null:Q.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(W=f.getAttribute("src"),(W!==(Q.src==null?null:Q.src)||f.getAttribute("type")!==(Q.type==null?null:Q.type)||f.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin))&&W&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var W=Q.name==null?null:""+Q.name;if(Q.type==="hidden"&&f.getAttribute("name")===W)return f}else return f;if(f=yd(f.nextSibling),f===null)break}return null}function bhe(f,p,b){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!b||(f=yd(f.nextSibling),f===null))return null;return f}function F3(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function yhe(f,p){var b=f.ownerDocument;if(f.data!=="$?"||b.readyState==="complete")p();else{var N=function(){p(),b.removeEventListener("DOMContentLoaded",N)};b.addEventListener("DOMContentLoaded",N),f._reactRetry=N}}function yd(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return f}var O3=null;function Y7(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}function J7(f,p,b){switch(p=NC(b),f){case"html":if(f=p.documentElement,!f)throw Error(n(452));return f;case"head":if(f=p.head,!f)throw Error(n(453));return f;case"body":if(f=p.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function ey(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);we(f)}var wu=new Map,Z7=new Set;function _C(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var zf=q.d;q.d={f:whe,r:Ehe,D:Che,C:Nhe,L:_he,m:She,X:jhe,S:khe,M:Bhe};function whe(){var f=zf.f(),p=gC();return f||p}function Ehe(f){var p=Fe(f);p!==null&&p.tag===5&&p.type==="form"?xp(p):zf.r(f)}var Ix=typeof document>"u"?null:document;function e9(f,p,b){var N=Ix;if(N&&typeof p=="string"&&p){var Q=Fn(p);Q='link[rel="'+f+'"][href="'+Q+'"]',typeof b=="string"&&(Q+='[crossorigin="'+b+'"]'),Z7.has(Q)||(Z7.add(Q),f={rel:f,crossOrigin:b,href:p},N.querySelector(Q)===null&&(p=N.createElement("link"),ho(p,"link",f),Ge(p),N.head.appendChild(p)))}}function Che(f){zf.D(f),e9("dns-prefetch",f,null)}function Nhe(f,p){zf.C(f,p),e9("preconnect",f,p)}function _he(f,p,b){zf.L(f,p,b);var N=Ix;if(N&&f&&p){var Q='link[rel="preload"][as="'+Fn(p)+'"]';p==="image"&&b&&b.imageSrcSet?(Q+='[imagesrcset="'+Fn(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Q+='[imagesizes="'+Fn(b.imageSizes)+'"]')):Q+='[href="'+Fn(f)+'"]';var W=Q;switch(p){case"style":W=Fx(f);break;case"script":W=Ox(f)}wu.has(W)||(f=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:f,as:p},b),wu.set(W,f),N.querySelector(Q)!==null||p==="style"&&N.querySelector(ty(W))||p==="script"&&N.querySelector(ry(W))||(p=N.createElement("link"),ho(p,"link",f),Ge(p),N.head.appendChild(p)))}}function She(f,p){zf.m(f,p);var b=Ix;if(b&&f){var N=p&&typeof p.as=="string"?p.as:"script",Q='link[rel="modulepreload"][as="'+Fn(N)+'"][href="'+Fn(f)+'"]',W=Q;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=Ox(f)}if(!wu.has(W)&&(f=d({rel:"modulepreload",href:f},p),wu.set(W,f),b.querySelector(Q)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ry(W)))return}N=b.createElement("link"),ho(N,"link",f),Ge(N),b.head.appendChild(N)}}}function khe(f,p,b){zf.S(f,p,b);var N=Ix;if(N&&f){var Q=dt(N).hoistableStyles,W=Fx(f);p=p||"default";var de=Q.get(W);if(!de){var ye={loading:0,preload:null};if(de=N.querySelector(ty(W)))ye.loading=5;else{f=d({rel:"stylesheet",href:f,"data-precedence":p},b),(b=wu.get(W))&&D3(f,b);var Pe=de=N.createElement("link");Ge(Pe),ho(Pe,"link",f),Pe._p=new Promise(function(lt,St){Pe.onload=lt,Pe.onerror=St}),Pe.addEventListener("load",function(){ye.loading|=1}),Pe.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,SC(de,p,N)}de={type:"stylesheet",instance:de,count:1,state:ye},Q.set(W,de)}}}function jhe(f,p){zf.X(f,p);var b=Ix;if(b&&f){var N=dt(b).hoistableScripts,Q=Ox(f),W=N.get(Q);W||(W=b.querySelector(ry(Q)),W||(f=d({src:f,async:!0},p),(p=wu.get(Q))&&P3(f,p),W=b.createElement("script"),Ge(W),ho(W,"link",f),b.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},N.set(Q,W))}}function Bhe(f,p){zf.M(f,p);var b=Ix;if(b&&f){var N=dt(b).hoistableScripts,Q=Ox(f),W=N.get(Q);W||(W=b.querySelector(ry(Q)),W||(f=d({src:f,async:!0,type:"module"},p),(p=wu.get(Q))&&P3(f,p),W=b.createElement("script"),Ge(W),ho(W,"link",f),b.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},N.set(Q,W))}}function t9(f,p,b,N){var Q=(Q=re.current)?_C(Q):null;if(!Q)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Fx(b.href),b=dt(Q).hoistableStyles,N=b.get(p),N||(N={type:"style",instance:null,count:0,state:null},b.set(p,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){f=Fx(b.href);var W=dt(Q).hoistableStyles,de=W.get(f);if(de||(Q=Q.ownerDocument||Q,de={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(f,de),(W=Q.querySelector(ty(f)))&&!W._p&&(de.instance=W,de.state.loading=5),wu.has(f)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},wu.set(f,b),W||The(Q,f,b,de.state))),p&&N===null)throw Error(n(528,""));return de}if(p&&N!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Ox(b),b=dt(Q).hoistableScripts,N=b.get(p),N||(N={type:"script",instance:null,count:0,state:null},b.set(p,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function Fx(f){return'href="'+Fn(f)+'"'}function ty(f){return'link[rel="stylesheet"]['+f+"]"}function r9(f){return d({},f,{"data-precedence":f.precedence,precedence:null})}function The(f,p,b,N){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?N.loading=1:(p=f.createElement("link"),N.preload=p,p.addEventListener("load",function(){return N.loading|=1}),p.addEventListener("error",function(){return N.loading|=2}),ho(p,"link",b),Ge(p),f.head.appendChild(p))}function Ox(f){return'[src="'+Fn(f)+'"]'}function ry(f){return"script[async]"+f}function n9(f,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var N=f.querySelector('style[data-href~="'+Fn(b.href)+'"]');if(N)return p.instance=N,Ge(N),N;var Q=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return N=(f.ownerDocument||f).createElement("style"),Ge(N),ho(N,"style",Q),SC(N,b.precedence,f),p.instance=N;case"stylesheet":Q=Fx(b.href);var W=f.querySelector(ty(Q));if(W)return p.state.loading|=4,p.instance=W,Ge(W),W;N=r9(b),(Q=wu.get(Q))&&D3(N,Q),W=(f.ownerDocument||f).createElement("link"),Ge(W);var de=W;return de._p=new Promise(function(ye,Pe){de.onload=ye,de.onerror=Pe}),ho(W,"link",N),p.state.loading|=4,SC(W,b.precedence,f),p.instance=W;case"script":return W=Ox(b.src),(Q=f.querySelector(ry(W)))?(p.instance=Q,Ge(Q),Q):(N=b,(Q=wu.get(W))&&(N=d({},b),P3(N,Q)),f=f.ownerDocument||f,Q=f.createElement("script"),Ge(Q),ho(Q,"link",N),f.head.appendChild(Q),p.instance=Q);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(N=p.instance,p.state.loading|=4,SC(N,b.precedence,f));return p.instance}function SC(f,p,b){for(var N=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Q=N.length?N[N.length-1]:null,W=Q,de=0;de<N.length;de++){var ye=N[de];if(ye.dataset.precedence===p)W=ye;else if(W!==Q)break}W?W.parentNode.insertBefore(f,W.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(f,p.firstChild))}function D3(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function P3(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var kC=null;function a9(f,p,b){if(kC===null){var N=new Map,Q=kC=new Map;Q.set(b,N)}else Q=kC,N=Q.get(b),N||(N=new Map,Q.set(b,N));if(N.has(f))return N;for(N.set(f,null),b=b.getElementsByTagName(f),Q=0;Q<b.length;Q++){var W=b[Q];if(!(W[Ce]||W[nr]||f==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var de=W.getAttribute(p)||"";de=f+de;var ye=N.get(de);ye?ye.push(W):N.set(de,[W])}}return N}function s9(f,p,b){f=f.ownerDocument||f,f.head.insertBefore(b,p==="title"?f.querySelector("head > title"):null)}function Ihe(f,p,b){if(b===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function i9(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var ny=null;function Fhe(){}function Ohe(f,p,b){if(ny===null)throw Error(n(475));var N=ny;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var Q=Fx(b.href),W=f.querySelector(ty(Q));if(W){f=W._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(N.count++,N=jC.bind(N),f.then(N,N)),p.state.loading|=4,p.instance=W,Ge(W);return}W=f.ownerDocument||f,b=r9(b),(Q=wu.get(Q))&&D3(b,Q),W=W.createElement("link"),Ge(W);var de=W;de._p=new Promise(function(ye,Pe){de.onload=ye,de.onerror=Pe}),ho(W,"link",b),p.instance=W}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(N.count++,p=jC.bind(N),f.addEventListener("load",p),f.addEventListener("error",p))}}function Dhe(){if(ny===null)throw Error(n(475));var f=ny;return f.stylesheets&&f.count===0&&R3(f,f.stylesheets),0<f.count?function(p){var b=setTimeout(function(){if(f.stylesheets&&R3(f,f.stylesheets),f.unsuspend){var N=f.unsuspend;f.unsuspend=null,N()}},6e4);return f.unsuspend=p,function(){f.unsuspend=null,clearTimeout(b)}}:null}function jC(){if(this.count--,this.count===0){if(this.stylesheets)R3(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var BC=null;function R3(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,BC=new Map,p.forEach(Phe,f),BC=null,jC.call(f))}function Phe(f,p){if(!(p.state.loading&4)){var b=BC.get(f);if(b)var N=b.get(null);else{b=new Map,BC.set(f,b);for(var Q=f.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<Q.length;W++){var de=Q[W];(de.nodeName==="LINK"||de.getAttribute("media")!=="not all")&&(b.set(de.dataset.precedence,de),N=de)}N&&b.set(null,N)}Q=p.instance,de=Q.getAttribute("data-precedence"),W=b.get(de)||N,W===N&&b.set(null,Q),b.set(de,Q),this.count++,N=jC.bind(this),Q.addEventListener("load",N),Q.addEventListener("error",N),W?W.parentNode.insertBefore(Q,W.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(Q,f.firstChild)),p.state.loading|=4}}var ay={$$typeof:_,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Rhe(f,p,b,N,Q,W,de,ye){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=N,this.onUncaughtError=Q,this.onCaughtError=W,this.onRecoverableError=de,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function o9(f,p,b,N,Q,W,de,ye,Pe,lt,St,Ot){return f=new Rhe(f,p,b,de,ye,Pe,lt,Ot),p=1,W===!0&&(p|=24),W=Vi(3,null,null,p),f.current=W,W.stateNode=f,p=Sb(),p.refCount++,f.pooledCache=p,p.refCount++,W.memoizedState={element:N,isDehydrated:b,cache:p},Qe(W),f}function l9(f){return f?(f=ii,f):ii}function c9(f,p,b,N,Q,W){Q=l9(Q),N.context===null?N.context=Q:N.pendingContext=Q,N=_t(p),N.payload={element:b},W=W===void 0?null:W,W!==null&&(N.callback=W),b=Tt(f,N,p),b!==null&&(kc(b,f,p),kt(b,f,p))}function u9(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function L3(f,p){u9(f,p),(f=f.alternate)&&u9(f,p)}function d9(f){if(f.tag===13){var p=ld(f,67108864);p!==null&&kc(p,f,67108864),L3(f,67108864)}}var TC=!0;function Lhe(f,p,b,N){var Q=V.T;V.T=null;var W=q.p;try{q.p=2,M3(f,p,b,N)}finally{q.p=W,V.T=Q}}function Mhe(f,p,b,N){var Q=V.T;V.T=null;var W=q.p;try{q.p=8,M3(f,p,b,N)}finally{q.p=W,V.T=Q}}function M3(f,p,b,N){if(TC){var Q=U3(N);if(Q===null)_3(f,p,N,IC,b),f9(f,N);else if(Qhe(Q,f,p,b,N))N.stopPropagation();else if(f9(f,N),p&4&&-1<Uhe.indexOf(f)){for(;Q!==null;){var W=Fe(Q);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var de=Sr(W.pendingLanes);if(de!==0){var ye=W;for(ye.pendingLanes|=2,ye.entangledLanes|=2;de;){var Pe=1<<31-Pt(de);ye.entanglements[1]|=Pe,de&=~Pe}kA(W),(da&6)===0&&(mC=Te()+500,Yb(0))}}break;case 13:ye=ld(W,2),ye!==null&&kc(ye,W,2),gC(),L3(W,2)}if(W=U3(N),W===null&&_3(f,p,N,IC,b),W===Q)break;Q=W}Q!==null&&N.stopPropagation()}else _3(f,p,N,null,b)}}function U3(f){return f=ca(f),Q3(f)}var IC=null;function Q3(f){if(IC=null,f=Se(f),f!==null){var p=s(f);if(p===null)f=null;else{var b=p.tag;if(b===13){if(f=i(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return IC=f,null}function A9(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case We:return 2;case xe:return 8;case Oe:case Re:return 32;case $e:return 268435456;default:return 32}default:return 32}}var H3=!1,N0=null,_0=null,S0=null,sy=new Map,iy=new Map,k0=[],Uhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f9(f,p){switch(f){case"focusin":case"focusout":N0=null;break;case"dragenter":case"dragleave":_0=null;break;case"mouseover":case"mouseout":S0=null;break;case"pointerover":case"pointerout":sy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(p.pointerId)}}function oy(f,p,b,N,Q,W){return f===null||f.nativeEvent!==W?(f={blockedOn:p,domEventName:b,eventSystemFlags:N,nativeEvent:W,targetContainers:[Q]},p!==null&&(p=Fe(p),p!==null&&d9(p)),f):(f.eventSystemFlags|=N,p=f.targetContainers,Q!==null&&p.indexOf(Q)===-1&&p.push(Q),f)}function Qhe(f,p,b,N,Q){switch(p){case"focusin":return N0=oy(N0,f,p,b,N,Q),!0;case"dragenter":return _0=oy(_0,f,p,b,N,Q),!0;case"mouseover":return S0=oy(S0,f,p,b,N,Q),!0;case"pointerover":var W=Q.pointerId;return sy.set(W,oy(sy.get(W)||null,f,p,b,N,Q)),!0;case"gotpointercapture":return W=Q.pointerId,iy.set(W,oy(iy.get(W)||null,f,p,b,N,Q)),!0}return!1}function h9(f){var p=Se(f.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){f.blockedOn=p,Et(f.priority,function(){if(b.tag===13){var N=Sc();N=mt(N);var Q=ld(b,N);Q!==null&&kc(Q,b,N),L3(b,N)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function FC(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=U3(f.nativeEvent);if(b===null){b=f.nativeEvent;var N=new b.constructor(b.type,b);Il=N,b.target.dispatchEvent(N),Il=null}else return p=Fe(b),p!==null&&d9(p),f.blockedOn=b,!1;p.shift()}return!0}function m9(f,p,b){FC(f)&&b.delete(p)}function Hhe(){H3=!1,N0!==null&&FC(N0)&&(N0=null),_0!==null&&FC(_0)&&(_0=null),S0!==null&&FC(S0)&&(S0=null),sy.forEach(m9),iy.forEach(m9)}function OC(f,p){f.blockedOn===p&&(f.blockedOn=null,H3||(H3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hhe)))}var DC=null;function p9(f){DC!==f&&(DC=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){DC===f&&(DC=null);for(var p=0;p<f.length;p+=3){var b=f[p],N=f[p+1],Q=f[p+2];if(typeof N!="function"){if(Q3(N||b)===null)continue;break}var W=Fe(b);W!==null&&(f.splice(p,3),p-=3,vu(W,{pending:!0,data:Q,method:b.method,action:N},N,Q))}}))}function ly(f){function p(Pe){return OC(Pe,f)}N0!==null&&OC(N0,f),_0!==null&&OC(_0,f),S0!==null&&OC(S0,f),sy.forEach(p),iy.forEach(p);for(var b=0;b<k0.length;b++){var N=k0[b];N.blockedOn===f&&(N.blockedOn=null)}for(;0<k0.length&&(b=k0[0],b.blockedOn===null);)h9(b),b.blockedOn===null&&k0.shift();if(b=(f.ownerDocument||f).$$reactFormReplay,b!=null)for(N=0;N<b.length;N+=3){var Q=b[N],W=b[N+1],de=Q[xr]||null;if(typeof W=="function")de||p9(b);else if(de){var ye=null;if(W&&W.hasAttribute("formAction")){if(Q=W,de=W[xr]||null)ye=de.formAction;else if(Q3(Q)!==null)continue}else ye=de.action;typeof ye=="function"?b[N+1]=ye:(b.splice(N,3),N-=3),p9(b)}}}function V3(f){this._internalRoot=f}PC.prototype.render=V3.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,N=Sc();c9(b,N,f,p,null,null)},PC.prototype.unmount=V3.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;c9(f.current,2,null,f,null,null),gC(),p[Wr]=null}};function PC(f){this._internalRoot=f}PC.prototype.unstable_scheduleHydration=function(f){if(f){var p=xt();f={blockedOn:null,target:f,priority:p};for(var b=0;b<k0.length&&p!==0&&p<k0[b].priority;b++);k0.splice(b,0,f),b===0&&h9(f)}};var g9=t.version;if(g9!=="19.1.1")throw Error(n(527,g9,"19.1.1"));q.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=c(p),f=f!==null?u(f):null,f=f===null?null:f.stateNode,f};var Vhe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RC.isDisabled&&RC.supportsFiber)try{gt=RC.inject(Vhe),It=RC}catch{}}return uy.createRoot=function(f,p){if(!a(f))throw Error(n(299));var b=!1,N="",Q=FU,W=OU,de=DU,ye=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(N=p.identifierPrefix),p.onUncaughtError!==void 0&&(Q=p.onUncaughtError),p.onCaughtError!==void 0&&(W=p.onCaughtError),p.onRecoverableError!==void 0&&(de=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ye=p.unstable_transitionCallbacks)),p=o9(f,1,!1,null,null,b,N,Q,W,de,ye,null),f[Wr]=p.current,N3(f),new V3(p)},uy.hydrateRoot=function(f,p,b){if(!a(f))throw Error(n(299));var N=!1,Q="",W=FU,de=OU,ye=DU,Pe=null,lt=null;return b!=null&&(b.unstable_strictMode===!0&&(N=!0),b.identifierPrefix!==void 0&&(Q=b.identifierPrefix),b.onUncaughtError!==void 0&&(W=b.onUncaughtError),b.onCaughtError!==void 0&&(de=b.onCaughtError),b.onRecoverableError!==void 0&&(ye=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Pe=b.unstable_transitionCallbacks),b.formState!==void 0&&(lt=b.formState)),p=o9(f,1,!0,p,b??null,N,Q,W,de,ye,Pe,lt),p.context=l9(null),b=p.current,N=Sc(),N=mt(N),Q=_t(N),Q.callback=null,Tt(b,Q,N),b=N,p.current.lanes=b,ja(p,b),kA(p),f[Wr]=p.current,N3(f),new PC(p)},uy.version="19.1.1",uy}var S9;function n0e(){if(S9)return K3.exports;S9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K3.exports=r0e(),K3.exports}var a0e=n0e();const s0e=jl(a0e);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var k9="popstate";function i0e(e={}){function t(n,a){let{pathname:s,search:i,hash:l}=n.location;return G6("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Hw(a)}return l0e(t,r,null,e)}function ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function af(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function o0e(){return Math.random().toString(36).substring(2,10)}function j9(e,t){return{usr:e.state,key:e.key,idx:t}}function G6(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?H1(t):t,state:r,key:t&&t.key||n||o0e()}}function Hw({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function H1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function l0e(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function A(){l="POP";let v=d(),y=v==null?null:v-u;u=v,c&&c({action:l,location:x.location,delta:y})}function h(v,y){l="PUSH";let w=G6(x.location,v,y);u=d()+1;let _=j9(w,u),j=x.createHref(w);try{i.pushState(_,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}s&&c&&c({action:l,location:x.location,delta:1})}function m(v,y){l="REPLACE";let w=G6(x.location,v,y);u=d();let _=j9(w,u),j=x.createHref(w);i.replaceState(_,"",j),s&&c&&c({action:l,location:x.location,delta:0})}function g(v){return c0e(v)}let x={get action(){return l},get location(){return e(a,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(k9,A),c=v,()=>{a.removeEventListener(k9,A),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let y=g(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(v){return i.go(v)}};return x}function c0e(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ls(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Hw(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function bJ(e,t,r="/"){return u0e(e,t,r,!1)}function u0e(e,t,r,n){let a=typeof t=="string"?H1(t):t,s=yh(a.pathname||"/",r);if(s==null)return null;let i=yJ(e);d0e(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=w0e(s);l=b0e(i[c],u,n)}return l}function yJ(e,t=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;ls(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let A=dh([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(ls(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),yJ(i.children,t,h,A,c)),!(i.path==null&&!i.index)&&t.push({path:A,score:x0e(A,i.index),routesMeta:h})};return e.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of wJ(i.path))s(i,l,!0,u)}),t}function wJ(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=wJ(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function d0e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:v0e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var A0e=/^:[\w-]+$/,f0e=3,h0e=2,m0e=1,p0e=10,g0e=-2,B9=e=>e==="*";function x0e(e,t){let r=e.split("/"),n=r.length;return r.some(B9)&&(n+=g0e),t&&(n+=h0e),r.filter(a=>!B9(a)).reduce((a,s)=>a+(A0e.test(s)?f0e:s===""?m0e:p0e),n)}function v0e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function b0e(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",A=l_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!A&&u&&r&&!n[n.length-1].route.index&&(A=l_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!A)return null;Object.assign(a,A.params),i.push({params:a,pathname:dh([s,A.pathname]),pathnameBase:_0e(dh([s,A.pathnameBase])),route:h}),A.pathnameBase!=="/"&&(s=dh([s,A.pathnameBase]))}return i}function l_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=y0e(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:A},h)=>{if(d==="*"){let g=l[h]||"";i=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[h];return A&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function y0e(e,t=!1,r=!0){af(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function w0e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return af(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function yh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function E0e(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?H1(e):e;return{pathname:r?r.startsWith("/")?r:C0e(r,t):t,search:S0e(n),hash:k0e(a)}}function C0e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Y3(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function N0e(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function EJ(e){let t=N0e(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function CJ(e,t,r,n=!1){let a;typeof e=="string"?a=H1(e):(a={...e},ls(!a.pathname||!a.pathname.includes("?"),Y3("?","pathname","search",a)),ls(!a.pathname||!a.pathname.includes("#"),Y3("#","pathname","hash",a)),ls(!a.search||!a.search.includes("#"),Y3("#","search","hash",a)));let s=e===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let A=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),A-=1;a.pathname=h.join("/")}l=A>=0?t[A]:"/"}let c=E0e(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var dh=e=>e.join("/").replace(/\/\/+/g,"/"),_0e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),S0e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,k0e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function j0e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var NJ=["POST","PUT","PATCH","DELETE"];new Set(NJ);var B0e=["GET",...NJ];new Set(B0e);var V1=C.createContext(null);V1.displayName="DataRouter";var g4=C.createContext(null);g4.displayName="DataRouterState";C.createContext(!1);var _J=C.createContext({isTransitioning:!1});_J.displayName="ViewTransition";var T0e=C.createContext(new Map);T0e.displayName="Fetchers";var I0e=C.createContext(null);I0e.displayName="Await";var cf=C.createContext(null);cf.displayName="Navigation";var H2=C.createContext(null);H2.displayName="Location";var Mh=C.createContext({outlet:null,matches:[],isDataRoute:!1});Mh.displayName="Route";var nP=C.createContext(null);nP.displayName="RouteError";function F0e(e,{relative:t}={}){ls(V2(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(cf),{hash:a,pathname:s,search:i}=z2(e,{relative:t}),l=s;return r!=="/"&&(l=s==="/"?r:dh([r,s])),n.createHref({pathname:l,search:i,hash:a})}function V2(){return C.useContext(H2)!=null}function Qm(){return ls(V2(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(H2).location}var SJ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kJ(e){C.useContext(cf).static||C.useLayoutEffect(e)}function jJ(){let{isDataRoute:e}=C.useContext(Mh);return e?G0e():O0e()}function O0e(){ls(V2(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(V1),{basename:t,navigator:r}=C.useContext(cf),{matches:n}=C.useContext(Mh),{pathname:a}=Qm(),s=JSON.stringify(EJ(n)),i=C.useRef(!1);return kJ(()=>{i.current=!0}),C.useCallback((c,u={})=>{if(af(i.current,SJ),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=CJ(c,JSON.parse(s),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:dh([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,s,a,e])}C.createContext(null);function z2(e,{relative:t}={}){let{matches:r}=C.useContext(Mh),{pathname:n}=Qm(),a=JSON.stringify(EJ(r));return C.useMemo(()=>CJ(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function D0e(e,t){return BJ(e,t)}function BJ(e,t,r,n,a){var w;ls(V2(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(cf),{matches:i}=C.useContext(Mh),l=i[i.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",A=l&&l.route;{let _=A&&A.path||"";TJ(u,!A||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=Qm(),m;if(t){let _=typeof t=="string"?H1(t):t;ls(d==="/"||((w=_.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),m=_}else m=h;let g=m.pathname||"/",x=g;if(d!=="/"){let _=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=bJ(e,{pathname:x});af(A||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),af(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=U0e(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:dh([d,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:dh([d,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n,a);return t&&y?C.createElement(H2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function P0e(){let e=$0e(),t=j0e(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:s},"ErrorBoundary")," or"," ",C.createElement("code",{style:s},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:a},r):null,i)}var R0e=C.createElement(P0e,null),L0e=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?C.createElement(Mh.Provider,{value:this.props.routeContext},C.createElement(nP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function M0e({routeContext:e,match:t,children:r}){let n=C.useContext(V1);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(Mh.Provider,{value:e},r)}function U0e(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);ls(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:A,errors:h}=r,m=d.route.loader&&!A.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,A)=>{let h,m=!1,g=null,x=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,g=d.route.errorElement||R0e,l&&(c<0&&A===0?(TJ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,x=null):c===A&&(m=!0,x=d.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,A+1)),y=()=>{let w;return h?w=g:m?w=x:d.route.Component?w=C.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,C.createElement(M0e,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:w})};return r&&(d.route.ErrorBoundary||d.route.errorElement||A===0)?C.createElement(L0e,{location:r.location,revalidation:r.revalidation,component:g,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:n}):y()},null)}function aP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q0e(e){let t=C.useContext(V1);return ls(t,aP(e)),t}function H0e(e){let t=C.useContext(g4);return ls(t,aP(e)),t}function V0e(e){let t=C.useContext(Mh);return ls(t,aP(e)),t}function sP(e){let t=V0e(e),r=t.matches[t.matches.length-1];return ls(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function z0e(){return sP("useRouteId")}function $0e(){var n;let e=C.useContext(nP),t=H0e("useRouteError"),r=sP("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function G0e(){let{router:e}=Q0e("useNavigate"),t=sP("useNavigate"),r=C.useRef(!1);return kJ(()=>{r.current=!0}),C.useCallback(async(a,s={})=>{af(r.current,SJ),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var T9={};function TJ(e,t,r){!t&&!T9[e]&&(T9[e]=!0,af(!1,r))}C.memo(K0e);function K0e({routes:e,future:t,state:r,unstable_onError:n}){return BJ(e,void 0,r,n,t)}function K6(e){ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function q0e({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){ls(!V2(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=H1(r));let{pathname:c="/",search:u="",hash:d="",state:A=null,key:h="default"}=r,m=C.useMemo(()=>{let g=yh(c,i);return g==null?null:{location:{pathname:g,search:u,hash:d,state:A,key:h},navigationType:n}},[i,c,u,d,A,h,n]);return af(m!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:C.createElement(cf.Provider,{value:l},C.createElement(H2.Provider,{children:t,value:m}))}function W0e({children:e,location:t}){return D0e(q6(e),t)}function q6(e,t=[]){let r=[];return C.Children.forEach(e,(n,a)=>{if(!C.isValidElement(n))return;let s=[...t,a];if(n.type===C.Fragment){r.push.apply(r,q6(n.props.children,s));return}ls(n.type===K6,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ls(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=q6(n.props.children,s)),r.push(i)}),r}var p5="get",g5="application/x-www-form-urlencoded";function x4(e){return e!=null&&typeof e.tagName=="string"}function X0e(e){return x4(e)&&e.tagName.toLowerCase()==="button"}function Y0e(e){return x4(e)&&e.tagName.toLowerCase()==="form"}function J0e(e){return x4(e)&&e.tagName.toLowerCase()==="input"}function Z0e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eme(e,t){return e.button===0&&(!t||t==="_self")&&!Z0e(e)}var LC=null;function tme(){if(LC===null)try{new FormData(document.createElement("form"),0),LC=!1}catch{LC=!0}return LC}var rme=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function J3(e){return e!=null&&!rme.has(e)?(af(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${g5}"`),null):e}function nme(e,t){let r,n,a,s,i;if(Y0e(e)){let l=e.getAttribute("action");n=l?yh(l,t):null,r=e.getAttribute("method")||p5,a=J3(e.getAttribute("enctype"))||g5,s=new FormData(e)}else if(X0e(e)||J0e(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?yh(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||p5,a=J3(e.getAttribute("formenctype"))||J3(l.getAttribute("enctype"))||g5,s=new FormData(l,e),!tme()){let{name:u,type:d,value:A}=e;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,A)}}else{if(x4(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=p5,n=null,a=g5,i=e}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iP(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ame(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&yh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function sme(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ime(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ome(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let i=await sme(s,r);return i.links?i.links():[]}return[]}));return dme(n.flat(1).filter(ime).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function I9(e,t,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?t.filter((c,u)=>{var A;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=r[0])==null?void 0:A.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function lme(e,t,{includeHydrateFallback:r}={}){return cme(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function cme(e){return[...new Set(e)]}function ume(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function dme(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify(ume(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function IJ(){let e=C.useContext(V1);return iP(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ame(){let e=C.useContext(g4);return iP(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oP=C.createContext(void 0);oP.displayName="FrameworkContext";function FJ(){let e=C.useContext(oP);return iP(e,"You must render this element inside a <HydratedRouter> element"),e}function fme(e,t){let r=C.useContext(oP),[n,a]=C.useState(!1),[s,i]=C.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:A}=t,h=C.useRef(null);C.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=y=>{y.forEach(w=>{i(w.isIntersecting)})},v=new IntersectionObserver(x,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),C.useEffect(()=>{if(n){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[n]);let m=()=>{a(!0)},g=()=>{a(!1),i(!1)};return r?e!=="intent"?[s,h,{}]:[s,h,{onFocus:dy(l,m),onBlur:dy(c,g),onMouseEnter:dy(u,m),onMouseLeave:dy(d,g),onTouchStart:dy(A,m)}]:[!1,h,{}]}function dy(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function hme({page:e,...t}){let{router:r}=IJ(),n=C.useMemo(()=>bJ(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(pme,{page:e,matches:n,...t}):null}function mme(e){let{manifest:t,routeModules:r}=FJ(),[n,a]=C.useState([]);return C.useEffect(()=>{let s=!1;return ome(e,t,r).then(i=>{s||a(i)}),()=>{s=!0}},[e,t,r]),n}function pme({page:e,matches:t,...r}){let n=Qm(),{manifest:a,routeModules:s}=FJ(),{basename:i}=IJ(),{loaderData:l,matches:c}=Ame(),u=C.useMemo(()=>I9(e,t,c,a,n,"data"),[e,t,c,a,n]),d=C.useMemo(()=>I9(e,t,c,a,n,"assets"),[e,t,c,a,n]),A=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,x=!1;if(t.forEach(y=>{var _;let w=a.routes[y.route.id];!w||!w.hasLoader||(!u.some(j=>j.route.id===y.route.id)&&y.route.id in l&&((_=s[y.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?x=!0:g.add(y.route.id))}),g.size===0)return[];let v=ame(e,i,"data");return x&&g.size>0&&v.searchParams.set("_routes",t.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[i,l,n,a,u,t,e,s]),h=C.useMemo(()=>lme(d,a),[d,a]),m=mme(d);return C.createElement(C.Fragment,null,A.map(g=>C.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>C.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),m.map(({key:g,link:x})=>C.createElement("link",{key:g,nonce:r.nonce,...x})))}function gme(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var OJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OJ&&(window.__reactRouterVersion="7.8.2")}catch{}function xme({basename:e,children:t,window:r}){let n=C.useRef();n.current==null&&(n.current=i0e({window:r,v5Compat:!0}));let a=n.current,[s,i]=C.useState({action:a.action,location:a.location}),l=C.useCallback(c=>{C.startTransition(()=>i(c))},[i]);return C.useLayoutEffect(()=>a.listen(l),[a,l]),C.createElement(q0e,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var DJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PJ=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:A,...h},m){let{basename:g}=C.useContext(cf),x=typeof u=="string"&&DJ.test(u),v,y=!1;if(typeof u=="string"&&x&&(v=u,OJ))try{let B=new URL(window.location.href),R=u.startsWith("//")?new URL(B.protocol+u):new URL(u),P=yh(R.pathname,g);R.origin===B.origin&&P!=null?u=P+R.search+R.hash:y=!0}catch{af(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=F0e(u,{relative:a}),[_,j,k]=fme(n,h),I=wme(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:A});function E(B){t&&t(B),B.defaultPrevented||I(B)}let S=C.createElement("a",{...h,...k,href:v||w,onClick:y||s?t:E,ref:gme(m,j),target:c,"data-discover":!x&&r==="render"?"true":void 0});return _&&!x?C.createElement(C.Fragment,null,S,C.createElement(hme,{page:w})):S});PJ.displayName="Link";var vme=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let A=z2(i,{relative:u.relative}),h=Qm(),m=C.useContext(g4),{navigator:g,basename:x}=C.useContext(cf),v=m!=null&&Sme(A)&&l===!0,y=g.encodeLocation?g.encodeLocation(A).pathname:A.pathname,w=h.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&x&&(_=yh(_,x)||_);const j=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=w===y||!a&&w.startsWith(y)&&w.charAt(j)==="/",I=_!=null&&(_===y||!a&&_.startsWith(y)&&_.charAt(y.length)==="/"),E={isActive:k,isPending:I,isTransitioning:v},S=k?t:void 0,B;typeof n=="function"?B=n(E):B=[n,k?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(E):s;return C.createElement(PJ,{...u,"aria-current":S,className:B,ref:d,style:R,to:i,viewTransition:l},typeof c=="function"?c(E):c)});vme.displayName="NavLink";var bme=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:i=p5,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:A,...h},m)=>{let g=Nme(),x=_me(l,{relative:u}),v=i.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&DJ.test(l),w=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||i;g(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:A})};return C.createElement("form",{ref:m,method:v,action:x,onSubmit:n?c:w,...h,"data-discover":!y&&e==="render"?"true":void 0})});bme.displayName="Form";function yme(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RJ(e){let t=C.useContext(V1);return ls(t,yme(e)),t}function wme(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=jJ(),c=Qm(),u=z2(e,{relative:s});return C.useCallback(d=>{if(eme(d,t)){d.preventDefault();let A=r!==void 0?r:Hw(c)===Hw(u);l(e,{replace:A,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,t,e,a,s,i])}var Eme=0,Cme=()=>`__${String(++Eme)}__`;function Nme(){let{router:e}=RJ("useSubmit"),{basename:t}=C.useContext(cf),r=z0e();return C.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=nme(n,t);if(a.navigate===!1){let d=a.fetcherKey||Cme();await e.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function _me(e,{relative:t}={}){let{basename:r}=C.useContext(cf),n=C.useContext(Mh);ls(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...z2(e||".",{relative:t})},i=Qm();if(e==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(A=>A).forEach(A=>l.append("index",A));let d=l.toString();s.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:dh([r,s.pathname])),Hw(s)}function Sme(e,{relative:t}={}){let r=C.useContext(_J);ls(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=RJ("useViewTransitionState"),a=z2(e,{relative:t});if(!r.isTransitioning)return!1;let s=yh(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=yh(r.nextLocation.pathname,n)||r.nextLocation.pathname;return l_(a.pathname,i)!=null||l_(a.pathname,s)!=null}var lP=vJ();const kme=()=>{};var F9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},jme=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},MJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,l=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,A=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,i||(h=64)),n.push(r[d],r[A],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(LJ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):jme(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const A=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||A==null)throw new Bme;const h=s<<2|l>>4;if(n.push(h),u!==64){const m=l<<4&240|u>>2;if(n.push(m),A!==64){const g=u<<6&192|A;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bme extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tme=function(e){const t=LJ(e);return MJ.encodeByteArray(t,!0)},c_=function(e){return Tme(e).replace(/\./g,"")},UJ=function(e){try{return MJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ime(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=()=>Ime().__FIREBASE_DEFAULTS__,Ome=()=>{if(typeof process>"u"||typeof F9>"u")return;const e=F9.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Dme=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&UJ(e[1]);return t&&JSON.parse(t)},v4=()=>{try{return kme()||Fme()||Ome()||Dme()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},QJ=e=>{var t,r;return(r=(t=v4())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},cP=e=>{const t=QJ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},HJ=()=>{var e;return(e=v4())==null?void 0:e.config},VJ=e=>{var t;return(t=v4())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function b4(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[c_(JSON.stringify(r)),c_(JSON.stringify(i)),""].join(".")}const dw={};function Rme(){const e={prod:[],emulator:[]};for(const t of Object.keys(dw))dw[t]?e.emulator.push(t):e.prod.push(t);return e}function Lme(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let O9=!1;function y4(e,t){if(typeof window>"u"||typeof document>"u"||!Uh(window.location.host)||dw[e]===t||dw[e]||O9)return;dw[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Rme().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{O9=!0,i()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function A(){const h=Lme(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;l(_),d(v,x);const j=u();c(w,y),_.append(w,g,v,j),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mme(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(il())}function Ume(){var t;const e=(t=v4())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qme(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hme(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Vme(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zme(){const e=il();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $me(){return!Ume()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gme(){try{return typeof indexedDB=="object"}catch{return!1}}function Kme(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qme="FirebaseError";class Gd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=qme,Object.setPrototypeOf(this,Gd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$2.prototype.create)}}class $2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?Wme(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new Gd(a,l,n)}}function Wme(e,t){return e.replace(Xme,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const Xme=/\{\$([^}]+)}/g;function Yme(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function bm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(D9(s)&&D9(i)){if(!bm(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function D9(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Hy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Vy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Jme(e,t){const r=new Zme(e,t);return r.subscribe.bind(r)}class Zme{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");epe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=Z3),a.error===void 0&&(a.error=Z3),a.complete===void 0&&(a.complete=Z3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function epe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function Z3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class wh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tpe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Pme;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(npe(t))try{this.getOrInitializeService({instanceIdentifier:jp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=jp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jp){return this.instances.has(t)}getOptions(t=jp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rpe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=jp){return this.component?this.component.multipleInstances?t:jp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rpe(e){return e===jp?void 0:e}function npe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ape{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new tpe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kn||(kn={}));const spe={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},ipe=kn.INFO,ope={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},lpe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=ope[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let uP=class{constructor(t){this.name=t,this._logLevel=ipe,this._logHandler=lpe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?spe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}};const cpe=(e,t)=>t.some(r=>e instanceof r);let P9,R9;function upe(){return P9||(P9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dpe(){return R9||(R9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $J=new WeakMap,W6=new WeakMap,GJ=new WeakMap,eB=new WeakMap,dP=new WeakMap;function Ape(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(im(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&$J.set(r,e)}).catch(()=>{}),dP.set(t,e),t}function fpe(e){if(W6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});W6.set(e,t)}let X6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return W6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||GJ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return im(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function hpe(e){X6=e(X6)}function mpe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(tB(this),t,...r);return GJ.set(n,t.sort?t.sort():[t]),im(n)}:dpe().includes(e)?function(...t){return e.apply(tB(this),t),im($J.get(this))}:function(...t){return im(e.apply(tB(this),t))}}function ppe(e){return typeof e=="function"?mpe(e):(e instanceof IDBTransaction&&fpe(e),cpe(e,upe())?new Proxy(e,X6):e)}function im(e){if(e instanceof IDBRequest)return Ape(e);if(eB.has(e))return eB.get(e);const t=ppe(e);return t!==e&&(eB.set(e,t),dP.set(t,e)),t}const tB=e=>dP.get(e);function gpe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),l=im(i);return n&&i.addEventListener("upgradeneeded",c=>{n(im(i.result),c.oldVersion,c.newVersion,im(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const xpe=["get","getKey","getAll","getAllKeys","count"],vpe=["put","add","delete","clear"],rB=new Map;function L9(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rB.get(t))return rB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=vpe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||xpe.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return rB.set(t,s),s}hpe(e=>({...e,get:(t,r,n)=>L9(t,r)||e.get(t,r,n),has:(t,r)=>!!L9(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ype(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ype(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Y6="@firebase/app",M9="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new uP("@firebase/app"),wpe="@firebase/app-compat",Epe="@firebase/analytics-compat",Cpe="@firebase/analytics",Npe="@firebase/app-check-compat",_pe="@firebase/app-check",Spe="@firebase/auth",kpe="@firebase/auth-compat",jpe="@firebase/database",Bpe="@firebase/data-connect",Tpe="@firebase/database-compat",Ipe="@firebase/functions",Fpe="@firebase/functions-compat",Ope="@firebase/installations",Dpe="@firebase/installations-compat",Ppe="@firebase/messaging",Rpe="@firebase/messaging-compat",Lpe="@firebase/performance",Mpe="@firebase/performance-compat",Upe="@firebase/remote-config",Qpe="@firebase/remote-config-compat",Hpe="@firebase/storage",Vpe="@firebase/storage-compat",zpe="@firebase/firestore",$pe="@firebase/ai",Gpe="@firebase/firestore-compat",Kpe="firebase",qpe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="[DEFAULT]",Wpe={[Y6]:"fire-core",[wpe]:"fire-core-compat",[Cpe]:"fire-analytics",[Epe]:"fire-analytics-compat",[_pe]:"fire-app-check",[Npe]:"fire-app-check-compat",[Spe]:"fire-auth",[kpe]:"fire-auth-compat",[jpe]:"fire-rtdb",[Bpe]:"fire-data-connect",[Tpe]:"fire-rtdb-compat",[Ipe]:"fire-fn",[Fpe]:"fire-fn-compat",[Ope]:"fire-iid",[Dpe]:"fire-iid-compat",[Ppe]:"fire-fcm",[Rpe]:"fire-fcm-compat",[Lpe]:"fire-perf",[Mpe]:"fire-perf-compat",[Upe]:"fire-rc",[Qpe]:"fire-rc-compat",[Hpe]:"fire-gcs",[Vpe]:"fire-gcs-compat",[zpe]:"fire-fst",[Gpe]:"fire-fst-compat",[$pe]:"fire-vertex","fire-js":"fire-js",[Kpe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map,Xpe=new Map,Z6=new Map;function U9(e,t){try{e.container.addComponent(t)}catch(r){Eh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function ym(e){const t=e.name;if(Z6.has(t))return Eh.debug(`There were multiple attempts to register component ${t}.`),!1;Z6.set(t,e);for(const r of Vw.values())U9(r,e);for(const r of Xpe.values())U9(r,e);return!0}function K2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Rc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ype={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},om=new $2("app","Firebase",Ype);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jpe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw om.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=qpe;function AP(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:J6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw om.create("bad-app-name",{appName:String(a)});if(r||(r=HJ()),!r)throw om.create("no-options");const s=Vw.get(a);if(s){if(bm(r,s.options)&&bm(n,s.config))return s;throw om.create("duplicate-app",{appName:a})}const i=new ape(a);for(const c of Z6.values())i.addComponent(c);const l=new Jpe(r,n,i);return Vw.set(a,l),l}function w4(e=J6){const t=Vw.get(e);if(!t&&e===J6&&HJ())return AP();if(!t)throw om.create("no-app",{appName:e});return t}function Q9(){return Array.from(Vw.values())}function zu(e,t,r){let n=Wpe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Eh.warn(i.join(" "));return}ym(new wh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpe="firebase-heartbeat-database",ege=1,zw="firebase-heartbeat-store";let nB=null;function KJ(){return nB||(nB=gpe(Zpe,ege,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(zw)}catch(r){console.warn(r)}}}}).catch(e=>{throw om.create("idb-open",{originalErrorMessage:e.message})})),nB}async function tge(e){try{const r=(await KJ()).transaction(zw),n=await r.objectStore(zw).get(qJ(e));return await r.done,n}catch(t){if(t instanceof Gd)Eh.warn(t.message);else{const r=om.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Eh.warn(r.message)}}}async function H9(e,t){try{const n=(await KJ()).transaction(zw,"readwrite");await n.objectStore(zw).put(t,qJ(e)),await n.done}catch(r){if(r instanceof Gd)Eh.warn(r.message);else{const n=om.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Eh.warn(n.message)}}}function qJ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rge=1024,nge=30;class age{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ige(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>nge){const i=oge(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Eh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=V9(),{heartbeatsToSend:n,unsentEntries:a}=sge(this._heartbeatsCache.heartbeats),s=c_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Eh.warn(r),""}}}function V9(){return new Date().toISOString().substring(0,10)}function sge(e,t=rge){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),z9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),z9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ige{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gme()?Kme().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await tge(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return H9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return H9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function z9(e){return c_(JSON.stringify({version:2,heartbeats:e})).length}function oge(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lge(e){ym(new wh("platform-logger",t=>new bpe(t),"PRIVATE")),ym(new wh("heartbeat",t=>new age(t),"PRIVATE")),zu(Y6,M9,e),zu(Y6,M9,"esm2020"),zu("fire-js","")}lge("");function WJ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cge=WJ,XJ=new $2("auth","Firebase",WJ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new uP("@firebase/auth");function uge(e,...t){u_.logLevel<=kn.WARN&&u_.warn(`Auth (${Mg}): ${e}`,...t)}function x5(e,...t){u_.logLevel<=kn.ERROR&&u_.error(`Auth (${Mg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(e,...t){throw fP(e,...t)}function XA(e,...t){return fP(e,...t)}function YJ(e,t,r){const n={...cge(),[t]:r};return new $2("auth","Firebase",n).create(t,{appName:e.name})}function lm(e){return YJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fP(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return XJ.create(e,...t)}function Vr(e,t,...r){if(!e)throw fP(t,...r)}function th(e){const t="INTERNAL ASSERTION FAILED: "+e;throw x5(t),new Error(t)}function Ch(e,t){e||th(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function dge(){return $9()==="http:"||$9()==="https:"}function $9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Age(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dge()||Hme()||"connection"in navigator)?navigator.onLine:!0}function fge(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(t,r){this.shortDelay=t,this.longDelay=r,Ch(r>t,"Short delay should be less than long delay!"),this.isMobile=Mme()||Vme()}get(){return Age()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(e,t){Ch(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;th("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;th("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;th("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pge=new q2(3e4,6e4);function Hm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Qh(e,t,r,n,a={}){return ZJ(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const l=G2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Qme()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Uh(e.emulatorConfig.host)&&(u.credentials="include"),JJ.fetch()(await eZ(e,e.config.apiHost,r,l),u)})}async function ZJ(e,t,r){e._canInitEmulator=!1;const n={...hge,...t};try{const a=new xge(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw MC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw MC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw MC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw MC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw YJ(e,d,u);Hd(e,d)}}catch(a){if(a instanceof Gd)throw a;Hd(e,"network-request-failed",{message:String(a)})}}async function E4(e,t,r,n,a={}){const s=await Qh(e,t,r,n,a);return"mfaPendingCredential"in s&&Hd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function eZ(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?hP(e.config,a):`${e.config.apiScheme}://${a}`;return mge.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function gge(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xge{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(XA(this.auth,"network-request-failed")),pge.get())})}}function MC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=XA(e,t,n);return a.customData._tokenResponse=r,a}function G9(e){return e!==void 0&&e.enterprise!==void 0}class vge{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return gge(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bge(e,t){return Qh(e,"GET","/v2/recaptchaConfig",Hm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yge(e,t){return Qh(e,"POST","/v1/accounts:delete",t)}async function d_(e,t){return Qh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wge(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=mP(n);Vr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Aw(aB(a.auth_time)),issuedAtTime:Aw(aB(a.iat)),expirationTime:Aw(aB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function aB(e){return Number(e)*1e3}function mP(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return x5("JWT malformed, contained fewer than 3 sections"),null;try{const a=UJ(r);return a?JSON.parse(a):(x5("Failed to decode base64 JWT payload"),null)}catch(a){return x5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function K9(e){const t=mP(e);return Vr(t,"internal-error"),Vr(typeof t.exp<"u","internal-error"),Vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Gd&&Ege(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Ege({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aw(this.lastLoginAt),this.creationTime=Aw(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(e){var A;const t=e.auth,r=await e.getIdToken(),n=await $w(e,d_(t,{idToken:r}));Vr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(A=a.providerUserInfo)!=null&&A.length?tZ(a.providerUserInfo):[],i=_ge(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new tF(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function Nge(e){const t=Yn(e);await A_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _ge(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function tZ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sge(e,t){const r=await ZJ(e,{},async()=>{const n=G2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await eZ(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&Uh(e.emulatorConfig.host)&&(c.credentials="include"),JJ.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function kge(e,t){return Qh(e,"POST","/v2/accounts:revokeToken",Hm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vr(t.idToken,"internal-error"),Vr(typeof t.idToken<"u","internal-error"),Vr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):K9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Vr(t.length!==0,"internal-error");const r=K9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Vr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Sge(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Iv;return n&&(Vr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Vr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Vr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Iv,this.toJSON())}_performRefresh(){return th("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e,t){Vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Td{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Cge(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new tF(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await $w(this,this.stsTokenManager.getToken(this.auth,t));return Vr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return wge(this,t)}reload(){return Nge(this)}_assign(t){this!==t&&(Vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Td({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await A_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rc(this.auth.app))return Promise.reject(lm(this.auth));const t=await this.getIdToken();return await $w(this,yge(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:A,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Vr(A&&x,t,"internal-error");const v=Iv.fromJSON(this.name,x);Vr(typeof A=="string",t,"internal-error"),B0(n,t.name),B0(a,t.name),Vr(typeof h=="boolean",t,"internal-error"),Vr(typeof m=="boolean",t,"internal-error"),B0(s,t.name),B0(i,t.name),B0(l,t.name),B0(c,t.name),B0(u,t.name),B0(d,t.name);const y=new Td({uid:A,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:i,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Iv;a.updateFromServerResponse(r);const s=new Td({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await A_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Vr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?tZ(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Iv;l.updateFromIdToken(n);const c=new Td({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new tF(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new Map;function rh(e){Ch(e instanceof Function,"Expected a class definition");let t=q9.get(e);return t?(Ch(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,q9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}rZ.type="NONE";const W9=rZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(e,t,r){return`firebase:${e}:${t}:${r}`}class Fv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=v5(this.userKey,a.apiKey,s),this.fullPersistenceKey=v5("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await d_(this.auth,{idToken:t}).catch(()=>{});return r?Td._fromGetAccountInfoResponse(this.auth,r,t):null}return Td._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Fv(rh(W9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||rh(W9);const i=v5(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){let A;if(typeof d=="string"){const h=await d_(t,{idToken:d}).catch(()=>{});if(!h)break;A=await Td._fromGetAccountInfoResponse(t,h,d)}else A=Td._fromJSON(t,d);u!==s&&(l=A),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Fv(s,t,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Fv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(iZ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nZ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lZ(t))return"Blackberry";if(cZ(t))return"Webos";if(aZ(t))return"Safari";if((t.includes("chrome/")||sZ(t))&&!t.includes("edge/"))return"Chrome";if(oZ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function nZ(e=il()){return/firefox\//i.test(e)}function aZ(e=il()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sZ(e=il()){return/crios\//i.test(e)}function iZ(e=il()){return/iemobile/i.test(e)}function oZ(e=il()){return/android/i.test(e)}function lZ(e=il()){return/blackberry/i.test(e)}function cZ(e=il()){return/webos/i.test(e)}function pP(e=il()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jge(e=il()){var t;return pP(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Bge(){return zme()&&document.documentMode===10}function uZ(e=il()){return pP(e)||oZ(e)||cZ(e)||lZ(e)||/windows phone/i.test(e)||iZ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(e,t=[]){let r;switch(e){case"Browser":r=X9(il());break;case"Worker":r=`${X9(il())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Mg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,l)=>{try{const c=t(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ige(e,t={}){return Qh(e,"GET","/v2/passwordPolicy",Hm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge=6;class Oge{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Fge,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y9(this),this.idTokenSubscription=new Y9(this),this.beforeStateQueue=new Tge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XJ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=rh(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Fv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await d_(this,{idToken:t}),n=await Td._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Rc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await A_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fge()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Rc(this.app))return Promise.reject(lm(this));const r=t?Yn(t):null;return r&&Vr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Rc(this.app)?Promise.reject(lm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Rc(this.app)?Promise.reject(lm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ige(this),r=new Oge(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await kge(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&rh(t)||this._popupRedirectResolver;Vr(r,this,"argument-error"),this.redirectPersistenceManager=await Fv.create(this,[rh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vr(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Rc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&uge(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ug(e){return Yn(e)}class Y9{constructor(t){this.auth=t,this.observer=null,this.addObserver=Jme(r=>this.observer=r)}get next(){return Vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pge(e){C4=e}function AZ(e){return C4.loadJS(e)}function Rge(){return C4.recaptchaEnterpriseScript}function Lge(){return C4.gapiScript}function Mge(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Uge{constructor(){this.enterprise=new Qge}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Qge{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Hge="recaptcha-enterprise",fZ="NO_RECAPTCHA";class Vge{constructor(t){this.type=Hge,this.auth=Ug(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{bge(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new vge(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;G9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(fZ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Uge().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&G9(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Rge();c.length!==0&&(c+=l),AZ(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function J9(e,t,r,n=!1,a=!1){const s=new Vge(e);let i;if(a)i=fZ;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:i}):Object.assign(l,{captchaResponse:i}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function rF(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await J9(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await J9(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zge(e,t){const r=K2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(bm(s,t??{}))return a;Hd(a,"already-initialized")}return r.initialize({options:t})}function $ge(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(rh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Gge(e,t,r){const n=Ug(e);Vr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=hZ(t),{host:i,port:l}=Kge(t),c=l===null?"":`:${l}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Vr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vr(bm(u,n.config.emulator)&&bm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Uh(i)?(b4(`${s}//${i}${c}`),y4("Auth",!0)):qge()}function hZ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kge(e){const t=hZ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:Z9(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:Z9(i)}}}function Z9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function qge(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return th("not implemented")}_getIdTokenResponse(t){return th("not implemented")}_linkToIdToken(t,r){return th("not implemented")}_getReauthenticationResolver(t){return th("not implemented")}}async function Wge(e,t){return Qh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xge(e,t){return E4(e,"POST","/v1/accounts:signInWithPassword",Hm(e,t))}async function Yge(e,t){return Qh(e,"POST","/v1/accounts:sendOobCode",Hm(e,t))}async function Jge(e,t){return Yge(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zge(e,t){return E4(e,"POST","/v1/accounts:signInWithEmailLink",Hm(e,t))}async function exe(e,t){return E4(e,"POST","/v1/accounts:signInWithEmailLink",Hm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends gP{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Gw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Gw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rF(t,r,"signInWithPassword",Xge);case"emailLink":return Zge(t,{email:this._email,oobCode:this._password});default:Hd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rF(t,n,"signUpPassword",Wge);case"emailLink":return exe(t,{idToken:r,email:this._email,oobCode:this._password});default:Hd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ov(e,t){return E4(e,"POST","/v1/accounts:signInWithIdp",Hm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const txe="http://localhost";class mg extends gP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new mg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Hd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new mg(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Ov(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Ov(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Ov(t,r)}buildRequest(){const t={requestUri:txe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=G2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rxe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nxe(e){const t=Hy(Vy(e)).link,r=t?Hy(Vy(t)).deep_link_id:null,n=Hy(Vy(e)).deep_link_id;return(n?Hy(Vy(n)).link:null)||n||r||t||e}class xP{constructor(t){const r=Hy(Vy(t)),n=r.apiKey??null,a=r.oobCode??null,s=rxe(r.mode??null);Vr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=nxe(t);try{return new xP(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.providerId=z1.PROVIDER_ID}static credential(t,r){return Gw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=xP.parseLink(r);return Vr(n,"argument-error"),Gw._fromEmailAndCode(t,n.code,n.tenantId)}}z1.PROVIDER_ID="password";z1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";z1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2 extends mZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends W2{constructor(){super("facebook.com")}static credential(t){return mg._fromParams({providerId:G0.PROVIDER_ID,signInMethod:G0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return G0.credentialFromTaggedObject(t)}static credentialFromError(t){return G0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return G0.credential(t.oauthAccessToken)}catch{return null}}}G0.FACEBOOK_SIGN_IN_METHOD="facebook.com";G0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends W2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return mg._fromParams({providerId:K0.PROVIDER_ID,signInMethod:K0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return K0.credentialFromTaggedObject(t)}static credentialFromError(t){return K0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return K0.credential(r,n)}catch{return null}}}K0.GOOGLE_SIGN_IN_METHOD="google.com";K0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends W2{constructor(){super("github.com")}static credential(t){return mg._fromParams({providerId:q0.PROVIDER_ID,signInMethod:q0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return q0.credentialFromTaggedObject(t)}static credentialFromError(t){return q0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return q0.credential(t.oauthAccessToken)}catch{return null}}}q0.GITHUB_SIGN_IN_METHOD="github.com";q0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends W2{constructor(){super("twitter.com")}static credential(t,r){return mg._fromParams({providerId:W0.PROVIDER_ID,signInMethod:W0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return W0.credentialFromTaggedObject(t)}static credentialFromError(t){return W0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return W0.credential(r,n)}catch{return null}}}W0.TWITTER_SIGN_IN_METHOD="twitter.com";W0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Td._fromIdTokenResponse(t,n,a),i=eQ(n);return new r1({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=eQ(n);return new r1({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function eQ(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends Gd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,f_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new f_(t,r,n,a)}}function pZ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?f_._fromErrorAndOperation(e,s,t,n):s})}async function axe(e,t,r=!1){const n=await $w(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return r1._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sxe(e,t,r=!1){const{auth:n}=e;if(Rc(n.app))return Promise.reject(lm(n));const a="reauthenticate";try{const s=await $w(e,pZ(n,a,t,e),r);Vr(s.idToken,n,"internal-error");const i=mP(s.idToken);Vr(i,n,"internal-error");const{sub:l}=i;return Vr(e.uid===l,n,"user-mismatch"),r1._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gZ(e,t,r=!1){if(Rc(e.app))return Promise.reject(lm(e));const n="signIn",a=await pZ(e,n,t),s=await r1._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function ixe(e,t){return gZ(Ug(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oxe(e){const t=Ug(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function lxe(e,t,r){const n=Ug(e);await rF(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Jge)}function cxe(e,t,r){return Rc(e.app)?Promise.reject(lm(e)):ixe(Yn(e),z1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&oxe(e),n})}function uxe(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function dxe(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function xZ(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function Axe(e){return Yn(e).signOut()}const h_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(h_,"1"),this.storage.removeItem(h_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fxe=1e3,hxe=10;class bZ extends vZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Bge()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,hxe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},fxe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}bZ.type="LOCAL";const mxe=bZ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ extends vZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}yZ.type="SESSION";const wZ=yZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pxe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new N4(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await pxe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}N4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=vP("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(A){const h=A;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return window}function xxe(e){YA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(){return typeof YA().WorkerGlobalScope<"u"&&typeof YA().importScripts=="function"}async function vxe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bxe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function yxe(){return EZ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ="firebaseLocalStorageDb",wxe=1,m_="firebaseLocalStorage",NZ="fbase_key";class X2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _4(e,t){return e.transaction([m_],t?"readwrite":"readonly").objectStore(m_)}function Exe(){const e=indexedDB.deleteDatabase(CZ);return new X2(e).toPromise()}function nF(){const e=indexedDB.open(CZ,wxe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(m_,{keyPath:NZ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(m_)?t(n):(n.close(),await Exe(),t(await nF()))})})}async function tQ(e,t,r){const n=_4(e,!0).put({[NZ]:t,value:r});return new X2(n).toPromise()}async function Cxe(e,t){const r=_4(e,!1).get(t),n=await new X2(r).toPromise();return n===void 0?null:n.value}function rQ(e,t){const r=_4(e,!0).delete(t);return new X2(r).toPromise()}const Nxe=800,_xe=3;class _Z{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nF(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>_xe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EZ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N4._getInstance(yxe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await vxe(),!this.activeServiceWorker)return;this.sender=new gxe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bxe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nF();return await tQ(t,h_,"1"),await rQ(t,h_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>tQ(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Cxe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rQ(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=_4(a,!1).getAll();return new X2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nxe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_Z.type="LOCAL";const Sxe=_Z;new q2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kxe(e,t){return t?rh(t):(Vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP extends gP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ov(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Ov(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Ov(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function jxe(e){return gZ(e.auth,new bP(e),e.bypassAuthState)}function Bxe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),sxe(r,new bP(e),e.bypassAuthState)}async function Txe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),axe(r,new bP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jxe;case"linkViaPopup":case"linkViaRedirect":return Txe;case"reauthViaPopup":case"reauthViaRedirect":return Bxe;default:Hd(this.auth,"internal-error")}}resolve(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ixe=new q2(2e3,1e4);class xv extends SZ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,xv.currentPopupAction&&xv.currentPopupAction.cancel(),xv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vr(t,this.auth,"internal-error"),t}async onExecution(){Ch(this.filter.length===1,"Popup operations only handle one event");const t=vP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(XA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(XA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(XA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ixe.get())};t()}}xv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fxe="pendingRedirect",b5=new Map;class Oxe extends SZ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=b5.get(this.auth._key());if(!t){try{const n=await Dxe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}b5.set(this.auth._key(),t)}return this.bypassAuthState||b5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dxe(e,t){const r=Lxe(t),n=Rxe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Pxe(e,t){b5.set(e._key(),t)}function Rxe(e){return rh(e._redirectPersistence)}function Lxe(e){return v5(Fxe,e.config.apiKey,e.name)}async function Mxe(e,t,r=!1){if(Rc(e.app))return Promise.reject(lm(e));const n=Ug(e),a=kxe(n,t),i=await new Oxe(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uxe=600*1e3;class Qxe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Hxe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!kZ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(XA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Uxe&&this.cachedEventUids.clear(),this.cachedEventUids.has(nQ(t))}saveEventToCache(t){this.cachedEventUids.add(nQ(t)),this.lastProcessedEventTime=Date.now()}}function nQ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function kZ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Hxe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kZ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vxe(e,t={}){return Qh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zxe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$xe=/^https?/;async function Gxe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Vxe(e);for(const r of t)try{if(Kxe(r))return}catch{}Hd(e,"unauthorized-domain")}function Kxe(e){const t=eF(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!$xe.test(r))return!1;if(zxe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qxe=new q2(3e4,6e4);function aQ(){const e=YA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Wxe(e){return new Promise((t,r)=>{var a,s,i;function n(){aQ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{aQ(),r(XA(e,"network-request-failed"))},timeout:qxe.get()})}if((s=(a=YA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=YA().gapi)!=null&&i.load)n();else{const l=Mge("iframefcb");return YA()[l]=()=>{gapi.load?n():r(XA(e,"network-request-failed"))},AZ(`${Lge()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw y5=null,t})}let y5=null;function Xxe(e){return y5=y5||Wxe(e),y5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yxe=new q2(5e3,15e3),Jxe="__/auth/iframe",Zxe="emulator/auth/iframe",eve={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rve(e){const t=e.config;Vr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?hP(t,Zxe):`https://${e.config.authDomain}/${Jxe}`,n={apiKey:t.apiKey,appName:e.name,v:Mg},a=tve.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${G2(n).slice(1)}`}async function nve(e){const t=await Xxe(e),r=YA().gapi;return Vr(r,e,"internal-error"),t.open({where:document.body,url:rve(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eve,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=XA(e,"network-request-failed"),l=YA().setTimeout(()=>{s(i)},Yxe.get());function c(){YA().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ave={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sve=500,ive=600,ove="_blank",lve="http://localhost";class sQ{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cve(e,t,r,n=sve,a=ive){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...ave,width:n.toString(),height:a.toString(),top:s,left:i},u=il().toLowerCase();r&&(l=sZ(u)?ove:r),nZ(u)&&(t=t||lve,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(jge(u)&&l!=="_self")return uve(t||"",l),new sQ(null);const A=window.open(t||"",l,d);Vr(A,e,"popup-blocked");try{A.focus()}catch{}return new sQ(A)}function uve(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dve="__/auth/handler",Ave="emulator/auth/handler",fve=encodeURIComponent("fac");async function iQ(e,t,r,n,a,s){Vr(e.config.authDomain,e,"auth-domain-config-required"),Vr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Mg,eventId:a};if(t instanceof mZ){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",Yme(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,A]of Object.entries({}))i[d]=A}if(t instanceof W2){const d=t.getScopes().filter(A=>A!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${fve}=${encodeURIComponent(c)}`:"";return`${hve(e)}?${G2(l).slice(1)}${u}`}function hve({config:e}){return e.emulator?hP(e,Ave):`https://${e.authDomain}/${dve}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="webStorageSupport";class mve{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wZ,this._completeRedirectFn=Mxe,this._overrideRedirectResult=Pxe}async _openPopup(t,r,n,a){var i;Ch((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await iQ(t,r,n,eF(),a);return cve(t,s,vP())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await iQ(t,r,n,eF(),a);return xxe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Ch(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await nve(t),n=new Qxe(t);return r.register("authEvent",a=>(Vr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(sB,{type:sB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[sB];s!==void 0&&r(!!s),Hd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Gxe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return uZ()||aZ()||pP()}}const pve=mve;var oQ="@firebase/auth",lQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xve(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vve(e){ym(new wh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;Vr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dZ(e)},u=new Dge(n,a,s,c);return $ge(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),ym(new wh("auth-internal",t=>{const r=Ug(t.getProvider("auth").getImmediate());return(n=>new gve(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zu(oQ,lQ,xve(e)),zu(oQ,lQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bve=300,yve=VJ("authIdTokenMaxAge")||bve;let cQ=null;const wve=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>yve)return;const a=r==null?void 0:r.token;cQ!==a&&(cQ=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function jZ(e=w4()){const t=K2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=zge(e,{popupRedirectResolver:pve,persistence:[Sxe,mxe,wZ]}),n=VJ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=wve(s.toString());dxe(r,i,()=>i(r.currentUser)),uxe(r,l=>i(l))}}const a=QJ("auth");return a&&Gge(r,`http://${a}`),r}function Eve(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Pge({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=XA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Eve().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vve("Browser");var Cve="firebase",Nve="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zu(Cve,Nve,"app");var uQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cm,BZ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,S){function B(){}B.prototype=S.prototype,E.D=S.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(R,P,F){for(var L=Array(arguments.length-2),M=2;M<arguments.length;M++)L[M-2]=arguments[M];return S.prototype[P].apply(R,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,S,B){B||(B=0);var R=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)R[P]=S.charCodeAt(B++)|S.charCodeAt(B++)<<8|S.charCodeAt(B++)<<16|S.charCodeAt(B++)<<24;else for(P=0;16>P;++P)R[P]=S[B++]|S[B++]<<8|S[B++]<<16|S[B++]<<24;S=E.g[0],B=E.g[1],P=E.g[2];var F=E.g[3],L=S+(F^B&(P^F))+R[0]+3614090360&4294967295;S=B+(L<<7&4294967295|L>>>25),L=F+(P^S&(B^P))+R[1]+3905402710&4294967295,F=S+(L<<12&4294967295|L>>>20),L=P+(B^F&(S^B))+R[2]+606105819&4294967295,P=F+(L<<17&4294967295|L>>>15),L=B+(S^P&(F^S))+R[3]+3250441966&4294967295,B=P+(L<<22&4294967295|L>>>10),L=S+(F^B&(P^F))+R[4]+4118548399&4294967295,S=B+(L<<7&4294967295|L>>>25),L=F+(P^S&(B^P))+R[5]+1200080426&4294967295,F=S+(L<<12&4294967295|L>>>20),L=P+(B^F&(S^B))+R[6]+2821735955&4294967295,P=F+(L<<17&4294967295|L>>>15),L=B+(S^P&(F^S))+R[7]+4249261313&4294967295,B=P+(L<<22&4294967295|L>>>10),L=S+(F^B&(P^F))+R[8]+1770035416&4294967295,S=B+(L<<7&4294967295|L>>>25),L=F+(P^S&(B^P))+R[9]+2336552879&4294967295,F=S+(L<<12&4294967295|L>>>20),L=P+(B^F&(S^B))+R[10]+4294925233&4294967295,P=F+(L<<17&4294967295|L>>>15),L=B+(S^P&(F^S))+R[11]+2304563134&4294967295,B=P+(L<<22&4294967295|L>>>10),L=S+(F^B&(P^F))+R[12]+1804603682&4294967295,S=B+(L<<7&4294967295|L>>>25),L=F+(P^S&(B^P))+R[13]+4254626195&4294967295,F=S+(L<<12&4294967295|L>>>20),L=P+(B^F&(S^B))+R[14]+2792965006&4294967295,P=F+(L<<17&4294967295|L>>>15),L=B+(S^P&(F^S))+R[15]+1236535329&4294967295,B=P+(L<<22&4294967295|L>>>10),L=S+(P^F&(B^P))+R[1]+4129170786&4294967295,S=B+(L<<5&4294967295|L>>>27),L=F+(B^P&(S^B))+R[6]+3225465664&4294967295,F=S+(L<<9&4294967295|L>>>23),L=P+(S^B&(F^S))+R[11]+643717713&4294967295,P=F+(L<<14&4294967295|L>>>18),L=B+(F^S&(P^F))+R[0]+3921069994&4294967295,B=P+(L<<20&4294967295|L>>>12),L=S+(P^F&(B^P))+R[5]+3593408605&4294967295,S=B+(L<<5&4294967295|L>>>27),L=F+(B^P&(S^B))+R[10]+38016083&4294967295,F=S+(L<<9&4294967295|L>>>23),L=P+(S^B&(F^S))+R[15]+3634488961&4294967295,P=F+(L<<14&4294967295|L>>>18),L=B+(F^S&(P^F))+R[4]+3889429448&4294967295,B=P+(L<<20&4294967295|L>>>12),L=S+(P^F&(B^P))+R[9]+568446438&4294967295,S=B+(L<<5&4294967295|L>>>27),L=F+(B^P&(S^B))+R[14]+3275163606&4294967295,F=S+(L<<9&4294967295|L>>>23),L=P+(S^B&(F^S))+R[3]+4107603335&4294967295,P=F+(L<<14&4294967295|L>>>18),L=B+(F^S&(P^F))+R[8]+1163531501&4294967295,B=P+(L<<20&4294967295|L>>>12),L=S+(P^F&(B^P))+R[13]+2850285829&4294967295,S=B+(L<<5&4294967295|L>>>27),L=F+(B^P&(S^B))+R[2]+4243563512&4294967295,F=S+(L<<9&4294967295|L>>>23),L=P+(S^B&(F^S))+R[7]+1735328473&4294967295,P=F+(L<<14&4294967295|L>>>18),L=B+(F^S&(P^F))+R[12]+2368359562&4294967295,B=P+(L<<20&4294967295|L>>>12),L=S+(B^P^F)+R[5]+4294588738&4294967295,S=B+(L<<4&4294967295|L>>>28),L=F+(S^B^P)+R[8]+2272392833&4294967295,F=S+(L<<11&4294967295|L>>>21),L=P+(F^S^B)+R[11]+1839030562&4294967295,P=F+(L<<16&4294967295|L>>>16),L=B+(P^F^S)+R[14]+4259657740&4294967295,B=P+(L<<23&4294967295|L>>>9),L=S+(B^P^F)+R[1]+2763975236&4294967295,S=B+(L<<4&4294967295|L>>>28),L=F+(S^B^P)+R[4]+1272893353&4294967295,F=S+(L<<11&4294967295|L>>>21),L=P+(F^S^B)+R[7]+4139469664&4294967295,P=F+(L<<16&4294967295|L>>>16),L=B+(P^F^S)+R[10]+3200236656&4294967295,B=P+(L<<23&4294967295|L>>>9),L=S+(B^P^F)+R[13]+681279174&4294967295,S=B+(L<<4&4294967295|L>>>28),L=F+(S^B^P)+R[0]+3936430074&4294967295,F=S+(L<<11&4294967295|L>>>21),L=P+(F^S^B)+R[3]+3572445317&4294967295,P=F+(L<<16&4294967295|L>>>16),L=B+(P^F^S)+R[6]+76029189&4294967295,B=P+(L<<23&4294967295|L>>>9),L=S+(B^P^F)+R[9]+3654602809&4294967295,S=B+(L<<4&4294967295|L>>>28),L=F+(S^B^P)+R[12]+3873151461&4294967295,F=S+(L<<11&4294967295|L>>>21),L=P+(F^S^B)+R[15]+530742520&4294967295,P=F+(L<<16&4294967295|L>>>16),L=B+(P^F^S)+R[2]+3299628645&4294967295,B=P+(L<<23&4294967295|L>>>9),L=S+(P^(B|~F))+R[0]+4096336452&4294967295,S=B+(L<<6&4294967295|L>>>26),L=F+(B^(S|~P))+R[7]+1126891415&4294967295,F=S+(L<<10&4294967295|L>>>22),L=P+(S^(F|~B))+R[14]+2878612391&4294967295,P=F+(L<<15&4294967295|L>>>17),L=B+(F^(P|~S))+R[5]+4237533241&4294967295,B=P+(L<<21&4294967295|L>>>11),L=S+(P^(B|~F))+R[12]+1700485571&4294967295,S=B+(L<<6&4294967295|L>>>26),L=F+(B^(S|~P))+R[3]+2399980690&4294967295,F=S+(L<<10&4294967295|L>>>22),L=P+(S^(F|~B))+R[10]+4293915773&4294967295,P=F+(L<<15&4294967295|L>>>17),L=B+(F^(P|~S))+R[1]+2240044497&4294967295,B=P+(L<<21&4294967295|L>>>11),L=S+(P^(B|~F))+R[8]+1873313359&4294967295,S=B+(L<<6&4294967295|L>>>26),L=F+(B^(S|~P))+R[15]+4264355552&4294967295,F=S+(L<<10&4294967295|L>>>22),L=P+(S^(F|~B))+R[6]+2734768916&4294967295,P=F+(L<<15&4294967295|L>>>17),L=B+(F^(P|~S))+R[13]+1309151649&4294967295,B=P+(L<<21&4294967295|L>>>11),L=S+(P^(B|~F))+R[4]+4149444226&4294967295,S=B+(L<<6&4294967295|L>>>26),L=F+(B^(S|~P))+R[11]+3174756917&4294967295,F=S+(L<<10&4294967295|L>>>22),L=P+(S^(F|~B))+R[2]+718787259&4294967295,P=F+(L<<15&4294967295|L>>>17),L=B+(F^(P|~S))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(P+(L<<21&4294967295|L>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+F&4294967295}n.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var B=S-this.blockSize,R=this.B,P=this.h,F=0;F<S;){if(P==0)for(;F<=B;)a(this,E,F),F+=this.blockSize;if(typeof E=="string"){for(;F<S;)if(R[P++]=E.charCodeAt(F++),P==this.blockSize){a(this,R),P=0;break}}else for(;F<S;)if(R[P++]=E[F++],P==this.blockSize){a(this,R),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var B=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=B&255,B/=256;for(this.u(E),E=Array(16),S=B=0;4>S;++S)for(var R=0;32>R;R+=8)E[B++]=this.g[S]>>>R&255;return E};function s(E,S){var B=l;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=S(E)}function i(E,S){this.h=S;for(var B=[],R=!0,P=E.length-1;0<=P;P--){var F=E[P]|0;R&&F==S||(B[P]=F,R=!1)}this.g=B}var l={};function c(E){return-128<=E&&128>E?s(E,function(S){return new i([S|0],0>S?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return A;if(0>E)return v(u(-E));for(var S=[],B=1,R=0;E>=B;R++)S[R]=E/B|0,B*=4294967296;return new i(S,0)}function d(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return v(d(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(S,8)),R=A,P=0;P<E.length;P+=8){var F=Math.min(8,E.length-P),L=parseInt(E.substring(P,P+F),S);8>F?(F=u(Math.pow(S,F)),R=R.j(F).add(u(L))):(R=R.j(B),R=R.add(u(L)))}return R}var A=c(0),h=c(1),m=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-v(this).m();for(var E=0,S=1,B=0;B<this.g.length;B++){var R=this.i(B);E+=(0<=R?R:4294967296+R)*S,S*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+v(this).toString(E);for(var S=u(Math.pow(E,6)),B=this,R="";;){var P=j(B,S).g;B=y(B,P.j(S));var F=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=P,g(B))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function v(E){for(var S=E.g.length,B=[],R=0;R<S;R++)B[R]=~E.g[R];return new i(B,~E.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],R=0,P=0;P<=S;P++){var F=R+(this.i(P)&65535)+(E.i(P)&65535),L=(F>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);R=L>>>16,F&=65535,L&=65535,B[P]=L<<16|F}return new i(B,B[B.length-1]&-2147483648?-1:0)};function y(E,S){return E.add(v(S))}e.j=function(E){if(g(this)||g(E))return A;if(x(this))return x(E)?v(this).j(v(E)):v(v(this).j(E));if(x(E))return v(this.j(v(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var S=this.g.length+E.g.length,B=[],R=0;R<2*S;R++)B[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<E.g.length;P++){var F=this.i(R)>>>16,L=this.i(R)&65535,M=E.i(P)>>>16,ee=E.i(P)&65535;B[2*R+2*P]+=L*ee,w(B,2*R+2*P),B[2*R+2*P+1]+=F*ee,w(B,2*R+2*P+1),B[2*R+2*P+1]+=L*M,w(B,2*R+2*P+1),B[2*R+2*P+2]+=F*M,w(B,2*R+2*P+2)}for(R=0;R<S;R++)B[R]=B[2*R+1]<<16|B[2*R];for(R=S;R<2*S;R++)B[R]=0;return new i(B,0)};function w(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function _(E,S){this.g=E,this.h=S}function j(E,S){if(g(S))throw Error("division by zero");if(g(E))return new _(A,A);if(x(E))return S=j(v(E),S),new _(v(S.g),v(S.h));if(x(S))return S=j(E,v(S)),new _(v(S.g),S.h);if(30<E.g.length){if(x(E)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var B=h,R=S;0>=R.l(E);)B=k(B),R=k(R);var P=I(B,1),F=I(R,1);for(R=I(R,2),B=I(B,2);!g(R);){var L=F.add(R);0>=L.l(E)&&(P=P.add(B),F=L),R=I(R,1),B=I(B,1)}return S=y(E,P.j(S)),new _(P,S)}for(P=A;0<=E.l(S);){for(B=Math.max(1,Math.floor(E.m()/S.m())),R=Math.ceil(Math.log(B)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=u(B),L=F.j(S);x(L)||0<L.l(E);)B-=R,F=u(B),L=F.j(S);g(F)&&(F=h),P=P.add(F),E=y(E,L)}return new _(P,E)}e.A=function(E){return j(this,E).h},e.and=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],R=0;R<S;R++)B[R]=this.i(R)&E.i(R);return new i(B,this.h&E.h)},e.or=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],R=0;R<S;R++)B[R]=this.i(R)|E.i(R);return new i(B,this.h|E.h)},e.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],R=0;R<S;R++)B[R]=this.i(R)^E.i(R);return new i(B,this.h^E.h)};function k(E){for(var S=E.g.length+1,B=[],R=0;R<S;R++)B[R]=E.i(R)<<1|E.i(R-1)>>>31;return new i(B,E.h)}function I(E,S){var B=S>>5;S%=32;for(var R=E.g.length-B,P=[],F=0;F<R;F++)P[F]=0<S?E.i(F+B)>>>S|E.i(F+B+1)<<32-S:E.i(F+B);return new i(P,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,BZ=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,cm=i}).apply(typeof uQ<"u"?uQ:typeof self<"u"?self:typeof window<"u"?window:{});var UC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TZ,zy,IZ,w5,aF,FZ,OZ,DZ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ne,ce){return O==Array.prototype||O==Object.prototype||(O[ne]=ce.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof UC=="object"&&UC];for(var ne=0;ne<O.length;++ne){var ce=O[ne];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")}var n=r(this);function a(O,ne){if(ne)e:{var ce=n;O=O.split(".");for(var be=0;be<O.length-1;be++){var ze=O[be];if(!(ze in ce))break e;ce=ce[ze]}O=O[O.length-1],be=ce[O],ne=ne(be),ne!=be&&ne!=null&&t(ce,O,{configurable:!0,writable:!0,value:ne})}}function s(O,ne){O instanceof String&&(O+="");var ce=0,be=!1,ze={next:function(){if(!be&&ce<O.length){var ot=ce++;return{value:ne(ot,O[ot]),done:!1}}return be=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ne,ce){return ce})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(O){var ne=typeof O;return ne=ne!="object"?ne:O?Array.isArray(O)?"array":ne:"null",ne=="array"||ne=="object"&&typeof O.length=="number"}function u(O){var ne=typeof O;return ne=="object"&&O!=null||ne=="function"}function d(O,ne,ce){return O.call.apply(O.bind,arguments)}function A(O,ne,ce){if(!O)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,be),O.apply(ne,ze)}}return function(){return O.apply(ne,arguments)}}function h(O,ne,ce){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:A,h.apply(null,arguments)}function m(O,ne){var ce=Array.prototype.slice.call(arguments,1);return function(){var be=ce.slice();return be.push.apply(be,arguments),O.apply(this,be)}}function g(O,ne){function ce(){}ce.prototype=ne.prototype,O.aa=ne.prototype,O.prototype=new ce,O.prototype.constructor=O,O.Qb=function(be,ze,ot){for(var Ut=Array(arguments.length-2),Or=2;Or<arguments.length;Or++)Ut[Or-2]=arguments[Or];return ne.prototype[ze].apply(be,Ut)}}function x(O){const ne=O.length;if(0<ne){const ce=Array(ne);for(let be=0;be<ne;be++)ce[be]=O[be];return ce}return[]}function v(O,ne){for(let ce=1;ce<arguments.length;ce++){const be=arguments[ce];if(c(be)){const ze=O.length||0,ot=be.length||0;O.length=ze+ot;for(let Ut=0;Ut<ot;Ut++)O[ze+Ut]=be[Ut]}else O.push(be)}}class y{constructor(ne,ce){this.i=ne,this.j=ce,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function w(O){return/^[\s\xa0]*$/.test(O)}function _(){var O=l.navigator;return O&&(O=O.userAgent)?O:""}function j(O){return j[" "](O),O}j[" "]=function(){};var k=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(O,ne,ce){for(const be in O)ne.call(ce,O[be],be,O)}function E(O,ne){for(const ce in O)ne.call(void 0,O[ce],ce,O)}function S(O){const ne={};for(const ce in O)ne[ce]=O[ce];return ne}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(O,ne){let ce,be;for(let ze=1;ze<arguments.length;ze++){be=arguments[ze];for(ce in be)O[ce]=be[ce];for(let ot=0;ot<B.length;ot++)ce=B[ot],Object.prototype.hasOwnProperty.call(be,ce)&&(O[ce]=be[ce])}}function P(O){var ne=1;O=O.split(":");const ce=[];for(;0<ne&&O.length;)ce.push(O.shift()),ne--;return O.length&&ce.push(O.join(":")),ce}function F(O){l.setTimeout(()=>{throw O},0)}function L(){var O=X;let ne=null;return O.g&&(ne=O.g,O.g=O.g.next,O.g||(O.h=null),ne.next=null),ne}class M{constructor(){this.h=this.g=null}add(ne,ce){const be=ee.get();be.set(ne,ce),this.h?this.h.next=be:this.g=be,this.h=be}}var ee=new y(()=>new V,O=>O.reset());class V{constructor(){this.next=this.g=this.h=null}set(ne,ce){this.h=ne,this.g=ce,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,X=new M,Z=()=>{const O=l.Promise.resolve(void 0);q=()=>{O.then(G)}};var G=()=>{for(var O;O=L();){try{O.h.call(O.g)}catch(ce){F(ce)}var ne=ee;ne.j(O),100>ne.h&&(ne.h++,O.next=ne.g,ne.g=O)}K=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(O,ne){this.type=O,this.g=this.target=ne,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var O=!1,ne=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const ce=()=>{};l.addEventListener("test",ce,ne),l.removeEventListener("test",ce,ne)}catch{}return O}();function J(O,ne){if(U.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var ce=this.type=O.type,be=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ne,ne=O.relatedTarget){if(k){e:{try{j(ne.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ne=null)}}else ce=="mouseover"?ne=O.fromElement:ce=="mouseout"&&(ne=O.toElement);this.relatedTarget=ne,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:re[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&J.aa.h.call(this)}}g(J,U);var re={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),se=0;function le(O,ne,ce,be,ze){this.listener=O,this.proxy=null,this.src=ne,this.type=ce,this.capture=!!be,this.ha=ze,this.key=++se,this.da=this.fa=!1}function ue(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function ke(O){this.src=O,this.g={},this.h=0}ke.prototype.add=function(O,ne,ce,be,ze){var ot=O.toString();O=this.g[ot],O||(O=this.g[ot]=[],this.h++);var Ut=Ne(O,ne,be,ze);return-1<Ut?(ne=O[Ut],ce||(ne.fa=!1)):(ne=new le(ne,this.src,ot,!!be,ze),ne.fa=ce,O.push(ne)),ne};function ae(O,ne){var ce=ne.type;if(ce in O.g){var be=O.g[ce],ze=Array.prototype.indexOf.call(be,ne,void 0),ot;(ot=0<=ze)&&Array.prototype.splice.call(be,ze,1),ot&&(ue(ne),O.g[ce].length==0&&(delete O.g[ce],O.h--))}}function Ne(O,ne,ce,be){for(var ze=0;ze<O.length;++ze){var ot=O[ze];if(!ot.da&&ot.listener==ne&&ot.capture==!!ce&&ot.ha==be)return ze}return-1}var je="closure_lm_"+(1e6*Math.random()|0),_e={};function me(O,ne,ce,be,ze){if(Array.isArray(ne)){for(var ot=0;ot<ne.length;ot++)me(O,ne[ot],ce,be,ze);return null}return ce=ct(ce),O&&O[oe]?O.K(ne,ce,u(be)?!!be.capture:!1,ze):Te(O,ne,ce,!1,be,ze)}function Te(O,ne,ce,be,ze,ot){if(!ne)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Or=$e(O);if(Or||(O[je]=Or=new ke(O)),ce=Or.add(ne,ce,be,Ut,ot),ce.proxy)return ce;if(be=Le(),ce.proxy=be,be.src=O,be.listener=ce,O.addEventListener)z||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(ne.toString(),be,ze);else if(O.attachEvent)O.attachEvent(Oe(ne.toString()),be);else if(O.addListener&&O.removeListener)O.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return ce}function Le(){function O(ce){return ne.call(O.src,O.listener,ce)}const ne=Re;return O}function We(O,ne,ce,be,ze){if(Array.isArray(ne))for(var ot=0;ot<ne.length;ot++)We(O,ne[ot],ce,be,ze);else be=u(be)?!!be.capture:!!be,ce=ct(ce),O&&O[oe]?(O=O.i,ne=String(ne).toString(),ne in O.g&&(ot=O.g[ne],ce=Ne(ot,ce,be,ze),-1<ce&&(ue(ot[ce]),Array.prototype.splice.call(ot,ce,1),ot.length==0&&(delete O.g[ne],O.h--)))):O&&(O=$e(O))&&(ne=O.g[ne.toString()],O=-1,ne&&(O=Ne(ne,ce,be,ze)),(ce=-1<O?ne[O]:null)&&xe(ce))}function xe(O){if(typeof O!="number"&&O&&!O.da){var ne=O.src;if(ne&&ne[oe])ae(ne.i,O);else{var ce=O.type,be=O.proxy;ne.removeEventListener?ne.removeEventListener(ce,be,O.capture):ne.detachEvent?ne.detachEvent(Oe(ce),be):ne.addListener&&ne.removeListener&&ne.removeListener(be),(ce=$e(ne))?(ae(ce,O),ce.h==0&&(ce.src=null,ne[je]=null)):ue(O)}}}function Oe(O){return O in _e?_e[O]:_e[O]="on"+O}function Re(O,ne){if(O.da)O=!0;else{ne=new J(ne,this);var ce=O.listener,be=O.ha||O.src;O.fa&&xe(O),O=ce.call(be,ne)}return O}function $e(O){return O=O[je],O instanceof ke?O:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(O){return typeof O=="function"?O:(O[et]||(O[et]=function(ne){return O.handleEvent(ne)}),O[et])}function gt(){D.call(this),this.i=new ke(this),this.M=this,this.F=null}g(gt,D),gt.prototype[oe]=!0,gt.prototype.removeEventListener=function(O,ne,ce,be){We(this,O,ne,ce,be)};function It(O,ne){var ce,be=O.F;if(be)for(ce=[];be;be=be.F)ce.push(be);if(O=O.M,be=ne.type||ne,typeof ne=="string")ne=new U(ne,O);else if(ne instanceof U)ne.target=ne.target||O;else{var ze=ne;ne=new U(be,O),R(ne,ze)}if(ze=!0,ce)for(var ot=ce.length-1;0<=ot;ot--){var Ut=ne.g=ce[ot];ze=Mt(Ut,be,!0,ne)&&ze}if(Ut=ne.g=O,ze=Mt(Ut,be,!0,ne)&&ze,ze=Mt(Ut,be,!1,ne)&&ze,ce)for(ot=0;ot<ce.length;ot++)Ut=ne.g=ce[ot],ze=Mt(Ut,be,!1,ne)&&ze}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var O=this.i,ne;for(ne in O.g){for(var ce=O.g[ne],be=0;be<ce.length;be++)ue(ce[be]);delete O.g[ne],O.h--}}this.F=null},gt.prototype.K=function(O,ne,ce,be){return this.i.add(String(O),ne,!1,ce,be)},gt.prototype.L=function(O,ne,ce,be){return this.i.add(String(O),ne,!0,ce,be)};function Mt(O,ne,ce,be){if(ne=O.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var ze=!0,ot=0;ot<ne.length;++ot){var Ut=ne[ot];if(Ut&&!Ut.da&&Ut.capture==ce){var Or=Ut.listener,yn=Ut.ha||Ut.src;Ut.fa&&ae(O.i,Ut),ze=Or.call(yn,be)!==!1&&ze}}return ze&&!be.defaultPrevented}function Pt(O,ne,ce){if(typeof O=="function")ce&&(O=h(O,ce));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:l.setTimeout(O,ne||0)}function Qt(O){O.g=Pt(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ne=O.h;O.h=null,O.m.apply(null,ne)}class wt extends D{constructor(ne,ce){super(),this.m=ne,this.l=ce,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(O){D.call(this),this.h=O,this.g={}}g(Br,D);var tr=[];function an(O){I(O.g,function(ne,ce){this.g.hasOwnProperty(ce)&&xe(ne)},O),O.g={}}Br.prototype.N=function(){Br.aa.N.call(this),an(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=l.JSON.stringify,$r=l.JSON.parse,In=class{stringify(O){return l.JSON.stringify(O,void 0)}parse(O){return l.JSON.parse(O,void 0)}};function Pr(){}Pr.prototype.h=null;function fs(O){return O.h||(O.h=O.i())}function mn(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ja(){U.call(this,"d")}g(ja,U);function rn(){U.call(this,"c")}g(rn,U);var gr={},Ze=null;function mt(){return Ze=Ze||new gt}gr.La="serverreachability";function Je(O){U.call(this,gr.La,O)}g(Je,U);function xt(O){const ne=mt();It(ne,new Je(ne))}gr.STAT_EVENT="statevent";function Et(O,ne){U.call(this,gr.STAT_EVENT,O),this.stat=ne}g(Et,U);function bt(O){const ne=mt();It(ne,new Et(ne,O))}gr.Ma="timingevent";function nr(O,ne){U.call(this,gr.Ma,O),this.size=ne}g(nr,U);function xr(O,ne){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){O()},ne)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Zr(O,ne,ce,be,ze,ot){O.info(function(){if(O.g)if(ot)for(var Ut="",Or=ot.split("&"),yn=0;yn<Or.length;yn++){var Xr=Or[yn].split("=");if(1<Xr.length){var zn=Xr[0];Xr=Xr[1];var ta=zn.split("_");Ut=2<=ta.length&&ta[1]=="type"?Ut+(zn+"="+Xr+"&"):Ut+(zn+"=redacted&")}}else Ut=null;else Ut=ot;return"XMLHTTP REQ ("+be+") [attempt "+ze+"]: "+ne+`
`+ce+`
`+Ut})}function qr(O,ne,ce,be,ze,ot,Ut){O.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+ze+"]: "+ne+`
`+ce+`
`+ot+" "+Ut})}function he(O,ne,ce,be){O.info(function(){return"XMLHTTP TEXT ("+ne+"): "+Ce(O,ce)+(be?" "+be:"")})}function Ie(O,ne){O.info(function(){return"TIMEOUT: "+ne})}Wr.prototype.info=function(){};function Ce(O,ne){if(!O.g)return ne;if(!ne)return null;try{var ce=JSON.parse(ne);if(ce){for(O=0;O<ce.length;O++)if(Array.isArray(ce[O])){var be=ce[O];if(!(2>be.length)){var ze=be[1];if(Array.isArray(ze)&&!(1>ze.length)){var ot=ze[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Sr(ce)}catch{return ne}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fe;function Ye(){}g(Ye,Pr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Fe=new Ye;function dt(O,ne,ce,be){this.j=O,this.i=ne,this.l=ce,this.R=be||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var rt={},it={};function Ft(O,ne,ce){O.L=1,O.v=nu(Ci(ne)),O.m=ce,O.P=!0,zt(O,null)}function zt(O,ne){O.F=Date.now(),Gt(O),O.A=Ci(O.v);var ce=O.A,be=O.R;Array.isArray(be)||(be=[String(be)]),Fr(ce.i,"t",be),O.C=0,ce=O.j.J,O.h=new Ge,O.g=fe(O.j,ce?ne:null,!O.m),0<O.O&&(O.M=new wt(h(O.Y,O,O.g),O.O)),ne=O.U,ce=O.g,be=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(tr[0]=ze.toString()),ze=tr);for(var ot=0;ot<ze.length;ot++){var Ut=me(ce,ze[ot],be||ne.handleEvent,!1,ne.h||ne);if(!Ut)break;ne.g[Ut.key]=Ut}ne=O.H?S(O.H):{},O.m?(O.u||(O.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ne)):(O.u="GET",O.g.ea(O.A,O.u,null,ne)),xt(),Zr(O.i,O.u,O.A,O.l,O.R,O.m)}dt.prototype.ca=function(O){O=O.target;const ne=this.M;ne&&gs(O)==3?ne.j():this.Y(O)},dt.prototype.Y=function(O){try{if(O==this.g)e:{const ta=gs(this.g);var ne=this.g.Ba();const Ll=this.g.Z();if(!(3>ta)&&(ta!=3||this.g&&(this.h.h||this.g.oa()||Zh(this.g)))){this.J||ta!=4||ne==7||(ne==8||0>=Ll?xt(3):xt(2)),sn(this);var ce=this.g.Z();this.X=ce;t:if(Jt(this)){var be=Zh(this.g);O="";var ze=be.length,ot=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new l.TextDecoder}for(ne=0;ne<ze;ne++)this.h.h=!0,O+=this.h.i.decode(be[ne],{stream:!(ot&&ne==ze-1)});be.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=ce==200,qr(this.i,this.u,this.A,this.l,this.R,ta,ce),this.o){if(this.T&&!this.K){t:{if(this.g){var Or,yn=this.g;if((Or=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Or)){var Xr=Or;break t}}Xr=null}if(ce=Xr)he(this.i,this.l,ce,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,ce);else{this.o=!1,this.s=3,bt(12),An(this),on(this);break e}}if(this.P){ce=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==it){ta==4&&(this.s=4,bt(14),ce=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(es==rt){this.s=4,bt(15),he(this.i,this.l,Ut,"[Invalid Chunk]"),ce=!1;break}else he(this.i,this.l,es,null),hs(this,es);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ta!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),ce=!1),this.o=this.o&&ce,!ce)he(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),cu(zn),zn.M=!0,bt(11))}}else he(this.i,this.l,Ut,null),hs(this,Ut);ta==4&&An(this),this.o&&!this.J&&(ta==4?uu(this.j,this):(this.o=!1,Gt(this)))}else iu(this.g),ce==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),An(this),on(this)}}}catch{}finally{}};function Jt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ne){var ce=O.C,be=ne.indexOf(`
`,ce);return be==-1?it:(ce=Number(ne.substring(ce,be)),isNaN(ce)?rt:(be+=1,be+ce>ne.length?it:(ne=ne.slice(be,be+ce),O.C=be+ce,ne)))}dt.prototype.cancel=function(){this.J=!0,An(this)};function Gt(O){O.S=Date.now()+O.I,kr(O,O.I)}function kr(O,ne){if(O.B!=null)throw Error("WatchDog timer not null");O.B=xr(h(O.ba,O),ne)}function sn(O){O.B&&(l.clearTimeout(O.B),O.B=null)}dt.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Ie(this.i,this.A),this.L!=2&&(xt(),bt(17)),An(this),this.s=2,on(this)):kr(this,this.S-O)};function on(O){O.j.G==0||O.J||uu(O.j,O)}function An(O){sn(O);var ne=O.M;ne&&typeof ne.ma=="function"&&ne.ma(),O.M=null,an(O.U),O.g&&(ne=O.g,O.g=null,ne.abort(),ne.ma())}function hs(O,ne){try{var ce=O.j;if(ce.G!=0&&(ce.g==O||wi(ce.h,O))){if(!O.K&&wi(ce.h,O)&&ce.G==3){try{var be=ce.Da.g.parse(ne)}catch{be=null}if(Array.isArray(be)&&be.length==3){var ze=be;if(ze[0]==0){e:if(!ce.u){if(ce.g)if(ce.g.F+3e3<O.F)xc(ce),rA(ce);else break e;ad(ce),bt(18)}}else ce.za=ze[1],0<ce.za-ce.T&&37500>ze[2]&&ce.F&&ce.v==0&&!ce.C&&(ce.C=xr(h(ce.Za,ce),6e3));if(1>=Ps(ce.h)&&ce.ca){try{ce.ca()}catch{}ce.ca=void 0}}else Hi(ce,11)}else if((O.K||ce.g==O)&&xc(ce),!w(ne))for(ze=ce.Da.g.parse(ne),ne=0;ne<ze.length;ne++){let Xr=ze[ne];if(ce.T=Xr[0],Xr=Xr[1],ce.G==2)if(Xr[0]=="c"){ce.K=Xr[1],ce.ia=Xr[2];const zn=Xr[3];zn!=null&&(ce.la=zn,ce.j.info("VER="+ce.la));const ta=Xr[4];ta!=null&&(ce.Aa=ta,ce.j.info("SVER="+ce.Aa));const Ll=Xr[5];Ll!=null&&typeof Ll=="number"&&0<Ll&&(be=1.5*Ll,ce.L=be,ce.j.info("backChannelRequestTimeoutMs_="+be)),be=ce;const es=O.g;if(es){const To=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(To){var ot=be.h;ot.g||To.indexOf("spdy")==-1&&To.indexOf("quic")==-1&&To.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(xa(ot,ot.h),ot.h=null))}if(be.D){const du=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;du&&(be.ya=du,Vn(be.I,be.D,du))}}ce.G=3,ce.l&&ce.l.ua(),ce.ba&&(ce.R=Date.now()-O.F,ce.j.info("Handshake RTT: "+ce.R+"ms")),be=ce;var Ut=O;if(be.qa=Y(be,be.J?be.ia:null,be.W),Ut.K){ai(be.h,Ut);var Or=Ut,yn=be.L;yn&&(Or.I=yn),Or.B&&(sn(Or),Gt(Or)),be.g=Ut}else aA(be);0<ce.i.length&&nA(ce)}else Xr[0]!="stop"&&Xr[0]!="close"||Hi(ce,7);else ce.G==3&&(Xr[0]=="stop"||Xr[0]=="close"?Xr[0]=="stop"?Hi(ce,7):gc(ce):Xr[0]!="noop"&&ce.l&&ce.l.ta(Xr),ce.v=0)}}xt(4)}catch{}}var _o=class{constructor(O,ne){this.g=O,this.map=ne}};function ms(O){this.l=O||10,l.PerformanceNavigationTiming?(O=l.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ni(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Ps(O){return O.h?1:O.g?O.g.size:0}function wi(O,ne){return O.h?O.h==ne:O.g?O.g.has(ne):!1}function xa(O,ne){O.g?O.g.add(ne):O.h=ne}function ai(O,ne){O.h&&O.h==ne?O.h=null:O.g&&O.g.has(ne)&&O.g.delete(ne)}ms.prototype.cancel=function(){if(this.i=Zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Zd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ne=O.i;for(const ce of O.g.values())ne=ne.concat(ce.D);return ne}return x(O.i)}function Xh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var ne=[],ce=O.length,be=0;be<ce;be++)ne.push(O[be]);return ne}ne=[],ce=0;for(be in O)ne[ce++]=O[be];return ne}function eu(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var ne=[];O=O.length;for(var ce=0;ce<O;ce++)ne.push(ce);return ne}ne=[],ce=0;for(const be in O)ne[ce++]=be;return ne}}}function pf(O,ne){if(O.forEach&&typeof O.forEach=="function")O.forEach(ne,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,ne,void 0);else for(var ce=eu(O),be=Xh(O),ze=be.length,ot=0;ot<ze;ot++)ne.call(void 0,be[ot],ce&&ce[ot],O)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eA(O,ne){if(O){O=O.split("&");for(var ce=0;ce<O.length;ce++){var be=O[ce].indexOf("="),ze=null;if(0<=be){var ot=O[ce].substring(0,be);ze=O[ce].substring(be+1)}else ot=O[ce];ne(ot,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Fn(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof Fn){this.h=O.h,tu(this,O.j),this.o=O.o,this.g=O.g,ru(this,O.s),this.l=O.l;var ne=O.i,ce=new Il;ce.i=ne.i,ne.g&&(ce.g=new Map(ne.g),ce.h=ne.h),Tl(this,ce),this.m=O.m}else O&&(ne=String(O).match(Ei))?(this.h=!1,tu(this,ne[1]||"",!0),this.o=So(ne[2]||""),this.g=So(ne[3]||"",!0),ru(this,ne[4]),this.l=So(ne[5]||"",!0),Tl(this,ne[6]||"",!0),this.m=So(ne[7]||"")):(this.h=!1,this.i=new Il(null,this.h))}Fn.prototype.toString=function(){var O=[],ne=this.j;ne&&O.push(Ac(ne,gf,!0),":");var ce=this.g;return(ce||ne=="file")&&(O.push("//"),(ne=this.o)&&O.push(Ac(ne,gf,!0),"@"),O.push(encodeURIComponent(String(ce)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ce=this.s,ce!=null&&O.push(":",String(ce))),(ce=this.l)&&(this.g&&ce.charAt(0)!="/"&&O.push("/"),O.push(Ac(ce,ce.charAt(0)=="/"?fc:xf,!0))),(ce=this.i.toString())&&O.push("?",ce),(ce=this.m)&&O.push("#",Ac(ce,hc)),O.join("")};function Ci(O){return new Fn(O)}function tu(O,ne,ce){O.j=ce?So(ne,!0):ne,O.j&&(O.j=O.j.replace(/:$/,""))}function ru(O,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);O.s=ne}else O.s=null}function Tl(O,ne,ce){ne instanceof Il?(O.i=ne,Jh(O.i,O.h)):(ce||(ne=Ac(ne,tA)),O.i=new Il(ne,O.h))}function Vn(O,ne,ce){O.i.set(ne,ce)}function nu(O){return Vn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function So(O,ne){return O?ne?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function Ac(O,ne,ce){return typeof O=="string"?(O=encodeURI(O).replace(ne,Yh),ce&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Yh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var gf=/[#\/\?@]/g,xf=/[#\?:]/g,fc=/[#\?]/g,tA=/[#\?@]/g,hc=/#/g;function Il(O,ne){this.h=this.g=null,this.i=O||null,this.j=!!ne}function ca(O){O.g||(O.g=new Map,O.h=0,O.i&&eA(O.i,function(ne,ce){O.add(decodeURIComponent(ne.replace(/\+/g," ")),ce)}))}e=Il.prototype,e.add=function(O,ne){ca(this),this.i=null,O=Ol(this,O);var ce=this.g.get(O);return ce||this.g.set(O,ce=[]),ce.push(ne),this.h+=1,this};function mc(O,ne){ca(O),ne=Ol(O,ne),O.g.has(ne)&&(O.i=null,O.h-=O.g.get(ne).length,O.g.delete(ne))}function Fl(O,ne){return ca(O),ne=Ol(O,ne),O.g.has(ne)}e.forEach=function(O,ne){ca(this),this.g.forEach(function(ce,be){ce.forEach(function(ze){O.call(ne,ze,be,this)},this)},this)},e.na=function(){ca(this);const O=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ce=[];for(let be=0;be<ne.length;be++){const ze=O[be];for(let ot=0;ot<ze.length;ot++)ce.push(ne[be])}return ce},e.V=function(O){ca(this);let ne=[];if(typeof O=="string")Fl(this,O)&&(ne=ne.concat(this.g.get(Ol(this,O))));else{O=Array.from(this.g.values());for(let ce=0;ce<O.length;ce++)ne=ne.concat(O[ce])}return ne},e.set=function(O,ne){return ca(this),this.i=null,O=Ol(this,O),Fl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ne]),this.h+=1,this},e.get=function(O,ne){return O?(O=this.V(O),0<O.length?String(O[0]):ne):ne};function Fr(O,ne,ce){mc(O,ne),0<ce.length&&(O.i=null,O.g.set(Ol(O,ne),x(ce)),O.h+=ce.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ne=Array.from(this.g.keys());for(var ce=0;ce<ne.length;ce++){var be=ne[ce];const ot=encodeURIComponent(String(be)),Ut=this.V(be);for(be=0;be<Ut.length;be++){var ze=ot;Ut[be]!==""&&(ze+="="+encodeURIComponent(String(Ut[be]))),O.push(ze)}}return this.i=O.join("&")};function Ol(O,ne){return ne=String(ne),O.j&&(ne=ne.toLowerCase()),ne}function Jh(O,ne){ne&&!O.j&&(ca(O),O.i=null,O.g.forEach(function(ce,be){var ze=be.toLowerCase();be!=ze&&(mc(this,be),Fr(this,ze,ce))},O)),O.j=ne}function Mi(O,ne){const ce=new Wr;if(l.Image){const be=new Image;be.onload=m(oo,ce,"TestLoadImage: loaded",!0,ne,be),be.onerror=m(oo,ce,"TestLoadImage: error",!1,ne,be),be.onabort=m(oo,ce,"TestLoadImage: abort",!1,ne,be),be.ontimeout=m(oo,ce,"TestLoadImage: timeout",!1,ne,be),l.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=O}else ne(!1)}function ko(O,ne){const ce=new Wr,be=new AbortController,ze=setTimeout(()=>{be.abort(),oo(ce,"TestPingServer: timeout",!1,ne)},1e4);fetch(O,{signal:be.signal}).then(ot=>{clearTimeout(ze),ot.ok?oo(ce,"TestPingServer: ok",!0,ne):oo(ce,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(ze),oo(ce,"TestPingServer: error",!1,ne)})}function oo(O,ne,ce,be,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),be(ce)}catch{}}function Dl(){this.g=new In}function jo(O,ne,ce){const be=ce||"";try{pf(O,function(ze,ot){let Ut=ze;u(ze)&&(Ut=Sr(ze)),ne.push(be+ot+"="+encodeURIComponent(Ut))})}catch(ze){throw ne.push(be+"type="+encodeURIComponent("_badmap")),ze}}function au(O){this.l=O.Ub||null,this.j=O.eb||!1}g(au,Pr),au.prototype.g=function(){return new pc(this.l,this.j)},au.prototype.i=function(O){return function(){return O}}({});function pc(O,ne){gt.call(this),this.D=O,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(pc,gt),e=pc.prototype,e.open=function(O,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ne,this.readyState=1,Ui(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ne.body=O),(this.D||l).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vf(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function vf(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ne=O.value?O.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!O.done}))&&(this.response=this.responseText+=ne)}O.done?Bo(this):Ui(this),this.readyState==3&&vf(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Bo(this))},e.Qa=function(O){this.g&&(this.response=O,Bo(this))},e.ga=function(){this.g&&Bo(this)};function Bo(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Ui(O)}e.setRequestHeader=function(O,ne){this.u.append(O,ne)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ne=this.h.entries();for(var ce=ne.next();!ce.done;)ce=ce.value,O.push(ce[0]+": "+ce[1]),ce=ne.next();return O.join(`\r
`)};function Ui(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function Pl(O){let ne="";return I(O,function(ce,be){ne+=be,ne+=":",ne+=ce,ne+=`\r
`}),ne}function ps(O,ne,ce){e:{for(be in ce){var be=!1;break e}be=!0}be||(ce=Pl(ce),typeof O=="string"?ce!=null&&encodeURIComponent(String(ce)):Vn(O,ne,ce))}function bn(O){gt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(bn,gt);var su=/^https?$/i,Rl=["POST","PUT"];e=bn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ne,ce,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ne=ne?ne.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fe.g(),this.v=this.o?fs(this.o):fs(Fe),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(O),!0),this.B=!1}catch(ot){bf(this,ot);return}if(O=ce||"",ce=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var ze in be)ce.set(ze,be[ze]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const ot of be.keys())ce.set(ot,be.get(ot));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(ce.keys()).find(ot=>ot.toLowerCase()=="content-type"),ze=l.FormData&&O instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Rl,ne,void 0))||be||ze||ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Ut]of ce)this.g.setRequestHeader(ot,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qi(this),this.u=!0,this.g.send(O),this.u=!1}catch(ot){bf(this,ot)}};function bf(O,ne){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ne,O.m=5,Zu(O),dl(O)}function Zu(O){O.A||(O.A=!0,It(O,"complete"),It(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,It(this,"complete"),It(this,"abort"),dl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dl(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ed(this):this.bb())},e.bb=function(){ed(this)};function ed(O){if(O.h&&typeof i<"u"&&(!O.v[1]||gs(O)!=4||O.Z()!=2)){if(O.u&&gs(O)==4)Pt(O.Ea,0,O);else if(It(O,"readystatechange"),gs(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ce;if(!(ce=ne)){var be;if(be=Ut===0){var ze=String(O.D).match(Ei)[1]||null;!ze&&l.self&&l.self.location&&(ze=l.self.location.protocol.slice(0,-1)),be=!su.test(ze?ze.toLowerCase():"")}ce=be}if(ce)It(O,"complete"),It(O,"success");else{O.m=6;try{var ot=2<gs(O)?O.g.statusText:""}catch{ot=""}O.l=ot+" ["+O.Z()+"]",Zu(O)}}finally{dl(O)}}}}function dl(O,ne){if(O.g){Qi(O);const ce=O.g,be=O.v[0]?()=>{}:null;O.g=null,O.v=null,ne||It(O,"ready");try{ce.onreadystatechange=be}catch{}}}function Qi(O){O.I&&(l.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function gs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ne=this.g.responseText;return O&&ne.indexOf(O)==0&&(ne=ne.substring(O.length)),$r(ne)}};function Zh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function iu(O){const ne={};O=(O.g&&2<=gs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<O.length;be++){if(w(O[be]))continue;var ce=P(O[be]);const ze=ce[0];if(ce=ce[1],typeof ce!="string")continue;ce=ce.trim();const ot=ne[ze]||[];ne[ze]=ot,ot.push(ce)}E(ne,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(O,ne,ce){return ce&&ce.internalChannelParams&&ce.internalChannelParams[O]||ne}function ou(O){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,O),this.cb=Ni("retryDelaySeedMs",1e4,O),this.Wa=Ni("forwardChannelMaxRetries",2,O),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(O&&O.concurrentRequestLimit),this.Da=new Dl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ou.prototype,e.la=8,e.G=1,e.connect=function(O,ne,ce,be){bt(0),this.W=O,this.H=ne||{},ce&&be!==void 0&&(this.H.OSID=ce,this.H.OAID=be),this.F=this.X,this.I=Y(this,null,this.W),nA(this)};function gc(O){if(td(O),O.G==3){var ne=O.U++,ce=Ci(O.I);if(Vn(ce,"SID",O.K),Vn(ce,"RID",ne),Vn(ce,"TYPE","terminate"),lu(O,ce),ne=new dt(O,O.j,ne),ne.L=2,ne.v=nu(Ci(ce)),ce=!1,l.navigator&&l.navigator.sendBeacon)try{ce=l.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ce&&l.Image&&(new Image().src=ne.v,ce=!0),ce||(ne.g=fe(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),Gt(ne)}sA(O)}function rA(O){O.g&&(cu(O),O.g.cancel(),O.g=null)}function td(O){rA(O),O.u&&(l.clearTimeout(O.u),O.u=null),xc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&l.clearTimeout(O.s),O.s=null)}function nA(O){if(!ni(O.h)&&!O.s){O.s=!0;var ne=O.Ga;q||Z(),K||(q(),K=!0),X.add(ne,O),O.B=0}}function yf(O,ne){return Ps(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ne.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=xr(h(O.Ga,O,ne),sd(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new dt(this,this.j,O);let ot=this.o;if(this.S&&(ot?(ot=S(ot),R(ot,this.S)):ot=this.S),this.m!==null||this.O||(ze.H=ot,ot=null),this.P)e:{for(var ne=0,ce=0;ce<this.i.length;ce++){t:{var be=this.i[ce];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(ne+=be,4096<ne){ne=ce;break e}if(ne===4096||ce===this.i.length-1){ne=ce+1;break e}}ne=1e3}else ne=1e3;ne=nd(this,ze,ne),ce=Ci(this.I),Vn(ce,"RID",O),Vn(ce,"CVER",22),this.D&&Vn(ce,"X-HTTP-Session-Id",this.D),lu(this,ce),ot&&(this.O?ne="headers="+encodeURIComponent(String(Pl(ot)))+"&"+ne:this.m&&ps(ce,this.m,ot)),xa(this.h,ze),this.Ua&&Vn(ce,"TYPE","init"),this.P?(Vn(ce,"$req",ne),Vn(ce,"SID","null"),ze.T=!0,Ft(ze,ce,null)):Ft(ze,ce,ne),this.G=2}}else this.G==3&&(O?rd(this,O):this.i.length==0||ni(this.h)||rd(this))};function rd(O,ne){var ce;ne?ce=ne.l:ce=O.U++;const be=Ci(O.I);Vn(be,"SID",O.K),Vn(be,"RID",ce),Vn(be,"AID",O.T),lu(O,be),O.m&&O.o&&ps(be,O.m,O.o),ce=new dt(O,O.j,ce,O.B+1),O.m===null&&(ce.H=O.o),ne&&(O.i=ne.D.concat(O.i)),ne=nd(O,ce,1e3),ce.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,ce),Ft(ce,be,ne)}function lu(O,ne){O.H&&I(O.H,function(ce,be){Vn(ne,be,ce)}),O.l&&pf({},function(ce,be){Vn(ne,be,ce)})}function nd(O,ne,ce){ce=Math.min(O.i.length,ce);var be=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let ot=-1;for(;;){const Ut=["count="+ce];ot==-1?0<ce?(ot=ze[0].g,Ut.push("ofs="+ot)):ot=0:Ut.push("ofs="+ot);let Or=!0;for(let yn=0;yn<ce;yn++){let Xr=ze[yn].g;const zn=ze[yn].map;if(Xr-=ot,0>Xr)ot=Math.max(0,ze[yn].g-100),Or=!1;else try{jo(zn,Ut,"req"+Xr+"_")}catch{be&&be(zn)}}if(Or){be=Ut.join("&");break e}}}return O=O.i.splice(0,ce),ne.D=O,be}function aA(O){if(!O.g&&!O.u){O.Y=1;var ne=O.Fa;q||Z(),K||(q(),K=!0),X.add(ne,O),O.v=0}}function ad(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=xr(h(O.Fa,O),sd(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,e0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=xr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),rA(this),e0(this))};function cu(O){O.A!=null&&(l.clearTimeout(O.A),O.A=null)}function e0(O){O.g=new dt(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ne=Ci(O.qa);Vn(ne,"RID","rpc"),Vn(ne,"SID",O.K),Vn(ne,"AID",O.T),Vn(ne,"CI",O.F?"0":"1"),!O.F&&O.ja&&Vn(ne,"TO",O.ja),Vn(ne,"TYPE","xmlhttp"),lu(O,ne),O.m&&O.o&&ps(ne,O.m,O.o),O.L&&(O.g.I=O.L);var ce=O.g;O=O.ia,ce.L=1,ce.v=nu(Ci(ne)),ce.m=null,ce.P=!0,zt(ce,O)}e.Za=function(){this.C!=null&&(this.C=null,rA(this),ad(this),bt(19))};function xc(O){O.C!=null&&(l.clearTimeout(O.C),O.C=null)}function uu(O,ne){var ce=null;if(O.g==ne){xc(O),cu(O),O.g=null;var be=2}else if(wi(O.h,ne))ce=ne.D,ai(O.h,ne),be=1;else return;if(O.G!=0){if(ne.o)if(be==1){ce=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var ze=O.B;be=mt(),It(be,new nr(be,ce)),nA(O)}else aA(O);else if(ze=ne.s,ze==3||ze==0&&0<ne.X||!(be==1&&yf(O,ne)||be==2&&ad(O)))switch(ce&&0<ce.length&&(ne=O.h,ne.i=ne.i.concat(ce)),ze){case 1:Hi(O,5);break;case 4:Hi(O,10);break;case 3:Hi(O,6);break;default:Hi(O,2)}}}function sd(O,ne){let ce=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(ce*=2),ce*ne}function Hi(O,ne){if(O.j.info("Error code "+ne),ne==2){var ce=h(O.fb,O),be=O.Xa;const ze=!be;be=new Fn(be||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tu(be,"https"),nu(be),ze?Mi(be.toString(),ce):ko(be.toString(),ce)}else bt(2);O.G=0,O.l&&O.l.sa(ne),sA(O),td(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function sA(O){if(O.G=0,O.ka=[],O.l){const ne=Zd(O.h);(ne.length!=0||O.i.length!=0)&&(v(O.ka,ne),v(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function Y(O,ne,ce){var be=ce instanceof Fn?Ci(ce):new Fn(ce);if(be.g!="")ne&&(be.g=ne+"."+be.g),ru(be,be.s);else{var ze=l.location;be=ze.protocol,ne=ne?ne+"."+ze.hostname:ze.hostname,ze=+ze.port;var ot=new Fn(null);be&&tu(ot,be),ne&&(ot.g=ne),ze&&ru(ot,ze),ce&&(ot.l=ce),be=ot}return ce=O.D,ne=O.ya,ce&&ne&&Vn(be,ce,ne),Vn(be,"VER",O.la),lu(O,be),be}function fe(O,ne,ce){if(ne&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=O.Ca&&!O.pa?new bn(new au({eb:ce})):new bn(O.pa),ne.Ha(O.J),ne}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function De(){}e=De.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(O,ne){return new Ke(O,ne)};function Ke(O,ne){gt.call(this),this.g=new ou(ne),this.l=O,this.h=ne&&ne.messageUrlParams||null,O=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ne.messageContentType:O={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(O?O["X-WebChannel-Client-Profile"]=ne.va:O={"X-WebChannel-Client-Profile":ne.va}),this.g.S=O,(O=ne&&ne.Sb)&&!w(O)&&(this.g.m=O),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!w(ne)&&(this.g.D=ne,O=this.h,O!==null&&ne in O&&(O=this.h,ne in O&&delete O[ne])),this.j=new Zt(this)}g(Ke,gt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){gc(this.g)},Ke.prototype.o=function(O){var ne=this.g;if(typeof O=="string"){var ce={};ce.__data__=O,O=ce}else this.u&&(ce={},ce.__data__=Sr(O),O=ce);ne.i.push(new _o(ne.Ya++,O)),ne.G==3&&nA(ne)},Ke.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Ke.aa.N.call(this)};function yt(O){ja.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ne=O.__sm__;if(ne){e:{for(const ce in ne){O=ce;break e}O=void 0}(this.i=O)&&(O=this.i,ne=ne!==null&&O in ne?ne[O]:void 0),this.data=ne}else this.data=O}g(yt,ja);function Lt(){rn.call(this),this.status=1}g(Lt,rn);function Zt(O){this.g=O}g(Zt,De),Zt.prototype.ua=function(){It(this.g,"a")},Zt.prototype.ta=function(O){It(this.g,new yt(O))},Zt.prototype.sa=function(O){It(this.g,new Lt)},Zt.prototype.ra=function(){It(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,DZ=function(){return new Me},OZ=function(){return mt()},FZ=gr,aF={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,w5=we,Se.COMPLETE="complete",IZ=Se,mn.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",gt.prototype.listen=gt.prototype.K,zy=mn,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,TZ=bn}).apply(typeof UC<"u"?UC:typeof self<"u"?self:typeof window<"u"?window:{});const dQ="@firebase/firestore",AQ="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Go.UNAUTHENTICATED=new Go(null),Go.GOOGLE_CREDENTIALS=new Go("google-credentials-uid"),Go.FIRST_PARTY=new Go("first-party-uid"),Go.MOCK_USER=new Go("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new uP("@firebase/firestore");function lv(){return pg.logLevel}function ur(e,...t){if(pg.logLevel<=kn.DEBUG){const r=t.map(yP);pg.debug(`Firestore (${$1}): ${e}`,...r)}}function Nh(e,...t){if(pg.logLevel<=kn.ERROR){const r=t.map(yP);pg.error(`Firestore (${$1}): ${e}`,...r)}}function gg(e,...t){if(pg.logLevel<=kn.WARN){const r=t.map(yP);pg.warn(`Firestore (${$1}): ${e}`,...r)}}function yP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,PZ(e,n,r)}function PZ(e,t,r){let n=`FIRESTORE (${$1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Nh(n),new Error(n)}function ia(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||PZ(t,a,n)}function tn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Gd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Go.UNAUTHENTICATED))}shutdown(){}}class _ve{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Sve{constructor(t){this.t=t,this.currentUser=Go.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ia(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Ah;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ah,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{ur("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ur("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ah)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(ur("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ia(typeof n.accessToken=="string",31837,{l:n}),new RZ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ia(t===null||typeof t=="string",2055,{h:t}),new Go(t)}}class kve{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Go.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jve{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new kve(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Go.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bve{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ia(this.o===void 0,3512);const n=s=>{s.error!=null&&ur("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,ur("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{ur("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):ur("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ia(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new fQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tve(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Tve(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function jn(e,t){return e<t?-1:e>t?1:0}function sF(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return iB(a)===iB(s)?jn(a,s):iB(a)?1:-1}return jn(e.length,t.length)}const Ive=55296,Fve=57343;function iB(e){const t=e.charCodeAt(0);return t>=Ive&&t<=Fve}function n1(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ="__name__";class PA{constructor(t,r,n){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return PA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof PA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=PA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return jn(t.length,r.length)}static compareSegments(t,r){const n=PA.isNumericId(t),a=PA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?PA.extractNumericId(t).compare(PA.extractNumericId(r)):sF(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return cm.fromString(t.substring(4,t.length-2))}}class _a extends PA{construct(t,r,n){return new _a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new _a(r)}static emptyPath(){return new _a([])}}const Ove=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zi extends PA{construct(t,r,n){return new Zi(t,r,n)}static isValidIdentifier(t){return Ove.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hQ}static keyField(){return new Zi([hQ])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new Wt(Nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Wt(Nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new Wt(Nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zi(r)}static emptyPath(){return new Zi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.path=t}static fromPath(t){return new yr(_a.fromString(t))}static fromName(t){return new yr(_a.fromString(t).popFirst(5))}static empty(){return new yr(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yr(new _a(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZ(e,t,r){if(!r)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function UZ(e,t,r,n){if(t===!0&&n===!0)throw new Wt(Nt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function mQ(e){if(!yr.isDocumentKey(e))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function pQ(e){if(yr.isDocumentKey(e))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function QZ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function k4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function al(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=k4(e);throw new Wt(Nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Dve(e,t){if(t<=0)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t){const r={typeString:e};return t&&(r.value=t),r}function Y2(e,t){if(!QZ(e))throw new Wt(Nt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(Nt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=-62135596800,xQ=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*xQ);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<gQ)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xQ}_compareTo(t){return this.seconds===t.seconds?jn(this.nanoseconds,t.nanoseconds):jn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Y2(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-gQ;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:xi("string",ir._jsonSchemaVersion),seconds:xi("number"),nanoseconds:xi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{static fromTimestamp(t){return new Jr(t)}static min(){return new Jr(new ir(0,0))}static max(){return new Jr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=-1;function Pve(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Jr.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new wm(a,yr.empty(),t)}function Rve(e){return new wm(e.readTime,e.key,Kw)}class wm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new wm(Jr.min(),yr.empty(),Kw)}static max(){return new wm(Jr.max(),yr.empty(),Kw)}}function Lve(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=yr.comparator(e.documentKey,t.documentKey),r!==0?r:jn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(e){if(e.code!==Nt.FAILED_PRECONDITION||e.message!==Mve)throw e;ur("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,i=!1;t.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Qve(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function K1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}j4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=-1;function B4(e){return e==null}function p_(e){return e===0&&1/e==-1/0}function Hve(e){return typeof e=="number"&&Number.isInteger(e)&&!p_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ="";function Vve(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=vQ(t)),t=zve(e.get(r),t);return vQ(t)}function zve(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case HZ:r+="";break;default:r+=s}}return r}function vQ(e){return e+HZ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Vm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function VZ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,r){this.comparator=t,this.root=r||bo.EMPTY}insert(t,r){return new cs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,bo.BLACK,null,null))}remove(t){return new cs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new QC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new QC(this.root,t,this.comparator,!1)}getReverseIterator(){return new QC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new QC(this.root,t,this.comparator,!0)}}class QC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??bo.RED,this.left=a??bo.EMPTY,this.right=s??bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new bo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return bo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}bo.EMPTY=null,bo.RED=!0,bo.BLACK=!1;bo.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new bo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.comparator=t,this.data=new cs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new yQ(this.data.getIterator())}getIteratorFrom(t){return new yQ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Fi)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Fi(this.comparator);return r.data=t,r}}class yQ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t){this.fields=t,t.sort(Zi.comparator)}static empty(){return new Hc([])}unionWith(t){let r=new Fi(Zi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Hc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return n1(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zZ("Invalid base64 string: "+s):s}}(t);return new no(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new no(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}no.EMPTY_BYTE_STRING=new no("");const $ve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Em(e){if(ia(!!e,39018),typeof e=="string"){let t=0;const r=$ve.exec(e);if(ia(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ks(e.seconds),nanos:Ks(e.nanos)}}function Ks(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cm(e){return typeof e=="string"?no.fromBase64String(e):no.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Z="server_timestamp",GZ="__type__",KZ="__previous_value__",qZ="__local_write_time__";function T4(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[GZ])==null?void 0:n.stringValue)===$Z}function I4(e){const t=e.mapValue.fields[KZ];return T4(t)?I4(t):t}function qw(e){const t=Em(e.mapValue.fields[qZ].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{constructor(t,r,n,a,s,i,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const g_="(default)";class a1{constructor(t,r){this.projectId=t,this.database=r||g_}static empty(){return new a1("","")}get isDefaultDatabase(){return this.database===g_}isEqual(t){return t instanceof a1&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WZ="__type__",Kve="__max__",HC={mapValue:{}},XZ="__vector__",x_="value";function Nm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?T4(e)?4:Wve(e)?9007199254740991:qve(e)?10:11:zr(28295,{value:e})}function sf(e,t){if(e===t)return!0;const r=Nm(e);if(r!==Nm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qw(e).isEqual(qw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=Em(a.timestampValue),l=Em(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Cm(a.bytesValue).isEqual(Cm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ks(a.geoPointValue.latitude)===Ks(s.geoPointValue.latitude)&&Ks(a.geoPointValue.longitude)===Ks(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ks(a.integerValue)===Ks(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Ks(a.doubleValue),l=Ks(s.doubleValue);return i===l?p_(i)===p_(l):isNaN(i)&&isNaN(l)}return!1}(e,t);case 9:return n1(e.arrayValue.values||[],t.arrayValue.values||[],sf);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(bQ(i)!==bQ(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!sf(i[c],l[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function Ww(e,t){return(e.values||[]).find(r=>sf(r,t))!==void 0}function s1(e,t){if(e===t)return 0;const r=Nm(e),n=Nm(t);if(r!==n)return jn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return jn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const l=Ks(s.integerValue||s.doubleValue),c=Ks(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return wQ(e.timestampValue,t.timestampValue);case 4:return wQ(qw(e),qw(t));case 5:return sF(e.stringValue,t.stringValue);case 6:return function(s,i){const l=Cm(s),c=Cm(i);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=jn(l[u],c[u]);if(d!==0)return d}return jn(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const l=jn(Ks(s.latitude),Ks(i.latitude));return l!==0?l:jn(Ks(s.longitude),Ks(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return EQ(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,m,g,x;const l=s.fields||{},c=i.fields||{},u=(h=l[x_])==null?void 0:h.arrayValue,d=(m=c[x_])==null?void 0:m.arrayValue,A=jn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return A!==0?A:EQ(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===HC.mapValue&&i===HC.mapValue)return 0;if(s===HC.mapValue)return 1;if(i===HC.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let A=0;A<c.length&&A<d.length;++A){const h=sF(c[A],d[A]);if(h!==0)return h;const m=s1(l[c[A]],u[d[A]]);if(m!==0)return m}return jn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function wQ(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return jn(e,t);const r=Em(e),n=Em(t),a=jn(r.seconds,n.seconds);return a!==0?a:jn(r.nanos,n.nanos)}function EQ(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=s1(r[a],n[a]);if(s)return s}return jn(r.length,n.length)}function i1(e){return iF(e)}function iF(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=Em(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Cm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return yr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=iF(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${iF(r.fields[i])}`;return a+"}"}(e.mapValue):zr(61005,{value:e})}function E5(e){switch(Nm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=I4(e);return t?16+E5(t):16;case 5:return 2*e.stringValue.length;case 6:return Cm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+E5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Vm(n.fields,(s,i)=>{a+=s.length+E5(i)}),a}(e.mapValue);default:throw zr(13486,{value:e})}}function v_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function oF(e){return!!e&&"integerValue"in e}function EP(e){return!!e&&"arrayValue"in e}function CQ(e){return!!e&&"nullValue"in e}function NQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function C5(e){return!!e&&"mapValue"in e}function qve(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[WZ])==null?void 0:n.stringValue)===XZ}function fw(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Vm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=fw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=fw(e.arrayValue.values[r]);return t}return{...e}}function Wve(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Kve}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t){this.value=t}static empty(){return new ec({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!C5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=fw(r)}setAll(t){let r=Zi.emptyPath(),n={},a=[];t.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=fw(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());C5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return sf(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];C5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Vm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new ec(fw(this.value))}}function YZ(e){const t=[];return Vm(e.fields,(r,n)=>{const a=new Zi([r]);if(C5(n)){const s=YZ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Hc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,r,n,a,s,i,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(t){return new Xo(t,0,Jr.min(),Jr.min(),Jr.min(),ec.empty(),0)}static newFoundDocument(t,r,n,a){return new Xo(t,1,r,Jr.min(),n,a,0)}static newNoDocument(t,r){return new Xo(t,2,r,Jr.min(),Jr.min(),ec.empty(),0)}static newUnknownDocument(t,r){return new Xo(t,3,r,Jr.min(),Jr.min(),ec.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Jr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ec.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ec.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(t,r){this.position=t,this.inclusive=r}}function _Q(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=yr.comparator(yr.fromName(i.referenceValue),r.key):n=s1(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function SQ(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!sf(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t,r="asc"){this.field=t,this.dir=r}}function Xve(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{}class pi extends JZ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Jve(t,r,n):r==="array-contains"?new t1e(t,n):r==="in"?new r1e(t,n):r==="not-in"?new n1e(t,n):r==="array-contains-any"?new a1e(t,n):new pi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Zve(t,n):new e1e(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(s1(r,this.value)):r!==null&&Nm(this.value)===Nm(r)&&this.matchesComparison(s1(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vd extends JZ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Vd(t,r)}matches(t){return ZZ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZZ(e){return e.op==="and"}function eee(e){return Yve(e)&&ZZ(e)}function Yve(e){for(const t of e.filters)if(t instanceof Vd)return!1;return!0}function lF(e){if(e instanceof pi)return e.field.canonicalString()+e.op.toString()+i1(e.value);if(eee(e))return e.filters.map(t=>lF(t)).join(",");{const t=e.filters.map(r=>lF(r)).join(",");return`${e.op}(${t})`}}function tee(e,t){return e instanceof pi?function(n,a){return a instanceof pi&&n.op===a.op&&n.field.isEqual(a.field)&&sf(n.value,a.value)}(e,t):e instanceof Vd?function(n,a){return a instanceof Vd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&tee(i,a.filters[l]),!0):!1}(e,t):void zr(19439)}function ree(e){return e instanceof pi?function(r){return`${r.field.canonicalString()} ${r.op} ${i1(r.value)}`}(e):e instanceof Vd?function(r){return r.op.toString()+" {"+r.getFilters().map(ree).join(" ,")+"}"}(e):"Filter"}class Jve extends pi{constructor(t,r,n){super(t,r,n),this.key=yr.fromName(n.referenceValue)}matches(t){const r=yr.comparator(t.key,this.key);return this.matchesComparison(r)}}class Zve extends pi{constructor(t,r){super(t,"in",r),this.keys=nee("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class e1e extends pi{constructor(t,r){super(t,"not-in",r),this.keys=nee("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function nee(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>yr.fromName(n.referenceValue))}class t1e extends pi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return EP(r)&&Ww(r.arrayValue,this.value)}}class r1e extends pi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ww(this.value.arrayValue,r)}}class n1e extends pi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ww(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ww(this.value.arrayValue,r)}}class a1e extends pi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!EP(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ww(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(t,r=null,n=[],a=[],s=null,i=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.Te=null}}function kQ(e,t=null,r=[],n=[],a=null,s=null,i=null){return new s1e(e,t,r,n,a,s,i)}function CP(e){const t=tn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>lF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),B4(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>i1(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>i1(n)).join(",")),t.Te=r}return t.Te}function NP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Xve(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!tee(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!SQ(e.startAt,t.startAt)&&SQ(e.endAt,t.endAt)}function cF(e){return yr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function i1e(e,t,r,n,a,s,i,l){return new Qg(e,t,r,n,a,s,i,l)}function F4(e){return new Qg(e)}function jQ(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function _P(e){return e.collectionGroup!==null}function Dv(e){const t=tn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Fi(Zi.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Xw(s,n))}),r.has(Zi.keyField().canonicalString())||t.Ie.push(new Xw(Zi.keyField(),n))}return t.Ie}function JA(e){const t=tn(e);return t.Ee||(t.Ee=o1e(t,Dv(e))),t.Ee}function o1e(e,t){if(e.limitType==="F")return kQ(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Xw(a.field,s)});const r=e.endAt?new o1(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new o1(e.startAt.position,e.startAt.inclusive):null;return kQ(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function uF(e,t){const r=e.filters.concat([t]);return new Qg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function b_(e,t,r){return new Qg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function O4(e,t){return NP(JA(e),JA(t))&&e.limitType===t.limitType}function aee(e){return`${CP(JA(e))}|lt:${e.limitType}`}function cv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>ree(a)).join(", ")}]`),B4(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>i1(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>i1(a)).join(",")),`Target(${n})`}(JA(e))}; limitType=${e.limitType})`}function D4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Dv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=_Q(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,Dv(n),a)||n.endAt&&!function(i,l,c){const u=_Q(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,Dv(n),a))}(e,t)}function l1e(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function see(e){return(t,r)=>{let n=!1;for(const a of Dv(e)){const s=c1e(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function c1e(e,t,r){const n=e.field.isKeyField()?yr.comparator(t.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?s1(c,u):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Vm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return VZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1e=new cs(yr.comparator);function _h(){return u1e}const iee=new cs(yr.comparator);function $y(...e){let t=iee;for(const r of e)t=t.insert(r.key,r);return t}function oee(e){let t=iee;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Hp(){return hw()}function lee(){return hw()}function hw(){return new Hg(e=>e.toString(),(e,t)=>e.isEqual(t))}const d1e=new cs(yr.comparator),A1e=new Fi(yr.comparator);function Bn(...e){let t=A1e;for(const r of e)t=t.add(r);return t}const f1e=new Fi(jn);function h1e(){return f1e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p_(t)?"-0":t}}function cee(e){return{integerValue:""+e}}function m1e(e,t){return Hve(t)?cee(t):SP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this._=void 0}}function p1e(e,t,r){return e instanceof Yw?function(a,s){const i={fields:{[GZ]:{stringValue:$Z},[qZ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&T4(s)&&(s=I4(s)),s&&(i.fields[KZ]=s),{mapValue:i}}(r,t):e instanceof l1?dee(e,t):e instanceof Jw?Aee(e,t):function(a,s){const i=uee(a,s),l=BQ(i)+BQ(a.Ae);return oF(i)&&oF(a.Ae)?cee(l):SP(a.serializer,l)}(e,t)}function g1e(e,t,r){return e instanceof l1?dee(e,t):e instanceof Jw?Aee(e,t):r}function uee(e,t){return e instanceof y_?function(n){return oF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Yw extends P4{}class l1 extends P4{constructor(t){super(),this.elements=t}}function dee(e,t){const r=fee(t);for(const n of e.elements)r.some(a=>sf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Jw extends P4{constructor(t){super(),this.elements=t}}function Aee(e,t){let r=fee(t);for(const n of e.elements)r=r.filter(a=>!sf(a,n));return{arrayValue:{values:r}}}class y_ extends P4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function BQ(e){return Ks(e.integerValue||e.doubleValue)}function fee(e){return EP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hee{constructor(t,r){this.field=t,this.transform=r}}function x1e(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof l1&&a instanceof l1||n instanceof Jw&&a instanceof Jw?n1(n.elements,a.elements,sf):n instanceof y_&&a instanceof y_?sf(n.Ae,a.Ae):n instanceof Yw&&a instanceof Yw}(e.transform,t.transform)}class v1e{constructor(t,r){this.version=t,this.transformResults=r}}class Cl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Cl}static exists(t){return new Cl(void 0,t)}static updateTime(t){return new Cl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function N5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class R4{}function mee(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new L4(e.key,Cl.none()):new J2(e.key,e.data,Cl.none());{const r=e.data,n=ec.empty();let a=new Fi(Zi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new zm(e.key,n,new Hc(a.toArray()),Cl.none())}}function b1e(e,t,r){e instanceof J2?function(a,s,i){const l=a.value.clone(),c=IQ(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):e instanceof zm?function(a,s,i){if(!N5(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=IQ(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(pee(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function mw(e,t,r,n){return e instanceof J2?function(s,i,l,c){if(!N5(s.precondition,i))return l;const u=s.value.clone(),d=FQ(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof zm?function(s,i,l,c){if(!N5(s.precondition,i))return l;const u=FQ(s.fieldTransforms,c,i),d=i.data;return d.setAll(pee(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(e,t,r,n):function(s,i,l){return N5(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(e,t,r)}function y1e(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=uee(n.transform,a||null);s!=null&&(r===null&&(r=ec.empty()),r.set(n.field,s))}return r||null}function TQ(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&n1(n,a,(s,i)=>x1e(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class J2 extends R4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zm extends R4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pee(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function IQ(e,t,r){const n=new Map;ia(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,l=t.data.field(s.field);n.set(s.field,g1e(i,l,r[a]))}return n}function FQ(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,p1e(s,i,t))}return n}class L4 extends R4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w1e extends R4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1e{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&b1e(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=mw(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=mw(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=lee();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=mee(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Jr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&n1(this.mutations,t.mutations,(r,n)=>TQ(r,n))&&n1(this.baseMutations,t.baseMutations,(r,n)=>TQ(r,n))}}class kP{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ia(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return d1e}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new kP(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1e{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1e{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui,Mn;function _1e(e){switch(e){case Nt.OK:return zr(64938);case Nt.CANCELLED:case Nt.UNKNOWN:case Nt.DEADLINE_EXCEEDED:case Nt.RESOURCE_EXHAUSTED:case Nt.INTERNAL:case Nt.UNAVAILABLE:case Nt.UNAUTHENTICATED:return!1;case Nt.INVALID_ARGUMENT:case Nt.NOT_FOUND:case Nt.ALREADY_EXISTS:case Nt.PERMISSION_DENIED:case Nt.FAILED_PRECONDITION:case Nt.ABORTED:case Nt.OUT_OF_RANGE:case Nt.UNIMPLEMENTED:case Nt.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function gee(e){if(e===void 0)return Nh("GRPC error has no .code"),Nt.UNKNOWN;switch(e){case ui.OK:return Nt.OK;case ui.CANCELLED:return Nt.CANCELLED;case ui.UNKNOWN:return Nt.UNKNOWN;case ui.DEADLINE_EXCEEDED:return Nt.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return Nt.RESOURCE_EXHAUSTED;case ui.INTERNAL:return Nt.INTERNAL;case ui.UNAVAILABLE:return Nt.UNAVAILABLE;case ui.UNAUTHENTICATED:return Nt.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return Nt.INVALID_ARGUMENT;case ui.NOT_FOUND:return Nt.NOT_FOUND;case ui.ALREADY_EXISTS:return Nt.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return Nt.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return Nt.FAILED_PRECONDITION;case ui.ABORTED:return Nt.ABORTED;case ui.OUT_OF_RANGE:return Nt.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return Nt.UNIMPLEMENTED;case ui.DATA_LOSS:return Nt.DATA_LOSS;default:return zr(39323,{code:e})}}(Mn=ui||(ui={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1e=new cm([4294967295,4294967295],0);function OQ(e){const t=S1e().encode(e),r=new BZ;return r.update(t),new Uint8Array(r.digest())}function DQ(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new cm([r,n],0),new cm([a,s],0)]}class jP{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Gy(`Invalid padding: ${r}`);if(n<0)throw new Gy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Gy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Gy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=cm.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(cm.fromNumber(n)));return a.compare(k1e)===1&&(a=new cm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=OQ(t),[n,a]=DQ(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new jP(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(t){if(this.ge===0)return;const r=OQ(t),[n,a]=DQ(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Gy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,Z2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new M4(Jr.min(),a,new cs(jn),_h(),Bn())}}class Z2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Z2(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class xee{constructor(t,r){this.targetId=t,this.Ce=r}}class vee{constructor(t,r,n=no.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class PQ{constructor(){this.ve=0,this.Fe=RQ(),this.Me=no.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:zr(38017,{changeType:s})}}),new Z2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=RQ()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ia(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class j1e{constructor(t){this.Ge=t,this.ze=new Map,this.je=_h(),this.Je=VC(),this.He=VC(),this.Ye=new cs(jn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(cF(s))if(n===0){const i=new yr(s.path);this.et(r,i,Xo.newNoDocument(i,Jr.min()))}else ia(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const l=this.ut(t),c=l?this.ct(l,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=Cm(n).toUint8Array()}catch(c){if(c instanceof zZ)return gg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new jP(i,a,s)}catch(c){return gg(c instanceof Gy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const l=this.ot(i);if(l){if(s.current&&cF(l.target)){const c=new yr(l.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,Xo.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new M4(t,r,this.Ye,this.je,n);return this.je=_h(),this.Je=VC(),this.He=VC(),this.Ye=new cs(jn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new PQ,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Fi(jn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Fi(jn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||ur("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new PQ),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function VC(){return new cs(yr.comparator)}function RQ(){return new cs(yr.comparator)}const B1e={asc:"ASCENDING",desc:"DESCENDING"},T1e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I1e={and:"AND",or:"OR"};class F1e{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function dF(e,t){return e.useProto3Json||B4(t)?t:{value:t}}function w_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bee(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function O1e(e,t){return w_(e,t.toTimestamp())}function ZA(e){return ia(!!e,49232),Jr.fromTimestamp(function(r){const n=Em(r);return new ir(n.seconds,n.nanos)}(e))}function BP(e,t){return AF(e,t).canonicalString()}function AF(e,t){const r=function(a){return new _a(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function yee(e){const t=_a.fromString(e);return ia(_ee(t),10190,{key:t.toString()}),t}function fF(e,t){return BP(e.databaseId,t.path)}function oB(e,t){const r=yee(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new yr(Eee(r))}function wee(e,t){return BP(e.databaseId,t)}function D1e(e){const t=yee(e);return t.length===4?_a.emptyPath():Eee(t)}function hF(e){return new _a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Eee(e){return ia(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function LQ(e,t,r){return{name:fF(e,t),fields:r.value.mapValue.fields}}function P1e(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ia(d===void 0||typeof d=="string",58123),no.fromBase64String(d||"")):(ia(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),no.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Nt.UNKNOWN:gee(u.code);return new Wt(d,u.message||"")}(i);r=new vee(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=oB(e,n.document.name),s=ZA(n.document.updateTime),i=n.document.createTime?ZA(n.document.createTime):Jr.min(),l=new ec({mapValue:{fields:n.document.fields}}),c=Xo.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new _5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=oB(e,n.document),s=n.readTime?ZA(n.readTime):Jr.min(),i=Xo.newNoDocument(a,s),l=n.removedTargetIds||[];r=new _5([],l,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=oB(e,n.document),s=n.removedTargetIds||[];r=new _5([],s,a,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new N1e(a,s),l=n.targetId;r=new xee(l,i)}}return r}function R1e(e,t){let r;if(t instanceof J2)r={update:LQ(e,t.key,t.value)};else if(t instanceof L4)r={delete:fF(e,t.key)};else if(t instanceof zm)r={update:LQ(e,t.key,t.data),updateMask:G1e(t.fieldMask)};else{if(!(t instanceof w1e))return zr(16599,{Vt:t.type});r={verify:fF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof Yw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof l1)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof y_)return{fieldPath:i.field.canonicalString(),increment:l.Ae};throw zr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:O1e(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zr(27497)}(e,t.precondition)),r}function L1e(e,t){return e&&e.length>0?(ia(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?ZA(a.updateTime):ZA(s);return i.isEqual(Jr.min())&&(i=ZA(s)),new v1e(i,a.transformResults||[])}(r,t))):[]}function M1e(e,t){return{documents:[wee(e,t.path)]}}function U1e(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=wee(e,a);const s=function(u){if(u.length!==0)return Nee(Vd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:uv(h.field),direction:V1e(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const l=dF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Q1e(e){let t=D1e(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ia(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(A){const h=Cee(A);return h instanceof Vd&&eee(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(A){return A.map(h=>function(g){return new Xw(dv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(A){let h;return h=typeof A=="object"?A.value:A,B4(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(A){const h=!!A.before,m=A.values||[];return new o1(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(A){const h=!A.before,m=A.values||[];return new o1(m,h)}(r.endAt)),i1e(t,a,i,s,l,"F",c,u)}function H1e(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Cee(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=dv(r.unaryFilter.field);return pi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=dv(r.unaryFilter.field);return pi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=dv(r.unaryFilter.field);return pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dv(r.unaryFilter.field);return pi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return pi.create(dv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Vd.create(r.compositeFilter.filters.map(n=>Cee(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function V1e(e){return B1e[e]}function z1e(e){return T1e[e]}function $1e(e){return I1e[e]}function uv(e){return{fieldPath:e.canonicalString()}}function dv(e){return Zi.fromServerFormat(e.fieldPath)}function Nee(e){return e instanceof pi?function(r){if(r.op==="=="){if(NQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NAN"}};if(CQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(NQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NAN"}};if(CQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uv(r.field),op:z1e(r.op),value:r.value}}}(e):e instanceof Vd?function(r){const n=r.getFilters().map(a=>Nee(a));return n.length===1?n[0]:{compositeFilter:{op:$1e(r.op),filters:n}}}(e):zr(54877,{filter:e})}function G1e(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function _ee(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,r,n,a,s=Jr.min(),i=Jr.min(),l=no.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Z0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Z0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Z0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Z0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1e{constructor(t){this.yt=t}}function q1e(e){const t=Q1e({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?b_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1e{constructor(){this.Cn=new X1e}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(wm.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(wm.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class X1e{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Fi(_a.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Fi(_a.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},See=41943040;class Wl{static withCacheSize(t){return new Wl(t,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wl.DEFAULT_COLLECTION_PERCENTILE=10,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wl.DEFAULT=new Wl(See,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wl.DISABLED=new Wl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new c1(0)}static cr(){return new c1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ="LruGarbageCollector",Y1e=1048576;function QQ([e,t],[r,n]){const a=jn(e,r);return a===0?jn(t,n):a}class J1e{constructor(t){this.Ir=t,this.buffer=new Fi(QQ),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();QQ(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Z1e{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ur(UQ,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){K1(r)?ur(UQ,"Ignoring IndexedDB error during garbage collection: ",r):await G1(r)}await this.Vr(3e5)})}}class ebe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(j4.ce);const n=new J1e(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(ur("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(MQ)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(ur("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MQ):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ur("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,i=Date.now(),this.nthSequenceNumber(t,a))).next(A=>(n=A,l=Date.now(),this.removeTargets(t,n,r))).next(A=>(s=A,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(A=>(u=Date.now(),lv()<=kn.DEBUG&&ur("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${A} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:A})))}}function tbe(e,t){return new ebe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rbe{constructor(){this.changes=new Hg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Xo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nbe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&mw(n.mutation,a,Hc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=Hp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=$y();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Hp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(t,r,n,a){let s=_h();const i=hw(),l=function(){return hw()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof zm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),mw(d.mutation,u,d.mutation.getFieldMask(),ir.now())):i.set(u.key,Hc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>l.set(u,new nbe(d,i.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=hw();let a=new cs((i,l)=>i-l),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Hc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const A=(a.get(l.batchId)||Bn()).add(c);a=a.insert(l.batchId,A)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,A=lee();d.forEach(h=>{if(!s.has(h)){const m=mee(r.get(h),n.get(h));m!==null&&A.set(h,m),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,A))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return yr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):_P(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(Hp());let l=Kw,c=s;return i.next(u=>Dt.forEach(u,(d,A)=>(l<A.largestBatchId&&(l=A.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Bn())).next(d=>({batchId:l,changes:oee(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new yr(r)).next(n=>{let a=$y();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=$y();return this.indexManager.getCollectionParents(t,s).next(l=>Dt.forEach(l,c=>{const u=function(A,h){return new Qg(h,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((A,h)=>{i=i.insert(A,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Xo.newInvalidDocument(d)))});let l=$y();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&mw(d.mutation,u,Hc.empty(),ir.now()),D4(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:ZA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:q1e(a.bundledQuery),readTime:ZA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ibe{constructor(){this.overlays=new cs(yr.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Hp();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=Hp(),s=r.length+1,i=new yr(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new cs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Hp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Hp(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Dt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new C1e(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class obe{constructor(){this.sessionToken=no.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.Qr=new Fi(Wi.$r),this.Ur=new Fi(Wi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Wi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Wi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new yr(new _a([])),n=new Wi(r,t),a=new Wi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new yr(new _a([])),n=new Wi(r,t),a=new Wi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Wi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Wi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return yr.comparator(t.key,r.key)||jn(t.Yr,r.Yr)}static Kr(t,r){return jn(t.Yr,r.Yr)||yr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lbe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Fi(Wi.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new E1e(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.Zr=this.Zr.add(new Wi(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?wP:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Wi(r,0),a=new Wi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const l=this.Xr(i.Yr);s.push(l)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Fi(jn);return r.forEach(a=>{const s=new Wi(a,0),i=new Wi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],l=>{n=n.add(l.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;yr.isDocumentKey(s)||(s=s.child(""));const i=new Wi(new yr(s),0);let l=new Fi(jn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},i),Dt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ia(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new Wi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Wi(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{constructor(t){this.ri=t,this.docs=function(){return new cs(yr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():Xo.newInvalidDocument(r))}getEntries(t,r){let n=_h();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Xo.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=_h();const i=r.path,l=new yr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Lve(Rve(d),n)<=0||(a.has(d.key)||D4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){zr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new ube(this)}getSize(t){return Dt.resolve(this.size)}}class ube extends rbe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(t){this.persistence=t,this.si=new Hg(r=>CP(r),NP),this.lastRemoteSnapshotVersion=Jr.min(),this.highestTargetId=0,this.oi=0,this._i=new TP,this.targetCount=0,this.ai=c1.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new c1(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kee{constructor(t,r){this.ui={},this.overlays={},this.ci=new j4(0),this.li=!1,this.li=!0,this.hi=new obe,this.referenceDelegate=t(this),this.Pi=new dbe(this),this.indexManager=new W1e,this.remoteDocumentCache=function(a){return new cbe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new K1e(r),this.Ii=new sbe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new ibe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new lbe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){ur("MemoryPersistence","Starting transaction:",t);const a=new Abe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Abe extends Uve{constructor(t){super(),this.currentSequenceNumber=t}}class IP{constructor(t){this.persistence=t,this.Ri=new TP,this.Vi=null}static mi(t){return new IP(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=yr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Jr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class E_{constructor(t,r){this.persistence=t,this.pi=new Hg(n=>Vve(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=tbe(this,r)}static mi(t,r){return new E_(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(l=>{l||(n++,s.removeEntry(i,Jr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=E5(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new FP(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fbe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hbe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $me()?8:Qve(il())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new fbe;return this.Ss(t,r,i).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,i,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(lv()<=kn.DEBUG&&ur("QueryEngine","SDK will not create cache indexes for query:",cv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):(lv()<=kn.DEBUG&&ur("QueryEngine","Query:",cv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(lv()<=kn.DEBUG&&ur("QueryEngine","The SDK decides to create cache indexes for query:",cv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,JA(r))):Dt.resolve())}ys(t,r){if(jQ(r))return Dt.resolve(null);let n=JA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=b_(r,null,"F"),n=JA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,i,c.readTime)?this.ys(t,b_(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return jQ(r)||a.isEqual(Jr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Dt.resolve(null):(lv()<=kn.DEBUG&&ur("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),cv(r)),this.vs(t,i,r,Pve(a,Kw)).next(l=>l))})}Ds(t,r){let n=new Fi(see(t));return r.forEach((a,s)=>{D4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return lv()<=kn.DEBUG&&ur("QueryEngine","Using full collection scan to execute query:",cv(r)),this.ps.getDocumentsMatchingQuery(t,r,wm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="LocalStore",mbe=3e8;class pbe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new cs(jn),this.xs=new Hg(s=>CP(s),NP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new abe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function gbe(e,t,r,n){return new pbe(e,t,r,n)}async function jee(e,t){const r=tn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:l}))})})}function xbe(e,t){const r=tn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const A=u.batch,h=A.keys();let m=Dt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ia(v!==null,48541),x.version.compareTo(v)<0&&(A.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,A))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Bn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function Bee(e){const t=tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function vbe(e,t){const r=tn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,A)=>{const h=a.get(A);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,A).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,A)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(A)!==null?m=m.withResumeToken(no.EMPTY_BYTE_STRING,Jr.min()).withLastLimboFreeSnapshotVersion(Jr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(A,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=mbe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=_h(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(bbe(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Jr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(A=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Dt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function bbe(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=_h();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Jr.min())?(t.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(l,c)):ur(OP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function ybe(e,t){const r=tn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=wP),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function wbe(e,t){const r=tn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new Z0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function mF(e,t,r){const n=tn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!K1(i))throw i;ur(OP,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function HQ(e,t,r){const n=tn(e);let a=Jr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const A=tn(c),h=A.xs.get(d);return h!==void 0?Dt.resolve(A.Ms.get(h)):A.Pi.getTargetData(u,d)}(n,i,JA(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Jr.min(),r?s:Bn())).next(l=>(Ebe(n,l1e(t),l),{documents:l,Qs:s})))}function Ebe(e,t,r){let n=e.Os.get(t)||Jr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class VQ{constructor(){this.activeTargetIds=h1e()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Cbe{constructor(){this.Mo=new VQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new VQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zQ="ConnectivityMonitor";class $Q{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ur(zQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ur(zQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC=null;function pF(){return zC===null?zC=function(){return 268435456+Math.round(2147483648*Math.random())}():zC++,"0x"+zC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="RestConnection",_be={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sbe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===g_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=pF(),l=this.zo(t,r.toUriEncodedString());ur(lB,`Sending RPC '${t}' ${i}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Uh(u);return this.Jo(t,l,c,n,d).then(A=>(ur(lB,`Received RPC '${t}' ${i}: `,A),A),A=>{throw gg(lB,`RPC '${t}' ${i} failed with error: `,A,"url: ",l,"request:",n),A})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=_be[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kbe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="WebChannelConnection";class jbe extends Sbe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=pF();return new Promise((l,c)=>{const u=new TZ;u.setWithCredentials(!0),u.listenOnce(IZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case w5.NO_ERROR:const A=u.getResponseJson();ur(Lo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(A)),l(A);break;case w5.TIMEOUT:ur(Lo,`RPC '${t}' ${i} timed out`),c(new Wt(Nt.DEADLINE_EXCEEDED,"Request time out"));break;case w5.HTTP_ERROR:const h=u.getStatus();if(ur(Lo,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Nt).indexOf(w)>=0?w:Nt.UNKNOWN}(g.status);c(new Wt(x,g.message))}else c(new Wt(Nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Wt(Nt.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ur(Lo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);ur(Lo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=pF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=DZ(),l=OZ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");ur(Lo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const A=i.createWebChannel(d,c);this.I_(A);let h=!1,m=!1;const g=new kbe({Yo:v=>{m?ur(Lo,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(ur(Lo,`Opening RPC '${t}' stream ${a} transport.`),A.open(),h=!0),ur(Lo,`RPC '${t}' stream ${a} sending:`,v),A.send(v))},Zo:()=>A.close()}),x=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(j){setTimeout(()=>{throw j},0)}})};return x(A,zy.EventType.OPEN,()=>{m||(ur(Lo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(A,zy.EventType.CLOSE,()=>{m||(m=!0,ur(Lo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(A))}),x(A,zy.EventType.ERROR,v=>{m||(m=!0,gg(Lo,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Wt(Nt.UNAVAILABLE,"The operation could not be completed")))}),x(A,zy.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];ia(!!w,16349);const _=w,j=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(j){ur(Lo,`RPC '${t}' stream ${a} received error:`,j);const k=j.status;let I=function(B){const R=ui[B];if(R!==void 0)return gee(R)}(k),E=j.message;I===void 0&&(I=Nt.INTERNAL,E="Unknown error status: "+k+" with message "+j.message),m=!0,g.a_(new Wt(I,E)),A.close()}else ur(Lo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(l,FZ.STAT_EVENT,v=>{v.stat===aF.PROXY?ur(Lo,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===aF.NOPROXY&&ur(Lo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function cB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(e){return new F1e(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&ur("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GQ="PersistentStream";class Iee{constructor(t,r,n,a,s,i,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tee(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Nt.RESOURCE_EXHAUSTED?(Nh(r.toString()),Nh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(Nt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ur(GQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(ur(GQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bbe extends Iee{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=P1e(this.serializer,t),n=function(s){if(!("targetChange"in s))return Jr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Jr.min():i.readTime?ZA(i.readTime):Jr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=hF(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=cF(c)?{documents:M1e(s,c)}:{query:U1e(s,c).ft},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=bee(s,i.resumeToken);const u=dF(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo(Jr.min())>0){l.readTime=w_(s,i.snapshotVersion.toTimestamp());const u=dF(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=H1e(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=hF(this.serializer),r.removeTarget=t,this.q_(r)}}class Tbe extends Iee{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ia(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ia(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ia(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=L1e(t.writeResults,t.commitTime),n=ZA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=hF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>R1e(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ibe{}class Fbe extends Ibe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,AF(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(Nt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Ho(t,AF(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(Nt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Obe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nh(r),this.aa=!1):ur("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="RemoteStore";class Dbe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Vg(this)&&(ur(xg,"Restarting streams for network reachability change."),await async function(c){const u=tn(c);u.Ea.add(4),await eE(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Q4(u)}(this))})}),this.Ra=new Obe(n,a)}}async function Q4(e){if(Vg(e))for(const t of e.da)await t(!0)}async function eE(e){for(const t of e.da)await t(!1)}function Fee(e,t){const r=tn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),LP(r)?RP(r):q1(r).O_()&&PP(r,t))}function DP(e,t){const r=tn(e),n=q1(r);r.Ia.delete(t),n.O_()&&Oee(r,t),r.Ia.size===0&&(n.O_()?n.L_():Vg(r)&&r.Ra.set("Unknown"))}function PP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}q1(e).Y_(t)}function Oee(e,t){e.Va.Ue(t),q1(e).Z_(t)}function RP(e){e.Va=new j1e({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),q1(e).start(),e.Ra.ua()}function LP(e){return Vg(e)&&!q1(e).x_()&&e.Ia.size>0}function Vg(e){return tn(e).Ea.size===0}function Dee(e){e.Va=void 0}async function Pbe(e){e.Ra.set("Online")}async function Rbe(e){e.Ia.forEach((t,r)=>{PP(e,t)})}async function Lbe(e,t){Dee(e),LP(e)?(e.Ra.ha(t),RP(e)):e.Ra.set("Unknown")}async function Mbe(e,t,r){if(e.Ra.set("Online"),t instanceof vee&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){ur(xg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await C_(e,n)}else if(t instanceof _5?e.Va.Ze(t):t instanceof xee?e.Va.st(t):e.Va.tt(t),!r.isEqual(Jr.min()))try{const n=await Bee(e.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Va.Tt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(no.EMPTY_BYTE_STRING,d.snapshotVersion)),Oee(s,c);const A=new Z0(d.target,c,u,d.sequenceNumber);PP(s,A)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){ur(xg,"Failed to raise snapshot:",n),await C_(e,n)}}async function C_(e,t,r){if(!K1(t))throw t;e.Ea.add(1),await eE(e),e.Ra.set("Offline"),r||(r=()=>Bee(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ur(xg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Q4(e)})}function Pee(e,t){return t().catch(r=>C_(e,r,t))}async function H4(e){const t=tn(e),r=_m(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wP;for(;Ube(t);)try{const a=await ybe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Qbe(t,a)}catch(a){await C_(t,a)}Ree(t)&&Lee(t)}function Ube(e){return Vg(e)&&e.Ta.length<10}function Qbe(e,t){e.Ta.push(t);const r=_m(e);r.O_()&&r.X_&&r.ea(t.mutations)}function Ree(e){return Vg(e)&&!_m(e).x_()&&e.Ta.length>0}function Lee(e){_m(e).start()}async function Hbe(e){_m(e).ra()}async function Vbe(e){const t=_m(e);for(const r of e.Ta)t.ea(r.mutations)}async function zbe(e,t,r){const n=e.Ta.shift(),a=kP.from(n,t,r);await Pee(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await H4(e)}async function $be(e,t){t&&_m(e).X_&&await async function(n,a){if(function(i){return _1e(i)&&i!==Nt.ABORTED}(a.code)){const s=n.Ta.shift();_m(n).B_(),await Pee(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await H4(n)}}(e,t),Ree(e)&&Lee(e)}async function KQ(e,t){const r=tn(e);r.asyncQueue.verifyOperationInProgress(),ur(xg,"RemoteStore received new credentials");const n=Vg(r);r.Ea.add(3),await eE(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Q4(r)}async function Gbe(e,t){const r=tn(e);t?(r.Ea.delete(2),await Q4(r)):t||(r.Ea.add(2),await eE(r),r.Ra.set("Unknown"))}function q1(e){return e.ma||(e.ma=function(r,n,a){const s=tn(r);return s.sa(),new Bbe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Pbe.bind(null,e),t_:Rbe.bind(null,e),r_:Lbe.bind(null,e),H_:Mbe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),LP(e)?RP(e):e.Ra.set("Unknown")):(await e.ma.stop(),Dee(e))})),e.ma}function _m(e){return e.fa||(e.fa=function(r,n,a){const s=tn(r);return s.sa(),new Tbe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hbe.bind(null,e),r_:$be.bind(null,e),ta:Vbe.bind(null,e),na:zbe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await H4(e)):(await e.fa.stop(),e.Ta.length>0&&(ur(xg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Ah,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,l=new MP(t,r,i,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(Nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function UP(e,t){if(Nh("AsyncQueue",`${t}: ${e}`),K1(e))return new Wt(Nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static emptySet(t){return new Pv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||yr.comparator(r.key,n.key):(r,n)=>yr.comparator(r.key,n.key),this.keyedMap=$y(),this.sortedSet=new cs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Pv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Pv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(){this.ga=new cs(yr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class u1{constructor(t,r,n,a,s,i,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new u1(t,r,Pv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&O4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class qbe{constructor(){this.queries=WQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=tn(r),s=a.queries;a.queries=WQ(),s.forEach((i,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Wt(Nt.ABORTED,"Firestore shutting down"))}}function WQ(){return new Hg(e=>aee(e),O4)}async function QP(e,t){const r=tn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Kbe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=UP(i,`Initialization of query '${cv(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&VP(r)}async function HP(e,t){const r=tn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Wbe(e,t){const r=tn(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.Sa)l.Fa(a)&&(n=!0);i.wa=a}}n&&VP(r)}function Xbe(e,t,r){const n=tn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function VP(e){e.Ca.forEach(t=>{t.next()})}var gF,XQ;(XQ=gF||(gF={})).Ma="default",XQ.Cache="cache";class zP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new u1(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=u1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==gF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(t){this.key=t}}class Uee{constructor(t){this.key=t}}class Ybe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=see(t),this.tu=new Pv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new qQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,A)=>{const h=a.get(d),m=D4(this.query,A)?A:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(i=i.add(m),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,A)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,A.type)||this.eu(d.doc,A.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new u1(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new Uee(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new Mee(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return u1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $P="SyncEngine";class Jbe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Zbe{constructor(t){this.key=t,this.hu=!1}}class eye{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Hg(l=>aee(l),O4),this.Iu=new Map,this.Eu=new Set,this.du=new cs(yr.comparator),this.Au=new Map,this.Ru=new TP,this.Vu={},this.mu=new Map,this.fu=c1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tye(e,t,r=!0){const n=Gee(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await Qee(n,t,r,!0),a}async function rye(e,t){const r=Gee(e);await Qee(r,t,!0,!1)}async function Qee(e,t,r,n){const a=await wbe(e.localStore,JA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await nye(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&Fee(e.remoteStore,a),l}async function nye(e,t,r,n,a){e.pu=(A,h,m)=>async function(x,v,y,w){let _=v.view.ru(y);_.Cs&&(_=await HQ(x.localStore,v.query,!1).then(({documents:E})=>v.view.ru(E,_)));const j=w&&w.targetChanges.get(v.targetId),k=w&&w.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(_,x.isPrimaryClient,j,k);return JQ(x,v.targetId,I.au),I.snapshot}(e,A,h,m);const s=await HQ(e.localStore,t,!0),i=new Ybe(t,s.Qs),l=i.ru(s.documents),c=Z2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(l,e.isPrimaryClient,c);JQ(e,r,u.au);const d=new Jbe(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function aye(e,t,r){const n=tn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!O4(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await mF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&DP(n.remoteStore,a.targetId),xF(n,a.targetId)}).catch(G1)):(xF(n,a.targetId),await mF(n.localStore,a.targetId,!0))}async function sye(e,t){const r=tn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),DP(r.remoteStore,n.targetId))}async function iye(e,t,r){const n=fye(e);try{const a=await function(i,l){const c=tn(i),u=ir.now(),d=l.reduce((m,g)=>m.add(g.key),Bn());let A,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=_h(),x=Bn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{A=v;const y=[];for(const w of l){const _=y1e(w,A.get(w.key).overlayedDocument);_!=null&&y.push(new zm(w.key,_,YZ(_.value.mapValue),Cl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(A,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:oee(A)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new cs(jn)),u=u.insert(l,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await tE(n,a.changes),await H4(n.remoteStore)}catch(a){const s=UP(a,"Failed to persist write");r.reject(s)}}async function Hee(e,t){const r=tn(e);try{const n=await vbe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(ia(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?ia(i.hu,14607):a.removedDocuments.size>0&&(ia(i.hu,42227),i.hu=!1))}),await tE(r,n,t)}catch(n){await G1(n)}}function YQ(e,t,r){const n=tn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const l=i.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=tn(i);c.onlineState=l;let u=!1;c.queries.forEach((d,A)=>{for(const h of A.Sa)h.va(l)&&(u=!0)}),u&&VP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function oye(e,t,r){const n=tn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new cs(yr.comparator);i=i.insert(s,Xo.newNoDocument(s,Jr.min()));const l=Bn().add(s),c=new M4(Jr.min(),new Map,new cs(jn),i,l);await Hee(n,c),n.du=n.du.remove(s),n.Au.delete(t),GP(n)}else await mF(n.localStore,t,!1).then(()=>xF(n,t,r)).catch(G1)}async function lye(e,t){const r=tn(e),n=t.batch.batchId;try{const a=await xbe(r.localStore,t);zee(r,n,null),Vee(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await tE(r,a)}catch(a){await G1(a)}}async function cye(e,t,r){const n=tn(e);try{const a=await function(i,l){const c=tn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(A=>(ia(A!==null,37113),d=A.keys(),c.mutationQueue.removeMutationBatch(u,A))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);zee(n,t,r),Vee(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await tE(n,a)}catch(a){await G1(a)}}function Vee(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function zee(e,t,r){const n=tn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function xF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||$ee(e,n)})}function $ee(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(DP(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),GP(e))}function JQ(e,t,r){for(const n of r)n instanceof Mee?(e.Ru.addReference(n.key,t),uye(e,n)):n instanceof Uee?(ur($P,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||$ee(e,n.key)):zr(19791,{wu:n})}function uye(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(ur($P,"New document in limbo: "+r),e.Eu.add(n),GP(e))}function GP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new yr(_a.fromString(t)),n=e.fu.next();e.Au.set(n,new Zbe(r)),e.du=e.du.insert(r,n),Fee(e.remoteStore,new Z0(JA(F4(r.path)),n,"TargetPurposeLimboResolution",j4.ce))}}async function tE(e,t,r){const n=tn(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const A=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,A?"current":"not-current")}if(u){a.push(u);const A=FP.As(c.targetId,u);s.push(A)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Dt.forEach(u,h=>Dt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(A,h.targetId,m)).next(()=>Dt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(A,h.targetId,m)))))}catch(A){if(!K1(A))throw A;ur(OP,"Failed to update sequence numbers: "+A)}for(const A of u){const h=A.targetId;if(!A.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function dye(e,t){const r=tn(e);if(!r.currentUser.isEqual(t)){ur($P,"User change. New user:",t.toKey());const n=await jee(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Wt(Nt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await tE(r,n.Ls)}}function Aye(e,t){const r=tn(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const l=r.Tu.get(i);a=a.unionWith(l.view.nu)}return a}}function Gee(e){const t=tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hee.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aye.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oye.bind(null,t),t.Pu.H_=Wbe.bind(null,t.eventManager),t.Pu.yu=Xbe.bind(null,t.eventManager),t}function fye(e){const t=tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lye.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cye.bind(null,t),t}class N_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=U4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return gbe(this.persistence,new hbe,t.initialUser,this.serializer)}Cu(t){return new kee(IP.mi,this.serializer)}Du(t){return new Cbe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}N_.provider={build:()=>new N_};class hye extends N_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ia(this.persistence.referenceDelegate instanceof E_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Z1e(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Wl.withCacheSize(this.cacheSizeBytes):Wl.DEFAULT;return new kee(n=>E_.mi(n,r),this.serializer)}}class vF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>YQ(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=dye.bind(null,this.syncEngine),await Gbe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new qbe}()}createDatastore(t){const r=U4(t.databaseInfo.databaseId),n=function(s){return new jbe(s)}(t.databaseInfo);return function(s,i,l,c){return new Fbe(s,i,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,l){return new Dbe(n,a,s,i,l)}(this.localStore,this.datastore,t.asyncQueue,r=>YQ(this.syncEngine,r,0),function(){return $Q.v()?new $Q:new Nbe}())}createSyncEngine(t,r){return function(a,s,i,l,c,u,d){const A=new eye(a,s,i,l,c,u);return d&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=tn(a);ur(xg,"RemoteStore shutting down."),s.Ea.add(5),await eE(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}vF.provider={build:()=>new vF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Nh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="FirestoreClient";class mye{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Go.UNAUTHENTICATED,this.clientId=S4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{ur(Sm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ur(Sm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ah;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=UP(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function uB(e,t){e.asyncQueue.verifyOperationInProgress(),ur(Sm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await jee(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ZQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await pye(e);ur(Sm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>KQ(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>KQ(t.remoteStore,a)),e._onlineComponents=t}async function pye(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ur(Sm,"Using user provided OfflineComponentProvider");try{await uB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Nt.FAILED_PRECONDITION||a.code===Nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;gg("Error using user provided cache. Falling back to memory cache: "+r),await uB(e,new N_)}}else ur(Sm,"Using default OfflineComponentProvider"),await uB(e,new hye(void 0));return e._offlineComponents}async function Kee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ur(Sm,"Using user provided OnlineComponentProvider"),await ZQ(e,e._uninitializedComponentsProvider._online)):(ur(Sm,"Using default OnlineComponentProvider"),await ZQ(e,new vF))),e._onlineComponents}function gye(e){return Kee(e).then(t=>t.syncEngine)}async function __(e){const t=await Kee(e),r=t.eventManager;return r.onListen=tye.bind(null,t.syncEngine),r.onUnlisten=aye.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=rye.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=sye.bind(null,t.syncEngine),r}function xye(e,t,r={}){const n=new Ah;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new KP({next:h=>{d.Nu(),i.enqueueAndForget(()=>HP(s,A));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new Wt(Nt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Wt(Nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new zP(F4(l.path),d,{includeMetadataChanges:!0,qa:!0});return QP(s,A)}(await __(e),e.asyncQueue,t,r,n)),n.promise}function vye(e,t,r={}){const n=new Ah;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new KP({next:h=>{d.Nu(),i.enqueueAndForget(()=>HP(s,A)),h.fromCache&&c.source==="server"?u.reject(new Wt(Nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new zP(l,d,{includeMetadataChanges:!0,qa:!0});return QP(s,A)}(await __(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wee="firestore.googleapis.com",tH=!0;class rH{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(Nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wee,this.ssl=tH}else this.host=t.host,this.ssl=t.ssl??tH;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=See;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Y1e)throw new Wt(Nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}UZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qee(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class V4{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(Nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rH(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LZ;switch(n.type){case"firstParty":return new jve(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(Nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=eH.get(r);n&&(ur("ComponentProvider","Removing Datastore"),eH.delete(r),n.terminate())}(this),Promise.resolve()}}function Xee(e,t,r,n={}){var u;e=al(e,V4);const a=Uh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(b4(`https://${l}`),y4("Firestore",!0)),s.host!==Wee&&s.host!==l&&gg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!bm(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,A;if(typeof n.mockUserToken=="string")d=n.mockUserToken,A=Go.MOCK_USER;else{d=zJ(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(Nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Go(h)}e._authCredentials=new _ve(new RZ(d,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Kd(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(Y2(r,ss._jsonSchema))return new ss(t,n||null,new yr(_a.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:xi("string",ss._jsonSchemaVersion),referencePath:xi("string")};class fh extends Kd{constructor(t,r,n){super(t,r,F4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new yr(t))}withConverter(t){return new fh(this.firestore,t,this._path)}}function vt(e,t,...r){if(e=Yn(e),MZ("collection","path",t),e instanceof V4){const n=_a.fromString(t,...r);return pQ(n),new fh(e,null,n)}{if(!(e instanceof ss||e instanceof fh))throw new Wt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return pQ(n),new fh(e.firestore,null,n)}}function sr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=S4.newId()),MZ("doc","path",t),e instanceof V4){const n=_a.fromString(t,...r);return mQ(n),new ss(e,null,new yr(n))}{if(!(e instanceof ss||e instanceof fh))throw new Wt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return mQ(n),new ss(e.firestore,e instanceof fh?e.converter:null,new yr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="AsyncQueue";class aH{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tee(this,"async_queue_retry"),this._c=()=>{const n=cB();n&&ur(nH,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=cB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=cB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Ah;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!K1(t))throw t;ur(nH,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,Nh("INTERNAL UNHANDLED ERROR: ",sH(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=MP.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&zr(47125,{Pc:sH(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function sH(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class zd extends V4{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new aH,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new aH(t),this._firestoreClient=void 0,await t}}}function qP(e,t){const r=typeof e=="object"?e:w4(),n=typeof e=="string"?e:g_,a=K2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=cP("firestore");s&&Xee(a,...s)}return a}function W1(e){if(e._terminated)throw new Wt(Nt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||bye(e),e._firestoreClient}function bye(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new Gve(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qee(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new mye(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lc(no.fromBase64String(t))}catch(r){throw new Wt(Nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Lc(no.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Lc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Y2(t,Lc._jsonSchema))return Lc.fromBase64String(t.bytes)}}Lc._jsonSchemaVersion="firestore/bytes/1.0",Lc._jsonSchema={type:xi("string",Lc._jsonSchemaVersion),bytes:xi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(Nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(Nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return jn(this._lat,t._lat)||jn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dd._jsonSchemaVersion}}static fromJSON(t){if(Y2(t,Dd._jsonSchema))return new Dd(t.latitude,t.longitude)}}Dd._jsonSchemaVersion="firestore/geoPoint/1.0",Dd._jsonSchema={type:xi("string",Dd._jsonSchemaVersion),latitude:xi("number"),longitude:xi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Pd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Y2(t,Pd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Pd(t.vectorValues);throw new Wt(Nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pd._jsonSchemaVersion="firestore/vectorValue/1.0",Pd._jsonSchema={type:xi("string",Pd._jsonSchemaVersion),vectorValues:xi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yye=/^__.*__$/;class wye{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new zm(t,this.data,this.fieldMask,r,this.fieldTransforms):new J2(t,this.data,r,this.fieldTransforms)}}class Yee{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new zm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Jee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class z4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new z4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return S_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Jee(this.Ac)&&yye.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Eye{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||U4(t)}Cc(t,r,n,a=!1){return new z4({Ac:t,methodName:r,Dc:n,path:Zi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J1(e){const t=e._freezeSettings(),r=U4(e._databaseId);return new Eye(e._databaseId,!!t.ignoreUndefinedProperties,r)}function WP(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);JP("Data must be an object, but it was:",i,n);const l=rte(n,i);let c,u;if(s.merge)c=new Hc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const A of s.mergeFields){const h=bF(t,A,r);if(!i.contains(h))throw new Wt(Nt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);ate(d,h)||d.push(h)}c=new Hc(d),u=i.fieldTransforms.filter(A=>c.covers(A.field))}else c=null,u=i.fieldTransforms;return new wye(new ec(l),c,u)}class $4 extends Y1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $4}}function Cye(e,t,r){return new z4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class XP extends Y1{_toFieldTransform(t){return new hee(t.path,new Yw)}isEqual(t){return t instanceof XP}}class YP extends Y1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Cye(this,t,!0),n=this.vc.map(s=>Z1(s,r)),a=new l1(n);return new hee(t.path,a)}isEqual(t){return t instanceof YP&&bm(this.vc,t.vc)}}function Zee(e,t,r,n){const a=e.Cc(1,t,r);JP("Data must be an object, but it was:",a,n);const s=[],i=ec.empty();Vm(n,(c,u)=>{const d=ZP(t,c,r);u=Yn(u);const A=a.yc(d);if(u instanceof $4)s.push(d);else{const h=Z1(u,A);h!=null&&(s.push(d),i.set(d,h))}});const l=new Hc(s);return new Yee(i,l,a.fieldTransforms)}function ete(e,t,r,n,a,s){const i=e.Cc(1,t,r),l=[bF(t,n,r)],c=[a];if(s.length%2!=0)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(bF(t,s[h])),c.push(s[h+1]);const u=[],d=ec.empty();for(let h=l.length-1;h>=0;--h)if(!ate(u,l[h])){const m=l[h];let g=c[h];g=Yn(g);const x=i.yc(m);if(g instanceof $4)u.push(m);else{const v=Z1(g,x);v!=null&&(u.push(m),d.set(m,v))}}const A=new Hc(u);return new Yee(d,A,i.fieldTransforms)}function tte(e,t,r,n=!1){return Z1(r,e.Cc(n?4:3,t))}function Z1(e,t){if(nte(e=Yn(e)))return JP("Unsupported field value:",t,e),rte(e,t);if(e instanceof Y1)return function(n,a){if(!Jee(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=Z1(l,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return m1e(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:w_(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:w_(a.serializer,s)}}if(n instanceof Dd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Lc)return{bytesValue:bee(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Pd)return function(i,l){return{mapValue:{fields:{[WZ]:{stringValue:XZ},[x_]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return SP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${k4(n)}`)}(e,t)}function rte(e,t){const r={};return VZ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vm(e,(n,a)=>{const s=Z1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function nte(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof Dd||e instanceof Lc||e instanceof ss||e instanceof Y1||e instanceof Pd)}function JP(e,t,r){if(!nte(r)||!QZ(r)){const n=k4(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function bF(e,t,r){if((t=Yn(t))instanceof X1)return t._internalPath;if(typeof t=="string")return ZP(e,t);throw S_("Field path arguments must be of type string or ",e,!1,void 0,r)}const Nye=new RegExp("[~\\*/\\[\\]]");function ZP(e,t,r){if(t.search(Nye)>=0)throw S_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new X1(...t.split("."))._internalPath}catch{throw S_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function S_(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Wt(Nt.INVALID_ARGUMENT,l+e+c)}function ate(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _ye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(G4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class _ye extends eR{data(){return super.data()}}function G4(e,t){return typeof t=="string"?ZP(e,t):t instanceof X1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ste(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(Nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tR{}class rE extends tR{}function $t(e,t,...r){let n=[];t instanceof tR&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof K4).length,l=s.filter(c=>c instanceof nE).length;if(i>1||i>0&&l>0)throw new Wt(Nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class nE extends rE{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new nE(t,r,n)}_apply(t){const r=this._parse(t);return ote(t._query,r),new Kd(t.firestore,t.converter,uF(t._query,r))}_parse(t){const r=J1(t.firestore);return function(s,i,l,c,u,d,A){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(Nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lH(A,d);const g=[];for(const x of A)g.push(oH(c,s,x));h={arrayValue:{values:g}}}else h=oH(c,s,A)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lH(A,d),h=tte(l,i,A,d==="in"||d==="not-in");return pi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Ir(e,t,r){const n=t,a=G4("where",e);return nE._create(a,n,r)}class K4 extends tR{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new K4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Vd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)ote(i,c),i=uF(i,c)}(t._query,r),new Kd(t.firestore,t.converter,uF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q4 extends rE{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new q4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xw(s,i)}(t._query,this._field,this._direction);return new Kd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Qg(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function pr(e,t="asc"){const r=t,n=G4("orderBy",e);return q4._create(n,r)}class W4 extends rE{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new W4(t,r,n)}_apply(t){return new Kd(t.firestore,t.converter,b_(t._query,this._limit,this._limitType))}}function Rd(e){return Dve("limit",e),W4._create("limit",e,"F")}class X4 extends rE{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new X4(t,r,n)}_apply(t){const r=Sye(t,this.type,this._docOrFields,this._inclusive);return new Kd(t.firestore,t.converter,function(a,s){return new Qg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function ite(...e){return X4._create("startAfter",e,!1)}function Sye(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof eR)return function(s,i,l,c,u){if(!c)throw new Wt(Nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const A of Dv(s))if(A.field.isKeyField())d.push(v_(i,c.key));else{const h=c.data.field(A.field);if(T4(h))throw new Wt(Nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=A.field.canonicalString();throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new o1(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=J1(e.firestore);return function(i,l,c,u,d,A){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(Nt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!_P(i)&&x.indexOf("/")!==-1)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=i.path.child(_a.fromString(x));if(!yr.isDocumentKey(v))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new yr(v);m.push(v_(l,y))}else{const v=tte(c,u,x);m.push(v)}}return new o1(m,A)}(e._query,e.firestore._databaseId,a,t,r,n)}}function oH(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_P(t)&&r.indexOf("/")!==-1)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(_a.fromString(r));if(!yr.isDocumentKey(n))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return v_(e,new yr(n))}if(r instanceof ss)return v_(e,r._key);throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${k4(r)}.`)}function lH(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ote(e,t){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class lte{convertValue(t,r="none"){switch(Nm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ks(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Cm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Vm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[x_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Ks(i.doubleValue));return new Pd(r)}convertGeoPoint(t){return new Dd(Ks(t.latitude),Ks(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=I4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(qw(t));default:return null}}convertTimestamp(t){const r=Em(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=_a.fromString(t);ia(_ee(n),9688,{name:t});const a=new a1(n.get(1),n.get(3)),s=new yr(n.popFirst(5));return a.isEqual(r)||Nh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class vv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class um extends eR{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(G4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=um._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}um._jsonSchemaVersion="firestore/documentSnapshot/1.0",um._jsonSchema={type:xi("string",um._jsonSchemaVersion),bundleSource:xi("string","DocumentSnapshot"),bundleName:xi("string"),bundle:xi("string")};class pw extends um{data(t={}){return super.data(t)}}class dm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new vv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new pw(this._firestore,this._userDataWriter,n.key,n,new vv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(Nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new pw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new vv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new pw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new vv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:kye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=dm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=S4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kye(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(e){e=al(e,ss);const t=al(e.firestore,zd);return xye(W1(t),e._key).then(r=>cte(t,e,r))}dm._jsonSchemaVersion="firestore/querySnapshot/1.0",dm._jsonSchema={type:xi("string",dm._jsonSchemaVersion),bundleSource:xi("string","QuerySnapshot"),bundleName:xi("string"),bundle:xi("string")};class nR extends lte{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function Dn(e){e=al(e,Kd);const t=al(e.firestore,zd),r=W1(t),n=new nR(t);return ste(e._query),vye(r,e._query).then(a=>new dm(t,n,e,a))}function yi(e,t,r){e=al(e,ss);const n=al(e.firestore,zd),a=rR(e.converter,t,r);return eb(n,[WP(J1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,Cl.none())])}function cc(e,t,r,...n){e=al(e,ss);const a=al(e.firestore,zd),s=J1(a);let i;return i=typeof(t=Yn(t))=="string"||t instanceof X1?ete(s,"updateDoc",e._key,t,r,n):Zee(s,"updateDoc",e._key,t),eb(a,[i.toMutation(e._key,Cl.exists(!0))])}function Ra(e){return eb(al(e.firestore,zd),[new L4(e._key,Cl.none())])}function hn(e,t){const r=al(e.firestore,zd),n=sr(e),a=rR(e.converter,t);return eb(r,[WP(J1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,Cl.exists(!1))]).then(()=>n)}function fr(e,...t){var c,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||iH(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(iH(t[n])){const A=t[n];t[n]=(c=A.next)==null?void 0:c.bind(A),t[n+1]=(u=A.error)==null?void 0:u.bind(A),t[n+2]=(d=A.complete)==null?void 0:d.bind(A)}let s,i,l;if(e instanceof ss)i=al(e.firestore,zd),l=F4(e._key.path),s={next:A=>{t[n]&&t[n](cte(i,e,A))},error:t[n+1],complete:t[n+2]};else{const A=al(e,Kd);i=al(A.firestore,zd),l=A._query;const h=new nR(i);s={next:m=>{t[n]&&t[n](new dm(i,h,A,m))},error:t[n+1],complete:t[n+2]},ste(e._query)}return function(h,m,g,x){const v=new KP(x),y=new zP(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>QP(await __(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>HP(await __(h),y))}}(W1(i),l,a,s)}function eb(e,t){return function(n,a){const s=new Ah;return n.asyncQueue.enqueueAndForget(async()=>iye(await gye(n),a,s)),s.promise}(W1(e),t)}function cte(e,t,r){const n=r.docs.get(t._key),a=new nR(e);return new um(e,a,t._key,n,new vv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=J1(t)}set(t,r,n){this._verifyNotCommitted();const a=dB(t,this._firestore),s=rR(a.converter,r,n),i=WP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,Cl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=dB(t,this._firestore);let i;return i=typeof(r=Yn(r))=="string"||r instanceof X1?ete(this._dataReader,"WriteBatch.update",s._key,r,n,a):Zee(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Cl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=dB(t,this._firestore);return this._mutations=this._mutations.concat(new L4(r._key,Cl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(Nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dB(e,t){if((e=Yn(e)).firestore!==t)throw new Wt(Nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Fs(){return new XP("serverTimestamp")}function dte(...e){return new YP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e){return W1(e=al(e,zd)),new ute(e,t=>eb(e,t))}(function(t,r=!0){(function(a){$1=a})(Mg),ym(new wh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new zd(new Sve(n.getProvider("auth-internal")),new Bve(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(Nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a1(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),zu(dQ,AQ,t),zu(dQ,AQ,"esm2020")})();const jye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:lte,Bytes:Lc,CollectionReference:fh,DocumentReference:ss,DocumentSnapshot:um,FieldPath:X1,FieldValue:Y1,Firestore:zd,FirestoreError:Wt,GeoPoint:Dd,Query:Kd,QueryCompositeFilterConstraint:K4,QueryConstraint:rE,QueryDocumentSnapshot:pw,QueryFieldFilterConstraint:nE,QueryLimitConstraint:W4,QueryOrderByConstraint:q4,QuerySnapshot:dm,QueryStartAtConstraint:X4,SnapshotMetadata:vv,Timestamp:ir,VectorValue:Pd,WriteBatch:ute,_AutoId:S4,_ByteString:no,_DatabaseId:a1,_DocumentKey:yr,_EmptyAuthCredentialsProvider:LZ,_FieldPath:Zi,_cast:al,_logWarn:gg,_validateIsNotUsedTogether:UZ,addDoc:hn,arrayUnion:dte,collection:vt,connectFirestoreEmulator:Xee,deleteDoc:Ra,doc:sr,ensureFirestoreConfigured:W1,executeWrite:eb,getDoc:zg,getDocs:Dn,getFirestore:qP,limit:Rd,onSnapshot:fr,orderBy:pr,query:$t,serverTimestamp:Fs,setDoc:yi,startAfter:ite,updateDoc:cc,where:Ir,writeBatch:$g},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate="firebasestorage.googleapis.com",fte="storageBucket",Bye=120*1e3,Tye=600*1e3,Iye=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Gd{constructor(t,r,n=0){super(AB(t),`Firebase Storage: ${r} (${AB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,As.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return AB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var za;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(za||(za={}));function AB(e){return"storage/"+e}function aR(){const e="An unknown error occurred, please check the error payload for server response.";return new As(za.UNKNOWN,e)}function Fye(e){return new As(za.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Oye(e){return new As(za.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Dye(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new As(za.UNAUTHENTICATED,e)}function Pye(){return new As(za.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Rye(e){return new As(za.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function hte(){return new As(za.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mte(){return new As(za.CANCELED,"User canceled the upload/download.")}function Lye(e){return new As(za.INVALID_URL,"Invalid URL '"+e+"'.")}function Mye(e){return new As(za.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Uye(){return new As(za.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fte+"' property when initializing the app?")}function pte(){return new As(za.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qye(){return new As(za.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Hye(){return new As(za.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vye(e){return new As(za.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yF(e){return new As(za.INVALID_ARGUMENT,e)}function gte(){return new As(za.APP_DELETED,"The Firebase app was deleted.")}function zye(e){return new As(za.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gw(e,t){return new As(za.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ay(e){throw new As(za.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=yl.makeFromUrl(t,r)}catch{return new yl(t,"")}if(n.path==="")return n;throw Mye(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const i="(/(.*))?$",l=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",A=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${A}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===Ate?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),_=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<_.length;j++){const k=_[j],I=k.regex.exec(t);if(I){const E=I[k.indices.bucket];let S=I[k.indices.path];S||(S=""),n=new yl(E,S),k.postModify(n);break}}if(n==null)throw Lye(t);return n}}class $ye{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gye(e,t,r){let n=1,a=null,s=null,i=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function A(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||i){h(),d.call(null,v,...y);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,A(_)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(l=2),clearTimeout(a),A(0)):v||(l=1)))}return A(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Kye(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qye(e){return e!==void 0}function Wye(e){return typeof e=="function"}function Xye(e){return typeof e=="object"&&!Array.isArray(e)}function Y4(e){return typeof e=="string"||e instanceof String}function cH(e){return sR()&&e instanceof Blob}function sR(){return typeof Blob<"u"}function wF(e,t,r,n){if(n<t)throw yF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw yF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function xte(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Jp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Jp||(Jp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vte(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yye{constructor(t,r,n,a,s,i,l,c,u,d,A,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=A,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new $C(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const l=s.getErrorCode()===Jp.NO_ERROR,c=s.getStatus();if(!l||vte(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Jp.ABORT;n(!1,new $C(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new $C(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());qye(c)?s(c):s()}catch(c){i(c)}else if(l!==null){const c=aR();c.serverResponse=l.getErrorText(),this.errorCallback_?i(this.errorCallback_(l,c)):i(c)}else if(a.canceled){const c=this.appDelete_?gte():mte();i(c)}else{const c=hte();i(c)}};this.canceled_?r(!1,new $C(!1,null,!0)):this.backoffId_=Gye(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Kye(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $C{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Jye(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Zye(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function ewe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function twe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function rwe(e,t,r,n,a,s,i=!0,l=!1){const c=xte(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return ewe(d,t),Jye(d,r),Zye(d,s),twe(d,n),new Yye(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nwe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function awe(...e){const t=nwe();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(sR())return new Blob(e);throw new As(za.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function swe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iwe(e){if(typeof atob>"u")throw Vye("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fB{constructor(t,r){this.data=t,this.contentType=r||null}}function owe(e,t){switch(e){case zA.RAW:return new fB(bte(t));case zA.BASE64:case zA.BASE64URL:return new fB(yte(e,t));case zA.DATA_URL:return new fB(cwe(t),uwe(t))}throw aR()}function bte(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function lwe(e){let t;try{t=decodeURIComponent(e)}catch{throw gw(zA.DATA_URL,"Malformed data URL.")}return bte(t)}function yte(e,t){switch(e){case zA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw gw(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw gw(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=iwe(t)}catch(a){throw a.message.includes("polyfill")?a:gw(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class wte{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw gw(zA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=dwe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function cwe(e){const t=new wte(e);return t.base64?yte(zA.BASE64,t.rest):lwe(t.rest)}function uwe(e){return new wte(e).contentType}function dwe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(t,r){let n=0,a="";cH(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(cH(this.data_)){const n=this.data_,a=swe(n,t,r);return a===null?null:new Yf(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Yf(n,!0)}}static getBlob(...t){if(sR()){const r=t.map(n=>n instanceof Yf?n.data_:n);return new Yf(awe.apply(null,r))}else{const r=t.map(i=>Y4(i)?owe(zA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let l=0;l<i.length;l++)a[s++]=i[l]}),new Yf(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(e){let t;try{t=JSON.parse(e)}catch{return null}return Xye(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Awe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function fwe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function Ete(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hwe(e,t){return t}class ml{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||hwe}}let GC=null;function mwe(e){return!Y4(e)||e.length<2?e:Ete(e)}function oR(){if(GC)return GC;const e=[];e.push(new ml("bucket")),e.push(new ml("generation")),e.push(new ml("metageneration")),e.push(new ml("name","fullPath",!0));function t(s,i){return mwe(i)}const r=new ml("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new ml("size");return a.xform=n,e.push(a),e.push(new ml("timeCreated")),e.push(new ml("updated")),e.push(new ml("md5Hash",null,!0)),e.push(new ml("cacheControl",null,!0)),e.push(new ml("contentDisposition",null,!0)),e.push(new ml("contentEncoding",null,!0)),e.push(new ml("contentLanguage",null,!0)),e.push(new ml("contentType",null,!0)),e.push(new ml("metadata","customMetadata",!0)),GC=e,GC}function pwe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new yl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function gwe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return pwe(n,e),n}function Cte(e,t,r){const n=iR(t);return n===null?null:gwe(e,n,r)}function xwe(e,t,r,n){const a=iR(t);if(a===null||!Y4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,A=e.fullPath,h="/b/"+i(d)+"/o/"+i(A),m=Gg(h,r,n),g=xte({alt:"media",token:u});return m+g})[0]}function Nte(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="prefixes",dH="items";function vwe(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[uH])for(const a of r[uH]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new yl(t,s));n.prefixes.push(i)}if(r[dH])for(const a of r[dH]){const s=e._makeStorageReference(new yl(t,a.name));n.items.push(s)}return n}function bwe(e,t,r){const n=iR(r);return n===null?null:vwe(e,t,n)}class $m{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e){if(!e)throw aR()}function lR(e,t){function r(n,a){const s=Cte(e,a,t);return ef(s!==null),s}return r}function ywe(e,t){function r(n,a){const s=bwe(e,t,a);return ef(s!==null),s}return r}function wwe(e,t){function r(n,a){const s=Cte(e,a,t);return ef(s!==null),xwe(s,a,e.host,e._protocol)}return r}function tb(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Pye():a=Dye():r.getStatus()===402?a=Oye(e.bucket):r.getStatus()===403?a=Rye(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function cR(e){const t=tb(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Fye(e.path)),s.serverResponse=a.serverResponse,s}return r}function Ewe(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,l=new $m(a,s,lR(e,r),i);return l.errorHandler=cR(t),l}function Cwe(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),l=Gg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new $m(l,c,ywe(e,t.bucket),u);return d.urlParams=s,d.errorHandler=tb(t),d}function Nwe(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,l=new $m(a,s,wwe(e,r),i);return l.errorHandler=cR(t),l}function _we(e,t){const r=t.fullServerUrl(),n=Gg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const l=new $m(n,a,i,s);return l.successCodes=[200,204],l.errorHandler=cR(t),l}function Swe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function _te(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=Swe(null,t)),n}function Ste(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let j=0;j<2;j++)_=_+Math.random().toString().slice(2);return _}const c=l();i["Content-Type"]="multipart/related; boundary="+c;const u=_te(t,n,a),d=Nte(u,r),A="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=Yf.getBlob(A,n,h);if(m===null)throw pte();const g={name:u.fullPath},x=Gg(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new $m(x,v,lR(e,r),y);return w.urlParams=g,w.headers=i,w.body=m.uploadData(),w.errorHandler=tb(t),w}class k_{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function uR(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{ef(!1)}return ef(!!r&&(t||["active"]).indexOf(r)!==-1),r}function kwe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=_te(t,n,a),l={name:i.fullPath},c=Gg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},A=Nte(i,r),h=e.maxUploadRetryTime;function m(x){uR(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{ef(!1)}return ef(Y4(v)),v}const g=new $m(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=A,g.errorHandler=tb(t),g}function jwe(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=uR(u,["active","final"]);let A=null;try{A=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ef(!1)}A||ef(!1);const h=Number(A);return ef(!isNaN(h)),new k_(h,n.size(),d==="final")}const i="POST",l=e.maxUploadRetryTime,c=new $m(r,i,s,l);return c.headers=a,c.errorHandler=tb(t),c}const AH=256*1024;function Bwe(e,t,r,n,a,s,i,l){const c=new k_(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw Qye();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const A=c.current,h=A+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(A,h);if(x===null)throw pte();function v(j,k){const I=uR(j,["active","final"]),E=c.current+d,S=n.size();let B;return I==="final"?B=lR(t,s)(j,k):B=null,new k_(E,S,I==="final",B)}const y="POST",w=t.maxUploadRetryTime,_=new $m(r,y,v,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=l||null,_.errorHandler=tb(e),_}const Xl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hB(e){switch(e){case"running":case"pausing":case"canceling":return Xl.RUNNING;case"paused":return Xl.PAUSED;case"success":return Xl.SUCCESS;case"canceled":return Xl.CANCELED;case"error":return Xl.ERROR;default:return Xl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Twe{constructor(t,r,n){if(Wye(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class Iwe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Ay("cannot .send() more than once");if(Uh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ay("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ay("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ay("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ay("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Fwe extends Iwe{initXhr(){this.xhr_.responseType="text"}}function Jf(){return new Fwe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Owe{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=oR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(za.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(vte(a.status,[]))if(s)a=hte();else{this.sleepTime=Math.max(this.sleepTime*2,Iye),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(za.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=kwe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Jf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=jwe(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Jf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=AH*this._chunkMultiplier,r=new k_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=Bwe(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(i,Jf,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){AH*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=Ewe(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Jf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=Ste(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Jf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=mte(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=hB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new Twe(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(hB(this._state)){case Xl.SUCCESS:Dx(this._resolve.bind(null,this.snapshot))();break;case Xl.CANCELED:case Xl.ERROR:const r=this._reject;Dx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(hB(this._state)){case Xl.RUNNING:case Xl.PAUSED:t.next&&Dx(t.next.bind(t,this.snapshot))();break;case Xl.SUCCESS:t.complete&&Dx(t.complete.bind(t))();break;case Xl.CANCELED:case Xl.ERROR:t.error&&Dx(t.error.bind(t,this._error))();break;default:t.error&&Dx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(t,r){this._service=t,r instanceof yl?this._location=r:this._location=yl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new vg(t,r)}get root(){const t=new yl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ete(this._location.path)}get storage(){return this._service}get parent(){const t=Awe(this._location.path);if(t===null)return null;const r=new yl(this._location.bucket,t);return new vg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw zye(t)}}function Dwe(e,t,r){e._throwIfRoot("uploadBytes");const n=Ste(e.storage,e._location,oR(),new Yf(t,!0),r);return e.storage.makeRequestWithTokens(n,Jf).then(a=>({metadata:a,ref:e}))}function Pwe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Owe(e,new Yf(t),r)}function Rwe(e){const t={prefixes:[],items:[]};return kte(e,t).then(()=>t)}async function kte(e,t,r){const a=await Lwe(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await kte(e,t,a.nextPageToken)}function Lwe(e,t){t!=null&&typeof t.maxResults=="number"&&wF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=Cwe(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Jf)}function Mwe(e){e._throwIfRoot("getDownloadURL");const t=Nwe(e.storage,e._location,oR());return e.storage.makeRequestWithTokens(t,Jf).then(r=>{if(r===null)throw Hye();return r})}function Uwe(e){e._throwIfRoot("deleteObject");const t=_we(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Jf)}function Qwe(e,t){const r=fwe(e._location.path,t),n=new yl(e._location.bucket,r);return new vg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hwe(e){return/^[A-Za-z]+:\/\//.test(e)}function Vwe(e,t){return new vg(e,t)}function jte(e,t){if(e instanceof dR){const r=e;if(r._bucket==null)throw Uye();const n=new vg(r,r._bucket);return t!=null?jte(n,t):n}else return t!==void 0?Qwe(e,t):e}function zwe(e,t){if(t&&Hwe(t)){if(e instanceof dR)return Vwe(e,t);throw yF("To use ref(service, url), the first argument must be a Storage instance.")}else return jte(e,t)}function fH(e,t){const r=t==null?void 0:t[fte];return r==null?null:yl.makeFromBucketSpec(r,e)}function $we(e,t,r,n={}){e.host=`${t}:${r}`;const a=Uh(t);a&&(b4(`https://${e.host}/b`),y4("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:zJ(s,e.app.options.projectId))}class dR{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=Ate,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bye,this._maxUploadRetryTime=Tye,this._requests=new Set,a!=null?this._bucket=yl.makeFromBucketSpec(a,this._host):this._bucket=fH(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=yl.makeFromBucketSpec(this._url,t):this._bucket=fH(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){wF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){wF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Rc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new vg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new $ye(gte());{const i=rwe(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const hH="@firebase/storage",mH="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bte="storage";function AR(e,t,r){return e=Yn(e),Dwe(e,t,r)}function Gwe(e,t,r){return e=Yn(e),Pwe(e,t,r)}function Kwe(e){return e=Yn(e),Rwe(e)}function J4(e){return e=Yn(e),Mwe(e)}function qwe(e){return e=Yn(e),Uwe(e)}function aE(e,t){return e=Yn(e),zwe(e,t)}function fR(e=w4(),t){e=Yn(e);const n=K2(e,Bte).getImmediate({identifier:t}),a=cP("storage");return a&&Wwe(n,...a),n}function Wwe(e,t,r,n={}){$we(e,t,r,n)}function Xwe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new dR(r,n,a,t,Mg)}function Ywe(){ym(new wh(Bte,Xwe,"PUBLIC").setMultipleInstances(!0)),zu(hH,mH,""),zu(hH,mH,"esm2020")}Ywe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jwe="type.googleapis.com/google.protobuf.Int64Value",Zwe="type.googleapis.com/google.protobuf.UInt64Value";function Tte(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function j_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>j_(t));if(typeof e=="function"||typeof e=="object")return Tte(e,t=>j_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function d1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Jwe:case Zwe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>d1(t)):typeof e=="function"||typeof e=="object"?Tte(e,t=>d1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tc extends Gd{constructor(t,r,n){super(`${hR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,tc.prototype)}}function e2e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function B_(e,t){let r=e2e(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!pH[i])return new tc("internal","internal");r=pH[i],n=i}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=d1(a))}}catch{}return r==="ok"?null:new tc(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2e{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Rc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="us-central1",r2e=/^data: (.*?)(?:\n|$)/;function n2e(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new tc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class a2e{constructor(t,r,n,a,s=EF,i=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new t2e(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=EF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function s2e(e,t,r){const n=Uh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(b4(e.emulatorOrigin),y4("Functions",!0))}function i2e(e,t,r){const n=a=>l2e(e,t,a,{});return n.stream=(a,s)=>u2e(e,t,a,s),n}async function o2e(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function Ite(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function l2e(e,t,r,n){const a=e._url(t);return c2e(e,a,r,n)}async function c2e(e,t,r,n){r=j_(r);const a={data:r},s=await Ite(e,n),i=n.timeout||7e4,l=n2e(i),c=await Promise.race([o2e(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new tc("cancelled","Firebase Functions instance was deleted.");const u=B_(c.status,c.json);if(u)throw u;if(!c.json)throw new tc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new tc("internal","Response is missing data field.");return{data:d1(d)}}function u2e(e,t,r,n){const a=e._url(t);return d2e(e,a,r,n||{})}async function d2e(e,t,r,n){var h;r=j_(r);const a={data:r},s=await Ite(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new tc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=B_(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new tc("cancelled","Request was cancelled.");c(m)});const d=i.body.getReader(),A=A2e(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=A.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function A2e(e,t,r,n){const a=(i,l)=>{const c=i.match(r2e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(d1(d.result));return}if("message"in d){l.enqueue(d1(d.message));return}if("error"in d){const A=B_(0,d);l.error(A),r(A);return}}catch(d){if(d instanceof tc){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new tc("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new tc("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const A=l.split(`
`);l=A.pop()||"";for(const h of A)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof tc?u:B_(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const gH="@firebase/functions",xH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2e="auth-internal",h2e="app-check-internal",m2e="messaging-internal";function p2e(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(f2e),i=r.getProvider(m2e),l=r.getProvider(h2e);return new a2e(a,s,i,l,n)};ym(new wh(hR,t,"PUBLIC").setMultipleInstances(!0)),zu(gH,xH,e),zu(gH,xH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(e=w4(),t=EF){const n=K2(Yn(e),hR).getImmediate({identifier:t}),a=cP("functions");return a&&g2e(n,...a),n}function g2e(e,t,r){s2e(Yn(e),t,r)}function Bp(e,t,r){return i2e(Yn(e),t)}p2e();const x2e={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},Z4=AP(x2e),Kg=jZ(Z4),wr=qP(Z4),mR=fR(Z4),Fte=Av(Z4,"us-central1"),Ote=Object.freeze(Object.defineProperty({__proto__:null,auth:Kg,db:wr,functions:Fte,storage:mR},Symbol.toStringTag,{value:"Module"})),v2e=async(e,t)=>{try{return(await cxe(Kg,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},mB=async()=>{try{await Axe(Kg)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},b2e=async e=>{try{await lxe(Kg,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},Dte=async e=>{try{const t=sr(wr,"usuarios",e),r=await zg(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Yt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Yt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),Pp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Pp||{});const y2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),w2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),ei="w-6 h-6",ek="w-24 h-24",pR=()=>o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),E2e=()=>o.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M9 18h6"}),o.jsx("path",{d:"M10 22h4"}),o.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),C2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),N2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Ky=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),qy=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Pte=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),_2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ek,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),S2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ek,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),k2e=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ek,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),j2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ek,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),B2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),vH=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),KC=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),pB=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),qC=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),gB=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),bH=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),T2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),I2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),F2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),O2e=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),WC=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),D2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),xB=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),P2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ei,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),R2e=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),yH=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ei,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),L2e=[{id:Yt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:o.jsx(_2e,{})},{id:Yt.PROFESORADO,label:"Profesorado",icon:o.jsx(S2e,{})},{id:Yt.COORDINACION_TP,label:"Coordinación TP",icon:o.jsx(k2e,{})},{id:Yt.ESTUDIANTE,label:"Estudiantes",icon:o.jsx(j2e,{})}],M2e={[Yt.SUBDIRECCION]:[{name:"Dashboard",icon:o.jsx(B2e,{})},{name:"Administración",icon:o.jsx(O2e,{})},{name:"Seguimiento Curricular",icon:o.jsx(R2e,{})},{name:"Acompañamiento docente",icon:o.jsx(F2e,{})},{name:"Análisis Taxonómico",icon:o.jsx(yH,{})},{name:"Interdisciplinario",icon:o.jsx(xB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:o.jsx(vH,{})},{name:"Crear horarios",icon:o.jsx(pB,{})},{name:"Seguimiento de acciones pedagógicas",icon:o.jsx(qC,{})},{name:"Inclusión",icon:o.jsx(WC,{})},{name:"Calendario Académico",icon:o.jsx(KC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ky,{})},{name:"Mensajería Interna",icon:o.jsx(qy,{})},{name:"Generador de Actas",icon:o.jsx(gB,{})}],[Yt.PROFESORADO]:[{name:"Planificación",icon:o.jsx(bH,{})},{name:"Mis Acompañamientos",icon:o.jsx(D2e,{})},{name:"Recursos de Aprendizaje",icon:o.jsx(T2e,{})},{name:"Análisis Taxonómico",icon:o.jsx(yH,{})},{name:"Interdisciplinario",icon:o.jsx(xB,{})},{name:"Inclusión",icon:o.jsx(WC,{})},{name:"Actividades Remotas",icon:o.jsx(I2e,{})},{name:"Evaluación de Aprendizajes",icon:o.jsx(gB,{})},{name:"Evaluaciones Formativas",icon:o.jsx(qC,{})},{name:"Desarrollo Profesional",icon:o.jsx(WC,{})},{name:"Evaluación de Competencias",icon:o.jsx(w2e,{})},{name:"Calendario Académico",icon:o.jsx(KC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ky,{})},{name:"Mensajería Interna",icon:o.jsx(qy,{})},{name:"Generador de Actas",icon:o.jsx(vH,{})}],[Yt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:o.jsx(qC,{})},{name:"Asistencia Dual",icon:o.jsx(pB,{})},{name:"Pañol",icon:o.jsx(P2e,{})},{name:"Gestión de Empresas",icon:o.jsx(y2e,{})},{name:"Calendario Académico",icon:o.jsx(KC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ky,{})},{name:"Mensajería Interna",icon:o.jsx(qy,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:o.jsx(WC,{})},{name:"Generador de Actas",icon:o.jsx(gB,{})}],[Yt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:o.jsx(bH,{})},{name:"Evaluación Formativa",icon:o.jsx(qC,{})},{name:"Tareas Interdisciplinarias",icon:o.jsx(xB,{})},{name:"Asistencia a Empresa",icon:o.jsx(pB,{})},{name:"Calendario Académico",icon:o.jsx(KC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ky,{})},{name:"Mensajería Interna",icon:o.jsx(qy,{})}]},wH=["1º Medio","2º Medio","3º Medio","4º Medio"],js=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],_s=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],CF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Rv={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},U2e=Object.values(Pp),vB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],bB=["Vinculado","Desvinculado","En proceso","Empresa"],Zp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Q2e=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],T_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],xw=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Rte=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],XC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],H2e=["Mecánica Industrial","Mecánica Automotriz"],V2e=["INACAP","UNAB","DUOC","Universidad de Las Américas"],z2e={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},$2e=["Pasantía","Visita","Certificación","Formación en empresa"],G2e={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},K2e={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},Zf={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},EH=["Pendiente","En Proceso","Cumplida"],CH=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],q2e=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=C.useState(""),[s,i]=C.useState(""),[l,c]=C.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},A=()=>l==="forgot"?o.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),o.jsx("div",{className:"text-sm text-center",children:o.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),o.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",o.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),o.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),o.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&o.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:o.jsx("p",{children:r})}),o.jsx("div",{className:"text-sm text-center",children:o.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),o.jsx("div",{children:o.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(pR,{})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),o.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:A()}),o.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},YC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=C.useState(!1),s=C.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return C.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsx("div",{onClick:i,children:e}),n&&o.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},NH="usuariosLiceo",W2e=({user:e,onClose:t,onSave:r})=>{const[n,a]=C.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},i=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(NH);let d=u?JSON.parse(u):[];const A=d.findIndex(h=>h.id===e.id);A>-1?d[A]=c:d.push(c),localStorage.setItem(NH,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:o.jsxs("form",{onSubmit:i,children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),o.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),o.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),o.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},_H="usuariosLiceo",X2e=({user:e,onClose:t,onSave:r})=>{const[n,a]=C.useState(""),[s,i]=C.useState(""),[l,c]=C.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const A={...e,password:n};try{const h=localStorage.getItem(_H);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=A:m.push(A),localStorage.setItem(_H,JSON.stringify(m)),r(A),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:o.jsxs("form",{onSubmit:u,children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),o.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&o.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:o.jsx("p",{children:l})})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J2e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),SH=e=>{const t=J2e(e);return t.charAt(0).toUpperCase()+t.slice(1)},Lte=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Z2e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eEe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tEe=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...l},c)=>C.createElement("svg",{ref:c,...eEe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Lte("lucide",a),...!s&&!Z2e(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>C.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(e,t)=>{const r=C.forwardRef(({className:n,...a},s)=>C.createElement(tEe,{ref:s,iconNode:t,className:Lte(`lucide-${Y2e(SH(e))}`,`lucide-${e}`,n),...a}));return r.displayName=SH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nEe=Vt("activity",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],JC=Vt("arrow-left",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],iEe=Vt("bell-ring",sEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],lEe=Vt("book-marked",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],uEe=Vt("book-open-check",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Gc=Vt("book-open",dEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],kH=Vt("book",AEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],hEe=Vt("brain-circuit",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zw=Vt("brain",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pEe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],I_=Vt("briefcase",pEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],F_=Vt("building-2",gEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xEe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],vEe=Vt("building",xEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bEe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],yEe=Vt("calendar-check",bEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wEe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ac=Vt("calendar",wEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EEe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mu=Vt("chart-column",EEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CEe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],NEe=Vt("chart-line",CEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ee=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],SEe=Vt("chart-no-axes-column",_Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kEe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vw=Vt("chart-pie",kEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jEe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],BEe=Vt("check",jEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TEe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],e2=Vt("chevron-left",TEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gR=Vt("chevron-right",IEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$u=Vt("circle-alert",FEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xR=Vt("circle-check-big",OEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ti=Vt("circle-check",DEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ZC=Vt("circle-plus",PEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const REe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],LEe=Vt("circle-question-mark",REe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jH=Vt("circle-x",MEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UEe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],QEe=Vt("clipboard-check",UEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bg=Vt("clipboard-list",HEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nh=Vt("clock",VEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zEe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],km=Vt("download",zEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],yB=Vt("external-link",$Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GEe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],KEe=Vt("factory",GEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qEe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],WEe=Vt("file-check",qEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],YEe=Vt("file-pen",XEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],ZEe=Vt("file-play",JEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Mte=Vt("file-spreadsheet",eCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tCe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ld=Vt("file-text",tCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rCe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],S5=Vt("files",rCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nCe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],aCe=Vt("folder-closed",nCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sCe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],BH=Vt("folder-open",sCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iCe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],tk=Vt("funnel",iCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oCe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],O_=Vt("gauge",oCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lCe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],yg=Vt("graduation-cap",lCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cCe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],uCe=Vt("hash",cCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dCe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Ute=Vt("hourglass",dCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ACe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fCe=Vt("image",ACe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mCe=Vt("info",hCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Qte=Vt("layout-dashboard",pCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gCe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],vR=Vt("layers",gCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],vCe=Vt("layout-grid",xCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],yCe=Vt("layout-list",bCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wCe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],TH=Vt("link-2",wCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],CCe=Vt("link",ECe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NCe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],bw=Vt("list-checks",NCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ce=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],el=Vt("loader-circle",_Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],kCe=Vt("mail",SCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],D_=Vt("map-pin",jCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BCe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],TCe=Vt("megaphone",BCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ICe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],FCe=Vt("menu",ICe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Hte=Vt("message-square",OCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DCe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],IH=Vt("notebook-pen",DCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PCe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],RCe=Vt("palette",PCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LCe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],NF=Vt("pen-line",LCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MCe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],bR=Vt("pencil",MCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UCe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],QCe=Vt("percent",UCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HCe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nl=Vt("plus",HCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VCe=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],FH=Vt("presentation",VCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zCe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],$Ce=Vt("puzzle",zCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Vte=Vt("refresh-ccw",GCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KCe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],qCe=Vt("route",KCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WCe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],XCe=Vt("ruler",WCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YCe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$d=Vt("save",YCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JCe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Lv=Vt("school",JCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],OH=Vt("scroll-text",ZCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sE=Vt("search",eNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rNe=Vt("settings",tNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nNe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],aNe=Vt("shield-check",nNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sNe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],eg=Vt("sparkles",sNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zte=Vt("square-pen",iNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oNe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_F=Vt("square-plus",oNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lNe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],cNe=Vt("star",lNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],A1=Vt("target",uNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dNe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vi=Vt("trash-2",dNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ANe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],P_=Vt("trending-up",ANe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fNe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],DH=Vt("triangle-alert",fNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hNe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],mNe=Vt("university",hNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pNe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rb=Vt("upload",pNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gNe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PH=Vt("user-cog",gNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vNe=Vt("user-minus",xNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],SF=Vt("user-plus",bNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yNe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],t2=Vt("user",yNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wNe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],fy=Vt("users-round",wNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ENe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_l=Vt("users",ENe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CNe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Rp=Vt("video",CNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NNe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],_Ne=Vt("wand-sparkles",NNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SNe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],k5=Vt("wrench",SNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kNe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wg=Vt("x",kNe);async function jNe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Fs()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await hn(vt(wr,"notificaciones"),t)).id}function BNe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const l=Array.from(i.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const i=$t(vt(wr,"notificaciones"),Ir("docenteEmailLower","==",e.email.toLowerCase()),pr("createdAt","desc"));r.push(fr(i,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=$t(vt(wr,"notificaciones"),Ir("docenteNombre","==",e.nombreCompleto),pr("createdAt","desc"));r.push(fr(i,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function TNe(e){const t=sr(wr,"notificaciones",e);await cc(t,{leida:!0})}async function INe(e){const t=sr(wr,"notificaciones",e);await Ra(t)}const RH="anunciosMuro",LH="mensajesInternos",MH="lir-read-status",FNe=({user:e})=>{if(e.fotoUrl)return o.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return o.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},ONe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=C.useState([]),[A,h]=C.useState([]),[m,g]=C.useState(!1),[x,v]=C.useState(!1),[y,w]=C.useState([]),_=C.useCallback(()=>{try{const B=localStorage.getItem(`${MH}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),j=C.useCallback(B=>{try{localStorage.setItem(`${MH}-${e.id}`,JSON.stringify(B))}catch(R){console.error("Failed to set read status:",R)}},[e.id]);C.useEffect(()=>{const B=JSON.parse(localStorage.getItem(RH)||"[]"),R=_();d(B.filter(F=>!R.announcements.includes(F.id)));const P=JSON.parse(localStorage.getItem(LH)||"[]");h(P.filter(F=>F.para===e.email).sort((F,L)=>new Date(L.fecha).getTime()-new Date(F.fecha).getTime()).slice(0,5))},[e.id,_,l]),C.useEffect(()=>{if(!(e!=null&&e.email))return;const B=BNe({email:e.email,nombreCompleto:e.nombreCompleto},R=>{const P=R.filter(F=>F.tipo&&(F.tipo.toLowerCase()==="pie"||F.tipo==="nueva_intervencion"));w(P)});return()=>B()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const k=()=>{const B=_(),R=JSON.parse(localStorage.getItem(RH)||"[]").map(P=>P.id);B.announcements=R,j(B),d([])},I=()=>{const B=_(),P=JSON.parse(localStorage.getItem(LH)||"[]").filter(F=>F.para===e.email).map(F=>F.id);B.messages=[...new Set([...B.messages,...P])],j(B),c()},E=y.filter(B=>!B.leida).length,S=B=>{var R;try{const P=(R=B.createdAt)!=null&&R.toDate?B.createdAt.toDate():new Date(B.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:o.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:o.jsx(C2e,{})}),o.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),o.jsx("div",{className:"flex-1 flex justify-center",children:o.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:o.jsx(N2e,{})})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(YC,{onOpen:k,trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[o.jsx(Ky,{}),u.length>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:o.jsxs("div",{className:"p-2",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),o.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>o.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[o.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&o.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),o.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),o.jsx(YC,{trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[o.jsx($Ce,{className:"w-5 h-5"}),E>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:o.jsxs("div",{className:"p-2 w-80",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),o.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&o.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>o.jsx("li",{className:"p-2 text-sm",children:o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),o.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",o.jsx("b",{children:B.estudianteNombre})]}),o.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:S(B)})]}),o.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&o.jsx("button",{onClick:()=>B.id&&TNe(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),o.jsx("button",{onClick:()=>B.id&&INe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),o.jsx(YC,{onOpen:I,trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[o.jsx(qy,{}),l>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:o.jsxs("div",{className:"p-2",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),o.jsxs("ul",{className:"mt-1",children:[A.slice(0,3).map(B=>o.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[o.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),A.length===0&&o.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),o.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),o.jsx(YC,{trigger:o.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:o.jsx(FNe,{user:e})}),children:o.jsxs("div",{className:"p-2",children:[o.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),o.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&o.jsx("li",{children:o.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),o.jsx("li",{children:o.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&o.jsx(W2e,{user:e,onClose:()=>g(!1),onSave:n}),x&&o.jsx(X2e,{user:e,onClose:()=>v(!1),onSave:n})]})},DNe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},yR=Q9().length?Q9()[0]:AP(DNe),ft=qP(yR),kF=jZ(yR),PNe=fR(yR),iE="reemplazos_docentes",RNe="usuarios",wR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},LNe=e=>{const t=e.data();return{id:e.id,...t}},MNe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,iE),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},UNe=async(e,t)=>{try{const r=sr(ft,iE,e),n=await zg(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ra(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},QNe=(e,t,r=50)=>{try{const n=$t(vt(ft,iE),Ir("userId","==",e),pr("diaAusencia","desc"),Rd(r));return fr(n,a=>{const s=a.docs.map(wR);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},HNe=e=>{try{const t=$t(vt(ft,RNe),Ir("profile","==",Yt.PROFESORADO));return fr(t,n=>{const a=n.docs.map(LNe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},VNe=async e=>{try{const t=$t(vt(ft,iE),Ir("userId","==",e)),n=(await Dn(t)).docs.map(wR),a=n.length,s=n.filter(l=>l.resultado==="Hora realizada").length,i=n.filter(l=>l.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},zNe=async(e,t)=>{try{if(!t.trim())return[];const r=$t(vt(ft,iE),Ir("userId","==",e),pr("diaAusencia","desc"),Rd(100)),a=(await Dn(r)).docs.map(wR),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},$Ne=Array.from({length:12},(e,t)=>t+1),UH={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},GNe=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,i]=C.useState(null);C.useEffect(()=>e?QNe(e,A=>{r(A),a(!1)}):void 0,[e]);const l=C.useCallback(async d=>{try{return i(null),await MNe(d,e)}catch(A){throw i(A instanceof Error?A.message:"Error al guardar"),A}},[e]),c=C.useCallback(async d=>{try{i(null),await UNe(d,e)}catch(A){throw i(A instanceof Error?A.message:"Error al eliminar"),A}},[e]),u=C.useCallback(async d=>{try{return i(null),d.trim()?await zNe(e,d):t}catch(A){return i(A instanceof Error?A.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},KNe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0);C.useEffect(()=>HNe(i=>{t(i),n(!1)}),[]);const a=C.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Px=({label:e,icon:t,children:r})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),o.jsxs("div",{className:"relative",children:[t&&o.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),qNe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",WNe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",XNe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",T0=({title:e,value:t,icon:r})=>o.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),o.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),YNe=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return o.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),o.jsx("div",{className:"grid gap-3",children:e.map(r=>o.jsxs("div",{children:[o.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[o.jsx("span",{children:r.label}),o.jsx("span",{children:r.value})]}),o.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:o.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},JNe=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[o.jsx(Mu,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):o.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[o.jsx("span",{className:"font-medium",children:n.label}),o.jsx("span",{children:n.value})]}),o.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:o.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},ZNe=({userId:e,reemplazos:t})=>{const[r,n]=C.useState(null),[a,s]=C.useState(!1),i=C.useCallback(async()=>{try{s(!0);const v=await VNe(e);n(v)}finally{s(!1)}},[e]);C.useEffect(()=>{e&&i()},[e,i]);const l=new Date,c=l.getMonth(),u=l.getFullYear(),d=C.useMemo(()=>(t||[]).filter(v=>{const y=new Date(v.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),A=new Set(d.map(v=>v.docenteAusente).filter(Boolean)),h=new Set(d.map(v=>v.docenteReemplazante).filter(Boolean)),m=new Set(d.map(v=>v.curso).filter(Boolean)),g=new Set(d.map(v=>v.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:A.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:m.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?o.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[o.jsx(el,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(T0,{title:"Total",value:r.totalReemplazos,icon:o.jsx(iEe,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Realizadas",value:r.horasRealizadas,icon:o.jsx(Ti,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Cubiertas",value:r.horasCubiertas,icon:o.jsx(QEe,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:o.jsx(QCe,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(T0,{title:"Profesores ausentes",value:A.size,icon:o.jsx(vNe,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Profesores que reemplazan",value:h.size,icon:o.jsx(SF,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Cursos (únicos)",value:m.size,icon:o.jsx(_l,{className:"h-6 w-6"})}),o.jsx(T0,{title:"Asignaturas ausentes",value:g.size,icon:o.jsx(Gc,{className:"h-6 w-6"})})]}),o.jsx(YNe,{data:x})]})},e5e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:l}=GNe(t),{profesorNames:c,loading:u}=KNe(),[d,A]=C.useState(UH),[h,m]=C.useState(""),[g,x]=C.useState([]),[v,y]=C.useState(null),[w,_]=C.useState(!1),[j,k]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!h.trim())return x(r);k(!0);try{const K=await s(h);x(K)}finally{k(!1)}})()},[r,h,s]);const I=C.useCallback(q=>{const{name:K,value:X}=q.target;A(Z=>({...Z,[K]:X}))},[]),E=C.useCallback(q=>{A(K=>{const Z=K.bloquesAfectados.includes(q)?K.bloquesAfectados.filter(G=>G!==q):[...K.bloquesAfectados,q].sort((G,D)=>G-D);return{...K,bloquesAfectados:Z}})},[]),S=C.useCallback(async q=>{q.preventDefault(),y(null),_(!0);const{docenteAusente:K,asignaturaAusente:X,curso:Z,diaAusencia:G,bloquesAfectados:D,docenteReemplazante:U,asignaturaReemplazante:z}=d;if(!K||!X||!Z||!G||!U||!z||D.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(K===U){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const J=X.trim().toLowerCase()===z.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",re={...d,resultado:J};await n(re),A(UH);const oe=document.createElement("div");oe.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",oe.textContent=J==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(oe),setTimeout(()=>{document.body.contains(oe)&&document.body.removeChild(oe)},2500)}catch(J){console.error(J),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),B=C.useCallback(async q=>{if(window.confirm("¿Eliminar este registro?"))try{await a(q)}catch(K){console.error(K),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),R="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return o.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const P=new Date,F=P.getMonth(),L=P.getFullYear(),M=C.useMemo(()=>(r||[]).filter(q=>{if(!q.diaAusencia)return!1;const K=new Date(q.diaAusencia+"T00:00:00");return K.getMonth()===F&&K.getFullYear()===L}),[r,F,L]),ee=C.useMemo(()=>{const q={};for(const K of M){const X=K.curso||"Sin curso";q[X]=(q[X]||0)+1}return q},[M]),V=C.useMemo(()=>Object.entries(ee).sort(([q],[K])=>q.localeCompare(K,"es")).map(([q,K])=>({label:q,value:K})),[ee]);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),o.jsx(ZNe,{userId:t,reemplazos:r})]}),o.jsx(JNe,{data:V}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?o.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[o.jsx(el,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):o.jsxs("form",{onSubmit:S,className:"space-y-8",children:[o.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_l,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),o.jsx(Px,{label:"Nombre",icon:o.jsx(yg,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:I,className:R,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(q=>o.jsx("option",{value:q,children:q},q))]})}),o.jsx(Px,{label:"Asignatura",icon:o.jsx(Gc,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:I,className:R,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),js.map(q=>o.jsx("option",{value:q,children:q},q))]})}),o.jsx(Px,{label:"Curso",icon:o.jsx(_l,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"curso",value:d.curso,onChange:I,className:R,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(q=>o.jsx("option",{value:q,children:q},q))]})}),o.jsx(Px,{label:"Día de ausencia",icon:o.jsx(ac,{className:"h-5 w-5"}),children:o.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:I,className:R,required:!0,disabled:w})}),o.jsxs("div",{children:[o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx(nh,{className:"h-5 w-5 text-slate-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:$Ne.map(q=>{const K=d.bloquesAfectados.includes(q);return o.jsx("button",{type:"button",onClick:()=>E(q),disabled:w,className:`${qNe} ${K?WNe:XNe}`,"aria-pressed":K,children:q},q)})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_l,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),o.jsx(Px,{label:"Nombre",icon:o.jsx(yg,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(q=>o.jsx("option",{value:q,children:q},q))]})}),o.jsx(Px,{label:"Asignatura",icon:o.jsx(Gc,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),js.map(q=>o.jsx("option",{value:q,children:q},q))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&o.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[o.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),o.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[o.jsx(Ti,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),o.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&o.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?o.jsxs(o.Fragment,{children:[o.jsx(el,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):o.jsxs(o.Fragment,{children:[o.jsx($d,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),o.jsxs("div",{className:"relative w-full max-w-md",children:[o.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:j?o.jsx(el,{className:"h-5 w-5 animate-spin"}):o.jsx(sE,{className:"h-5 w-5"})}),o.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:q=>m(q.target.value),className:R,disabled:j})]})]}),i?o.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[o.jsx(el,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:o.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(q=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:q},q))})}),o.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(q=>o.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(q.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:q.curso}),o.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[q.docenteAusente,o.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:q.asignaturaAusente})]}),o.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[q.docenteReemplazante,o.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:q.asignaturaReemplazante})]}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:q.bloquesAfectados.join(", ")}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:o.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${q.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[o.jsx(Ti,{className:"h-4 w-4"}),q.resultado]})}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:o.jsx("button",{onClick:()=>B(q.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:o.jsx(vi,{className:"h-4 w-4"})})})]},q.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&o.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},t5e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=vt(wr,"reemplazos"),r=$t(t,pr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},r5e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=vt(wr,"acompanamientos"),r=$t(t,pr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},n5e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=vt(wr,"calendar_events"),r=$t(t,pr("date","asc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},jA=({title:e,value:t,description:r,isLoading:n=!1})=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?o.jsxs("div",{className:"flex items-center mt-2",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Cp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=C.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),i=C.useMemo(()=>Math.max(...s,1),[s]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?o.jsxs("div",{className:"flex justify-center items-center py-8",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):o.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),o.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},l.label+c)}):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},a5e=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState([]),[i,l]=C.useState(!0),[c,u]=C.useState(null);return C.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const A=3,h=()=>{d++,d>=A&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=t5e(v=>{t(v),h()}),g=r5e(v=>{n(v),h()}),x=n5e(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},s5e=({currentUser:e})=>{var A,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(A=e==null?void 0:e.profile)==null?void 0:A.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=a5e(),[i,l]=C.useState(xw);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),C.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):xw)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(xw)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),o.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[o.jsx("p",{children:o.jsx("strong",{children:"Debug Info:"})}),o.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),o.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),o.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),o.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=C.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(k=>k.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(k,I)=>k.reduce((E,S)=>{const B=S[I];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),j=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([k,I])=>({label:k,value:I})),reemplazosPorDocente:Object.entries(_).map(([k,I])=>({label:k,value:I})),inasistenciasPorCurso:Object.entries(j).map(([k,I])=>({label:k,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=C.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(I=>{I.criteria.forEach(E=>{g.set(E.name,I.domain)})});let x=0,v=0;const y={},w={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([E,S])=>{x+=S,v++,y[I.docente].total+=S,y[I.docente].count++;const B=g.get(E);B&&(w[B]||(w[B]={total:0,count:0}),w[B].total+=S,w[B].count++)})});const _=v>0?(x/v).toFixed(2):"N/A",j=Object.entries(y).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0})),k=Object.entries(w).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:_,desempenoPorDocente:j,desempenoPorDominio:k}},[r,i]),d=C.useMemo(()=>{const m={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Rv[x].label,value:v}));return{totalEvaluaciones:m[dn.EVALUACION],totalActos:m[dn.ACTO],totalActividadesFocalizadas:m[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"📊"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),o.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[o.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),o.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),o.jsx("p",{children:"• Calendario Académico"})]})]}):o.jsxs("div",{className:"space-y-12 animate-fade-in",children:[o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),o.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),o.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),o.jsx(jA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),o.jsx(jA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),o.jsx(jA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(Cp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),o.jsx(Cp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),o.jsx(Cp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),o.jsx(Cp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),o.jsx(jA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(Cp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),o.jsx(Cp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(Cp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?o.jsxs("div",{className:"flex justify-center items-center py-8",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return o.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&o.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Rv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Rv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),o.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),o.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var R_={};R_.version="0.18.5";var $te=1252,i5e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ER={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},CR=function(e){i5e.indexOf(e)!=-1&&($te=ER[0]=e)};function o5e(){CR(1252)}var Id=function(e){CR(e)};function NR(){Id(1200),o5e()}function QH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function l5e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Gte(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Wy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?l5e(e.slice(2)):t==254&&r==255?Gte(e.slice(2)):t==65279?e.slice(1):e},eN=function(t){return String.fromCharCode(t)},HH=function(t){return String.fromCharCode(t)},r2,em="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n2(e){for(var t="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=em.charAt(s)+em.charAt(i)+em.charAt(l)+em.charAt(c);return t}function Kc(e){var t="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=em.indexOf(e.charAt(u++)),i=em.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),l=em.indexOf(e.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=em.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var xn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Hh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function jm(e){return xn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function VH(e){return xn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Mc=function(t){return xn?Hh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function rk(e){if(typeof ArrayBuffer>"u")return Mc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Gm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function c5e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function _R(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return _R(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var eo=xn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Hh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function u5e(e){for(var t=[],r=0,n=e.length+250,a=jm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=jm(65535),n=65530)}return t.push(a.slice(0,r)),eo(t)}var Sl=/\u0000/g,Xy=/[\u0001-\u0006]/g;function Mv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Fd(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}function SR(e,t){var r=""+e;return r.length>=t?r:Ss(" ",t-r.length)+r}function L_(e,t){var r=""+e;return r.length>=t?r:r+Ss(" ",t-r.length)}function d5e(e,t){var r=""+Math.round(e);return r.length>=t?r:Ss("0",t-r.length)+r}function A5e(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}var zH=Math.pow(2,32);function Rx(e,t){if(e>zH||e<-zH)return d5e(e,t);var r=Math.round(e);return A5e(r,t)}function M_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var $H=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function f5e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Mr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},GH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},h5e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function U_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,l=0,c=1,u=0,d=0,A=Math.floor(a);u<t&&(A=Math.floor(a),l=A*i+s,d=A*u+c,!(a-A<5e-8));)a=1/(a-A),s=i,i=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Vp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=b5e(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Kte=new Date(1899,11,31,0,0,0),m5e=Kte.getTime(),p5e=new Date(1900,2,1,0,0,0);function qte(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=p5e&&(r+=1440*60*1e3),(r-(m5e+(e.getTimezoneOffset()-Kte.getTimezoneOffset())*6e4))/(1440*60*1e3)}function kR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function g5e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function x5e(e){var t=e<0?12:11,r=kR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function v5e(e){var t=kR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function a2(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=x5e(e):t===10?r=e.toFixed(10).substr(0,12):r=v5e(e),kR(g5e(r.toUpperCase()))}function Eg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):a2(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ku(14,qte(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function b5e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function y5e(e,t,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return wB[r.m-1][1];case 5:return wB[r.m-1][0];default:return wB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return $H[r.q][0];default:return $H[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Fd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Fd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Fd(c,u):"";return d}function tm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Wte=/%/g;function w5e(e,t,r){var n=t.replace(Wte,""),a=t.length-n.length;return hh(e,n,r*Math.pow(10,2*a))+Ss("%",a)}function E5e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Xte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Xte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Yte=/# (\?+)( ?)\/( ?)(\d+)/;function C5e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Ss(" ",e[1].length+1+e[4].length):SR(i,e[1].length)+e[2]+"/"+e[3]+Fd(l,e[4].length))}function N5e(e,t,r){return r+(t===0?"":""+t)+Ss(" ",e[1].length+2+e[4].length)}var Jte=/^#*0*\.([0#]+)/,Zte=/\).*[0#]/,ere=/\(###\) ###\\?-####/;function xl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function KH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function qH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function _5e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function S5e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ku(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Zte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ku("n",n,r):"("+ku("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return E5e(e,t,r);if(t.indexOf("%")!==-1)return w5e(e,t,r);if(t.indexOf("E")!==-1)return Xte(t,r);if(t.charCodeAt(0)===36)return"$"+ku(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Rx(c,t.length);if(t.match(/^[#?]+$/))return a=Rx(r,0),a==="0"&&(a=""),a.length>t.length?a:xl(t.substr(0,t.length-a.length))+a;if(s=t.match(Yte))return C5e(s,c,u);if(t.match(/^#+0+$/))return u+Rx(c,t.length-t.indexOf("0"));if(s=t.match(Jte))return a=KH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+xl(s[1])).replace(/\.$/,"."+xl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ss("0",xl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+KH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+tm(Rx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ku(e,t,-r):tm(""+(Math.floor(r)+_5e(r,s[1].length)))+"."+Fd(qH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return ku(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Mv(ku(e,t.replace(/[\\-]/g,""),r)),i=0,Mv(Mv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ere))return a=ku(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=U_(c,Math.pow(10,i)-1,!1),a=""+u,d=hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=L_(l[2],i),d.length<s[4].length&&(d=xl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=U_(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?SR(l[1],i)+s[2]+"/"+s[3]+L_(l[2],i):Ss(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Rx(r,0),t.length<=a.length?a:xl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=t.indexOf(".")-i,h=t.length-a.length-A;return xl(t.substr(0,A)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=qH(r,s[1].length),r<0?"-"+ku(e,t,-r):tm(S5e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Fd(0,3-g.length):"")+g})+"."+Fd(i,s[1].length);switch(t){case"###,##0.00":return ku(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=tm(Rx(c,0));return m!=="0"?u+m:"";case"###,###.00":return ku(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ku(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function k5e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function j5e(e,t,r){var n=t.replace(Wte,""),a=t.length-n.length;return hh(e,n,r*Math.pow(10,2*a))+Ss("%",a)}function tre(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+tre(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function FA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Zte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?FA("n",n,r):"("+FA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return k5e(e,t,r);if(t.indexOf("%")!==-1)return j5e(e,t,r);if(t.indexOf("E")!==-1)return tre(t,r);if(t.charCodeAt(0)===36)return"$"+FA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Fd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:xl(t.substr(0,t.length-a.length))+a;if(s=t.match(Yte))return N5e(s,c,u);if(t.match(/^#+0+$/))return u+Fd(c,t.length-t.indexOf("0"));if(s=t.match(Jte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+xl(s[1])).replace(/\.$/,"."+xl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Ss("0",xl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+tm(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+FA(e,t,-r):tm(""+r)+"."+Ss("0",s[1].length);if(s=t.match(/^#,#*,#0/))return FA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Mv(FA(e,t.replace(/[\\-]/g,""),r)),i=0,Mv(Mv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ere))return a=FA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=U_(c,Math.pow(10,i)-1,!1),a=""+u,d=hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=L_(l[2],i),d.length<s[4].length&&(d=xl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=U_(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?SR(l[1],i)+s[2]+"/"+s[3]+L_(l[2],i):Ss(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:xl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=t.indexOf(".")-i,h=t.length-a.length-A;return xl(t.substr(0,A)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+FA(e,t,-r):tm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Fd(0,3-g.length):"")+g})+"."+Fd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=tm(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return FA(e,t.slice(0,t.lastIndexOf(".")),r)+xl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function hh(e,t,r){return(r|0)===r?FA(e,t,r):ku(e,t,r)}function B5e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var rre=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function nb(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":M_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(rre))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function T5e(e,t,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,A,h="H";i<e.length;)switch(l=e.charAt(i)){case"G":if(!M_(e,i))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(A=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(A);a[a.length]={t:"t",v:s},++i;break;case"\\":var m=e.charAt(++i),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Vp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Vp(t,r),u==null))return"";for(s=l;++i<e.length&&e.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=Vp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(rre)){if(u==null&&(u=Vp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",nb(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<e.length&&(l=e.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++i;break}var v=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[i].v.match(/[Hh]/)&&(v=1),v<2&&a[i].v.match(/[Mm]/)&&(v=2),v<3&&a[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",j;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=y5e(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(j=i+1;a[j]!=null&&((l=a[j].t)==="?"||l==="D"||(l===" "||l==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[i].v+=a[j].v,a[j]={v:"",t:";"},++j;_+=a[i].v,i=j-1;break;case"G":a[i].t="t",a[i].v=Eg(t,r);break}var k="",I,E;if(_.length>0){_.charCodeAt(0)==40?(I=t<0&&_.charCodeAt(0)===45?-t:t,E=hh("n",_,I)):(I=t<0&&n>1?-t:t,E=hh("n",_,I),I<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),j=E.length-1;var S=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){S=i;break}var B=a.length;if(S===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(j>=a[i].v.length-1?(j-=a[i].v.length,a[i].v=E.substr(j+1,a[i].v.length)):j<0?a[i].v="":(a[i].v=E.substr(0,j+1),j=-1),a[i].t="t",B=i);j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v)}else if(S!==a.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,i=S;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")-1:a[i].v.length-1,k=a[i].v.substr(d+1);d>=0;--d)j>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(k=E.charAt(j--)+k);a[i].v=k,a[i].t="t",B=i}for(j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v),j=E.indexOf(".")+1,i=S;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==S)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")+1:0,k=a[i].v.substr(0,d);d<a[i].v.length;++d)j<E.length&&(k+=E.charAt(j++));a[i].v=k,a[i].t="t",B=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=hh(a[i].t,a[i].v,I),a[i].t="t");var R="";for(i=0;i!==a.length;++i)a[i]!=null&&(R+=a[i].v);return R}var WH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function XH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function I5e(e,t){var r=B5e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(WH),l=r[1].match(WH);return XH(t,i)?[n,r[0]]:XH(t,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function Ku(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mr)[e],n==null&&(n=r.table&&r.table[GH[e]]||Mr[GH[e]]),n==null&&(n=h5e[e]||"General");break}if(M_(n,0))return Eg(t,r);t instanceof Date&&(t=qte(t,r.date1904));var a=I5e(n,t);if(M_(a[1]))return Eg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return T5e(a[1],t,r,a[0])}function mh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Mr[r]==null){t<0&&(t=r);continue}if(Mr[r]==e){t=r;break}}t<0&&(t=391)}return Mr[t]=e,t}function nk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&mh(e[t],t)}function ab(){Mr=f5e()}var F5e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},nre=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function O5e(e){var t=typeof e=="number"?Mr[e]:e;return t=t.replace(nre,"(\\d+)"),new RegExp("^"+t+"$")}function D5e(e,t,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(t.match(nre)||[]).forEach(function(A,h){var m=parseInt(r[h+1],10);switch(A.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":i=m;break;case"s":c=m;break;case"m":i>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var P5e=function(){var e={};e.version="1.2.0";function t(){for(var E=0,S=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[B]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(E){var S=0,B=0,R=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)P[R]=E[R];for(R=0;R!=256;++R)for(B=E[R],S=256+R;S<4096;S+=256)B=P[S]=B>>>8^E[B&255];var F=[];for(R=1;R!=16;++R)F[R-1]=typeof Int32Array<"u"?P.subarray(R*256,R*256+256):P.slice(R*256,R*256+256);return F}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],A=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],_=a[14];function j(E,S){for(var B=S^-1,R=0,P=E.length;R<P;)B=B>>>8^r[(B^E.charCodeAt(R++))&255];return~B}function k(E,S){for(var B=S^-1,R=E.length-15,P=0;P<R;)B=_[E[P++]^B&255]^w[E[P++]^B>>8&255]^y[E[P++]^B>>16&255]^v[E[P++]^B>>>24]^x[E[P++]]^g[E[P++]]^m[E[P++]]^h[E[P++]]^A[E[P++]]^d[E[P++]]^u[E[P++]]^c[E[P++]]^l[E[P++]]^i[E[P++]]^s[E[P++]]^r[E[P++]];for(R+=15;P<R;)B=B>>>8^r[(B^E[P++])&255];return~B}function I(E,S){for(var B=S^-1,R=0,P=E.length,F=0,L=0;R<P;)F=E.charCodeAt(R++),F<128?B=B>>>8^r[(B^F)&255]:F<2048?(B=B>>>8^r[(B^(192|F>>6&31))&255],B=B>>>8^r[(B^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,L=E.charCodeAt(R++)&1023,B=B>>>8^r[(B^(240|F>>8&7))&255],B=B>>>8^r[(B^(128|F>>2&63))&255],B=B>>>8^r[(B^(128|L>>6&15|(F&3)<<4))&255],B=B>>>8^r[(B^(128|L&63))&255]):(B=B>>>8^r[(B^(224|F>>12&15))&255],B=B>>>8^r[(B^(128|F>>6&63))&255],B=B>>>8^r[(B^(128|F&63))&255]);return~B}return e.table=r,e.bstr=j,e.buf=k,e.str=I,e}(),_r=function(){var t={};t.version="1.2.1";function r(he,Ie){for(var Ce=he.split("/"),we=Ie.split("/"),Se=0,Fe=0,Ye=Math.min(Ce.length,we.length);Se<Ye;++Se){if(Fe=Ce[Se].length-we[Se].length)return Fe;if(Ce[Se]!=we[Se])return Ce[Se]<we[Se]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Ie=he.lastIndexOf("/");return Ie===-1?he:he.slice(0,Ie+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var Ie=he.lastIndexOf("/");return Ie===-1?he:he.slice(Ie+1)}function s(he,Ie){typeof Ie=="string"&&(Ie=new Date(Ie));var Ce=Ie.getHours();Ce=Ce<<6|Ie.getMinutes(),Ce=Ce<<5|Ie.getSeconds()>>>1,he.write_shift(2,Ce);var we=Ie.getFullYear()-1980;we=we<<4|Ie.getMonth()+1,we=we<<5|Ie.getDate(),he.write_shift(2,we)}function i(he){var Ie=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Se=Ce&31;Ce>>>=5;var Fe=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(Fe-1),we.setDate(Se);var Ye=Ie&31;Ie>>>=5;var dt=Ie&63;return Ie>>>=6,we.setHours(Ie),we.setMinutes(dt),we.setSeconds(Ye<<1),we}function l(he){wo(he,0);for(var Ie={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Se=he.read_shift(2),Fe=he.l+Se,Ye={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Ye.mtime=he.read_shift(4)),Se>5&&(Ce&2&&(Ye.atime=he.read_shift(4)),Ce&4&&(Ye.ctime=he.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}he.l=Fe,Ie[we]=Ye}return Ie}var c;function u(){return c||(c={})}function d(he,Ie){if(he[0]==80&&he[1]==75)return mn(he,Ie);if((he[0]|32)==109&&(he[1]|32)==105)return Et(he,Ie);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Se=0,Fe=0,Ye=0,dt=0,Ge=0,rt=[],it=he.slice(0,512);wo(it,0);var Ft=A(it);switch(Ce=Ft[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ft[1]==0)return mn(he,Ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(it=he.slice(0,we),wo(it,28));var zt=he.slice(0,we);h(it,Ce);var Jt=it.read_shift(4,"i");if(Ce===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),dt=it.read_shift(4,"i"),Se=it.read_shift(4,"i"),Ge=it.read_shift(4,"i"),Fe=it.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=it.read_shift(4,"i"),!(Ht<0));++Gt)rt[Gt]=Ht;var kr=m(he,we);v(Ge,Fe,kr,we,rt);var sn=w(kr,Ye,rt,we);sn[Ye].name="!Directory",Se>0&&dt!==L&&(sn[dt].name="!MiniFAT"),sn[rt[0]].name="!FAT",sn.fat_addrs=rt,sn.ssz=we;var on={},An=[],hs=[],_o=[];_(Ye,sn,kr,An,Se,on,hs,dt),g(hs,_o,An),An.shift();var ms={FileIndex:hs,FullPaths:_o};return Ie&&Ie.raw&&(ms.raw={header:zt,sectors:kr}),ms}function A(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(M,"Header Signature: "),he.l+=16;var Ie=he.read_shift(2,"u");return[he.read_shift(2,"u"),Ie]}function h(he,Ie){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(Ie!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Ie!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function m(he,Ie){for(var Ce=Math.ceil(he.length/Ie)-1,we=[],Se=1;Se<Ce;++Se)we[Se-1]=he.slice(Se*Ie,(Se+1)*Ie);return we[Ce-1]=he.slice(Ce*Ie),we}function g(he,Ie,Ce){for(var we=0,Se=0,Fe=0,Ye=0,dt=0,Ge=Ce.length,rt=[],it=[];we<Ge;++we)rt[we]=it[we]=we,Ie[we]=Ce[we];for(;dt<it.length;++dt)we=it[dt],Se=he[we].L,Fe=he[we].R,Ye=he[we].C,rt[we]===we&&(Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]),Fe!==-1&&rt[Fe]!==Fe&&(rt[we]=rt[Fe])),Ye!==-1&&(rt[Ye]=we),Se!==-1&&we!=rt[we]&&(rt[Se]=rt[we],it.lastIndexOf(Se)<dt&&it.push(Se)),Fe!==-1&&we!=rt[we]&&(rt[Fe]=rt[we],it.lastIndexOf(Fe)<dt&&it.push(Fe));for(we=1;we<Ge;++we)rt[we]===we&&(Fe!==-1&&rt[Fe]!==Fe?rt[we]=rt[Fe]:Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]));for(we=1;we<Ge;++we)if(he[we].type!==0){if(dt=we,dt!=rt[dt])do dt=rt[dt],Ie[we]=Ie[dt]+"/"+Ie[we];while(dt!==0&&rt[dt]!==-1&&dt!=rt[dt]);rt[we]=-1}for(Ie[0]+="/",we=1;we<Ge;++we)he[we].type!==2&&(Ie[we]+="/")}function x(he,Ie,Ce){for(var we=he.start,Se=he.size,Fe=[],Ye=we;Ce&&Se>0&&Ye>=0;)Fe.push(Ie.slice(Ye*F,Ye*F+F)),Se-=F,Ye=Lp(Ce,Ye*4);return Fe.length===0?Ct(0):eo(Fe).slice(0,he.size)}function v(he,Ie,Ce,we,Se){var Fe=L;if(he===L){if(Ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Ye=Ce[he],dt=(we>>>2)-1;if(!Ye)return;for(var Ge=0;Ge<dt&&(Fe=Lp(Ye,Ge*4))!==L;++Ge)Se.push(Fe);v(Lp(Ye,we-4),Ie-1,Ce,we,Se)}}function y(he,Ie,Ce,we,Se){var Fe=[],Ye=[];Se||(Se=[]);var dt=we-1,Ge=0,rt=0;for(Ge=Ie;Ge>=0;){Se[Ge]=!0,Fe[Fe.length]=Ge,Ye.push(he[Ge]);var it=Ce[Math.floor(Ge*4/we)];if(rt=Ge*4&dt,we<4+rt)throw new Error("FAT boundary crossed: "+Ge+" 4 "+we);if(!he[it])break;Ge=Lp(he[it],rt)}return{nodes:Fe,data:lV([Ye])}}function w(he,Ie,Ce,we){var Se=he.length,Fe=[],Ye=[],dt=[],Ge=[],rt=we-1,it=0,Ft=0,zt=0,Jt=0;for(it=0;it<Se;++it)if(dt=[],zt=it+Ie,zt>=Se&&(zt-=Se),!Ye[zt]){Ge=[];var Ht=[];for(Ft=zt;Ft>=0;){Ht[Ft]=!0,Ye[Ft]=!0,dt[dt.length]=Ft,Ge.push(he[Ft]);var Gt=Ce[Math.floor(Ft*4/we)];if(Jt=Ft*4&rt,we<4+Jt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+we);if(!he[Gt]||(Ft=Lp(he[Gt],Jt),Ht[Ft]))break}Fe[zt]={nodes:dt,data:lV([Ge])}}return Fe}function _(he,Ie,Ce,we,Se,Fe,Ye,dt){for(var Ge=0,rt=we.length?2:0,it=Ie[he].data,Ft=0,zt=0,Jt;Ft<it.length;Ft+=128){var Ht=it.slice(Ft,Ft+128);wo(Ht,64),zt=Ht.read_shift(2),Jt=DR(Ht,0,zt-rt),we.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},kr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);kr!==0&&(Gt.ct=j(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=j(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=L,Gt.name=""),Gt.type===5?(Ge=Gt.start,Se>0&&Ge!==L&&(Ie[Ge].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",Ie[Gt.start]===void 0&&(Ie[Gt.start]=y(Ce,Gt.start,Ie.fat_addrs,Ie.ssz)),Ie[Gt.start].name=Gt.name,Gt.content=Ie[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:Ge!==L&&Gt.start!==L&&Ie[Ge]&&(Gt.content=x(Gt,Ie[Ge].data,(Ie[dt]||{}).data))),Gt.content&&wo(Gt.content,0),Fe[Jt]=Gt,Ye.push(Gt)}}function j(he,Ie){return new Date((Pc(he,Ie+4)/1e7*Math.pow(2,32)+Pc(he,Ie)/1e7-11644473600)*1e3)}function k(he,Ie){return u(),d(c.readFileSync(he),Ie)}function I(he,Ie){var Ce=Ie&&Ie.type;switch(Ce||xn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return k(he,Ie);case"base64":return d(Mc(Kc(he)),Ie);case"binary":return d(Mc(he),Ie)}return d(he,Ie)}function E(he,Ie){var Ce=Ie||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),S(he)}function S(he){var Ie="Sh33tJ5";if(!_r.find(he,"/"+Ie)){var Ce=Ct(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:Ie,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Ie),B(he)}}function B(he,Ie){E(he);for(var Ce=!1,we=!1,Se=he.FullPaths.length-1;Se>=0;--Se){var Fe=he.FileIndex[Se];switch(Fe.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Fe.R*Fe.L*Fe.C)&&(Ce=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Ie)){var Ye=new Date(1987,1,19),dt=0,Ge=Object.create?Object.create(null):{},rt=[];for(Se=0;Se<he.FullPaths.length;++Se)Ge[he.FullPaths[Se]]=!0,he.FileIndex[Se].type!==0&&rt.push([he.FullPaths[Se],he.FileIndex[Se]]);for(Se=0;Se<rt.length;++Se){var it=n(rt[Se][0]);we=Ge[it],we||(rt.push([it,{name:a(it).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),Ge[it]=!0)}for(rt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),he.FullPaths=[],he.FileIndex=[],Se=0;Se<rt.length;++Se)he.FullPaths[Se]=rt[Se][0],he.FileIndex[Se]=rt[Se][1];for(Se=0;Se<rt.length;++Se){var Ft=he.FileIndex[Se],zt=he.FullPaths[Se];if(Ft.name=a(zt).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||V,Se===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if(zt.slice(-1)=="/"){for(dt=Se+1;dt<rt.length&&n(he.FullPaths[dt])!=zt;++dt);for(Ft.C=dt>=rt.length?-1:dt,dt=Se+1;dt<rt.length&&n(he.FullPaths[dt])!=n(zt);++dt);Ft.R=dt>=rt.length?-1:dt,Ft.type=1}else n(he.FullPaths[Se+1]||"")==n(zt)&&(Ft.R=Se+1),Ft.type=2}}}function R(he,Ie){var Ce=Ie||{};if(Ce.fileType=="mad")return bt(he,Ce);switch(B(he),Ce.fileType){case"zip":return ja(he,Ce)}var we=function(Jt){for(var Ht=0,Gt=0,kr=0;kr<Jt.FileIndex.length;++kr){var sn=Jt.FileIndex[kr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,hs=Ht+7>>3,_o=Ht+127>>7,ms=hs+Gt+An+_o,ni=ms+127>>7,Ps=ni<=109?0:Math.ceil((ni-109)/127);ms+ni+Ps+127>>7>ni;)Ps=++ni<=109?0:Math.ceil((ni-109)/127);var wi=[1,Ps,ni,_o,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,wi[7]=(Jt.FileIndex[0].start=wi[0]+wi[1]+wi[2]+wi[3]+wi[4]+wi[5])+(wi[6]+7>>3),wi}(he),Se=Ct(we[7]<<9),Fe=0,Ye=0;{for(Fe=0;Fe<8;++Fe)Se.write_shift(1,ee[Fe]);for(Fe=0;Fe<8;++Fe)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),Fe=0;Fe<3;++Fe)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,we[2]),Se.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:L),Se.write_shift(4,we[3]),Se.write_shift(-4,we[1]?we[0]-1:L),Se.write_shift(4,we[1]),Fe=0;Fe<109;++Fe)Se.write_shift(-4,Fe<we[2]?we[1]+Fe:-1)}if(we[1])for(Ye=0;Ye<we[1];++Ye){for(;Fe<236+Ye*127;++Fe)Se.write_shift(-4,Fe<we[2]?we[1]+Fe:-1);Se.write_shift(-4,Ye===we[1]-1?L:Ye+1)}var dt=function(Jt){for(Ye+=Jt;Fe<Ye-1;++Fe)Se.write_shift(-4,Fe+1);Jt&&(++Fe,Se.write_shift(-4,L))};for(Ye=Fe=0,Ye+=we[1];Fe<Ye;++Fe)Se.write_shift(-4,q.DIFSECT);for(Ye+=we[2];Fe<Ye;++Fe)Se.write_shift(-4,q.FATSECT);dt(we[3]),dt(we[4]);for(var Ge=0,rt=0,it=he.FileIndex[0];Ge<he.FileIndex.length;++Ge)it=he.FileIndex[Ge],it.content&&(rt=it.content.length,!(rt<4096)&&(it.start=Ye,dt(rt+511>>9)));for(dt(we[6]+7>>3);Se.l&511;)Se.write_shift(-4,q.ENDOFCHAIN);for(Ye=Fe=0,Ge=0;Ge<he.FileIndex.length;++Ge)it=he.FileIndex[Ge],it.content&&(rt=it.content.length,!(!rt||rt>=4096)&&(it.start=Ye,dt(rt+63>>6)));for(;Se.l&511;)Se.write_shift(-4,q.ENDOFCHAIN);for(Fe=0;Fe<we[4]<<2;++Fe){var Ft=he.FullPaths[Fe];if(!Ft||Ft.length===0){for(Ge=0;Ge<17;++Ge)Se.write_shift(4,0);for(Ge=0;Ge<3;++Ge)Se.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)Se.write_shift(4,0);continue}it=he.FileIndex[Fe],Fe===0&&(it.start=it.size?it.start-1:L);var zt=Fe===0&&Ce.root||it.name;if(rt=2*(zt.length+1),Se.write_shift(64,zt,"utf16le"),Se.write_shift(2,rt),Se.write_shift(1,it.type),Se.write_shift(1,it.color),Se.write_shift(-4,it.L),Se.write_shift(-4,it.R),Se.write_shift(-4,it.C),it.clsid)Se.write_shift(16,it.clsid,"hex");else for(Ge=0;Ge<4;++Ge)Se.write_shift(4,0);Se.write_shift(4,it.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,it.start),Se.write_shift(4,it.size),Se.write_shift(4,0)}for(Fe=1;Fe<he.FileIndex.length;++Fe)if(it=he.FileIndex[Fe],it.size>=4096)if(Se.l=it.start+1<<9,xn&&Buffer.isBuffer(it.content))it.content.copy(Se,Se.l,0,it.size),Se.l+=it.size+511&-512;else{for(Ge=0;Ge<it.size;++Ge)Se.write_shift(1,it.content[Ge]);for(;Ge&511;++Ge)Se.write_shift(1,0)}for(Fe=1;Fe<he.FileIndex.length;++Fe)if(it=he.FileIndex[Fe],it.size>0&&it.size<4096)if(xn&&Buffer.isBuffer(it.content))it.content.copy(Se,Se.l,0,it.size),Se.l+=it.size+63&-64;else{for(Ge=0;Ge<it.size;++Ge)Se.write_shift(1,it.content[Ge]);for(;Ge&63;++Ge)Se.write_shift(1,0)}if(xn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function P(he,Ie){var Ce=he.FullPaths.map(function(Ge){return Ge.toUpperCase()}),we=Ce.map(function(Ge){var rt=Ge.split("/");return rt[rt.length-(Ge.slice(-1)=="/"?2:1)]}),Se=!1;Ie.charCodeAt(0)===47?(Se=!0,Ie=Ce[0].slice(0,-1)+Ie):Se=Ie.indexOf("/")!==-1;var Fe=Ie.toUpperCase(),Ye=Se===!0?Ce.indexOf(Fe):we.indexOf(Fe);if(Ye!==-1)return he.FileIndex[Ye];var dt=!Fe.match(Xy);for(Fe=Fe.replace(Sl,""),dt&&(Fe=Fe.replace(Xy,"!")),Ye=0;Ye<Ce.length;++Ye)if((dt?Ce[Ye].replace(Xy,"!"):Ce[Ye]).replace(Sl,"")==Fe||(dt?we[Ye].replace(Xy,"!"):we[Ye]).replace(Sl,"")==Fe)return he.FileIndex[Ye];return null}var F=64,L=-2,M="d0cf11e0a1b11ae1",ee=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(he,Ie,Ce){u();var we=R(he,Ce);c.writeFileSync(Ie,we)}function X(he){for(var Ie=new Array(he.length),Ce=0;Ce<he.length;++Ce)Ie[Ce]=String.fromCharCode(he[Ce]);return Ie.join("")}function Z(he,Ie){var Ce=R(he,Ie);switch(Ie&&Ie.type||"buffer"){case"file":return u(),c.writeFileSync(Ie.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:X(Ce);case"base64":return n2(typeof Ce=="string"?Ce:X(Ce));case"buffer":if(xn)return Buffer.isBuffer(Ce)?Ce:Hh(Ce);case"array":return typeof Ce=="string"?Mc(Ce):Ce}return Ce}var G;function D(he){try{var Ie=he.InflateRaw,Ce=new Ie;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)G=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function U(he,Ie){if(!G)return Pr(he,Ie);var Ce=G.InflateRaw,we=new Ce,Se=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Se}function z(he){return G?G.deflateRawSync(he):Qt(he)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(he){var Ie=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Ie>>16|Ie>>8|Ie)&255}for(var le=typeof Uint8Array<"u",ue=le?new Uint8Array(256):[],ke=0;ke<256;++ke)ue[ke]=se(ke);function ae(he,Ie){var Ce=ue[he&255];return Ie<=8?Ce>>>8-Ie:(Ce=Ce<<8|ue[he>>8&255],Ie<=16?Ce>>>16-Ie:(Ce=Ce<<8|ue[he>>16&255],Ce>>>24-Ie))}function Ne(he,Ie){var Ce=Ie&7,we=Ie>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function je(he,Ie){var Ce=Ie&7,we=Ie>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function _e(he,Ie){var Ce=Ie&7,we=Ie>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function me(he,Ie){var Ce=Ie&7,we=Ie>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Te(he,Ie){var Ce=Ie&7,we=Ie>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Le(he,Ie,Ce){var we=Ie&7,Se=Ie>>>3,Fe=(1<<Ce)-1,Ye=he[Se]>>>we;return Ce<8-we||(Ye|=he[Se+1]<<8-we,Ce<16-we)||(Ye|=he[Se+2]<<16-we,Ce<24-we)||(Ye|=he[Se+3]<<24-we),Ye&Fe}function We(he,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return we<=5?he[Se]|=(Ce&7)<<we:(he[Se]|=Ce<<we&255,he[Se+1]=(Ce&7)>>8-we),Ie+3}function xe(he,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce=(Ce&1)<<we,he[Se]|=Ce,Ie+1}function Oe(he,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce,Ie+8}function Re(he,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce&255,he[Se+2]=Ce>>>8,Ie+16}function $e(he,Ie){var Ce=he.length,we=2*Ce>Ie?2*Ce:Ie+5,Se=0;if(Ce>=Ie)return he;if(xn){var Fe=VH(we);if(he.copy)he.copy(Fe);else for(;Se<he.length;++Se)Fe[Se]=he[Se];return Fe}else if(le){var Ye=new Uint8Array(we);if(Ye.set)Ye.set(he);else for(;Se<Ce;++Se)Ye[Se]=he[Se];return Ye}return he.length=we,he}function et(he){for(var Ie=new Array(he),Ce=0;Ce<he;++Ce)Ie[Ce]=0;return Ie}function ct(he,Ie,Ce){var we=1,Se=0,Fe=0,Ye=0,dt=0,Ge=he.length,rt=le?new Uint16Array(32):et(32);for(Fe=0;Fe<32;++Fe)rt[Fe]=0;for(Fe=Ge;Fe<Ce;++Fe)he[Fe]=0;Ge=he.length;var it=le?new Uint16Array(Ge):et(Ge);for(Fe=0;Fe<Ge;++Fe)rt[Se=he[Fe]]++,we<Se&&(we=Se),it[Fe]=0;for(rt[0]=0,Fe=1;Fe<=we;++Fe)rt[Fe+16]=dt=dt+rt[Fe-1]<<1;for(Fe=0;Fe<Ge;++Fe)dt=he[Fe],dt!=0&&(it[Fe]=rt[dt+16]++);var Ft=0;for(Fe=0;Fe<Ge;++Fe)if(Ft=he[Fe],Ft!=0)for(dt=ae(it[Fe],we)>>we-Ft,Ye=(1<<we+4-Ft)-1;Ye>=0;--Ye)Ie[dt|Ye<<Ft]=Ft&15|Fe<<4;return we}var gt=le?new Uint16Array(512):et(512),It=le?new Uint16Array(32):et(32);if(!le){for(var Mt=0;Mt<512;++Mt)gt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var he=[],Ie=0;Ie<32;Ie++)he.push(5);ct(he,It,32);var Ce=[];for(Ie=0;Ie<=143;Ie++)Ce.push(8);for(;Ie<=255;Ie++)Ce.push(9);for(;Ie<=279;Ie++)Ce.push(7);for(;Ie<=287;Ie++)Ce.push(8);ct(Ce,gt,288)})();var Pt=function(){for(var Ie=le?new Uint8Array(32768):[],Ce=0,we=0;Ce<oe.length-1;++Ce)for(;we<oe[Ce+1];++we)Ie[we]=Ce;for(;we<32768;++we)Ie[we]=29;var Se=le?new Uint8Array(259):[];for(Ce=0,we=0;Ce<re.length-1;++Ce)for(;we<re[Ce+1];++we)Se[we]=Ce;function Fe(dt,Ge){for(var rt=0;rt<dt.length;){var it=Math.min(65535,dt.length-rt),Ft=rt+it==dt.length;for(Ge.write_shift(1,+Ft),Ge.write_shift(2,it),Ge.write_shift(2,~it&65535);it-- >0;)Ge[Ge.l++]=dt[rt++]}return Ge.l}function Ye(dt,Ge){for(var rt=0,it=0,Ft=le?new Uint16Array(32768):[];it<dt.length;){var zt=Math.min(65535,dt.length-it);if(zt<10){for(rt=We(Ge,rt,+(it+zt==dt.length)),rt&7&&(rt+=8-(rt&7)),Ge.l=rt/8|0,Ge.write_shift(2,zt),Ge.write_shift(2,~zt&65535);zt-- >0;)Ge[Ge.l++]=dt[it++];rt=Ge.l*8;continue}rt=We(Ge,rt,+(it+zt==dt.length)+2);for(var Jt=0;zt-- >0;){var Ht=dt[it];Jt=(Jt<<5^Ht)&32767;var Gt=-1,kr=0;if((Gt=Ft[Jt])&&(Gt|=it&-32768,Gt>it&&(Gt-=32768),Gt<it))for(;dt[Gt+kr]==dt[it+kr]&&kr<250;)++kr;if(kr>2){Ht=Se[kr],Ht<=22?rt=Oe(Ge,rt,ue[Ht+1]>>1)-1:(Oe(Ge,rt,3),rt+=5,Oe(Ge,rt,ue[Ht-23]>>5),rt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re(Ge,rt,kr-re[Ht]),rt+=sn),Ht=Ie[it-Gt],rt=Oe(Ge,rt,ue[Ht]>>3),rt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re(Ge,rt,it-Gt-oe[Ht]),rt+=on);for(var An=0;An<kr;++An)Ft[Jt]=it&32767,Jt=(Jt<<5^dt[it])&32767,++it;zt-=kr-1}else Ht<=143?Ht=Ht+48:rt=xe(Ge,rt,1),rt=Oe(Ge,rt,ue[Ht]),Ft[Jt]=it&32767,++it}rt=Oe(Ge,rt,0)-1}return Ge.l=(rt+7)/8|0,Ge.l}return function(Ge,rt){return Ge.length<8?Fe(Ge,rt):Ye(Ge,rt)}}();function Qt(he){var Ie=Ct(50+Math.floor(he.length*1.1)),Ce=Pt(he,Ie);return Ie.slice(0,Ce)}var wt=le?new Uint16Array(32768):et(32768),Br=le?new Uint16Array(32768):et(32768),tr=le?new Uint16Array(128):et(128),an=1,Sr=1;function $r(he,Ie){var Ce=me(he,Ie)+257;Ie+=5;var we=me(he,Ie)+1;Ie+=5;var Se=_e(he,Ie)+4;Ie+=4;for(var Fe=0,Ye=le?new Uint8Array(19):et(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,rt=le?new Uint8Array(8):et(8),it=le?new Uint8Array(8):et(8),Ft=Ye.length,zt=0;zt<Se;++zt)Ye[J[zt]]=Fe=je(he,Ie),Ge<Fe&&(Ge=Fe),rt[Fe]++,Ie+=3;var Jt=0;for(rt[0]=0,zt=1;zt<=Ge;++zt)it[zt]=Jt=Jt+rt[zt-1]<<1;for(zt=0;zt<Ft;++zt)(Jt=Ye[zt])!=0&&(dt[zt]=it[Jt]++);var Ht=0;for(zt=0;zt<Ft;++zt)if(Ht=Ye[zt],Ht!=0){Jt=ue[dt[zt]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)tr[Jt|Gt<<Ht]=Ht&7|zt<<3}var kr=[];for(Ge=1;kr.length<Ce+we;)switch(Jt=tr[Te(he,Ie)],Ie+=Jt&7,Jt>>>=3){case 16:for(Fe=3+Ne(he,Ie),Ie+=2,Jt=kr[kr.length-1];Fe-- >0;)kr.push(Jt);break;case 17:for(Fe=3+je(he,Ie),Ie+=3;Fe-- >0;)kr.push(0);break;case 18:for(Fe=11+Te(he,Ie),Ie+=7;Fe-- >0;)kr.push(0);break;default:kr.push(Jt),Ge<Jt&&(Ge=Jt);break}var sn=kr.slice(0,Ce),on=kr.slice(Ce);for(zt=Ce;zt<286;++zt)sn[zt]=0;for(zt=we;zt<30;++zt)on[zt]=0;return an=ct(sn,wt,286),Sr=ct(on,Br,30),Ie}function In(he,Ie){if(he[0]==3&&!(he[1]&3))return[jm(Ie),2];for(var Ce=0,we=0,Se=VH(Ie||1<<18),Fe=0,Ye=Se.length>>>0,dt=0,Ge=0;(we&1)==0;){if(we=je(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,Ge=5):(Ce=$r(he,Ce),dt=an,Ge=Sr);else{Ce&7&&(Ce+=8-(Ce&7));var rt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,rt>0)for(!Ie&&Ye<Fe+rt&&(Se=$e(Se,Fe+rt),Ye=Se.length);rt-- >0;)Se[Fe++]=he[Ce>>>3],Ce+=8;continue}for(;;){!Ie&&Ye<Fe+32767&&(Se=$e(Se,Fe+32767),Ye=Se.length);var it=Le(he,Ce,dt),Ft=we>>>1==1?gt[it]:wt[it];if(Ce+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Se[Fe++]=Ft;else{if(Ft==256)break;Ft-=257;var zt=Ft<8?0:Ft-4>>2;zt>5&&(zt=0);var Jt=Fe+re[Ft];zt>0&&(Jt+=Le(he,Ce,zt),Ce+=zt),it=Le(he,Ce,Ge),Ft=we>>>1==1?It[it]:Br[it],Ce+=Ft&15,Ft>>>=4;var Ht=Ft<4?0:Ft-2>>1,Gt=oe[Ft];for(Ht>0&&(Gt+=Le(he,Ce,Ht),Ce+=Ht),!Ie&&Ye<Jt&&(Se=$e(Se,Jt+100),Ye=Se.length);Fe<Jt;)Se[Fe]=Se[Fe-Gt],++Fe}}}return Ie?[Se,Ce+7>>>3]:[Se.slice(0,Fe),Ce+7>>>3]}function Pr(he,Ie){var Ce=he.slice(he.l||0),we=In(Ce,Ie);return he.l+=we[1],we[0]}function fs(he,Ie){if(he)typeof console<"u"&&console.error(Ie);else throw new Error(Ie)}function mn(he,Ie){var Ce=he;wo(Ce,0);var we=[],Se=[],Fe={FileIndex:we,FullPaths:Se};E(Fe,{root:Ie.root});for(var Ye=Ce.length-4;(Ce[Ye]!=80||Ce[Ye+1]!=75||Ce[Ye+2]!=5||Ce[Ye+3]!=6)&&Ye>=0;)--Ye;Ce.l=Ye+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var Ge=Ce.read_shift(4);for(Ce.l=Ge,Ye=0;Ye<dt;++Ye){Ce.l+=20;var rt=Ce.read_shift(4),it=Ce.read_shift(4),Ft=Ce.read_shift(2),zt=Ce.read_shift(2),Jt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),Gt=l(Ce.slice(Ce.l+Ft,Ce.l+Ft+zt));Ce.l+=Ft+zt+Jt;var kr=Ce.l;Ce.l=Ht+4,la(Ce,rt,it,Fe,Gt),Ce.l=kr}return Fe}function la(he,Ie,Ce,we,Se){he.l+=2;var Fe=he.read_shift(2),Ye=he.read_shift(2),dt=i(he);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=he.read_shift(4),rt=he.read_shift(4),it=he.read_shift(4),Ft=he.read_shift(2),zt=he.read_shift(2),Jt="",Ht=0;Ht<Ft;++Ht)Jt+=String.fromCharCode(he[he.l++]);if(zt){var Gt=l(he.slice(he.l,he.l+zt));(Gt[21589]||{}).mt&&(dt=Gt[21589].mt),((Se||{})[21589]||{}).mt&&(dt=Se[21589].mt)}he.l+=zt;var kr=he.slice(he.l,he.l+rt);switch(Ye){case 8:kr=U(he,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var sn=!1;Fe&8&&(Ge=he.read_shift(4),Ge==134695760&&(Ge=he.read_shift(4),sn=!0),rt=he.read_shift(4),it=he.read_shift(4)),rt!=Ie&&fs(sn,"Bad compressed size: "+Ie+" != "+rt),it!=Ce&&fs(sn,"Bad uncompressed size: "+Ce+" != "+it),xr(we,Jt,kr,{unsafe:!0,mt:dt})}function ja(he,Ie){var Ce=Ie||{},we=[],Se=[],Fe=Ct(1),Ye=Ce.compression?8:0,dt=0,Ge=0,rt=0,it=0,Ft=0,zt=he.FullPaths[0],Jt=zt,Ht=he.FileIndex[0],Gt=[],kr=0;for(Ge=1;Ge<he.FullPaths.length;++Ge)if(Jt=he.FullPaths[Ge].slice(zt.length),Ht=he.FileIndex[Ge],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=it,on=Ct(Jt.length);for(rt=0;rt<Jt.length;++rt)on.write_shift(1,Jt.charCodeAt(rt)&127);on=on.slice(0,on.l),Gt[Ft]=P5e.buf(Ht.content,0);var An=Ht.content;Ye==8&&(An=z(An)),Fe=Ct(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,dt),Fe.write_shift(2,Ye),Ht.mt?s(Fe,Ht.mt):Fe.write_shift(4,0),Fe.write_shift(-4,Gt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,Ht.content.length),Fe.write_shift(2,on.length),Fe.write_shift(2,0),it+=Fe.length,we.push(Fe),it+=on.length,we.push(on),it+=An.length,we.push(An),Fe=Ct(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,dt),Fe.write_shift(2,Ye),Fe.write_shift(4,0),Fe.write_shift(-4,Gt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,Ht.content.length),Fe.write_shift(2,on.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,sn),kr+=Fe.l,Se.push(Fe),kr+=on.length,Se.push(on),++Ft}return Fe=Ct(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,Ft),Fe.write_shift(2,Ft),Fe.write_shift(4,kr),Fe.write_shift(4,it),Fe.write_shift(2,0),eo([eo(we),eo(Se),Fe])}var rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(he,Ie){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&rn[we[1]]||Ie&&(we=(Ce=Ie).match(/[\.\\]([^\.\\])+$/),we&&rn[we[1]])?rn[we[1]]:"application/octet-stream"}function Ze(he){for(var Ie=n2(he),Ce=[],we=0;we<Ie.length;we+=76)Ce.push(Ie.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function mt(he){var Ie=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var it=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Ie=Ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ie.charAt(0)==`
`&&(Ie="=0D"+Ie.slice(1)),Ie=Ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=Ie.split(`\r
`),Se=0;Se<we.length;++Se){var Fe=we[Se];if(Fe.length==0){Ce.push("");continue}for(var Ye=0;Ye<Fe.length;){var dt=76,Ge=Fe.slice(Ye,Ye+dt);Ge.charAt(dt-1)=="="?dt--:Ge.charAt(dt-2)=="="?dt-=2:Ge.charAt(dt-3)=="="&&(dt-=3),Ge=Fe.slice(Ye,Ye+dt),Ye+=dt,Ye<Fe.length&&(Ge+="="),Ce.push(Ge)}}return Ce.join(`\r
`)}function Je(he){for(var Ie=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];Ie.push(we)}for(var Se=0;Se<Ie.length;++Se)Ie[Se]=Ie[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return Mc(Ie.join(`\r
`))}function xt(he,Ie,Ce){for(var we="",Se="",Fe="",Ye,dt=0;dt<10;++dt){var Ge=Ie[dt];if(!Ge||Ge.match(/^\s*$/))break;var rt=Ge.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":we=rt[2].trim();break;case"content-type":Fe=rt[2].trim();break;case"content-transfer-encoding":Se=rt[2].trim();break}}switch(++dt,Se.toLowerCase()){case"base64":Ye=Mc(Kc(Ie.slice(dt).join("")));break;case"quoted-printable":Ye=Je(Ie.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var it=xr(he,we.slice(Ce.length),Ye,{unsafe:!0});Fe&&(it.ctype=Fe)}function Et(he,Ie){if(X(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Ie&&Ie.root||"",we=(xn&&Buffer.isBuffer(he)?he.toString("binary"):X(he)).split(`\r
`),Se=0,Fe="";for(Se=0;Se<we.length;++Se)if(Fe=we[Se],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),Ce||(Ce=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),Fe.slice(0,Ce.length)!=Ce););var Ye=(we[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var dt="--"+(Ye[1]||""),Ge=[],rt=[],it={FileIndex:Ge,FullPaths:rt};E(it);var Ft,zt=0;for(Se=0;Se<we.length;++Se){var Jt=we[Se];Jt!==dt&&Jt!==dt+"--"||(zt++&&xt(it,we.slice(Ft,Se),Ce),Ft=Se)}return it}function bt(he,Ie){var Ce=Ie||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Fe=he.FullPaths[0],Ye=Fe,dt=he.FileIndex[0],Ge=1;Ge<he.FullPaths.length;++Ge)if(Ye=he.FullPaths[Ge].slice(Fe.length),dt=he.FileIndex[Ge],!(!dt.size||!dt.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(kr){return"_x"+kr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(kr){return"_u"+kr.charCodeAt(0).toString(16)+"_"});for(var rt=dt.content,it=xn&&Buffer.isBuffer(rt)?rt.toString("binary"):X(rt),Ft=0,zt=Math.min(1024,it.length),Jt=0,Ht=0;Ht<=zt;++Ht)(Jt=it.charCodeAt(Ht))>=32&&Jt<128&&++Ft;var Gt=Ft>=zt*4/5;Se.push(we),Se.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ye),Se.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Se.push("Content-Type: "+gr(dt,Ye)),Se.push(""),Se.push(Gt?mt(it):Ze(it))}return Se.push(we+`--\r
`),Se.join(`\r
`)}function nr(he){var Ie={};return E(Ie,he),Ie}function xr(he,Ie,Ce,we){var Se=we&&we.unsafe;Se||E(he);var Fe=!Se&&_r.find(he,Ie);if(!Fe){var Ye=he.FullPaths[0];Ie.slice(0,Ye.length)==Ye?Ye=Ie:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Ie).replace("//","/")),Fe={name:a(Ie),type:2},he.FileIndex.push(Fe),he.FullPaths.push(Ye),Se||_r.utils.cfb_gc(he)}return Fe.content=Ce,Fe.size=Ce?Ce.length:0,we&&(we.CLSID&&(Fe.clsid=we.CLSID),we.mt&&(Fe.mt=we.mt),we.ct&&(Fe.ct=we.ct)),Fe}function Wr(he,Ie){E(he);var Ce=_r.find(he,Ie);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function Zr(he,Ie,Ce){E(he);var we=_r.find(he,Ie);if(we){for(var Se=0;Se<he.FileIndex.length;++Se)if(he.FileIndex[Se]==we)return he.FileIndex[Se].name=a(Ce),he.FullPaths[Se]=Ce,!0}return!1}function qr(he){B(he,!0)}return t.find=P,t.read=I,t.parse=d,t.write=Z,t.writeFile=K,t.utils={cfb_new:nr,cfb_add:xr,cfb_del:Wr,cfb_mov:Zr,cfb_gc:qr,ReadShift:yw,CheckField:Nre,prep_blob:wo,bconcat:eo,use_zlib:D,_deflateRaw:Qt,_inflateRaw:Pr,consts:q},t}();function R5e(e){return typeof e=="string"?rk(e):Array.isArray(e)?c5e(e):e}function oE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=rk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?$A(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([R5e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Gm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function L5e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Os(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function YH(e,t){for(var r=[],n=Os(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function ak(e){for(var t=[],r=Os(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function sk(e){for(var t=[],r=Os(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function M5e(e){for(var t=[],r=Os(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Q_=new Date(1899,11,30,0,0,0);function Oi(e,t){var r=e.getTime(),n=Q_.getTime()+(e.getTimezoneOffset()-Q_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var are=new Date,U5e=Q_.getTime()+(are.getTimezoneOffset()-Q_.getTimezoneOffset())*6e4,JH=are.getTimezoneOffset();function ik(e){var t=new Date;return t.setTime(e*24*60*60*1e3+U5e),t.getTimezoneOffset()!==JH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-JH)*6e4),t}function Q5e(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var ZH=new Date("2017-02-19T19:06:09.000Z"),sre=isNaN(ZH.getFullYear())?new Date("2/19/17"):ZH,H5e=sre.getFullYear()==2017;function Ha(e,t){var r=new Date(e);if(H5e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(sre.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Cg(e,t){if(xn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return $A(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return $A(Gte(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return $A(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return $A(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function Ss(e,t){for(var r="";r.length<t;)r+=e;return r}function Md(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var V5e=["january","february","march","april","may","june","july","august","september","october","november","december"];function f1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&V5e.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var z5e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function ire(e){return e?e.content&&e.type?Cg(e.content,!0):e.data?Wy(e.data):e.asNodeBuffer&&xn?Wy(e.asNodeBuffer().toString("binary")):e.asBinary?Wy(e.asBinary()):e._data&&e._data.getContent?Wy(Cg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function ore(e){if(!e)return null;if(e.data)return QH(e.data);if(e.asNodeBuffer&&xn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?QH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function $5e(e){return e&&e.name.slice(-4)===".bin"?ore(e):ire(e)}function Iu(e,t){for(var r=e.FullPaths||Os(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function jR(e,t){var r=Iu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ai(e,t,r){if(!r)return $5e(jR(e,t));if(!t)return null;try{return Ai(e,t)}catch{return null}}function Uc(e,t,r){if(!r)return ire(jR(e,t));if(!t)return null;try{return Uc(e,t)}catch{return null}}function G5e(e,t,r){return ore(jR(e,t))}function eV(e){for(var t=e.FullPaths||Os(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return xn?n=Hh(r):n=u5e(r),_r.utils.cfb_add(e,t,n)}_r.utils.cfb_add(e,t,r)}else e.file(t,r)}function BR(){return _r.utils.cfb_new()}function lre(e,t){switch(t.type){case"base64":return _r.read(e,{type:"base64"});case"binary":return _r.read(e,{type:"binary"});case"buffer":case"array":return _r.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Yy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ti=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,K5e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,q5e=/<[^>]*>/g,cl=ti.match(tV)?tV:q5e,W5e=/<\w*:/,X5e=/<(\/?)\w+:/;function Kr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(K5e),l=0,c="",u=0,d="",A="",h=1;if(i)for(u=0;u!=i.length;++u){for(A=i[u],s=0;s!=A.length&&A.charCodeAt(s)!==61;++s);for(d=A.slice(0,s).trim();A.charCodeAt(s+1)==32;)++s;for(h=(a=A.charCodeAt(s+1))==34||a==39?1:0,c=A.slice(s+1+h,A.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function uf(e){return e.replace(X5e,"<$1")}var cre={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},TR=ak(cre),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return cre[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),IR=/[&<>'"]/g,Y5e=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(IR,function(r){return TR[r]}).replace(Y5e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function rV(e){return pa(e).replace(/ /g,"_x0020_")}var ure=/[\u0000-\u001f]/g;function FR(e){var t=e+"";return t.replace(IR,function(r){return TR[r]}).replace(/\n/g,"<br/>").replace(ure,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function J5e(e){var t=e+"";return t.replace(IR,function(r){return TR[r]}).replace(ure,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var nV=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Z5e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function EB(e){for(var t="",r=0,n=0,a=0,s=0,i=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function aV(e){var t=jm(2*e.length),r,n,a=1,s=0,i=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function sV(e){return Hh(e,"binary").toString("utf8")}var tN="foo bar bazâð£",Ea=xn&&(sV(tN)==EB(tN)&&sV||aV(tN)==EB(tN)&&aV)||EB,$A=xn?function(e){return Hh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},s2=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),dre=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),e_e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),t_e=/<\/?(?:vt:)?variant>/g,r_e=/<(?:vt:)([^>]*)>([\s\S]*)</;function iV(e,t){var r=Kr(e),n=e.match(e_e(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(t_e,"").match(r_e);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var Are=/(^\s|\s$|\n)/;function Eo(e,t){return"<"+e+(t.match(Are)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function i2(e){return Os(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?i2(r):"")+(t!=null?(t.match(Are)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function jF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function n_e(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",jF(e));throw new Error("Unable to serialize "+e)}function OR(e){if(xn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Gm(_R(e)));throw new Error("Bad input format: expected Buffer or string")}var o2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Dc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function a_e(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function s_e(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var oV=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},lV=xn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Hh(t)})):oV(e)}:oV,cV=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(ah(e,a)));return n.join("").replace(Sl,"")},DR=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Sl,""):cV(e,t,r)}:cV,uV=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},fre=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):uV(e,t,r)}:uV,dV=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(fv(e,a)));return n.join("")},lE=xn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):dV(t,r,n)}:dV,hre=function(e,t){var r=Pc(e,t);return r>0?lE(e,t+4,t+4+r-1):""},mre=hre,pre=function(e,t){var r=Pc(e,t);return r>0?lE(e,t+4,t+4+r-1):""},gre=pre,xre=function(e,t){var r=2*Pc(e,t);return r>0?lE(e,t+4,t+4+r-1):""},vre=xre,bre=function(t,r){var n=Pc(t,r);return n>0?DR(t,r+4,r+4+n):""},yre=bre,wre=function(e,t){var r=Pc(e,t);return r>0?lE(e,t+4,t+4+r):""},Ere=wre,Cre=function(e,t){return a_e(e,t)},H_=Cre,PR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};xn&&(mre=function(t,r){if(!Buffer.isBuffer(t))return hre(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},gre=function(t,r){if(!Buffer.isBuffer(t))return pre(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},vre=function(t,r){if(!Buffer.isBuffer(t))return xre(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},yre=function(t,r){if(!Buffer.isBuffer(t))return bre(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Ere=function(t,r){if(!Buffer.isBuffer(t))return wre(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},H_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Cre(t,r)},PR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var fv=function(e,t){return e[t]},ah=function(e,t){return e[t+1]*256+e[t]},i_e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Pc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Lp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},o_e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function yw(e,t){var r="",n,a,s=[],i,l,c,u;switch(t){case"dbcs":if(u=this.l,xn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(ah(this,u)),u+=2;e*=2;break;case"utf8":r=lE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=DR(this,this.l,this.l+e);break;case"wstr":return yw.call(this,e,"dbcs");case"lpstr-ansi":r=mre(this,this.l),e=4+Pc(this,this.l);break;case"lpstr-cp":r=gre(this,this.l),e=4+Pc(this,this.l);break;case"lpwstr":r=vre(this,this.l),e=4+2*Pc(this,this.l);break;case"lpp4":e=4+Pc(this,this.l),r=yre(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Pc(this,this.l),r=Ere(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=fv(this,this.l+e++))!==0;)s.push(eN(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=ah(this,this.l+e))!==0;)s.push(eN(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=fv(this,u),this.l=u+1,l=yw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(eN(ah(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=fv(this,u),this.l=u+1,l=yw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(eN(fv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=fv(this,this.l),this.l++,n;case 2:return n=(t==="i"?i_e:ah)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Lp:o_e)(this,this.l),this.l+=4,n):(a=Pc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=H_(this,this.l):a=H_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=fre(this,this.l,e);break}}return this.l+=e,r}var l_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},c_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},u_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function d_e(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)u_e(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,l_e(this,t,this.l);break;case 8:if(n=8,r==="f"){s_e(this,t,this.l);break}case 16:break;case-4:n=4,c_e(this,t,this.l);break}return this.l+=n,this}function Nre(e,t){var r=fre(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function wo(e,t){e.l=t,e.read_shift=yw,e.chk=Nre,e.write_shift=d_e}function ol(e,t){e.l+=t}function Ct(e){var t=jm(e);return wo(t,0),t}function Vh(e,t,r){if(e){var n,a,s;wo(e,e.l||0);for(var i=e.length,l=0,c=0;e.l<i;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=f2[l]||f2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function sc(){var e=[],t=xn?256:2048,r=function(u){var d=Ct(u);return wo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),eo(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=f2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&PR(r)&&e.push(r)}}function ww(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function AV(e,t,r){var n=Va(e);return n.s=ww(n.s,t.s,r),n.e=ww(n.e,t.s,r),n}function Ew(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=h_e(r)),!e.rRel&&e.rRel!=null&&(r=A_e(r)),r}function CB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Js(e.s.r)+":"+(e.e.rRel?"":"$")+Js(e.e.r):Ew(e.s,t.biff)+":"+Ew(e.e,t.biff)}function RR(e){return parseInt(f_e(e),10)-1}function Js(e){return""+(e+1)}function A_e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function f_e(e){return e.replace(/\$(\d+)$/,"$1")}function LR(e){for(var t=m_e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function h_e(e){return e.replace(/^([A-Z])/,"$$$1")}function m_e(e){return e.replace(/^\$([A-Z])/,"$1")}function p_e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function oc(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function fV(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ku(e.z,r?Oi(t):t)}catch{}try{return e.w=Ku((e.XF||{}).numFmtId||(r?14:0),r?Oi(t):t)}catch{return""+t}}function Sh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?zh[e.v]||e.v:t==null?fV(e,e.v):fV(e,t))}function Km(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function _re(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var A=0;A!=t.length;++A)if(t[A]){if(!Array.isArray(t[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[A].length;++h)if(!(typeof t[A][h]>"u")){var m={v:t[A][h]},g=i+A,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[A][h]&&typeof t[A][h]=="object"&&!Array.isArray(t[A][h])&&!(t[A][h]instanceof Date))m=t[A][h];else if(Array.isArray(m.v)&&(m.f=t[A][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Mr[14],n.cellDates?(m.t="d",m.w=Ku(m.z,Oi(m.v))):(m.t="n",m.v=Oi(m.v),m.w=Ku(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Hr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function sb(e,t){return _re(null,e,t)}function g_e(e){return e.read_shift(4,"i")}function Ud(e,t){return t||(t=Ct(4)),t.write_shift(4,e),t}function sl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function to(e,t){var r=!1;return t==null&&(r=!0,t=Ct(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function x_e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function v_e(e,t){return t||(t=Ct(4)),t.write_shift(2,0),t.write_shift(2,0),t}function MR(e,t){var r=e.l,n=e.read_shift(1),a=sl(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(x_e(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function b_e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(15+4*e.t.length)),t.write_shift(1,0),to(e.t,t),r?t.slice(0,t.l):t}var y_e=MR;function w_e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(23+4*e.t.length)),t.write_shift(1,1),to(e.t,t),t.write_shift(4,1),v_e({},t),r?t.slice(0,t.l):t}function Xu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Wg(e,t){return t==null&&(t=Ct(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Xg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Yg(e,t){return t==null&&(t=Ct(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var E_e=sl,Sre=to;function UR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function V_(e,t){var r=!1;return t==null&&(r=!0,t=Ct(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var C_e=sl,BF=UR,QR=V_;function HR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?H_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Lp(t,0)>>2;return r?a/100:a}function kre(e,t){t==null&&(t=Ct(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function jre(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function N_e(e,t){return t||(t=Ct(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Jg=jre,ib=N_e;function tl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ng(e,t){return(t||Ct(8)).write_shift(8,e,"f")}function __e(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=tg[a];u&&(t.rgb=c2(u));break;case 2:t.rgb=c2([i,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function z_(e,t){if(t||(t=Ct(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function S_e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function k_e(e,t){t||(t=Ct(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Bre(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function j_e(e){return Bre(e,1)}function B_e(e){return Bre(e,2)}var VR=2,Kl=3,rN=11,hV=12,$_=19,nN=64,T_e=65,I_e=71,F_e=4108,O_e=4126,Xi=80,Tre=81,D_e=[Xi,Tre],TF={1:{n:"CodePage",t:VR},2:{n:"Category",t:Xi},3:{n:"PresentationFormat",t:Xi},4:{n:"ByteCount",t:Kl},5:{n:"LineCount",t:Kl},6:{n:"ParagraphCount",t:Kl},7:{n:"SlideCount",t:Kl},8:{n:"NoteCount",t:Kl},9:{n:"HiddenCount",t:Kl},10:{n:"MultimediaClipCount",t:Kl},11:{n:"ScaleCrop",t:rN},12:{n:"HeadingPairs",t:F_e},13:{n:"TitlesOfParts",t:O_e},14:{n:"Manager",t:Xi},15:{n:"Company",t:Xi},16:{n:"LinksUpToDate",t:rN},17:{n:"CharacterCount",t:Kl},19:{n:"SharedDoc",t:rN},22:{n:"HyperlinksChanged",t:rN},23:{n:"AppVersion",t:Kl,p:"version"},24:{n:"DigSig",t:T_e},26:{n:"ContentType",t:Xi},27:{n:"ContentStatus",t:Xi},28:{n:"Language",t:Xi},29:{n:"Version",t:Xi},255:{},2147483648:{n:"Locale",t:$_},2147483651:{n:"Behavior",t:$_},1919054434:{}},IF={1:{n:"CodePage",t:VR},2:{n:"Title",t:Xi},3:{n:"Subject",t:Xi},4:{n:"Author",t:Xi},5:{n:"Keywords",t:Xi},6:{n:"Comments",t:Xi},7:{n:"Template",t:Xi},8:{n:"LastAuthor",t:Xi},9:{n:"RevNumber",t:Xi},10:{n:"EditTime",t:nN},11:{n:"LastPrinted",t:nN},12:{n:"CreatedDate",t:nN},13:{n:"ModifiedDate",t:nN},14:{n:"PageCount",t:Kl},15:{n:"WordCount",t:Kl},16:{n:"CharCount",t:Kl},17:{n:"Thumbnail",t:I_e},18:{n:"Application",t:Xi},19:{n:"DocSecurity",t:Kl},255:{},2147483648:{n:"Locale",t:$_},2147483651:{n:"Behavior",t:$_},1919054434:{}},mV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},P_e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function R_e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var L_e=R_e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),tg=Va(L_e),zh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ire={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},FF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},aN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function zR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function M_e(e){var t=zR();if(!e||!e.match)return t;var r={};if((e.match(cl)||[]).forEach(function(n){var a=Kr(n);switch(a[0].replace(W5e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[FF[a.ContentType]]!==void 0&&t[FF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Fre(e,t){var r=M5e(FF),n=[],a;n[n.length]=ti,n[n.length]=Kt("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:aN[c][t.bookType]||aN[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:aN[c][t.bookType]||aN[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function l2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Cw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(cl)||[]).forEach(function(a){var s=Kr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Yy(s.Target,t);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Uv(e){var t=[ti,Kt("Relationships",null,{xmlns:Bi.RELS})];return Os(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var U_e="application/vnd.oasis.opendocument.spreadsheet";function Q_e(e,t){for(var r=OR(e),n,a;n=o2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Kr(n[0],!1),a.path=="/"&&a.type!==U_e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function H_e(e){var t=[ti];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function pV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function V_e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function z_e(e){var t=[ti];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(pV(e[r][0],e[r][1])),t.push(V_e("",e[r][0]));return t.push(pV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Ore(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+R_.version+"</meta:generator></office:meta></office:document-meta>"}var Gu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],$_e=function(){for(var e=new Array(Gu.length),t=0;t<Gu.length;++t){var r=Gu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Dre(e){var t={};e=Ea(e);for(var r=0;r<Gu.length;++r){var n=Gu[r],a=e.match($_e[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ha(t[n[1]]))}return t}function NB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Kt(e,t,r):Eo(e,t))}function Pre(e,t){var r=t||{},n=[ti,Kt("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&NB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:jF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&NB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:jF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Gu.length;++s){var i=Gu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&NB(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var rg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Rre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Lre(e,t,r,n){var a=[];if(typeof e=="string")a=iV(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?iV(t,n).map(function(d){return d.v}):t,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function G_e(e,t,r){var n={};return t||(t={}),e=Ea(e),rg.forEach(function(a){var s=(e.match(s2(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Lre(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Mre(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=ti,t[t.length]=Kt("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),rg.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var K_e=/<[^>]+>[^<]*/g;function q_e(e,t){var r={},n="",a=e.match(K_e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=Kr(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ha(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Ure(e){var t=[ti,Kt("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!e)return t.join("");var r=1;return Os(e).forEach(function(a){++r,t[t.length]=Kt("property",n_e(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var OF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},_B;function W_e(e,t,r){_B||(_B=ak(OF)),t=_B[t]||t,e[t]=r}function X_e(e,t){var r=[];return Os(OF).map(function(n){for(var a=0;a<Gu.length;++a)if(Gu[a][1]==n)return Gu[a];for(a=0;a<rg.length;++a)if(rg[a][1]==n)return rg[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Eo(OF[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Dc.o})}function Y_e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Os(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Gu.length;++i)if(s==Gu[i][1])return;for(i=0;i<rg.length;++i)if(s==rg[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Kt(rV(s),l,{"dt:dt":c}))}}),t&&Os(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(rV(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Dc.o+'">'+a.join("")+"</"+n+">"}function $R(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function J_e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Ct(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Qre(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Hre(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Vre(e,t,r){return t===31?Hre(e):Qre(e,t,r)}function DF(e,t,r){return Vre(e,t,r===!1?0:4)}function Z_e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Vre(e,t,0)}function eSe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Sl,""),e.l-a&2&&(e.l+=2)}return r}function tSe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Sl,"");return r}function rSe(e){var t=e.l,r=G_(e,Tre);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=G_(e,Kl);return[r,n]}function nSe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(rSe(e));return r}function gV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Sl,"").replace(Xy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function zre(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function aSe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function G_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==hV&&n!==t&&D_e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===hV?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Qre(e,n,4).replace(Sl,"");case 31:return Hre(e);case 64:return $R(e);case 65:return zre(e);case 71:return aSe(e);case 80:return DF(e,n,!s.raw).replace(Sl,"");case 81:return Z_e(e,n).replace(Sl,"");case 4108:return nSe(e);case 4126:case 4127:return n==4127?eSe(e):tSe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function xV(e,t){var r=Ct(4),n=Ct(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ct(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=J_e(t);break;case 31:case 80:for(n=Ct(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return eo([r,n])}function vV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),A=e.read_shift(4);s[i]=[d,A+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var m=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(m=!1,e.l=s[i][1]),m)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=G_(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Id(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(l=h.CodePage=G_(e,VR),Id(l),c!==-1){var x=e.l;e.l=s[c][1],u=gV(e,l),e.l=x}}else if(s[i][0]===0){if(l===0){c=i,e.l=s[i+1][1];continue}u=gV(e,l)}else{var v=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=zre(e);break;case 30:e.l+=4,y=DF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=DF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=zs(e,4);break;case 64:e.l+=4,y=Ha($R(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var $re=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function sSe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function bV(e,t,r){var n=Ct(8),a=[],s=[],i=8,l=0,c=Ct(8),u=Ct(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Ct(8),u.write_shift(4,0),a.unshift(u);var d=[Ct(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var A=e[l][0];for(c=Ct(8+2*(A.length+1)+(A.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,A.length+1),c.write_shift(0,A,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=eo(d),s.unshift(c),i+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!($re.indexOf(e[l][0])>-1||Rre.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=xV(g.t,h)}else{var v=sSe(h);v==-1&&(v=31,h=String(h)),c=xV(v,h)}s.push(c),u=Ct(8),u.write_shift(4,t?m:2+l),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),eo([n].concat(a).concat(s))}function yV(e,t,r){var n=e.content;if(!n)return{};wo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==_r.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var A=vV(n,t),h={SystemIdentifier:u};for(var m in A)h[m]=A[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=vV(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,i],h}function wV(e,t,r,n,a,s){var i=Ct(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,_r.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=bV(e,r,n);if(l.push(c),a){var u=bV(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return eo(l)}function I0(e,t){return e.read_shift(t),null}function iSe(e,t){t||(t=Ct(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function oSe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function zs(e,t){return e.read_shift(t)===1}function vl(e,t){return t||(t=Ct(2)),t.write_shift(2,+!!e),t}function fi(e){return e.read_shift(2,"u")}function Ou(e,t){return t||(t=Ct(2)),t.write_shift(2,e),t}function Gre(e,t){return oSe(e,t,fi)}function lSe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Kre(e,t,r){return r||(r=Ct(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function cE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function cSe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function uSe(e){var t=e.t||"",r=Ct(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ct(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return eo(a)}function _g(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function uE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):_g(e,n,r)}function Zg(e,t,r){if(r.biff>5)return uE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function qre(e,t,r){return r||(r=Ct(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function dSe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function ASe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Sl,"");return n&&(e.l+=24),a}function fSe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(Sl,"");return r+i}function hSe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return ASe(e);case"0303000000000000c000000000000046":return fSe(e);default:throw new Error("Unsupported Moniker "+r)}}function sN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Sl,""):"";return r}function EV(e,t){t||(t=Ct(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function mSe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,l,c,u="",d,A;a&16&&(s=sN(e,r-e.l)),a&128&&(i=sN(e,r-e.l)),(a&257)===257&&(l=sN(e,r-e.l)),(a&257)===1&&(c=hSe(e,r-e.l)),a&8&&(u=sN(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(A=$R(e)),e.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),A&&(m.time=A),s&&(m.Tooltip=s),m}function pSe(e){var t=Ct(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),EV(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&EV(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Wre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Xre(e,t){var r=Wre(e);return r[3]=0,r}function df(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Sg(e,t,r,n){return n||(n=Ct(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function gSe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function xSe(e,t,r){return t===0?"":Zg(e,t,r)}function vSe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function Yre(e){var t=e.read_shift(2),r=HR(e);return[t,r]}function bSe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=cE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function ok(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Jre(e,t){return t||(t=Ct(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Zre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var ySe=Zre;function ene(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function wSe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function ESe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Mo(e){e.l+=2,e.l+=e.read_shift(2)}var CSe={0:Mo,4:Mo,5:Mo,6:Mo,7:ESe,8:Mo,9:Mo,10:Mo,11:Mo,12:Mo,13:wSe,14:Mo,15:Mo,16:Mo,17:Mo,18:Mo,19:Mo,20:Mo,21:ene};function NSe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(CSe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function iN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function GR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ct(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function _Se(e,t){return t===0||e.read_shift(2),1200}function SSe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Zg(e,0,r);return e.read_shift(t+n-e.l),a}function kSe(e,t){var r=!t||t.biff==8,n=Ct(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function jSe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function BSe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=cE(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function TSe(e,t){var r=!t||t.biff>=8?2:1,n=Ct(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ISe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(cSe(e));return s.Count=n,s.Unique=a,s}function FSe(e,t){var r=Ct(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=uSe(e[a]);var s=eo([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function OSe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function DSe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function PSe(e){var t=gSe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function RSe(e){return e.read_shift(2),e.read_shift(4)}function CV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function LSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function MSe(){var e=Ct(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function USe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function QSe(e){var t=Ct(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function HSe(){}function VSe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=cE(e,0,r),n}function zSe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Ct(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function $Se(e){var t=df(e);return t.isst=e.read_shift(4),t}function GSe(e,t,r,n){var a=Ct(10);return Sg(e,t,n,a),a.write_shift(4,r),a}function KSe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=df(e);r.biff==2&&e.l++;var s=uE(e,n-e.l,r);return a.val=s,a}function qSe(e,t,r,n,a){var s=!a||a.biff==8,i=Ct(8+ +s+(1+s)*r.length);return Sg(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function WSe(e,t,r){var n=e.read_shift(2),a=Zg(e,0,r);return[n,a]}function XSe(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var YSe=Zg;function NV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:i,c}}}function JSe(e,t){var r=t.biff==8||!t.biff?4:2,n=Ct(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function ZSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=Yre(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function e4e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Yre(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function t4e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function r4e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=P_e[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function n4e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=r4e(e,t,n.fStyle,r),n}function _V(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function a4e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function s4e(e){var t=Ct(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function SV(e,t,r){var n=df(e);(r.biff==2||t==9)&&++e.l;var a=lSe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function i4e(e,t,r,n,a,s){var i=Ct(8);return Sg(e,t,n,i),Kre(r,s,i),i}function o4e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=df(e),a=tl(e);return n.val=a,n}function l4e(e,t,r,n){var a=Ct(14);return Sg(e,t,n,a),Ng(r,a),a}var kV=xSe;function c4e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=_g(e,s),l=[];n>e.l;)l.push(uE(e));return[s,a,i,l]}function jV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=bSe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var u4e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function BV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=_g(e,i,r);a&32&&(u=u4e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var A=n==e.l||l===0||!(d>0)?[]:NBe(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:A}}function tne(e,t,r){if(r.biff<8)return d4e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(vSe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function d4e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=cE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function A4e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=_g(e,n,r),i=_g(e,a,r);return[s,i]}function f4e(e,t,r){var n=Zre(e);e.l++;var a=e.read_shift(1);return t-=8,[_Be(e,t,r),a,n]}function TV(e,t,r){var n=ySe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,EBe(e,t,r)]}function h4e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function m4e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=Zg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,i,s]}}function p4e(e,t,r){return m4e(e,t,r)}function g4e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(ok(e));return r}function x4e(e){var t=Ct(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Jre(e[r],t);return t}function v4e(e,t,r){if(r&&r.biff<8)return y4e(e,t,r);var n=ene(e),a=NSe(e,t-22,n[1]);return{cmo:n,ft:a}}var b4e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function y4e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((b4e[n]||ol)(e,t,r)),{cmo:[a,n,s],ft:i}}function w4e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=dSe(e,6,r);var l=e.read_shift(2);e.read_shift(2),fi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],A=_g(e,e.lens[u+1]-e.lens[u]-1);if(a+=A,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function E4e(e,t){var r=ok(e);e.l+=16;var n=mSe(e,t-24);return[r,n]}function C4e(e){var t=Ct(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return eo([t,pSe(e[1])])}function N4e(e,t){e.read_shift(2);var r=ok(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Sl,""),[r,n]}function _4e(e){var t=e[1].Tooltip,r=Ct(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function S4e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=mV[r]||r,r=e.read_shift(2),t[1]=mV[r]||r,t}function k4e(e){return e||(e=Ct(4)),e.write_shift(2,1),e.write_shift(2,1),e}function j4e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Xre(e));return r}function B4e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Xre(e));return r}function T4e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function rne(e,t,r){if(!r.cellStyles)return ol(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function I4e(e,t){var r=Ct(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function F4e(e,t){var r={};return t<32||(e.l+=16,r.header=tl(e),r.footer=tl(e),e.l+=2),r}function O4e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function D4e(e){for(var t=Ct(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var P4e=df,R4e=Gre,L4e=uE;function M4e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function U4e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=df(e);++e.l;var a=Zg(e,t-7,r);return n.t="str",n.val=a,n}function Q4e(e){var t=df(e);++e.l;var r=tl(e);return t.t="n",t.val=r,t}function H4e(e,t,r){var n=Ct(15);return hE(n,e,t),n.write_shift(8,r,"f"),n}function V4e(e){var t=df(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function z4e(e,t,r){var n=Ct(9);return hE(n,e,t),n.write_shift(2,r),n}function $4e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function G4e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function K4e(e,t,r){var n=e.l+t,a=df(e),s=e.read_shift(2),i=_g(e,s,r);return e.l=n,a.t="str",a.val=i,a}var q4e=[2,3,48,49,131,139,140,245],PF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=ak({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=jm(1);switch(c.type){case"base64":d=Mc(Kc(l));break;case"binary":d=Mc(l);break;case"buffer":case"array":d=l;break}wo(d,0);var A=d.read_shift(1),h=!!(A&136),m=!1,g=!1;switch(A){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var x=0,v=521;A==2&&(x=d.read_shift(2)),d.l+=3,A!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),A!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;A!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],j={},k=Math.min(d.length,A==2?521:v-10-(m?264:0)),I=g?32:11;d.l<k&&d[d.l]!=13;)switch(j={},j.name=r2.utils.decode(w,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,j.type=String.fromCharCode(d.read_shift(1)),A!=2&&!g&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),A==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&_.push(j),A!=2&&(d.l+=g?13:14),j.type){case"B":(!m||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var E=0,S=0;for(u[0]=[],S=0;S!=_.length;++S)u[0][S]=_[S].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],S=0,S=0;S!=_.length;++S){var B=d.slice(d.l,d.l+_[S].len);d.l+=_[S].len,wo(B,0);var R=r2.utils.decode(w,B);switch(_[S].type){case"C":R.trim().length&&(u[E][S]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[E][S]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[E][S]=R;break;case"F":u[E][S]=parseFloat(R.trim());break;case"+":case"I":u[E][S]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[E][S]=!0;break;case"N":case"F":u[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));u[E][S]="##MEMO##"+(g?parseInt(R.trim(),10):B.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[E][S]=+R||0);break;case"@":u[E][S]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][S]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][S]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][S]=-B.read_shift(-8,"f");break;case"B":if(m&&_[S].len==8){u[E][S]=B.read_shift(8,"f");break}case"G":case"P":B.l+=_[S].len;break;case"0":if(_[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[S].type)}}}if(A!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=sb(r(l,u),u);return d["!cols"]=u.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete u.DBF,d}function a(l,c){try{return Km(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&Id(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=sc(),A=W_(l,{header:1,raw:!0,cellDates:!0}),h=A[0],m=A.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var _=Hn(l["!ref"]),j=[],k=[],I=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",S="",B=0,R=[];for(v=0;v<m.length;++v)m[v][x]!=null&&R.push(m[v][x]);if(R.length==0||h[x]==null){j[x]="?";continue}for(v=0;v<R.length;++v){switch(typeof R[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=R[v]instanceof Date?"D":"C";break;default:S="C"}B=Math.max(B,String(R[v]).length),E=E&&E!=S?"C":S}B>250&&(B=250),S=((g[x]||{}).DBF||{}).type,S=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),E=="B"&&S=="N"&&(E="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),k[x]=E=="C"||S=="N"?B:s[E]||0,w+=k[x],j[x]=E}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*y),P.write_shift(2,w),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[$te]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var F=d.next(32),L=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,L,"sbcs"),F.write_shift(1,j[x]=="?"?"C":j[x],"sbcs"),F.write_shift(4,v),F.write_shift(1,k[x]||s[j[x]]||0),F.write_shift(1,I[x]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),v+=k[x]||s[j[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<m.length;++x){var ee=d.next(w);for(ee.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(j[v]){case"L":ee.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":ee.write_shift(8,m[x][v]||0,"f");break;case"N":var V="0";for(typeof m[x][v]=="number"&&(V=m[x][v].toFixed(I[v]||0)),y=0;y<k[v]-V.length;++y)ee.write_shift(1,32);ee.write_shift(1,V,"sbcs");break;case"D":m[x][v]?(ee.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var q=String(m[x][v]!=null?m[x][v]:"").slice(0,k[v]);for(ee.write_shift(1,q,"sbcs"),y=0;y<k[v]-q.length;++y)ee.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),nne=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Os(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?HH(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:HH(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(Kc(h),m);case"binary":return s(h,m);case"buffer":return s(xn&&Buffer.isBuffer(h)?h.toString("binary"):Gm(h),m);case"array":return s(Cg(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,_=[],j=[],k=null,I={},E=[],S=[],B=[],R=0,P;for(+m.codepage>=0&&Id(+m.codepage);y!==g.length;++y){R=0;var F=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=F.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),M=L[0],ee;if(F.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&j.push(F.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,q=!1,K=!1,X=!1,Z=-1,G=-1;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"A":break;case"X":v=parseInt(L[w].slice(1))-1,q=!0;break;case"Y":for(x=parseInt(L[w].slice(1))-1,q||(v=0),P=_.length;P<=x;++P)_[P]=[];break;case"K":ee=L[w].slice(1),ee.charAt(0)==='"'?ee=ee.slice(1,ee.length-1):ee==="TRUE"?ee=!0:ee==="FALSE"?ee=!1:isNaN(Md(ee))?isNaN(f1(ee).getDate())||(ee=Ha(ee)):(ee=Md(ee),k!==null&&nb(k)&&(ee=ik(ee))),V=!0;break;case"E":X=!0;var D=Qv(L[w].slice(1),{r:x,c:v});_[x][v]=[_[x][v],D];break;case"S":K=!0,_[x][v]=[_[x][v],"S5S"];break;case"G":break;case"R":Z=parseInt(L[w].slice(1))-1;break;case"C":G=parseInt(L[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}if(V&&(_[x][v]&&_[x][v].length==2?_[x][v][0]=ee:_[x][v]=ee,k=null),K){if(X)throw new Error("SYLK shared formula cannot have own formula");var U=Z>-1&&_[Z][G];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");_[x][v][1]=yne(U[1],{r:x-Z,c:v-G})}break;case"F":var z=0;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"X":v=parseInt(L[w].slice(1))-1,++z;break;case"Y":for(x=parseInt(L[w].slice(1))-1,P=_.length;P<=x;++P)_[P]=[];break;case"M":R=parseInt(L[w].slice(1))/20;break;case"F":break;case"G":break;case"P":k=j[parseInt(L[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[w].slice(1).split(" "),P=parseInt(B[0],10);P<=parseInt(B[1],10);++P)R=parseInt(B[2],10),S[P-1]=R===0?{hidden:!0}:{wch:R},Bm(S[P-1]);break;case"C":v=parseInt(L[w].slice(1))-1,S[v]||(S[v]={});break;case"R":x=parseInt(L[w].slice(1))-1,E[x]||(E[x]={}),R>0?(E[x].hpt=R,E[x].hpx=m1(R)):R===0&&(E[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}z<1&&(k=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}}return E.length>0&&(I["!rows"]=E),S.length>0&&(I["!cols"]=S),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,I]}function i(h,m){var g=a(h,m),x=g[0],v=g[1],y=sb(x,m);return Os(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return Km(i(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+JR(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=u2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=d2(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*A2(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function A(h,m){var g=["ID;PWXL;N;E"],x=[],v=Hn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var j=v.s.r;j<=v.e.r;++j)for(var k=v.s.c;k<=v.e.c;++k){var I=Hr({r:j,c:k});y=w?(h[j]||[])[k]:h[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,j,k))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:l,to_sheet:i,from_sheet:A}}(),ane=function(){function e(s,i){switch(i.type){case"base64":return t(Kc(s),i);case"binary":return t(s,i);case"buffer":return t(xn&&Buffer.isBuffer(s)?s.toString("binary"):Gm(s),i);case"array":return t(Cg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,A=[];d!==l.length;++d){if(l[d].trim()==="BOT"){A[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){A[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?A[c][u]=!0:x==="FALSE"?A[c][u]=!1:isNaN(Md(g))?isNaN(f1(g).getDate())?A[c][u]=g:A[c][u]=Ha(g):A[c][u]=Md(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),A[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(A=A.slice(0,i.sheetRows)),A}function r(s,i){return sb(e(s,i),i)}function n(s,i){return Km(r(s,i),i)}var a=function(){var s=function(c,u,d,A,h){c.push(u),c.push(d+","+A),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,A){c.push(u+","+d),c.push(u==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(c){var u=[],d=Hn(c["!ref"]),A,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Hr({r:m,c:g});if(A=h?(c[m]||[])[g]:c[x],!A){i(u,1,0,"");continue}switch(A.t){case"n":var v=A.w;!v&&A.v!=null&&(v=A.v),v==null?A.f&&!A.F?i(u,1,0,"="+A.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=Ku(A.z||Mr[14],Oi(Ha(A.v)))),i(u,0,A.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),sne=function(){function e(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(A,h){for(var m=A.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var _=os(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var j=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],j])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(A,h){return sb(r(A,h),h)}function a(A,h){return Km(n(A,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(A){if(!A||!A["!ref"])return"";for(var h=[],m=[],g,x="",v=oc(A["!ref"]),y=Array.isArray(A),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(x=Hr({r:w,c:_}),g=y?(A[w]||[])[_]:A[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var j=Oi(Ha(g.v));m[2]="vtc",m[3]="nd",m[4]=""+j,m[5]=g.w||Ku(g.z||Mr[14],j);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(A){return[s,i,l,i,u(A),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),h1=function(){function e(d,A,h,m,g){g.raw?A[h][m]=d:d===""||(d==="TRUE"?A[h][m]=!0:d==="FALSE"?A[h][m]=!1:isNaN(Md(d))?isNaN(f1(d).getDate())?A[h][m]=d:A[h][m]=Ha(d):A[h][m]=Md(d))}function t(d,A){var h=A||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var _=0;for(e(g[w].slice(0,v).trim(),m,w,_,h),_=1;_<=(g[w].length-v)/10+1;++_)e(g[w].slice(v+(_-1)*10,v+_*10).trim(),m,w,_,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var A={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(A[g]=(A[g]||0)+1);g=[];for(m in A)Object.prototype.hasOwnProperty.call(A,m)&&g.push([A[m],m]);if(!g.length){A=n;for(m in A)Object.prototype.hasOwnProperty.call(A,m)&&g.push([A[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,A){var h=A||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,_=0,j=0,k=m.charCodeAt(0),I=!1,E=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?O5e(h.dateNF):null;function R(){var P=d.slice(_,j),F={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)F.t="z";else if(h.raw)F.t="s",F.v=P;else if(P.trim().length===0)F.t="s",F.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(F.t="s",F.v=P.slice(2,-1).replace(/""/g,'"')):c3e(P)?(F.t="n",F.f=P.slice(1)):(F.t="s",F.v=P);else if(P=="TRUE")F.t="b",F.v=!0;else if(P=="FALSE")F.t="b",F.v=!1;else if(!isNaN(w=Md(P)))F.t="n",h.cellText!==!1&&(F.w=P),F.v=w;else if(!isNaN(f1(P).getDate())||B&&P.match(B)){F.z=h.dateNF||Mr[14];var L=0;B&&P.match(B)&&(P=D5e(P,h.dateNF,P.match(B)||[]),L=1),h.cellDates?(F.t="d",F.v=Ha(P,L)):(F.t="n",F.v=Oi(Ha(P,L))),h.cellText!==!1&&(F.w=Ku(F.z,F.v instanceof Date?Oi(F.v):F.v)),h.cellNF||delete F.z}else F.t="s",F.v=P;if(F.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=F):g[Hr({c:y,r:v})]=F),_=j+1,S=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),E==k)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;j<d.length;++j)switch(E=d.charCodeAt(j)){case 34:S===34&&(I=!I);break;case k:case 10:case 13:if(!I&&R())break e;break}return j-_>0&&R(),g["!ref"]=nn(x),g}function i(d,A){return!(A&&A.PRN)||A.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,A):sb(t(d,A),A)}function l(d,A){var h="",m=A.type=="string"?[0,0,0,0]:iL(d,A);switch(A.type){case"base64":h=Kc(d);break;case"binary":h=d;break;case"buffer":A.codepage==65001?h=d.toString("utf8"):A.codepage&&typeof r2<"u"||(h=xn&&Buffer.isBuffer(d)?d.toString("binary"):Gm(d));break;case"array":h=Cg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+A.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Ea(h.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?h=Ea(h):A.type=="binary"&&typeof r2<"u",h.slice(0,19)=="socialcalc:version:"?sne.to_sheet(A.type=="string"?h:Ea(h),A):i(h,A)}function c(d,A){return Km(l(d,A),A)}function u(d){for(var A=[],h=Hn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=Hr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var _=(m.w||(Sh(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(y===0?" ":""))}A.push(v.join(""))}return A.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function W4e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=nne.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return h1.to_workbook(e,t)}}var ng=function(){function e(D,U,z){if(D){wo(D,D.l||0);for(var J=z.Enum||Z;D.l<D.length;){var re=D.read_shift(2),oe=J[re]||J[65535],se=D.read_shift(2),le=D.l+se,ue=oe.f&&oe.f(D,se,z);if(D.l=le,U(ue,oe,re))return}}}function t(D,U){switch(U.type){case"base64":return r(Mc(Kc(D)),U);case"binary":return r(Mc(D),U);case"buffer":case"array":return r(D,U)}throw"Unsupported type "+U.type}function r(D,U){if(!D)return D;var z=U||{},J=z.dense?[]:{},re="Sheet1",oe="",se=0,le={},ue=[],ke=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Ne=z.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)z.Enum=Z,e(D,function(Te,Le,We){switch(We){case 0:z.vers=Te,Te>=4096&&(z.qpro=!0);break;case 6:ae=Te;break;case 204:Te&&(oe=Te);break;case 222:oe=Te;break;case 15:case 51:z.qpro||(Te[1].v=Te[1].v.slice(1));case 13:case 14:case 16:We==14&&(Te[2]&112)==112&&(Te[2]&15)>1&&(Te[2]&15)<15&&(Te[1].z=z.dateNF||Mr[14],z.cellDates&&(Te[1].t="d",Te[1].v=ik(Te[1].v))),z.qpro&&Te[3]>se&&(J["!ref"]=nn(ae),le[re]=J,ue.push(re),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},se=Te[3],re=oe||"Sheet"+(se+1),oe="");var xe=z.dense?(J[Te[0].r]||[])[Te[0].c]:J[Hr(Te[0])];if(xe){xe.t=Te[1].t,xe.v=Te[1].v,Te[1].z!=null&&(xe.z=Te[1].z),Te[1].f!=null&&(xe.f=Te[1].f);break}z.dense?(J[Te[0].r]||(J[Te[0].r]=[]),J[Te[0].r][Te[0].c]=Te[1]):J[Hr(Te[0])]=Te[1];break}},z);else if(D[2]==26||D[2]==14)z.Enum=G,D[2]==14&&(z.qpro=!0,D.l=0),e(D,function(Te,Le,We){switch(We){case 204:re=Te;break;case 22:Te[1].v=Te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Te[3]>se&&(J["!ref"]=nn(ae),le[re]=J,ue.push(re),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},se=Te[3],re="Sheet"+(se+1)),Ne>0&&Te[0].r>=Ne)break;z.dense?(J[Te[0].r]||(J[Te[0].r]=[]),J[Te[0].r][Te[0].c]=Te[1]):J[Hr(Te[0])]=Te[1],ae.e.c<Te[0].c&&(ae.e.c=Te[0].c),ae.e.r<Te[0].r&&(ae.e.r=Te[0].r);break;case 27:Te[14e3]&&(ke[Te[14e3][0]]=Te[14e3][1]);break;case 1537:ke[Te[0]]=Te[1],Te[0]==se&&(re=Te[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(J["!ref"]=nn(ae),le[oe||re]=J,ue.push(oe||re),!ke.length)return{SheetNames:ue,Sheets:le};for(var je={},_e=[],me=0;me<ke.length;++me)le[ue[me]]?(_e.push(ke[me]||ue[me]),je[ke[me]]=le[ke[me]]||le[ue[me]]):(_e.push(ke[me]),je[ke[me]]={"!ref":"A1"});return{SheetNames:_e,Sheets:je}}function n(D,U){var z=U||{};if(+z.codepage>=0&&Id(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var J=sc(),re=Hn(D["!ref"]),oe=Array.isArray(D),se=[];qt(J,0,s(1030)),qt(J,6,c(re));for(var le=Math.min(re.e.r,8191),ue=re.s.r;ue<=le;++ue)for(var ke=Js(ue),ae=re.s.c;ae<=re.e.c;++ae){ue===re.s.r&&(se[ae]=is(ae));var Ne=se[ae]+ke,je=oe?(D[ue]||[])[ae]:D[Ne];if(!(!je||je.t=="z"))if(je.t=="n")(je.v|0)==je.v&&je.v>=-32768&&je.v<=32767?qt(J,13,m(ue,ae,je.v)):qt(J,14,x(ue,ae,je.v));else{var _e=Sh(je);qt(J,15,A(ue,ae,_e.slice(0,239)))}}return qt(J,1),J.end()}function a(D,U){var z=U||{};if(+z.codepage>=0&&Id(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var J=sc();qt(J,0,i(D));for(var re=0,oe=0;re<D.SheetNames.length;++re)(D.Sheets[D.SheetNames[re]]||{})["!ref"]&&qt(J,27,X(D.SheetNames[re],oe++));var se=0;for(re=0;re<D.SheetNames.length;++re){var le=D.Sheets[D.SheetNames[re]];if(!(!le||!le["!ref"])){for(var ue=Hn(le["!ref"]),ke=Array.isArray(le),ae=[],Ne=Math.min(ue.e.r,8191),je=ue.s.r;je<=Ne;++je)for(var _e=Js(je),me=ue.s.c;me<=ue.e.c;++me){je===ue.s.r&&(ae[me]=is(me));var Te=ae[me]+_e,Le=ke?(le[je]||[])[me]:le[Te];if(!(!Le||Le.t=="z"))if(Le.t=="n")qt(J,23,R(je,me,se,Le.v));else{var We=Sh(Le);qt(J,22,E(je,me,se,We.slice(0,239)))}}++se}}return qt(J,1),J.end()}function s(D){var U=Ct(2);return U.write_shift(2,D),U}function i(D){var U=Ct(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var z=0,J=0,re=0,oe=0;oe<D.SheetNames.length;++oe){var se=D.SheetNames[oe],le=D.Sheets[se];if(!(!le||!le["!ref"])){++re;var ue=oc(le["!ref"]);z<ue.e.r&&(z=ue.e.r),J<ue.e.c&&(J=ue.e.c)}}return z>8191&&(z=8191),U.write_shift(2,z),U.write_shift(1,re),U.write_shift(1,J),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function l(D,U,z){var J={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&z.qpro?(J.s.c=D.read_shift(1),D.l++,J.s.r=D.read_shift(2),J.e.c=D.read_shift(1),D.l++,J.e.r=D.read_shift(2),J):(J.s.c=D.read_shift(2),J.s.r=D.read_shift(2),U==12&&z.qpro&&(D.l+=2),J.e.c=D.read_shift(2),J.e.r=D.read_shift(2),U==12&&z.qpro&&(D.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(D){var U=Ct(8);return U.write_shift(2,D.s.c),U.write_shift(2,D.s.r),U.write_shift(2,D.e.c),U.write_shift(2,D.e.r),U}function u(D,U,z){var J=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(J[0].c=D.read_shift(1),J[3]=D.read_shift(1),J[0].r=D.read_shift(2),D.l+=2):(J[2]=D.read_shift(1),J[0].c=D.read_shift(2),J[0].r=D.read_shift(2)),J}function d(D,U,z){var J=D.l+U,re=u(D,U,z);if(re[1].t="s",z.vers==20768){D.l++;var oe=D.read_shift(1);return re[1].v=D.read_shift(oe,"utf8"),re}return z.qpro&&D.l++,re[1].v=D.read_shift(J-D.l,"cstr"),re}function A(D,U,z){var J=Ct(7+z.length);J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,D),J.write_shift(1,39);for(var re=0;re<J.length;++re){var oe=z.charCodeAt(re);J.write_shift(1,oe>=128?95:oe)}return J.write_shift(1,0),J}function h(D,U,z){var J=u(D,U,z);return J[1].v=D.read_shift(2,"i"),J}function m(D,U,z){var J=Ct(7);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,D),J.write_shift(2,z,"i"),J}function g(D,U,z){var J=u(D,U,z);return J[1].v=D.read_shift(8,"f"),J}function x(D,U,z){var J=Ct(13);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,D),J.write_shift(8,z,"f"),J}function v(D,U,z){var J=D.l+U,re=u(D,U,z);if(re[1].v=D.read_shift(8,"f"),z.qpro)D.l=J;else{var oe=D.read_shift(2);j(D.slice(D.l,D.l+oe),re),D.l+=oe}return re}function y(D,U,z){var J=U&32768;return U&=-32769,U=(J?D:0)+(U>=8192?U-16384:U),(J?"":"$")+(z?is(U):Js(U))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(D,U){wo(D,0);for(var z=[],J=0,re="",oe="",se="",le="";D.l<D.length;){var ue=D[D.l++];switch(ue){case 0:z.push(D.read_shift(8,"f"));break;case 1:oe=y(U[0].c,D.read_shift(2),!0),re=y(U[0].r,D.read_shift(2),!1),z.push(oe+re);break;case 2:{var ke=y(U[0].c,D.read_shift(2),!0),ae=y(U[0].r,D.read_shift(2),!1);oe=y(U[0].c,D.read_shift(2),!0),re=y(U[0].r,D.read_shift(2),!1),z.push(ke+ae+":"+oe+re)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(D.read_shift(2));break;case 6:{for(var Ne="";ue=D[D.l++];)Ne+=String.fromCharCode(ue);z.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:le=z.pop(),se=z.pop(),z.push(["AND","OR"][ue-20]+"("+se+","+le+")");break;default:if(ue<32&&_[ue])le=z.pop(),se=z.pop(),z.push(se+_[ue]+le);else if(w[ue]){if(J=w[ue][1],J==69&&(J=D[D.l++]),J>z.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+z.join("|")+"|");return}var je=z.slice(-J);z.length-=J,z.push(w[ue][0]+"("+je.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}z.length==1?U[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function k(D){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=D.read_shift(2),U[3]=D[D.l++],U[0].c=D[D.l++],U}function I(D,U){var z=k(D);return z[1].t="s",z[1].v=D.read_shift(U-4,"cstr"),z}function E(D,U,z,J){var re=Ct(6+J.length);re.write_shift(2,D),re.write_shift(1,z),re.write_shift(1,U),re.write_shift(1,39);for(var oe=0;oe<J.length;++oe){var se=J.charCodeAt(oe);re.write_shift(1,se>=128?95:se)}return re.write_shift(1,0),re}function S(D,U){var z=k(D);z[1].v=D.read_shift(2);var J=z[1].v>>1;if(z[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return z[1].v=J,z}function B(D,U){var z=k(D),J=D.read_shift(4),re=D.read_shift(4),oe=D.read_shift(2);if(oe==65535)return J===0&&re===3221225472?(z[1].t="e",z[1].v=15):J===0&&re===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var se=oe&32768;return oe=(oe&32767)-16446,z[1].v=(1-se*2)*(re*Math.pow(2,oe+32)+J*Math.pow(2,oe)),z}function R(D,U,z,J){var re=Ct(14);if(re.write_shift(2,D),re.write_shift(1,z),re.write_shift(1,U),J==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var oe=0,se=0,le=0,ue=0;return J<0&&(oe=1,J=-J),se=Math.log2(J)|0,J/=Math.pow(2,se-31),ue=J>>>0,(ue&2147483648)==0&&(J/=2,++se,ue=J>>>0),J-=ue,ue|=2147483648,ue>>>=0,J*=Math.pow(2,32),le=J>>>0,re.write_shift(4,le),re.write_shift(4,ue),se+=16383+(oe?32768:0),re.write_shift(2,se),re}function P(D,U){var z=B(D);return D.l+=U-14,z}function F(D,U){var z=k(D),J=D.read_shift(4);return z[1].v=J>>6,z}function L(D,U){var z=k(D),J=D.read_shift(8,"f");return z[1].v=J,z}function M(D,U){var z=L(D);return D.l+=U-10,z}function ee(D,U){return D[D.l+U-1]==0?D.read_shift(U,"cstr"):""}function V(D,U){var z=D[D.l++];z>U-1&&(z=U-1);for(var J="";J.length<z;)J+=String.fromCharCode(D[D.l++]);return J}function q(D,U,z){if(!(!z.qpro||U<21)){var J=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var re=D.read_shift(U-21,"cstr");return[J,re]}}function K(D,U){for(var z={},J=D.l+U;D.l<J;){var re=D.read_shift(2);if(re==14e3){for(z[re]=[0,""],z[re][0]=D.read_shift(2);D[D.l];)z[re][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return z}function X(D,U){var z=Ct(5+D.length);z.write_shift(2,14e3),z.write_shift(2,U);for(var J=0;J<D.length;++J){var re=D.charCodeAt(J);z[z.l++]=re>127?95:re}return z[z.l++]=0,z}var Z={0:{n:"BOF",f:fi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},G={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function X4e(e){var t={},r=e.match(cl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Kr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=ER[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var Y4e=function(){var e=s2("t"),t=s2("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var l={t:"s",v:Qn(i[1])},c=s.match(t);return c&&(l.s=X4e(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),J4e=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),Z4e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,eke=/<(?:\w+:)?r>/,tke=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function KR(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=FR(n.t))):e.match(eke)&&(n.r=Ea(e),n.t=Qn(Ea((e.replace(tke,"").match(Z4e)||[]).join("").replace(cl,""))),r&&(n.h=J4e(Y4e(n.r)))),n):{t:""}}var rke=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,nke=/<(?:\w+:)?(?:si|sstItem)>/g,ake=/<\/(?:\w+:)?(?:si|sstItem)>/;function ske(e,t){var r=[],n="";if(!e)return r;var a=e.match(rke);if(a){n=a[2].replace(nke,"").split(ake);for(var s=0;s!=n.length;++s){var i=KR(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Kr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var ike=/^\s|\s$|[\t\n\r]/;function ine(e,t){if(!t.bookSST)return"";var r=[ti];r[r.length]=Kt("sst",null,{xmlns:qg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(ike)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function oke(e){return[e.read_shift(4),e.read_shift(4)]}function lke(e,t){var r=[],n=!1;return Vh(e,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function cke(e,t){return t||(t=Ct(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var uke=b_e;function dke(e){var t=sc();Rt(t,159,cke(e));for(var r=0;r<e.length;++r)Rt(t,19,uke(e[r]));return Rt(t,160),t.end()}function one(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function ph(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Ake(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=ph(e,4),t.U=ph(e,4),t.W=ph(e,4),t}function fke(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function hke(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(fke(e));return t}function mke(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function pke(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=ph(e,4),t.U=ph(e,4),t.W=ph(e,4),t}function gke(e){var t=pke(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function lne(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function cne(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function xke(e){var t=ph(e);switch(t.Minor){case 2:return[t.Minor,vke(e)];case 3:return[t.Minor,bke()];case 4:return[t.Minor,yke(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function vke(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=lne(e,r),a=cne(e,e.length-e.l);return{t:"Std",h:n,v:a}}function bke(){throw new Error("File is password-protected: ECMA-376 Extensible")}function yke(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(cl,function(s){var i=Kr(s);switch(uf(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function wke(e,t){var r={},n=r.EncryptionVersionInfo=ph(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=lne(e,a),t-=a,r.EncryptionVerifier=cne(e,t),r}function Eke(e){var t={},r=t.EncryptionVersionInfo=ph(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function qR(e){var t=0,r,n=one(e),a=n.length+1,s,i,l,c,u;for(r=jm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^i;return t^52811}var une=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],A=0;A!=7;++A)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=one(i),c=s(l),u=l.length,d=jm(16),A=0;A!=16;++A)d[A]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(l[u],h),--u,--g;return d}}(),Cke=function(e,t,r,n,a){a||(a=t),n||(n=une(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Nke=function(e){var t=0,r=une(e);return function(n){var a=Cke("",n,t,r);return t=a[1],a[0]}};function _ke(e,t,r,n){var a={key:fi(e),verificationBytes:fi(e)};return r.password&&(a.verifier=qR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Nke(r.password)),a}function Ske(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Eke(e):n.Data=wke(e,t),n}function kke(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Ske(e,t-2,n):_ke(e,r.biff>=8?t:t-2,r,n),n}var dne=function(){function e(a,s){switch(s.type){case"base64":return t(Kc(a),s);case"binary":return t(a,s);case"buffer":return t(xn&&Buffer.isBuffer(a)?a.toString("binary"):Gm(a),s);case"array":return t(Cg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,A){Array.isArray(l)&&(l[A]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[A][x]=y:l[Hr({r:A,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=nn(u),l}function r(a,s){return Km(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Hn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var A=Hr({r:u,c:d});l=c?(a[u]||[])[d]:a[A],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Sh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function jke(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function c2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Bke(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:l=((r-n)/i+6)%6;break;case r:l=(n-t)/i+2;break;case n:l=(t-r)/i+4;break}return[l/6,c,u/2]}function Tke(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function K_(e,t){if(t===0)return e;var r=Bke(jke(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),c2(Tke(r))}var Ane=6,Ike=15,Fke=1,Yo=Ane;function u2(e){return Math.floor((e+Math.round(128/Yo)/256)*Yo)}function d2(e){return Math.floor((e-5)/Yo*100+.5)/100}function q_(e){return Math.round((e*Yo+5)/Yo*256)/256}function SB(e){return q_(d2(u2(e)))}function WR(e){var t=Math.abs(e-SB(e)),r=Yo;if(t>.005)for(Yo=Fke;Yo<Ike;++Yo)Math.abs(e-SB(e))<=t&&(t=Math.abs(e-SB(e)),r=Yo);Yo=r}function Bm(e){e.width?(e.wpx=u2(e.width),e.wch=d2(e.wpx),e.MDW=Yo):e.wpx?(e.wch=d2(e.wpx),e.width=q_(e.wch),e.MDW=Yo):typeof e.wch=="number"&&(e.width=q_(e.wch),e.wpx=u2(e.width),e.MDW=Yo),e.customWidth&&delete e.customWidth}var Oke=96,fne=Oke;function A2(e){return e*96/fne}function m1(e){return e*fne/96}var Dke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Pke(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(cl)||[]).forEach(function(i){var l=Kr(i);switch(uf(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ua(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ua(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function Rke(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(cl)||[]).forEach(function(i){var l=Kr(i);switch(uf(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function Lke(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(cl)||[]).forEach(function(i){var l=Kr(i);switch(uf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ea(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ua(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ua(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ua(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ua(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ua(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ua(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ua(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=ER[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ua(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=tg[a.color.index];a.color.index==81&&(c=tg[1]),c||(c=tg[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=K_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Mke(e,t,r){t.NumberFmt=[];for(var n=Os(Mr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Mr[n[a]];var s=e[0].match(cl);if(s)for(a=0;a<s.length;++a){var i=Kr(s[a]);switch(uf(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Qn(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}mh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Uke(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var oN=["numFmtId","fillId","fontId","borderId","xfId"],lN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Qke(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(cl)||[]).forEach(function(s){var i=Kr(s),l=0;switch(uf(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<oN.length;++l)n[oN[l]]&&(n[oN[l]]=parseInt(n[oN[l]],10));for(l=0;l<lN.length;++l)n[lN[l]]&&(n[lN[l]]=Ua(n[lN[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ua(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Hke(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Vke=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=l.match(t))&&Mke(A,d,u),(A=l.match(a))&&Lke(A,d,c,u),(A=l.match(n))&&Rke(A,d,c,u),(A=l.match(s))&&Pke(A,d,c,u),(A=l.match(r))&&Qke(A,d,u),d}}();function hne(e,t){var r=[ti,Kt("styleSheet",null,{xmlns:qg[0],"xmlns:vt":Bi.vt})],n;return e.SSF&&(n=Uke(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Hke(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function zke(e,t){var r=e.read_shift(2),n=sl(e);return[r,n]}function $ke(e,t,r){r||(r=Ct(6+4*t.length)),r.write_shift(2,e),to(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Gke(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=S_e(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=__e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=sl(e),n}function Kke(e,t){t||(t=Ct(153)),t.write_shift(2,e.sz*20),k_e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),z_(e.color,t);var n=0;return n=2,t.write_shift(1,n),to(e.name,t),t.length>t.l?t.slice(0,t.l):t}var qke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kB,Wke=ol;function IV(e,t){t||(t=Ct(84)),kB||(kB=ak(qke));var r=kB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(z_({auto:1},t),z_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Xke(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function mne(e,t,r){r||(r=Ct(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function hy(e,t){return t||(t=Ct(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Yke=ol;function Jke(e,t){return t||(t=Ct(51)),t.write_shift(1,0),hy(null,t),hy(null,t),hy(null,t),hy(null,t),hy(null,t),t.length>t.l?t.slice(0,t.l):t}function Zke(e,t){return t||(t=Ct(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),V_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function eje(e,t,r){var n=Ct(2052);return n.write_shift(4,e),V_(t,n),V_(r,n),n.length>n.l?n.slice(0,n.l):n}function tje(e,t,r){var n={};n.NumberFmt=[];for(var a in Mr)n.NumberFmt[a]=Mr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Vh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],mh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=K_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function rje(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Ud(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,$ke(a,t[a]))}),Rt(e,616))}}function nje(e){var t=1;Rt(e,611,Ud(t)),Rt(e,43,Kke({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function aje(e){var t=2;Rt(e,603,Ud(t)),Rt(e,45,IV({patternType:"none"})),Rt(e,45,IV({patternType:"gray125"})),Rt(e,604)}function sje(e){var t=1;Rt(e,613,Ud(t)),Rt(e,46,Jke()),Rt(e,614)}function ije(e){var t=1;Rt(e,626,Ud(t)),Rt(e,47,mne({numFmtId:0},65535)),Rt(e,627)}function oje(e,t){Rt(e,617,Ud(t.length)),t.forEach(function(r){Rt(e,47,mne(r,0))}),Rt(e,618)}function lje(e){var t=1;Rt(e,619,Ud(t)),Rt(e,48,Zke({xfId:0,name:"Normal"})),Rt(e,620)}function cje(e){var t=0;Rt(e,505,Ud(t)),Rt(e,506)}function uje(e){var t=0;Rt(e,508,eje(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function dje(e,t){var r=sc();return Rt(r,278),rje(r,e.SSF),nje(r),aje(r),sje(r),ije(r),oje(r,t.cellXfs),lje(r),cje(r),uje(r),Rt(r,279),r.end()}var Aje=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function fje(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(cl)||[]).forEach(function(a){var s=Kr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Aje.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function hje(){}function mje(){}var pje=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,gje=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,xje=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function vje(e,t,r){t.themeElements={};var n;[["clrScheme",pje,fje],["fontScheme",gje,hje],["fmtScheme",xje,mje]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var bje=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function pne(e,t){(!e||e.length===0)&&(e=XR());var r,n={};if(!(r=e.match(bje)))throw new Error("themeElements not found in theme");return vje(r[0],n,t),n.raw=e,n}function XR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ti];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function yje(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=lre(s,{type:"array"})}catch{return}var l=Uc(i,"theme/theme/theme1.xml",!0);if(l)return pne(l,r)}}function wje(e){return e.read_shift(4)}function Eje(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Cje(e,4);break;case 2:t.xclrValue=Wre(e);break;case 3:t.xclrValue=wje(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Cje(e,t){return ol(e,t)}function Nje(e,t){return ol(e,t)}function _je(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Eje(e);break;case 6:n[1]=Nje(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Sje(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(_je(e,r-e.l));return{ixfe:n,ext:s}}function kje(e,t){t.forEach(function(r){r[0]})}function jje(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:sl(e)}}function Bje(e){var t=Ct(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),to(e.name,t),t.slice(0,t.l)}function Tje(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Ije(e){var t=Ct(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Fje(e,t){var r=Ct(8+2*t.length);return r.write_shift(4,e),to(t,r),r.slice(0,r.l)}function Oje(e){return e.l+=4,e.read_shift(4)!=0}function Dje(e,t){var r=Ct(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Pje(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return Vh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(A){l==1?n.Cell.push({type:n.Types[A[0]-1].name,index:A[1]}):l==0&&n.Value.push({type:n.Types[A[0]-1].name,index:A[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Rje(){var e=sc();return Rt(e,332),Rt(e,334,Ud(1)),Rt(e,335,Bje({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,Fje(1,"XLDAPR")),Rt(e,52),Rt(e,35,Ud(514)),Rt(e,4096,Ud(0)),Rt(e,4097,Ou(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,Dje(1)),Rt(e,51,Ije([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function Lje(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(cl,function(l){var c=Kr(l);switch(uf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function gne(){var e=[ti];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Mje(e){var t=[];if(!e)return t;var r=1;return(e.match(cl)||[]).forEach(function(n){var a=Kr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Uje(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Qje(e,t,r){var n=[];return Vh(e,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function Hje(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Vh(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function Vje(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var bv=1024;function xne(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Dc.v,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:mv":Dc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];bv<e*1e3;)bv+=1e3;return t.forEach(function(s){var i=os(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,l),d={on:"t",obscured:"t"};++bv,a=a.concat(["<v:shape"+i2({id:"_x0000_s"+bv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Eo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Eo("x:AutoFill","False"),Eo("x:Row",String(i.r)),Eo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function FV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var l=os(i.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[i.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[i.ref]=s;var c=Hn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=nn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var A=s.c.length-1;A>=0;--A){if(!r&&s.c[A].T)return;r&&!s.c[A].T&&s.c.splice(A,1)}if(r&&n){for(A=0;A<n.length;++A)if(d.a==n[A].id){d.a=n[A].name||d.a;break}}s.c.push(d)})}function zje(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Kr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=os(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var A=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!A&&!!A[1]&&KR(A[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function vne(e){var t=[ti,Kt("comments",null,{xmlns:qg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Eo("t",pa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;t.push(Eo("t",pa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function $je(e,t){var r=[],n=!1,a={},s=0;return e.replace(cl,function(l,c){var u=Kr(l);switch(uf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function Gje(e,t,r){var n=[ti,Kt("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",Eo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Kje(e,t){var r=[],n=!1;return e.replace(cl,function(s){var i=Kr(s);switch(uf(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function qje(e){var t=[ti,Kt("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":qg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Wje(e){var t={};t.iauthor=e.read_shift(4);var r=Jg(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function Xje(e,t){return t==null&&(t=Ct(36)),t.write_shift(4,e[1].iauthor),ib(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Yje=sl;function Jje(e){return to(e.slice(0,54))}function Zje(e,t){var r=[],n=[],a={},s=!1;return Vh(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function e3e(e){var t=sc(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,Jje(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,Xje([s,a])),a.t&&a.t.length>0&&Rt(t,637,w_e(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var t3e="application/vnd.ms-office.vbaProject";function r3e(e){var t=_r.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_r.utils.cfb_add(t,a,e.FileIndex[n].content)}}),_r.write(t)}function n3e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&_r.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var bne=["xlsb","xlsm","xlam","biff8","xla"];function a3e(){return{"!type":"dialog"}}function s3e(){return{"!type":"dialog"}}function i3e(){return{"!type":"macro"}}function o3e(){return{"!type":"macro"}}var Qv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+is(d)+(c?"":"$")+Js(u)}return function(a,s){return t=s,a.replace(e,r)}}(),YR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,JR=function(){return function(t,r){return t.replace(YR,function(n,a,s,i,l,c){var u=LR(i)-(s?0:r.c),d=RR(c)-(l?0:r.r),A=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+A+"C"+h})}}();function yne(e,t){return e.replace(YR,function(r,n,a,s,i,l){return n+(a=="$"?a+s:is(LR(s)+t.c))+(i=="$"?i+l:Js(RR(l)+t.r))})}function l3e(e,t,r){var n=oc(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return yne(e,i)}function c3e(e){return e.length!=1}function OV(e){return e.replace(/_xlfn\./g,"")}function ci(e){e.l+=1}function Tm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function wne(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Ene(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=Tm(e),l=Tm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Ene(e){var t=Tm(e),r=Tm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function u3e(e,t,r){if(r.biff<8)return Ene(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Tm(e),i=Tm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Cne(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return d3e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Tm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function d3e(e){var t=Tm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function A3e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function f3e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return h3e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function h3e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function m3e(e,t,r){var n=(e[e.l++]&96)>>5,a=wne(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function p3e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=wne(e,s,r);return[n,a,i]}function g3e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function x3e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function v3e(e,t,r){var n=(e[e.l++]&96)>>5,a=u3e(e,t-1,r);return[n,a]}function b3e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function DV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function y3e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function w3e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function E3e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function C3e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function N3e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Nne(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function _3e(e){return e.read_shift(2),Nne(e)}function S3e(e){return e.read_shift(2),Nne(e)}function k3e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Cne(e,0,r);return[n,a]}function j3e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=f3e(e,0,r);return[n,a]}function B3e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Cne(e,0,r);return[n,a,s]}function T3e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[OBe[a],kne[a],n]}function I3e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:F3e(e);return[a,(s[0]===0?kne:FBe)[s[1]]]}function F3e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function O3e(e,t,r){e.l+=r&&r.biff==2?3:4}function D3e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function P3e(e){return e.l++,zh[e.read_shift(1)]}function R3e(e){return e.l++,e.read_shift(2)}function L3e(e){return e.l++,e.read_shift(1)!==0}function M3e(e){return e.l++,tl(e)}function U3e(e,t,r){return e.l++,cE(e,t-1,r)}function Q3e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=zh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=tl(e);break;case 2:r[1]=Zg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function H3e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Jg:ok)(e));return a}function V3e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=Q3e(e,r.biff);return i}function z3e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function $3e(e,t,r){if(r.biff==5)return G3e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function G3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function K3e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function q3e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function W3e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function X3e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var Y3e=ol,J3e=ol,Z3e=ol;function dE(e,t,r){return e.l+=2,[A3e(e)]}function ZR(e){return e.l+=6,[]}var eBe=dE,tBe=ZR,rBe=ZR,nBe=dE;function _ne(e){return e.l+=2,[fi(e),e.read_shift(2)&1]}var aBe=dE,sBe=_ne,iBe=ZR,oBe=dE,lBe=dE,cBe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function uBe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=cBe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function dBe(e){return e.l+=2,[e.read_shift(4)]}function ABe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function fBe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function hBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function mBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function pBe(e){return e.l+=4,[0,0]}var PV={1:{n:"PtgExp",f:D3e},2:{n:"PtgTbl",f:Z3e},3:{n:"PtgAdd",f:ci},4:{n:"PtgSub",f:ci},5:{n:"PtgMul",f:ci},6:{n:"PtgDiv",f:ci},7:{n:"PtgPower",f:ci},8:{n:"PtgConcat",f:ci},9:{n:"PtgLt",f:ci},10:{n:"PtgLe",f:ci},11:{n:"PtgEq",f:ci},12:{n:"PtgGe",f:ci},13:{n:"PtgGt",f:ci},14:{n:"PtgNe",f:ci},15:{n:"PtgIsect",f:ci},16:{n:"PtgUnion",f:ci},17:{n:"PtgRange",f:ci},18:{n:"PtgUplus",f:ci},19:{n:"PtgUminus",f:ci},20:{n:"PtgPercent",f:ci},21:{n:"PtgParen",f:ci},22:{n:"PtgMissArg",f:ci},23:{n:"PtgStr",f:U3e},26:{n:"PtgSheet",f:ABe},27:{n:"PtgEndSheet",f:fBe},28:{n:"PtgErr",f:P3e},29:{n:"PtgBool",f:L3e},30:{n:"PtgInt",f:R3e},31:{n:"PtgNum",f:M3e},32:{n:"PtgArray",f:b3e},33:{n:"PtgFunc",f:T3e},34:{n:"PtgFuncVar",f:I3e},35:{n:"PtgName",f:z3e},36:{n:"PtgRef",f:k3e},37:{n:"PtgArea",f:m3e},38:{n:"PtgMemArea",f:K3e},39:{n:"PtgMemErr",f:Y3e},40:{n:"PtgMemNoMem",f:J3e},41:{n:"PtgMemFunc",f:q3e},42:{n:"PtgRefErr",f:W3e},43:{n:"PtgAreaErr",f:g3e},44:{n:"PtgRefN",f:j3e},45:{n:"PtgAreaN",f:v3e},46:{n:"PtgMemAreaN",f:hBe},47:{n:"PtgMemNoMemN",f:mBe},57:{n:"PtgNameX",f:$3e},58:{n:"PtgRef3d",f:B3e},59:{n:"PtgArea3d",f:p3e},60:{n:"PtgRefErr3d",f:X3e},61:{n:"PtgAreaErr3d",f:x3e},255:{}},gBe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},xBe={1:{n:"PtgElfLel",f:_ne},2:{n:"PtgElfRw",f:oBe},3:{n:"PtgElfCol",f:eBe},6:{n:"PtgElfRwV",f:lBe},7:{n:"PtgElfColV",f:nBe},10:{n:"PtgElfRadical",f:aBe},11:{n:"PtgElfRadicalS",f:iBe},13:{n:"PtgElfColS",f:tBe},15:{n:"PtgElfColSV",f:rBe},16:{n:"PtgElfRadicalLel",f:sBe},25:{n:"PtgList",f:uBe},29:{n:"PtgSxName",f:dBe},255:{}},vBe={0:{n:"PtgAttrNoop",f:pBe},1:{n:"PtgAttrSemi",f:N3e},2:{n:"PtgAttrIf",f:E3e},4:{n:"PtgAttrChoose",f:y3e},8:{n:"PtgAttrGoto",f:w3e},16:{n:"PtgAttrSum",f:O3e},32:{n:"PtgAttrBaxcel",f:DV},33:{n:"PtgAttrBaxcel",f:DV},64:{n:"PtgAttrSpace",f:_3e},65:{n:"PtgAttrSpaceSemi",f:S3e},128:{n:"PtgAttrIfError",f:C3e},255:{}};function AE(e,t,r,n){if(n.biff<8)return ol(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=V3e(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=H3e(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(ol(e,t)),s}function fE(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=PV[s]||PV[gBe[s]],(s===24||s===25)&&(a=(s===24?xBe:vBe)[e[e.l+1]]),!a||!a.f?ol(e,t):i.push([a.n,a.f(e,t,r)]);return i}function bBe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var yBe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function wBe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Sne(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function RV(e,t,r){var n=Sne(e,t,r);return n=="#REF"?n:wBe(n,r)}function qo(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,A=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Ss(" ",e[0][x][1][1]);break;case 1:v=Ss("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+yBe[_[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ww(_[1][1],i,a),l.push(Ew(d,s));break;case"PtgRefN":d=r?ww(_[1][1],r,a):_[1][1],l.push(Ew(d,s));break;case"PtgRef3d":A=_[1][1],d=ww(_[1][2],i,a),g=RV(n,A,a),l.push(g+"!"+Ew(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=_[1][0],k=_[1][1];j||(j=0),j&=127;var I=j==0?[]:l.slice(-j);l.length-=j,k==="User"&&(k=I.shift()),l.push(k+"("+I.join(",")+")");break;case"PtgBool":l.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(_[1]);break;case"PtgNum":l.push(String(_[1]));break;case"PtgStr":l.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(_[1]);break;case"PtgAreaN":m=AV(_[1][1],r?{s:r}:i,a),l.push(CB(m,a));break;case"PtgArea":m=AV(_[1][1],i,a),l.push(CB(m,a));break;case"PtgArea3d":A=_[1][1],m=_[1][2],g=RV(n,A,a),l.push(g+"!"+CB(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],S=E?E.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var B=_[1][1];h=_[1][2];var R;if(a.biff<=5)B<0&&(B=-B),n[B]&&(R=n[B][h]);else{var P="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][h]&&n[B][h].itab>0&&(P=n.SheetNames[n[B][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[B]&&n[B][h])P+=n[B][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var F=(Sne(n,B,a)||"").split(";;");F[h-1]?P=F[h-1]:P+="SH33TJSERRX"}l.push(P);break}R||(R={Name:"SH33TJSERRY"}),l.push(R.Name);break;case"PtgParen":var L="(",M=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:L=Ss(" ",e[0][x][1][1])+L;break;case 3:L=Ss("\r",e[0][x][1][1])+L;break;case 4:M=Ss(" ",e[0][x][1][1])+M;break;case 5:M=Ss("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(L+l.pop()+M);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var ee={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var V=n.sharedf[Hr(d)];l.push(qo(V,i,ee,n,a))}else{var q=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(qo(u[1],i,ee,n,a)),q=!0;break}q||l.push(_[1])}break;case"PtgArray":l.push("{"+bBe(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&K.indexOf(e[0][y][0])==-1){_=e[0][x];var X=!0;switch(_[1][0]){case 4:X=!1;case 0:v=Ss(" ",_[1][1]);break;case 5:X=!1;case 1:v=Ss("\r",_[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}l.push((X?v:"")+l.pop()+(X?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function EBe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],ol(e,t-2)];var l=fE(e,i,r);return t!==i+a&&(s=AE(e,t-i-a,l,r)),e.l=n,[l,s]}function CBe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],ol(e,t-2)];var l=fE(e,i,r);return t!==i+a&&(s=AE(e,t-i-a,l,r)),e.l=n,[l,s]}function NBe(e,t,r,n){var a=e.l+t,s=fE(e,n,r),i;return a!==e.l&&(i=AE(e,a-e.l,s,r)),[s,i]}function _Be(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=fE(e,s,r);return s==65535?[[],ol(e,t-2)]:(t!==s+2&&(a=AE(e,n-s-2,i,r)),[i,a])}function SBe(e){var t;if(ah(e,e.l+6)!==65535)return[tl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function kBe(e){if(e==null){var t=Ct(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ng(e);return Ng(0)}function jB(e,t,r){var n=e.l+t,a=df(e);r.biff==2&&++e.l;var s=SBe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=CBe(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function jBe(e,t,r,n,a){var s=Sg(t,r,a),i=kBe(e.v),l=Ct(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Ct(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var A=eo([s,i,l,u]);return A}function lk(e,t,r){var n=e.read_shift(4),a=fE(e,n,r),s=e.read_shift(4),i=s>0?AE(e,s,a,r):null;return[a,i]}var BBe=lk,ck=lk,TBe=lk,IBe=lk,FBe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},kne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},OBe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function LV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function DBe(e){var t="of:="+e.replace(YR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function BB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function PBe(e){return e.replace(/\./,"!")}var Nw={},Hv={},_w=typeof Map<"u";function eL(e,t,r){var n=0,a=e.length;if(r){if(_w?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=_w?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(_w?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function uk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Yo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=d2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=q_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function ag(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function qm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){mh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function jne(e,t,r,n,a,s){try{n.cellNF&&(e.z=Mr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ha(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Mr[t]==null&&mh(F5e[t]||"General",t),e.t==="e")e.w=e.w||zh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=a2(e.v);else if(e.t==="d"){var i=Oi(e.v);(i|0)===i?e.w=i.toString(10):e.w=a2(i)}else{if(e.v===void 0)return"";e.w=Eg(e.v,Hv)}else e.t==="d"?e.w=Ku(t,Oi(e.v),Hv):e.w=Ku(t,e.v,Hv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=K_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=K_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function RBe(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function LBe(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var MBe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,UBe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,QBe=/<(?:\w:)?hyperlink [^>]*>/mg,HBe=/"(\w*:\w*)"/,VBe=/<(?:\w:)?col\b[^>]*[\/]?>/g,zBe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,$Be=/<(?:\w:)?pageMargins[^>]*\/>/g,Bne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,GBe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,KBe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function qBe(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",A=e.match(UBe);A?(u=e.slice(0,A.index),d=e.slice(A.index+A[0].length)):u=d=e;var h=u.match(Bne);h?tL(h[0],l,a,r):(h=u.match(GBe))&&XBe(h[0],h[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(HBe);g&&LBe(l,g[1])}var x=u.match(KBe);x&&x[1]&&cTe(x[1],a);var v=[];if(t.cellStyles){var y=u.match(VBe);y&&aTe(v,y)}A&&ATe(A[1],l,t,c,s,i);var w=d.match(zBe);w&&(l["!autofilter"]=iTe(w[0]));var _=[],j=d.match(MBe);if(j)for(m=0;m!=j.length;++m)_[m]=Hn(j[m].slice(j[m].indexOf('"')+1));var k=d.match(QBe);k&&tTe(l,k,n);var I=d.match($Be);if(I&&(l["!margins"]=rTe(Kr(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=nn(c)),t.sheetRows>0&&l["!ref"]){var E=Hn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nn(E))}return v.length>0&&(l["!cols"]=v),_.length>0&&(l["!merges"]=_),l}function WBe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function tL(e,t,r,n){var a=Kr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ea(a.codeName)))}function XBe(e,t,r,n,a){tL(e.slice(0,e.indexOf(">")),r,n,a)}function YBe(e,t,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=$A(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Kt("outlinePr",null,u)}!s&&!l||(a[a.length]=Kt("sheetPr",l,i))}var JBe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],ZBe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function eTe(e){var t={sheet:1};return JBe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),ZBe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=qR(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function tTe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Kr(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Hn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Hr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function rTe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function nTe(e){return ag(e),Kt("pageMargins",null,e)}function aTe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Kr(t[n],!0);a.hidden&&(a.hidden=Ua(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,WR(a.width)),Bm(a);s<=i;)e[s++]=Va(a)}}function sTe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,uk(a,n)));return r[r.length]="</cols>",r.join("")}function iTe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function oTe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=oc(a);i.s.r==i.e.r&&(i.e.r=oc(t["!ref"]).e.r,a=nn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var lTe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function cTe(e,t){t.Views||(t.Views=[{}]),(e.match(lTe)||[]).forEach(function(r,n){var a=Kr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ua(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function uTe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function dTe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=zh[e.v];break;case"d":n&&n.cellDates?a=Ha(e.v,-1).toISOString():(e=Va(e),e.t="n",a=""+(e.v=Oi(Ha(e.v)))),typeof e.z>"u"&&(e.z=Mr[14]);break;default:a=e.v;break}var l=Eo("v",pa(a)),c={r:t},u=qm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Eo("v",""+eL(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Kt("f",pa(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",l,c)}var ATe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=s2("v"),i=s2("f");return function(c,u,d,A,h,m){for(var g=0,x="",v=[],y=[],w=0,_=0,j=0,k="",I,E,S=0,B=0,R,P,F=0,L=0,M=Array.isArray(m.CellXf),ee,V=[],q=[],K=Array.isArray(u),X=[],Z={},G=!1,D=!!d.sheetStubs,U=c.split(t),z=0,J=U.length;z!=J;++z){x=U[z].trim();var re=x.length;if(re!==0){var oe=0;e:for(g=0;g<re;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=Kr(x.slice(oe,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,B=-1,d.sheetRows&&d.sheetRows<S)continue;Z={},G=!1,E.ht&&(G=!0,Z.hpt=parseFloat(E.ht),Z.hpx=m1(Z.hpt)),E.hidden=="1"&&(G=!0,Z.hidden=!0),E.outlineLevel!=null&&(G=!0,Z.level=+E.outlineLevel),G&&(X[S-1]=Z)}break;case"<":oe=g;break}if(oe>=g)break;if(E=Kr(x.slice(oe,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,B=-1,!(d.sheetRows&&d.sheetRows<S)){A.s.r>S-1&&(A.s.r=S-1),A.e.r<S-1&&(A.e.r=S-1),d&&d.cellStyles&&(Z={},G=!1,E.ht&&(G=!0,Z.hpt=parseFloat(E.ht),Z.hpx=m1(Z.hpt)),E.hidden=="1"&&(G=!0,Z.hidden=!0),E.outlineLevel!=null&&(G=!0,Z.level=+E.outlineLevel),G&&(X[S-1]=Z)),v=x.slice(g).split(e);for(var se=0;se!=v.length&&v[se].trim().charAt(0)=="<";++se);for(v=v.slice(se),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,j=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,k=y[1],_=0;_!=k.length&&!((j=k.charCodeAt(_)-64)<1||j>26);++_)w=26*w+j;--w,B=w}else++B;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=Kr(x.slice(0,_),!0),E.r||(E.r=Hr({r:S-1,c:B})),k=x.slice(_),I={t:""},(y=k.match(s))!=null&&y[1]!==""&&(I.v=Qn(y[1])),d.cellFormula){if((y=k.match(i))!=null&&y[1]!==""){if(I.f=Qn(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=OV(I.f)),y[0].indexOf('t="array"')>-1)I.F=(k.match(a)||[])[1],I.F.indexOf(":")>-1&&V.push([Hn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){P=Kr(y[0]);var le=Qn(Ea(y[1]));d.xlfn||(le=OV(le)),q[parseInt(P.si,10)]=[P,le,E.r]}}else(y=k.match(/<f[^>]*\/>/))&&(P=Kr(y[0]),q[P.si]&&(I.f=l3e(q[P.si][1],q[P.si][2],E.r)));var ue=os(E.r);for(_=0;_<V.length;++_)ue.r>=V[_][0].s.r&&ue.r<=V[_][0].e.r&&ue.c>=V[_][0].s.c&&ue.c<=V[_][0].e.c&&(I.F=V[_][1])}if(E.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(D)I.t="z";else continue;else I.t=E.t||"n";switch(A.s.c>B&&(A.s.c=B),A.e.c<B&&(A.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!D)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!D)continue;I.t="z"}else R=Nw[parseInt(I.v,10)],I.v=R.t,I.r=R.r,d.cellHTML&&(I.h=R.h);break;case"str":I.t="s",I.v=I.v!=null?Ea(I.v):"",d.cellHTML&&(I.h=FR(I.v));break;case"inlineStr":y=k.match(n),I.t="s",y!=null&&(R=KR(y[1]))?(I.v=R.t,d.cellHTML&&(I.h=R.h)):I.v="";break;case"b":I.v=Ua(I.v);break;case"d":d.cellDates?I.v=Ha(I.v,1):(I.v=Oi(Ha(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=Ire[I.v];break}if(F=L=0,ee=null,M&&E.s!==void 0&&(ee=m.CellXf[E.s],ee!=null&&(ee.numFmtId!=null&&(F=ee.numFmtId),d.cellStyles&&ee.fillId!=null&&(L=ee.fillId))),jne(I,F,L,d,h,m),d.cellDates&&M&&I.t=="n"&&nb(Mr[F])&&(I.t="d",I.v=ik(I.v)),E.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+E.cm-1];ke&&ke.type=="XLDAPR"&&(I.D=!0)}if(K){var ae=os(E.r);u[ae.r]||(u[ae.r]=[]),u[ae.r][ae.c]=I}else u[E.r]=I}}}}X.length>0&&(u["!rows"]=X)}}();function fTe(e,t,r,n){var a=[],s=[],i=Hn(e["!ref"]),l="",c,u="",d=[],A=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(A=i.s.r;A<=i.e.r;++A){for(s=[],u=Js(A),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[A]||[])[h]:e[c];w!==void 0&&(l=dTe(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[A])&&(x={r:u},m&&m[A]&&(v=m[A],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=A2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Kt("row",s.join(""),x))}if(m)for(;A<m.length;++A)m&&m[A]&&(x={r:A+1},v=m[A],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=A2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Kt("row","",x));return a.join("")}function Tne(e,t,r,n){var a=[ti,Kt("worksheet",null,{xmlns:qg[0],"xmlns:r":Bi.r})],s=r.SheetNames[e],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),c["!comments"]=[];var A=[];YBe(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=uTe(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=sTe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=fTe(c,t),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=eTe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=oTe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=WBe(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ha(n,-1,pa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=pa(x[1].Tooltip)),a[a.length]=Kt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=nTe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Eo("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),A.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=A),c["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function hTe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function mTe(e,t,r){var n=Ct(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=A2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var A=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(A<0&&(A=m),h=m)}A<0||(++l,n.write_shift(4,A),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function pTe(e,t,r,n){var a=mTe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var gTe=Jg,xTe=ib;function vTe(){}function bTe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=E_e(e),r}function yTe(e,t,r){r==null&&(r=Ct(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return z_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Sre(e,r),r.slice(0,r.l)}function wTe(e){var t=Xu(e);return[t]}function ETe(e,t,r){return r==null&&(r=Ct(8)),Wg(t,r)}function CTe(e){var t=Xg(e);return[t]}function NTe(e,t,r){return r==null&&(r=Ct(4)),Yg(t,r)}function _Te(e){var t=Xu(e),r=e.read_shift(1);return[t,r,"b"]}function STe(e,t,r){return r==null&&(r=Ct(9)),Wg(t,r),r.write_shift(1,e.v?1:0),r}function kTe(e){var t=Xg(e),r=e.read_shift(1);return[t,r,"b"]}function jTe(e,t,r){return r==null&&(r=Ct(5)),Yg(t,r),r.write_shift(1,e.v?1:0),r}function BTe(e){var t=Xu(e),r=e.read_shift(1);return[t,r,"e"]}function TTe(e,t,r){return r==null&&(r=Ct(9)),Wg(t,r),r.write_shift(1,e.v),r}function ITe(e){var t=Xg(e),r=e.read_shift(1);return[t,r,"e"]}function FTe(e,t,r){return r==null&&(r=Ct(8)),Yg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function OTe(e){var t=Xu(e),r=e.read_shift(4);return[t,r,"s"]}function DTe(e,t,r){return r==null&&(r=Ct(12)),Wg(t,r),r.write_shift(4,t.v),r}function PTe(e){var t=Xg(e),r=e.read_shift(4);return[t,r,"s"]}function RTe(e,t,r){return r==null&&(r=Ct(8)),Yg(t,r),r.write_shift(4,t.v),r}function LTe(e){var t=Xu(e),r=tl(e);return[t,r,"n"]}function MTe(e,t,r){return r==null&&(r=Ct(16)),Wg(t,r),Ng(e.v,r),r}function Ine(e){var t=Xg(e),r=tl(e);return[t,r,"n"]}function UTe(e,t,r){return r==null&&(r=Ct(12)),Yg(t,r),Ng(e.v,r),r}function QTe(e){var t=Xu(e),r=HR(e);return[t,r,"n"]}function HTe(e,t,r){return r==null&&(r=Ct(12)),Wg(t,r),kre(e.v,r),r}function VTe(e){var t=Xg(e),r=HR(e);return[t,r,"n"]}function zTe(e,t,r){return r==null&&(r=Ct(8)),Yg(t,r),kre(e.v,r),r}function $Te(e){var t=Xu(e),r=MR(e);return[t,r,"is"]}function GTe(e){var t=Xu(e),r=sl(e);return[t,r,"str"]}function KTe(e,t,r){return r==null&&(r=Ct(12+4*e.v.length)),Wg(t,r),to(e.v,r),r.length>r.l?r.slice(0,r.l):r}function qTe(e){var t=Xg(e),r=sl(e);return[t,r,"str"]}function WTe(e,t,r){return r==null&&(r=Ct(8+4*e.v.length)),Yg(t,r),to(e.v,r),r.length>r.l?r.slice(0,r.l):r}function XTe(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=ck(e,n-e.l,r);i[3]=qo(l,null,a,r.supbooks,r)}else e.l=n;return i}function YTe(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=ck(e,n-e.l,r);i[3]=qo(l,null,a,r.supbooks,r)}else e.l=n;return i}function JTe(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=tl(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=ck(e,n-e.l,r);i[3]=qo(l,null,a,r.supbooks,r)}else e.l=n;return i}function ZTe(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=sl(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=ck(e,n-e.l,r);i[3]=qo(l,null,a,r.supbooks,r)}else e.l=n;return i}var eIe=Jg,tIe=ib;function rIe(e,t){return t==null&&(t=Ct(4)),t.write_shift(4,e),t}function nIe(e,t){var r=e.l+t,n=Jg(e),a=UR(e),s=sl(e),i=sl(e),l=sl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function aIe(e,t){var r=Ct(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ib({s:os(e[0]),e:os(e[0])},r),QR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return to(a||"",r),to(e[1].Tooltip||"",r),to("",r),r.slice(0,r.l)}function sIe(){}function iIe(e,t,r){var n=e.l+t,a=jre(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=BBe(e,n-e.l,r);i[1]=l}else e.l=n;return i}function oIe(e,t,r){var n=e.l+t,a=Jg(e),s=[a];if(r.cellFormula){var i=IBe(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function lIe(e,t,r){r==null&&(r=Ct(18));var n=uk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Fne=["left","right","top","bottom","header","footer"];function cIe(e){var t={};return Fne.forEach(function(r){t[r]=tl(e)}),t}function uIe(e,t){return t==null&&(t=Ct(48)),ag(e),Fne.forEach(function(r){Ng(e[r],t)}),t}function dIe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function AIe(e,t,r){r==null&&(r=Ct(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function fIe(e){var t=Ct(24);return t.write_shift(4,4),t.write_shift(4,1),ib(e,t),t}function hIe(e,t){return t==null&&(t=Ct(66)),t.write_shift(2,e.password?qR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function mIe(){}function pIe(){}function gIe(e,t,r,n,a,s,i){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,h=!1,m,g,x,v,y,w,_,j,k,I=[];l.biff=12,l["!row"]=0;var E=0,S=!1,B=[],R={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=R,P.arrayf=B,P.SheetNames=a.SheetNames||a.Sheets.map(function(K){return K.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var F=0;F<a.Names.length;++F)P[0][F+1]=a.Names[F];var L=[],M=[],ee=!1;f2[16]={n:"BrtShortReal",f:Ine};var V;if(Vh(e,function(X,Z,G){if(!h)switch(G){case 148:u=X;break;case 0:m=X,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),j=Js(v=m.r),l["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=m1(X.hpt)),M[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:X[2]},X[2]){case"n":g.v=X[1];break;case"s":_=Nw[X[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!X[1];break;case"e":g.v=X[1],l.cellText!==!1&&(g.w=zh[g.v]);break;case"str":g.t="s",g.v=X[1];break;case"is":g.t="s",g.v=X[1].t;break}if((x=i.CellXf[X[0].iStyleRef])&&jne(g,x.numFmtId,null,l,s,i),y=X[0].c==-1?y+1:X[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[is(y)+j]=g,l.cellFormula){for(S=!1,E=0;E<B.length;++E){var D=B[E];m.r>=D[0].s.r&&m.r<=D[0].e.r&&y>=D[0].s.c&&y<=D[0].e.c&&(g.F=nn(D[0]),S=!0)}!S&&X.length>3&&(g.f=X[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&nb(Mr[x.numFmtId])){var U=Vp(g.v);U&&(g.t="d",g.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!l.sheetStubs||A)break;g={t:"z",v:void 0},y=X[0].c==-1?y+1:X[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[is(y)+j]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:I.push(X);break;case 49:V=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var z=n["!id"][X.relId];for(z?(X.Target=z.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=z):X.relId==""&&(X.Target="#"+X.loc),v=X.rfx.s.r;v<=X.rfx.e.r;++v)for(y=X.rfx.s.c;y<=X.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=X):(w=Hr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=X);break;case 426:if(!l.cellFormula)break;B.push(X),k=l.dense?c[v][y]:c[is(y)+j],k.f=qo(X[1],d,{r:m.r,c:y},P,l),k.F=nn(X[0]);break;case 427:if(!l.cellFormula)break;R[Hr(X[0].s)]=X[1],k=l.dense?c[v][y]:c[is(y)+j],k.f=qo(X[1],d,{r:m.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)L[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},ee||(ee=!0,WR(X.w/256)),Bm(L[X.e+1]);break;case 161:c["!autofilter"]={ref:nn(X)};break;case 476:c["!margins"]=X;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),X.name&&(a.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),X.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!Z.T){if(!A||l.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=nn(u||d)),l.sheetRows&&c["!ref"]){var q=Hn(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=nn(q))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),M.length>0&&(c["!rows"]=M),c}function xIe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||Mr[14],t.v=Oi(Ha(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=qm(a.cellXfs,t,a),t.l&&s["!links"].push([Hr(c),t.l]),t.c&&s["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=eL(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,i?Rt(e,18,RTe(t,c)):Rt(e,7,DTe(t,c))):(c.t="str",i?Rt(e,17,WTe(t,c)):Rt(e,6,KTe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,zTe(t,c)):Rt(e,2,HTe(t,c)):i?Rt(e,16,UTe(t,c)):Rt(e,5,MTe(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,jTe(t,c)):Rt(e,4,STe(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,FTe(t,c)):Rt(e,3,TTe(t,c)),!0}return i?Rt(e,12,NTe(t,c)):Rt(e,1,ETe(t,c)),!0}function vIe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,i="",l=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Js(d),pTe(e,t,a,d);var A=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=is(h)),s=l[h]+i;var m=c?(t[d]||[])[h]:t[s];if(!m){A=!1;continue}A=xIe(e,m,d,h,n,t,A)}}Rt(e,146)}function bIe(e,t){!t||!t["!merges"]||(Rt(e,177,rIe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,tIe(r))}),Rt(e,178))}function yIe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,lIe(n,r))}),Rt(e,391))}function wIe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,fIe(Hn(t["!ref"]))),Rt(e,650))}function EIe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Rt(e,494,aIe(n,a))}}),delete t["!links"]}function CIe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Rt(e,551,QR("rId"+a)),t["!legacy"]=a}}function NIe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=oc(s);l.s.r==l.e.r&&(l.e.r=oc(t["!ref"]).e.r,s=nn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,ib(Hn(s))),Rt(e,162)}}function _Ie(e,t,r){Rt(e,133),Rt(e,137,AIe(t,r)),Rt(e,138),Rt(e,134)}function SIe(e,t){t["!protect"]&&Rt(e,535,hIe(t["!protect"]))}function kIe(e,t,r,n){var a=sc(),s=r.SheetNames[e],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Hn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,yTe(l,i["!outline"])),Rt(a,148,xTe(c)),_Ie(a,i,r.Workbook),yIe(a,i),vIe(a,i,e,t),SIe(a,i),NIe(a,i,r,e),bIe(a,i),EIe(a,i,n),i["!margins"]&&Rt(a,476,uIe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&wIe(a,i),CIe(a,i,e,n),Rt(a,130),a.end()}function jIe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function BIe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var h=jIe(A);d.s.r=d.s.c=0,d.e.c=l,u=is(l),h[0].forEach(function(m,g){i[u+Js(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=nn(d)),i}function TIe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=e.match(Bne);return l&&tL(l[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function IIe(e,t){e.l+=10;var r=sl(e);return{name:r}}function FIe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Vh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var rL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],OIe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],DIe=[],PIe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function MV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function UV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function One(e){UV(e.WBProps,rL),UV(e.CalcPr,PIe),MV(e.WBView,OIe),MV(e.Sheets,DIe),Hv.date1904=Ua(e.WBProps.date1904)}function RIe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var LIe="][*?/\\".split("");function Dne(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return LIe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function MIe(e,t,r){e.forEach(function(n,a){Dne(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function UIe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];MIe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)RBe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var QIe=/<\w+:workbook/;function HIe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(cl,function(c,u){var d=Kr(c);switch(uf(d[0])){case"<?xml":break;case"<workbook":c.match(QIe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":rL.forEach(function(A){if(d[A[0]]!=null)switch(A[2]){case"bool":r.WBProps[A[0]]=Ua(d[A[0]]);break;case"int":r.WBProps[A[0]]=parseInt(d[A[0]],10);break;default:r.WBProps[A[0]]=d[A[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ua(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Qn(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),qg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return One(r),r}function Pne(e){var t=[ti];t[t.length]=Kt("workbook",null,{xmlns:qg[0],"xmlns:r":Bi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(rL.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:pa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Kt("definedName",pa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function VIe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=BF(e),r.name=sl(e),r}function zIe(e,t){return t||(t=Ct(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),QR(e.strRelID,t),to(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function $Ie(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?sl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function GIe(e,t){t||(t=Ct(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Sre(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function KIe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function qIe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=C_e(e),i=TBe(e,0,r),l=UR(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function WIe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],f2[16]={n:"BrtFRTArchID$",f:KIe},Vh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=qo(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),One(r),r.Names=s,r.supbooks=i,r}function XIe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,zIe(a))}Rt(e,144)}function YIe(e,t){t||(t=Ct(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return to("SheetJS",t),to(R_.version,t),to(R_.version,t),to("7262",t),t.length>t.l?t.slice(0,t.l):t}function JIe(e,t){t||(t=Ct(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function ZIe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,JIe(a)),Rt(e,136))}}function e6e(e,t){var r=sc();return Rt(r,131),Rt(r,128,YIe()),Rt(r,153,GIe(e.Workbook&&e.Workbook.WBProps||null)),ZIe(r,e),XIe(r,e),Rt(r,132),r.end()}function t6e(e,t,r){return t.slice(-4)===".bin"?WIe(e,r):HIe(e,r)}function r6e(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?gIe(e,n,r,a,s,i,l):qBe(e,n,r,a,s,i,l)}function n6e(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?FIe(e,n,r,a,s):TIe(e,n,r,a,s)}function a6e(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?i3e():o3e()}function s6e(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?a3e():s3e()}function i6e(e,t,r,n){return t.slice(-4)===".bin"?tje(e,r,n):Vke(e,r,n)}function o6e(e,t,r){return pne(e,r)}function l6e(e,t,r){return t.slice(-4)===".bin"?lke(e,r):ske(e,r)}function c6e(e,t,r){return t.slice(-4)===".bin"?Zje(e,r):zje(e,r)}function u6e(e,t,r){return t.slice(-4)===".bin"?Qje(e):Mje(e)}function d6e(e,t,r,n){return r.slice(-4)===".bin"?Hje(e,t,r,n):void 0}function A6e(e,t,r){return t.slice(-4)===".bin"?Pje(e,t,r):Lje(e,t,r)}function f6e(e,t,r){return(t.slice(-4)===".bin"?e6e:Pne)(e)}function h6e(e,t,r,n,a){return(t.slice(-4)===".bin"?kIe:Tne)(e,r,n,a)}function m6e(e,t,r){return(t.slice(-4)===".bin"?dje:hne)(e,r)}function p6e(e,t,r){return(t.slice(-4)===".bin"?dke:ine)(e,r)}function g6e(e,t,r){return(t.slice(-4)===".bin"?e3e:vne)(e)}function x6e(e){return(e.slice(-4)===".bin"?Rje:gne)()}var Rne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Lne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function wd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Rne),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Lne),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function v6e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Rne),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(Lne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Sw;function b6e(e,t){var r=Sw[e]||Qn(e);return r==="General"?Eg(t):Ku(r,t)}function y6e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function w6e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||zh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=a2(e.v):e.w=Eg(e.v):e.w=b6e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Sw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&nb(n)){var a=Vp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function E6e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Dke[n.Pattern]||n.Pattern)}e[t.ID]=t}function C6e(e,t,r,n,a,s,i,l,c,u){var d="General",A=n.StyleID,h={};u=u||{};var m=[],g=0;for(A===void 0&&l&&(A=l.StyleID),A===void 0&&i&&(A=i.StyleID);s[A]!==void 0&&(s[A].nf&&(d=s[A].nf),s[A].Interior&&m.push(s[A].Interior),!!s[A].Parent);)A=s[A].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=nV(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ha(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Ire[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=nV(t||e));break}if(w6e(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Qn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Qv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Qv("RC:RC",a):n.ArrayRange&&(n.F=Qv(n.ArrayRange,a),c.push([Hn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function N6e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function TB(e,t){var r=t||{};ab();var n=Wy(OR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Va(r);return i.type="string",h1.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){a.indexOf("<"+Le)>=0&&(s=!0)}),s)return uFe(n,r);Sw={"General Number":"General","General Date":Mr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mr[15],"Short Date":Mr[14],"Long Time":Mr[19],"Medium Time":Mr[18],"Short Time":Mr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mr[2],Standard:Mr[4],Percent:Mr[10],Scientific:Mr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},A=[],h=r.dense?[]:{},m="",g={},x={},v=wd('<Data ss:Type="String">'),y=0,w=0,_=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},I={},E="",S=0,B=[],R={},P={},F=0,L=[],M=[],ee={},V=[],q,K=!1,X=[],Z=[],G={},D=0,U=0,z={Sheets:[],WBProps:{date1904:!1}},J={};o2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var re="";l=o2.exec(n);)switch(l[3]=(re=l[3]).toLowerCase()){case"data":if(re=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?C6e(n.slice(y,l.index),E,v,c[c.length-1][0]=="comment"?ee:g,{c:w,r:_},k,V[w],x,X,r):(E="",v=wd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[is(w)+Js(_)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(D=w+(parseInt(g.MergeAcross,10)|0),U=_+(parseInt(g.MergeDown,10)|0),B.push({s:{c:w,r:_},e:{c:D,r:U}})),!r.sheetStubs)g.MergeAcross?w=D+1:++w;else if(g.MergeAcross||g.MergeDown){for(var oe=w;oe<=D;++oe)for(var se=_;se<=U;++se)(oe>w||se>_)&&(r.dense?(h[se]||(h[se]=[]),h[se][oe]={t:"z"}):h[is(oe)+Js(se)]={t:"z"});w=D+1}else++w;else g=v6e(l[0]),g.Index&&(w=+g.Index-1),w<j.s.c&&(j.s.c=w),w>j.e.c&&(j.e.c=w),l[0].slice(-2)==="/>"&&++w,M=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(_<j.s.r&&(j.s.r=_),_>j.e.r&&(j.e.r=_),l[0].slice(-2)==="/>"&&(x=wd(l[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=wd(l[0]),x.Index&&(_=+x.Index-1),G={},(x.AutoFitHeight=="0"||x.Height)&&(G.hpx=parseInt(x.Height,10),G.hpt=A2(G.hpx),Z[_]=G),x.Hidden=="1"&&(G.hidden=!0,Z[_]=G));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));A.push(m),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(h["!ref"]=nn(j),r.sheetRows&&r.sheetRows<=j.e.r&&(h["!fullref"]=h["!ref"],j.e.r=r.sheetRows-1,h["!ref"]=nn(j))),B.length&&(h["!merges"]=B),V.length>0&&(h["!cols"]=V),Z.length>0&&(h["!rows"]=Z),d[m]=h}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([l[3],!1]),u=wd(l[0]),m=Qn(u.Name),h=r.dense?[]:{},B=[],X=[],Z=[],J={name:m,Hidden:0},z.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),V=[],K=!1}break;case"style":l[1]==="/"?E6e(k,I,r):I=wd(l[0]);break;case"numberformat":I.nf=Qn(wd(l[0]).Format||"General"),Sw[I.nf]&&(I.nf=Sw[I.nf]);for(var le=0;le!=392&&Mr[le]!=I.nf;++le);if(le==392){for(le=57;le!=392;++le)if(Mr[le]==null){mh(I.nf,le);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=wd(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!K&&q.wpx>10){K=!0,Yo=Ane;for(var ue=0;ue<V.length;++ue)V[ue]&&Bm(V[ue])}K&&Bm(q),V[q.Index-1||V.length]=q;for(var ke=0;ke<+q.Span;++ke)V[V.length]=Va(q);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var ae=Kr(l[0]),Ne={Name:ae.Name,Ref:Qv(ae.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Ne.Sheet=z.Sheets.length-1),z.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=wd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?W_e(R,re,n.slice(F,l.index)):F=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));N6e(ee),M.push(ee)}else c.push([l[3],!1]),u=wd(l[0]),ee={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var je=wd(l[0]);h["!autofilter"]={ref:Qv(je.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return $V(n,r);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(F,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else F=l.index+l[0].length;break;case"header":h["!margins"]||ag(h["!margins"]={},"xlml"),isNaN(+Kr(l[0]).Margin)||(h["!margins"].header=+Kr(l[0]).Margin);break;case"footer":h["!margins"]||ag(h["!margins"]={},"xlml"),isNaN(+Kr(l[0]).Margin)||(h["!margins"].footer=+Kr(l[0]).Margin);break;case"pagemargins":var me=Kr(l[0]);h["!margins"]||ag(h["!margins"]={},"xlml"),isNaN(+me.Top)||(h["!margins"].top=+me.Top),isNaN(+me.Left)||(h["!margins"].left=+me.Left),isNaN(+me.Right)||(h["!margins"].right=+me.Right),isNaN(+me.Bottom)||(h["!margins"].bottom=+me.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?y6e(P,re,L,n.slice(F,l.index)):(L=l,F=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Te={};return!r.bookSheets&&!r.bookProps&&(Te.Sheets=d),Te.SheetNames=A,Te.Workbook=z,Te.SSF=Va(Mr),Te.Props=R,Te.Custprops=P,Te}function RF(e,t){switch(aL(t=t||{}),t.type||"base64"){case"base64":return TB(Kc(e),t);case"binary":case"buffer":case"file":return TB(e,t);case"array":return TB(Gm(e),t)}}function _6e(e,t){var r=[];return e.Props&&r.push(X_e(e.Props,t)),e.Custprops&&r.push(Y_e(e.Props,e.Custprops)),r.join("")}function S6e(){return""}function k6e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":pa(Mr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function Mne(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+JR(e.Ref,{r:0,c:0})})}function j6e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Mne(a)))}return Kt("Names",r.join(""))}function B6e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(Mne(l)))}return s.join("")}function T6e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Eo("ProtectContents","True")),e["!protect"].objects&&a.push(Eo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Eo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Eo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Eo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Dc.x})}function I6e(e){return e.map(function(t){var r=Z5e(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function F6e(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+pa(JR(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=os(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var A="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":A="Number",h=String(e.v);break;case"b":A="Boolean",h=e.v?"1":"0";break;case"e":A="Error",h=zh[e.v];break;case"d":A="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Mr[14]);break;case"s":A="String",h=J5e(e.v||"");break}var m=qm(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+A+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=I6e(e.c)),Kt("Cell",x,l)}function O6e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=m1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function D6e(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],i=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Bm(v);var w=!!v.width,_=uk(y,v),j={"ss:Index":y+1};w&&(j["ss:Width"]=u2(_.width)),v.hidden&&(j["ss:Hidden"]="1"),l.push(Kt("Column",null,j))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[O6e(u,(e["!rows"]||[])[u])],A=a.s.c;A<=a.e.c;++A){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>A)&&!(s[i].s.r>u)&&!(s[i].e.c<A)&&!(s[i].e.r<u)){(s[i].s.c!=A||s[i].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:A},g=Hr(m),x=c?(e[u]||[])[A]:e[g];d.push(F6e(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function P6e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?B6e(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?D6e(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(T6e(s,t,e,r)),n.join("")}function R6e(e,t){t||(t={}),e.SSF||(e.SSF=Va(Mr)),e.SSF&&(ab(),nk(e.SSF),t.revssf=sk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(_6e(e,t)),r.push(S6e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",P6e(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=k6e(e,t),r[3]=j6e(e),ti+Kt("Workbook",r.join(""),{xmlns:Dc.ss,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:ss":Dc.ss,"xmlns:dt":Dc.dt,"xmlns:html":Dc.html})}function L6e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=j_e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=B_e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var M6e=[60,1084,2066,2165,2175];function U6e(e,t,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=ah(r,r.l),u=LF[c],d=0;u!=null&&M6e.indexOf(c)>-1;)s=ah(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=LF[c=ah(r,r.l)];var A=eo(i);wo(A,0);var h=0;A.lens=[];for(var m=0;m<i.length;++m)A.lens.push(h),h+=i[m].length;if(A.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+A.length+" < "+n;return t.f(A,A.length,a)}function BA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Mr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||zh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=a2(e.v):e.w=Eg(e.v):e.w=Ku(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&nb(Mr[n]||String(n))){var a=Vp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function cN(e,t,r){return{v:e,ixfe:t,t:r}}function Q6e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},l=null,c=[],u="",d={},A,h="",m,g,x,v,y={},w=[],_,j,k=[],I=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},B=function(Qt){return Qt<8?tg[Qt]:Qt<64&&I[Qt-8]||tg[Qt]},R=function(Qt,wt,Br){var tr=wt.XF.data;if(!(!tr||!tr.patternType||!Br||!Br.cellStyles)){wt.s={},wt.s.patternType=tr.patternType;var an;(an=c2(B(tr.icvFore)))&&(wt.s.fgColor={rgb:an}),(an=c2(B(tr.icvBack)))&&(wt.s.bgColor={rgb:an})}},P=function(Qt,wt,Br){if(!(G>1)&&!(Br.sheetRows&&Qt.r>=Br.sheetRows)){if(Br.cellStyles&&wt.XF&&wt.XF.data&&R(Qt,wt,Br),delete wt.ixfe,delete wt.XF,A=Qt,h=Hr(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Br.cellFormula&&wt.f){for(var tr=0;tr<w.length;++tr)if(!(w[tr][0].s.c>Qt.c||w[tr][0].s.r>Qt.r)&&!(w[tr][0].e.c<Qt.c||w[tr][0].e.r<Qt.r)){wt.F=nn(w[tr][0]),(w[tr][0].s.c!=Qt.c||w[tr][0].s.r!=Qt.r)&&delete wt.f,wt.f&&(wt.f=""+qo(w[tr][1],i,Qt,X,F));break}}Br.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=wt):a[h]=wt}},F={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(F.password=t.password);var L,M=[],ee=[],V=[],q=[],K=!1,X=[];X.SheetNames=F.snames,X.sharedf=F.sharedf,X.arrayf=F.arrayf,X.names=[],X.XTI=[];var Z=0,G=0,D=0,U=[],z=[],J;F.codepage=1200,Id(1200);for(var re=!1;e.l<e.length-1;){var oe=e.l,se=e.read_shift(2);if(se===0&&Z===10)break;var le=e.l===e.length?0:e.read_shift(2),ue=LF[se];if(ue&&ue.f){if(t.bookSheets&&Z===133&&se!==133)break;if(Z=se,ue.r===2||ue.r==12){var ke=e.read_shift(2);if(le-=2,!F.enc&&ke!==se&&((ke&255)<<8|ke>>8)!==se)throw new Error("rt mismatch: "+ke+"!="+se);ue.r==12&&(e.l+=10,le-=10)}var ae={};if(se===10?ae=ue.f(e,le,F):ae=U6e(se,ue,e,le,F),G==0&&[9,521,1033,2057].indexOf(Z)===-1)continue;switch(se){case 34:r.opts.Date1904=E.WBProps.date1904=ae;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(e.l=0),F.enc=ae,!t.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=ae;break;case 66:var Ne=Number(ae);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}Id(F.codepage=Ne),re=!0;break;case 317:F.rrtabid=ae;break;case 25:F.winlocked=ae;break;case 439:r.opts.RefreshAll=ae;break;case 12:r.opts.CalcCount=ae;break;case 16:r.opts.CalcDelta=ae;break;case 17:r.opts.CalcIter=ae;break;case 13:r.opts.CalcMode=ae;break;case 14:r.opts.CalcPrecision=ae;break;case 95:r.opts.CalcSaveRecalc=ae;break;case 15:F.CalcRefMode=ae;break;case 2211:r.opts.FullCalc=ae;break;case 129:ae.fDialog&&(a["!type"]="dialog"),ae.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ae.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:k.push(ae);break;case 430:X.push([ae]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(ae);break;case 24:case 536:J={Name:ae.Name,Ref:qo(ae.rgce,i,null,X,F)},ae.itab>0&&(J.Sheet=ae.itab-1),X.names.push(J),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(z[ae.itab-1]={ref:nn(ae.rgce[0][0][1][2])});break;case 22:F.ExternCount=ae;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(ae),X.XTI=X.XTI.concat(ae);break;case 2196:if(F.biff<8)break;J!=null&&(J.Comment=ae[1]);break;case 18:a["!protect"]=ae;break;case 19:ae!==0&&F.WTF&&console.error("Password verifier: "+ae);break;case 133:s[ae.pos]=ae,F.snames.push(ae.name);break;case 10:{if(--G)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=nn(i),t.sheetRows&&t.sheetRows<=i.e.r){var je=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(i),i.e.r=je}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),ee.length>0&&(a["!objects"]=ee),V.length>0&&(a["!cols"]=V),q.length>0&&(a["!rows"]=q),E.Sheets.push(S)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),F.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(F.biff=5,re=!0,Id(F.codepage=28591)),F.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(F.biff=2),G++)break;if(a=t.dense?[]:{},F.biff<8&&!re&&(re=!0,Id(F.codepage=t.codepage||1252)),F.biff<5||ae.BIFFVer==0&&ae.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-le,name:u};s[_e.pos]=_e,F.snames.push(u)}else u=(s[oe]||{name:""}).name;ae.dt==32&&(a["!type"]="chart"),ae.dt==64&&(a["!type"]="macro"),M=[],ee=[],F.arrayf=w=[],V=[],q=[],K=!1,S={Hidden:(s[oe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ae.r]||[])[ae.c]:a[Hr({c:ae.c,r:ae.r})])&&++ae.c,_={ixfe:ae.ixfe,XF:k[ae.ixfe]||{},v:ae.val,t:"n"},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t);break;case 5:case 517:_={ixfe:ae.ixfe,XF:k[ae.ixfe],v:ae.val,t:ae.t},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t);break;case 638:_={ixfe:ae.ixfe,XF:k[ae.ixfe],v:ae.rknum,t:"n"},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t);break;case 189:for(var me=ae.c;me<=ae.C;++me){var Te=ae.rkrec[me-ae.c][0];_={ixfe:Te,XF:k[Te],v:ae.rkrec[me-ae.c][1],t:"n"},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:me,r:ae.r},_,t)}break;case 6:case 518:case 1030:{if(ae.val=="String"){l=ae;break}if(_=cN(ae.val,ae.cell.ixfe,ae.tt),_.XF=k[_.ixfe],t.cellFormula){var Le=ae.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var We=Le[0][0][1][0],xe=Le[0][0][1][1],Oe=Hr({r:We,c:xe});y[Oe]?_.f=""+qo(ae.formula,i,ae.cell,X,F):_.F=((t.dense?(a[We]||[])[xe]:a[Oe])||{}).F}else _.f=""+qo(ae.formula,i,ae.cell,X,F)}D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P(ae.cell,_,t),l=ae}break;case 7:case 519:if(l)l.val=ae,_=cN(ae,l.cell.ixfe,"s"),_.XF=k[_.ixfe],t.cellFormula&&(_.f=""+qo(l.formula,i,l.cell,X,F)),D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P(l.cell,_,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ae);var Re=Hr(ae[0].s);if(m=t.dense?(a[ae[0].s.r]||[])[ae[0].s.c]:a[Re],t.cellFormula&&m){if(!l||!Re||!m)break;m.f=""+qo(ae[1],i,ae[0],X,F),m.F=nn(ae[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Hr(l.cell)]=ae[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Hr(l.cell)],(m||{}).f=""+qo(ae[0],i,A,X,F)}}break;case 253:_=cN(c[ae.isst].t,ae.ixfe,"s"),c[ae.isst].h&&(_.h=c[ae.isst].h),_.XF=k[_.ixfe],D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ae.ixfe,XF:k[ae.ixfe],t:"z"},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t));break;case 190:if(t.sheetStubs)for(var $e=ae.c;$e<=ae.C;++$e){var et=ae.ixfe[$e-ae.c];_={ixfe:et,XF:k[et],t:"z"},D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:$e,r:ae.r},_,t)}break;case 214:case 516:case 4:_=cN(ae.val,ae.ixfe,"s"),_.XF=k[_.ixfe],D>0&&(_.z=U[_.ixfe>>8&63]),BA(_,t,r.opts.Date1904),P({c:ae.c,r:ae.r},_,t);break;case 0:case 512:G===1&&(i=ae);break;case 252:c=ae;break;case 1054:if(F.biff==4){U[D++]=ae[1];for(var ct=0;ct<D+163&&Mr[ct]!=ae[1];++ct);ct>=163&&mh(ae[1],D+163)}else mh(ae[1],ae[0]);break;case 30:{U[D++]=ae;for(var gt=0;gt<D+163&&Mr[gt]!=ae;++gt);gt>=163&&mh(ae,D+163)}break;case 229:M=M.concat(ae);break;case 93:ee[ae.cmo[0]]=F.lastobj=ae;break;case 438:F.lastobj.TxO=ae;break;case 127:F.lastobj.ImData=ae;break;case 440:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&(m.l=ae[1]);break;case 2048:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ae[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;m=t.dense?(a[ae[0].r]||[])[ae[0].c]:a[Hr(ae[0])];var It=ee[ae[2]];m||(t.dense?(a[ae[0].r]||(a[ae[0].r]=[]),m=a[ae[0].r][ae[0].c]={t:"z"}):m=a[Hr(ae[0])]={t:"z"},i.e.r=Math.max(i.e.r,ae[0].r),i.s.r=Math.min(i.s.r,ae[0].r),i.e.c=Math.max(i.e.c,ae[0].c),i.s.c=Math.min(i.s.c,ae[0].c)),m.c||(m.c=[]),g={a:ae[1],t:It.TxO.t},m.c.push(g)}break;case 2173:kje(k[ae.ixfe],ae.ext);break;case 125:{if(!F.cellStyles)break;for(;ae.e>=ae.s;)V[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},K||(K=!0,WR(ae.w/256)),Bm(V[ae.e+1])}break;case 520:{var Mt={};ae.level!=null&&(q[ae.r]=Mt,Mt.level=ae.level),ae.hidden&&(q[ae.r]=Mt,Mt.hidden=!0),ae.hpt&&(q[ae.r]=Mt,Mt.hpt=ae.hpt,Mt.hpx=m1(ae.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||ag(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=ae;break;case 161:a["!margins"]||ag(a["!margins"]={}),a["!margins"].header=ae.header,a["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(E.Views[0].RTL=!0);break;case 146:I=ae;break;case 2198:L=ae;break;case 140:j=ae;break;case 442:u?S.CodeName=ae||S.name:E.WBProps.CodeName=ae||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=le}return r.SheetNames=Os(s).sort(function(Pt,Qt){return Number(Pt)-Number(Qt)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(Pt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Va(Mr),F.enc&&(r.Encryption=F.enc),L&&(r.Themes=L),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),X.names.length>0&&(E.Names=X.names),r.Workbook=E,r}var kw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function H6e(e,t,r){var n=_r.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=yV(n,TF,kw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=_r.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var l=yV(i,IF,kw.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Lre(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function V6e(e,t){var r=[],n=[],a=[],s=0,i,l=YH(TF,"n"),c=YH(IF,"n");if(e.Props)for(i=Os(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Os(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)$re.indexOf(a[s][0])>-1||Rre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&_r.utils.cfb_add(t,"/SummaryInformation",wV(n,kw.SI,c,IF)),(r.length||u.length)&&_r.utils.cfb_add(t,"/DocumentSummaryInformation",wV(r,kw.DSI,l,TF,u.length?u:null,kw.UDI))}function Une(e,t){t||(t={}),aL(t),NR(),t.codepage&&CR(t.codepage);var r,n;if(e.FullPaths){if(_r.find(e,"/encryption"))throw new Error("File is password-protected");r=_r.find(e,"!CompObj"),n=_r.find(e,"/Workbook")||_r.find(e,"/Book")}else{switch(t.type){case"base64":e=Mc(Kc(e));break;case"binary":e=Mc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}wo(e,0),n={content:e}}var a,s;if(r&&L6e(r),t.bookProps&&!t.bookSheets)a={};else{var i=xn?"buffer":"array";if(n&&n.content)a=Q6e(n.content,t);else if((s=_r.find(e,"PerfectOffice_MAIN"))&&s.content)a=ng.to_workbook(s.content,(t.type=i,t));else if((s=_r.find(e,"NativeContent_MAIN"))&&s.content)a=ng.to_workbook(s.content,(t.type=i,t));else throw(s=_r.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&_r.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=r3e(e))}var l={};return e.FullPaths&&H6e(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function z6e(e,t){var r=t||{},n=_r.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _r.utils.cfb_add(n,a,Qne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&V6e(e,n),r.biff==8&&e.vbaraw&&n3e(n,_r.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var f2={0:{f:hTe},1:{f:wTe},2:{f:QTe},3:{f:BTe},4:{f:_Te},5:{f:LTe},6:{f:GTe},7:{f:OTe},8:{f:ZTe},9:{f:JTe},10:{f:XTe},11:{f:YTe},12:{f:CTe},13:{f:VTe},14:{f:ITe},15:{f:kTe},16:{f:Ine},17:{f:qTe},18:{f:PTe},19:{f:MR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:qIe},40:{},42:{},43:{f:Gke},44:{f:zke},45:{f:Wke},46:{f:Yke},47:{f:Xke},48:{},49:{f:g_e},50:{},51:{f:Tje},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:rne},62:{f:$Te},63:{f:Uje},64:{f:mIe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ol,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:dIe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:bTe},148:{f:gTe,p:16},151:{f:sIe},152:{},153:{f:$Ie},154:{},155:{},156:{f:VIe},157:{},158:{},159:{T:1,f:oke},160:{T:-1},161:{T:1,f:Jg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:eIe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:jje},336:{T:-1},337:{f:Oje,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:tne},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:iIe},427:{f:oIe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:cIe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:vTe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:nIe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Yje},633:{T:1},634:{T:-1},635:{T:1,f:Wje},636:{T:-1},637:{f:y_e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:IIe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:pIe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},LF={6:{f:jB},10:{f:I0},12:{f:fi},13:{f:fi},14:{f:zs},15:{f:zs},16:{f:tl},17:{f:zs},18:{f:zs},19:{f:fi},20:{f:kV},21:{f:kV},23:{f:tne},24:{f:BV},25:{f:zs},26:{},27:{},28:{f:p4e},29:{},34:{f:zs},35:{f:jV},38:{f:tl},39:{f:tl},40:{f:tl},41:{f:tl},42:{f:zs},43:{f:zs},47:{f:kke},49:{f:VSe},51:{f:fi},60:{},61:{f:LSe},64:{f:zs},65:{f:HSe},66:{f:fi},77:{},80:{},81:{},82:{},85:{f:fi},89:{},90:{},91:{},92:{f:SSe},93:{f:v4e},94:{},95:{f:zs},96:{},97:{},99:{f:zs},125:{f:rne},128:{f:a4e},129:{f:jSe},130:{f:fi},131:{f:zs},132:{f:zs},133:{f:BSe},134:{},140:{f:S4e},141:{f:fi},144:{},146:{f:B4e},151:{},152:{},153:{},154:{},155:{},156:{f:fi},157:{},158:{},160:{f:R4e},161:{f:F4e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:e4e},190:{f:t4e},193:{f:I0},197:{},198:{},199:{},200:{},201:{},202:{f:zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:fi},220:{},221:{f:zs},222:{},224:{f:n4e},225:{f:_Se},226:{f:I0},227:{},229:{f:g4e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ISe},253:{f:$Se},255:{f:OSe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Gre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zs},353:{f:I0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:c4e},431:{f:zs},432:{},433:{},434:{},437:{},438:{f:w4e},439:{f:zs},440:{f:E4e},441:{},442:{f:uE},443:{},444:{f:fi},445:{},446:{},448:{f:I0},449:{f:RSe,r:2},450:{f:I0},512:{f:NV},513:{f:P4e},515:{f:o4e},516:{f:KSe},517:{f:SV},519:{f:L4e},520:{f:DSe},523:{},545:{f:TV},549:{f:CV},566:{},574:{f:USe},638:{f:ZSe},659:{},1048:{},1054:{f:WSe},1084:{},1212:{f:f4e},2048:{f:N4e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:iN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:I0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:T4e,r:12},2173:{f:Sje,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:A4e,r:12},2197:{},2198:{f:yje,r:12},2199:{},2200:{},2201:{},2202:{f:h4e,r:12},2203:{f:I0},2204:{},2205:{},2206:{},2207:{},2211:{f:PSe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:fi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:O4e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:j4e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:NV},1:{},2:{f:V4e},3:{f:Q4e},4:{f:U4e},5:{f:SV},7:{f:$4e},8:{},9:{f:iN},11:{},22:{f:fi},30:{f:YSe},31:{},32:{},33:{f:TV},36:{},37:{f:CV},50:{f:G4e},62:{},52:{},67:{},68:{f:fi},69:{},86:{},126:{},127:{f:M4e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:K4e},223:{},234:{},354:{},421:{},518:{f:jB},521:{f:iN},536:{f:BV},547:{f:jV},561:{},579:{},1030:{f:jB},1033:{f:iN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&PR(r)&&e.push(r)}}function $6e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function hE(e,t,r){return e||(e=Ct(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function G6e(e,t,r,n){var a=Ct(9);return hE(a,e,t),Kre(r,n||"b",a),a}function K6e(e,t,r){var n=Ct(8+2*r.length);return hE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function q6e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Oi(Ha(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,z4e(r,n,a)):qt(e,3,H4e(r,n,a));return;case"b":case"e":qt(e,5,G6e(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,K6e(r,n,(t.v||"").slice(0,255)));return}qt(e,1,hE(null,r,n))}function W6e(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Js(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=is(d)),i=c[d]+l;var A=a?(t[u]||[])[d]:t[i];A&&q6e(e,A,u,d)}}}function X6e(e,t){for(var r=t||{},n=sc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,GR(e,16,r)),W6e(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function Y6e(e,t,r){qt(e,49,zSe({sz:12,name:"Arial"},r))}function J6e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,XSe(a,t[a],r))})}function Z6e(e,t){var r=Ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=Ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Jre(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function eFe(e,t){for(var r=0;r<16;++r)qt(e,224,_V({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,_V(n,0,t))})}function tFe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,C4e(n)),n[1].Tooltip&&qt(e,2048,_4e(n))}delete t["!links"]}function rFe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,I4e(uk(a,n),a))})}}function nFe(e,t,r,n,a){var s=16+qm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,Sg(r,n,s));return}if(t.bf)qt(e,6,jBe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Oi(Ha(t.v)):t.v;qt(e,515,l4e(r,n,i,s));break;case"b":case"e":qt(e,517,i4e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=eL(a.Strings,t.v,a.revStrings);qt(e,253,GSe(r,n,l,s))}else qt(e,516,qSe(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,Sg(r,n,s))}}function aFe(e,t,r){var n=sc(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,A="",h=[],m=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}qt(n,2057,GR(r,16,t)),qt(n,13,Ou(1)),qt(n,12,Ou(100)),qt(n,15,vl(!0)),qt(n,17,vl(!1)),qt(n,16,Ng(.001)),qt(n,95,vl(!0)),qt(n,42,vl(!1)),qt(n,43,vl(!1)),qt(n,130,Ou(1)),qt(n,128,s4e()),qt(n,131,vl(!1)),qt(n,132,vl(!1)),u&&rFe(n,s["!cols"]),qt(n,512,JSe(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){A=Js(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=is(v)),d=h[v]+A;var y=c?(s[x]||[])[v]:s[d];y&&(nFe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||a;return u&&qt(n,574,QSe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,x4e(s["!merges"])),u&&tFe(n,s),qt(n,442,qre(w)),u&&Z6e(n,s),qt(n,10),n.end()}function sFe(e,t,r){var n=sc(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(qt(n,2057,GR(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,l?Ou(1200):null),qt(n,193,iSe(2)),c&&qt(n,191),c&&qt(n,192),qt(n,226),qt(n,92,kSe("SheetJS",r)),qt(n,66,Ou(l?1200:1252)),l&&qt(n,353,Ou(0)),l&&qt(n,448),qt(n,317,D4e(e.SheetNames.length)),l&&e.vbaraw&&qt(n,211),l&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,qre(u))}qt(n,156,Ou(17)),qt(n,25,vl(!1)),qt(n,18,vl(!1)),qt(n,19,Ou(0)),l&&qt(n,431,vl(!1)),l&&qt(n,444,Ou(0)),qt(n,61,MSe()),qt(n,64,vl(!1)),qt(n,141,Ou(0)),qt(n,34,vl(RIe(e)=="true")),qt(n,14,vl(!0)),l&&qt(n,439,vl(!1)),qt(n,218,Ou(0)),Y6e(n,e,r),J6e(n,e.SSF,r),eFe(n,r),l&&qt(n,352,vl(!1));var d=n.end(),A=sc();l&&qt(A,140,k4e()),l&&r.Strings&&$6e(A,252,FSe(r.Strings)),qt(A,10);var h=A.end(),m=sc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};qt(m,133,TSe({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),eo(_)}function iFe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(ab(),nk(e.SSF),r.revssf=sk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,sL(r),r.cellXfs=[],qm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=aFe(a,r,e);return n.unshift(sFe(e,n,r)),eo(n)}function Qne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=oc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return iFe(e,t);case 4:case 3:case 2:return X6e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function QV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,l=s&&s.index||e.length,c=z5e(e.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,A=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var _=w,j=0;_.charAt(0)=="<"&&(j=_.indexOf(">"))>-1;)_=_.slice(j+1);for(var k=0;k<g.length;++k){var I=g[k];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,k=-1)}var E=Kr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((A=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(A||1)-1,c:d+h-1}});var S=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=dre(_),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!_.length){d+=h;continue}var B={t:"s",v:_};r.raw||!_.trim().length||S=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(Md(_))?isNaN(f1(_).getDate())||(B={t:"d",v:Ha(_)},r.cellDates||(B={t:"n",v:Oi(B.v)}),B.z=r.dateNF||Mr[14]):B={t:"n",v:Md(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Hr({r:u,c:d})]=B,d+=h}}}}return n["!ref"]=nn(m),g.length&&(n["!merges"]=g),n}function oFe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Hr({r,c:i}),A=n.dense?(e[r]||[])[i]:e[d],h=A&&A.v!=null&&(A.h||FR(A.w||(Sh(A),A.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":A&&(m["data-t"]=A&&A.t||"z",A.v!=null&&(m["data-v"]=A.v),A.z!=null&&(m["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+A.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var lFe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',cFe="</body></html>";function uFe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Km(QV(r[0],t),t);var n=lL();return r.forEach(function(a,s){cL(n,QV(a,t),"Sheet"+(s+1))}),n}function dFe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Hne(e,t){var r=t||{},n=r.header!=null?r.header:lFe,a=r.footer!=null?r.footer:cFe,s=[n],i=oc(e["!ref"]);r.dense=Array.isArray(e),s.push(dFe(e,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(oFe(e,i,l,r));return s.push("</table>"+a),s.join("")}function Vne(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=oc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var A=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var j=l[g];if(HV(j)){if(n.display)continue;m[x]={hidden:!0}}var k=j.children;for(v=y=0;v<k.length;++v){var I=k[v];if(!(n.display&&HV(I))){var E=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):dre(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<A.length;++h){var B=A[h];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,h=-1)}_=+I.getAttribute("colspan")||1,((w=+I.getAttribute("rowspan")||1)>1||_>1)&&A.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var R={t:"s",v:E},P=I.getAttribute("data-t")||I.getAttribute("t")||"";E!=null&&(E.length==0?R.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?R={t:"b",v:!0}:E==="FALSE"?R={t:"b",v:!1}:isNaN(Md(E))?isNaN(f1(E).getDate())||(R={t:"d",v:Ha(E)},n.cellDates||(R={t:"n",v:Oi(R.v)}),R.z=n.dateNF||Mr[14]):R={t:"n",v:Md(E)})),R.z===void 0&&S!=null&&(R.z=S);var F="",L=I.getElementsByTagName("A");if(L&&L.length)for(var M=0;M<L.length&&!(L[M].hasAttribute("href")&&(F=L[M].getAttribute("href"),F.charAt(0)!="#"));++M);F&&F.charAt(0)!="#"&&(R.l={Target:F}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=R):e[Hr({c:y+s,r:x+a})]=R,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return A.length&&(e["!merges"]=(e["!merges"]||[]).concat(A)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=nn(u),x>=c&&(e["!fullref"]=nn((u.e.r=l.length-g+x-1+a,u))),e}function zne(e,t){var r=t||{},n=r.dense?[]:{};return Vne(n,e,t)}function AFe(e,t){return Km(zne(e,t),t)}function HV(e){var t="",r=fFe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function fFe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function hFe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var VV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function $ne(e,t){var r=t||{},n=OR(e),a=[],s,i,l={name:""},c="",u=0,d,A,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",_=0,j=[],k=-1,I=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,B={},R=[],P={},F=0,L=0,M=[],ee=1,V=1,q=[],K={Names:[]},X={},Z=["",""],G=[],D={},U="",z=0,J=!1,re=!1,oe=0;for(o2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=o2.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=nn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=nn(E)),R.length&&(g["!merges"]=R),M.length&&(g["!rows"]=M),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,re=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Kr(x[0],!1),k=I=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},R=[],M=[],re=!0);break;case"table-row-group":x[1]==="/"?--S:++S;break;case"table-row":case"行":if(x[1]==="/"){k+=ee,ee=1;break}if(A=Kr(x[0],!1),A.行号?k=A.行号-1:k==-1&&(k=0),ee=+A["number-rows-repeated"]||1,ee<10)for(oe=0;oe<ee;++oe)S>0&&(M[k+oe]={level:S});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[k]||(g[k]=[]),g[k][I]={t:"z"}):g[Hr({r:k,c:I})]={t:"z"}),w="",j=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++I,y=Kr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=LV(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Qn(y["string-value"]||""),r.dense?(g[k]||(g[k]=[]),g[k][I]=v):g[Hr({r:k,c:I})]=v),I+=V-1;else if(x[1]!=="/"){++I,w="",_=0,j=[],V=1;var se=ee?k+ee-1:k;if(I>E.e.c&&(E.e.c=I),I<E.s.c&&(E.s.c=I),k<E.s.r&&(E.s.r=k),se>E.e.r&&(E.e.r=se),y=Kr(x[0],!1),G=[],D={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(F=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:k,c:I},e:{r:k+F-1,c:I+L-1}},v.F=nn(P),q.push([P,v.F])),y.formula)v.f=LV(y.formula);else for(oe=0;oe<q.length;++oe)k>=q[oe][0].s.r&&k<=q[oe][0].e.r&&I>=q[oe][0].s.c&&I<=q[oe][0].e.c&&(v.F=q[oe][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(F=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:k,c:I},e:{r:k+F-1,c:I+L-1}},R.push(P)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ua(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Ha(y["date-value"]),r.cellDates||(v.t="n",v.v=Oi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Q5e(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=ik(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Qn(y["string-value"]),j=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=w||"",j.length&&(v.R=j),J=_==0),X.Target&&(v.l=X),G.length>0&&(v.c=G,G=[]),w&&r.cellText!==!1&&(v.w=w),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var le=0;le<ee;++le){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[k+le]||(g[k+le]=[]),g[k+le][I]=le==0?v:Va(v);--V>0;)g[k+le][I+V]=Va(v);else for(g[Hr({r:k+le,c:I})]=v;--V>0;)g[Hr({r:k+le,c:I+V})]=Va(v);E.e.c<=I&&(E.e.c=I)}V=parseInt(y["number-columns-repeated"]||"1",10),I+=V-1,V=0,v={},w="",j=[]}X={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;D.t=w,j.length&&(D.R=j),D.a=U,G.push(D)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);U="",z=0,w="",_=0,j=[];break;case"creator":x[1]==="/"?U=n.slice(z,x.index):z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Kr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=VV[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=VV[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Kr(x[0],!1),Z=BB(i["cell-range-address"]);var ue={Name:i.name,Ref:Z[0]+"!"+Z[1]};re&&(ue.Sheet=m.length),K.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var ke=hFe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+ke[0]}else Kr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{Z=BB(Kr(x[0])["target-range-address"]),h[Z[0]]["!autofilter"]={ref:Z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(X=Kr(x[0],!1),!X.href)break;X.Target=Qn(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(Z=BB(X.Target.slice(1)),X.Target="#"+Z[0]+"!"+Z[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ae={Sheets:h,SheetNames:m,Workbook:K};return r.bookSheets&&delete ae.Sheets,ae}function zV(e,t){t=t||{},Iu(e,"META-INF/manifest.xml")&&Q_e(Ai(e,"META-INF/manifest.xml"),t);var r=Uc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=$ne(Ea(r),t);return Iu(e,"meta.xml")&&(n.Props=Dre(Ai(e,"meta.xml"))),n}function $V(e,t){return $ne(e,t)}var mFe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+i2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ti+t}}(),GV=function(){var e=function(s){return pa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+pa(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,A=oc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=A.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<A.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=A.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<A.s.c;++d)c.push(t);for(;d<=A.e.c;++d){var y=!1,w={},_="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var j=Hr({r:u,c:d}),k=g?(s[u]||[])[d]:s[j];if(k&&k.f&&(w["table:formula"]=pa(DBe(k.f)),k.F&&k.F.slice(0,j.length)==j)){var I=oc(k.F);w["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,w["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!k){c.push(t);continue}switch(k.t){case"b":_=k.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=k.v?"true":"false";break;case"n":_=k.w||String(k.v||0),w["office:value-type"]="float",w["office:value"]=k.v||0;break;case"s":case"str":_=k.v==null?"":k.v,w["office:value-type"]="string";break;case"d":_=k.w||Ha(k.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Ha(k.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(k.l&&k.l.Target){var S=k.l.Target;S=S.charAt(0)=="#"?"#"+PBe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Kt("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var A=u["!cols"][d];if(A.width==null&&A.wpx==null&&A.wch==null)continue;Bm(A),A.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var A=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+A+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[ti],u=i2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=i2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Ore().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var A=0;A!=i.SheetNames.length;++A)c.push(n(i.Sheets[i.SheetNames[A]],i,A));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Gne(e,t){if(t.bookType=="fods")return GV(e,t);var r=BR(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,GV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,mFe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,ti+Ore()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,z_e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,H_e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function kg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function MF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Gm(e))}function pFe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Mc($A(e))}function gFe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Im(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function KV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function xFe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function vFe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function h2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function fa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ts(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=h2(e,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:i=4,l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=h2(e,r),l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function po(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(fa(n*8+a.type)),a.type==2&&t.push(fa(a.data.length)),t.push(a.data))})}),Im(t)}function nL(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function ju(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=h2(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ts(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Ts(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ts(s[3][0].data)>>>0>0),r.push(i)}return r}function Lx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:fa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:fa(i.data.length)}],n[2].push({data:po(i.meta),type:2})});var s=po(n);t.push(fa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),Im(t)}function bFe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=h2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=t[r[0]],l>1&&(i|=t[r[0]+1]<<8),l>2&&(i|=t[r[0]+2]<<16),l>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Im(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Im(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Bu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(bFe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Im(t)}function Mx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=fa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Im(t)}function yFe(e,t,r,n){var a=kg(e),s=a.getUint32(4,!0),i=(n>1?12:8)+KV(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=KV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var A;switch(e[2]){case 0:break;case 2:A={t:"n",v:u};break;case 3:A={t:"s",v:t[c]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(l>-1)A={t:"s",v:r[l]};else if(c>-1)A={t:"s",v:t[c]};else if(!isNaN(u))A={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return A}function wFe(e,t,r){var n=kg(e),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=xFe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var A;switch(e[1]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:t[l]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(i>-1)A={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:A={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return A}function IB(e,t){var r=new Uint8Array(32),n=kg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,vFe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function FB(e,t){var r=new Uint8Array(32),n=kg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function EFe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return yFe(e,t,r,e[0]);case 5:return wFe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ko(e){var t=Wn(e);return h2(t[1][0].data)}function qV(e,t){var r=Wn(t.data),n=Ts(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Wn(i.data),c=Ts(l[1][0].data)>>>0;switch(n){case 1:s[c]=MF(l[3][0].data);break;case 8:{var u=e[Ko(l[9][0].data)][0],d=Wn(u.data),A=e[Ko(d[1][0].data)][0],h=Ts(A.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Wn(A.data);s[c]=m[3].map(function(g){return MF(g.data)}).join("")}break}}),s}function CFe(e,t){var r,n,a,s,i,l,c,u,d,A,h,m,g,x,v=Wn(e),y=Ts(v[1][0].data)>>>0,w=Ts(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Ts(v[8][0].data)>0||!1,j,k;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)j=(l=(i=v[7])==null?void 0:i[0])==null?void 0:l.data,k=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((A=(d=v[4])==null?void 0:d[0])!=null&&A.data&&t!=1)j=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,k=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=_?4:1,E=kg(j),S=[],B=0;B<j.length/2;++B){var R=E.getUint16(B*2,!0);R<65535&&S.push([B,R])}if(S.length!=w)throw"Expected ".concat(w," cells, found ").concat(S.length);var P=[];for(B=0;B<S.length-1;++B)P[S[B][0]]=k.subarray(S[B][1]*I,S[B+1][1]*I);return S.length>=1&&(P[S[S.length-1][0]]=k.subarray(S[S.length-1][1]*I)),{R:y,cells:P}}function NFe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ts(n[7][0].data)>>>0>0?1:0:-1,s=nL(n[5],function(i){return CFe(i,a)});return{nrows:Ts(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function _Fe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ts(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ts(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var i=Wn(a[4][0].data),l=qV(e,e[Ko(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?qV(e,e[Ko(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(A){var h=Wn(A.data),m=e[Ko(h[2][0].data)][0],g=Ts(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=NFe(e,m);x.data.forEach(function(v,y){v.forEach(function(w,_){var j=Hr({r:d+y,c:_}),k=EFe(w,l,c);k&&(r[j]=k)})}),d+=x.nrows})}function SFe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Ko(r[2][0].data)],s=Ts(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return _Fe(e,a[0],n),n}function kFe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?MF(n[1][0].data):"",sheets:[]},s=nL(n[2],Ko);return s.forEach(function(i){e[i].forEach(function(l){var c=Ts(l.meta[1][0].data);c==6e3&&a.sheets.push(SFe(e,l))})}),a}function jFe(e,t){var r=lL(),n=Wn(t.data),a=nL(n[1],Ko);if(a.forEach(function(s){e[s].forEach(function(i){var l=Ts(i.meta[1][0].data);if(l==2){var c=kFe(e,i);c.sheets.forEach(function(u,d){cL(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function OB(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Bu(c.content)}catch(A){return console.log("?? "+c.content.length+" "+(A.message||A))}var d;try{d=ju(u)}catch(A){return console.log("## "+(A.message||A))}d.forEach(function(A){s[A.id]=A.messages,i.push(A.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ts(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Ts(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return jFe(s,l)}function BFe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ts(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=kg(e[7][0].data),d=0,A=[],h=kg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=IB({t:"s",v:t[x]},r),y=FB({t:"s",v:t[x]},r);break;case"number":v=IB({t:"n",v:t[x]},r),y=FB({t:"n",v:t[x]},r);break;case"boolean":v=IB({t:"b",v:t[x]},r),y=FB({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}A.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=fa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Im(A),e[3][0].data=Im(g),c}function TFe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=oc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=W_(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(U){return U.forEach(function(z){typeof z=="string"&&i.push(z)})});var l={},c=[],u=_r.read(t.numbers,{type:"base64"});u.FileIndex.map(function(U,z){return[U,u.FullPaths[z]]}).forEach(function(U){var z=U[0],J=U[1];if(z.type==2&&z.name.match(/\.iwa/)){var re=z.content,oe=Bu(re),se=ju(oe);se.forEach(function(le){c.push(le.id),l[le.id]={deps:[],location:J,type:Ts(le.messages[0].meta[1][0].data)}})}}),c.sort(function(U,z){return U-z});var d=c.filter(function(U){return U>1}).map(function(U){return[U,fa(U)]});u.FileIndex.map(function(U,z){return[U,u.FullPaths[z]]}).forEach(function(U){var z=U[0];if(U[1],!!z.name.match(/\.iwa/)){var J=ju(Bu(z.content));J.forEach(function(re){re.messages.forEach(function(oe){d.forEach(function(se){re.messages.some(function(le){return Ts(le.meta[1][0].data)!=11006&&gFe(le.data,se[1])})&&l[se[0]].deps.push(re.id)})})})}});for(var A=_r.find(u,l[1].location),h=ju(Bu(A.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Ko(Wn(m.messages[0].data)[1][0].data);for(A=_r.find(u,l[v].location),h=ju(Bu(A.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Ko(Wn(m.messages[0].data)[2][0].data),A=_r.find(u,l[v].location),h=ju(Bu(A.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Ko(Wn(m.messages[0].data)[2][0].data),A=_r.find(u,l[v].location),h=ju(Bu(A.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Wn(m.messages[0].data);{y[6][0].data=fa(n.e.r+1),y[7][0].data=fa(n.e.c+1);var w=Ko(y[46][0].data),_=_r.find(u,l[w].location),j=ju(Bu(_.content));{for(var k=0;k<j.length&&j[k].id!=w;++k);if(j[k].id!=w)throw"Bad ColumnRowUIDMapArchive";var I=Wn(j[k].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var E=0;E<=n.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:fa(E+420690)}],I[1].push({type:2,data:po(S)}),I[2].push({type:0,data:fa(E)}),I[3].push({type:0,data:fa(E)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)S=[],S[1]=S[2]=[{type:0,data:fa(B+726270)}],I[4].push({type:2,data:po(S)}),I[5].push({type:0,data:fa(B)}),I[6].push({type:0,data:fa(B)});j[k].messages[0].data=po(I)}_.content=Mx(Lx(j)),_.size=_.content.length,delete y[46];var R=Wn(y[4][0].data);{R[7][0].data=fa(n.e.r+1);var P=Wn(R[1][0].data),F=Ko(P[2][0].data);_=_r.find(u,l[F].location),j=ju(Bu(_.content));{if(j[0].id!=F)throw"Bad HeaderStorageBucket";var L=Wn(j[0].messages[0].data);for(B=0;B<s.length;++B){var M=Wn(L[2][0].data);M[1][0].data=fa(B),M[4][0].data=fa(s[B].length),L[2][B]={type:L[2][0].type,data:po(M)}}j[0].messages[0].data=po(L)}_.content=Mx(Lx(j)),_.size=_.content.length;var ee=Ko(R[2][0].data);_=_r.find(u,l[ee].location),j=ju(Bu(_.content));{if(j[0].id!=ee)throw"Bad HeaderStorageBucket";for(L=Wn(j[0].messages[0].data),E=0;E<=n.e.c;++E)M=Wn(L[2][0].data),M[1][0].data=fa(E),M[4][0].data=fa(n.e.r+1),L[2][E]={type:L[2][0].type,data:po(M)};j[0].messages[0].data=po(L)}_.content=Mx(Lx(j)),_.size=_.content.length;var V=Ko(R[4][0].data);(function(){for(var U=_r.find(u,l[V].location),z=ju(Bu(U.content)),J,re=0;re<z.length;++re){var oe=z[re];oe.id==V&&(J=oe)}var se=Wn(J.messages[0].data);{se[3]=[];var le=[];i.forEach(function(ae,Ne){le[1]=[{type:0,data:fa(Ne)}],le[2]=[{type:0,data:fa(1)}],le[3]=[{type:2,data:pFe(ae)}],se[3].push({type:2,data:po(le)})})}J.messages[0].data=po(se);var ue=Lx(z),ke=Mx(ue);U.content=ke,U.size=U.content.length})();var q=Wn(R[3][0].data);{var K=q[1][0];delete q[2];var X=Wn(K.data);{var Z=Ko(X[2][0].data);(function(){for(var U=_r.find(u,l[Z].location),z=ju(Bu(U.content)),J,re=0;re<z.length;++re){var oe=z[re];oe.id==Z&&(J=oe)}var se=Wn(J.messages[0].data);{delete se[6],delete q[7];var le=new Uint8Array(se[5][0].data);se[5]=[];for(var ue=0,ke=0;ke<=n.e.r;++ke){var ae=Wn(le);ue+=BFe(ae,s[ke],i),ae[1][0].data=fa(ke),se[5].push({data:po(ae),type:2})}se[1]=[{type:0,data:fa(n.e.c+1)}],se[2]=[{type:0,data:fa(n.e.r+1)}],se[3]=[{type:0,data:fa(ue)}],se[4]=[{type:0,data:fa(n.e.r+1)}]}J.messages[0].data=po(se);var Ne=Lx(z),je=Mx(Ne);U.content=je,U.size=U.content.length})()}K.data=po(X)}R[3][0].data=po(q)}y[4][0].data=po(R)}m.messages[0].data=po(y);var G=Lx(h),D=Mx(G);return A.content=D,A.size=A.content.length,u}function Kne(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function aL(e){Kne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function sL(e){Kne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function IFe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function FFe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,IFe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function OFe(e,t,r,n,a,s,i,l,c,u,d,A){try{s[n]=Cw(Uc(e,r,!0),t);var h=Ai(e,t),m;switch(l){case"sheet":m=r6e(h,t,a,c,s[n],u,d,A);break;case"chart":if(m=n6e(h,t,a,c,s[n],u,d,A),!m||!m["!drawel"])break;var g=Yy(m["!drawel"].Target,t),x=l2(g),v=Vje(Uc(e,g,!0),Cw(Uc(e,x,!0),g)),y=Yy(v,g),w=l2(y);m=BIe(Uc(e,y,!0),y,c,Cw(Uc(e,w,!0),y),u,m);break;case"macro":m=a6e(h,t,a,c,s[n],u,d,A);break;case"dialog":m=s6e(h,t,a,c,s[n],u,d,A);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=m;var _=[];s&&s[n]&&Os(s[n]).forEach(function(j){var k="";if(s[n][j].Type==Cn.CMNT){k=Yy(s[n][j].Target,t);var I=c6e(Ai(e,k,!0),k,c);if(!I||!I.length)return;FV(m,I,!1)}s[n][j].Type==Cn.TCMNT&&(k=Yy(s[n][j].Target,t),_=_.concat($je(Ai(e,k,!0),c)))}),_&&_.length&&FV(m,_,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function Eu(e){return e.charAt(0)=="/"?e.slice(1):e}function DFe(e,t){if(ab(),t=t||{},aL(t),Iu(e,"META-INF/manifest.xml")||Iu(e,"objectdata.xml"))return zV(e,t);if(Iu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof OB<"u"){if(e.FileIndex)return OB(e);var r=_r.utils.cfb_new();return eV(e).forEach(function(M){un(r,M,G5e(e,M))}),OB(r)}throw new Error("Unsupported NUMBERS file")}if(!Iu(e,"[Content_Types].xml"))throw Iu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Iu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=eV(e),a=M_e(Uc(e,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Ai(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Ai(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Nw=[],a.sst)try{Nw=l6e(Ai(e,Eu(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=o6e(Uc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=i6e(Ai(e,Eu(a.style)),a.style,c,t))}a.links.map(function(M){try{var ee=Cw(Uc(e,l2(Eu(M))),M);return d6e(Ai(e,Eu(M)),ee,M,t)}catch{}});var d=t6e(Ai(e,Eu(a.workbooks[0])),a.workbooks[0],t),A={},h="";a.coreprops.length&&(h=Ai(e,Eu(a.coreprops[0]),!0),h&&(A=Dre(h)),a.extprops.length!==0&&(h=Ai(e,Eu(a.extprops[0]),!0),h&&G_e(h,A,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Uc(e,Eu(a.custprops[0]),!0),h&&(m=q_e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ee){return ee.name}):A.Worksheets&&A.SheetNames.length>0&&(i=A.SheetNames),t.bookProps&&(g.Props=A,g.Custprops=m),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=u6e(Ai(e,Eu(a.calcchain)),a.calcchain));var v=0,y={},w,_;{var j=d.Sheets;A.Worksheets=j.length,A.SheetNames=[];for(var k=0;k!=j.length;++k)A.SheetNames[k]=j[k].name}var I=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Iu(e,S)||(S="xl/_rels/workbook."+I+".rels");var B=Cw(Uc(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=A6e(Ai(e,Eu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=Kje(Ai(e,Eu(a.people[0])),t)),B&&(B=FFe(B,d.Sheets));var R=Ai(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=A.Worksheets;++v){var P="sheet";if(B&&B[v]?(w="xl/"+B[v][1].replace(/[\/]?xl\//,""),Iu(e,w)||(w=B[v][1]),Iu(e,w)||(w=S.replace(/_rels\/.*$/,"")+B[v][1]),P=B[v][2]):(w="xl/worksheets/sheet"+(v+1-R)+"."+I,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(A.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var F=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==v&&(F=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==A.SheetNames[v].toLowerCase()&&(F=1);if(!F)continue e}}OFe(e,w,_,A.SheetNames[v],v,y,i,P,t,d,c,u)}return g={Directory:a,Workbook:d,Props:A,Custprops:m,Deps:x,Sheets:i,SheetNames:A.SheetNames,Strings:Nw,Styles:u,Themes:c,SSF:Va(Mr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,ee){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[ee]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=Ai(e,Eu(a.vba[0]),!0):a.defaults&&a.defaults.bin===t3e&&(g.vbaraw=Ai(e,"xl/vbaProject.bin",!0))),g}function PFe(e,t){var r=t||{},n="Workbook",a=_r.find(e,n);try{if(n="/!DataSpaces/Version",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Ake(a.content),n="/!DataSpaces/DataSpaceMap",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=hke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=mke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);gke(a.content)}catch{}if(n="/EncryptionInfo",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=xke(a.content);if(n="/EncryptedPackage",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function RFe(e,t){return t.bookType=="ods"?Gne(e,t):t.bookType=="numbers"?TFe(e,t):t.bookType=="xlsb"?LFe(e,t):MFe(e,t)}function LFe(e,t){bv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(ab(),nk(e.SSF),t.revssf=sk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,_w?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=bne.indexOf(t.bookType)>-1,a=zR();sL(t=t||{});var s=BR(),i="",l=0;if(t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Pre(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Mre(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Os(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Ure(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},A=e.Sheets[e.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,un(s,i,h6e(l-1,i,t,e,d)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(A){var m=A["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,un(s,x,g6e(m,x)),a.comments.push(x),ha(d,-1,"../comments"+l+"."+r,Cn.CMNT),g=!0),A["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+l+".vml",xne(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}d["!id"].rId1&&un(s,l2(i),Uv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,p6e(t.Strings,i,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,f6e(e,i)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,XR(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,m6e(e,i,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,x6e(i)),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),un(s,"[Content_Types].xml",Fre(a,t)),un(s,"_rels/.rels",Uv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Uv(t.wbrels)),delete t.revssf,delete t.ssf,s}function MFe(e,t){bv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(ab(),nk(e.SSF),t.revssf=sk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,_w?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=bne.indexOf(t.bookType)>-1,a=zR();sL(t=t||{});var s=BR(),i="",l=0;if(t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Pre(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Mre(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Os(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Ure(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var A={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,un(s,i,Tne(l-1,t,e,A)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,un(s,v,Gje(g,d,t)),a.threadedcomments.push(v),ha(A,-1,"../threadedComments/threadedComment"+l+"."+r,Cn.TCMNT)),v="xl/comments"+l+"."+r,un(s,v,vne(g)),a.comments.push(v),ha(A,-1,"../comments"+l+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&un(s,"xl/drawings/vmlDrawing"+l+".vml",xne(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}A["!id"].rId1&&un(s,l2(i),Uv(A))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,ine(t.Strings,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,Pne(e)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,XR(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,hne(e,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,gne()),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,qje(d)),a.people.push(i),ha(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),un(s,"[Content_Types].xml",Fre(a,t)),un(s,"_rels/.rels",Uv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Uv(t.wbrels)),delete t.revssf,delete t.ssf,s}function iL(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Kc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function UFe(e,t){return _r.find(e,"EncryptedPackage")?PFe(e,t):Une(e,t)}function QFe(e,t){var r,n=e,a=t||{};return a.type||(a.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r=lre(n,a),DFe(r,a)}function qne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return RF(e.slice(r),t);default:break e}return h1.to_workbook(e,t)}function HFe(e,t){var r="",n=iL(e,t);switch(t.type){case"base64":r=Kc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Cg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",qne(r,t)}function VFe(e,t){var r=e;return t.type=="base64"&&(r=Kc(r)),r=r2.utils.decode(1200,r.slice(2),"str"),t.type="binary",qne(r,t)}function zFe(e){return e.match(/[^\x00-\x7F]/)?$A(e):e}function DB(e,t,r,n){return n?(r.type="string",h1.to_workbook(e,r)):h1.to_workbook(t,r)}function p1(e,t){NR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return p1(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Hv={},r.dateNF&&(Hv.dateNF=r.dateNF),r.type||(r.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=xn?"buffer":"binary",n=L5e(e),typeof Uint8Array<"u"&&!xn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=zFe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=Va(r),r.type="array",p1(_R(n),r)}switch((a=iL(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return UFe(_r.read(n,r),r);break;case 9:if(a[1]<=8)return Une(n,r);break;case 60:return RF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return W4e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return ane.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?QFe(n,r):DB(e,n,r,s);case 239:return a[3]===60?RF(n,r):DB(e,n,r,s);case 255:if(a[1]===254)return VFe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return ng.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return ng.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return PF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return dne.to_workbook(n,r);break;case 10:case 13:case 32:return HFe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return q4e.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?PF.to_workbook(n,r):DB(e,n,r,s)}function Wne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return oE(t.file,_r.write(e,{type:xn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return _r.write(e,t)}function $Fe(e,t){var r=Va(t||{}),n=RFe(e,r);return GFe(n,r)}function GFe(e,t){var r={},n=xn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?_r.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(rk(a))}return t.password&&typeof encrypt_agile<"u"?Wne(encrypt_agile(a,t.password),t):t.type==="file"?oE(t.file,a):t.type=="string"?Ea(a):a}function KFe(e,t){var r=t||{},n=z6e(e,r);return Wne(n,r)}function OA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return n2($A(n));case"binary":return $A(n);case"string":return e;case"file":return oE(t.file,n,"utf8");case"buffer":return xn?Hh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):OA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qFe(e,t){switch(t.type){case"base64":return n2(e);case"binary":return e;case"string":return e;case"file":return oE(t.file,e,"binary");case"buffer":return xn?Hh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function uN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?n2(r):t.type=="string"?Ea(r):r;case"file":return oE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Xne(e,t){NR(),UIe(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Xne(e,r);return r.type="array",rk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return OA(R6e(e,r),r);case"slk":case"sylk":return OA(nne.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return OA(Hne(e.Sheets[e.SheetNames[a]],r),r);case"txt":return qFe(Yne(e.Sheets[e.SheetNames[a]],r),r);case"csv":return OA(oL(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return OA(ane.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return uN(PF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return OA(h1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return OA(dne.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return OA(sne.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return OA(Gne(e,r),r);case"wk1":return uN(ng.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return uN(ng.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),uN(Qne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),KFe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return $Fe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function WFe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function mE(e,t,r){var n={};return n.type="file",n.file=t,WFe(n),Xne(e,n)}function XFe(e,t,r,n,a,s,i,l){var c=Js(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),A=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=i?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Sh(g,x,l);x!=null&&(A=!1)}}return{row:h,isempty:A}}function W_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Hn(d);break;case"number":c=Hn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var A=Js(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,_={};v&&!e[y]&&(e[y]=[]);var j=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(j[w]||{}).hidden)switch(h[w]=is(w),r=v?e[y][w]:e[h[w]+A],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=Sh(r,null,u),x=_[i]||0,!x)_[i]=1;else{do l=i+"_"+x++;while(_[l]);_[i]=x,_[l]=1}s[w]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(k[y]||{}).hidden){var I=XFe(e,c,y,h,n,s,v,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=I.row)}return m.length=g,m}var WV=/"/g;function YFe(e,t,r,n,a,s,i,l){for(var c=!0,u=[],d="",A=Js(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+A];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Sh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(WV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(WV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function oL(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",A=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(A[g]=is(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=YFe(e,a,v,A,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function Yne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=oL(e,t);return r}function JFe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",i=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)i[l]=is(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Js(d),l=a.s.c;l<=a.e.c;++l)if(t=i[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Jne(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+t.length-1+a}};if(s["!ref"]){var A=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,A.e.c),d.e.r=Math.max(d.e.r,A.e.r),i==-1&&(i=A.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Os(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],_="z",j="",k=Hr({c:l+m,r:i+v+a});u=m2(s,k),w&&typeof w=="object"&&!(w instanceof Date)?s[k]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Oi(w)),j=n.dateNF||Mr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,j&&(u.z=j)):s[k]=u={t:_,v:w},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Js(i);if(a)for(m=0;m<h.length;++m)s[is(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=nn(d),s}function ZFe(e,t){return Jne(null,e,t)}function m2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?m2(e,Hr(t)):m2(e,Hr({r:t,c:r||0}))}function eOe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function lL(){return{SheetNames:[],Sheets:{}}}function cL(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Dne(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function tOe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=eOe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function rOe(e,t){return e.z=t,e}function Zne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function nOe(e,t,r){return Zne(e,"#"+t,r)}function aOe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function sOe(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:nn(t),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=m2(e,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ii={encode_col:is,encode_row:Js,encode_cell:Hr,encode_range:nn,decode_col:LR,decode_row:RR,split_cell:p_e,decode_cell:os,decode_range:oc,format_cell:Sh,sheet_add_aoa:_re,sheet_add_json:Jne,sheet_add_dom:Vne,aoa_to_sheet:sb,json_to_sheet:ZFe,table_to_sheet:zne,table_to_book:AFe,sheet_to_csv:oL,sheet_to_txt:Yne,sheet_to_json:W_,sheet_to_html:Hne,sheet_to_formulae:JFe,sheet_to_row_object_array:W_,sheet_get_cell:m2,book_new:lL,book_append_sheet:cL,book_set_sheet_visibility:tOe,cell_set_number_format:rOe,cell_set_hyperlink:Zne,cell_set_internal_link:nOe,cell_add_comment:aOe,sheet_set_array_formula:sOe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const UF="carga_horaria_asignaciones",eae="usuarios",iOe=e=>{const t=e.data();return{id:e.id,...t}},oOe=e=>{const t=$t(vt(ft,eae),Ir("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),pr("nombreCompleto","asc"));return fr(t,n=>{const a=n.docs.map(s=>{const i=s.data();return{id:s.id,nombre:i.nombreCompleto||i.nombre||i.email||"Sin nombre",departamento:i.departamento||"General",horasContrato:i.horasContrato||44,perfil:i.profile||"PROFESORADO",email:i.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},lOe=async e=>{try{return(await hn(vt(ft,eae),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Fs()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},cOe=e=>{const t=$t(vt(ft,UF),pr("docenteNombre","asc"));return fr(t,n=>{const a=n.docs.map(s=>iOe(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},uOe=async(e,t=!1)=>{try{if(t){const a=(await Dn(vt(ft,UF))).docs.map(s=>Ra(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>hn(vt(ft,UF),{...n,createdAt:Fs(),updatedAt:Fs()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},X_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},Jy=e=>{const t=X_(e);return e-t},j5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),tae=(e,t)=>{const r=X_(e.horasContrato),n=Jy(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+j5(g.horasPorCurso),0),i=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+i,c=0,u=r-l,d=n-c,A=[],h=[];return l>r&&A.push(`Excede horas lectivas: ${l}/${r}`),c>n&&A.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:i,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:A.length===0,warnings:h,errors:A}},dOe=(e,t)=>{const r=tae(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},AOe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},fOe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,hOe=()=>{C.useEffect(()=>{const G=document.createElement("style");return G.innerHTML=fOe,document.head.appendChild(G),()=>{document.head.removeChild(G)}},[]);const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[i,l]=C.useState(!1),[c,u]=C.useState("docentes"),[d,A]=C.useState([]),[h,m]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[w,_]=C.useState("");C.useEffect(()=>oOe(D=>t(D)),[]),C.useEffect(()=>cOe(D=>{const U=D.map(z=>{let J=z.funcionesLectivas||[];!J.length&&z.funcionesNoLectivas&&z.funcionesNoLectivas.length?J=z.funcionesNoLectivas:!J.length&&z.otraFuncion&&(J=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:z.otraFuncion,horas:parseInt(z.otraFuncion)||0}]);const{funcionesNoLectivas:re,otraFuncion:oe,...se}=z;return{...se,funcionesLectivas:J}});n(U)}),[]);const j=C.useMemo(()=>{const G={};return e.forEach(D=>{const U=r.filter(z=>z.docenteId===D.id);G[D.id]=tae(D,U)}),G},[e,r]);C.useEffect(()=>{const G=[];e.forEach(D=>G.push(...dOe(D,r))),A(G)},[e,r]);const k=C.useMemo(()=>w?e.filter(G=>{var D;return G.nombre.toLowerCase().includes(w.toLowerCase())||((D=G.email)==null?void 0:D.toLowerCase().includes(w.toLowerCase()))}):e,[e,w]),I=C.useMemo(()=>r.filter(D=>{const U=e.find(z=>z.id===D.docenteId);return!(!U||a.busqueda&&!U.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&D.asignaturaOModulo!==a.asignatura||a.departamento&&U.departamento!==a.departamento||a.curso&&!Object.keys(D.horasPorCurso).includes(a.curso))}).sort((D,U)=>D.docenteId!==U.docenteId?D.docenteId.localeCompare(U.docenteId):(D.asignaturaOModulo||"").localeCompare(U.asignaturaOModulo||"")),[r,e,a]),E=async()=>{try{if(m(!0),!v.nombre||!v.email){alert("El nombre y email son obligatorios"),m(!1);return}await lOe(v),x(!1),y({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(G){console.error(G),alert("Error al crear docente")}finally{m(!1)}},S=C.useCallback(()=>{if(e.length===0)return;const G={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:js[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(D=>[...D,G])},[e]),B=C.useCallback((G,D)=>{const U=r.filter(re=>re.docenteId===G).map(re=>re.asignaturaOModulo);let z=js[0];for(const re of js)if(!U.includes(re)){z=re;break}const J={id:`asig_${Date.now()}`,docenteId:G,docenteNombre:D,asignaturaOModulo:z,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(re=>[...re,J])},[r]),R=C.useCallback(G=>n(D=>D.filter(U=>U.id!==G)),[]),P=C.useCallback(G=>{n(D=>D.map(U=>{if(U.id!==G)return U;const z={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...U,funcionesLectivas:[...U.funcionesLectivas||[],z]}}))},[]),F=C.useCallback((G,D,U,z)=>{n(J=>J.map(re=>{if(re.id!==G)return re;const oe=(re.funcionesLectivas||[]).map(se=>se.id===D?{...se,[U]:z}:se);return{...re,funcionesLectivas:oe}}))},[]),L=C.useCallback((G,D)=>{n(U=>U.map(z=>{if(z.id!==G)return z;const J=(z.funcionesLectivas||[]).filter(re=>re.id!==D);return{...z,funcionesLectivas:J}}))},[]),M=C.useCallback((G,D,U)=>{n(z=>z.map(J=>{if(J.id!==G)return J;const re={...J,[D]:U};if(D==="docenteId"){const oe=e.find(se=>se.id===U);oe&&(re.docenteNombre=oe.nombre)}return D==="horasPorCurso"&&(re.horasXAsig=j5(U)),re}))},[e]),ee=C.useCallback((G,D,U)=>{n(z=>z.map(J=>{if(J.id!==G)return J;const re={...J.horasPorCurso};return U===0?delete re[D]:re[D]=U,{...J,horasPorCurso:re,horasXAsig:j5(re)}}))},[]),V=C.useCallback(G=>{m(!0);const D=new FileReader;D.onload=U=>{var z;try{const J=new Uint8Array((z=U.target)==null?void 0:z.result),re=p1(J,{type:"array"}),oe=re.Sheets["Docentes 2025"]||re.Sheets[re.SheetNames[0]],se=Ii.sheet_to_json(oe,{header:1});let le=-1;for(let ae=0;ae<se.length;ae++){const Ne=se[ae];if(Ne&&Ne.some(je=>typeof je=="string"&&(je.includes("Docente")||je.includes("ASIGNATURA")||_s.some(_e=>je.includes(_e.replace("º","")))))){le=ae;break}}if(le===-1){alert("No se encontró la fila de encabezado en el archivo");return}const ue=se[le],ke=[];for(let ae=le+1;ae<se.length;ae++){const Ne=se[ae];if(!Ne||Ne.length===0)continue;const je=Ne[ue.indexOf("Docente")]||"";if(!je)continue;const _e=e.find(xe=>xe.nombre.toLowerCase().includes(je.toLowerCase()));if(!_e)continue;const me={};ue.forEach((xe,Oe)=>{if(typeof xe=="string"){const Re=AOe(xe.trim());if(_s.includes(Re)){const $e=parseInt(Ne[Oe])||0;$e>0&&(me[Re]=$e)}}});let Te=[];const Le=Ne[ue.indexOf("FUNCIONES LECTIVAS")]||Ne[ue.indexOf("FUNCIONES NO LECTIVAS")]||Ne[ue.indexOf("OTRA FUNCIÓN")]||"";typeof Le=="string"&&Le.includes(":")?Te=Le.split(",").map(xe=>{const[Oe,Re]=xe.split(":").map($e=>$e.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Oe,horas:parseInt(Re)||0}}):Le&&(Te=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Le,horas:0}]);const We={id:`import_${Date.now()}_${ae}`,docenteId:_e.id,docenteNombre:_e.nombre,asignaturaOModulo:Ne[ue.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:Te,horasPorCurso:me,horasXAsig:j5(me)};ke.push(We)}n(ke),alert(`Se importaron ${ke.length} asignaciones exitosamente`)}catch(J){console.error("Error al importar:",J),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},D.readAsArrayBuffer(G)},[e]),q=C.useCallback(()=>{const G=r.map(z=>{const J=e.find(le=>le.id===z.docenteId),re=j[z.docenteId];let oe="";z.funcionesLectivas&&z.funcionesLectivas.length>0?oe=z.funcionesLectivas.map(le=>`${le.nombre}: ${le.horas}h`).join(", "):z.funcionesNoLectivas&&z.funcionesNoLectivas.length>0?oe=z.funcionesNoLectivas.map(le=>`${le.nombre}: ${le.horas}h`).join(", "):z.otraFuncion&&(oe=z.otraFuncion);const se={Docente:z.docenteNombre,"ASIGNATURA O MÓDULO":z.asignaturaOModulo||"","FUNCIONES LECTIVAS":oe,"HORAS X ASIG.":z.horasXAsig||0};return _s.forEach(le=>se[le]=z.horasPorCurso[le]||0),re&&(se["HORAS LECTIVAS (HA)"]=re.HA,se["HORAS NO LECTIVAS (HB)"]=re.HB,se["HORAS CONTRATO"]=(J==null?void 0:J.horasContrato)||0),se}),D=Ii.json_to_sheet(G),U=Ii.book_new();Ii.book_append_sheet(U,D,"Horarios"),mE(U,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,j]),K=C.useCallback(async()=>{if(d.filter(D=>D.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const D=[],U=[];r.forEach(J=>{let re=J.funcionesLectivas||[];J.funcionesNoLectivas&&J.funcionesNoLectivas.length>0&&re.length===0?re=J.funcionesNoLectivas.map(ke=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:ke.nombre,horas:ke.horas})):J.otraFuncion&&re.length===0&&(re=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:J.otraFuncion,horas:parseInt(J.otraFuncion)||0}]);const{funcionesNoLectivas:oe,otraFuncion:se,...le}=J,ue={...le,funcionesLectivas:re};if(J.id.startsWith("asig_")||J.id.startsWith("import_")){const{id:ke,...ae}=ue;U.push(ae)}else D.push(ue)});const z=[...D.map(({id:J,...re})=>re),...U];await uOe(z,!0),alert("Horarios guardados exitosamente")}catch(D){console.error("Error al guardar horarios:",D),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),X=G=>{const D=j[G];return D?D.errors.length>0?"red":D.warnings.length>0?"yellow":"green":"gray"},Z=()=>g?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[o.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(SF,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),o.jsx("button",{onClick:()=>x(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:o.jsx(wg,{className:"w-5 h-5"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"text",value:v.nombre,onChange:G=>y({...v,nombre:G.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"email",value:v.email,onChange:G=>y({...v,email:G.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"text",value:v.departamento,onChange:G=>y({...v,departamento:G.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",value:v.horasContrato,onChange:G=>y({...v,horasContrato:parseInt(G.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),o.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:v.perfil,onChange:G=>y({...v,perfil:G.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[o.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),o.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),o.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:o.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),o.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),o.jsx("button",{onClick:E,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!v.nombre||!v.email,children:h?o.jsxs(o.Fragment,{children:[o.jsx(el,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Guardando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(BEe,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar"})]})})]})]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(LEe,{className:"w-3.5 h-3.5"}),o.jsxs("span",{children:["Los campos marcados con ",o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[o.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),o.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[o.jsx(ac,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),o.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),o.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[o.jsx(vw,{className:"w-4 h-4"}),o.jsx("span",{children:"Ver estadísticas"})]}),o.jsxs("button",{onClick:K,disabled:d.some(G=>G.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[o.jsx($d,{className:"w-4 h-4"}),o.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),o.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[o.jsx(tk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),o.jsxs("div",{className:"p-5",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[o.jsx("div",{className:"flex-1 md:max-w-xs",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(sE,{className:"text-gray-400 w-4 h-4"})}),o.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:w,onChange:G=>_(G.target.value)})]})}),o.jsxs("div",{className:"flex gap-3 flex-wrap",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Lv,{className:"text-gray-400 w-4 h-4"})}),o.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:G=>s(D=>({...D,curso:G.target.value})),children:[o.jsx("option",{value:"",children:"Todos los cursos"}),_s.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Gc,{className:"text-gray-400 w-4 h-4"})}),o.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:G=>s(D=>({...D,asignatura:G.target.value})),children:[o.jsx("option",{value:"",children:"Todas las asignaturas"}),js.map(G=>o.jsx("option",{value:G,children:G},G))]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[o.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(SF,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),o.jsxs("button",{onClick:S,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(Nl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),o.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[o.jsx(rb,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:G=>{var D;return((D=G.target.files)==null?void 0:D[0])&&V(G.target.files[0])}})]}),o.jsxs("button",{onClick:q,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(Mte,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(Mu,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),o.jsxs("button",{onClick:K,disabled:d.some(G=>G.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?o.jsx(el,{className:"w-5 h-5 animate-spin"}):o.jsx($d,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&o.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),o.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[o.jsx(jH,{className:"w-3 h-3"})," ",d.filter(G=>G.tipo==="error").length," Errores"]}),o.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[o.jsx(DH,{className:"w-3 h-3"})," ",d.filter(G=>G.tipo==="warning").length," Advertencias"]})]})]}),o.jsx("div",{className:"p-5",children:o.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((G,D)=>o.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${G.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[G.tipo==="error"?o.jsx(jH,{className:"w-5 h-5 shrink-0"}):o.jsx(DH,{className:"w-5 h-5 shrink-0"}),o.jsx("span",{className:"text-sm",children:G.mensaje})]},D))})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(I_,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),o.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:o.jsxs("table",{className:"w-full min-w-[1000px]",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),o.jsx("span",{children:"Estado"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(_l,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Docente"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Gc,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Asignatura"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(PH,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Func. Lectivas"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx(nh,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Hrs"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:_s.length,children:o.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[o.jsx(Lv,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Cursos"}),o.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx(vw,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"HA/HB"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsx("div",{className:"flex items-center justify-center gap-1.5",children:o.jsx("span",{children:"Acciones"})})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:I.map((G,D)=>{const U=j[G.docenteId],z=X(G.docenteId),J=D===0||I[D-1].docenteId!==G.docenteId,re=D===I.length-1||I[D+1].docenteId!==G.docenteId,oe=I.filter(ue=>ue.docenteId===G.docenteId),se=oe.length>1;let le="hover:bg-gray-50 dark:hover:bg-gray-750 ";return se&&(J?le+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":le+="bg-blue-50 dark:bg-blue-900/10 ",re&&(le+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),o.jsxs("tr",{className:le,children:[o.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${z==="green"?"bg-green-500":z==="yellow"?"bg-yellow-500":z==="red"?"bg-red-500":"bg-gray-500"}`}),se&&J&&o.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:oe.length})]})}),o.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!se||J?o.jsxs("div",{children:[o.jsx("select",{value:G.docenteId,onChange:ue=>M(G.id,"docenteId",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${se?"font-medium":""}`,children:(k.length>0?k:e).map(ue=>o.jsx("option",{value:ue.id,children:ue.nombre},ue.id))}),se&&o.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[oe.length," asig."]})]}):o.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),o.jsxs("td",{className:"px-1 py-2",children:[o.jsxs("select",{value:G.asignaturaOModulo||"",onChange:ue=>M(G.id,"asignaturaOModulo",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${se?"border-blue-300 dark:border-blue-700":""}`,children:[o.jsx("option",{value:"",children:"Seleccionar..."}),js.map(ue=>o.jsx("option",{value:ue,children:ue},ue))]}),se&&!J&&o.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),o.jsx("td",{className:"px-1 py-2",children:o.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(G.funcionesLectivas||[]).map(ue=>o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx("input",{type:"text",value:ue.nombre,onChange:ke=>F(G.id,ue.id,"nombre",ke.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),o.jsx("input",{type:"number",value:ue.horas,onChange:ke=>F(G.id,ue.id,"horas",parseInt(ke.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),o.jsx("button",{onClick:()=>L(G.id,ue.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:o.jsx(vi,{className:"w-3 h-3"})})]},ue.id)),!G.funcionesLectivas&&o.jsx("div",{className:"flex gap-1 items-center",children:o.jsx("input",{type:"text",value:G.otraFuncion||"",onChange:ue=>M(G.id,"otraFuncion",ue.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),o.jsxs("button",{onClick:()=>P(G.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[o.jsx(Nl,{className:"w-3 h-3"})," ",o.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),o.jsx("td",{className:"px-1 py-2 text-center",children:o.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:G.horasXAsig||0})}),o.jsx("td",{className:"px-1 py-2",children:o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:_s.map(ue=>o.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[o.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:ue}),o.jsx("input",{type:"number",min:0,value:G.horasPorCurso[ue]||"",onChange:ke=>ee(G.id,ue,parseInt(ke.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},ue))})}),o.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:U&&o.jsxs("div",{className:"space-y-0",children:[o.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",U.HA," (",U.restantesHA>=0?"+":"",U.restantesHA,")"]}),o.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",U.HB," (",U.restantesHB>=0?"+":"",U.restantesHB,")"]})]})}),o.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx("button",{onClick:()=>B(G.docenteId,G.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:o.jsx(Nl,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>R(G.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:o.jsx(vi,{className:"w-3.5 h-3.5"})})]})})]},G.id)})})]})})]}),i&&o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),o.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(wg,{})})]}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsxs("nav",{className:"flex -mb-px px-6",children:[o.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),o.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),o.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),o.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),o.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),o.jsx("div",{className:"grid gap-4",children:e.map(G=>{const D=j[G.id],U=r.filter(z=>z.docenteId===G.id);return o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:G.nombre}),o.jsx("div",{className:`w-3 h-3 rounded-full ${X(G.id)==="green"?"bg-green-500":X(G.id)==="yellow"?"bg-yellow-500":X(G.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),D&&o.jsxs("div",{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),o.jsxs("span",{className:"ml-1 font-medium",children:[G.horasContrato,"h"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),o.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[D.sumCursos,"/",D.HA]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),o.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[D.sumFunciones,"/",D.HB]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),o.jsx("span",{className:"ml-1 font-medium",children:U.length})]})]}),U.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:U.map(z=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z.asignaturaOModulo||"Sin asignatura"}),o.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[z.horasXAsig||0,"h"]})]},z.id))})]}),o.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:_s.filter(z=>U.some(J=>J.horasPorCurso[z])).map(z=>{const J=U.reduce((re,oe)=>re+(oe.horasPorCurso[z]||0),0);return o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z}),o.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[J,"h"]})]},z)})})]})]}),U.some(z=>(z.funcionesLectivas||[]).length>0)&&o.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:U.flatMap(z=>(z.funcionesLectivas||[]).map(J=>({id:`${z.id}_${J.id}`,nombre:J.nombre,horas:J.horas}))).map(z=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z.nombre||"Sin nombre"}),o.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]})]})]},G.id)})})]}),c==="cursos"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),o.jsx("div",{className:"grid gap-4",children:_s.filter(G=>r.some(D=>D.horasPorCurso[G])).map(G=>{const D=r.filter(J=>J.horasPorCurso[G]),U=[];D.forEach(J=>{const re=U.findIndex(oe=>oe.id===J.docenteId);re===-1?U.push({id:J.docenteId,nombre:J.docenteNombre,asignaciones:[J]}):U[re].asignaciones.push(J)});const z=D.reduce((J,re)=>J+(re.horasPorCurso[G]||0),0);return o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:G}),o.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",z,"h"]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),o.jsx("div",{className:"grid gap-2",children:U.map(J=>o.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium",children:J.nombre}),o.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[J.asignaciones.reduce((re,oe)=>re+(oe.horasPorCurso[G]||0),0),"h"]})]}),o.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:J.asignaciones.filter(re=>re.horasPorCurso[G]).map(re=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:re.asignaturaOModulo||"Sin asignatura"}),o.jsxs("span",{children:[re.horasPorCurso[G],"h"]})]},re.id))})]},J.id))})]})]},G)})})]}),c==="funciones"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const G=[];return r.forEach(D=>{(D.funcionesLectivas||[]).forEach(U=>{if(!U.nombre)return;const z=G.find(J=>J.nombre===U.nombre);if(!z)G.push({nombre:U.nombre,docentes:[{id:D.docenteId,nombre:D.docenteNombre,horas:U.horas}],totalHoras:U.horas});else{const J=z.docentes.find(re=>re.id===D.docenteId);J?J.horas+=U.horas:z.docentes.push({id:D.docenteId,nombre:D.docenteNombre,horas:U.horas}),z.totalHoras+=U.horas}})}),G.sort((D,U)=>U.totalHoras-D.totalHoras),G.length===0?o.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):o.jsx("div",{className:"grid gap-4",children:G.map((D,U)=>o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:D.nombre}),o.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",D.totalHoras,"h"]})]}),o.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:D.docentes.sort((z,J)=>J.horas-z.horas).map(z=>o.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[o.jsx("span",{children:z.nombre}),o.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]},U))})})()]}),c==="totales"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let G=0;return r.forEach(D=>{D.horasPorCurso&&Object.values(D.horasPorCurso).forEach(U=>typeof U=="number"&&(G+=U)),(D.funcionesLectivas||[]).forEach(U=>typeof U.horas=="number"&&(G+=U.horas))}),G})()}),o.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),o.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let G=0;return e.forEach(D=>{const U=typeof D.horasContrato=="number"?D.horasContrato:0;G+=Jy(U)}),G})()}),o.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),o.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((D,U)=>{const z=typeof U.horasContrato=="number"?U.horasContrato:0;return D+z},0)}),o.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let G=0,D=0;r.forEach(re=>{re.horasPorCurso&&Object.values(re.horasPorCurso).forEach(oe=>typeof oe=="number"&&(G+=oe)),(re.funcionesLectivas||[]).forEach(oe=>typeof oe.horas=="number"&&(G+=oe.horas))}),e.forEach(re=>{const oe=typeof re.horasContrato=="number"?re.horasContrato:0;D+=Jy(oe)});const U=G+D,z=U>0?Math.round(G/U*100):0,J=U>0?Math.round(D/U*100):0;return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),o.jsxs("span",{className:"font-bold",children:[z,"%"]})]}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${z}%`}})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),o.jsxs("span",{className:"font-bold",children:[J,"%"]})]}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${J}%`}})})]}),o.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[o.jsx("p",{children:o.jsx("strong",{children:"Distribución Objetivo:"})}),o.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),o.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),o.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),o.jsx("div",{className:"mt-2",children:Math.abs(z-65)<=5?o.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):o.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),o.jsx("span",{className:"font-semibold",children:e.length})]}),o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),o.jsx("span",{className:"font-semibold",children:r.length})]}),o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),o.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((G,D)=>G+(typeof D.horasContrato=="number"?D.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),o.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((G,D)=>o.jsxs("li",{className:"flex items-center gap-1",children:[G.tipo==="error"?"❌":"⚠️",o.jsx("span",{children:G.mensaje})]},D)),d.length>5&&o.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),o.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vw,{className:"w-5 h-5"}),o.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),o.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:o.jsx(Lv,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",X_(44),"h, 30h → ",X_(30),"h)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:o.jsx(I_,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:o.jsx(PH,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",Jy(44),"h, 30h → ",Jy(30),"h)"]})]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),o.jsx(Z,{}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),o.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),o.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),o.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},dk="acciones_pedagogicas",mOe=(e,t)=>{var a,s,i,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:l.call(i))??Date.now()}};async function pOe(){const e=[];try{const t=$t(vt(ft,dk),pr("creadoTs","desc"));(await Dn(t)).docs.forEach(n=>e.push(mOe(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function gOe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await hn(vt(ft,dk),t)}async function xOe(e,t){const r=sr(vt(ft,dk),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await cc(r,n)}async function vOe(e){const t=sr(vt(ft,dk),e);await Ra(t)}function rae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=rae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function vn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=rae(e))&&(n&&(n+=" "),n+=t);return n}var PB={},RB={},XV;function bOe(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(RB)),RB}var LB={},YV;function nae(){return YV||(YV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(LB)),LB}var MB={},JV;function aae(){return JV||(JV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(MB)),MB}var UB={},ZV;function uL(){return ZV||(ZV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,i+=r[s]):u===l?l="":i+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(UB)),UB}var ez;function dL(){return ez||(ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bOe(),r=nae(),n=aae(),a=uL();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let A=0;A<c.length;A++){if(d==null||t.isUnsafeProperty(c[A]))return u;d=d[c[A]]}return d===void 0?u:d}e.get=s}(PB)),PB}var QB,tz;function yOe(){return tz||(tz=1,QB=dL().get),QB}var wOe=yOe();const Fm=jl(wOe);var HB={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rz;function EOe(){if(rz)return na;rz=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,A=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case t:switch(k=k.type,k){case c:case u:case n:case s:case a:case A:return k;default:switch(k=k&&k.$$typeof,k){case l:case d:case g:case m:case i:return k;default:return I}}case r:return I}}}function j(k){return _(k)===u}return na.AsyncMode=c,na.ConcurrentMode=u,na.ContextConsumer=l,na.ContextProvider=i,na.Element=t,na.ForwardRef=d,na.Fragment=n,na.Lazy=g,na.Memo=m,na.Portal=r,na.Profiler=s,na.StrictMode=a,na.Suspense=A,na.isAsyncMode=function(k){return j(k)||_(k)===c},na.isConcurrentMode=j,na.isContextConsumer=function(k){return _(k)===l},na.isContextProvider=function(k){return _(k)===i},na.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},na.isForwardRef=function(k){return _(k)===d},na.isFragment=function(k){return _(k)===n},na.isLazy=function(k){return _(k)===g},na.isMemo=function(k){return _(k)===m},na.isPortal=function(k){return _(k)===r},na.isProfiler=function(k){return _(k)===s},na.isStrictMode=function(k){return _(k)===a},na.isSuspense=function(k){return _(k)===A},na.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===a||k===A||k===h||typeof k=="object"&&k!==null&&(k.$$typeof===g||k.$$typeof===m||k.$$typeof===i||k.$$typeof===l||k.$$typeof===d||k.$$typeof===v||k.$$typeof===y||k.$$typeof===w||k.$$typeof===x)},na.typeOf=_,na}var nz;function COe(){return nz||(nz=1,HB.exports=EOe()),HB.exports}var NOe=COe(),ro=e=>e===0?0:e>0?1:-1,qc=e=>typeof e=="number"&&e!=+e,zp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,dr=e=>(typeof e=="number"||e instanceof Number)&&!qc(e),of=e=>dr(e)||typeof e=="string",_Oe=0,p2=e=>{var t=++_Oe;return"".concat(e||"").concat(t)},kl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dr(t)&&typeof t!="string")return n;var s;if(zp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return qc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},sae=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},yv=(e,t)=>dr(e)&&dr(t)?r=>e+r*(t-e):()=>t;function Ux(e,t,r){return dr(e)&&dr(t)?e+r*(t-e):t}function SOe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Fm(n,t))===r)}var Is=e=>e===null||typeof e>"u",pE=e=>Is(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),kOe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function AL(e){if(typeof e!="string")return!1;var t=kOe;return t.includes(e)}var jOe=["viewBox","children"],az=["points","pathLength"],VB={svg:jOe,polygon:az,polyline:az},fL=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{AL(a)&&(n[a]=s=>r[a](r,s))}),n},BOe=(e,t,r)=>n=>(e(t,r,n),null),ex=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];AL(a)&&typeof s=="function"&&(n||(n={}),n[a]=BOe(s,t,r))}),n},TOe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function iae(e){if(typeof e!="string")return!1;var t=TOe;return t.includes(e)}function ul(e){var t=Object.entries(e).filter(r=>{var[n]=r;return iae(n)});return Object.fromEntries(t)}var sz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",iz=null,zB=null,oae=e=>{if(e===iz&&Array.isArray(zB))return zB;var t=[];return C.Children.forEach(e,r=>{Is(r)||(NOe.isFragment(r)?t=t.concat(oae(r.props.children)):t.push(r))}),zB=t,iz=e,t};function gE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>sz(a)):n=[sz(t)],oae(e).forEach(a=>{var s=Fm(a,"type.displayName")||Fm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var IOe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(VB==null?void 0:VB[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||iae(t)),c=!!r&&AL(t);return i||l||c},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;IOe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},FOe=["children","width","height","viewBox","className","style","title","desc"];function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function OOe(e,t){if(e==null)return{};var r,n,a=DOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hL=C.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=e,d=OOe(e,FOe),A=s||{width:n,height:a,x:0,y:0},h=vn("recharts-surface",i);return C.createElement("svg",QF({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:t}),C.createElement("title",null,c),C.createElement("desc",null,u),r)}),POe=["children","className"];function HF(){return HF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HF.apply(null,arguments)}function ROe(e,t){if(e==null)return{};var r,n,a=LOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var us=C.forwardRef((e,t)=>{var{children:r,className:n}=e,a=ROe(e,POe),s=vn("recharts-layer",n);return C.createElement("g",HF({className:s},Xn(a,!0),{ref:t}),r)}),lae=C.createContext(null),MOe=()=>C.useContext(lae);function Oa(e){return function(){return e}}const cae=Math.cos,Y_=Math.sin,qd=Math.sqrt,J_=Math.PI,Ak=2*J_,VF=Math.PI,zF=2*VF,Tp=1e-6,UOe=zF-Tp;function uae(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function QOe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uae;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class HOe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uae:QOe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-t,u=a-r,d=i-t,A=l-r,h=d*d+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Tp)if(!(Math.abs(A*c-u*d)>Tp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-i,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((VF-Math.acos((x+h-v)/(2*y*w)))/2),j=_/w,k=_/y;Math.abs(j-1)>Tp&&this._append`L${t+j*d},${r+j*A}`,this._append`A${s},${s},0,0,${+(A*m>d*g)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,A=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Tp||Math.abs(this._y1-d)>Tp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%zF+zF),h>UOe?this._append`A${n},${n},0,1,${A},${t-l},${r-c}A${n},${n},0,1,${A},${this._x1=u},${this._y1=d}`:h>Tp&&this._append`A${n},${n},0,${+(h>=VF)},${A},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function mL(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new HOe(t)}function pL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dae(e){this._context=e}dae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fk(e){return new dae(e)}function Aae(e){return e[0]}function fae(e){return e[1]}function hae(e,t){var r=Oa(!0),n=null,a=fk,s=null,i=mL(l);e=typeof e=="function"?e:e===void 0?Aae:Oa(e),t=typeof t=="function"?t:t===void 0?fae:Oa(t);function l(c){var u,d=(c=pL(c)).length,A,h=!1,m;for(n==null&&(s=a(m=i())),u=0;u<=d;++u)!(u<d&&r(A=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(A,u,c),+t(A,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function dN(e,t,r){var n=null,a=Oa(!0),s=null,i=fk,l=null,c=mL(u);e=typeof e=="function"?e:e===void 0?Aae:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?fae:Oa(+r);function u(A){var h,m,g,x=(A=pL(A)).length,v,y=!1,w,_=new Array(x),j=new Array(x);for(s==null&&(l=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=A[h],h,A))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(_[g],j[g]);l.lineEnd(),l.areaEnd()}y&&(_[h]=+e(v,h,A),j[h]=+t(v,h,A),l.point(n?+n(v,h,A):_[h],r?+r(v,h,A):j[h]))}if(w)return l=null,w+""||null}function d(){return hae().defined(a).curve(i).context(s)}return u.x=function(A){return arguments.length?(e=typeof A=="function"?A:Oa(+A),n=null,u):e},u.x0=function(A){return arguments.length?(e=typeof A=="function"?A:Oa(+A),u):e},u.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Oa(+A),u):n},u.y=function(A){return arguments.length?(t=typeof A=="function"?A:Oa(+A),r=null,u):t},u.y0=function(A){return arguments.length?(t=typeof A=="function"?A:Oa(+A),u):t},u.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Oa(+A),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(A){return arguments.length?(a=typeof A=="function"?A:Oa(!!A),u):a},u.curve=function(A){return arguments.length?(i=A,s!=null&&(l=i(s)),u):i},u.context=function(A){return arguments.length?(A==null?s=l=null:l=i(s=A),u):s},u}class mae{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function VOe(e){return new mae(e,!0)}function zOe(e){return new mae(e,!1)}const gL={draw(e,t){const r=qd(t/J_);e.moveTo(r,0),e.arc(0,0,r,0,Ak)}},$Oe={draw(e,t){const r=qd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},pae=qd(1/3),GOe=pae*2,KOe={draw(e,t){const r=qd(t/GOe),n=r*pae;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},qOe={draw(e,t){const r=qd(t),n=-r/2;e.rect(n,n,r,r)}},WOe=.8908130915292852,gae=Y_(J_/10)/Y_(7*J_/10),XOe=Y_(Ak/10)*gae,YOe=-cae(Ak/10)*gae,JOe={draw(e,t){const r=qd(t*WOe),n=XOe*r,a=YOe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=Ak*s/5,l=cae(i),c=Y_(i);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},$B=qd(3),ZOe={draw(e,t){const r=-qd(t/($B*3));e.moveTo(0,r*2),e.lineTo(-$B*r,-r),e.lineTo($B*r,-r),e.closePath()}},Cu=-.5,Nu=qd(3)/2,$F=1/qd(12),eDe=($F/2+1)*3,tDe={draw(e,t){const r=qd(t/eDe),n=r/2,a=r*$F,s=n,i=r*$F+r,l=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(l,c),e.lineTo(Cu*n-Nu*a,Nu*n+Cu*a),e.lineTo(Cu*s-Nu*i,Nu*s+Cu*i),e.lineTo(Cu*l-Nu*c,Nu*l+Cu*c),e.lineTo(Cu*n+Nu*a,Cu*a-Nu*n),e.lineTo(Cu*s+Nu*i,Cu*i-Nu*s),e.lineTo(Cu*l+Nu*c,Cu*c-Nu*l),e.closePath()}};function rDe(e,t){let r=null,n=mL(a);e=typeof e=="function"?e:Oa(e||gL),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function Z_(){}function eS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function xae(e){this._context=e}xae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nDe(e){return new xae(e)}function vae(e){this._context=e}vae.prototype={areaStart:Z_,areaEnd:Z_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aDe(e){return new vae(e)}function bae(e){this._context=e}bae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sDe(e){return new bae(e)}function yae(e){this._context=e}yae.prototype={areaStart:Z_,areaEnd:Z_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function iDe(e){return new yae(e)}function oz(e){return e<0?-1:1}function lz(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(oz(s)+oz(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function cz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function GB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,i-l*r,s,i)}function tS(e){this._context=e}tS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GB(this,this._t0,cz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GB(this,cz(this,r=lz(this,e,t)),r);break;default:GB(this,this._t0,r=lz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function wae(e){this._context=new Eae(e)}(wae.prototype=Object.create(tS.prototype)).point=function(e,t){tS.prototype.point.call(this,t,e)};function Eae(e){this._context=e}Eae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function oDe(e){return new tS(e)}function lDe(e){return new wae(e)}function Cae(e){this._context=e}Cae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=uz(e),a=uz(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uz(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function cDe(e){return new Cae(e)}function hk(e,t){this._context=e,this._t=t}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function uDe(e){return new hk(e,.5)}function dDe(e){return new hk(e,0)}function ADe(e){return new hk(e,1)}function g1(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,l=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function GF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function fDe(e,t){return e[t]}function hDe(e){const t=[];return t.key=e,t}function mDe(){var e=Oa([]),t=GF,r=g1,n=fDe;function a(s){var i=Array.from(e.apply(this,arguments),hDe),l,c=i.length,u=-1,d;for(const A of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(A,i[l].key,u,s)]).data=A;for(l=0,d=pL(t(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?GF:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??g1,a):r},a}function pDe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}g1(e,t)}}function gDe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=e[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}g1(e,t)}}function xDe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=e[t[l]],A=d[n][1]||0,h=d[n-1][1]||0,m=(A-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=A,u+=m*A}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,g1(e,t)}}var vDe=["type","size","sizeType"];function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KF.apply(null,arguments)}function dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Az(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(r),!0).forEach(function(n){bDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bDe(e,t,r){return(t=yDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yDe(e){var t=wDe(e,"string");return typeof t=="symbol"?t:t+""}function wDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EDe(e,t){if(e==null)return{};var r,n,a=CDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nae={symbolCircle:gL,symbolCross:$Oe,symbolDiamond:KOe,symbolSquare:qOe,symbolStar:JOe,symbolTriangle:ZOe,symbolWye:tDe},NDe=Math.PI/180,_De=e=>{var t="symbol".concat(pE(e));return Nae[t]||gL},SDe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*NDe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kDe=(e,t)=>{Nae["symbol".concat(pE(e))]=t},xL=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=EDe(e,vDe),s=Az(Az({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var A=_De(t),h=rDe().type(A).size(SDe(r,n,t));return h()},{className:l,cx:c,cy:u}=s,d=Xn(s,!0);return c===+c&&u===+u&&r===+r?C.createElement("path",KF({},d,{className:vn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};xL.registerSymbol=kDe;function qF(){return qF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qF.apply(null,arguments)}function fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jDe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fz(Object(r),!0).forEach(function(n){vL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vL(e,t,r){return(t=BDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BDe(e){var t=TDe(e,"string");return typeof t=="symbol"?t:t+""}function TDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _u=32;class bL extends C.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=_u/2,s=_u/6,i=_u/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:_u,y2:a,className:"recharts-legend-icon"});if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(_u,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_u/8,"h").concat(_u,"v").concat(_u*3/4,"h").concat(-_u,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var u=jDe({},t);return delete u.legendIcon,C.cloneElement(t.legendIcon,u)}return C.createElement(xL,{fill:l,cx:a,cy:a,size:_u,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,l={x:0,y:0,width:_u,height:_u},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,A)=>{var h=d.formatter||a,m=vn({"recharts-legend-item":!0,["legend-item-".concat(A)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,A):d.value;return C.createElement("li",qF({className:m,style:c,key:"legend-item-".concat(A)},ex(this.props,d,A)),C.createElement(hL,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}vL(bL,"displayName","Legend");vL(bL,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var KB={},qB={},hz;function IDe(){return hz||(hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}e.uniqBy=t}(qB)),qB}var WB={},mz;function mk(){return mz||(mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(WB)),WB}var XB={},YB={},JB={},pz;function FDe(){return pz||(pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(JB)),JB}var gz;function yL(){return gz||(gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FDe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(YB)),YB}var ZB={},xz;function ODe(){return xz||(xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(ZB)),ZB}var vz;function DDe(){return vz||(vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yL(),r=ODe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(XB)),XB}var eT={},tT={},bz;function PDe(){return bz||(bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dL();function r(n){return function(a){return t.get(a,n)}}e.property=r}(tT)),tT}var rT={},nT={},aT={},sT={},yz;function _ae(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(sT)),sT}var iT={},wz;function Sae(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(iT)),iT}var oT={},Ez;function wL(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(oT)),oT}var Cz;function RDe(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EL(),r=_ae(),n=Sae(),a=wL();function s(A,h,m){return typeof m!="function"?t.isMatch(A,h):i(A,h,function g(x,v,y,w,_,j){const k=m(x,v,y,w,_,j);return k!==void 0?!!k:i(x,v,g,j)},new Map)}function i(A,h,m,g){if(h===A)return!0;switch(typeof h){case"object":return l(A,h,m,g);case"function":return Object.keys(h).length>0?i(A,{...h},m,g):a.eq(A,h);default:return r.isObject(A)?typeof h=="string"?h==="":!0:a.eq(A,h)}}function l(A,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(A,h,m,g);if(h instanceof Map)return c(A,h,m,g);if(h instanceof Set)return d(A,h,m,g);const x=Object.keys(h);if(A==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===A;g&&g.set(h,A);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(A)&&!(y in A)||h[y]===void 0&&A[y]!==void 0||h[y]===null&&A[y]!==null||!m(A[y],h[y],y,A,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(A,h,m,g){if(h.size===0)return!0;if(!(A instanceof Map))return!1;for(const[x,v]of h.entries()){const y=A.get(x);if(m(y,v,x,A,h,g)===!1)return!1}return!0}function u(A,h,m,g){if(h.length===0)return!0;if(!Array.isArray(A))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let _=0;_<A.length;_++){if(x.has(_))continue;const j=A[_];let k=!1;if(m(j,y,v,A,h,g)&&(k=!0),k){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(A,h,m,g){return h.size===0?!0:A instanceof Set?u([...A],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(aT)),aT}var Nz;function EL(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RDe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(nT)),nT}var lT={},cT={},uT={},_z;function kae(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(uT)),uT}var dT={},Sz;function CL(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(dT)),dT}var AT={},kz;function NL(){return kz||(kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",A="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",S="[object BigInt64Array]",B="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=R,e.functionTag=A,e.int16ArrayTag=I,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(AT)),AT}var fT={},jz;function LDe(){return jz||(jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(fT)),fT}var Bz;function jae(){return Bz||(Bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kae(),r=CL(),n=NL(),a=Sae(),s=LDe();function i(d,A){return l(d,void 0,d,new Map,A)}function l(d,A,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,A,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,A,h=d,m,g){const x=[...Object.keys(A),...t.getSymbols(A)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(A[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=l,e.copyProperties=c}(cT)),cT}var Tz;function MDe(){return Tz||(Tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(lT)),lT}var Iz;function UDe(){return Iz||(Iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EL(),r=MDe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(rT)),rT}var hT={},mT={},pT={},Fz;function QDe(){return Fz||(Fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jae(),r=NL();function n(a,s){return t.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(A,a),A}case r.argumentsTag:{const A={};return t.copyProperties(A,a),A.length=a.length,A[Symbol.iterator]=a[Symbol.iterator],A}default:return}})}e.cloneDeepWith=n}(pT)),pT}var Oz;function HDe(){return Oz||(Oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QDe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(mT)),mT}var gT={},xT={},Dz;function Bae(){return Dz||(Dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(xT)),xT}var vT={},Pz;function VDe(){return Pz||(Pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CL();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(vT)),vT}var Rz;function zDe(){return Rz||(Rz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nae(),r=Bae(),n=VDe(),a=uL();function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const A=c[d];if((u==null||!Object.hasOwn(u,A))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(A)&&A<u.length))return!1;u=u[A]}return!0}e.has=s}(gT)),gT}var Lz;function $De(){return Lz||(Lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EL(),r=aae(),n=HDe(),a=dL(),s=zDe();function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(hT)),hT}var Mz;function _L(){return Mz||(Mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk(),r=PDe(),n=UDe(),a=$De();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(eT)),eT}var Uz;function GDe(){return Uz||(Uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IDe(),r=mk(),n=DDe(),a=_L();function s(i,l=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(l)):[]}e.uniqBy=s}(KB)),KB}var bT,Qz;function KDe(){return Qz||(Qz=1,bT=GDe().uniqBy),bT}var qDe=KDe();const Hz=jl(qDe);function Tae(e,t,r){return t===!0?Hz(e,r):typeof t=="function"?Hz(e,t):e}var yT={exports:{}},wT={},ET={exports:{}},CT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vz;function WDe(){if(Vz)return CT;Vz=1;var e=Q1();function t(A,h){return A===h&&(A!==0||1/A===1/h)||A!==A&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function l(A,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[A,m,h]),a(function(){return c(x)&&v({inst:x}),A(function(){c(x)&&v({inst:x})})},[A]),i(m),m}function c(A){var h=A.getSnapshot;A=A.value;try{var m=h();return!r(A,m)}catch{return!0}}function u(A,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return CT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,CT}var zz;function XDe(){return zz||(zz=1,ET.exports=WDe()),ET.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $z;function YDe(){if($z)return wT;$z=1;var e=Q1(),t=XDe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,c=e.useDebugValue;return wT.useSyncExternalStoreWithSelector=function(u,d,A,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(I){if(!w){if(w=!0,_=I,I=h(I),m!==void 0&&x.hasValue){var E=x.value;if(m(E,I))return j=E}return j=I}if(E=j,n(_,I))return E;var S=h(I);return m!==void 0&&m(E,S)?(_=I,E):(_=I,j=S)}var w=!1,_,j,k=A===void 0?null:A;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,A,h,m]);var v=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},wT}var Gz;function JDe(){return Gz||(Gz=1,yT.exports=YDe()),yT.exports}var Iae=JDe();const ZDe=jl(Iae);var SL=C.createContext(null),ePe=e=>e,$a=()=>{var e=C.useContext(SL);return e?e.store.dispatch:ePe},B5=()=>{},tPe=()=>B5,rPe=(e,t)=>e===t;function or(e){var t=C.useContext(SL);return Iae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:tPe,t?t.store.getState:B5,t?t.store.getState:B5,t?e:B5,rPe)}function nPe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function aPe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function sPe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Kz=e=>Array.isArray(e)?e:[e];function iPe(e){const t=Array.isArray(e[0])?e[0]:e;return sPe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function oPe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var lPe=class{constructor(e){this.value=e}deref(){return this.value}},cPe=typeof WeakRef<"u"?WeakRef:lPe,uPe=0,qz=1;function AN(){return{s:uPe,v:void 0,o:null,p:null}}function Fae(e,t={}){let r=AN();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var A;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=AN(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=AN(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===qz)d=l.v;else if(d=e.apply(null,arguments),s++,n){const h=((A=a==null?void 0:a.deref)==null?void 0:A.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new cPe(d):d}return u.s=qz,u.v=d,d}return i.clearCache=()=>{r=AN(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function dPe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),nPe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:A,memoizeOptions:h=[],argsMemoize:m=Fae,argsMemoizeOptions:g=[]}=d,x=Kz(h),v=Kz(g),y=iPe(a),w=A(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){i++;const k=oPe(y,arguments);return l=w.apply(null,k),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:A,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ut=dPe(Fae),APe=Object.assign((e,t=ut)=>{aPe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>APe}),NT={},_T={},ST={},Wz;function fPe(){return Wz||(Wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),l=t(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};e.compareValues=r}(ST)),ST}var kT={},jT={},Xz;function Oae(){return Xz||(Xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(jT)),jT}var Yz;function hPe(){return Yz||(Yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(kT)),kT}var Jz;function mPe(){return Jz||(Jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fPe(),r=hPe(),n=uL();function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,A=i.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:A.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<A.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(_T)),_T}var BT={},Zz;function pPe(){return Zz||(Zz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(BT)),BT}var TT={},e$;function Dae(){return e$||(e$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bae(),r=yL(),n=_ae(),a=wL();function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}e.isIterateeCall=s}(TT)),TT}var t$;function gPe(){return t$||(t$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mPe(),r=pPe(),n=Dae();function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(NT)),NT}var IT,r$;function xPe(){return r$||(r$=1,IT=gPe().sortBy),IT}var vPe=xPe();const pk=jl(vPe);var Pae=e=>e.legend.settings,bPe=e=>e.legend.size,yPe=e=>e.legend.payload,wPe=ut([yPe,Pae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?pk(n,r):n});function EPe(){return or(wPe)}var fN=1;function Rae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=C.useState({height:0,left:0,top:0,width:0}),n=C.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>fN||Math.abs(i.left-t.left)>fN||Math.abs(i.top-t.top)>fN||Math.abs(i.width-t.width)>fN)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function go(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var CPe=typeof Symbol=="function"&&Symbol.observable||"@@observable",n$=CPe,FT=()=>Math.random().toString(36).substring(7).split("").join("."),NPe={INIT:`@@redux/INIT${FT()}`,REPLACE:`@@redux/REPLACE${FT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${FT()}`},rS=NPe;function kL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Lae(e,t,r){if(typeof e!="function")throw new Error(go(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(go(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(go(1));return r(Lae)(e,t)}let n=e,a=t,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((v,y)=>{i.set(y,v)}))}function d(){if(c)throw new Error(go(3));return a}function A(v){if(typeof v!="function")throw new Error(go(4));if(c)throw new Error(go(5));let y=!0;u();const w=l++;return i.set(w,v),function(){if(y){if(c)throw new Error(go(6));y=!1,u(),i.delete(w),s=null}}}function h(v){if(!kL(v))throw new Error(go(7));if(typeof v.type>"u")throw new Error(go(8));if(typeof v.type!="string")throw new Error(go(17));if(c)throw new Error(go(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=i).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(go(10));n=v,h({type:rS.REPLACE})}function g(){const v=A;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(go(11));function w(){const j=y;j.next&&j.next(d())}return w(),{unsubscribe:v(w)}},[n$](){return this}}}return h({type:rS.INIT}),{dispatch:h,subscribe:A,getState:d,replaceReducer:m,[n$]:g}}function _Pe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:rS.INIT})>"u")throw new Error(go(12));if(typeof r(void 0,{type:rS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(go(13))})}function Mae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{_Pe(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const A=n[d],h=r[A],m=i[A],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(go(14));u[A]=g,c=c||g!==m}return c=c||n.length!==Object.keys(i).length,c?u:i}}function nS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function SPe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(go(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(i));return s=nS(...l)(a.dispatch),{...a,dispatch:s}}}function Uae(e){return kL(e)&&"type"in e&&typeof e.type=="string"}var Qae=Symbol.for("immer-nothing"),a$=Symbol.for("immer-draftable"),Wc=Symbol.for("immer-state");function kd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var x1=Object.getPrototypeOf;function jg(e){return!!e&&!!e[Wc]}function kh(e){var t;return e?Hae(e)||Array.isArray(e)||!!e[a$]||!!((t=e.constructor)!=null&&t[a$])||xk(e)||vk(e):!1}var kPe=Object.prototype.constructor.toString();function Hae(e){if(!e||typeof e!="object")return!1;const t=x1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===kPe}function aS(e,t){gk(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function gk(e){const t=e[Wc];return t?t.type_:Array.isArray(e)?1:xk(e)?2:vk(e)?3:0}function WF(e,t){return gk(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vae(e,t,r){const n=gk(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jPe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function xk(e){return e instanceof Map}function vk(e){return e instanceof Set}function Ip(e){return e.copy_||e.base_}function XF(e,t){if(xk(e))return new Map(e);if(vk(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Hae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Wc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(x1(e),n)}else{const n=x1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function jL(e,t=!1){return bk(e)||jg(e)||!kh(e)||(gk(e)>1&&(e.set=e.add=e.clear=e.delete=BPe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>jL(n,!0))),e}function BPe(){kd(2)}function bk(e){return Object.isFrozen(e)}var TPe={};function Bg(e){const t=TPe[e];return t||kd(0,e),t}var g2;function zae(){return g2}function IPe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function s$(e,t){t&&(Bg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function YF(e){JF(e),e.drafts_.forEach(FPe),e.drafts_=null}function JF(e){e===g2&&(g2=e.parent_)}function i$(e){return g2=IPe(g2,e)}function FPe(e){const t=e[Wc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function o$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wc].modified_&&(YF(t),kd(4)),kh(e)&&(e=sS(t,e),t.parent_||iS(t,e)),t.patches_&&Bg("Patches").generateReplacementPatches_(r[Wc].base_,e,t.patches_,t.inversePatches_)):e=sS(t,r,[]),YF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qae?e:void 0}function sS(e,t,r){if(bk(t))return t;const n=t[Wc];if(!n)return aS(t,(a,s)=>l$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return iS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),aS(s,(l,c)=>l$(e,n,a,l,c,r,i)),iS(e,a,!1),r&&e.patches_&&Bg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function l$(e,t,r,n,a,s,i){if(jg(a)){const l=s&&t&&t.type_!==3&&!WF(t.assigned_,n)?s.concat(n):void 0,c=sS(e,a,l);if(Vae(r,n,c),jg(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(kh(a)&&!bk(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&iS(e,a)}}function iS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jL(t,r)}function OPe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:zae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=BL;r&&(a=[n],s=x2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var BL={get(e,t){if(t===Wc)return e;const r=Ip(e);if(!WF(r,t))return DPe(e,r,t);const n=r[t];return e.finalized_||!kh(n)?n:n===OT(e.base_,t)?(DT(e),e.copy_[t]=eO(n,e)):n},has(e,t){return t in Ip(e)},ownKeys(e){return Reflect.ownKeys(Ip(e))},set(e,t,r){const n=$ae(Ip(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=OT(Ip(e),t),s=a==null?void 0:a[Wc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jPe(r,a)&&(r!==void 0||WF(e.base_,t)))return!0;DT(e),ZF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return OT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,DT(e),ZF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ip(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){kd(11)},getPrototypeOf(e){return x1(e.base_)},setPrototypeOf(){kd(12)}},x2={};aS(BL,(e,t)=>{x2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});x2.deleteProperty=function(e,t){return x2.set.call(this,e,t,void 0)};x2.set=function(e,t,r){return BL.set.call(this,e[0],t,r,e[0])};function OT(e,t){const r=e[Wc];return(r?Ip(r):e)[t]}function DPe(e,t,r){var a;const n=$ae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function $ae(e,t){if(!(t in e))return;let r=x1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=x1(r)}}function ZF(e){e.modified_||(e.modified_=!0,e.parent_&&ZF(e.parent_))}function DT(e){e.copy_||(e.copy_=XF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var PPe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&kd(6),n!==void 0&&typeof n!="function"&&kd(7);let a;if(kh(t)){const s=i$(this),i=eO(t,void 0);let l=!0;try{a=r(i),l=!1}finally{l?YF(s):JF(s)}return s$(s,n),o$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Qae&&(a=void 0),this.autoFreeze_&&jL(a,!0),n){const s=[],i=[];Bg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else kd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,c=>t(c,...l));let n,a;return[this.produce(t,r,(i,l)=>{n=i,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kh(e)||kd(8),jg(e)&&(e=gh(e));const t=i$(this),r=eO(e,void 0);return r[Wc].isManual_=!0,JF(t),r}finishDraft(e,t){const r=e&&e[Wc];(!r||!r.isManual_)&&kd(9);const{scope_:n}=r;return s$(n,t),o$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Bg("Patches").applyPatches_;return jg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function eO(e,t){const r=xk(e)?Bg("MapSet").proxyMap_(e,t):vk(e)?Bg("MapSet").proxySet_(e,t):OPe(e,t);return(t?t.scope_:zae()).drafts_.push(r),r}function gh(e){return jg(e)||kd(10,e),Gae(e)}function Gae(e){if(!kh(e)||bk(e))return e;const t=e[Wc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=XF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=XF(e,!0);return aS(r,(n,a)=>{Vae(r,n,Gae(a))}),t&&(t.finalized_=!1),r}var Xc=new PPe,Kae=Xc.produce;Xc.produceWithPatches.bind(Xc);Xc.setAutoFreeze.bind(Xc);Xc.setUseStrictShallowCopy.bind(Xc);Xc.applyPatches.bind(Xc);Xc.createDraft.bind(Xc);Xc.finishDraft.bind(Xc);function qae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var RPe=qae(),LPe=qae,MPe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nS:nS.apply(null,arguments)};function qu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(zc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Uae(n)&&n.type===e,r}var Wae=class Zy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Zy.prototype)}static get[Symbol.species](){return Zy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Zy(...t[0].concat(this)):new Zy(...t.concat(this))}};function c$(e){return kh(e)?Kae(e,()=>{}):e}function hN(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function UPe(e){return typeof e=="boolean"}var QPe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new Wae;return r&&(UPe(r)?i.push(RPe):i.push(LPe(r.extraArgument))),i},HPe="RTK_autoBatch",u$=e=>t=>{setTimeout(t,e)},VPe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:u$(10):e.type==="callback"?e.queueNotification:u$(e.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const A=()=>a&&d(),h=n.subscribe(A);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var A;try{return a=!((A=d==null?void 0:d.meta)!=null&&A[HPe]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},zPe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Wae(e);return n&&a.push(VPe(typeof n=="object"?n:void 0)),a};function $Pe(e){const t=QPe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(kL(r))l=Mae(r);else throw new Error(zc(1));let c;typeof n=="function"?c=n(t):c=t();let u=nS;a&&(u=MPe({trace:!1,...typeof a=="object"&&a}));const d=SPe(...c),A=zPe(d);let h=typeof i=="function"?i(A):A();const m=u(...h);return Lae(l,s,m)}function Xae(e){const t={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(zc(28));if(l in t)throw new Error(zc(29));return t[l]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function GPe(e){return typeof e=="function"}function KPe(e,t){let[r,n,a]=Xae(t),s;if(GPe(e))s=()=>c$(e());else{const l=c$(e);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,A)=>{if(A)if(jg(d)){const m=A(d,c);return m===void 0?d:m}else{if(kh(d))return Kae(d,h=>A(h,c));{const h=A(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var qPe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",WPe=(e=21)=>{let t="",r=e;for(;r--;)t+=qPe[Math.random()*64|0];return t},XPe=Symbol.for("rtk-slice-createasyncthunk");function YPe(e,t){return`${e}/${t}`}function JPe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[XPe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(zc(11));const l=(typeof a.reducers=="function"?a.reducers(eRe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,k){const I=typeof j=="string"?j:j.type;if(!I)throw new Error(zc(12));if(I in u.sliceCaseReducersByType)throw new Error(zc(13));return u.sliceCaseReducersByType[I]=k,d},addMatcher(j,k){return u.sliceMatchers.push({matcher:j,reducer:k}),d},exposeAction(j,k){return u.actionCreators[j]=k,d},exposeCaseReducer(j,k){return u.sliceCaseReducersByName[j]=k,d}};c.forEach(j=>{const k=l[j],I={reducerName:j,type:YPe(s,j),createNotation:typeof a.reducers=="function"};rRe(k)?aRe(I,k,d,t):tRe(I,k,d)});function A(){const[j={},k=[],I=void 0]=typeof a.extraReducers=="function"?Xae(a.extraReducers):[a.extraReducers],E={...j,...u.sliceCaseReducersByType};return KPe(a.initialState,S=>{for(let B in E)S.addCase(B,E[B]);for(let B of u.sliceMatchers)S.addMatcher(B.matcher,B.reducer);for(let B of k)S.addMatcher(B.matcher,B.reducer);I&&S.addDefaultCase(I)})}const h=j=>j,m=new Map,g=new WeakMap;let x;function v(j,k){return x||(x=A()),x(j,k)}function y(){return x||(x=A()),x.getInitialState()}function w(j,k=!1){function I(S){let B=S[j];return typeof B>"u"&&k&&(B=hN(g,I,y)),B}function E(S=h){const B=hN(m,k,()=>new WeakMap);return hN(B,S,()=>{const R={};for(const[P,F]of Object.entries(a.selectors??{}))R[P]=ZPe(F,S,()=>hN(g,S,y),k);return R})}return{reducerPath:j,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const _={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(j,{reducerPath:k,...I}={}){const E=k??i;return j.inject({reducerPath:E,reducer:v},I),{..._,...w(E,!0)}}};return _}}function ZPe(e,t,r,n){function a(s,...i){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...i)}return a.unwrapped=e,a}var Zc=JPe();function eRe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function tRe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!nRe(n))throw new Error(zc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?qu(e,i):qu(e))}function rRe(e){return e._reducerDefinitionType==="asyncThunk"}function nRe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function aRe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(zc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,A=a(e,s,d);n.exposeAction(t,A),i&&n.addCase(A.fulfilled,i),l&&n.addCase(A.pending,l),c&&n.addCase(A.rejected,c),u&&n.addMatcher(A.settled,u),n.exposeCaseReducer(t,{fulfilled:i||mN,pending:l||mN,rejected:c||mN,settled:u||mN})}function mN(){}var sRe="task",Yae="listener",Jae="completed",TL="cancelled",iRe=`task-${TL}`,oRe=`task-${Jae}`,tO=`${Yae}-${TL}`,lRe=`${Yae}-${Jae}`,yk=class{constructor(e){z3(this,"name","TaskAbortError");z3(this,"message");this.code=e,this.message=`${sRe} ${TL} (reason: ${e})`}},IL=(e,t)=>{if(typeof e!="function")throw new TypeError(zc(32))},oS=()=>{},Zae=(e,t=oS)=>(e.catch(t),e),ese=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),sg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ig=e=>{if(e.aborted){const{reason:t}=e;throw new yk(t)}};function tse(e,t){let r=oS;return new Promise((n,a)=>{const s=()=>a(new yk(e.reason));if(e.aborted){s();return}r=ese(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=oS})}var cRe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof yk?"cancelled":"rejected",error:r}}finally{t==null||t()}},lS=e=>t=>Zae(tse(e,t).then(r=>(ig(e),r))),rse=e=>{const t=lS(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Vv}=Object,d$={},wk="listenerMiddleware",uRe=(e,t)=>{const r=n=>ese(e,()=>sg(n,e.reason));return(n,a)=>{IL(n);const s=new AbortController;r(s);const i=cRe(async()=>{ig(e),ig(s.signal);const l=await n({pause:lS(s.signal),delay:rse(s.signal),signal:s.signal});return ig(s.signal),l},()=>sg(s,oRe));return a!=null&&a.autoJoin&&t.push(i.catch(oS)),{result:lS(e)(i),cancel(){sg(s,iRe)}}}},dRe=(e,t)=>{const r=async(n,a)=>{ig(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(A,h)=>{h.unsubscribe(),c([A,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await tse(t,Promise.race(l));return ig(t),c}finally{s()}};return(n,a)=>Zae(r(n,a))},nse=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=qu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(zc(21));return IL(s),{predicate:a,type:t,effect:s}},ase=Vv(e=>{const{type:t,predicate:r,effect:n}=nse(e);return{id:WPe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(zc(22))}}},{withTypes:()=>ase}),A$=(e,t)=>{const{type:r,effect:n,predicate:a}=nse(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},rO=e=>{e.pending.forEach(t=>{sg(t,tO)})},ARe=e=>()=>{e.forEach(rO),e.clear()},f$=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},sse=Vv(qu(`${wk}/add`),{withTypes:()=>sse}),fRe=qu(`${wk}/removeAll`),ise=Vv(qu(`${wk}/remove`),{withTypes:()=>ise}),hRe=(...e)=>{console.error(`${wk}/error`,...e)},xE=(e={})=>{const t=new Map,{extra:r,onError:n=hRe}=e;IL(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),A=>{d.unsubscribe(),A!=null&&A.cancelActive&&rO(d)}),s=d=>{const A=A$(t,d)??ase(d);return a(A)};Vv(s,{withTypes:()=>s});const i=d=>{const A=A$(t,d);return A&&(A.unsubscribe(),d.cancelActive&&rO(A)),!!A};Vv(i,{withTypes:()=>i});const l=async(d,A,h,m)=>{const g=new AbortController,x=dRe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(A,Vv({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:rse(g.signal),pause:lS(g.signal),extra:r,signal:g.signal,fork:uRe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(sg(y,tO),_.delete(y))})},cancel:()=>{sg(g,tO),d.pending.delete(g)},throwIfCancelled:()=>{ig(g.signal)}})))}catch(y){y instanceof yk||f$(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),sg(g,lRe),d.pending.delete(g)}},c=ARe(t);return{middleware:d=>A=>h=>{if(!Uae(h))return A(h);if(sse.match(h))return s(h.payload);if(fRe.match(h)){c();return}if(ise.match(h))return i(h.payload);let m=d.getState();const g=()=>{if(m===d$)throw new Error(zc(23));return m};let x;try{if(x=A(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,v,m)}catch(j){_=!1,f$(n,j,{raisedBy:"predicate"})}_&&l(w,h,d,g)}}}finally{m=d$}return x},startListening:s,stopListening:i,clearListeners:c}};function zc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mRe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ose=Zc({name:"chartLayout",initialState:mRe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:pRe,setLayout:gRe,setChartSize:xRe,setScale:vRe}=ose.actions,bRe=ose.reducer;function h$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function m$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h$(Object(r),!0).forEach(function(n){yRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yRe(e,t,r){return(t=wRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wRe(e){var t=ERe(e,"string");return typeof t=="symbol"?t:t+""}function ERe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cS=Math.PI/180,CRe=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-cS*n)*r,y:t+Math.sin(-cS*n)*r}),lse=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},NRe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},_Re=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=NRe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:CRe(c),angleInRadian:c}},SRe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},kRe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},jRe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=_Re({x:r,y:n},t),{innerRadius:i,outerRadius:l}=t;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=SRe(t),d=s,A;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;A=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;A=d>=u&&d<=c}return A?m$(m$({},t),{},{radius:a,angle:kRe(d,t)}):null},cse=e=>!C.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function use(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function p$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(r),!0).forEach(function(n){BRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BRe(e,t,r){return(t=TRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TRe(e){var t=IRe(e,"string");return typeof t=="symbol"?t:t+""}function IRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return Is(e)||Is(t)?r:of(t)?Fm(e,t,r):typeof t=="function"?t(e):r}var FRe=(e,t,r,n,a)=>{var s,i=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,A=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(ro(d-u)!==ro(A-d)){var m=[];if(ro(A-d)===ro(a[1]-a[0])){h=A;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=A+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,A),w=Math.max(u,A);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<l;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},ORe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=t;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&dr(e[s]))return Du(Du({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&dr(e[i]))return Du(Du({},e),{},{[i]:e[i]+(a||0)})}return e},Wm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",dse=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,i=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||i.push(t),s||i.push(r),i},Ase=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:A,niceTicks:h,axisType:m}=e;if(!i)return null;var g=l==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?ro(s[0]-s[1])*2*x:x,A||h){var v=(A||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:i(_)+x,value:y,offset:x,index:w}});return v.filter(y=>!qc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},g$=1e-4,DRe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-g$,s=Math.max(n[0],n[1])+g$,i=e(t[0]),l=e(t[r-1]);(i<a||i>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},PRe=(e,t)=>{if(!t||t.length!==2||!dr(t[0])||!dr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!dr(e[0])||e[0]<r)&&(a[0]=r),(!dr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},RRe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var l=qc(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=a,e[i][r][1]=a+l,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1])}},LRe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=qc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},MRe={sign:RRe,expand:pDe,none:g1,silhouette:gDe,wiggle:xDe,positive:LRe},URe=(e,t,r)=>{var n=MRe[r],a=mDe().keys(t).value((s,i)=>+Pa(s,i,0)).order(GF).offset(n);return a(e)};function QRe(e){return e==null?void 0:String(e)}var x$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var l=Pa(s,t.dataKey,t.scale.domain()[i]);return Is(l)?null:t.scale(l)-a/2+n},HRe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},VRe=e=>{var t=e.flat(2).filter(dr);return[Math.min(...t),Math.max(...t)]},zRe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$Re=(e,t,r)=>{if(e!=null)return zRe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,l=i.reduce((c,u)=>{var d=use(u,t,r),A=VRe(d);return[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},v$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,v2=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=pk(t,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function y$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Du(Du({},t),{},{dataKey:r,payload:n,value:a,name:s})}function ob(e,t){if(e)return String(e);if(typeof t=="string")return t}function GRe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?jRe({x:e,y:t},n):null}var KRe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Du(Du(Du({},n),ea(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return Du(Du(Du({},n),ea(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},qRe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,$h=e=>e.layout.width,Gh=e=>e.layout.height,WRe=e=>e.layout.scale,fse=e=>e.layout.margin,FL=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),OL=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hse="data-recharts-item-index",mse="data-recharts-item-data-key",Ek=60;function w$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w$(Object(r),!0).forEach(function(n){XRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XRe(e,t,r){return(t=YRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YRe(e){var t=JRe(e,"string");return typeof t=="symbol"?t:t+""}function JRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZRe=e=>e.brush.height,Di=ut([$h,Gh,fse,ZRe,FL,OL,Pae,bPe],(e,t,r,n,a,s,i,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:Ek;return F0(F0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?F0(F0({},g),{},{[v]:Fm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=F0(F0({},u),c),A=d.bottom;d.bottom+=n,d=ORe(d,i,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return F0(F0({brushBottom:A},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),eLe=ut(Di,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),pse=ut($h,Gh,(e,t)=>({x:0,y:0,width:e,height:t})),tLe=C.createContext(null),uc=()=>C.useContext(tLe)!=null,Ck=e=>e.brush,Nk=ut([Ck,Di,fse],(e,t,r)=>({height:e.height,x:dr(e.x)?e.x:t.left,y:dr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:dr(e.width)?e.width:t.width})),DL=()=>{var e,t=uc(),r=or(eLe),n=or(Nk),a=(e=or(Ck))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},rLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},gse=()=>{var e;return(e=or(Di))!==null&&e!==void 0?e:rLe},PL=()=>or($h),RL=()=>or(Gh),nLe={top:0,right:0,bottom:0,left:0},aLe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:nLe},Tn=e=>e.layout.layoutType,LL=()=>or(Tn),sLe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},xse=Zc({name:"legend",initialState:sLe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=gh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:E$,setLegendSettings:iLe,addLegendPayload:vse,removeLegendPayload:bse}=xse.actions,oLe=xse.reducer,lLe=["contextPayload"];function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nO.apply(null,arguments)}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function v1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){ML(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ML(e,t,r){return(t=cLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cLe(e){var t=uLe(e,"string");return typeof t=="symbol"?t:t+""}function uLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dLe(e,t){if(e==null)return{};var r,n,a=ALe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ALe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fLe(e){return e.value}function hLe(e){var{contextPayload:t}=e,r=dLe(e,lLe),n=Tae(t,e.payloadUniqBy,fLe),a=v1(v1({},r),{},{payload:n});return C.isValidElement(e.content)?C.cloneElement(e.content,a):typeof e.content=="function"?C.createElement(e.content,a):C.createElement(bL,a)}function mLe(e,t,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),v1(v1({},u),d)}function pLe(e){var t=$a();return C.useEffect(()=>{t(iLe(e))},[t,e]),null}function gLe(e){var t=$a();return C.useEffect(()=>(t(E$(e)),()=>{t(E$({width:0,height:0}))}),[t,e]),null}function xLe(e){var t=EPe(),r=MOe(),n=aLe(),{width:a,height:s,wrapperStyle:i,portal:l}=e,[c,u]=Rae([t]),d=PL(),A=RL(),h=d-(n.left||0)-(n.right||0),m=lb.getWidthOrHeight(e.layout,s,a,h),g=l?i:v1(v1({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},mLe(i,e,n,d,A,c)),i),x=l??r;if(x==null)return null;var v=C.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},C.createElement(pLe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(gLe,{width:c.width,height:c.height}),C.createElement(hLe,nO({},e,m,{margin:n,chartWidth:d,chartHeight:A,contextPayload:t})));return lP.createPortal(v,x)}class lb extends C.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&dr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return C.createElement(xLe,this.props)}}ML(lb,"displayName","Legend");ML(lb,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aO.apply(null,arguments)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){vLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vLe(e,t,r){return(t=bLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bLe(e){var t=yLe(e,"string");return typeof t=="symbol"?t:t+""}function yLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wLe(e){return Array.isArray(e)&&of(e[0])&&of(e[1])?e.join(" ~ "):e}var ELe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:A,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var k={padding:0,margin:0},I=(l?pk(s,l):s).map((E,S)=>{if(E.type==="none")return null;var B=E.formatter||i||wLe,{value:R,name:P}=E,F=R,L=P;if(B){var M=B(R,P,E,S,s);if(Array.isArray(M))[F,L]=M;else if(M!=null)F=M;else return null}var ee=PT({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:ee},of(L)?C.createElement("span",{className:"recharts-tooltip-item-name"},L):null,of(L)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},F),C.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},g=PT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=PT({margin:0},a),v=!Is(d),y=v?d:"",w=vn("recharts-default-tooltip",c),_=vn("recharts-tooltip-label",u);v&&A&&s!==void 0&&s!==null&&(y=A(d,s));var j=h?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",aO({className:w,style:g},j),C.createElement("p",{className:_,style:x},C.isValidElement(y)?y:"".concat(y)),m())},my="recharts-tooltip-wrapper",CLe={visibility:"hidden"};function NLe(e){var{coordinate:t,translateX:r,translateY:n}=e;return vn(my,{["".concat(my,"-right")]:dr(r)&&t&&dr(t.x)&&r>=t.x,["".concat(my,"-left")]:dr(r)&&t&&dr(t.x)&&r<t.x,["".concat(my,"-bottom")]:dr(n)&&t&&dr(t.y)&&n>=t.y,["".concat(my,"-top")]:dr(n)&&t&&dr(t.y)&&n<t.y})}function _$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&dr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),A=r[n]+a;if(t[n])return i[n]?d:A;var h=c[n];if(h==null)return 0;if(i[n]){var m=d,g=h;return m<g?Math.max(A,h):Math.max(d,h)}if(u==null)return 0;var x=A+l,v=h+u;return x>v?Math.max(d,h):Math.max(A,h)}function _Le(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function SLe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=e,u,d,A;return i.height>0&&i.width>0&&r?(d=_$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),A=_$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=_Le({translateX:d,translateY:A,useTranslate3d:l})):u=CLe,{cssProperties:u,cssClasses:NLe({translateX:d,translateY:A,coordinate:r})}}function S$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(r),!0).forEach(function(n){sO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sO(e,t,r){return(t=kLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kLe(e){var t=jLe(e,"string");return typeof t=="symbol"?t:t+""}function jLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class BLe extends C.PureComponent{constructor(){super(...arguments),sO(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sO(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:A,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=SLe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:A,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),j=y?{}:pN(pN({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=pN(pN({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:v},s)}}var TLe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tx={isSsr:TLe()},yse=()=>or(e=>e.rootProps.accessibilityLayer);function Yc(e){return Number.isFinite(e)}function b1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function iO(){return iO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iO.apply(null,arguments)}function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(n){ILe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ILe(e,t,r){return(t=FLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FLe(e){var t=OLe(e,"string");return typeof t=="symbol"?t:t+""}function OLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B$={curveBasisClosed:aDe,curveBasisOpen:sDe,curveBasis:nDe,curveBumpX:VOe,curveBumpY:zOe,curveLinearClosed:iDe,curveLinear:fk,curveMonotoneX:oDe,curveMonotoneY:lDe,curveNatural:cDe,curveStep:uDe,curveStepAfter:ADe,curveStepBefore:dDe},gN=e=>Yc(e.x)&&Yc(e.y),py=e=>e.x,gy=e=>e.y,DLe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(pE(e));return(r==="curveMonotone"||r==="curveBump")&&t?B$["".concat(r).concat(t==="vertical"?"Y":"X")]:B$[r]||fk},PLe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=DLe(t,a),l=s?r.filter(gN):r,c;if(Array.isArray(n)){var u=s?n.filter(A=>gN(A)):n,d=l.map((A,h)=>j$(j$({},A),{},{base:u[h]}));return a==="vertical"?c=dN().y(gy).x1(py).x0(A=>A.base.x):c=dN().x(py).y1(gy).y0(A=>A.base.y),c.defined(gN).curve(i),c(d)}return a==="vertical"&&dr(n)?c=dN().y(gy).x1(py).x0(n):dr(n)?c=dN().x(py).y1(gy).y0(n):c=hae().x(py).y(gy),c.defined(gN).curve(i),c(l)},wse=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?PLe(e):n;return C.createElement("path",iO({},ul(e),fL(e),{className:vn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},RLe=["x","y","top","left","width","height","className"];function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(null,arguments)}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){MLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MLe(e,t,r){return(t=ULe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ULe(e){var t=QLe(e,"string");return typeof t=="symbol"?t:t+""}function QLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HLe(e,t){if(e==null)return{};var r,n,a=VLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zLe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),$Le=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=e,c=HLe(e,RLe),u=LLe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!dr(t)||!dr(r)||!dr(s)||!dr(i)||!dr(n)||!dr(a)?null:C.createElement("path",oO({},Xn(u,!0),{className:vn("recharts-cross",l),d:zLe(t,r,s,i,n,a)}))};function GLe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function I$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I$(Object(r),!0).forEach(function(n){qLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qLe(e,t,r){return(t=WLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WLe(e){var t=XLe(e,"string");return typeof t=="symbol"?t:t+""}function XLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yu(e,t){var r=KLe({},e),n=t,a=Object.keys(t),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}var RT={},LT={},MT={},F$;function YLe(){return F$||(F$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(MT)),MT}var O$;function JLe(){return O$||(O$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YLe(),r=kae(),n=CL(),a=NL(),s=wL();function i(u,d,A){return l(u,d,void 0,void 0,void 0,void 0,A)}function l(u,d,A,h,m,g,x){const v=x(u,d,A,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,A,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}A=A??new Map;const x=A.get(u),v=A.get(d);if(x!=null&&v!=null)return x===d;A.set(u,d),A.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,A,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const j=y[_],k=w.findIndex(I=>l(j,I,void 0,u,d,A,h));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,A,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),A,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),A,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,A,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let j=0;j<w.length;j++){const k=w[j],I=u[k];if(!Object.hasOwn(d,k))return!1;const E=d[k];if(!l(I,E,k,u,d,A,h))return!1}return!0}default:return!1}}finally{A.delete(u),A.delete(d)}}e.isEqualWith=i}(LT)),LT}var UT={},D$;function ZLe(){return D$||(D$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(UT)),UT}var P$;function e8e(){return P$||(P$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JLe(),r=ZLe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(RT)),RT}var QT,R$;function t8e(){return R$||(R$=1,QT=e8e().isEqual),QT}var r8e=t8e();const n8e=jl(r8e);var uS=1e-4,Ese=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Cse=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),L$=(e,t)=>r=>{var n=Ese(e,t);return Cse(n,r)},a8e=(e,t)=>r=>{var n=Ese(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Cse(a,r)},M$=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=L$(t,r),d=L$(n,a),A=a8e(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,_=A(v);if(Math.abs(w-x)<uS||_<uS)return d(v);v=h(v-w/_)}return d(v)};return m.isStepper=!1,m},s8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,A=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<uS&&Math.abs(A)<uS?[l,0]:[h,A]};return s.isStepper=!0,s.dt=a,s},Nse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return M$(e);case"spring":return s8e();default:if(e.split("(")[0]==="cubic-bezier")return M$(e)}return typeof e=="function"?e:null};function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(n){i8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i8e(e,t,r){return(t=o8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8e(e){var t=l8e(e,"string");return typeof t=="symbol"?t:t+""}function l8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c8e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),u8e=(e,t,r)=>e.map(n=>"".concat(c8e(n)," ").concat(t,"ms ").concat(r)).join(","),d8e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),b2=(e,t)=>Object.keys(t).reduce((r,n)=>Q$(Q$({},r),{},{[n]:e(n,t[n])}),{});function H$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(r),!0).forEach(function(n){A8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A8e(e,t,r){return(t=f8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8e(e){var t=h8e(e,"string");return typeof t=="symbol"?t:t+""}function h8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dS=(e,t,r)=>e+(t-e)*r,lO=e=>{var{from:t,to:r}=e;return t!==r},_se=(e,t,r)=>{var n=b2((a,s)=>{if(lO(s)){var[i,l]=e(s.from,s.to,s.velocity);return yo(yo({},s),{},{from:i,velocity:l})}return s},t);return r<1?b2((a,s)=>lO(s)?yo(yo({},s),{},{velocity:dS(s.velocity,n[a].velocity,r),from:dS(s.from,n[a].from,r)}):s,t):_se(e,n,r-1)};function m8e(e,t,r,n,a,s){var i,l=n.reduce((h,m)=>yo(yo({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>b2((h,m)=>m.from,l),u=()=>!Object.values(l).filter(lO).length,d=null,A=h=>{i||(i=h);var m=h-i,g=m/r.dt;l=_se(r,l,g),a(yo(yo(yo({},e),t),c())),i=h,u()||(d=s.setTimeout(A))};return()=>(d=s.setTimeout(A),()=>{d()})}function p8e(e,t,r,n,a,s,i){var l=null,c=a.reduce((A,h)=>yo(yo({},A),{},{[h]:[e[h],t[h]]}),{}),u,d=A=>{u||(u=A);var h=(A-u)/n,m=b2((x,v)=>dS(...v,r(h)),c);if(s(yo(yo(yo({},e),t),m)),h<1)l=i.setTimeout(d);else{var g=b2((x,v)=>dS(...v,r(1)),c);s(yo(yo(yo({},e),t),g))}};return()=>(l=i.setTimeout(d),()=>{l()})}const Sse=(e,t,r,n,a,s)=>{var i=d8e(e,t);return r.isStepper===!0?m8e(e,t,r,i,a,s):p8e(e,t,r,n,i,a,s)};function g8e(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class x8e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function v8e(){return g8e(new x8e)}var b8e=C.createContext(v8e);function kse(e,t){var r=C.useContext(b8e);return C.useMemo(()=>t??r(e),[e,t,r])}var y8e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cO.apply(null,arguments)}function w8e(e,t){if(e==null)return{};var r,n,a=E8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function E8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(n){$p(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $p(e,t,r){return(t=C8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C8e(e){var t=N8e(e,"string");return typeof t=="symbol"?t:t+""}function N8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class UL extends C.PureComponent{constructor(t,r){super(t,r),$p(this,"mounted",!1),$p(this,"manager",void 0),$p(this,"stopJSAnimation",null),$p(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:i});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(n8e(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var A=d||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:A}:A};(a&&c[a]!==A||!a&&c!==A)&&this.setState(h)}this.runAnimation(O0(O0({},this.props),{},{from:A,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c}=t,u=Sse(r,n,Nse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,A=u8e(Object.keys(d),n,i);this.manager.start([l,r,O0(O0({},d),{},{transition:A}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:A,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=w8e(t,y8e),v=C.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,I=C.cloneElement(_,O0(O0({},x),{},{style:O0(O0({},j),y),className:k}));return I};return v===1?w(C.Children.only(r)):C.createElement("div",null,C.Children.map(r,_=>w(_)))}}$p(UL,"displayName","Animate");$p(UL,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function AS(e){var t,r=kse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return C.createElement(UL,cO({},e,{animationManager:r}))}function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fS.apply(null,arguments)}var z$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],A=0,h=4;A<h;A++)d[A]=a[A]>s?s:a[A];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*m,`
            L `).concat(e+r,",").concat(t+n-i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},_8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jse=e=>{var t=Yu(e,_8e),r=C.useRef(null),[n,a]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=t,{animationEasing:A,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var v=vn("recharts-rectangle",d);return x?C.createElement(AS,{canBegin:n>0,from:{width:l,height:c,x:s,y:i},to:{width:l,height:c,x:s,y:i},duration:h,animationEasing:A,isActive:x},y=>{var{width:w,height:_,x:j,y:k}=y;return C.createElement(AS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:A},C.createElement("path",fS({},Xn(t,!0),{className:v,d:z$(j,k,w,_,u),ref:r})))}):C.createElement("path",fS({},Xn(t,!0),{className:v,d:z$(s,i,l,c,u)}))};function Bse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ea(t,r,n,a),l=ea(t,r,n,s);return{points:[i,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}var S8e=(e,t)=>{var r=ro(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},xN=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=e,u=l*(i?1:-1)+n,d=Math.asin(l/u)/cS,A=c?a:a+s*d,h=ea(t,r,u,A),m=ea(t,r,n,A),g=c?a-s*d:a,x=ea(t,r,u*Math.cos(d*cS),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},Tse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,l=S8e(s,i),c=s+l,u=ea(t,r,a,s),d=ea(t,r,a,c),A="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),m=ea(t,r,n,c);A+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else A+="L ".concat(t,",").concat(r," Z");return A},k8e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=ro(u-c),{circleTangency:A,lineTangency:h,theta:m}=xN({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=xN({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Tse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=xN({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:E,theta:S}=xN({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=l?Math.abs(c-u):Math.abs(c-u)-k-S;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},j8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ise=e=>{var t=Yu(e,j8e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:A}=t;if(s<a||u===d)return null;var h=vn("recharts-sector",A),m=s-a,g=kl(i,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=k8e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=Tse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),C.createElement("path",uO({},Xn(t,!0),{className:h,d:x}))};function B8e(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:A}=t,h=ea(l,c,u,A),m=ea(l,c,d,A);n=h.x,a=h.y,s=m.x,i=m.y}else return Bse(t);return[{x:n,y:a},{x:s,y:i}]}var HT={},VT={},zT={},$$;function T8e(){return $$||($$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(zT)),zT}var G$;function I8e(){return G$||(G$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T8e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(VT)),VT}var K$;function F8e(){return K$||(K$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dae(),r=I8e();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}e.range=n}(HT)),HT}var $T,q$;function O8e(){return q$||(q$=1,$T=F8e().range),$T}var D8e=O8e();const Fse=jl(D8e);function Am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function P8e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QL(e){let t,r,n;e.length!==2?(t=Am,r=(l,c)=>Am(e(l),c),n=(l,c)=>e(l)-c):(t=e===Am||e===P8e?e:R8e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<0?u=A+1:d=A}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<=0?u=A+1:d=A}while(u<d)}return u}function i(l,c,u=0,d=l.length){const A=a(l,c,u,d-1);return A>u&&n(l[A-1],c)>-n(l[A],c)?A-1:A}return{left:a,center:i,right:s}}function R8e(){return 0}function Ose(e){return e===null?NaN:+e}function*L8e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const M8e=QL(Am),vE=M8e.right;QL(Ose).center;class W$ extends Map{constructor(t,r=H8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(X$(this,t))}has(t){return super.has(X$(this,t))}set(t,r){return super.set(U8e(this,t),r)}delete(t){return super.delete(Q8e(this,t))}}function X$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function U8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Q8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function H8e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function V8e(e=Am){if(e===Am)return Dse;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Dse(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const z8e=Math.sqrt(50),$8e=Math.sqrt(10),G8e=Math.sqrt(2);function hS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=z8e?10:s>=$8e?5:s>=G8e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?hS(e,t,r*2):[l,c,u]}function dO(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?hS(t,e,r):hS(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function AO(e,t,r){return t=+t,e=+e,r=+r,hS(e,t,r)[2]}function fO(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?AO(t,e,r):AO(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Y$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function J$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Pse(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Dse:V8e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),A=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*A*(c-A)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*A/c+h)),g=Math.min(n,Math.floor(t+(c-u)*A/c+h));Pse(e,t,m,g,a)}const s=e[t];let i=r,l=n;for(xy(e,r,t),a(e[n],s)>0&&xy(e,r,n);i<l;){for(xy(e,i,l),++i,--l;a(e[i],s)<0;)++i;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?xy(e,r,l):(++l,xy(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function xy(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function K8e(e,t,r){if(e=Float64Array.from(L8e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return J$(e);if(t>=1)return Y$(e);var n,a=(n-1)*t,s=Math.floor(a),i=Y$(Pse(e,s).subarray(0,s+1)),l=J$(e.subarray(s+1));return i+(l-i)*(a-s)}}function q8e(e,t,r=Ose){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return i+(l-i)*(a-s)}}function W8e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Ju(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Kh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hO=Symbol("implicit");function _k(){var e=new W$,t=[],r=[],n=hO;function a(s){let i=e.get(s);if(i===void 0){if(n!==hO)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new W$;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return _k(t,r).unknown(n)},Ju.apply(a,arguments),a}function HL(){var e=_k().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete e.unknown;function A(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),l&&(g=Math.round(g),i=Math.round(i));var v=W8e(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),A()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,A()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,A()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,A()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),A()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),A()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,A()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),A()):d},e.copy=function(){return HL(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ju.apply(A(),arguments)}function Rse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Rse(t())},e}function X8e(){return Rse(HL.apply(null,arguments).paddingInner(1))}function VL(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Lse(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function bE(){}var y2=.7,mS=1/y2,zv="\\s*([+-]?\\d+)\\s*",w2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y8e=/^#([0-9a-f]{3,8})$/,J8e=new RegExp(`^rgb\\(${zv},${zv},${zv}\\)$`),Z8e=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),eMe=new RegExp(`^rgba\\(${zv},${zv},${zv},${w2}\\)$`),tMe=new RegExp(`^rgba\\(${tf},${tf},${tf},${w2}\\)$`),rMe=new RegExp(`^hsl\\(${w2},${tf},${tf}\\)$`),nMe=new RegExp(`^hsla\\(${w2},${tf},${tf},${w2}\\)$`),Z$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};VL(bE,Tg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eG,formatHex:eG,formatHex8:aMe,formatHsl:sMe,formatRgb:tG,toString:tG});function eG(){return this.rgb().formatHex()}function aMe(){return this.rgb().formatHex8()}function sMe(){return Mse(this).formatHsl()}function tG(){return this.rgb().formatRgb()}function Tg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Y8e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?rG(t):r===3?new rc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=J8e.exec(e))?new rc(t[1],t[2],t[3],1):(t=Z8e.exec(e))?new rc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=eMe.exec(e))?vN(t[1],t[2],t[3],t[4]):(t=tMe.exec(e))?vN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rMe.exec(e))?sG(t[1],t[2]/100,t[3]/100,1):(t=nMe.exec(e))?sG(t[1],t[2]/100,t[3]/100,t[4]):Z$.hasOwnProperty(e)?rG(Z$[e]):e==="transparent"?new rc(NaN,NaN,NaN,0):null}function rG(e){return new rc(e>>16&255,e>>8&255,e&255,1)}function vN(e,t,r,n){return n<=0&&(e=t=r=NaN),new rc(e,t,r,n)}function iMe(e){return e instanceof bE||(e=Tg(e)),e?(e=e.rgb(),new rc(e.r,e.g,e.b,e.opacity)):new rc}function mO(e,t,r,n){return arguments.length===1?iMe(e):new rc(e,t,r,n??1)}function rc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}VL(rc,mO,Lse(bE,{brighter(e){return e=e==null?mS:Math.pow(mS,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?y2:Math.pow(y2,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rc(og(this.r),og(this.g),og(this.b),pS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nG,formatHex:nG,formatHex8:oMe,formatRgb:aG,toString:aG}));function nG(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}`}function oMe(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}${Gp((isNaN(this.opacity)?1:this.opacity)*255)}`}function aG(){const e=pS(this.opacity);return`${e===1?"rgb(":"rgba("}${og(this.r)}, ${og(this.g)}, ${og(this.b)}${e===1?")":`, ${e})`}`}function pS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function og(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gp(e){return e=og(e),(e<16?"0":"")+e.toString(16)}function sG(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new jd(e,t,r,n)}function Mse(e){if(e instanceof jd)return new jd(e.h,e.s,e.l,e.opacity);if(e instanceof bE||(e=Tg(e)),!e)return new jd;if(e instanceof jd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(t===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-t)/l+2:i=(t-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new jd(i,l,c,e.opacity)}function lMe(e,t,r,n){return arguments.length===1?Mse(e):new jd(e,t,r,n??1)}function jd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}VL(jd,lMe,Lse(bE,{brighter(e){return e=e==null?mS:Math.pow(mS,e),new jd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?y2:Math.pow(y2,e),new jd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new rc(GT(e>=240?e-240:e+120,a,n),GT(e,a,n),GT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new jd(iG(this.h),bN(this.s),bN(this.l),pS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pS(this.opacity);return`${e===1?"hsl(":"hsla("}${iG(this.h)}, ${bN(this.s)*100}%, ${bN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iG(e){return e=(e||0)%360,e<0?e+360:e}function bN(e){return Math.max(0,Math.min(1,e||0))}function GT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const zL=e=>()=>e;function cMe(e,t){return function(r){return e+r*t}}function uMe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function dMe(e){return(e=+e)==1?Use:function(t,r){return r-t?uMe(t,r,e):zL(isNaN(t)?r:t)}}function Use(e,t){var r=t-e;return r?cMe(e,r):zL(isNaN(e)?t:e)}const gS=function e(t){var r=dMe(t);function n(a,s){var i=r((a=mO(a)).r,(s=mO(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Use(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function AMe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function fMe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hMe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=cb(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function mMe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function pMe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=cb(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var pO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KT=new RegExp(pO.source,"g");function gMe(e){return function(){return e}}function xMe(e){return function(t){return e(t)+""}}function Qse(e,t){var r=pO.lastIndex=KT.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(e=e+"",t=t+"";(n=pO.exec(e))&&(a=KT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Sd(n,a)})),r=KT.lastIndex;return r<t.length&&(s=t.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?xMe(c[0].x):gMe(t):(t=c.length,function(u){for(var d=0,A;d<t;++d)l[(A=c[d]).i]=A.x(u);return l.join("")})}function cb(e,t){var r=typeof t,n;return t==null||r==="boolean"?zL(t):(r==="number"?Sd:r==="string"?(n=Tg(t))?(t=n,gS):Qse:t instanceof Tg?gS:t instanceof Date?mMe:fMe(t)?AMe:Array.isArray(t)?hMe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pMe:Sd)(e,t)}function $L(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var oG=180/Math.PI,gO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hse(e,t,r,n,a,s){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*oG,skewX:Math.atan(c)*oG,scaleX:i,scaleY:l}}var yN;function vMe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gO:Hse(t.a,t.b,t.c,t.d,t.e,t.f)}function bMe(e){return e==null||(yN||(yN=document.createElementNS("http://www.w3.org/2000/svg","g")),yN.setAttribute("transform",e),!(e=yN.transform.baseVal.consolidate()))?gO:(e=e.matrix,Hse(e.a,e.b,e.c,e.d,e.e,e.f))}function Vse(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,A,h,m,g){if(u!==A||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Sd(u,A)},{i:x-2,x:Sd(d,h)})}else(A||h)&&m.push("translate("+A+t+h+r)}function i(u,d,A,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:A.push(a(A)+"rotate(",null,n)-2,x:Sd(u,d)})):d&&A.push(a(A)+"rotate("+d+n)}function l(u,d,A,h){u!==d?h.push({i:A.push(a(A)+"skewX(",null,n)-2,x:Sd(u,d)}):d&&A.push(a(A)+"skewX("+d+n)}function c(u,d,A,h,m,g){if(u!==A||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Sd(u,A)},{i:x-2,x:Sd(d,h)})}else(A!==1||h!==1)&&m.push(a(m)+"scale("+A+","+h+")")}return function(u,d){var A=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,A,h),i(u.rotate,d.rotate,A,h),l(u.skewX,d.skewX,A,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,A,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)A[(v=h[g]).i]=v.x(m);return A.join("")}}}var yMe=Vse(vMe,"px, ","px)","deg)"),wMe=Vse(bMe,", ",")",")"),EMe=1e-12;function lG(e){return((e=Math.exp(e))+1/e)/2}function CMe(e){return((e=Math.exp(e))-1/e)/2}function NMe(e){return((e=Math.exp(2*e))-1)/(e+1)}const _Me=function e(t,r,n){function a(s,i){var l=s[0],c=s[1],u=s[2],d=i[0],A=i[1],h=i[2],m=d-l,g=A-c,x=m*m+g*g,v,y;if(x<EMe)y=Math.log(h/u)/t,v=function(E){return[l+E*m,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),j=(h*h-u*u-n*x)/(2*h*r*w),k=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(j*j+1)-j);y=(I-k)/t,v=function(E){var S=E*y,B=lG(k),R=u/(r*w)*(B*NMe(t*S+k)-CMe(k));return[l+R*m,c+R*g,u*B/lG(t*S+k)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var i=Math.max(.001,+s),l=i*i,c=l*l;return e(i,l,c)},a}(Math.SQRT2,2,4);function SMe(e,t){t===void 0&&(t=e,e=cb);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function kMe(e){return function(){return e}}function xS(e){return+e}var cG=[0,1];function wl(e){return e}function xO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:kMe(isNaN(t)?NaN:.5)}function jMe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function BMe(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=xO(a,n),s=r(i,s)):(n=xO(n,a),s=r(s,i)),function(l){return s(n(l))}}function TMe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=xO(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(l){var c=vE(e,l,1,n)-1;return s[c](a[c](l))}}function yE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Sk(){var e=cG,t=cG,r=cb,n,a,s,i=wl,l,c,u;function d(){var h=Math.min(e.length,t.length);return i!==wl&&(i=jMe(e[0],e[h-1])),l=h>2?TMe:BMe,c=u=null,A}function A(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(i(h)))}return A.invert=function(h){return i(a((u||(u=l(t,e.map(n),Sd)))(h)))},A.domain=function(h){return arguments.length?(e=Array.from(h,xS),d()):e.slice()},A.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},A.rangeRound=function(h){return t=Array.from(h),r=$L,d()},A.clamp=function(h){return arguments.length?(i=h?!0:wl,d()):i!==wl},A.interpolate=function(h){return arguments.length?(r=h,d()):r},A.unknown=function(h){return arguments.length?(s=h,A):s},function(h,m){return n=h,a=m,d()}}function GL(){return Sk()(wl,wl)}function IMe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function y1(e){return e=vS(Math.abs(e)),e?e[1]:NaN}function FMe(e,t){return function(r,n){for(var a=r.length,s=[],i=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[i=(i+1)%e.length];return s.reverse().join(t)}}function OMe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var DMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E2(e){if(!(t=DMe.exec(e)))throw new Error("invalid format: "+e);var t;return new KL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}E2.prototype=KL.prototype;function KL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}KL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PMe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var zse;function RMe(e,t){var r=vS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(zse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+vS(e,Math.max(0,t+s-1))[0]}function uG(e,t){var r=vS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const dG={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:IMe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>uG(e*100,t),r:uG,s:RMe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AG(e){return e}var fG=Array.prototype.map,hG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function LMe(e){var t=e.grouping===void 0||e.thousands===void 0?AG:FMe(fG.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?AG:OMe(fG.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(A){A=E2(A);var h=A.fill,m=A.align,g=A.sign,x=A.symbol,v=A.zero,y=A.width,w=A.comma,_=A.precision,j=A.trim,k=A.type;k==="n"?(w=!0,k="g"):dG[k]||(_===void 0&&(_=12),j=!0,k="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?n:/[%p]/.test(k)?i:"",S=dG[k],B=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(P){var F=I,L=E,M,ee,V;if(k==="c")L=S(P)+L,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?c:S(Math.abs(P),_),j&&(P=PMe(P)),q&&+P==0&&g!=="+"&&(q=!1),F=(q?g==="("?g:l:g==="-"||g==="("?"":g)+F,L=(k==="s"?hG[8+zse/3]:"")+L+(q&&g==="("?")":""),B){for(M=-1,ee=P.length;++M<ee;)if(V=P.charCodeAt(M),48>V||V>57){L=(V===46?a+P.slice(M+1):P.slice(M))+L,P=P.slice(0,M);break}}}w&&!v&&(P=t(P,1/0));var K=F.length+P.length+L.length,X=K<y?new Array(y-K+1).join(h):"";switch(w&&v&&(P=t(X+P,X.length?y-L.length:1/0),X=""),m){case"<":P=F+P+L+X;break;case"=":P=F+X+P+L;break;case"^":P=X.slice(0,K=X.length>>1)+F+P+L+X.slice(K);break;default:P=X+F+P+L;break}return s(P)}return R.toString=function(){return A+""},R}function d(A,h){var m=u((A=E2(A),A.type="f",A)),g=Math.max(-8,Math.min(8,Math.floor(y1(h)/3)))*3,x=Math.pow(10,-g),v=hG[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var wN,qL,$se;MMe({thousands:",",grouping:[3],currency:["$",""]});function MMe(e){return wN=LMe(e),qL=wN.format,$se=wN.formatPrefix,wN}function UMe(e){return Math.max(0,-y1(Math.abs(e)))}function QMe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(y1(t)/3)))*3-y1(Math.abs(e)))}function HMe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,y1(t)-y1(e))+1}function Gse(e,t,r,n){var a=fO(e,t,r),s;switch(n=E2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=QMe(a,i))&&(n.precision=s),$se(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=HMe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=UMe(a))&&(n.precision=s-(n.type==="%")*2);break}}return qL(n)}function Xm(e){var t=e.domain;return e.ticks=function(r){var n=t();return dO(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Gse(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=AO(i,l,r),u===c)return n[a]=i,n[s]=l,t(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Kse(){var e=GL();return e.copy=function(){return yE(e,Kse())},Ju.apply(e,arguments),Xm(e)}function qse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,xS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return qse(e).unknown(t)},e=arguments.length?Array.from(e,xS):[0,1],Xm(r)}function Wse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function mG(e){return Math.log(e)}function pG(e){return Math.exp(e)}function VMe(e){return-Math.log(-e)}function zMe(e){return-Math.exp(-e)}function $Me(e){return isFinite(e)?+("1e"+e):e<0?0:e}function GMe(e){return e===10?$Me:e===Math.E?Math.exp:t=>Math.pow(e,t)}function KMe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gG(e){return(t,r)=>-e(-t,r)}function WL(e){const t=e(mG,pG),r=t.domain;let n=10,a,s;function i(){return a=KMe(n),s=GMe(n),r()[0]<0?(a=gG(a),s=gG(s),e(VMe,zMe)):e(mG,pG),t}return t.base=function(l){return arguments.length?(n=+l,i()):n},t.domain=function(l){return arguments.length?(r(l),i()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const A=d<u;A&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=dO(u,d,v))}else y=dO(h,m,Math.min(m-h,v)).map(s);return A?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=E2(c)).precision==null&&(c.trim=!0),c=qL(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let A=d/s(Math.round(a(d)));return A*n<n-.5&&(A*=n),A<=u?c(d):""}},t.nice=()=>r(Wse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function Xse(){const e=WL(Sk()).domain([1,10]);return e.copy=()=>yE(e,Xse()).base(e.base()),Ju.apply(e,arguments),e}function xG(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vG(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function XL(e){var t=1,r=e(xG(t),vG(t));return r.constant=function(n){return arguments.length?e(xG(t=+n),vG(t)):t},Xm(r)}function Yse(){var e=XL(Sk());return e.copy=function(){return yE(e,Yse()).constant(e.constant())},Ju.apply(e,arguments)}function bG(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qMe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function WMe(e){return e<0?-e*e:e*e}function YL(e){var t=e(wl,wl),r=1;function n(){return r===1?e(wl,wl):r===.5?e(qMe,WMe):e(bG(r),bG(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Xm(t)}function JL(){var e=YL(Sk());return e.copy=function(){return yE(e,JL()).exponent(e.exponent())},Ju.apply(e,arguments),e}function XMe(){return JL.apply(null,arguments).exponent(.5)}function yG(e){return Math.sign(e)*e*e}function YMe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Jse(){var e=GL(),t=[0,1],r=!1,n;function a(s){var i=YMe(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(yG(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,xS)).map(yG)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Jse(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ju.apply(a,arguments),Xm(a)}function Zse(){var e=[],t=[],r=[],n;function a(){var i=0,l=Math.max(1,t.length);for(r=new Array(l-1);++i<l;)r[i-1]=q8e(e,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:t[vE(r,i)]}return s.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Am),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Zse().domain(e).range(t).unknown(n)},Ju.apply(s,arguments)}function eie(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[vE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return eie().domain([e,t]).range(a).unknown(s)},Ju.apply(Xm(i),arguments)}function tie(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[vE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return tie().domain(e).range(t).unknown(r)},Ju.apply(a,arguments)}const qT=new Date,WT=new Date;function Pi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<i);return c},a.filter=s=>Pi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!s(i););else for(;--l>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(qT.setTime(+s),WT.setTime(+i),e(qT),e(WT),Math.floor(r(qT,WT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const bS=Pi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):bS);bS.range;const sh=1e3,Uu=sh*60,ih=Uu*60,jh=ih*24,ZL=jh*7,wG=jh*30,XT=jh*365,Kp=Pi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sh)},(e,t)=>(t-e)/sh,e=>e.getUTCSeconds());Kp.range;const e8=Pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sh)},(e,t)=>{e.setTime(+e+t*Uu)},(e,t)=>(t-e)/Uu,e=>e.getMinutes());e8.range;const t8=Pi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Uu)},(e,t)=>(t-e)/Uu,e=>e.getUTCMinutes());t8.range;const r8=Pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sh-e.getMinutes()*Uu)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getHours());r8.range;const n8=Pi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getUTCHours());n8.range;const wE=Pi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Uu)/jh,e=>e.getDate()-1);wE.range;const kk=Pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jh,e=>e.getUTCDate()-1);kk.range;const rie=Pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jh,e=>Math.floor(e/jh));rie.range;function rx(e){return Pi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Uu)/ZL)}const jk=rx(0),yS=rx(1),JMe=rx(2),ZMe=rx(3),w1=rx(4),eUe=rx(5),tUe=rx(6);jk.range;yS.range;JMe.range;ZMe.range;w1.range;eUe.range;tUe.range;function nx(e){return Pi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ZL)}const Bk=nx(0),wS=nx(1),rUe=nx(2),nUe=nx(3),E1=nx(4),aUe=nx(5),sUe=nx(6);Bk.range;wS.range;rUe.range;nUe.range;E1.range;aUe.range;sUe.range;const a8=Pi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());a8.range;const s8=Pi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());s8.range;const Bh=Pi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Bh.range;const Th=Pi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Th.range;function nie(e,t,r,n,a,s){const i=[[Kp,1,sh],[Kp,5,5*sh],[Kp,15,15*sh],[Kp,30,30*sh],[s,1,Uu],[s,5,5*Uu],[s,15,15*Uu],[s,30,30*Uu],[a,1,ih],[a,3,3*ih],[a,6,6*ih],[a,12,12*ih],[n,1,jh],[n,2,2*jh],[r,1,ZL],[t,1,wG],[t,3,3*wG],[e,1,XT]];function l(u,d,A){const h=d<u;h&&([u,d]=[d,u]);const m=A&&typeof A.range=="function"?A:c(u,d,A),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,A){const h=Math.abs(d-u)/A,m=QL(([,,v])=>v).right(i,h);if(m===i.length)return e.every(fO(u/XT,d/XT,A));if(m===0)return bS.every(Math.max(fO(u,d,A),1));const[g,x]=i[h/i[m-1][2]<i[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[iUe,oUe]=nie(Th,s8,Bk,rie,n8,t8),[lUe,cUe]=nie(Bh,a8,jk,wE,r8,e8);function YT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function JT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function uUe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=by(a),d=yy(a),A=by(s),h=yy(s),m=by(i),g=yy(i),x=by(l),v=yy(l),y=by(c),w=yy(c),_={a:q,A:K,b:X,B:Z,c:null,d:kG,e:kG,f:FUe,g:VUe,G:$Ue,H:BUe,I:TUe,j:IUe,L:aie,m:OUe,M:DUe,p:G,q:D,Q:TG,s:IG,S:PUe,u:RUe,U:LUe,V:MUe,w:UUe,W:QUe,x:null,X:null,y:HUe,Y:zUe,Z:GUe,"%":BG},j={a:U,A:z,b:J,B:re,c:null,d:jG,e:jG,f:XUe,g:i7e,G:l7e,H:KUe,I:qUe,j:WUe,L:iie,m:YUe,M:JUe,p:oe,q:se,Q:TG,s:IG,S:ZUe,u:e7e,U:t7e,V:r7e,w:n7e,W:a7e,x:null,X:null,y:s7e,Y:o7e,Z:c7e,"%":BG},k={a:R,A:P,b:F,B:L,c:M,d:_G,e:_G,f:_Ue,g:NG,G:CG,H:SG,I:SG,j:wUe,L:NUe,m:yUe,M:EUe,p:B,q:bUe,Q:kUe,s:jUe,S:CUe,u:mUe,U:pUe,V:gUe,w:hUe,W:xUe,x:ee,X:V,y:NG,Y:CG,Z:vUe,"%":SUe};_.x=I(r,_),_.X=I(n,_),_.c=I(t,_),j.x=I(r,j),j.X=I(n,j),j.c=I(t,j);function I(le,ue){return function(ke){var ae=[],Ne=-1,je=0,_e=le.length,me,Te,Le;for(ke instanceof Date||(ke=new Date(+ke));++Ne<_e;)le.charCodeAt(Ne)===37&&(ae.push(le.slice(je,Ne)),(Te=EG[me=le.charAt(++Ne)])!=null?me=le.charAt(++Ne):Te=me==="e"?" ":"0",(Le=ue[me])&&(me=Le(ke,Te)),ae.push(me),je=Ne+1);return ae.push(le.slice(je,Ne)),ae.join("")}}function E(le,ue){return function(ke){var ae=vy(1900,void 0,1),Ne=S(ae,le,ke+="",0),je,_e;if(Ne!=ke.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(ue&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(je=JT(vy(ae.y,0,1)),_e=je.getUTCDay(),je=_e>4||_e===0?wS.ceil(je):wS(je),je=kk.offset(je,(ae.V-1)*7),ae.y=je.getUTCFullYear(),ae.m=je.getUTCMonth(),ae.d=je.getUTCDate()+(ae.w+6)%7):(je=YT(vy(ae.y,0,1)),_e=je.getDay(),je=_e>4||_e===0?yS.ceil(je):yS(je),je=wE.offset(je,(ae.V-1)*7),ae.y=je.getFullYear(),ae.m=je.getMonth(),ae.d=je.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),_e="Z"in ae?JT(vy(ae.y,0,1)).getUTCDay():YT(vy(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(_e+5)%7:ae.w+ae.U*7-(_e+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,JT(ae)):YT(ae)}}function S(le,ue,ke,ae){for(var Ne=0,je=ue.length,_e=ke.length,me,Te;Ne<je;){if(ae>=_e)return-1;if(me=ue.charCodeAt(Ne++),me===37){if(me=ue.charAt(Ne++),Te=k[me in EG?ue.charAt(Ne++):me],!Te||(ae=Te(le,ke,ae))<0)return-1}else if(me!=ke.charCodeAt(ae++))return-1}return ae}function B(le,ue,ke){var ae=u.exec(ue.slice(ke));return ae?(le.p=d.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function R(le,ue,ke){var ae=m.exec(ue.slice(ke));return ae?(le.w=g.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function P(le,ue,ke){var ae=A.exec(ue.slice(ke));return ae?(le.w=h.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function F(le,ue,ke){var ae=y.exec(ue.slice(ke));return ae?(le.m=w.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function L(le,ue,ke){var ae=x.exec(ue.slice(ke));return ae?(le.m=v.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function M(le,ue,ke){return S(le,t,ue,ke)}function ee(le,ue,ke){return S(le,r,ue,ke)}function V(le,ue,ke){return S(le,n,ue,ke)}function q(le){return i[le.getDay()]}function K(le){return s[le.getDay()]}function X(le){return c[le.getMonth()]}function Z(le){return l[le.getMonth()]}function G(le){return a[+(le.getHours()>=12)]}function D(le){return 1+~~(le.getMonth()/3)}function U(le){return i[le.getUTCDay()]}function z(le){return s[le.getUTCDay()]}function J(le){return c[le.getUTCMonth()]}function re(le){return l[le.getUTCMonth()]}function oe(le){return a[+(le.getUTCHours()>=12)]}function se(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var ue=I(le+="",_);return ue.toString=function(){return le},ue},parse:function(le){var ue=E(le+="",!1);return ue.toString=function(){return le},ue},utcFormat:function(le){var ue=I(le+="",j);return ue.toString=function(){return le},ue},utcParse:function(le){var ue=E(le+="",!0);return ue.toString=function(){return le},ue}}}var EG={"-":"",_:" ",0:"0"},ao=/^\s*\d+/,dUe=/^%/,AUe=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function fUe(e){return e.replace(AUe,"\\$&")}function by(e){return new RegExp("^(?:"+e.map(fUe).join("|")+")","i")}function yy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function hUe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function mUe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function pUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function gUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function xUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function CG(e,t,r){var n=ao.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function NG(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function vUe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function bUe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function yUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function _G(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function wUe(e,t,r){var n=ao.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function SG(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function EUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function CUe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function NUe(e,t,r){var n=ao.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function _Ue(e,t,r){var n=ao.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function SUe(e,t,r){var n=dUe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kUe(e,t,r){var n=ao.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function jUe(e,t,r){var n=ao.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function kG(e,t){return Jn(e.getDate(),t,2)}function BUe(e,t){return Jn(e.getHours(),t,2)}function TUe(e,t){return Jn(e.getHours()%12||12,t,2)}function IUe(e,t){return Jn(1+wE.count(Bh(e),e),t,3)}function aie(e,t){return Jn(e.getMilliseconds(),t,3)}function FUe(e,t){return aie(e,t)+"000"}function OUe(e,t){return Jn(e.getMonth()+1,t,2)}function DUe(e,t){return Jn(e.getMinutes(),t,2)}function PUe(e,t){return Jn(e.getSeconds(),t,2)}function RUe(e){var t=e.getDay();return t===0?7:t}function LUe(e,t){return Jn(jk.count(Bh(e)-1,e),t,2)}function sie(e){var t=e.getDay();return t>=4||t===0?w1(e):w1.ceil(e)}function MUe(e,t){return e=sie(e),Jn(w1.count(Bh(e),e)+(Bh(e).getDay()===4),t,2)}function UUe(e){return e.getDay()}function QUe(e,t){return Jn(yS.count(Bh(e)-1,e),t,2)}function HUe(e,t){return Jn(e.getFullYear()%100,t,2)}function VUe(e,t){return e=sie(e),Jn(e.getFullYear()%100,t,2)}function zUe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function $Ue(e,t){var r=e.getDay();return e=r>=4||r===0?w1(e):w1.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function GUe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function jG(e,t){return Jn(e.getUTCDate(),t,2)}function KUe(e,t){return Jn(e.getUTCHours(),t,2)}function qUe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function WUe(e,t){return Jn(1+kk.count(Th(e),e),t,3)}function iie(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function XUe(e,t){return iie(e,t)+"000"}function YUe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function JUe(e,t){return Jn(e.getUTCMinutes(),t,2)}function ZUe(e,t){return Jn(e.getUTCSeconds(),t,2)}function e7e(e){var t=e.getUTCDay();return t===0?7:t}function t7e(e,t){return Jn(Bk.count(Th(e)-1,e),t,2)}function oie(e){var t=e.getUTCDay();return t>=4||t===0?E1(e):E1.ceil(e)}function r7e(e,t){return e=oie(e),Jn(E1.count(Th(e),e)+(Th(e).getUTCDay()===4),t,2)}function n7e(e){return e.getUTCDay()}function a7e(e,t){return Jn(wS.count(Th(e)-1,e),t,2)}function s7e(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function i7e(e,t){return e=oie(e),Jn(e.getUTCFullYear()%100,t,2)}function o7e(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function l7e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?E1(e):E1.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function c7e(){return"+0000"}function BG(){return"%"}function TG(e){return+e}function IG(e){return Math.floor(+e/1e3)}var Qx,lie,cie;u7e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function u7e(e){return Qx=uUe(e),lie=Qx.format,Qx.parse,cie=Qx.utcFormat,Qx.utcParse,Qx}function d7e(e){return new Date(e)}function A7e(e){return e instanceof Date?+e:+new Date(+e)}function i8(e,t,r,n,a,s,i,l,c,u){var d=GL(),A=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),j=u("%Y");function k(I){return(c(I)<I?m:l(I)<I?g:i(I)<I?x:s(I)<I?v:n(I)<I?a(I)<I?y:w:r(I)<I?_:j)(I)}return d.invert=function(I){return new Date(A(I))},d.domain=function(I){return arguments.length?h(Array.from(I,A7e)):h().map(d7e)},d.ticks=function(I){var E=h();return e(E[0],E[E.length-1],I??10)},d.tickFormat=function(I,E){return E==null?k:u(E)},d.nice=function(I){var E=h();return(!I||typeof I.range!="function")&&(I=t(E[0],E[E.length-1],I??10)),I?h(Wse(E,I)):d},d.copy=function(){return yE(d,i8(e,t,r,n,a,s,i,l,c,u))},d}function f7e(){return Ju.apply(i8(lUe,cUe,Bh,a8,jk,wE,r8,e8,Kp,lie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function h7e(){return Ju.apply(i8(iUe,oUe,Th,s8,Bk,kk,n8,t8,Kp,cie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tk(){var e=0,t=1,r,n,a,s,i=wl,l=!1,c;function u(A){return A==null||isNaN(A=+A)?c:i(a===0?.5:(A=(s(A)-r)*a,l?Math.max(0,Math.min(1,A)):A))}u.domain=function(A){return arguments.length?([e,t]=A,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(A){return arguments.length?(l=!!A,u):l},u.interpolator=function(A){return arguments.length?(i=A,u):i};function d(A){return function(h){var m,g;return arguments.length?([m,g]=h,i=A(m,g),u):[i(0),i(1)]}}return u.range=d(cb),u.rangeRound=d($L),u.unknown=function(A){return arguments.length?(c=A,u):c},function(A){return s=A,r=A(e),n=A(t),a=r===n?0:1/(n-r),u}}function Ym(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uie(){var e=Xm(Tk()(wl));return e.copy=function(){return Ym(e,uie())},Kh.apply(e,arguments)}function die(){var e=WL(Tk()).domain([1,10]);return e.copy=function(){return Ym(e,die()).base(e.base())},Kh.apply(e,arguments)}function Aie(){var e=XL(Tk());return e.copy=function(){return Ym(e,Aie()).constant(e.constant())},Kh.apply(e,arguments)}function o8(){var e=YL(Tk());return e.copy=function(){return Ym(e,o8()).exponent(e.exponent())},Kh.apply(e,arguments)}function m7e(){return o8.apply(null,arguments).exponent(.5)}function fie(){var e=[],t=wl;function r(n){if(n!=null&&!isNaN(n=+n))return t((vE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>K8e(e,s/n))},r.copy=function(){return fie(t).domain(e)},Kh.apply(r,arguments)}function Ik(){var e=0,t=.5,r=1,n=1,a,s,i,l,c,u=wl,d,A=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(A?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(A=!!x,m):A},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,_;return arguments.length?([y,w,_]=v,u=SMe(x,[y,w,_]),m):[u(0),u(.5),u(1)]}}return m.range=g(cb),m.rangeRound=g($L),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m}}function hie(){var e=Xm(Ik()(wl));return e.copy=function(){return Ym(e,hie())},Kh.apply(e,arguments)}function mie(){var e=WL(Ik()).domain([.1,1,10]);return e.copy=function(){return Ym(e,mie()).base(e.base())},Kh.apply(e,arguments)}function pie(){var e=XL(Ik());return e.copy=function(){return Ym(e,pie()).constant(e.constant())},Kh.apply(e,arguments)}function l8(){var e=YL(Ik());return e.copy=function(){return Ym(e,l8()).exponent(e.exponent())},Kh.apply(e,arguments)}function p7e(){return l8.apply(null,arguments).exponent(.5)}const ew=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:HL,scaleDiverging:hie,scaleDivergingLog:mie,scaleDivergingPow:l8,scaleDivergingSqrt:p7e,scaleDivergingSymlog:pie,scaleIdentity:qse,scaleImplicit:hO,scaleLinear:Kse,scaleLog:Xse,scaleOrdinal:_k,scalePoint:X8e,scalePow:JL,scaleQuantile:Zse,scaleQuantize:eie,scaleRadial:Jse,scaleSequential:uie,scaleSequentialLog:die,scaleSequentialPow:o8,scaleSequentialQuantile:fie,scaleSequentialSqrt:m7e,scaleSequentialSymlog:Aie,scaleSqrt:XMe,scaleSymlog:Yse,scaleThreshold:tie,scaleTime:f7e,scaleUtc:h7e,tickFormat:Gse},Symbol.toStringTag,{value:"Module"}));var Jm=e=>e.chartData,Fk=ut([Jm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),c8=(e,t,r,n)=>n?Fk(e):Jm(e);function C1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Yc(t)&&Yc(r))return!0}return!1}function FG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function g7e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Yc(r))a=r;else if(typeof r=="function")return;if(Yc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(C1(i))return i}}function x7e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(C1(n))return FG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,l;if(a==="auto")t!=null&&(i=Math.min(...t));else if(dr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&v$.test(a)){var c=v$.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(dr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&b$.test(s)){var d=b$.exec(s);if(d==null||t==null)l=void 0;else{var A=+d[1];l=t[1]+A}}else l=t==null?void 0:t[1];var h=[i,l];if(C1(h))return t==null?h:FG(h,t,r)}}}var ub=1e9,v7e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},d8,Za=!0,Wu="[DecimalError] ",lg=Wu+"Invalid argument: ",u8=Wu+"Exponent out of range: ",db=Math.floor,Fp=Math.pow,b7e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qc,Yi=1e7,Ma=7,gie=9007199254740991,ES=db(gie/Ma),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ma;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return xh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(xh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return bi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Qc))throw Error(Wu+"NaN");if(r.s<1)throw Error(Wu+(r.s?"NaN":"-Infinity"));return r.eq(Qc)?new n(0):(Za=!1,t=xh(C2(r,s),C2(e,s),s),Za=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bie(t,e):xie(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Wu+"NaN");return r.s?(Za=!1,t=xh(r,e,0,1).times(e),Za=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return vie(this)};Ar.naturalLogarithm=Ar.ln=function(){return C2(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xie(t,e):bie(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(lg+e);if(t=bi(a)+1,n=a.d.length-1,r=n*Ma+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wu+"NaN")}for(e=bi(l),Za=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=GA(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=db((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(xh(l,s,i+2)).times(.5),GA(s.d).slice(0,i)===(t=GA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;i+=4}return Za=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,l,c,u,d=this,A=d.constructor,h=d.d,m=(e=new A(e)).d;if(!d.s||!e.s)return new A(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Yi|0,t=l/Yi|0;s[a]=(s[a]+t)%Yi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Za?Sa(e,A.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(lf(e,0,ub),t===void 0?t=n.rounding:lf(t,0,8),Sa(r,e+bi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Ig(n,!0):(lf(e,0,ub),t===void 0?t=a.rounding:lf(t,0,8),n=Sa(new a(n),e+1,t),r=Ig(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Ig(a):(lf(e,0,ub),t===void 0?t=s.rounding:lf(t,0,8),n=Sa(new s(a),e+bi(a)+1,t),r=Ig(n.abs(),!1,e+bi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),bi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Qc);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wu+"Infinity");return l}if(l.eq(Qc))return l;if(n=c.precision,e.eq(Qc))return Sa(l,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=l.s,i){if((r=d<0?-d:d)<=gie){for(a=new c(Qc),t=Math.ceil(n/Ma+4),Za=!1;r%2&&(a=a.times(l),DG(a.d,t)),r=db(r/2),r!==0;)l=l.times(l),DG(l.d,t);return Za=!0,e.s<0?new c(Qc).div(a):Sa(a,n)}}else if(s<0)throw Error(Wu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Za=!1,a=e.times(C2(l,n+u)),Za=!0,a=vie(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=bi(a),n=Ig(a,r<=s.toExpNeg||r>=s.toExpPos)):(lf(e,1,ub),t===void 0?t=s.rounding:lf(t,0,8),a=Sa(new s(a),e,t),r=bi(a),n=Ig(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(lf(e,1,ub),t===void 0?t=n.rounding:lf(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=bi(e),r=e.constructor;return Ig(e,t<=r.toExpNeg||t>=r.toExpPos)};function xie(e,t){var r,n,a,s,i,l,c,u,d=e.constructor,A=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Za?Sa(t,A):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(A/Ma),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Yi|0,c[s]%=Yi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Za?Sa(t,A):t}function lf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(lg+e)}function GA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=Ma-n.length,r&&(s+=H0(r)),s+=n;i=e[t],n=i+"",r=Ma-n.length,r&&(s+=H0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var xh=function(){function e(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%Yi|0,i=s/Yi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Yi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,A,h,m,g,x,v,y,w,_,j,k,I,E,S,B=n.constructor,R=n.s==a.s?1:-1,P=n.d,F=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Wu+"Division by zero");for(c=n.e-a.e,E=F.length,k=P.length,m=new B(R),g=m.d=[],u=0;F[u]==(P[u]||0);)++u;if(F[u]>(P[u]||0)&&--c,s==null?w=s=B.precision:i?w=s+(bi(n)-bi(a))+1:w=s,w<0)return new B(0);if(w=w/Ma+2|0,u=0,E==1)for(d=0,F=F[0],w++;(u<k||d)&&w--;u++)_=d*Yi+(P[u]||0),g[u]=_/F|0,d=_%F|0;else{for(d=Yi/(F[0]+1)|0,d>1&&(F=e(F,d),P=e(P,d),E=F.length,k=P.length),j=E,x=P.slice(0,E),v=x.length;v<E;)x[v++]=0;S=F.slice(),S.unshift(0),I=F[0],F[1]>=Yi/2&&++I;do d=0,l=t(F,x,E,v),l<0?(y=x[0],E!=v&&(y=y*Yi+(x[1]||0)),d=y/I|0,d>1?(d>=Yi&&(d=Yi-1),A=e(F,d),h=A.length,v=x.length,l=t(A,x,h,v),l==1&&(d--,r(A,E<h?S:F,h))):(d==0&&(l=d=1),A=F.slice()),h=A.length,h<v&&A.unshift(0),r(x,A,v),l==-1&&(v=x.length,l=t(F,x,E,v),l<1&&(d++,r(x,E<v?S:F,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=P[j]||0:(x=[P[j]],v=1);while((j++<k||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Sa(m,i?s+bi(m)+1:s)}}();function vie(e,t){var r,n,a,s,i,l,c=0,u=0,d=e.constructor,A=d.precision;if(bi(e)>16)throw Error(u8+bi(e));if(!e.s)return new d(Qc);for(Za=!1,l=A,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Fp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Qc),d.precision=l;;){if(a=Sa(a.times(e),l),r=r.times(++c),i=s.plus(xh(a,r,l)),GA(i.d).slice(0,l)===GA(s.d).slice(0,l)){for(;u--;)s=Sa(s.times(s),l);return d.precision=A,t==null?(Za=!0,Sa(s,A)):s}s=i}}function bi(e){for(var t=e.e*Ma,r=e.d[0];r>=10;r/=10)t++;return t}function ZT(e,t,r){if(t>e.LN10.sd())throw Za=!0,r&&(e.precision=r),Error(Wu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function H0(e){for(var t="";e--;)t+="0";return t}function C2(e,t){var r,n,a,s,i,l,c,u,d,A=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Wu+(m.s?"NaN":"-Infinity"));if(m.eq(Qc))return new x(0);if(t==null?(Za=!1,u=v):u=t,m.eq(10))return t==null&&(Za=!0),ZT(x,u);if(u+=h,x.precision=u,r=GA(g),n=r.charAt(0),s=bi(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=GA(m.d),n=r.charAt(0),A++;s=bi(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=ZT(x,u+2,v).times(s+""),m=C2(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(Za=!0,Sa(m,v)):m;for(l=i=m=xh(m.minus(Qc),m.plus(Qc),u),d=Sa(m.times(m),u),a=3;;){if(i=Sa(i.times(d),u),c=l.plus(xh(i,new x(a),u)),GA(c.d).slice(0,u)===GA(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(ZT(x,u+2,v).times(s+""))),l=xh(l,new x(A),u),x.precision=v,t==null?(Za=!0,Sa(l,v)):l;l=c,a+=2}}function OG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=db(r/Ma),e.d=[],n=(r+1)%Ma,r<0&&(n+=Ma),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ma;n<a;)e.d.push(+t.slice(n,n+=Ma));t=t.slice(n),n=Ma-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Za&&(e.e>ES||e.e<-ES))throw Error(u8+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,i,l,c,u,d,A=e.d;for(i=1,s=A[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=Ma,a=t,u=A[d=0];else{if(d=Math.ceil((n+1)/Ma),s=A.length,d>=s)return e;for(u=s=A[d],i=1;s>=10;s/=10)i++;n%=Ma,a=n-Ma+i}if(r!==void 0&&(s=Fp(10,i-a-1),l=u/s%10|0,c=t<0||A[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Fp(10,i-a):0:A[d-1])%10&1||r==(e.s<0?8:7))),t<1||!A[0])return c?(s=bi(e),A.length=1,t=t-s-1,A[0]=Fp(10,(Ma-t%Ma)%Ma),e.e=db(-t/Ma)||0):(A.length=1,A[0]=e.e=e.s=0),e;if(n==0?(A.length=d,s=1,d--):(A.length=d+1,s=Fp(10,Ma-n),A[d]=a>0?(u/Fp(10,i-a)%Fp(10,a)|0)*s:0),c)for(;;)if(d==0){(A[0]+=s)==Yi&&(A[0]=1,++e.e);break}else{if(A[d]+=s,A[d]!=Yi)break;A[d--]=0,s=1}for(n=A.length;A[--n]===0;)A.pop();if(Za&&(e.e>ES||e.e<-ES))throw Error(u8+bi(e));return e}function bie(e,t){var r,n,a,s,i,l,c,u,d,A,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Za?Sa(t,m):t;if(c=e.d,A=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=A.length):(r=A,n=u,l=c.length),a=Math.max(Math.ceil(m/Ma),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=A.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=A[a]){d=c[a]<A[a];break}i=0}for(d&&(r=c,c=A,A=r,t.s=-t.s),l=c.length,a=A.length-l;a>0;--a)c[l++]=0;for(a=A.length;a>i;){if(c[--a]<A[a]){for(s=a;s&&c[--s]===0;)c[s]=Yi-1;--c[s],c[a]+=Yi}c[a]-=A[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Za?Sa(t,m):t):new h(0)}function Ig(e,t,r){var n,a=bi(e),s=GA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+H0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+H0(-a-1)+s,r&&(n=r-i)>0&&(s+=H0(n))):a>=i?(s+=H0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+H0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=H0(n))),e.s<0?"-"+s:s}function DG(e,t){if(e.length>t)return e.length=t,!0}function yie(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(lg+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return OG(i,s.toString())}else if(typeof s!="string")throw Error(lg+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,b7e.test(s))OG(i,s);else throw Error(lg+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=yie,a.config=a.set=y7e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function y7e(e){if(!e||typeof e!="object")throw Error(Wu+"Object expected");var t,r,n,a=["precision",1,ub,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(db(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(lg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(lg+r+": "+n);return this}var d8=yie(v7e);Qc=new d8(1);const ma=d8;var w7e=e=>e,wie={},Eie=e=>e===wie,PG=e=>function t(){return arguments.length===0||arguments.length===1&&Eie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Cie=(e,t)=>e===1?t:PG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==wie).length;return s>=e?t(...n):Cie(e-s,PG(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Eie(d)?l.shift():d);return t(...u,...l)}))}),Ok=e=>Cie(e.length,e),vO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},E7e=Ok((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),C7e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return w7e;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}},bO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Nie=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,l)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function _ie(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function Sie(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}Ok((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});Ok((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Ok((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var kie=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},jie=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=_ie(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),i=n!==1?.05:.1,l=new ma(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return t?new ma(c.toNumber()):new ma(Math.ceil(c.toNumber()))},N7e=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(_ie(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var i=Math.floor((t-1)/2),l=C7e(E7e(c=>a.add(new ma(c-i).mul(n)).toNumber()),vO);return l(0,t)},Bie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var i=jie(new ma(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new ma(0):(l=new ma(t).add(r).div(2),l=l.sub(new ma(l).mod(i)));var c=Math.ceil(l.sub(t).div(i).toNumber()),u=Math.ceil(new ma(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Bie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ma(c).mul(i)),tickMax:l.add(new ma(u).mul(i))})};function _7e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,l]=kie([t,r]);if(i===-1/0||l===1/0){var c=l===1/0?[i,...vO(0,n-1).map(()=>1/0)]:[...vO(0,n-1).map(()=>-1/0),l];return t>r?bO(c):c}if(i===l)return N7e(i,n,a);var{step:u,tickMin:d,tickMax:A}=Bie(i,l,s,a,0),h=Sie(d,A.add(new ma(.1).mul(u)),u);return t>r?bO(h):h}function S7e(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=kie([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var l=Math.max(t,2),c=jie(new ma(i).sub(s).div(l-1),a,0),u=[...Sie(new ma(s),new ma(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?bO(u):u}var k7e=Nie(_7e),j7e=Nie(S7e),Tie=e=>e.rootProps.maxBarSize,B7e=e=>e.rootProps.barGap,Iie=e=>e.rootProps.barCategoryGap,T7e=e=>e.rootProps.barSize,EE=e=>e.rootProps.stackOffset,A8=e=>e.options.chartName,f8=e=>e.rootProps.syncId,Fie=e=>e.rootProps.syncMethod,h8=e=>e.options.eventEmitter,QA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Yl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Dk=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},I7e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:QA.angleAxisId,includeHidden:!1,name:void 0,reversed:QA.reversed,scale:QA.scale,tick:QA.tick,tickCount:void 0,ticks:void 0,type:QA.type,unit:void 0},F7e={allowDataOverflow:Yl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yl.scale,tick:Yl.tick,tickCount:Yl.tickCount,ticks:void 0,type:Yl.type,unit:void 0},O7e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:QA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:QA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:QA.scale,tick:QA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},D7e={allowDataOverflow:Yl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yl.scale,tick:Yl.tick,tickCount:Yl.tickCount,ticks:void 0,type:"category",unit:void 0},Ab=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?O7e:I7e,CE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?D7e:F7e,Pk=e=>e.polarOptions,m8=ut([$h,Gh,Di],lse),Oie=ut([Pk,m8],(e,t)=>{if(e!=null)return kl(e.innerRadius,t,0)}),Die=ut([Pk,m8],(e,t)=>{if(e!=null)return kl(e.outerRadius,t,t*.8)}),P7e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Pie=ut([Pk],P7e),R7e=ut([Ab,Pie],Dk),Rie=ut([m8,Oie,Die],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),L7e=ut([CE,Rie],Dk),fb=ut([Tn,Pk,Oie,Die,$h,Gh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=t;return{cx:kl(i,a,a/2),cy:kl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,NE=(e,t,r)=>r;function p8(e){return e==null?void 0:e.id}var Ri=e=>{var t=Tn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},hb=e=>e.tooltip.settings.axisId,Li=e=>{var t=Ri(e),r=hb(e);return mb(e,t,r)};function Lie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var l,c=(l=i.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=p8(i);c.forEach((d,A)=>{var h=a==null?A:String(Pa(d,a,null)),m=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function Rk(e){return e.stackId!=null&&e.dataKey!=null}function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){M7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M7e(e,t,r){return(t=U7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U7e(e){var t=Q7e(e,"string");return typeof t=="symbol"?t:t+""}function Q7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yO=[0,"auto"],Fc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},qh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Fc},Oc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ek},Zm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Oc},H7e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},g8=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??H7e},ri=(e,t,r)=>{switch(t){case"xAxis":return qh(e,r);case"yAxis":return Zm(e,r);case"zAxis":return g8(e,r);case"angleAxis":return Ab(e,r);case"radiusAxis":return CE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},V7e=(e,t,r)=>{switch(t){case"xAxis":return qh(e,r);case"yAxis":return Zm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},mb=(e,t,r)=>{switch(t){case"xAxis":return qh(e,r);case"yAxis":return Zm(e,r);case"angleAxis":return Ab(e,r);case"radiusAxis":return CE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Mie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function x8(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var v8=e=>e.graphicalItems.cartesianItems,z7e=ut([ka,NE],x8),b8=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),_E=ut([v8,ri,z7e],b8),Uie=ut([_E],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Rk)),Qie=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Hie=ut([_E],Qie),y8=e=>e.map(t=>t.data).filter(Boolean).flat(1),$7e=ut([_E],y8),w8=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},E8=ut([$7e,c8],w8),C8=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),Lk=ut([E8,ri,_E],C8);function Vie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ax(e){return e.filter(t=>of(t)||t instanceof Date).map(Number).filter(t=>qc(t)===!1)}function G7e(e,t,r){return!r||typeof t!="number"||qc(t)?[]:r.length?ax(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Yc(s)||!Yc(i)))return[t-s,t+i]})):[]}var K7e=ut([Uie,c8,Li],Lie),zie=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,l]=s,c=l.map(p8);return[i,{stackedData:URe(e,c,r),graphicalItems:l}]}))},wO=ut([K7e,Uie,EE],zie),$ie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=$Re(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},q7e=ut([wO,Jm,ka],$ie),Gie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var l,c,u=(l=n[i.id])===null||l===void 0?void 0:l.filter(A=>Vie(a,A)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:G7e(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Mk=e=>e.errorBars,Kie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Vie(r,n));ut([Hie,Mk,ka],Kie);var W7e=ut([E8,ri,Hie,Mk,ka],Gie);function X7e(e){var{value:t}=e;if(of(t)||t instanceof Date)return t}var LG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ax(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Y7e=(e,t,r)=>{var n=e.map(X7e).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&sae(n))?Fse(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},N8=e=>{var t;if(e==null||!("domain"in e))return yO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ax(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:yO},NS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},qie=e=>e.referenceElements.dots,pb=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),J7e=ut([qie,ka,NE],pb),Wie=e=>e.referenceElements.areas,Z7e=ut([Wie,ka,NE],pb),Xie=e=>e.referenceElements.lines,e9e=ut([Xie,ka,NE],pb),Yie=(e,t)=>{var r=ax(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},t9e=ut(J7e,ka,Yie),Jie=(e,t)=>{var r=ax(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},r9e=ut([Z7e,ka],Jie),Zie=(e,t)=>{var r=ax(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},n9e=ut(e9e,ka,Zie),a9e=ut(t9e,n9e,r9e,(e,t,r)=>NS(e,r,t)),eoe=ut([ri],N8),_8=(e,t,r,n,a,s,i)=>{var l=g7e(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?NS(r,a,LG(n)):NS(a,LG(n));return x7e(t,u,e.allowDataOverflow)},s9e=ut([ri,eoe,q7e,W7e,a9e,Tn,ka],_8),i9e=[0,1],S8=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=e,u=Wm(t,s);return u&&l==null?Fse(0,r.length):c==="category"?Y7e(n,e,u):a==="expand"?i9e:i}},k8=ut([ri,Tn,E8,Lk,EE,ka,s9e],S8),toe=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(pE(s));return l in ew?l:"point"}}},ep=ut([ri,Tn,Mie,A8,ka],toe);function o9e(e){if(e!=null){if(e in ew)return ew[e]();var t="scale".concat(pE(e));if(t in ew)return ew[t]()}}function Uk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=o9e(t);if(a!=null){var s=a.domain(r).range(n);return DRe(s),s}}}var j8=(e,t,r)=>{var n=N8(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&C1(e))return k7e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&C1(e))return j7e(e,t.tickCount,t.allowDecimals)}},B8=ut([k8,mb,ep],j8),T8=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&C1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return t},l9e=ut([ri,k8,B8,ka],T8),c9e=ut(Lk,ri,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ax(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),roe=ut(c9e,Tn,Iie,Di,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Yc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=kl(r,e*s),l=e*s/2;return l-i-(l-i)/s*i}return 0}),u9e=(e,t)=>{var r=qh(e,t);return r==null||typeof r.padding!="string"?0:roe(e,"xAxis",t,r.padding)},d9e=(e,t)=>{var r=Zm(e,t);return r==null||typeof r.padding!="string"?0:roe(e,"yAxis",t,r.padding)},A9e=ut(qh,u9e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),f9e=ut(Zm,d9e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),h9e=ut([Di,A9e,Nk,Ck,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),m9e=ut([Di,Tn,f9e,Nk,Ck,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),SE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return h9e(e,r,n);case"yAxis":return m9e(e,r,n);case"zAxis":return(a=g8(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Pie(e);case"radiusAxis":return Rie(e,r);default:return}},noe=ut([ri,SE],Dk),gb=ut([ri,ep,l9e,noe],Uk);ut([_E,Mk,ka],Kie);function aoe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Qk=(e,t)=>t,Hk=(e,t,r)=>r,p9e=ut(FL,Qk,Hk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(aoe)),g9e=ut(OL,Qk,Hk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(aoe)),soe=(e,t)=>({width:e.width,height:t.height}),x9e=(e,t)=>{var r=typeof t.width=="number"?t.width:Ek;return{width:r,height:e.height}},ioe=ut(Di,qh,soe),v9e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},b9e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},y9e=ut(Gh,Di,p9e,Qk,Hk,(e,t,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=soe(t,l);i==null&&(i=v9e(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),w9e=ut($h,Di,g9e,Qk,Hk,(e,t,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=x9e(t,l);i==null&&(i=b9e(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),E9e=(e,t)=>{var r=Di(e),n=qh(e,t);if(n!=null){var a=y9e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},C9e=(e,t)=>{var r=Di(e),n=Zm(e,t);if(n!=null){var a=w9e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},ooe=ut(Di,Zm,(e,t)=>{var r=typeof t.width=="number"?t.width:Ek;return{width:r,height:e.height}}),MG=(e,t,r)=>{switch(t){case"xAxis":return ioe(e,r).width;case"yAxis":return ooe(e,r).height;default:return}},loe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=Wm(e,n),c=t.map(u=>u.value);if(i&&l&&s==="category"&&a&&sae(c))return c}},kE=ut([Tn,Lk,ri,ka],loe),I8=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Wm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},F8=ut([Tn,Lk,mb,ka],I8),UG=ut([Tn,V7e,ep,gb,kE,F8,SE,B8,ka],(e,t,r,n,a,s,i,l,c)=>{if(t==null)return null;var u=Wm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}),coe=(e,t,r,n,a,s,i,l,c)=>{if(!(t==null||n==null)){var u=Wm(e,c),{type:d,ticks:A,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?ro(s[0]-s[1])*2*g:g;var x=A||a;if(x){var v=x.map((y,w)=>{var _=i?i.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return v.filter(y=>!qc(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},uoe=ut([Tn,mb,ep,gb,B8,SE,kE,F8,ka],coe),doe=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Wm(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?ro(n[0]-n[1])*2*u:u,l&&s?s.map((d,A)=>({coordinate:r(d)+u,value:d,index:A,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,A)=>({coordinate:r(d)+u,value:a?a[d]:d,index:A,offset:u}))}},N1=ut([Tn,mb,gb,SE,kE,F8,ka],doe),_1=ut(ri,gb,(e,t)=>{if(!(e==null||t==null))return CS(CS({},e),{},{scale:t})}),N9e=ut([ri,ep,k8,noe],Uk);ut((e,t,r)=>g8(e,r),N9e,(e,t)=>{if(!(e==null||t==null))return CS(CS({},e),{},{scale:t})});var _9e=ut([Tn,FL,OL],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Aoe=e=>e.options.defaultTooltipEventType,foe=e=>e.options.validateTooltipEventTypes;function hoe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function O8(e,t){var r=Aoe(e),n=foe(e);return hoe(t,r,n)}function S9e(e){return or(t=>O8(t,e))}var moe=(e,t)=>{var r,n=Number(t);if(!(qc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},k9e=e=>e.tooltip.settings,X0={active:!1,index:null,dataKey:void 0,coordinate:void 0},j9e={itemInteraction:{click:X0,hover:X0},axisInteraction:{click:X0,hover:X0},keyboardInteraction:X0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},poe=Zc({name:"tooltip",initialState:j9e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=gh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:B9e,removeTooltipEntrySettings:T9e,setTooltipSettingsState:I9e,setActiveMouseOverItemIndex:goe,mouseLeaveItem:F9e,mouseLeaveChart:xoe,setActiveClickItemIndex:O9e,setMouseOverAxisIndex:voe,setMouseClickAxisIndex:D9e,setSyncInteraction:EO,setKeyboardInteraction:CO}=poe.actions,P9e=poe.reducer;function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){R9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R9e(e,t,r){return(t=L9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9e(e){var t=M9e(e,"string");return typeof t=="symbol"?t:t+""}function M9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U9e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Q9e(e){return e.index!=null}var boe=(e,t,r,n)=>{if(t==null)return X0;var a=U9e(e,t,r);if(a==null)return X0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Q9e(a)){if(s)return EN(EN({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return EN(EN({},X0),{},{coordinate:a.coordinate})},D8=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Yc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},yoe=(e,t,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},woe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},jE=e=>e.options.tooltipPayloadSearcher,xb=e=>e.tooltip;function HG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(r),!0).forEach(function(n){H9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H9e(e,t,r){return(t=V9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V9e(e){var t=z9e(e,"string");return typeof t=="symbol"?t:t+""}function z9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $9e(e,t){return e??t}var Eoe=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,A=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=$9e(x,l),w=Array.isArray(y)?use(y,u,d):y,_=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,j=v==null?void 0:v.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?k=SOe(w,n.dataKey,a):k=s(w,t,c,j),Array.isArray(k))k.forEach(E=>{var S=VG(VG({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(y$({tooltipEntrySettings:S,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var I;h.push(y$({tooltipEntrySettings:v,dataKey:_,payload:k,value:Pa(k,_),name:(I=Pa(k,j))!==null&&I!==void 0?I:v==null?void 0:v.name}))}return h},A)}},P8=ut([Li,Tn,Mie,A8,Ri],toe),G9e=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),K9e=ut([Ri,hb],x8),BE=ut([G9e,Li,K9e],b8),q9e=ut([BE],e=>e.filter(Rk)),W9e=ut([BE],y8),vb=ut([W9e,Jm],w8),X9e=ut([q9e,Jm,Li],Lie),R8=ut([vb,Li,BE],C8),Y9e=ut([Li],N8),J9e=ut([BE],e=>e.filter(Rk)),Z9e=ut([X9e,J9e,EE],zie),eQe=ut([Z9e,Jm,Ri],$ie),tQe=ut([BE],Qie),rQe=ut([vb,Li,tQe,Mk,Ri],Gie),nQe=ut([qie,Ri,hb],pb),aQe=ut([nQe,Ri],Yie),sQe=ut([Wie,Ri,hb],pb),iQe=ut([sQe,Ri],Jie),oQe=ut([Xie,Ri,hb],pb),lQe=ut([oQe,Ri],Zie),cQe=ut([aQe,lQe,iQe],NS),uQe=ut([Li,Y9e,eQe,rQe,cQe,Tn,Ri],_8),Coe=ut([Li,Tn,vb,R8,EE,Ri,uQe],S8),dQe=ut([Coe,Li,P8],j8),AQe=ut([Li,Coe,dQe,Ri],T8),Noe=e=>{var t=Ri(e),r=hb(e),n=!1;return SE(e,t,r,n)},_oe=ut([Li,Noe],Dk),Soe=ut([Li,P8,AQe,_oe],Uk),fQe=ut([Tn,R8,Li,Ri],loe),hQe=ut([Tn,R8,Li,Ri],I8),mQe=(e,t,r,n,a,s,i,l)=>{if(t){var{type:c}=t,u=Wm(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,A=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return A=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?ro(a[0]-a[1])*2*A:A,u&&i?i.map((h,m)=>({coordinate:n(h)+A,value:h,index:m,offset:A})):n.domain().map((h,m)=>({coordinate:n(h)+A,value:s?s[h]:h,index:m,offset:A}))}}},Wh=ut([Tn,Li,P8,Soe,Noe,fQe,hQe,Ri],mQe),L8=ut([Aoe,foe,k9e],(e,t,r)=>hoe(r.shared,e,t)),koe=e=>e.tooltip.settings.trigger,M8=e=>e.tooltip.settings.defaultIndex,Vk=ut([xb,L8,koe,M8],boe),Om=ut([Vk,vb],D8),joe=ut([Wh,Om],moe),Boe=ut([Vk],e=>{if(e)return e.dataKey}),Toe=ut([xb,L8,koe,M8],woe),pQe=ut([$h,Gh,Tn,Di,Wh,M8,Toe,jE],yoe),gQe=ut([Vk,pQe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),xQe=ut([Vk],e=>e.active),vQe=ut([Toe,Om,Jm,Li,joe,jE,L8],Eoe),bQe=ut([vQe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function zG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $G(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zG(Object(r),!0).forEach(function(n){yQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yQe(e,t,r){return(t=wQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wQe(e){var t=EQe(e,"string");return typeof t=="symbol"?t:t+""}function EQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CQe=()=>or(Li),NQe=()=>{var e=CQe(),t=or(Wh),r=or(Soe);return v2($G($G({},e),{},{scale:r}),t)},_Qe=()=>or(A8),U8=(e,t)=>t,Ioe=(e,t,r)=>r,Q8=(e,t,r,n)=>n,SQe=ut(Wh,e=>pk(e,t=>t.coordinate)),H8=ut([xb,U8,Ioe,Q8],boe),Foe=ut([H8,vb],D8),kQe=(e,t,r)=>{if(t!=null){var n=xb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Ooe=ut([xb,U8,Ioe,Q8],woe),_S=ut([$h,Gh,Tn,Di,Wh,Q8,Ooe,jE],yoe),jQe=ut([H8,_S],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Doe=ut(Wh,Foe,moe),BQe=ut([Ooe,Foe,Jm,Li,Doe,jE,U8],Eoe),TQe=ut([H8],e=>({isActive:e.active,activeIndex:e.index})),IQe=(e,t,r,n,a,s,i,l)=>{if(!(!e||!t||!n||!a||!s)){var c=GRe(e.chartX,e.chartY,t,r,l);if(c){var u=qRe(c,t),d=FRe(u,i,s,n,a),A=KRe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:A}}}};function NO(){return NO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NO.apply(null,arguments)}function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){FQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FQe(e,t,r){return(t=OQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OQe(e){var t=DQe(e,"string");return typeof t=="symbol"?t:t+""}function DQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PQe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,A=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=$Le;else if(u==="BarChart")m=GLe(i,d,a,s),g=jse;else if(i==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:_}=Bse(d);m={cx:x,cy:v,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=Ise}else m={points:B8e(i,d,a)},g=wse;var j=typeof l=="object"&&"className"in l?l.className:void 0,k=CN(CN(CN(CN({stroke:"#ccc",pointerEvents:"none"},a),m),Xn(l,!1)),{},{payload:A,payloadIndex:h,className:vn("recharts-tooltip-cursor",j)});return C.isValidElement(l)?C.cloneElement(l,k):C.createElement(g,k)}function RQe(e){var t=NQe(),r=gse(),n=LL(),a=_Qe();return C.createElement(PQe,NO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Poe=C.createContext(null),LQe=()=>C.useContext(Poe),eI={exports:{}},KG;function MQe(){return KG||(KG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,A,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,A||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)t.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var h=0,m=A.length,g=new Array(m);h<m;h++)g[h]=A[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},l.prototype.emit=function(u,d,A,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,A),!0;case 4:return v.fn.call(v.context,d,A,h),!0;case 5:return v.fn.call(v.context,d,A,h,m),!0;case 6:return v.fn.call(v.context,d,A,h,m,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var j=v.length,k;for(_=0;_<j;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,A);break;case 4:v[_].fn.call(v[_].context,d,A,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];v[_].fn.apply(v[_].context,w)}}return!0},l.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},l.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},l.prototype.removeListener=function(u,d,A,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return i(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!A||g.context===A)&&i(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||A&&g[x].context!==A)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:i(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(eI)),eI.exports}var UQe=MQe();const QQe=jl(UQe);var N2=new QQe,_O="recharts.syncEvent.tooltip",qG="recharts.syncEvent.brush";function V8(e,t){if(t){var r=Number.parseInt(t,10);if(!qc(r))return e==null?void 0:e[r]}}var HQe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Roe=Zc({name:"options",initialState:HQe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VQe=Roe.reducer,{createEventEmitter:zQe}=Roe.actions;function $Qe(e){return e.tooltip.syncInteraction}var GQe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Loe=Zc({name:"chartData",initialState:GQe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:WG,setDataStartEndIndexes:KQe,setComputedData:Cgt}=Loe.actions,qQe=Loe.reducer,Moe=()=>{};function WQe(){var e=or(f8),t=or(h8),r=$a(),n=or(Fie),a=or(Wh),s=LL(),i=DL(),l=or(c=>c.rootProps.className);C.useEffect(()=>{if(e==null)return Moe;var c=(u,d,A)=>{if(t!==A&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(EO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,i.x+i.width),_=Math.min(y,i.y+i.height),j={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},k=EO({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(k)}}};return N2.on(_O,c),()=>{N2.off(_O,c)}},[l,r,t,e,n,a,s,i])}function XQe(){var e=or(f8),t=or(h8),r=$a();C.useEffect(()=>{if(e==null)return Moe;var n=(a,s,i)=>{t!==i&&e===a&&r(KQe(s))};return N2.on(qG,n),()=>{N2.off(qG,n)}},[r,t,e])}function YQe(){var e=$a();C.useEffect(()=>{e(zQe())},[e]),WQe(),XQe()}function JQe(e,t,r,n,a,s){var i=or(h=>kQe(h,e,t)),l=or(h8),c=or(f8),u=or(Fie),d=or($Qe),A=d==null?void 0:d.active;C.useEffect(()=>{if(!A&&c!=null&&l!=null){var h=EO({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});N2.emit(_O,c,h,l)}},[A,r,i,a,n,l,c,u,s])}function XG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(r),!0).forEach(function(n){ZQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZQe(e,t,r){return(t=eHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eHe(e){var t=tHe(e,"string");return typeof t=="symbol"?t:t+""}function tHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rHe(e){return e.dataKey}function nHe(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(ELe,t)}var JG=[],aHe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!tx.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oh(e){var t=Yu(e,aHe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:A,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:_,axisId:j}=t,k=$a(),I=typeof w=="number"?String(w):w;C.useEffect(()=>{k(I9e({shared:v,trigger:y,axisId:j,active:r,defaultIndex:I}))},[k,v,y,j,r,I]);var E=DL(),S=yse(),B=S9e(v),{activeIndex:R,isActive:P}=or(J=>TQe(J,B,y,I)),F=or(J=>BQe(J,B,y,I)),L=or(J=>Doe(J,B,y,I)),M=or(J=>jQe(J,B,y,I)),ee=F,V=LQe(),q=r??P,[K,X]=Rae([ee,q]),Z=B==="axis"?L:void 0;JQe(B,y,M,Z,R,q);var G=_??V;if(G==null)return null;var D=ee??JG;q||(D=JG),l&&D.length&&(D=Tae(ee.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,rHe));var U=D.length>0,z=C.createElement(BLe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:q,coordinate:M,hasPayload:U,offset:u,position:A,reverseDirection:h,useTranslate3d:m,viewBox:E,wrapperStyle:g,lastBoundingBox:K,innerRef:X,hasPortalFromProps:!!_},nHe(i,YG(YG({},t),{},{payload:D,label:Z,active:q,coordinate:M,accessibilityLayer:S})));return C.createElement(C.Fragment,null,lP.createPortal(z,G),q&&C.createElement(RQe,{cursor:x,tooltipEventType:B,coordinate:M,payload:ee,index:R}))}var tI={},rI={},nI={},ZG;function sHe(){return ZG||(ZG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},A=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,A()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,l=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,l=w;const _=h==null;m(),c&&_&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(nI)),nI}var eK;function iHe(){return eK||(eK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sHe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,A=null;const h=t.debounce(function(...x){d=n.apply(this,x),A=null},a,{edges:u}),m=function(...x){return c!=null&&(A===null&&(A=Date.now()),Date.now()-A>=c)?(d=n.apply(this,x),A=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(rI)),rI}var tK;function oHe(){return tK||(tK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iHe();function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:l})}e.throttle=r}(tI)),tI}var aI,rK;function lHe(){return rK||(rK=1,aI=oHe().throttle),aI}var cHe=lHe();const uHe=jl(cHe);var jw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(n){dHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dHe(e,t,r){return(t=AHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AHe(e){var t=fHe(e,"string");return typeof t=="symbol"?t:t+""}function fHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lh=C.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:A,className:h,onResize:m,style:g={}}=e,x=C.useRef(null),v=C.useRef();v.current=m,C.useImperativeHandle(t,()=>x.current);var[y,w]=C.useState({containerWidth:n.width,containerHeight:n.height}),_=C.useCallback((k,I)=>{w(E=>{var S=Math.round(k),B=Math.round(I);return E.containerWidth===S&&E.containerHeight===B?E:{containerWidth:S,containerHeight:B}})},[]);C.useEffect(()=>{var k=B=>{var R,{width:P,height:F}=B[0].contentRect;_(P,F),(R=v.current)===null||R===void 0||R.call(v,P,F)};d>0&&(k=uHe(k,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(k),{width:E,height:S}=x.current.getBoundingClientRect();return _(E,S),I.observe(x.current),()=>{I.disconnect()}},[_,d]);var j=C.useMemo(()=>{var{containerWidth:k,containerHeight:I}=y;if(k<0||I<0)return null;jw(zp(a)||zp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),jw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=zp(a)?k:a,S=zp(s)?I:s;return r&&r>0&&(E?S=E/r:S&&(E=S*r),c&&S>c&&(S=c)),jw(E>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,S,a,s,i,l,r),C.Children.map(u,B=>C.cloneElement(B,{width:E,height:S,style:sI({width:E,height:S},B.props.style)}))},[r,u,s,c,l,i,y,a]);return C.createElement("div",{id:A?"".concat(A):void 0,className:vn("recharts-responsive-container",h),style:sI(sI({},g),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:x},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),Dm=e=>null;Dm.displayName="Cell";function hHe(e,t,r){return(t=mHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mHe(e){var t=pHe(e,"string");return typeof t=="symbol"?t:t+""}function pHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gHe{constructor(t){hHe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function aK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aK(Object(r),!0).forEach(function(n){vHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vHe(e,t,r){return(t=bHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bHe(e){var t=yHe(e,"string");return typeof t=="symbol"?t:t+""}function yHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wHe={cacheSize:2e3,enableCache:!0},Uoe=xHe({},wHe),sK=new gHe(Uoe.cacheSize),EHe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},iK="recharts_measurement_span";function CHe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var oK=(e,t)=>{try{var r=document.getElementById(iK);r||(r=document.createElement("span"),r.setAttribute("id",iK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,EHe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Bw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||tx.isSsr)return{width:0,height:0};if(!Uoe.enableCache)return oK(t,r);var n=CHe(t,r),a=sK.get(n);if(a)return a;var s=oK(t,r);return sK.set(n,s),s},lK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NHe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_He=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Qoe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},SHe=Object.keys(Qoe),wv="NaN";function kHe(e,t){return e*Qoe[t]}class ql{static parse(t){var r,[,n,a]=(r=_He.exec(t))!==null&&r!==void 0?r:[];return new ql(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,qc(t)&&(this.unit=""),r!==""&&!NHe.test(r)&&(this.num=NaN,this.unit=""),SHe.includes(r)&&(this.num=kHe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ql(NaN,""):new ql(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ql(NaN,""):new ql(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ql(NaN,""):new ql(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ql(NaN,""):new ql(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qc(this.num)}}function Hoe(e){if(e.includes(wv))return wv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=lK.exec(t))!==null&&r!==void 0?r:[],i=ql.parse(n??""),l=ql.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return wv;t=t.replace(lK,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,A,h]=(u=cK.exec(t))!==null&&u!==void 0?u:[],m=ql.parse(d??""),g=ql.parse(h??""),x=A==="+"?m.add(g):m.subtract(g);if(x.isNaN())return wv;t=t.replace(cK,x.toString())}return t}var uK=/\(([^()]*)\)/;function jHe(e){for(var t=e,r;(r=uK.exec(t))!=null;){var[,n]=r;t=t.replace(uK,Hoe(n))}return t}function BHe(e){var t=e.replace(/\s+/g,"");return t=jHe(t),t=Hoe(t),t}function THe(e){try{return BHe(e)}catch{return wv}}function iI(e){var t=THe(e.slice(5,-1));return t===wv?"":t}var IHe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],FHe=["dx","dy","angle","className","breakAll"];function SO(){return SO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SO.apply(null,arguments)}function dK(e,t){if(e==null)return{};var r,n,a=OHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Voe=/[ \f\n\r\t\v\u2028\u2029]+/,zoe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Is(t)||(r?a=t.toString().split(""):a=t.toString().split(Voe));var s=a.map(l=>({word:l,width:Bw(l,n).width})),i=r?0:Bw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},DHe=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=e,u=dr(s),d=i,A=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((F,L)=>{var{word:M,width:ee}=L,V=F[F.length-1];if(V&&(n==null||a||V.width+ee+r<Number(n)))V.words.push(M),V.width+=ee+r;else{var q={words:[M],width:ee};F.push(q)}return F},[])},h=A(t),m=R=>R.reduce((P,F)=>P.width>F.width?P:F);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=R=>{var P=d.slice(0,R),F=zoe({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,L=A(F),M=L.length>s||m(L).width>Number(n);return[M,L]},y=0,w=d.length-1,_=0,j;y<=w&&_<=d.length-1;){var k=Math.floor((y+w)/2),I=k-1,[E,S]=v(I),[B]=v(k);if(!E&&!B&&(y=k+1),E&&B&&(w=k-1),!E&&B){j=S;break}_++}return j||h},AK=e=>{var t=Is(e)?[]:e.toString().split(Voe);return[{words:t}]},PHe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!tx.isSsr){var l,c,u=zoe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:A}=u;l=d,c=A}else return AK(n);return DHe({breakAll:s,children:n,maxLines:i,style:a},l,c,t,r)}return AK(n)},fK="#808080",bb=C.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=fK}=e,d=dK(e,IHe),A=C.useMemo(()=>PHe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=dK(d,FHe);if(!of(r)||!of(n))return null;var w=r+(dr(h)?h:0),_=n+(dr(m)?m:0),j;switch(c){case"start":j=iI("calc(".concat(s,")"));break;case"middle":j=iI("calc(".concat((A.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=iI("calc(".concat(A.length-1," * -").concat(a,")"));break}var k=[];if(i){var I=A[0].width,{width:E}=d;k.push("scale(".concat(dr(E)?E/I:1,")"))}return g&&k.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),k.length&&(y.transform=k.join(" ")),C.createElement("text",SO({},Xn(y,!0),{ref:t,x:w,y:_,className:vn("recharts-text",x),textAnchor:l,fill:u.includes("url")?fK:u}),A.map((S,B)=>{var R=S.words.join(v?"":" ");return C.createElement("tspan",{x:w,dy:B===0?j:a,key:"".concat(R,"-").concat(B)},R)}))});bb.displayName="Text";var RHe=["offset"],LHe=["labelRef"];function hK(e,t){if(e==null)return{};var r,n,a=MHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){UHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UHe(e,t,r){return(t=QHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QHe(e){var t=HHe(e,"string");return typeof t=="symbol"?t:t+""}function HHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eh(){return eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eh.apply(null,arguments)}var VHe=e=>{var{value:t,formatter:r}=e,n=Is(e.children)?t:e.children;return typeof r=="function"?r(n):n},z8=e=>e!=null&&typeof e=="function",zHe=(e,t)=>{var r=ro(t-e),n=Math.min(Math.abs(t-e),360);return r*n},$He=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:A,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=zHe(A,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=A+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var _=ea(l,c,g,y),j=ea(l,c,g,y+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),I=Is(e.id)?p2("recharts-radial-line-"):e.id;return C.createElement("text",eh({},r,{dominantBaseline:"central",className:vn("recharts-radial-bar-label",i)}),C.createElement("defs",null,C.createElement("path",{id:I,d:k})),C.createElement("textPath",{xlinkHref:"#".concat(I)},t))},GHe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:A}=ea(n,a,i+t,u);return{x:d,y:A,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:m,y:g}=ea(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},KHe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,A=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:i-u*n,textAnchor:"middle",verticalAnchor:A};return ws(ws({},y),r?{height:Math.max(i-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ws(ws({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:l}:{})}if(a==="left"){var _={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ws(ws({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:s+l+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"};return ws(ws({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var k=r?{width:l,height:c}:{};return a==="insideLeft"?ws({x:s+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"},k):a==="insideRight"?ws({x:s+l-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},k):a==="insideTop"?ws({x:s+l/2,y:i+d,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?ws({x:s+l/2,y:i+c-d,textAnchor:"middle",verticalAnchor:A},k):a==="insideTopLeft"?ws({x:s+g,y:i+d,textAnchor:v,verticalAnchor:h},k):a==="insideTopRight"?ws({x:s+l-g,y:i+d,textAnchor:x,verticalAnchor:h},k):a==="insideBottomLeft"?ws({x:s+g,y:i+c-d,textAnchor:v,verticalAnchor:A},k):a==="insideBottomRight"?ws({x:s+l-g,y:i+c-d,textAnchor:x,verticalAnchor:A},k):a&&typeof a=="object"&&(dr(a.x)||zp(a.x))&&(dr(a.y)||zp(a.y))?ws({x:s+kl(a.x,l),y:i+kl(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):ws({x:s+l/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},qHe=e=>"cx"in e&&dr(e.cx);function Zl(e){var{offset:t=5}=e,r=hK(e,RHe),n=ws({offset:t},r),{viewBox:a,position:s,value:i,children:l,content:c,className:u="",textBreakAll:d,labelRef:A}=n,h=or(fb),m=DL(),g=s==="center"?m:h??m,x=a||g;if(!x||Is(i)&&Is(l)&&!C.isValidElement(c)&&typeof c!="function")return null;var v=ws(ws({},n),{},{viewBox:x});if(C.isValidElement(c)){var{labelRef:y}=v,w=hK(v,LHe);return C.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=C.createElement(c,v),C.isValidElement(_))return _}else _=VHe(n);var j=qHe(x),k=Xn(n,!0);if(j&&(s==="insideStart"||s==="insideEnd"||s==="end"))return $He(n,_,k,x);var I=j?GHe(x,n.offset,n.position):KHe(n,x);return C.createElement(bb,eh({ref:A,className:vn("recharts-label",u)},k,I,{breakAll:d}),_)}Zl.displayName="Label";var $oe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:l,innerRadius:c,outerRadius:u,x:d,y:A,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(dr(g)&&dr(x)){if(dr(d)&&dr(A))return{x:d,y:A,width:g,height:x};if(dr(h)&&dr(m))return{x:h,y:m,width:g,height:x}}if(dr(d)&&dr(A))return{x:d,y:A,width:0,height:0};if(dr(t)&&dr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||i||0,clockWise:v};if(e.viewBox)return e.viewBox},WHe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?C.createElement(Zl,eh({key:"label-implicit"},n)):of(e)?C.createElement(Zl,eh({key:"label-implicit",value:e},n)):C.isValidElement(e)?e.type===Zl?C.cloneElement(e,ws({key:"label-implicit"},n)):C.createElement(Zl,eh({key:"label-implicit",content:e},n)):z8(e)?C.createElement(Zl,eh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?C.createElement(Zl,eh({},e,{key:"label-implicit"},n)):null},XHe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=$oe(t),l=gE(a,Zl).map((u,d)=>C.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return l;var c=WHe(t.label,r||i,s);return[c,...l]};Zl.parseViewBox=$oe;Zl.renderCallByParent=XHe;var oI={},lI={},pK;function YHe(){return pK||(pK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(lI)),lI}var cI={},gK;function JHe(){return gK||(gK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(cI)),cI}var xK;function ZHe(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YHe(),r=JHe(),n=yL();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(oI)),oI}var uI,vK;function eVe(){return vK||(vK=1,uI=ZHe().last),uI}var tVe=eVe();const Goe=jl(tVe);var rVe=["valueAccessor"],nVe=["data","dataKey","clockWise","id","textBreakAll"];function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(null,arguments)}function bK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bK(Object(r),!0).forEach(function(n){aVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aVe(e,t,r){return(t=sVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sVe(e){var t=iVe(e,"string");return typeof t=="symbol"?t:t+""}function iVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wK(e,t){if(e==null)return{};var r,n,a=oVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lVe=e=>Array.isArray(e.value)?Goe(e.value):e.value;function fm(e){var{valueAccessor:t=lVe}=e,r=wK(e,rVe),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:l}=r,c=wK(r,nVe);return!n||!n.length?null:C.createElement(us,{className:"recharts-label-list"},n.map((u,d)=>{var A=Is(a)?t(u,d):Pa(u&&u.payload,a),h=Is(i)?{}:{id:"".concat(i,"-").concat(d)};return C.createElement(Zl,SS({},Xn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:A,textBreakAll:l,viewBox:Zl.parseViewBox(Is(s)?u:yK(yK({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}fm.displayName="LabelList";function cVe(e,t){return e?e===!0?C.createElement(fm,{key:"labelList-implicit",data:t}):C.isValidElement(e)||z8(e)?C.createElement(fm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?C.createElement(fm,SS({data:t},e,{key:"labelList-implicit"})):null:null}function uVe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=gE(n,fm).map((i,l)=>C.cloneElement(i,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=cVe(e.label,t);return[s,...a]}fm.renderCallByParent=uVe;var dVe=["points","className","baseLinePoints","connectNulls"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(null,arguments)}function AVe(e,t){if(e==null)return{};var r,n,a=fVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EK=e=>e&&e.x===+e.x&&e.y===+e.y,hVe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{EK(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),EK(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tw=(e,t)=>{var r=hVe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,l)=>"".concat(s).concat(l===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},mVe=(e,t,r)=>{var n=Tw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Tw(t.reverse(),r).slice(1))},Koe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=AVe(e,dVe);if(!t||!t.length)return null;var i=vn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=mVe(t,n,a);return C.createElement("g",{className:i},C.createElement("path",Ev({},Xn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?C.createElement("path",Ev({},Xn(s,!0),{fill:"none",d:Tw(t,a)})):null,l?C.createElement("path",Ev({},Xn(s,!0),{fill:"none",d:Tw(n,a)})):null)}var u=Tw(t,a);return C.createElement("path",Ev({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function kO(){return kO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kO.apply(null,arguments)}var $8=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=vn("recharts-dot",a);return t===+t&&r===+r&&n===+n?C.createElement("circle",kO({},ul(e),fL(e),{className:s,cx:t,cy:r,r:n})):null},G8=e=>e.graphicalItems.polarItems,pVe=ut([ka,NE],x8),K8=ut([G8,ri,pVe],b8),gVe=ut([K8],y8),q8=ut([gVe,Fk],w8),qoe=ut([q8,ri,K8],C8),xVe=ut([q8,ri,K8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),CK=()=>{},vVe=ut([ri,eoe,CK,xVe,CK,Tn,ka],_8),Woe=ut([ri,Tn,q8,qoe,EE,ka,vVe],S8),Xoe=ut([Woe,ri,ep],j8),bVe=ut([ri,Woe,Xoe,ka],T8),W8=(e,t,r)=>{switch(t){case"angleAxis":return Ab(e,r);case"radiusAxis":return CE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},X8=(e,t,r)=>{switch(t){case"angleAxis":return R7e(e,r);case"radiusAxis":return L7e(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yb=ut([W8,ep,bVe,X8],Uk),Yoe=ut([Tn,qoe,mb,ka],I8),wb=ut([Tn,W8,ep,yb,Xoe,X8,kE,Yoe,ka],coe);ut([Tn,W8,yb,X8,kE,Yoe,ka],doe);var yVe=(e,t)=>wb(e,"angleAxis",t,!1),wVe=ut([yVe],e=>{if(e)return e.map(t=>t.coordinate)}),EVe=(e,t)=>wb(e,"radiusAxis",t,!1),CVe=ut([EVe],e=>{if(e)return e.map(t=>t.coordinate)}),NVe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function _Ve(e,t){if(e==null)return{};var r,n,a=SVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(null,arguments)}function NK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function S1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NK(Object(r),!0).forEach(function(n){kVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kVe(e,t,r){return(t=jVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jVe(e){var t=BVe(e,"string");return typeof t=="symbol"?t:t+""}function BVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TVe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var l=ea(t,r,e,s);i?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},IVe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var l=S1({stroke:"#ccc"},ul(e));return C.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ea(t,r,n,c),d=ea(t,r,a,c);return C.createElement("line",Ih({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},FVe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=S1(S1({stroke:"#ccc"},ul(e)),{},{fill:"none"});return C.createElement("circle",Ih({},s,{className:vn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},OVe=e=>{var{radius:t,index:r}=e,n=S1(S1({stroke:"#ccc"},ul(e)),{},{fill:"none"});return C.createElement("path",Ih({},n,{className:vn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:TVe(t,e.cx,e.cy,e.polarAngles)}))},DVe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:C.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?C.createElement(FVe,Ih({key:s},e,{radius:n,index:a})):C.createElement(OVe,Ih({key:s},e,{radius:n,index:a}))}))},Joe=e=>{var t,r,n,a,s,i,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:A=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=_Ve(e,NVe),w=or(fb),_=S1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:j,polarRadius:k,cx:I,cy:E,innerRadius:S,outerRadius:B}=_,R=or(M=>wVe(M,A)),P=or(M=>CVe(M,h)),F=Array.isArray(j)?j:R,L=Array.isArray(k)?k:P;return B<=0||F==null||L==null?null:C.createElement("g",{className:"recharts-polar-grid"},C.createElement(IVe,Ih({cx:I,cy:E,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:F,polarRadius:L})),C.createElement(DVe,Ih({cx:I,cy:E,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:F,polarRadius:L})))};Joe.displayName="PolarGrid";var dI={},AI={},_K;function PVe(){return _K||(_K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const l=r[i],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(AI)),AI}var SK;function RVe(){return SK||(SK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PVe(),r=mk(),n=_L();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(dI)),dI}var fI,kK;function LVe(){return kK||(kK=1,fI=RVe().maxBy),fI}var MVe=LVe();const UVe=jl(MVe);var hI={},mI={},jK;function QVe(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const l=r[i],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(mI)),mI}var BK;function HVe(){return BK||(BK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QVe(),r=mk(),n=_L();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(hI)),hI}var pI,TK;function VVe(){return TK||(TK=1,pI=HVe().minBy),pI}var zVe=VVe();const $Ve=jl(zVe);var GVe={radiusAxis:{},angleAxis:{}},Zoe=Zc({name:"polarAxis",initialState:GVe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:KVe,removeRadiusAxis:qVe,addAngleAxis:WVe,removeAngleAxis:XVe}=Zoe.actions,YVe=Zoe.reducer,JVe=["cx","cy","angle","axisLine"],ZVe=["angle","tickFormatter","stroke","tick"];function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_2.apply(null,arguments)}function IK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IK(Object(r),!0).forEach(function(n){zk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zk(e,t,r){return(t=eze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eze(e){var t=tze(e,"string");return typeof t=="symbol"?t:t+""}function tze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ele(e,t){if(e==null)return{};var r,n,a=rze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tle="radiusAxis";function nze(e){var t=$a();return C.useEffect(()=>(t(KVe(e)),()=>{t(qVe(e))})),null}var aze=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},sze=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},ize=(e,t,r,n)=>{var a=UVe(n,i=>i.coordinate||0),s=$Ve(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},oze=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=ele(e,JVe),l=t.reduce((A,h)=>[Math.min(A[0],h.coordinate),Math.max(A[1],h.coordinate)],[1/0,-1/0]),c=ea(r,n,l[0],a),u=ea(r,n,l[1],a),d=KA(KA(KA({},ul(i)),{},{fill:"none"},Xn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return C.createElement("line",_2({className:"recharts-polar-radius-axis-line"},d))},lze=(e,t,r)=>{var n;return C.isValidElement(e)?n=C.cloneElement(e,t):typeof e=="function"?n=e(t):n=C.createElement(bb,_2({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},cze=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=ele(e,ZVe),l=sze(e.orientation),c=ul(i),u=Xn(s,!1),d=t.map((A,h)=>{var m=aze(A,e.angle,e.cx,e.cy),g=KA(KA(KA(KA({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:A});return C.createElement(us,_2({className:vn("recharts-polar-radius-axis-tick",cse(s)),key:"tick-".concat(A.coordinate)},ex(e,A,h)),lze(s,g,n?n(A.value,h):A.value))});return C.createElement(us,{className:"recharts-polar-radius-axis-ticks"},d)},uze=e=>{var{radiusAxisId:t}=e,r=or(fb),n=or(c=>yb(c,"radiusAxis",t)),a=or(c=>wb(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=KA(KA(KA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:l}=s;return C.createElement(us,{className:vn("recharts-polar-radius-axis",tle,s.className)},l&&oze(s,a),i&&cze(s,a),Zl.renderCallByParent(s,ize(s.angle,s.cx,s.cy,a)))};class $k extends C.PureComponent{render(){return C.createElement(C.Fragment,null,C.createElement(nze,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),C.createElement(uze,this.props))}}zk($k,"displayName","PolarRadiusAxis");zk($k,"axisType",tle);zk($k,"defaultProps",Yl);var dze=["children"];function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(null,arguments)}function FK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FK(Object(r),!0).forEach(function(n){Gk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gk(e,t,r){return(t=Aze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aze(e){var t=fze(e,"string");return typeof t=="symbol"?t:t+""}function fze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hze(e,t){if(e==null)return{};var r,n,a=mze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pze=Math.PI/180,OK=1e-5,rle="angleAxis";function gze(e){var t=$a(),r=C.useMemo(()=>{var{children:s}=e,i=hze(e,dze);return i},[e]),n=or(s=>Ab(s,r.id)),a=r===n;return C.useEffect(()=>(t(WVe(r)),()=>{t(XVe(r))}),[t,r]),a?e.children:null}var xze=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,l=i||8,c=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},vze=(e,t)=>{var r=Math.cos(-e.coordinate*pze);return r>OK?t==="outer"?"start":"end":r<-OK?t==="outer"?"end":"start":"middle"},bze=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var l=HA(HA({},ul(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return C.createElement($8,Fh({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=i.map(u=>ea(t,r,n,u.coordinate));return C.createElement(Koe,Fh({className:"recharts-polar-angle-axis-line"},l,{points:c}))},yze=e=>{var{tick:t,tickProps:r,value:n}=e;return t?C.isValidElement(t)?C.cloneElement(t,r):typeof t=="function"?t(r):C.createElement(bb,Fh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},wze=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=ul(e),l=Xn(t,!1),c=HA(HA({},i),{},{fill:"none"},Xn(r,!1)),u=s.map((d,A)=>{var h=xze(d,e),m=vze(d,e.orientation),g=HA(HA(HA({},i),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:A,payload:d,x:h.x2,y:h.y2});return C.createElement(us,Fh({className:vn("recharts-polar-angle-axis-tick",cse(t)),key:"tick-".concat(d.coordinate)},ex(e,d,A)),r&&C.createElement("line",Fh({className:"recharts-polar-angle-axis-tick-line"},c,h)),C.createElement(yze,{tick:t,tickProps:g,value:n?n(d.value,A):d.value}))});return C.createElement(us,{className:"recharts-polar-angle-axis-ticks"},u)},Eze=e=>{var{angleAxisId:t}=e,r=or(fb),n=or(l=>yb(l,"angleAxis",t)),a=uc(),s=or(l=>wb(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=HA(HA(HA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return C.createElement(us,{className:vn("recharts-polar-angle-axis",rle,i.className)},C.createElement(bze,Fh({},i,{ticks:s})),C.createElement(wze,Fh({},i,{ticks:s})))};class Kk extends C.PureComponent{render(){return this.props.radius<=0?null:C.createElement(gze,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},C.createElement(Eze,this.props))}}Gk(Kk,"displayName","PolarAngleAxis");Gk(Kk,"axisType",rle);Gk(Kk,"defaultProps",QA);function DK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DK(Object(r),!0).forEach(function(n){Cze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cze(e,t,r){return(t=Nze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nze(e){var t=_ze(e,"string");return typeof t=="symbol"?t:t+""}function _ze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sze=(e,t)=>t,Y8=ut([G8,Sze],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),kze=[],J8=(e,t,r)=>(r==null?void 0:r.length)===0?kze:r,nle=ut([Fk,Y8,J8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>PK(PK({},t.presentationProps),s.props))),a!=null)return a}}),jze=ut([nle,Y8,J8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:ob(i,t.dataKey),color:l,payload:n,type:t.legendType}})}),Bze=ut([nle,Y8,J8,Di],(e,t,r,n)=>{if(!(t==null||e==null))return E$e({offset:n,pieSettings:t,displayedData:e,cells:r})}),gI={},RK;function Tze(){return RK||(RK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(gI)),gI}var xI,LK;function Ize(){return LK||(LK=1,xI=Tze().isPlainObject),xI}var Fze=Ize();const Oze=jl(Fze);function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kS.apply(null,arguments)}var MK=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},Dze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pze=e=>{var t=Yu(e,Dze),r=C.useRef(),[n,a]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:i,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:A,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=vn("recharts-trapezoid",d);return g?C.createElement(AS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:A,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:_,x:j,y:k}=v;return C.createElement(AS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:A},C.createElement("path",kS({},Xn(t,!0),{className:x,d:MK(j,k,y,w,_),ref:r})))}):C.createElement("g",null,C.createElement("path",kS({},Xn(t,!0),{className:x,d:MK(s,i,l,c,u)})))},Rze=["option","shapeType","propTransformer","activeClassName","isActive"];function Lze(e,t){if(e==null)return{};var r,n,a=Mze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UK(Object(r),!0).forEach(function(n){Uze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uze(e,t,r){return(t=Qze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qze(e){var t=Hze(e,"string");return typeof t=="symbol"?t:t+""}function Hze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vze(e,t){return jS(jS({},t),e)}function zze(e,t){return e==="symbols"}function QK(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return C.createElement(jse,r);case"trapezoid":return C.createElement(Pze,r);case"sector":return C.createElement(Ise,r);case"symbols":if(zze(t))return C.createElement(xL,r);break;default:return null}}function $ze(e){return C.isValidElement(e)?e.props:e}function ale(e){var{option:t,shapeType:r,propTransformer:n=Vze,activeClassName:a="recharts-active-shape",isActive:s}=e,i=Lze(e,Rze),l;if(C.isValidElement(t))l=C.cloneElement(t,jS(jS({},i),$ze(t)));else if(typeof t=="function")l=t(i);else if(Oze(t)&&typeof t!="boolean"){var c=n(t,i);l=C.createElement(QK,{shapeType:r,elementProps:c})}else{var u=i;l=C.createElement(QK,{shapeType:r,elementProps:u})}return s?C.createElement(us,{className:a},l):l}var Z8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(goe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},eM=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(F9e())}},tM=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(O9e({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function rM(e){var{fn:t,args:r}=e,n=$a(),a=uc();return C.useEffect(()=>{if(!a){var s=t(r);return n(B9e(s)),()=>{n(T9e(s))}}},[t,r,n,a]),null}var sle=()=>{};function Gze(e){var{legendPayload:t}=e,r=$a(),n=uc();return C.useEffect(()=>n?sle:(r(vse(t)),()=>{r(bse(t))}),[r,n,t]),null}function ile(e){var{legendPayload:t}=e,r=$a(),n=or(Tn);return C.useEffect(()=>n!=="centric"&&n!=="radial"?sle:(r(vse(t)),()=>{r(bse(t))}),[r,n,t]),null}function nM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=C.useRef(p2(t)),n=C.useRef(e);return n.current!==e&&(r.current=p2(t),n.current=e),r.current}var vI,Kze=()=>{var[e]=C.useState(()=>p2("uid-"));return e},qze=(vI=Jhe.useId)!==null&&vI!==void 0?vI:Kze;function Wze(e,t){var r=qze();return t||(e?"".concat(e,"-").concat(r):r)}var Xze=C.createContext(void 0),aM=e=>{var{id:t,type:r,children:n}=e,a=Wze("recharts-".concat(r),t);return C.createElement(Xze.Provider,{value:a},n(a))},Yze={cartesianItems:[],polarItems:[]},ole=Zc({name:"graphicalItems",initialState:Yze,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=gh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=gh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=gh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:Jze,replaceCartesianGraphicalItem:Zze,removeCartesianGraphicalItem:e$e,addPolarGraphicalItem:t$e,removePolarGraphicalItem:r$e}=ole.actions,n$e=ole.reducer;function a$e(e){var t=$a(),r=C.useRef(null);return C.useEffect(()=>{r.current===null?t(Jze(e)):r.current!==e&&t(Zze({prev:r.current,next:e})),r.current=e},[t,e]),C.useEffect(()=>()=>{r.current&&(t(e$e(r.current)),r.current=null)},[t]),null}function lle(e){var t=$a();return C.useEffect(()=>(t(t$e(e)),()=>{t(r$e(e))}),[t,e]),null}function s$e(){}var i$e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},HK={t:0},bI={t:1};function sM(e){var t=Yu(e,i$e),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=kse("JavascriptAnimate",t.animationManager),[A,h]=C.useState(r?HK:bI),m=C.useRef(null);return C.useEffect(()=>{r||h(bI)},[r]),C.useEffect(()=>{if(!r||!n)return s$e;var g=Sse(HK,bI,Nse(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,i,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,i,c,l,d]),u(A.t)}var o$e=["onMouseEnter","onClick","onMouseLeave"],l$e=["id"],c$e=["id"];function iM(e,t){if(e==null)return{};var r,n,a=u$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VK(Object(r),!0).forEach(function(n){d$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d$e(e,t,r){return(t=A$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A$e(e){var t=f$e(e,"string");return typeof t=="symbol"?t:t+""}function f$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oh.apply(null,arguments)}function h$e(e){var t=C.useMemo(()=>gE(e.children,Dm),[e.children]),r=or(n=>jze(n,e.id,t));return r==null?null:C.createElement(ile,{legendPayload:r})}function m$e(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:ob(l,t),hide:c,type:u,color:i,unit:""}}}var p$e=(e,t)=>e>t?"start":e<t?"end":"middle",g$e=(e,t,r)=>typeof t=="function"?t(e):kl(t,r,r*.8),x$e=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,l=lse(s,i),c=a+kl(e.cx,s,s/2),u=n+kl(e.cy,i,i/2),d=kl(e.innerRadius,l,0),A=g$e(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:A,maxRadius:h}},v$e=(e,t)=>{var r=ro(t-e),n=Math.min(Math.abs(t-e),360);return r*n},b$e=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var r=vn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(wse,Oh({},t,{type:"linear",className:r}))},y$e=(e,t,r)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),C.isValidElement(n)))return n;var a=vn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return C.createElement(bb,Oh({},t,{alignmentBaseline:"middle",className:a}),n)};function w$e(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var l=ul(r),c=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,A=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=ea(h.cx,h.cy,h.outerRadius+d,g),v=ks(ks(ks(ks({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:p$e(x.x,h.cx)},x),y=ks(ks(ks(ks({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[ea(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return C.createElement(us,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&b$e(s,y),y$e(a,v,Pa(h,i)))});return C.createElement(us,{className:"recharts-pie-labels"},A)}function cle(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=or(Om),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=iM(a,o$e),A=Z8(l,a.dataKey),h=eM(u),m=tM(c,a.dataKey);return t==null?null:C.createElement(C.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===i,y=i?n:null,w=v?r:y,_=ks(ks({},g),{},{stroke:g.stroke,tabIndex:-1,[hse]:x,[mse]:a.dataKey});return C.createElement(us,Oh({tabIndex:-1,className:"recharts-pie-sector"},ex(d,g,x),{onMouseEnter:A(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),C.createElement(ale,Oh({option:w,isActive:v,shapeType:"sector"},_)))}),C.createElement(w$e,{sectors:t,props:a,showLabels:s}))}function E$e(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:A}=r,h=Math.abs(r.minAngle),m=v$e(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(I=>Pa(I,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,_=n.reduce((I,E)=>{var S=Pa(E,u,0);return I+(dr(S)?S:0)},0),j;if(_>0){var k;j=n.map((I,E)=>{var S=Pa(I,u,0),B=Pa(I,d,E),R=x$e(r,s,I),P=(dr(S)?S:0)/_,F,L=ks(ks({},I),a&&a[E]&&a[E].props);E?F=k.endAngle+ro(m)*x*(S!==0?1:0):F=l;var M=F+ro(m)*((S!==0?h:0)+P*w),ee=(F+M)/2,V=(R.innerRadius+R.outerRadius)/2,q=[{name:B,value:S,payload:L,dataKey:u,type:A}],K=ea(R.cx,R.cy,V,ee);return k=ks(ks(ks(ks({},r.presentationProps),{},{percent:P,cornerRadius:i,name:B,tooltipPayload:q,midAngle:ee,middleRadius:V,tooltipPosition:K},L),R),{},{value:Pa(I,u),startAngle:F,endAngle:M,payload:L,paddingAngle:ro(m)*x}),k})}return j}function C$e(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:A}=t,h=nM(t,"recharts-pie-"),m=r.current,[g,x]=C.useState(!0),v=C.useCallback(()=>{typeof A=="function"&&A(),x(!1)},[A]),y=C.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return C.createElement(sM,{begin:s,duration:i,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((I,E)=>{var S=m&&m[E],B=E>0?Fm(I,"paddingAngle",0):0;if(S){var R=yv(S.endAngle-S.startAngle,I.endAngle-I.startAngle),P=ks(ks({},I),{},{startAngle:k+B,endAngle:k+R(w)+B});_.push(P),k=P.endAngle}else{var{endAngle:F,startAngle:L}=I,M=yv(0,F-L),ee=M(w),V=ks(ks({},I),{},{startAngle:k+B,endAngle:k+ee+B});_.push(V),k=V.endAngle}}),r.current=_,C.createElement(us,null,C.createElement(cle,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function N$e(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=C.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?C.createElement(C$e,{props:e,previousSectorsRef:s}):C.createElement(cle,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function _$e(e){var{hide:t,className:r,rootTabIndex:n}=e,a=vn("recharts-pie",r);return t?null:C.createElement(us,{tabIndex:n,className:a},C.createElement(N$e,e))}var S$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!tx.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function k$e(e){var{id:t}=e,r=iM(e,l$e),n=C.useMemo(()=>gE(e.children,Dm),[e.children]),a=or(s=>Bze(s,t,n));return C.createElement(C.Fragment,null,C.createElement(rM,{fn:m$e,args:ks(ks({},e),{},{sectors:a})}),C.createElement(_$e,Oh({},r,{sectors:a})))}function qk(e){var t=Yu(e,S$e),{id:r}=t,n=iM(t,c$e),a=ul(n);return C.createElement(aM,{id:r,type:"pie"},s=>C.createElement(C.Fragment,null,C.createElement(lle,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),C.createElement(h$e,Oh({},n,{id:s})),C.createElement(k$e,Oh({},n,{id:s})),n.children))}qk.displayName="Pie";var j$e=ut([Di],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),B$e=ut([j$e,$h,Gh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ule=()=>or(B$e),T$e=()=>or(bQe);function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $K(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(n){I$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I$e(e,t,r){return(t=F$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F$e(e){var t=O$e(e,"string");return typeof t=="symbol"?t:t+""}function O$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D$e=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=$K($K({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),fL(a)),l;return C.isValidElement(a)?l=C.cloneElement(a,i):typeof a=="function"?l=a(i):l=C.createElement($8,i),C.createElement(us,{className:"recharts-active-dot"},l)};function P$e(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(Om),i=T$e();if(t==null||i==null)return null;var l=t.find(c=>i.includes(c.payload));return Is(l)?null:D$e({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(n){R$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R$e(e,t,r){return(t=L$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L$e(e){var t=M$e(e,"string");return typeof t=="symbol"?t:t+""}function M$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dle=(e,t)=>yb(e,"radiusAxis",t),U$e=ut([dle],e=>{if(e!=null)return{scale:e}}),Q$e=ut([CE,dle],(e,t)=>{if(!(e==null||t==null))return BS(BS({},e),{},{scale:t})}),H$e=(e,t,r,n)=>wb(e,"radiusAxis",t,n),Ale=(e,t,r)=>Ab(e,r),fle=(e,t,r)=>yb(e,"angleAxis",r),V$e=ut([Ale,fle],(e,t)=>{if(!(e==null||t==null))return BS(BS({},e),{},{scale:t})}),z$e=(e,t,r,n)=>wb(e,"angleAxis",r,n),$$e=ut([Ale,fle,fb],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),G$e=(e,t,r,n,a)=>a,K$e=ut([Tn,Q$e,H$e,V$e,z$e],(e,t,r,n,a)=>Wm(e,"radiusAxis")?v2(t,r,!1):v2(n,a,!1)),q$e=ut([G8,G$e],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),W$e=ut([U$e,$$e,Fk,q$e,K$e],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,l+1);return aGe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),X$e=["id"];function Y$e(e,t){if(e==null)return{};var r,n,a=J$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(n){oM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oM(e,t,r){return(t=Z$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z$e(e){var t=eGe(e,"string");return typeof t=="symbol"?t:t+""}function eGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k1.apply(null,arguments)}function lM(e,t){return e&&e!=="none"?e:t}var tGe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:lM(n,a),value:ob(r,t),payload:e}]};function rGe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:ob(s,t),hide:i,type:l,color:lM(r,a),unit:""}}}function nGe(e,t){var r;return C.isValidElement(e)?r=C.cloneElement(e,t):typeof e=="function"?r=e(t):r=C.createElement($8,k1({},t,{className:vn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function aGe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=Pa(h,r.dataKey,m),x=Pa(h,a),v=r.scale(g)+d,y=Array.isArray(x)?Goe(x):x,w=Is(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(El(El({},ea(i,l,w,v)),{},{name:g,value:x,cx:i,cy:l,radius:w,angle:v,payload:h}))});var A=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Is(m)?void 0:t.scale(m);A.push(El(El({},h),{},{radius:g},ea(i,l,g,h.angle)))}else A.push(h)}),{points:u,isRange:c,baseLinePoints:A}}function sGe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=Y$e(r,X$e),l=ul(i),c=Xn(n,!0),u=t.map((d,A)=>{var h=El(El(El({key:"dot-".concat(A),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:A,payload:d});return nGe(n,h)});return C.createElement(us,{className:"recharts-radar-dots"},u)}function hle(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:l}=r,c=A=>{var{onMouseEnter:h}=r;h&&h(r,A)},u=A=>{var{onMouseLeave:h}=r;h&&h(r,A)},d;return C.isValidElement(a)?d=C.cloneElement(a,El(El({},r),{},{points:t})):typeof a=="function"?d=a(El(El({},r),{},{points:t})):d=C.createElement(Koe,k1({},Xn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:l})),C.createElement(us,{className:"recharts-radar-polygon"},d,C.createElement(sGe,{props:r,points:t}),n&&fm.renderCallByParent(r,t))}function iGe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,A=nM(t,"recharts-radar-"),[h,m]=C.useState(!0),g=C.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=C.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return C.createElement(sM,{begin:s,duration:i,isActive:a,easing:l,key:"radar-".concat(A),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((_,j)=>{var k=d&&d[Math.floor(j*y)];if(k){var I=yv(k.x,_.x),E=yv(k.y,_.y);return El(El({},_),{},{x:I(v),y:E(v)})}var S=yv(_.cx,_.x),B=yv(_.cy,_.y);return El(El({},_),{},{x:S(v),y:B(v)})});return v>0&&(r.current=w),C.createElement(hle,{points:w,props:t,showLabels:!h})})}function oGe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=C.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?C.createElement(iGe,{props:e,previousPointsRef:a}):C.createElement(hle,{points:t,props:e,showLabels:!0})}var lGe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!tx.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class cGe extends C.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=vn("recharts-radar",r);return C.createElement(C.Fragment,null,C.createElement(us,{className:a},C.createElement(oGe,this.props)),C.createElement(P$e,{points:n,mainColor:lM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function uGe(e){var t=uc(),r=or(n=>W$e(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return C.createElement(cGe,k1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class cM extends C.PureComponent{render(){return C.createElement(aM,{id:this.props.id,type:"radar"},t=>C.createElement(C.Fragment,null,C.createElement(lle,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),C.createElement(ile,{legendPayload:tGe(this.props)}),C.createElement(rM,{fn:rGe,args:this.props}),C.createElement(uGe,k1({},this.props,{id:t}))))}}oM(cM,"displayName","Radar");oM(cM,"defaultProps",lGe);var dGe="Invariant failed";function AGe(e,t){throw new Error(dGe)}var fGe=["x","y"];function jO(){return jO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jO.apply(null,arguments)}function qK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qK(Object(r),!0).forEach(function(n){hGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hGe(e,t,r){return(t=mGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mGe(e){var t=pGe(e,"string");return typeof t=="symbol"?t:t+""}function pGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gGe(e,t){if(e==null)return{};var r,n,a=xGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vGe(e,t){var{x:r,y:n}=e,a=gGe(e,fGe),s="".concat(r),i=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),A="".concat(t.width||a.width),h=parseInt(A,10);return wy(wy(wy(wy(wy({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function mle(e){return C.createElement(ale,jO({shapeType:"rectangle",propTransformer:vGe,activeClassName:"recharts-active-bar"},e))}var bGe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(dr(t))return t;var s=dr(n)||Is(n);return s?t(n,a):(s||AGe(),r)}},yGe={},ple=Zc({name:"errorBars",initialState:yGe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Ngt,removeErrorBar:_gt}=ple.actions,wGe=ple.reducer,EGe=["children"];function CGe(e,t){if(e==null)return{};var r,n,a=NGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _Ge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},SGe=C.createContext(_Ge);function kGe(e){var{children:t}=e,r=CGe(e,EGe);return C.createElement(SGe.Provider,{value:r},t)}function gle(e,t){var r,n,a=or(u=>qh(u,e)),s=or(u=>Zm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Fc.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Oc.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function jGe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=ule(),{needClipX:s,needClipY:i,needClip:l}=gle(t,r);if(!l)return null;var{x:c,y:u,width:d,height:A}=a;return C.createElement("clipPath",{id:"clipPath-".concat(n)},C.createElement("rect",{x:s?c:c-d/2,y:i?u:u-A/2,width:s?d:d*2,height:i?A:A*2}))}var BGe=["onMouseEnter","onMouseLeave","onClick"],TGe=["value","background","tooltipPosition"],IGe=["id"],FGe=["onMouseEnter","onClick","onMouseLeave"];function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j1.apply(null,arguments)}function WK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WK(Object(r),!0).forEach(function(n){OGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OGe(e,t,r){return(t=DGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DGe(e){var t=PGe(e,"string");return typeof t=="symbol"?t:t+""}function PGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TS(e,t){if(e==null)return{};var r,n,a=RGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LGe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:ob(r,t),payload:e}]};function MGe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:ob(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:l}}}function UGe(e){var t=or(Om),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=TS(s,BGe),d=Z8(i,n),A=eM(l),h=tM(c,n);if(!a||r==null)return null;var m=Xn(a,!1);return C.createElement(C.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,_=TS(g,TGe);if(!y)return null;var j=d(g,x),k=A(g,x),I=h(g,x),E=Jo(Jo(Jo(Jo(Jo({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),m),ex(u,g,x)),{},{onMouseEnter:j,onMouseLeave:k,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return C.createElement(mle,j1({key:"background-bar-".concat(x)},E))}))}function xle(e){var{data:t,props:r,showLabels:n}=e,a=ul(r),{id:s}=a,i=TS(a,IGe),{shape:l,dataKey:c,activeBar:u}=r,d=or(Om),A=or(Boe),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=TS(r,FGe),v=Z8(h,c),y=eM(g),w=tM(m,c);return t?C.createElement(C.Fragment,null,t.map((_,j)=>{var k=u&&String(j)===d&&(A==null||c===A),I=k?u:l,E=Jo(Jo(Jo({},i),_),{},{isActive:k,option:I,index:j,dataKey:c});return C.createElement(us,j1({className:"recharts-bar-rectangle"},ex(x,_,j),{onMouseEnter:v(_,j),onMouseLeave:y(_,j),onClick:w(_,j),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(j)}),C.createElement(mle,E))}),n&&fm.renderCallByParent(r,t)):null}function QGe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,A=r.current,h=nM(t,"recharts-bar-"),[m,g]=C.useState(!1),x=C.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=C.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return C.createElement(sM,{begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,j)=>{var k=A&&A[j];if(k)return Jo(Jo({},_),{},{x:Ux(k.x,_.x,y),y:Ux(k.y,_.y,y),width:Ux(k.width,_.width,y),height:Ux(k.height,_.height,y)});if(a==="horizontal"){var I=Ux(0,_.height,y);return Jo(Jo({},_),{},{y:_.y+_.height-I,height:I})}var E=Ux(0,_.width,y);return Jo(Jo({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:C.createElement(us,null,C.createElement(xle,{props:t,data:w,showLabels:!m}))})}function HGe(e){var{data:t,isAnimationActive:r}=e,n=C.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?C.createElement(QGe,{previousRectanglesRef:n,props:e}):C.createElement(xle,{props:e,data:t,showLabels:!0})}var vle=0,VGe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class zGe extends C.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=vn("recharts-bar",a),A=u;return C.createElement(us,{className:d,id:u},l&&C.createElement("defs",null,C.createElement(jGe,{clipPathId:A,xAxisId:s,yAxisId:i})),C.createElement(us,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(A,")"):void 0},C.createElement(UGe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),C.createElement(HGe,this.props)),this.props.children)}}var $Ge={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!tx.isSsr,legendType:"rect",minPointSize:vle,xAxisId:0,yAxisId:0};function GGe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:A}=gle(t,r),h=LL(),m=uc(),g=gE(e.children,Dm),x=or(w=>vKe(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,C.createElement(kGe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:VGe,errorBarOffset:v},C.createElement(zGe,j1({},e,{layout:h,needClip:A,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function KGe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:A,offset:h,cells:m}=e,g=t==="horizontal"?l:i,x=d?g.scale.domain():null,v=HRe({numericAxis:g});return A.map((y,w)=>{var _,j,k,I,E,S;d?_=PRe(d[w],x):(_=Pa(y,r),Array.isArray(_)||(_=[v,_]));var B=bGe(n,vle)(_[1],w);if(t==="horizontal"){var R,[P,F]=[l.scale(_[0]),l.scale(_[1])];j=x$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),k=(R=F??P)!==null&&R!==void 0?R:void 0,I=a.size;var L=P-F;if(E=qc(L)?0:L,S={x:j,y:h.top,width:I,height:h.height},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var M=ro(E||B)*(Math.abs(B)-Math.abs(E));k-=M,E+=M}}else{var[ee,V]=[i.scale(_[0]),i.scale(_[1])];if(j=ee,k=x$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),I=V-ee,E=a.size,S={x:h.left,y:k,width:h.width,height:E},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var q=ro(I||B)*(Math.abs(B)-Math.abs(I));I+=q}}if(j==null||k==null||I==null||E==null)return null;var K=Jo(Jo({},y),{},{x:j,y:k,width:I,height:E,value:d?_:_[1],payload:y,background:S,tooltipPosition:{x:j+I/2,y:k+E/2}},m&&m[w]&&m[w].props);return K}).filter(Boolean)}function B1(e){var t=Yu(e,$Ge),r=uc();return C.createElement(aM,{id:t.id,type:"bar"},n=>C.createElement(C.Fragment,null,C.createElement(Gze,{legendPayload:LGe(t)}),C.createElement(rM,{fn:MGe,args:t}),C.createElement(a$e,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:QRe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),C.createElement(GGe,j1({},t,{id:n}))))}B1.displayName="Bar";function XK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XK(Object(r),!0).forEach(function(n){qGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qGe(e,t,r){return(t=WGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WGe(e){var t=XGe(e,"string");return typeof t=="symbol"?t:t+""}function XGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YGe=(e,t)=>t,JGe=(e,t,r)=>r,ZGe=(e,t,r,n)=>n,eKe=(e,t,r,n,a)=>a,TE=ut([v8,eKe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),tKe=ut([TE],e=>e==null?void 0:e.maxBarSize),rKe=(e,t,r,n,a,s)=>s,YK=(e,t,r)=>{var n=r??e;if(!Is(n))return kl(n,t,0)},nKe=ut([Tn,v8,YGe,JGe,ZGe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),aKe=(e,t,r,n)=>{var a=Tn(e);return a==="horizontal"?wO(e,"yAxis",r,n):wO(e,"xAxis",t,n)},sKe=(e,t,r)=>{var n=Tn(e);return n==="horizontal"?MG(e,"xAxis",t):MG(e,"yAxis",r)},iKe=(e,t,r)=>{var n={},a=e.filter(Rk),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,A]=u,h=A.map(g=>g.dataKey),m=YK(t,r,A[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),A=YK(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:A}});return[...l,...c]},oKe=ut([nKe,T7e,sKe],iKe),lKe=(e,t,r,n,a)=>{var s,i,l=TE(e,t,r,n,a);if(l!=null){var c=Tn(e),u=Tie(e),{maxBarSize:d}=l,A=Is(d)?u:d,h,m;return c==="horizontal"?(h=_1(e,"xAxis",t,n),m=N1(e,"xAxis",t,n)):(h=_1(e,"yAxis",r,n),m=N1(e,"yAxis",r,n)),(s=(i=v2(h,m,!0))!==null&&i!==void 0?i:A)!==null&&s!==void 0?s:0}},ble=(e,t,r,n)=>{var a=Tn(e),s,i;return a==="horizontal"?(s=_1(e,"xAxis",t,n),i=N1(e,"xAxis",t,n)):(s=_1(e,"yAxis",r,n),i=N1(e,"yAxis",r,n)),v2(s,i)};function cKe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=kl(e,r,0,!0),l,c=[];if(Yc(n[0].barSize)){var u=!1,d=r/s,A=n.reduce((y,w)=>y+(w.barSize||0),0);A+=(s-1)*i,A>=r&&(A-=(s-1)*i,i=0),A>=r&&d>0&&(u=!0,d*=.9,A=s*d);var h=(r-A)/2>>0,m={offset:h-i,size:0};l=n.reduce((y,w)=>{var _,j={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+i,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},k=[...y,j];return m=k[k.length-1].position,k},c)}else{var g=kl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var v=Yc(a)?Math.min(x,a):x;l=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*_+(x-v)/2,size:v}}],c)}return l}}var uKe=(e,t,r,n,a,s,i)=>{var l=Is(i)?t:i,c=cKe(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>NN(NN({},u),{},{position:NN(NN({},u.position),{},{offset:u.position.offset-a/2})}))),c},dKe=ut([oKe,Tie,B7e,Iie,lKe,ble,tKe],uKe),AKe=(e,t,r,n)=>_1(e,"xAxis",t,n),fKe=(e,t,r,n)=>_1(e,"yAxis",r,n),hKe=(e,t,r,n)=>N1(e,"xAxis",t,n),mKe=(e,t,r,n)=>N1(e,"yAxis",r,n),pKe=ut([dKe,TE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),gKe=(e,t)=>{var r=p8(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},xKe=ut([aKe,TE],gKe),vKe=ut([Di,AKe,fKe,hKe,mKe,pKe,Tn,c8,ble,xKe,TE,rKe],(e,t,r,n,a,s,i,l,c,u,d,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return KGe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:A})}}),yle=e=>{var{chartData:t}=e,r=$a(),n=uc();return C.useEffect(()=>n?()=>{}:(r(WG(t)),()=>{r(WG(void 0))}),[t,r,n]),null},JK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},wle=Zc({name:"brush",initialState:JK,reducers:{setBrushSettings(e,t){return t.payload==null?JK:t.payload}}}),{setBrushSettings:Sgt}=wle.actions,bKe=wle.reducer;function yKe(e,t,r){return(t=wKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wKe(e){var t=EKe(e,"string");return typeof t=="symbol"?t:t+""}function EKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uM{static create(t){return new uM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}yKe(uM,"EPS",1e-4);function CKe(e){return(e%180+180)%180}var NKe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=CKe(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},_Ke={dots:[],areas:[],lines:[]},Ele=Zc({name:"referenceElements",initialState:_Ke,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=gh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=gh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=gh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:kgt,removeDot:jgt,addArea:Bgt,removeArea:Tgt,addLine:Igt,removeLine:Fgt}=Ele.actions,SKe=Ele.reducer,kKe=C.createContext(void 0),jKe=e=>{var{children:t}=e,[r]=C.useState("".concat(p2("recharts"),"-clip")),n=ule();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return C.createElement(kKe.Provider,{value:r},C.createElement("defs",null,C.createElement("clipPath",{id:r},C.createElement("rect",{x:a,y:s,height:l,width:i}))),t)};function yI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Cle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function BKe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return NKe(n,r)}function TKe(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:l}=e;return t===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function IS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function IKe(e,t){return Cle(e,t+1)}function FKe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=t,c=0,u=1,d=i,A=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Cle(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,_=c===0||IS(e,w,y,d,l);_||(c=0,d=i,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=A(),h)return h.v;return[]}function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(n){OKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OKe(e,t,r){return(t=DKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DKe(e){var t=PKe(e,"string");return typeof t=="symbol"?t:t+""}function PKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RKe(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===i-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=$o($o({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=$o($o({},m),{},{tickCoord:m.coordinate});var y=IS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=$o($o({},m),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function LKe(e,t,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=t;if(s){var d=n[l-1],A=r(d,l-1),h=e*(d.coordinate+e*A/2-u);i[l-1]=d=$o($o({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=IS(e,d.tickCoord,()=>A,c,u);m&&(u=d.tickCoord-e*(A/2+a),i[l-1]=$o($o({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var _=i[w],j,k=()=>(j===void 0&&(j=r(_,w)),j);if(w===0){var I=e*(_.coordinate-e*k()/2-c);i[w]=_=$o($o({},_),{},{tickCoord:I<0?_.coordinate-I*e:_.coordinate})}else i[w]=_=$o($o({},_),{},{tickCoord:_.coordinate});var E=IS(e,_.tickCoord,k,c,u);E&&(c=_.tickCoord+e*(k()/2+a),i[w]=$o($o({},_),{},{isShow:!0}))},v=0;v<g;v++)x(v);return i}function dM(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:A}=e;if(!a||!a.length||!n)return[];if(dr(c)||tx.isSsr){var h;return(h=IKe(a,dr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?Bw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,j)=>{var k=typeof u=="function"?u(_.value,j):_.value;return g==="width"?BKe(Bw(k,{fontSize:t,letterSpacing:r}),x,A):Bw(k,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?ro(a[1].coordinate-a[0].coordinate):1,w=TKe(s,y,g);return c==="equidistantPreserveStart"?FKe(y,w,v,a,i):(c==="preserveStart"||c==="preserveStartEnd"?m=LKe(y,w,v,a,i,c==="preserveStartEnd"):m=RKe(y,w,v,a,i),m.filter(_=>_.isShow))}var MKe=["viewBox"],UKe=["viewBox"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(null,arguments)}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(n){AM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tq(e,t){if(e==null)return{};var r,n,a=QKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AM(e,t,r){return(t=HKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HKe(e){var t=VKe(e,"string");return typeof t=="symbol"?t:t+""}function VKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tp extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=tq(t,MKe),s=this.props,{viewBox:i}=s,l=tq(s,UKe);return!yI(n,i)||!yI(a,l)||!yI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:l,mirror:c,tickMargin:u}=this.props,d,A,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=dr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=A=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,A=r+ +!c*a,d=A-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,A=r+ +c*a,d=A+v*y,g=d+v*u,x=w;break;default:d=A=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:A,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l}=this.props,c=ki(ki(ki({},Xn(this.props,!1)),Xn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=ki(ki({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=ki(ki({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return C.createElement("line",Cv({},c,{className:vn("recharts-cartesian-axis-line",Fm(l,"className"))}))}static renderTickItem(t,r,n){var a,s=vn(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))a=C.cloneElement(t,ki(ki({},r),{},{className:s}));else if(typeof t=="function")a=t(ki(ki({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=vn(i,t.className)),a=C.createElement(bb,Cv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:l,unit:c,padding:u}=this.props,d=dM(ki(ki({},this.props),{},{ticks:n}),t,r),A=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=ul(this.props),g=Xn(i,!1),x=ki(ki({},m),{},{fill:"none"},Xn(a,!1)),v=d.map((y,w)=>{var{line:_,tick:j}=this.getTickLineCoord(y),k=ki(ki(ki(ki({textAnchor:A,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),j),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return C.createElement(us,Cv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},ex(this.props,y,w)),a&&C.createElement("line",Cv({},x,_,{className:vn("recharts-cartesian-axis-tick-line",Fm(a,"className"))})),i&&tp.renderTickItem(i,k,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:C.createElement(us,{className:vn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,A=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||A!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Zl.renderCallByParent(this.props))}}AM(tp,"displayName","CartesianAxis");AM(tp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zKe=["x1","y1","x2","y2","key"],$Ke=["offset"],GKe=["xAxisId","yAxisId"],KKe=["xAxisId","yAxisId"];function rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rq(Object(r),!0).forEach(function(n){qKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qKe(e,t,r){return(t=WKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WKe(e){var t=XKe(e,"string");return typeof t=="symbol"?t:t+""}function XKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qp.apply(null,arguments)}function FS(e,t){if(e==null)return{};var r,n,a=YKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JKe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:l}=e;return C.createElement("rect",{x:n,y:a,ry:l,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Nle(e,t){var r;if(C.isValidElement(e))r=C.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:l}=t,c=FS(t,zKe),u=ul(c),{offset:d}=u,A=FS(u,$Ke);r=C.createElement("line",qp({},A,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:l}))}return r}function ZKe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,l=FS(e,GKe),c=a.map((u,d)=>{var A=Zo(Zo({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Nle(n,A)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function eqe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,l=FS(e,KKe),c=a.map((u,d)=>{var A=Zo(Zo({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Nle(n,A)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function tqe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(A=>Math.round(A+a-a)).sort((A,h)=>A-h);a!==u[0]&&u.unshift(0);var d=u.map((A,h)=>{var m=!u[h+1],g=m?a+i-A:u[h+1]-A;if(g<=0)return null;var x=h%t.length;return C.createElement("rect",{key:"react-".concat(h),y:A,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function rqe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(A=>Math.round(A+a-a)).sort((A,h)=>A-h);a!==u[0]&&u.unshift(0);var d=u.map((A,h)=>{var m=!u[h+1],g=m?a+i-A:u[h+1]-A;if(g<=0)return null;var x=h%r.length;return C.createElement("rect",{key:"react-".concat(h),x:A,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var nqe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return dse(dM(Zo(Zo(Zo({},tp.defaultProps),r),{},{ticks:Ase(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},aqe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return dse(dM(Zo(Zo(Zo({},tp.defaultProps),r),{},{ticks:Ase(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},sqe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function S2(e){var t=PL(),r=RL(),n=gse(),a=Zo(Zo({},Yu(e,sqe)),{},{x:dr(e.x)?e.x:n.left,y:dr(e.y)?e.y:n.top,width:dr(e.width)?e.width:n.width,height:dr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:l,y:c,width:u,height:d,syncWithTicks:A,horizontalValues:h,verticalValues:m}=a,g=uc(),x=or(B=>UG(B,"xAxis",s,g)),v=or(B=>UG(B,"yAxis",i,g));if(!dr(u)||u<=0||!dr(d)||d<=0||!dr(l)||l!==+l||!dr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||nqe,w=a.horizontalCoordinatesGenerator||aqe,{horizontalPoints:_,verticalPoints:j}=a;if((!_||!_.length)&&typeof w=="function"){var k=h&&h.length,I=w({yAxis:v?Zo(Zo({},v),{},{ticks:k?h:v.ticks}):void 0,width:t,height:r,offset:n},k?!0:A);jw(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}if((!j||!j.length)&&typeof y=="function"){var E=m&&m.length,S=y({xAxis:x?Zo(Zo({},x),{},{ticks:E?m:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:A);jw(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(j=S)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(JKe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),C.createElement(tqe,qp({},a,{horizontalPoints:_})),C.createElement(rqe,qp({},a,{verticalPoints:j})),C.createElement(ZKe,qp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:v})),C.createElement(eqe,qp({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:v})))}S2.displayName="CartesianGrid";function nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nq(Object(r),!0).forEach(function(n){iqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iqe(e,t,r){return(t=oqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oqe(e){var t=lqe(e,"string");return typeof t=="symbol"?t:t+""}function lqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cqe={xAxis:{},yAxis:{},zAxis:{}},_le=Zc({name:"cartesianAxis",initialState:cqe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=aq(aq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:uqe,removeXAxis:dqe,addYAxis:Aqe,removeYAxis:fqe,addZAxis:Ogt,removeZAxis:Dgt,updateYAxisWidth:hqe}=_le.actions,mqe=_le.reducer,pqe=["children"],gqe=["dangerouslySetInnerHTML","ticks"];function Sle(e,t,r){return(t=xqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xqe(e){var t=vqe(e,"string");return typeof t=="symbol"?t:t+""}function vqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BO(){return BO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BO.apply(null,arguments)}function kle(e,t){if(e==null)return{};var r,n,a=bqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yqe(e){var t=$a(),r=C.useMemo(()=>{var{children:s}=e,i=kle(e,pqe);return i},[e]),n=or(s=>qh(s,r.id)),a=r===n;return C.useEffect(()=>(t(uqe(r)),()=>{t(dqe(r))}),[r,t]),a?e.children:null}var wqe=e=>{var{xAxisId:t,className:r}=e,n=or(pse),a=uc(),s="xAxis",i=or(m=>gb(m,s,t,a)),l=or(m=>uoe(m,s,t,a)),c=or(m=>ioe(m,t)),u=or(m=>E9e(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:A}=e,h=kle(e,gqe);return C.createElement(tp,BO({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:vn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},Eqe=e=>{var t,r,n,a,s;return C.createElement(yqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},C.createElement(wqe,e))};class Fg extends C.Component{render(){return C.createElement(Eqe,this.props)}}Sle(Fg,"displayName","XAxis");Sle(Fg,"defaultProps",{allowDataOverflow:Fc.allowDataOverflow,allowDecimals:Fc.allowDecimals,allowDuplicatedCategory:Fc.allowDuplicatedCategory,height:Fc.height,hide:!1,mirror:Fc.mirror,orientation:Fc.orientation,padding:Fc.padding,reversed:Fc.reversed,scale:Fc.scale,tickCount:Fc.tickCount,type:Fc.type,xAxisId:0});var Cqe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var A=d.getBoundingClientRect();A.width>i&&(i=A.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},Nqe=["dangerouslySetInnerHTML","ticks"];function jle(e,t,r){return(t=_qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _qe(e){var t=Sqe(e,"string");return typeof t=="symbol"?t:t+""}function Sqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TO(){return TO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TO.apply(null,arguments)}function kqe(e,t){if(e==null)return{};var r,n,a=jqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bqe(e){var t=$a();return C.useEffect(()=>(t(Aqe(e)),()=>{t(fqe(e))}),[e,t]),null}var Tqe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=C.useRef(null),l=C.useRef(null),c=or(pse),u=uc(),d=$a(),A="yAxis",h=or(_=>gb(_,A,r,u)),m=or(_=>ooe(_,r)),g=or(_=>C9e(_,r)),x=or(_=>uoe(_,A,r,u));if(C.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!m||z8(s)||C.isValidElement(s))){var j=i.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:I,tickMargin:E}=j.props,S=Cqe({ticks:k,label:l.current,labelGapWithTick:5,tickSize:I,tickMargin:E});Math.round(m.width)!==Math.round(S)&&d(hqe({id:r,width:S}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=kqe(e,Nqe);return C.createElement(tp,TO({},w,{ref:i,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:vn("recharts-".concat(A," ").concat(A),n),viewBox:c,ticks:x}))},Iqe=e=>{var t,r,n,a,s;return C.createElement(C.Fragment,null,C.createElement(Bqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),C.createElement(Tqe,e))},Fqe={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:Oc.allowDecimals,allowDuplicatedCategory:Oc.allowDuplicatedCategory,hide:!1,mirror:Oc.mirror,orientation:Oc.orientation,padding:Oc.padding,reversed:Oc.reversed,scale:Oc.scale,tickCount:Oc.tickCount,type:Oc.type,width:Oc.width,yAxisId:0};class Og extends C.Component{render(){return C.createElement(Iqe,this.props)}}jle(Og,"displayName","YAxis");jle(Og,"defaultProps",Fqe);var wI={exports:{}},EI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sq;function Oqe(){if(sq)return EI;sq=1;var e=Q1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,l=e.useDebugValue;return EI.useSyncExternalStoreWithSelector=function(c,u,d,A,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function v(k){if(!y){if(y=!0,w=k,k=A(k),h!==void 0&&g.hasValue){var I=g.value;if(h(I,k))return _=I}return _=k}if(I=_,r(w,k))return I;var E=A(k);return h!==void 0&&h(I,E)?(w=k,I):(w=k,_=E)}var y=!1,w,_,j=d===void 0?null:d;return[function(){return v(u())},j===null?void 0:function(){return v(j())}]},[u,d,A,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},EI}var iq;function Dqe(){return iq||(iq=1,wI.exports=Oqe()),wI.exports}Dqe();function Pqe(e){e()}function Rqe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Pqe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var oq={notify(){},get:()=>[]};function Lqe(e,t){let r,n=oq,a=0,s=!1;function i(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),A())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=Rqe())}function A(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=oq)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,A())}const g={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var Mqe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uqe=Mqe(),Qqe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Hqe=Qqe(),Vqe=()=>Uqe||Hqe?C.useLayoutEffect:C.useEffect,zqe=Vqe(),CI=Symbol.for("react-redux-context"),NI=typeof globalThis<"u"?globalThis:{};function $qe(){if(!C.createContext)return{};const e=NI[CI]??(NI[CI]=new Map);let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var Gqe=$qe();function Kqe(e){const{children:t,context:r,serverState:n,store:a}=e,s=C.useMemo(()=>{const c=Lqe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=C.useMemo(()=>a.getState(),[a]);zqe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||Gqe;return C.createElement(l.Provider,{value:s},t)}var qqe=Kqe,Wqe=(e,t)=>t,fM=ut([Wqe,Tn,fb,Ri,_oe,Wh,SQe,Di],IQe),hM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Ble=qu("mouseClick"),Tle=xE();Tle.startListening({actionCreator:Ble,effect:(e,t)=>{var r=e.payload,n=fM(t.getState(),hM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(D9e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var IO=qu("mouseMove"),Ile=xE();Ile.startListening({actionCreator:IO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=O8(n,n.tooltip.settings.shared),s=fM(n,hM(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(voe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(xoe()))}});function Xqe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var lq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Fle=Zc({name:"rootProps",initialState:lq,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:lq.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Yqe=Fle.reducer,{updateOptions:Jqe}=Fle.actions,Ole=Zc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Zqe}=Ole.actions,eWe=Ole.reducer,Dle=qu("keyDown"),Ple=qu("focus"),mM=xE();mM.startListening({actionCreator:Dle,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(D8(a,vb(r))),l=Wh(r);if(s==="Enter"){var c=_S(r,"axis","hover",String(a.index));t.dispatch(CO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=_9e(r),d=u==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=i+A*d;if(!(l==null||h>=l.length||h<0)){var m=_S(r,"axis","hover",String(h));t.dispatch(CO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});mM.startListening({actionCreator:Ple,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=_S(r,"axis","hover",String(s));t.dispatch(CO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Tu=qu("externalEvent"),Rle=xE();Rle.startListening({actionCreator:Tu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:gQe(r),activeDataKey:Boe(r),activeIndex:Om(r),activeLabel:joe(r),activeTooltipIndex:Om(r),isTooltipActive:xQe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var tWe=ut([xb],e=>e.tooltipItemPayloads),rWe=ut([tWe,jE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),Lle=qu("touchMove"),Mle=xE();Mle.startListening({actionCreator:Lle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=O8(n,n.tooltip.settings.shared);if(a==="axis"){var s=fM(n,hM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(voe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(hse),d=(i=c.getAttribute(mse))!==null&&i!==void 0?i:void 0,A=rWe(t.getState(),u,d);t.dispatch(goe({activeDataKey:d,activeIndex:u,activeCoordinate:A}))}}});var nWe=Mae({brush:bKe,cartesianAxis:mqe,chartData:qQe,errorBars:wGe,graphicalItems:n$e,layout:bRe,legend:oLe,options:VQe,polarAxis:YVe,polarOptions:eWe,referenceElements:SKe,rootProps:Yqe,tooltip:P9e}),aWe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $Pe({reducer:nWe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Tle.middleware,Ile.middleware,mM.middleware,Rle.middleware,Mle.middleware]),devTools:{serialize:{replacer:Xqe},name:"recharts-".concat(r)}})};function Ule(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=uc(),s=C.useRef(null);if(a)return r;s.current==null&&(s.current=aWe(t,n));var i=SL;return C.createElement(qqe,{context:i,store:s.current},r)}function Qle(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=uc();return C.useEffect(()=>{i||(s(gRe(t)),s(xRe({width:r,height:n})),s(pRe(a)))},[s,i,t,r,n,a]),null}function Hle(e){var t=$a();return C.useEffect(()=>{t(Jqe(e))},[t,e]),null}var sWe=["children"];function iWe(e,t){if(e==null)return{};var r,n,a=oWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OS(){return OS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OS.apply(null,arguments)}var lWe={width:"100%",height:"100%"},cWe=C.forwardRef((e,t)=>{var r=PL(),n=RL(),a=yse();if(!b1(r)||!b1(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,C.createElement(hL,OS({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:lWe,ref:t}),s)}),uWe=e=>{var{children:t}=e,r=or(Nk);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return C.createElement(hL,{width:n,height:a,x:i,y:s},t)},cq=C.forwardRef((e,t)=>{var{children:r}=e,n=iWe(e,sWe),a=uc();return a?C.createElement(uWe,null,r):C.createElement(cWe,OS({ref:t},n),r)});function dWe(){var e=$a(),[t,r]=C.useState(null),n=or(WRe);return C.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Yc(s)&&s!==n&&e(vRe(s))}},[t,e,n]),r}function uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uq(Object(r),!0).forEach(function(n){fWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fWe(e,t,r){return(t=hWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hWe(e){var t=mWe(e,"string");return typeof t=="symbol"?t:t+""}function mWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pWe=C.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:A,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=$a(),[_,j]=C.useState(null),[k,I]=C.useState(null);YQe();var E=dWe(),S=C.useCallback(D=>{E(D),typeof t=="function"&&t(D),j(D),I(D)},[E,t,j,I]),B=C.useCallback(D=>{w(Ble(D)),w(Tu({handler:s,reactEvent:D}))},[w,s]),R=C.useCallback(D=>{w(IO(D)),w(Tu({handler:u,reactEvent:D}))},[w,u]),P=C.useCallback(D=>{w(xoe()),w(Tu({handler:d,reactEvent:D}))},[w,d]),F=C.useCallback(D=>{w(IO(D)),w(Tu({handler:A,reactEvent:D}))},[w,A]),L=C.useCallback(()=>{w(Ple())},[w]),M=C.useCallback(D=>{w(Dle(D.key))},[w]),ee=C.useCallback(D=>{w(Tu({handler:i,reactEvent:D}))},[w,i]),V=C.useCallback(D=>{w(Tu({handler:l,reactEvent:D}))},[w,l]),q=C.useCallback(D=>{w(Tu({handler:c,reactEvent:D}))},[w,c]),K=C.useCallback(D=>{w(Tu({handler:h,reactEvent:D}))},[w,h]),X=C.useCallback(D=>{w(Tu({handler:x,reactEvent:D}))},[w,x]),Z=C.useCallback(D=>{w(Lle(D)),w(Tu({handler:g,reactEvent:D}))},[w,g]),G=C.useCallback(D=>{w(Tu({handler:m,reactEvent:D}))},[w,m]);return C.createElement(Poe.Provider,{value:_},C.createElement(lae.Provider,{value:k},C.createElement("div",{className:vn("recharts-wrapper",n),style:AWe({position:"relative",cursor:"default",width:y,height:a},v),onClick:B,onContextMenu:ee,onDoubleClick:V,onFocus:L,onKeyDown:M,onMouseDown:q,onMouseEnter:R,onMouseLeave:P,onMouseMove:F,onMouseUp:K,onTouchEnd:G,onTouchMove:Z,onTouchStart:X,ref:S},r)))}),gWe=["children","className","width","height","style","compact","title","desc"];function xWe(e,t){if(e==null)return{};var r,n,a=vWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vle=C.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:l,title:c,desc:u}=e,d=xWe(e,gWe),A=ul(d);return l?C.createElement(cq,{otherAttributes:A,title:c,desc:u},r):C.createElement(pWe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(cq,{otherAttributes:A,title:c,desc:u,ref:t},C.createElement(jKe,null,r)))}),bWe=["width","height"];function FO(){return FO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FO.apply(null,arguments)}function yWe(e,t){if(e==null)return{};var r,n,a=wWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EWe={top:5,right:5,bottom:5,left:5},CWe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:EWe,reverseStackOrder:!1,syncMethod:"index"},NWe=C.forwardRef(function(t,r){var n,a=Yu(t.categoricalChartProps,CWe),{width:s,height:i}=a,l=yWe(a,bWe);if(!b1(s)||!b1(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:A,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:A,eventEmitter:void 0};return C.createElement(Ule,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},C.createElement(yle,{chartData:h.data}),C.createElement(Qle,{width:s,height:i,layout:a.layout,margin:a.margin}),C.createElement(Hle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),C.createElement(Vle,FO({},l,{width:s,height:i,ref:r})))}),_We=["axis","item"],k2=C.forwardRef((e,t)=>C.createElement(NWe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_We,tooltipPayloadSearcher:V8,categoricalChartProps:e,ref:t}));function SWe(e){var t=$a();return C.useEffect(()=>{t(Zqe(e))},[t,e]),null}var kWe=["width","height","layout"];function OO(){return OO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OO.apply(null,arguments)}function jWe(e,t){if(e==null)return{};var r,n,a=BWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TWe={top:5,right:5,bottom:5,left:5},IWe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:TWe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},zle=C.forwardRef(function(t,r){var n,a=Yu(t.categoricalChartProps,IWe),{width:s,height:i,layout:l}=a,c=jWe(a,kWe);if(!b1(s)||!b1(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:A,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:A,tooltipPayloadSearcher:h,eventEmitter:void 0};return C.createElement(Ule,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},C.createElement(yle,{chartData:a.data}),C.createElement(Qle,{width:s,height:i,layout:l,margin:a.margin}),C.createElement(Hle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),C.createElement(SWe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),C.createElement(Vle,OO({width:s,height:i},c,{ref:r})))}),FWe=["item"],OWe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},pM=C.forwardRef((e,t)=>{var r=Yu(e,OWe);return C.createElement(zle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:FWe,tooltipPayloadSearcher:V8,categoricalChartProps:r,ref:t})}),DWe=["axis"],PWe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},RWe=C.forwardRef((e,t)=>{var r=Yu(e,PWe);return C.createElement(zle,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:DWe,tooltipPayloadSearcher:V8,categoricalChartProps:r,ref:t})});const D0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],dq={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},Ey="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",mo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",jc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",_I="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",SI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",kI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",_N="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",LWe="from-sky-500 to-indigo-500",MWe="from-emerald-500 to-lime-500",UWe="from-amber-500 to-rose-500",QWe="from-fuchsia-500 to-purple-600",jI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:$u,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Ute,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:Ti,dot:"bg-emerald-500"}},HWe=e=>{const t=jI[e].icon;return o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${jI[e].badge}`,children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${jI[e].dot}`}),o.jsx(t,{className:"h-4 w-4"})," ",e]})},VWe=()=>{var X,Z;const[e,t]=C.useState("registro"),[r,n]=C.useState([]),[a,s]=C.useState(dq),[i,l]=C.useState(null),[c,u]=C.useState(null),[d,A]=C.useState(!1),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState(""),[w,_]=C.useState(""),j=C.useMemo(()=>Zf[a.dimension]??[],[a.dimension]),k=C.useCallback(async()=>{A(!0);try{const G=await pOe();n(G)}catch(G){console.error(G),u("No se pudieron cargar las acciones.")}finally{A(!1)}},[]);C.useEffect(()=>{k()},[k]);const I=G=>{const{name:D,value:U}=G.target;s(z=>({...z,[D]:U}))},E=G=>{const D=G.split(",").map(U=>U.trim()).filter(Boolean);s(U=>({...U,indicadores:D}))},S=G=>{const D=G.split(",").map(U=>U.trim()).filter(Boolean);s(U=>({...U,enlaces:D}))},B=()=>{s(dq),l(null),u(null)},R=async G=>{if(G.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{i?await xOe(i,a):await gOe(a),await k(),B(),t("seguimiento")}catch(D){console.error(D),u("Error al guardar la acción.")}},P=G=>{l(G.id),s({...G,enlaces:G.enlaces??[],indicadores:G.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},F=async G=>{confirm("¿Eliminar esta acción?")&&(await vOe(G),await k())},L=C.useMemo(()=>r.filter(G=>{const D=!h||G.responsable.toLowerCase().includes(h.toLowerCase())||G.descripcion.toLowerCase().includes(h.toLowerCase())||G.subdimension.toLowerCase().includes(h.toLowerCase()),U=!g||G.dimension===g,z=!v||G.subdimension===v,J=!w||G.estado===w;return D&&U&&z&&J}),[r,h,g,v,w]),M=C.useMemo(()=>{const G=new Map;return r.forEach(D=>G.set(D.dimension,(G.get(D.dimension)??0)+1)),Array.from(G.entries()).map(([D,U])=>({name:D,value:U}))},[r]),ee=C.useMemo(()=>{const G=new Map;return r.forEach(D=>G.set(D.estado,(G.get(D.estado)??0)+1)),Array.from(G.entries()).map(([D,U])=>({name:D,value:U}))},[r]),V=C.useMemo(()=>{const G=r.map(D=>D.avance??0);return G.length?Math.round(G.reduce((D,U)=>D+U,0)/G.length):0},[r]),q=C.useMemo(()=>{const G=new Map;return r.forEach(D=>G.set(D.subdimension,(G.get(D.subdimension)??0)+1)),Array.from(G.entries()).map(([D,U])=>({name:D,value:U})).sort((D,U)=>U.value-D.value).slice(0,6)},[r]),K=()=>{const G=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],D=r.map(oe=>[oe.id,oe.fechaRegistro,oe.responsable,oe.dimension,oe.subdimension,oe.descripcion.replace(/\n/g," "),oe.objetivos??"",(oe.indicadores??[]).join("|"),oe.cobertura??"",oe.fechaInicio??"",oe.fechaCumplimiento,oe.estado,oe.avance??0,(oe.enlaces??[]).join("|")]),U=[G.join(","),...D.map(oe=>oe.map(se=>`"${String(se).replace(/"/g,'""')}"`).join(","))].join(`
`),z=new Blob([U],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(z),re=document.createElement("a");re.href=J,re.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,re.click(),URL.revokeObjectURL(J)};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),o.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[o.jsx(eg,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),o.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(RCe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[o.jsx(Vte,{className:"h-4 w-4"})," Refrescar"]}),o.jsxs("button",{onClick:K,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[o.jsx(km,{className:"h-4 w-4"})," CSV"]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{onClick:()=>t("registro"),className:`${_I} ${e==="registro"?SI:kI}`,children:[o.jsx(bg,{className:"h-4 w-4"})," Registro"]}),o.jsxs("button",{onClick:()=>t("seguimiento"),className:`${_I} ${e==="seguimiento"?SI:kI}`,children:[o.jsx(bw,{className:"h-4 w-4"})," Seguimiento"]}),o.jsxs("button",{onClick:()=>t("dashboard"),className:`${_I} ${e==="dashboard"?SI:kI}`,children:[o.jsx(NEe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&o.jsx("div",{className:Ey,children:o.jsxs("form",{onSubmit:R,className:"p-6 md:p-8 space-y-6",children:[c&&o.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[o.jsx($u,{className:"h-5 w-5"}),o.jsx("span",{children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Registro"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),o.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Responsable"}),o.jsxs("div",{className:"relative",children:[o.jsx(t2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),o.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Cobertura (niveles/cursos)"}),o.jsxs("div",{className:"relative",children:[o.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),o.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Dimensión PME"}),o.jsxs("div",{className:"relative",children:[o.jsx(vCe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),o.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:mo+" pl-10",children:[o.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(Zf).map(G=>o.jsx("option",{value:G,children:G},G))]})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:jc,children:"Subdimensión"}),o.jsxs("div",{className:"relative",children:[o.jsx(tk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),o.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:mo+" pl-10",disabled:!a.dimension,children:[o.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),j.map(G=>o.jsx("option",{value:G,children:G},G))]})]})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx("label",{className:jc,children:"Descripción de la Acción"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ld,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),o.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:mo+" pl-10"})]})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx("label",{className:jc,children:"Objetivos (opcional)"}),o.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propósitos pedagógicos",className:mo})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Indicadores (separados por coma)"}),o.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:G=>E(G.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:mo})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Inicio"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),o.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Cumplimiento"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),o.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Estado"}),o.jsx("select",{name:"estado",value:a.estado,onChange:I,className:mo,children:EH.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Avance (%)"}),o.jsxs("div",{className:"relative",children:[o.jsx(O_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),o.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:mo+" pl-10"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:jc,children:"Enlaces de evidencia (separados por coma)"}),o.jsxs("div",{className:"relative",children:[o.jsx(TH,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),o.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:G=>S(G.target.value),placeholder:"https://..., https://...",className:mo+" pl-10"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&o.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?o.jsx($d,{className:"h-4 w-4"}):o.jsx(Nl,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&o.jsx("div",{className:Ey,children:o.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"relative md:col-span-2",children:[o.jsx(sE,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),o.jsx("input",{className:mo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:G=>m(G.target.value)})]}),o.jsxs("select",{value:g,onChange:G=>{x(G.target.value),y("")},className:mo,children:[o.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Zf).map(G=>o.jsx("option",{value:G,children:G},G))]}),o.jsxs("select",{value:v,onChange:G=>y(G.target.value),className:mo,children:[o.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Zf[g]??Object.values(Zf).flat()).map(G=>o.jsx("option",{value:G,children:G},G))]}),o.jsxs("select",{value:w,onChange:G=>_(G.target.value),className:mo,children:[o.jsx("option",{value:"",children:"Todos los estados"}),EH.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[o.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),o.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(G=>{var D,U;return o.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[o.jsx("td",{className:"px-4 py-4 align-top text-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((U=(D=G.responsable)==null?void 0:D.slice(0,1))==null?void 0:U.toUpperCase())||"?"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:G.responsable}),o.jsx("div",{className:"text-xs text-slate-500",children:G.cobertura})]})]})}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[o.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:G.dimension}),o.jsx("div",{className:"text-xs text-slate-500",children:G.subdimension})]}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[o.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:G.descripcion}),G.enlaces&&G.enlaces.length>0&&o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:G.enlaces.map((z,J)=>o.jsxs("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[o.jsx(TH,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[o.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",G.fechaRegistro||"-"]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",G.fechaInicio||"-"]}),o.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",G.fechaCumplimiento]})]}),o.jsx("td",{className:"px-4 py-4 align-top text-center",children:HWe(G.estado)}),o.jsxs("td",{className:"px-4 py-4 align-top",children:[o.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(G.avance??0,0),100)}%`}})}),o.jsxs("div",{className:"text-xs text-center mt-1",children:[G.avance??0,"%"]})]}),o.jsx("td",{className:"px-4 py-4 align-top text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx("button",{onClick:()=>P(G),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:o.jsx(bR,{className:"h-5 w-5 text-amber-600"})}),o.jsx("button",{onClick:()=>F(G.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:o.jsx(vi,{className:"h-5 w-5 text-rose-600"})})]})})]},G.id)}),L.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:`${_N} ${LWe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Mu,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),o.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),o.jsx("div",{className:`${_N} ${MWe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Ti,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),o.jsx("div",{className:"text-2xl font-black",children:((X=ee.find(G=>G.name==="Cumplida"))==null?void 0:X.value)??0})]})]})}),o.jsx("div",{className:`${_N} ${UWe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Ute,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),o.jsx("div",{className:"text-2xl font-black",children:((Z=ee.find(G=>G.name==="En Proceso"))==null?void 0:Z.value)??0})]})]})}),o.jsx("div",{className:`${_N} ${QWe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(O_,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),o.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),o.jsxs("div",{className:Ey+" p-5",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),o.jsx("div",{className:"h-64",children:o.jsx(lh,{width:"100%",height:"100%",children:o.jsxs(k2,{data:M,children:[o.jsx(S2,{strokeDasharray:"3 3"}),o.jsx(Fg,{dataKey:"name",hide:!0}),o.jsx(Og,{allowDecimals:!1}),o.jsx(oh,{}),o.jsx(B1,{dataKey:"value",children:M.map((G,D)=>o.jsx(Dm,{fill:D0[D%D0.length]},D))})]})})}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:M.map((G,D)=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:D0[D%D0.length]}}),o.jsx("span",{className:"flex-1",children:G.name}),o.jsx("span",{className:"font-semibold",children:G.value})]},D))})]}),o.jsxs("div",{className:Ey+" p-5",children:[o.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),o.jsx("div",{className:"h-64",children:o.jsx(lh,{width:"100%",height:"100%",children:o.jsxs(pM,{children:[o.jsx(qk,{data:ee,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:ee.map((G,D)=>o.jsx(Dm,{fill:D0[D%D0.length]},D))}),o.jsx(lb,{}),o.jsx(oh,{})]})})})]}),o.jsxs("div",{className:Ey+" p-5",children:[o.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),o.jsxs("ul",{className:"space-y-2",children:[q.map((G,D)=>o.jsxs("li",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:D0[D%D0.length]}}),G.name]}),o.jsx("span",{className:"font-semibold",children:G.value})]},D)),q.length===0&&o.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},zWe="modulepreload",$We=function(e){return"/"+e},Aq={},Dg=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=i(r.map(u=>{if(u=$We(u),u in Aq)return;Aq[u]=!0;const d=u.endsWith(".css"),A=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${A}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":zWe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};var fq;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(fq||(fq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hq;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(hq||(hq={}));var mq;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(mq||(mq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=["user","model","function","system"];var gq;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gq||(gq={}));var xq;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(xq||(xq={}));var vq;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(vq||(vq={}));var bq;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(bq||(bq={}));var Iw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Iw||(Iw={}));var yq;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(yq||(yq={}));var wq;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(wq||(wq={}));var Eq;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Eq||(Eq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Hx extends rl{constructor(t,r){super(t),this.response=r}}class $le extends rl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class hm extends rl{}class Gle extends rl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GWe="https://generativelanguage.googleapis.com",KWe="v1beta",qWe="0.24.1",WWe="genai-js";var Pg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Pg||(Pg={}));class XWe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||KWe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||GWe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function YWe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${WWe}/${qWe}`),t.join(" ")}async function JWe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",YWe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new hm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new hm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new hm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function ZWe(e,t,r,n,a,s){const i=new XWe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},nXe(s)),{method:"POST",headers:await JWe(i),body:a})}}async function IE(e,t,r,n,a,s={},i=fetch){const{url:l,fetchOptions:c}=await ZWe(e,t,r,n,a,s);return eXe(l,c,i)}async function eXe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){tXe(a,e)}return n.ok||await rXe(n,e),n}function tXe(e,t){let r=e;throw r.name==="AbortError"?(r=new Gle(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof $le||e instanceof hm||(r=new rl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function rXe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new $le(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function nXe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),T5(e.candidates[0]))throw new Hx(`${V0(e)}`,e);return aXe(e)}else if(e.promptFeedback)throw new Hx(`Text not available. ${V0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),T5(e.candidates[0]))throw new Hx(`${V0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Cq(e)[0]}else if(e.promptFeedback)throw new Hx(`Function call not available. ${V0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),T5(e.candidates[0]))throw new Hx(`${V0(e)}`,e);return Cq(e)}else if(e.promptFeedback)throw new Hx(`Function call not available. ${V0(e)}`,e)},e}function aXe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function Cq(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const sXe=[Iw.RECITATION,Iw.SAFETY,Iw.LANGUAGE];function T5(e){return!!e.finishReason&&sXe.includes(e.finishReason)}function V0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];T5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function j2(e){return this instanceof j2?(this.v=e,this):new j2(e)}function iXe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(n[h](m))}catch(g){A(s[0][3],g)}}function c(h){h.value instanceof j2?Promise.resolve(h.value.v).then(u,d):A(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function A(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function oXe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=uXe(t),[n,a]=r.tee();return{stream:cXe(n),response:lXe(a)}}async function lXe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return gM(dXe(t));t.push(a)}}function cXe(e){return iXe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield j2(r.read());if(a)break;yield yield j2(gM(n))}})}function uXe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:l})=>{if(l){if(a.trim()){n.error(new rl("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(Nq),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new rl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(Nq)}return s()}).catch(i=>{let l=i;throw l.stack=i.stack,l.name==="AbortError"?l=new Gle("Request aborted when reading from the stream"):l=new rl("Error reading from the stream"),l})}}})}function dXe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const l of s.content.parts)l.text&&(i.text=l.text),l.functionCall&&(i.functionCall=l.functionCall),l.executableCode&&(i.executableCode=l.executableCode),l.codeExecutionResult&&(i.codeExecutionResult=l.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kle(e,t,r,n){const a=await IE(t,Pg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return oXe(a)}async function qle(e,t,r,n){const s=await(await IE(t,Pg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:gM(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wle(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function B2(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return AXe(t)}function AXe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new rl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new rl("No content is provided for sending chat message.");return n?t:r}function fXe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new hm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=B2(e);n.contents=[s]}return{generateContentRequest:n}}function _q(e){let t;return e.contents?t=e:t={contents:[B2(e)]},e.systemInstruction&&(t.systemInstruction=Wle(e.systemInstruction)),t}function hXe(e){return typeof e=="string"||Array.isArray(e)?{content:B2(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],mXe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function pXe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new rl(`First content should be with role 'user', got ${n}`);if(!pq.includes(n))throw new rl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(pq)}`);if(!Array.isArray(a))throw new rl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new rl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of Sq)c in l&&(s[c]+=1);const i=mXe[n];for(const l of Sq)if(!i.includes(l)&&s[l]>0)throw new rl(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function kq(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq="SILENT_ERROR";class gXe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(pXe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,l,c;await this._sendPromise;const u=B2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},A=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>qle(this._apiKey,this.model,d,A)).then(m=>{var g;if(kq(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=V0(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,l,c;await this._sendPromise;const u=B2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},A=Object.assign(Object.assign({},this._requestOptions),r),h=Kle(this._apiKey,this.model,d,A);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(jq)}).then(m=>m.response).then(m=>{if(kq(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=V0(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==jq&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xXe(e,t,r,n){return(await IE(t,Pg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vXe(e,t,r,n){return(await IE(t,Pg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function bXe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await IE(t,Pg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Wle(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=_q(t),s=Object.assign(Object.assign({},this._requestOptions),r);return qle(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=_q(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Kle(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new gXe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=fXe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return xXe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=hXe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return vXe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return bXe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new rl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Bq(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new hm("Cached content must contain a `name` field.");if(!t.model)throw new hm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new hm(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Bq(this.apiKey,s,n)}}const Wk="presentacionesDidacticas",yXe=async(e,t)=>{const r=sr(vt(wr,Wk)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await yi(r,n),r.id},Tq=async(e,t)=>{const r=sr(wr,Wk,e);await cc(r,t)},wXe=async e=>{await Ra(sr(wr,Wk,e))},EXe=(e,t)=>{const r=$t(vt(wr,Wk),Ir("userId","==",e),pr("fechaCreacion","desc"));return fr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},CXe=async e=>{let t=null;try{const r=Kg.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=Bp(Fte,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId};t=await yXe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const i=await a(s);console.log("Respuesta de función:",i);const l=i.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await Tq(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await Tq(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentación:",n)}throw r}},Iq=async()=>{var t,r,n,a;const e=Kg.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const s=await e.getIdToken(),i=await fetch("https://us-central1-planificador-145df.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const l=await i.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(s){if(console.error("Error al verificar autorización de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const i=$t(vt(wr,"userTokens"),Ir("userId","==",e.uid)),l=await Dn(i);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(i){return console.error("Error en verificación alternativa:",i),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${s.message||"Error desconocido"}`}}},NXe=({userId:e,planificaciones:t})=>{const[r,n]=C.useState("presentaciones"),[a,s]=C.useState(null),[i,l]=C.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,contenidoFuente:"",enlaces:""}),[c,u]=C.useState([]),[d,A]=C.useState(!1),[h,m]=C.useState(!1),[g,x]=C.useState(null),[v,y]=C.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});C.useEffect(()=>e?EXe(e,P=>{u(P)}):void 0,[e]),C.useEffect(()=>{(async()=>{if(e)try{y(F=>({...F,checking:!0}));const P=await Iq();y({isAuthorized:P.isAuthorized,message:P.message,checking:!1})}catch(P){y({isAuthorized:!1,message:`Error: ${P.message||"No se pudo verificar la autorización"}`,checking:!1})}})()},[e]),C.useEffect(()=>{a&&("nombreUnidad"in a?l(R=>({...R,tema:a.nombreUnidad})):"nombreClase"in a&&l(R=>({...R,tema:a.nombreClase})))},[a]);const w=()=>{var R;if(!a)return[];if("lecciones"in a){const P=[];return(R=a.lecciones)==null||R.forEach(F=>{F.objetivosAprendizaje&&!P.includes(F.objetivosAprendizaje)&&P.push(F.objetivosAprendizaje)}),P}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},_=R=>{const{name:P,value:F,type:L}=R.target;if(L==="checkbox"){const M=R.target.checked;l(ee=>({...ee,[P]:M}))}else l(M=>({...M,[P]:F}))},j=R=>{const P=Array.from(R.target.selectedOptions,F=>F.value);l(F=>({...F,objetivosAprendizaje:P}))},k=async R=>{if(R.preventDefault(),!a){x("Debes seleccionar una planificación");return}if(i.objetivosAprendizaje.length===0){x("Debes seleccionar al menos un objetivo de aprendizaje");return}x(null),m(!0);try{const P={planificacionId:a.id,tema:i.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:i.objetivosAprendizaje,numDiapositivas:i.numDiapositivas,estilo:i.estilo,incluirImagenes:i.incluirImagenes,contenidoFuente:i.contenidoFuente,enlaces:i.enlaces?i.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",P);const F=await CXe({...P,userId:e});console.log("Resultado de la función:",F),F&&F.url&&console.log("Presentación generada:",F.url)}catch(P){console.error("Error al generar presentación:",P);const F=(P==null?void 0:P.message)||"Error desconocido",L=(P==null?void 0:P.code)||"unknown";x(`Error (${L}): ${F}`)}finally{m(!1)}},I=async R=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{A(!0),await wXe(R)}catch(P){console.error("Error al eliminar presentación:",P),x("Error al eliminar la presentación")}finally{A(!1)}},E=()=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),o.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:R=>{const P=t.find(F=>F.id===R.target.value);s(P||null)},required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una planificación"}),o.jsx("optgroup",{label:"Unidades",children:t.filter(R=>R.tipo==="Unidad").map(R=>o.jsxs("option",{value:R.id,children:[R.tipo==="Unidad"?R.nombreUnidad:""," - ",R.asignatura," (",R.nivel,")"]},R.id))}),o.jsx("optgroup",{label:"Clases",children:t.filter(R=>R.tipo==="Clase").map(R=>o.jsxs("option",{value:R.id,children:[R.tipo==="Clase"?R.nombreClase:""," - ",R.asignatura," (",R.nivel,")"]},R.id))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),o.jsx("input",{type:"text",name:"tema",value:i.tema,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),o.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:i.objetivosAprendizaje,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:w().map((R,P)=>o.jsx("option",{value:R,children:R},P))}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),o.jsx("input",{type:"number",name:"numDiapositivas",value:i.numDiapositivas,onChange:_,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo"}),o.jsxs("select",{name:"estilo",value:i.estilo,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"sobrio",children:"Sobrio"}),o.jsx("option",{value:"visual",children:"Visual"})]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:i.incluirImagenes,onChange:R=>l(P=>({...P,incluirImagenes:R.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"incluirImagenes",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),o.jsx("textarea",{name:"contenidoFuente",value:i.contenidoFuente,onChange:_,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),o.jsx("input",{type:"text",name:"enlaces",value:i.enlaces,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),g&&o.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:g}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:h||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?o.jsxs(o.Fragment,{children:[o.jsx(el,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(FH,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[o.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),o.jsx("div",{className:"space-y-4",children:d?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(el,{className:"w-8 h-8 animate-spin text-indigo-500"})}):c.length===0?o.jsxs("div",{className:"text-center py-8 space-y-4",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),o.jsx("div",{className:"text-sm",children:v.checking?o.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[o.jsx(el,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Verificando autorización..."})]}):o.jsxs("div",{className:`flex items-center justify-center gap-2 ${v.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[o.jsx("span",{children:v.isAuthorized?"✅":"⚠️"}),o.jsx("span",{children:v.message})]})}),!v.checking&&!v.isAuthorized&&o.jsx("div",{className:"flex justify-center",children:o.jsxs("button",{onClick:()=>{const R=`https://us-central1-planificador-145df.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.open(R,"_blank","width=600,height=700")},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(yB,{className:"w-4 h-4"}),o.jsx("span",{children:"Autorizar Google Slides"})]})}),o.jsx("div",{className:"flex justify-center",children:o.jsxs("button",{onClick:async()=>{try{y(P=>({...P,checking:!0}));const R=await Iq();y({isAuthorized:R.isAuthorized,message:R.message,checking:!1})}catch(R){y({isAuthorized:!1,message:`Error: ${R.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:v.checking,className:"flex items-center gap-2 px-3 py-1 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:[v.checking?o.jsx(el,{className:"w-3 h-3 animate-spin"}):o.jsx("span",{children:"🔄"}),o.jsx("span",{children:"Actualizar estado"})]})})]}):c.map(R=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:R.tema}),R.estado==="generando"?o.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[o.jsx(el,{className:"w-3 h-3 animate-spin"}),"Generando"]}):R.estado==="error"?o.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[o.jsx(wg,{className:"w-3 h-3"}),"Error"]}):o.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[o.jsx(Ti,{className:"w-3 h-3"}),"Lista"]})]}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[R.asignatura," - ",R.curso]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ac,{className:"w-3 h-3"}),new Date(R.fechaCreacion).toLocaleDateString()]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(S5,{className:"w-3 h-3"}),R.numDiapositivas," diapositivas"]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),o.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:R.objetivosAprendizaje.map((P,F)=>o.jsx("li",{className:"truncate",children:P.length>60?P.substring(0,57)+"...":P},F))})]}),R.mensajeError&&o.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:R.mensajeError}),o.jsxs("div",{className:"mt-3 flex justify-between",children:[R.estado==="completada"?o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:R.esDemoMode||R.urlPresentacion.includes("example.com")?"#":R.urlPresentacion,onClick:P=>{(R.esDemoMode||R.urlPresentacion.includes("example.com"))&&(P.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${R.esDemoMode||R.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[o.jsx(yB,{className:"w-3 h-3"}),R.esDemoMode||R.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),R.esDemoMode&&R.urlAutorizacion&&o.jsxs("a",{href:R.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[o.jsx(yB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):o.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),o.jsx("button",{onClick:()=>I(R.id),className:"text-red-500 hover:text-red-700",children:o.jsx(vi,{className:"w-4 h-4"})})]})]},R.id))})]})})]}),S=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[o.jsx(kH,{className:"w-16 h-16 mx-auto text-gray-400"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),B=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[o.jsx(S5,{className:"w-16 h-16 mx-auto text-gray-400"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:o.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(FH,{className:"w-4 h-4"}),o.jsx("span",{children:"Presentaciones"})]}),o.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(kH,{className:"w-4 h-4"}),o.jsx("span",{children:"Guías"})]}),o.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(S5,{className:"w-4 h-4"}),o.jsx("span",{children:"Recursos"})]})]})}),o.jsxs("div",{children:[r==="presentaciones"&&E(),r==="guias"&&S(),r==="recursos"&&B()]})]})},Xk="planificaciones",Xle="actividades_calendario",Yle=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},_Xe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,Xk),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},SXe=async(e,t,r)=>{try{const n=sr(ft,Xk,e),a=await zg(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await cc(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},kXe=async(e,t)=>{try{const r=sr(ft,Xk,e),n=await zg(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ra(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},jXe=(e,t)=>{const r=$t(vt(ft,Xk),Ir("userId","==",e),pr("fechaCreacion","desc"));return fr(r,n=>{const a=n.docs.map(Yle);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},BXe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,Xle),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},TXe=(e,t)=>{const r=$t(vt(ft,Xle),Ir("userId","==",e),pr("fecha","desc"));return fr(r,n=>{const a=n.docs.map(Yle);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},IXe=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,i]=C.useState(null);return C.useEffect(()=>e?(a(!0),jXe(e,A=>{r(A),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await _Xe(d,e)}catch(A){throw i(A.message||"Error al guardar planificación"),A}},update:async(d,A)=>{try{i(null),await SXe(d,A,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await kXe(d,e)}catch(A){throw i(A.message||"Error al eliminar planificación"),A}}}},Jle=C.lazy(()=>Dg(()=>import("./PdfDownloadButton-RBpMJ85b.js"),[])),DO=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},FXe=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,i]=C.useState(null);C.useEffect(()=>e?TXe(e,u=>{r(u),a(!1)}):void 0,[e]);const l=C.useCallback(async c=>{try{return i(null),await BXe(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},OXe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=C.useState(e),i=c=>{const{name:u,value:d}=c.target;if(u.startsWith("actividadDetallada.")){const A=u.split(".")[1];s(h=>({...h,actividadDetallada:{...h.actividadDetallada,[A]:d}}))}else s({...a,[u]:d})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),o.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Información básica"}),Object.entries(a).filter(([c])=>c!=="actividadDetallada").map(([c,u])=>o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),o.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Actividad detallada"}),a.actividadDetallada?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estrategia didáctica"}),o.jsx("textarea",{name:"actividadDetallada.estrategiaDidactica",value:a.actividadDetallada.estrategiaDidactica,onChange:i,rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Materiales"}),o.jsx("textarea",{name:"actividadDetallada.materiales",value:a.actividadDetallada.materiales,onChange:i,rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Organización de estudiantes"}),o.jsx("textarea",{name:"actividadDetallada.organizacionEstudiantes",value:a.actividadDetallada.organizacionEstudiantes,onChange:i,rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tiempo estimado"}),o.jsx("textarea",{name:"actividadDetallada.tiempoEstimado",value:a.actividadDetallada.tiempoEstimado,onChange:i,rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción detallada"}),o.jsx("textarea",{name:"actividadDetallada.descripcion",value:a.actividadDetallada.descripcion,onChange:i,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]})]}):o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"Esta lección no tiene actividad detallada definida."})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[o.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),o.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},DXe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=C.useState(e.progreso??0),[l,c]=C.useState(!1),u=async d=>{const A=parseInt(d.target.value,10);i(A),c(!0);try{e.id&&a&&(await a(e.id,{progreso:A}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]})]}),o.jsx("div",{className:"ml-4",children:o.jsx(C.Suspense,{fallback:o.jsx("button",{className:"bg-gray-300 text-gray-600 font-semibold px-4 py-2 rounded-md flex items-center justify-center gap-2 cursor-not-allowed opacity-50",children:"Cargando..."}),children:o.jsx(Jle,{plan:e})})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:l||n}),o.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&o.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),o.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,A)=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[o.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",A+1,": ",d.actividades]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),d.actividadDetallada&&o.jsxs("div",{className:"mt-4 bg-slate-50 dark:bg-slate-700/40 p-3 rounded-md",children:[o.jsx("h5",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Actividad detallada"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Estrategia:"})," ",d.actividadDetallada.estrategiaDidactica]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Materiales:"})," ",d.actividadDetallada.materiales]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Organización:"})," ",d.actividadDetallada.organizacionEstudiantes]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Tiempo:"})," ",d.actividadDetallada.tiempoEstimado]})]}),o.jsx("div",{className:"text-sm mt-2",children:o.jsxs("p",{children:[o.jsx("strong",{children:"Descripción:"})," ",d.actividadDetallada.descripcion]})})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx("button",{onClick:()=>t(A,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),o.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},A))})]})},PXe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{var A;const[s,i]=C.useState(e),[l,c]=C.useState(!1),u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");i(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r(s)}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:s.nombreClase}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(C.Suspense,{fallback:o.jsx("button",{className:"bg-gray-300 text-gray-600 font-semibold px-4 py-2 rounded-md flex items-center justify-center gap-2 cursor-not-allowed opacity-50",children:"Cargando..."}),children:o.jsx(Jle,{plan:s})}),o.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:"← Volver"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),o.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||l})]}),o.jsxs("div",{children:[o.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),o.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||l})]}),o.jsxs("div",{children:[o.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),o.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||l})]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-4",children:"Conceptos Relevantes"}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 rounded-lg shadow-inner",children:[o.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[(A=s.conceptosRelevantes)==null?void 0:A.map((h,m)=>o.jsxs("div",{className:"relative group cursor-pointer",style:{fontSize:`${Math.max(.9,Math.min(2,.9+h.peso/10))}rem`},children:[o.jsx("span",{className:"p-2 rounded-md transition-all duration-300 group-hover:scale-110 inline-block",style:{backgroundColor:h.color||`hsl(${m*30%360}, ${Math.min(100,50+h.peso*5)}%, ${Math.max(30,80-h.peso*5)}%)`,color:h.peso>5?"white":"currentColor",fontWeight:h.peso>7?"bold":h.peso>4?"semibold":"normal",boxShadow:h.peso>8?"0 4px 6px rgba(0,0,0,0.1)":"none"},children:h.texto}),o.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:["Relevancia: ",h.peso,"/10"]})]},m)),(!s.conceptosRelevantes||s.conceptosRelevantes.length===0)&&o.jsx("button",{onClick:()=>{const m=`${s.momentosClase.inicio} ${s.momentosClase.desarrollo} ${s.momentosClase.cierre} ${s.contenidos||""}`.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").split(/\s+/),g=["y","o","el","la","los","las","un","una","unos","unas","que","en","de","a","para","por","con","se","su","sus","este","esta","estos","estas","aquel","aquella","es","son","al","del"],x={};m.forEach(y=>{y.length>3&&!g.includes(y)&&(x[y]=(x[y]||0)+1)});const v=Object.entries(x).filter(([y,w])=>w>1).sort((y,w)=>w[1]-y[1]).slice(0,15).map(([y,w])=>({texto:y,peso:Math.min(10,Math.max(1,Math.round(w/2)+3))}));i(y=>({...y,conceptosRelevantes:v}))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Generar Conceptos Relevantes"})]}),s.conceptosRelevantes&&s.conceptosRelevantes.length>0&&o.jsx("div",{className:"mt-4 text-right",children:o.jsx("button",{onClick:()=>{i(h=>({...h,conceptosRelevantes:[]}))},className:"text-sm text-red-500 hover:text-red-700",children:"Reiniciar Conceptos"})})]})]})]}),o.jsx("div",{className:"text-right mt-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:"🗑️ Eliminar Plan"}),o.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},RXe=({userId:e})=>{const{actividades:t,save:r}=FXe(e),[n,a]=C.useState("list"),[s,i]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(!1),A={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=C.useState(A);C.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:E,value:S}=I.target;m(B=>({...B,[E]:S}))},v=(I,E,S)=>{m(B=>({...B,tareas:B.tareas.map(R=>R.id===I?{...R,[E]:S}:R)}))},y=()=>{m(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=I=>{m(E=>({...E,tareas:E.tareas.filter(S=>S.id!==I)}))},_=async I=>{I.preventDefault(),c(!0);const E=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{DO("Planificación - Actividad Calendario");const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new Ds(S).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:1024}}).generateContent(E)).response).text(),M={...h,objetivo:L.replace(/(\*\*|\*)/g,"")},ee=await r(M),V={...M,id:ee};i(V),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...h,objetivo:"No generado"},R=await r(B),P={...B,id:R};i(P),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},j=async I=>{if(I)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},k=`
  w-full px-4 py-2.5 rounded-lg border border-slate-200 
  bg-white dark:bg-slate-800 
  text-slate-900 dark:text-slate-100 
  placeholder:text-slate-400 dark:placeholder:text-slate-500
  focus:border-indigo-500 dark:focus:border-indigo-600 
  focus:ring-2 focus:ring-indigo-500/20 dark:focus:ring-indigo-600/20
  focus:outline-none
  transition-colors
  disabled:opacity-50 disabled:cursor-not-allowed
`;return n==="form"?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:o.jsxs("form",{onSubmit:_,className:"space-y-8",children:[o.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:k,required:!0,disabled:l}),o.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:k,required:!0,disabled:l})]}),o.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:k,required:!0,disabled:l}),o.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:k,required:!0,disabled:l})]}),o.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:k,disabled:l})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),o.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),o.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((I,E)=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[o.jsx("button",{type:"button",onClick:()=>w(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),o.jsx("textarea",{value:I.descripcion,onChange:S=>v(I.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsx("input",{value:I.responsable,onChange:S=>v(I.id,"responsable",S.target.value),placeholder:"Responsable",className:k,required:!0,disabled:l}),o.jsx("input",{value:I.recursos,onChange:S=>v(I.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:k,disabled:l})]})]},I.id))})]}),o.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[o.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),o.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[o.jsx("span",{className:"text-2xl",children:"✓"}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),o.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),o.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),o.jsxs("div",{className:"space-y-4 text-sm",children:[o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),o.jsx("span",{children:s.nombre})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),o.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),o.jsx("p",{children:s.descripcion})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),o.jsx("span",{children:s.ubicacion})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),o.jsx("span",{children:s.participantes})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),o.jsx("p",{children:s.recursosGenerales})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),o.jsx("p",{children:s.objetivo})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[o.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),o.jsx("button",{onClick:()=>j(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),o.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),o.jsx("button",{onClick:()=>{a("form"),m(A)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),o.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):o.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},LXe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=IXe(t),l={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=C.useState(l),[d,A]=C.useState(null),[h,m]=C.useState(!1),[g,x]=C.useState(null),[v,y]=C.useState("unidad"),[w,_]=C.useState(null),[j,k]=C.useState(null),I=C.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=C.useMemo(()=>{const Z=e.cursos||[],G=new Set;return Z.forEach(D=>{D.startsWith("1º")?G.add("1º Medio"):D.startsWith("2º")?G.add("2º Medio"):D.startsWith("3º")?G.add("3º Medio"):D.startsWith("4º")&&G.add("4º Medio")}),Array.from(G)},[e.cursos]);C.useEffect(()=>{u(Z=>({...Z,asignatura:I[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(Z=>({id:Z.id,autor:Z.autor,tipo:Z.tipo,coincideConUserId:Z.autor===t}))})},[I,E,e,t,r]);const S=Z=>{const{name:G,value:D}=Z.target;u(U=>({...U,[G]:G==="cantidadClases"?parseInt(D,10):D}))},B=()=>{const{asignatura:Z,nivel:G,nombreUnidad:D,contenidos:U,cantidadClases:z,observaciones:J,ideasParaUnidad:re}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${Z} en ${G}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${Z}
    - Nivel: ${G}
    - Nombre de la Unidad: "${D}"
    - Contenidos clave a trabajar (insumo principal): "${U}"
    - Cantidad de clases para la unidad: ${z}
    - Ideas y perspectiva del docente para la unidad: "${re||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${J||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${Z} en ${G}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado, sin incluir comillas backticks ni símbolos de markdown. Responde SOLAMENTE con JSON válido sin ningún texto adicional. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
    - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
    - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
    - **actividades**: Un título descriptivo de la actividad principal.
    - **actividadDetallada**: Un objeto con la siguiente estructura:
        - **estrategiaDidactica**: La estrategia didáctica a utilizar (ej: "Aprendizaje basado en problemas", "Clase invertida").
        - **materiales**: Los recursos necesarios para la actividad.
        - **organizacionEstudiantes**: Cómo se organizarán los estudiantes (individual, parejas, grupos).
        - **tiempoEstimado**: Tiempo estimado en minutos para realizar la actividad.
        - **descripcion**: Descripción detallada del paso a paso de la actividad.
    - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.

Para las actividades de cada clase, ten en cuenta que:
1. Deben ser específicas para cada clase y no repetirse entre clases
2. Deben incluir el tiempo estimado para su realización
3. Deben detallar qué materiales o recursos son necesarios 
4. Deben especificar la organización de los estudiantes (individual, parejas, grupos)
5. Deben describir el paso a paso de la actividad de manera clara
6. Deben alinearse con el objetivo de aprendizaje y la habilidad de Bloom trabajada`},R=async Z=>{if(Z.preventDefault(),m(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),m(!1);return}try{DO("Planificación - Unidad");const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=new Ds(G).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:8192}}),z=B(),J={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},actividadDetallada:{type:"object",properties:{estrategiaDidactica:{type:"string"},materiales:{type:"string"},organizacionEstudiantes:{type:"string"},tiempoEstimado:{type:"string"},descripcion:{type:"string"}}},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]};let se=(await(await U.generateContent(z)).response).text();if(se.includes("```json")){const ke=se.match(/```json\s*([\s\S]*?)\s*```/);ke&&ke[1]&&(se=ke[1].trim())}let le;try{le=JSON.parse(se)}catch(ke){throw console.error("Error al parsear JSON:",ke),console.log("Texto recibido:",se),new Error("La respuesta de la IA no tiene un formato JSON válido. Por favor, intente nuevamente.")}const ue={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:le.objetivosAprendizaje,indicadoresEvaluacion:le.indicadoresEvaluacion,detallesLeccion:le.detallesLeccion};if(d)await a(d.id,ue),A({...ue,id:d.id});else{const ke=await n(ue);A({...ue,id:ke})}}catch(G){console.error("Error al generar planificación con IA",G),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{m(!1)}},P=async(Z,G)=>{m(!0),x(null);const D=`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${G.asignatura}
    - Nivel: ${G.nivel}
    - Objetivo de la clase: ${Z.objetivosAprendizaje}
    - Contenidos: ${Z.contenidosConceptuales}
    - Actividades sugeridas: ${Z.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    - Identificar 10-15 conceptos clave de la clase con su nivel de relevancia.
    
    Responde SÓLO con un objeto JSON válido, sin formateo markdown, sin backticks, sin comentarios ni texto adicional. El objeto debe tener la siguiente estructura:
    
    {
      "inicio": "Texto detallado describiendo las actividades de inicio...",
      "desarrollo": "Texto detallado describiendo las actividades de desarrollo...",
      "cierre": "Texto detallado describiendo las actividades de cierre...",
      "conceptosRelevantes": [
        {
          "texto": "Concepto clave 1",
          "peso": 8
        },
        {
          "texto": "Concepto clave 2",
          "peso": 6
        },
        // ... más conceptos
      ]
    }
    
    En "conceptosRelevantes", incluye de 10 a 15 conceptos clave de la clase, donde cada concepto debe tener un "peso" de relevancia del 1 al 10 (donde 10 es lo más relevante). No incluyas conceptos triviales o generales, sino los específicos y fundamentales para esta clase.
    
    No incluyas ningún texto adicional antes o después del JSON. Asegúrate de que los valores de inicio, desarrollo y cierre sean cadenas de texto simples, no objetos ni arrays.`;try{DO("Planificación - Utilizar Clase");const U="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new Ds(U).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:4096}}),re={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"},conceptosRelevantes:{type:"array",items:{type:"object",properties:{texto:{type:"string"},peso:{type:"number"}},required:["texto","peso"]}}},required:["inicio","desarrollo","cierre"]};let le=(await(await J.generateContent(D)).response).text();if(le.includes("```json")){const je=le.match(/```json\s*([\s\S]*?)\s*```/);je&&je[1]&&(le=je[1].trim())}let ue;try{ue=JSON.parse(le)}catch(je){throw console.error("Error al parsear JSON:",je),console.log("Texto recibido:",le),new Error("La respuesta de la IA no tiene un formato JSON válido. Por favor, intente nuevamente.")}const ke={inicio:typeof ue.inicio=="string"?ue.inicio:ue.inicio?JSON.stringify(ue.inicio):"No hay contenido para el inicio de la clase",desarrollo:typeof ue.desarrollo=="string"?ue.desarrollo:ue.desarrollo?JSON.stringify(ue.desarrollo):"No hay contenido para el desarrollo de la clase",cierre:typeof ue.cierre=="string"?ue.cierre:ue.cierre?JSON.stringify(ue.cierre):"No hay contenido para el cierre de la clase"};console.log("Estructura de momentosClase normalizada:",ke);const ae=ue.conceptosRelevantes?ue.conceptosRelevantes.map((je,_e)=>{const me=200+Math.floor((10-je.peso)*15),Te=70+je.peso*3,Le=Math.max(30,80-je.peso*5);return{...je,color:`hsl(${me}, ${Te}%, ${Le}%)`}}):[],Ne={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:G.asignatura,nivel:G.nivel,contenidos:Z.contenidosConceptuales,observaciones:"",nombreClase:Z.actividades,duracionClase:80,momentosClase:ke,detalleLeccionOrigen:Z,conceptosRelevantes:ae};await n(Ne),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(U){console.error("Error al generar plan de clase con IA",U),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{m(!1)}},F=Z=>{Z.tipo==="Unidad"&&(u({asignatura:Z.asignatura,nivel:Z.nivel,nombreUnidad:Z.nombreUnidad,contenidos:Z.contenidos,cantidadClases:Z.cantidadClases,observaciones:Z.observaciones,ideasParaUnidad:Z.ideasParaUnidad||""}),A(Z),window.scrollTo({top:0,behavior:"smooth"}))},L=async Z=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(Z),(d==null?void 0:d.id)===Z&&(A(null),u(l))}catch(G){console.error("Error al eliminar planificación:",G),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},M=async Z=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(Z),(w==null?void 0:w.id)===Z&&_(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(G){console.error("Error al eliminar plan de clase:",G),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},ee=(Z,G)=>{d&&k({planId:d.id,lessonIndex:Z,lessonData:G})},V=async Z=>{if(j)try{const{planId:G,lessonIndex:D}=j,U=r.find(re=>re.id===G&&re.tipo==="Unidad");if(!U)return;const z=[...U.detallesLeccion];z[D]=Z;const J={...U,detallesLeccion:z};await a(G,J),A(J),k(null)}catch(G){console.error("Error al actualizar lección:",G),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("form",{onSubmit:R,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:c.asignatura,onChange:S,className:q,disabled:h,children:I.length>0?I.map(Z=>o.jsx("option",{value:Z,children:Z},Z)):o.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsx("select",{name:"nivel",value:c.nivel,onChange:S,className:q,disabled:h,children:E.length>0?E.map(Z=>o.jsx("option",{value:Z,children:Z},Z)):o.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:S,className:q,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),o.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[o.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:S,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:q,disabled:h})]}),o.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[o.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),o.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:S,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:q,disabled:h})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),o.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:S,className:q,min:"1",max:"20",disabled:h})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),o.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:S,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:q,disabled:h})]})]}),o.jsx("div",{className:"pt-4 text-right",children:o.jsx("button",{type:"submit",disabled:h||i,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:h?o.jsx(Vte,{className:"w-5 h-5 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(eg,{className:"w-5 h-5"}),o.jsx("span",{children:d?"Regenerar Plan":"Generar con IA"})]})})}),g&&o.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),o.jsx(DXe,{plan:d,onEditLesson:ee,onUseLesson:P,onUpdatePlan:a,isLoading:h})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsx("div",{className:"space-y-4",children:r.filter(Z=>Z.tipo==="Unidad").length>0?r.filter(Z=>Z.tipo==="Unidad").map(Z=>o.jsx("div",{className:`p-5 border rounded-xl transition-all ${(d==null?void 0:d.id)===Z.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:Z.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(Z.fechaCreacion).toLocaleString("es-CL")]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",Z.contenidos]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>F(Z),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[o.jsx(YEe,{className:"w-4 h-4"}),o.jsx("span",{children:"Editar"})]}),o.jsxs("button",{onClick:()=>L(Z.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[o.jsx(vi,{className:"w-4 h-4"}),o.jsx("span",{children:"Eliminar"})]})]})]})},Z.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),X=()=>{const Z=r.filter(G=>G.tipo==="Clase").sort((G,D)=>new Date(D.fechaCreacion).getTime()-new Date(G.fechaCreacion).getTime());if(w){if(console.log("Momentos de clase:",w.momentosClase),typeof w.momentosClase=="object"&&w.momentosClase!==null&&(!w.momentosClase.inicio||typeof w.momentosClase.inicio!="string")){console.log("Corrigiendo estructura de momentosClase"),JSON.stringify(w.momentosClase);const G={inicio:typeof w.momentosClase.inicio=="string"?w.momentosClase.inicio:"No hay contenido para el inicio de la clase",desarrollo:typeof w.momentosClase.desarrollo=="string"?w.momentosClase.desarrollo:"No hay contenido para el desarrollo de la clase",cierre:typeof w.momentosClase.cierre=="string"?w.momentosClase.cierre:"No hay contenido para el cierre de la clase"},D={...w,momentosClase:G};return _(D),a(D.id,{momentosClase:G}).catch(U=>{console.error("Error al actualizar estructura de momentosClase:",U)}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Corrigiendo formato del plan..."}),o.jsx("p",{className:"text-slate-500 mb-3",children:"Hemos detectado un problema con el formato de este plan de clase y lo estamos corrigiendo."}),o.jsx("p",{children:"Por favor, espere un momento y luego vuelva a intentarlo."}),o.jsx("button",{onClick:()=>_(null),className:"mt-4 bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Volver"})]})}return o.jsx(PXe,{plan:w,onBack:()=>_(null),onDelete:M,onSave:async G=>{try{await a(G.id,G),_(G)}catch(D){console.error("Error al actualizar plan de clase:",D),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h})}return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(lEe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),i?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsx("div",{className:"space-y-4",children:Z.length>0?Z.map(G=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.nombreClase}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(G.fechaCreacion).toLocaleString("es-CL")]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",G.contenidos]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>_(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},G.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),o.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx(Qte,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:o.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>y("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(Gc,{className:"w-4 h-4"}),o.jsx("span",{children:"Unidad"})]}),o.jsxs("button",{onClick:()=>y("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(mNe,{className:"w-4 h-4"}),o.jsx("span",{children:"Clase"})]}),o.jsxs("button",{onClick:()=>y("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(ac,{className:"w-4 h-4"}),o.jsx("span",{children:"Actividades Calendario"})]}),o.jsxs("button",{onClick:()=>y("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${v==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(S5,{className:"w-4 h-4"}),o.jsx("span",{children:"Mis Materiales"})]})]})}),v==="unidad"&&K(),v==="clase"&&X(),v==="calendario"&&o.jsx(RXe,{userId:t}),v==="materiales"&&o.jsx(NXe,{userId:t,planificaciones:r}),j&&o.jsx(OXe,{lesson:j.lessonData,onClose:()=>k(null),onSave:V,isLoading:h})]})},Yk="events",MXe=async()=>{try{const e=$t(vt(wr,Yk),pr("date","asc"));return(await Dn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},UXe=async e=>{try{return{id:(await hn(vt(wr,Yk),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},QXe=async(e,t)=>{try{const r=sr(wr,Yk,e);await cc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},HXe=async e=>{try{const t=sr(wr,Yk,e);await Ra(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},VXe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Fq={[dn.EVALUACION]:o.jsx(Gc,{className:"h-4 w-4"}),[dn.ACTO]:o.jsx(TCe,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:o.jsx(A1,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:o.jsx(qCe,{className:"h-4 w-4"})},zXe=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},$Xe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[l,c]=C.useState({});C.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:Pp.PRUEBA_PARCIAL,asignatura:js[0],curso:_s[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},A=x=>{c(v=>{if(v.type===dn.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case dn.EVALUACION:{const w={date:s,type:dn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Pp.RUBRICA||l.subtype===Pp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case dn.ACTO:v={date:s,type:dn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case dn.ACTIVIDAD_FOCALIZADA:v={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case dn.SALIDA_PEDAGOGICA:v={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case dn.EVALUACION:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),o.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:U2e.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:js.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),o.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:_s.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),o.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Pp.RUBRICA||l.subtype===Pp.PAUTA_COTEJO)&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),o.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),o.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),o.jsxs("div",{className:"relative",children:[o.jsx(D_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),o.jsxs("div",{className:"relative",children:[o.jsx(nh,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),o.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),o.jsxs("div",{className:"relative",children:[o.jsx(D_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),o.jsxs("fieldset",{children:[o.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),o.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:_s.map(x=>o.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>A(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),o.jsx("span",{children:x})]},x))})]})]});default:return null}};return o.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:o.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:o.jsxs("form",{onSubmit:h,children:[o.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),o.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:o.jsx(wg,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),o.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(dn).map(x=>o.jsx("option",{value:x,children:x},x))})]}),g()]})]}),o.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[o.jsx("div",{children:a&&n&&o.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[o.jsx(vi,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[o.jsx(wg,{className:"h-4 w-4"}),"Cancelar"]}),o.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[o.jsx($d,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},GXe=({profile:e})=>{const[t,r]=C.useState(new Date),[n,a]=C.useState([]),[s,i]=C.useState(!1),[l,c]=C.useState(null),[u,d]=C.useState(!1),[A,h]=C.useState(Object.values(dn)),[m,g]=C.useState(!1),[x,v]=C.useState(null),[y,w]=C.useState(null),_=C.useCallback(async()=>{i(!0);try{const P=await MXe();a(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);C.useEffect(()=>{_()},[_]);const j=C.useMemo(()=>{const P=t.getFullYear(),F=t.getMonth(),L=new Date(P,F,1).getDay(),M=new Date(P,F+1,0).getDate(),ee=[];let V=1;for(let q=0;q<6;q++){const K=[];for(let X=0;X<7;X++)q===0&&X<L||V>M?K.push(null):(K.push(new Date(P,F,V)),V++);if(ee.push(K),V>M)break}return ee},[t]),k=P=>{h(F=>F.includes(P)?F.filter(L=>L!==P):[...F,P])},I=()=>{A.length===Object.values(dn).length?h([]):h(Object.values(dn))},E=P=>{e!==Yt.ESTUDIANTE&&(v(P.toISOString().split("T")[0]),w(null),g(!0))},S=(P,F)=>{F.stopPropagation(),e!==Yt.ESTUDIANTE&&(v(P.date),w(P),g(!0))},B=async P=>{d(!0);try{y?await QXe(y.id,P):await UXe(P),await _(),g(!1)}catch(F){console.error("Error al guardar evento:",F);const L=F instanceof Error?F.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},R=async()=>{if(y){d(!0);try{await HXe(y.id),await _(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const F=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${F}`)}finally{d(!1)}}};return o.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),o.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),o.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&o.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&o.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&o.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[o.jsx(mCe,{className:"h-5 w-5 mt-0.5"}),o.jsx("p",{children:"No hay eventos registrados en la nube."})]}),o.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[o.jsx(tk,{className:"h-4 w-4"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:A.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(P=>o.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${A.includes(P)?`shadow-sm ${Rv[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[o.jsx("input",{type:"checkbox",checked:A.includes(P),onChange:()=>k(P),className:"hidden"}),o.jsx("span",{className:"shrink-0",children:Fq[P]}),o.jsx("span",{children:Rv[P].label})]},P))]})]}),o.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[o.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:o.jsx(e2,{className:"h-5 w-5"})}),o.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:o.jsx(gR,{className:"h-5 w-5"})})]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),o.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:VXe.map(P=>o.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),o.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:j.flat().map((P,F)=>{const L=P&&P.toDateString()===new Date().toDateString(),M=P==null?void 0:P.toISOString().split("T")[0],ee=M?n.filter(V=>V.date===M&&A.includes(V.type)):[];return o.jsx("div",{onClick:()=>P&&E(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==Yt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ee.map(V=>o.jsxs("div",{onClick:q=>S(V,q),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Rv[V.type].color}`,children:[o.jsx("span",{className:"shrink-0",children:Fq[V.type]}),o.jsx("span",{className:"truncate",children:zXe(V)})]},V.id))}),e!==Yt.ESTUDIANTE&&o.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:o.jsx(Nl,{className:"h-4 w-4"})})]})},F)})})]}),m&&o.jsx($Xe,{isOpen:m,onClose:()=>g(!1),onSave:B,onDelete:R,event:y,date:x,isLoading:u})]})},Jk="anuncios",KXe=async()=>{try{const e=$t(vt(wr,Jk),pr("fechaPublicacion","desc"));return(await Dn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},qXe=async e=>{try{return{id:(await hn(vt(wr,Jk),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},WXe=async(e,t)=>{try{const r=sr(wr,Jk,e);await cc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},XXe=async e=>{try{const t=sr(wr,Jk,e);await Ra(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},Oq=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],YXe=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,i]=C.useState(null),[l,c]=C.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=C.useState({tipo:"Todos",cursos:[]}),A=C.useCallback(async()=>{a(!0);try{const E=await KXe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);C.useEffect(()=>{A()},[A]);const h=E=>{const{name:S,value:B}=E.target;c(R=>({...R,[S]:B}))},m=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(S=>{var R;if(S.tipo!=="Cursos")return S;const B=(R=S.cursos)!=null&&R.includes(E)?S.cursos.filter(P=>P!==E):[...S.cursos||[],E];return{...S,cursos:B}})},x=async E=>{if(E.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await qXe(S),await A(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),i("Error al publicar el anuncio en la nube.")}},v=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await XXe(E),await A()}catch(S){console.error("Error al eliminar anuncio:",S),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const S=t.find(B=>B.id===E);S&&(await WXe(E,{destacado:!S.destacado}),await A())}catch(S){console.error("Error al actualizar anuncio:",S),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=C.useMemo(()=>[...t].sort((E,S)=>E.destacado&&!S.destacado?-1:!E.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=C.useMemo(()=>{const E=e.profile,S=e.curso;return w.filter(B=>{if(E===Yt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==Yt.ESTUDIANTE;const{tipo:R,cursos:P}=B.destinatarios;return R==="Todos"||R==="Profesores"&&E===Yt.PROFESORADO||R==="Coordinación TP"&&E===Yt.COORDINACION_TP?!0:R==="Cursos"?E===Yt.ESTUDIANTE?P==null?void 0:P.includes(S||""):!0:!1})},[w,e]),j=E=>e.profile===Yt.ESTUDIANTE?!1:e.profile===Yt.SUBDIRECCION||e.profile===E.profileCreador,k=()=>e.profile===Yt.SUBDIRECCION||e.profile===Yt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Yt.ESTUDIANTE?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),o.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:I})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),o.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:I})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),o.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>m(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),o.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&o.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:_s.map(E=>{var S;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),o.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),o.jsx("div",{className:"pt-2 text-right",children:o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,S)=>{const B=Oq[S%Oq.length];return o.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:o.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),o.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),o.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&o.jsx("div",{className:"font-sans text-sm mb-4",children:o.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),o.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:E.autor}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),o.jsxs("div",{className:"flex items-center",children:[k()&&o.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:o.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),j(E)&&o.jsx("button",{onClick:()=>v(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},Zle="api_logs",JXe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await hn(vt(ft,Zle),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},ZXe=e=>{const t=$t(vt(ft,Zle),pr("timestamp","desc"));return fr(t,n=>{const a=n.docs.map(s=>{var l,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(l=i.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},T1=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}JXe(e,t)},xM="actas_de_reunion",eYe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},tYe=e=>{const t=$t(vt(ft,xM),pr("fechaCreacion","desc"));return fr(t,n=>{const a=n.docs.map(s=>eYe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},rYe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await hn(vt(ft,xM),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},nYe=async e=>{try{const t=sr(ft,xM,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},ece=window.SpeechRecognition||window.webkitSpeechRecognition,Dq=!!ece,aYe=({isListening:e})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),sYe=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,i]=C.useState({tipoReunion:vB[0],asistentes:"",textoReunion:""}),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[A,h]=C.useState(!0),[m,g]=C.useState(null),x=C.useRef(null);C.useEffect(()=>{h(!0);const E=tYe(S=>{r(S),!n&&S.length>0&&a(S[0]),h(!1)});return()=>E()},[n]);const v=E=>{const{name:S,value:B}=E.target;i(R=>({...R,[S]:B}))},y=C.useCallback(()=>{var E;if(!Dq){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(E=x.current)==null||E.stop():(x.current=new ece,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=S=>{let B="";for(let R=S.resultIndex;R<S.results.length;++R)S.results[R].isFinal&&(B+=S.results[R][0].transcript+". ");i(R=>({...R,textoReunion:R.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=S=>{console.error("Speech recognition error",S.error),g(`Error de reconocimiento: ${S.error}`),c(!1)},x.current.start())},[l]),w=async E=>{E.preventDefault();const{tipoReunion:S,asistentes:B,textoReunion:R}=s;if(!S||!B.trim()||!R.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{T1("Generador de Actas");const P="",L=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${R}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,K=(await(await L.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(K),Z={fechaCreacion:new Date().toISOString(),...s,...X},G=await rYe(Z,e);i({tipoReunion:vB[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await nYe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},j=E=>{a(E)},k=E=>E.temas||E.acuerdos||E.plazos||E.responsables?o.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,R)=>o.jsx("li",{children:B},R))})]}),E.acuerdos&&E.acuerdos.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,R)=>o.jsx("li",{children:B},R))})]}),E.plazos&&E.plazos.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,R)=>o.jsx("li",{children:B},R))})]}),E.responsables&&E.responsables.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,R)=>o.jsx("li",{children:B},R))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A?o.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[o.jsxs("div",{className:"md:col-span-1 space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),o.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),o.jsx("div",{className:"ml-3",children:o.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",o.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),o.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:I,children:vB.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),o.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),o.jsxs("div",{className:"relative",children:[o.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),Dq&&o.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:o.jsx(aYe,{isListening:l})})]})]}),m&&o.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),o.jsx("div",{className:"pt-2 text-right",children:o.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),o.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>o.jsxs("button",{onClick:()=>j(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),o.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?o.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),o.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[o.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),o.jsx("h2",{children:"Asistentes"}),o.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,S)=>E.trim()&&o.jsx("li",{children:E.trim()},S))}),k(n),o.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:o.jsx("p",{children:n.textoReunion})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[o.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var nl=Uint8Array,Vc=Uint16Array,vM=Int32Array,Zk=new nl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ej=new nl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PO=new nl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tce=function(e,t){for(var r=new Vc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new vM(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},rce=tce(Zk,2),nce=rce.b,RO=rce.r;nce[28]=258,RO[258]=28;var ace=tce(ej,0),iYe=ace.b,Pq=ace.r,LO=new Vc(32768);for(var Qa=0;Qa<32768;++Qa){var P0=(Qa&43690)>>1|(Qa&21845)<<1;P0=(P0&52428)>>2|(P0&13107)<<2,P0=(P0&61680)>>4|(P0&3855)<<4,LO[Qa]=((P0&65280)>>8|(P0&255)<<8)>>1}var rf=function(e,t,r){for(var n=e.length,a=0,s=new Vc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Vc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Vc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],A=i[e[a]-1]++<<d,h=A|(1<<d)-1;A<=h;++A)l[LO[A]>>c]=u}else for(l=new Vc(n),a=0;a<n;++a)e[a]&&(l[a]=LO[i[e[a]-1]++]>>15-e[a]);return l},Pm=new nl(288);for(var Qa=0;Qa<144;++Qa)Pm[Qa]=8;for(var Qa=144;Qa<256;++Qa)Pm[Qa]=9;for(var Qa=256;Qa<280;++Qa)Pm[Qa]=7;for(var Qa=280;Qa<288;++Qa)Pm[Qa]=8;var T2=new nl(32);for(var Qa=0;Qa<32;++Qa)T2[Qa]=5;var oYe=rf(Pm,9,0),lYe=rf(Pm,9,1),cYe=rf(T2,5,0),uYe=rf(T2,5,1),BI=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ed=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},TI=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},bM=function(e){return(e+7)/8|0},sce=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new nl(e.subarray(t,r))},dYe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_d=function(e,t,r){var n=new Error(t||dYe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,_d),!r)throw n;return n},AYe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new nl(0);var i=!r,l=i||t.i!=2,c=t.i;i&&(r=new nl(a*3));var u=function(ke){var ae=r.length;if(ke>ae){var Ne=new nl(Math.max(ae*2,ke));Ne.set(r),r=Ne}},d=t.f||0,A=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=Ed(e,A,1);var w=Ed(e,A+1,3);if(A+=3,w)if(w==1)m=lYe,g=uYe,x=9,v=5;else if(w==2){var I=Ed(e,A,31)+257,E=Ed(e,A+10,15)+4,S=I+Ed(e,A+5,31)+1;A+=14;for(var B=new nl(S),R=new nl(19),P=0;P<E;++P)R[PO[P]]=Ed(e,A+P*3,7);A+=E*3;for(var F=BI(R),L=(1<<F)-1,M=rf(R,F,1),P=0;P<S;){var ee=M[Ed(e,A,L)];A+=ee&15;var _=ee>>4;if(_<16)B[P++]=_;else{var V=0,q=0;for(_==16?(q=3+Ed(e,A,3),A+=2,V=B[P-1]):_==17?(q=3+Ed(e,A,7),A+=3):_==18&&(q=11+Ed(e,A,127),A+=7);q--;)B[P++]=V}}var K=B.subarray(0,I),X=B.subarray(I);x=BI(K),v=BI(X),m=rf(K,x,1),g=rf(X,v,1)}else _d(1);else{var _=bM(A)+4,j=e[_-4]|e[_-3]<<8,k=_+j;if(k>a){c&&_d(0);break}l&&u(h+j),r.set(e.subarray(_,k),h),t.b=h+=j,t.p=A=k*8,t.f=d;continue}if(A>y){c&&_d(0);break}}l&&u(h+131072);for(var Z=(1<<x)-1,G=(1<<v)-1,D=A;;D=A){var V=m[TI(e,A)&Z],U=V>>4;if(A+=V&15,A>y){c&&_d(0);break}if(V||_d(2),U<256)r[h++]=U;else if(U==256){D=A,m=null;break}else{var z=U-254;if(U>264){var P=U-257,J=Zk[P];z=Ed(e,A,(1<<J)-1)+nce[P],A+=J}var re=g[TI(e,A)&G],oe=re>>4;re||_d(3),A+=re&15;var X=iYe[oe];if(oe>3){var J=ej[oe];X+=TI(e,A)&(1<<J)-1,A+=J}if(A>y){c&&_d(0);break}l&&u(h+131072);var se=h+z;if(h<X){var le=s-X,ue=Math.min(X,se);for(le+h<0&&_d(3);h<ue;++h)r[h]=n[le+h]}for(;h<se;++h)r[h]=r[h-X]}}t.l=m,t.p=D,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&i?sce(r,0,h):r.subarray(0,h)},$f=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Cy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},II=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:oce,l:0};if(a==1){var i=new nl(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(k,I){return k.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,A=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[A].f?u++:A++],c=r[u!=d&&r[u].f<r[A].f?u++:A++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new Vc(h+1),g=MO(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(I,E){return m[E.s]-m[I.s]||I.f-E.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var _=s[n].s;m[_]<t?x-=1<<t-m[_]++-1:++n}for(;n>=0&&x;--n){var j=s[n].s;m[j]==t&&(--m[j],++x)}g=t}return{t:new nl(m),l:g}},MO=function(e,t,r){return e.s==-1?Math.max(MO(e.l,t,r+1),MO(e.r,t,r+1)):t[e.s]=r},Rq=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Vc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Ny=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},ice=function(e,t,r){var n=r.length,a=bM(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},Lq=function(e,t,r,n,a,s,i,l,c,u,d){$f(t,d++,r),++a[256];for(var A=II(a,15),h=A.t,m=A.l,g=II(s,15),x=g.t,v=g.l,y=Rq(h),w=y.c,_=y.n,j=Rq(x),k=j.c,I=j.n,E=new Vc(19),S=0;S<w.length;++S)++E[w[S]&31];for(var S=0;S<k.length;++S)++E[k[S]&31];for(var B=II(E,7),R=B.t,P=B.l,F=19;F>4&&!R[PO[F-1]];--F);var L=u+5<<3,M=Ny(a,Pm)+Ny(s,T2)+i,ee=Ny(a,h)+Ny(s,x)+i+14+3*F+Ny(E,R)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&L<=M&&L<=ee)return ice(t,d,e.subarray(c,c+u));var V,q,K,X;if($f(t,d,1+(ee<M)),d+=2,ee<M){V=rf(h,m,0),q=h,K=rf(x,v,0),X=x;var Z=rf(R,P,0);$f(t,d,_-257),$f(t,d+5,I-1),$f(t,d+10,F-4),d+=14;for(var S=0;S<F;++S)$f(t,d+3*S,R[PO[S]]);d+=3*F;for(var G=[w,k],D=0;D<2;++D)for(var U=G[D],S=0;S<U.length;++S){var z=U[S]&31;$f(t,d,Z[z]),d+=R[z],z>15&&($f(t,d,U[S]>>5&127),d+=U[S]>>12)}}else V=oYe,q=Pm,K=cYe,X=T2;for(var S=0;S<l;++S){var J=n[S];if(J>255){var z=J>>18&31;Cy(t,d,V[z+257]),d+=q[z+257],z>7&&($f(t,d,J>>23&31),d+=Zk[z]);var re=J&31;Cy(t,d,K[re]),d+=X[re],re>3&&(Cy(t,d,J>>5&8191),d+=ej[re])}else Cy(t,d,V[J]),d+=q[J]}return Cy(t,d,V[256]),d+q[256]},fYe=new vM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oce=new nl(0),hYe=function(e,t,r,n,a,s){var i=s.z||e.length,l=new nl(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var A=fYe[t-1],h=A>>13,m=A&8191,g=(1<<r)-1,x=s.p||new Vc(32768),v=s.h||new Vc(g+1),y=Math.ceil(r/3),w=2*y,_=function(je){return(e[je]^e[je+1]<<y^e[je+2]<<w)&g},j=new vM(25e3),k=new Vc(288),I=new Vc(32),E=0,S=0,B=s.i||0,R=0,P=s.w||0,F=0;B+2<i;++B){var L=_(B),M=B&32767,ee=v[L];if(x[M]=ee,v[L]=M,P<=B){var V=i-B;if((E>7e3||R>24576)&&(V>423||!u)){d=Lq(e,c,0,j,k,I,S,R,F,B-F,d),R=E=S=0,F=B;for(var q=0;q<286;++q)k[q]=0;for(var q=0;q<30;++q)I[q]=0}var K=2,X=0,Z=m,G=M-ee&32767;if(V>2&&L==_(B-G))for(var D=Math.min(h,V)-1,U=Math.min(32767,B),z=Math.min(258,V);G<=U&&--Z&&M!=ee;){if(e[B+K]==e[B+K-G]){for(var J=0;J<z&&e[B+J]==e[B+J-G];++J);if(J>K){if(K=J,X=G,J>D)break;for(var re=Math.min(G,J-2),oe=0,q=0;q<re;++q){var se=B-G+q&32767,le=x[se],ue=se-le&32767;ue>oe&&(oe=ue,ee=se)}}}M=ee,ee=x[M],G+=M-ee&32767}if(X){j[R++]=268435456|RO[K]<<18|Pq[X];var ke=RO[K]&31,ae=Pq[X]&31;S+=Zk[ke]+ej[ae],++k[257+ke],++I[ae],P=B+K,++E}else j[R++]=e[B],++k[e[B]]}}for(B=Math.max(B,P);B<i;++B)j[R++]=e[B],++k[e[B]];d=Lq(e,c,u,j,k,I,S,R,F,B-F,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=B,s.w=P)}else{for(var B=s.w||0;B<i+u;B+=65535){var Ne=B+65535;Ne>=i&&(c[d/8|0]=u,Ne=i),d=ice(c,d+1,e.subarray(B,Ne))}s.i=i}return sce(l,0,n+bM(d)+a)},lce=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},mYe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new nl(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return hYe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},cce=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},pYe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=lce();a.p(t.dictionary),cce(e,2,a.d())}},gYe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&_d(6,"invalid zlib data"),(e[1]>>5&1)==1&&_d(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function UO(e,t){t||(t={});var r=lce();r.p(e);var n=mYe(e,t,t.dictionary?6:2,4);return pYe(n,t),cce(n,n.length-4,r.d()),n}function xYe(e,t){return AYe(e.subarray(gYe(e),-4),{i:2},t,t)}var vYe=typeof TextDecoder<"u"&&new TextDecoder,bYe=0;try{vYe.decode(oce,{stream:!0}),bYe=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function FI(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var Na={log:FI,warn:function(e){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):FI.call(null,arguments))},error:function(e){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):FI(e))}};function OI(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Op(n.response,t,r)},n.onerror=function(){Na.error("could not download file")},n.send()}function Mq(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function SN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Fw,QO,Op=Qr.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qr.URL||Qr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?Mq(a.href)?OI(e,t,r):SN(a,a.target="_blank"):SN(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){SN(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Mq(e))OI(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){SN(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Na.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return OI(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Qr.URL||Qr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function uce(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function DI(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Uo(r,n,a,s,t[0],7,-680876936),s=Uo(s,r,n,a,t[1],12,-389564586),a=Uo(a,s,r,n,t[2],17,606105819),n=Uo(n,a,s,r,t[3],22,-1044525330),r=Uo(r,n,a,s,t[4],7,-176418897),s=Uo(s,r,n,a,t[5],12,1200080426),a=Uo(a,s,r,n,t[6],17,-1473231341),n=Uo(n,a,s,r,t[7],22,-45705983),r=Uo(r,n,a,s,t[8],7,1770035416),s=Uo(s,r,n,a,t[9],12,-1958414417),a=Uo(a,s,r,n,t[10],17,-42063),n=Uo(n,a,s,r,t[11],22,-1990404162),r=Uo(r,n,a,s,t[12],7,1804603682),s=Uo(s,r,n,a,t[13],12,-40341101),a=Uo(a,s,r,n,t[14],17,-1502002290),r=Qo(r,n=Uo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Qo(s,r,n,a,t[6],9,-1069501632),a=Qo(a,s,r,n,t[11],14,643717713),n=Qo(n,a,s,r,t[0],20,-373897302),r=Qo(r,n,a,s,t[5],5,-701558691),s=Qo(s,r,n,a,t[10],9,38016083),a=Qo(a,s,r,n,t[15],14,-660478335),n=Qo(n,a,s,r,t[4],20,-405537848),r=Qo(r,n,a,s,t[9],5,568446438),s=Qo(s,r,n,a,t[14],9,-1019803690),a=Qo(a,s,r,n,t[3],14,-187363961),n=Qo(n,a,s,r,t[8],20,1163531501),r=Qo(r,n,a,s,t[13],5,-1444681467),s=Qo(s,r,n,a,t[2],9,-51403784),a=Qo(a,s,r,n,t[7],14,1735328473),r=Ho(r,n=Qo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Ho(s,r,n,a,t[8],11,-2022574463),a=Ho(a,s,r,n,t[11],16,1839030562),n=Ho(n,a,s,r,t[14],23,-35309556),r=Ho(r,n,a,s,t[1],4,-1530992060),s=Ho(s,r,n,a,t[4],11,1272893353),a=Ho(a,s,r,n,t[7],16,-155497632),n=Ho(n,a,s,r,t[10],23,-1094730640),r=Ho(r,n,a,s,t[13],4,681279174),s=Ho(s,r,n,a,t[0],11,-358537222),a=Ho(a,s,r,n,t[3],16,-722521979),n=Ho(n,a,s,r,t[6],23,76029189),r=Ho(r,n,a,s,t[9],4,-640364487),s=Ho(s,r,n,a,t[12],11,-421815835),a=Ho(a,s,r,n,t[15],16,530742520),r=Vo(r,n=Ho(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Vo(s,r,n,a,t[7],10,1126891415),a=Vo(a,s,r,n,t[14],15,-1416354905),n=Vo(n,a,s,r,t[5],21,-57434055),r=Vo(r,n,a,s,t[12],6,1700485571),s=Vo(s,r,n,a,t[3],10,-1894986606),a=Vo(a,s,r,n,t[10],15,-1051523),n=Vo(n,a,s,r,t[1],21,-2054922799),r=Vo(r,n,a,s,t[8],6,1873313359),s=Vo(s,r,n,a,t[15],10,-30611744),a=Vo(a,s,r,n,t[6],15,-1560198380),n=Vo(n,a,s,r,t[13],21,1309151649),r=Vo(r,n,a,s,t[4],6,-145523070),s=Vo(s,r,n,a,t[11],10,-1120210379),a=Vo(a,s,r,n,t[2],15,718787259),n=Vo(n,a,s,r,t[9],21,-343485551),e[0]=rm(r,e[0]),e[1]=rm(n,e[1]),e[2]=rm(a,e[2]),e[3]=rm(s,e[3])}function tj(e,t,r,n,a,s){return t=rm(rm(t,e),rm(n,s)),rm(t<<a|t>>>32-a,r)}function Uo(e,t,r,n,a,s,i){return tj(t&r|~t&n,e,t,a,s,i)}function Qo(e,t,r,n,a,s,i){return tj(t&n|r&~n,e,t,a,s,i)}function Ho(e,t,r,n,a,s,i){return tj(t^r^n,e,t,a,s,i)}function Vo(e,t,r,n,a,s,i){return tj(r^(t|~n),e,t,a,s,i)}function dce(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)DI(n,yYe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(DI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,DI(n,a),n}function yYe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Fw=Qr.atob.bind(Qr),QO=Qr.btoa.bind(Qr);var Uq="0123456789abcdef".split("");function wYe(e){for(var t="",r=0;r<4;r++)t+=Uq[e>>8*r+4&15]+Uq[e>>8*r&15];return t}function EYe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function HO(e){return dce(e).map(EYe).join("")}var CYe=function(e){for(var t=0;t<e.length;t++)e[t]=wYe(e[t]);return e.join("")}(dce("hello"))!="5d41402abc4b2a76b9719d911017c592";function rm(e,t){if(CYe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function VO(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var A=t.length,h=0,m=0,g="";for(c=0;c<A;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,i=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Qq={print:4,modify:8,copy:16,"annot-forms":32};function hv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(Qq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Qq[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=HO(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=VO(this.encryptionKey,this.padding)}function mv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function Hq(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(l){Qr.console&&Na.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function DS(e){if(!(this instanceof DS))return new DS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Ace(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Mp(e,t,r,n,a){if(!(this instanceof Mp))return new Mp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Ace.call(this,n,a)}function Nv(e,t,r,n,a){if(!(this instanceof Nv))return new Nv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Ace.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=Hq;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(Y){g=Y};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(Y){return v[Y]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function j(){this.saveGraphicsState(),me(new bt(wt,0,0,-wt,0,Hi()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",_=w.ADVANCED}function k(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var I=m.__private__.combineFontStyleAndFontWeight=function(Y,fe){if(Y=="bold"&&fe=="normal"||Y=="bold"&&fe==400||Y=="normal"&&fe=="italic"||Y=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(Y=fe==400||fe==="normal"?Y==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||Y!=="normal"?(fe==700?"bold":fe)+""+Y:"bold"),Y};m.advancedAPI=function(Y){var fe=_===w.COMPAT;return fe&&j.call(this),typeof Y!="function"||(Y(this),fe&&k.call(this)),this},m.compatAPI=function(Y){var fe=_===w.ADVANCED;return fe&&k.call(this),typeof Y!="function"||(Y(this),fe&&j.call(this)),this},m.isAdvancedAPI=function(){return _===w.ADVANCED};var E,S=function(Y){if(_!==w.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(Y,fe){var De=t||fe;if(isNaN(Y)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(De).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof c=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,c)}:c==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,16)};var R=m.f2=m.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return B(Y,2)},P=m.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return B(Y,3)},F=m.scale=m.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?Y*wt:_===w.ADVANCED?Y:void 0},L=function(Y){return _===w.COMPAT?Hi()-Y:_===w.ADVANCED?Y:void 0},M=function(Y){return F(L(Y))};m.__private__.setPrecision=m.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(t=parseInt(Y,10))};var ee,V="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return V},K=m.__private__.setFileId=function(Y){return V=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new hv(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(Y){return K(Y),this},m.getFileId=function(){return q()};var X=m.__private__.convertDateToPDFDate=function(Y){var fe=Y.getTimezoneOffset(),De=fe<0?"+":"-",Me=Math.floor(Math.abs(fe/60)),Ke=Math.abs(fe%60),yt=[De,z(Me),"'",z(Ke),"'"].join("");return["D:",Y.getFullYear(),z(Y.getMonth()+1),z(Y.getDate()),z(Y.getHours()),z(Y.getMinutes()),z(Y.getSeconds()),yt].join("")},Z=m.__private__.convertPDFDateToDate=function(Y){var fe=parseInt(Y.substr(2,4),10),De=parseInt(Y.substr(6,2),10)-1,Me=parseInt(Y.substr(8,2),10),Ke=parseInt(Y.substr(10,2),10),yt=parseInt(Y.substr(12,2),10),Lt=parseInt(Y.substr(14,2),10);return new Date(fe,De,Me,Ke,yt,Lt,0)},G=m.__private__.setCreationDate=function(Y){var fe;if(Y===void 0&&(Y=new Date),Y instanceof Date)fe=X(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=Y}return ee=fe},D=m.__private__.getCreationDate=function(Y){var fe=ee;return Y==="jsDate"&&(fe=Z(ee)),fe};m.setCreationDate=function(Y){return G(Y),this},m.getCreationDate=function(Y){return D(Y)};var U,z=m.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},J=m.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},re=0,oe=[],se=[],le=0,ue=[],ke=[],ae=!1,Ne=se,je=function(){re=0,le=0,se=[],oe=[],ue=[],Ce=qr(),we=qr()};m.__private__.setCustomOutputDestination=function(Y){ae=!0,Ne=Y};var _e=function(Y){ae||(Ne=Y)};m.__private__.resetCustomOutputDestination=function(){ae=!1,Ne=se};var me=m.__private__.out=function(Y){return Y=Y.toString(),le+=Y.length+1,Ne.push(Y),Ne},Te=m.__private__.write=function(Y){return me(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},Le=m.__private__.getArrayBuffer=function(Y){for(var fe=Y.length,De=new ArrayBuffer(fe),Me=new Uint8Array(De);fe--;)Me[fe]=Y.charCodeAt(fe);return De},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var xe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(Y){return xe=_===w.ADVANCED?Y/wt:Y,this};var Oe,Re=m.__private__.getFontSize=m.getFontSize=function(){return _===w.COMPAT?xe:xe*wt},$e=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(Y){return $e=Y,this},m.__private__.getR2L=m.getR2L=function(){return $e};var et,ct=m.__private__.setZoomMode=function(Y){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Oe=Y;else if(isNaN(Y)){if(fe.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Oe=Y}else Oe=parseInt(Y,10)};m.__private__.getZoomMode=function(){return Oe};var gt,It=m.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');et=Y};m.__private__.getPageMode=function(){return et};var Mt=m.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');gt=Y};m.__private__.getLayoutMode=function(){return gt},m.__private__.setDisplayMode=m.setDisplayMode=function(Y,fe,De){return ct(Y),Mt(fe),It(De),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(Y){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[Y]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(Y){for(var fe in Pt)Pt.hasOwnProperty(fe)&&Y[fe]&&(Pt[fe]=Y[fe]);return this},m.__private__.setDocumentProperty=function(Y,fe){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[Y]=fe};var Qt,wt,Br,tr,an,Sr={},$r={},In=[],Pr={},fs={},mn={},la={},ja=null,rn=0,gr=[],Ze=new Hq(m),mt=e.hotfixes||[],Je={},xt={},Et=[],bt=function Y(fe,De,Me,Ke,yt,Lt){if(!(this instanceof Y))return new Y(fe,De,Me,Ke,yt,Lt);isNaN(fe)&&(fe=1),isNaN(De)&&(De=0),isNaN(Me)&&(Me=0),isNaN(Ke)&&(Ke=1),isNaN(yt)&&(yt=0),isNaN(Lt)&&(Lt=0),this._matrix=[fe,De,Me,Ke,yt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(Y)},bt.prototype.multiply=function(Y){var fe=Y.sx*this.sx+Y.shy*this.shx,De=Y.sx*this.shy+Y.shy*this.sy,Me=Y.shx*this.sx+Y.sy*this.shx,Ke=Y.shx*this.shy+Y.sy*this.sy,yt=Y.tx*this.sx+Y.ty*this.shx+this.tx,Lt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new bt(fe,De,Me,Ke,yt,Lt)},bt.prototype.decompose=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=Math.sqrt(Y*Y+fe*fe),Zt=(Y/=Lt)*De+(fe/=Lt)*Me;De-=Y*Zt,Me-=fe*Zt;var O=Math.sqrt(De*De+Me*Me);return Zt/=O,Y*(Me/=O)<fe*(De/=O)&&(Y=-Y,fe=-fe,Zt=-Zt,Lt=-Lt),{scale:new bt(Lt,0,0,O,0,0),translate:new bt(1,0,0,1,Ke,yt),rotate:new bt(Y,fe,-fe,Y,0,0),skew:new bt(1,0,Zt,1,0,0)}},bt.prototype.toString=function(Y){return this.join(" ")},bt.prototype.inversed=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=1/(Y*Me-fe*De),Zt=Me*Lt,O=-fe*Lt,ne=-De*Lt,ce=Y*Lt;return new bt(Zt,O,ne,ce,-Zt*Ke-ne*yt,-O*Ke-ce*yt)},bt.prototype.applyToPoint=function(Y){var fe=Y.x*this.sx+Y.y*this.shx+this.tx,De=Y.x*this.shy+Y.y*this.sy+this.ty;return new nd(fe,De)},bt.prototype.applyToRectangle=function(Y){var fe=this.applyToPoint(Y),De=this.applyToPoint(new nd(Y.x+Y.w,Y.y+Y.h));return new aA(fe.x,fe.y,De.x-fe.x,De.y-fe.y)},bt.prototype.clone=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty;return new bt(Y,fe,De,Me,Ke,yt)},m.Matrix=bt;var nr=m.matrixMult=function(Y,fe){return fe.multiply(Y)},xr=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=xr;var Wr=function(Y,fe){if(!fs[Y]){var De=(fe instanceof Mp?"Sh":"P")+(Object.keys(Pr).length+1).toString(10);fe.id=De,fs[Y]=De,Pr[De]=fe,Ze.publish("addPattern",fe)}};m.ShadingPattern=Mp,m.TilingPattern=Nv,m.addShadingPattern=function(Y,fe){return S("addShadingPattern()"),Wr(Y,fe),this},m.beginTilingPattern=function(Y){S("beginTilingPattern()"),cu(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},m.endTilingPattern=function(Y,fe){S("endTilingPattern()"),fe.stream=ke[U].join(`
`),Wr(Y,fe),Ze.publish("endTilingPattern",fe),Et.pop().restore()};var Zr=m.__private__.newObject=function(){var Y=qr();return he(Y,!0),Y},qr=m.__private__.newObjectDeferred=function(){return re++,oe[re]=function(){return le},re},he=function(Y,fe){return fe=typeof fe=="boolean"&&fe,oe[Y]=le,fe&&me(Y+" 0 obj"),Y},Ie=m.__private__.newAdditionalObject=function(){var Y={objId:qr(),content:""};return ue.push(Y),Y},Ce=qr(),we=qr(),Se=m.__private__.decodeColorString=function(Y){var fe=Y.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var De=parseFloat(fe[0]);fe=[De,De,De,"r"]}for(var Me="#",Ke=0;Ke<3;Ke++)Me+=("0"+Math.floor(255*parseFloat(fe[Ke])).toString(16)).slice(-2);return Me},Fe=m.__private__.encodeColorString=function(Y){var fe;typeof Y=="string"&&(Y={ch1:Y});var De=Y.ch1,Me=Y.ch2,Ke=Y.ch3,yt=Y.ch4,Lt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Zt=new uce(De);if(Zt.ok)De=Zt.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var O=parseInt(De.substr(1),16);De=O>>16&255,Me=O>>8&255,Ke=255&O}if(Me===void 0||yt===void 0&&De===Me&&Me===Ke)if(typeof De=="string")fe=De+" "+Lt[0];else switch(Y.precision){case 2:fe=R(De/255)+" "+Lt[0];break;case 3:default:fe=P(De/255)+" "+Lt[0]}else if(yt===void 0||ga(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return fe=["1.","1.","1.",Lt[1]].join(" ");if(typeof De=="string")fe=[De,Me,Ke,Lt[1]].join(" ");else switch(Y.precision){case 2:fe=[R(De/255),R(Me/255),R(Ke/255),Lt[1]].join(" ");break;default:case 3:fe=[P(De/255),P(Me/255),P(Ke/255),Lt[1]].join(" ")}}else if(typeof De=="string")fe=[De,Me,Ke,yt,Lt[2]].join(" ");else switch(Y.precision){case 2:fe=[R(De),R(Me),R(Ke),R(yt),Lt[2]].join(" ");break;case 3:default:fe=[P(De),P(Me),P(Ke),P(yt),Lt[2]].join(" ")}return fe},Ye=m.__private__.getFilters=function(){return i},dt=m.__private__.putStream=function(Y){var fe=(Y=Y||{}).data||"",De=Y.filters||Ye(),Me=Y.alreadyAppliedFilters||[],Ke=Y.addLength1||!1,yt=fe.length,Lt=Y.objectId,Zt=function(Or){return Or};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ca.encryptor(Lt,0));var O={};De===!0&&(De=["FlateEncode"]);var ne=Y.additionalKeyValues||[],ce=(O=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(fe,De):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(O.data.length!==0&&(ne.push({key:"Length",value:O.data.length}),Ke===!0&&ne.push({key:"Length1",value:yt})),ce.length!=0)if(ce.split("/").length-1==1)ne.push({key:"Filter",value:ce});else{ne.push({key:"Filter",value:"["+ce+"]"});for(var be=0;be<ne.length;be+=1)if(ne[be].key==="DecodeParms"){for(var ze=[],ot=0;ot<O.reverseChain.split("/").length-1;ot+=1)ze.push("null");ze.push(ne[be].value),ne[be].value="["+ze.join(" ")+"]"}}me("<<");for(var Ut=0;Ut<ne.length;Ut++)me("/"+ne[Ut].key+" "+ne[Ut].value);me(">>"),O.data.length!==0&&(me("stream"),me(Zt(O.data)),me("endstream"))},Ge=m.__private__.putPage=function(Y){var fe=Y.number,De=Y.data,Me=Y.objId,Ke=Y.contentsObjId;he(Me,!0),me("<</Type /Page"),me("/Parent "+Y.rootDictionaryObjId+" 0 R"),me("/Resources "+Y.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(E(Y.mediaBox.bottomLeftX))+" "+parseFloat(E(Y.mediaBox.bottomLeftY))+" "+E(Y.mediaBox.topRightX)+" "+E(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&me("/CropBox ["+E(Y.cropBox.bottomLeftX)+" "+E(Y.cropBox.bottomLeftY)+" "+E(Y.cropBox.topRightX)+" "+E(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&me("/BleedBox ["+E(Y.bleedBox.bottomLeftX)+" "+E(Y.bleedBox.bottomLeftY)+" "+E(Y.bleedBox.topRightX)+" "+E(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&me("/TrimBox ["+E(Y.trimBox.bottomLeftX)+" "+E(Y.trimBox.bottomLeftY)+" "+E(Y.trimBox.topRightX)+" "+E(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&me("/ArtBox ["+E(Y.artBox.bottomLeftX)+" "+E(Y.artBox.bottomLeftY)+" "+E(Y.artBox.topRightX)+" "+E(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&me("/UserUnit "+Y.userUnit),Ze.publish("putPage",{objId:Me,pageContext:gr[fe],pageNumber:fe,page:De}),me("/Contents "+Ke+" 0 R"),me(">>"),me("endobj");var yt=De.join(`
`);return _===w.ADVANCED&&(yt+=`
Q`),he(Ke,!0),dt({data:yt,filters:Ye(),objectId:Ke}),me("endobj"),Me},rt=m.__private__.putPages=function(){var Y,fe,De=[];for(Y=1;Y<=rn;Y++)gr[Y].objId=qr(),gr[Y].contentsObjId=qr();for(Y=1;Y<=rn;Y++)De.push(Ge({number:Y,data:ke[Y],objId:gr[Y].objId,contentsObjId:gr[Y].contentsObjId,mediaBox:gr[Y].mediaBox,cropBox:gr[Y].cropBox,bleedBox:gr[Y].bleedBox,trimBox:gr[Y].trimBox,artBox:gr[Y].artBox,userUnit:gr[Y].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),me("<</Type /Pages");var Me="/Kids [";for(fe=0;fe<rn;fe++)Me+=De[fe]+" 0 R ";me(Me+"]"),me("/Count "+rn),me(">>"),me("endobj"),Ze.publish("postPutPages")},it=function(Y){Ze.publish("putFont",{font:Y,out:me,newObject:Zr,putStream:dt}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=Zr(),me("<<"),me("/Type /Font"),me("/BaseFont /"+mv(Y.postScriptName)),me("/Subtype /Type1"),typeof Y.encoding=="string"&&me("/Encoding /"+Y.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},Ft=function(){for(var Y in Sr)Sr.hasOwnProperty(Y)&&(A===!1||A===!0&&h.hasOwnProperty(Y))&&it(Sr[Y])},zt=function(Y){Y.objectNumber=Zr();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[E(Y.x),E(Y.y),E(Y.x+Y.width),E(Y.y+Y.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var De=Y.pages[1].join(`
`);dt({data:De,additionalKeyValues:fe,objectId:Y.objectNumber}),me("endobj")},Jt=function(){for(var Y in Je)Je.hasOwnProperty(Y)&&zt(Je[Y])},Ht=function(Y,fe){var De,Me=[],Ke=1/(fe-1);for(De=0;De<1;De+=Ke)Me.push(De);if(Me.push(1),Y[0].offset!=0){var yt={offset:0,color:Y[0].color};Y.unshift(yt)}if(Y[Y.length-1].offset!=1){var Lt={offset:1,color:Y[Y.length-1].color};Y.push(Lt)}for(var Zt="",O=0,ne=0;ne<Me.length;ne++){for(De=Me[ne];De>Y[O+1].offset;)O++;var ce=Y[O].offset,be=(De-ce)/(Y[O+1].offset-ce),ze=Y[O].color,ot=Y[O+1].color;Zt+=J(Math.round((1-be)*ze[0]+be*ot[0]).toString(16))+J(Math.round((1-be)*ze[1]+be*ot[1]).toString(16))+J(Math.round((1-be)*ze[2]+be*ot[2]).toString(16))}return Zt.trim()},Gt=function(Y,fe){fe||(fe=21);var De=Zr(),Me=Ht(Y.colors,fe),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+fe+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Me,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),me("endobj"),Y.objectNumber=Zr(),me("<< /ShadingType "+Y.type),me("/ColorSpace /DeviceRGB");var yt="/Coords ["+E(parseFloat(Y.coords[0]))+" "+E(parseFloat(Y.coords[1]))+" ";Y.type===2?yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3])):yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3]))+" "+E(parseFloat(Y.coords[4]))+" "+E(parseFloat(Y.coords[5])),me(yt+="]"),Y.matrix&&me("/Matrix ["+Y.matrix.toString()+"]"),me("/Function "+De+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},kr=function(Y,fe){var De=qr(),Me=Zr();fe.push({resourcesOid:De,objectOid:Me}),Y.objectNumber=Me;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+Y.boundingBox.map(E).join(" ")+"]"}),Ke.push({key:"XStep",value:E(Y.xStep)}),Ke.push({key:"YStep",value:E(Y.yStep)}),Ke.push({key:"Resources",value:De+" 0 R"}),Y.matrix&&Ke.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),dt({data:Y.stream,additionalKeyValues:Ke,objectId:Y.objectNumber}),me("endobj")},sn=function(Y){var fe;for(fe in Pr)Pr.hasOwnProperty(fe)&&(Pr[fe]instanceof Mp?Gt(Pr[fe]):Pr[fe]instanceof Nv&&kr(Pr[fe],Y))},on=function(Y){for(var fe in Y.objectNumber=Zr(),me("<<"),Y)switch(fe){case"opacity":me("/ca "+R(Y[fe]));break;case"stroke-opacity":me("/CA "+R(Y[fe]))}me(">>"),me("endobj")},An=function(){var Y;for(Y in mn)mn.hasOwnProperty(Y)&&on(mn[Y])},hs=function(){for(var Y in me("/XObject <<"),Je)Je.hasOwnProperty(Y)&&Je[Y].objectNumber>=0&&me("/"+Y+" "+Je[Y].objectNumber+" 0 R");Ze.publish("putXobjectDict"),me(">>")},_o=function(){ca.oid=Zr(),me("<<"),me("/Filter /Standard"),me("/V "+ca.v),me("/R "+ca.r),me("/U <"+ca.toHexString(ca.U)+">"),me("/O <"+ca.toHexString(ca.O)+">"),me("/P "+ca.P),me(">>"),me("endobj")},ms=function(){for(var Y in me("/Font <<"),Sr)Sr.hasOwnProperty(Y)&&(A===!1||A===!0&&h.hasOwnProperty(Y))&&me("/"+Y+" "+Sr[Y].objectNumber+" 0 R");me(">>")},ni=function(){if(Object.keys(Pr).length>0){for(var Y in me("/Shading <<"),Pr)Pr.hasOwnProperty(Y)&&Pr[Y]instanceof Mp&&Pr[Y].objectNumber>=0&&me("/"+Y+" "+Pr[Y].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),me(">>")}},Ps=function(Y){if(Object.keys(Pr).length>0){for(var fe in me("/Pattern <<"),Pr)Pr.hasOwnProperty(fe)&&Pr[fe]instanceof m.TilingPattern&&Pr[fe].objectNumber>=0&&Pr[fe].objectNumber<Y&&me("/"+fe+" "+Pr[fe].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),me(">>")}},wi=function(){if(Object.keys(mn).length>0){var Y;for(Y in me("/ExtGState <<"),mn)mn.hasOwnProperty(Y)&&mn[Y].objectNumber>=0&&me("/"+Y+" "+mn[Y].objectNumber+" 0 R");Ze.publish("putGStateDict"),me(">>")}},xa=function(Y){he(Y.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ms(),ni(),Ps(Y.objectOid),wi(),hs(),me(">>"),me("endobj")},ai=function(){var Y=[];Ft(),An(),Jt(),sn(Y),Ze.publish("putResources"),Y.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources")},Zd=function(){Ze.publish("putAdditionalObjects");for(var Y=0;Y<ue.length;Y++){var fe=ue[Y];he(fe.objId,!0),me(fe.content),me("endobj")}Ze.publish("postPutAdditionalObjects")},Xh=function(Y){$r[Y.fontName]=$r[Y.fontName]||{},$r[Y.fontName][Y.fontStyle]=Y.id},eu=function(Y,fe,De,Me,Ke){var yt={id:"F"+(Object.keys(Sr).length+1).toString(10),postScriptName:Y,fontName:fe,fontStyle:De,encoding:Me,isStandardFont:Ke||!1,metadata:{}};return Ze.publish("addFont",{font:yt,instance:this}),Sr[yt.id]=yt,Xh(yt),yt.id},pf=function(Y){for(var fe=0,De=We.length;fe<De;fe++){var Me=eu.call(this,Y[fe][0],Y[fe][1],Y[fe][2],We[fe][3],!0);A===!1&&(h[Me]=!0);var Ke=Y[fe][0].split("-");Xh({id:Me,fontName:Ke[0],fontStyle:Ke[1]||""})}Ze.publish("addFonts",{fonts:Sr,dictionary:$r})},Ei=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(Me){var fe=Me.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var De="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Qr.console)throw new Error(De);Qr.console.error(De,Me),Qr.alert&&alert(De)}},Y.foo.bar=Y,Y.foo},eA=function(Y,fe){var De,Me,Ke,yt,Lt,Zt,O,ne,ce;if(Ke=(fe=fe||{}).sourceEncoding||"Unicode",Lt=fe.outputEncoding,(fe.autoencode||Lt)&&Sr[Qt].metadata&&Sr[Qt].metadata[Ke]&&Sr[Qt].metadata[Ke].encoding&&(yt=Sr[Qt].metadata[Ke].encoding,!Lt&&Sr[Qt].encoding&&(Lt=Sr[Qt].encoding),!Lt&&yt.codePages&&(Lt=yt.codePages[0]),typeof Lt=="string"&&(Lt=yt[Lt]),Lt)){for(O=!1,Zt=[],De=0,Me=Y.length;De<Me;De++)(ne=Lt[Y.charCodeAt(De)])?Zt.push(String.fromCharCode(ne)):Zt.push(Y[De]),Zt[De].charCodeAt(0)>>8&&(O=!0);Y=Zt.join("")}for(De=Y.length;O===void 0&&De!==0;)Y.charCodeAt(De-1)>>8&&(O=!0),De--;if(!O)return Y;for(Zt=fe.noBOM?[]:[254,255],De=0,Me=Y.length;De<Me;De++){if((ce=(ne=Y.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(ce),Zt.push(ne-(ce<<8))}return String.fromCharCode.apply(void 0,Zt)},Fn=m.__private__.pdfEscape=m.pdfEscape=function(Y,fe){return eA(Y,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ci=m.__private__.beginPage=function(Y){ke[++rn]=[],gr[rn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Tl(rn),_e(ke[U])},tu=function(Y,fe){var De,Me,Ke;switch(r=fe||r,typeof Y=="string"&&(De=y(Y.toLowerCase()),Array.isArray(De)&&(Me=De[0],Ke=De[1])),Array.isArray(Y)&&(Me=Y[0]*wt,Ke=Y[1]*wt),isNaN(Me)&&(Me=a[0],Ke=a[1]),(Me>14400||Ke>14400)&&(Na.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ke=Math.min(14400,Ke)),a=[Me,Ke],r.substr(0,1)){case"l":Ke>Me&&(a=[Ke,Me]);break;case"p":Me>Ke&&(a=[Ke,Me])}Ci(a),bf(su),me(Ni),yf!==0&&me(yf+" J"),rd!==0&&me(rd+" j"),Ze.publish("addPage",{pageNumber:rn})},ru=function(Y){Y>0&&Y<=rn&&(ke.splice(Y,1),gr.splice(Y,1),rn--,U>rn&&(U=rn),this.setPage(U))},Tl=function(Y){Y>0&&Y<=rn&&(U=Y)},Vn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ke.length-1},nu=function(Y,fe,De){var Me,Ke=void 0;return De=De||{},Y=Y!==void 0?Y:Sr[Qt].fontName,fe=fe!==void 0?fe:Sr[Qt].fontStyle,Me=Y.toLowerCase(),$r[Me]!==void 0&&$r[Me][fe]!==void 0?Ke=$r[Me][fe]:$r[Y]!==void 0&&$r[Y][fe]!==void 0?Ke=$r[Y][fe]:De.disableWarning===!1&&Na.warn("Unable to look up font label for font '"+Y+"', '"+fe+"'. Refer to getFontList() for available fonts."),Ke||De.noFallback||(Ke=$r.times[fe])==null&&(Ke=$r.times.normal),Ke},So=m.__private__.putInfo=function(){var Y=Zr(),fe=function(Me){return Me};for(var De in d!==null&&(fe=ca.encryptor(Y,0)),me("<<"),me("/Producer ("+Fn(fe("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(De)&&Pt[De]&&me("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Fn(fe(Pt[De]))+")");me("/CreationDate ("+Fn(fe(ee))+")"),me(">>"),me("endobj")},Ac=m.__private__.putCatalog=function(Y){var fe=(Y=Y||{}).rootDictionaryObjId||Ce;switch(Zr(),me("<<"),me("/Type /Catalog"),me("/Pages "+fe+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Oe;De.substr(De.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&me("/OpenAction [3 0 R /XYZ null null "+R(Oe)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}et&&me("/PageMode /"+et),Ze.publish("putCatalog"),me(">>"),me("endobj")},Yh=m.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(re+1)),me("/Root "+re+" 0 R"),me("/Info "+(re-1)+" 0 R"),d!==null&&me("/Encrypt "+ca.oid+" 0 R"),me("/ID [ <"+V+"> <"+V+"> ]"),me(">>")},gf=m.__private__.putHeader=function(){me("%PDF-"+g),me("%ºß¬à")},xf=m.__private__.putXRef=function(){var Y="0000000000";me("xref"),me("0 "+(re+1)),me("0000000000 65535 f ");for(var fe=1;fe<=re;fe++)typeof oe[fe]=="function"?me((Y+oe[fe]()).slice(-10)+" 00000 n "):oe[fe]!==void 0?me((Y+oe[fe]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},fc=m.__private__.buildDocument=function(){je(),_e(se),Ze.publish("buildDocument"),gf(),rt(),Zd(),ai(),d!==null&&_o(),So(),Ac();var Y=le;return xf(),Yh(),me("startxref"),me(""+Y),me("%%EOF"),_e(ke[U]),se.join(`
`)},tA=m.__private__.getBlob=function(Y){return new Blob([Le(Y)],{type:"application/pdf"})},hc=m.output=m.__private__.output=Ei(function(Y,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",Y){case void 0:return fc();case"save":m.save(fe.filename);break;case"arraybuffer":return Le(fc());case"blob":return tA(fc());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(tA(fc()))||void 0;Na.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Me=fc();try{De=QO(Me)}catch{De=QO(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+fe.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(Ke=fe.pdfObjectUrl,yt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",Zt=Qr.open();return Zt!==null&&Zt.document.write(Lt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',ne=Qr.open();if(ne!==null){ne.document.write(O);var ce=this;ne.document.documentElement.querySelector("#pdfViewer").onload=function(){ne.document.title=fe.filename,ne.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ce.output("bloburl"))}}return ne}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',ze=Qr.open();if(ze!==null&&(ze.document.write(be),ze.document.title=fe.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",fe);default:return null}}),Il=function(Y){return Array.isArray(mt)===!0&&mt.indexOf(Y)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Il("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var ca=null;G(),K();var mc=function(Y){return d!==null?ca.encryptor(Y,0):function(fe){return fe}},Fl=m.__private__.getPageInfo=m.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[Y].objId,pageNumber:Y,pageContext:gr[Y]}},Fr=m.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in gr)if(gr[fe].objId===Y)break;return Fl(fe)},Ol=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gr[U].objId,pageNumber:U,pageContext:gr[U]}};m.addPage=function(){return tu.apply(this,arguments),this},m.setPage=function(){return Tl.apply(this,arguments),_e.call(this,ke[U]),this},m.insertPage=function(Y){return this.addPage(),this.movePage(U,Y),this},m.movePage=function(Y,fe){var De,Me;if(Y>fe){De=ke[Y],Me=gr[Y];for(var Ke=Y;Ke>fe;Ke--)ke[Ke]=ke[Ke-1],gr[Ke]=gr[Ke-1];ke[fe]=De,gr[fe]=Me,this.setPage(fe)}else if(Y<fe){De=ke[Y],Me=gr[Y];for(var yt=Y;yt<fe;yt++)ke[yt]=ke[yt+1],gr[yt]=gr[yt+1];ke[fe]=De,gr[fe]=Me,this.setPage(fe)}return this},m.deletePage=function(){return ru.apply(this,arguments),this},m.__private__.text=m.text=function(Y,fe,De,Me,Ke){var yt,Lt,Zt,O,ne,ce,be,ze,ot,Ut=(Me=Me||{}).scope||this;if(typeof Y=="number"&&typeof fe=="number"&&(typeof De=="string"||Array.isArray(De))){var Or=De;De=fe,fe=Y,Y=Or}if(arguments[3]instanceof bt?(S("The transform parameter of text() with a Matrix value"),ot=Ke):(Zt=arguments[4],O=arguments[5],ga(be=arguments[3])==="object"&&be!==null||(typeof Zt=="string"&&(O=Zt,Zt=null),typeof be=="string"&&(O=be,be=null),typeof be=="number"&&(Zt=be,be=null),Me={flags:be,angle:Zt,align:O})),isNaN(fe)||isNaN(De)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Ut;var yn="",Xr=!1,zn=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:bn,ta=Ut.internal.scaleFactor;function Ll(pn){return pn=pn.split("	").join(Array(Me.TabLen||9).join(" ")),Fn(pn,be)}function es(pn){for(var gn,va=pn.concat(),ts=[],Ul=va.length;Ul--;)typeof(gn=va.shift())=="string"?ts.push(gn):Array.isArray(pn)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?ts.push(gn[0]):ts.push([gn[0],gn[1],gn[2]]);return ts}function To(pn,gn){var va;if(typeof pn=="string")va=gn(pn)[0];else if(Array.isArray(pn)){for(var ts,Ul,mA=pn.concat(),pA=[],ld=mA.length;ld--;)typeof(ts=mA.shift())=="string"?pA.push(gn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Ul=gn(ts[0],ts[1],ts[2]),pA.push([Ul[0],Ul[1],Ul[2]]));va=pA}return va}var du=!1,iA=!0;if(typeof Y=="string")du=!0;else if(Array.isArray(Y)){var t0=Y.concat();Lt=[];for(var wf,Rs=t0.length;Rs--;)(typeof(wf=t0.shift())!="string"||Array.isArray(wf)&&typeof wf[0]!="string")&&(iA=!1);du=iA}if(du===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var oA=xe/Ut.internal.scaleFactor,Ef=oA*(zn-1);switch(Me.baseline){case"bottom":De-=Ef;break;case"top":De+=oA-Ef;break;case"hanging":De+=oA-2*Ef;break;case"middle":De+=oA/2-Ef}if((ce=Me.maxWidth||0)>0&&(typeof Y=="string"?Y=Ut.splitTextToSize(Y,ce):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(pn,gn){return pn.concat(Ut.splitTextToSize(gn,ce))},[]))),yt={text:Y,x:fe,y:De,options:Me,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Sr,activeFontSize:xe}},Ze.publish("preProcessText",yt),Y=yt.text,Zt=(Me=yt.options).angle,!(ot instanceof bt)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Me.rotationDirection===0&&(Zt=-Zt),_===w.ADVANCED&&(Zt=-Zt);var Cf=Math.cos(Zt),r0=Math.sin(Zt);ot=new bt(Cf,r0,-r0,Cf,0,0)}else Zt&&Zt instanceof bt&&(ot=Zt);_!==w.ADVANCED||ot||(ot=xr),(ne=Me.charSpace||td)!==void 0&&(yn+=E(F(ne))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Me.horizontalScale)!==void 0&&(yn+=E(100*ze)+` Tz
`),Me.lang;var Io=-1,Nb=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,rp=Ut.internal.getCurrentPageInfo().pageContext;switch(Nb){case 0:case!1:case"fill":Io=0;break;case 1:case!0:case"stroke":Io=1;break;case 2:case"fillThenStroke":Io=2;break;case 3:case"invisible":Io=3;break;case 4:case"fillAndAddForClipping":Io=4;break;case 5:case"strokeAndAddPathForClipping":Io=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Io=6;break;case 7:case"addToPathForClipping":Io=7}var ix=rp.usedRenderingMode!==void 0?rp.usedRenderingMode:-1;Io!==-1?yn+=Io+` Tr
`:ix!==-1&&(yn+=`0 Tr
`),Io!==-1&&(rp.usedRenderingMode=Io),O=Me.align||"left";var Ml,si=xe*zn,lA=Ut.internal.pageSize.getWidth(),np=Sr[Qt];ne=Me.charSpace||td,ce=Me.maxWidth||0,be=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var id=[],cA=function(pn){return Ut.getStringUnitWidth(pn,{font:np,charSpace:ne,fontSize:xe,doKerning:!1})*xe/ta};if(Object.prototype.toString.call(Y)==="[object Array]"){var lo;Lt=es(Y),O!=="left"&&(Ml=Lt.map(cA));var _i,uA=0;if(O==="right"){fe-=Ml[0],Y=[],Rs=Lt.length;for(var Fo=0;Fo<Rs;Fo++)Fo===0?(_i=Qi(fe),lo=gs(De)):(_i=F(uA-Ml[Fo]),lo=-si),Y.push([Lt[Fo],_i,lo]),uA=Ml[Fo]}else if(O==="center"){fe-=Ml[0]/2,Y=[],Rs=Lt.length;for(var vc=0;vc<Rs;vc++)vc===0?(_i=Qi(fe),lo=gs(De)):(_i=F((uA-Ml[vc])/2),lo=-si),Y.push([Lt[vc],_i,lo]),uA=Ml[vc]}else if(O==="left"){Y=[],Rs=Lt.length;for(var Au=0;Au<Rs;Au++)Y.push(Lt[Au])}else if(O==="justify"&&np.encoding==="Identity-H"){Y=[],Rs=Lt.length,ce=ce!==0?ce:lA;for(var bc=0,Ga=0;Ga<Rs;Ga++)if(lo=Ga===0?gs(De):-si,_i=Ga===0?Qi(fe):bc,Ga<Rs-1){var yc=F((ce-Ml[Ga])/(Lt[Ga].split(" ").length-1)),xs=Lt[Ga].split(" ");Y.push([xs[0]+" ",_i,lo]),bc=0;for(var Oo=1;Oo<xs.length;Oo++){var Nf=(cA(xs[Oo-1]+" "+xs[Oo])-cA(xs[Oo]))*ta+yc;Oo==xs.length-1?Y.push([xs[Oo],Nf,0]):Y.push([xs[Oo]+" ",Nf,0]),bc-=Nf}}else Y.push([Lt[Ga],_i,lo]);Y.push(["",bc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Rs=Lt.length,ce=ce!==0?ce:lA,Ga=0;Ga<Rs;Ga++)lo=Ga===0?gs(De):-si,_i=Ga===0?Qi(fe):0,Ga<Rs-1?id.push(E(F((ce-Ml[Ga])/(Lt[Ga].split(" ").length-1)))):id.push(0),Y.push([Lt[Ga],_i,lo])}}var fu=typeof Me.R2L=="boolean"?Me.R2L:$e;fu===!0&&(Y=To(Y,function(pn,gn,va){return[pn.split("").reverse().join(""),gn,va]})),yt={text:Y,x:fe,y:De,options:Me,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Sr,activeFontSize:xe}},Ze.publish("postProcessText",yt),Y=yt.text,Xr=yt.mutex.isHex||!1;var n0=Sr[Qt].encoding;n0!=="WinAnsiEncoding"&&n0!=="StandardEncoding"||(Y=To(Y,function(pn,gn,va){return[Ll(pn),gn,va]})),Lt=es(Y),Y=[];for(var dA,AA,fA,_f=0,a0=1,hA=Array.isArray(Lt[0])?a0:_f,od="",Sf=function(pn,gn,va){var ts="";return va instanceof bt?(va=typeof Me.angle=="number"?nr(va,new bt(1,0,0,1,pn,gn)):nr(new bt(1,0,0,1,pn,gn),va),_===w.ADVANCED&&(va=nr(new bt(1,0,0,-1,0,0),va)),ts=va.join(" ")+` Tm
`):ts=E(pn)+" "+E(gn)+` Td
`,ts},Ka=0;Ka<Lt.length;Ka++){switch(od="",hA){case a0:fA=(Xr?"<":"(")+Lt[Ka][0]+(Xr?">":")"),dA=parseFloat(Lt[Ka][1]),AA=parseFloat(Lt[Ka][2]);break;case _f:fA=(Xr?"<":"(")+Lt[Ka]+(Xr?">":")"),dA=Qi(fe),AA=gs(De)}id!==void 0&&id[Ka]!==void 0&&(od=id[Ka]+` Tw
`),Ka===0?Y.push(od+Sf(dA,AA,ot)+fA):hA===_f?Y.push(od+fA):hA===a0&&Y.push(od+Sf(dA,AA,ot)+fA)}Y=hA===_f?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Al=`BT
/`;return Al+=Qt+" "+xe+` Tf
`,Al+=E(xe*zn)+` TL
`,Al+=gc+`
`,Al+=yn,Al+=Y,me(Al+="ET"),h[Qt]=!0,Ut};var Jh=m.__private__.clip=m.clip=function(Y){return me(Y==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Jh("evenodd")},m.__private__.discardPath=m.discardPath=function(){return me("n"),this};var Mi=m.__private__.isValidStyle=function(Y){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(fe=!0),fe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(Y){return Mi(Y)&&(u=Y),this};var ko=m.__private__.getStyle=m.getStyle=function(Y){var fe=u;switch(Y){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=Y}return fe},oo=m.close=function(){return me("h"),this};m.stroke=function(){return me("S"),this},m.fill=function(Y){return Dl("f",Y),this},m.fillEvenOdd=function(Y){return Dl("f*",Y),this},m.fillStroke=function(Y){return Dl("B",Y),this},m.fillStrokeEvenOdd=function(Y){return Dl("B*",Y),this};var Dl=function(Y,fe){ga(fe)==="object"?pc(fe,Y):me(Y)},jo=function(Y){Y===null||_===w.ADVANCED&&Y===void 0||(Y=ko(Y),me(Y))};function au(Y,fe,De,Me,Ke){var yt=new Nv(fe||this.boundingBox,De||this.xStep,Me||this.yStep,this.gState,Ke||this.matrix);yt.stream=this.stream;var Lt=Y+"$$"+this.cloneIndex+++"$$";return Wr(Lt,yt),yt}var pc=function(Y,fe){var De=fs[Y.key],Me=Pr[De];if(Me instanceof Mp)me("q"),me(vf(fe)),Me.gState&&m.setGState(Me.gState),me(Y.matrix.toString()+" cm"),me("/"+De+" sh"),me("Q");else if(Me instanceof Nv){var Ke=new bt(1,0,0,-1,0,Hi());Y.matrix&&(Ke=Ke.multiply(Y.matrix||xr),De=au.call(Me,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Ke).id),me("q"),me("/Pattern cs"),me("/"+De+" scn"),Me.gState&&m.setGState(Me.gState),me(fe),me("Q")}},vf=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Bo=m.moveTo=function(Y,fe){return me(E(F(Y))+" "+E(M(fe))+" m"),this},Ui=m.lineTo=function(Y,fe){return me(E(F(Y))+" "+E(M(fe))+" l"),this},Pl=m.curveTo=function(Y,fe,De,Me,Ke,yt){return me([E(F(Y)),E(M(fe)),E(F(De)),E(M(Me)),E(F(Ke)),E(M(yt)),"c"].join(" ")),this};m.__private__.line=m.line=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Mi(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[De-Y,Me-fe]],Y,fe,[1,1],Ke||"S"):this.lines([[De-Y,Me-fe]],Y,fe,[1,1]).stroke()},m.__private__.lines=m.lines=function(Y,fe,De,Me,Ke,yt){var Lt,Zt,O,ne,ce,be,ze,ot,Ut,Or,yn,Xr;if(typeof Y=="number"&&(Xr=De,De=fe,fe=Y,Y=Xr),Me=Me||[1,1],yt=yt||!1,isNaN(fe)||isNaN(De)||!Array.isArray(Y)||!Array.isArray(Me)||!Mi(Ke)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bo(fe,De),Lt=Me[0],Zt=Me[1],ne=Y.length,Or=fe,yn=De,O=0;O<ne;O++)(ce=Y[O]).length===2?(Or=ce[0]*Lt+Or,yn=ce[1]*Zt+yn,Ui(Or,yn)):(be=ce[0]*Lt+Or,ze=ce[1]*Zt+yn,ot=ce[2]*Lt+Or,Ut=ce[3]*Zt+yn,Or=ce[4]*Lt+Or,yn=ce[5]*Zt+yn,Pl(be,ze,ot,Ut,Or,yn));return yt&&oo(),jo(Ke),this},m.path=function(Y){for(var fe=0;fe<Y.length;fe++){var De=Y[fe],Me=De.c;switch(De.op){case"m":Bo(Me[0],Me[1]);break;case"l":Ui(Me[0],Me[1]);break;case"c":Pl.apply(this,Me);break;case"h":oo()}}return this},m.__private__.rect=m.rect=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Mi(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Me=-Me),me([E(F(Y)),E(M(fe)),E(F(De)),E(F(Me)),"re"].join(" ")),jo(Ke),this},m.__private__.triangle=m.triangle=function(Y,fe,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Mi(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-Y,Me-fe],[Ke-De,yt-Me],[Y-Ke,fe-yt]],Y,fe,[1,1],Lt,!0),this},m.__private__.roundedRect=m.roundedRect=function(Y,fe,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Mi(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*De),yt=Math.min(yt,.5*Me),this.lines([[De-2*Ke,0],[Ke*Zt,0,Ke,yt-yt*Zt,Ke,yt],[0,Me-2*yt],[0,yt*Zt,-Ke*Zt,yt,-Ke,yt],[2*Ke-De,0],[-Ke*Zt,0,-Ke,-yt*Zt,-Ke,-yt],[0,2*yt-Me],[0,-yt*Zt,Ke*Zt,-yt,Ke,-yt]],Y+Ke,fe,[1,1],Lt,!0),this},m.__private__.ellipse=m.ellipse=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Mi(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*De,Lt=4/3*(Math.SQRT2-1)*Me;return Bo(Y+De,fe),Pl(Y+De,fe-Lt,Y+yt,fe-Me,Y,fe-Me),Pl(Y-yt,fe-Me,Y-De,fe-Lt,Y-De,fe),Pl(Y-De,fe+Lt,Y-yt,fe+Me,Y,fe+Me),Pl(Y+yt,fe+Me,Y+De,fe+Lt,Y+De,fe),jo(Ke),this},m.__private__.circle=m.circle=function(Y,fe,De,Me){if(isNaN(Y)||isNaN(fe)||isNaN(De)||!Mi(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,fe,De,De,Me)},m.setFont=function(Y,fe,De){return De&&(fe=I(fe,De)),Qt=nu(Y,fe,{disableWarning:!1}),this};var ps=m.__private__.getFont=m.getFont=function(){return Sr[nu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var Y,fe,De={};for(Y in $r)if($r.hasOwnProperty(Y))for(fe in De[Y]=[],$r[Y])$r[Y].hasOwnProperty(fe)&&De[Y].push(fe);return De},m.addFont=function(Y,fe,De,Me,Ke){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(De=I(De,Me)),Ke=Ke||"Identity-H",eu.call(this,Y,fe,De,Ke)};var bn,su=e.lineWidth||.200025,Rl=m.__private__.getLineWidth=m.getLineWidth=function(){return su},bf=m.__private__.setLineWidth=m.setLineWidth=function(Y){return su=Y,me(E(F(Y))+" w"),this};m.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(Y,fe){if(Y=Y||[],fe=fe||0,isNaN(fe)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(De){return E(F(De))}).join(" "),fe=E(F(fe)),me("["+Y+"] "+fe+" d"),this};var Zu=m.__private__.getLineHeight=m.getLineHeight=function(){return xe*bn};m.__private__.getLineHeight=m.getLineHeight=function(){return xe*bn};var ed=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(bn=Y),this},dl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return bn};ed(e.lineHeight);var Qi=m.__private__.getHorizontalCoordinate=function(Y){return F(Y)},gs=m.__private__.getVerticalCoordinate=function(Y){return _===w.ADVANCED?Y:gr[U].mediaBox.topRightY-gr[U].mediaBox.bottomLeftY-F(Y)},Zh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(Y){return E(Qi(Y))},iu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(Y){return E(gs(Y))},Ni=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Se(Ni)},m.__private__.setStrokeColor=m.setDrawColor=function(Y,fe,De,Me){return Ni=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"draw",precision:2}),me(Ni),this};var ou=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Se(ou)},m.__private__.setFillColor=m.setFillColor=function(Y,fe,De,Me){return ou=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"fill",precision:2}),me(ou),this};var gc=e.textColor||"0 g",rA=m.__private__.getTextColor=m.getTextColor=function(){return Se(gc)};m.__private__.setTextColor=m.setTextColor=function(Y,fe,De,Me){return gc=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"text",precision:3}),this};var td=e.charSpace,nA=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(td||0)};m.__private__.setCharSpace=m.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return td=Y,this};var yf=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(Y){var fe=m.CapJoinStyles[Y];if(fe===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yf=fe,me(fe+" J"),this};var rd=0;m.__private__.setLineJoin=m.setLineJoin=function(Y){var fe=m.CapJoinStyles[Y];if(fe===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rd=fe,me(fe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(E(F(Y))+" M"),this},m.GState=DS,m.setGState=function(Y){(Y=typeof Y=="string"?mn[la[Y]]:lu(null,Y)).equals(ja)||(me("/"+Y.id+" gs"),ja=Y)};var lu=function(Y,fe){if(!Y||!la[Y]){var De=!1;for(var Me in mn)if(mn.hasOwnProperty(Me)&&mn[Me].equals(fe)){De=!0;break}if(De)fe=mn[Me];else{var Ke="GS"+(Object.keys(mn).length+1).toString(10);mn[Ke]=fe,fe.id=Ke}return Y&&(la[Y]=fe.id),Ze.publish("addGState",fe),fe}};m.addGState=function(Y,fe){return lu(Y,fe),this},m.saveGraphicsState=function(){return me("q"),In.push({key:Qt,size:xe,color:gc}),this},m.restoreGraphicsState=function(){me("Q");var Y=In.pop();return Qt=Y.key,xe=Y.size,gc=Y.color,ja=null,this},m.setCurrentTransformationMatrix=function(Y){return me(Y.toString()+" cm"),this},m.comment=function(Y){return me("#"+Y),this};var nd=function(Y,fe){var De=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var Me=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(yt){isNaN(yt)||(Me=parseFloat(yt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(yt){Ke=yt.toString()}}),this},aA=function(Y,fe,De,Me){nd.call(this,Y,fe),this.type="rect";var Ke=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Lt){isNaN(Lt)||(Ke=parseFloat(Lt))}});var yt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Lt){isNaN(Lt)||(yt=parseFloat(Lt))}}),this},ad=function(){this.page=rn,this.currentPage=U,this.pages=ke.slice(0),this.pagesContext=gr.slice(0),this.x=Br,this.y=tr,this.matrix=an,this.width=uu(U),this.height=Hi(U),this.outputDestination=Ne,this.id="",this.objectNumber=-1};ad.prototype.restore=function(){rn=this.page,U=this.currentPage,gr=this.pagesContext,ke=this.pages,Br=this.x,tr=this.y,an=this.matrix,sd(U,this.width),sA(U,this.height),Ne=this.outputDestination};var cu=function(Y,fe,De,Me,Ke){Et.push(new ad),rn=U=0,ke=[],Br=Y,tr=fe,an=Ke,Ci([De,Me])},e0=function(Y){if(xt[Y])Et.pop().restore();else{var fe=new ad,De="Xo"+(Object.keys(Je).length+1).toString(10);fe.id=De,xt[Y]=De,Je[De]=fe,Ze.publish("addFormObject",fe),Et.pop().restore()}};for(var xc in m.beginFormObject=function(Y,fe,De,Me,Ke){return cu(Y,fe,De,Me,Ke),this},m.endFormObject=function(Y){return e0(Y),this},m.doFormObject=function(Y,fe){var De=Je[xt[Y]];return me("q"),me(fe.toString()+" cm"),me("/"+De.id+" Do"),me("Q"),this},m.getFormObject=function(Y){var fe=Je[xt[Y]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},m.save=function(Y,fe){return Y=Y||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(Op(tA(fc()),Y),typeof Op.unload=="function"&&Qr.setTimeout&&setTimeout(Op.unload,911),this):new Promise(function(De,Me){try{var Ke=Op(tA(fc()),Y);typeof Op.unload=="function"&&Qr.setTimeout&&setTimeout(Op.unload,911),De(Ke)}catch(yt){Me(yt.message)}})},vr.API)vr.API.hasOwnProperty(xc)&&(xc==="events"&&vr.API.events.length?function(Y,fe){var De,Me,Ke;for(Ke=fe.length-1;Ke!==-1;Ke--)De=fe[Ke][0],Me=fe[Ke][1],Y.subscribe.apply(Y,[De].concat(typeof Me=="function"?[Me]:Me))}(Ze,vr.API.events):m[xc]=vr.API[xc]);var uu=m.getPageWidth=function(Y){return(gr[Y=Y||U].mediaBox.topRightX-gr[Y].mediaBox.bottomLeftX)/wt},sd=m.setPageWidth=function(Y,fe){gr[Y].mediaBox.topRightX=fe*wt+gr[Y].mediaBox.bottomLeftX},Hi=m.getPageHeight=function(Y){return(gr[Y=Y||U].mediaBox.topRightY-gr[Y].mediaBox.bottomLeftY)/wt},sA=m.setPageHeight=function(Y,fe){gr[Y].mediaBox.topRightY=fe*wt+gr[Y].mediaBox.bottomLeftY};return m.internal={pdfEscape:Fn,getStyle:ko,getFont:ps,getFontSize:Re,getCharSpace:nA,getTextColor:rA,getLineHeight:Zu,getLineHeightFactor:dl,getLineWidth:Rl,write:Te,getHorizontalCoordinate:Qi,getVerticalCoordinate:gs,getCoordinateString:Zh,getVerticalCoordinateString:iu,collections:{},newObject:Zr,newAdditionalObject:Ie,newObjectDeferred:qr,newObjectDeferredBegin:he,getFilters:Ye,putStream:dt,events:Ze,scaleFactor:wt,pageSize:{getWidth:function(){return uu(U)},setWidth:function(Y){sd(U,Y)},getHeight:function(){return Hi(U)},setHeight:function(Y){sA(U,Y)}},encryptionOptions:d,encryption:ca,getEncryptor:mc,output:hc,getNumberOfPages:Vn,pages:ke,out:me,f2:R,f3:P,getPageInfo:Fl,getPageInfoByObjId:Fr,getCurrentPageInfo:Ol,getPDFVersion:x,Point:nd,Rectangle:aA,Matrix:bt,hasHotfix:Il},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return uu(U)},set:function(Y){sd(U,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Hi(U)},set:function(Y){sA(U,Y)},enumerable:!0,configurable:!0}),pf.call(m,We),Qt="F1",tu(a,r),Ze.publish("initialized"),m}hv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},hv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},hv.prototype.processOwnerPassword=function(e,t){return VO(HO(t).substr(0,5),e)},hv.prototype.encryptor=function(e,t){var r=HO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return VO(r,n)}},DS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Cs=vr.API,yM=1,sx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},R0=function(e){return e.toFixed(5)};Cs.__acroform__={};var dc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Vq=function(e){return e*yM},DA=function(e){var t=new hce,r=mr.internal.getHeight(e)||0,n=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},NYe=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},_Ye=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},SYe=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ws=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SYe(e,t-1)},Xs=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return NYe(e,t-1)},Ys=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _Ye(e,t-1)},kYe=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},jYe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=zO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=DA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},zO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,i=mr.internal.getHeight(e)||0;i=i<0?-i:i;var l=mr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,F,L){if(P+1<a.length){var M=F+" "+a[P+1][0];return kN(M,e,L).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,A=kN("3",e,s).height,h=e.multiline?i-s:(i-A)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+kN(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var j=!1;if(a[_].length!==1&&v!==a[_].length-1){if((A+2)*(w+2)+2>i)continue e;y+=a[_][v],j=!0,x=_,_--}else{y=(y+=a[_][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var k=parseInt(_),I=c(k,y,s),E=_>=a.length-1;if(I&&!E){y+=" ",v=0;continue}if(I||E){if(E)x=k;else if(e.multiline&&(A+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(A+2)*(w+2)+2>i)continue e;x=k}}for(var S="",B=g;B<=x;B++){var R=a[B];if(e.multiline){if(B===x){S+=R[v]+" ",v=(v+1)%R.length;continue}if(B===g){S+=R[R.length-1]+" ";continue}}S+=R[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=kN(S,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=en(u)+" "+en(m)+` Td
`,t+="("+sx(S)+`) Tj
`,t+=-en(u)+` 0 Td
`,m=-(s+2),d=0,g=j?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},kN=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},BYe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TYe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},IYe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},FYe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Wd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(BYe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");yM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new mce,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&TYe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=kYe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=mr.createDefaultAppearanceStream(l),ga(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=jYe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var A="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(A+="/"+h+" ",A+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var g=m[i];typeof g=="function"&&(g=g.call(a,l)),A+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),A+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);A+=">>"}c.push({key:"AP",value:`<<
`+A+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&IYe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},fce=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+sx(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},PI=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+sx(n(e))+")"},qA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qA.prototype.toString=function(){return this.objId+" 0 R"},qA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},qA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:fce(a,this.objId,this.scope)}):a instanceof qA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var hce=function(){qA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};dc(hce,qA);var mce=function(){qA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+sx(r(e))+")"}},set:function(r){e=r}})};dc(mce,qA);var Wd=function e(){qA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ws(t,3)},set:function(y){y?this.F=Xs(t,3):this.F=Ys(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof PS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+sx(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/yM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof PS||this instanceof cg))return PI(A,this.objId,this.scope)},set:function(y){y=y.toString(),A=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ji?h:PI(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Ji?y:y.substr(0,1)==="("?Vx(y.substr(1,y.length-2)):Vx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji?Vx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ji?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ji?m:PI(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Ji?y:y.substr(0,1)==="("?Vx(y.substr(1,y.length-2)):Vx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji?Vx(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Ji?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,1)},set:function(y){y?this.Ff=Xs(this.Ff,1):this.Ff=Ys(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,2)},set:function(y){y?this.Ff=Xs(this.Ff,2):this.Ff=Ys(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,3)},set:function(y){y?this.Ff=Xs(this.Ff,3):this.Ff=Ys(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};dc(Wd,qA);var $v=function(){Wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fce(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,18)},set:function(r){r?this.Ff=Xs(this.Ff,18):this.Ff=Ys(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xs(this.Ff,19):this.Ff=Ys(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,20)},set:function(r){r?(this.Ff=Xs(this.Ff,20),t.sort()):this.Ff=Ys(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,22)},set:function(r){r?this.Ff=Xs(this.Ff,22):this.Ff=Ys(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(r){r?this.Ff=Xs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,27)},set:function(r){r?this.Ff=Xs(this.Ff,27):this.Ff=Ys(this.Ff,27)}}),this.hasAppearanceStream=!1};dc($v,Wd);var Gv=function(){$v.call(this),this.fontName="helvetica",this.combo=!1};dc(Gv,$v);var Kv=function(){Gv.call(this),this.combo=!0};dc(Kv,Gv);var I5=function(){Kv.call(this),this.edit=!0};dc(I5,Kv);var Ji=function(){Wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,15)},set:function(r){r?this.Ff=Xs(this.Ff,15):this.Ff=Ys(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,16)},set:function(r){r?this.Ff=Xs(this.Ff,16):this.Ff=Ys(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,17)},set:function(r){r?this.Ff=Xs(this.Ff,17):this.Ff=Ys(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(r){r?this.Ff=Xs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+sx(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};dc(Ji,Wd);var F5=function(){Ji.call(this),this.pushButton=!0};dc(F5,Ji);var qv=function(){Ji.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};dc(qv,Ji);var PS=function(){var e,t;Wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+sx(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dc(PS,Wd),qv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},qv.prototype.createOption=function(e){var t=new PS;return t.Parent=this,t.optionName=e,this.Kids.push(t),OYe.call(this.scope,t),t};var O5=function(){Ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};dc(O5,Ji);var cg=function(){Wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,13)},set:function(t){t?this.Ff=Xs(this.Ff,13):this.Ff=Ys(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,21)},set:function(t){t?this.Ff=Xs(this.Ff,21):this.Ff=Ys(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(t){t?this.Ff=Xs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,24)},set:function(t){t?this.Ff=Xs(this.Ff,24):this.Ff=Ys(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,25)},set:function(t){t?this.Ff=Xs(this.Ff,25):this.Ff=Ys(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(t){t?this.Ff=Xs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dc(cg,Wd);var D5=function(){cg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,14)},set:function(e){e?this.Ff=Xs(this.Ff,14):this.Ff=Ys(this.Ff,14)}}),this.password=!0};dc(D5,cg);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=zO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=mr.internal.getHeight(e),i=mr.internal.getWidth(e),l=zO(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(i)+" "+en(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(i-1)+" "+en(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=mr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+R0(mr.internal.getWidth(e)/2)+" "+R0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+R0(mr.internal.getWidth(e)/2)+" "+R0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+R0(mr.internal.getWidth(e)/2)+" "+R0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+R0(mr.internal.getWidth(e)/2)+" "+R0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},mr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=Vq(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=Vq(e.Rect[3])),t};var OYe=Cs.addField=function(e){if(FYe(this,e),!(e instanceof Wd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=$v,Cs.AcroFormListBox=Gv,Cs.AcroFormComboBox=Kv,Cs.AcroFormEditBox=I5,Cs.AcroFormButton=Ji,Cs.AcroFormPushButton=F5,Cs.AcroFormRadioButton=qv,Cs.AcroFormCheckBox=O5,Cs.AcroFormTextField=cg,Cs.AcroFormPasswordField=D5,Cs.AcroFormAppearance=mr,Cs.AcroForm={ChoiceField:$v,ListBox:Gv,ComboBox:Kv,EditBox:I5,Button:Ji,PushButton:F5,RadioButton:qv,CheckBox:O5,TextField:cg,PasswordField:D5,Appearance:mr},vr.AcroForm={ChoiceField:$v,ListBox:Gv,ComboBox:Kv,EditBox:I5,Button:Ji,PushButton:F5,RadioButton:qv,CheckBox:O5,TextField:cg,PasswordField:D5,Appearance:mr};vr.AcroForm;function pce(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,F){var L,M,ee,V,q,K=t;if((F=F||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(q in r)for(ee=r[q],L=0;L<ee.length;L+=1){for(V=!0,M=0;M<ee[L].length;M+=1)if(ee[L][M]!==void 0&&ee[L][M]!==P[M]){V=!1;break}if(V===!0){K=q;break}}else for(q in r)for(ee=r[q],L=0;L<ee.length;L+=1){for(V=!0,M=0;M<ee[L].length;M+=1)if(ee[L][M]!==void 0&&ee[L][M]!==P.charCodeAt(M)){V=!1;break}if(V===!0){K=q;break}}return K===t&&F!==t&&(K=F),K},a=function P(F){for(var L=this.internal.write,M=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:F.width}),V.push({key:"Height",value:F.height}),F.colorSpace===v.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===v.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var q="",K=0,X=F.transparency.length;K<X;K++)q+=F.transparency[K]+" "+F.transparency[K]+" ";V.push({key:"Mask",value:"["+q+"]"})}F.sMask!==void 0&&V.push({key:"SMask",value:F.objectId+1+" 0 R"});var Z=F.filter!==void 0?["/"+F.filter]:void 0;if(M({data:F.data,additionalKeyValues:V,alreadyAppliedFilters:Z,objectId:F.objectId}),L("endobj"),"sMask"in F&&F.sMask!==void 0){var G="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,D={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:G,data:F.sMask};"filter"in F&&(D.filter=F.filter),P.call(this,D)}if(F.colorSpace===v.INDEXED){var U=this.internal.newObject();M({data:S(new Uint8Array(F.palette)),objectId:U}),L("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var F in P)a.call(this,P[F])},i=function(){var P,F=this.internal.collections.addImage_images,L=this.internal.write;for(var M in F)L("/I"+(P=F[M]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},A=function(P){return ga(P)==="object"&&P.nodeType===1},h=function(P,F){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var L=""+P.getAttribute("src");if(L.indexOf("data:image/")===0)return Fw(unescape(L).split("base64,").pop());var M=e.loadFile(L,!0);if(M!==void 0)return M}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ee;switch(F){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return Fw(P.toDataURL(ee,1).split("base64,").pop())}},m=function(P){var F=this.internal.collections.addImage_images;if(F){for(var L in F)if(P===F[L].alias)return F[L]}},g=function(P,F,L){return P||F||(P=-96,F=-96),P<0&&(P=-1*L.width*72/P/this.internal.scaleFactor),F<0&&(F=-1*L.height*72/F/this.internal.scaleFactor),P===0&&(P=F*L.width/L.height),F===0&&(F=P*L.height/L.width),[P,F]},x=function(P,F,L,M,ee,V){var q=g.call(this,L,M,ee),K=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,Z=c.call(this);if(L=q[0],M=q[1],Z[ee.index]=ee,V){V*=Math.PI/180;var G=Math.cos(V),D=Math.sin(V),U=function(J){return J.toFixed(4)},z=[U(G),U(D),U(-1*D),U(G),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,K(P),X(F+M),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([K(L),"0","0",K(M),"0","0","cm"].join(" "))):this.internal.write([K(L),"0","0",K(M),K(P),X(F+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(P){var F,L,M=0;if(typeof P=="string")for(L=P.length,F=0;F<L;F++)M=(M<<5)-M+P.charCodeAt(F),M|=0;else if(I(P))for(L=P.byteLength/2,F=0;F<L;F++)M=(M<<5)-M+P[F],M|=0;return M},_=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var F=!0;return P.length===0&&(F=!1),P.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(F=!1),F},j=e.__addimage__.extractImageFromDataUrl=function(P){var F=(P=P||"").split("base64,"),L=null;if(F.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(M)&&(L={mimeType:M[1],charset:M[2],data:F[1]})}return L},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return k()&&P instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(P){return k()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var F=P.length,L=new Uint8Array(F),M=0;M<F;M++)L[M]=P.charCodeAt(M);return L},S=e.__addimage__.arrayBufferToBinaryString=function(P){for(var F="",L=I(P)?P:new Uint8Array(P),M=0;M<L.length;M+=8192)F+=String.fromCharCode.apply(null,L.subarray(M,M+8192));return F};e.addImage=function(){var P,F,L,M,ee,V,q,K,X;if(typeof arguments[1]=="number"?(F=t,L=arguments[1],M=arguments[2],ee=arguments[3],V=arguments[4],q=arguments[5],K=arguments[6],X=arguments[7]):(F=arguments[1],L=arguments[2],M=arguments[3],ee=arguments[4],V=arguments[5],q=arguments[6],K=arguments[7],X=arguments[8]),ga(P=arguments[0])==="object"&&!A(P)&&"imageData"in P){var Z=P;P=Z.imageData,F=Z.format||F||t,L=Z.x||L||0,M=Z.y||M||0,ee=Z.w||Z.width||ee,V=Z.h||Z.height||V,q=Z.alias||q,K=Z.compression||K,X=Z.rotation||Z.angle||X}var G=this.internal.getFilters();if(K===void 0&&G.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(L)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var D=B.call(this,P,F,q,K);return x.call(this,L,M,ee,V,D,X),this};var B=function(P,F,L,M){var ee,V,q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var K=R(P,!1);(K!==""||(K=e.loadFile(P,!0))!==void 0)&&(P=K)}if(A(P)&&(P=h(P,F)),F=n(P,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((q=L)==null||q.length===0)&&(L=function(X){return typeof X=="string"||I(X)?w(X):I(X.data)?w(X.data):null}(P)),(ee=m.call(this,L))||(k()&&(P instanceof Uint8Array||F==="RGBA"||(V=P,P=E(P))),ee=this["process"+F.toUpperCase()](P,u.call(this),L,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:y.NONE}(M),V)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},R=e.__addimage__.convertBase64ToBinaryString=function(P,F){var L;F=typeof F!="boolean"||F;var M,ee="";if(typeof P=="string"){M=(L=j(P))!==null?L.data:P;try{ee=Fw(M)}catch(V){if(F)throw _(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};e.getImageProperties=function(P){var F,L,M="";if(A(P)&&(P=h(P)),typeof P=="string"&&n(P)===t&&((M=R(P,!1))===""&&(M=e.loadFile(P)||""),P=M),L=n(P),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!k()||P instanceof Uint8Array||(P=E(P)),!(F=this["process"+L.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=L,F}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,A=0;A<u.length&&!d;A++)switch((n=u[A]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},A=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",_=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(_++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),v===x.length-1&&(y=r,w+=x.charAt(v-(_-1)),v-=_-1,_=0)):(y=r,w+=x.charAt(v-_),v-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return i(x)?s(x)===!1?-1:!u(x)||!i(v)&&!i(y)||!i(y)&&l(v)||l(x)&&!i(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&i(v)&&!l(v)&&i(y)&&u(y)?3:l(x)||!i(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,_="",j="",k="",I=(x=x||"").split("\\s+"),E=[];for(v=0;v<I.length;v+=1){for(E.push(""),y=0;y<I[v].length;y+=1)_=I[v][y],j=I[v][y-1],k=I[v][y+1],i(_)?(w=h(_,j,k),E[v]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[v]+=_;E[v]=A(E[v])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),A=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,j){return _.concat(v.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:A})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,A=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=A.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,A,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],_=[],j={},k={},I=[],E=[],S=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),F=typeof h.padding=="number"?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),A==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(A)&&ga(A[0])==="object")for(y=A.map(function(Z){return Z.name}),w=A.map(function(Z){return Z.prompt||Z.name||""}),_=A.map(function(Z){return Z.align||"left"}),m=0;m<A.length;m+=1)k[A[m].name]=A[m].width*(19.049976/25.4);else Array.isArray(A)&&typeof A[0]=="string"&&(w=y=A,_=y.map(function(){return"left"}));if(S||Array.isArray(A)&&typeof A[0]=="string")for(m=0;m<y.length;m+=1){for(j[v=y[m]]=d.map(function(Z){return Z[v]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=j[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[v]=Math.max.apply(null,I)+F+F,I=[]}if(B){var ee={};for(m=0;m<y.length;m+=1)ee[y[m]]={},ee[y[m]].text=w[m],ee[y[m]].align=_[m];var V=l.call(this,ee,k);E=y.map(function(Z){return new s(c,u,k[Z],V,ee[Z].text,void 0,ee[Z].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var q=A.reduce(function(Z,G){return Z[G.name]=G.align,Z},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var K=l.call(this,d[m],k);for(x=0;x<y.length;x+=1){var X=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:X},this),i.call(this,new s(c,u,k[y[x]],K,X,m+2,q[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*A/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var gce={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xce=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$O=pce(xce),vce=[100,200,300,400,500,600,700,800,900],DYe=pce(vce);function GO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return gce[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof $O[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function zq(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var PYe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$q={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gq(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function RYe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},PYe,r.genericFontFamilies||{}),s=null,i=null,l=0;l<t.length;++l)if(a[(s=GO(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+Gq(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=$O[c],A=d<=$O.normal?-1:1,h=zq(u,xce,d,A);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=gce[c],A=0;A<d.length;++A)if(u[d[A]])return u[d[A]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=DYe[c],A=zq(u,vce,d,c<400?-1:1);if(!A)throw new Error("Could not find a matching font-weight for value "+c);return A}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Gq(s)+"'.");return i}function Kq(e){return e.trimLeft()}function LYe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function MYe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var jN,qq,Wq,RI=["times"];(function(e){var t,r,n,a,s,i,l,c,u,d=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new i,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new i,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var A=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=D;Object.defineProperty(this,"pdf",{get:function(){return U}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(_e){z=!!_e}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(_e){J=!!_e}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(_e){isNaN(_e)||(re=_e)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(_e){isNaN(_e)||(oe=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var me;typeof _e=="number"?me=[_e,_e,_e,_e]:((me=new Array(4))[0]=_e[0],me[1]=_e.length>=2?_e[1]:me[0],me[2]=_e.length>=3?_e[2]:me[0],me[3]=_e.length>=4?_e[3]:me[1]),u.margin=me}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(_e){se=_e}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(_e){le=_e}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(_e){ue=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(_e){ke=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var me;me=h(_e),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var me=h(_e);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var ae=null;function Ne(_e,me){if(ae===null){var Te=function(Le){var We=[];return Object.keys(Le).forEach(function(xe){Le[xe].forEach(function(Oe){var Re=null;switch(Oe){case"bold":Re={family:xe,weight:"bold"};break;case"italic":Re={family:xe,style:"italic"};break;case"bolditalic":Re={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:xe}}Re!==null&&(Re.ref={name:xe,style:Oe},We.push(Re))})}),We}(_e.getFontList());ae=function(Le){for(var We={},xe=0;xe<Le.length;++xe){var Oe=GO(Le[xe]),Re=Oe.family,$e=Oe.stretch,et=Oe.style,ct=Oe.weight;We[Re]=We[Re]||{},We[Re][$e]=We[Re][$e]||{},We[Re][$e][et]=We[Re][$e][et]||{},We[Re][$e][et][ct]=Oe}return We}(Te.concat(me))}return ae}var je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(_e){ae=null,je=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var me;if(this.ctx.font=_e,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Te=me[1],Le=(me[2],me[3]),We=me[4],xe=(me[5],me[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(Oe==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Re=function(Pt){var Qt,wt,Br=[],tr=Pt.trim();if(tr==="")return RI;if(tr in $q)return[$q[tr]];for(;tr!=="";){switch(wt=null,Qt=(tr=Kq(tr)).charAt(0)){case'"':case"'":wt=LYe(tr.substring(1),Qt);break;default:wt=MYe(tr)}if(wt===null||(Br.push(wt[0]),(tr=Kq(wt[1]))!==""&&tr.charAt(0)!==","))return RI;tr=tr.replace(/^,/,"")}return Br}(xe);if(this.fontFaces){var $e=RYe(Ne(this.pdf,this.fontFaces),Re.map(function(Pt){return{family:Pt,stretch:"normal",weight:Le,style:Te}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var et="";(Le==="bold"||parseInt(Le,10)>=700||Te==="bold")&&(et="bold"),Te==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ct="",gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Re.length;It++){if(this.pdf.internal.getFont(Re[It],et,{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Re[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Re[It],et="bold";else if(this.pdf.internal.getFont(Re[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It],et="normal";break}}if(ct===""){for(var Mt=0;Mt<Re.length;Mt++)if(gt[Re[Mt]]){ct=gt[Re[Mt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};A.prototype.setLineDash=function(D){this.lineDash=D},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){j.call(this,"fill",!1)},A.prototype.stroke=function(){j.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(D,U){if(isNaN(D)||isNaN(U))throw Na.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new i(D,U));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new i(D,U)},A.prototype.closePath=function(){var D=new i(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&ga(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){D=new i(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(D.x,D.y)},A.prototype.lineTo=function(D,U){if(isNaN(D)||isNaN(U))throw Na.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new i(D,U));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new i(z.x,z.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},A.prototype.quadraticCurveTo=function(D,U,z,J){if(isNaN(z)||isNaN(J)||isNaN(D)||isNaN(U))throw Na.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new i(z,J)),oe=this.ctx.transform.applyToPoint(new i(D,U));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:re.x,y:re.y}),this.ctx.lastPoint=new i(re.x,re.y)},A.prototype.bezierCurveTo=function(D,U,z,J,re,oe){if(isNaN(re)||isNaN(oe)||isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new i(re,oe)),le=this.ctx.transform.applyToPoint(new i(D,U)),ue=this.ctx.transform.applyToPoint(new i(z,J));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:ue.x,y2:ue.y,x:se.x,y:se.y}),this.ctx.lastPoint=new i(se.x,se.y)},A.prototype.arc=function(D,U,z,J,re,oe){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J)||isNaN(re))throw Na.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new i(D,U));D=se.x,U=se.y;var le=this.ctx.transform.applyToPoint(new i(0,z)),ue=this.ctx.transform.applyToPoint(new i(0,0));z=Math.sqrt(Math.pow(le.x-ue.x,2)+Math.pow(le.y-ue.y,2))}Math.abs(re-J)>=2*Math.PI&&(J=0,re=2*Math.PI),this.path.push({type:"arc",x:D,y:U,radius:z,startAngle:J,endAngle:re,counterclockwise:oe})},A.prototype.arcTo=function(D,U,z,J,re){throw new Error("arcTo not implemented.")},A.prototype.rect=function(D,U,z,J){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,U),this.lineTo(D+z,U),this.lineTo(D+z,U+J),this.lineTo(D,U+J),this.lineTo(D,U),this.lineTo(D+z,U),this.lineTo(D,U)},A.prototype.fillRect=function(D,U,z,J){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,U,z,J),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},A.prototype.strokeRect=function(D,U,z,J){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(D,U,z,J),this.stroke())},A.prototype.clearRect=function(D,U,z,J){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,U,z,J))},A.prototype.save=function(D){D=typeof D!="boolean"||D;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},A.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(U),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var U,z,J,re;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))U=0,z=0,J=0,re=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(oe!==null)U=parseInt(oe[1]),z=parseInt(oe[2]),J=parseInt(oe[3]),re=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)U=parseInt(oe[1]),z=parseInt(oe[2]),J=parseInt(oe[3]),re=parseFloat(oe[4]);else{if(re=1,typeof D=="string"&&D.charAt(0)!=="#"){var se=new uce(D);D=se.ok?se.toHex():"#000000"}D.length===4?(U=D.substring(1,2),U+=U,z=D.substring(2,3),z+=z,J=D.substring(3,4),J+=J):(U=D.substring(1,3),z=D.substring(3,5),J=D.substring(5,7)),U=parseInt(U,16),z=parseInt(z,16),J=parseInt(J,16)}}return{r:U,g:z,b:J,a:re,style:D}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(D,U,z,J){if(isNaN(U)||isNaN(z)||typeof D!="string")throw Na.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var re=K(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;F.call(this,{text:D,x:U,y:z,scale:oe,angle:re,align:this.textAlign,maxWidth:J})}},A.prototype.strokeText=function(D,U,z,J){if(isNaN(U)||isNaN(z)||typeof D!="string")throw Na.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var re=K(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;F.call(this,{text:D,x:U,y:z,scale:oe,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:J})}},A.prototype.measureText=function(D){if(typeof D!="string")throw Na.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,z=this.pdf.internal.scaleFactor,J=U.internal.getFontSize(),re=U.getStringUnitWidth(D)*J/U.internal.scaleFactor,oe=function(se){var le=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new oe({width:re*=Math.round(96*z/72*1e4)/1e4})},A.prototype.scale=function(D,U){if(isNaN(D)||isNaN(U))throw Na.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(D,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},A.prototype.rotate=function(D){if(isNaN(D))throw Na.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},A.prototype.translate=function(D,U){if(isNaN(D)||isNaN(U))throw Na.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,D,U);this.ctx.transform=this.ctx.transform.multiply(z)},A.prototype.transform=function(D,U,z,J,re,oe){if(isNaN(D)||isNaN(U)||isNaN(z)||isNaN(J)||isNaN(re)||isNaN(oe))throw Na.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new c(D,U,z,J,re,oe);this.ctx.transform=this.ctx.transform.multiply(se)},A.prototype.setTransform=function(D,U,z,J,re,oe){D=isNaN(D)?1:D,U=isNaN(U)?0:U,z=isNaN(z)?0:z,J=isNaN(J)?1:J,re=isNaN(re)?0:re,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(D,U,z,J,re,oe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(D,U,z,J,re,oe,se,le,ue){var ke=this.pdf.getImageProperties(D),ae=1,Ne=1,je=1,_e=1;J!==void 0&&le!==void 0&&(je=le/J,_e=ue/re,ae=ke.width/J*le/J,Ne=ke.height/re*ue/re),oe===void 0&&(oe=U,se=z,U=0,z=0),J!==void 0&&le===void 0&&(le=J,ue=re),J===void 0&&le===void 0&&(le=ke.width,ue=ke.height);for(var me,Te=this.ctx.transform.decompose(),Le=K(Te.rotate.shx),We=new c,xe=(We=(We=(We=We.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new l(oe-U*je,se-z*_e,J*ae,re*Ne)),Oe=v.call(this,xe),Re=[],$e=0;$e<Oe.length;$e+=1)Re.indexOf(Oe[$e])===-1&&Re.push(Oe[$e]);if(_(Re),this.autoPaging)for(var et=Re[0],ct=Re[Re.length-1],gt=et;gt<ct+1;gt++){this.pdf.setPage(gt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=gt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=gt===1?0:Pt+(gt-2)*Qt;if(this.ctx.clip_path.length!==0){var Br=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(me,this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Br}var tr=JSON.parse(JSON.stringify(xe));tr=w([tr],this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(gt>et||gt<ct)&&x.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Qt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,Le),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,Le)};var v=function(D,U,z){var J=[];U=U||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":J.push(Math.floor((D.y+re)/z)+1);break;case"arc":J.push(Math.floor((D.y+re-D.radius)/z)+1),J.push(Math.floor((D.y+re+D.radius)/z)+1);break;case"qct":var oe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);J.push(Math.floor((oe.y+re)/z)+1),J.push(Math.floor((oe.y+oe.h+re)/z)+1);break;case"bct":var se=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);J.push(Math.floor((se.y+re)/z)+1),J.push(Math.floor((se.y+se.h+re)/z)+1);break;case"rect":J.push(Math.floor((D.y+re)/z)+1),J.push(Math.floor((D.y+D.h+re)/z)+1)}for(var le=0;le<J.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<J[le];)y.call(this);return J},y=function(){var D=this.fillStyle,U=this.strokeStyle,z=this.font,J=this.lineCap,re=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=U,this.font=z,this.lineCap=J,this.lineWidth=re,this.lineJoin=oe},w=function(D,U,z){for(var J=0;J<D.length;J++)switch(D[J].type){case"bct":D[J].x2+=U,D[J].y2+=z;case"qct":D[J].x1+=U,D[J].y1+=z;case"mt":case"lt":case"arc":default:D[J].x+=U,D[J].y+=z}return D},_=function(D){return D.sort(function(U,z){return U-z})},j=function(D,U){for(var z,J,re=this.fillStyle,oe=this.strokeStyle,se=this.lineCap,le=this.lineWidth,ue=Math.abs(le*this.ctx.transform.scaleX),ke=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),je=[],_e=0;_e<Ne.length;_e++)if(Ne[_e].x!==void 0)for(var me=v.call(this,Ne[_e]),Te=0;Te<me.length;Te+=1)je.indexOf(me[Te])===-1&&je.push(me[Te]);for(var Le=0;Le<je.length;Le++)for(;this.pdf.internal.getNumberOfPages()<je[Le];)y.call(this);if(_(je),this.autoPaging)for(var We=je[0],xe=je[je.length-1],Oe=We;Oe<xe+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=re,this.strokeStyle=oe,this.lineCap=se,this.lineWidth=ue,this.lineJoin=ke;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Oe===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Oe===1?0:et+(Oe-2)*ct;if(this.ctx.clip_path.length!==0){var It=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(z,this.posX+this.margin[3],-gt+$e+this.ctx.prevPageLastElemOffset),k.call(this,D,!0),this.path=It}if(J=JSON.parse(JSON.stringify(ae)),this.path=w(J,this.posX+this.margin[3],-gt+$e+this.ctx.prevPageLastElemOffset),U===!1||Oe===0){var Mt=(Oe>We||Oe<xe)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ct,null).clip().discardPath()),k.call(this,D,U),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=ue,k.call(this,D,U),this.lineWidth=le;this.path=ae},k=function(D,U){if((D!=="stroke"||U||!g.call(this))&&(D==="stroke"||U||!m.call(this))){for(var z,J,re=[],oe=this.path,se=0;se<oe.length;se++){var le=oe[se];switch(le.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:le,deltas:[],abs:[]});break;case"lt":var ue=re.length;if(oe[se-1]&&!isNaN(oe[se-1].x)&&(z=[le.x-oe[se-1].x,le.y-oe[se-1].y],ue>0)){for(;ue>=0;ue--)if(re[ue-1].close!==!0&&re[ue-1].begin!==!0){re[ue-1].deltas.push(z),re[ue-1].abs.push(le);break}}break;case"bct":z=[le.x1-oe[se-1].x,le.y1-oe[se-1].y,le.x2-oe[se-1].x,le.y2-oe[se-1].y,le.x-oe[se-1].x,le.y-oe[se-1].y],re[re.length-1].deltas.push(z);break;case"qct":var ke=oe[se-1].x+2/3*(le.x1-oe[se-1].x),ae=oe[se-1].y+2/3*(le.y1-oe[se-1].y),Ne=le.x+2/3*(le.x1-le.x),je=le.y+2/3*(le.y1-le.y),_e=le.x,me=le.y;z=[ke-oe[se-1].x,ae-oe[se-1].y,Ne-oe[se-1].x,je-oe[se-1].y,_e-oe[se-1].x,me-oe[se-1].y],re[re.length-1].deltas.push(z);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(le)}}J=U?null:D==="stroke"?"stroke":"fill";for(var Te=!1,Le=0;Le<re.length;Le++)if(re[Le].arc)for(var We=re[Le].abs,xe=0;xe<We.length;xe++){var Oe=We[xe];Oe.type==="arc"?S.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,U,!Te):L.call(this,Oe.x,Oe.y),Te=!0}else if(re[Le].close===!0)this.pdf.internal.out("h"),Te=!1;else if(re[Le].begin!==!0){var Re=re[Le].start.x,$e=re[Le].start.y;M.call(this,re[Le].deltas,Re,$e),Te=!0}J&&B.call(this,J),U&&R.call(this)}},I=function(D){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-z;case"top":return D+U-z;case"hanging":return D+U-2*z;case"middle":return D+U/2-z;case"ideographic":return D;case"alphabetic":default:return D}},E=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(U,z){this.colorStops.push([U,z])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(D,U,z,J,re,oe,se,le,ue){for(var ke=V.call(this,z,J,re,oe),ae=0;ae<ke.length;ae++){var Ne=ke[ae];ae===0&&(ue?P.call(this,Ne.x1+D,Ne.y1+U):L.call(this,Ne.x1+D,Ne.y1+U)),ee.call(this,D,U,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}le?R.call(this):B.call(this,se)},B=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(D,U){this.pdf.internal.out(r(D)+" "+n(U)+" m")},F=function(D){var U;switch(D.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var z=this.pdf.getTextDimensions(D.text),J=I.call(this,D.y),re=E.call(this,J)-z.h,oe=this.ctx.transform.applyToPoint(new i(D.x,J)),se=this.ctx.transform.decompose(),le=new c;le=(le=(le=le.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var ue,ke,ae,Ne=this.ctx.transform.applyToRectangle(new l(D.x,J,z.w,z.h)),je=le.applyToRectangle(new l(D.x,re,z.w,z.h)),_e=v.call(this,je),me=[],Te=0;Te<_e.length;Te+=1)me.indexOf(_e[Te])===-1&&me.push(_e[Te]);if(_(me),this.autoPaging)for(var Le=me[0],We=me[me.length-1],xe=Le;xe<We+1;xe++){this.pdf.setPage(xe);var Oe=xe===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],et=$e-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],gt=ct-this.margin[3],It=xe===1?0:Re+(xe-2)*et;if(this.ctx.clip_path.length!==0){var Mt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ue,this.posX+this.margin[3],-1*It+Oe),k.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*D.scale),ae=this.lineWidth,this.lineWidth=ae*D.scale);var Qt=this.autoPaging!=="text";if(Qt||Pt.y+Pt.h<=$e){if(Qt||Pt.y>=Oe&&Pt.x<=ct){var wt=Qt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||ct-Pt.x)[0],Br=w([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0],tr=Qt&&(xe>Le||xe<We)&&x.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,et,null).clip().discardPath()),this.pdf.text(wt,Br.x,Br.y,{angle:D.angle,align:U,renderingMode:D.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Pt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-Pt.y);D.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ae)}else D.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*D.scale),ae=this.lineWidth,this.lineWidth=ae*D.scale),this.pdf.text(D.text,oe.x+this.posX,oe.y+this.posY,{angle:D.angle,align:U,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ae)},L=function(D,U,z,J){z=z||0,J=J||0,this.pdf.internal.out(r(D+z)+" "+n(U+J)+" l")},M=function(D,U,z){return this.pdf.lines(D,U,z,null,null)},ee=function(D,U,z,J,re,oe,se,le){this.pdf.internal.out([t(a(z+D)),t(s(J+U)),t(a(re+D)),t(s(oe+U)),t(a(se+D)),t(s(le+U)),"c"].join(" "))},V=function(D,U,z,J){for(var re=2*Math.PI,oe=Math.PI/2;U>z;)U-=re;var se=Math.abs(z-U);se<re&&J&&(se=re-se);for(var le=[],ue=J?-1:1,ke=U;se>1e-5;){var ae=ke+ue*Math.min(se,oe);le.push(q.call(this,D,ke,ae)),se-=Math.abs(ae-ke),ke=ae}return le},q=function(D,U,z){var J=(z-U)/2,re=D*Math.cos(J),oe=D*Math.sin(J),se=re,le=-oe,ue=se*se+le*le,ke=ue+se*re+le*oe,ae=4/3*(Math.sqrt(2*ue*ke)-ke)/(se*oe-le*re),Ne=se-ae*le,je=le+ae*se,_e=Ne,me=-je,Te=J+U,Le=Math.cos(Te),We=Math.sin(Te);return{x1:D*Math.cos(U),y1:D*Math.sin(U),x2:Ne*Le-je*We,y2:Ne*We+je*Le,x3:_e*Le-me*We,y3:_e*We+me*Le,x4:D*Math.cos(z),y4:D*Math.sin(z)}},K=function(D){return 180*D/Math.PI},X=function(D,U,z,J,re,oe){var se=D+.5*(z-D),le=U+.5*(J-U),ue=re+.5*(z-re),ke=oe+.5*(J-oe),ae=Math.min(D,re,se,ue),Ne=Math.max(D,re,se,ue),je=Math.min(U,oe,le,ke),_e=Math.max(U,oe,le,ke);return new l(ae,je,Ne-ae,_e-je)},Z=function(D,U,z,J,re,oe,se,le){var ue,ke,ae,Ne,je,_e,me,Te,Le,We,xe,Oe,Re,$e,et=z-D,ct=J-U,gt=re-z,It=oe-J,Mt=se-re,Pt=le-oe;for(ke=0;ke<41;ke++)Le=(me=(ae=D+(ue=ke/40)*et)+ue*((je=z+ue*gt)-ae))+ue*(je+ue*(re+ue*Mt-je)-me),We=(Te=(Ne=U+ue*ct)+ue*((_e=J+ue*It)-Ne))+ue*(_e+ue*(oe+ue*Pt-_e)-Te),ke==0?(xe=Le,Oe=We,Re=Le,$e=We):(xe=Math.min(xe,Le),Oe=Math.min(Oe,We),Re=Math.max(Re,Le),$e=Math.max($e,We));return new l(Math.round(xe),Math.round(Oe),Math.round(Re-xe),Math.round($e-Oe))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,U,z=(D=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:U}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(vr.API),function(e){var t=function(s){var i,l,c,u,d,A,h,m,g,x;for(l=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(A=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(A+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,i.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var i,l,c,u,d,A=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,i[h]),A.fromCharCode.apply(A,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var i=new Uint8Array(s.length),l=s.length;l--;)i[l]=s.charCodeAt(l);return s=(i=UO(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var l=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),l=0;l<i.length;l+=1)switch(i[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var A=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(A.open("GET",c,!u),A.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(A.onload=function(){A.status===200?d(m(this.responseText)):d(void 0)}),A.send(null),u&&A.status===200)return m(A.responseText)}(a,s,i)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):Dg(()=>Promise.resolve().then(()=>Pmt),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):Dg(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var l=ga(i);return l==="undefined"?"undefined":l==="string"||i instanceof String?"string":l==="number"||i instanceof Number?"number":l==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(i,l){var c=document.createElement(i);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function i(l){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,l){return i.__proto__=l||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var A=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||A.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(A.width=u.width,A.height=u.height,A.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(A.value=u.value),A.addEventListener("load",function(){A.scrollTop=u.scrollTop,A.scrollLeft=u.scrollLeft},!0)),A}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,c.context2d.save(!0),l(this.prop.container,A)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,l):this.outputPdf(i,l)},s.prototype.outputPdf=function(i,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,l)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var l=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(i,l){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return l?l(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:l(i.inner.width,i.k),height:l(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,l,c,u){return i!=null&&(this.progress.val=i),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,l,c,u){return this.setProgress(i?this.progress.val+i:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,l){var c=this;return this.thenCore(i,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(A){return c.updateProgress(null,u),A}).then(u,d).then(function(A){return c.updateProgress(1),A})})},s.prototype.thenCore=function(i,l,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,l){return Promise.prototype.then.call(this,i,l)},s.prototype.thenList=function(i){var l=this;return i.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(i){i&&(i=i.bind(this));var l=Promise.prototype.catch.call(this,i);return s.convert(l,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,l,c){if(ga(i)==="object"){var u=i;i=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,A=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(A))g=h[A][1]/d,x=h[A][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(m=x,x=g,g=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:i}},e.html=function(i,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(GO):null;var c=new s(l);return l.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return Wq=e,this.internal.events.subscribe("postPutResources",function(){jN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Wq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jN!==void 0&&qq!==void 0&&this.internal.out("/Names <</JavaScript "+jN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var A=r.internal.newObject();d.push(A);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(A){for(var h,m=256*A.charCodeAt(4)+A.charCodeAt(5),g=A.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(A.charCodeAt(v+1))!==-1){h=256*A.charCodeAt(v+5)+A.charCodeAt(v+6),x={width:256*A.charCodeAt(v+7)+A.charCodeAt(v+8),height:h,numcomponents:A.charCodeAt(v+9)};break}m=256*A.charCodeAt(v+2)+A.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var zx,BN,Xq,Yq,Jq,UYe=function(){var e,t,r;function n(s){var i,l,c,u,d,A,h,m,g,x,v,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},A=null;;){switch(i=this.readUInt32(),g=(function(){var j,k;for(k=[],j=0;j<4;++j)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":A&&this.animation.frames.push(A),this.pos+=4,A={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,A.delay=1e3*d/u,A.disposeOp=this.data[this.pos++],A.blendOp=this.data[this.pos++],A.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(A!=null?A.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(v=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return A&&this.animation.frames.push(A),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,l;for(l=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(A,h,m,g){var x,v,y,w,_,j,k,I,E,S,B,R,P,F,L,M,ee,V,q,K,X,Z=Math.ceil((u.width-A)/m),G=Math.ceil((u.height-h)/g),D=u.width==Z&&u.height==G;for(F=i*Z,R=D?l:new Uint8Array(F*G),j=s.length,P=0,v=0;P<G&&c<j;){switch(s[c++]){case 0:for(w=ee=0;ee<F;w=ee+=1)R[v++]=s[c++];break;case 1:for(w=V=0;V<F;w=V+=1)x=s[c++],_=w<i?0:R[v-i],R[v++]=(x+_)%256;break;case 2:for(w=q=0;q<F;w=q+=1)x=s[c++],y=(w-w%i)/i,L=P&&R[(P-1)*F+y*i+w%i],R[v++]=(L+x)%256;break;case 3:for(w=K=0;K<F;w=K+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[v-i],L=P&&R[(P-1)*F+y*i+w%i],R[v++]=(x+Math.floor((_+L)/2))%256;break;case 4:for(w=X=0;X<F;w=X+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[v-i],P===0?L=M=0:(L=R[(P-1)*F+y*i+w%i],M=y&&R[(P-1)*F+(y-1)*i+w%i]),k=_+L-M,I=Math.abs(k-_),S=Math.abs(k-L),B=Math.abs(k-M),E=I<=S&&I<=B?_:S<=B?L:M,R[v++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!D){var U=((h+P*g)*u.width+A)*i,z=P*F;for(w=0;w<Z;w+=1){for(var J=0;J<i;J+=1)l[U++]=R[z++];U+=(m-1)*i}}P++}}return s=xYe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,i,l,c,u,d,A,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,i=A=0,h=l.length;A<h;i=A+=3)u[c++]=l[i],u[c++]=l[i+1],u[c++]=l[i+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,i){var l,c,u,d,A,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,A=x||i,d=h=0,c===1)for(;d<g;)m=x?4*i[d/4]:h,v=A[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?A[m++]:255,h=m;else for(;d<g;)m=x?4*i[d/4]:h,u[d++]=A[m++],u[d++]=A[m++],u[d++]=A[m++],u[d++]=l?A[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{t=Qr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,l,c,u,d,A,h,m;if(this.animation){for(m=[],l=d=0,A=(h=this.animation.frames).length;d<A;l=++d)i=h[l],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,m.push(i.image=e(c));return m}},n.prototype.renderFrame=function(s,i){var l,c,u;return l=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var i,l,c,u,d,A,h=this;return l=0,A=this.animation,u=A.numFrames,c=A.frames,d=A.numPlays,(i=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(l=i.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),i.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function QYe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=i,t+=3*i);var u=!0,d=[],A=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];A=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,j=e[t++],k=j>>6&1,I=1<<(7&j)+1,E=l,S=c,B=!1;j>>7&&(B=!0,E=t,S=I,t+=3*I);var R=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:v,y,width:w,height:_,has_local_palette:B,palette_offset:E,palette_size:S,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!k,delay:A,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,L){var M=this.frameInfo(F),ee=M.width*M.height,V=new Uint8Array(ee);Zq(e,M.data_offset,V,ee);var q=M.palette_offset,K=M.transparent_index;K===null&&(K=256);var X=M.width,Z=r-X,G=X,D=4*(M.y*r+M.x),U=4*((M.y+M.height)*r+M.x),z=D,J=4*Z;M.interlaced===!0&&(J+=4*r*7);for(var re=8,oe=0,se=V.length;oe<se;++oe){var le=V[oe];if(G===0&&(G=X,(z+=J)>=U&&(J=4*Z+4*r*(re-1),z=D+(X+Z)*(re<<1),re>>=1)),le===K)z+=4;else{var ue=e[q+3*le],ke=e[q+3*le+1],ae=e[q+3*le+2];L[z++]=ae,L[z++]=ke,L[z++]=ue,L[z++]=255}--G}},this.decodeAndBlitFrameRGBA=function(F,L){var M=this.frameInfo(F),ee=M.width*M.height,V=new Uint8Array(ee);Zq(e,M.data_offset,V,ee);var q=M.palette_offset,K=M.transparent_index;K===null&&(K=256);var X=M.width,Z=r-X,G=X,D=4*(M.y*r+M.x),U=4*((M.y+M.height)*r+M.x),z=D,J=4*Z;M.interlaced===!0&&(J+=4*r*7);for(var re=8,oe=0,se=V.length;oe<se;++oe){var le=V[oe];if(G===0&&(G=X,(z+=J)>=U&&(J=4*Z+4*r*(re-1),z=D+(X+Z)*(re<<1),re>>=1)),le===K)z+=4;else{var ue=e[q+3*le],ke=e[q+3*le+1],ae=e[q+3*le+2];L[z++]=ue,L[z++]=ke,L[z++]=ae,L[z++]=255}--G}}}function Zq(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,A=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)A|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=A&u;if(A>>=c,d-=c,v!==s){if(v===i)break;for(var y=v<l?v:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var j=_;if(h+w+(y!==v?1:0)>n)return void Na.log("Warning, gif stream longer than expected.");r[h++]=j;var k=h+=w;for(y!==v&&(r[h++]=j),_=y;w--;)_=g[_],r[--k]=255&_,_>>=8;x!==null&&l<4096&&(g[l++]=x<<8|j,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&Na.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function LI(e){var t,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),A=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),_=new Array(64),j=new Array(64),k=new Array(256),I=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(D,U){for(var z=0,J=0,re=new Array,oe=1;oe<=16;oe++){for(var se=1;se<=D[oe];se++)re[U[J]]=[],re[U[J]][0]=z,re[U[J]][1]=oe,J++,z++;z*=2}return re}function q(D){for(var U=D[0],z=D[1]-1;z>=0;)U&1<<z&&(v|=1<<y),z--,--y<0&&(v==255?(K(255),K(0)):K(v),y=7,v=0)}function K(D){x.push(D)}function X(D){K(D>>8&255),K(255&D)}function Z(D,U,z,J,re){for(var oe,se=re[0],le=re[240],ue=function(We,xe){var Oe,Re,$e,et,ct,gt,It,Mt,Pt,Qt,wt=0;for(Pt=0;Pt<8;++Pt){Oe=We[wt],Re=We[wt+1],$e=We[wt+2],et=We[wt+3],ct=We[wt+4],gt=We[wt+5],It=We[wt+6];var Br=Oe+(Mt=We[wt+7]),tr=Oe-Mt,an=Re+It,Sr=Re-It,$r=$e+gt,In=$e-gt,Pr=et+ct,fs=et-ct,mn=Br+Pr,la=Br-Pr,ja=an+$r,rn=an-$r;We[wt]=mn+ja,We[wt+4]=mn-ja;var gr=.707106781*(rn+la);We[wt+2]=la+gr,We[wt+6]=la-gr;var Ze=.382683433*((mn=fs+In)-(rn=Sr+tr)),mt=.5411961*mn+Ze,Je=1.306562965*rn+Ze,xt=.707106781*(ja=In+Sr),Et=tr+xt,bt=tr-xt;We[wt+5]=bt+mt,We[wt+3]=bt-mt,We[wt+1]=Et+Je,We[wt+7]=Et-Je,wt+=8}for(wt=0,Pt=0;Pt<8;++Pt){Oe=We[wt],Re=We[wt+8],$e=We[wt+16],et=We[wt+24],ct=We[wt+32],gt=We[wt+40],It=We[wt+48];var nr=Oe+(Mt=We[wt+56]),xr=Oe-Mt,Wr=Re+It,Zr=Re-It,qr=$e+gt,he=$e-gt,Ie=et+ct,Ce=et-ct,we=nr+Ie,Se=nr-Ie,Fe=Wr+qr,Ye=Wr-qr;We[wt]=we+Fe,We[wt+32]=we-Fe;var dt=.707106781*(Ye+Se);We[wt+16]=Se+dt,We[wt+48]=Se-dt;var Ge=.382683433*((we=Ce+he)-(Ye=Zr+xr)),rt=.5411961*we+Ge,it=1.306562965*Ye+Ge,Ft=.707106781*(Fe=he+Zr),zt=xr+Ft,Jt=xr-Ft;We[wt+40]=Jt+rt,We[wt+24]=Jt-rt,We[wt+8]=zt+it,We[wt+56]=zt-it,wt++}for(Pt=0;Pt<64;++Pt)Qt=We[Pt]*xe[Pt],m[Pt]=Qt>0?Qt+.5|0:Qt-.5|0;return m}(D,U),ke=0;ke<64;++ke)g[E[ke]]=ue[ke];var ae=g[0]-z;z=g[0],ae==0?q(J[0]):(q(J[h[oe=32767+ae]]),q(A[oe]));for(var Ne=63;Ne>0&&g[Ne]==0;)Ne--;if(Ne==0)return q(se),z;for(var je,_e=1;_e<=Ne;){for(var me=_e;g[_e]==0&&_e<=Ne;)++_e;var Te=_e-me;if(Te>=16){je=Te>>4;for(var Le=1;Le<=je;++Le)q(le);Te&=15}oe=32767+g[_e],q(re[(Te<<4)+h[oe]]),q(A[oe]),_e++}return Ne!=63&&q(se),z}function G(D){D=Math.min(Math.max(D,1),100),s!=D&&(function(U){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var re=i((z[J]*U+50)/100);re=Math.min(Math.max(re,1),255),l[E[J]]=re}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var le=i((oe[se]*U+50)/100);le=Math.min(Math.max(le,1),255),c[E[se]]=le}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,ae=0;ae<8;ae++)for(var Ne=0;Ne<8;Ne++)u[ke]=1/(l[E[ke]]*ue[ae]*ue[Ne]*8),d[ke]=1/(c[E[ke]]*ue[ae]*ue[Ne]*8),ke++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),s=D)}this.encode=function(D,U){U&&G(U),x=new Array,v=0,y=7,X(65496),X(65504),X(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),X(1),X(1),K(0),K(0),function(){X(65499),X(132),K(0);for(var Re=0;Re<64;Re++)K(l[Re]);K(1);for(var $e=0;$e<64;$e++)K(c[$e])}(),function(Re,$e){X(65472),X(17),K(8),X($e),X(Re),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(D.width,D.height),function(){X(65476),X(418),K(0);for(var Re=0;Re<16;Re++)K(S[Re+1]);for(var $e=0;$e<=11;$e++)K(B[$e]);K(16);for(var et=0;et<16;et++)K(R[et+1]);for(var ct=0;ct<=161;ct++)K(P[ct]);K(1);for(var gt=0;gt<16;gt++)K(F[gt+1]);for(var It=0;It<=11;It++)K(L[It]);K(17);for(var Mt=0;Mt<16;Mt++)K(M[Mt+1]);for(var Pt=0;Pt<=161;Pt++)K(ee[Pt])}(),X(65498),X(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var z=0,J=0,re=0;v=0,y=7,this.encode.displayName="_encode_";for(var oe,se,le,ue,ke,ae,Ne,je,_e,me=D.data,Te=D.width,Le=D.height,We=4*Te,xe=0;xe<Le;){for(oe=0;oe<We;){for(ke=We*xe+oe,Ne=-1,je=0,_e=0;_e<64;_e++)ae=ke+(je=_e>>3)*We+(Ne=4*(7&_e)),xe+je>=Le&&(ae-=We*(xe+1+je-Le)),oe+Ne>=We&&(ae-=oe+Ne-We+4),se=me[ae++],le=me[ae++],ue=me[ae++],w[_e]=(I[se]+I[le+256>>0]+I[ue+512>>0]>>16)-128,_[_e]=(I[se+768>>0]+I[le+1024>>0]+I[ue+1280>>0]>>16)-128,j[_e]=(I[se+1280>>0]+I[le+1536>>0]+I[ue+1792>>0]>>16)-128;z=Z(w,u,z,t,n),J=Z(_,d,J,r,a),re=Z(j,d,re,r,a),oe+=32}xe+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,q(Oe)}return X(65497),new Uint8Array(x)},e=e||50,function(){for(var D=String.fromCharCode,U=0;U<256;U++)k[U]=D(U)}(),t=V(S,B),r=V(F,L),n=V(R,P),a=V(M,ee),function(){for(var D=1,U=2,z=1;z<=15;z++){for(var J=D;J<U;J++)h[32767+J]=z,A[32767+J]=[],A[32767+J][1]=z,A[32767+J][0]=J;for(var re=-(U-1);re<=-D;re++)h[32767+re]=z,A[32767+re]=[],A[32767+re][1]=z,A[32767+re][0]=U-1+re;D<<=1,U<<=1}}(),function(){for(var D=0;D<256;D++)I[D]=19595*D,I[D+256>>0]=38470*D,I[D+512>>0]=7471*D+32768,I[D+768>>0]=-11059*D,I[D+1024>>0]=-21709*D,I[D+1280>>0]=32768*D+8421375,I[D+1536>>0]=-27439*D,I[D+1792>>0]=-5329*D}(),G(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eW(e){function t(S){if(!S)throw Error("assert :P")}function r(S,B,R){for(var P=0;4>P;P++)if(S[B+P]!=R.charCodeAt(P))return!0;return!1}function n(S,B,R,P,F){for(var L=0;L<F;L++)S[B+L]=R[P+L]}function a(S,B,R,P){for(var F=0;F<P;F++)S[B+F]=R}function s(S){return new Int32Array(S)}function i(S,B){for(var R=[],P=0;P<S;P++)R.push(new B);return R}function l(S,B){var R=[];return function P(F,L,M){for(var ee=M[L],V=0;V<ee&&(F.push(M.length>L+1?[]:new B),!(M.length<L+1));V++)P(F[V],L+1,M)}(R,0,S),R}var c=function(){var S=this;function B(T,H){for(var te=1<<H-1>>>0;T&te;)te>>>=1;return te?(T&te-1)+te:T}function R(T,H,te,ie,Ae){t(!(ie%te));do T[H+(ie-=te)]=Ae;while(0<ie)}function P(T,H,te,ie,Ae){if(t(2328>=Ae),512>=Ae)var pe=s(512);else if((pe=s(Ae))==null)return 0;return function(ge,ve,Ee,Be,Ue,st){var tt,qe,Bt=ve,pt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Ue!=0),t(Be!=null),t(ge!=null),t(0<Ee),qe=0;qe<Ue;++qe){if(15<Be[qe])return 0;++Qe[Be[qe]]}if(Qe[0]==Ue)return 0;for(Ve[1]=0,tt=1;15>tt;++tt){if(Qe[tt]>1<<tt)return 0;Ve[tt+1]=Ve[tt]+Qe[tt]}for(qe=0;qe<Ue;++qe)tt=Be[qe],0<Be[qe]&&(st[Ve[tt]++]=qe);if(Ve[15]==1)return(Be=new F).g=0,Be.value=st[0],R(ge,Bt,1,pt,Be),pt;var _t,Tt=-1,kt=pt-1,rr=0,Xt=1,br=1,er=1<<Ee;for(qe=0,tt=1,Ue=2;tt<=Ee;++tt,Ue<<=1){if(Xt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt])(Be=new F).g=tt,Be.value=st[qe++],R(ge,Bt+rr,Ue,er,Be),rr=B(rr,tt)}for(tt=Ee+1,Ue=2;15>=tt;++tt,Ue<<=1){if(Xt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt]){if(Be=new F,(rr&kt)!=Tt){for(Bt+=er,_t=1<<(Tt=tt)-Ee;15>Tt&&!(0>=(_t-=Qe[Tt]));)++Tt,_t<<=1;pt+=er=1<<(_t=Tt-Ee),ge[ve+(Tt=rr&kt)].g=_t+Ee,ge[ve+Tt].value=Bt-ve-Tt}Be.g=tt-Ee,Be.value=st[qe++],R(ge,Bt+(rr>>Ee),Ue,er,Be),rr=B(rr,tt)}}return Xt!=2*Ve[15]-1?0:pt}(T,H,te,ie,Ae,pe)}function F(){this.value=this.g=0}function L(){this.value=this.g=0}function M(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Rs,L)}function ee(T,H,te,ie){t(T!=null),t(H!=null),t(2147483648>ie),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=H,T.pa=te,T.Jd=H,T.Yc=te+ie,T.Zc=4<=ie?te+ie-4+1:te,oe(T)}function V(T,H){for(var te=0;0<H--;)te|=le(T,128)<<H;return te}function q(T,H){var te=V(T,H);return se(T)?-te:te}function K(T,H,te,ie){var Ae,pe=0;for(t(T!=null),t(H!=null),t(4294967288>ie),T.Sb=ie,T.Ra=0,T.u=0,T.h=0,4<ie&&(ie=4),Ae=0;Ae<ie;++Ae)pe+=H[te+Ae]<<8*Ae;T.Ra=pe,T.bb=ie,T.oa=H,T.pa=te}function X(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<Cf-8>>>0,++T.bb,T.u-=8;z(T)&&(T.h=1,T.u=0)}function Z(T,H){if(t(0<=H),!T.h&&H<=Ef){var te=U(T)&oA[H];return T.u+=H,X(T),te}return T.h=1,T.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(T){return T.Ra>>>(T.u&Cf-1)>>>0}function z(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>Cf}function J(T,H){T.u=H,T.h=z(T)}function re(T){T.u>=r0&&(t(T.u>=r0),X(T))}function oe(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function se(T){return V(T,1)}function le(T,H){var te=T.Ca;0>T.b&&oe(T);var ie=T.b,Ae=te*H>>>8,pe=(T.I>>>ie>Ae)+0;for(pe?(te-=Ae,T.I-=Ae+1<<ie>>>0):te=Ae+1,ie=te,Ae=0;256<=ie;)Ae+=8,ie>>=8;return ie=7^Ae+Io[ie],T.b-=ie,T.Ca=(te<<ie)-1,pe}function ue(T,H,te){T[H+0]=te>>24&255,T[H+1]=te>>16&255,T[H+2]=te>>8&255,T[H+3]=te>>0&255}function ke(T,H){return T[H+0]<<0|T[H+1]<<8}function ae(T,H){return ke(T,H)|T[H+2]<<16}function Ne(T,H){return ke(T,H)|ke(T,H+2)<<16}function je(T,H){var te=1<<H;return t(T!=null),t(0<H),T.X=s(te),T.X==null?0:(T.Mb=32-H,T.Xa=H,1)}function _e(T,H){t(T!=null),t(H!=null),t(T.Xa==H.Xa),n(H.X,0,T.X,0,1<<H.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function Te(T,H,te,ie){t(te!=null),t(ie!=null);var Ae=te[0],pe=ie[0];return Ae==0&&(Ae=(T*pe+H/2)/H),pe==0&&(pe=(H*Ae+T/2)/T),0>=Ae||0>=pe?0:(te[0]=Ae,ie[0]=pe,1)}function Le(T,H){return T+(1<<H)-1>>>H}function We(T,H){return((4278255360&T)+(4278255360&H)>>>0&4278255360)+((16711935&T)+(16711935&H)>>>0&16711935)>>>0}function xe(T,H){S[H]=function(te,ie,Ae,pe,ge,ve,Ee){var Be;for(Be=0;Be<ge;++Be){var Ue=S[T](ve[Ee+Be-1],Ae,pe+Be);ve[Ee+Be]=We(te[ie+Be],Ue)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(T,H){return((4278124286&(T^H))>>>1)+(T&H)>>>0}function $e(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function et(T,H){return $e(T+(T-H+.5>>1))}function ct(T,H,te){return Math.abs(H-te)-Math.abs(T-te)}function gt(T,H,te,ie,Ae,pe,ge){for(ie=pe[ge-1],te=0;te<Ae;++te)pe[ge+te]=ie=We(T[H+te],ie)}function It(T,H,te,ie,Ae){var pe;for(pe=0;pe<te;++pe){var ge=T[H+pe],ve=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((ve<<16)+ve));ie[Ae+pe]=(4278255360&ge)+Ee>>>0}}function Mt(T,H){H.jd=T>>0&255,H.hd=T>>8&255,H.ud=T>>16&255}function Pt(T,H,te,ie,Ae,pe){var ge;for(ge=0;ge<ie;++ge){var ve=H[te+ge],Ee=ve>>>8,Be=ve,Ue=255&(Ue=(Ue=ve>>>16)+((T.jd<<24>>24)*(Ee<<24>>24)>>>5));Be=255&(Be=(Be=Be+((T.hd<<24>>24)*(Ee<<24>>24)>>>5))+((T.ud<<24>>24)*(Ue<<24>>24)>>>5)),Ae[pe+ge]=(4278255360&ve)+(Ue<<16)+Be}}function Qt(T,H,te,ie,Ae){S[H]=function(pe,ge,ve,Ee,Be,Ue,st,tt,qe){for(Ee=st;Ee<tt;++Ee)for(st=0;st<qe;++st)Be[Ue++]=Ae(ve[ie(pe[ge++])])},S[T]=function(pe,ge,ve,Ee,Be,Ue,st){var tt=8>>pe.b,qe=pe.Ea,Bt=pe.K[0],pt=pe.w;if(8>tt)for(pe=(1<<pe.b)-1,pt=(1<<tt)-1;ge<ve;++ge){var Qe,Ve=0;for(Qe=0;Qe<qe;++Qe)Qe&pe||(Ve=ie(Ee[Be++])),Ue[st++]=Ae(Bt[Ve&pt]),Ve>>=tt}else S["VP8LMapColor"+te](Ee,Be,Bt,pt,Ue,st,ge,ve,qe)}}function wt(T,H,te,ie,Ae){for(te=H+te;H<te;){var pe=T[H++];ie[Ae++]=pe>>16&255,ie[Ae++]=pe>>8&255,ie[Ae++]=pe>>0&255}}function Br(T,H,te,ie,Ae){for(te=H+te;H<te;){var pe=T[H++];ie[Ae++]=pe>>16&255,ie[Ae++]=pe>>8&255,ie[Ae++]=pe>>0&255,ie[Ae++]=pe>>24&255}}function tr(T,H,te,ie,Ae){for(te=H+te;H<te;){var pe=(ge=T[H++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ie[Ae++]=pe,ie[Ae++]=ge}}function an(T,H,te,ie,Ae){for(te=H+te;H<te;){var pe=(ge=T[H++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ie[Ae++]=pe,ie[Ae++]=ge}}function Sr(T,H,te,ie,Ae){for(te=H+te;H<te;){var pe=T[H++];ie[Ae++]=pe>>0&255,ie[Ae++]=pe>>8&255,ie[Ae++]=pe>>16&255}}function $r(T,H,te,ie,Ae,pe){if(pe==0)for(te=H+te;H<te;)ue(ie,((pe=T[H++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),Ae+=32;else n(ie,Ae,T,H,te)}function In(T,H){S[H][0]=S[T+"0"],S[H][1]=S[T+"1"],S[H][2]=S[T+"2"],S[H][3]=S[T+"3"],S[H][4]=S[T+"4"],S[H][5]=S[T+"5"],S[H][6]=S[T+"6"],S[H][7]=S[T+"7"],S[H][8]=S[T+"8"],S[H][9]=S[T+"9"],S[H][10]=S[T+"10"],S[H][11]=S[T+"11"],S[H][12]=S[T+"12"],S[H][13]=S[T+"13"],S[H][14]=S[T+"0"],S[H][15]=S[T+"0"]}function Pr(T){return T==sp||T==gA||T==ud||T==i0}function fs(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function la(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fs,this.f.kb=new mn,this.sd=null}function ja(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function Ze(T,H){var te=T.T,ie=H.ba.f.RGBA,Ae=ie.eb,pe=ie.fb+T.ka*ie.A,ge=oi[H.ba.S],ve=T.y,Ee=T.O,Be=T.f,Ue=T.N,st=T.ea,tt=T.W,qe=H.cc,Bt=H.dc,pt=H.Mc,Qe=H.Nc,Ve=T.ka,_t=T.ka+T.T,Tt=T.U,kt=Tt+1>>1;for(Ve==0?ge(ve,Ee,null,null,Be,Ue,st,tt,Be,Ue,st,tt,Ae,pe,null,null,Tt):(ge(H.ec,H.fc,ve,Ee,qe,Bt,pt,Qe,Be,Ue,st,tt,Ae,pe-ie.A,Ae,pe,Tt),++te);Ve+2<_t;Ve+=2)qe=Be,Bt=Ue,pt=st,Qe=tt,Ue+=T.Rc,tt+=T.Rc,pe+=2*ie.A,ge(ve,(Ee+=2*T.fa)-T.fa,ve,Ee,qe,Bt,pt,Qe,Be,Ue,st,tt,Ae,pe-ie.A,Ae,pe,Tt);return Ee+=T.fa,T.j+_t<T.o?(n(H.ec,H.fc,ve,Ee,Tt),n(H.cc,H.dc,Be,Ue,kt),n(H.Mc,H.Nc,st,tt,kt),te--):1&_t||ge(ve,Ee,null,null,Be,Ue,st,tt,Be,Ue,st,tt,Ae,pe+ie.A,null,null,Tt),te}function mt(T,H,te){var ie=T.F,Ae=[T.J];if(ie!=null){var pe=T.U,ge=H.ba.S,ve=ge==jf||ge==ud;H=H.ba.f.RGBA;var Ee=[0],Be=T.ka;Ee[0]=T.T,T.Kb&&(Be==0?--Ee[0]:(--Be,Ae[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ee[0]=T.o-T.j-Be));var Ue=H.eb;Be=H.fb+Be*H.A,T=gn(ie,Ae[0],T.width,pe,Ee,Ue,Be+(ve?0:3),H.A),t(te==Ee),T&&Pr(ge)&&Al(Ue,Be,ve,pe,Ee,H.A)}return 0}function Je(T){var H=T.ma,te=H.ba.S,ie=11>te,Ae=te==s0||te==ap||te==jf||te==cd||te==12||Pr(te);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!iA(H.Oa,T,Ae?11:12))return 0;if(Ae&&Pr(te)&&Lt(),T.da)alert("todo:use_scaling");else{if(ie){if(H.Ib=gr,T.Kb){if(te=T.U+1>>1,H.memory=s(T.U+2*te),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+T.U,H.Mc=H.cc,H.Nc=H.dc+te,H.Ib=Ze,Lt()}}else alert("todo:EmitYUV");Ae&&(H.Jb=mt,ie&&Ke())}if(ie&&!zE){for(T=0;256>T;++T)Uj[T]=89858*(T-128)+Ms>>xu,lp[T]=-22014*(T-128)+Ms,Sb[T]=-45773*(T-128),Us[T]=113618*(T-128)+Ms>>xu;for(T=bA;T<fx;++T)H=76283*(T-16)+Ms>>xu,cp[T-bA]=zn(H,255),kb[T-bA]=zn(H+8>>4,15);zE=1}return 1}function xt(T){var H=T.ma,te=T.U,ie=T.T;return t(!(1&T.ka)),0>=te||0>=ie?0:(te=H.Ib(T,H),H.Jb!=null&&H.Jb(T,H,te),H.Dc+=te,1)}function Et(T){T.ma.memory=null}function bt(T,H,te,ie){return Z(T,8)!=47?0:(H[0]=Z(T,14)+1,te[0]=Z(T,14)+1,ie[0]=Z(T,1),Z(T,3)!=0?0:!T.h)}function nr(T,H){if(4>T)return T+1;var te=T-2>>1;return(2+(1&T)<<te)+Z(H,te)+1}function xr(T,H){return 120<H?H-120:1<=(te=((te=Ad[H-1])>>4)*T+(8-(15&te)))?te:1;var te}function Wr(T,H,te){var ie=U(te),Ae=T[H+=255&ie].g-8;return 0<Ae&&(J(te,te.u+8),ie=U(te),H+=T[H].value,H+=ie&(1<<Ae)-1),J(te,te.u+T[H].g),T[H].value}function Zr(T,H,te){return te.g+=T.g,te.value+=T.value<<H>>>0,t(8>=te.g),T.g}function qr(T,H,te){var ie=T.xc;return t((H=ie==0?0:T.vc[T.md*(te>>ie)+(H>>ie)])<T.Wb),T.Ya[H]}function he(T,H,te,ie){var Ae=T.ab,pe=T.c*H,ge=T.C;H=ge+H;var ve=te,Ee=ie;for(ie=T.Ta,te=T.Ua;0<Ae--;){var Be=T.gc[Ae],Ue=ge,st=H,tt=ve,qe=Ee,Bt=(Ee=ie,ve=te,Be.Ea);switch(t(Ue<st),t(st<=Be.nc),Be.hc){case 2:ix(tt,qe,(st-Ue)*Bt,Ee,ve);break;case 0:var pt=Ue,Qe=st,Ve=Ee,_t=ve,Tt=(er=Be).Ea;pt==0&&(Nb(tt,qe,null,null,1,Ve,_t),gt(tt,qe+1,0,0,Tt-1,Ve,_t+1),qe+=Tt,_t+=Tt,++pt);for(var kt=1<<er.b,rr=kt-1,Xt=Le(Tt,er.b),br=er.K,er=er.w+(pt>>er.b)*Xt;pt<Qe;){var Pn=br,$n=er,fn=1;for(rp(tt,qe,Ve,_t-Tt,1,Ve,_t);fn<Tt;){var ln=(fn&~rr)+kt;ln>Tt&&(ln=Tt),(0,id[Pn[$n++]>>8&15])(tt,qe+ +fn,Ve,_t+fn-Tt,ln-fn,Ve,_t+fn),fn=ln}qe+=Tt,_t+=Tt,++pt&rr||(er+=Xt)}st!=Be.nc&&n(Ee,ve-Bt,Ee,ve+(st-Ue-1)*Bt,Bt);break;case 1:for(Bt=tt,Qe=qe,Tt=(tt=Be.Ea)-(_t=tt&~(Ve=(qe=1<<Be.b)-1)),pt=Le(tt,Be.b),kt=Be.K,Be=Be.w+(Ue>>Be.b)*pt;Ue<st;){for(rr=kt,Xt=Be,br=new Oe,er=Qe+_t,Pn=Qe+tt;Qe<er;)Mt(rr[Xt++],br),cA(br,Bt,Qe,qe,Ee,ve),Qe+=qe,ve+=qe;Qe<Pn&&(Mt(rr[Xt++],br),cA(br,Bt,Qe,Tt,Ee,ve),Qe+=Tt,ve+=Tt),++Ue&Ve||(Be+=pt)}break;case 3:if(tt==Ee&&qe==ve&&0<Be.b){for(Qe=Ee,tt=Bt=ve+(st-Ue)*Bt-(_t=(st-Ue)*Le(Be.Ea,Be.b)),qe=Ee,Ve=ve,pt=[],_t=(Tt=_t)-1;0<=_t;--_t)pt[_t]=qe[Ve+_t];for(_t=Tt-1;0<=_t;--_t)Qe[tt+_t]=pt[_t];Ml(Be,Ue,st,Ee,Bt,Ee,ve)}else Ml(Be,Ue,st,tt,qe,Ee,ve)}ve=ie,Ee=te}Ee!=te&&n(ie,te,ve,Ee,pe)}function Ie(T,H){var te=T.V,ie=T.Ba+T.c*T.C,Ae=H-T.C;if(t(H<=T.l.o),t(16>=Ae),0<Ae){var pe=T.l,ge=T.Ta,ve=T.Ua,Ee=pe.width;if(he(T,Ae,te,ie),Ae=ve=[ve],t((te=T.C)<(ie=H)),t(pe.v<pe.va),ie>pe.o&&(ie=pe.o),te<pe.j){var Be=pe.j-te;te=pe.j,Ae[0]+=Be*Ee}if(te>=ie?te=0:(Ae[0]+=4*pe.v,pe.ka=te-pe.j,pe.U=pe.va-pe.v,pe.T=ie-te,te=1),te){if(ve=ve[0],11>(te=T.ca).S){var Ue=te.f.RGBA,st=(ie=te.S,Ae=pe.U,pe=pe.T,Be=Ue.eb,Ue.A),tt=pe;for(Ue=Ue.fb+T.Ma*Ue.A;0<tt--;){var qe=ge,Bt=ve,pt=Ae,Qe=Be,Ve=Ue;switch(ie){case Vi:lo(qe,Bt,pt,Qe,Ve);break;case s0:_i(qe,Bt,pt,Qe,Ve);break;case sp:_i(qe,Bt,pt,Qe,Ve),Al(Qe,Ve,0,pt,1,0);break;case hu:vc(qe,Bt,pt,Qe,Ve);break;case ap:$r(qe,Bt,pt,Qe,Ve,1);break;case gA:$r(qe,Bt,pt,Qe,Ve,1),Al(Qe,Ve,0,pt,1,0);break;case jf:$r(qe,Bt,pt,Qe,Ve,0);break;case ud:$r(qe,Bt,pt,Qe,Ve,0),Al(Qe,Ve,1,pt,1,0);break;case cd:uA(qe,Bt,pt,Qe,Ve);break;case i0:uA(qe,Bt,pt,Qe,Ve),pn(Qe,Ve,pt,1,0);break;case lx:Fo(qe,Bt,pt,Qe,Ve);break;default:t(0)}ve+=Ee,Ue+=st}T.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=te.height)}}T.C=H,t(T.C<=T.i)}function Ce(T){var H;if(0<T.ua)return 0;for(H=0;H<T.Wb;++H){var te=T.Ya[H].G,ie=T.Ya[H].H;if(0<te[1][ie[1]+0].g||0<te[2][ie[2]+0].g||0<te[3][ie[3]+0].g)return 0}return 1}function we(T,H,te,ie,Ae,pe){if(T.Z!=0){var ge=T.qd,ve=T.rd;for(t(pu[T.Z]!=null);H<te;++H)pu[T.Z](ge,ve,ie,Ae,ie,Ae,pe),ge=ie,ve=Ae,Ae+=pe;T.qd=ge,T.rd=ve}}function Se(T,H){var te=T.l.ma,ie=te.Z==0||te.Z==1?T.l.j:T.C;if(ie=T.C<ie?ie:T.C,t(H<=T.l.o),H>ie){var Ae=T.l.width,pe=te.ca,ge=te.tb+Ae*ie,ve=T.V,Ee=T.Ba+T.c*ie,Be=T.gc;t(T.ab==1),t(Be[0].hc==3),lA(Be[0],ie,H,ve,Ee,pe,ge),we(te,ie,H,pe,ge,Ae)}T.C=T.Ma=H}function Fe(T,H,te,ie,Ae,pe,ge){var ve=T.$/ie,Ee=T.$%ie,Be=T.m,Ue=T.s,st=te+T.$,tt=st;Ae=te+ie*Ae;var qe=te+ie*pe,Bt=280+Ue.ua,pt=T.Pb?ve:16777216,Qe=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,_t=st<qe?qr(Ue,Ee,ve):null;t(T.C<pe),t(qe<=Ae);var Tt=!1;e:for(;;){for(;Tt||st<qe;){var kt=0;if(ve>=pt){var rr=st-te;t((pt=T).Pb),pt.wd=pt.m,pt.xd=rr,0<pt.s.ua&&_e(pt.s.Wa,pt.s.vb),pt=ve+QE}if(Ee&Ve||(_t=qr(Ue,Ee,ve)),t(_t!=null),_t.Qb&&(H[st]=_t.qb,Tt=!0),!Tt)if(re(Be),_t.jc){kt=Be,rr=H;var Xt=st,br=_t.pd[U(kt)&Rs-1];t(_t.jc),256>br.g?(J(kt,kt.u+br.g),rr[Xt]=br.value,kt=0):(J(kt,kt.u+br.g-256),t(256<=br.value),kt=br.value),kt==0&&(Tt=!0)}else kt=Wr(_t.G[0],_t.H[0],Be);if(Be.h)break;if(Tt||256>kt){if(!Tt)if(_t.nd)H[st]=(_t.qb|kt<<8)>>>0;else{if(re(Be),Tt=Wr(_t.G[1],_t.H[1],Be),re(Be),rr=Wr(_t.G[2],_t.H[2],Be),Xt=Wr(_t.G[3],_t.H[3],Be),Be.h)break;H[st]=(Xt<<24|Tt<<16|kt<<8|rr)>>>0}if(Tt=!1,++st,++Ee>=ie&&(Ee=0,++ve,ge!=null&&ve<=pe&&!(ve%16)&&ge(T,ve),Qe!=null))for(;tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else if(280>kt){if(kt=nr(kt-256,Be),rr=Wr(_t.G[4],_t.H[4],Be),re(Be),rr=xr(ie,rr=nr(rr,Be)),Be.h)break;if(st-te<rr||Ae-st<kt)break e;for(Xt=0;Xt<kt;++Xt)H[st+Xt]=H[st+Xt-rr];for(st+=kt,Ee+=kt;Ee>=ie;)Ee-=ie,++ve,ge!=null&&ve<=pe&&!(ve%16)&&ge(T,ve);if(t(st<=Ae),Ee&Ve&&(_t=qr(Ue,Ee,ve)),Qe!=null)for(;tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else{if(!(kt<Bt))break e;for(Tt=kt-280,t(Qe!=null);tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt;kt=st,t(!(Tt>>>(rr=Qe).Xa)),H[kt]=rr.X[Tt],Tt=!0}Tt||t(Be.h==z(Be))}if(T.Pb&&Be.h&&st<Ae)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&_e(T.s.vb,T.s.Wa);else{if(Be.h)break e;ge!=null&&ge(T,ve>pe?pe:ve),T.a=0,T.$=st-te}return 1}return T.a=3,0}function Ye(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var H=T.Wa;H!=null&&(H.X=null),T.vb=null,t(T!=null)}function dt(){var T=new e0;return T==null?null:(T.a=0,T.xb=o0,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),ix=It,cA=Pt,lo=wt,_i=Br,uA=tr,Fo=an,vc=Sr,S.VP8LMapColor32b=si,S.VP8LMapColor8b=np,T)}function Ge(T,H,te,ie,Ae){var pe=1,ge=[T],ve=[H],Ee=ie.m,Be=ie.s,Ue=null,st=0;e:for(;;){if(te)for(;pe&&Z(Ee,1);){var tt=ge,qe=ve,Bt=ie,pt=1,Qe=Bt.m,Ve=Bt.gc[Bt.ab],_t=Z(Qe,2);if(Bt.Oc&1<<_t)pe=0;else{switch(Bt.Oc|=1<<_t,Ve.hc=_t,Ve.Ea=tt[0],Ve.nc=qe[0],Ve.K=[null],++Bt.ab,t(4>=Bt.ab),_t){case 0:case 1:Ve.b=Z(Qe,3)+2,pt=Ge(Le(Ve.Ea,Ve.b),Le(Ve.nc,Ve.b),0,Bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Tt,kt=Z(Qe,8)+1,rr=16<kt?0:4<kt?1:2<kt?2:3;if(tt[0]=Le(Ve.Ea,rr),Ve.b=rr,Tt=pt=Ge(kt,1,0,Bt,Ve.K)){var Xt,br=kt,er=Ve,Pn=1<<(8>>er.b),$n=s(Pn);if($n==null)Tt=0;else{var fn=er.K[0],ln=er.w;for($n[0]=er.K[0][0],Xt=1;Xt<1*br;++Xt)$n[Xt]=We(fn[ln+Xt],$n[Xt-1]);for(;Xt<4*Pn;++Xt)$n[Xt]=0;er.K[0]=null,er.K[0]=$n,Tt=1}}pt=Tt;break;case 2:break;default:t(0)}pe=pt}}if(ge=ge[0],ve=ve[0],pe&&Z(Ee,1)&&!(pe=1<=(st=Z(Ee,4))&&11>=st)){ie.a=3;break e}var ra;if(ra=pe)t:{var Gn,Yr,ua,jr=ie,Ur=ge,On=ve,Rn=st,li=te,Qs=jr.m,rs=jr.s,ns=[null],vs=1,Vl=0,Kn=Tf[Rn];r:for(;;){if(li&&Z(Qs,1)){var bs=Z(Qs,3)+2,wc=Le(Ur,bs),yA=Le(On,bs),Of=wc*yA;if(!Ge(wc,yA,0,jr,ns))break r;for(ns=ns[0],rs.xc=bs,Gn=0;Gn<Of;++Gn){var wA=ns[Gn]>>8&65535;ns[Gn]=wA,wA>=vs&&(vs=wA+1)}}if(Qs.h)break r;for(Yr=0;5>Yr;++Yr){var Ba=fl[Yr];!Yr&&0<Rn&&(Ba+=1<<Rn),Vl<Ba&&(Vl=Ba)}var up=i(vs*Kn,F),hx=vs,uo=i(hx,M);if(uo==null)var La=null;else t(65536>=hx),La=uo;var Df=s(Vl);if(La==null||Df==null||up==null){jr.a=1;break r}var EA=up;for(Gn=ua=0;Gn<vs;++Gn){var Do=La[Gn],CA=Do.G,Po=Do.H,dp=0,c0=1,mx=0;for(Yr=0;5>Yr;++Yr){Ba=fl[Yr],CA[Yr]=EA,Po[Yr]=ua,!Yr&&0<Rn&&(Ba+=1<<Rn);a:{var Ap,px=Ba,fp=jr,u0=Df,KE=EA,qE=ua,hp=0,pd=fp.m,Hj=Z(pd,1);if(a(u0,0,0,px),Hj){var WE=Z(pd,1)+1,XE=Z(pd,1),jb=Z(pd,XE==0?1:8);u0[jb]=1,WE==2&&(u0[jb=Z(pd,8)]=1);var d0=1}else{var Bb=s(19),Tb=Z(pd,4)+4;if(19<Tb){fp.a=3;var mp=0;break a}for(Ap=0;Ap<Tb;++Ap)Bb[dd[Ap]]=Z(pd,3);var gx=void 0,A0=void 0,YE=fp,JE=Bb,gd=px,pp=u0,xx=0,Ec=YE.m,f0=8,Ib=i(128,F);n:for(;P(Ib,0,7,JE,19);){if(Z(Ec,1)){var ZE=2+2*Z(Ec,3);if((gx=2+Z(Ec,ZE))>gd)break n}else gx=gd;for(A0=0;A0<gd&&gx--;){re(Ec);var Fb=Ib[0+(127&U(Ec))];J(Ec,Ec.u+Fb.g);var Pf=Fb.value;if(16>Pf)pp[A0++]=Pf,Pf!=0&&(f0=Pf);else{var eC=Pf==16,Ob=Pf-16,Db=Hl[Ob],Pb=Z(Ec,cx[Ob])+Db;if(A0+Pb>gd)break n;for(var tC=eC?f0:0;0<Pb--;)pp[A0++]=tC}}xx=1;break n}xx||(YE.a=3),d0=xx}(d0=d0&&!pd.h)&&(hp=P(KE,qE,8,u0,px)),d0&&hp!=0?mp=hp:(fp.a=3,mp=0)}if(mp==0)break r;if(c0&&Bf[Yr]==1&&(c0=EA[ua].g==0),dp+=EA[ua].g,ua+=mp,3>=Yr){var Rf,vx=Df[0];for(Rf=1;Rf<Ba;++Rf)Df[Rf]>vx&&(vx=Df[Rf]);mx+=vx}}if(Do.nd=c0,Do.Qb=0,c0&&(Do.qb=(CA[3][Po[3]+0].value<<24|CA[1][Po[1]+0].value<<16|CA[2][Po[2]+0].value)>>>0,dp==0&&256>CA[0][Po[0]+0].value&&(Do.Qb=1,Do.qb+=CA[0][Po[0]+0].value<<8)),Do.jc=!Do.Qb&&6>mx,Do.jc){var gp,xd=Do;for(gp=0;gp<Rs;++gp){var vu=gp,vd=xd.pd[vu],xp=xd.G[0][xd.H[0]+vu];256<=xp.value?(vd.g=xp.g+256,vd.value=xp.value):(vd.g=0,vd.value=0,vu>>=Zr(xp,8,vd),vu>>=Zr(xd.G[1][xd.H[1]+vu],16,vd),vu>>=Zr(xd.G[2][xd.H[2]+vu],0,vd),Zr(xd.G[3][xd.H[3]+vu],24,vd))}}}rs.vc=ns,rs.Wb=vs,rs.Ya=La,rs.yc=up,ra=1;break t}ra=0}if(!(pe=ra)){ie.a=3;break e}if(0<st){if(Be.ua=1<<st,!je(Be.Wa,st)){ie.a=1,pe=0;break e}}else Be.ua=0;var vp=ie,Rb=ge,rC=ve,Lb=vp.s,Mb=Lb.xc;if(vp.c=Rb,vp.i=rC,Lb.md=Le(Rb,Mb),Lb.wc=Mb==0?-1:(1<<Mb)-1,te){ie.xb=VE;break e}if((Ue=s(ge*ve))==null){ie.a=1,pe=0;break e}pe=(pe=Fe(ie,Ue,0,ge,ve,ve,null))&&!Ee.h;break e}return pe?(Ae!=null?Ae[0]=Ue:(t(Ue==null),t(te)),ie.$=0,te||Ye(Be)):Ye(Be),pe}function rt(T,H){var te=T.c*T.i,ie=te+H+16*H;return t(T.c<=H),T.V=s(ie),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+te+H,1)}function it(T,H){var te=T.C,ie=H-te,Ae=T.V,pe=T.Ba+T.c*te;for(t(H<=T.l.o);0<ie;){var ge=16<ie?16:ie,ve=T.l.ma,Ee=T.l.width,Be=Ee*ge,Ue=ve.ca,st=ve.tb+Ee*te,tt=T.Ta,qe=T.Ua;he(T,ge,Ae,pe),va(tt,qe,Ue,st,Be),we(ve,te,te+ge,Ue,st,Ee),ie-=ge,Ae+=ge*T.c,te+=ge}t(te==H),T.C=T.Ma=H}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function zt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function H(te,ie,Ae){for(var pe=Ae[ie],ge=0;ge<pe&&(te.push(Ae.length>ie+1?[]:0),!(Ae.length<ie+1));ge++)H(te[ge],ie+1,Ae)}(T,0,[3,11]),T}()}function Gt(){this.jb=s(3),this.Wc=l([4,8],Ht),this.Xc=l([4,17],Ht)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _o(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new Ps}function ms(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ni(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new Ft,this.Kc=new zt,this.ed=new kr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new _o,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,G),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ms),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=l([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wi(){var T=new ni;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Ls||(Ls=Xh)),T}function xa(T,H,te){return T.a==0&&(T.a=H,T.sc=te,T.cb=0),0}function ai(T,H,te){return 3<=te&&T[H+0]==157&&T[H+1]==1&&T[H+2]==42}function Zd(T,H){if(T==null)return 0;if(T.a=0,T.sc="OK",H==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var te=H.data,ie=H.w,Ae=H.ha;if(4>Ae)return xa(T,7,"Truncated header.");var pe=te[ie+0]|te[ie+1]<<8|te[ie+2]<<16,ge=T.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return xa(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(T,4,"Frame not displayable.");ie+=3,Ae-=3;var ve=T.Kc;if(ge.Rb){if(7>Ae)return xa(T,7,"cannot parse picture header");if(!ai(te,ie,Ae))return xa(T,3,"Bad code word");ve.c=16383&(te[ie+4]<<8|te[ie+3]),ve.Td=te[ie+4]>>6,ve.i=16383&(te[ie+6]<<8|te[ie+5]),ve.Ud=te[ie+6]>>6,ie+=7,Ae-=7,T.za=ve.c+15>>4,T.Ub=ve.i+15>>4,H.width=ve.c,H.height=ve.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,a((pe=T.Pa).jb,0,255,pe.jb.length),t((pe=T.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>Ae)return xa(T,7,"bad partition length");ee(pe=T.m,te,ie,ge.ub),ie+=ge.ub,Ae-=ge.ub,ge.Rb&&(ve.Ld=se(pe),ve.Kd=se(pe)),ve=T.Qa;var Ee,Be=T.Pa;if(t(pe!=null),t(ve!=null),ve.Cb=se(pe),ve.Cb){if(ve.Bb=se(pe),se(pe)){for(ve.Fb=se(pe),Ee=0;4>Ee;++Ee)ve.Zb[Ee]=se(pe)?q(pe,7):0;for(Ee=0;4>Ee;++Ee)ve.Lb[Ee]=se(pe)?q(pe,6):0}if(ve.Bb)for(Ee=0;3>Ee;++Ee)Be.jb[Ee]=se(pe)?V(pe,8):255}else ve.Bb=0;if(pe.Ka)return xa(T,3,"cannot parse segment header");if((ve=T.ed).zd=se(pe),ve.Tb=V(pe,6),ve.wb=V(pe,3),ve.Pc=se(pe),ve.Pc&&se(pe)){for(Be=0;4>Be;++Be)se(pe)&&(ve.vd[Be]=q(pe,6));for(Be=0;4>Be;++Be)se(pe)&&(ve.od[Be]=q(pe,6))}if(T.L=ve.Tb==0?0:ve.zd?1:2,pe.Ka)return xa(T,3,"cannot parse filter header");var Ue=Ae;if(Ae=Ee=ie,ie=Ee+Ue,ve=Ue,T.Xb=(1<<V(T.m,2))-1,Ue<3*(Be=T.Xb))te=7;else{for(Ee+=3*Be,ve-=3*Be,Ue=0;Ue<Be;++Ue){var st=te[Ae+0]|te[Ae+1]<<8|te[Ae+2]<<16;st>ve&&(st=ve),ee(T.Jc[+Ue],te,Ee,st),Ee+=st,ve-=st,Ae+=3}ee(T.Jc[+Be],te,Ee,ve),te=Ee<ie?0:5}if(te!=0)return xa(T,te,"cannot parse partitions");for(te=V(Ee=T.m,7),Ae=se(Ee)?q(Ee,4):0,ie=se(Ee)?q(Ee,4):0,ve=se(Ee)?q(Ee,4):0,Be=se(Ee)?q(Ee,4):0,Ee=se(Ee)?q(Ee,4):0,Ue=T.Qa,st=0;4>st;++st){if(Ue.Cb){var tt=Ue.Zb[st];Ue.Fb||(tt+=te)}else{if(0<st){T.pb[st]=T.pb[0];continue}tt=te}var qe=T.pb[st];qe.Sc[0]=ip[zn(tt+Ae,127)],qe.Sc[1]=op[zn(tt+0,127)],qe.Eb[0]=2*ip[zn(tt+ie,127)],qe.Eb[1]=101581*op[zn(tt+ve,127)]>>16,8>qe.Eb[1]&&(qe.Eb[1]=8),qe.Qc[0]=ip[zn(tt+Be,117)],qe.Qc[1]=op[zn(tt+Ee,127)],qe.lc=tt+Ee}if(!ge.Rb)return xa(T,4,"Not a key frame.");for(se(pe),ge=T.Pa,te=0;4>te;++te){for(Ae=0;8>Ae;++Ae)for(ie=0;3>ie;++ie)for(ve=0;11>ve;++ve)Be=le(pe,If[te][Ae][ie][ve])?V(pe,8):mu[te][Ae][ie][ve],ge.Wc[te][Ae].Yb[ie][ve]=Be;for(Ae=0;17>Ae;++Ae)ge.Xc[te][Ae]=ge.Wc[te][HE[Ae]]}return T.kc=se(pe),T.kc&&(T.Bd=V(pe,8)),T.cb=1}function Xh(T,H,te,ie,Ae,pe,ge){var ve=H[Ae].Yb[te];for(te=0;16>Ae;++Ae){if(!le(T,ve[te+0]))return Ae;for(;!le(T,ve[te+1]);)if(ve=H[++Ae].Yb[0],te=0,Ae==16)return 16;var Ee=H[Ae+1].Yb;if(le(T,ve[te+2])){var Be=T,Ue=0;if(le(Be,(tt=ve)[(st=te)+3]))if(le(Be,tt[st+6])){for(ve=0,st=2*(Ue=le(Be,tt[st+8]))+(tt=le(Be,tt[st+9+Ue])),Ue=0,tt=qa[st];tt[ve];++ve)Ue+=Ue+le(Be,tt[ve]);Ue+=3+(8<<st)}else le(Be,tt[st+7])?(Ue=7+2*le(Be,165),Ue+=le(Be,145)):Ue=5+le(Be,159);else Ue=le(Be,tt[st+4])?3+le(Be,tt[st+5]):2;ve=Ee[2]}else Ue=1,ve=Ee[1];Ee=ge+Un[Ae],0>(Be=T).b&&oe(Be);var st,tt=Be.b,qe=(st=Be.Ca>>1)-(Be.I>>tt)>>31;--Be.b,Be.Ca+=qe,Be.Ca|=1,Be.I-=(st+1&qe)<<tt,pe[Ee]=((Ue^qe)-qe)*ie[(0<Ae)+0]}return 16}function eu(T){var H=T.rb[T.sb-1];H.la=0,H.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function pf(T,H){if(T==null)return 0;if(H==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Zd(T,H))return 0;if(t(T.cb),H.ac==null||H.ac(H)){H.ob&&(T.L=0);var te=md[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=H.v-te>>4,T.zb=H.j-te>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=H.o+15+te>>4,T.Hb=H.va+15+te>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var ie=T.ed;for(te=0;4>te;++te){var Ae;if(T.Qa.Cb){var pe=T.Qa.Lb[te];T.Qa.Fb||(pe+=ie.Tb)}else pe=ie.Tb;for(Ae=0;1>=Ae;++Ae){var ge=T.gd[te][Ae],ve=pe;if(ie.Pc&&(ve+=ie.vd[0],Ae&&(ve+=ie.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ee=ve;0<ie.wb&&(Ee=4<ie.wb?Ee>>2:Ee>>1)>9-ie.wb&&(Ee=9-ie.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*ve+Ee,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=Ae}}}te=0}else xa(T,6,"Frame setup failed"),te=T.a;if(te=te==0){if(te){T.$c=0,0<T.Aa||(T.Ic=$E);e:{te=T.Ic,ie=4*(Ee=T.za);var Be=32*Ee,Ue=Ee+1,st=0<T.L?Ee*(0<T.Aa?2:1):0,tt=(T.Aa==2?2:1)*Ee;if((ge=ie+832+(Ae=3*(16*te+md[T.L])/2*Be)+(pe=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)te=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=s(ge),T.Fc=0,T.Ec==null){te=xa(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,ve=T.Fc,T.Ac=ge,T.Bc=ve,ve+=ie,T.Gd=i(Be,ms),T.Hd=0,T.rb=i(Ue+1,on),T.sb=1,T.wa=st?i(st,sn):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ee),t(!0),T.oc=ge,T.pc=ve,ve+=832,T.ya=i(tt,hs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ee),T.R=16*Ee,T.B=8*Ee,Ee=(Be=md[T.L])*T.R,Be=Be/2*T.B,T.sa=ge,T.ta=ve+Ee,T.qa=T.sa,T.ra=T.ta+16*te*T.R+Be,T.Ha=T.qa,T.Ia=T.ra+8*te*T.B+Be,T.$c=0,ve+=Ae,T.mb=pe?ge:null,T.nb=pe?ve:null,t(ve+pe<=T.Fc+T.Vb),eu(T),a(T.Ac,T.Bc,0,ie),te=1}}if(te){if(H.ka=0,H.y=T.sa,H.O=T.ta,H.f=T.qa,H.N=T.ra,H.ea=T.Ha,H.Vd=T.Ia,H.fa=T.R,H.Rc=T.B,H.F=null,H.J=0,!ld){for(te=-255;255>=te;++te)ts[255+te]=0>te?-te:te;for(te=-1020;1020>=te;++te)Ul[1020+te]=-128>te?-128:127<te?127:te;for(te=-112;112>=te;++te)mA[112+te]=-16>te?-16:15<te?15:te;for(te=-255;510>=te;++te)pA[255+te]=0>te?0:255<te?255:te;ld=1}Au=So,bc=ru,yc=Tl,xs=Vn,Oo=nu,Ga=tu,Nf=ou,fu=gc,n0=nA,dA=yf,AA=rA,fA=td,_f=rd,a0=lu,hA=dl,od=Qi,Sf=gs,Ka=Zh,co[0]=Mi,co[1]=Yh,co[2]=Ol,co[3]=Jh,co[4]=ko,co[5]=Dl,co[6]=oo,co[7]=jo,co[8]=pc,co[9]=au,fd[0]=Il,fd[1]=xf,fd[2]=fc,fd[3]=tA,fd[4]=ca,fd[5]=mc,fd[6]=Fl,hl[0]=Pl,hl[1]=gf,hl[2]=vf,hl[3]=Bo,hl[4]=bn,hl[5]=ps,hl[6]=su,te=1}else te=0}te&&(te=function(qe,Bt){for(qe.M=0;qe.M<qe.Va;++qe.M){var pt,Qe=qe.Jc[qe.M&qe.Xb],Ve=qe.m,_t=qe;for(pt=0;pt<_t.za;++pt){var Tt=Ve,kt=_t,rr=kt.Ac,Xt=kt.Bc+4*pt,br=kt.zc,er=kt.ya[kt.aa+pt];if(kt.Qa.Bb?er.$b=le(Tt,kt.Pa.jb[0])?2+le(Tt,kt.Pa.jb[2]):le(Tt,kt.Pa.jb[1]):er.$b=0,kt.kc&&(er.Ad=le(Tt,kt.Bd)),er.Za=!le(Tt,145)+0,er.Za){var Pn=er.Ob,$n=0;for(kt=0;4>kt;++kt){var fn,ln=br[0+kt];for(fn=0;4>fn;++fn){ln=_b[rr[Xt+fn]][ln];for(var ra=xA[le(Tt,ln[0])];0<ra;)ra=xA[2*ra+le(Tt,ln[ra])];ln=-ra,rr[Xt+fn]=ln}n(Pn,$n,rr,Xt,4),$n+=4,br[0+kt]=ln}}else ln=le(Tt,156)?le(Tt,128)?1:3:le(Tt,163)?2:0,er.Ob[0]=ln,a(rr,Xt,ln,4),a(br,0,ln,4);er.Dd=le(Tt,142)?le(Tt,114)?le(Tt,183)?1:3:2:0}if(_t.m.Ka)return xa(qe,7,"Premature end-of-partition0 encountered.");for(;qe.ja<qe.za;++qe.ja){if(_t=Qe,Tt=(Ve=qe).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],pt=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?pt.Ad:0)Tt.la=rr.la=0,pt.Za||(Tt.Na=rr.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var Gn,Yr;if(Tt=rr,rr=_t,Xt=Ve.Pa.Xc,br=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[br.$b],kt=br.ad,Pn=0,$n=Ve.rb[Ve.sb-1],ln=fn=0,a(kt,Pn,0,384),br.Za)var ua=0,jr=Xt[3];else{ra=s(16);var Ur=Tt.Na+$n.Na;if(Ur=Ls(rr,Xt[1],Ur,er.Eb,0,ra,0),Tt.Na=$n.Na=(0<Ur)+0,1<Ur)Au(ra,0,kt,Pn);else{var On=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)kt[Pn+ra]=On}ua=1,jr=Xt[0]}var Rn=15&Tt.la,li=15&$n.la;for(ra=0;4>ra;++ra){var Qs=1&li;for(On=Yr=0;4>On;++On)Rn=Rn>>1|(Qs=(Ur=Ls(rr,jr,Ur=Qs+(1&Rn),er.Sc,ua,kt,Pn))>ua)<<7,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=4,li=li>>1|Qs<<7,fn=(fn<<8|Yr)>>>0}for(jr=Rn,ua=li>>4,Gn=0;4>Gn;Gn+=2){for(Yr=0,Rn=Tt.la>>4+Gn,li=$n.la>>4+Gn,ra=0;2>ra;++ra){for(Qs=1&li,On=0;2>On;++On)Ur=Qs+(1&Rn),Rn=Rn>>1|(Qs=0<(Ur=Ls(rr,Xt[2],Ur,er.Qc,0,kt,Pn)))<<3,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=2,li=li>>1|Qs<<5}ln|=Yr<<4*Gn,jr|=Rn<<4<<Gn,ua|=(240&li)<<Gn}Tt.la=jr,$n.la=ua,br.Hc=fn,br.Gc=ln,br.ia=43690&ln?0:er.ia,Xt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[pt.$b][pt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),_t.Ka)return xa(qe,7,"Premature end-of-file encountered.")}if(eu(qe),Ve=Bt,_t=1,pt=(Qe=qe).D,Tt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(pt.M=Qe.M,pt.uc=Tt,To(Qe,pt),_t=1,pt=(Yr=Qe.D).Nb,Tt=(ln=md[Qe.L])*Qe.R,rr=ln/2*Qe.B,ra=16*pt*Qe.R,On=8*pt*Qe.B,Xt=Qe.sa,br=Qe.ta-Tt+ra,er=Qe.qa,kt=Qe.ra-rr+On,Pn=Qe.Ha,$n=Qe.Ia-rr+On,li=(Rn=Yr.M)==0,fn=Rn>=Qe.Va-1,Qe.Aa==2&&To(Qe,Yr),Yr.uc)for(Qs=(Ur=Qe).D.M,t(Ur.D.uc),Yr=Ur.yb;Yr<Ur.Hb;++Yr){ua=Yr,jr=Qs;var rs=(ns=(Ba=Ur).D).Nb;Gn=Ba.R;var ns=ns.wa[ns.Y+ua],vs=Ba.sa,Vl=Ba.ta+16*rs*Gn+16*ua,Kn=ns.dd,bs=ns.tc;if(bs!=0)if(t(3<=bs),Ba.L==1)0<ua&&od(vs,Vl,Gn,bs+4),ns.La&&Ka(vs,Vl,Gn,bs),0<jr&&hA(vs,Vl,Gn,bs+4),ns.La&&Sf(vs,Vl,Gn,bs);else{var wc=Ba.B,yA=Ba.qa,Of=Ba.ra+8*rs*wc+8*ua,wA=Ba.Ha,Ba=Ba.Ia+8*rs*wc+8*ua;rs=ns.ld,0<ua&&(fu(vs,Vl,Gn,bs+4,Kn,rs),dA(yA,Of,wA,Ba,wc,bs+4,Kn,rs)),ns.La&&(fA(vs,Vl,Gn,bs,Kn,rs),a0(yA,Of,wA,Ba,wc,bs,Kn,rs)),0<jr&&(Nf(vs,Vl,Gn,bs+4,Kn,rs),n0(yA,Of,wA,Ba,wc,bs+4,Kn,rs)),ns.La&&(AA(vs,Vl,Gn,bs,Kn,rs),_f(yA,Of,wA,Ba,wc,bs,Kn,rs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Yr=16*Rn,Rn=16*(Rn+1),li?(Ve.y=Qe.sa,Ve.O=Qe.ta+ra,Ve.f=Qe.qa,Ve.N=Qe.ra+On,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+On):(Yr-=ln,Ve.y=Xt,Ve.O=br,Ve.f=er,Ve.N=kt,Ve.ea=Pn,Ve.W=$n),fn||(Rn-=ln),Rn>Ve.o&&(Rn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Yr<Rn&&(Ve.J=sA(Qe,Ve,Yr,Rn-Yr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){_t=xa(Qe,3,"Could not decode alpha data.");break e}Yr<Ve.j&&(ln=Ve.j-Yr,Yr=Ve.j,t(!(1&ln)),Ve.O+=Qe.R*ln,Ve.N+=Qe.B*(ln>>1),Ve.W+=Qe.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),Yr<Rn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Yr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Rn-Yr,_t=Ve.put(Ve))}pt+1!=Qe.Ic||fn||(n(Qe.sa,Qe.ta-Tt,Xt,br+16*Qe.R,Tt),n(Qe.qa,Qe.ra-rr,er,kt+8*Qe.B,rr),n(Qe.Ha,Qe.Ia-rr,Pn,$n+8*Qe.B,rr))}if(!_t)return xa(qe,6,"Output aborted.")}return 1}(T,H)),H.bc!=null&&H.bc(H),te&=1}return te?(T.cb=0,te):0}function Ei(T,H,te,ie,Ae){Ae=T[H+te+32*ie]+(Ae>>3),T[H+te+32*ie]=-256&Ae?0>Ae?0:255:Ae}function eA(T,H,te,ie,Ae,pe){Ei(T,H,0,te,ie+Ae),Ei(T,H,1,te,ie+pe),Ei(T,H,2,te,ie-pe),Ei(T,H,3,te,ie-Ae)}function Fn(T){return(20091*T>>16)+T}function Ci(T,H,te,ie){var Ae,pe=0,ge=s(16);for(Ae=0;4>Ae;++Ae){var ve=T[H+0]+T[H+8],Ee=T[H+0]-T[H+8],Be=(35468*T[H+4]>>16)-Fn(T[H+12]),Ue=Fn(T[H+4])+(35468*T[H+12]>>16);ge[pe+0]=ve+Ue,ge[pe+1]=Ee+Be,ge[pe+2]=Ee-Be,ge[pe+3]=ve-Ue,pe+=4,H++}for(Ae=pe=0;4>Ae;++Ae)ve=(T=ge[pe+0]+4)+ge[pe+8],Ee=T-ge[pe+8],Be=(35468*ge[pe+4]>>16)-Fn(ge[pe+12]),Ei(te,ie,0,0,ve+(Ue=Fn(ge[pe+4])+(35468*ge[pe+12]>>16))),Ei(te,ie,1,0,Ee+Be),Ei(te,ie,2,0,Ee-Be),Ei(te,ie,3,0,ve-Ue),pe++,ie+=32}function tu(T,H,te,ie){var Ae=T[H+0]+4,pe=35468*T[H+4]>>16,ge=Fn(T[H+4]),ve=35468*T[H+1]>>16;eA(te,ie,0,Ae+ge,T=Fn(T[H+1]),ve),eA(te,ie,1,Ae+pe,T,ve),eA(te,ie,2,Ae-pe,T,ve),eA(te,ie,3,Ae-ge,T,ve)}function ru(T,H,te,ie,Ae){Ci(T,H,te,ie),Ae&&Ci(T,H+16,te,ie+4)}function Tl(T,H,te,ie){bc(T,H+0,te,ie,1),bc(T,H+32,te,ie+128,1)}function Vn(T,H,te,ie){var Ae;for(T=T[H+0]+4,Ae=0;4>Ae;++Ae)for(H=0;4>H;++H)Ei(te,ie,H,Ae,T)}function nu(T,H,te,ie){T[H+0]&&xs(T,H+0,te,ie),T[H+16]&&xs(T,H+16,te,ie+4),T[H+32]&&xs(T,H+32,te,ie+128),T[H+48]&&xs(T,H+48,te,ie+128+4)}function So(T,H,te,ie){var Ae,pe=s(16);for(Ae=0;4>Ae;++Ae){var ge=T[H+0+Ae]+T[H+12+Ae],ve=T[H+4+Ae]+T[H+8+Ae],Ee=T[H+4+Ae]-T[H+8+Ae],Be=T[H+0+Ae]-T[H+12+Ae];pe[0+Ae]=ge+ve,pe[8+Ae]=ge-ve,pe[4+Ae]=Be+Ee,pe[12+Ae]=Be-Ee}for(Ae=0;4>Ae;++Ae)ge=(T=pe[0+4*Ae]+3)+pe[3+4*Ae],ve=pe[1+4*Ae]+pe[2+4*Ae],Ee=pe[1+4*Ae]-pe[2+4*Ae],Be=T-pe[3+4*Ae],te[ie+0]=ge+ve>>3,te[ie+16]=Be+Ee>>3,te[ie+32]=ge-ve>>3,te[ie+48]=Be-Ee>>3,ie+=64}function Ac(T,H,te){var ie,Ae=H-32,pe=ii,ge=255-T[Ae-1];for(ie=0;ie<te;++ie){var ve,Ee=pe,Be=ge+T[H-1];for(ve=0;ve<te;++ve)T[H+ve]=Ee[Be+T[Ae+ve]];H+=32}}function Yh(T,H){Ac(T,H,4)}function gf(T,H){Ac(T,H,8)}function xf(T,H){Ac(T,H,16)}function fc(T,H){var te;for(te=0;16>te;++te)n(T,H+32*te,T,H-32,16)}function tA(T,H){var te;for(te=16;0<te;--te)a(T,H,T[H-1],16),H+=32}function hc(T,H,te){var ie;for(ie=0;16>ie;++ie)a(H,te+32*ie,T,16)}function Il(T,H){var te,ie=16;for(te=0;16>te;++te)ie+=T[H-1+32*te]+T[H+te-32];hc(ie>>5,T,H)}function ca(T,H){var te,ie=8;for(te=0;16>te;++te)ie+=T[H-1+32*te];hc(ie>>4,T,H)}function mc(T,H){var te,ie=8;for(te=0;16>te;++te)ie+=T[H+te-32];hc(ie>>4,T,H)}function Fl(T,H){hc(128,T,H)}function Fr(T,H,te){return T+2*H+te+2>>2}function Ol(T,H){var te,ie=H-32;for(ie=new Uint8Array([Fr(T[ie-1],T[ie+0],T[ie+1]),Fr(T[ie+0],T[ie+1],T[ie+2]),Fr(T[ie+1],T[ie+2],T[ie+3]),Fr(T[ie+2],T[ie+3],T[ie+4])]),te=0;4>te;++te)n(T,H+32*te,ie,0,ie.length)}function Jh(T,H){var te=T[H-1],ie=T[H-1+32],Ae=T[H-1+64],pe=T[H-1+96];ue(T,H+0,16843009*Fr(T[H-1-32],te,ie)),ue(T,H+32,16843009*Fr(te,ie,Ae)),ue(T,H+64,16843009*Fr(ie,Ae,pe)),ue(T,H+96,16843009*Fr(Ae,pe,pe))}function Mi(T,H){var te,ie=4;for(te=0;4>te;++te)ie+=T[H+te-32]+T[H-1+32*te];for(ie>>=3,te=0;4>te;++te)a(T,H+32*te,ie,4)}function ko(T,H){var te=T[H-1+0],ie=T[H-1+32],Ae=T[H-1+64],pe=T[H-1-32],ge=T[H+0-32],ve=T[H+1-32],Ee=T[H+2-32],Be=T[H+3-32];T[H+0+96]=Fr(ie,Ae,T[H-1+96]),T[H+1+96]=T[H+0+64]=Fr(te,ie,Ae),T[H+2+96]=T[H+1+64]=T[H+0+32]=Fr(pe,te,ie),T[H+3+96]=T[H+2+64]=T[H+1+32]=T[H+0+0]=Fr(ge,pe,te),T[H+3+64]=T[H+2+32]=T[H+1+0]=Fr(ve,ge,pe),T[H+3+32]=T[H+2+0]=Fr(Ee,ve,ge),T[H+3+0]=Fr(Be,Ee,ve)}function oo(T,H){var te=T[H+1-32],ie=T[H+2-32],Ae=T[H+3-32],pe=T[H+4-32],ge=T[H+5-32],ve=T[H+6-32],Ee=T[H+7-32];T[H+0+0]=Fr(T[H+0-32],te,ie),T[H+1+0]=T[H+0+32]=Fr(te,ie,Ae),T[H+2+0]=T[H+1+32]=T[H+0+64]=Fr(ie,Ae,pe),T[H+3+0]=T[H+2+32]=T[H+1+64]=T[H+0+96]=Fr(Ae,pe,ge),T[H+3+32]=T[H+2+64]=T[H+1+96]=Fr(pe,ge,ve),T[H+3+64]=T[H+2+96]=Fr(ge,ve,Ee),T[H+3+96]=Fr(ve,Ee,Ee)}function Dl(T,H){var te=T[H-1+0],ie=T[H-1+32],Ae=T[H-1+64],pe=T[H-1-32],ge=T[H+0-32],ve=T[H+1-32],Ee=T[H+2-32],Be=T[H+3-32];T[H+0+0]=T[H+1+64]=pe+ge+1>>1,T[H+1+0]=T[H+2+64]=ge+ve+1>>1,T[H+2+0]=T[H+3+64]=ve+Ee+1>>1,T[H+3+0]=Ee+Be+1>>1,T[H+0+96]=Fr(Ae,ie,te),T[H+0+64]=Fr(ie,te,pe),T[H+0+32]=T[H+1+96]=Fr(te,pe,ge),T[H+1+32]=T[H+2+96]=Fr(pe,ge,ve),T[H+2+32]=T[H+3+96]=Fr(ge,ve,Ee),T[H+3+32]=Fr(ve,Ee,Be)}function jo(T,H){var te=T[H+0-32],ie=T[H+1-32],Ae=T[H+2-32],pe=T[H+3-32],ge=T[H+4-32],ve=T[H+5-32],Ee=T[H+6-32],Be=T[H+7-32];T[H+0+0]=te+ie+1>>1,T[H+1+0]=T[H+0+64]=ie+Ae+1>>1,T[H+2+0]=T[H+1+64]=Ae+pe+1>>1,T[H+3+0]=T[H+2+64]=pe+ge+1>>1,T[H+0+32]=Fr(te,ie,Ae),T[H+1+32]=T[H+0+96]=Fr(ie,Ae,pe),T[H+2+32]=T[H+1+96]=Fr(Ae,pe,ge),T[H+3+32]=T[H+2+96]=Fr(pe,ge,ve),T[H+3+64]=Fr(ge,ve,Ee),T[H+3+96]=Fr(ve,Ee,Be)}function au(T,H){var te=T[H-1+0],ie=T[H-1+32],Ae=T[H-1+64],pe=T[H-1+96];T[H+0+0]=te+ie+1>>1,T[H+2+0]=T[H+0+32]=ie+Ae+1>>1,T[H+2+32]=T[H+0+64]=Ae+pe+1>>1,T[H+1+0]=Fr(te,ie,Ae),T[H+3+0]=T[H+1+32]=Fr(ie,Ae,pe),T[H+3+32]=T[H+1+64]=Fr(Ae,pe,pe),T[H+3+64]=T[H+2+64]=T[H+0+96]=T[H+1+96]=T[H+2+96]=T[H+3+96]=pe}function pc(T,H){var te=T[H-1+0],ie=T[H-1+32],Ae=T[H-1+64],pe=T[H-1+96],ge=T[H-1-32],ve=T[H+0-32],Ee=T[H+1-32],Be=T[H+2-32];T[H+0+0]=T[H+2+32]=te+ge+1>>1,T[H+0+32]=T[H+2+64]=ie+te+1>>1,T[H+0+64]=T[H+2+96]=Ae+ie+1>>1,T[H+0+96]=pe+Ae+1>>1,T[H+3+0]=Fr(ve,Ee,Be),T[H+2+0]=Fr(ge,ve,Ee),T[H+1+0]=T[H+3+32]=Fr(te,ge,ve),T[H+1+32]=T[H+3+64]=Fr(ie,te,ge),T[H+1+64]=T[H+3+96]=Fr(Ae,ie,te),T[H+1+96]=Fr(pe,Ae,ie)}function vf(T,H){var te;for(te=0;8>te;++te)n(T,H+32*te,T,H-32,8)}function Bo(T,H){var te;for(te=0;8>te;++te)a(T,H,T[H-1],8),H+=32}function Ui(T,H,te){var ie;for(ie=0;8>ie;++ie)a(H,te+32*ie,T,8)}function Pl(T,H){var te,ie=8;for(te=0;8>te;++te)ie+=T[H+te-32]+T[H-1+32*te];Ui(ie>>4,T,H)}function ps(T,H){var te,ie=4;for(te=0;8>te;++te)ie+=T[H+te-32];Ui(ie>>3,T,H)}function bn(T,H){var te,ie=4;for(te=0;8>te;++te)ie+=T[H-1+32*te];Ui(ie>>3,T,H)}function su(T,H){Ui(128,T,H)}function Rl(T,H,te){var ie=T[H-te],Ae=T[H+0],pe=3*(Ae-ie)+ox[1020+T[H-2*te]-T[H+te]],ge=kf[112+(pe+4>>3)];T[H-te]=ii[255+ie+kf[112+(pe+3>>3)]],T[H+0]=ii[255+Ae-ge]}function bf(T,H,te,ie){var Ae=T[H+0],pe=T[H+te];return Ql[255+T[H-2*te]-T[H-te]]>ie||Ql[255+pe-Ae]>ie}function Zu(T,H,te,ie){return 4*Ql[255+T[H-te]-T[H+0]]+Ql[255+T[H-2*te]-T[H+te]]<=ie}function ed(T,H,te,ie,Ae){var pe=T[H-3*te],ge=T[H-2*te],ve=T[H-te],Ee=T[H+0],Be=T[H+te],Ue=T[H+2*te],st=T[H+3*te];return 4*Ql[255+ve-Ee]+Ql[255+ge-Be]>ie?0:Ql[255+T[H-4*te]-pe]<=Ae&&Ql[255+pe-ge]<=Ae&&Ql[255+ge-ve]<=Ae&&Ql[255+st-Ue]<=Ae&&Ql[255+Ue-Be]<=Ae&&Ql[255+Be-Ee]<=Ae}function dl(T,H,te,ie){var Ae=2*ie+1;for(ie=0;16>ie;++ie)Zu(T,H+ie,te,Ae)&&Rl(T,H+ie,te)}function Qi(T,H,te,ie){var Ae=2*ie+1;for(ie=0;16>ie;++ie)Zu(T,H+ie*te,1,Ae)&&Rl(T,H+ie*te,1)}function gs(T,H,te,ie){var Ae;for(Ae=3;0<Ae;--Ae)dl(T,H+=4*te,te,ie)}function Zh(T,H,te,ie){var Ae;for(Ae=3;0<Ae;--Ae)Qi(T,H+=4,te,ie)}function iu(T,H,te,ie,Ae,pe,ge,ve){for(pe=2*pe+1;0<Ae--;){if(ed(T,H,te,pe,ge))if(bf(T,H,te,ve))Rl(T,H,te);else{var Ee=T,Be=H,Ue=te,st=Ee[Be-2*Ue],tt=Ee[Be-Ue],qe=Ee[Be+0],Bt=Ee[Be+Ue],pt=Ee[Be+2*Ue],Qe=27*(_t=ox[1020+3*(qe-tt)+ox[1020+st-Bt]])+63>>7,Ve=18*_t+63>>7,_t=9*_t+63>>7;Ee[Be-3*Ue]=ii[255+Ee[Be-3*Ue]+_t],Ee[Be-2*Ue]=ii[255+st+Ve],Ee[Be-Ue]=ii[255+tt+Qe],Ee[Be+0]=ii[255+qe-Qe],Ee[Be+Ue]=ii[255+Bt-Ve],Ee[Be+2*Ue]=ii[255+pt-_t]}H+=ie}}function Ni(T,H,te,ie,Ae,pe,ge,ve){for(pe=2*pe+1;0<Ae--;){if(ed(T,H,te,pe,ge))if(bf(T,H,te,ve))Rl(T,H,te);else{var Ee=T,Be=H,Ue=te,st=Ee[Be-Ue],tt=Ee[Be+0],qe=Ee[Be+Ue],Bt=kf[112+((pt=3*(tt-st))+4>>3)],pt=kf[112+(pt+3>>3)],Qe=Bt+1>>1;Ee[Be-2*Ue]=ii[255+Ee[Be-2*Ue]+Qe],Ee[Be-Ue]=ii[255+st+pt],Ee[Be+0]=ii[255+tt-Bt],Ee[Be+Ue]=ii[255+qe-Qe]}H+=ie}}function ou(T,H,te,ie,Ae,pe){iu(T,H,te,1,16,ie,Ae,pe)}function gc(T,H,te,ie,Ae,pe){iu(T,H,1,te,16,ie,Ae,pe)}function rA(T,H,te,ie,Ae,pe){var ge;for(ge=3;0<ge;--ge)Ni(T,H+=4*te,te,1,16,ie,Ae,pe)}function td(T,H,te,ie,Ae,pe){var ge;for(ge=3;0<ge;--ge)Ni(T,H+=4,1,te,16,ie,Ae,pe)}function nA(T,H,te,ie,Ae,pe,ge,ve){iu(T,H,Ae,1,8,pe,ge,ve),iu(te,ie,Ae,1,8,pe,ge,ve)}function yf(T,H,te,ie,Ae,pe,ge,ve){iu(T,H,1,Ae,8,pe,ge,ve),iu(te,ie,1,Ae,8,pe,ge,ve)}function rd(T,H,te,ie,Ae,pe,ge,ve){Ni(T,H+4*Ae,Ae,1,8,pe,ge,ve),Ni(te,ie+4*Ae,Ae,1,8,pe,ge,ve)}function lu(T,H,te,ie,Ae,pe,ge,ve){Ni(T,H+4,1,Ae,8,pe,ge,ve),Ni(te,ie+4,1,Ae,8,pe,ge,ve)}function nd(){this.ba=new la,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function aA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ad(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function cu(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new F}function e0(){this.xb=this.a=0,this.l=new Ps,this.ca=new la,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new cu,this.ab=0,this.gc=i(4,ad),this.Oc=0}function xc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function uu(T,H,te,ie,Ae,pe,ge){for(T=T==null?0:T[H+0],H=0;H<ge;++H)Ae[pe+H]=T+te[ie+H]&255,T=Ae[pe+H]}function sd(T,H,te,ie,Ae,pe,ge){var ve;if(T==null)uu(null,null,te,ie,Ae,pe,ge);else for(ve=0;ve<ge;++ve)Ae[pe+ve]=T[H+ve]+te[ie+ve]&255}function Hi(T,H,te,ie,Ae,pe,ge){if(T==null)uu(null,null,te,ie,Ae,pe,ge);else{var ve,Ee=T[H+0],Be=Ee,Ue=Ee;for(ve=0;ve<ge;++ve)Be=Ue+(Ee=T[H+ve])-Be,Ue=te[ie+ve]+(-256&Be?0>Be?0:255:Be)&255,Be=Ee,Ae[pe+ve]=Ue}}function sA(T,H,te,ie){var Ae=H.width,pe=H.o;if(t(T!=null&&H!=null),0>te||0>=ie||te+ie>pe)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new xc,(ge=T.ga==null)||(ge=H.width*H.o,t(T.Gb.length==0),T.Gb=s(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var ve=T.Fa,Ee=T.P,Be=T.qc,Ue=T.mb,st=T.nb,tt=Ee+1,qe=Be-1,Bt=ge.l;if(t(ve!=null&&Ue!=null&&H!=null),pu[0]=null,pu[1]=uu,pu[2]=sd,pu[3]=Hi,ge.ca=Ue,ge.tb=st,ge.c=H.width,ge.i=H.height,t(0<ge.c&&0<ge.i),1>=Be)H=0;else if(ge.$a=ve[Ee+0]>>0&3,ge.Z=ve[Ee+0]>>2&3,ge.Lc=ve[Ee+0]>>4&3,Ee=ve[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)H=0;else if(Bt.put=xt,Bt.ac=Je,Bt.bc=Et,Bt.ma=ge,Bt.width=H.width,Bt.height=H.height,Bt.Da=H.Da,Bt.v=H.v,Bt.va=H.va,Bt.j=H.j,Bt.o=H.o,ge.$a)e:{t(ge.$a==1),H=dt();t:for(;;){if(H==null){H=0;break e}if(t(ge!=null),ge.mc=H,H.c=ge.c,H.i=ge.i,H.l=ge.l,H.l.ma=ge,H.l.width=ge.c,H.l.height=ge.i,H.a=0,K(H.m,ve,tt,qe),!Ge(ge.c,ge.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&Ce(H.s)?(ge.ic=1,ve=H.c*H.i,H.Ta=null,H.Ua=0,H.V=s(ve),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(ge.ic=0,H=rt(H,ge.c)),!H))break t;H=1;break e}ge.mc=null,H=0}else H=qe>=ge.c*ge.i;ge=!H}if(ge)return null;T.ga.Lc!=1?T.Ga=0:ie=pe-te}t(T.ga!=null),t(te+ie<=pe);e:{if(H=(ve=T.ga).c,pe=ve.l.o,ve.$a==0){if(tt=T.rc,qe=T.Vc,Bt=T.Fa,Ee=T.P+1+te*H,Be=T.mb,Ue=T.nb+te*H,t(Ee<=T.P+T.qc),ve.Z!=0)for(t(pu[ve.Z]!=null),ge=0;ge<ie;++ge)pu[ve.Z](tt,qe,Bt,Ee,Be,Ue,H),tt=Be,qe=Ue,Ue+=H,Ee+=H;else for(ge=0;ge<ie;++ge)n(Be,Ue,Bt,Ee,H),tt=Be,qe=Ue,Ue+=H,Ee+=H;T.rc=tt,T.Vc=qe}else{if(t(ve.mc!=null),H=te+ie,t((ge=ve.mc)!=null),t(H<=ge.i),ge.C>=H)H=1;else if(ve.ic||Ke(),ve.ic){ve=ge.V,tt=ge.Ba,qe=ge.c;var pt=ge.i,Qe=(Bt=1,Ee=ge.$/qe,Be=ge.$%qe,Ue=ge.m,st=ge.s,ge.$),Ve=qe*pt,_t=qe*H,Tt=st.wc,kt=Qe<_t?qr(st,Be,Ee):null;t(Qe<=Ve),t(H<=pt),t(Ce(st));t:for(;;){for(;!Ue.h&&Qe<_t;){if(Be&Tt||(kt=qr(st,Be,Ee)),t(kt!=null),re(Ue),256>(pt=Wr(kt.G[0],kt.H[0],Ue)))ve[tt+Qe]=pt,++Qe,++Be>=qe&&(Be=0,++Ee<=H&&!(Ee%16)&&Se(ge,Ee));else{if(!(280>pt)){Bt=0;break t}pt=nr(pt-256,Ue);var rr,Xt=Wr(kt.G[4],kt.H[4],Ue);if(re(Ue),!(Qe>=(Xt=xr(qe,Xt=nr(Xt,Ue)))&&Ve-Qe>=pt)){Bt=0;break t}for(rr=0;rr<pt;++rr)ve[tt+Qe+rr]=ve[tt+Qe+rr-Xt];for(Qe+=pt,Be+=pt;Be>=qe;)Be-=qe,++Ee<=H&&!(Ee%16)&&Se(ge,Ee);Qe<_t&&Be&Tt&&(kt=qr(st,Be,Ee))}t(Ue.h==z(Ue))}Se(ge,Ee>H?H:Ee);break t}!Bt||Ue.h&&Qe<Ve?(Bt=0,ge.a=Ue.h?5:3):ge.$=Qe,H=Bt}else H=Fe(ge,ge.V,ge.Ba,ge.c,ge.i,H,it);if(!H){ie=0;break e}}te+ie>=pe&&(T.Cc=1),ie=1}if(!ie)return null;if(T.Cc&&((ie=T.ga)!=null&&(ie.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+te*Ae}function Y(T,H,te,ie,Ae,pe){for(;0<Ae--;){var ge,ve=T,Ee=H+(te?1:0),Be=T,Ue=H+(te?0:3);for(ge=0;ge<ie;++ge){var st=Be[Ue+4*ge];st!=255&&(st*=32897,ve[Ee+4*ge+0]=ve[Ee+4*ge+0]*st>>23,ve[Ee+4*ge+1]=ve[Ee+4*ge+1]*st>>23,ve[Ee+4*ge+2]=ve[Ee+4*ge+2]*st>>23)}H+=pe}}function fe(T,H,te,ie,Ae){for(;0<ie--;){var pe;for(pe=0;pe<te;++pe){var ge=T[H+2*pe+0],ve=15&(Be=T[H+2*pe+1]),Ee=4369*ve,Be=(240&Be|Be>>4)*Ee>>16;T[H+2*pe+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,T[H+2*pe+1]=240&Be|ve}H+=Ae}}function De(T,H,te,ie,Ae,pe,ge,ve){var Ee,Be,Ue=255;for(Be=0;Be<Ae;++Be){for(Ee=0;Ee<ie;++Ee){var st=T[H+Ee];pe[ge+4*Ee]=st,Ue&=st}H+=te,ge+=ve}return Ue!=255}function Me(T,H,te,ie,Ae){var pe;for(pe=0;pe<Ae;++pe)te[ie+pe]=T[H+pe]>>8}function Ke(){Al=Y,pn=fe,gn=De,va=Me}function yt(T,H,te){S[T]=function(ie,Ae,pe,ge,ve,Ee,Be,Ue,st,tt,qe,Bt,pt,Qe,Ve,_t,Tt){var kt,rr=Tt-1>>1,Xt=ve[Ee+0]|Be[Ue+0]<<16,br=st[tt+0]|qe[Bt+0]<<16;t(ie!=null);var er=3*Xt+br+131074>>2;for(H(ie[Ae+0],255&er,er>>16,pt,Qe),pe!=null&&(er=3*br+Xt+131074>>2,H(pe[ge+0],255&er,er>>16,Ve,_t)),kt=1;kt<=rr;++kt){var Pn=ve[Ee+kt]|Be[Ue+kt]<<16,$n=st[tt+kt]|qe[Bt+kt]<<16,fn=Xt+Pn+br+$n+524296,ln=fn+2*(Pn+br)>>3;er=ln+Xt>>1,Xt=(fn=fn+2*(Xt+$n)>>3)+Pn>>1,H(ie[Ae+2*kt-1],255&er,er>>16,pt,Qe+(2*kt-1)*te),H(ie[Ae+2*kt-0],255&Xt,Xt>>16,pt,Qe+(2*kt-0)*te),pe!=null&&(er=fn+br>>1,Xt=ln+$n>>1,H(pe[ge+2*kt-1],255&er,er>>16,Ve,_t+(2*kt-1)*te),H(pe[ge+2*kt+0],255&Xt,Xt>>16,Ve,_t+(2*kt+0)*te)),Xt=Pn,br=$n}1&Tt||(er=3*Xt+br+131074>>2,H(ie[Ae+Tt-1],255&er,er>>16,pt,Qe+(Tt-1)*te),pe!=null&&(er=3*br+Xt+131074>>2,H(pe[ge+Tt-1],255&er,er>>16,Ve,_t+(Tt-1)*te)))}}function Lt(){oi[Vi]=hd,oi[s0]=gu,oi[hu]=vA,oi[ap]=ux,oi[jf]=dx,oi[cd]=l0,oi[lx]=Ax,oi[sp]=gu,oi[gA]=ux,oi[ud]=dx,oi[i0]=l0}function Zt(T){return T&-16384?0>T?0:255:T>>Mj}function O(T,H){return Zt((19077*T>>8)+(26149*H>>8)-14234)}function ne(T,H,te){return Zt((19077*T>>8)-(6419*H>>8)-(13320*te>>8)+8708)}function ce(T,H){return Zt((19077*T>>8)+(33050*H>>8)-17685)}function be(T,H,te,ie,Ae){ie[Ae+0]=O(T,te),ie[Ae+1]=ne(T,H,te),ie[Ae+2]=ce(T,H)}function ze(T,H,te,ie,Ae){ie[Ae+0]=ce(T,H),ie[Ae+1]=ne(T,H,te),ie[Ae+2]=O(T,te)}function ot(T,H,te,ie,Ae){var pe=ne(T,H,te);H=pe<<3&224|ce(T,H)>>3,ie[Ae+0]=248&O(T,te)|pe>>5,ie[Ae+1]=H}function Ut(T,H,te,ie,Ae){var pe=240&ce(T,H)|15;ie[Ae+0]=240&O(T,te)|ne(T,H,te)>>4,ie[Ae+1]=pe}function Or(T,H,te,ie,Ae){ie[Ae+0]=255,be(T,H,te,ie,Ae+1)}function yn(T,H,te,ie,Ae){ze(T,H,te,ie,Ae),ie[Ae+3]=255}function Xr(T,H,te,ie,Ae){be(T,H,te,ie,Ae),ie[Ae+3]=255}function zn(T,H){return 0>T?0:T>H?H:T}function ta(T,H,te){S[T]=function(ie,Ae,pe,ge,ve,Ee,Be,Ue,st){for(var tt=Ue+(-2&st)*te;Ue!=tt;)H(ie[Ae+0],pe[ge+0],ve[Ee+0],Be,Ue),H(ie[Ae+1],pe[ge+0],ve[Ee+0],Be,Ue+te),Ae+=2,++ge,++Ee,Ue+=2*te;1&st&&H(ie[Ae+0],pe[ge+0],ve[Ee+0],Be,Ue)}}function Ll(T,H,te){return te==0?T==0?H==0?6:5:H==0?4:0:te}function es(T,H,te,ie,Ae){switch(T>>>30){case 3:bc(H,te,ie,Ae,0);break;case 2:Ga(H,te,ie,Ae);break;case 1:xs(H,te,ie,Ae)}}function To(T,H){var te,ie,Ae=H.M,pe=H.Nb,ge=T.oc,ve=T.pc+40,Ee=T.oc,Be=T.pc+584,Ue=T.oc,st=T.pc+600;for(te=0;16>te;++te)ge[ve+32*te-1]=129;for(te=0;8>te;++te)Ee[Be+32*te-1]=129,Ue[st+32*te-1]=129;for(0<Ae?ge[ve-1-32]=Ee[Be-1-32]=Ue[st-1-32]=129:(a(ge,ve-32-1,127,21),a(Ee,Be-32-1,127,9),a(Ue,st-32-1,127,9)),ie=0;ie<T.za;++ie){var tt=H.ya[H.aa+ie];if(0<ie){for(te=-1;16>te;++te)n(ge,ve+32*te-4,ge,ve+32*te+12,4);for(te=-1;8>te;++te)n(Ee,Be+32*te-4,Ee,Be+32*te+4,4),n(Ue,st+32*te-4,Ue,st+32*te+4,4)}var qe=T.Gd,Bt=T.Hd+ie,pt=tt.ad,Qe=tt.Hc;if(0<Ae&&(n(ge,ve-32,qe[Bt].y,0,16),n(Ee,Be-32,qe[Bt].f,0,8),n(Ue,st-32,qe[Bt].ea,0,8)),tt.Za){var Ve=ge,_t=ve-32+16;for(0<Ae&&(ie>=T.za-1?a(Ve,_t,qe[Bt].y[15],4):n(Ve,_t,qe[Bt+1].y,0,4)),te=0;4>te;te++)Ve[_t+128+te]=Ve[_t+256+te]=Ve[_t+384+te]=Ve[_t+0+te];for(te=0;16>te;++te,Qe<<=2)Ve=ge,_t=ve+Ff[te],co[tt.Ob[te]](Ve,_t),es(Qe,pt,16*+te,Ve,_t)}else if(Ve=Ll(ie,Ae,tt.Ob[0]),fd[Ve](ge,ve),Qe!=0)for(te=0;16>te;++te,Qe<<=2)es(Qe,pt,16*+te,ge,ve+Ff[te]);for(te=tt.Gc,Ve=Ll(ie,Ae,tt.Dd),hl[Ve](Ee,Be),hl[Ve](Ue,st),Qe=pt,Ve=Ee,_t=Be,255&(tt=te>>0)&&(170&tt?yc(Qe,256,Ve,_t):Oo(Qe,256,Ve,_t)),tt=Ue,Qe=st,255&(te>>=8)&&(170&te?yc(pt,320,tt,Qe):Oo(pt,320,tt,Qe)),Ae<T.Ub-1&&(n(qe[Bt].y,0,ge,ve+480,16),n(qe[Bt].f,0,Ee,Be+224,8),n(qe[Bt].ea,0,Ue,st+224,8)),te=8*pe*T.B,qe=T.sa,Bt=T.ta+16*ie+16*pe*T.R,pt=T.qa,tt=T.ra+8*ie+te,Qe=T.Ha,Ve=T.Ia+8*ie+te,te=0;16>te;++te)n(qe,Bt+te*T.R,ge,ve+32*te,16);for(te=0;8>te;++te)n(pt,tt+te*T.B,Ee,Be+32*te,8),n(Qe,Ve+te*T.B,Ue,st+32*te,8)}}function du(T,H,te,ie,Ae,pe,ge,ve,Ee){var Be=[0],Ue=[0],st=0,tt=Ee!=null?Ee.kd:0,qe=Ee??new aA;if(T==null||12>te)return 7;qe.data=T,qe.w=H,qe.ha=te,H=[H],te=[te],qe.gb=[qe.gb];e:{var Bt=H,pt=te,Qe=qe.gb;if(t(T!=null),t(pt!=null),t(Qe!=null),Qe[0]=0,12<=pt[0]&&!r(T,Bt[0],"RIFF")){if(r(T,Bt[0]+8,"WEBP")){Qe=3;break e}var Ve=Ne(T,Bt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(tt&&Ve>pt[0]-8){Qe=7;break e}Qe[0]=Ve,Bt[0]+=12,pt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<qe.gb[0],te=te[0];;){e:{var _t=T;pt=H,Qe=te;var Tt=Be,kt=Ue,rr=Bt=[0];if((er=st=[st])[0]=0,8>Qe[0])Qe=7;else{if(!r(_t,pt[0],"VP8X")){if(Ne(_t,pt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Xt=Ne(_t,pt[0]+8),br=1+ae(_t,pt[0]+12);if(2147483648<=br*(_t=1+ae(_t,pt[0]+15))){Qe=3;break e}rr!=null&&(rr[0]=Xt),Tt!=null&&(Tt[0]=br),kt!=null&&(kt[0]=_t),pt[0]+=18,Qe[0]-=18,er[0]=1}Qe=0}}if(st=st[0],Bt=Bt[0],Qe!=0)return Qe;if(pt=!!(2&Bt),!Ve&&st)return 3;if(pe!=null&&(pe[0]=!!(16&Bt)),ge!=null&&(ge[0]=pt),ve!=null&&(ve[0]=0),ge=Be[0],Bt=Ue[0],st&&pt&&Ee==null){Qe=0;break}if(4>te){Qe=7;break}if(Ve&&st||!Ve&&!st&&!r(T,H[0],"ALPH")){te=[te],qe.na=[qe.na],qe.P=[qe.P],qe.Sa=[qe.Sa];e:{Xt=T,Qe=H,Ve=te;var er=qe.gb;Tt=qe.na,kt=qe.P,rr=qe.Sa,br=22,t(Xt!=null),t(Ve!=null),_t=Qe[0];var Pn=Ve[0];for(t(Tt!=null),t(rr!=null),Tt[0]=null,kt[0]=null,rr[0]=0;;){if(Qe[0]=_t,Ve[0]=Pn,8>Pn){Qe=7;break e}var $n=Ne(Xt,_t+4);if(4294967286<$n){Qe=3;break e}var fn=8+$n+1&-2;if(br+=fn,0<er&&br>er){Qe=3;break e}if(!r(Xt,_t,"VP8 ")||!r(Xt,_t,"VP8L")){Qe=0;break e}if(Pn[0]<fn){Qe=7;break e}r(Xt,_t,"ALPH")||(Tt[0]=Xt,kt[0]=_t+8,rr[0]=$n),_t+=fn,Pn-=fn}}if(te=te[0],qe.na=qe.na[0],qe.P=qe.P[0],qe.Sa=qe.Sa[0],Qe!=0)break}te=[te],qe.Ja=[qe.Ja],qe.xa=[qe.xa];e:if(er=T,Qe=H,Ve=te,Tt=qe.gb[0],kt=qe.Ja,rr=qe.xa,Xt=Qe[0],_t=!r(er,Xt,"VP8 "),br=!r(er,Xt,"VP8L"),t(er!=null),t(Ve!=null),t(kt!=null),t(rr!=null),8>Ve[0])Qe=7;else{if(_t||br){if(er=Ne(er,Xt+4),12<=Tt&&er>Tt-12){Qe=3;break e}if(tt&&er>Ve[0]-8){Qe=7;break e}kt[0]=er,Qe[0]+=8,Ve[0]-=8,rr[0]=br}else rr[0]=5<=Ve[0]&&er[Xt+0]==47&&!(er[Xt+4]>>5),kt[0]=Ve[0];Qe=0}if(te=te[0],qe.Ja=qe.Ja[0],qe.xa=qe.xa[0],H=H[0],Qe!=0)break;if(4294967286<qe.Ja)return 3;if(ve==null||pt||(ve[0]=qe.xa?2:1),ge=[ge],Bt=[Bt],qe.xa){if(5>te){Qe=7;break}ve=ge,tt=Bt,pt=pe,T==null||5>te?T=0:5<=te&&T[H+0]==47&&!(T[H+4]>>5)?(Ve=[0],er=[0],Tt=[0],K(kt=new D,T,H,te),bt(kt,Ve,er,Tt)?(ve!=null&&(ve[0]=Ve[0]),tt!=null&&(tt[0]=er[0]),pt!=null&&(pt[0]=Tt[0]),T=1):T=0):T=0}else{if(10>te){Qe=7;break}ve=Bt,T==null||10>te||!ai(T,H+3,te-3)?T=0:(tt=T[H+0]|T[H+1]<<8|T[H+2]<<16,pt=16383&(T[H+7]<<8|T[H+6]),T=16383&(T[H+9]<<8|T[H+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=qe.Ja||!pt||!T?T=0:(ge&&(ge[0]=pt),ve&&(ve[0]=T),T=1))}if(!T||(ge=ge[0],Bt=Bt[0],st&&(Be[0]!=ge||Ue[0]!=Bt)))return 3;Ee!=null&&(Ee[0]=qe,Ee.offset=H-Ee.w,t(4294967286>H-Ee.w),t(Ee.offset==Ee.ha-te));break}return Qe==0||Qe==7&&st&&Ee==null?(pe!=null&&(pe[0]|=qe.na!=null&&0<qe.na.length),ie!=null&&(ie[0]=ge),Ae!=null&&(Ae[0]=Bt),0):Qe}function iA(T,H,te){var ie=H.width,Ae=H.height,pe=0,ge=0,ve=ie,Ee=Ae;if(H.Da=T!=null&&0<T.Da,H.Da&&(ve=T.cd,Ee=T.bd,pe=T.v,ge=T.j,11>te||(pe&=-2,ge&=-2),0>pe||0>ge||0>=ve||0>=Ee||pe+ve>ie||ge+Ee>Ae))return 0;if(H.v=pe,H.j=ge,H.va=pe+ve,H.o=ge+Ee,H.U=ve,H.T=Ee,H.da=T!=null&&0<T.da,H.da){if(!Te(ve,Ee,te=[T.ib],pe=[T.hb]))return 0;H.ib=te[0],H.hb=pe[0]}return H.ob=T!=null&&T.ob,H.Kb=T==null||!T.Sd,H.da&&(H.ob=H.ib<3*ie/4&&H.hb<3*Ae/4,H.Kb=0),1}function t0(T){if(T==null)return 2;if(11>T.S){var H=T.f.RGBA;H.fb+=(T.height-1)*H.A,H.A=-H.A}else H=T.f.kb,T=T.height,H.O+=(T-1)*H.fa,H.fa=-H.fa,H.N+=(T-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(T-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(T-1)*H.lb,H.lb=-H.lb);return 0}function wf(T,H,te,ie){if(ie==null||0>=T||0>=H)return 2;if(te!=null){if(te.Da){var Ae=te.cd,pe=te.bd,ge=-2&te.v,ve=-2&te.j;if(0>ge||0>ve||0>=Ae||0>=pe||ge+Ae>T||ve+pe>H)return 2;T=Ae,H=pe}if(te.da){if(!Te(T,H,Ae=[te.ib],pe=[te.hb]))return 2;T=Ae[0],H=pe[0]}}ie.width=T,ie.height=H;e:{var Ee=ie.width,Be=ie.height;if(T=ie.S,0>=Ee||0>=Be||!(T>=Vi&&13>T))T=2;else{if(0>=ie.Rd&&ie.sd==null){ge=pe=Ae=H=0;var Ue=(ve=Ee*GE[T])*Be;if(11>T||(pe=(Be+1)/2*(H=(Ee+1)/2),T==12&&(ge=(Ae=Ee)*Be)),(Be=s(Ue+2*pe+ge))==null){T=1;break e}ie.sd=Be,11>T?((Ee=ie.f.RGBA).eb=Be,Ee.fb=0,Ee.A=ve,Ee.size=Ue):((Ee=ie.f.kb).y=Be,Ee.O=0,Ee.fa=ve,Ee.Fd=Ue,Ee.f=Be,Ee.N=0+Ue,Ee.Ab=H,Ee.Cd=pe,Ee.ea=Be,Ee.W=0+Ue+pe,Ee.Db=H,Ee.Ed=pe,T==12&&(Ee.F=Be,Ee.J=0+Ue+2*pe),Ee.Tc=ge,Ee.lb=Ae)}if(H=1,Ae=ie.S,pe=ie.width,ge=ie.height,Ae>=Vi&&13>Ae)if(11>Ae)T=ie.f.RGBA,H&=(ve=Math.abs(T.A))*(ge-1)+pe<=T.size,H&=ve>=pe*GE[Ae],H&=T.eb!=null;else{T=ie.f.kb,ve=(pe+1)/2,Ue=(ge+1)/2,Ee=Math.abs(T.fa),Be=Math.abs(T.Ab);var st=Math.abs(T.Db),tt=Math.abs(T.lb),qe=tt*(ge-1)+pe;H&=Ee*(ge-1)+pe<=T.Fd,H&=Be*(Ue-1)+ve<=T.Cd,H=(H&=st*(Ue-1)+ve<=T.Ed)&Ee>=pe&Be>=ve&st>=ve,H&=T.y!=null,H&=T.f!=null,H&=T.ea!=null,Ae==12&&(H&=tt>=pe,H&=qe<=T.Tc,H&=T.F!=null)}else H=0;T=H?0:2}}return T!=0||te!=null&&te.fd&&(T=t0(ie)),T}var Rs=64,oA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ef=24,Cf=32,r0=8,Io=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(T){return T},S.Predictor2=function(T,H,te){return H[te+0]},S.Predictor3=function(T,H,te){return H[te+1]},S.Predictor4=function(T,H,te){return H[te-1]},S.Predictor5=function(T,H,te){return Re(Re(T,H[te+1]),H[te+0])},S.Predictor6=function(T,H,te){return Re(T,H[te-1])},S.Predictor7=function(T,H,te){return Re(T,H[te+0])},S.Predictor8=function(T,H,te){return Re(H[te-1],H[te+0])},S.Predictor9=function(T,H,te){return Re(H[te+0],H[te+1])},S.Predictor10=function(T,H,te){return Re(Re(T,H[te-1]),Re(H[te+0],H[te+1]))},S.Predictor11=function(T,H,te){var ie=H[te+0];return 0>=ct(ie>>24&255,T>>24&255,(H=H[te-1])>>24&255)+ct(ie>>16&255,T>>16&255,H>>16&255)+ct(ie>>8&255,T>>8&255,H>>8&255)+ct(255&ie,255&T,255&H)?ie:T},S.Predictor12=function(T,H,te){var ie=H[te+0];return($e((T>>24&255)+(ie>>24&255)-((H=H[te-1])>>24&255))<<24|$e((T>>16&255)+(ie>>16&255)-(H>>16&255))<<16|$e((T>>8&255)+(ie>>8&255)-(H>>8&255))<<8|$e((255&T)+(255&ie)-(255&H)))>>>0},S.Predictor13=function(T,H,te){var ie=H[te-1];return(et((T=Re(T,H[te+0]))>>24&255,ie>>24&255)<<24|et(T>>16&255,ie>>16&255)<<16|et(T>>8&255,ie>>8&255)<<8|et(T>>0&255,ie>>0&255))>>>0};var Nb=S.PredictorAdd0;S.PredictorAdd1=gt,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var rp=S.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var ix,Ml=S.ColorIndexInverseTransform,si=S.MapARGB,lA=S.VP8LColorIndexInverseTransformAlpha,np=S.MapAlpha,id=S.VP8LPredictorsAdd=[];id.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var cA,lo,_i,uA,Fo,vc,Au,bc,Ga,yc,xs,Oo,Nf,fu,n0,dA,AA,fA,_f,a0,hA,od,Sf,Ka,Al,pn,gn,va,ts=s(511),Ul=s(2041),mA=s(225),pA=s(767),ld=0,ox=Ul,kf=mA,ii=pA,Ql=ts,Vi=0,s0=1,hu=2,ap=3,jf=4,cd=5,lx=6,sp=7,gA=8,ud=9,i0=10,cx=[2,3,7],Hl=[3,3,11],fl=[280,256,256,256,40],Bf=[0,1,1,1,0],dd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ad=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Tf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QE=8,ip=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],op=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ls=null,qa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_b=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],If=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fd=[],co=[],hl=[],VE=1,o0=2,pu=[],oi=[];yt("UpsampleRgbLinePair",be,3),yt("UpsampleBgrLinePair",ze,3),yt("UpsampleRgbaLinePair",Xr,4),yt("UpsampleBgraLinePair",yn,4),yt("UpsampleArgbLinePair",Or,4),yt("UpsampleRgba4444LinePair",Ut,2),yt("UpsampleRgb565LinePair",ot,2);var hd=S.UpsampleRgbLinePair,vA=S.UpsampleBgrLinePair,gu=S.UpsampleRgbaLinePair,ux=S.UpsampleBgraLinePair,dx=S.UpsampleArgbLinePair,l0=S.UpsampleRgba4444LinePair,Ax=S.UpsampleRgb565LinePair,xu=16,Ms=1<<xu-1,bA=-227,fx=482,Mj=6,zE=0,Uj=s(256),Us=s(256),Sb=s(256),lp=s(256),cp=s(fx-bA),kb=s(fx-bA);ta("YuvToRgbRow",be,3),ta("YuvToBgrRow",ze,3),ta("YuvToRgbaRow",Xr,4),ta("YuvToBgraRow",yn,4),ta("YuvToArgbRow",Or,4),ta("YuvToRgba4444Row",Ut,2),ta("YuvToRgb565Row",ot,2);var Ff=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],Qj=[8,7,6,4,4,2,2,2,1,1,1,1],$E=1;this.WebPDecodeRGBA=function(T,H,te,ie,Ae){var pe=s0,ge=new nd,ve=new la;ge.ba=ve,ve.S=pe,ve.width=[ve.width],ve.height=[ve.height];var Ee=ve.width,Be=ve.height,Ue=new ja;if(Ue==null||T==null)var st=2;else t(Ue!=null),st=du(T,H,te,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(st!=0?Ee=0:(Ee!=null&&(Ee[0]=Ue.width[0]),Be!=null&&(Be[0]=Ue.height[0]),Ee=1),Ee){ve.width=ve.width[0],ve.height=ve.height[0],ie!=null&&(ie[0]=ve.width),Ae!=null&&(Ae[0]=ve.height);e:{if(ie=new Ps,(Ae=new aA).data=T,Ae.w=H,Ae.ha=te,Ae.kd=1,H=[0],t(Ae!=null),((T=du(Ae.data,Ae.w,Ae.ha,null,null,null,H,null,Ae))==0||T==7)&&H[0]&&(T=4),(H=T)==0){if(t(ge!=null),ie.data=Ae.data,ie.w=Ae.w+Ae.offset,ie.ha=Ae.ha-Ae.offset,ie.put=xt,ie.ac=Je,ie.bc=Et,ie.ma=ge,Ae.xa){if((T=dt())==null){ge=1;break e}if(function(tt,qe){var Bt=[0],pt=[0],Qe=[0];t:for(;;){if(tt==null)return 0;if(qe==null)return tt.a=2,0;if(tt.l=qe,tt.a=0,K(tt.m,qe.data,qe.w,qe.ha),!bt(tt.m,Bt,pt,Qe)){tt.a=3;break t}if(tt.xb=o0,qe.width=Bt[0],qe.height=pt[0],!Ge(Bt[0],pt[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(T,ie)){if(ie=(H=wf(ie.width,ie.height,ge.Oa,ge.ba))==0){t:{ie=T;r:for(;;){if(ie==null){ie=0;break t}if(t(ie.s.yc!=null),t(ie.s.Ya!=null),t(0<ie.s.Wb),t((te=ie.l)!=null),t((Ae=te.ma)!=null),ie.xb!=0){if(ie.ca=Ae.ba,ie.tb=Ae.tb,t(ie.ca!=null),!iA(Ae.Oa,te,ap)){ie.a=2;break r}if(!rt(ie,te.width)||te.da)break r;if((te.da||Pr(ie.ca.S))&&Ke(),11>ie.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ie.ca.f.kb.F!=null&&Ke()),ie.Pb&&0<ie.s.ua&&ie.s.vb.X==null&&!je(ie.s.vb,ie.s.Wa.Xa)){ie.a=1;break r}ie.xb=0}if(!Fe(ie,ie.V,ie.Ba,ie.c,ie.i,te.o,Ie))break r;Ae.Dc=ie.Ma,ie=1;break t}t(ie.a!=0),ie=0}ie=!ie}ie&&(H=T.a)}else H=T.a}else{if((T=new wi)==null){ge=1;break e}if(T.Fa=Ae.na,T.P=Ae.P,T.qc=Ae.Sa,Zd(T,ie)){if((H=wf(ie.width,ie.height,ge.Oa,ge.ba))==0){if(T.Aa=0,te=ge.Oa,t((Ae=T)!=null),te!=null){if(0<(Ee=0>(Ee=te.Md)?0:100<Ee?255:255*Ee/100)){for(Be=Ue=0;4>Be;++Be)12>(st=Ae.pb[Be]).lc&&(st.ia=Ee*Qj[0>st.lc?0:st.lc]>>3),Ue|=st.ia;Ue&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=te.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}pf(T,ie)||(H=T.a)}}else H=T.a}H==0&&ge.Oa!=null&&ge.Oa.fd&&(H=t0(ge.ba))}ge=H}pe=ge!=0?null:11>pe?ve.f.RGBA.eb:ve.f.kb.y}else pe=null;return pe};var GE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,B){for(var R="",P=0;P<4;P++)R+=String.fromCharCode(S[B++]);return R}function d(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16)>>>0}function A(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16|S[B+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(S,B){var R={},P=0,F=!1,L=0,M=0;if(R.frames=[],!function(U,z,J,re){for(var oe=0;oe<re;oe++)if(U[z+oe]!=J.charCodeAt(oe))return!0;return!1}(S,B,"RIFF",4)){var ee,V;for(A(S,B+=4),B+=8;B<S.length;){var q=u(S,B),K=A(S,B+=4);B+=4;var X=K+(1&K);switch(q){case"VP8 ":case"VP8L":R.frames[P]===void 0&&(R.frames[P]={}),(D=R.frames[P]).src_off=F?M:B-8,D.src_size=L+K+8,P++,F&&(F=!1,L=0,M=0);break;case"VP8X":(D=R.header={}).feature_flags=S[B];var Z=B+4;D.canvas_width=1+d(S,Z),Z+=3,D.canvas_height=1+d(S,Z),Z+=3;break;case"ALPH":F=!0,L=X+8,M=B-8;break;case"ANIM":(D=R.header).bgcolor=A(S,B),Z=B+4,D.loop_count=(ee=S)[(V=Z)+0]<<0|ee[V+1]<<8,Z+=2;break;case"ANMF":var G,D;(D=R.frames[P]={}).offset_x=2*d(S,B),B+=3,D.offset_y=2*d(S,B),B+=3,D.width=1+d(S,B),B+=3,D.height=1+d(S,B),B+=3,D.duration=d(S,B),B+=3,G=S[B++],D.dispose=1&G,D.blend=G>>1&1}q!="ANMF"&&(B+=X)}return R}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var j=0;j<_.length&&_[j].blend!=0;j++);}var k=_[0],I=x.WebPDecodeRGBA(v,k.src_off,k.src_size,m,h);k.rgba=I,k.imgwidth=m[0],k.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)g[E]=I[E];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof UO=="function"},r=function(h,m,g,x){var v=4,y=i;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=UO(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,_=h.length/m,j=new Uint8Array(h.length+_),k=d(),I=0;I<_;I+=1){if(w=I*m,v=h.subarray(w,w+m),x)j.set(x(v,g,y),w+I);else{for(var E,S=k.length,B=[];E<S;E+=1)B[E]=k[E](v,g,y);var R=A(B.concat());j.set(B[R],w+I)}y=v}return j},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y[_+1]=h[_]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,_=[],j=h.length;_[0]=4;for(var k=0;k<j;k+=1)x=h[k-m]||0,v=g&&g[k]||0,y=g&&g[k-m]||0,w=u(x,v,y),_[k+1]=h[k]-w+256&255;return _},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,i,l,c]},A=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,_,j,k,I,E,S,B,R,P,F,L,M,ee=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new UYe(h)).imgData,y=w.bits,v=w.colorSpace,j=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){S=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,R=new Uint8Array(S*w.colors),B=new Uint8Array(S);var q,K=w.pixelBitlength-w.bits;for(L=0,M=0;L<S;L++){for(F=E[L],q=0;q<K;)R[M++]=F>>>q&255,q+=w.bits;B[L]=F>>>q&255}}if(w.bits===16){S=(E=new Uint32Array(w.decodePixels().buffer)).length,R=new Uint8Array(S*(32/w.pixelBitlength)*w.colors),B=new Uint8Array(S*(32/w.pixelBitlength)),P=w.colors>1,L=0,M=0;for(var X=0;L<S;)F=E[L++],R[M++]=F>>>0&255,P&&(R[M++]=F>>>16&255,F=E[L++],R[M++]=F>>>0&255),B[X++]=F>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(R,w.width*w.colors,w.colors,x),I=r(B,w.width,1,x)):(h=R,I=B,ee=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var Z=w.transparency.indexed,G=0;for(L=0,S=Z.length;L<S;++L)G+=Z[L];if((G/=255)===S-1&&Z.indexOf(0)!==-1)_=[Z.indexOf(0)];else if(G!==S){for(E=w.decodePixels(),B=new Uint8Array(E.length),L=0,S=E.length;L<S;L++)B[L]=Z[E[L]];I=r(B,w.width,1)}}var D=function(U){var z;switch(U){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(x);return ee===this.decode.FLATE_DECODE&&(V="/Predictor "+D+" "),V+="/Colors "+j+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:m,filter:ee,decodeParameters:V,transparency:_,palette:k,sMask:I,predictor:D,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new QYe(t),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new LI(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),Cd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Na.log("bit decode error:"+r)}},Cd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Cd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Cd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Cd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},Cd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Cd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Cd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},Cd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Cd(t,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new LI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),eW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new eW(t),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new LI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],A=n[u+1],h=n[u+2],m=n[u+3];s[l++]=d,s[l++]=A,s[l++]=h,i[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zx=vr.API,BN=zx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,A=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=A&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+h)),g=n;return v},Xq=zx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return zx.processArabic&&(e=zx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:BN.apply(this,arguments).reduce(function(s,i){return s+i},0)},Yq=function(e,t,r,n){for(var a=[],s=0,i=e.length,l=0;s!==i&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==i;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},Jq=function(e,t,r){r||(r={});var n,a,s,i,l,c,u,d=[],A=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=BN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?w=w.concat(j.map(function(k,I){return(I&&k.length?`
`:"")+k})):w.push(j[0])}),x=w,c=Xq.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+m+(g=(a=BN.apply(this,[n,r])).reduce(function(j,k){return j+k},0))>t||_){if(g>t){for(l=Yq.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)A.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,k){return j+k},0)}else d=[n];A.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(j,k){return(k?y:"")+j.join(" ")}:function(j){return j.join(" ")},A.map(u)},zx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var A=this.internal.getFont(d.fontName,d.fontStyle);return A.metadata.Unicode?{widths:A.metadata.Unicode.widths||{0:1},kerning:A.metadata.Unicode.kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Jq.apply(this,[n[l],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(A){return"0x"+parseInt(A,10).toString(16)},i=e.__fontmetrics__.compress=function(A){var h,m,g,x,v=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=i(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,_=[],j="",k="",I=A.length-1,E=1;E<I;E+=1)(x=A[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((m=_.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(j+=r[x],g=parseInt(j,16)*y,y=1,j=""):j+=x:r.hasOwnProperty(x)?(k+=r[x],w[g]=parseInt(k,16)*y,y=1,g=void 0,k=""):k+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(A){var h=A.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Fw(l)),i.metadata=e.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Qr.canvg?Promise.resolve(Qr.canvg):Dg(()=>import("./index.es-DPZLarPu.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,l,c,u){if(isNaN(n)||isNaN(a))throw Na.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Na.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var A=d.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(A,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,A=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(A=0;A<m;A+=1)r[l[A]].value=r[l[A]].defaultValue,r[l[A]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],A=0,h=s.length;A<h;++A){if(l=i.metadata.characterToGlyph(s.charCodeAt(A)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(A),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,A,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],A=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;A<h;A++)i=l[A],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var A=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+mv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+mv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(A)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+mv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var A=l.metadata.rawData,h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+mv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+mv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},A=s.mutex||{},h=A.pdfEscape,m=A.activeFontKey,g=A.fonts,x=m,v="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:A};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var j="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?j=h(v,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(j=r(v,g[x])),A.isHex=!0,{text:j,x:c,y:u,options:d,mutex:A}};t.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,A=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var j=function(P){var F=P.charCodeAt(),L=F>>8,M=x[L];return M!==void 0?A[256*M+(255&F)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},k=function(P){for(var F,L=0;L<P.length;L++){if((F=j(P.charAt(L)))==="L")return!1;if(F==="R")return!0}return!1},I=function(P,F,L,M){var ee,V,q,K,X=F[M];switch(X){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(X="AN");break;case"AL":w=!0,X="R";break;case"WS":X="N";break;case"CS":M<1||M+1>=F.length||(ee=L[M-1])!=="EN"&&ee!=="AN"||(V=F[M+1])!=="EN"&&V!=="AN"?X="N":w&&(V="AN"),X=V===ee?V:"N";break;case"ES":X=(ee=M>0?L[M-1]:"B")==="EN"&&M+1<F.length&&F[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&L[M-1]==="EN"){X="EN";break}if(w){X="N";break}for(q=M+1,K=F.length;q<K&&F[q]==="ET";)q++;X=q<K&&F[q]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(K=F.length,q=M+1;q<K&&F[q]==="NSM";)q++;if(q<K){var Z=P[M],G=Z>=1425&&Z<=2303||Z===64286;if(ee=F[q],G&&(ee==="R"||ee==="AL")){X="R";break}}}X=M<1||(ee=F[M-1])==="B"?"N":L[M-1];break;case"B":w=!1,a=!0,X=_;break;case"S":s=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":X="N"}return X},E=function(P,F,L){var M=P.split("");return L&&S(M,L,{hiLevel:_}),M.reverse(),F&&F.reverse(),M.join("")},S=function(P,F,L){var M,ee,V,q,K,X=-1,Z=P.length,G=0,D=[],U=_?m:h,z=[];for(w=!1,a=!1,s=!1,ee=0;ee<Z;ee++)z[ee]=j(P[ee]);for(V=0;V<Z;V++){if(K=G,D[V]=I(P,z,D,V),M=240&(G=U[K][g[D[V]]]),G&=15,F[V]=q=U[G][5],M>0)if(M===16){for(ee=X;ee<V;ee++)F[ee]=1;X=-1}else X=-1;if(U[G][6])X===-1&&(X=V);else if(X>-1){for(ee=X;ee<V;ee++)F[ee]=q;X=-1}z[V]==="B"&&(F[V]=0),L.hiLevel|=q}s&&function(J,re,oe){for(var se=0;se<oe;se++)if(J[se]==="S"){re[se]=_;for(var le=se-1;le>=0&&J[le]==="WS";le--)re[le]=_}}(z,F,Z)},B=function(P,F,L,M,ee){if(!(ee.hiLevel<P)){if(P===1&&_===1&&!a)return F.reverse(),void(L&&L.reverse());for(var V,q,K,X,Z=F.length,G=0;G<Z;){if(M[G]>=P){for(K=G+1;K<Z&&M[K]>=P;)K++;for(X=G,q=K-1;X<q;X++,q--)V=F[X],F[X]=F[q],F[q]=V,L&&(V=L[X],L[X]=L[q],L[q]=V);G=K}G++}}},R=function(P,F,L){var M=P.split(""),ee={hiLevel:_};return L||(L=[]),S(M,L,ee),function(V,q,K){if(K.hiLevel!==0&&d)for(var X,Z=0;Z<V.length;Z++)q[Z]===1&&(X=v.indexOf(V[Z]))>=0&&(V[Z]=v[X+1])}(M,L,ee),B(2,M,F,L,ee),B(1,M,F,L,ee),M.join("")};return this.__bidiEngine__.doBidiReorder=function(P,F,L){if(function(ee,V){if(V)for(var q=0;q<ee.length;q++)V[q]=q;l===void 0&&(l=k(ee)),u===void 0&&(u=k(ee))}(P,F),i||!c||u)if(i&&c&&l^u)_=l?1:0,P=E(P,F,L);else if(!i&&c&&u)_=l?1:0,P=R(P,F,L),P=E(P,F);else if(!i||l||c||u){if(i&&!c&&l^u)P=E(P,F),l?(_=0,P=R(P,F,L)):(_=1,P=R(P,F,L),P=E(P,F));else if(i&&l&&!c&&u)_=1,P=R(P,F,L),P=E(P,F);else if(!i&&!c&&l^u){var M=d;l?(_=1,P=R(P,F,L),_=0,d=!1,P=R(P,F,L),d=M):(_=0,P=R(P,F,L),P=E(P,F),_=1,d=!1,P=R(P,F,L),d=M,P=E(P,F))}}else _=0,P=R(P,F,L);else _=l?1:0,P=R(P,F,L);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Rm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new rJe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new HYe(this.contents),this.head=new zYe(this),this.name=new WYe(this),this.cmap=new bce(this),this.toUnicode={},this.hhea=new $Ye(this),this.maxp=new XYe(this),this.hmtx=new YYe(this),this.post=new KYe(this),this.os2=new GYe(this),this.loca=new tJe(this),this.glyf=new JYe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,l;for(i=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Xd,Rm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),HYe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,l,c,u,d,A,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),A=16*Math.floor(Math.log(m)/c),i=Math.floor(A/c),d=16*m-A,(a=new Rm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(A),a.writeShort(i),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=yce.call(r);r.length%4;)r.push(0);for(s=new Rm(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),VYe={}.hasOwnProperty,Af=function(e,t){for(var r in t)VYe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Xd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var zYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Rm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),tW=function(){function e(t,r){var n,a,s,i,l,c,u,d,A,h,m,g,x,v,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),A=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),t.pos+=2,x=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),u=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),d=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,l=function(){var j,k;for(k=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)k.push(t.readUInt16());return k}(),c=y=0,_=s.length;y<_;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=A}return e.encode=function(t,r){var n,a,s,i,l,c,u,d,A,h,m,g,x,v,y,w,_,j,k,I,E,S,B,R,P,F,L,M,ee,V,q,K,X,Z,G,D,U,z,J,re,oe,se,le,ue,ke,ae;switch(M=new Rm,i=Object.keys(t).sort(function(Ne,je){return Ne-je}),r){case"macroman":for(x=0,v=function(){var Ne=[];for(g=0;g<256;++g)Ne.push(0);return Ne}(),w={0:0},s={},ee=0,X=i.length;ee<X;ee++)w[le=t[a=i[ee]]]==null&&(w[le]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(F=[],A=[],_=0,w={},n={},y=u=null,V=0,Z=i.length;V<Z;V++)w[k=t[a=i[V]]]==null&&(w[k]=++_),n[a]={old:k,new:w[k]},l=w[k]-a,y!=null&&l===u||(y&&A.push(y),F.push(a),u=l),y=a;for(y&&A.push(y),A.push(65535),F.push(65535),R=2*(B=F.length),S=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,E=2*B-S,c=[],I=[],m=[],g=q=0,G=F.length;q<G;g=++q){if(P=F[g],d=A[g],P===65535){c.push(0),I.push(0);break}if(P-(L=n[P].new)>=32768)for(c.push(0),I.push(2*(m.length+B-g)),a=K=P;P<=d?K<=d:K>=d;a=P<=d?++K:--K)m.push(n[a].new);else c.push(L-P),I.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*B+2*m.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(S),M.writeUInt16(h),M.writeUInt16(E),oe=0,D=A.length;oe<D;oe++)a=A[oe],M.writeUInt16(a);for(M.writeUInt16(0),se=0,U=F.length;se<U;se++)a=F[se],M.writeUInt16(a);for(ue=0,z=c.length;ue<z;ue++)l=c[ue],M.writeUInt16(l);for(ke=0,J=I.length;ke<J;ke++)j=I[ke],M.writeUInt16(j);for(ae=0,re=m.length;ae<re;ae++)x=m[ae],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:_+1}}},e}(),bce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new tW(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=tW.encode(r,n),(s=new Rm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),$Ye=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),GYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),KYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],i=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;i=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),qYe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},WYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,l,c,u,d,A,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=A=0,h=a.length;A<h;i=++A)s=a[i],r.pos=s.offset,d=r.readString(s.length),l=new qYe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),XYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),YYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,A;for(A=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)A.push(r.readInt16());return A}(),this.widths=(function(){var d,A,h,m;for(m=[],d=0,A=(h=this.metrics).length;d<A;d++)i=h[d],m.push(i.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),yce=[].slice,JYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,l,c,u,d,A,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Rm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),A=c.readShort(),this.cache[r]=l===-1?new eJe(c,d,h,u,A):new ZYe(c,l,d,h,u,A),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,l,c,u;for(l=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(l.length),s&&(l=l.concat(s.encode(a)));return i.push(l.length),{table:l,offsets:i}},t}(),ZYe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),eJe=function(){function e(t,r,n,a,s){var i,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Rm(yce.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),tJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Xd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<a.length;++l)if(a[l]=s,i<n.length&&n[i]==l){++i,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),A=0;A<a.length;++A)d[4*A+3]=255&a[A],d[4*A+2]=(65280&a[A])>>8,d[4*A+1]=(16711680&a[A])>>16,d[4*A]=(4278190080&a[A])>>24;return d},t}(),rJe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,l,c;for(a={},i=0,l=t.length;i<l;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,l,c,u,d,A,h,m,g,x,v,y;for(a in n=bce.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in m||(m[g]=h++);return d=function(w){var _,j;for(_ in j={},w)j[w[_]]=_;return j}(m),A=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,j;for(j=[],w=0,_=A.length;w<_;w++)l=A[w],j.push(d[l]);return j}(),s=this.font.glyf.encode(i,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function wce(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,l=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,A="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(A=typeof e=="string"?e.split(d):e,h=A.length||1),r+=l*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),A&&h>=1){for(var g=0;g<A.length;g++)a.text(A[g],t-a.getStringUnitWidth(A[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var rW={},Wv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:rW=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),l=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return rW||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),KO=function(e,t){return KO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},KO(e,t)};function Ece(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");KO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cce=function(e){Ece(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function nJe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function aJe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function RS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function Nce(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=_ce(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function _ce(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function rj(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Sce(e,t){var r=rj(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function sJe(e,t,r,n,a){var s={},i=1.3333333333333333,l=MI(t,function(_){return a.getComputedStyle(_).backgroundColor});l!=null&&(s.fillColor=l);var c=MI(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=oJe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",A=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/A;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/A,right:(parseFloat(n.borderRightWidth)||0)/A,bottom:(parseFloat(n.borderBottomWidth)||0)/A,left:(parseFloat(n.borderLeftWidth)||0)/A},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=MI(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/i);var y=iJe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function iJe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function MI(e,t){var r=kce(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function kce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:kce(e.parentElement,t):r}function oJe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),i=rj(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function jce(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],A=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:A,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),v=lJe(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):A.push(v))}return{head:d,body:A,foot:h}}function lJe(e,t,r,n,a,s){for(var i=new Cce(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=sJe(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:cJe(c)})}}var A=r.getComputedStyle(n);if(i.length>0&&(a||A.display!=="none"))return i}function cJe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function uJe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function ch(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var l=arguments[i];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Bce(e,t){var r=new Wv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();uJe(a,n,t);var s=ch({},a,n,t),i;typeof window<"u"&&(i=window);var l=dJe(a,n,t),c=AJe(a,n,t),u=fJe(r,s),d=mJe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function dJe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],A=r[c];n.columnStyles=ch({},u,d,A)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=ch({},m[0],m[1],m[2])}},s=0,i=Object.keys(n);s<i.length;s++){var l=i[s];a(l)}return n}function AJe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var l=i[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function fJe(e,t){var r,n,a,s,i,l,c,u,d,A,h,m,g=rj(t.margin,40/e.scaleFactor()),x=(r=hJe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),j=!!t.horizontalPageBreak,k=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(A=t.tableLineWidth)!==null&&A!==void 0?A:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:j,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function hJe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function mJe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var l=jce(e,t.html,r,i,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||pJe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function pJe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(i=(l==null?void 0:l.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var qO=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),gJe=function(e){Ece(t,e);function t(r,n,a,s,i,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(qO),xJe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new gJe(t,this,n,a,s,i),A=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],A)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new qO(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new qO(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Tce=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Cce&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var l=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),Ice=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=i.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=rj(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),vJe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function bJe(e,t){yJe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=WO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=WO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),EJe(t),CJe(t,e),wJe(t)}function yJe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Sce(e,t);t.allRows().forEach(function(s){for(var i=0,l=t.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var A=u.padding("horizontal");u.contentWidth=RS(u.text,u.styles,e)+A;var h=RS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,l=t.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},A=d.cellWidth||d.minCellWidth;A&&typeof A=="number"&&(c.minWidth=A,c.wrappedWidth=A)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function WO(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],l=i.wrappedWidth/a,c=n*l,u=i.width+c,d=r(i),A=u<d?d:u;t-=A-i.width,i.width=A}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=WO(h,t,r))}return t}function wJe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,l=e.columns;i<l.length;i++){var c=l[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var A=n.length-a,h=d.rowSpan>A?A:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function EJe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(i-=1,i>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function CJe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,l=e.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=nW(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=nW(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var A=u.styles.overflow(u.text,d);typeof A=="string"?u.text=[A]:u.text=A}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function nW(e,t,r,n,a){return e.map(function(s){return NJe(s,t,r,n,a)})}function NJe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=RS(e,r,n))return e;for(;t<RS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Fce(e,t){var r=new Wv(e),n=_Je(t,r.scaleFactor()),a=new xJe(t,n);return bJe(r,a),r.applyStyles(r.userStyles),a}function _Je(e,t){var r=e.content,n=kJe(r.columns);if(r.head.length===0){var a=aW(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=aW(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:UI("head",r.head,n,i,s,t),body:UI("body",r.body,n,i,s,t),foot:UI("foot",r.foot,n,i,s,t)}}function UI(e,t,r,n,a,s){var i={},l=t.map(function(c,u){for(var d=0,A={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(i[v.index]==null||i[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=jJe(e,v,u,a,n,s,w),j=new Ice(y,_,e);A[v.dataKey]=j,A[v.index]=j,m=j.colSpan-1,i[v.index]={left:j.rowSpan-1,times:m}}else m--,h++;else i[v.index].left--,m=i[v.index].times,d++}return new Tce(c,u,e,A)});return l}function aW(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=SJe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function SJe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function kJe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new vJe(a,t,r)})}function jJe(e,t,r,n,a,s,i){var l=aJe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=ch({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},A=e==="body"?d:{},h=e==="body"&&r%2===0?ch({},l.alternateRow,a.alternateRowStyles):{},m=nJe(s),g=ch({},m,u,h,A);return ch(g,i)}function BJe(e,t,r){var n;r===void 0&&(r={});var a=Sce(e,t),s=new Map,i=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),i.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var A=t.columns[d].wrappedWidth;if(u||a>=A)u=!1,i.push(d),l.push(t.columns[d]),a-=A;else break;d++}return{colIndexes:i,columns:l,lastIndex:d-1}}function TJe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=BJe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Oce(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Wv(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Pce(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var A=ch({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?IJe(d,t,A,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Dh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;LS(d,t,h,g,A,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Dh(d,t,h,s,t.columns)})),Nce(d,t,A,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function IJe(e,t,r,n){var a=TJe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Ow(e,t,r,n,u.columns,!0):sW(e,t,n,u.columns),FJe(e,t,r,n,u.columns),QI(e,t,n,u.columns)});else for(var i=-1,l=a[0],c=function(){var u=i;if(l){e.applyStyles(e.userStyles);var d=l.columns;i>=0?Ow(e,t,r,n,d,!0):sW(e,t,n,d),u=iW(e,t,i+1,n,d),QI(e,t,n,d)}var A=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Ow(e,t,r,n,h.columns,!0),iW(e,t,i+1,n,h.columns,A),QI(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function sW(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Dh(e,t,s,r,n)})}function FJe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var l=i===t.body.length-1;LS(e,t,s,l,r,n,a)})}function iW(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,A=Dce(e,t,d,n);c.canEntireRowFit(A,a)&&(Dh(e,t,c,n,a),l=r+u)}),l}function QI(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Dh(e,t,s,r,n)})}function OJe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function DJe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,l=r.columns;i<l.length;i++){var c=l[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Ice(u.raw,u.styles,u.section);d=ch(d,u),d.text=[];var A=OJe(u,t,n);u.text.length>A&&(d.text=u.text.splice(A,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Tce(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function PJe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,l=a-i;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),A=t.getMaxCellHeight(n.columns)>l;return A?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function LS(e,t,r,n,a,s,i){var l=Dce(e,t,n,s);if(r.canEntireRowFit(l,i))Dh(e,t,r,s,i);else if(PJe(e,r,l,t)){var c=DJe(r,l,t,e);Dh(e,t,r,s,i),Ow(e,t,a,s,i),LS(e,t,c,n,a,s,i)}else Ow(e,t,a,s,i),LS(e,t,r,n,a,s,i)}function Dh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var l=i[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}RJe(e,c,n);var d=c.getTextPos();wce(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function RJe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=_ce(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),LJe(e,t,r,n.lineWidth))}function LJe(e,t,r,n){var a,s,i,l;n.top&&(a=r.x,s=r.y,i=r.x+t.width,l=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,l)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,l=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,l)),n.left&&(a=r.x,s=r.y,i=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,i,l)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,i,l));function c(u,d,A,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,A,h,m,"S")}}function Dce(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Ow(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Dh(e,t,l,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;Nce(e,t,r,n),Pce(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Dh(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function Pce(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function MJe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Bce(this,n),s=Fce(this,a);return Oce(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){wce(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Wv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Wv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Wv(this),s=jce(a,t,window,r,!1),i=s.head,l=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var HI;function gi(e,t){var r=Bce(e,t),n=Fce(e,r);Oce(e,n)}try{if(typeof window<"u"&&window){var oW=window,lW=oW.jsPDF||((HI=oW.jspdf)===null||HI===void 0?void 0:HI.jsPDF);lW&&MJe(lW)}}catch(e){console.error("Could not apply autoTable plugin",e)}const wM="evaluaciones_pruebas",EM="evaluaciones_rubricas_estaticas",CM="evaluaciones_rubricas_interactivas",UJe="usuarios",nj=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},QJe=e=>{const t=$t(vt(ft,wM),pr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>nj(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},HJe=async e=>{try{const{id:t,...r}=e,n=sr(ft,wM,t);await yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},VJe=async e=>{try{await Ra(sr(ft,wM,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},zJe=e=>{const t=$t(vt(ft,EM),pr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>nj(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},$Je=async e=>{try{const{id:t,...r}=e,n=sr(ft,EM,t);await yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},GJe=async e=>{try{await Ra(sr(ft,EM,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},KJe=e=>{const t=$t(vt(ft,CM));return fr(t,n=>{e(n.docs.map(a=>nj(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},qJe=async e=>{try{const{id:t,...r}=e,n=sr(ft,CM,t);await yi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},WJe=async e=>{try{return(await hn(vt(ft,CM),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},XJe=e=>{const t=$t(vt(ft,UJe));return fr(t,n=>{e(n.docs.map(a=>nj(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},YJe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],cW={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},P5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},JJe=({open:e})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):o.jsxs(o.Fragment,{children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),ZJe=({item:e,index:t,showAnswers:r})=>{const n=C.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&o.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return o.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[o.jsx("div",{className:"w-5 h-5 border rounded-full"}),o.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&o.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&o.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[o.jsx("span",{children:"V ___ F ___"}),r&&o.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),o.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>o.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),o.jsx("div",{className:"space-y-2",children:n.map((a,s)=>o.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&o.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[o.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),o.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>o.jsxs("li",{children:[o.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&o.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[o.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return o.jsxs("div",{className:"pt-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),o.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((l,c)=>{const u=r&&c===i.respuestaCorrecta;return o.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[o.jsx("div",{className:"w-5 h-5 border rounded-full"}),o.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return o.jsxs("div",{className:"pt-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),o.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},eZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(null),[a,s]=C.useState(!1),[i,l]=C.useState(!1),[c,u]=C.useState(null),[d,A]=C.useState(!1),h={nombre:"",asignatura:js[0],nivel:wH[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,g]=C.useState(h);C.useEffect(()=>{const E=QJe(t);return()=>E()},[]);const x=E=>{const{name:S,value:B}=E.target;g(R=>({...R,[S]:B}))},v=E=>{g(S=>{const B={...S.tiposActividad};return B[E]?delete B[E]:B[E]=cW[E][0],{...S,tiposActividad:B}})},y=(E,S)=>{g(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:S}}))},w=E=>{g(S=>{const B=S.selectedNee.includes(E)?S.selectedNee.filter(R=>R!==E):[...S.selectedNee,E];return{...S,selectedNee:B}})},_=async E=>{if(E.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const S=Object.entries(m.tiposActividad).map(([P,F])=>`- ${F} ítem(s) de tipo '${P}'`).join(`
`),B=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{T1("Evaluación - Pruebas");const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new Ds(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(q);let X=0;K.actividades.forEach(G=>{G.items.forEach(D=>{X+=D.puntaje||0,D.tipo==="Comprensión de lectura"&&D.preguntas&&D.preguntas.forEach(U=>{X+=U.puntaje||0})})});const Z={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:K.objetivo,instruccionesGenerales:K.instruccionesGenerales,puntajeIdeal:X,actividades:K.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(Z),A(!1)}catch(P){console.error(P),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},j=async()=>{if(r)try{await HJe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},k=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await VJe(E),(r==null?void 0:r.id)===E&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},I=async E=>{l(!0);const S=new vr("p","mm","a4"),B=20,R=S.internal.pageSize.getHeight(),P=S.internal.pageSize.getWidth(),F=P-B*2;let L=B;const M=q=>{q.setFillColor(230,230,230),q.rect(0,0,P,25,"F"),q.setFontSize(9),q.setTextColor(0,0,0),q.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),q.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",P-B,15,{align:"right"})};M(S),L=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(E.nombre,P/2,L,{align:"center"}),L+=10,gi(S,{startY:L,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:q=>{M(S)}}),L=S.lastAutoTable.finalY+10;const ee=q=>{L+q>R-B&&(S.addPage(),M(S),L=B+15,S.setTextColor(0,0,0))},V=(q,K)=>{S.setFont("helvetica",K.isBold?"bold":"normal"),S.setFontSize(K.fontSize);const X=Array.isArray(q)?q.join(`
`):q;return S.getTextDimensions(X,{maxWidth:K.width}).h};for(const q of E.actividades){let K=V(q.titulo,{fontSize:12,width:F,isBold:!0})+V(q.instrucciones,{fontSize:10,width:F})+12;ee(K),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(q.titulo,B,L),L+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const X=S.splitTextToSize(q.instrucciones,F);S.text(X,B,L),L+=X.length*(10*.35*1.15)+4;for(const[Z,G]of q.items.entries()){let D=0;const U=`${Z+1}. ${G.pregunta} (${G.puntaje} pts)`;switch(D+=V(U,{fontSize:10,width:F,isBold:!0}),G.tipo){case"Selección múltiple":G.opciones.forEach(re=>{D+=V(re,{fontSize:10,width:F-5})+3}),D+=7;break;case"Verdadero o Falso":D+=10;break;case"Desarrollo":D+=30;break;case"Términos pareados":D+=G.pares.length*12+20;break;case"Comprensión de lectura":const J=G;D+=V(J.texto,{fontSize:10,width:F-10})+10,J.preguntas.forEach(re=>{const oe=`${re.pregunta} (${re.puntaje} pts)`;D+=V(oe,{fontSize:10,width:F-5,isBold:!0}),re.tipo==="Selección múltiple"?(re.opciones.forEach(se=>{D+=V(se,{fontSize:10,width:F-10})+3}),D+=7):re.tipo==="Desarrollo"&&(D+=30),D+=5}),D+=15;break}ee(D),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const z=S.splitTextToSize(U,F);if(S.text(z,B,L),L+=z.length*5+4,S.setFont("helvetica","normal"),G.tipo==="Selección múltiple")G.opciones.forEach((J,re)=>{S.text(`${String.fromCharCode(65+re)}) ${J}`,B+5,L),L+=7});else if(G.tipo==="Verdadero o Falso")S.text("V ______    F ______",B+5,L),L+=10;else if(G.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(B,L,F,25,"FD"),L+=30;else if(G.tipo==="Términos pareados"){const J=[...G.pares.map(oe=>oe.definicion)].sort(()=>Math.random()-.5),re=G.pares.map((oe,se)=>[`${se+1}. ${oe.concepto}`,`(   ) ${J[se]}`]);gi(S,{startY:L,head:[["Columna A: Concepto","Columna B: Definición"]],body:re,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:oe=>M(S)}),L=S.lastAutoTable.finalY+10}else if(G.tipo==="Comprensión de lectura"){const J=G;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const re=S.splitTextToSize(J.texto,F-10),oe=re.length*(10*.35*1.15)+8;S.rect(B,L,F,oe,"FD"),L+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(re,B+5,L),L+=oe;for(const[se,le]of J.preguntas.entries()){const ue=`${se+1}. ${le.pregunta} (${le.puntaje} pts)`;S.setFont("helvetica","bold");const ke=S.splitTextToSize(ue,F-5);S.text(ke,B+5,L),L+=ke.length*5+4,S.setFont("helvetica","normal"),le.tipo==="Selección múltiple"?le.opciones.forEach((ae,Ne)=>{S.text(`${String.fromCharCode(65+Ne)}) ${ae}`,B+10,L),L+=7}):le.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(B+5,L,F-5,25,"FD"),L+=30)}}L+=5}}S.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),l(!1)};return r?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>A(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[o.jsx(JJe,{open:!d})," ",o.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),o.jsx("button",{onClick:j,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),o.jsxs("button",{onClick:()=>I(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":o.jsx(Pte,{})," PDF"]})]})]}),o.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[o.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),o.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),o.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),o.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),o.jsxs("p",{className:"text-right",children:[o.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[o.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&o.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[o.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),o.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),o.jsx("div",{className:"space-y-6",children:E.items.map((S,B)=>o.jsx(ZJe,{item:S,index:B,showAnswers:d},S.id))})]},E.id))]})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),o.jsx("div",{}),o.jsx("select",{name:"asignatura",value:m.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:js.map(E=>o.jsx("option",{children:E},E))}),o.jsx("select",{name:"nivel",value:m.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:wH.map(E=>o.jsx("option",{children:E},E))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),o.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,S)=>o.jsx("button",{type:"button",onClick:()=>g(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${m.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m.isNee,onChange:E=>g(S=>({...S,isNee:E.target.checked,selectedNee:E.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&o.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:T_.map(E=>o.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),o.jsx("textarea",{name:"contenido",value:m.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("div",{className:"space-y-3",children:YJe.map(E=>o.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[E],onChange:()=>v(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),m.tiposActividad[E]&&o.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),cW[E].map(S=>o.jsx("button",{type:"button",onClick:()=>y(E,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[E]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},E))}),c&&o.jsx("p",{className:"text-red-500 text-sm",children:c}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),o.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),o.jsx("button",{onClick:()=>k(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},tZe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=C.useState(null),[i,l]=C.useState("list"),[c,u]=C.useState(!1),[d,A]=C.useState(""),h=async(k,I)=>{if(!k.trim()||!I.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${k}" con el propósito de "${I}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{T1("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Ds(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),ee=JSON.parse(M),V={id:crypto.randomUUID(),titulo:k,descripcion:I,fechaCreacion:new Date().toISOString(),dimensiones:ee.map(q=>({id:crypto.randomUUID(),nombre:q.dimension,niveles:{insuficiente:q.insuficiente,suficiente:q.suficiente,competente:q.competente,avanzado:q.avanzado}}))};s(V)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},m=async()=>{if(!d.trim()||!a)return;const k=crypto.randomUUID(),I={id:k,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,I]}:null),A("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{T1("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Ds(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),ee=JSON.parse(M);s(V=>V?{...V,dimensiones:V.dimensiones.map(q=>q.id===k?{...q,niveles:ee,isLoading:!1}:q)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(R=>R?{...R,dimensiones:R.dimensiones.filter(P=>P.id!==k)}:null)}},g=()=>{if(!a)return;e.some(I=>I.id===a.id)?t(a):n(a),l("list"),s(null)},x=k=>{s(k),l("form")},v=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),l("form")},y=(k,I,E)=>{a&&s(S=>S?{...S,dimensiones:S.dimensiones.map(B=>B.id!==k?B:I==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[I]:E}})}:null)},w=(k,I)=>{s(E=>E?{...E,[k]:I}:null)},_=k=>{a&&s(I=>I?{...I,dimensiones:I.dimensiones.filter(E=>E.id!==k)}:null)},j=()=>{if(!a)return null;const k="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",I=`${k} resize-none text-sm`;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),o.jsx("button",{onClick:()=>l("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),o.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${k} mt-1`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),o.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${k} mt-1`})]})]}),a.dimensiones.length===0&&o.jsx("div",{className:"text-center py-4",children:o.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:o.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>o.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 w-1/5",children:o.jsx("textarea",{value:E.nombre,onChange:S=>y(E.id,"nombre",S.target.value),rows:4,className:I})}),Object.keys(E.niveles).map(S=>o.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?o.jsx("div",{className:"flex justify-center items-center h-full",children:o.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):o.jsx("textarea",{value:E.niveles[S],onChange:B=>y(E.id,S,B.target.value),rows:4,className:I})},S)),o.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:o.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),o.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),o.jsx("input",{value:d,onChange:E=>A(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${k} mt-1`})]}),o.jsx("button",{onClick:m,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),o.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:o.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),o.jsx("button",{onClick:v,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(k=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.titulo}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:k.descripcion})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsx("button",{onClick:()=>x(k),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),o.jsx("button",{onClick:()=>r(k.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},k.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):j()},rZe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState(null),[i,l]=C.useState(null),[c,u]=C.useState({rubricaEstaticaId:"",curso:""}),[d,A]=C.useState(null);C.useEffect(()=>{const w=KJe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(k=>k.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const j={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await WJe(j),u({rubricaEstaticaId:"",curso:""})}catch(k){console.error(k),alert("No se pudo crear la evaluación con rúbrica.")}},m=w=>{s(w),l(JSON.parse(JSON.stringify(w)))},g=(w,_,j)=>{i&&l(k=>{if(!k)return null;const I=JSON.parse(JSON.stringify(k));return I.resultados[w]||(I.resultados[w]={puntajes:{},feedback:""}),I.resultados[w].puntajes[_]=j,I})},x=async()=>{if(i)try{await qJe(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},v=C.useCallback(w=>{const _=i,j=t.find(R=>R.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!j)return{score:0,maxScore:0,grade:"N/A"};const k=j.dimensiones.length*4,I=_.resultados[w];if(!I)return{score:0,maxScore:k,grade:"1.0"};const E=Object.values(I.puntajes).reduce((R,P)=>R+P,0),S=1+6*(E/k),B=k>0?S.toFixed(1):"1.0";return{score:E,maxScore:k,grade:B}},[i,t]),y=async w=>{if(!i)return;const _=t.find(E=>E.id===i.rubricaEstaticaId),j=i.resultados[w];if(!_||!j||Object.keys(j.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}A(w);const I=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${j.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${_.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{T1("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=(await(await new Ds(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text();l(L=>{if(!L)return null;const M=JSON.parse(JSON.stringify(L));return M.resultados[w].feedback=F.replace(/(\*\*|\*)/g,""),M})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{A(null)}};if(a&&i){const w=t.find(j=>j.id===a.rubricaEstaticaId),_=e.filter(j=>j.profile===Yt.ESTUDIANTE&&P5(j.curso||"")===a.curso).map(j=>j.nombreCompleto).sort();return w?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),o.jsx("p",{className:"text-slate-500",children:a.curso})]}),o.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-collapse",children:[o.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(j=>o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:j.nombre},j.id)),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),o.jsx("tbody",{children:_.map(j=>{var S;const{score:k,maxScore:I,grade:E}=v(j);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:j}),w.dimensiones.map(B=>o.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:o.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var P;return o.jsx("button",{onClick:()=>g(j,B.id,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((P=i.resultados[j])==null?void 0:P.puntajes[B.id])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},B.id)),o.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[k,"/",I]}),o.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),o.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[o.jsx("p",{className:"text-xs w-full",children:((S=i.resultados[j])==null?void 0:S.feedback)||"Sin generar"}),o.jsx("button",{onClick:()=>y(j),disabled:d===j,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===j?"...":"Generar IA"})]})})]},j)})})]})}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):o.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",o.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),o.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[o.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>o.jsx("option",{value:w.id,children:w.titulo},w.id))]}),o.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un Curso"}),_s.map(w=>o.jsx("option",{value:w,children:w},w))]}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),o.jsx("div",{className:"space-y-2",children:r.map(w=>o.jsxs("button",{onClick:()=>m(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[o.jsx("p",{className:"font-semibold",children:w.nombre}),o.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},nZe=({allUsers:e})=>{const[t,r]=C.useState(""),n=C.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Yt.ESTUDIANTE&&s.curso).map(s=>P5(s.curso)))).sort(),[e]),a=C.useMemo(()=>{const s=e.filter(i=>i.profile===Yt.ESTUDIANTE);return t?s.filter(i=>P5(i.curso||"")===t).sort((i,l)=>i.nombreCompleto.localeCompare(l.nombreCompleto)):s.sort((i,l)=>i.nombreCompleto.localeCompare(l.nombreCompleto))},[e,t]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",o.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),o.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>o.jsx("option",{value:s,children:s},s))]})]}),o.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P5(s.curso||"")}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},aZe=()=>{const[e,t]=C.useState("pruebas"),[r,n]=C.useState([]),[a,s]=C.useState([]),[i,l]=C.useState(!0);C.useEffect(()=>{l(!0);const A=XJe(n),h=zJe(m=>{s(m),l(!1)});return()=>{A(),h()}},[]);const c=async A=>{try{await $Je(A)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async A=>{try{await GJe(A)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:A,label:h})=>o.jsx("button",{onClick:()=>t(A),className:`${e===A?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?o.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),o.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),o.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),o.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),o.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&o.jsx(eZe,{}),e==="rubricas"&&o.jsx(tZe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&o.jsx(rZe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&o.jsx(nZe,{allUsers:r})]})]})},sZe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=vt(wr,c),d=await Dn(u),A=d.size;n+=A,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:A});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=vt(wr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=$t(c,Ir("timestamp",">=",u.toISOString()),pr("timestamp","desc")),A=await Dn(d),h={};A.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{i.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},uW=500,$x=({title:e,value:t,description:r,alert:n})=>o.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),o.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),VI=({title:e,data:t,colorClass:r})=>{const n=C.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),o.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),o.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},iZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0),[a,s]=C.useState(null),[i,l]=C.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});C.useEffect(()=>{n(!0);const A=ZXe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await sZe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{A(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=C.useMemo(()=>{const A=new Date,h=new Date(A.getFullYear(),A.getMonth(),A.getDate()).getTime(),m=h-A.getDay()*24*60*60*1e3,g=new Date(A.getFullYear(),A.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(j=>{const k=new Date(j.timestamp).getTime();k>=h&&x.today++,k>=m&&x.week++,k>=g&&x.month++;const I=j.userEmail||"Desconocido";v[I]||(v[I]={email:I,today:0,month:0,total:0}),v[I].total++,k>=h&&v[I].today++,k>=g&&v[I].month++,y[j.module]=(y[j.module]||0)+1});const w=Object.values(v).sort((j,k)=>k.total-j.total),_=Object.entries(y).map(([j,k])=>({label:j,value:k})).sort((j,k)=>k.value-j.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return o.jsxs("div",{className:"space-y-8",children:[a&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsx($x,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${uW}`,alert:c.today>uW}),o.jsx($x,{title:"Llamadas esta Semana",value:r?"--":c.week}),o.jsx($x,{title:"Llamadas este Mes",value:r?"--":c.month})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[o.jsx(VI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),o.jsx("div",{className:"overflow-x-auto max-h-96",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(A=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:A.email}),o.jsx("td",{className:"px-4 py-2 text-center text-sm",children:A.today}),o.jsx("td",{className:"px-4 py-2 text-center text-sm",children:A.month}),o.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:A.total})]},A.email)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx($x,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),o.jsx($x,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),o.jsx($x,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[o.jsx(VI,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),o.jsx(VI,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},dW=vt(wr,"usuarios");async function Rce(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",dW);const e=await Dn(dW);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const AW=Object.values(Yt),zI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",oZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!1),[a,s]=C.useState("Usuarios"),[i,l]=C.useState({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=C.useState(null),[d,A]=C.useState(""),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState(null),[w,_]=C.useState(null),[j,k]=C.useState(null),I=C.useCallback(async()=>{n(!0);try{const K=await Rce();t(K)}catch(K){console.error("Error al cargar usuarios",K),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);C.useEffect(()=>{I()},[I]);const E=C.useCallback(K=>{const{name:X,value:Z}=K.target;l(G=>({...G,[X]:Z,curso:X==="profile"&&Z!==Yt.ESTUDIANTE?"":G.curso,cursos:X==="profile"&&Z!==Yt.PROFESORADO?[]:G.cursos,asignaturas:X==="profile"&&Z!==Yt.PROFESORADO?[]:G.asignaturas}))},[]),S=C.useCallback((K,X)=>{l(Z=>{const G=Z[K]||[],D=G.includes(X)?G.filter(U=>U!==X):[...G,X];return{...Z,[K]:D}})},[]),B=C.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),R=C.useCallback(async K=>{K.preventDefault(),y(null);const{nombreCompleto:X,email:Z,profile:G,curso:D,password:U}=i;if(!X.trim()||!Z.trim()){y("Nombre Completo y Email son obligatorios.");return}if(G===Yt.ESTUDIANTE&&!D){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(U!=null&&U.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const z=Av();try{if(c){const J=Bp(z,"updateUser"),re={...i,password:(U==null?void 0:U.trim())||void 0,curso:G===Yt.ESTUDIANTE?zI(D||""):void 0};await J(re)}else{const J=Bp(z,"createUser"),re={...i,curso:G===Yt.ESTUDIANTE?zI(D||""):void 0};await J(re)}await I(),B()}catch(J){console.error("Error al guardar usuario:",J),y(J.message||"Error al guardar el usuario.")}},[i,c,I,B]),P=C.useCallback(K=>{u(K.email),l({nombreCompleto:K.nombreCompleto,email:K.email,rut:K.rut||"",profile:K.profile,password:"",curso:K.curso||"",cursos:K.cursos||[],asignaturas:K.asignaturas||[]}),setTimeout(()=>{const X=document.querySelector("form");X&&X.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),F=C.useCallback(async K=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${K}? Esta acción es irreversible.`))try{const X=Av();await Bp(X,"deleteUser")({email:K}),await I()}catch(X){console.error("Error al eliminar usuario:",X),y(X.message||"No se pudo borrar el usuario.")}},[I]),L=async K=>{var U;const X=(U=K.target.files)==null?void 0:U[0];if(!X)return;_({message:"Procesando archivo...",isError:!1});const Z=Av(),G=Bp(Z,"createUser"),D=new FileReader;D.onload=async z=>{var J;try{const re=new Uint8Array((J=z.target)==null?void 0:J.result),oe=p1(re,{type:"array"}),se=oe.Sheets[oe.SheetNames[0]],le=Ii.sheet_to_json(se);if(le.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=le.map(_e=>{const me=_e.Nombre||_e.nombre,Te=_e.Correo||_e.correo||_e.Email||_e.email,Le=_e.Curso||_e.curso,We=_e.RUT||_e.rut;return!me||!Te||!Le?Promise.resolve({email:Te||"Sin email",error:"Datos incompletos"}):G({nombreCompleto:String(me).trim(),email:String(Te).trim(),profile:Yt.ESTUDIANTE,curso:zI(String(Le).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(xe=>({email:Te,error:xe.message}))}),ke=await Promise.all(ue),ae=ke.filter(_e=>!_e.error).length,Ne=ke.filter(_e=>_e.error);let je=`Carga completada. ${ae} estudiantes agregados.`;Ne.length>0&&(je+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),_({message:je,isError:Ne.length>0}),await I()}catch(re){_({message:`Error: ${re.message}`,isError:!0})}},D.readAsArrayBuffer(X),K.target.value=""},M=async K=>{var U;const X=(U=K.target.files)==null?void 0:U[0];if(!X)return;k({message:"Procesando archivo...",isError:!1});const Z=Av(),G=Bp(Z,"createUser"),D=new FileReader;D.onload=async z=>{var J;try{const re=new Uint8Array((J=z.target)==null?void 0:J.result),oe=p1(re,{type:"array"}),se=oe.Sheets[oe.SheetNames[0]],le=Ii.sheet_to_json(se);if(le.length===0){k({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=le.map(_e=>{const me=_e.Nombre||_e.nombre,Te=_e.Correo||_e.correo||_e.Email||_e.email,Le=_e.Perfil||_e.perfil||_e.Profile||_e.profile,We=_e.RUT||_e.rut;return!me||!Te||!Le?Promise.resolve({email:Te||"Sin email",error:"Datos incompletos"}):G({nombreCompleto:String(me).trim(),email:String(Te).trim(),profile:Le,rut:We?String(We).trim():"",password:"recoleta"}).catch(xe=>({email:Te,error:xe.message}))}),ke=await Promise.all(ue),ae=ke.filter(_e=>!_e.error).length,Ne=ke.filter(_e=>_e.error);let je=`Carga completada. ${ae} usuarios agregados.`;Ne.length>0&&(je+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),k({message:je,isError:Ne.length>0}),await I()}catch(re){k({message:`Error: ${re.message}`,isError:!0})}},D.readAsArrayBuffer(X),K.target.value=""},ee="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=C.useMemo(()=>Array.from(new Set(e.filter(K=>K.profile===Yt.ESTUDIANTE&&K.curso).map(K=>K.curso))).sort(),[e]),q=C.useMemo(()=>e.filter(K=>(d===""||K.nombreCompleto.toLowerCase().includes(d.toLowerCase())||K.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||K.profile===h)&&(g===""||K.curso===g)),[e,d,h,g]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),o.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&o.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),j&&o.jsx("p",{className:`text-sm mt-2 ${j.isError?"text-red-600":"text-green-600"}`,children:j.message})]})]})]}),o.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),o.jsxs("form",{onSubmit:R,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),o.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:ee,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),o.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:ee,required:!0,readOnly:!!c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),o.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:ee})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),o.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:ee})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),o.jsx("select",{name:"profile",value:i.profile,onChange:E,className:ee,required:!0,children:AW.map(K=>o.jsx("option",{value:K,children:K},K))})]}),i.profile===Yt.ESTUDIANTE&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:ee,required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(K=>o.jsx("option",{value:K,children:K},K))]})]})]}),i.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[o.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[o.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:_s.map(K=>{var X;return o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[o.jsx("input",{type:"checkbox",checked:((X=i.cursos)==null?void 0:X.includes(K))||!1,onChange:()=>S("cursos",K),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),i.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[o.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[o.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:js.map(K=>{var X;return o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[o.jsx("input",{type:"checkbox",checked:((X=i.asignaturas)==null?void 0:X.includes(K))||!1,onChange:()=>S("asignaturas",K),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),v&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),o.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&o.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const K=Av(),Z=await Bp(K,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",Z),y("✅ Custom claim agregado exitosamente")}catch(K){console.error("❌ Error al agregar custom claim:",K),y(`Error: ${K.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),o.jsx("button",{type:"button",onClick:async()=>{var K,X,Z,G,D;try{const{auth:U}=await Dg(async()=>{const{auth:re}=await Promise.resolve().then(()=>Ote);return{auth:re}},void 0);console.log("🔍 Usuario actual:",(K=U.currentUser)==null?void 0:K.email);const z=await((X=U.currentUser)==null?void 0:X.getIdToken(!0));console.log("🔑 Token refreshed:",!!z);const J=await((Z=U.currentUser)==null?void 0:Z.getIdTokenResult());console.log("📋 Claims completos:",J==null?void 0:J.claims),console.log("👤 Profile claim:",(G=J==null?void 0:J.claims)==null?void 0:G.profile),((D=J==null?void 0:J.claims)==null?void 0:D.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(J==null?void 0:J.claims)}`)}catch(U){console.error("❌ Error verificando token:",U),y(`Error verificando token: ${U.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:K=>A(K.target.value),className:ee})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:K=>m(K.target.value),className:ee,children:[o.jsx("option",{value:"",children:"Todos los perfiles"}),AW.map(K=>o.jsx("option",{value:K,children:K},K))]})}),o.jsx("div",{children:o.jsxs("select",{value:g,onChange:K=>x(K.target.value),className:ee,children:[o.jsx("option",{value:"",children:"Todos los cursos"}),V.map(K=>o.jsx("option",{value:K,children:K},K))]})})]}),r?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(K=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:K.nombreCompleto}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:K.email}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${K.profile===Yt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":K.profile===Yt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:K.profile})}),o.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[K.profile===Yt.ESTUDIANTE&&o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:K.curso||"Sin curso"}),K.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"space-y-1",children:[K.cursos&&K.cursos.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.cursos.slice(0,3).map(X=>o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:X},X)),K.cursos.length>3&&o.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.cursos.length-3]})]})]}),K.asignaturas&&K.asignaturas.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.asignaturas.slice(0,2).map(X=>o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:X},X)),K.asignaturas.length>2&&o.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.asignaturas.length-2]})]})]}),(!K.cursos||K.cursos.length===0)&&(!K.asignaturas||K.asignaturas.length===0)&&o.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),K.profile!==Yt.ESTUDIANTE&&K.profile!==Yt.PROFESORADO&&o.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[o.jsx("button",{onClick:()=>P(K),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),o.jsx("button",{onClick:()=>F(K.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},K.email))})]}),q.length===0&&o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&o.jsx(iZe,{})]})},I1="seguimiento_dual_records",lZe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},cZe=e=>{const t=$t(vt(ft,I1),pr("nombreEstudiante","asc"));return fr(t,n=>{const a=n.docs.map(s=>lZe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},MS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},uZe=async e=>{try{const t=MS(e);return(await hn(vt(ft,I1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},fW=async(e,t)=>{try{const r=sr(ft,I1,e),n=MS(t);await yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},dZe=async e=>{try{const t=sr(ft,I1,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},AZe=async e=>{const t=$g(ft),r=vt(ft,I1);let n=0,a=0;for(const s of e){const i=$t(r,Ir("rutEstudiante","==",s.rutEstudiante)),l=await Dn(i);if(l.empty){const c=sr(r);t.set(c,MS(s)),a++}else{const c=l.docs[0].id,u=sr(ft,I1,c);t.set(u,MS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},fZe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},hZe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},mZe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},pZe=({record:e,onSave:t,onClose:r})=>{const[n,a]=C.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:A,checked:h}=c.target;a(m=>({...m,[u]:A==="checkbox"?h:d}))},l=()=>{t(n)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),o.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),o.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),o.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),o.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),o.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),o.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),o.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),o.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),o.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},gZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0),a=C.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Zp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:bB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=C.useState(a),[l,c]=C.useState(null),[u,d]=C.useState(""),[A,h]=C.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState(!1),[_,j]=C.useState(null);C.useEffect(()=>{n(!0);const K=cZe(X=>{t(X),n(!1)});return()=>K()},[]);const k=C.useCallback(K=>{const{name:X,value:Z}=K.target;i(G=>({...G,[X]:Z}))},[]),I=C.useCallback(K=>{const{name:X,value:Z}=K.target;h(G=>({...G,[X]:Z}))},[]),E=C.useCallback(()=>{i(a),c(null),g(null)},[a]),S=async K=>{K.preventDefault(),g(null);const Z=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(G=>{var D;return!((D=s[G])!=null&&D.trim())});if(Z){g(`El campo '${Z}' es obligatorio.`);return}try{l?await fW(l,s):await uZe(s),E()}catch(G){console.error(G),g("No se pudo guardar el registro.")}},B=C.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),c(K.id),i(K)},[]),R=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await dZe(K)}catch(X){console.error(X),g("No se pudo eliminar el registro.")}},P=K=>{j(K),w(!0)},F=()=>{j(null),w(!1)},L=async K=>{try{await fW(K.id,K),F()}catch(X){console.error(X),alert("No se pudieron guardar los cambios de supervisión.")}},M=()=>{const K=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],X=Ii.aoa_to_sheet([K]),Z=Ii.book_new();Ii.book_append_sheet(Z,X,"Plantilla"),mE(Z,"Plantilla_Seguimiento_Dual.xlsx")},ee=K=>{var G;const X=(G=K.target.files)==null?void 0:G[0];if(!X)return;v({message:"Procesando archivo...",isError:!1});const Z=new FileReader;Z.onload=async D=>{var U;try{const z=new Uint8Array((U=D.target)==null?void 0:U.result),J=p1(z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),re=J.SheetNames[0],oe=J.Sheets[re],se=Ii.sheet_to_json(oe,{raw:!1,dateNF:"yyyy-mm-dd"});if(se.length===0)throw new Error("El archivo está vacío.");const le={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ue=Object.keys(se[0]).map(je=>je.trim().toLowerCase()),ae=["nombre","rut","curso 2025","empresa","estado"].find(je=>!ue.includes(je));if(ae)throw new Error(`Falta la columna requerida: '${ae}'`);const Ne=se.map((je,_e)=>{try{const me={};for(const Te in je){const Le=le[Te.trim().toLowerCase()];if(Le){let We=je[Te];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Le)?(We=hZe(We),We&&(me[Le]=We)):Le.includes("realizada")?me[Le]=mZe(We):We!=null&&We!==""&&(me[Le]=String(We).trim())}}return!me.nombreEstudiante||!me.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):me}catch(me){return console.error(`Error procesando fila ${_e+2}:`,me),null}}).filter(je=>je!==null);if(console.log("Registros procesados:",Ne),Ne.length>0){const{updated:je,created:_e}=await AZe(Ne);v({message:`Carga exitosa. ${_e} registros creados, ${je} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(z){console.error("Error completo:",z),v({message:`Error al procesar el archivo: ${z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},Z.readAsArrayBuffer(X)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=C.useMemo(()=>e.filter(K=>(u===""||K.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||K.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||K.rutEstudiante.includes(u))&&(A.curso===""||K.curso===A.curso)&&(A.empresa===""||K.nombreEmpresa===A.empresa)&&(A.estado===""||K.estado===A.estado)&&(A.comuna===""||K.comuna===A.comuna)&&(A.profesor===""||K.profesorTutorEmpresa===A.profesor)).sort((K,X)=>K.nombreEstudiante.localeCompare(X.nombreEstudiante)),[e,u,A]);return C.useMemo(()=>{const K=new Set,X=new Set;return e.forEach(Z=>{Z.nombreEmpresa&&K.add(Z.nombreEmpresa),Z.comuna&&X.add(Z.comuna)}),{empresas:Array.from(K).sort(),comunas:Array.from(X).sort()}},[e]),r?o.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),o.jsxs("form",{onSubmit:S,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),o.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),o.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsx("select",{name:"curso",value:s.curso,onChange:k,className:V,required:!0,children:Zp.map(K=>o.jsx("option",{value:K,children:K},K))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),o.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:k,className:V,children:[o.jsx("option",{value:"",children:"Seleccione un profesor"}),CF.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),o.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),o.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:k,className:V})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),o.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:k,className:V})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),o.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:k,className:V})]}),o.jsxs("div",{className:"lg:col-span-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),o.jsx("select",{name:"estado",value:s.estado,onChange:k,className:V,children:bB.map(K=>o.jsx("option",{value:K,children:K},K))})]})]}),s.estado==="Desvinculado"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),o.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),o.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]})]}),m&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),o.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&o.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[o.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),o.jsx("input",{type:"file",onChange:ee,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&o.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[o.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:K=>d(K.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),o.jsxs("select",{name:"curso",value:A.curso,onChange:I,className:V,children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),Zp.map(K=>o.jsx("option",{children:K},K))]}),o.jsxs("select",{name:"estado",value:A.estado,onChange:I,className:V,children:[o.jsx("option",{value:"",children:"Todos los Estados"}),bB.map(K=>o.jsx("option",{children:K},K))]}),o.jsxs("select",{name:"profesor",value:A.profesor,onChange:I,className:V,children:[o.jsx("option",{value:"",children:"Todos los Profesores"}),CF.map(K=>o.jsx("option",{children:K},K))]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(K=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.nombreEstudiante}),o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:K.curso})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.nombreEmpresa}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.profesorTutorEmpresa}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${fZe[K.estado]}`,children:K.estado})}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[o.jsx("button",{onClick:()=>P(K),className:"text-blue-600 hover:underline",children:"Supervisión"}),o.jsx("button",{onClick:()=>B(K),className:"text-yellow-600 hover:underline",children:"Editar"}),o.jsx("button",{onClick:()=>R(K.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},K.id))})]})})]}),y&&_&&o.jsx(pZe,{record:_,onClose:F,onSave:L})]})},Lce="actividades_remotas",Mce="respuestas_actividades",Uce="pruebas_estandarizadas",xZe="usuarios",Qce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},NM=e=>{const t=Qce(e);return t?t.toISOString():void 0},US=e=>{const t=Qce(e);return t?t.toISOString().split("T")[0]:void 0},Hce=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},Vce=e=>ir.fromDate(new Date(e||new Date().toISOString())),vZe=e=>!!e&&/^data:/.test(e),I2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(I2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=I2(n))}),t},bZe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let l=0;l<s;l++)i[l]=a.charCodeAt(l);return{bytes:i,contentType:r}},yZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:NM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:US(t.plazoEntrega)||US(new Date)}},wZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:NM(t.fechaCompletado)||new Date().toISOString()}},EZe=e=>{const t=e.data()||{};return{id:e.id,...t}},CZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:NM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:US(t.plazoEntrega)||US(new Date)}},NZe=e=>{const t=$t(vt(ft,Lce),pr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(yZe)),r=>{console.error("subscribeToActividades error:",r),e([])})},_Ze=(e,t)=>{const r=vt(ft,Mce),n=$t(r,pr("fechaCompletado","desc"));return fr(n,a=>e(a.docs.map(wZe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},SZe=e=>{const t=$t(vt(ft,xZe),pr("nombreCompleto","asc"));return fr(t,r=>e(r.docs.map(EZe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},kZe=e=>{const t=$t(vt(ft,Uce),pr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(CZe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},jZe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=I2({...a,fechaCreacion:Vce(r),plazoEntrega:Hce(n)});return(await hn(vt(ft,Lce),s)).id},BZe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=I2({...a,fechaCreacion:Vce(r),plazoEntrega:Hce(n)});return(await hn(vt(ft,Uce),s)).id},TZe=async(e,t)=>{const r=I2(t);await cc(sr(ft,Mce,e),r)},IZe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},FZe=async(e,t,r)=>{const{bytes:n,contentType:a}=bZe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=aE(PNe,c);await AR(u,n,{contentType:a});const d=await J4(u);return{nombre:t,url:d}},OZe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,l)=>{if(vZe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${l}.bin`;return FZe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${l}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return jZe(a)},_y=e=>e?new Date(e).toLocaleDateString("es-CL"):"",DZe=e=>e?new Date(e).toLocaleString("es-CL"):"",PZe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),zce=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},di=(e,t)=>{if(t&&zce(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>di(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Gl=(e,t,...r)=>{if(zce(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=di(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=di(e,`UltraSafeRenderer-${t}`);return o.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),o.jsx("span",{children:"[Error al mostrar contenido]"})}},$I={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},GI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],RZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState([]),[i,l]=C.useState([]),[c,u]=C.useState(null),[d,A]=C.useState(null),[h,m]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState(!1),[w,_]=C.useState(!1),[j,k]=C.useState(!1),[I,E]=C.useState(!0),[S,B]=C.useState(null),[R,P]=C.useState(""),[F,L]=C.useState(null),[M,ee]=C.useState(null),[V,q]=C.useState([]),[K,X]=C.useState("carpetas"),[Z,G]=C.useState(null),[D,U]=C.useState(null),[z,J]=C.useState([]),[re,oe]=C.useState(""),se={asignatura:js[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[le,ue]=C.useState(se),ke={asignatura:js[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ae,Ne]=C.useState(ke);C.useEffect(()=>{E(!0);const Ze=NZe(t),mt=kZe(n),Je=_Ze(s),xt=SZe(Et=>{l(Et),E(!1)});return()=>{Ze(),mt(),Je(),xt()}},[]);const je=Ze=>{ue(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},_e=Ze=>{Ne(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},me=Ze=>{ue(mt=>({...mt,recursos:{...mt.recursos,[Ze.target.name]:Ze.target.value}}))},Te=Ze=>{Ze.target.files&&q(Array.from(Ze.target.files))},Le=Ze=>{ue(mt=>{const Je=mt.tipos.includes(Ze)?mt.tipos.filter(Et=>Et!==Ze):[...mt.tipos,Ze],xt={...mt.cantidadPreguntas};return Je.includes(Ze)?xt[Ze]||(xt[Ze]=$I[Ze][0]):delete xt[Ze],{...mt,tipos:Je,cantidadPreguntas:xt}})},We=(Ze,mt)=>{ue(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[Ze]:mt}}))},xe=(Ze,mt=!1)=>{(mt?Ne:ue)(xt=>{const Et=xt.estudiantesDestino||[],bt=Et.includes(Ze)?Et.filter(nr=>nr!==Ze):[...Et,Ze];return{...xt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:Ze,contenido:mt,asignatura:Je,nivel:xt,cantidadPreguntas:Et}=le;let bt=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${mt}"
Asignatura: ${Je}
Nivel educativo: ${xt}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return Ze.forEach(nr=>{const xr=Et[nr]||$I[nr][0];switch(nr){case"Quiz":bt+=`- "Quiz": Array de ${xr} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${xr} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${xr} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${xr} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),bt+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,Ze.includes("Quiz")&&(bt+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),Ze.includes("Comprensión de Lectura")&&(bt+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),bt},Re=()=>{const{contenido:Ze,objetivosAprendizaje:mt,asignatura:Je,nivel:xt}=ae;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Je}
- Nivel educativo: ${xt}
- Contenido principal: ${Ze}
- Objetivos de Aprendizaje: ${mt}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${GI.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function $e(Ze,mt){if(Ze==="Desarrollo"&&Array.isArray(mt))return mt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Et?{pregunta:Gl(Et[1],`desarrollo-pregunta-${xt}`),rubrica:Gl(Et[2],`desarrollo-rubrica-${xt}`)}:{pregunta:Gl(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const Et=Gl(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const nr=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=di(nr,`desarrollo-rubrica-${xt}`)}return{pregunta:Et,rubrica:bt}}return{pregunta:di(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(Ze==="Términos Pareados"&&Array.isArray(mt))return mt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.+?)[\s:-–]+(.+)$/);return Et?{id:xt,concepto:Gl(Et[1],`pareados-concepto-${xt}`),definicion:Gl(Et[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:Gl(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:Gl(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:Gl(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:di(Je,`pareados-fallback-${xt}`),definicion:""}});if(Ze==="Comprensión de Lectura"){if(mt&&typeof mt=="object"&&!Array.isArray(mt)&&Array.isArray(mt.preguntas))return{texto:Gl(mt,"comprension-texto","texto"),preguntas:mt.preguntas.map((Je,xt)=>({pregunta:Gl(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>di(Et,`comprension-opcion-${xt}`)):[],respuestaCorrecta:di(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(mt)){const Je=mt.map((Et,bt)=>Gl(Et,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=mt.flatMap(Et=>Array.isArray(Et.preguntas)?Et.preguntas:[]);return{texto:Je,preguntas:xt.map((Et,bt)=>({pregunta:Gl(Et,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Et.opciones)?Et.opciones.map(nr=>di(nr,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:di(Et.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof Et.puntaje=="number"?Et.puntaje:1}))}}}return Ze==="Quiz"&&Array.isArray(mt)?mt.map((Je,xt)=>({pregunta:Gl(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>di(Et,`quiz-opcion-${xt}`)):[],respuestaCorrecta:di(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):mt}const et=async Ze=>{var mt;if(Ze.preventDefault(),!le.contenido.trim()||le.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Je=await Promise.all(V.map(async Se=>({nombre:Se.name,url:await PZe(Se)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new Ds(xt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.7,topP:.9,topK:40,maxOutputTokens:8192}}),nr=Oe();let Zr=await(await(await bt.generateContent(nr)).response).text();Zr=Zr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const qr=Zr.match(/\{[\s\S]*\}/);if(!qr)throw new Error("La IA no devolvió JSON válido.");const he=JSON.parse(qr[0]),Ie={};for(const Se of le.tipos){const Fe=(mt=he.actividades)==null?void 0:mt[Se];Ie[Se]=$e(Se,Fe)}let Ce="";he.panelDidactico&&(Ce=typeof he.panelDidactico=="string"?he.panelDidactico:JSON.stringify(he.panelDidactico));const we={id:"",fechaCreacion:new Date().toISOString(),...le,recursos:{...le.recursos,archivos:Je},introduccion:di(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Ce,generatedContent:Ie};L(we)}catch(Je){B(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ct=async Ze=>{if(Ze.preventDefault(),!ae.contenido.trim()||!ae.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const mt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new Ds(mt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.65,topP:.85,topK:30,maxOutputTokens:12288}}),Et=Re();let xr=await(await(await xt.generateContent(Et)).response).text();xr=xr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Wr=xr.match(/\{[\s\S]*\}/);if(!Wr)throw new Error("No se encontró JSON válido en la respuesta.");const Zr=Wr[0].replace(/,(\s*[}\]])/g,"$1"),qr=JSON.parse(Zr);if(!qr.preguntas||!Array.isArray(qr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const he=(qr.textos||[]).map((we,Se)=>({id:we.id||Se+1,titulo:di(we.titulo,`texto-titulo-${Se}`)||`Texto ${Se+1}`,contenido:di(we.contenido,`texto-contenido-${Se}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),Ie=qr.preguntas.slice(0,30).map((we,Se)=>({numero:we.numero||Se+1,pregunta:di(we.pregunta,`pregunta-${Se}`)||`Pregunta ${Se+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((Fe,Ye)=>di(Fe,`pregunta-opcion-${Se}-${Ye}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:GI.includes(we.habilidad)?we.habilidad:GI[0],justificacion:di(we.justificacion,`justificacion-${Se}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ae,titulo:di(qr.titulo,"prueba-titulo")||`Prueba ${ae.asignatura}`,instrucciones:di(qr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:Ie};ee(Ce)}catch(mt){B(`Error al generar la prueba: ${(mt==null?void 0:mt.message)||mt}`)}finally{y(!1)}},gt=async()=>{if(F)try{_(!0),await OZe(F),ue(se),q([]),m(!1),L(null)}catch(Ze){console.error("Error al guardar la actividad con archivos:",Ze),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},It=async()=>{if(M)try{_(!0);const Ze={...M,cursosDestino:M.cursosDestino||[],estudiantesDestino:M.estudiantesDestino||[],textos:M.textos||[],preguntas:M.preguntas.map(mt=>({...mt,textoId:mt.textoId||null}))};await BZe(Ze),Ne(ke),x(!1),ee(null)}catch(Ze){console.error("Error al guardar la prueba:",Ze),B("No se pudo guardar la prueba.")}finally{_(!1)}},Mt=C.useMemo(()=>{var Je,xt,Et;const Ze=c||d;if(!Ze||!i.length)return[];const mt=new Map;return!((Je=Ze.cursosDestino)!=null&&Je.length)&&!((xt=Ze.estudiantesDestino)!=null&&xt.length)?[]:((Et=Ze.estudiantesDestino)!=null&&Et.length&&i.filter(bt=>bt.profile===Yt.ESTUDIANTE&&Ze.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>mt.set(bt.id,bt)),Array.from(mt.values()).sort((bt,nr)=>bt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),Pt=C.useMemo(()=>{const Ze=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(mt=>mt.actividadId===Ze)},[a,c,d]),Qt=C.useMemo(()=>i.filter(Ze=>Ze.profile===Yt.ESTUDIANTE).sort((Ze,mt)=>Ze.nombreCompleto.localeCompare(mt.nombreCompleto)),[i]),wt=C.useMemo(()=>R.trim()?Qt.filter(Ze=>Ze.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Qt,[Qt,R]),Br=C.useMemo(()=>{const Ze=new Set;return e.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Yt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&Ze.add(xt.id)})}),r.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Yt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&Ze.add(xt.id)})}),a.forEach(mt=>Ze.add(mt.estudianteId)),i.filter(mt=>mt.profile===Yt.ESTUDIANTE&&Ze.has(mt.id)).sort((mt,Je)=>mt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),tr=C.useMemo(()=>i.find(Ze=>Ze.id===Z)||null,[i,Z]),an=C.useMemo(()=>{if(!tr)return{asignadas:[],respuestas:[]};const Ze=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],mt=a.filter(Je=>Je.estudianteId===tr.id);return{asignadas:Ze,respuestas:mt}},[tr,e,r,a]),Sr=()=>o.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(Ze=>o.jsxs("button",{onClick:()=>{X(Ze),u(null),A(null),G(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${K===Ze?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[Ze==="carpetas"&&o.jsx(BH,{size:18}),Ze==="actividades"&&o.jsx(Ld,{size:18}),Ze==="pruebas"&&o.jsx(SEe,{size:18}),Ze==="carpetas"?"Carpetas de Estudiantes":Ze==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},Ze)),o.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(sE,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:Ze=>P(Ze.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),K==="actividades"&&!F&&!c&&o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[o.jsx(ZC,{size:18})," Nueva"]}),K==="pruebas"&&!M&&!d&&o.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[o.jsx(ZC,{size:18})," Nueva"]})]})]}),$r=()=>{const Ze=R?wt:Br;return Ze.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ze.map(mt=>{const Je=a.filter(bt=>bt.estudianteId===mt.id),xt=Je.length,Et=e.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length;return o.jsxs("button",{onClick:()=>G(mt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[o.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:o.jsx(BH,{})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"font-semibold text-slate-800 truncate",children:mt.nombreCompleto}),o.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[o.jsx(t2,{size:14})," ",mt.curso||"—"]})]})]}),o.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:Et}),o.jsx("p",{className:"text-xs",children:"Asignadas"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:xt}),o.jsx("p",{className:"text-xs",children:"Entregas"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(nh,{size:16,className:"opacity-70"}),o.jsx("span",{className:"text-xs mt-1",children:Je.length?_y(Je.sort((bt,nr)=>(bt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},mt.id)})}):o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},In=()=>{if(!tr)return null;const{asignadas:Ze,respuestas:mt}=an;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsxs("button",{onClick:()=>G(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[o.jsx(JC,{size:18})," Volver"]}),o.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",tr.nombreCompleto]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ze.map(({tipo:Je,item:xt})=>{var xr;const Et=mt.find(Wr=>Wr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura} — ${(xr=xt.tipos)==null?void 0:xr.join(", ")}`:xt.titulo,nr=xt.plazoEntrega?_y(xt.plazoEntrega):"—";return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:o.jsx(Ia,{content:bt,context:"hist-titulo"})}),o.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),o.jsx("td",{className:"px-4 py-3 text-sm",children:Et?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[o.jsx(Ti,{size:14})," Completado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[o.jsx(nh,{size:14})," Pendiente"]})}),o.jsx("td",{className:"px-4 py-3 text-sm",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"—"}),o.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Et?Et.nota:"—"})]},xt.id)})})]})})]})},Pr=()=>{var Ze,mt,Je;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):o.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",_y((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),o.jsxs("button",{onClick:()=>{u(null),A(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(JC,{size:18})," Volver al listado"]})]}),o.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((Ze=c==null?void 0:c.tipos)==null?void 0:Ze.includes("Desarrollo"))&&o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(xt=>{var bt;const Et=Pt.find(nr=>nr.estudianteId===xt.id);return o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?o.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):o.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"-"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Et?o.jsx("span",{className:parseFloat(Et.nota)>=4?"text-green-600":"text-red-600",children:Et.nota}):"-"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?DZe(Et.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?o.jsx("button",{onClick:()=>{var xr,Wr,Zr;U(Et);const nr=Array.from({length:((Wr=(xr=c.generatedContent)==null?void 0:xr.Desarrollo)==null?void 0:Wr.length)||0},(qr,he)=>({index:he,puntaje:0,observacion:""}));J(nr),oe(((Zr=Et==null?void 0:Et.revisionDocente)==null?void 0:Zr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):o.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),D&&((mt=c==null?void 0:c.tipos)==null?void 0:mt.includes("Desarrollo"))&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[o.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(D==null?void 0:D.estudianteNombre)||""]}),o.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,Et)=>{var bt,nr;return o.jsxs("div",{className:"p-3 border rounded-lg",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`revision-pregunta-${Et}`})]}),xt.rubrica&&o.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[o.jsx("strong",{children:"Rúbrica:"})," ",o.jsx(Ia,{content:xt.rubrica,context:`revision-rubrica-${Et}`})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),o.jsx("input",{type:"number",min:0,step:.5,value:((bt=z[Et])==null?void 0:bt.puntaje)??0,onChange:xr=>{const Wr=Number(xr.target.value)||0;J(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},puntaje:Wr},qr})},className:"w-24 border-slate-300 rounded-md"}),o.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((nr=z[Et])==null?void 0:nr.observacion)||"",onChange:xr=>{const Wr=xr.target.value;J(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},observacion:Wr},qr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Et)})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),o.jsx("textarea",{rows:3,value:re,onChange:xt=>oe(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>{U(null),J([]),oe("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:async()=>{if(D)try{k(!0);const xt=Number(D.puntaje)||0,Et=Number(D.puntajeMaximo)||0,bt=(z||[]).reduce((Wr,Zr)=>Wr+(Number(Zr.puntaje)||0),0),nr=xt+bt,xr=IZe(nr,Et);await TZe(D.id,{puntaje:nr,puntajeMaximo:Et,nota:xr,revisionDocente:{completada:!0,observacionesGenerales:re||"",detalle:z||[],puntajeDocente:bt}}),U(null),J([]),oe("")}catch(xt){console.error("Error guardando revisión:",xt),B("No se pudo guardar la revisión del docente.")}finally{k(!1)}},disabled:j,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:j?"Guardando...":"Guardar Revisión"})]})]})})]})},fs=()=>{var Ze,mt;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),o.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(JC,{size:18})," Volver"]})]}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),o.jsxs("form",{onSubmit:et,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:le.asignatura,onChange:je,className:"w-full border-slate-300 rounded-md shadow-sm",children:js.map(Je=>o.jsx("option",{value:Je,children:Je},Je))})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),o.jsx("textarea",{name:"instrucciones",value:(Ze=le.recursos)==null?void 0:Ze.instrucciones,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),o.jsx("textarea",{name:"enlaces",value:(mt=le.recursos)==null?void 0:mt.enlaces,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),o.jsx("input",{type:"file",multiple:!0,onChange:Te,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:Je=>P(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?wt:Qt).map(Je=>{var xt;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(xt=le.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"contenido",value:le.contenido,onChange:je,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),o.jsx("input",{type:"date",name:"plazoEntrega",value:le.plazoEntrega,onChange:je,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),o.jsx("div",{className:"space-y-3",children:Q2e.map(Je=>o.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:le.tipos.includes(Je),onChange:()=>Le(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),le.tipos.includes(Je)&&o.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),$I[Je].map(xt=>o.jsx("button",{type:"button",onClick:()=>We(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${le.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),S&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:S}),o.jsx("div",{className:"pt-2 text-right",children:o.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?o.jsx(nh,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},mn=()=>{var Ze;return o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),o.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:F==null?void 0:F.introduccion,context:"preview-introduccion"})})]}),(F==null?void 0:F.panelDidactico)&&o.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[o.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),o.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof F.panelDidactico=="string"&&F.panelDidactico.trim().startsWith("{")){const mt=JSON.parse(F.panelDidactico);return o.jsxs("div",{className:"space-y-4",children:[mt.titulo&&o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:mt.titulo}),Array.isArray(mt.subtitulos)&&mt.subtitulos.map((Je,xt)=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Je.titulo}),o.jsx("p",{className:"whitespace-pre-line",children:Je.texto})]},xt)),Array.isArray(mt.conceptosClave)&&mt.conceptosClave.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),o.jsx("ul",{className:"list-disc pl-5 space-y-1",children:mt.conceptosClave.map((Je,xt)=>o.jsx("li",{className:"text-emerald-800",children:Je},xt))})]}),!mt.subtitulos&&!mt.conceptosClave&&o.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(mt,null,2)})]})}return o.jsx("p",{className:"whitespace-pre-wrap",children:F.panelDidactico})}catch{return o.jsx("p",{className:"whitespace-pre-wrap",children:F.panelDidactico})}})()})]}),(F==null?void 0:F.recursos)&&(F.recursos.instrucciones||F.recursos.enlaces||((Ze=F.recursos.archivos)==null?void 0:Ze.length))&&o.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),o.jsxs("div",{className:"space-y-3",children:[F.recursos.instrucciones&&o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:F.recursos.instrucciones,context:"preview-instrucciones"})}),F.recursos.enlaces&&o.jsx("div",{children:F.recursos.enlaces.split(`
`).map((mt,Je)=>mt.trim()&&o.jsx("a",{href:mt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:mt},Je))}),F.recursos.archivos&&F.recursos.archivos.length>0&&o.jsx("ul",{className:"list-disc list-inside",children:F.recursos.archivos.map(mt=>o.jsx("li",{className:"text-slate-700",children:mt.nombre},mt.nombre))})]})]}),F==null?void 0:F.tipos.map(mt=>{const Je=F.generatedContent[mt];return Je?o.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:mt}),o.jsxs("div",{className:"space-y-4 text-sm",children:[mt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-quiz-pregunta-${Et}`})]}),o.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>o.jsxs("li",{children:[o.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",o.jsx(Ia,{content:bt,context:`preview-quiz-opcion-${Et}-${nr}`})]},nr))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",o.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${Et}`})]})]},Et)),mt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&o.jsxs("div",{children:[o.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:o.jsx(Ia,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-lectura-pregunta-${Et}`})]}),o.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>o.jsxs("li",{children:[o.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",o.jsx(Ia,{content:bt,context:`preview-lectura-opcion-${Et}-${nr}`})]},nr))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",o.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${Et}`})]})]},Et))]}),mt==="Términos Pareados"&&Array.isArray(Je)&&o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border border-slate-200",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),o.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),o.jsx("tbody",{children:Je.map((xt,Et)=>o.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[o.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:o.jsx(Ia,{content:xt.concepto,context:`preview-pareado-concepto-${Et}`})}),o.jsx("td",{className:"p-2 align-top text-slate-700",children:o.jsx(Ia,{content:xt.definicion,context:`preview-pareado-definicion-${Et}`})})]},xt.id))})]})}),mt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${Et}`})]}),o.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[o.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",o.jsx(Ia,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${Et}`})]})]},Et))]})]},mt):null})]}),o.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:gt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},la=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify_between items-start",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),o.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(JC,{size:18})," Volver"]})]}),o.jsxs("form",{onSubmit:ct,className:"space-y-6 mt-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:ae.asignatura,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm",children:js.map(Ze=>o.jsx("option",{value:Ze,children:Ze},Ze))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),o.jsx("textarea",{name:"objetivosAprendizaje",value:ae.objetivosAprendizaje,onChange:_e,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),o.jsx("textarea",{name:"contenido",value:ae.contenido,onChange:_e,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),o.jsx("input",{type:"date",name:"plazoEntrega",value:ae.plazoEntrega,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:Ze=>P(Ze.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?wt:Qt).map(Ze=>{var mt;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(mt=ae.estudiantesDestino)==null?void 0:mt.includes(Ze.nombreCompleto),onChange:()=>xe(Ze.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ze.nombreCompleto,children:Ze.nombreCompleto})]},Ze.id)})})]})]})]}),S&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:S}),o.jsx("div",{className:"text-right",children:o.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?o.jsx(nh,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),ja=()=>{var Ze,mt;return o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:o.jsx(Ia,{content:M==null?void 0:M.titulo,context:"preview-prueba-titulo"})}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:M==null?void 0:M.instrucciones,context:"preview-prueba-instrucciones"})})]}),(Ze=M==null?void 0:M.textos)!=null&&Ze.length?o.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),o.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:M.textos.map((Je,xt)=>o.jsxs("li",{children:[o.jsxs("p",{className:"font-semibold",children:[o.jsx(Ia,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),o.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),o.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:o.jsx(Ia,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(mt=M==null?void 0:M.preguntas)!=null&&mt.length?o.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),M.preguntas.slice(0,10).map((Je,xt)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",o.jsx(Ia,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),o.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((Et,bt)=>o.jsx("li",{children:o.jsx(Ia,{content:Et,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),o.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>ee(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},rn=()=>o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[o.jsx(ZC,{size:18})," Crear Nueva"]})]}),o.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ze=>{var xt;const mt=[];(xt=Ze.estudiantesDestino)!=null&&xt.length&&mt.push(`Estudiantes: ${Ze.estudiantesDestino.length}`);const Je=mt.length?mt.join(" | "):"Estudiantes seleccionados";return o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Ia,{content:Ze.asignatura,context:`lista-asignatura-${Ze.id}`})," — ",Ze.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",_y(Ze.fechaCreacion)]})]}),o.jsx("button",{onClick:()=>u(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),gr=()=>o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),o.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[o.jsx(ZC,{size:18})," Crear Nueva"]})]}),o.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Ze=>o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800",children:o.jsx(Ia,{content:Ze.titulo,context:`lista-prueba-titulo-${Ze.id}`})}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",_y(Ze.fechaCreacion)]})]}),o.jsx("button",{onClick:()=>A(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)):o.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?o.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):o.jsxs("div",{className:"animate-fade-in",children:[Sr(),Z?In():M?ja():F?mn():c||d?Pr():K==="pruebas"?g?la():gr():K==="actividades"?h?fs():rn():$r()]})},LZe="actividades_remotas",_M="respuestas_actividades",$ce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},hW=e=>{const t=$ce(e);return t?t.toISOString():void 0},MZe=e=>{const t=$ce(e);return t?t.toISOString().split("T")[0]:void 0},SM=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:hW(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:MZe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:hW(t.fechaCompletado)||t.fechaCompletado}},F1=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},UZe=e=>new Promise(t=>setTimeout(t,e)),QZe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await UZe(s)}else throw a}throw new Error("Max retries exceeded")},HZe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=$t(vt(ft,LZe),pr("fechaCreacion","desc"));return fr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>SM(c)).filter(c=>{var u,d,A,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(A=e.curso)==null?void 0:A.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",l.length),t(l)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const l=F1(i,"procesamiento de actividades");r==null||r(l)}},error:s=>{const i=F1(s,"suscripción a actividades");r==null||r(i)}})},VZe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=$t(vt(ft,_M),Ir("estudianteId","==",e),pr("fechaCompletado","desc"));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(l=>{var u;const c=SM(l);return console.log(`📄 Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const l=F1(i,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const i=F1(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),zZe(e,t,r);r==null||r(i)}})},zZe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=$t(vt(ft,_M),Ir("estudianteId","==",e));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(l=>SM(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const l=F1(i,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const i=F1(s,"suscripción alternativa a respuestas");r==null||r(i)}})},$Ze=async e=>QZe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await hn(vt(ft,_M),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),GZe=.6,KZe=(e,t,r=GZe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},XO=({className:e="w-5 h-5"})=>o.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qZe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new Ds(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let l=1;l<=r;l++)try{console.log(`🤖 Intento ${l} de generar feedback con IA`);const c=XZe(e,t);let A=(await(await s.generateContent(c)).response).text().trim();A=A.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=A.match(/\{[\s\S]*\}$/);try{const m=JSON.parse(h?h[0]:A);return console.log(`✅ Feedback generado exitosamente en intento ${l}`),m}catch(m){throw console.warn(`⚠️ Error al parsear JSON en intento ${l}:`,m),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${l}:`,c.message),(i=c.message)!=null&&i.includes("503")&&l<r){const u=Math.pow(2,l)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(l===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},WZe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await $Ze(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await qZe(t,r);if(s){const{updateDoc:i,doc:l}=await Dg(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>jye);return{updateDoc:u,doc:d}},void 0),{db:c}=await Dg(async()=>{const{db:u}=await Promise.resolve().then(()=>Ote);return{db:u}},void 0);return await i(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},Co=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},qs=(e,t)=>{if(t&&Co(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>qs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Od=(e,t,...r)=>{if(Co(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=qs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=qs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},Ns=({content:e,context:t="unknown"})=>{try{const r=qs(e,`UltraSafeRenderer-${t}`);return o.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),o.jsx("span",{children:"[Error al mostrar contenido]"})}};function mW(e){if(console.log("🔍 Normalizando lectura:",e),Co(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Co(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>qs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Od(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:qs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Od(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Od(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Co(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function pW(e){return console.log("🔍 Normalizando pareados:",e),Co(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Co(t,`pareado-${r}`),{izquierda:Od(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Od(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Co(t,`pareado-array-${r}`),{izquierda:Od(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Od(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function gW(e){return console.log("🔍 Normalizando desarrollo:",e),Co(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Co(t,`desarrollo-pregunta-${r}`),{enunciado:Od(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Co(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Od(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const XZe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${qs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${qs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${qs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${qs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${qs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${qs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${qs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},YZe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=C.useState({}),[s,i]=C.useState(!1),l=(u,d)=>{const A={...n,[u]:d};a(A)},c=async()=>{i(!0);let u=0,d=0;const A={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Co(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(Co(y,`quiz-question-${w}`),{pregunta:Od(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,j)=>qs(_,`quiz-opcion-${w}-${j}`)):[],respuestaCorrecta:qs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:mW(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],j=_===y.respuestaCorrecta,k=y.puntaje??1;j&&(u+=k),d+=k,A.items.push({pregunta:y.pregunta,respuestaUsuario:qs(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:j,puntajeObtenido:j?k:0,tipo:m})}),m==="Términos Pareados"){const v=pW(g),y=x||{};v.forEach((w,_)=>{const j=y[_],k=j===w.derecha,I=w.puntaje??1;k&&(u+=I),d+=I,A.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:qs(j,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:k,puntajeObtenido:k?I:0,tipo:m})})}if(m==="Desarrollo"){const v=gW(g),y=x||{};v.forEach((w,_)=>{const j=qs(y[_],`desarrollo-feedback-${_}`).trim();A.items.push({pregunta:w.enunciado,respuestaUsuario:j||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:KZe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,A)};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:o.jsx(Ns,{content:e.asignatura,context:"actividad-asignatura"})}),o.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ns,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&o.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[o.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),o.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return o.jsxs("div",{className:"space-y-4",children:[u.titulo&&o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,A)=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),o.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},A)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),o.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,A)=>o.jsx("li",{className:"text-emerald-800",children:d},A))})]}),!u.subtitulos&&!u.conceptosClave&&o.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return o.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return o.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ns,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),o.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),o.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Co(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const A=Array.isArray(d)?d.map((h,m)=>(Co(h,`render-quiz-question-${m}`),{pregunta:Od(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>qs(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:qs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),o.jsx("div",{className:"space-y-6",children:A.map((h,m)=>o.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",o.jsx(Ns,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),o.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return o.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[o.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),o.jsx("span",{children:o.jsx(Ns,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const A=mW(d);return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),o.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:o.jsx(Ns,{content:A.texto,context:"lectura-texto"})}),o.jsx("div",{className:"space-y-6",children:A.preguntas.map((h,m)=>o.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",o.jsx(Ns,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),o.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return o.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[o.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),o.jsx("span",{children:o.jsx(Ns,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const A=pW(d),h=n[u]||{},m=[...new Set(A.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:A.map((g,x)=>o.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[o.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",o.jsx(Ns,{content:g.izquierda,context:`pareado-izq-${x}`})]}),o.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[o.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>o.jsx("option",{value:v,children:qs(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const A=gW(d),h=n[u]||{};return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),o.jsx("div",{className:"space-y-6",children:A.map((m,g)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",o.jsx(Ns,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),o.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),o.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),o.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:o.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?o.jsx(XO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},JZe=({currentUser:e})=>{var B,R,P;const[t,r]=C.useState(!0),[n,a]=C.useState("list"),[s,i]=C.useState(!1),[l,c]=C.useState([]),[u,d]=C.useState([]),[A,h]=C.useState(null),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState("connecting");C.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let F=!1,L=!1,M=!1,ee=!1;const V=()=>{(F||M)&&(L||ee)&&(M&&ee?(w("error"),v("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",F,"Respuestas:",L))},q=HZe(e,X=>{console.log("📋 Actividades recibidas:",X.length),X.forEach((Z,G)=>{console.log(`  ${G+1}. ${Z.asignatura} (ID: ${Z.id})`),Co(Z,`actividad-${G}`)}),c(X),F=!0,V()},X=>{console.error("❌ Error en suscripción de actividades:",X),M=!0,V()}),K=VZe(e.id,X=>{console.log("📝 Respuestas del estudiante recibidas:",X.length),X.forEach((Z,G)=>{var D;console.log(`  ${G+1}. Actividad ${Z.actividadId} - Fecha: ${Z.fechaCompletado}`),Z.nota&&console.log(`    Nota: ${Z.nota}`),(D=Z.revisionDocente)!=null&&D.completada&&console.log("    ✅ Con revisión docente completada"),Co(Z,`respuesta-${G}`)}),d(X),L=!0,V()},X=>{var Z;console.error("❌ Error en suscripción de respuestas:",X),(Z=X.message)!=null&&Z.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),v("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),ee=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),q==null||q(),K==null||K()}},[e]),C.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:l.length,respuestas:u.length,vista:n,conexion:y})},[l.length,u.length,n,y,t]);const _=F=>{if(console.log("🔍 Iniciando actividad:",F.asignatura),I.has(F.id)){v("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}h(F),a("activity"),v(null)},j=F=>{console.log("🔍 Viendo resultado:",F.actividadId);const L=l.find(M=>M.id===F.actividadId);L?(h(L),g(F),a("result"),v(null)):v("No se pudieron cargar los detalles de esta actividad completada.")},k=C.useCallback(async(F,L)=>{if(!A)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:A.id,estudianteId:e.id,puntaje:F.puntaje,nota:F.nota}),a("result"),i(!0),v(null);const M={actividadId:A.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...F,retroalimentacionDetallada:L};console.log("💾 Guardando respuesta...");try{const ee=await WZe(M,A,L);console.log("✅ Respuesta completada con ID:",ee.id),g(ee),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(ee){console.error("❌ Error crítico al completar actividad:",ee),v("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...M,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[A,e.id]),I=C.useMemo(()=>{if(u.length===0)return new Set;const F=new Set(u.map(L=>L.actividadId));return console.log("🎯 IDs completados calculados:",F.size),F},[u]),E=C.useMemo(()=>{if(l.length===0)return[];const F=l.filter(L=>!I.has(L.id));return console.log("⏳ Actividades pendientes:",F.length),F},[l,I]),S=C.useMemo(()=>{if(u.length===0)return[];const F=u.map(L=>{const M=l.find(ee=>ee.id===L.actividadId);return{...L,asignatura:(M==null?void 0:M.asignatura)||"Actividad no disponible",tipos:(M==null?void 0:M.tipos)||[]}}).sort((L,M)=>new Date(M.fechaCompletado).getTime()-new Date(L.fechaCompletado).getTime());return console.log("📖 Historial preparado:",F.length),F},[u,l]);return t?o.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[o.jsx(XO,{className:"w-8 h-8 text-slate-500"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),o.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&l.length===0&&u.length===0?o.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[o.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),o.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),o.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&A?o.jsx(YZe,{actividad:A,onComplete:k,currentUser:e}):n==="result"&&m?(console.log("🔍 Renderizando resultado:",m),o.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),o.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",o.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[m.puntaje," / ",m.puntajeMaximo]})]}),o.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",o.jsx("span",{className:`font-bold text-2xl ${parseFloat(m.nota)>=4?"text-green-600":"text-red-600"}`,children:m.nota})]})]}),(A==null?void 0:A.recursos)&&o.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[o.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),A.recursos.instrucciones&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ns,{content:A.recursos.instrucciones,context:"resultado-instrucciones"})})]}),A.recursos.enlaces&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:A.recursos.enlaces.split(`
`).filter(Boolean).map((F,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),o.jsx("a",{href:F.startsWith("http")?F:`https://${F}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:F})]},L))})]}),A.recursos.archivos&&A.recursos.archivos.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:A.recursos.archivos.map((F,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),o.jsx("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:F.nombre||`Archivo ${L+1}`})]},L))})]})]}),x&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&o.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[o.jsx(XO,{className:"w-8 h-8 text-blue-500"}),o.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),o.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),m.retroalimentacionAI&&!s&&o.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[o.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),o.jsx("p",{className:"text-slate-700 mt-1",children:o.jsx(Ns,{content:m.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((B=m.retroalimentacionAI.desafios)==null?void 0:B.length)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),o.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.desafios.map((F,L)=>o.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[o.jsx("p",{className:"font-semibold text-slate-800",children:o.jsx(Ns,{content:F.pregunta,context:`feedback-desafio-pregunta-${L}`})}),o.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:o.jsx(Ns,{content:F.explicacionDelError,context:`feedback-desafio-explicacion-${L}`})})]},L))})]}),((P=(R=m.retroalimentacionAI)==null?void 0:R.comentariosDesarrollo)==null?void 0:P.length)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),o.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.comentariosDesarrollo.map((F,L)=>o.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[o.jsx("p",{className:"font-semibold text-slate-800",children:o.jsx(Ns,{content:F.pregunta,context:`feedback-desarrollo-pregunta-${L}`})}),o.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:o.jsx(Ns,{content:F.retroalimentacionBreve,context:`feedback-desarrollo-retro-${L}`})})]},L))})]})]}),m.retroalimentacionDetallada&&o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),m.retroalimentacionDetallada.items.map((F,L)=>{const M=F.esCorrecta===null,ee=M?"border-slate-400 bg-slate-50":F.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=M?"🕓":F.esCorrecta?"✅":"❌";return o.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${ee}`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[L+1,". ",o.jsx(Ns,{content:F.pregunta,context:`feedback-item-pregunta-${L}`})]}),o.jsx("span",{className:"font-bold text-lg",children:V})]}),o.jsxs("div",{className:"mt-2 text-sm pl-4",children:[o.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",o.jsx("span",{className:"font-medium",children:o.jsx(Ns,{content:F.respuestaUsuario,context:`feedback-item-respuesta-${L}`})})]}),!M&&!F.esCorrecta&&o.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",o.jsx("span",{className:"font-medium text-green-700",children:o.jsx(Ns,{content:F.respuestaCorrecta,context:`feedback-item-correcta-${L}`})})]}),M&&o.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},L)})]}),o.jsx("div",{className:"flex gap-4",children:o.jsx("button",{onClick:()=>{a("list"),h(null),g(null),v(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&o.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:o.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),o.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),o.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:o.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),o.jsx("div",{className:"space-y-4",children:E.length>0?E.map(F=>o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Ns,{content:F.asignatura,context:`actividad-asignatura-${F.id}`})," - ",F.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",o.jsx(Ns,{content:typeof F.plazoEntrega=="string"?F.plazoEntrega:"",context:`actividad-plazo-${F.id}`})]})]}),o.jsx("button",{onClick:()=>_(F),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},F.id)):o.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),o.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),o.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),o.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),o.jsx("div",{className:"space-y-4",children:S.length>0?S.map(F=>o.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Ns,{content:F.asignatura,context:`completada-asignatura-${F.id}`})," - ",F.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(F.fechaCompletado).toLocaleDateString("es-CL")]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",o.jsx("span",{className:`font-bold text-lg ${parseFloat(F.nota)>=4?"text-green-600":"text-red-600"}`,children:F.nota})]}),o.jsx("button",{onClick:()=>j(F),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},F.id)):o.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),o.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},aj="estudiantes_inclusion",ZZe="usuarios",Gce=e=>{const t=e.data();return{id:e.id,...t}},eet=e=>{const t=$t(vt(ft,aj));return fr(t,n=>{const a=n.docs.map(s=>Gce(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},tet=e=>{const t=$t(vt(ft,ZZe));return fr(t,n=>{const a=n.docs.map(s=>Gce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},ret=async e=>{try{return(await hn(vt(ft,aj),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},net=async(e,t)=>{try{const{id:r,...n}=t,a=sr(ft,aj,e);await yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},aet=async e=>{try{const t=sr(ft,aj,e);await Ra(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},set=({estudiantes:e})=>{const t=C.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=C.useMemo(()=>{const l=e.reduce((c,u)=>{var A;const d=((A=u.curso.match(/\d+/))==null?void 0:A[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=C.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=C.useMemo(()=>{const l=e.reduce((u,d)=>{var A;return u+(((A=d.intervenciones)==null?void 0:A.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=C.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),o.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),o.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),o.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),o.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),o.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),o.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),o.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},xW=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=C.useState(""),[a,s]=C.useState(""),[i,l]=C.useState(!1),c=C.useMemo(()=>e.filter(A=>{const h=A.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||A.curso===a;return h&&m}).sort((A,h)=>A.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=C.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=A=>{t(A),n(""),s(""),l(!1)};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),o.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:A=>{n(A.target.value),l(A.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),o.jsxs("select",{value:a,onChange:A=>{s(A.target.value),l(r.length>0||A.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos los cursos"}),u.map(A=>o.jsx("option",{value:A,children:A},A))]})]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),o.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),o.jsx("button",{onClick:()=>l(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&o.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?o.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):o.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(A=>o.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(A),children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:A.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:A.curso})]}),o.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},A.id))})}),r&&c.length===1&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),o.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},iet=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=C.useState(T_[0]),s=()=>r(e,n);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),o.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:T_.map(i=>o.jsx("option",{value:i,children:i},i))})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},oet=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=C.useState("intervenciones"),[l,c]=C.useState(e);C.useEffect(()=>c(e),[e]);const[u,d]=C.useState(null),A={responsable:"",accion:"",observaciones:""},[h,m]=C.useState(A),[g,x]=C.useState({trimestre:"T1",meta:""}),[v,y]=C.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=C.useState(null),[j,k]=C.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[E,S]=C.useState(I),B=()=>{r(l),t()},R=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ae,Ne=!1;u?ae=(l.intervenciones||[]).map(me=>me.id===u.id?{...me,...h}:me):(Ne=!0,ae=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const je=ae.sort((me,Te)=>new Date(Te.fecha).getTime()-new Date(me.fecha).getTime());if(c(me=>({...me,intervenciones:je})),Ne)try{await jNe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(me){console.error("Error al crear notificación:",me),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(A),d(null)},P=ae=>{d(ae),m({responsable:ae.responsable,accion:ae.accion,observaciones:ae.observaciones})},F=ae=>{window.confirm("¿Eliminar esta intervención?")&&c(Ne=>({...Ne,intervenciones:(Ne.intervenciones||[]).filter(je=>je.id!==ae)}))},L=ae=>{const{name:Ne,value:je}=ae.target;c(_e=>({..._e,[Ne]:je,fechaActualizacionApoyos:new Date().toISOString()}))},M=()=>{if(!g.meta.trim())return;const ae={...g,id:crypto.randomUUID(),cumplida:!1};c(Ne=>({...Ne,metasProgreso:[...Ne.metasProgreso||[],ae]})),x({trimestre:"T1",meta:""})},ee=ae=>{c(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).map(je=>je.id===ae?{...je,cumplida:!je.cumplida}:je)}))},V=ae=>{c(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).filter(je=>je.id!==ae)}))},q=C.useMemo(()=>{const ae=l.metasProgreso||[];if(ae.length===0)return{percent:0,color:"bg-slate-300"};const Ne=ae.filter(me=>me.cumplida).length,je=Math.round(Ne/ae.length*100),_e=je<40?"bg-red-500":je<75?"bg-yellow-500":"bg-green-500";return{percent:je,color:_e}},[l.metasProgreso]),K=C.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const ae=new Date(l.fechaActualizacionApoyos),Ne=new Date;return Ne.setMonth(Ne.getMonth()-3),ae<Ne},[l.fechaActualizacionApoyos]),X=()=>{if(!v.titulo.trim()||!v.fecha)return;const ae={...v,id:crypto.randomUUID(),resuelta:!1};c(Ne=>({...Ne,alertas:[...Ne.alertas||[],ae].sort((je,_e)=>new Date(je.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},Z=ae=>{c(Ne=>({...Ne,alertas:(Ne.alertas||[]).map(je=>je.id===ae?{...je,resuelta:!je.resuelta}:je)}))},G=ae=>{c(Ne=>({...Ne,alertas:(Ne.alertas||[]).filter(je=>je.id!==ae)}))},D=ae=>{ae.target.files&&ae.target.files[0]&&_(ae.target.files[0])},U=()=>{if(!w)return;k(!0);const ae=new FileReader;ae.readAsDataURL(w),ae.onloadend=()=>{const Ne={id:crypto.randomUUID(),nombre:w.name,url:ae.result,fechaSubida:new Date().toISOString()};c(je=>({...je,archivos:[Ne,...je.archivos||[]]})),_(null),k(!1)},ae.onerror=()=>{alert("Error al leer el archivo."),k(!1)}},z=ae=>{window.confirm("¿Eliminar este archivo?")&&c(Ne=>({...Ne,archivos:(Ne.archivos||[]).filter(je=>je.id!==ae)}))},J=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ae={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Ne=>({...Ne,reuniones:[ae,...Ne.reuniones||[]].sort((je,_e)=>new Date(_e.fecha).getTime()-new Date(je.fecha).getTime())})),S(I)},re=ae=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Ne=>({...Ne,reuniones:(Ne.reuniones||[]).filter(je=>je.id!==ae)}))},oe=()=>{var xe,Oe,Re;const ae=new vr("p","mm","a4"),Ne=20,je=ae.internal.pageSize.getWidth(),_e=ae.internal.pageSize.getHeight();let me=Ne;const Te=$e=>{$e.setFontSize(10),$e.setTextColor(100),$e.text("Ficha de Seguimiento - Módulo Inclusión",Ne,15)};Te(ae),ae.setFontSize(18),ae.setFont("helvetica","bold"),ae.setTextColor(40),ae.text(l.nombre,Ne,me+10),me+=15,ae.setFontSize(11),ae.setFont("helvetica","normal"),ae.setTextColor(80),ae.text(`Curso: ${l.curso}`,Ne,me),ae.text(`Dificultad: ${l.dificultad}`,Ne,me+6),me+=15;const Le=$e=>{me+$e>_e-Ne&&(ae.addPage(),Te(ae),me=Ne)},We=$e=>{Le(15),ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text($e,Ne,me),me+=10};if((xe=l.intervenciones)!=null&&xe.length&&(We("Historial de Intervenciones"),gi(ae,{startY:me,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map($e=>[new Date($e.fecha).toLocaleDateString("es-CL"),$e.responsable,$e.accion,$e.observaciones||""]),theme:"grid",didDrawPage:()=>Te(ae)}),me=ae.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Le(30),We("Seguimiento y Apoyos"),ae.setFontSize(11),ae.setFont("helvetica","normal");const $e=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,et=ae.splitTextToSize($e,je-Ne*2);ae.text(et,Ne,me),me+=et.length*5+10}(Oe=l.metasProgreso)!=null&&Oe.length&&(Le(30),We("Metas de Progreso"),gi(ae,{startY:me,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map($e=>[$e.trimestre,$e.meta,$e.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Te(ae)}),me=ae.lastAutoTable.finalY+10),(Re=l.reuniones)!=null&&Re.length&&(We("Reuniones con Apoderados"),gi(ae,{startY:me,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map($e=>[new Date($e.fecha).toLocaleDateString("es-CL"),$e.motivo,$e.acuerdos||"",$e.asistentes]),theme:"grid",didDrawPage:()=>Te(ae)})),ae.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},se=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),o.jsxs("select",{value:h.responsable,onChange:ae=>m(Ne=>({...Ne,responsable:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ae=>o.jsx("option",{value:ae,children:ae},ae))]}),h.responsable&&!u&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),o.jsx("textarea",{value:h.accion,onChange:ae=>m(Ne=>({...Ne,accion:ae.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("textarea",{value:h.observaciones,onChange:ae=>m(Ne=>({...Ne,observaciones:ae.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[u&&o.jsx("button",{onClick:()=>{d(null),m(A)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),o.jsx("button",{onClick:R,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(ae=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.accion}),ae.observaciones&&o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ae.observaciones}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ae.fecha).toLocaleString("es-CL")," - ",ae.responsable]}),o.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),o.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[o.jsx("button",{onClick:()=>P(ae),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),o.jsx("button",{onClick:()=>F(ae.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ae.id)),(!l.intervenciones||l.intervenciones.length===0)&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:"📋"}),o.jsx("p",{children:"No hay intervenciones registradas"}),o.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),le=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),K&&o.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),o.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),o.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",q.percent,"%"]}),o.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:o.jsx("div",{className:`${q.color} h-4 rounded-full transition-all duration-500`,style:{width:`${q.percent}%`}})})]}),o.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[o.jsxs("select",{value:g.trimestre,onChange:ae=>x(Ne=>({...Ne,trimestre:ae.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"T1",children:"T1"}),o.jsx("option",{value:"T2",children:"T2"}),o.jsx("option",{value:"T3",children:"T3"})]}),o.jsx("input",{value:g.meta,onChange:ae=>x(Ne=>({...Ne,meta:ae.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:M,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),o.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(ae=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[o.jsx("input",{type:"checkbox",checked:ae.cumplida,onChange:()=>ee(ae.id),className:"h-5 w-5 rounded text-amber-500"}),o.jsxs("span",{className:`flex-grow text-sm ${ae.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[o.jsxs("strong",{children:[ae.trimestre,":"]})," ",ae.meta]}),o.jsx("button",{onClick:()=>V(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ae.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),o.jsx("p",{children:"No hay metas definidas"}),o.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ue=()=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),o.jsx("input",{type:"text",value:v.titulo,onChange:ae=>y(Ne=>({...Ne,titulo:ae.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),o.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ae=>y(Ne=>({...Ne,fecha:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),o.jsx("button",{onClick:X,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(ae=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[o.jsx("input",{type:"checkbox",checked:ae.resuelta,onChange:()=>Z(ae.id),className:"h-5 w-5 rounded text-amber-500"}),o.jsxs("span",{className:`flex-grow text-sm ${ae.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ae.titulo," (",new Date(ae.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),o.jsx("button",{onClick:()=>G(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ae.id)),(!l.alertas||l.alertas.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),o.jsx("p",{children:"No hay alertas programadas"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),o.jsx("input",{type:"file",onChange:D,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),o.jsx("button",{onClick:U,disabled:!w||j,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:j?"Subiendo...":"Subir"}),w&&o.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(ae=>o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[o.jsxs("a",{href:ae.url,download:ae.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ae.nombre,children:["📎 ",ae.nombre]}),o.jsx("button",{onClick:()=>z(ae.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ae.id)),(!l.archivos||l.archivos.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"📁"}),o.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),ke=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),o.jsx("input",{value:E.motivo,onChange:ae=>S(Ne=>({...Ne,motivo:ae.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("textarea",{value:E.acuerdos,onChange:ae=>S(Ne=>({...Ne,acuerdos:ae.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("input",{value:E.asistentes,onChange:ae=>S(Ne=>({...Ne,asistentes:ae.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("div",{className:"text-right",children:o.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(ae=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.motivo}),ae.acuerdos&&o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[o.jsx("strong",{children:"Acuerdos:"})," ",ae.acuerdos]}),o.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ae.fecha).toLocaleString("es-CL")," - Asistentes: ",ae.asistentes]})]}),o.jsx("button",{onClick:()=>re(ae.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ae.id)),(!l.reuniones||l.reuniones.length===0)&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:"👥"}),o.jsx("p",{children:"No hay reuniones registradas"}),o.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ae=>ae.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:oe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),o.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),o.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:o.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ae=>o.jsx("button",{onClick:()=>i(ae),className:`${s===ae?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ae==="alertas"?"Alertas y Archivos":ae==="seguimiento"?"Seguimiento y Metas":ae},ae))})}),o.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&se(),s==="seguimiento"&&le(),s==="reuniones"&&ke(),s==="alertas"&&ue()]}),o.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[o.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),o.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},vW=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState([]),[s,i]=C.useState(!0),[l,c]=C.useState(null),[u,d]=C.useState(null),[A,h]=C.useState(""),[m,g]=C.useState(""),[x,v]=C.useState(""),[y,w]=C.useState("dashboard");C.useEffect(()=>{i(!0);const R=eet(F=>{r(F),i(!1)}),P=tet(F=>a(F));return()=>{R(),P()}},[]);const _=async(R,P)=>{if(t.some(L=>L.nombre===R.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const F={nombre:R.nombreCompleto,curso:R.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await ret(F),alert(`✅ ${R.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},j=async R=>{try{await net(R.id,R)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},k=async R=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await aet(R),(l==null?void 0:l.id)===R&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},I=R=>{const P=S;if(P.length===0){alert("No hay datos para exportar.");return}const F=P.map(L=>{var M;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N° Intervenciones":((M=L.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(ee=>!ee.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(ee=>ee.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"Última Actualización":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(R==="xlsx"){const L=Ii.json_to_sheet(F),M=Ii.book_new();Ii.book_append_sheet(M,L,"Estudiantes_Inclusion"),mE(M,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const L=new vr;L.text("Listado de Estudiantes - Programa de Inclusión",14,15),gi(L,{startY:20,head:[Object.keys(F[0])],body:F.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=C.useMemo(()=>n.filter(R=>{var P;return R.profile===Yt.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(R.curso||""))||e.profile===Yt.SUBDIRECCION)}).filter(R=>!t.some(P=>P.nombre===R.nombreCompleto)),[n,t,e]),S=C.useMemo(()=>t.filter(R=>R.nombre.toLowerCase().includes(A.toLowerCase())&&(m===""||R.curso===m)&&(x===""||R.dificultad===x)).sort((R,P)=>R.nombre.localeCompare(P.nombre)),[t,A,m,x]),B=C.useMemo(()=>n.filter(R=>R.profile===Yt.PROFESORADO).map(R=>R.nombreCompleto).sort(),[n]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),o.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?o.jsxs("div",{className:"text-center py-10",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),o.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):o.jsxs(o.Fragment,{children:[y==="dashboard"&&o.jsxs("div",{className:"space-y-8",children:[o.jsx(set,{estudiantes:t}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),o.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),o.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(R=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[R.curso," - ",R.dificultad]})]}),o.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},R.id)),t.length===0&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),o.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),o.jsx(xW,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),y==="lista"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",S.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),o.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),o.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:A,onChange:R=>h(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),o.jsxs("select",{value:m,onChange:R=>g(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),_s.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),o.jsxs("select",{value:x,onChange:R=>v(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todas las Dificultades"}),T_.map(R=>o.jsx("option",{value:R,children:R},R))]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-blue-600",children:S.length}),o.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-green-600",children:t.length}),o.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((R,P)=>R+(P.alertas||[]).filter(F=>!F.resuelta).length,0)}),o.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(R=>R.curso)).size}),o.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),o.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[S.map(R=>{var P;return o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),(R.alertas||[]).filter(F=>!F.resuelta).length>0&&o.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(R.alertas||[]).filter(F=>!F.resuelta).length," alertas"]})]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[R.curso," - ",R.dificultad]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[o.jsxs("span",{children:[((P=R.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),o.jsxs("span",{children:[(R.metasProgreso||[]).filter(F=>F.cumplida).length," metas cumplidas"]}),R.fechaActualizacionApoyos&&o.jsxs("span",{children:["Últ. actualización: ",new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),o.jsx("button",{onClick:()=>k(R.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},R.id)}),S.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),o.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:A||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(A||m||x)&&o.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),o.jsx(xW,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),u&&o.jsx(iet,{student:u,onClose:()=>d(null),onConfirm:(R,P)=>{_(R,P),d(null)}}),l&&o.jsx(oet,{student:l,onClose:()=>c(null),onSave:j,profesores:B})]})},Kce="asistencia_dual",cet=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},uet=(e,t)=>{const r=$t(vt(ft,Kce),Ir("emailEstudiante","==",e),pr("fechaHora","desc"));return fr(r,a=>{const s=a.docs.map(i=>cet(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},det=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await hn(vt(ft,Kce),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},Aet=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),fet=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),het=({currentUser:e})=>{const[t,r]=C.useState(e.curso||""),[n,a]=C.useState([]),[s,i]=C.useState(!1),[l,c]=C.useState(!0),[u,d]=C.useState(null);C.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=uet(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const A=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await det(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),o.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),o.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"-- Mi curso --"}),Zp.map(h=>o.jsx("option",{value:h,children:h},h))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[o.jsx("button",{onClick:()=>A("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),o.jsx("button",{onClick:()=>A("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&o.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&o.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),o.jsx("div",{className:"overflow-x-auto max-h-96",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:o.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?o.jsx(Aet,{}):o.jsx(fet,{}),h.tipo]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},met=async()=>{try{console.log("🔍 Debugging users collection...");const e=vt(wr,"users"),t=$t(e,Rd(10)),r=await Dn(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};n.sampleDocs.push(c),Object.keys(l).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},pet=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const A of i)try{const h=vt(wr,A);try{const m=$t(h,Ir("fechaHora",">=",a),Ir("fechaHora","<=",s)),g=await Dn(m);l[A]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=$t(h,Ir(v,">=",a),Ir(v,"<=",s)),w=await Dn(y);l[A]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=$t(h,pr("__name__"),Rd(5)),y=await Dn(v);l[A]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[A]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},get=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=ir.fromDate(a),l=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=vt(wr,h),g=$t(m,Ir("fechaHora",">=",i),Ir("fechaHora","<=",l),pr("fechaHora","desc")),x=fr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,_)=>{var j;if(_<5){const k=w.data();let I;(j=k.fechaHora)!=null&&j.toDate?I=k.fechaHora.toDate():typeof k.fechaHora=="string"?I=new Date(k.fechaHora):I=new Date,console.log(`   ${_+1}. ${k.emailEstudiante} - ${I.toLocaleString()} - ${k.tipo}`),console.log(`      📅 Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),v.forEach(w=>{var E;const _=w.data();let j;(E=_.fechaHora)!=null&&E.toDate?j=_.fechaHora.toDate():typeof _.fechaHora=="string"?j=new Date(_.fechaHora):_.fechaHora instanceof Date?j=_.fechaHora:_.fechaHora?j=new Date(_.fechaHora):j=new Date;const k={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:j,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},I=`${h}_${w.id}`;u.set(I,k)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=$t(m,Rd(200)),w=fr(y,j=>{if(console.log(`📋 ${h} (sin filtro): ${j.size} documentos`),j.size>0){const I=j.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(I)),console.log("📄 Primer documento:",I)}const k=j.docs.filter(I=>{var B;const E=I.data();if(!E.fechaHora)return!1;let S;return(B=E.fechaHora)!=null&&B.toDate?S=E.fechaHora.toDate():typeof E.fechaHora=="string"?S=new Date(E.fechaHora):E.fechaHora instanceof Date?S=E.fechaHora:S=new Date(E.fechaHora),S>=a&&S<=s});console.log(`📅 ${h}: ${k.length} registros después de filtro manual`),k.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),k.forEach(E=>{var F;const S=E.data();let B;(F=S.fechaHora)!=null&&F.toDate?B=S.fechaHora.toDate():typeof S.fechaHora=="string"?B=new Date(S.fechaHora):S.fechaHora instanceof Date?B=S.fechaHora:B=new Date(S.fechaHora);const R={id:E.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:B,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},P=`${h}_${E.id}`;u.set(P,R)}),d())}),_=c.findIndex(j=>j===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},xet=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,A)=>(d[A.profile]=(d[A.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let i=!1;return r.forEach(l=>{try{const c=vt(wr,l),u=$t(c),d=fr(u,A=>{A.size>0?(console.log(`✅ Encontrados ${A.size} usuarios en colección: ${l}`),i=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),A.forEach(m=>{var g,x,v,y;try{const w=m.data(),_=w.email||w.userEmail||w.mail||w.correo||"",j=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",k=w.curso||w.course||w.class||w.grade||"";let I=w.profile||w.role||w.tipo||w.userType||Yt.ESTUDIANTE;if(typeof I=="string"){const B=I.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?I=Yt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?I=Yt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?I=Yt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(I=Yt.COORDINADOR_TP)}const E={id:m.id,email:_,nombreCompleto:j,curso:k,profile:I,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},S=`${l}_${m.id}`;a.set(S,E)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(`⚪ Colección ${l}: vacía`)},A=>{console.warn(`⚠️ Error en colección ${l}:`,A)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},vet=(e,t)=>{try{console.log("Setting up users subscription...");const r=vt(wr,"users"),n=$t(r);return fr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var A,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Yt.ESTUDIANTE;if(typeof _=="string"){const k=_.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?_=Yt.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?_=Yt.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?_=Yt.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(_=Yt.COORDINADOR_TP)}const j={id:d.id,email:v,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(A=x.fechaCreacion)==null?void 0:A.toDate)==null?void 0:h.call(A))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};i.push(j)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,A)=>d.nombreCompleto.localeCompare(A.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const l=i.reduce((d,A)=>(d[A.profile]=(d[A.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=i.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},TN=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},bet=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),yet=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),wet=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[i,l]=C.useState(null),[c,u]=C.useState(new Date),[d,A]=C.useState("todos"),[h,m]=C.useState("");C.useEffect(()=>{s(!0),l(null);const I=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",I,"Mes:",E);let S=!1,B=!1;const R=()=>{S&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const F=vt(wr,"asistencia_dual"),L=$t(F,Rd(5)),M=await Dn(L);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((ee,V)=>{const q=ee.data();console.log(`   ${V+1}. ${ee.id.slice(0,8)} - ${q.emailEstudiante} - ${q.tipo}`),console.log("      Fecha original:",q.fechaHora),console.log("      Todos los campos:",Object.keys(q))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const ee=["asistenciaEmpresa","asistencia_empresa"];for(const V of ee)try{const q=vt(wr,V),K=$t(q,Rd(3)),X=await Dn(K);if(console.log(`📋 ${V}: ${X.size} documentos`),X.size>0){const Z=X.docs[0].data();console.log("   Estructura:",Object.keys(Z)),console.log("   Email:",Z.emailEstudiante||Z.email),console.log("   Fecha:",Z.fechaHora||Z.fecha)}}catch(q){console.log(`❌ ${V}: ${q instanceof Error?q.message:"Error"}`)}}}catch(F){console.error("❌ Error en prueba directa:",F),F.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):F.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),pet(I,E).then(F=>{console.log("🔍 Debug info for collections:",F),Object.entries(F).forEach(([L,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${L.toUpperCase()}:`),console.log(`   📊 Total documentos: ${M.totalDocs}`),console.log(`   📅 Documentos del período: ${M.count}`),console.log(`   🔑 Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("   📄 Documento ejemplo:",M.sampleDoc);const ee=M.sampleDoc,V=ee.emailEstudiante||ee.email||ee.userEmail||ee.correo||"NO ENCONTRADO",q=ee.tipo||ee.type||ee.action||ee.tipoRegistro||"NO ENCONTRADO",K=ee.fechaHora||ee.fecha||ee.timestamp||ee.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${q}`),console.log(`   📅 Fecha: ${K}`),console.log("   🗂️ Todos los campos:",Object.keys(ee))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((ee,V)=>{V<3&&console.log(`      ${V+1}. ID: ${ee.id}`,ee.data)}))}else M.exists?console.log(`⚪ Colección ${L}: vacía`):console.log(`❌ Colección ${L}: no existe`)})}).catch(F=>{console.error("Debug error:",F)}),met().then(F=>{console.log("🔍 Debug info for users:",F),(!F.exists||F.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var ee;try{const V=vt(wr,M),q=$t(V,Rd(5)),K=await Dn(q);K.size>0?(console.log(`✅ Encontrada colección alternativa: ${M} con ${K.size} documentos`),console.log("Documento muestra:",(ee=K.docs[0])==null?void 0:ee.data())):console.log(`❌ Colección ${M}: vacía`)}catch{console.log(`❌ Colección ${M}: no existe`)}}))}).catch(F=>{console.error("Users debug error:",F)});try{console.log("Configurando suscripción a asistencia...");const F=get(I,E,M=>{if(console.log("✅ Received registros:",M.length),M.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const ee=[...new Set(M.map(G=>G.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",ee);const V=[...new Set(M.map(G=>G.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const q=M.reduce((G,D)=>{const U=new Date(D.fechaHora).getDate();return G[U]||(G[U]=[]),G[U].push(D),G},{});console.log("📅 Registros por día del mes:",Object.keys(q).map(G=>({dia:parseInt(G),cantidad:q[parseInt(G)].length})));const K=r.map(G=>G.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",K);const X=ee.filter(G=>K.includes(G)),Z=ee.filter(G=>!K.includes(G));console.log("✅ Emails que coinciden:",X),console.log("❌ Emails que NO coinciden:",Z)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(M),S=!0,R()},M=>{console.error("❌ Error fetching asistencia:",M),l("Error al cargar datos de asistencia: "+M.message),S=!0,R()});console.log("Configurando suscripción a usuarios...");const L=xet(M=>{if(console.log("✅ Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const ee=M.filter(V=>V.profile===Yt.ESTUDIANTE&&V.curso);console.log("Dual students found:",ee.length),ee.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(M),B=!0,R()},M=>{console.error("❌ Error fetching users (multi-collection):",M),console.log("🔄 Intentando con función original de usuarios...");const ee=vet(V=>{console.log("✅ Received users (fallback):",V.length),n(V),B=!0,R()},V=>{console.error("❌ Error en fallback también:",V),l("Error al cargar estudiantes: "+M.message),B=!0,R()})});return()=>{console.log("Limpiando suscripciones..."),F&&F(),L&&L()}}catch(F){console.error("❌ Error setting up subscriptions:",F),l("Error al inicializar conexiones: "+(F instanceof Error?F.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=C.useMemo(()=>{const I=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(I,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:I}},[c]),y=C.useMemo(()=>{let I=r.filter(E=>E.profile===Yt.ESTUDIANTE&&E.curso&&Zp.includes(TN(E.curso)));if(d!=="todos"&&(I=I.filter(E=>TN(E.curso||"")===d)),h&&(I=I.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(R=>R.emailEstudiante).filter(Boolean))],S=I.map(R=>R.email),B=E.filter(R=>!S.includes(R));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const P=B.map(F=>{const L=e.find(M=>M.emailEstudiante===F);return{id:F,email:F,nombreCompleto:(L==null?void 0:L.nombreEstudiante)||F.split("@")[0],curso:(L==null?void 0:L.curso)||"3ºC",profile:Yt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(F=>{const L=d==="todos"||TN(F.curso)===d,M=!h||F.nombreCompleto.toLowerCase().includes(h.toLowerCase());return L&&M&&Zp.includes(TN(F.curso))});I=[...I,...P]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${I.length}`),I.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),I.sort((E,S)=>E.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,h,e]),w=C.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const I=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),I):(e.forEach((E,S)=>{const B=E.emailEstudiante;if(!B)return;let R;if(E.fechaHora instanceof Date)R=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)R=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")R=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const P=R.getDate(),F=R.getMonth(),L=R.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:R.toLocaleString(),año:L,mes:F,día:P}),I.has(B)||I.set(B,new Map);const M=I.get(B);M.has(P)||M.set(P,{});const ee=M.get(P);E.tipo==="Entrada"?(!ee.entrada||R<new Date(ee.entrada.fechaHora))&&(ee.entrada=E):E.tipo==="Salida"&&(!ee.salida||R>new Date(ee.salida.fechaHora))&&(ee.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:I.size,estudiantes:Array.from(I.keys()),registrosPorEstudiante:Array.from(I.entries()).map(([E,S])=>({email:E,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((B,R)=>B+(R.entrada?1:0)+(R.salida?1:0),0)}))}),I)},[e]),_=I=>{u(E=>{const S=new Date(E);return S.setMonth(S.getMonth()+I),S})},j=I=>{I!=null&&I.latitud&&(I!=null&&I.longitud)&&window.open(`https://www.google.com/maps?q=${I.latitud},${I.longitud}`,"_blank")},k=["D","L","M","M","J","V","S"];return i?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:o.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[o.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),o.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),o.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),o.jsxs("select",{value:d,onChange:I=>A(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"todos",children:"Todos los Cursos"}),Zp.map(I=>o.jsx("option",{value:I,children:I},I))]}),o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:I=>m(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?o.jsxs("div",{className:"text-center text-amber-600 py-10",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),o.jsx("div",{children:"Cargando datos de asistencia..."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(I,E)=>{const B=new Date(v,c.getMonth(),E+1).getDay(),R=B===0||B===6;return o.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[o.jsx("div",{className:"font-semibold",children:k[B]}),o.jsx("div",{children:E+1})]},E)})]})}),o.jsx("tbody",{children:y.length>0?y.map(I=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[o.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:I.nombreCompleto}),Array.from({length:g},(E,S)=>{var L;const B=S+1,R=(L=w.get(I.email))==null?void 0:L.get(B),P=new Date(v,c.getMonth(),S+1),F=P.getDay()===0||P.getDay()===6;return I.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:I.email,day:B,hasDataForStudent:w.has(I.email),studentDayRecords:R,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(I.email)?Array.from(w.get(I.email).keys()):[]}),o.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${F?"bg-slate-100 dark:bg-slate-700/50":""}`,children:o.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&o.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.entrada)==null?void 0:M.ubicacion)},children:[o.jsx(bet,{}),o.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&o.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.salida)==null?void 0:M.ubicacion)},children:[o.jsx(yet,{}),o.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},I.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},sj="evaluaciones_formativas",ij="calificaciones_formativas",kM="trabajos_grupales_formativos",Eet="usuarios",jM=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Cet=(e,t,r)=>{const n=$t(vt(ft,sj),Ir("curso","==",e),Ir("asignatura","==",t),pr("fecha","asc"));return fr(n,a=>{r(a.docs.map(s=>jM(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},Net=async(e,t)=>{const r=$g(ft),n=sr(vt(ft,sj));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=sr(ft,ij,n.id);return r.set(a,t),await r.commit(),n.id},_et=async(e,t)=>{const r=sr(ft,sj,e);await yi(r,t,{merge:!0})},ket=async e=>{const t=$g(ft);t.delete(sr(ft,sj,e)),t.delete(sr(ft,ij,e)),await t.commit()},jet=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=sr(ft,ij,n);return fr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},Bet=async(e,t)=>{const r=sr(ft,ij,e);await yi(r,t,{merge:!0})},Tet=(e,t,r)=>{const n=$t(vt(ft,kM),Ir("curso","==",e),Ir("asignatura","==",t),pr("fechaPresentacion","desc"));return fr(n,a=>{r(a.docs.map(s=>jM(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},Iet=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await hn(vt(ft,kM),t)},Fet=async(e,t)=>{const r=sr(ft,kM,e);await yi(r,t,{merge:!0})},Oet=e=>{const t=$t(vt(ft,Eet));return fr(t,r=>{e(r.docs.map(n=>jM(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},qce=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},_v={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Wce=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Det=({cursos:e,onSelect:t})=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Wce(r);return o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[o.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),o.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[o.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),o.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),o.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):o.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[o.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Pet=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Wce(e);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),o.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>o.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[o.jsx("span",{className:"text-2xl",children:_v[s]||_v.Default}),o.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):o.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[o.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Ret=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=C.useState([]),[i,l]=C.useState({}),[c,u]=C.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,A]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState(!0),v=C.useMemo(()=>r.filter(S=>S.profile===Yt.ESTUDIANTE&&qce(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,B)=>S.localeCompare(B)),[r,e]);C.useEffect(()=>{x(!0);const S=Cet(e,t,B=>{s(B);const R=B.map(F=>F.id),P=jet(R,F=>{l(L=>({...L,...F}))});return x(!1),()=>P()});return()=>S()},[e,t]);const y=S=>{const{name:B,value:R}=S.target;d?A(P=>P?{...P,[B]:R}:null):u(P=>({...P,[B]:R}))},w=async S=>{if(S.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},R=v.reduce((P,F)=>(P[F]="trabajado",P),{});try{await Net(B,R),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluación.")}},_=(S,B)=>{var L;const R=((L=i[S])==null?void 0:L[B])||"trabajado";let P;R==="trabajado"?P="no trabajado":R==="no trabajado"?P="ausente":P="trabajado";const F={...i,[S]:{...i[S]||{},[B]:P}};l(F),Bet(S,{[B]:P}).catch(M=>{console.error("Error updating grade:",M)})},j=S=>A(S),k=async()=>{if(d)try{await _et(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),A(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},I=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await ket(S)}catch(B){console.error(B),m("No se pudo eliminar la evaluación.")}},E=C.useCallback(S=>{if(a.length===0)return"-";let B=0,R=0;return a.forEach(P=>{var L;const F=(L=i[P.id])==null?void 0:L[S];F==="trabajado"?(B+=7,R++):F==="no trabajado"&&(B+=2,R++)}),R===0?"-":(B/R).toFixed(1)},[i,a]);return g?o.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),o.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),o.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),o.jsxs("div",{className:"w-full",children:[o.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),o.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{className:"w-full",children:[o.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),o.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("div",{className:"w-full",children:o.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&o.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>o.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),o.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),o.jsx("button",{onClick:k,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"font-semibold",children:S.nombreActividad}),o.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),o.jsxs("div",{className:"flex gap-2 mt-1",children:[o.jsx("button",{onClick:()=>j(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),o.jsx("button",{onClick:()=>I(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),o.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(S=>o.jsxs("tr",{children:[o.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(B=>{var F;const R=(F=i[B.id])==null?void 0:F[S];let P;return R==="trabajado"?P=_v[t]||_v.Default:R==="no trabajado"?P="❌":R==="ausente"?P="A":P=_v[t]||_v.Default,o.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:o.jsx("button",{onClick:()=>_(B.id,S),className:`text-3xl transition-opacity duration-200 ${R==="trabajado"?"opacity-100":R==="no trabajado"?"opacity-40":R==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},B.id)}),o.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(S)})]},S))})]})})]})},Let=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=C.useState([]),[i,l]=C.useState(null),[c,u]=C.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,A]=C.useState({}),[h,m]=C.useState(2),g=C.useMemo(()=>r.filter(j=>j.profile===Yt.ESTUDIANTE&&qce(j.curso||"")===e).sort((j,k)=>j.nombreCompleto.localeCompare(k.nombreCompleto)),[r,e]);C.useEffect(()=>{const j=Tet(e,t,s);return()=>j()},[e,t]),C.useEffect(()=>{if(i){const j={};i.grupos.forEach(k=>{k.integrantes.forEach(I=>{j[I.nombre]={groupNumber:String(k.numero),role:I.rol||""}})}),A(j)}else A({})},[i]);const x=async j=>{if(j.preventDefault(),!c.nombre.trim())return;const k={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await Iet(k),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!i)return;const j=new Map;for(const I of g){const E=d[I.nombreCompleto];if(E&&E.groupNumber){const S=parseInt(E.groupNumber,10);isNaN(S)||(j.has(S)||j.set(S,[]),j.get(S).push({nombre:I.nombreCompleto,rol:E.role||""}))}}const k=Array.from(j.entries()).map(([I,E])=>({numero:I,integrantes:E})).sort((I,E)=>I.numero-E.numero);try{await Fet(i.id,{grupos:k}),alert("Grupos guardados con éxito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const j=[...g].sort(()=>Math.random()-.5),k={};j.forEach((I,E)=>{var S;k[I.nombreCompleto]={groupNumber:String(E%h+1),role:((S=d[I.nombreCompleto])==null?void 0:S.role)||""}}),A(k)},w=(j,k,I)=>{A(E=>({...E,[j]:{...E[j]||{groupNumber:"",role:""},[k]:I}}))},_=C.useMemo(()=>{const j=new Map;return Object.entries(d).forEach(([k,I])=>{I.groupNumber&&(j.has(I.groupNumber)||j.set(I.groupNumber,[]),j.get(I.groupNumber).push({nombre:k,rol:I.role}))}),Array.from(j.entries()).sort((k,I)=>parseInt(k[0])-parseInt(I[0]))},[d]);return i?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),o.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),o.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-1 space-y-4",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",value:h,onChange:j=>m(parseInt(j.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),o.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),o.jsx("table",{className:"w-full text-sm",children:o.jsx("tbody",{children:g.map(j=>{var k;return o.jsxs("tr",{children:[o.jsx("td",{className:"py-1 pr-2",children:j.nombreCompleto}),o.jsx("td",{className:"py-1",children:o.jsx("input",{type:"number",value:((k=d[j.nombreCompleto])==null?void 0:k.groupNumber)||"",onChange:I=>w(j.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},j.id)})})})]})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([j,k])=>o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[o.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",j]}),o.jsx("ul",{className:"space-y-2",children:k.map(I=>o.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"flex-1 truncate",children:I.nombre}),o.jsxs("select",{value:I.rol||"",onChange:E=>w(I.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[o.jsx("option",{value:"",children:"-- Asignar Rol --"}),Rte.map(E=>o.jsx("option",{value:E,children:E},E))]})]},I.nombre))})]},j))})]})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),o.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),o.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[o.jsx("input",{value:c.nombre,onChange:j=>u({...c,nombre:j.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),o.jsx("input",{type:"date",value:c.fecha,onChange:j=>u({...c,fecha:j.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(j=>o.jsxs("button",{onClick:()=>l(j),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[o.jsx("p",{className:"font-bold",children:j.nombreActividad}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",j.fechaPresentacion]})]},j.id))]})]})},Met=({currentUser:e})=>{const[t,r]=C.useState("calificaciones"),[n,a]=C.useState(null),[s,i]=C.useState(null),[l,c]=C.useState([]),[u,d]=C.useState(!0);C.useEffect(()=>{d(!0);const x=Oet(v=>{c(v),d(!1)});return()=>x()},[]);const A=C.useMemo(()=>e.cursos||[],[e.cursos]),h=C.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>o.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return o.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return o.jsx(Det,{cursos:A,onSelect:a});if(!s)return o.jsx(Pet,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return o.jsx(Ret,{curso:n,asignatura:s,allUsers:l,onBack:()=>i(null)});if(t==="grupos")return o.jsx(Let,{curso:n,asignatura:s,allUsers:l,onBack:()=>i(null)})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),o.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),o.jsx("div",{className:"mt-6",children:g()})]})};function Uet(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function Qet(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function Het(e,t){var i;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=Uet(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,A]=u.minuto.split("-").map(Number),h=A-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(i=e.detallesObservacion)==null||i.forEach(l=>{Qet(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const Vet=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=C.useState(null),[s,i]=C.useState(null),[l,c]=C.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,A=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...A.map(y=>y.docenteInfo)]).size,m=A.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=A.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);A.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),k=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+k},0)/A.length;const v=A.filter(y=>{var w,_,j;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((j=y.retroalimentacion)==null?void 0:j.foco)}).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:o.jsx(Ld,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:o.jsx(Rp,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(_l,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:o.jsx(Ti,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ac,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),o.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),o.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),o.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Zw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),o.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=A.find(_=>_.id===y.target.value);i(w||null)},children:[o.jsx("option",{value:"",children:"Seleccione un ciclo..."}),A.map(y=>o.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&o.jsx("button",{onClick:async()=>{c(!0);try{const y=A.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await Het(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Zw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),o.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[o.jsx(Ti,{className:"w-4 h-4"})," Fortalezas"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[o.jsx(A1,{className:"w-4 h-4"})," Áreas de Mejora"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&o.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[o.jsx($u,{className:"w-4 h-4"})," Alertas"]}),o.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>o.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[o.jsx(P_,{className:"w-4 h-4"})," Recomendaciones"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Gc,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),o.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),o.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),o.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(P_,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),o.jsx("tbody",{children:A.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return o.jsxs("tr",{className:"border-t dark:border-slate-700",children:[o.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),o.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),o.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),o.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[o.jsx(Ti,{className:"w-3 h-3"})," Completado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[o.jsx(A1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Xce=fR(),FE="acompanamientos",Lm="ciclos_opr",Mm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Yce=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},zet=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Yce(r);return`videos_opr/${n}/${a}/${s}`},$et=async(e,t,r)=>{try{if(!kF.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],A=i[2],h=i.slice(3).join("/");s=zet(d,A,h)}else{const d=Date.now(),A=Yce(e.name);s=`videos_opr/general/${d}_${A}`}const l=aE(Xce,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:kF.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Gwe(l,e,c);return new Promise((d,A)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}A(new Error(g))},async()=>{try{const m=await J4(u.snapshot.ref);d(m)}catch{A(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},BM=async e=>{try{const t=aE(Xce,e),{items:r,prefixes:n}=await Kwe(t);await Promise.all(r.map(a=>qwe(a))),await Promise.all(n.map(a=>BM(a.fullPath)))}catch{}},Get=async()=>{try{const e=$t(vt(ft,FE),pr("fecha","desc"));return(await Dn(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Mm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},Ket=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await hn(vt(ft,FE),t);return{...e,id:r.id,fecha:Mm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},qet=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await cc(sr(ft,FE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},Wet=async e=>{try{const t=$t(vt(ft,Lm),Ir("acompanamientoId","==",e)),r=await Dn(t),n=$g(ft);r.forEach(a=>n.delete(sr(ft,Lm,a.id))),await n.commit(),await BM(`videos_opr/${e}`),await Ra(sr(ft,FE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},bW=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await hn(vt(ft,Lm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Mm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},Xet=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await cc(sr(ft,Lm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},Yet=async e=>{try{const t=$t(vt(ft,Lm),Ir("acompanamientoId","==",e),pr("fecha","desc"));return(await Dn(t)).docs.map(a=>{var l;const s=a.data(),i={id:a.id,...s,fecha:Mm(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(i.seguimiento={...s.seguimiento,fecha:Mm(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},Jet=async()=>{try{const e=$t(vt(ft,Lm),Ir("acompanamientoId","==",""),pr("fecha","desc"));return(await Dn(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Mm(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Mm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},yW=async e=>{try{const t=await zg(sr(ft,Lm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await BM(`videos_opr/${n}/${e}`),await Ra(sr(ft,Lm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},Zet=async e=>{try{const t=$t(vt(ft,FE),Ir("docente","==",e),pr("fecha","desc"));return(await Dn(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Mm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},ett=async e=>{try{const t=$t(vt(ft,"rubricas_personalizadas"),Ir("docente","==",e)),r=await Dn(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},ttt=async()=>await Rce(),rtt=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,A]=C.useState(!1),[h,m]=C.useState(!1),[g,x]=C.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?A(!0):E.type==="dragleave"&&A(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),A(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const S=E.dataTransfer.files[0];j(S)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const S=E.target.files[0];j(S)}},j=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},k=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&o.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?o.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[o.jsx(Ti,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),o.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:o.jsx(vi,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(v))==null?void 0:E.click())},children:[o.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),o.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?o.jsxs("div",{className:"text-center",children:[o.jsx($u,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),o.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):o.jsxs("div",{className:"text-center",children:[o.jsx(rb,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),o.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),o.jsx("input",{id:v,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:`${k()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[o.jsx($u,{className:"w-4 h-4 text-red-500"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},ntt=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=C.useState(!1),[l,c]=C.useState({}),[u,d]=C.useState({}),[A,h]=C.useState({}),[m,g]=C.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=C.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=C.useState(t||x);C.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=L=>{const{name:M,value:ee}=L.target,V=M.split(".");V.length>1?y(q=>{const K=JSON.parse(JSON.stringify(q));let X=K;for(let Z=0;Z<V.length-1;Z++)X=X[V[Z]];return X[V[V.length-1]]=ee,K}):y(q=>({...q,[M]:ee}))},_=(L,M,ee)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(q=>q.id===L?{...q,[M]:ee}:q)}))},j=()=>{const L=v.detallesObservacion[v.detallesObservacion.length-1],M=L&&parseInt(L.minuto.split("-")[1],10)||0,ee=`${M+1}-${M+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:ee,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},k=L=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(ee=>ee.id!==L)}))},I=async(L,M)=>{h(ee=>({...ee,[L]:null})),c(ee=>({...ee,[L]:!0})),d(ee=>({...ee,[L]:0}));try{const ee=Date.now(),V=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",K=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",X=`videos_opr/${q}/${K}/${ee}_${V}`,Z=await $et(M,X,G=>{d(D=>({...D,[L]:G}))});E(L,Z),d(G=>({...G,[L]:100}))}catch(ee){const V=(ee==null?void 0:ee.message)||"Error desconocido al subir el archivo";h(q=>({...q,[L]:V})),alert(`Error al subir el video: ${V}`)}finally{c(ee=>({...ee,[L]:!1})),setTimeout(()=>{d(ee=>({...ee,[L]:0}))},2e3)}},E=(L,M)=>{const ee=L.split(".");ee.length>1?y(V=>{const q=JSON.parse(JSON.stringify(V));let K=q;for(let X=0;X<ee.length-1;X++)K=K[ee[X]];return K[ee[ee.length-1]]=M,q}):y(V=>({...V,[L]:M}))},S=L=>{const M=L.split(".");M.length>1?y(ee=>{const V=JSON.parse(JSON.stringify(ee));let q=V;for(let K=0;K<M.length-1;K++)q=q[M[K]];return q[M[M.length-1]]="",V}):y(ee=>({...ee,[L]:""})),h(ee=>({...ee,[L]:null})),d(ee=>({...ee,[L]:0}))},B=async(L,M,ee)=>{if(!ee||!ee.trim())return ee;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${M}):

"""${ee}"""`;try{return(await L.generateContent(V)).response.text()}catch(q){return console.error(`Error improving text for ${M}:`,q),ee}},R=async()=>{var L,M;i(!0);try{const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new Ds(ee).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=v.retroalimentacion,X=v.planificacion,Z=await Promise.all([B(q,"Éxito",K.exito),B(q,"Modelo",K.modelo),B(q,"Foco",K.foco),B(q,"Elementos a identificar",K.elementosIdentificar),B(q,"Brecha - Preguntas",((L=K.brecha)==null?void 0:L.preguntas)||""),B(q,"Brecha - Indicadores",((M=K.brecha)==null?void 0:M.indicadores)||""),B(q,"Planificación - Preparación",X.preparacion),B(q,"Planificación - Objetivo",X.objetivo),B(q,"Planificación - Actividad",X.actividad),B(q,"Planificación - Tiempo",X.tiempo)]);y(G=>({...G,retroalimentacion:{...G.retroalimentacion,exito:Z[0],modelo:Z[1],foco:Z[2],elementosIdentificar:Z[3],brecha:{...G.retroalimentacion.brecha,preguntas:Z[4],indicadores:Z[5]}},planificacion:{...G.planificacion,preparacion:Z[6],objetivo:Z[7],actividad:Z[8],tiempo:Z[9]}})),alert("Textos mejorados exitosamente con IA")}catch(ee){console.error(ee),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},P=()=>{const L=new vr,M=L.internal.pageSize.getWidth(),ee=L.internal.pageSize.getHeight(),V=15,q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",K=15,X=15;let Z=25;const G=()=>{const le="Liceo Industrial de Recoleta";L.setFontSize(8),L.setFont("helvetica","normal"),L.text(le,M/2,ee-10,{align:"center"}),L.setFontSize(10),L.setFont("helvetica","normal");const ue=ee-25;L.line(V,ue,V+70,ue),L.text("Firma Docente",V+15,ue+5),L.line(M-V-70,ue,M-V,ue),L.text("Firma Observador",M-V-55,ue+5)},D=()=>{try{L.addImage(q,"PNG",M-X-10,10,X,K)}catch(le){console.error("Error al cargar el logo:",le)}};D();const U=L.addPage;L.addPage=function(){return U.apply(this,arguments),D(),G(),this};const z=le=>{Z>240&&(L.addPage(),Z=25),L.setFontSize(14),L.setFont("helvetica","bold"),L.text(le,V,Z),Z+=12};L.setFontSize(18),L.setFont("helvetica","bold"),L.text("Informe de Ciclo OPR",M/2,Z,{align:"center"}),Z+=18,z("1. Datos Generales");const J=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];gi(L,{body:J,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),Z=L.lastAutoTable.finalY+15,z("2. Registro Detallado de Observación");const re=v.detallesObservacion.map(le=>[le.minuto,le.accionesDocente,le.accionesEstudiantes,le.actividades]);gi(L,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:re,startY:Z,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:V,right:V},didDrawPage:le=>{var ue;Z=((ue=le.cursor)==null?void 0:ue.y)||25}}),Z=L.lastAutoTable.finalY+15,z("3. Retroalimentación Docente");const oe=[];if(v.retroalimentacion.exito&&oe.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&oe.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&oe.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&oe.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),oe.length>0&&(gi(L,{body:oe,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),Z=L.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Z>240&&(L.addPage(),Z=40),L.setFontSize(12),L.setFont("helvetica","bold"),L.text("Análisis de Brecha",V,Z),Z+=8;const le=[],ue=v.retroalimentacion.brecha.minutoInicial,ke=v.retroalimentacion.brecha.minutoFinal;ue&&ke&&le.push(["Minutos:",`${ue} a ${ke}`]),v.retroalimentacion.brecha.preguntas&&le.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&le.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),le.length>0&&(gi(L,{body:le,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V+5,right:V}}),Z=L.lastAutoTable.finalY+10)}z("4. Planificación de Práctica");const se=[];v.planificacion.preparacion&&se.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&se.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&se.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&se.push(["Tiempo:",v.planificacion.tiempo]),se.length>0&&(gi(L,{body:se,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),Z=L.lastAutoTable.finalY+10),G(),L.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},F=async L=>{if(L.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(M)}catch(ee){console.error("Error al guardar ciclo OPR:",ee),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&o.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[o.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),o.jsxs("select",{value:m.docente,onChange:L=>g(M=>({...M,docente:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsxs("select",{value:m.curso,onChange:L=>g(M=>({...M,curso:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsxs("select",{value:m.asignatura,onChange:L=>g(M=>({...M,asignatura:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),js.map(L=>o.jsx("option",{value:L,children:L},L))]})]})]})]}),o.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[o.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("button",{type:"button",onClick:R,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[o.jsx(bR,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),o.jsxs("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[o.jsx(km,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),o.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),o.jsxs("form",{onSubmit:F,className:"space-y-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(Rp,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),o.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),o.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),o.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx(rtt,{label:"Video de observación de clase",onFileChange:L=>I("videoObservacionUrl",L),onLinkChange:L=>E("videoObservacionUrl",L),uploadedUrl:v.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:A.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(bg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b dark:border-slate-600",children:[o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),o.jsx("th",{className:"p-2"})]})}),o.jsx("tbody",{children:v.detallesObservacion.map(L=>o.jsxs("tr",{className:"border-b dark:border-slate-700",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:L.minuto,onChange:M=>_(L.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:L.accionesDocente,onChange:M=>_(L.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:L.accionesEstudiantes,onChange:M=>_(L.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:L.actividades,onChange:M=>_(L.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),o.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&o.jsx("button",{type:"button",onClick:()=>k(L.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:o.jsx(vi,{className:"w-4 h-4"})})})]},L.id))})]})}),o.jsxs("button",{type:"button",onClick:j,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[o.jsx(_F,{className:"w-4 h-4"})," Agregar Fila"]})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(Hte,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),o.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),o.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),o.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),o.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(yEe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),o.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),o.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),o.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),o.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(_l,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),o.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),o.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[o.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},att=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[i,l]=C.useState(!0),[c,u]=C.useState(null),[d,A]=C.useState("list"),[h,m]=C.useState(null),[g,x]=C.useState(null),[v,y]=C.useState("general"),[w,_]=C.useState(!1),[j,k]=C.useState({}),[I,E]=C.useState([]),S=xw,B=C.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,P]=C.useState(B),F=C.useCallback(async()=>{s(!0),u(null);try{const re=await Get();t(re)}catch(re){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",re)}finally{s(!1)}},[]),L=C.useCallback(async()=>{l(!0);try{const oe=(await ttt()).filter(se=>se.profile==="PROFESORADO").map(se=>se.nombreCompleto).sort();n(oe)}catch(re){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",re)}finally{l(!1)}},[]),M=C.useCallback(async()=>{try{const re={};for(const oe of e)if(oe.id)try{const se=await Yet(oe.id);se.length>0&&(re[oe.id]=se)}catch(se){console.error(`Error loading OPR cycles for ${oe.id}:`,se)}try{const oe=await Jet();E(oe)}catch(oe){console.error("Error loading standalone OPR cycles:",oe),E([])}k(re)}catch(re){console.error("Error fetching OPR cycles:",re)}},[e]);C.useEffect(()=>{F(),L()},[F,L]),C.useEffect(()=>{e.length>0&&M()},[e,M]);const ee=(re,oe)=>{if(x(re),oe)P(oe),m(oe.id);else{const se={id:"temp-"+Date.now(),fecha:re.fecha,docente:re.docenteInfo||"",curso:re.cursoInfo||"",asignatura:re.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};P(se),m(null)}A("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",se=new Ds(re).getGenerativeModel({model:"gemini-2.5-flash"}),le=Object.entries(R.rubricaResultados||{}).map(([Ne,je])=>`- ${Ne}: Nivel ${je}`).join(`
`),ue=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${R.docente}
- Asignatura: ${R.asignatura}
- Curso: ${R.curso}
- Resultados de la pauta de observación (rúbrica):
${le||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${R.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ae=(await se.generateContent(ue)).response.text();P(Ne=>({...Ne,retroalimentacionConsolidada:ae})),alert("Retroalimentación generada exitosamente con IA.")}catch(re){console.error("❌ Error al generar retroalimentación:",re);const oe=re.message||"No se pudo generar la retroalimentación automática.";u(oe),alert(`Error: ${oe}`)}finally{_(!1)}},q=async re=>{if(re.preventDefault(),!("docente"in R)||!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await qet(h,R),alert("¡Acompañamiento actualizado correctamente!");else{const oe=await Ket(R);m(oe.id),P(oe),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await F()}catch(oe){const se=(oe==null?void 0:oe.message)??"Error al guardar el registro de acompañamiento.";u(se),console.error("❌ Error al guardar:",oe),alert(`Error: ${se}`)}},K=()=>{P(B),m(null),x(null),A("form"),y("general"),u(null)},X=re=>{P(re),m(re.id),x(null),A("form"),y("general"),u(null)},Z=async re=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await Wet(re),await F(),alert("Registro eliminado exitosamente.")}catch(oe){const se="No se pudo eliminar el registro.";u(se),console.error("❌ Error al eliminar:",oe),alert(`Error: ${se}`)}},G=(re,oe)=>{P(se=>({...se,rubricaResultados:{...se.rubricaResultados||{},[re]:oe}}))},D=()=>{var re;if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const oe=new vr,se=oe.internal.pageSize.getWidth(),le=oe.internal.pageSize.getHeight(),ue=20,ke=se-ue*2,ae=(Te,Le)=>Le+Te>le-ue,Ne=()=>{const Te=oe.getNumberOfPages();for(let Le=1;Le<=Te;Le++)oe.setPage(Le),oe.setFontSize(9),oe.setTextColor(128),oe.text(`pág. ${Le} de ${Te}`,se-ue,le-10,{align:"right"})};let je=ue;oe.setFontSize(16),oe.setFont("helvetica","bold"),oe.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",se/2,je,{align:"center"}),je+=15;const _e=40;if(gi(oe,{startY:je,head:[],body:[["Docente:",R.docente],["Curso:",R.curso],["Asignatura:",R.asignatura],["Fecha:",new Date(R.fecha).toLocaleDateString("es-CL")],["Bloques:",R.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:ue,right:ue}}),je=oe.lastAutoTable.finalY+10,Object.keys(R.rubricaResultados||{}).length>0){oe.setFontSize(14),oe.setFont("helvetica","bold"),oe.text("Evaluación por Indicadores",ue,je),je+=10;const Te=Object.entries(R.rubricaResultados).map(([Le,We])=>{let xe;switch(We){case 1:xe="Débil";break;case 2:xe="Incipiente";break;case 3:xe="Satisfactorio";break;case 4:xe="Avanzado";break;default:xe="No evaluado"}return[Le,xe,We]});gi(oe,{startY:je,head:[["Indicador","Nivel de Logro","Puntuación"]],body:Te,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:ue,right:ue}})}oe.addPage(),je=ue,oe.setFontSize(14),oe.setFont("helvetica","bold"),oe.text("Observaciones Generales y Sugerencias de Mejora",ue,je),je+=15,R.observacionesGenerales&&(oe.setFontSize(12),oe.setFont("helvetica","bold"),oe.text("Fortalezas:",ue,je),je+=10,oe.setFont("helvetica","normal"),oe.setFontSize(11),oe.splitTextToSize(R.observacionesGenerales,ke).forEach(Le=>{ae(7,je)&&(oe.addPage(),je=ue),oe.text(Le,ue,je,{align:"justify"}),je+=7}),je+=10),R.retroalimentacionConsolidada&&(ae(50,je)&&(oe.addPage(),je=ue),oe.setFontSize(12),oe.setFont("helvetica","bold"),oe.text("Sugerencias de mejora:",ue,je),je+=10,oe.setFont("helvetica","normal"),oe.setFontSize(11),oe.splitTextToSize(R.retroalimentacionConsolidada,ke).forEach(Le=>{ae(7,je)&&(oe.addPage(),je=ue),oe.text(Le,ue,je,{align:"justify"}),je+=7})),Ne();const me=`Informe_Acompanamiento_${(re=R.docente)==null?void 0:re.replace(/\s+/g,"_")}_${R.curso}_${new Date().toISOString().split("T")[0]}.pdf`;oe.save(me)}catch(oe){console.error("❌ Error al generar PDF:",oe),alert("Error al generar el PDF. Intenta nuevamente.")}},U=re=>{P(oe=>({...oe,[re.target.name]:re.target.value}))},z=()=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>{K(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[o.jsx(_F,{className:"w-5 h-5"})," Acompañamiento General"]}),o.jsxs("button",{onClick:()=>{P(B),m(null),x(null),A("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[o.jsx(_F,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-500"}),o.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[o.jsx(Mu,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),o.jsxs("div",{className:"space-y-3",children:[a&&o.jsxs("div",{className:"flex items-center justify-center p-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),o.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(re=>re.id).length>0?o.jsx("div",{className:"grid gap-3",children:e.filter(re=>re.id).map(re=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(_l,{className:"w-4 h-4 text-amber-500"}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.docente})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.curso," •"," ",o.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",re.asignatura]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL")]}),re.bloques&&o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Bloques:"})," ",re.bloques]}),re.retroalimentacionConsolidada&&o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx(Ti,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),j[re.id]&&j[re.id].length>0&&o.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[o.jsx(Rp,{className:"w-3 h-3"}),j[re.id].length," Ciclo",j[re.id].length>1?"s":""," OPR"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx("button",{onClick:()=>{X(re),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),o.jsx("button",{onClick:()=>{X(re),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),o.jsx("button",{onClick:()=>Z(re.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:o.jsx(vi,{className:"w-4 h-4"})})]})]}),j[re.id]&&j[re.id].length>0&&o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[o.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[o.jsx(Rp,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),o.jsx("div",{className:"space-y-2",children:j[re.id].map(oe=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:oe.nombreCiclo||`Registro N° ${oe.registroN}`}),o.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(oe.fecha).toLocaleDateString("es-CL"),oe.horaInicio&&oe.horaTermino&&o.jsxs("span",{children:[" • ",oe.horaInicio," - ",oe.horaTermino]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>{const se=e.find(le=>le.id===re.id);ee(oe,se)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),o.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await yW(oe.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(se){console.error("Error deleting OPR cycle:",se),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:o.jsx(vi,{className:"w-3 h-3"})})]})]},oe.id))})]})]},re.id))}):!a&&o.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[o.jsx(Ld,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),o.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),I.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[o.jsx(Rp,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),o.jsx("div",{className:"space-y-3",children:I.map(re=>o.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Rp,{className:"w-4 h-4 text-blue-500"}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreCiclo||`Registro N° ${re.registroN}`})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Docente:"})," ",re.docenteInfo||"No especificado"," •"," ",o.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.cursoInfo||"No especificado"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL"),re.horaInicio&&re.horaTermino&&o.jsxs("span",{children:[" • ",re.horaInicio," - ",re.horaTermino]})]}),re.videoObservacionUrl&&o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx(Ti,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx("button",{onClick:()=>{ee(re)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),o.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await yW(re.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting standalone OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:o.jsx(vi,{className:"w-4 h-4"})})]})]})},re.id))})]})]}),J=()=>{const re=h?e.find(se=>se.id===h):null,oe={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in R&&R.docente||"",curso:"curso"in R&&R.curso||"",asignatura:"asignatura"in R&&R.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),o.jsx("button",{type:"button",onClick:()=>{A("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Ld,{className:"w-4 h-4"}),"Acompañamiento General"]})}),o.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Rp,{className:"w-4 h-4"}),"Ciclos OPR"]})}),o.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-500"}),o.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&o.jsx("div",{className:"animate-fade-in",children:o.jsx(Vet,{acompanamientos:e,ciclosOPR:j,standaloneCiclos:I})}),v==="general"&&o.jsxs("form",{onSubmit:q,className:"space-y-8",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[o.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[o.jsx(k5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[o.jsx(bR,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),o.jsxs("button",{type:"button",onClick:D,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[o.jsx(km,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),o.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in R&&R.retroalimentacionConsolidada&&o.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[o.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[o.jsx(Ti,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:o.jsx("textarea",{readOnly:!0,rows:8,value:R.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),o.jsxs("select",{name:"docente",value:"docente"in R?R.docente:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[o.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(se=>o.jsx("option",{value:se,children:se},se))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),o.jsxs("select",{name:"curso",value:"curso"in R?R.curso:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(se=>o.jsx("option",{value:se,children:se},se))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),o.jsxs("select",{name:"asignatura",value:"asignatura"in R?R.asignatura:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),js.map(se=>o.jsx("option",{value:se,children:se},se))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),o.jsx("input",{type:"text",name:"bloques",value:"bloques"in R?R.bloques:"",onChange:U,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),o.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in R?R.observacionesGenerales:"",onChange:U,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:S.map(se=>o.jsx(at.Fragment,{children:se.criteria.map((le,ue)=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[ue===0&&o.jsx("td",{rowSpan:se.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:se.domain}),o.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:le.name}),le.levels.map((ke,ae)=>{const Ne=ae+1,je="rubricaResultados"in R&&R.rubricaResultados[le.name]===Ne,_e=je?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return o.jsx("td",{onClick:()=>G(le.name,Ne),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${_e} ${je?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Ne} para ${le.name}`,children:o.jsxs("div",{className:"text-xs leading-relaxed",children:[je&&o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(Ti,{className:"w-3 h-3 text-amber-600"}),o.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),ke]})},Ne)})]},le.name))},se.domain))})]})}),Object.keys(R.rubricaResultados||{}).length>0&&o.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[o.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(R.rubricaResultados).length," criterios evaluados)"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(R.rubricaResultados).map(([se,le])=>o.jsxs("div",{className:"flex justify-between items-center py-1",children:[o.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[se,":"]}),o.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${le===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":le===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":le===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",le]})]},se))})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[o.jsx("button",{type:"button",onClick:()=>A("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&o.jsx(ntt,{acompanamiento:re||oe,cicloToEdit:g,profesores:r,onSave:async se=>{try{const le=(re==null?void 0:re.id)||typeof se.acompanamientoId=="string"&&se.acompanamientoId||void 0;if(g&&g.id)await Xet(g.id,se),alert("Ciclo OPR actualizado exitosamente");else{if(!le||String(le).startsWith("temp-")){const ue={...se,acompanamientoId:""};await bW(ue)}else{const ue={...se,acompanamientoId:String(le)};await bW(ue)}alert("Ciclo OPR guardado exitosamente")}x(null),await F(),await M(),A("list")}catch(le){console.error("❌ Error al guardar ciclo OPR:",le);const ue=le.message||"Error desconocido al guardar el ciclo OPR";u(ue),alert(`Error al guardar el ciclo OPR: ${ue}`)}},onCancel:()=>{x(null),A("list")}})]})};return a||i?o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?z():J()})})},TM="mensajes_internos",stt="usuarios",Jce="mensajes_read_status",Zce=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},itt=(e,t)=>{const r=$t(vt(ft,TM),Ir("participants","array-contains",e),pr("fecha","desc"));return fr(r,a=>{const s=a.docs.map(i=>Zce(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},ott=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await hn(vt(ft,TM),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},ltt=async e=>{try{const t=sr(ft,TM,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},ctt=(e,t)=>{const r=sr(ft,Jce,e);return fr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},utt=async(e,t)=>{try{const r=sr(ft,Jce,e);await yi(r,{messages:dte(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},dtt=e=>{const t=$t(vt(ft,stt),pr("nombreCompleto","asc"));return fr(t,n=>{const a=n.docs.map(s=>Zce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},Att=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=C.useState("inbox"),[a,s]=C.useState([]),[i,l]=C.useState([]),[c,u]=C.useState(null),[d,A]=C.useState({announcements:[],messages:[]}),[h,m]=C.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=C.useState(g);C.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const E=itt(e.email,R=>{s(R),m(!1)}),S=dtt(l),B=ctt(e.id,R=>{A(R),t()});return()=>{E(),S(),B()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&utt(e.id,E.id).catch(S=>{console.error("Failed to mark message as read:",S)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await ott(S),v(g),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await ltt(E),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},j=E=>{v({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},k=C.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),I=C.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?o.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[o.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[o.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:o.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),o.jsxs("nav",{className:"p-2 space-y-1",children:[o.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),o.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&o.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?k:I).map(E=>{const S=r==="inbox"&&!d.messages.includes(E.id);return o.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),S&&o.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),o.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),o.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),o.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),o.jsxs("select",{id:"para",value:x.para,onChange:E=>v({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>o.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),o.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>v({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),o.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>v({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?o.jsxs("div",{children:[o.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[o.jsx("strong",{children:"De:"})," ",c.de," ",o.jsx("br",{}),o.jsx("strong",{children:"Para:"})," ",c.para," ",o.jsx("br",{}),o.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),o.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),o.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&o.jsx("button",{onClick:()=>j(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),o.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):o.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:o.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},oj="proyectos_interdisciplinarios",IM="entregas_interdisciplinarias",ftt="usuarios",FM=e=>{const t=e.data();return{id:e.id,...t}},htt=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),mtt=e=>{const t=$t(vt(ft,oj),pr("nombreProyecto","asc"));return fr(t,n=>{try{const a=n.docs.map(s=>htt(FM(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},ptt=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await hn(vt(ft,oj),t)).id},wW=async(e,t)=>{const{id:r,...n}=t,a=sr(ft,oj,e);await yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},gtt=async e=>{const t=sr(ft,oj,e),r=$t(vt(ft,IM),Ir("planificacionId","==",e)),n=await Dn(r),a=$g(ft);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},xtt=(e,t)=>{const r=$t(vt(ft,IM),Ir("planificacionId","==",e));return fr(r,a=>{const s=a.docs.map(i=>FM(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},EW=async(e,t)=>{const r=sr(ft,IM,e);await yi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},eue=e=>{const t=$t(vt(ft,ftt));return fr(t,n=>{const a=n.docs.map(s=>FM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},YO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},Dw=({href:e})=>{if(!e)return o.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return o.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[o.jsx(CCe,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},Np=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),vtt=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=C.useState(null),a=C.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,A)=>new Date(d.fechaInicio).getTime()-new Date(A.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=C.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),A=new Date(`${c.fechaFin}T00:00:00`);return A<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&A>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[A,h]=C.useState(c.activity),m=x=>h({...A,[x.target.name]:x.target.value}),g=()=>{d(c.planId,A),u()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(zte,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),o.jsx("input",{name:"nombre",value:A.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),o.jsx("input",{name:"responsables",value:A.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),o.jsx("input",{type:"date",name:"fechaInicio",value:A.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),o.jsx("input",{type:"date",name:"fechaFin",value:A.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),o.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:A.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),o.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx($u,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):o.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:o.jsx(nh,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const A=s(d),h=d.type==="activity";return o.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[o.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${A.color}`,children:A.text})}),o.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),o.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(Dw,{href:d.recursoUrl})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&o.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},btt=({planificaciones:e,onBack:t})=>{const r=C.useMemo(()=>{const c={},u={};return e.forEach(d=>{var A;(A=d.contenidosPorAsignatura)==null||A.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(YO).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=C.useMemo(()=>{const c={},u={};return e.forEach(d=>{var A;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(A=d.contenidosPorAsignatura)==null||A.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=C.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),A=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:A}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const A=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...A.map(([,m])=>m));return h?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),o.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:A.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return o.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,A={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:o.jsx(Zw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),o.jsx("div",{className:"space-y-4",children:Object.keys(YO).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=A[h]||"bg-slate-400";return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:A,color:h})=>o.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold",children:d}),o.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),o.jsx("p",{className:"text-white/90 text-sm",children:A})]});return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:o.jsx(P_,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[o.jsx(e2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(l,{icon:o.jsx(yg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),o.jsx(l,{icon:o.jsx(nEe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),o.jsx(l,{icon:o.jsx(Ld,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),o.jsx(l,{icon:o.jsx(Gc,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsx(i,{data:r.categoriaCount}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(vw,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),A=d>0?u/d*100:0;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),o.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${A}%`}})})]},c)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),o.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},ytt=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=C.useState([]),[s,i]=C.useState([]),[l,c]=C.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=C.useState(null);C.useEffect(()=>{const v=eue(a),y=xtt(e.id,i);return()=>{v(),y()}},[e.id]);const A=C.useMemo(()=>n.filter(v=>v.profile===Yt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${l==null?void 0:l.instrucciones}"
Comentario del estudiante: "${v.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new Ds(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await EW(v.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},m=v=>v.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[o.jsx(e2,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),o.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>o.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),o.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:A.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return o.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[o.jsx(xR,{className:"w-4 h-4"})," Entregado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[o.jsx($u,{className:"w-4 h-4"})," Pendiente"]})})]}),y?o.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),o.jsx(Dw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),o.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[o.jsx(km,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>EW(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),o.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(eg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):o.jsxs("div",{className:"text-center py-6",children:[o.jsx($u,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"text-center",children:[o.jsx($u,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),o.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[o.jsx(e2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},wtt=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[l,c]=C.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(m=>{var g;return((g=i.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),A=async h=>{var m,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new Ds(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,j=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(j);s({actividades:(m=k.actividades)==null?void 0:m.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=k.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=k.tareas)==null?void 0:x.map((I,E)=>({...I,id:crypto.randomUUID(),numero:E+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>A("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(eg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),o.jsx("button",{type:"button",onClick:()=>A("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(eg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),o.jsx("button",{type:"button",onClick:()=>A("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",o.jsx("span",{children:"Generando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(eg,{className:"w-4 h-4"})," ",o.jsx("span",{children:"Estructura IA"})]})})]})},Ett=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=C.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,l]=C.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=C.useState({nombre:"",fecha:"",recursoUrl:""}),[d,A]=C.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});C.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),m=(w,_,j)=>s(k=>({...k,contenidosPorAsignatura:k.contenidosPorAsignatura.map(I=>I.asignatura===w?{...I,[_]:j}:I)})),g=(w,_)=>s(j=>({...j,contenidosPorAsignatura:j.contenidosPorAsignatura.map(k=>k.asignatura===w?{...k,habilidades:k.habilidades.includes(_)?k.habilidades.filter(I=>I!==_):[...k.habilidades,_]}:k)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},v=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(j=>({...j,tareas:[...j.tareas||[],w]})),A({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return o.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:o.jsx(yg,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx(Np,{icon:o.jsx(Ld,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:o.jsx(wtt,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var j,k,I;return{..._,actividades:(j=w.actividades)!=null&&j.length?w.actividades:_.actividades,fechasClave:(k=w.fechasClave)!=null&&k.length?w.fechasClave:_.fechasClave,tareas:(I=w.tareas)!=null&&I.length?w.tareas:_.tareas}})}),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),o.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),o.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),o.jsx(Np,{icon:o.jsx(_l,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:o.jsx("div",{className:"space-y-3",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(j=>j!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:o.jsx(t2,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),o.jsx(Np,{icon:o.jsx(F_,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:_s.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(j=>j!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Np,{icon:o.jsx(Gc,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:js.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(_=>{const j=_.asignaturas,k=j.includes(w)?j.filter(E=>E!==w):[...j,w];let I=_.contenidosPorAsignatura;return k.includes(w)&&!j.includes(w)&&(I=[...I,{asignatura:w,contenidos:"",habilidades:[]}]),!k.includes(w)&&j.includes(w)&&(I=I.filter(E=>E.asignatura!==w)),{..._,asignaturas:k,contenidosPorAsignatura:I}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&o.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[o.jsx(Gc,{className:"w-4 h-4"})," ",w.asignatura]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),o.jsx("textarea",{value:w.contenidos,onChange:_=>m(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),o.jsx("div",{className:"space-y-2",children:Object.entries(YO).map(([_,j])=>o.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[o.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(k=>o.jsx("button",{type:"button",onClick:()=>g(w.asignatura,k),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(k)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:k},k))})]},_))}),w.habilidades.length>0&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[o.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),o.jsx(Np,{icon:o.jsx(A1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:o.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),o.jsx(Np,{icon:o.jsx(Mu,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:o.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),o.jsxs(Np,{icon:o.jsx(ac,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(nh,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),o.jsx("input",{value:i.nombre,onChange:w=>l({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),o.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>l({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),o.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>l({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:i.recursoUrl||"",onChange:w=>l({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Nl,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>o.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),o.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),o.jsx(Dw,{href:w.recursoUrl})]})},w.id))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(xR,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),o.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),o.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"sm:col-span-1",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("button",{type:"button",onClick:v,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Nl,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>o.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),o.jsx(Dw,{href:w.recursoUrl})]})},w.id))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Zw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[o.jsxs("div",{className:"lg:col-span-5",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),o.jsx("input",{value:d.instrucciones,onChange:w=>A({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),o.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>A({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:d.recursoUrl||"",onChange:w=>A({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Nl,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),o.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),o.jsxs("div",{className:"text-right space-y-1",children:[o.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?o.jsx(Dw,{href:w.recursoUrl}):o.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),o.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},CW=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[i,l]=C.useState("list"),[c,u]=C.useState(null),[d,A]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState("all"),v=C.useMemo(()=>g==="all"?e:e.filter(S=>S.id===g),[e,g]);C.useEffect(()=>{s(!0);const S=eue(R=>{const P=R.filter(F=>F.profile===Yt.PROFESORADO);n(P)}),B=mtt(R=>{const P=R.map(F=>({...F,docentesResponsables:Array.isArray(F.docentesResponsables)?F.docentesResponsables:[F.docentesResponsables].filter(Boolean),contenidosPorAsignatura:F.contenidosPorAsignatura||[],actividades:F.actividades||[],fechasClave:F.fechasClave||[]}));t(P),s(!1)});return()=>{S(),B()}},[]);const y=C.useCallback(async(S,B)=>{const R=e.find(F=>F.id===S);if(!R)return;const P={...R,actividades:(R.actividades||[]).map(F=>F.id===B.id?B:F)};await wW(S,P)},[e]),w=async S=>{try{const B=S.id&&String(S.id).length>0,R={...S};if(B){const{id:P,...F}=R;await wW(S.id,F)}else delete R.id,await ptt(R);l("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},_=S=>{u(S),l("form")},j=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await gtt(S)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},k=()=>{u(null),l("form")},I=async S=>{A(S.id);const B=new vr("p","mm","a4"),R=15,F=B.internal.pageSize.getWidth()-R*2;let L=R+20;B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(0);const M=B.splitTextToSize(S.nombreProyecto,F);B.text(M,R,L),L+=M.length*8+10,gi(B,{startY:L,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(q=>q.map(K=>{var X;return((X=r.find(Z=>Z.id===K))==null?void 0:X.nombreCompleto)||K}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),L=B.lastAutoTable.finalY+15;const V=(q,K)=>{if(!K||Array.isArray(K)&&!K.length||typeof K=="string"&&!K.trim())return;const X=Array.isArray(K)?K.join(", "):String(K),Z=B.splitTextToSize(X,F);B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(q,R,L),L+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(80),B.text(Z,R,L),L+=Z.length*5+10};if(V("Descripción del Proyecto",S.descripcionProyecto),V("Objetivos de Aprendizaje",S.objetivos),V("Indicadores de Logro",S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Contenidos por Asignatura",R,L),L+=10,S.contenidosPorAsignatura.forEach(q=>{var K;if(B.setFont("helvetica","bold"),B.setFontSize(11),B.text(`${q.asignatura}:`,R,L),L+=6,B.setFont("helvetica","normal"),B.setFontSize(11),q.contenidos){const X=B.splitTextToSize(`Contenidos: ${q.contenidos}`,F-10);B.text(X,R+5,L),L+=X.length*5+3}if((K=q.habilidades)!=null&&K.length){const X=`Habilidades: ${q.habilidades.join(", ")}`,Z=B.splitTextToSize(X,F-10);B.text(Z,R+5,L),L+=Z.length*5+8}}),L+=10),S.actividades&&S.actividades.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Actividades",R,L),L+=10,gi(B,{startY:L,head:[["Actividad","Inicio","Fin","Recurso"]],body:S.actividades.map(q=>[q.nombre,q.fechaInicio,q.fechaFin,q.recursoUrl||"—"]),theme:"striped"}),L=B.lastAutoTable.finalY+10),S.fechasClave&&S.fechasClave.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Fechas Clave",R,L),L+=10,gi(B,{startY:L,head:[["Hito","Fecha","Recurso"]],body:S.fechasClave.map(q=>[q.nombre,q.fecha,q.recursoUrl||"—"]),theme:"striped"}),L=B.lastAutoTable.finalY+10),S.tareas&&S.tareas.length>0){const q=S.tareas.map(K=>[String(K.numero||""),K.instrucciones,K.fechaEntrega,K.recursoUrl||"—"]);B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Tareas para Estudiantes",R,L),L+=10,gi(B,{startY:L,head:[["#","Instrucciones","Entrega","Recurso"]],body:q,theme:"striped",headStyles:{fillColor:[52,73,94]}})}B.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),A(null)},E=S=>S.map(B=>{var R;return((R=r.find(P=>P.id===B))==null?void 0:R.nombreCompleto)||B}).join(", ");return a?o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?o.jsx(ytt,{plan:h,onBack:()=>m(null),availableTeachers:r}):i==="dashboard"?o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),o.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),o.jsx(btt,{planificaciones:e,onBack:()=>l("list")})]}):i==="form"?o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),o.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),o.jsx(Ett,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),o.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:o.jsx(yg,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[o.jsx(P_,{className:"w-5 h-5"})," Ver Dashboard"]}),o.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[o.jsx(Nl,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:o.jsx(yg,{className:"w-12 h-12 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),o.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Nl,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>o.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(F_,{className:"w-4 h-4"}),o.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(_l,{className:"w-4 h-4"}),o.jsxs("span",{children:["Profesores: ",E(S.docentesResponsables)]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(Gc,{className:"w-4 h-4"}),o.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>m(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[o.jsx(xR,{className:"w-4 h-4"})," Entregas"]}),o.jsxs("button",{type:"button",onClick:()=>I(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):o.jsx(km,{className:"w-4 h-4"}),"PDF"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>_(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:o.jsx(zte,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>j(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:o.jsx(vi,{className:"w-4 h-4"})})]})]})]},S.id))})]}),e.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yCe,{className:"w-5 h-5 text-slate-600"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),o.jsxs("select",{value:g,onChange:S=>x(S.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[o.jsx("option",{value:"all",children:"Todos"}),e.map(S=>o.jsx("option",{value:S.id,children:S.nombreProyecto},S.id))]})]})]}),o.jsx("div",{id:"gantt-container-vertical",children:o.jsx(vtt,{planificaciones:v,onActivityUpdate:y})})]})]})},O1="panol_maquinas",OE="panol_registros",Ctt=e=>{const t=$t(vt(ft,O1),pr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},Ntt=e=>{const t=$t(vt(ft,OE),pr("fecha","desc"));return fr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},_tt=async e=>(await hn(vt(ft,O1),{...e,createdAt:Fs(),updatedAt:Fs()})).id,Stt=async(e,t)=>{await cc(sr(ft,O1,e),{...t,updatedAt:Fs()})},ktt=async e=>{const t=$t(vt(ft,OE),Ir("maquinaId","==",e));if(!(await Dn(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Ra(sr(ft,O1,e))},jtt=async e=>(await hn(vt(ft,OE),{...e,createdAt:Fs(),updatedAt:Fs()})).id,Btt=async(e,t)=>{await cc(sr(ft,OE,e),{...t,updatedAt:Fs()})},Ttt=async e=>{await Ra(sr(ft,OE,e))},Itt=async()=>{if(!(await Dn(vt(ft,O1))).empty)return;const t=$g(ft);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=sr(vt(ft,O1));t.set(a,{...n,createdAt:Fs(),updatedAt:Fs()})}),await t.commit()},Ftt=()=>{var ee;const[e,t]=C.useState([]),[r,n]=C.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=C.useState(a),[l,c]=C.useState(null),u={nombre:"",especialidad:"Industrial"},[d,A]=C.useState(u),[h,m]=C.useState(null),[g,x]=C.useState({maquinaId:"",curso:"",profesor:"",fecha:""});C.useEffect(()=>{Itt().catch(console.error);const V=Ctt(t),q=Ntt(n);return()=>{V&&V(),q&&q()}},[]);const v=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await Stt(h.id,{...d}):await _tt({...d}),A(u),m(null)}catch(q){alert(q.message||"Error al guardar máquina")}},y=C.useCallback(async V=>{try{await ktt(V)}catch(q){alert(q.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const q=l||s;if(!q.curso||!q.profesorResponsable.trim()||!q.maquinaId||Number(q.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:K,...X}=l;await Btt(K,X)}else await jtt({...s});i(a),c(null)}catch(K){alert(K.message||"Error al guardar registro")}},_=C.useCallback(async V=>{try{await Ttt(V)}catch(q){alert(q.message||"Error al eliminar registro")}},[]),j=C.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,q)=>new Date(q.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),k=C.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),I=C.useMemo(()=>j.reduce((V,q)=>V+(Number(q.totalHoras)||0),0),[j]),E=C.useMemo(()=>{const V=new Map;j.forEach(K=>{var Z;const X=((Z=k.get(K.maquinaId))==null?void 0:Z.nombre)||"N/A";V.set(X,(V.get(X)||0)+(Number(K.totalHoras)||0))});const q=Array.from(V.entries()).map(([K,X])=>({maquina:K,horas:Number(X.toFixed(2))}));return q.sort((K,X)=>X.horas-K.horas),q},[j,k]),S=()=>{const V=j.map(X=>{var Z,G;return{Fecha:X.fecha,Curso:X.curso,Profesor:X.profesorResponsable,Máquina:((Z=k.get(X.maquinaId))==null?void 0:Z.nombre)||"N/A",Especialidad:((G=k.get(X.maquinaId))==null?void 0:G.especialidad)||"N/A","Total Horas":X.totalHoras,Observaciones:X.observaciones}}),q=Ii.json_to_sheet(V),K=Ii.book_new();Ii.book_append_sheet(K,q,"RegistrosPañol"),mE(K,"Registros_Pañol.xlsx")},B=()=>{const V=new vr;gi(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:j.map(q=>{var K,X;return[q.fecha,q.curso,q.profesorResponsable,((K=k.get(q.maquinaId))==null?void 0:K.nombre)||"N/A",((X=k.get(q.maquinaId))==null?void 0:X.especialidad)||"N/A",q.totalHoras,q.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:q=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",q.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",q.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},R="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(V,q)=>o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q}`,children:V}),F=({icon:V,label:q,value:K,accent:X="from-indigo-500 to-sky-500"})=>o.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${X} opacity-10`}),o.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[o.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:q}),o.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:K})]})]})]}),L=({title:V,icon:q,children:K,right:X,accent:Z="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>o.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${Z}`}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[q," ",o.jsx("span",{children:V})]}),X]}),K]})]}),M=()=>{const V=l||s,q=l?c:i;return o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(ac,{size:16})," Fecha"]}),o.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:K=>q({...V,fecha:K.target.value}),className:R,required:!0})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(_l,{size:16})," Curso"]}),o.jsxs("select",{name:"curso",value:V.curso,onChange:K=>q({...V,curso:K.target.value}),className:R,required:!0,children:[o.jsx("option",{value:"",children:"Curso"}),_s.map(K=>o.jsx("option",{children:K},K))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Gc,{size:16})," Profesor"]}),o.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:K=>q({...V,profesorResponsable:K.target.value}),className:R,required:!0,children:[o.jsx("option",{value:"",children:"Profesor Responsable"}),CF.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(k5,{size:16})," Máquina"]}),o.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:K=>q({...V,maquinaId:K.target.value}),className:R,required:!0,children:[o.jsx("option",{value:"",children:"Máquina"}),e.map(K=>o.jsx("option",{value:K.id,children:K.nombre},K.id))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(O_,{size:16})," Total de Horas"]}),o.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:K=>q({...V,totalHoras:Number(K.target.value)}),className:R,required:!0,min:.5,step:.5})]}),o.jsxs("div",{className:"lg:col-span-6",children:[o.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),o.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:K=>q({...V,observaciones:K.target.value}),placeholder:"Observaciones...",className:R+" min-h-[40px]",rows:2})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&o.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[o.jsx(wg,{size:16})," Cancelar"]}),o.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?o.jsx($d,{size:16}):o.jsx(Nl,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[o.jsx(Mte,{size:18})," Excel"]}),o.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[o.jsx(Ld,{size:18})," PDF"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(F,{icon:o.jsx(k5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),o.jsx(F,{icon:o.jsx(Ld,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:j.length,accent:"from-sky-500 to-cyan-500"}),o.jsx(F,{icon:o.jsx(O_,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),o.jsx(F,{icon:o.jsx(ac,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(ee=r[0])!=null&&ee.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[o.jsx("div",{className:"xl:col-span-3",children:o.jsx(L,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:o.jsx(KEe,{size:18}),children:o.jsx(M,{})})}),o.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:o.jsx(L,{title:"Uso por máquina (horas)",icon:o.jsx(Mu,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:o.jsx("div",{className:"flex gap-2 items-center",children:P(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:o.jsx("div",{className:"h-[320px] w-full",children:o.jsx(lh,{width:"100%",height:"100%",children:o.jsxs(k2,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[o.jsx(S2,{strokeDasharray:"3 3"}),o.jsx(Fg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),o.jsx(Og,{}),o.jsx(oh,{}),o.jsx(lb,{}),o.jsx(B1,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),o.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:o.jsxs(L,{title:"Administrar máquinas",icon:o.jsx(k5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[o.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[o.jsx("input",{value:d.nombre,onChange:V=>A({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:R+" md:col-span-2"}),o.jsxs("select",{value:d.especialidad,onChange:V=>A({...d,especialidad:V.target.value}),className:R+" md:col-span-2",children:[o.jsx("option",{value:"Industrial",children:"Industrial"}),o.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),o.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?o.jsx($d,{size:16}):o.jsx(Nl,{size:16}),h?"Guardar":"Agregar"]})]}),o.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>o.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),o.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{m(V),A(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:o.jsx(NF,{size:16,className:"text-blue-600"})}),o.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:o.jsx(vi,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),o.jsx("div",{className:"xl:col-span-2 order-3",children:o.jsxs(L,{title:"Historial de uso",icon:o.jsx(Ld,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(tk,{size:16,className:"text-slate-600"})}),children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[o.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:R,placeholder:"Fecha"}),o.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:R,children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),_s.map(V=>o.jsx("option",{children:V},V))]}),o.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:R,children:[o.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>o.jsx("option",{value:V.id,children:V.nombre},V.id))]}),o.jsxs("div",{className:"relative",children:[o.jsx(sE,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),o.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:R+" pl-9"})]})]}),o.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),o.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),o.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[j.map(V=>{var q;return o.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((q=k.get(V.maquinaId))==null?void 0:q.nombre)||"N/A"}),o.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",o.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),o.jsxs("td",{className:"px-3 py-2 text-center",children:[o.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:o.jsx(NF,{size:16,className:"text-blue-600"})}),o.jsx("button",{onClick:()=>_(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:o.jsx(vi,{size:16,className:"text-red-600"})})]})]},V.id)}),j.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Bl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Bl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Ott={},NW=e=>{let t;const r=new Set,n=(d,A)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=A??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Ott?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Dtt=e=>e?NW(e):NW,{useDebugValue:Ptt}=at,{useSyncExternalStoreWithSelector:Rtt}=ZDe,Ltt=e=>e;function tue(e,t=Ltt,r){const n=Rtt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ptt(n),n}const _W=(e,t)=>{const r=Dtt(e),n=(a,s=t)=>tue(r,a,s);return Object.assign(n,r),n},Mtt=(e,t)=>e?_W(e,t):_W;function ll(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Utt={value:()=>{}};function lj(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new R5(r)}function R5(e){this._=e}function Qtt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}R5.prototype=lj.prototype={constructor:R5,on:function(e,t){var r=this._,n=Qtt(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Htt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=SW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=SW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new R5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Htt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function SW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Utt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var JO="http://www.w3.org/1999/xhtml";const kW={svg:"http://www.w3.org/2000/svg",xhtml:JO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cj(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),kW.hasOwnProperty(t)?{space:kW[t],local:e}:e}function Vtt(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===JO&&t.documentElement.namespaceURI===JO?t.createElement(e):t.createElementNS(r,e)}}function ztt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rue(e){var t=cj(e);return(t.local?ztt:Vtt)(t)}function $tt(){}function OM(e){return e==null?$tt:function(){return this.querySelector(e)}}function Gtt(e){typeof e!="function"&&(e=OM(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Jc(n,this._parents)}function Ktt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qtt(){return[]}function nue(e){return e==null?qtt:function(){return this.querySelectorAll(e)}}function Wtt(e){return function(){return Ktt(e.apply(this,arguments))}}function Xtt(e){typeof e=="function"?e=Wtt(e):e=nue(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new Jc(n,a)}function aue(e){return function(){return this.matches(e)}}function sue(e){return function(t){return t.matches(e)}}var Ytt=Array.prototype.find;function Jtt(e){return function(){return Ytt.call(this.children,e)}}function Ztt(){return this.firstElementChild}function ert(e){return this.select(e==null?Ztt:Jtt(typeof e=="function"?e:sue(e)))}var trt=Array.prototype.filter;function rrt(){return Array.from(this.children)}function nrt(e){return function(){return trt.call(this.children,e)}}function art(e){return this.selectAll(e==null?rrt:nrt(typeof e=="function"?e:sue(e)))}function srt(e){typeof e!="function"&&(e=aue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Jc(n,this._parents)}function iue(e){return new Array(e.length)}function irt(){return new Jc(this._enter||this._groups.map(iue),this._parents)}function QS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}QS.prototype={constructor:QS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ort(e){return function(){return e}}function lrt(e,t,r,n,a,s){for(var i=0,l,c=t.length,u=s.length;i<u;++i)(l=t[i])?(l.__data__=s[i],n[i]=l):r[i]=new QS(e,s[i]);for(;i<c;++i)(l=t[i])&&(a[i]=l)}function crt(e,t,r,n,a,s,i){var l,c,u=new Map,d=t.length,A=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=i.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<A;++l)m=i.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new QS(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(a[l]=c)}function urt(e){return e.__data__}function drt(e,t){if(!arguments.length)return Array.from(this,urt);var r=t?crt:lrt,n=this._parents,a=this._groups;typeof e!="function"&&(e=ort(e));for(var s=a.length,i=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],A=a[u],h=A.length,m=Art(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=i[u]=new Array(g),y=c[u]=new Array(h);r(d,A,x,v,y,m,t);for(var w=0,_=0,j,k;w<g;++w)if(j=x[w]){for(w>=_&&(_=w+1);!(k=v[_])&&++_<g;);j._next=k||null}}return i=new Jc(i,n),i._enter=l,i._exit=c,i}function Art(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function frt(){return new Jc(this._exit||this._groups.map(iue),this._parents)}function hrt(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function mrt(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),l=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],A=u.length,h=l[c]=new Array(A),m,g=0;g<A;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)l[c]=r[c];return new Jc(l,this._parents)}function prt(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function grt(e){e||(e=xrt);function t(A,h){return A&&h?e(A.__data__,h.__data__):!A-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],l=i.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Jc(a,this._parents).order()}function xrt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vrt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function brt(){return Array.from(this)}function yrt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function wrt(){let e=0;for(const t of this)++e;return e}function Ert(){return!this.node()}function Crt(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,l;s<i;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Nrt(e){return function(){this.removeAttribute(e)}}function _rt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Srt(e,t){return function(){this.setAttribute(e,t)}}function krt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jrt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Brt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Trt(e,t){var r=cj(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?_rt:Nrt:typeof t=="function"?r.local?Brt:jrt:r.local?krt:Srt)(r,t))}function oue(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Irt(e){return function(){this.style.removeProperty(e)}}function Frt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Ort(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Drt(e,t,r){return arguments.length>1?this.each((t==null?Irt:typeof t=="function"?Ort:Frt)(e,t,r??"")):D1(this.node(),e)}function D1(e,t){return e.style.getPropertyValue(t)||oue(e).getComputedStyle(e,null).getPropertyValue(t)}function Prt(e){return function(){delete this[e]}}function Rrt(e,t){return function(){this[e]=t}}function Lrt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Mrt(e,t){return arguments.length>1?this.each((t==null?Prt:typeof t=="function"?Lrt:Rrt)(e,t)):this.node()[e]}function lue(e){return e.trim().split(/^|\s+/)}function DM(e){return e.classList||new cue(e)}function cue(e){this._node=e,this._names=lue(e.getAttribute("class")||"")}cue.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function uue(e,t){for(var r=DM(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function due(e,t){for(var r=DM(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Urt(e){return function(){uue(this,e)}}function Qrt(e){return function(){due(this,e)}}function Hrt(e,t){return function(){(t.apply(this,arguments)?uue:due)(this,e)}}function Vrt(e,t){var r=lue(e+"");if(arguments.length<2){for(var n=DM(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?Hrt:t?Urt:Qrt)(r,t))}function zrt(){this.textContent=""}function $rt(e){return function(){this.textContent=e}}function Grt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Krt(e){return arguments.length?this.each(e==null?zrt:(typeof e=="function"?Grt:$rt)(e)):this.node().textContent}function qrt(){this.innerHTML=""}function Wrt(e){return function(){this.innerHTML=e}}function Xrt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Yrt(e){return arguments.length?this.each(e==null?qrt:(typeof e=="function"?Xrt:Wrt)(e)):this.node().innerHTML}function Jrt(){this.nextSibling&&this.parentNode.appendChild(this)}function Zrt(){return this.each(Jrt)}function ent(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tnt(){return this.each(ent)}function rnt(e){var t=typeof e=="function"?e:rue(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nnt(){return null}function ant(e,t){var r=typeof e=="function"?e:rue(e),n=t==null?nnt:typeof t=="function"?t:OM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function snt(){var e=this.parentNode;e&&e.removeChild(this)}function int(){return this.each(snt)}function ont(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lnt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cnt(e){return this.select(e?lnt:ont)}function unt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dnt(e){return function(t){e.call(this,t,this.__data__)}}function Ant(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function fnt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function hnt(e,t,r){return function(){var n=this.__on,a,s=dnt(t);if(n){for(var i=0,l=n.length;i<l;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function mnt(e,t,r){var n=Ant(e+""),a,s=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?hnt:fnt,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function Aue(e,t,r){var n=oue(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function pnt(e,t){return function(){return Aue(this,e,t)}}function gnt(e,t){return function(){return Aue(this,e,t.apply(this,arguments))}}function xnt(e,t){return this.each((typeof t=="function"?gnt:pnt)(e,t))}function*vnt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var fue=[null];function Jc(e,t){this._groups=e,this._parents=t}function DE(){return new Jc([[document.documentElement]],fue)}function bnt(){return this}Jc.prototype=DE.prototype={constructor:Jc,select:Gtt,selectAll:Xtt,selectChild:ert,selectChildren:art,filter:srt,data:drt,enter:irt,exit:frt,join:hrt,merge:mrt,selection:bnt,order:prt,sort:grt,call:vrt,nodes:brt,node:yrt,size:wrt,empty:Ert,each:Crt,attr:Trt,style:Drt,property:Mrt,classed:Vrt,text:Krt,html:Yrt,raise:Zrt,lower:tnt,append:rnt,insert:ant,remove:int,clone:cnt,datum:unt,on:mnt,dispatch:xnt,[Symbol.iterator]:vnt};function Ru(e){return typeof e=="string"?new Jc([[document.querySelector(e)]],[document.documentElement]):new Jc([[e]],fue)}function ynt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function RA(e,t){if(e=ynt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const wnt={passive:!1},F2={capture:!0,passive:!1};function KI(e){e.stopImmediatePropagation()}function Xv(e){e.preventDefault(),e.stopImmediatePropagation()}function hue(e){var t=e.document.documentElement,r=Ru(e).on("dragstart.drag",Xv,F2);"onselectstart"in t?r.on("selectstart.drag",Xv,F2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mue(e,t){var r=e.document.documentElement,n=Ru(e).on("dragstart.drag",null);t&&(n.on("click.drag",Xv,F2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const IN=e=>()=>e;function ZO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}ZO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ent(e){return!e.ctrlKey&&!e.button}function Cnt(){return this.parentNode}function Nnt(e,t){return t??{x:e.x,y:e.y}}function _nt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Snt(){var e=Ent,t=Cnt,r=Nnt,n=_nt,a={},s=lj("start","drag","end"),i=0,l,c,u,d,A=0;function h(j){j.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,wnt).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(j,k){if(!(d||!e.call(this,j,k))){var I=_(this,t.call(this,j,k),j,k,"mouse");I&&(Ru(j.view).on("mousemove.drag",g,F2).on("mouseup.drag",x,F2),hue(j.view),KI(j),u=!1,l=j.clientX,c=j.clientY,I("start",j))}}function g(j){if(Xv(j),!u){var k=j.clientX-l,I=j.clientY-c;u=k*k+I*I>A}a.mouse("drag",j)}function x(j){Ru(j.view).on("mousemove.drag mouseup.drag",null),mue(j.view,u),Xv(j),a.mouse("end",j)}function v(j,k){if(e.call(this,j,k)){var I=j.changedTouches,E=t.call(this,j,k),S=I.length,B,R;for(B=0;B<S;++B)(R=_(this,E,j,k,I[B].identifier,I[B]))&&(KI(j),R("start",j,I[B]))}}function y(j){var k=j.changedTouches,I=k.length,E,S;for(E=0;E<I;++E)(S=a[k[E].identifier])&&(Xv(j),S("drag",j,k[E]))}function w(j){var k=j.changedTouches,I=k.length,E,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<I;++E)(S=a[k[E].identifier])&&(KI(j),S("end",j,k[E]))}function _(j,k,I,E,S,B){var R=s.copy(),P=RA(B||I,k),F,L,M;if((M=r.call(j,new ZO("beforestart",{sourceEvent:I,target:h,identifier:S,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:R}),E))!=null)return F=M.x-P[0]||0,L=M.y-P[1]||0,function ee(V,q,K){var X=P,Z;switch(V){case"start":a[S]=ee,Z=i++;break;case"end":delete a[S],--i;case"drag":P=RA(K||q,k),Z=i;break}R.call(V,j,new ZO(V,{sourceEvent:q,subject:M,target:h,identifier:S,active:Z,x:P[0]+F,y:P[1]+L,dx:P[0]-X[0],dy:P[1]-X[1],dispatch:R}),E)}}return h.filter=function(j){return arguments.length?(e=typeof j=="function"?j:IN(!!j),h):e},h.container=function(j){return arguments.length?(t=typeof j=="function"?j:IN(j),h):t},h.subject=function(j){return arguments.length?(r=typeof j=="function"?j:IN(j),h):r},h.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:IN(!!j),h):n},h.on=function(){var j=s.on.apply(s,arguments);return j===s?h:j},h.clickDistance=function(j){return arguments.length?(A=(j=+j)*j,h):Math.sqrt(A)},h}var P1=0,tw=0,Sy=0,pue=1e3,HS,rw,VS=0,Rg=0,uj=0,O2=typeof performance=="object"&&performance.now?performance:Date,gue=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function PM(){return Rg||(gue(knt),Rg=O2.now()+uj)}function knt(){Rg=0}function zS(){this._call=this._time=this._next=null}zS.prototype=xue.prototype={constructor:zS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?PM():+r)+(t==null?0:+t),!this._next&&rw!==this&&(rw?rw._next=this:HS=this,rw=this),this._call=e,this._time=r,eD()},stop:function(){this._call&&(this._call=null,this._time=1/0,eD())}};function xue(e,t,r){var n=new zS;return n.restart(e,t,r),n}function jnt(){PM(),++P1;for(var e=HS,t;e;)(t=Rg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--P1}function jW(){Rg=(VS=O2.now())+uj,P1=tw=0;try{jnt()}finally{P1=0,Tnt(),Rg=0}}function Bnt(){var e=O2.now(),t=e-VS;t>pue&&(uj-=t,VS=e)}function Tnt(){for(var e,t=HS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:HS=r);rw=e,eD(n)}function eD(e){if(!P1){tw&&(tw=clearTimeout(tw));var t=e-Rg;t>24?(e<1/0&&(tw=setTimeout(jW,e-O2.now()-uj)),Sy&&(Sy=clearInterval(Sy))):(Sy||(VS=O2.now(),Sy=setInterval(Bnt,pue)),P1=1,gue(jW))}}function BW(e,t,r){var n=new zS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Int=lj("start","end","cancel","interrupt"),Fnt=[],vue=0,TW=1,tD=2,L5=3,IW=4,rD=5,M5=6;function dj(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;Ont(e,r,{name:t,index:n,group:a,on:Int,tween:Fnt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vue})}function RM(e,t){var r=Yd(e,t);if(r.state>vue)throw new Error("too late; already scheduled");return r}function ff(e,t){var r=Yd(e,t);if(r.state>L5)throw new Error("too late; already running");return r}function Yd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Ont(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=xue(s,0,r.time);function s(u){r.state=TW,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,A,h,m;if(r.state!==TW)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===L5)return BW(i);m.state===IW?(m.state=M5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=M5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(BW(function(){r.state===L5&&(r.state=IW,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=tD,r.on.call("start",e,e.__data__,r.index,r.group),r.state===tD){for(r.state=L5,a=new Array(h=r.tween.length),d=0,A=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++A]=m);a.length=A+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=rD,1),A=-1,h=a.length;++A<h;)a[A].call(e,d);r.state===rD&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=M5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function U5(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>tD&&n.state<rD,n.state=M5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function Dnt(e){return this.each(function(){U5(this,e)})}function Pnt(e,t){var r,n;return function(){var a=ff(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,l=n.length;i<l;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Rnt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=ff(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Lnt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Yd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?Pnt:Rnt)(r,e,t))}function LM(e,t,r){var n=e._id;return e.each(function(){var a=ff(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Yd(a,n).value[t]}}function bue(e,t){var r;return(typeof t=="number"?Sd:t instanceof Tg?gS:(r=Tg(t))?(t=r,gS):Qse)(e,t)}function Mnt(e){return function(){this.removeAttribute(e)}}function Unt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qnt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function Hnt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function Vnt(e,t,r){var n,a,s;return function(){var i,l=r(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l)))}}function znt(e,t,r){var n,a,s;return function(){var i,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l)))}}function $nt(e,t){var r=cj(e),n=r==="transform"?wMe:bue;return this.attrTween(e,typeof t=="function"?(r.local?znt:Vnt)(r,n,LM(this,"attr."+e,t)):t==null?(r.local?Unt:Mnt)(r):(r.local?Hnt:Qnt)(r,n,t))}function Gnt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Knt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function qnt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Knt(e,s)),r}return a._value=t,a}function Wnt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Gnt(e,s)),r}return a._value=t,a}function Xnt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=cj(e);return this.tween(r,(n.local?qnt:Wnt)(n,t))}function Ynt(e,t){return function(){RM(this,e).delay=+t.apply(this,arguments)}}function Jnt(e,t){return t=+t,function(){RM(this,e).delay=t}}function Znt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ynt:Jnt)(t,e)):Yd(this.node(),t).delay}function eat(e,t){return function(){ff(this,e).duration=+t.apply(this,arguments)}}function tat(e,t){return t=+t,function(){ff(this,e).duration=t}}function rat(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eat:tat)(t,e)):Yd(this.node(),t).duration}function nat(e,t){if(typeof t!="function")throw new Error;return function(){ff(this,e).ease=t}}function aat(e){var t=this._id;return arguments.length?this.each(nat(t,e)):Yd(this.node(),t).ease}function sat(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ff(this,e).ease=r}}function iat(e){if(typeof e!="function")throw new Error;return this.each(sat(this._id,e))}function oat(e){typeof e!="function"&&(e=aue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Ph(n,this._parents,this._name,this._id)}function lat(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,A=i[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(A[m]=h);for(;l<n;++l)i[l]=t[l];return new Ph(i,this._parents,this._name,this._id)}function cat(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function uat(e,t,r){var n,a,s=cat(t)?RM:ff;return function(){var i=s(this,e),l=i.on;l!==n&&(a=(n=l).copy()).on(t,r),i.on=a}}function dat(e,t){var r=this._id;return arguments.length<2?Yd(this.node(),r).on.on(e):this.each(uat(r,e,t))}function Aat(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function fat(){return this.on("end.remove",Aat(this._id))}function hat(e){var t=this._name,r=this._id;typeof e!="function"&&(e=OM(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var l=n[i],c=l.length,u=s[i]=new Array(c),d,A,h=0;h<c;++h)(d=l[h])&&(A=e.call(d,d.__data__,h,l))&&("__data__"in d&&(A.__data__=d.__data__),u[h]=A,dj(u[h],t,r,h,u,Yd(d,r)));return new Ph(s,this._parents,t,r)}function mat(e){var t=this._name,r=this._id;typeof e!="function"&&(e=nue(e));for(var n=this._groups,a=n.length,s=[],i=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,A=0;A<u;++A)if(d=c[A]){for(var h=e.call(d,d.__data__,A,c),m,g=Yd(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&dj(m,t,r,x,h,g);s.push(h),i.push(d)}return new Ph(s,i,t,r)}var pat=DE.prototype.constructor;function gat(){return new pat(this._groups,this._parents)}function xat(e,t){var r,n,a;return function(){var s=D1(this,e),i=(this.style.removeProperty(e),D1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function yue(e){return function(){this.style.removeProperty(e)}}function vat(e,t,r){var n,a=r+"",s;return function(){var i=D1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function bat(e,t,r){var n,a,s;return function(){var i=D1(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),D1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l))}}function yat(e,t){var r,n,a,s="style."+t,i="end."+s,l;return function(){var c=ff(this,e),u=c.on,d=c.value[s]==null?l||(l=yue(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function wat(e,t,r){var n=(e+="")=="transform"?yMe:bue;return t==null?this.styleTween(e,xat(e,n)).on("end.style."+e,yue(e)):typeof t=="function"?this.styleTween(e,bat(e,n,LM(this,"style."+e,t))).each(yat(this._id,e)):this.styleTween(e,vat(e,n,t),r).on("end.style."+e,null)}function Eat(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Cat(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&Eat(e,i,r)),n}return s._value=t,s}function Nat(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Cat(e,t,r??""))}function _at(e){return function(){this.textContent=e}}function Sat(e){return function(){var t=e(this);this.textContent=t??""}}function kat(e){return this.tween("text",typeof e=="function"?Sat(LM(this,"text",e)):_at(e==null?"":e+""))}function jat(e){return function(t){this.textContent=e.call(this,t)}}function Bat(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&jat(a)),t}return n._value=e,n}function Tat(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bat(e))}function Iat(){for(var e=this._name,t=this._id,r=wue(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=Yd(c,t);dj(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ph(n,this._parents,e,r)}function Fat(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var l={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=ff(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var Oat=0;function Ph(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function wue(){return++Oat}var Gf=DE.prototype;Ph.prototype={constructor:Ph,select:hat,selectAll:mat,selectChild:Gf.selectChild,selectChildren:Gf.selectChildren,filter:oat,merge:lat,selection:gat,transition:Iat,call:Gf.call,nodes:Gf.nodes,node:Gf.node,size:Gf.size,empty:Gf.empty,each:Gf.each,on:dat,attr:$nt,attrTween:Xnt,style:wat,styleTween:Nat,text:kat,textTween:Tat,remove:fat,tween:Lnt,delay:Znt,duration:rat,ease:aat,easeVarying:iat,end:Fat,[Symbol.iterator]:Gf[Symbol.iterator]};function Dat(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Pat={time:null,delay:0,duration:250,ease:Dat};function Rat(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Lat(e){var t,r;e instanceof Ph?(t=e._id,e=e._name):(t=wue(),(r=Pat).time=PM(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&dj(c,e,t,u,i,r||Rat(c,t));return new Ph(n,this._parents,e,t)}DE.prototype.interrupt=Dnt;DE.prototype.transition=Lat;const FN=e=>()=>e;function Mat(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function uh(e,t,r){this.k=e,this.x=t,this.y=r}uh.prototype={constructor:uh,scale:function(e){return e===1?this:new uh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new uh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mm=new uh(1,0,0);uh.prototype;function qI(e){e.stopImmediatePropagation()}function ky(e){e.preventDefault(),e.stopImmediatePropagation()}function Uat(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qat(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function FW(){return this.__zoom||mm}function Hat(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vat(){return navigator.maxTouchPoints||"ontouchstart"in this}function zat(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function $at(){var e=Uat,t=Qat,r=zat,n=Hat,a=Vat,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=_Me,u=lj("start","zoom","end"),d,A,h,m=500,g=150,x=0,v=10;function y(M){M.property("__zoom",FW).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(M,ee,V,q){var K=M.selection?M.selection():M;K.property("__zoom",FW),M!==K?k(M,ee,V,q):K.interrupt().each(function(){I(this,arguments).event(q).start().zoom(null,typeof ee=="function"?ee.apply(this,arguments):ee).end()})},y.scaleBy=function(M,ee,V,q){y.scaleTo(M,function(){var K=this.__zoom.k,X=typeof ee=="function"?ee.apply(this,arguments):ee;return K*X},V,q)},y.scaleTo=function(M,ee,V,q){y.transform(M,function(){var K=t.apply(this,arguments),X=this.__zoom,Z=V==null?j(K):typeof V=="function"?V.apply(this,arguments):V,G=X.invert(Z),D=typeof ee=="function"?ee.apply(this,arguments):ee;return r(_(w(X,D),Z,G),K,i)},V,q)},y.translateBy=function(M,ee,V,q){y.transform(M,function(){return r(this.__zoom.translate(typeof ee=="function"?ee.apply(this,arguments):ee,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,q)},y.translateTo=function(M,ee,V,q,K){y.transform(M,function(){var X=t.apply(this,arguments),Z=this.__zoom,G=q==null?j(X):typeof q=="function"?q.apply(this,arguments):q;return r(mm.translate(G[0],G[1]).scale(Z.k).translate(typeof ee=="function"?-ee.apply(this,arguments):-ee,typeof V=="function"?-V.apply(this,arguments):-V),X,i)},q,K)};function w(M,ee){return ee=Math.max(s[0],Math.min(s[1],ee)),ee===M.k?M:new uh(ee,M.x,M.y)}function _(M,ee,V){var q=ee[0]-V[0]*M.k,K=ee[1]-V[1]*M.k;return q===M.x&&K===M.y?M:new uh(M.k,q,K)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function k(M,ee,V,q){M.on("start.zoom",function(){I(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(q).end()}).tween("zoom",function(){var K=this,X=arguments,Z=I(K,X).event(q),G=t.apply(K,X),D=V==null?j(G):typeof V=="function"?V.apply(K,X):V,U=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),z=K.__zoom,J=typeof ee=="function"?ee.apply(K,X):ee,re=c(z.invert(D).concat(U/z.k),J.invert(D).concat(U/J.k));return function(oe){if(oe===1)oe=J;else{var se=re(oe),le=U/se[2];oe=new uh(le,D[0]-se[0]*le,D[1]-se[1]*le)}Z.zoom(null,oe)}})}function I(M,ee,V){return!V&&M.__zooming||new E(M,ee)}function E(M,ee){this.that=M,this.args=ee,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,ee),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,ee){return this.mouse&&M!=="mouse"&&(this.mouse[1]=ee.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=ee.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=ee.invert(this.touch1[0])),this.that.__zoom=ee,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var ee=Ru(this.that).datum();u.call(M,this.that,new Mat(M,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),ee)}};function S(M,...ee){if(!e.apply(this,arguments))return;var V=I(this,ee).event(M),q=this.__zoom,K=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,n.apply(this,arguments)))),X=RA(M);if(V.wheel)(V.mouse[0][0]!==X[0]||V.mouse[0][1]!==X[1])&&(V.mouse[1]=q.invert(V.mouse[0]=X)),clearTimeout(V.wheel);else{if(q.k===K)return;V.mouse=[X,q.invert(X)],U5(this),V.start()}ky(M),V.wheel=setTimeout(Z,g),V.zoom("mouse",r(_(w(q,K),V.mouse[0],V.mouse[1]),V.extent,i));function Z(){V.wheel=null,V.end()}}function B(M,...ee){if(h||!e.apply(this,arguments))return;var V=M.currentTarget,q=I(this,ee,!0).event(M),K=Ru(M.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",U,!0),X=RA(M,V),Z=M.clientX,G=M.clientY;hue(M.view),qI(M),q.mouse=[X,this.__zoom.invert(X)],U5(this),q.start();function D(z){if(ky(z),!q.moved){var J=z.clientX-Z,re=z.clientY-G;q.moved=J*J+re*re>x}q.event(z).zoom("mouse",r(_(q.that.__zoom,q.mouse[0]=RA(z,V),q.mouse[1]),q.extent,i))}function U(z){K.on("mousemove.zoom mouseup.zoom",null),mue(z.view,q.moved),ky(z),q.event(z).end()}}function R(M,...ee){if(e.apply(this,arguments)){var V=this.__zoom,q=RA(M.changedTouches?M.changedTouches[0]:M,this),K=V.invert(q),X=V.k*(M.shiftKey?.5:2),Z=r(_(w(V,X),q,K),t.apply(this,ee),i);ky(M),l>0?Ru(this).transition().duration(l).call(k,Z,q,M):Ru(this).call(y.transform,Z,q,M)}}function P(M,...ee){if(e.apply(this,arguments)){var V=M.touches,q=V.length,K=I(this,ee,M.changedTouches.length===q).event(M),X,Z,G,D;for(qI(M),Z=0;Z<q;++Z)G=V[Z],D=RA(G,this),D=[D,this.__zoom.invert(D),G.identifier],K.touch0?!K.touch1&&K.touch0[2]!==D[2]&&(K.touch1=D,K.taps=0):(K.touch0=D,X=!0,K.taps=1+!!d);d&&(d=clearTimeout(d)),X&&(K.taps<2&&(A=D[0],d=setTimeout(function(){d=null},m)),U5(this),K.start())}}function F(M,...ee){if(this.__zooming){var V=I(this,ee).event(M),q=M.changedTouches,K=q.length,X,Z,G,D;for(ky(M),X=0;X<K;++X)Z=q[X],G=RA(Z,this),V.touch0&&V.touch0[2]===Z.identifier?V.touch0[0]=G:V.touch1&&V.touch1[2]===Z.identifier&&(V.touch1[0]=G);if(Z=V.that.__zoom,V.touch1){var U=V.touch0[0],z=V.touch0[1],J=V.touch1[0],re=V.touch1[1],oe=(oe=J[0]-U[0])*oe+(oe=J[1]-U[1])*oe,se=(se=re[0]-z[0])*se+(se=re[1]-z[1])*se;Z=w(Z,Math.sqrt(oe/se)),G=[(U[0]+J[0])/2,(U[1]+J[1])/2],D=[(z[0]+re[0])/2,(z[1]+re[1])/2]}else if(V.touch0)G=V.touch0[0],D=V.touch0[1];else return;V.zoom("touch",r(_(Z,G,D),V.extent,i))}}function L(M,...ee){if(this.__zooming){var V=I(this,ee).event(M),q=M.changedTouches,K=q.length,X,Z;for(qI(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),X=0;X<K;++X)Z=q[X],V.touch0&&V.touch0[2]===Z.identifier?delete V.touch0:V.touch1&&V.touch1[2]===Z.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(Z=RA(Z,this),Math.hypot(A[0]-Z[0],A[1]-Z[1])<v)){var G=Ru(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:FN(+M),y):n},y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:FN(!!M),y):e},y.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:FN(!!M),y):a},y.extent=function(M){return arguments.length?(t=typeof M=="function"?M:FN([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),y):t},y.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],y):[s[0],s[1]]},y.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(M){return arguments.length?(r=M,y):r},y.duration=function(M){return arguments.length?(l=+M,y):l},y.interpolate=function(M){return arguments.length?(c=M,y):c},y.on=function(){var M=u.on.apply(u,arguments);return M===u?y:M},y.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,y):Math.sqrt(x)},y.tapDistance=function(M){return arguments.length?(v=+M,y):v},y}const Aj=C.createContext(null),Gat=Aj.Provider,Rh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Eue=Rh.error001();function ds(e,t){const r=C.useContext(Aj);if(r===null)throw new Error(Eue);return tue(r,e,t)}const so=()=>{const e=C.useContext(Aj);if(e===null)throw new Error(Eue);return C.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Kat=e=>e.userSelectionActive?"none":"all";function Cue({position:e,children:t,className:r,style:n,...a}){const s=ds(Kat),i=`${e}`.split("-");return at.createElement("div",{className:Bl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function qat({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:at.createElement(Cue,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},at.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Wat=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const A=C.useRef(null),[h,m]=C.useState({x:0,y:0,width:0,height:0}),g=Bl(["react-flow__edge-textwrapper",u]);return C.useEffect(()=>{if(A.current){const x=A.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:at.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&at.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),at.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:A,style:n},r),c)};var Xat=C.memo(Wat);const MM=e=>({width:e.offsetWidth,height:e.offsetHeight}),R1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),UM=(e={x:0,y:0},t)=>({x:R1(e.x,t[0][0],t[1][0]),y:R1(e.y,t[0][1],t[1][1])}),OW=(e,t,r)=>e<t?R1(Math.abs(e-t),1,50)/50:e>r?-R1(Math.abs(e-r),1,50)/50:0,Nue=(e,t)=>{const r=OW(e.x,35,t.width-35)*20,n=OW(e.y,35,t.height-35)*20;return[r,n]},_ue=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Yat=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),QM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Jat=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),DW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),nD=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Zat=e=>Qu(e.width)&&Qu(e.height)&&Qu(e.x)&&Qu(e.y),Qu=e=>!isNaN(e)&&isFinite(e),Bs=Symbol.for("internals"),Sue=["Enter"," ","Escape"],est=(e,t)=>{},tst=e=>"nativeEvent"in e;function aD(e){var a,s;const t=tst(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const kue=e=>"clientX"in e,pm=(e,t)=>{var s,i;const r=kue(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},$S=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},PE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:A,markerStart:h,interactionWidth:m=20})=>at.createElement(at.Fragment,null,at.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:A,markerStart:h}),m&&at.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&Qu(r)&&Qu(n)?at.createElement(Xat,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);PE.displayName="BaseEdge";function jy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function jue({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,l=n<t?n+i:n-i;return[s,l,a,i]}function Bue({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:l}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),A=Math.abs(u-t);return[c,u,d,A]}var Lg;(function(e){e.Strict="strict",e.Loose="loose"})(Lg||(Lg={}));var Wp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Wp||(Wp={}));var D2;(function(e){e.Partial="partial",e.Full="full"})(D2||(D2={}));var Y0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Y0||(Y0={}));var GS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(GS||(GS={}));var Nr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Nr||(Nr={}));function PW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Nr.Left||e===Nr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Tue({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top}){const[i,l]=PW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=PW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,A,h,m]=Bue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${n},${a}`,d,A,h,m]}const HM=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Nr.Bottom,targetPosition:s=Nr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=Tue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return at.createElement(PE,{path:v,labelX:y,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});HM.displayName="SimpleBezierEdge";const RW={[Nr.Left]:{x:-1,y:0},[Nr.Right]:{x:1,y:0},[Nr.Top]:{x:0,y:-1},[Nr.Bottom]:{x:0,y:1}},rst=({source:e,sourcePosition:t=Nr.Bottom,target:r})=>t===Nr.Left||t===Nr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},LW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nst({source:e,sourcePosition:t=Nr.Bottom,target:r,targetPosition:n=Nr.Top,center:a,offset:s}){const i=RW[t],l=RW[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=rst({source:c,sourcePosition:t,target:u}),A=d.x!==0?"x":"y",h=d[A];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,_,j,k]=jue({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[A]*l[A]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],S=[{x:c.x,y:x},{x:u.x,y:x}];i[A]===h?m=A==="x"?E:S:m=A==="x"?S:E}else{const E=[{x:c.x,y:u.y}],S=[{x:u.x,y:c.y}];if(A==="x"?m=i.x===h?S:E:m=i.y===h?E:S,t===n){const L=Math.abs(e[A]-r[A]);if(L<=s){const M=Math.min(s-1,s-L);i[A]===h?v[A]=(c[A]>e[A]?-1:1)*M:y[A]=(u[A]>r[A]?-1:1)*M}}if(t!==n){const L=A==="x"?"y":"x",M=i[A]===l[L],ee=c[L]>u[L],V=c[L]<u[L];(i[A]===1&&(!M&&ee||M&&V)||i[A]!==1&&(!M&&V||M&&ee))&&(m=A==="x"?E:S)}const B={x:c.x+v.x,y:c.y+v.y},R={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(B.x-m[0].x),Math.abs(R.x-m[0].x)),F=Math.max(Math.abs(B.y-m[0].y),Math.abs(R.y-m[0].y));P>=F?(g=(B.x+R.x)/2,x=m[0].y):(g=m[0].x,x=(B.y+R.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,j,k]}function ast(e,t,r,n){const a=Math.min(LW(e,t)/2,LW(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*l},${i}`}function sD({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,A,h,m,g]=nst({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let _="";return w>0&&w<d.length-1?_=ast(d[w-1],y,d[w+1],i):_=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=_,v},""),A,h,m,g]}const fj=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:A=Nr.Bottom,targetPosition:h=Nr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=sD({sourceX:e,sourceY:t,sourcePosition:A,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return at.createElement(PE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});fj.displayName="SmoothStepEdge";const VM=C.memo(e=>{var t;return at.createElement(fj,{...e,pathOptions:C.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});VM.displayName="StepEdge";function sst({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,l]=jue({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,l]}const zM=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:A,markerStart:h,interactionWidth:m})=>{const[g,x,v]=sst({sourceX:e,sourceY:t,targetX:r,targetY:n});return at.createElement(PE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:A,markerStart:h,interactionWidth:m})});zM.displayName="StraightEdge";function ON(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function MW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Nr.Left:return[t-ON(t-n,s),r];case Nr.Right:return[t+ON(n-t,s),r];case Nr.Top:return[t,r-ON(r-a,s)];case Nr.Bottom:return[t,r+ON(a-r,s)]}}function Iue({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top,curvature:i=.25}){const[l,c]=MW({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=MW({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[A,h,m,g]=Bue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,A,h,m,g]}const KS=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Nr.Bottom,targetPosition:s=Nr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=Iue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return at.createElement(PE,{path:y,labelX:w,labelY:_,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});KS.displayName="BezierEdge";const $M=C.createContext(null),ist=$M.Provider;$M.Consumer;const ost=()=>C.useContext($M),lst=e=>"id"in e&&"source"in e&&"target"in e,cst=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,iD=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,ust=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),dst=(e,t)=>{if(!e.source||!e.target)return t;let r;return lst(e)?r={...e}:r={...e,id:cst(e)},ust(r,t)?t:t.concat(r)},oD=({x:e,y:t},[r,n,a],s,[i,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},Fue=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Yv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},GM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Yv(a,t).positionAbsolute;return Yat(n,QM({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Jat(r)},Oue=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:A,height:h,selectable:m=!0,hidden:g=!1}=d;if(i&&!m||g)return!1;const{positionAbsolute:x}=Yv(d,l),v={x:x.x,y:x.y,width:A||0,height:h||0},y=nD(c,v),w=typeof A>"u"||typeof h>"u"||A===null||h===null,_=s&&y>0,j=(A||0)*(h||0);(w||_||y>=j||d.dragging)&&u.push(d)}),u},Due=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Pue=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(i,l),u=R1(c,n,a),d=e.x+e.width/2,A=e.y+e.height/2,h=t/2-d*u,m=r/2-A*u;return{x:h,y:m,zoom:u}},Dp=(e,t=0)=>e.transition().duration(t);function UW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function Ast(e,t,r,n,a,s){const{x:i,y:l}=pm(e),u=t.elementsFromPoint(i,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=KM(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],A=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=A&&(x<A?d=[{handle:g,validHandleResult:v}]:x===A&&d.push({handle:g,validHandleResult:v}),A=x)}}),!d.length)return{handle:null,validHandleResult:Rue()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const fst={source:null,target:null,sourceHandle:null,targetHandle:null},Rue=()=>({handleDomNode:null,isValid:!1,connection:fst,endHandle:null});function Lue(e,t,r,n,a,s,i){const l=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Rue(),handleDomNode:c};if(c){const d=KM(void 0,c),A=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?A:r,sourceHandle:l?h:n,target:l?r:A,targetHandle:l?n:h};u.connection=x,m&&g&&(t===Lg.Strict?l&&d==="source"||!l&&d==="target":A!==r||h!==n)&&(u.endHandle={nodeId:A,handleId:h,type:d},u.isValid=s(x))}return u}function hst({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Bs]){const{handleBounds:i}=s[Bs];let l=[],c=[];i&&(l=UW(s,i,"source",`${t}-${r}-${n}`),c=UW(s,i,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function KM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function WI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function mst(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Mue({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=_ue(e.target),{connectionMode:A,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let _=0,j;const{x:k,y:I}=pm(e),E=d==null?void 0:d.elementFromPoint(k,I),S=KM(c,E),B=h==null?void 0:h.getBoundingClientRect();if(!B||!S)return;let R,P=pm(e,B),F=!1,L=null,M=!1,ee=null;const V=hst({nodes:y(),nodeId:r,handleId:t,handleType:S}),q=()=>{if(!m)return;const[Z,G]=Nue(P,B);v({x:Z,y:G}),_=requestAnimationFrame(q)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:S});function K(Z){const{transform:G}=s();P=pm(Z,B);const{handle:D,validHandleResult:U}=Ast(Z,d,oD(P,G,!1,[1,1]),g,V,z=>Lue(z,A,r,t,a?"target":"source",l,d));if(j=D,F||(q(),F=!0),ee=U.handleDomNode,L=U.connection,M=U.isValid,i({connectionPosition:j&&M?Fue({x:j.x,y:j.y},G):P,connectionStatus:mst(!!j,M),connectionEndHandle:U.endHandle}),!j&&!M&&!ee)return WI(R);L.source!==L.target&&ee&&(WI(R),R=ee,ee.classList.add("connecting","react-flow__handle-connecting"),ee.classList.toggle("valid",M),ee.classList.toggle("react-flow__handle-valid",M))}function X(Z){var G,D;(j||ee)&&L&&M&&(n==null||n(L)),(D=(G=s()).onConnectEnd)==null||D.call(G,Z),c&&(u==null||u(Z)),WI(R),w(),cancelAnimationFrame(_),F=!1,M=!1,L=null,ee=null,d.removeEventListener("mousemove",K),d.removeEventListener("mouseup",X),d.removeEventListener("touchmove",K),d.removeEventListener("touchend",X)}d.addEventListener("mousemove",K),d.addEventListener("mouseup",X),d.addEventListener("touchmove",K),d.addEventListener("touchend",X)}const QW=()=>!0,pst=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),gst=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Uue=C.forwardRef(({type:e="source",position:t=Nr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:A,...h},m)=>{var B,R;const g=i||null,x=e==="target",v=so(),y=ost(),{connectOnClick:w,noPanClassName:_}=ds(pst,ll),{connecting:j,clickConnecting:k}=ds(gst(y,g,e),ll);y||(R=(B=v.getState()).onError)==null||R.call(B,"010",Rh.error010());const I=P=>{const{defaultEdgeOptions:F,onConnect:L,hasDefaultEdges:M}=v.getState(),ee={...F,...P};if(M){const{edges:V,setEdges:q}=v.getState();q(dst(ee,V))}L==null||L(ee),l==null||l(ee)},E=P=>{if(!y)return;const F=kue(P);a&&(F&&P.button===0||!F)&&Mue({event:P,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||QW}),F?d==null||d(P):A==null||A(P)},S=P=>{const{onClickConnectStart:F,onClickConnectEnd:L,connectionClickStartHandle:M,connectionMode:ee,isValidConnection:V}=v.getState();if(!y||!M&&!a)return;if(!M){F==null||F(P,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const q=_ue(P.target),K=r||V||QW,{connection:X,isValid:Z}=Lue({nodeId:y,id:g,type:e},ee,M.nodeId,M.handleId||null,M.type,K,q);Z&&I(X),L==null||L(P),v.setState({connectionClickStartHandle:null})};return at.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Bl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:k,connectionindicator:n&&(a&&!j||s&&j)}]),onMouseDown:E,onTouchStart:E,onClick:w?S:void 0,ref:m,...h},c)});Uue.displayName="Handle";var L1=C.memo(Uue);const Que=({data:e,isConnectable:t,targetPosition:r=Nr.Top,sourcePosition:n=Nr.Bottom})=>at.createElement(at.Fragment,null,at.createElement(L1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,at.createElement(L1,{type:"source",position:n,isConnectable:t}));Que.displayName="DefaultNode";var lD=C.memo(Que);const Hue=({data:e,isConnectable:t,sourcePosition:r=Nr.Bottom})=>at.createElement(at.Fragment,null,e==null?void 0:e.label,at.createElement(L1,{type:"source",position:r,isConnectable:t}));Hue.displayName="InputNode";var Vue=C.memo(Hue);const zue=({data:e,isConnectable:t,targetPosition:r=Nr.Top})=>at.createElement(at.Fragment,null,at.createElement(L1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);zue.displayName="OutputNode";var $ue=C.memo(zue);const qM=()=>null;qM.displayName="GroupNode";const xst=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),DN=e=>e.id;function vst(e,t){return ll(e.selectedNodes.map(DN),t.selectedNodes.map(DN))&&ll(e.selectedEdges.map(DN),t.selectedEdges.map(DN))}const Gue=C.memo(({onSelectionChange:e})=>{const t=so(),{selectedNodes:r,selectedEdges:n}=ds(xst,vst);return C.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Gue.displayName="SelectionListener";const bst=e=>!!e.onSelectionChange;function yst({onSelectionChange:e}){const t=ds(bst);return e||t?at.createElement(Gue,{onSelectionChange:e}):null}const wst=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Gx(e,t){C.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function En(e,t,r){C.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Est=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:A,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:j,connectionMode:k,snapGrid:I,snapToGrid:E,translateExtent:S,connectOnClick:B,defaultEdgeOptions:R,fitView:P,fitViewOptions:F,onNodesDelete:L,onEdgesDelete:M,onNodeDrag:ee,onNodeDragStart:V,onNodeDragStop:q,onSelectionDrag:K,onSelectionDragStart:X,onSelectionDragStop:Z,noPanClassName:G,nodeOrigin:D,rfId:U,autoPanOnConnect:z,autoPanOnNodeDrag:J,onError:re,connectionRadius:oe,isValidConnection:se,nodeDragThreshold:le})=>{const{setNodes:ue,setEdges:ke,setDefaultNodesAndEdges:ae,setMinZoom:Ne,setMaxZoom:je,setTranslateExtent:_e,setNodeExtent:me,reset:Te}=ds(wst,ll),Le=so();return C.useEffect(()=>{const We=n==null?void 0:n.map(xe=>({...xe,...R}));return ae(r,We),()=>{Te()}},[]),En("defaultEdgeOptions",R,Le.setState),En("connectionMode",k,Le.setState),En("onConnect",a,Le.setState),En("onConnectStart",s,Le.setState),En("onConnectEnd",i,Le.setState),En("onClickConnectStart",l,Le.setState),En("onClickConnectEnd",c,Le.setState),En("nodesDraggable",u,Le.setState),En("nodesConnectable",d,Le.setState),En("nodesFocusable",A,Le.setState),En("edgesFocusable",h,Le.setState),En("edgesUpdatable",m,Le.setState),En("elementsSelectable",j,Le.setState),En("elevateNodesOnSelect",g,Le.setState),En("snapToGrid",E,Le.setState),En("snapGrid",I,Le.setState),En("onNodesChange",w,Le.setState),En("onEdgesChange",_,Le.setState),En("connectOnClick",B,Le.setState),En("fitViewOnInit",P,Le.setState),En("fitViewOnInitOptions",F,Le.setState),En("onNodesDelete",L,Le.setState),En("onEdgesDelete",M,Le.setState),En("onNodeDrag",ee,Le.setState),En("onNodeDragStart",V,Le.setState),En("onNodeDragStop",q,Le.setState),En("onSelectionDrag",K,Le.setState),En("onSelectionDragStart",X,Le.setState),En("onSelectionDragStop",Z,Le.setState),En("noPanClassName",G,Le.setState),En("nodeOrigin",D,Le.setState),En("rfId",U,Le.setState),En("autoPanOnConnect",z,Le.setState),En("autoPanOnNodeDrag",J,Le.setState),En("onError",re,Le.setState),En("connectionRadius",oe,Le.setState),En("isValidConnection",se,Le.setState),En("nodeDragThreshold",le,Le.setState),Gx(e,ue),Gx(t,ke),Gx(x,Ne),Gx(v,je),Gx(S,_e),Gx(y,me),null},HW={display:"none"},Cst={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Kue="react-flow__node-desc",que="react-flow__edge-desc",Nst="react-flow__aria-live",_st=e=>e.ariaLiveMessage;function Sst({rfId:e}){const t=ds(_st);return at.createElement("div",{id:`${Nst}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Cst},t)}function kst({rfId:e,disableKeyboardA11y:t}){return at.createElement(at.Fragment,null,at.createElement("div",{id:`${Kue}-${e}`,style:HW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),at.createElement("div",{id:`${que}-${e}`,style:HW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&at.createElement(Sst,{rfId:e}))}var P2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=C.useState(!1),a=C.useRef(!1),s=C.useRef(new Set([])),[i,l]=C.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(A=>typeof A=="string").map(A=>A.split("+")),d=u.reduce((A,h)=>A.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return C.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&aD(m))return!1;const x=zW(m.code,l);s.current.add(m[x]),VW(i,s.current,!1)&&(m.preventDefault(),n(!0))},A=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&aD(m))return!1;const x=zW(m.code,l);VW(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",A),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",A),window.removeEventListener("blur",h)}}},[e,n]),r};function VW(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function zW(e,t){return t.includes(e)?"code":"key"}function Wue(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Yv(s,n);return Wue(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((l=s[Bs])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Bs])==null?void 0:c.z)??0:r.z??0},n)}function Xue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:l,z:c}=Wue(n,e,{...n.position,z:((s=n[Bs])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:l},n[Bs].z=c,r!=null&&r[n.id]&&(n[Bs].isParent=!0)}})}function XI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(l=>{var m;const c=(Qu(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},A=l.parentNode||l.parentId;A&&(s[A]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Bs,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Bs])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),Xue(a,r,s),a}function Yue(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:A}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=GM(g,A),{x:y,y:w,zoom:_}=Pue(v,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),j=mm.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Dp(c,t.duration),j):l.transform(c,j),!0}}return!1}function jst(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Bs]:n[Bs],selected:r.selected})}),new Map(t)}function Bst(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function PN({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:jst(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:Bst(t,s)}),l==null||l(t))}const Kx=()=>{},Tst={zoomIn:Kx,zoomOut:Kx,zoomTo:Kx,getZoom:()=>1,setViewport:Kx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Kx,fitBounds:Kx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Ist=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Fst=()=>{const e=so(),{d3Zoom:t,d3Selection:r}=ds(Ist,ll);return C.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Dp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Dp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Dp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,l,c]=e.getState().transform,u=mm.translate(a.x??i,a.y??l).scale(a.zoom??c);t.transform(Dp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>Yue(e.getState,a),setCenter:(a,s,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,A=l/2-a*d,h=c/2-s*d,m=mm.translate(A,h).scale(d);t.transform(Dp(r,i==null?void 0:i.duration),m)},fitBounds:(a,s)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:A,zoom:h}=Pue(a,i,l,c,u,(s==null?void 0:s.padding)??.1),m=mm.translate(d,A).scale(h);t.transform(Dp(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),oD(a,s,i,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),A={x:a.x-u,y:a.y-d};return oD(A,s,i,l)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:l,y:c}=i.getBoundingClientRect(),u=Fue(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:Tst,[t,r])};function hj(){const e=Fst(),t=so(),r=C.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=C.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=C.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=C.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),i=C.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),j=v(),k=typeof x=="function"?x(j):x;if(w)y(k);else if(_){const I=k.length===0?j.map(E=>({type:"remove",id:E.id})):k.map(E=>({item:E,type:"reset"}));_(I)}},[]),l=C.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),j=typeof x=="function"?x(v):x;if(w)y(j);else if(_){const k=j.length===0?v.map(I=>({type:"remove",id:I.id})):j.map(I=>({item:I,type:"reset"}));_(k)}},[]),c=C.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:j}=t.getState();if(_){const I=[...y(),...v];w(I)}else if(j){const k=v.map(I=>({item:I,type:"add"}));j(k)}},[]),u=C.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:j}=t.getState();if(_)w([...y,...v]);else if(j){const k=v.map(I=>({item:I,type:"add"}));j(k)}},[]),d=C.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,_,j]=y;return{nodes:x().map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x:w,y:_,zoom:j}}},[]),A=C.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:j,hasDefaultEdges:k,onNodesDelete:I,onEdgesDelete:E,onNodesChange:S,onEdgesChange:B}=t.getState(),R=(x||[]).map(ee=>ee.id),P=(v||[]).map(ee=>ee.id),F=w().reduce((ee,V)=>{const q=V.parentNode||V.parentId,K=!R.includes(V.id)&&q&&ee.find(Z=>Z.id===q);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(R.includes(V.id)||K)&&ee.push(V),ee},[]),L=_.filter(ee=>typeof ee.deletable=="boolean"?ee.deletable:!0),M=L.filter(ee=>P.includes(ee.id));if(F||M){const ee=Due(F,L),V=[...M,...ee],q=V.reduce((K,X)=>(K.includes(X.id)||K.push(X.id),K),[]);if((k||j)&&(k&&t.setState({edges:_.filter(K=>!q.includes(K.id))}),j&&(F.forEach(K=>{y.delete(K.id)}),t.setState({nodeInternals:new Map(y)}))),q.length>0&&(E==null||E(V),B&&B(q.map(K=>({id:K,type:"remove"})))),F.length>0&&(I==null||I(F),S)){const K=F.map(X=>({id:X.id,type:"remove"}));S(K)}}},[]),h=C.useCallback(x=>{const v=Zat(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:DW(y),y,v]},[]),m=C.useCallback((x,v=!0,y)=>{const[w,_,j]=h(x);return w?(y||t.getState().getNodes()).filter(k=>{if(!j&&(k.id===_.id||!k.positionAbsolute))return!1;const I=DW(k),E=nD(I,w);return v&&E>0||E>=w.width*w.height}):[]},[]),g=C.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=nD(w,v);return y&&_>0||_>=w.width*w.height},[]);return C.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:A,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,i,l,c,u,d,A,m,g])}const Ost={actInsideInputWithModifier:!1};var Dst=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=so(),{deleteElements:n}=hj(),a=P2(e,Ost),s=P2(t);C.useEffect(()=>{if(a){const{edges:i,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),C.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Pst(e){const t=so();C.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=MM(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Rh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const WM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Rst=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,RN=e=>({x:e.x,y:e.y,zoom:e.k}),qx=(e,t)=>e.target.closest(`.${t}`),$W=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),GW=e=>{const t=e.ctrlKey&&$S()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Lst=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Mst=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Wp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:A=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:j})=>{const k=C.useRef(),I=so(),E=C.useRef(!1),S=C.useRef(!1),B=C.useRef(null),R=C.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:F,d3ZoomHandler:L,userSelectionActive:M}=ds(Lst,ll),ee=P2(v),V=C.useRef(0),q=C.useRef(!1),K=C.useRef();return Pst(B),C.useEffect(()=>{if(B.current){const X=B.current.getBoundingClientRect(),Z=$at().scaleExtent([g,x]).translateExtent(m),G=Ru(B.current).call(Z),D=mm.translate(h.x,h.y).scale(R1(h.zoom,g,x)),U=[[0,0],[X.width,X.height]],z=Z.constrain()(D,U,m);Z.transform(G,z),Z.wheelDelta(GW),I.setState({d3Zoom:Z,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[z.x,z.y,z.k],domNode:B.current.closest(".react-flow")})}},[]),C.useEffect(()=>{F&&P&&(i&&!ee&&!M?F.on("wheel.zoom",X=>{if(qx(X,_))return!1;X.preventDefault(),X.stopImmediatePropagation();const Z=F.property("__zoom").k||1;if(X.ctrlKey&&s){const se=RA(X),le=GW(X),ue=Z*Math.pow(2,le);P.scaleTo(F,ue,se,X);return}const G=X.deltaMode===1?20:1;let D=c===Wp.Vertical?0:X.deltaX*G,U=c===Wp.Horizontal?0:X.deltaY*G;!$S()&&X.shiftKey&&c!==Wp.Vertical&&(D=X.deltaY*G,U=0),P.translateBy(F,-(D/Z)*l,-(U/Z)*l,{internal:!0});const z=RN(F.property("__zoom")),{onViewportChangeStart:J,onViewportChange:re,onViewportChangeEnd:oe}=I.getState();clearTimeout(K.current),q.current||(q.current=!0,t==null||t(X,z),J==null||J(z)),q.current&&(e==null||e(X,z),re==null||re(z),K.current=setTimeout(()=>{r==null||r(X,z),oe==null||oe(z),q.current=!1},150))},{passive:!1}):typeof L<"u"&&F.on("wheel.zoom",function(X,Z){if(!y&&X.type==="wheel"&&!X.ctrlKey||qx(X,_))return null;X.preventDefault(),L.call(this,X,Z)},{passive:!1}))},[M,i,c,F,P,L,ee,s,y,_,t,e,r]),C.useEffect(()=>{P&&P.on("start",X=>{var D,U;if(!X.sourceEvent||X.sourceEvent.internal)return null;V.current=(D=X.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:Z}=I.getState(),G=RN(X.transform);E.current=!0,R.current=G,((U=X.sourceEvent)==null?void 0:U.type)==="mousedown"&&I.setState({paneDragging:!0}),Z==null||Z(G),t==null||t(X.sourceEvent,G)})},[P,t]),C.useEffect(()=>{P&&(M&&!E.current?P.on("zoom",null):M||P.on("zoom",X=>{var G;const{onViewportChange:Z}=I.getState();if(I.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),S.current=!!(n&&$W(A,V.current??0)),(e||Z)&&!((G=X.sourceEvent)!=null&&G.internal)){const D=RN(X.transform);Z==null||Z(D),e==null||e(X.sourceEvent,D)}}))},[M,P,e,A,n]),C.useEffect(()=>{P&&P.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:Z}=I.getState();if(E.current=!1,I.setState({paneDragging:!1}),n&&$W(A,V.current??0)&&!S.current&&n(X.sourceEvent),S.current=!1,(r||Z)&&Rst(R.current,X.transform)){const G=RN(X.transform);R.current=G,clearTimeout(k.current),k.current=setTimeout(()=>{Z==null||Z(G),r==null||r(X.sourceEvent,G)},i?150:0)}})},[P,i,A,r,n]),C.useEffect(()=>{P&&P.filter(X=>{const Z=ee||a,G=s&&X.ctrlKey;if((A===!0||Array.isArray(A)&&A.includes(1))&&X.button===1&&X.type==="mousedown"&&(qx(X,"react-flow__node")||qx(X,"react-flow__edge")))return!0;if(!A&&!Z&&!i&&!u&&!s||M||!u&&X.type==="dblclick"||qx(X,_)&&X.type==="wheel"||qx(X,j)&&(X.type!=="wheel"||i&&X.type==="wheel"&&!ee)||!s&&X.ctrlKey&&X.type==="wheel"||!Z&&!i&&!G&&X.type==="wheel"||!A&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(A)&&!A.includes(X.button)&&X.type==="mousedown")return!1;const D=Array.isArray(A)&&A.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&D})},[M,P,a,s,i,u,A,d,ee]),at.createElement("div",{className:"react-flow__renderer",ref:B,style:WM},w)},Ust=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Qst(){const{userSelectionActive:e,userSelectionRect:t}=ds(Ust,ll);return e&&t?at.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function KW(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Jue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&KW(n,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&KW(n,i);break}case"remove":return n}return n.push(i),n},r)}function Zue(e,t){return Jue(e,t)}function Hst(e,t){return Jue(e,t)}const z0=(e,t)=>({id:e,type:"select",selected:t});function Sv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(z0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(z0(n.id,!1))),r},[])}const YI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Vst=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ede=C.memo(({isSelecting:e,selectionMode:t=D2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:A})=>{const h=C.useRef(null),m=so(),g=C.useRef(0),x=C.useRef(0),v=C.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=ds(Vst,ll),j=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},k=L=>{s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}i==null||i(L)},E=l?L=>l(L):void 0,S=L=>{const{resetSelectedElements:M,domNode:ee}=m.getState();if(v.current=ee==null?void 0:ee.getBoundingClientRect(),!w||!e||L.button!==0||L.target!==h.current||!v.current)return;const{x:V,y:q}=pm(L,v.current);M(),m.setState({userSelectionRect:{width:0,height:0,startX:V,startY:q,x:V,y:q}}),n==null||n(L)},B=L=>{const{userSelectionRect:M,nodeInternals:ee,edges:V,transform:q,onNodesChange:K,onEdgesChange:X,nodeOrigin:Z,getNodes:G}=m.getState();if(!e||!v.current||!M)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=pm(L,v.current),U=M.startX??0,z=M.startY??0,J={...M,x:D.x<U?D.x:U,y:D.y<z?D.y:z,width:Math.abs(D.x-U),height:Math.abs(D.y-z)},re=G(),oe=Oue(ee,J,q,t===D2.Partial,!0,Z),se=Due(oe,V).map(ue=>ue.id),le=oe.map(ue=>ue.id);if(g.current!==le.length){g.current=le.length;const ue=Sv(re,le);ue.length&&(K==null||K(ue))}if(x.current!==se.length){x.current=se.length;const ue=Sv(V,se);ue.length&&(X==null||X(ue))}m.setState({userSelectionRect:J})},R=L=>{if(L.button!==0)return;const{userSelectionRect:M}=m.getState();!y&&M&&L.target===h.current&&(k==null||k(L)),m.setState({nodesSelectionActive:g.current>0}),j(),a==null||a(L)},P=L=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),j()},F=w&&(e||y);return at.createElement("div",{className:Bl(["react-flow__pane",{dragging:_,selection:e}]),onClick:F?void 0:YI(k,h),onContextMenu:YI(I,h),onWheel:YI(E,h),onMouseEnter:F?void 0:c,onMouseDown:F?S:void 0,onMouseMove:F?B:u,onMouseUp:F?R:void 0,onMouseLeave:F?P:d,ref:h,style:WM},A,at.createElement(Qst,null))});ede.displayName="Pane";function tde(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:tde(n,t):!1}function qW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function zst(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!tde(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function $st(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function rde(e,t,r,n,a=[0,0],s){const i=$st(e,e.extent||n);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const A=r.get(c),{x:h,y:m}=Yv(A,a).positionAbsolute;l=A&&Qu(h)&&Qu(m)&&Qu(A.width)&&Qu(A.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+A.width-e.width+e.width*a[0],m+A.height-e.height+e.height*a[1]]]:l}else s==null||s("005",Rh.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const A=r.get(c),{x:h,y:m}=Yv(A,a).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const A=r.get(c);u=Yv(A,a).positionAbsolute}const d=l&&l!=="parent"?UM(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function JI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const WW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),l={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/r,y:(u.top-i.top-l.y)/r,...MM(c)}})};function By(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function cD({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Rh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Gst(){const e=so();return C.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function ZI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function nde({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const l=so(),[c,u]=C.useState(!1),d=C.useRef([]),A=C.useRef({x:null,y:null}),h=C.useRef(0),m=C.useRef(null),g=C.useRef({x:0,y:0}),x=C.useRef(null),v=C.useRef(!1),y=C.useRef(!1),w=C.useRef(!1),_=Gst();return C.useEffect(()=>{if(e!=null&&e.current){const j=Ru(e.current),k=({x:S,y:B})=>{const{nodeInternals:R,onNodeDrag:P,onSelectionDrag:F,updateNodePositions:L,nodeExtent:M,snapGrid:ee,snapToGrid:V,nodeOrigin:q,onError:K}=l.getState();A.current={x:S,y:B};let X=!1,Z={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const D=GM(d.current,q);Z=QM(D)}if(d.current=d.current.map(D=>{const U={x:S-D.distance.x,y:B-D.distance.y};V&&(U.x=ee[0]*Math.round(U.x/ee[0]),U.y=ee[1]*Math.round(U.y/ee[1]));const z=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!D.extent&&(z[0][0]=D.positionAbsolute.x-Z.x+M[0][0],z[1][0]=D.positionAbsolute.x+(D.width??0)-Z.x2+M[1][0],z[0][1]=D.positionAbsolute.y-Z.y+M[0][1],z[1][1]=D.positionAbsolute.y+(D.height??0)-Z.y2+M[1][1]);const J=rde(D,U,R,z,q,K);return X=X||D.position.x!==J.position.x||D.position.y!==J.position.y,D.position=J.position,D.positionAbsolute=J.positionAbsolute,D}),!X)return;L(d.current,!0,!0),u(!0);const G=a?P:ZI(F);if(G&&x.current){const[D,U]=JI({nodeId:a,dragItems:d.current,nodeInternals:R});G(x.current,D,U)}},I=()=>{if(!m.current)return;const[S,B]=Nue(g.current,m.current);if(S!==0||B!==0){const{transform:R,panBy:P}=l.getState();A.current.x=(A.current.x??0)-S/R[2],A.current.y=(A.current.y??0)-B/R[2],P({x:S,y:B})&&k(A.current)}h.current=requestAnimationFrame(I)},E=S=>{var q;const{nodeInternals:B,multiSelectionActive:R,nodesDraggable:P,unselectNodesAndEdges:F,onNodeDragStart:L,onSelectionDragStart:M}=l.getState();y.current=!0;const ee=a?L:ZI(M);(!i||!s)&&!R&&a&&((q=B.get(a))!=null&&q.selected||F()),a&&s&&i&&cD({id:a,store:l,nodeRef:e});const V=_(S);if(A.current=V,d.current=zst(B,P,V,a),ee&&d.current){const[K,X]=JI({nodeId:a,dragItems:d.current,nodeInternals:B});ee(S.sourceEvent,K,X)}};if(t)j.on(".drag",null);else{const S=Snt().on("start",B=>{const{domNode:R,nodeDragThreshold:P}=l.getState();P===0&&E(B),w.current=!1;const F=_(B);A.current=F,m.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=pm(B.sourceEvent,m.current)}).on("drag",B=>{var L,M;const R=_(B),{autoPanOnNodeDrag:P,nodeDragThreshold:F}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&P&&(v.current=!0,I()),!y.current){const ee=R.xSnapped-(((L=A==null?void 0:A.current)==null?void 0:L.x)??0),V=R.ySnapped-(((M=A==null?void 0:A.current)==null?void 0:M.y)??0);Math.sqrt(ee*ee+V*V)>F&&E(B)}(A.current.x!==R.xSnapped||A.current.y!==R.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=pm(B.sourceEvent,m.current),k(R))}}).on("end",B=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:R,nodeInternals:P,onNodeDragStop:F,onSelectionDragStop:L}=l.getState(),M=a?F:ZI(L);if(R(d.current,!1,!1),M){const[ee,V]=JI({nodeId:a,dragItems:d.current,nodeInternals:P});M(B.sourceEvent,ee,V)}}}).filter(B=>{const R=B.target;return!B.button&&(!r||!qW(R,`.${r}`,e))&&(!n||qW(R,n,e))});return j.call(S),()=>{j.on(".drag",null)}}}},[e,t,r,n,s,l,a,i,_]),c}function ade(){const e=so();return C.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),A=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=A.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:j,position:k}=rde(w,_,n,a,void 0,u);w.position=k,w.positionAbsolute=j}return w});s(y,!0,!1)},[])}const Jv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ty=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:A,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:_,isConnectable:j,isFocusable:k,selectNodesOnDrag:I,sourcePosition:E,targetPosition:S,hidden:B,resizeObserver:R,dragHandle:P,zIndex:F,isParent:L,noDragClassName:M,noPanClassName:ee,initialized:V,disableKeyboardA11y:q,ariaLabel:K,rfId:X,hasHandleBounds:Z})=>{const G=so(),D=C.useRef(null),U=C.useRef(null),z=C.useRef(E),J=C.useRef(S),re=C.useRef(n),oe=_||w||d||A||h||m,se=ade(),le=By(r,G.getState,A),ue=By(r,G.getState,h),ke=By(r,G.getState,m),ae=By(r,G.getState,g),Ne=By(r,G.getState,x),je=Te=>{const{nodeDragThreshold:Le}=G.getState();if(_&&(!I||!w||Le>0)&&cD({id:r,store:G,nodeRef:D}),d){const We=G.getState().nodeInternals.get(r);We&&d(Te,{...We})}},_e=Te=>{if(!aD(Te)&&!q)if(Sue.includes(Te.key)&&_){const Le=Te.key==="Escape";cD({id:r,store:G,unselect:Le,nodeRef:D})}else w&&u&&Object.prototype.hasOwnProperty.call(Jv,Te.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),se({x:Jv[Te.key].x,y:Jv[Te.key].y,isShiftPressed:Te.shiftKey}))};C.useEffect(()=>()=>{U.current&&(R==null||R.unobserve(U.current),U.current=null)},[]),C.useEffect(()=>{if(D.current&&!B){const Te=D.current;(!V||!Z||U.current!==Te)&&(U.current&&(R==null||R.unobserve(U.current)),R==null||R.observe(Te),U.current=Te)}},[B,V,Z]),C.useEffect(()=>{const Te=re.current!==n,Le=z.current!==E,We=J.current!==S;D.current&&(Te||Le||We)&&(Te&&(re.current=n),Le&&(z.current=E),We&&(J.current=S),G.getState().updateNodeDimensions([{id:r,nodeElement:D.current,forceUpdate:!0}]))},[r,n,E,S]);const me=nde({nodeRef:D,disabled:B||!w,noDragClassName:M,handleSelector:P,nodeId:r,isSelectable:_,selectNodesOnDrag:I});return B?null:at.createElement("div",{className:Bl(["react-flow__node",`react-flow__node-${n}`,{[ee]:w},y,{selected:u,selectable:_,parent:L,dragging:me}]),ref:D,style:{zIndex:F,transform:`translate(${l}px,${c}px)`,pointerEvents:oe?"all":"none",visibility:V?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:le,onMouseMove:ue,onMouseLeave:ke,onContextMenu:ae,onClick:je,onDoubleClick:Ne,onKeyDown:k?_e:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":q?void 0:`${Kue}-${X}`,"aria-label":K},at.createElement(ist,{value:r},at.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:j,sourcePosition:E,targetPosition:S,dragging:me,dragHandle:P,zIndex:F})))};return t.displayName="NodeWrapper",C.memo(t)};const Kst=e=>{const t=e.getNodes().filter(r=>r.selected);return{...GM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function qst({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=so(),{width:a,height:s,x:i,y:l,transformString:c,userSelectionActive:u}=ds(Kst,ll),d=ade(),A=C.useRef(null);if(C.useEffect(()=>{var g;r||(g=A.current)==null||g.focus({preventScroll:!0})},[r]),nde({nodeRef:A}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Jv,g.key)&&d({x:Jv[g.key].x,y:Jv[g.key].y,isShiftPressed:g.shiftKey})};return at.createElement("div",{className:Bl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},at.createElement("div",{ref:A,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:i}}))}var Wst=C.memo(qst);const Xst=e=>e.nodesSelectionActive,sde=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:A,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:R,defaultViewport:P,translateExtent:F,minZoom:L,maxZoom:M,preventScrolling:ee,onSelectionContextMenu:V,noWheelClassName:q,noPanClassName:K,disableKeyboardA11y:X})=>{const Z=ds(Xst),G=P2(A),D=P2(y),U=D||R,z=D||I,J=G||h&&U!==!0;return Dst({deleteKeyCode:l,multiSelectionKeyCode:v}),at.createElement(Mst,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:z,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:!G&&U,defaultViewport:P,translateExtent:F,minZoom:L,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:ee,noWheelClassName:q,noPanClassName:K},at.createElement(ede,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:U,isSelecting:!!J,selectionMode:m},e,Z&&at.createElement(Wst,{onSelectionContextMenu:V,noPanClassName:K,disableKeyboardA11y:X})))};sde.displayName="FlowRenderer";var Yst=C.memo(sde);function Jst(e){return ds(C.useCallback(r=>e?Oue(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Zst(e){const t={input:Ty(e.input||Vue),default:Ty(e.default||lD),output:Ty(e.output||$ue),group:Ty(e.group||qM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=Ty(e[s]||lD),a),r);return{...t,...n}}const eit=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},tit=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ide=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ds(tit,ll),l=Jst(e.onlyRenderVisibleElements),c=C.useRef(),u=C.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(A=>{const h=A.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return C.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),at.createElement("div",{className:"react-flow__nodes",style:WM},l.map(d=>{var k,I,E;let A=d.type||"default";e.nodeTypes[A]||(i==null||i("003",Rh.error003(A)),A="default");const h=e.nodeTypes[A]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?UM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,j=eit({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return at.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:A,data:d.data,sourcePosition:d.sourcePosition||Nr.Bottom,targetPosition:d.targetPosition||Nr.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[Bs])==null?void 0:k.z)??0,isParent:!!((I=d[Bs])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Bs])!=null&&E.handleBounds)})}))};ide.displayName="NodeRenderer";var rit=C.memo(ide);const nit=(e,t,r)=>r===Nr.Left?e-t:r===Nr.Right?e+t:e,ait=(e,t,r)=>r===Nr.Top?e-t:r===Nr.Bottom?e+t:e,XW="react-flow__edgeupdater",YW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:l})=>at.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:Bl([XW,`${XW}-${l}`]),cx:nit(t,n,e),cy:ait(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),sit=()=>!0;var Wx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:A,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:S,elementsSelectable:B,hidden:R,sourceHandleId:P,targetHandleId:F,onContextMenu:L,onMouseEnter:M,onMouseMove:ee,onMouseLeave:V,reconnectRadius:q,onReconnect:K,onReconnectStart:X,onReconnectEnd:Z,markerEnd:G,markerStart:D,rfId:U,ariaLabel:z,isFocusable:J,isReconnectable:re,pathOptions:oe,interactionWidth:se,disableKeyboardA11y:le})=>{const ue=C.useRef(null),[ke,ae]=C.useState(!1),[Ne,je]=C.useState(!1),_e=so(),me=C.useMemo(()=>`url('#${iD(D,U)}')`,[D,U]),Te=C.useMemo(()=>`url('#${iD(G,U)}')`,[G,U]);if(R)return null;const Le=wt=>{var In;const{edges:Br,addSelectedEdges:tr,unselectNodesAndEdges:an,multiSelectionActive:Sr}=_e.getState(),$r=Br.find(Pr=>Pr.id===r);$r&&(B&&(_e.setState({nodesSelectionActive:!1}),$r.selected&&Sr?(an({nodes:[],edges:[$r]}),(In=ue.current)==null||In.blur()):tr([r])),i&&i(wt,$r))},We=jy(r,_e.getState,l),xe=jy(r,_e.getState,L),Oe=jy(r,_e.getState,M),Re=jy(r,_e.getState,ee),$e=jy(r,_e.getState,V),et=(wt,Br)=>{if(wt.button!==0)return;const{edges:tr,isValidConnection:an}=_e.getState(),Sr=Br?w:y,$r=(Br?F:P)||null,In=Br?"target":"source",Pr=an||sit,fs=Br,mn=tr.find(rn=>rn.id===r);je(!0),X==null||X(wt,mn,In);const la=rn=>{je(!1),Z==null||Z(rn,mn,In)};Mue({event:wt,handleId:$r,nodeId:Sr,onConnect:rn=>K==null?void 0:K(mn,rn),isTarget:fs,getState:_e.getState,setState:_e.setState,isValidConnection:Pr,edgeUpdaterType:In,onReconnectEnd:la})},ct=wt=>et(wt,!0),gt=wt=>et(wt,!1),It=()=>ae(!0),Mt=()=>ae(!1),Pt=!B&&!i,Qt=wt=>{var Br;if(!le&&Sue.includes(wt.key)&&B){const{unselectNodesAndEdges:tr,addSelectedEdges:an,edges:Sr}=_e.getState();wt.key==="Escape"?((Br=ue.current)==null||Br.blur(),tr({edges:[Sr.find(In=>In.id===r)]})):an([r])}};return at.createElement("g",{className:Bl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:ke}]),onClick:Le,onDoubleClick:We,onContextMenu:xe,onMouseEnter:Oe,onMouseMove:Re,onMouseLeave:$e,onKeyDown:J?Qt:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":z===null?void 0:z||`Edge from ${y} to ${w}`,"aria-describedby":J?`${que}-${U}`:void 0,ref:ue},!Ne&&at.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:A,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:S,sourceHandleId:P,targetHandleId:F,markerStart:me,markerEnd:Te,pathOptions:oe,interactionWidth:se}),re&&at.createElement(at.Fragment,null,(re==="source"||re===!0)&&at.createElement(YW,{position:E,centerX:_,centerY:j,radius:q,onMouseDown:ct,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(re==="target"||re===!0)&&at.createElement(YW,{position:S,centerX:k,centerY:I,radius:q,onMouseDown:gt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",C.memo(t)};function iit(e){const t={default:Wx(e.default||KS),straight:Wx(e.bezier||zM),step:Wx(e.step||VM),smoothstep:Wx(e.step||fj),simplebezier:Wx(e.simplebezier||HM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Wx(e[s]||KS),a),r);return{...t,...n}}function JW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Nr.Top:return{x:n+s/2,y:a};case Nr.Right:return{x:n+s,y:a+i/2};case Nr.Bottom:return{x:n+s/2,y:a+i};case Nr.Left:return{x:n,y:a+i/2}}}function ZW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const oit=(e,t,r,n,a,s)=>{const i=JW(r,e,t),l=JW(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function lit({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=QM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),A=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(A*h)>0}function eX(e){var n,a,s,i,l;const t=((n=e==null?void 0:e[Bs])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const cit=[{level:0,isMaxLevel:!0,edges:[]}];function uit(e,t,r=!1){let n=-1;const a=e.reduce((i,l)=>{var d,A;const c=Qu(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Bs])==null?void 0:d.z)||0,((A=h==null?void 0:h[Bs])==null?void 0:A.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return i[u]?i[u].push(l):i[u]=[l],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?cit:s}function dit(e,t,r){const n=ds(C.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&lit({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return uit(n,t,r)}const Ait=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),fit=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),tX={[GS.Arrow]:Ait,[GS.ArrowClosed]:fit};function hit(e){const t=so();return C.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(tX,e)?tX[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Rh.error009(e)),null)},[e])}const mit=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=hit(t);return c?at.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},at.createElement(c,{color:r,strokeWidth:i})):null},pit=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=iD(i,t);n.includes(l)||(a.push({id:l,color:i.color||e,...i}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},ode=({defaultColor:e,rfId:t})=>{const r=ds(C.useCallback(pit({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return at.createElement("defs",null,r.map(n=>at.createElement(mit,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};ode.displayName="MarkerDefinitions";var git=C.memo(ode);const xit=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),lde=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:A,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:j,width:k,height:I,connectionMode:E,nodeInternals:S,onError:B}=ds(xit,ll),R=dit(t,S,r);return k?at.createElement(at.Fragment,null,R.map(({level:P,edges:F,isMaxLevel:L})=>at.createElement("svg",{key:P,style:{zIndex:P},width:k,height:I,className:"react-flow__edges react-flow__container"},L&&at.createElement(git,{defaultColor:e,rfId:n}),at.createElement("g",null,F.map(M=>{const[ee,V,q]=eX(S.get(M.source)),[K,X,Z]=eX(S.get(M.target));if(!q||!Z)return null;let G=M.type||"default";a[G]||(B==null||B("011",Rh.error011(G)),G="default");const D=a[G]||a.default,U=E===Lg.Strict?X.target:(X.target??[]).concat(X.source??[]),z=ZW(V.source,M.sourceHandle),J=ZW(U,M.targetHandle),re=(z==null?void 0:z.position)||Nr.Bottom,oe=(J==null?void 0:J.position)||Nr.Top,se=!!(M.focusable||w&&typeof M.focusable>"u"),le=M.reconnectable||M.updatable,ue=typeof h<"u"&&(le||_&&typeof le>"u");if(!z||!J)return B==null||B("008",Rh.error008(z,M)),null;const{sourceX:ke,sourceY:ae,targetX:Ne,targetY:je}=oit(ee,z,re,K,J,oe);return at.createElement(D,{key:M.id,id:M.id,className:Bl([M.className,s]),type:G,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ke,sourceY:ae,targetX:Ne,targetY:je,sourcePosition:re,targetPosition:oe,elementsSelectable:j,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:A,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:se,isReconnectable:ue,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:y})})))),v):null};lde.displayName="EdgeRenderer";var vit=C.memo(lde);const bit=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yit({children:e}){const t=ds(bit);return at.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function wit(e){const t=hj(),r=C.useRef(!1);C.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Eit={[Nr.Left]:Nr.Right,[Nr.Right]:Nr.Left,[Nr.Top]:Nr.Bottom,[Nr.Bottom]:Nr.Top},cde=({nodeId:e,handleType:t,style:r,type:n=Y0.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,E,S;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=ds(C.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),ll),A=(I=i==null?void 0:i[Bs])==null?void 0:I.handleBounds;let h=A==null?void 0:A[t];if(d===Lg.Loose&&(h=h||(A==null?void 0:A[t==="source"?"target":"source"])),!i||!h)return null;const m=l?h.find(B=>B.id===l):h[0],g=m?m.x+m.width/2:(i.width??0)/2,x=m?m.y+m.height/2:i.height??0,v=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((S=i.positionAbsolute)==null?void 0:S.y)??0)+x,w=m==null?void 0:m.position,_=w?Eit[w]:null;if(!w||!_)return null;if(a)return at.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let j="";const k={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===Y0.Bezier?[j]=Iue(k):n===Y0.Step?[j]=sD({...k,borderRadius:0}):n===Y0.SmoothStep?[j]=sD(k):n===Y0.SimpleBezier?[j]=Tue(k):j=`M${v},${y} ${c},${u}`,at.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:r})};cde.displayName="ConnectionLine";const Cit=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Nit({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:l,height:c,connectionStatus:u}=ds(Cit,ll);return!(a&&s&&l&&i)?null:at.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},at.createElement("g",{className:Bl(["react-flow__connection",u])},at.createElement(cde,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function rX(e,t){return C.useRef(null),so(),C.useMemo(()=>t(e),[e])}const ude=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:A,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:j,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:R,deleteKeyCode:P,onlyRenderVisibleElements:F,elementsSelectable:L,selectNodesOnDrag:M,defaultViewport:ee,translateExtent:V,minZoom:q,maxZoom:K,preventScrolling:X,defaultMarkerColor:Z,zoomOnScroll:G,zoomOnPinch:D,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:J,zoomOnDoubleClick:re,panOnDrag:oe,onPaneClick:se,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ke,onPaneScroll:ae,onPaneContextMenu:Ne,onEdgeContextMenu:je,onEdgeMouseEnter:_e,onEdgeMouseMove:me,onEdgeMouseLeave:Te,onReconnect:Le,onReconnectStart:We,onReconnectEnd:xe,reconnectRadius:Oe,noDragClassName:Re,noWheelClassName:$e,noPanClassName:et,elevateEdgesOnSelect:ct,disableKeyboardA11y:gt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Qt=rX(e,Zst),wt=rX(t,iit);return wit(s),at.createElement(Yst,{onPaneClick:se,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:ke,onPaneContextMenu:Ne,onPaneScroll:ae,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:R,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:G,zoomOnPinch:D,zoomOnDoubleClick:re,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:J,panOnDrag:oe,defaultViewport:ee,translateExtent:V,minZoom:q,maxZoom:K,onSelectionContextMenu:g,preventScrolling:X,noDragClassName:Re,noWheelClassName:$e,noPanClassName:et,disableKeyboardA11y:gt},at.createElement(yit,null,at.createElement(vit,{edgeTypes:wt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:je,onEdgeMouseEnter:_e,onEdgeMouseMove:me,onEdgeMouseLeave:Te,onReconnect:Le,onReconnectStart:We,onReconnectEnd:xe,reconnectRadius:Oe,defaultMarkerColor:Z,noPanClassName:et,elevateEdgesOnSelect:!!ct,disableKeyboardA11y:gt,rfId:Pt},at.createElement(Nit,{style:w,type:y,component:_,containerStyle:j})),at.createElement("div",{className:"react-flow__edgelabel-renderer"}),at.createElement(rit,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:A,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:M,onlyRenderVisibleElements:F,noPanClassName:et,noDragClassName:Re,disableKeyboardA11y:gt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};ude.displayName="GraphView";var _it=C.memo(ude);const uD=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],L0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:uD,nodeExtent:uD,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Lg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:est,isValidConnection:void 0},Sit=()=>Mtt((e,t)=>({...L0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:XI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?XI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const A=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(A.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Bs]:{...y[Bs],handleBounds:void 0}});else if(y){const w=MM(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[Bs]:{...y[Bs],handleBounds:{source:WW(".source",v.nodeElement,h,u),target:WW(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Xue(a,u);const g=i||s&&!i&&Yue(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Zue(r,l()),d=XI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,l=null;n?i=r.map(c=>z0(c,!0)):(i=Sv(s(),r),l=Sv(a,[])),PN({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,l=null;n?i=r.map(c=>z0(c,!0)):(i=Sv(a,r),l=Sv(s(),[])),PN({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),l=n||a,c=i.map(d=>(d.selected=!1,z0(d.id,!1))),u=l.map(d=>z0(d.id,!1));PN({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>z0(l.id,!1)),i=r.filter(l=>l.selected).map(l=>z0(l.id,!1));PN({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=UM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!r.x&&!r.y)return!1;const u=mm.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],A=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,A),n[0]!==A.x||n[1]!==A.y||n[2]!==A.k},cancelConnection:()=>e({connectionNodeId:L0.connectionNodeId,connectionHandleId:L0.connectionHandleId,connectionHandleType:L0.connectionHandleType,connectionStatus:L0.connectionStatus,connectionStartHandle:L0.connectionStartHandle,connectionEndHandle:L0.connectionEndHandle}),reset:()=>e({...L0})}),Object.is),XM=({children:e})=>{const t=C.useRef(null);return t.current||(t.current=Sit()),at.createElement(Gat,{value:t.current},e)};XM.displayName="ReactFlowProvider";const dde=({children:e})=>C.useContext(Aj)?at.createElement(at.Fragment,null,e):at.createElement(XM,null,e);dde.displayName="ReactFlowWrapper";const kit={input:Vue,default:lD,output:$ue,group:qM},jit={default:KS,straight:zM,step:VM,smoothstep:fj,simplebezier:HM},Bit=[0,0],Tit=[15,15],Iit={x:0,y:0,zoom:1},Fit={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ade=C.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=kit,edgeTypes:i=jit,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:A,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:B,onNodesDelete:R,onEdgesDelete:P,onSelectionChange:F,onSelectionDragStart:L,onSelectionDrag:M,onSelectionDragStop:ee,onSelectionContextMenu:V,onSelectionStart:q,onSelectionEnd:K,connectionMode:X=Lg.Strict,connectionLineType:Z=Y0.Bezier,connectionLineStyle:G,connectionLineComponent:D,connectionLineContainerStyle:U,deleteKeyCode:z="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:re=!1,selectionMode:oe=D2.Full,panActivationKeyCode:se="Space",multiSelectionKeyCode:le=$S()?"Meta":"Control",zoomActivationKeyCode:ue=$S()?"Meta":"Control",snapToGrid:ke=!1,snapGrid:ae=Tit,onlyRenderVisibleElements:Ne=!1,selectNodesOnDrag:je=!0,nodesDraggable:_e,nodesConnectable:me,nodesFocusable:Te,nodeOrigin:Le=Bit,edgesFocusable:We,edgesUpdatable:xe,elementsSelectable:Oe,defaultViewport:Re=Iit,minZoom:$e=.5,maxZoom:et=2,translateExtent:ct=uD,preventScrolling:gt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Qt=!0,panOnScroll:wt=!1,panOnScrollSpeed:Br=.5,panOnScrollMode:tr=Wp.Free,zoomOnDoubleClick:an=!0,panOnDrag:Sr=!0,onPaneClick:$r,onPaneMouseEnter:In,onPaneMouseMove:Pr,onPaneMouseLeave:fs,onPaneScroll:mn,onPaneContextMenu:la,children:ja,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:Et,onEdgeUpdateEnd:bt,onReconnect:nr,onReconnectStart:xr,onReconnectEnd:Wr,reconnectRadius:Zr=10,edgeUpdaterRadius:qr=10,onNodesChange:he,onEdgesChange:Ie,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Se="nopan",fitView:Fe=!1,fitViewOptions:Ye,connectOnClick:dt=!0,attributionPosition:Ge,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:zt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:kr=20,isValidConnection:sn,onError:on,style:An,id:hs,nodeDragThreshold:_o,...ms},ni)=>{const Ps=hs||"1";return at.createElement("div",{...ms,style:{...An,...Fit},ref:ni,className:Bl(["react-flow",a]),"data-testid":"rf__wrapper",id:hs},at.createElement(dde,null,at.createElement(_it,{onInit:u,onMove:d,onMoveStart:A,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:Z,connectionLineStyle:G,connectionLineComponent:D,connectionLineContainerStyle:U,selectionKeyCode:J,selectionOnDrag:re,selectionMode:oe,deleteKeyCode:z,multiSelectionKeyCode:le,panActivationKeyCode:se,zoomActivationKeyCode:ue,onlyRenderVisibleElements:Ne,selectNodesOnDrag:je,defaultViewport:Re,translateExtent:ct,minZoom:$e,maxZoom:et,preventScrolling:gt,zoomOnScroll:Pt,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:wt,panOnScrollSpeed:Br,panOnScrollMode:tr,panOnDrag:Sr,onPaneClick:$r,onPaneMouseEnter:In,onPaneMouseMove:Pr,onPaneMouseLeave:fs,onPaneScroll:mn,onPaneContextMenu:la,onSelectionContextMenu:V,onSelectionStart:q,onSelectionEnd:K,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onReconnect:nr??xt,onReconnectStart:xr??Et,onReconnectEnd:Wr??bt,reconnectRadius:Zr??qr,defaultMarkerColor:Mt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Se,elevateEdgesOnSelect:zt,rfId:Ps,disableKeyboardA11y:Jt,nodeOrigin:Le,nodeExtent:It}),at.createElement(Est,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:me,nodesFocusable:Te,edgesFocusable:We,edgesUpdatable:xe,elementsSelectable:Oe,elevateNodesOnSelect:Ft,minZoom:$e,maxZoom:et,nodeExtent:It,onNodesChange:he,onEdgesChange:Ie,snapToGrid:ke,snapGrid:ae,connectionMode:X,translateExtent:ct,connectOnClick:dt,defaultEdgeOptions:it,fitView:Fe,fitViewOptions:Ye,onNodesDelete:R,onEdgesDelete:P,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:B,onSelectionDrag:M,onSelectionDragStart:L,onSelectionDragStop:ee,noPanClassName:Se,nodeOrigin:Le,rfId:Ps,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:kr,isValidConnection:sn,nodeDragThreshold:_o}),at.createElement(yst,{onSelectionChange:F}),ja,at.createElement(qat,{proOptions:rt,position:Ge}),at.createElement(kst,{rfId:Ps,disableKeyboardA11y:Jt})))});Ade.displayName="ReactFlow";function fde(e){return t=>{const[r,n]=C.useState(t),a=C.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const Oit=fde(Zue),Dit=fde(Hst);function Pit(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},at.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Rit(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},at.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Lit(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},at.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Mit(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Uit(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const nw=({children:e,className:t,...r})=>at.createElement("button",{type:"button",className:Bl(["react-flow__controls-button",t]),...r},e);nw.displayName="ControlButton";const Qit=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),hde=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:A="bottom-left"})=>{const h=so(),[m,g]=C.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=ds(Qit,ll),{zoomIn:w,zoomOut:_,fitView:j}=hj();if(C.useEffect(()=>{g(!0)},[]),!m)return null;const k=()=>{w(),s==null||s()},I=()=>{_(),i==null||i()},E=()=>{j(a),l==null||l()},S=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return at.createElement(Cue,{className:Bl(["react-flow__controls",u]),position:A,style:e,"data-testid":"rf__controls"},t&&at.createElement(at.Fragment,null,at.createElement(nw,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},at.createElement(Pit,null)),at.createElement(nw,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},at.createElement(Rit,null))),r&&at.createElement(nw,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},at.createElement(Lit,null)),n&&at.createElement(nw,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},x?at.createElement(Uit,null):at.createElement(Mit,null)),d)};hde.displayName="Controls";var Hit=C.memo(hde),Qd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Qd||(Qd={}));function Vit({color:e,dimensions:t,lineWidth:r}){return at.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function zit({color:e,radius:t}){return at.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const $it={[Qd.Dots]:"#91919a",[Qd.Lines]:"#eee",[Qd.Cross]:"#e2e2e2"},Git={[Qd.Dots]:1,[Qd.Lines]:1,[Qd.Cross]:6},Kit=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function mde({id:e,variant:t=Qd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:l,className:c}){const u=C.useRef(null),{transform:d,patternId:A}=ds(Kit,ll),h=i||$it[t],m=n||Git[t],g=t===Qd.Dots,x=t===Qd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],_=x?[w,w]:y,j=g?[w/s,w/s]:[_[0]/s,_[1]/s];return at.createElement("svg",{className:Bl(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},at.createElement("pattern",{id:A+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},g?at.createElement(zit,{color:h,radius:w/s}):at.createElement(Vit,{dimensions:_,color:h,lineWidth:a})),at.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${A+e})`}))}mde.displayName="Background";var qit=C.memo(mde);function Wit(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Xit=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function gm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Xx=null;function pde(e={}){return Xx||(e.includeStyleProperties?(Xx=e.includeStyleProperties,Xx):(Xx=gm(window.getComputedStyle(document.documentElement)),Xx))}function qS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Yit(e){const t=qS(e,"border-left-width"),r=qS(e,"border-right-width");return e.clientWidth+t+r}function Jit(e){const t=qS(e,"border-top-width"),r=qS(e,"border-bottom-width");return e.clientHeight+t+r}function gde(e,t={}){const r=t.width||Yit(e),n=t.height||Jit(e);return{width:r,height:n}}function Zit(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Bc=16384;function eot(e){(e.width>Bc||e.height>Bc)&&(e.width>Bc&&e.height>Bc?e.width>e.height?(e.height*=Bc/e.width,e.width=Bc):(e.width*=Bc/e.height,e.height=Bc):e.width>Bc?(e.height*=Bc/e.width,e.width=Bc):(e.width*=Bc/e.height,e.height=Bc))}function WS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function tot(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function rot(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),tot(a)}const ic=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||ic(r,t)};function not(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function aot(e,t){return pde(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function sot(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?not(r):aot(r,n);return document.createTextNode(`${a}{${s}}`)}function nX(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Xit();try{t.className=`${t.className} ${i}`}catch{return}const l=document.createElement("style");l.appendChild(sot(i,r,a,n)),t.appendChild(l)}function iot(e,t,r){nX(e,t,":before",r),nX(e,t,":after",r)}const aX="application/font-woff",sX="image/jpeg",oot={woff:aX,woff2:aX,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:sX,jpeg:sX,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function lot(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function YM(e){const t=lot(e).toLowerCase();return oot[t]||""}function cot(e){return e.split(/,/)[1]}function dD(e){return e.search(/^(data:)/)!==-1}function uot(e,t){return`data:${t};base64,${e}`}async function xde(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const l=new FileReader;l.onerror=i,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){i(c)}},l.readAsDataURL(a)})}const e6={};function dot(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function JM(e,t,r){const n=dot(e,t,r.includeQueryParams);if(e6[n]!=null)return e6[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await xde(e,r.fetchRequestInit,({res:i,result:l})=>(t||(t=i.headers.get("Content-Type")||""),cot(l)));a=uot(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return e6[n]=a,a}async function Aot(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):WS(t)}async function fot(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return WS(l)}const r=e.poster,n=YM(r),a=await JM(r,n,t);return WS(a)}async function hot(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await mj(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function mot(e,t){return ic(e,HTMLCanvasElement)?Aot(e):ic(e,HTMLVideoElement)?fot(e,t):ic(e,HTMLIFrameElement)?hot(e,t):e.cloneNode(vde(e))}const pot=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",vde=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function got(e,t,r){var n,a;if(vde(t))return t;let s=[];return pot(e)&&e.assignedNodes?s=gm(e.assignedNodes()):ic(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=gm(e.contentDocument.body.childNodes):s=gm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||ic(e,HTMLVideoElement)||await s.reduce((i,l)=>i.then(()=>mj(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function xot(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):pde(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),ic(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function vot(e,t){ic(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),ic(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function bot(e,t){if(ic(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function yot(e,t,r){return ic(t,Element)&&(xot(e,t,r),iot(e,t,r),vot(e,t),bot(e,t)),t}async function wot(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await mj(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const l=document.createElementNS(s,"defs");i.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(i)}return e}async function mj(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>mot(n,t)).then(n=>got(e,n,t)).then(n=>yot(e,n,t)).then(n=>wot(n,t))}const bde=/url\((['"]?)([^'"]+?)\1\)/g,Eot=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Cot=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Not(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function _ot(e){const t=[];return e.replace(bde,(r,n,a)=>(t.push(a),r)),t.filter(r=>!dD(r))}async function Sot(e,t,r,n,a){try{const s=r?Wit(t,r):t,i=YM(t);let l;return a||(l=await JM(s,i,n)),e.replace(Not(t),`$1${l}$3`)}catch{}return e}function kot(e,{preferredFontFormat:t}){return t?e.replace(Cot,r=>{for(;;){const[n,,a]=Eot.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function yde(e){return e.search(bde)!==-1}async function wde(e,t,r){if(!yde(e))return e;const n=kot(e,r);return _ot(n).reduce((s,i)=>s.then(l=>Sot(l,i,t,r)),Promise.resolve(n))}async function Yx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await wde(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jot(e,t){await Yx("background",e,t)||await Yx("background-image",e,t),await Yx("mask",e,t)||await Yx("-webkit-mask",e,t)||await Yx("mask-image",e,t)||await Yx("-webkit-mask-image",e,t)}async function Bot(e,t){const r=ic(e,HTMLImageElement);if(!(r&&!dD(e.src))&&!(ic(e,SVGImageElement)&&!dD(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await JM(n,YM(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Tot(e,t){const n=gm(e.childNodes).map(a=>Ede(a,t));await Promise.all(n).then(()=>e)}async function Ede(e,t){ic(e,Element)&&(await jot(e,t),await Bot(e,t),await Tot(e,t))}function Iot(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const iX={};async function oX(e){let t=iX[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},iX[e]=t,t}async function lX(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let l=i.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),xde(l,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function cX(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Fot(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{gm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let l=i+1;const c=s.href,u=oX(c).then(d=>lX(d,t)).then(d=>cX(d).forEach(A=>{try{a.insertRule(A,A.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:A,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(oX(a.href).then(l=>lX(l,t)).then(l=>cX(l).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{gm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Oot(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>yde(t.style.getPropertyValue("src")))}async function Dot(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=gm(e.ownerDocument.styleSheets),n=await Fot(r,t);return Oot(n)}function Cde(e){return e.trim().replace(/["']/g,"")}function Pot(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Cde(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Rot(e,t){const r=await Dot(e,t),n=Pot(e);return(await Promise.all(r.filter(s=>n.has(Cde(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return wde(s.cssText,i,t)}))).join(`
`)}async function Lot(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Rot(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Mot(e,t={}){const{width:r,height:n}=gde(e,t),a=await mj(e,t,!0);return await Lot(a,t),await Ede(a,t),Iot(a,t),await rot(a,r,n)}async function Uot(e,t={}){const{width:r,height:n}=gde(e,t),a=await Mot(e,t),s=await WS(a),i=document.createElement("canvas"),l=i.getContext("2d"),c=t.pixelRatio||Zit(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||eot(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,i.width,i.height)),l.drawImage(s,0,0,i.width,i.height),i}async function pj(e,t={}){return(await Uot(e,t)).toDataURL()}const Nde="recursos_crucigramas",gj="recursos_lineas_de_tiempo",xj="recursos_mapas_mentales",_de="recursos_sopas_de_letras",vj=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Qot=e=>{const t=$t(vt(ft,Nde),pr("fechaCreacion","desc"));return fr(t,r=>{const n=r.docs.map(a=>vj(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Hot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await hn(vt(ft,Nde),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Vot=e=>{const t=$t(vt(ft,gj),pr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>vj(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},zot=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,gj,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},$ot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,gj),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Got=async e=>{try{const t=sr(ft,gj,e);await Ra(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Kot=e=>{const t=$t(vt(ft,xj),pr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>vj(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},qot=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,xj,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Wot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,xj),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Xot=async e=>{try{const t=sr(ft,xj,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Yot=e=>{const t=$t(vt(ft,_de),pr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>vj(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Jot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,_de),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Zot=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),elt=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),tlt=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),rlt=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return o.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[o.jsx(L1,{type:"target",position:Nr.Left,className:"w-2 h-2 !bg-slate-400"}),o.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&o.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),o.jsx(L1,{type:"source",position:Nr.Right,className:"w-2 h-2 !bg-slate-400"})]})},AD=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+AD(n,t),0),fD=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=AD(l,100);let A=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=AD(h,100),g=A+m/2-100/2;n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),A+=m})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((A,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:A.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:A.label,icon:A.icon,type:A.type},type:"custom"}),n.push({id:`e-${c.id}-${A.id}`,source:c.id,target:A.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Sde=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return o.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[o.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),o.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&o.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>o.jsx(Sde,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},nlt={custom:rlt},alt=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=C.useState(e.treeData),[s,i]=C.useState("tree"),[l,c]=C.useState(!1),[u,d,A]=Oit([]),[h,m,g]=Dit([]),{fitView:x}=hj();C.useEffect(()=>{const{nodes:k,edges:I}=fD(n,s);d(k),m(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(k,I)=>{const E=JSON.parse(JSON.stringify(n)),S=B=>B.id===k?(B.label=I,!0):(B.children||[]).some(S);S(E),a(E)},y=k=>{const I=JSON.parse(JSON.stringify(n)),E=S=>S.id===k?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(E);E(I),a(I)},w=k=>{const I=JSON.parse(JSON.stringify(n)),E=S=>{const B=(S.children||[]).findIndex(R=>R.id===k);return B!==-1?(S.children.splice(B,1),!0):(S.children||[]).some(E)};E(I),a(I)},_=()=>{c(!0);const{nodes:k,edges:I}=fD(n,s);r({...e,treeData:n,nodes:k,edges:I}),setTimeout(()=>c(!1),1e3)},j=async k=>{const I=document.querySelector(".react-flow");I&&pj(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=E,S.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),o.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:o.jsxs(Ade,{nodes:u,edges:h,onNodesChange:A,onEdgesChange:g,fitView:!0,nodeTypes:nlt,children:[o.jsx(Hit,{}),o.jsx(qit,{})]})}),o.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),o.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[o.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[o.jsx(elt,{})," Vista en árbol"]}),o.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[o.jsx(tlt,{})," Vista central"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:o.jsx(Sde,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>j(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),o.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},slt=({onBack:e,currentUser:t})=>{const[r,n]=C.useState("list"),[a,s]=C.useState([]),[i,l]=C.useState(null),[c,u]=C.useState(!1),[d,A]=C.useState(!0),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState("");C.useEffect(()=>{A(!0);const E=Kot(S=>{s(S),A(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${v}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const ee=(await(await new Ds(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(ee),q=U=>({id:crypto.randomUUID(),label:U.label||"Sin etiqueta",icon:U.icon||"🧠",type:U.type||"default",children:(U.children||[]).map(q)}),K=q(V),{nodes:X,edges:Z}=fD(K),G={tema:h,nivel:g,treeData:K,nodes:X,edges:Z},D=await Wot(G,t);l({...G,id:D,createdAt:new Date().toISOString()}),n("editor")}catch(R){console.error("AI Generation Error:",R),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await qot(E,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},j=E=>{l(E),n("editor")},k=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Xot(E)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return i?o.jsx(XM,{children:o.jsx(alt,{mapData:i,onBack:()=>n("list"),onSave:_})}):null;case"config":return o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),o.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>m(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),o.jsx("textarea",{id:"contenido",value:v,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?o.jsx(Zot,{}):"Generar Mapa con IA"})})]})]});case"list":default:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),o.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx("button",{onClick:()=>j(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),o.jsx("button",{onClick:()=>k(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):o.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?o.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("span",{className:"text-4xl",children:"🧠"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),I()]})},ilt=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),olt=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),llt=({onBack:e,currentUser:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState("Media"),[i,l]=C.useState(10),[c,u]=C.useState(!1),[d,A]=C.useState(Array(10).fill("")),[h,m]=C.useState(""),[g,x]=C.useState(null),[v,y]=C.useState({ai:!1,puzzle:!1,data:!0}),w=C.useRef(null);C.useEffect(()=>{y(P=>({...P,data:!0}));const R=Yot(P=>{n(P),y(F=>({...F,data:!1}))});return()=>R()},[]),C.useEffect(()=>{A(R=>{const P=Array(i).fill("");for(let F=0;F<Math.min(R.length,i);F++)P[F]=R[F];return P})},[i]);const _=(R,P)=>{const F=[...d];F[R]=P,A(F)},j=async()=>{if(h.trim()){y(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=new Ds(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),L=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,q=(await(await F.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(q);if(!K.palabras||!Array.isArray(K.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const Z=[...K.palabras.map(G=>G.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;Z.length<i;)Z.push("");A(Z)}catch(R){console.error("Error generating words with AI:",R),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(R=>({...R,ai:!1}))}}},k=(R,P,F,L,M,ee)=>{for(let V=0;V<R.length;V++){const q=F+V*M.y,K=L+V*M.x;if(q<0||q>=ee||K<0||K>=ee||P[q][K]&&P[q][K]!==R[V])return!1}return!0},I=(R,P,F,L,M)=>{for(let ee=0;ee<R.length;ee++)P[F+ee*M.y][L+ee*M.x]=R[ee]},E=async()=>{y(q=>({...q,puzzle:!0})),x(null),await new Promise(q=>setTimeout(q,100));const R=d.map(q=>q.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(R.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(q=>({...q,puzzle:!1}));return}const P=Math.max(...R.map(q=>q.length));let F=Math.max(P,R.length)+2;a==="Media"&&(F+=3),a==="Difícil"&&(F+=5),F=Math.min(Math.max(F,10),25);const L=Array(F).fill(null).map(()=>Array(F).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&M.push({x:1,y:-1}),a==="Difícil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const q of R.sort((K,X)=>X.length-K.length)){let K=!1;for(let X=0;X<100;X++){const Z=M[Math.floor(Math.random()*M.length)],G=Math.floor(Math.random()*F),D=Math.floor(Math.random()*F);if(k(q,L,G,D,Z,F)){I(q,L,G,D,Z),K=!0;break}}K||console.warn(`No se pudo colocar la palabra: ${q}`)}const ee=L.map(q=>q.map(K=>K||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:ee.map(q=>q.join("")),words:R.sort()};try{const q=await Jot(V,t);x({...V,id:q,createdAt:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar la sopa de letras.")}finally{y(q=>({...q,puzzle:!1}))}},S=()=>{w.current&&pj(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(R=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=R,P.click()}).catch(R=>{console.error("oops, something went wrong!",R),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var F;if(!g)return null;const R=((F=g.grid[0])==null?void 0:F.length)||1,P=g.grid.join("").split("");return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{ref:w,className:"p-6 bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:P.map((L,M)=>o.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},M))})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),o.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>o.jsx("li",{children:L},L))})]})]})}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),o.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?o.jsx("div",{className:"text-center py-10",children:"Cargando..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"🅰️"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&o.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),o.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{children:"Fácil"}),o.jsx("option",{children:"Media"}),o.jsx("option",{children:"Difícil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>o.jsx("button",{onClick:()=>{l(R),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),o.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&o.jsx("input",{type:"number",value:i,onChange:R=>l(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>m(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:j,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?o.jsx(ilt,{}):o.jsxs(o.Fragment,{children:[o.jsx(olt,{}),o.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((R,P)=>o.jsx("input",{type:"text",value:R,onChange:F=>_(P,F.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),o.jsx("div",{className:"text-right pt-4",children:o.jsx("button",{onClick:E,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},clt=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ult=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),dlt=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=C.useState(e),[s,i]=C.useState(null),l=C.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},A=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(m.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const k=(await(await new Ds(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),I=JSON.parse(k);a(E=>({...E,events:E.events.map(S=>S.id===m.id?{...S,date:I.date,description:I.description,icon:I.icon}:S).sort((S,B)=>parseInt(S.date)-parseInt(B.date))}))}catch(v){console.error("Error al generar descripción del hito:",v),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{l.current&&pj(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),o.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:o.jsxs("div",{ref:l,className:"relative p-10",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),o.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return o.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[o.jsx("div",{className:"w-1/2",children:x&&o.jsx("div",{className:"text-right pr-8",children:o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[o.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),o.jsx("div",{className:"z-10 flex-shrink-0",children:o.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),o.jsx("div",{className:"w-1/2",children:!x&&o.jsx("div",{className:"text-left pl-8",children:o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[o.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>o.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[o.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),o.jsx("button",{onClick:()=>A(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?o.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):o.jsx(ult,{})})]}),o.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[o.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),o.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Alt=({onBack:e,currentUser:t})=>{const[r,n]=C.useState("list"),[a,s]=C.useState([]),[i,l]=C.useState(null),[c,u]=C.useState(!1),[d,A]=C.useState(!0),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState("");C.useEffect(()=>{A(!0);const k=Vot(I=>{s(I),A(!1)});return()=>k()},[]);const w=async k=>{if(k.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&v?`entre ${g} y ${v}`:g?`a partir de ${g}`:v?`hasta ${v}`:"",S=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const M=(await(await new Ds(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(M);if(!ee.events||!Array.isArray(ee.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:v,events:ee.events.map(K=>({id:crypto.randomUUID(),date:K.date||"Sin fecha",description:K.description||"Sin descripción",icon:K.icon||"🗓️"}))},q=await $ot(V,t);l({...V,id:q,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},_=async k=>{try{await zot(k,t),n("list"),l(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la línea de tiempo.")}},j=async k=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Got(k)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?o.jsx(dlt,{timeline:i,onSave:_,onBack:()=>n("list")}):d?o.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"🕒"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"tema",value:h,onChange:k=>m(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),o.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:k=>x(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),o.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:k=>y(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?o.jsx(clt,{}):"Generar con IA"})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(k=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{l(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),o.jsx("button",{onClick:()=>j(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):o.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},flt=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uX=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),hlt=({onBack:e,currentUser:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState(10),[i,l]=C.useState(!1),[c,u]=C.useState(Array(10).fill("")),[d,A]=C.useState(Array(10).fill("")),[h,m]=C.useState(""),[g,x]=C.useState(null),[v,y]=C.useState(!1),[w,_]=C.useState({ai:!1,puzzle:!1,data:!0}),[j,k]=C.useState(null),I=C.useRef(null);C.useEffect(()=>{_(ee=>({...ee,data:!0}));const M=Qot(ee=>{const V=ee.map(q=>{const{grid_flat:K,grid_width:X,...Z}=q,G=[];if(K&&X>0)for(let D=0;D<K.length;D+=X)G.push(K.slice(D,D+X));return{...Z,grid:G}});n(V),_(q=>({...q,data:!1}))});return()=>M()},[]),C.useEffect(()=>{const M=a;u(ee=>Array.from({length:M},(V,q)=>ee[q]||"")),A(ee=>Array.from({length:M},(V,q)=>ee[q]||""))},[a]);const E=(M,ee)=>{const V=[...c];V[M]=ee,u(V)},S=(M,ee)=>{const V=[...d];V[M]=ee,A(V)},B=async()=>{if(h.trim()){_(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Ds(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),q=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let G=(await(await V.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const D=G.indexOf("{"),U=G.lastIndexOf("}");D!==-1&&U!==-1&&(G=G.substring(D,U+1)),G=G.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),G.includes("__SPLIT__")&&(G=G.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(oe,se,le,ue)=>{const ke=le.split("__SPLIT__").map(ae=>ae.trim().replace(/,$/,""));return se+ke.join(",")+ue})),G=G.replace(/,\s*]/g,"]");let z;try{z=JSON.parse(G)}catch{console.error("Respuesta IA no es JSON válido:",G),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),_(se=>({...se,ai:!1}));return}if(!z.items||!Array.isArray(z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const J=z.items.map(oe=>(oe.word||"").toUpperCase().replace(/\s/g,"")),re=z.items.map(oe=>oe.clue||"");u(Array.from({length:a},(oe,se)=>J[se]||"")),A(Array.from({length:a},(oe,se)=>re[se]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(M=>({...M,ai:!1}))}}},R=async M=>{const ee=c[M];if(!ee||!ee.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}k(M);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new Ds(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${ee}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,U=(await(await K.generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(U);z.clue&&S(M,z.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{k(null)}},P=C.useCallback(()=>{try{const M=c.map((Te,Le)=>({word:Te.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Le]})).filter(Te=>Te.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;M.sort((Te,Le)=>Le.word.length-Te.word.length);const ee=M[0].word.length,V=Math.max(ee,M.length)*2;let q=Array.from({length:V},()=>Array(V).fill(null));const K=[],X=M.shift(),Z=Math.floor(V/2),G=Math.floor((V-X.word.length)/2);for(let Te=0;Te<X.word.length;Te++)q[Z][G+Te]=X.word[Te];K.push({word:X.word,clue:X.clue,direction:"across",row:Z,col:G});for(const Te of M){let Le={score:-1,row:-1,col:-1,direction:"across"};for(const We of K)for(let xe=0;xe<We.word.length;xe++)for(let Oe=0;Oe<Te.word.length;Oe++)if(We.word[xe]===Te.word[Oe]){let Re=0,$e,et,ct;We.direction==="across"?(ct="down",$e=We.row-Oe,et=We.col+xe):(ct="across",$e=We.row+xe,et=We.col-Oe);let gt=!0;for(let It=0;It<Te.word.length;It++){const Mt=$e+(ct==="down"?It:0),Pt=et+(ct==="across"?It:0);if(Mt<0||Mt>=V||Pt<0||Pt>=V){gt=!1;break}const Qt=q[Mt][Pt],wt=Mt===We.row+(We.direction==="down"?xe:0)&&Pt===We.col+(We.direction==="across"?xe:0);if(Qt&&!wt){gt=!1;break}if(Qt&&wt&&Qt!==Te.word[Oe]){gt=!1;break}if(!wt){if(ct==="across"&&(Mt>0&&q[Mt-1][Pt]||Mt<V-1&&q[Mt+1][Pt])){gt=!1;break}if(ct==="down"&&(Pt>0&&q[Mt][Pt-1]||Pt<V-1&&q[Mt][Pt+1])){gt=!1;break}}Qt&&Re++}gt&&Re>Le.score&&(Le={score:Re,row:$e,col:et,direction:ct})}if(Le.score>-1){for(let We=0;We<Te.word.length;We++){const xe=Le.row+(Le.direction==="down"?We:0),Oe=Le.col+(Le.direction==="across"?We:0);q[xe][Oe]=Te.word[We]}K.push({word:Te.word,clue:Te.clue,direction:Le.direction,row:Le.row,col:Le.col})}}let D=V,U=-1,z=V,J=-1;K.forEach(Te=>{D=Math.min(D,Te.row),U=Math.max(U,Te.row+(Te.direction==="down"?Te.word.length-1:0)),z=Math.min(z,Te.col),J=Math.max(J,Te.col+(Te.direction==="across"?Te.word.length-1:0))}),U===-1&&(D=K[0].row,U=K[0].row,z=K[0].col,J=K[0].col+K[0].word.length-1);const re=1,oe=Math.max(0,D-re),se=Math.min(V,U+1+re),le=Math.max(0,z-re),ue=Math.min(V,J+1+re),ke=q.slice(oe,se).map(Te=>Te.slice(le,ue)),ae=K.map(Te=>({...Te,row:Te.row-oe,col:Te.col-le})).sort((Te,Le)=>Te.row-Le.row||Te.col-Le.col);let Ne=1;const je=[],_e=new Map;ae.forEach(Te=>{const Le=`${Te.row},${Te.col}`;_e.has(Le)||_e.set(Le,Ne++),je.push({...Te,number:_e.get(Le)})});const me=ke.map(Te=>Te.map(Le=>({char:Le,number:null})));return je.forEach(Te=>{const Le=`${Te.row},${Te.col}`;me[Te.row]&&me[Te.row][Te.col]!==void 0&&(me[Te.row][Te.col].number=_e.get(Le))}),{grid:me,clues:{across:je.filter(Te=>Te.direction==="across").sort((Te,Le)=>Te.number-Le.number),down:je.filter(Te=>Te.direction==="down").sort((Te,Le)=>Te.number-Le.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),F=async()=>{var ee;_(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const M=P();if(M){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:M.grid,clues:M.clues},{grid:q,...K}=V,X={...K,grid_flat:q.flat().map(Z=>Z.char||""),grid_width:((ee=q[0])==null?void 0:ee.length)||0};try{const Z=await Hot(X,t);x({...V,id:Z,fechaCreacion:new Date().toISOString()})}catch(Z){console.error("Error saving puzzle:",Z),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(V=>({...V,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{pj(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const ee=document.createElement("a");ee.download="crucigrama.png",ee.href=M,ee.click()}).catch(M=>console.error("Error generating image",M))},100))};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"✏️"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsx("div",{children:o.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((M,ee)=>o.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&o.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),v&&M.char&&o.jsx("span",{children:M.char})]},ee))})}),o.jsxs("div",{className:"text-sm",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),o.jsx("ul",{className:"space-y-1",children:g.clues.across.map(M=>o.jsxs("li",{children:[o.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),o.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),o.jsx("ul",{className:"space-y-1",children:g.clues.down.map(M=>o.jsxs("li",{children:[o.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),o.jsx("span",{children:"Mostrar Solución"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),o.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):o.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>o.jsx("button",{onClick:()=>{s(M),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),o.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&o.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:B,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?o.jsx(flt,{}):o.jsxs(o.Fragment,{children:[o.jsx(uX,{}),o.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),o.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,ee)=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{type:"text",value:c[ee],onChange:V=>E(ee,V.target.value),placeholder:`Palabra ${ee+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[o.jsx("textarea",{value:d[ee],onChange:V=>S(ee,V.target.value),placeholder:`Pista ${ee+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:()=>R(ee),disabled:j===ee,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:j===ee?o.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):o.jsx(uX,{})})]})]},ee))}),o.jsx("div",{className:"text-right pt-4",children:o.jsx("button",{onClick:F,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},mlt=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{const a=xZ(kF,async s=>{if(s&&s.email)try{const i=await Dte(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},plt=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],glt=({recurso:e,onClick:t})=>o.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[o.jsx("div",{className:"text-6xl mb-4",children:e.icon}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),xlt=()=>{const[e,t]=C.useState("menu"),{currentUser:r}=mlt(),n=()=>e!=="menu"&&!r?o.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?o.jsx(slt,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?o.jsx(llt,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?o.jsx(Alt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?o.jsx(hlt,{onBack:()=>t("menu"),currentUser:r}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:plt.map(a=>o.jsx(glt,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return o.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},vlt="evaluaciones_formativas",blt="calificaciones_formativas",kde="trabajos_grupales_formativos",jde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},ylt=(e,t)=>{const r=$t(vt(ft,vlt),Ir("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>jde(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},wlt=e=>{const t=$t(vt(ft,blt));return fr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},Elt=(e,t)=>{const r=$t(vt(ft,kde),Ir("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>jde(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Clt=async e=>{try{const{id:t,...r}=e,n=sr(ft,kde,t);await yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Nlt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState({}),[s,i]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[A,h]=C.useState(!1),[m,g]=C.useState(null),x=C.useRef(null);C.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const j=ylt(e.curso,r),k=wlt(a),I=Elt(e.curso,E=>{i(E),c(!1)});return()=>{j(),k(),I()}},[e.curso]);const v=C.useMemo(()=>{if(!e.curso)return[];const k=t.filter(I=>I.curso===e.curso).reduce((I,E)=>((I[E.asignatura]=I[E.asignatura]||[]).push(E),I),{});return Object.entries(k).map(([I,E])=>{let S=0,B=0;const R=E.map(F=>{var ee;const L=(ee=n[F.id])==null?void 0:ee[e.nombreCompleto];let M="No Trabajado";return L==="trabajado"?(S+=7,B++,M="Trabajado"):L==="no trabajado"&&(S+=2,B++,M="No Trabajado"),{id:F.id,nombreActividad:F.nombreActividad,fecha:F.fecha,estado:M}}).filter(F=>{var L;return(L=n[F.id])==null?void 0:L[e.nombreCompleto]}),P=B>0?(S/B).toFixed(1):"N/A";return{asignatura:I,promedio:P,actividades:R.sort((F,L)=>new Date(L.fecha).getTime()-new Date(F.fecha).getTime())}}).filter(I=>I.actividades.length>0).sort((I,E)=>I.asignatura.localeCompare(E.asignatura))},[t,n,e]);C.useEffect(()=>{if(v.reduce((B,R)=>B+R.actividades.length,0)===0){d(null);return}const k=v.reduce((B,R)=>{const P=parseFloat(R.promedio);return isNaN(P)?B:B+P},0),I=v.length>0?k/v.length:0,E=XC.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,S=XC.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:E,insigniasGanadas:S}),x.current!==null){const B=XC.find(R=>x.current>=R.promedioMin&&x.current<=R.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&g(E)}x.current=I},[v]);const y=C.useMemo(()=>e.curso?s.filter(j=>j.curso===e.curso).map(j=>{const k=j.grupos.find(I=>I.integrantes.some(E=>E.nombre===e.nombreCompleto));return k?{...j,miGrupo:k}:null}).filter(j=>j!==null).sort((j,k)=>new Date(k.fechaPresentacion).getTime()-new Date(j.fechaPresentacion).getTime()):[],[s,e]),w=async(j,k)=>{const I=s.find(S=>S.id===j);if(!I)return;const E={...I,grupos:I.grupos.map(S=>S.integrantes.some(R=>R.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(R=>R.nombre===e.nombreCompleto?{...R,rol:k||void 0}:R)}:S)};try{await Clt(E)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},_=j=>{const k=parseFloat(j);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return l?o.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:j=>j.stopPropagation(),children:[o.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),o.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),o.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),o.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),o.jsx("div",{className:"overflow-y-auto space-y-3",children:XC.map(j=>{const k=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===j.nombre);return o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[o.jsx("div",{className:"text-5xl",children:j.emoji}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:j.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",j.promedioMin," y ",j.promedioMax]})]})]},j.nombre)})})]})}),o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),o.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),o.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),o.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),o.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),o.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(j=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j.asignatura}),o.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(j.promedio)}`,children:j.promedio})]}),o.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),j.actividades.map(k=>o.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),o.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},j.asignatura))}):o.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-5xl",children:"📊"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),o.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),o.jsx("div",{className:"space-y-4",children:y.map(j=>{const k=j.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),I=Rte.filter(E=>!k.includes(E));return o.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[o.jsx("h3",{className:"font-bold text-slate-800",children:j.nombreActividad}),o.jsxs("p",{className:"text-sm text-slate-500",children:[j.asignatura," - Presentación: ",new Date(j.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",j.miGrupo.numero]}),o.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:j.miGrupo.integrantes.map(E=>o.jsxs("li",{className:"grid grid-cols-2 items-center",children:[o.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?o.jsxs("select",{value:E.rol||"",onChange:S=>w(j.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[o.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!I.includes(E.rol)&&o.jsx("option",{value:E.rol,children:E.rol}),I.map(S=>o.jsx("option",{value:S,children:S},S))]}):o.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},j.id)})})]})]})},_lt="proyectos_interdisciplinarios",Bde="entregas_interdisciplinarias",Tde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Slt=(e,t)=>{const r=$t(vt(ft,_lt),Ir("cursos","array-contains",e));return fr(r,n=>{const a=n.docs.map(s=>Tde(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},klt=(e,t)=>{const r=$t(vt(ft,Bde),Ir("estudianteId","==",e));return fr(r,n=>{const a=n.docs.map(s=>Tde(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},jlt=async e=>{try{const{id:t,...r}=e,n=sr(ft,Bde,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Blt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState([]),[s,i]=C.useState(null),[l,c]=C.useState(!0);C.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const A=Slt(e.curso,r),h=klt(e.id,m=>{a(m),c(!1)});return()=>{A(),h()}},[e.curso,e.id]);const u=async A=>{try{await jlt(A)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:A,tarea:h})=>{const m=C.useMemo(()=>{const k=n.find(I=>I.planificacionId===A.id&&I.tareaId===h.id);return k||{id:`${A.id}_${h.id}_${e.id}`,planificacionId:A.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[A.id,h.id,n]),[g,x]=C.useState(!1),[v,y]=C.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=k=>{var E;const I=(E=k.target.files)==null?void 0:E[0];I&&(alert(`Simulación: Archivo "${I.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},j=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return o.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("input",{type:"checkbox",checked:m.completada,onChange:j,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&o.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),o.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&o.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[o.jsx("textarea",{value:v.observaciones,onChange:k=>y({...v,observaciones:k.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),o.jsx("input",{type:"url",value:v.enlace,onChange:k=>y({...v,enlace:k.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),o.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&o.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&o.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),o.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?o.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(A=>{const h=A.tareas||[],g=n.filter(v=>v.planificacionId===A.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsxs("button",{onClick:()=>i(s===A.id?null:A.id),className:"w-full text-left",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:A.nombreProyecto}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[o.jsx("span",{children:"Progreso"}),o.jsxs("span",{children:[Math.round(x),"%"]})]}),o.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===A.id&&o.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>o.jsx(d,{plan:A,tarea:v},v.id)):o.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},A.id)}):o.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[o.jsx("span",{className:"text-5xl",children:"🎉"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),o.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Tlt=({data:e})=>o.jsx("div",{className:"space-y-4",children:e.map((r,n)=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),o.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Ilt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,i]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(xw),A=C.useCallback(async()=>{a(!0);try{const v=(await Zet(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=C.useCallback(async()=>{try{const x=await ett();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);C.useEffect(()=>{A(),h()},[A,h]);const m=C.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new vr;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),gi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const j=[],k=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(I=>{j.push([{content:I.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),I.criteria.forEach(E=>{const S=x.rubricaResultados[E.name],B=S?k[S-1]:"No evaluado";j.push([E.name,B])})}),gi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:j,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(j,k)=>{if(!k)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(j,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const I=v.splitTextToSize(k.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(I,14,y),y+=I.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=v.getNumberOfPages();for(let j=1;j<=_;j++)v.setPage(j),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${j} de ${_}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{children:[o.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),o.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[o.jsx(Pte,{})," Exportar PDF"]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[o.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),o.jsx("h3",{children:"Observaciones Generales"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx(Tlt,{data:m})})]})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),o.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>o.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&o.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&o.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsx("span",{className:"text-5xl",children:"👍"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Flt=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=vt(wr,"planificaciones"),r=$t(t,pr("fechaCreacion","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Olt=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=vt(wr,"planificaciones"),n=$t(r,Ir("userId","==",e),pr("fechaCreacion","desc"));return fr(n,s=>{const i=[];s.forEach(l=>{const c=l.data();i.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Dlt(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Plt=Dlt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Rlt={value:function(){}};function Ide(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Q5(r)}function Q5(e){this._=e}function Llt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Q5.prototype=Ide.prototype={constructor:Q5,on:function(e,t){var r=this._,n=Llt(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Mlt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=dX(r[a],e.name,t);else if(t==null)for(a in r)r[a]=dX(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Q5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Mlt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function dX(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Rlt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Ult=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Ide},Symbol.toStringTag,{value:"Module"})),Qlt=qhe(Ult);var t6,AX;function Hlt(){if(AX)return t6;AX=1;const e=Qlt.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;t6=function(){var j=[256,256],k=s,I=i,E=c,S=l,B=l,R=u,P=d,F=x,L=[],M=1/0,ee=e("word","end"),V=null,q=Math.random,K={},X=w;K.canvas=function(D){return arguments.length?(X=_(D),K):X},K.start=function(){var D=Z(X()),U=y((j[0]>>5)*j[1]),z=null,J=L.length,re=-1,oe=[],se=L.map(function(ue,ke){return ue.text=k.call(this,ue,ke),ue.font=I.call(this,ue,ke),ue.style=S.call(this,ue,ke),ue.weight=B.call(this,ue,ke),ue.rotate=R.call(this,ue,ke),ue.size=~~E.call(this,ue,ke),ue.padding=P.call(this,ue,ke),ue}).sort(function(ue,ke){return ke.size-ue.size});return V&&clearInterval(V),V=setInterval(le,0),le(),K;function le(){for(var ue=Date.now();Date.now()-ue<M&&++re<J&&V;){var ke=se[re];ke.x=j[0]*(q()+.5)>>1,ke.y=j[1]*(q()+.5)>>1,A(D,ke,se,re),ke.hasText&&G(U,ke,z)&&(oe.push(ke),ee.call("word",K,ke),z?m(z,ke):z=[{x:ke.x+ke.x0,y:ke.y+ke.y0},{x:ke.x+ke.x1,y:ke.y+ke.y1}],ke.x-=j[0]>>1,ke.y-=j[1]>>1)}re>=J&&(K.stop(),ee.call("end",K,oe,z))}},K.stop=function(){V&&(clearInterval(V),V=null);for(const D of L)delete D.sprite;return K};function Z(D){const U=D.getContext("2d",{willReadFrequently:!0});D.width=D.height=1;const z=Math.sqrt(U.getImageData(0,0,1,1).data.length>>2);return D.width=(n<<5)/z,D.height=a/z,U.fillStyle=U.strokeStyle="red",{context:U,ratio:z}}function G(D,U,z){j[0],j[1];for(var J=U.x,re=U.y,oe=Math.sqrt(j[0]*j[0]+j[1]*j[1]),se=F(j),le=q()<.5?1:-1,ue=-le,ke,ae,Ne;(ke=se(ue+=le))&&(ae=~~ke[0],Ne=~~ke[1],!(Math.min(Math.abs(ae),Math.abs(Ne))>=oe));)if(U.x=J+ae,U.y=re+Ne,!(U.x+U.x0<0||U.y+U.y0<0||U.x+U.x1>j[0]||U.y+U.y1>j[1])&&(!z||g(U,z))&&!h(U,D,j[0])){for(var je=U.sprite,_e=U.width>>5,me=j[0]>>5,Te=U.x-(_e<<4),Le=Te&127,We=32-Le,xe=U.y1-U.y0,Oe=(U.y+U.y0)*me+(Te>>5),Re,$e=0;$e<xe;$e++){Re=0;for(var et=0;et<=_e;et++)D[Oe+et]|=Re<<We|(et<_e?(Re=je[$e*_e+et])>>>Le:0);Oe+=me}return!0}return!1}return K.timeInterval=function(D){return arguments.length?(M=D??1/0,K):M},K.words=function(D){return arguments.length?(L=D,K):L},K.size=function(D){return arguments.length?(j=[+D[0],+D[1]],K):j},K.font=function(D){return arguments.length?(I=_(D),K):I},K.fontStyle=function(D){return arguments.length?(S=_(D),K):S},K.fontWeight=function(D){return arguments.length?(B=_(D),K):B},K.rotate=function(D){return arguments.length?(R=_(D),K):R},K.text=function(D){return arguments.length?(k=_(D),K):k},K.spiral=function(D){return arguments.length?(F=r[D]||D,K):F},K.fontSize=function(D){return arguments.length?(E=_(D),K):E},K.padding=function(D){return arguments.length?(P=_(D),K):P},K.random=function(D){return arguments.length?(q=D,K):q},K.on=function(){var D=ee.on.apply(ee,arguments);return D===ee?K:D},K};function s(j){return j.text}function i(){return"serif"}function l(){return"normal"}function c(j){return Math.sqrt(j.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function A(j,k,I,E){if(!k.sprite){var S=j.context,B=j.ratio;S.clearRect(0,0,(n<<5)/B,a/B);var R=0,P=0,F=0,L=I.length;for(--E;++E<L;){k=I[E],S.save(),S.font=k.style+" "+k.weight+" "+~~((k.size+1)/B)+"px "+k.font;const ke=S.measureText(k.text),ae=-Math.floor(ke.width/2);let Ne=(ke.width+1)*B,je=k.size<<1;if(k.rotate){var M=Math.sin(k.rotate*t),ee=Math.cos(k.rotate*t),V=Ne*ee,q=Ne*M,K=je*ee,X=je*M;Ne=Math.max(Math.abs(V+X),Math.abs(V-X))+31>>5<<5,je=~~Math.max(Math.abs(q+K),Math.abs(q-K))}else Ne=Ne+31>>5<<5;if(je>F&&(F=je),R+Ne>=n<<5&&(R=0,P+=F,F=0),P+je>=a)break;S.translate((R+(Ne>>1))/B,(P+(je>>1))/B),k.rotate&&S.rotate(k.rotate*t),S.fillText(k.text,ae,0),k.padding&&(S.lineWidth=2*k.padding,S.strokeText(k.text,ae,0)),S.restore(),k.width=Ne,k.height=je,k.xoff=R,k.yoff=P,k.x1=Ne>>1,k.y1=je>>1,k.x0=-k.x1,k.y0=-k.y1,k.hasText=!0,R+=Ne}for(var Z=S.getImageData(0,0,(n<<5)/B,a/B).data,G=[];--E>=0;)if(k=I[E],!!k.hasText){for(var D=k.width,U=D>>5,z=k.y1-k.y0,J=0;J<z*U;J++)G[J]=0;if(R=k.xoff,R==null)return;P=k.yoff;for(var re=0,oe=-1,se=0;se<z;se++){for(var J=0;J<D;J++){var le=U*se+(J>>5),ue=Z[(P+se)*(n<<5)+(R+J)<<2]?1<<31-J%32:0;G[le]|=ue,re|=ue}re?oe=se:(k.y0++,z--,se--,P++)}k.y1=k.y0+oe,k.sprite=G.slice(0,(k.y1-k.y0)*U)}}}function h(j,k,I){I>>=5;for(var E=j.sprite,S=j.width>>5,B=j.x-(S<<4),R=B&127,P=32-R,F=j.y1-j.y0,L=(j.y+j.y0)*I+(B>>5),M,ee=0;ee<F;ee++){M=0;for(var V=0;V<=S;V++)if((M<<P|(V<S?(M=E[ee*S+V])>>>R:0))&k[L+V])return!0;L+=I}return!1}function m(j,k){var I=j[0],E=j[1];k.x+k.x0<I.x&&(I.x=k.x+k.x0),k.y+k.y0<I.y&&(I.y=k.y+k.y0),k.x+k.x1>E.x&&(E.x=k.x+k.x1),k.y+k.y1>E.y&&(E.y=k.y+k.y1)}function g(j,k){return j.x+j.x1>k[0].x&&j.x+j.x0<k[1].x&&j.y+j.y1>k[0].y&&j.y+j.y0<k[1].y}function x(j){var k=j[0]/j[1];return function(I){return[k*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function v(j){var k=4,I=k*j[0]/j[1],E=0,S=0;return function(B){var R=B<0?-1:1;switch(Math.sqrt(1+4*R*B)-R&3){case 0:E+=I;break;case 1:S+=k;break;case 2:E-=I;break;default:S-=k;break}return[E,S]}}function y(j){for(var k=[],I=-1;++I<j;)k[I]=0;return k}function w(){return document.createElement("canvas")}function _(j){return typeof j=="function"?j:function(){return j}}return t6}var Vlt=Hlt();const zlt=jl(Vlt),$lt=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Glt=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Klt=()=>o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qlt=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,i]=C.useState(null),l=C.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return C.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(l)c=Flt(u);else{const d=e.email||e.id||"";c=Olt(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},Wlt=({plan:e,onClose:t})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[o.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),o.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:o.jsx(Glt,{})})]}),o.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[o.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),o.jsxs("p",{className:"mt-2",children:[o.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),o.jsx("div",{className:"mt-3",children:o.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>o.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?o.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>o.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[o.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),fX=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Xlt=["1º Medio","2º Medio","3º Medio","4º Medio"],Ylt=({words:e})=>{const t=C.useRef(null);return C.useEffect(()=>{if(!e.length||!t.current)return;const r=Ru(t.current);r.selectAll("*").remove();const n=zlt().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,l)=>_k(Plt)(l.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),o.jsx("svg",{ref:t})},Jlt=({planificaciones:e})=>{const[t,r]=C.useState("todos"),[n,a]=C.useState("todos"),s=C.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=C.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=C.useMemo(()=>{const d=fX.reduce((A,h)=>({...A,[h]:0}),{});return i.forEach(A=>{var h,m;return(m=(h=A.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=fX.length-x)})}),Object.entries(d).map(([A,h])=>({text:A,value:h})).sort((A,h)=>h.value-A.value)},[i]),c=C.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[o.jsx("option",{value:"todos",children:"Todos los Niveles"}),Xlt.map(d=>o.jsx("option",{value:d,children:d},d))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>o.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?o.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):o.jsx("ul",{className:"space-y-3",children:l.map((d,A)=>o.jsxs("li",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:A+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),o.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?o.jsx(Ylt,{words:c}):o.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Zlt=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=qlt(e),[s,i]=C.useState("seguimiento"),[l,c]=C.useState("1º"),[u,d]=C.useState(null),[A,h]=C.useState(null),m=C.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{children:"Usuario no autenticado."})});if(r)return o.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[o.jsx(Klt,{}),o.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return o.jsx("div",{className:"text-center py-8",children:o.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>o.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):o.jsx("div",{className:"space-y-4",children:js.map(v=>{const y=m.filter(_=>_.asignatura===v);if(y.length===0)return null;const w=u===v;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[o.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),o.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:o.jsx($lt,{})})]}),w&&o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:o.jsx("ul",{className:"space-y-3",children:y.map(_=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},v)})})]});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&o.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),o.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&o.jsx(Jlt,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),A&&o.jsx(Wlt,{plan:A,onClose:()=>h(null)})]})},bj="analisisTaxonomicos",ect=async()=>{try{const e=$t(vt(wr,bj),pr("uploadDate","desc"));return(await Dn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},tct=async e=>{if(!e)return[];try{const t=$t(vt(wr,bj),Ir("userId","==",e),pr("uploadDate","desc"));return(await Dn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},rct=async e=>{try{return{id:(await hn(vt(wr,bj),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},nct=async e=>{try{const t=sr(wr,bj,e);await Ra(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},hX=["1º Medio","2º Medio","3º Medio","4º Medio"],Kf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Jx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},act=()=>o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),sct=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,i]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(""),[A,h]=C.useState(!1),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState(""),[_,j]=C.useState(""),[k,I]=C.useState(""),[E,S]=C.useState(""),[B,R]=C.useState("resumen"),P=C.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const X=e.profile==="SUBDIRECCION"?await ect():await tct(e.id);r(X),i(null)}catch(X){console.error("Error al cargar análisis:",X),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);C.useEffect(()=>{P()},[P]);const F=async X=>{var G;const Z=(G=X.target.files)==null?void 0:G[0];if(Z){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Z.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(Z),d(Z.name),i(null);const U=new FileReader;U.onloadend=()=>{var J;const z=(J=U.result)==null?void 0:J.split(",")[1];if(!z){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:Z.type,data:z})},U.onerror=()=>i("Error al leer el archivo."),U.readAsDataURL(Z)}},L=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const X=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,Z={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Kf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Kf.reduce((G,D)=>({...G,[D]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{T1("Análisis Taxonómico",e);const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=new Ds(G).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:Z}}),z={inlineData:{mimeType:x.mimeType,data:x.data}},re=(await U.generateContent([X,z])).response.text();let oe;try{oe=JSON.parse(re)}catch(ue){throw console.error("Error al parsear JSON:",ue),console.error("Respuesta recibida (no es JSON válido):",re),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const se={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:oe.analysisResults,summary:oe.summary,nivel:y,asignatura:_},le=await rct(se);await P(),c(le),d(""),g(null),v(null),w(""),j("")}catch(G){console.error(G);const D=G instanceof Error?G.message:"Hubo un error al analizar el documento.";i(D)}finally{h(!1)}},M=async X=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await nct(X),await P(),(l==null?void 0:l.id)===X&&c(null)}catch{i("No se pudo eliminar el análisis.")}},ee=C.useMemo(()=>t.filter(X=>{const Z=k?X.nivel===k:!0,G=E?X.asignatura===E:!0;return Z&&G}),[t,k,E]),V=C.useMemo(()=>{const X={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};ee.forEach(G=>{Kf.forEach(D=>{var z;const U=((z=G.summary)==null?void 0:z[D])||0;X[D]+=U})});const Z=Object.values(X).reduce((G,D)=>G+D,0);return{acc:X,total:Z}},[ee]),q=C.useMemo(()=>{const X=new Map;ee.forEach(G=>{const D=G.asignatura||"Sin asignatura";X.has(D)||X.set(D,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const U=X.get(D);Kf.forEach(z=>{var J;U[z]+=((J=G.summary)==null?void 0:J[z])||0})});const Z=Array.from(X.entries()).map(([G,D])=>({asignatura:G,counts:D,total:Object.values(D).reduce((U,z)=>U+z,0)}));return Z.sort((G,D)=>D.total-G.total),Z},[ee]),K=C.useMemo(()=>l?Object.values(l.summary).reduce((X,Z)=>X+(Z||0),0):0,[l]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),o.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:o.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),o.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:F,accept:".pdf,.doc,.docx"}),o.jsx("span",{children:"Cargue un archivo"})]}),o.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),o.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsxs("select",{value:y,onChange:X=>w(X.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione"}),hX.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsxs("select",{value:_,onChange:X=>j(X.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione"}),js.map(X=>o.jsx("option",{value:X,children:X},X))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),o.jsx("input",{type:"text",id:"documentName",value:u,onChange:X=>d(X.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("button",{onClick:L,disabled:A||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:A?o.jsx(act,{}):"Analizar con IA"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?o.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(X=>o.jsxs("button",{onClick:()=>c(X),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===X.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[o.jsx("p",{className:"font-semibold truncate",children:X.documentName}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(X.uploadDate).toLocaleString("es-CL")}),(X.nivel||X.asignatura)&&o.jsxs("p",{className:"text-xs text-slate-500",children:[X.nivel||"Nivel s/i"," • ",X.asignatura||"Asignatura s/i"]})]},X.id))})]})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),o.jsxs("select",{value:k,onChange:X=>I(X.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos"}),hX.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),o.jsxs("select",{value:E,onChange:X=>S(X.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todas"}),js.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsx("button",{type:"button",onClick:()=>{I(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>R("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),o.jsx("button",{onClick:()=>R("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),B==="resumen"?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ee.length," análisis considerados"]})]}),o.jsx("div",{className:"space-y-3",children:Kf.map(X=>{const Z=V.acc[X],G=V.total>0?Z/V.total*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:X}),o.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Z," (",G.toFixed(0),"%)"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:`${Jx[X]} h-4 rounded-full`,style:{width:`${G}%`}})})]},X)})}),o.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Kf.map(X=>o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[o.jsx("span",{className:"text-sm",children:X}),o.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Jx[X]}`,children:V.acc[X]})]},X))})]}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[q.length," asignaturas comparadas"]})]}),q.length===0?o.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):o.jsx("div",{className:"space-y-5",children:q.map(X=>{const Z=X.total||1;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:X.asignatura}),o.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[X.total," ítems"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Kf.map(G=>{const D=X.counts[G]||0,U=D/Z*100;return o.jsx("div",{className:`${Jx[G]} h-5`,style:{width:`${U}%`},title:`${G}: ${D} (${U.toFixed(0)}%)`},G)})}),o.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Kf.map(G=>o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded ${Jx[G]}`}),o.jsx("span",{children:G})]},G))})]},X.asignatura)})})]})]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&o.jsxs(o.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),o.jsx("button",{onClick:()=>M(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",K," preguntas)"]}),o.jsx("div",{className:"space-y-3",children:Kf.map(X=>{const Z=l.summary[X]||0,G=K>0?Z/K*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:X}),o.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Z," (",G.toFixed(0),"%)"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:`${Jx[X]} h-4 rounded-full`,style:{width:`${G}%`}})})]},X)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),o.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((X,Z)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:X.question}),o.jsx("td",{className:"px-4 py-3 text-sm",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Jx[X.habilidadBloom]}`,children:X.habilidadBloom})})]},Z))})]})})]})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},XS="empresas_practicas",ict="usuarios",ZM="rutas_supervision",eU=e=>{const t=e.data();return{id:e.id,...t}};async function oct(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const lct=e=>{const t=$t(vt(ft,XS),pr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>eU(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},cct=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await oct(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=sr(ft,XS,n);return await yi(s,a,{merge:!0}),n}else return(await hn(vt(ft,XS),{...r,createdAt:Fs()})).id},uct=async e=>{const t=sr(ft,XS,e);await Ra(t)},dct=e=>{const t=$t(vt(ft,ict),Ir("profile","==","PROFESORADO"),pr("nombreCompleto","asc"));return fr(t,r=>{const n=r.docs.map(a=>eU(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},Act=async e=>(await hn(vt(ft,ZM),{...e,createdAt:Fs()})).id,fct=e=>{const t=$t(vt(ft,ZM),pr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>eU(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},hct=async e=>{const t=sr(ft,ZM,e);await Ra(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ug=function(){return ug=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ug.apply(this,arguments)};function mct(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(A){A(d)})).then(i,l)}c((n=n.apply(e,[])).next())})}function pct(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(A){d=[6,A],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}function dg(e){return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function Fde(e){var t=function(r,n){if(dg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(dg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return dg(t)==="symbol"?t:String(t)}function kv(e,t,r){return(t=Fde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mX(Object(r),!0).forEach(function(n){kv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fde(n.key),n)}}function hD(e,t){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},hD(e,t)}function YS(e){return YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YS(e)}function gct(e,t){if(t&&(dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function xct(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=YS(e);if(t){var a=YS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return gct(this,r)}}function mD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ode(e,t){if(e){if(typeof e=="string")return mD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mD(e,t):void 0}}function tU(e){return function(t){if(Array.isArray(t))return mD(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Ode(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var vct=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Su="-ms-",gX="-moz-",Zn="-webkit-",rU="decl",Dde="@keyframes",bct=Math.abs,yj=String.fromCharCode,yct=Object.assign;function Pde(e){return e.trim()}function sa(e,t,r){return e.replace(t,r)}function pD(e,t){return e.indexOf(t)}function xo(e,t){return 0|e.charCodeAt(t)}function R2(e,t,r){return e.slice(t,r)}function MA(e){return e.length}function nU(e){return e.length}function LN(e,t){return t.push(e),e}var wj=1,M1=1,Rde=0,lc=0,hi=0,Eb="";function Ej(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:wj,column:M1,length:i,return:""}}function Iy(e,t){return yct(Ej("",null,null,"",null,null,0),e,{length:-e.length},t)}function $c(){return hi=lc<Rde?xo(Eb,lc++):0,M1++,hi===10&&(M1=1,wj++),hi}function nf(){return xo(Eb,lc)}function H5(){return lc}function RE(e,t){return R2(Eb,e,t)}function L2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lde(e){return wj=M1=1,Rde=MA(Eb=e),lc=0,[]}function Mde(e){return Eb="",e}function V5(e){return Pde(RE(lc-1,gD(e===91?e+2:e===40?e+1:e)))}function wct(e){for(;(hi=nf())&&hi<33;)$c();return L2(e)>2||L2(hi)>3?"":" "}function Ect(e,t){for(;--t&&$c()&&!(hi<48||hi>102||hi>57&&hi<65||hi>70&&hi<97););return RE(e,H5()+(t<6&&nf()==32&&$c()==32))}function gD(e){for(;$c();)switch(hi){case e:return lc;case 34:case 39:e!==34&&e!==39&&gD(hi);break;case 40:e===41&&gD(e);break;case 92:$c()}return lc}function Cct(e,t){for(;$c()&&e+hi!==57&&(e+hi!==84||nf()!==47););return"/*"+RE(t,lc-1)+"*"+yj(e===47?e:$c())}function Nct(e){for(;!L2(nf());)$c();return RE(e,lc)}function xX(e){return Mde(z5("",null,null,null,[""],e=Lde(e),0,[0],e))}function z5(e,t,r,n,a,s,i,l,c){for(var u=0,d=0,A=i,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",j=a,k=s,I=n,E=_;v;)switch(g=w,w=$c()){case 40:if(g!=108&&xo(E,A-1)==58){pD(E+=sa(V5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=V5(w);break;case 9:case 10:case 13:case 32:E+=wct(g);break;case 92:E+=Ect(H5()-1,7);continue;case 47:switch(nf()){case 42:case 47:LN(_ct(Cct($c(),H5()),t,r),c);break;default:E+="/"}break;case 123*x:l[u++]=MA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&MA(E)-A&&LN(m>32?bX(E+";",n,r,A-1):bX(sa(E," ","")+";",n,r,A-2),c);break;case 59:E+=";";default:if(LN(I=vX(E,t,r,u,d,a,l,_,j=[],k=[],A),s),w===123)if(d===0)z5(E,t,I,I,j,s,A,l,k);else switch(h===99&&xo(E,3)===110?100:h){case 100:case 109:case 115:z5(e,I,I,n&&LN(vX(e,I,I,0,0,a,l,_,a,j=[],A),k),a,k,A,l,n?j:k);break;default:z5(E,I,I,I,[""],k,0,l,k)}}u=d=m=0,x=y=1,_=E="",A=i;break;case 58:A=1+MA(E),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(hi=lc>0?xo(Eb,--lc):0,M1--,hi===10&&(M1=1,wj--),hi==125))continue}switch(E+=yj(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(MA(E)-1)*y,y=1;break;case 64:nf()===45&&(E+=V5($c())),h=nf(),d=A=MA(_=E+=Nct(H5())),w++;break;case 45:g===45&&MA(E)==2&&(x=0)}}return s}function vX(e,t,r,n,a,s,i,l,c,u,d){for(var A=a-1,h=a===0?s:[""],m=nU(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=R2(e,A+1,A=bct(x=i[g])),_=e;y<m;++y)(_=Pde(x>0?h[y]+" "+w:sa(w,/&\f/g,h[y])))&&(c[v++]=_);return Ej(e,t,r,a===0?"rule":l,c,u,d)}function _ct(e,t,r){return Ej(e,t,r,"comm",yj(hi),R2(e,2,-2),0)}function bX(e,t,r,n){return Ej(e,t,r,rU,R2(e,0,n),R2(e,n+1,-1),n)}function Ag(e,t){for(var r="",n=nU(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function yX(e,t,r,n){switch(e.type){case"@import":case rU:return e.return=e.return||e.value;case"comm":return"";case Dde:return e.return=e.value+"{"+Ag(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return MA(r=Ag(e.children,n))?e.return=e.value+"{"+r+"}":""}function wX(e){var t=nU(e);return function(r,n,a,s){for(var i="",l=0;l<t;l++)i+=e[l](r,n,a,s)||"";return i}}function Sct(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ude(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var kct=function(e,t,r){for(var n=0,a=0;n=a,a=nf(),n===38&&a===12&&(t[r]=1),!L2(a);)$c();return RE(e,lc)},jct=function(e,t){return Mde(function(r,n){var a=-1,s=44;do switch(L2(s)){case 0:s===38&&nf()===12&&(n[a]=1),r[a]+=kct(lc-1,n,a);break;case 2:r[a]+=V5(s);break;case 4:if(s===44){r[++a]=nf()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=yj(s)}while(s=$c());return r}(Lde(e),t))},EX=new WeakMap,Bct=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||EX.get(r))&&!n){EX.set(e,!0);for(var a=[],s=jct(t,a),i=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,i[u]):i[u]+" "+s[l]}}},Tct=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Qde(e,t){switch(function(r,n){return 45^xo(r,0)?(((n<<2^xo(r,0))<<2^xo(r,1))<<2^xo(r,2))<<2^xo(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+gX+e+Su+e+e;case 6828:case 4268:return Zn+e+Su+e+e;case 6165:return Zn+e+Su+"flex-"+e+e;case 5187:return Zn+e+sa(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+Su+"flex-item-"+sa(e,/flex-|-self/,"")+e;case 4675:return Zn+e+Su+"flex-line-pack"+sa(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+Su+sa(e,"shrink","negative")+e;case 5292:return Zn+e+Su+sa(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+sa(e,"-grow","")+Zn+e+Su+sa(e,"grow","positive")+e;case 4554:return Zn+sa(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return sa(sa(sa(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return sa(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return sa(sa(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return sa(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(MA(e)-1-t>6)switch(xo(e,t+1)){case 109:if(xo(e,t+4)!==45)break;case 102:return sa(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+gX+(xo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~pD(e,"stretch")?Qde(sa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xo(e,t+1)!==115)break;case 6444:switch(xo(e,MA(e)-3-(~pD(e,"!important")&&10))){case 107:return sa(e,":",":"+Zn)+e;case 101:return sa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(xo(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(xo(e,t+11)){case 114:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+Su+e+e}return e}var CX,MN,$5=typeof document<"u",Ict=$5?void 0:(CX=function(){return Ude(function(){var e={};return function(t){return e[t]}})},MN=new WeakMap,function(e){if(MN.has(e))return MN.get(e);var t=CX(e);return MN.set(e,t),t}),Fct=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case rU:e.return=Qde(e.value,e.length);break;case Dde:return Ag([Iy(e,{value:sa(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ag([Iy(e,{props:[sa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Ag([Iy(e,{props:[sa(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),Iy(e,{props:[sa(a,/:(plac\w+)/,":-moz-$1")]}),Iy(e,{props:[sa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Hde=function(e){var t=e.key;if($5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Fct,a,s,i={},l=[];$5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)i[w[_]]=!0;l.push(y)}));var c=[Bct,Tct];if($5){var u,d=[yX,Sct(function(y){u.insert(y)})],A=wX(c.concat(n,d));s=function(y,w,_,j){u=_,Ag(xX(y?y+"{"+w.styles+"}":w.styles),A),j&&(v.inserted[w.name]=!0)}}else{var h=[yX],m=wX(c.concat(n,h)),g=Ict(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=Ag(xX(y?y+"{"+w.styles+"}":w.styles),m)),g[_]};s=function(y,w,_,j){var k=w.name,I=x(y,w);return v.compat===void 0?(j&&(v.inserted[k]=!0),I):j?void(v.inserted[k]=I):I}}var v={key:t,sheet:new vct({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return v.sheet.hydrate(l),v};function oa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var io=typeof Symbol=="function"&&Symbol.for,xD=io?Symbol.for("react.element"):60103,vD=io?Symbol.for("react.portal"):60106,G5=io?Symbol.for("react.fragment"):60107,K5=io?Symbol.for("react.strict_mode"):60108,q5=io?Symbol.for("react.profiler"):60114,W5=io?Symbol.for("react.provider"):60109,X5=io?Symbol.for("react.context"):60110,bD=io?Symbol.for("react.async_mode"):60111,JS=io?Symbol.for("react.concurrent_mode"):60111,Y5=io?Symbol.for("react.forward_ref"):60112,J5=io?Symbol.for("react.suspense"):60113,Oct=io?Symbol.for("react.suspense_list"):60120,Z5=io?Symbol.for("react.memo"):60115,e_=io?Symbol.for("react.lazy"):60116,Dct=io?Symbol.for("react.block"):60121,Pct=io?Symbol.for("react.fundamental"):60117,Rct=io?Symbol.for("react.responder"):60118,Lct=io?Symbol.for("react.scope"):60119;function Tc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xD:switch(e=e.type){case bD:case JS:case G5:case q5:case K5:case J5:return e;default:switch(e=e&&e.$$typeof){case X5:case Y5:case e_:case Z5:case W5:return e;default:return t}}case vD:return t}}}function NX(e){return Tc(e)===JS}var Mct={AsyncMode:bD,ConcurrentMode:JS,ContextConsumer:X5,ContextProvider:W5,Element:xD,ForwardRef:Y5,Fragment:G5,Lazy:e_,Memo:Z5,Portal:vD,Profiler:q5,StrictMode:K5,Suspense:J5,isAsyncMode:function(e){return NX(e)||Tc(e)===bD},isConcurrentMode:NX,isContextConsumer:function(e){return Tc(e)===X5},isContextProvider:function(e){return Tc(e)===W5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xD},isForwardRef:function(e){return Tc(e)===Y5},isFragment:function(e){return Tc(e)===G5},isLazy:function(e){return Tc(e)===e_},isMemo:function(e){return Tc(e)===Z5},isPortal:function(e){return Tc(e)===vD},isProfiler:function(e){return Tc(e)===q5},isStrictMode:function(e){return Tc(e)===K5},isSuspense:function(e){return Tc(e)===J5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===G5||e===JS||e===q5||e===K5||e===J5||e===Oct||typeof e=="object"&&e!==null&&(e.$$typeof===e_||e.$$typeof===Z5||e.$$typeof===W5||e.$$typeof===X5||e.$$typeof===Y5||e.$$typeof===Pct||e.$$typeof===Rct||e.$$typeof===Lct||e.$$typeof===Dct)},typeOf:Tc};oa(function(e,t){});var _X=oa(function(e){e.exports=Mct}),SX={};SX[_X.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SX[_X.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var yD=typeof document<"u";function Vde(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var aU=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||yD===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},sU=function(e,t,r){aU(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);yD||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!yD&&a.length!==0)return a}},Uct={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Qct=/[A-Z]|^ms/g,Hct=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zde=function(e){return e.charCodeAt(1)===45},kX=function(e){return e!=null&&typeof e!="boolean"},r6=Ude(function(e){return zde(e)?e:e.replace(Qct,"-$&").toLowerCase()}),jX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Hct,function(r,n,a){return UA={name:n,styles:a,next:UA},n})}return Uct[e]===1||zde(e)||typeof t!="number"||t===0?t:t+"px"};function Pw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return UA={name:r.name,styles:r.styles,next:UA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)UA={name:n.name,styles:n.styles,next:UA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var A="";if(Array.isArray(d))for(var h=0;h<d.length;h++)A+=Pw(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?A+=m+"{"+u[g]+"}":kX(g)&&(A+=r6(m)+":"+jX(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=Pw(c,u,g);switch(m){case"animation":case"animationName":A+=r6(m)+":"+x+";";break;default:A+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)kX(g[v])&&(A+=r6(m)+":"+jX(m,g[v])+";")}return A}(e,t,r);case"function":if(e!==void 0){var s=UA,i=r(e);return UA=s,Pw(e,t,i)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var UA,BX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Cj=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";UA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Pw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=Pw(r,t,e[i]),n&&(a+=s[i]);BX.lastIndex=0;for(var l,c="";(l=BX.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var A,h=0,m=0,g=d.length;g>=4;++m,g-=4)A=1540483477*(65535&(A=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(A>>>16)<<16),h=1540483477*(65535&(A^=A>>>24))+(59797*(A>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:UA}},Vct=typeof document<"u",zct=function(e){return e()},$de=!!C.useInsertionEffect&&C.useInsertionEffect,Gde=Vct&&$de||zct,TX=$de||C.useLayoutEffect,Zv=typeof document<"u",iU={}.hasOwnProperty,ZS=C.createContext(typeof HTMLElement<"u"?Hde({key:"css"}):null);ZS.Provider;var Nj=function(e){return C.forwardRef(function(t,r){var n=C.useContext(ZS);return e(t,n,r)})};Zv||(Nj=function(e){return function(t){var r=C.useContext(ZS);return r===null?(r=Hde({key:"css"}),C.createElement(ZS.Provider,{value:r},e(t,r))):e(t,r)}});var oU=C.createContext({}),wD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",$ct=function(e,t){var r={};for(var n in t)iU.call(t,n)&&(r[n]=t[n]);return r[wD]=e,r},Gct=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;aU(t,r,n);var a=Gde(function(){return sU(t,r,n)});if(!Zv&&a!==void 0){for(var s,i=r.name,l=r.next;l!==void 0;)i+=" "+l.name,l=l.next;return C.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Kct=Nj(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[wD],s=[n],i="";typeof e.className=="string"?i=Vde(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var l=Cj(s,void 0,C.useContext(oU));i+=t.key+"-"+l.name;var c={};for(var u in e)!iU.call(e,u)||u==="css"||u===wD||(c[u]=e[u]);return c.ref=r,c.className=i,C.createElement(C.Fragment,null,C.createElement(Gct,{cache:t,serialized:l,isStringTag:typeof a=="string"}),C.createElement(a,c))});oa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Tr=function(e,t){var r=arguments;if(t==null||!iU.call(t,"css"))return C.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Kct,a[1]=$ct(e,t);for(var s=2;s<n;s++)a[s]=r[s];return C.createElement.apply(null,a)};Nj(function(e,t){var r=e.styles,n=Cj([r],void 0,C.useContext(oU));if(!Zv){for(var a,s=n.name,i=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,i+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:C.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=C.useRef();return TX(function(){var A=t.key+"-global",h=new t.sheet.constructor({key:A,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+A+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",A),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),TX(function(){var A=d.current,h=A[0];if(A[1])A[1]=!1;else{if(n.next!==void 0&&sU(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function lU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Cj(t)}var qct=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var l in i="",s)s[l]&&l&&(i&&(i+=" "),i+=l);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Wct(e,t,r){var n=[],a=Vde(e,n,r);return n.length<2?r:a+t(n)}var Xct=function(e){var t,r=e.cache,n=e.serializedArr,a=Gde(function(){for(var s="",i=0;i<n.length;i++){var l=sU(r,n[i],!1);Zv||l===void 0||(s+=l)}if(!Zv)return s});return Zv||a.length===0?null:C.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};Nj(function(e,t){var r=[],n=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=Cj(l,t.registered);return r.push(u),aU(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return Wct(t.registered,n,qct(l))},theme:C.useContext(oU)},s=e.children(a);return C.createElement(C.Fragment,null,C.createElement(Xct,{cache:t,serializedArr:r}),s)});function qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,l,c,u=[],d=!0,A=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){A=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(A)throw i}}return u}}(e,t)||Ode(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function VA(e,t){if(e==null)return{};var r,n,a=function(i,l){if(i==null)return{};var c,u,d={},A=Object.keys(i);for(u=0;u<A.length;u++)c=A[u],l.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Kde(e){return vh(e).getComputedStyle(e)}const UN=Math.round;function qde(e){return Xde(e)?(e.nodeName||"").toLowerCase():""}let QN;function Wde(e){return e instanceof vh(e).HTMLElement}function t_(e){return e instanceof vh(e).Element}function Xde(e){return e instanceof vh(e).Node}function IX(e){return typeof ShadowRoot>"u"?!1:e instanceof vh(e).ShadowRoot||e instanceof ShadowRoot}function Yde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Kde(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Yct(){return/^((?!chrome|android).)*safari/i.test(function(){if(QN)return QN;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(QN=e.brands.map(t=>t.brand+"/"+t.version).join(" "),QN):navigator.userAgent}())}function Jde(e){return t_(e)?e:e.contextElement}const Zde={x:1,y:1};function FX(e){const t=Jde(e);if(!Wde(t))return Zde;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Kde(c);let d=parseFloat(u.width),A=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=UN(d)!==h||UN(A)!==m;return g&&(d=h,A=m),{width:d,height:A,fallback:g}}(t);let i=(s?UN(r.width):r.width)/n,l=(s?UN(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function OX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),l=Jde(e);let c=Zde;t&&(c=FX(e));const u=l?vh(l):window,d=Yct()&&r;let A=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=i.width/c.x,g=i.height/c.y;if(l){const x=vh(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=FX(y),_=y.getBoundingClientRect(),j=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(j.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(j.paddingTop))*w.y,A*=w.x,h*=w.y,m*=w.x,g*=w.y,A+=_.x,h+=_.y,y=vh(y).frameElement}}return{width:m,height:g,top:h,right:A+m,bottom:h+g,left:A,x:A,y:h}}function Jct(e){if(qde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||IX(e)&&e.host||function(r){return((Xde(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return IX(t)?t.host:t}function eAe(e){const t=Jct(e);return function(r){return["html","body","#document"].includes(qde(r))}(t)?t.ownerDocument.body:Wde(t)&&Yde(t)?t:eAe(t)}function r_(e,t){var r;t===void 0&&(t=[]);const n=eAe(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=vh(n);return a?t.concat(s,s.visualViewport||[],Yde(n)?n:[]):t.concat(n,r_(n))}var ED=typeof document<"u"?C.useLayoutEffect:C.useEffect,Zct=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],e4=function(){};function eut(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function tut(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(eut(e,i)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var DX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):dg(e)==="object"&&e!==null?[e]:[];var t},PX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},VA(e,Zct))},Es=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function _j(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function tAe(e){return _j(e)?window.pageYOffset:e.scrollTop}function t4(e,t){_j(e)?window.scrollTo(0,t):e.scrollTop=t}function rut(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function HN(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e4,a=tAe(e),s=t-a,i=10,l=0;function c(){var u=rut(l+=i,a,s,r);t4(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function RX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?t4(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&t4(e,Math.max(t.offsetTop-a,0))}function LX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var rAe=!1,nut={get passive(){return rAe=!0}},VN=typeof window<"u"?window:{};VN.addEventListener&&VN.removeEventListener&&(VN.addEventListener("p",e4,nut),VN.removeEventListener("p",e4,!1));var aut=rAe;function sut(e){return e!=null}function zN(e,t,r){return e?t:r}var iut=["children","innerProps"],out=["children","innerProps"];function lut(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,l=e.controlHeight,c=function(ee){var V=getComputedStyle(ee),q=V.position==="absolute",K=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var X=ee;X=X.parentElement;)if(V=getComputedStyle(X),(!q||V.position!=="static")&&K.test(V.overflow+V.overflowY+V.overflowX))return X;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,A=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=i||_j(d=c)?window.innerHeight:d.clientHeight,w=tAe(c),_=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),k=v-j,I=y-x,E=k+w,S=A-w-x,B=m-y+w+_,R=w+x-j,P=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(S>=g&&!i)return s&&HN(c,B,P),{placement:"bottom",maxHeight:t};if(!i&&S>=n||i&&I>=n)return s&&HN(c,B,P),{placement:"bottom",maxHeight:i?I-_:S-_};if(a==="auto"||i){var F=t,L=i?k:E;return L>=n&&(F=Math.min(L-_-l,t)),{placement:"top",maxHeight:F}}if(a==="bottom")return s&&t4(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(k>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&HN(c,R,P),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&k>=n){var M=t;return(!i&&E>=n||i&&k>=n)&&(M=i?k-j:E-j),s&&HN(c,R,P),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var MX,nAe=function(e){return e==="auto"?"bottom":e},aAe=C.createContext(null),cut=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,l=e.theme,c=(C.useContext(aAe)||{}).setPortalPlacement,u=C.useRef(null),d=qi(C.useState(n),2),A=d[0],h=d[1],m=qi(C.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return ED(function(){var y=u.current;if(y){var w=s==="fixed",_=lut({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:v});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,i,r,c,v]),t({ref:u,placerProps:Cr(Cr({},e),{},{placement:g||nAe(a),maxHeight:A})})},uut=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Tr("div",Lr({},Es(e,"menu",{menu:!0}),{ref:r},n),t)},sAe=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Cr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},dut=sAe,Aut=sAe,fut=["size"],hut=["innerProps","isRtl","size"],n6,a6,mut={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},iAe=function(e){var t=e.size,r=VA(e,fut);return Tr("svg",Lr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:mut},r))},s6=function(e){return Tr(iAe,Lr({size:20},e),Tr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},UX=function(e){return Tr(iAe,Lr({size:20},e),Tr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},oAe=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},put=oAe,gut=oAe,xut=function(){var e=lU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(MX||(n6=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],a6||(a6=n6.slice(0)),MX=Object.freeze(Object.defineProperties(n6,{raw:{value:Object.freeze(a6)}})))),i6=function(e){var t=e.delay,r=e.offset;return Tr("span",{css:lU({animation:"".concat(xut," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},vut=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Tr("div",Lr({ref:a},Es(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},but=["data"],yut=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Tr("div",Lr({},Es(e,"group",{group:!0}),l),Tr(s,Lr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Tr("div",null,t))},wut=["innerRef","isDisabled","isHidden","inputClassName"],lAe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Eut={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},lAe)},Cut=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},lAe)},QX=function(e){var t=e.children,r=e.innerProps;return Tr("div",r,t)},Nut=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Tr(c,{data:n,innerProps:Cr(Cr({},Es(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Tr(u,{data:n,innerProps:Cr({},Es(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Tr(d,{data:n,innerProps:Cr(Cr({},Es(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:l}))},_ut={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Tr("div",Lr({},Es(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Tr(s6,null))},Control:vut,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Tr("div",Lr({},Es(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Tr(UX,null))},DownChevron:UX,CrossIcon:s6,Group:yut,GroupHeading:function(e){var t=PX(e);t.data;var r=VA(t,but);return Tr("div",Lr({},Es(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Tr("div",Lr({},Es(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Tr("span",Lr({},t,Es(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=PX(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,l=n.inputClassName,c=VA(n,wut);return Tr("div",Lr({},Es(e,"input",{"input-container":!0}),{"data-value":r||""}),Tr("input",Lr({className:t({input:!0},l),ref:a,style:Cut(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=VA(e,hut);return Tr("div",Lr({},Es(Cr(Cr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Tr(i6,{delay:0,offset:r}),Tr(i6,{delay:160,offset:!0}),Tr(i6,{delay:320,offset:!r}))},Menu:uut,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Tr("div",Lr({},Es(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,l=C.useRef(null),c=C.useRef(null),u=qi(C.useState(nAe(s)),2),d=u[0],A=u[1],h=C.useMemo(function(){return{setPortalPlacement:A}},[]),m=qi(C.useState(null),2),g=m[0],x=m[1],v=C.useCallback(function(){if(n){var j=function(E){var S=E.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(n),k=i==="fixed"?0:window.pageYOffset,I=j[d]+k;I===(g==null?void 0:g.offset)&&j.left===(g==null?void 0:g.rect.left)&&j.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:j})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);ED(function(){v()},[v]);var y=C.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(j,k,I,E){E===void 0&&(E={});const{ancestorScroll:S=!0,ancestorResize:B=!0,elementResize:R=!0,animationFrame:P=!1}=E,F=S&&!P,L=F||B?[...t_(j)?r_(j):j.contextElement?r_(j.contextElement):[],...r_(k)]:[];L.forEach(q=>{F&&q.addEventListener("scroll",I,{passive:!0}),B&&q.addEventListener("resize",I)});let M,ee=null;if(R){let q=!0;ee=new ResizeObserver(()=>{q||I(),q=!1}),t_(j)&&!P&&ee.observe(j),t_(j)||!j.contextElement||P||ee.observe(j.contextElement),ee.observe(k)}let V=P?OX(j):null;return P&&function q(){const K=OX(j);!V||K.x===V.x&&K.y===V.y&&K.width===V.width&&K.height===V.height||I(),V=K,M=requestAnimationFrame(q)}(),I(),()=>{var q;L.forEach(K=>{F&&K.removeEventListener("scroll",I),B&&K.removeEventListener("resize",I)}),(q=ee)==null||q.disconnect(),ee=null,P&&cancelAnimationFrame(M)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);ED(function(){y()},[y]);var w=C.useCallback(function(j){l.current=j,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var _=Tr("div",Lr({ref:w},Es(Cr(Cr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Tr(aAe.Provider,{value:h},t?lP.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=VA(e,out);return Tr("div",Lr({},Es(Cr(Cr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=VA(e,iut);return Tr("div",Lr({},Es(Cr(Cr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Nut,MultiValueContainer:QX,MultiValueLabel:QX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Tr("div",Lr({role:"button"},r),t||Tr(s6,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Tr("div",Lr({},Es(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Tr("div",Lr({},Es(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Tr("div",Lr({},Es(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Tr("div",Lr({},Es(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Tr("div",Lr({},Es(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},HX=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Sut(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||HX(n)&&HX(a)))return!1;var n,a;return!0}for(var kut={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},VX=function(e){return Tr("span",Lr({css:kut},e))},jut={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var A=l?" disabled":"",h="".concat(c?" selected":"").concat(A);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},But=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,A=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,_=l.tabSelectsValue,j=l.isLoading,k=l["aria-label"],I=l["aria-live"],E=C.useMemo(function(){return Cr(Cr({},jut),d||{})},[d]),S=C.useMemo(function(){var M,ee="";if(t&&E.onChange){var V=t.option,q=t.options,K=t.removedValue,X=t.removedValues,Z=t.value,G=K||V||(M=Z,Array.isArray(M)?null:M),D=G?A(G):"",U=q||X||void 0,z=U?U.map(A):[],J=Cr({isDisabled:G&&g(G,i),label:D,labels:z},t);ee=E.onChange(J)}return ee},[t,E,g,i,A]),B=C.useMemo(function(){var M="",ee=r||n,V=!!(r&&i&&i.includes(r));if(ee&&E.onFocus){var q={focused:ee,label:A(ee),isDisabled:g(ee,i),isSelected:V,options:a,context:ee===r?"menu":"value",selectValue:i,isAppleDevice:u};M=E.onFocus(q)}return M},[r,n,A,g,E,a,i,u]),R=C.useMemo(function(){var M="";if(v&&y.length&&!j&&E.onFilter){var ee=w({count:a.length});M=E.onFilter({inputValue:h,resultsMessage:ee})}return M},[a,h,v,E,y,w,j]),P=(t==null?void 0:t.action)==="initial-input-focus",F=C.useMemo(function(){var M="";if(E.guidance){var ee=n?"value":v?"menu":"input";M=E.guidance({"aria-label":k,context:ee,isDisabled:r&&g(r,i),isMulti:m,isSearchable:x,tabSelectsValue:_,isInitialFocus:P})}return M},[k,r,n,m,g,x,v,E,i,_,P]),L=Tr(C.Fragment,null,Tr("span",{id:"aria-selection"},S),Tr("span",{id:"aria-focused"},B),Tr("span",{id:"aria-results"},R),Tr("span",{id:"aria-guidance"},F));return Tr(C.Fragment,null,Tr(VX,{id:c},P&&L),Tr(VX,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&L))},o6=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Tut=new RegExp("["+o6.map(function(e){return e.letters}).join("")+"]","g"),cAe={},l6=0;l6<o6.length;l6++)for(var c6=o6[l6],u6=0;u6<c6.letters.length;u6++)cAe[c6.letters[u6]]=c6.base;var uAe=function(e){return e.replace(Tut,function(t){return cAe[t]})},Iut=function(e,t){t===void 0&&(t=Sut);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(uAe),zX=function(e){return e.replace(/^\s+|\s+$/g,"")},Fut=function(e){return"".concat(e.label," ").concat(e.value)},Out=["innerRef"];function Dut(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var l=Object.entries(n).filter(function(c){var u=qi(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=qi(u,2),A=d[0],h=d[1];return c[A]=h,c},{})}(VA(e,Out),"onExited","in","enter","exit","appear");return Tr("input",Lr({ref:t},r,{css:lU({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var $X=["boxSizing","height","overflow","paddingRight","position"],GX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function KX(e){e.preventDefault()}function qX(e){e.stopPropagation()}function WX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function XX(){return"ontouchstart"in window||navigator.maxTouchPoints}var YX=!(typeof window>"u"||!window.document||!window.document.createElement),Fy=0,Zx={capture:!1,passive:!1},Put=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Rut={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Lut(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var l=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,A=i.onTopLeave,h=C.useRef(!1),m=C.useRef(!1),g=C.useRef(0),x=C.useRef(null),v=C.useCallback(function(I,E){if(x.current!==null){var S=x.current,B=S.scrollTop,R=S.scrollHeight,P=S.clientHeight,F=x.current,L=E>0,M=R-P-B,ee=!1;M>E&&h.current&&(u&&u(I),h.current=!1),L&&m.current&&(A&&A(I),m.current=!1),L&&E>M?(c&&!h.current&&c(I),F.scrollTop=R,ee=!0,h.current=!0):!L&&-E>B&&(d&&!m.current&&d(I),F.scrollTop=0,ee=!0,m.current=!0),ee&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(I)}},[c,u,d,A]),y=C.useCallback(function(I){v(I,I.deltaY)},[v]),w=C.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),_=C.useCallback(function(I){var E=g.current-I.changedTouches[0].clientY;v(I,E)},[v]),j=C.useCallback(function(I){if(I){var E=!!aut&&{passive:!1};I.addEventListener("wheel",y,E),I.addEventListener("touchstart",w,E),I.addEventListener("touchmove",_,E)}},[_,w,y]),k=C.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",w,!1),I.removeEventListener("touchmove",_,!1))},[_,w,y]);return C.useEffect(function(){if(l){var I=x.current;return j(I),function(){k(I)}}},[l,j,k]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var l=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=C.useRef({}),A=C.useRef(null),h=C.useCallback(function(g){if(YX){var x=document.body,v=x&&x.style;if(u&&$X.forEach(function(j){var k=v&&v[j];d.current[j]=k}),u&&Fy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(GX).forEach(function(j){var k=GX[j];v&&(v[j]=k)}),v&&(v.paddingRight="".concat(_,"px"))}x&&XX()&&(x.addEventListener("touchmove",KX,Zx),g&&(g.addEventListener("touchstart",WX,Zx),g.addEventListener("touchmove",qX,Zx))),Fy+=1}},[u]),m=C.useCallback(function(g){if(YX){var x=document.body,v=x&&x.style;Fy=Math.max(Fy-1,0),u&&Fy<1&&$X.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&XX()&&(x.removeEventListener("touchmove",KX,Zx),g&&(g.removeEventListener("touchstart",WX,Zx),g.removeEventListener("touchmove",qX,Zx)))}},[u]);return C.useEffect(function(){if(l){var g=A.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){A.current=g}}({isEnabled:r});return Tr(C.Fragment,null,r&&Tr("div",{onClick:Put,css:Rut}),t(function(i){a(i),s(i)}))}var Mut={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Uut=function(e){var t=e.name,r=e.onFocus;return Tr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Mut,value:"",onChange:function(){}})};function CD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function dAe(){return CD(/^Mac/i)}function Qut(){return CD(/^iPhone/i)||CD(/^iPad/i)||dAe()&&navigator.maxTouchPoints>1}var Hut,Vut={clearIndicator:gut,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:put,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return Cr(Cr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},Eut),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:Aut,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,l=a.colors;return Cr((kv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),kv(r,"position","absolute"),kv(r,"width","100%"),kv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Cr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:dut,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,l=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},d6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},zut={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:LX(),captureMenuScroll:!LX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:Fut,trim:!0,matchFrom:"any"},Hut),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,l=r.matchFrom,c=i?zX(t):t,u=i?zX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Iut(c),u=uAe(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function JX(e,t,r,n){return{type:"option",data:t,isDisabled:fAe(e,t,r),isSelected:hAe(e,t,r),label:AAe(e,t),value:r4(e,t),index:n}}function $N(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,l){return JX(e,i,t,l)}).filter(function(i){return tY(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=JX(e,r,t,n);return tY(e,s)?s:void 0}).filter(sut)}function ZX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,tU(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function eY(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,tU(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function tY(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,l=t.value;return(!pAe(e)||!s)&&mAe(e,{label:i,value:l,data:a},n)}var A6=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},AAe=function(e,t){return e.getOptionLabel(t)},r4=function(e,t){return e.getOptionValue(t)};function fAe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function hAe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=r4(e,t);return r.some(function(a){return r4(e,a)===n})}function mAe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var pAe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},$ut=1,gAe=function(e){(function(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(l&&l.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),l&&hD(i,l)})(s,C.Component);var t,r,n,a=xct(s);function s(i){var l;if(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=dAe()||Qut(),l.controlRef=null,l.getControlRef=function(A){l.controlRef=A},l.focusedOptionRef=null,l.getFocusedOptionRef=function(A){l.focusedOptionRef=A},l.menuListRef=null,l.getMenuListRef=function(A){l.menuListRef=A},l.inputRef=null,l.getInputRef=function(A){l.inputRef=A},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(A,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(A,h),g(A,h)},l.setValue=function(A,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(A,{action:h,option:m})},l.selectOption=function(A){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(A,v),w=l.isOptionDisabled(A,v);if(y){var _=l.getOptionValue(A);l.setValue(v.filter(function(j){return l.getOptionValue(j)!==_}),"deselect-option",A)}else{if(w)return void l.ariaOnChange(A,{action:"select-option",option:A,name:x});g?l.setValue([].concat(tU(v),[A]),"select-option",A):l.setValue(A,"select-option")}m&&l.blurInput()},l.removeValue=function(A){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(A),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=zN(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:A}),l.focusInput()},l.clearValue=function(){var A=l.state.selectValue;l.onChange(zN(l.props.isMulti,[],null),{action:"clear",removedValues:A})},l.popValue=function(){var A=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=zN(A,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(A){return A6(l.state.focusableOptionsWithIds,A)},l.getFocusableOptionsWithIds=function(){return eY($N(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var A=arguments.length,h=new Array(A),m=0;m<A;m++)h[m]=arguments[m];return tut.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(A){return AAe(l.props,A)},l.getOptionValue=function(A){return r4(l.props,A)},l.getStyles=function(A,h){var m=l.props.unstyled,g=Vut[A](h,m);g.boxSizing="border-box";var x=l.props.styles[A];return x?x(g,h):g},l.getClassNames=function(A,h){var m,g;return(m=(g=l.props.classNames)[A])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(A){return"".concat(l.state.instancePrefix,"-").concat(A)},l.getComponents=function(){return A=l.props,Cr(Cr({},_ut),A.components);var A},l.buildCategorizedOptions=function(){return $N(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return ZX(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(A,h){l.setState({ariaSelection:Cr({value:A},h)})},l.onMenuMouseDown=function(A){A.button===0&&(A.stopPropagation(),A.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(A){l.blockOptionHover=!1},l.onControlMouseDown=function(A){if(!A.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&A.preventDefault()}},l.onDropdownIndicatorMouseDown=function(A){if(!(A&&A.type==="mousedown"&&A.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),A.preventDefault()}},l.onClearIndicatorMouseDown=function(A){A&&A.type==="mousedown"&&A.button!==0||(l.clearValue(),A.preventDefault(),l.openAfterFocus=!1,A.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(A){typeof l.props.closeMenuOnScroll=="boolean"?A.target instanceof HTMLElement&&_j(A.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(A)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(A){var h=A.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(A){var h=A.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(A){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(A.target)&&l.menuListRef&&!l.menuListRef.contains(A.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(A){l.userIsDragging||l.onControlMouseDown(A)},l.onClearIndicatorTouchEnd=function(A){l.userIsDragging||l.onClearIndicatorMouseDown(A)},l.onDropdownIndicatorTouchEnd=function(A){l.userIsDragging||l.onDropdownIndicatorMouseDown(A)},l.handleInputChange=function(A){var h=l.props.inputValue,m=A.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(A){l.props.onFocus&&l.props.onFocus(A),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(A){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(A),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(A){if(!l.blockOptionHover&&l.state.focusedOption!==A){var h=l.getFocusableOptions().indexOf(A);l.setState({focusedOption:A,focusedOptionId:h>-1?l.getFocusedOptionId(A):null})}},l.shouldHideSelectedOptions=function(){return pAe(l.props)},l.onValueInputFocus=function(A){A.preventDefault(),A.stopPropagation(),l.focus()},l.onKeyDown=function(A){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,j=h.onKeyDown,k=h.tabSelectsValue,I=h.openMenuOnFocus,E=l.state,S=E.focusedOption,B=E.focusedValue,R=E.selectValue;if(!(w||typeof j=="function"&&(j(A),A.defaultPrevented))){switch(l.blockOptionHover=!0,A.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(B)l.removeValue(B);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||A.shiftKey||!_||!k||!S||I&&l.isOptionSelected(S,R))return;l.selectOption(S);break;case"Enter":if(A.keyCode===229)break;if(_){if(!S||l.isComposing)return;l.selectOption(S);break}return;case"Escape":_?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!_){l.openMenu("first");break}if(!S)return;l.selectOption(S);break;case"ArrowUp":_?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":_?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!_)return;l.focusOption("pageup");break;case"PageDown":if(!_)return;l.focusOption("pagedown");break;case"Home":if(!_)return;l.focusOption("first");break;case"End":if(!_)return;l.focusOption("last");break;default:return}A.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++$ut),l.state.selectValue=DX(i.value),i.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=A6(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&RX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(RX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,l){this.props.onInputChange(i,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,A=this.buildFocusableOptions(),h=i==="first"?0:A.length-1;if(!this.props.isMulti){var m=A.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:A[h],focusedOptionId:this.getFocusedOptionId(A[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(i){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var A=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?A:d-1;break;case"next":d>-1&&d<A&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,A=u.indexOf(c);c||(A=-1),i==="up"?d=A>0?A-1:u.length-1:i==="down"?d=(A+1)%u.length:i==="pageup"?(d=A-l)<0&&(d=0):i==="pagedown"?(d=A+l)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(d6):Cr(Cr({},d6),this.props.theme):d6}},{key:"getCommonProps",value:function(){var i=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,A=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:i,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:A,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,l=i.isClearable,c=i.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(i,l){return fAe(this.props,i,l)}},{key:"isOptionSelected",value:function(i,l){return hAe(this.props,i,l)}},{key:"filterOption",value:function(i,l){return mAe(this.props,i,l)}},{key:"formatOptionLabel",value:function(i,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,l=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,A=i.tabIndex,h=i.form,m=i.menuIsOpen,g=i.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,j=u||this.getElementId("input"),k=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?C.createElement(x,Lr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:j,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:A,form:h,type:"text",value:d},k)):C.createElement(Dut,Lr({id:j,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:e4,onFocus:this.onInputFocus,disabled:l,tabIndex:A,inputMode:"none",form:h,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,A=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,j=x.placeholder,k=this.state,I=k.selectValue,E=k.focusedValue,S=k.isFocused;if(!this.hasValue()||!v)return _?null:C.createElement(m,Lr({},g,{key:"placeholder",isDisabled:y,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),j);if(w)return I.map(function(R,P){var F=R===E,L="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return C.createElement(c,Lr({},g,{components:{Container:u,Label:d,Remove:A},isFocused:F,isDisabled:y,key:L,index:P,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(M){M.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var B=I[0];return C.createElement(h,Lr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,A=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(i,Lr({},l,{innerProps:h,isFocused:A}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,A=this.state.isFocused;return i&&d?C.createElement(i,Lr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:A})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),l=i.DropdownIndicator,c=i.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,A=this.state.isFocused;return C.createElement(c,Lr({},u,{isDisabled:d,isFocused:A}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(i,Lr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,A=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,j=w.inputValue,k=w.isLoading,I=w.loadingMessage,E=w.minMenuHeight,S=w.maxMenuHeight,B=w.menuIsOpen,R=w.menuPlacement,P=w.menuPosition,F=w.menuPortalTarget,L=w.menuShouldBlockScroll,M=w.menuShouldScrollIntoView,ee=w.noOptionsMessage,V=w.onMenuScrollToTop,q=w.onMenuScrollToBottom;if(!B)return null;var K,X=function(z,J){var re=z.type,oe=z.data,se=z.isDisabled,le=z.isSelected,ue=z.label,ke=z.value,ae=y===oe,Ne=se?void 0:function(){return i.onOptionHover(oe)},je=se?void 0:function(){return i.selectOption(oe)},_e="".concat(i.getElementId("option"),"-").concat(J),me={id:_e,onClick:je,onMouseMove:Ne,onMouseOver:Ne,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:le};return C.createElement(x,Lr({},v,{innerProps:me,data:oe,isDisabled:se,isSelected:le,key:_e,label:ue,type:re,value:ke,isFocused:ae,innerRef:ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(z.data,"menu"))};if(this.hasOptions())K=this.getCategorizedOptions().map(function(z){if(z.type==="group"){var J=z.data,re=z.options,oe=z.index,se="".concat(i.getElementId("group"),"-").concat(oe),le="".concat(se,"-heading");return C.createElement(c,Lr({},v,{key:se,data:J,options:re,Heading:u,headingProps:{id:le,data:z.data},label:i.formatGroupLabel(z.data)}),z.options.map(function(ue){return X(ue,"".concat(oe,"-").concat(ue.index))}))}if(z.type==="option")return X(z,"".concat(z.index))});else if(k){var Z=I({inputValue:j});if(Z===null)return null;K=C.createElement(m,v,Z)}else{var G=ee({inputValue:j});if(G===null)return null;K=C.createElement(g,v,G)}var D={minMenuHeight:E,maxMenuHeight:S,menuPlacement:R,menuPosition:P,menuShouldScrollIntoView:M},U=C.createElement(cut,Lr({},v,D),function(z){var J=z.ref,re=z.placerProps,oe=re.placement,se=re.maxHeight;return C.createElement(d,Lr({},v,D,{innerRef:J,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:k,placement:oe}),C.createElement(Lut,{captureEnabled:_,onTopArrive:V,onBottomArrive:q,lockEnabled:L},function(le){return C.createElement(A,Lr({},v,{innerRef:function(ue){i.getMenuListRef(ue),le(ue)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:i.getElementId("listbox")},isLoading:k,maxHeight:se,focusedOption:y}),K)}))});return F||P==="fixed"?C.createElement(h,Lr({},v,{appendTo:F,controlElement:this.controlRef,menuPlacement:R,menuPosition:P}),U):U}},{key:"renderFormField",value:function(){var i=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,A=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return C.createElement(Uut,{name:A,onFocus:this.onValueInputFocus});if(A&&!u){if(d){if(c){var g=m.map(function(y){return i.getOptionValue(y)}).join(c);return C.createElement("input",{name:A,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return C.createElement("input",{key:"i-".concat(w),name:A,type:"hidden",value:i.getOptionValue(y)})}):C.createElement("input",{name:A,type:"hidden",value:""});return C.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return C.createElement("input",{name:A,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,A=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return C.createElement(But,Lr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:A,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),l=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,A=this.props,h=A.className,m=A.id,g=A.isDisabled,x=A.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return C.createElement(u,Lr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),C.createElement(l,Lr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),C.createElement(d,Lr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),C.createElement(c,Lr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,A=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=i.options,v=i.value,y=i.menuIsOpen,w=i.inputValue,_=i.isMulti,j=DX(v),k={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var I=y?function(L,M){return ZX($N(L,M))}(i,j):[],E=y?eY($N(i,j),"".concat(g,"-option")):[],S=u?function(L,M){var ee=L.focusedValue,V=L.selectValue.indexOf(ee);if(V>-1){if(M.indexOf(ee)>-1)return ee;if(V<M.length)return M[V]}return null}(l,j):null,B=function(L,M){var ee=L.focusedOption;return ee&&M.indexOf(ee)>-1?ee:M[0]}(l,I);k={selectValue:j,focusedOption:B,focusedOptionId:A6(E,B),focusableOptionsWithIds:E,focusedValue:S,clearFocusValueOnUpdate:!1}}var R=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=A,F=h&&m;return h&&!F&&(P={value:zN(_,j,j[0]||null),options:j,action:"initial-input-focus"},F=!m),(A==null?void 0:A.action)==="initial-input-focus"&&(P=null),Cr(Cr(Cr({},k),R),{},{prevProps:i,ariaSelection:P,prevWasFocused:F})}}],r&&pX(t.prototype,r),n&&pX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();gAe.defaultProps=zut;var Gut=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Kut=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],cU=oa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),qut=oa(function(e){var t=cU.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),xAe=oa(function(e){var t=cU.default;e.exports=function(r){var n=qut(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Wut=oa(function(e){e.exports=function(t,r,n){return(r=xAe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Wut(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,xAe(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Xut=oa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Xut(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var rY=oa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Yut=oa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Jut=oa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Zut=oa(function(e){var t=cU.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jut(r)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){var r=Yut();return function(){var n,a=rY(t);if(r){var s=rY(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Zut(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var ND=oa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),edt=oa(function(e){e.exports=function(t){if(Array.isArray(t))return ND(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),tdt=oa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),vAe=oa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return ND(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ND(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),rdt=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){return edt(t)||tdt(t)||vAe(t)||rdt()},e.exports.__esModule=!0,e.exports.default=e.exports});var ndt=oa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),adt=oa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(A){d=!0,s=A}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),sdt=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){return ndt(t)||adt(t,r)||vAe(t,r)||sdt()},e.exports.__esModule=!0,e.exports.default=e.exports});var idt=oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=idt(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var odt=C.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,A=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=VA(a,Kut),v=x.inputValue,y=C.useRef(void 0),w=C.useRef(!1),_=qi(C.useState(Array.isArray(i)?i:void 0),2),j=_[0],k=_[1],I=qi(C.useState(v!==void 0?v:""),2),E=I[0],S=I[1],B=qi(C.useState(i===!0),2),R=B[0],P=B[1],F=qi(C.useState(void 0),2),L=F[0],M=F[1],ee=qi(C.useState([]),2),V=ee[0],q=ee[1],K=qi(C.useState(!1),2),X=K[0],Z=K[1],G=qi(C.useState({}),2),D=G[0],U=G[1],z=qi(C.useState(void 0),2),J=z[0],re=z[1],oe=qi(C.useState(void 0),2),se=oe[0],le=oe[1];c!==se&&(U({}),le(c)),i!==J&&(k(Array.isArray(i)?i:void 0),re(i)),C.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var ue=C.useCallback(function(Ne,je){if(!u)return je();var _e=u(Ne,je);_e&&typeof _e.then=="function"&&_e.then(je,function(){return je()})},[u]);C.useEffect(function(){i===!0&&ue(E,function(Ne){w.current&&(k(Ne||[]),P(!!y.current))})},[]);var ke=C.useCallback(function(Ne,je){var _e=function(Te,Le,We){if(We){var xe=We(Te,Le);if(typeof xe=="string")return xe}return Te}(Ne,je,h);if(!_e)return y.current=void 0,S(""),M(""),q([]),P(!1),void Z(!1);if(c&&D[_e])S(_e),M(_e),q(D[_e]),P(!1),Z(!1);else{var me=y.current={};S(_e),P(!0),Z(!L),ue(_e,function(Te){w&&me===y.current&&(y.current=void 0,P(!1),M(_e),q(Te||[]),Z(!1),U(Te?Cr(Cr({},D),{},kv({},_e,Te)):D))})}},[c,ue,L,D,h]),ae=X?[]:E&&L?V:j||[];return Cr(Cr({},x),{},{options:ae,isLoading:R||A,onInputChange:ke,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,A=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=VA(a,Gut),_=qi(C.useState(A!==void 0?A:i),2),j=_[0],k=_[1],I=qi(C.useState(h!==void 0?h:c),2),E=I[0],S=I[1],B=qi(C.useState(y!==void 0?y:d),2),R=B[0],P=B[1],F=C.useCallback(function(X,Z){typeof m=="function"&&m(X,Z),P(X)},[m]),L=C.useCallback(function(X,Z){var G;typeof g=="function"&&(G=g(X,Z)),k(G!==void 0?G:X)},[g]),M=C.useCallback(function(){typeof v=="function"&&v(),S(!0)},[v]),ee=C.useCallback(function(){typeof x=="function"&&x(),S(!1)},[x]),V=A!==void 0?A:j,q=h!==void 0?h:E,K=y!==void 0?y:R;return Cr(Cr({},w),{},{inputValue:V,menuIsOpen:q,onChange:F,onInputChange:L,onMenuClose:ee,onMenuOpen:M,value:K})}(r);return C.createElement(gAe,Lr({ref:t},n))}),ldt=odt,cdt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},jv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(jv||(jv={}));class Up{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:l=[],mapIds:c,nonce:u,region:d,retries:A=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=A,this.url=h,this.version=m,Up.instance){if(!cdt(this.options,Up.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Up.instance.options)}`);return Up.instance}Up.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?jv.FAILURE:this.done?jv.SUCCESS:this.loading?jv.LOADING:jv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var udt=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var A in c)Object.prototype.hasOwnProperty.call(c,A)&&u.indexOf(A)<0&&(d[A]=c[A]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(A=Object.getOwnPropertySymbols(c);h<A.length;h++)u.indexOf(A[h])<0&&Object.prototype.propertyIsEnumerable.call(c,A[h])&&(d[A[h]]=c[A[h]])}return d}(e,["bounds","location"]),l=ug({input:t},i);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var A=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)A[h]=m[g];return A}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},ddt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var A=d.maxWait,h=C.useRef(null),m=C.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=C.useRef(!1),y=C.useRef(null),w=C.useRef(!1),_=C.useRef(c);_.current=c;var j=C.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);C.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var k=C.useCallback(function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];m.current=E,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(_.current.apply(_,E),v.current=!0),y.current=setTimeout(function(){var B=!0;g&&v.current&&(B=!1),j(),!w.current&&x&&B&&_.current.apply(_,E)},u),A&&!h.current&&x&&(h.current=setTimeout(function(){var B=m.current;j(),w.current||_.current.apply(null,B)},A))},[A,u,j,g,x]),I=C.useCallback(function(){y.current&&(_.current.apply(null,m.current),j())},[j]);return[k,j,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=ug({},t);a.getPlacePredictions(udt(d,c,i&&s),function(A){u((A||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},nY=C.forwardRef(function(e,t){var r,n,a,s,i,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=C.useState(void 0),j=_[0],k=_[1],I=C.useState(void 0),E=I[0],S=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");k(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return C.useEffect(function(){v?mct(void 0,void 0,void 0,function(){var R;return pct(this,function(P){switch(P.label){case 0:if(!v)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Up(ug({apiKey:v},ug({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return B(),[3,5];case 4:return R=P.sent(),typeof w=="function"&&w(R),[3,5];case 5:return[2]}})}):B()},[]),{placesService:j,sessionToken:E,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),A=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=ddt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:A,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return C.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),at.createElement(ldt,ug({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _D=function(e,t){return _D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},_D(e,t)};function Jd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_D(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var SD=function(){return SD=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},SD.apply(this,arguments)};function pl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function zo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function GN(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Lh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Sj=function(e,t){return Lh.fromClientRect(e,t.getBoundingClientRect())},Adt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Lh(0,0,n,a)},kj=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Gs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},aY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fdt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KN=0;KN<aY.length;KN++)fdt[aY.charCodeAt(KN)]=KN;var sY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qN=0;qN<sY.length;qN++)aw[sY.charCodeAt(qN)]=qN;var hdt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=aw[e.charCodeAt(n)],i=aw[e.charCodeAt(n+1)],l=aw[e.charCodeAt(n+2)],c=aw[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},mdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},pdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},fg=5,uU=11,f6=2,gdt=uU-fg,bAe=65536>>fg,xdt=1<<fg,h6=xdt-1,vdt=1024>>fg,bdt=bAe+vdt,ydt=bdt,wdt=32,Edt=ydt+wdt,Cdt=65536>>uU,Ndt=1<<gdt,_dt=Ndt-1,iY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Sdt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},kdt=function(e,t){var r=hdt(e),n=Array.isArray(r)?pdt(r):new Uint32Array(r),a=Array.isArray(r)?mdt(r):new Uint16Array(r),s=24,i=iY(a,s/2,n[4]/2),l=n[5]===2?iY(a,(s+n[4])/2):Sdt(n,Math.ceil((s+n[4])/4));return new jdt(n[0],n[1],n[2],n[3],i,l)},jdt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>fg],r=(r<<f6)+(t&h6),this.data[r];if(t<=65535)return r=this.index[bAe+(t-55296>>fg)],r=(r<<f6)+(t&h6),this.data[r];if(t<this.highStart)return r=Edt-Cdt+(t>>uU),r=this.index[r],r+=t>>fg&_dt,r=this.index[r],r=(r<<f6)+(t&h6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),oY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bdt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var WN=0;WN<oY.length;WN++)Bdt[oY.charCodeAt(WN)]=WN;var Tdt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",lY=50,Idt=1,yAe=2,wAe=3,Fdt=4,Odt=5,cY=7,EAe=8,uY=9,nm=10,kD=11,dY=12,jD=13,Ddt=14,sw=15,BD=16,XN=17,Oy=18,Pdt=19,AY=20,TD=21,Dy=22,m6=23,ev=24,Ic=25,iw=26,ow=27,tv=28,Rdt=29,Qp=30,Ldt=31,YN=32,JN=33,ID=34,FD=35,OD=36,M2=37,DD=38,n_=39,a_=40,p6=41,CAe=42,Mdt=43,Udt=[9001,65288],NAe="!",Sn="×",ZN="÷",PD=kdt(Tdt),qf=[Qp,OD],RD=[Idt,yAe,wAe,Odt],_Ae=[nm,EAe],fY=[ow,iw],Qdt=RD.concat(_Ae),hY=[DD,n_,a_,ID,FD],Hdt=[sw,jD],Vdt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var l=PD.get(s);if(l>lY?(a.push(!0),l-=lY):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(BD);if(l===Fdt||l===kD){if(i===0)return n.push(i),r.push(Qp);var c=r[i-1];return Qdt.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Qp))}if(n.push(i),l===Ldt)return r.push(t==="strict"?TD:M2);if(l===CAe||l===Rdt)return r.push(Qp);if(l===Mdt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(M2):r.push(Qp);r.push(l)}),[n,r,a]},g6=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==nm)break}if(a===nm)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==nm)break}if(l!==nm)break}return!1},mY=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===nm)r--;else return n}return 0},zdt=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,l=s+1,c=t[s],u=i>=0?t[i]:0,d=t[l];if(c===yAe&&d===wAe)return Sn;if(RD.indexOf(c)!==-1)return NAe;if(RD.indexOf(d)!==-1||_Ae.indexOf(d)!==-1)return Sn;if(mY(s,t)===EAe)return ZN;if(PD.get(e[s])===kD||(c===YN||c===JN)&&PD.get(e[l])===kD||c===cY||d===cY||c===uY||[nm,jD,sw].indexOf(c)===-1&&d===uY||[XN,Oy,Pdt,ev,tv].indexOf(d)!==-1||mY(s,t)===Dy||g6(m6,Dy,s,t)||g6([XN,Oy],TD,s,t)||g6(dY,dY,s,t))return Sn;if(c===nm)return ZN;if(c===m6||d===m6)return Sn;if(d===BD||c===BD)return ZN;if([jD,sw,TD].indexOf(d)!==-1||c===Ddt||u===OD&&Hdt.indexOf(c)!==-1||c===tv&&d===OD||d===AY||qf.indexOf(d)!==-1&&c===Ic||qf.indexOf(c)!==-1&&d===Ic||c===ow&&[M2,YN,JN].indexOf(d)!==-1||[M2,YN,JN].indexOf(c)!==-1&&d===iw||qf.indexOf(c)!==-1&&fY.indexOf(d)!==-1||fY.indexOf(c)!==-1&&qf.indexOf(d)!==-1||[ow,iw].indexOf(c)!==-1&&(d===Ic||[Dy,sw].indexOf(d)!==-1&&t[l+1]===Ic)||[Dy,sw].indexOf(c)!==-1&&d===Ic||c===Ic&&[Ic,tv,ev].indexOf(d)!==-1)return Sn;if([Ic,tv,ev,XN,Oy].indexOf(d)!==-1)for(var A=s;A>=0;){var h=t[A];if(h===Ic)return Sn;if([tv,ev].indexOf(h)!==-1)A--;else break}if([ow,iw].indexOf(d)!==-1)for(var A=[XN,Oy].indexOf(c)!==-1?i:s;A>=0;){var h=t[A];if(h===Ic)return Sn;if([tv,ev].indexOf(h)!==-1)A--;else break}if(DD===c&&[DD,n_,ID,FD].indexOf(d)!==-1||[n_,ID].indexOf(c)!==-1&&[n_,a_].indexOf(d)!==-1||[a_,FD].indexOf(c)!==-1&&d===a_||hY.indexOf(c)!==-1&&[AY,iw].indexOf(d)!==-1||hY.indexOf(d)!==-1&&c===ow||qf.indexOf(c)!==-1&&qf.indexOf(d)!==-1||c===ev&&qf.indexOf(d)!==-1||qf.concat(Ic).indexOf(c)!==-1&&d===Dy&&Udt.indexOf(e[l])===-1||qf.concat(Ic).indexOf(d)!==-1&&c===Oy)return Sn;if(c===p6&&d===p6){for(var m=r[s],g=1;m>0&&(m--,t[m]===p6);)g++;if(g%2!==0)return Sn}return c===YN&&d===JN?Sn:ZN},$dt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Vdt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[Ic,Qp,CAe].indexOf(l)!==-1?M2:l}));var i=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Gdt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===NAe,this.start=n,this.end=a}return e.prototype.slice=function(){return Gs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Kdt=function(e,t){var r=kj(e),n=$dt(r,t),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Sn;u<l&&(d=zdt(r,s,a,++u,i))===Sn;);if(d!==Sn||u===l){var A=new Gdt(r,d,c,u);return c=u,{value:A,done:!1}}return{done:!0,value:null}}}},qdt=1,Wdt=2,LE=4,pY=8,n4=10,gY=47,Rw=92,Xdt=9,Ydt=32,e5=34,Py=61,Jdt=35,Zdt=36,eAt=37,t5=39,r5=40,Ry=41,tAt=95,Jl=45,rAt=33,nAt=60,aAt=62,sAt=64,iAt=91,oAt=93,lAt=61,cAt=123,n5=63,uAt=125,xY=124,dAt=126,AAt=128,vY=65533,x6=42,Xp=43,fAt=44,hAt=58,mAt=59,U2=46,pAt=0,gAt=8,xAt=11,vAt=14,bAt=31,yAt=127,TA=-1,SAe=48,kAe=97,jAe=101,wAt=102,EAt=117,CAt=122,BAe=65,TAe=69,IAe=70,NAt=85,_At=90,Wo=function(e){return e>=SAe&&e<=57},SAt=function(e){return e>=55296&&e<=57343},rv=function(e){return Wo(e)||e>=BAe&&e<=IAe||e>=kAe&&e<=wAt},kAt=function(e){return e>=kAe&&e<=CAt},jAt=function(e){return e>=BAe&&e<=_At},BAt=function(e){return kAt(e)||jAt(e)},TAt=function(e){return e>=AAt},a5=function(e){return e===n4||e===Xdt||e===Ydt},a4=function(e){return BAt(e)||TAt(e)||e===tAt},bY=function(e){return a4(e)||Wo(e)||e===Jl},IAt=function(e){return e>=pAt&&e<=gAt||e===xAt||e>=vAt&&e<=bAt||e===yAt},$0=function(e,t){return e!==Rw?!1:t!==n4},s5=function(e,t,r){return e===Jl?a4(t)||$0(t,r):a4(e)?!0:!!(e===Rw&&$0(e,t))},v6=function(e,t,r){return e===Xp||e===Jl?Wo(t)?!0:t===U2&&Wo(r):Wo(e===U2?t:e)},FAt=function(e){var t=0,r=1;(e[t]===Xp||e[t]===Jl)&&(e[t]===Jl&&(r=-1),t++);for(var n=[];Wo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Gs.apply(void 0,n),10):0;e[t]===U2&&t++;for(var s=[];Wo(e[t]);)s.push(e[t++]);var i=s.length,l=i?parseInt(Gs.apply(void 0,s),10):0;(e[t]===TAe||e[t]===jAe)&&t++;var c=1;(e[t]===Xp||e[t]===Jl)&&(e[t]===Jl&&(c=-1),t++);for(var u=[];Wo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Gs.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},OAt={type:2},DAt={type:3},PAt={type:4},RAt={type:13},LAt={type:8},MAt={type:21},UAt={type:9},QAt={type:10},HAt={type:11},VAt={type:12},zAt={type:14},i5={type:23},$At={type:1},GAt={type:25},KAt={type:24},qAt={type:26},WAt={type:27},XAt={type:28},YAt={type:29},JAt={type:31},LD={type:32},FAe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(kj(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==LD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case e5:return this.consumeStringToken(e5);case Jdt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(bY(r)||$0(n,a)){var s=s5(r,n,a)?Wdt:qdt,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Zdt:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),RAt;break;case t5:return this.consumeStringToken(t5);case r5:return OAt;case Ry:return DAt;case x6:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),zAt;break;case Xp:if(v6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case fAt:return PAt;case Jl:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(v6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(s5(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Jl&&u===aAt)return this.consumeCodePoint(),this.consumeCodePoint(),KAt;break;case U2:if(v6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case gY:if(this.peekCodePoint(0)===x6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===x6&&(d=this.consumeCodePoint(),d===gY))return this.consumeToken();if(d===TA)return this.consumeToken()}break;case hAt:return qAt;case mAt:return WAt;case nAt:if(this.peekCodePoint(0)===rAt&&this.peekCodePoint(1)===Jl&&this.peekCodePoint(2)===Jl)return this.consumeCodePoint(),this.consumeCodePoint(),GAt;break;case sAt:var A=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(s5(A,h,m)){var i=this.consumeName();return{type:7,value:i}}break;case iAt:return XAt;case Rw:if($0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case oAt:return YAt;case lAt:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),LAt;break;case cAt:return HAt;case uAt:return VAt;case EAt:case NAt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Xp&&(rv(x)||x===n5)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case xY:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),UAt;if(this.peekCodePoint(0)===xY)return this.consumeCodePoint(),MAt;break;case dAt:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),QAt;break;case TA:return LD}return a5(t)?(this.consumeWhiteSpace(),JAt):Wo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):a4(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Gs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();rv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===n5&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Gs.apply(void 0,t.map(function(c){return c===n5?SAe:c})),16),s=parseInt(Gs.apply(void 0,t.map(function(c){return c===n5?IAe:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Gs.apply(void 0,t),16);if(this.peekCodePoint(0)===Jl&&rv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];rv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Gs.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===r5?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===r5?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===TA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===t5||r===e5){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===TA||this.peekCodePoint(0)===Ry)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),i5)}for(;;){var a=this.consumeCodePoint();if(a===TA||a===Ry)return{type:22,value:Gs.apply(void 0,t)};if(a5(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===TA||this.peekCodePoint(0)===Ry?(this.consumeCodePoint(),{type:22,value:Gs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),i5);if(a===e5||a===t5||a===r5||IAt(a))return this.consumeBadUrlRemnants(),i5;if(a===Rw)if($0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),i5;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;a5(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ry||t===TA)return;$0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Gs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===TA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===n4)return this._value.splice(0,n),$At;if(a===Rw){var s=this._value[n+1];s!==TA&&s!==void 0&&(s===n4?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):$0(a,s)&&(r+=this.consumeStringSlice(n),r+=Gs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=LE,n=this.peekCodePoint(0);for((n===Xp||n===Jl)&&t.push(this.consumeCodePoint());Wo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===U2&&Wo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=pY;Wo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===TAe||n===jAe)&&((a===Xp||a===Jl)&&Wo(s)||Wo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=pY;Wo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[FAt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(s5(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===eAt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(rv(t)){for(var r=Gs(t);rv(this.peekCodePoint(0))&&r.length<6;)r+=Gs(this.consumeCodePoint());a5(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||SAt(n)||n>1114111?vY:n}return t===TA?vY:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(bY(r))t+=Gs(r);else if($0(r,this.peekCodePoint(0)))t+=Gs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),OAe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new FAe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||eft(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?LD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),ME=function(e){return e.type===15},Cb=function(e){return e.type===17},wa=function(e){return e.type===20},ZAt=function(e){return e.type===0},MD=function(e,t){return wa(e)&&e.value===t},DAe=function(e){return e.type!==31},U1=function(e){return e.type!==31&&e.type!==4},hf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},eft=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Um=function(e){return e.type===17||e.type===15},mi=function(e){return e.type===16||Um(e)},PAe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},No={type:17,number:0,flags:LE},dU={type:16,number:50,flags:LE},am={type:16,number:100,flags:LE},lw=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(ME(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},RAe="deg",LAe="grad",MAe="rad",UAe="turn",jj={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case RAe:return Math.PI*t.number/180;case LAe:return Math.PI/200*t.number;case MAe:return t.number;case UAe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},QAe=function(e){return e.type===15&&(e.unit===RAe||e.unit===LAe||e.unit===MAe||e.unit===UAe)},HAe=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[No,No];case"to top":case"bottom":return Hu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[No,am];case"to right":case"left":return Hu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[am,am];case"to bottom":case"top":return Hu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[am,No];case"to left":case"right":return Hu(270)}return 0},Hu=function(e){return Math.PI*e/180},xm={name:"color",parse:function(e,t){if(t.type===18){var r=tft[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return sm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return sm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return sm(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return sm(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var l=bh[t.value.toUpperCase()];if(typeof l<"u")return l}return bh.TRANSPARENT}},vm=function(e){return(255&e)===0},Ki=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},sm=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},yY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},wY=function(e,t){var r=t.filter(U1);if(r.length===3){var n=r.map(yY),a=n[0],s=n[1],i=n[2];return sm(a,s,i,1)}if(r.length===4){var l=r.map(yY),a=l[0],s=l[1],i=l[2],c=l[3];return sm(a,s,i,c)}return 0};function b6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var EY=function(e,t){var r=t.filter(U1),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Hu(n.number):jj.parse(e,n))/(Math.PI*2),c=mi(a)?a.number/100:0,u=mi(s)?s.number/100:0,d=typeof i<"u"&&mi(i)?Da(i,1):1;if(c===0)return sm(u*255,u*255,u*255,1);var A=u<=.5?u*(c+1):u+c-u*c,h=u*2-A,m=b6(h,A,l+1/3),g=b6(h,A,l),x=b6(h,A,l-1/3);return sm(m*255,g*255,x*255,d)},tft={hsl:EY,hsla:EY,rgb:wY,rgba:wY},Lw=function(e,t){return xm.parse(e,OAe.create(t).parseComponentValue())},bh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},rft={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nft={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Bj=function(e,t){var r=xm.parse(e,t[0]),n=t[1];return n&&mi(n)?{color:r,stop:n}:{color:r,stop:null}},CY=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=No),n.stop===null&&(n.stop=am);for(var a=[],s=0,i=0;i<e.length;i++){var l=e[i].stop;if(l!==null){var c=Da(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var A=i-u,h=a[u-1],m=(d-h)/(A+1),g=1;g<=A;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},aft=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},sft=function(e,t,r){var n=typeof e=="number"?e:aft(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},Nd=function(e,t){return Math.sqrt(e*e+t*t)},NY=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=Nd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},ift=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(Nd(t,r),Nd(t,r-a),Nd(t-n,r),Nd(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=NY(n,a,t,r,!0),u=c[0],d=c[1];s=Nd(u-t,(d-r)/l),i=l*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(Nd(t,r),Nd(t,r-a),Nd(t-n,r),Nd(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),A=NY(n,a,t,r,!1),u=A[0],d=A[1];s=Nd(u-t,(d-r)/l),i=l*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},oft=function(e,t){var r=Hu(180),n=[];return hf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=HAe(a);return}else if(QAe(i)){r=jj.parse(e,i);return}}var l=Bj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},o5=function(e,t){var r=Hu(180),n=[];return hf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=HAe(a);return}else if(QAe(i)){r=(jj.parse(e,i)+Hu(270))%Hu(360);return}}var l=Bj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},lft=function(e,t){var r=Hu(180),n=[],a=1,s=0,i=3,l=[];return hf(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var A=xm.parse(e,d.values[0]);n.push({stop:No,color:A})}else if(d.name==="to"){var A=xm.parse(e,d.values[0]);n.push({stop:am,color:A})}else if(d.name==="color-stop"){var h=d.values.filter(U1);if(h.length===2){var A=xm.parse(e,h[1]),m=h[0];Cb(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:A})}}}}),a===1?{angle:(r+Hu(180))%Hu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},VAe="closest-side",zAe="farthest-side",$Ae="closest-corner",GAe="farthest-corner",KAe="circle",qAe="ellipse",WAe="cover",XAe="contain",cft=function(e,t){var r=0,n=3,a=[],s=[];return hf(t).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(A,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(dU),A;case"top":case"left":return s.push(No),A;case"right":case"bottom":return s.push(am),A}else(mi(h)||Um(h))&&s.push(h);else if(wa(h))switch(h.value){case KAe:return r=0,!1;case qAe:return r=1,!1;case"at":return u=!0,!1;case VAe:return n=0,!1;case WAe:case zAe:return n=1,!1;case XAe:case $Ae:return n=2,!1;case GAe:return n=3,!1}else if(Um(h)||mi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return A},c)}if(c){var d=Bj(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},l5=function(e,t){var r=0,n=3,a=[],s=[];return hf(t).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,A){if(wa(A))switch(A.value){case"center":return s.push(dU),!1;case"top":case"left":return s.push(No),!1;case"right":case"bottom":return s.push(am),!1}else if(mi(A)||Um(A))return s.push(A),!1;return d},c):l===1&&(c=i.reduce(function(d,A){if(wa(A))switch(A.value){case KAe:return r=0,!1;case qAe:return r=1,!1;case XAe:case VAe:return n=0,!1;case zAe:return n=1,!1;case $Ae:return n=2,!1;case WAe:case GAe:return n=3,!1}else if(Um(A)||mi(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return d},c)),c){var u=Bj(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},uft=function(e){return e.type===1},dft=function(e){return e.type===2},AU={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=YAe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Aft(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!YAe[e.name])}var YAe={"linear-gradient":oft,"-moz-linear-gradient":o5,"-ms-linear-gradient":o5,"-o-linear-gradient":o5,"-webkit-linear-gradient":o5,"radial-gradient":cft,"-moz-radial-gradient":l5,"-ms-radial-gradient":l5,"-o-radial-gradient":l5,"-webkit-radial-gradient":l5,"-webkit-gradient":lft},fft={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return U1(n)&&Aft(n)}).map(function(n){return AU.parse(e,n)})}},hft={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mft={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return hf(t).map(function(r){return r.filter(mi)}).map(PAe)}},pft={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return hf(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(gft)}},gft=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},e1;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(e1||(e1={}));var xft={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return hf(t).map(function(r){return r.filter(vft)})}},vft=function(e){return wa(e)||mi(e)},Tj=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},bft=Tj("top"),yft=Tj("right"),wft=Tj("bottom"),Eft=Tj("left"),Ij=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return PAe(r.filter(mi))}}},Cft=Ij("top-left"),Nft=Ij("top-right"),_ft=Ij("bottom-right"),Sft=Ij("bottom-left"),Fj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},kft=Fj("top"),jft=Fj("right"),Bft=Fj("bottom"),Tft=Fj("left"),Oj=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return ME(r)?r.number:0}}},Ift=Oj("top"),Fft=Oj("right"),Oft=Oj("bottom"),Dft=Oj("left"),Pft={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rft={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Lft={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|Mft(n.value)},0)}},Mft=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Uft={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Qft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},s4;(function(e){e.NORMAL="normal",e.STRICT="strict"})(s4||(s4={}));var Hft={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return s4.STRICT;case"normal":default:return s4.NORMAL}}},Vft={name:"line-height",initialValue:"normal",prefix:!1,type:4},_Y=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:mi(e)?Da(e,t):t},zft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:AU.parse(e,t)}},$ft={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},UD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Dj=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Gft=Dj("top"),Kft=Dj("right"),qft=Dj("bottom"),Wft=Dj("left"),Xft={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Yft={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Jft=Pj("top"),Zft=Pj("right"),eht=Pj("bottom"),tht=Pj("left"),rht={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nht={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aht={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&MD(t[0],"none")?[]:hf(t).map(function(r){for(var n={color:bh.TRANSPARENT,offsetX:No,offsetY:No,blur:No},a=0,s=0;s<r.length;s++){var i=r[s];Um(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=xm.parse(e,i)}return n})}},sht={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},iht={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=cht[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},oht=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},lht=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,l]:null},cht={matrix:oht,matrix3d:lht},SY={type:16,number:50,flags:LE},uht=[SY,SY],dht={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(mi);return r.length!==2?uht:[r[0],r[1]]}},Aht={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Mw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Mw||(Mw={}));var fht={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Mw.BREAK_ALL;case"keep-all":return Mw.KEEP_ALL;case"normal":default:return Mw.NORMAL}}},hht={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Cb(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},JAe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},mht={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Cb(t)?t.number:1}},pht={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ght={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},xht={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},vht={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bht={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Cb(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},yht={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},wht={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ji=function(e,t){return(e&t)!==0},Eht={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Cht={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(DAe),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&Cb(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},Nht={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(DAe),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var l=i&&Cb(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},_ht={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(ME).map(function(r){return JAe.parse(e,r)})}},Sht={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(ZAt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},kY=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},kht={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&MD(t[0],"none")?[]:hf(t).map(function(r){for(var n={color:255,offsetX:No,offsetY:No,blur:No,spread:No,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];MD(i,"inset")?n.inset=!0:Um(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=xm.parse(e,i)}return n})}},jht={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Bht={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Tht={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ME(t)?t.number:0}},Iht=function(){function e(t,r){var n,a;this.animationDuration=lr(t,_ht,r.animationDuration),this.backgroundClip=lr(t,rft,r.backgroundClip),this.backgroundColor=lr(t,nft,r.backgroundColor),this.backgroundImage=lr(t,fft,r.backgroundImage),this.backgroundOrigin=lr(t,hft,r.backgroundOrigin),this.backgroundPosition=lr(t,mft,r.backgroundPosition),this.backgroundRepeat=lr(t,pft,r.backgroundRepeat),this.backgroundSize=lr(t,xft,r.backgroundSize),this.borderTopColor=lr(t,bft,r.borderTopColor),this.borderRightColor=lr(t,yft,r.borderRightColor),this.borderBottomColor=lr(t,wft,r.borderBottomColor),this.borderLeftColor=lr(t,Eft,r.borderLeftColor),this.borderTopLeftRadius=lr(t,Cft,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,Nft,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,_ft,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,Sft,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,kft,r.borderTopStyle),this.borderRightStyle=lr(t,jft,r.borderRightStyle),this.borderBottomStyle=lr(t,Bft,r.borderBottomStyle),this.borderLeftStyle=lr(t,Tft,r.borderLeftStyle),this.borderTopWidth=lr(t,Ift,r.borderTopWidth),this.borderRightWidth=lr(t,Fft,r.borderRightWidth),this.borderBottomWidth=lr(t,Oft,r.borderBottomWidth),this.borderLeftWidth=lr(t,Dft,r.borderLeftWidth),this.boxShadow=lr(t,kht,r.boxShadow),this.color=lr(t,Pft,r.color),this.direction=lr(t,Rft,r.direction),this.display=lr(t,Lft,r.display),this.float=lr(t,Uft,r.cssFloat),this.fontFamily=lr(t,xht,r.fontFamily),this.fontSize=lr(t,vht,r.fontSize),this.fontStyle=lr(t,wht,r.fontStyle),this.fontVariant=lr(t,yht,r.fontVariant),this.fontWeight=lr(t,bht,r.fontWeight),this.letterSpacing=lr(t,Qft,r.letterSpacing),this.lineBreak=lr(t,Hft,r.lineBreak),this.lineHeight=lr(t,Vft,r.lineHeight),this.listStyleImage=lr(t,zft,r.listStyleImage),this.listStylePosition=lr(t,$ft,r.listStylePosition),this.listStyleType=lr(t,UD,r.listStyleType),this.marginTop=lr(t,Gft,r.marginTop),this.marginRight=lr(t,Kft,r.marginRight),this.marginBottom=lr(t,qft,r.marginBottom),this.marginLeft=lr(t,Wft,r.marginLeft),this.opacity=lr(t,mht,r.opacity);var s=lr(t,Xft,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,Yft,r.overflowWrap),this.paddingTop=lr(t,Jft,r.paddingTop),this.paddingRight=lr(t,Zft,r.paddingRight),this.paddingBottom=lr(t,eht,r.paddingBottom),this.paddingLeft=lr(t,tht,r.paddingLeft),this.paintOrder=lr(t,jht,r.paintOrder),this.position=lr(t,nht,r.position),this.textAlign=lr(t,rht,r.textAlign),this.textDecorationColor=lr(t,pht,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,ght,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,aht,r.textShadow),this.textTransform=lr(t,sht,r.textTransform),this.transform=lr(t,iht,r.transform),this.transformOrigin=lr(t,dht,r.transformOrigin),this.visibility=lr(t,Aht,r.visibility),this.webkitTextStrokeColor=lr(t,Bht,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,Tht,r.webkitTextStrokeWidth),this.wordBreak=lr(t,fht,r.wordBreak),this.zIndex=lr(t,hht,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return vm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ji(this.display,4)||ji(this.display,33554432)||ji(this.display,268435456)||ji(this.display,536870912)||ji(this.display,67108864)||ji(this.display,134217728)},e}(),Fht=function(){function e(t,r){this.content=lr(t,Eht,r.content),this.quotes=lr(t,Sht,r.quotes)}return e}(),jY=function(){function e(t,r){this.counterIncrement=lr(t,Cht,r.counterIncrement),this.counterReset=lr(t,Nht,r.counterReset)}return e}(),lr=function(e,t,r){var n=new FAe,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new OAe(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return jj.parse(e,s.parseComponentValue());case"color":return xm.parse(e,s.parseComponentValue());case"image":return AU.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Um(l)?l:No;case"length-percentage":var c=s.parseComponentValue();return mi(c)?c:No;case"time":return JAe.parse(e,s.parseComponentValue())}break}},Oht="data-html2canvas-debug",Dht=function(e){var t=e.getAttribute(Oht);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},QD=function(e,t){var r=Dht(e);return r===1||t===r},mf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,QD(r,3))debugger;this.styles=new Iht(t,window.getComputedStyle(r,null)),zD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Sj(this.context,r),QD(r,4)&&(this.flags|=16)}return e}(),Pht="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",BY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var c5=0;c5<BY.length;c5++)cw[BY.charCodeAt(c5)]=c5;var Rht=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=cw[e.charCodeAt(n)],i=cw[e.charCodeAt(n+1)],l=cw[e.charCodeAt(n+2)],c=cw[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Lht=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Mht=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},hg=5,fU=11,y6=2,Uht=fU-hg,ZAe=65536>>hg,Qht=1<<hg,w6=Qht-1,Hht=1024>>hg,Vht=ZAe+Hht,zht=Vht,$ht=32,Ght=zht+$ht,Kht=65536>>fU,qht=1<<Uht,Wht=qht-1,TY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Xht=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Yht=function(e,t){var r=Rht(e),n=Array.isArray(r)?Mht(r):new Uint32Array(r),a=Array.isArray(r)?Lht(r):new Uint16Array(r),s=24,i=TY(a,s/2,n[4]/2),l=n[5]===2?TY(a,(s+n[4])/2):Xht(n,Math.ceil((s+n[4])/4));return new Jht(n[0],n[1],n[2],n[3],i,l)},Jht=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>hg],r=(r<<y6)+(t&w6),this.data[r];if(t<=65535)return r=this.index[ZAe+(t-55296>>hg)],r=(r<<y6)+(t&w6),this.data[r];if(t<this.highStart)return r=Ght-Kht+(t>>fU),r=this.index[r],r+=t>>hg&Wht,r=this.index[r],r=(r<<y6)+(t&w6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),IY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zht=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var u5=0;u5<IY.length;u5++)Zht[IY.charCodeAt(u5)]=u5;var e0t=1,E6=2,C6=3,FY=4,OY=5,t0t=7,DY=8,N6=9,_6=10,PY=11,RY=12,LY=13,MY=14,S6=15,r0t=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},n0t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},a0t=Yht(Pht),Fu="×",k6="÷",s0t=function(e){return a0t.get(e)},i0t=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===E6&&i===C6)return Fu;if(s===E6||s===C6||s===FY||i===E6||i===C6||i===FY)return k6;if(s===DY&&[DY,N6,PY,RY].indexOf(i)!==-1||(s===PY||s===N6)&&(i===N6||i===_6)||(s===RY||s===_6)&&i===_6||i===LY||i===OY||i===t0t||s===e0t)return Fu;if(s===LY&&i===MY){for(;a===OY;)a=t[--n];if(a===MY)return Fu}if(s===S6&&i===S6){for(var l=0;a===S6;)l++,a=t[--n];if(l%2===0)return Fu}return k6},o0t=function(e){var t=r0t(e),r=t.length,n=0,a=0,s=t.map(s0t);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Fu;n<r&&(i=i0t(t,s,++n))===Fu;);if(i!==Fu||n===r){var l=n0t.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},l0t=function(e){for(var t=o0t(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},c0t=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},u0t=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=kj(n.data).map(function(c){return Gs(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var A=d.x>i.x||d.y>i.y;return i=d,u===0?!0:A});return e.body.removeChild(t),l},d0t=function(){return typeof new Image().crossOrigin<"u"},A0t=function(){return typeof new XMLHttpRequest().responseType=="string"},f0t=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},UY=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},h0t=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=HD(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),QY(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",UY(c)?QY(HD(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),UY(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},HD=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},QY=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vo={get SUPPORT_RANGE_BOUNDS(){var e=c0t(document);return Object.defineProperty(vo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vo.SUPPORT_RANGE_BOUNDS&&u0t(document);return Object.defineProperty(vo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=f0t(document);return Object.defineProperty(vo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?h0t(document):Promise.resolve(!1);return Object.defineProperty(vo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=d0t();return Object.defineProperty(vo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=A0t();return Object.defineProperty(vo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Uw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),m0t=function(e,t,r,n){var a=x0t(t,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(vo.SUPPORT_RANGE_BOUNDS){var c=HY(n,i,l.length).getClientRects();if(c.length>1){var u=hU(l),d=0;u.forEach(function(h){s.push(new Uw(h,Lh.fromDOMRectList(e,HY(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Uw(l,Lh.fromDOMRectList(e,c)))}else{var A=n.splitText(l.length);s.push(new Uw(l,p0t(e,n))),n=A}else vo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},p0t=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=Sj(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Lh.EMPTY},HY=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},hU=function(e){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return l0t(e)},g0t=function(e,t){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return b0t(e,t)},x0t=function(e,t){return t.letterSpacing!==0?hU(e):g0t(e,t)},v0t=[32,160,4961,65792,65793,4153,4241],b0t=function(e,t){for(var r=Kdt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=kj(i),c="";l.forEach(function(u){v0t.indexOf(u)===-1?c+=Gs(u):(c.length&&n.push(c),n.push(Gs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},y0t=function(){function e(t,r,n){this.text=w0t(r.data,n.textTransform),this.textBounds=m0t(t,this.text,n,r)}return e}(),w0t=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(E0t,C0t);case 2:return e.toUpperCase();default:return e}},E0t=/(^|\s|:|-|\(|\))([a-z])/g,C0t=function(e,t,r){return e.length>0?t+r.toUpperCase():e},efe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(mf),tfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(mf),rfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=Sj(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(mf),nfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(mf),VD=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(mf),N0t=[{type:15,flags:0,unit:"px",number:3}],_0t=[{type:16,flags:0,number:50}],S0t=function(e){return e.width>e.height?new Lh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Lh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},k0t=function(e){var t=e.type===j0t?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},i4="checkbox",o4="radio",j0t="password",VY=707406591,mU=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=k0t(n),(a.type===i4||a.type===o4)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=S0t(a.bounds)),a.type){case i4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=N0t;break;case o4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=_0t;break}return a}return t}(mf),afe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(mf),sfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(mf),ife=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=lfe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Lw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):bh.TRANSPARENT,i=n.contentWindow.document.body?Lw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):bh.TRANSPARENT;a.backgroundColor=vm(s)?vm(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(mf),B0t=["OL","UL","MENU"],s_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,cfe(a)&&a.data.trim().length>0)r.textNodes.push(new y0t(e,a,r.styles));else if(Bv(a))if(ffe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return s_(e,l,r,n)});else{var i=ofe(e,a);i.styles.isVisible()&&(T0t(a,i,n)?i.flags|=4:I0t(i.styles)&&(i.flags|=2),B0t.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?s_(e,a.shadowRoot,i,n):!l4(a)&&!ufe(a)&&!c4(a)&&s_(e,a,i,n))}},ofe=function(e,t){return $D(t)?new efe(e,t):dfe(t)?new tfe(e,t):ufe(t)?new rfe(e,t):F0t(t)?new nfe(e,t):O0t(t)?new VD(e,t):D0t(t)?new mU(e,t):c4(t)?new afe(e,t):l4(t)?new sfe(e,t):Afe(t)?new ife(e,t):new mf(e,t)},lfe=function(e,t){var r=ofe(e,t);return r.flags|=4,s_(e,t,r,r),r},T0t=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||pU(e)&&r.styles.isTransparent()},I0t=function(e){return e.isPositioned()||e.isFloating()},cfe=function(e){return e.nodeType===Node.TEXT_NODE},Bv=function(e){return e.nodeType===Node.ELEMENT_NODE},zD=function(e){return Bv(e)&&typeof e.style<"u"&&!i_(e)},i_=function(e){return typeof e.className=="object"},F0t=function(e){return e.tagName==="LI"},O0t=function(e){return e.tagName==="OL"},D0t=function(e){return e.tagName==="INPUT"},P0t=function(e){return e.tagName==="HTML"},ufe=function(e){return e.tagName==="svg"},pU=function(e){return e.tagName==="BODY"},dfe=function(e){return e.tagName==="CANVAS"},zY=function(e){return e.tagName==="VIDEO"},$D=function(e){return e.tagName==="IMG"},Afe=function(e){return e.tagName==="IFRAME"},$Y=function(e){return e.tagName==="STYLE"},R0t=function(e){return e.tagName==="SCRIPT"},l4=function(e){return e.tagName==="TEXTAREA"},c4=function(e){return e.tagName==="SELECT"},ffe=function(e){return e.tagName==="SLOT"},GY=function(e){return e.tagName.indexOf("-")>0},L0t=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},e}(),KY={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},qY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},M0t={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},U0t={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},nv=function(e,t,r,n,a,s){return e<t||e>r?Q2(e,a,s.length>0):n.integers.reduce(function(i,l,c){for(;e>=l;)e-=l,i+=n.values[c];return i},"")+s},hfe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Vs=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(hfe(Math.abs(e),s,n,function(i){return Gs(Math.floor(i%s)+t)})+a)},_p=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return hfe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},pv=1,U0=2,Q0=4,uw=8,Wf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return Q2(e,4,a.length>0);var i=Math.abs(e),l=a;if(i===0)return t[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&ji(s,pv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ji(s,U0)||u===1&&c===1&&ji(s,Q0)&&e>100||u===1&&c>1&&ji(s,uw)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(e<0?n:"")+l},WY="十百千萬",XY="拾佰仟萬",YY="マイナス",j6="마이너스",Q2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var l=Vs(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return _p(e,"〇一二三四五六七八九",a);case 6:return nv(e,1,3999,KY,3,n).toLowerCase();case 7:return nv(e,1,3999,KY,3,n);case 8:return Vs(e,945,969,!1,n);case 9:return Vs(e,97,122,!1,n);case 10:return Vs(e,65,90,!1,n);case 11:return Vs(e,1632,1641,!0,n);case 12:case 49:return nv(e,1,9999,qY,3,n);case 35:return nv(e,1,9999,qY,3,n).toLowerCase();case 13:return Vs(e,2534,2543,!0,n);case 14:case 30:return Vs(e,6112,6121,!0,n);case 15:return _p(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return _p(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Wf(e,"零一二三四五六七八九",WY,"負",a,U0|Q0|uw);case 47:return Wf(e,"零壹貳參肆伍陸柒捌玖",XY,"負",a,pv|U0|Q0|uw);case 42:return Wf(e,"零一二三四五六七八九",WY,"负",a,U0|Q0|uw);case 41:return Wf(e,"零壹贰叁肆伍陆柒捌玖",XY,"负",a,pv|U0|Q0|uw);case 26:return Wf(e,"〇一二三四五六七八九","十百千万",YY,a,0);case 25:return Wf(e,"零壱弐参四伍六七八九","拾百千万",YY,a,pv|U0|Q0);case 31:return Wf(e,"영일이삼사오육칠팔구","십백천만",j6,s,pv|U0|Q0);case 33:return Wf(e,"零一二三四五六七八九","十百千萬",j6,s,0);case 32:return Wf(e,"零壹貳參四五六七八九","拾百千",j6,s,pv|U0|Q0);case 18:return Vs(e,2406,2415,!0,n);case 20:return nv(e,1,19999,U0t,3,n);case 21:return Vs(e,2790,2799,!0,n);case 22:return Vs(e,2662,2671,!0,n);case 22:return nv(e,1,10999,M0t,3,n);case 23:return _p(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return _p(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Vs(e,3302,3311,!0,n);case 28:return _p(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return _p(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Vs(e,3792,3801,!0,n);case 37:return Vs(e,6160,6169,!0,n);case 38:return Vs(e,4160,4169,!0,n);case 39:return Vs(e,2918,2927,!0,n);case 40:return Vs(e,1776,1785,!0,n);case 43:return Vs(e,3046,3055,!0,n);case 44:return Vs(e,3174,3183,!0,n);case 45:return Vs(e,3664,3673,!0,n);case 46:return Vs(e,3872,3881,!0,n);case 3:default:return Vs(e,48,57,!0,n)}},mfe="data-html2canvas-ignore",JY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new L0t,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Q0t(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=z0t(a).then(function(){return pl(n,void 0,void 0,function(){var d,A;return zo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(q0t),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,V0t(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,A)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(G0t(document.doctype)+"<html></html>"),K0t(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(QD(t,2))debugger;if(dfe(t))return this.createCanvasClone(t);if(zY(t))return this.createVideoClone(t);if($Y(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return $D(r)&&($D(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),GY(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return B6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Bv(r)||!R0t(r)&&!r.hasAttribute(mfe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Bv(r)||!$Y(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Bv(s)&&ffe(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(cfe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Bv(t)&&(zD(t)||i_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&zD(a)&&(this.clonedReferenceElement=a),pU(a)&&Y0t(a);var c=this.counters.parse(new jY(this.context,s)),u=this.resolvePseudoContent(t,a,i,Qw.BEFORE);GY(t)&&(r=!0),zY(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,Qw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||i_(t))&&!Afe(t)||r)&&B6(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(l4(t)||c4(t))&&(l4(a)||c4(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new jY(this.context,n));var c=new Fht(this.context,n),u=l.createElement("html2canvaspseudoelement");B6(n,u),c.content.forEach(function(A){if(A.type===0)u.appendChild(l.createTextNode(A.value));else if(A.type===22){var h=l.createElement("img");h.src=A.value,h.style.opacity="1",u.appendChild(h)}else if(A.type===18){if(A.name==="attr"){var m=A.values.filter(wa);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(A.name==="counter"){var g=A.values.filter(U1),x=g[0],v=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=v&&wa(v)?UD.parse(s.context,v.value):3;u.appendChild(l.createTextNode(Q2(y,w,!1)))}}else if(A.name==="counters"){var _=A.values.filter(U1),x=_[0],j=_[1],v=_[2];if(x&&wa(x)){var k=s.counters.getCounterValues(x.value),I=v&&wa(v)?UD.parse(s.context,v.value):3,E=j&&j.type===0?j.value:"",S=k.map(function(P){return Q2(P,I,!1)}).join(E);u.appendChild(l.createTextNode(S))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(l.createTextNode(kY(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(kY(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(A.value))}}),u.className=GD+" "+KD;var d=a===Qw.BEFORE?" "+GD:" "+KD;return i_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Qw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Qw||(Qw={}));var Q0t=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(mfe,"true"),e.body.appendChild(r),r},H0t=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},V0t=function(e){return Promise.all([].slice.call(e.images,0).map(H0t))},z0t=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},$0t=["all","d","content"],B6=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);$0t.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},G0t=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},K0t=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},q0t=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},W0t=":before",X0t=":after",GD="___html2canvas___pseudoelement_before",KD="___html2canvas___pseudoelement_after",ZY=`{
    content: "" !important;
    display: none !important;
}`,Y0t=function(e){J0t(e,"."+GD+W0t+ZY+`
         .`+KD+X0t+ZY)},J0t=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},pfe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Z0t=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(I6(t)||nmt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return pl(this,void 0,void 0,function(){var r,n,a,s,i=this;return zo(this,function(l){switch(l.label){case 0:return r=pfe.isSameOrigin(t),n=!T6(t)&&this._options.useCORS===!0&&vo.SUPPORT_CORS_IMAGES&&!r,a=!T6(t)&&!r&&!I6(t)&&typeof this._options.proxy=="string"&&vo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!T6(t)&&!I6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(amt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var l=vo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(h){return i(h)},!1),A.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),emt=/^data:image\/svg\+xml/i,tmt=/^data:image\/.*;base64,/i,rmt=/^data:image\/.*/i,nmt=function(e){return vo.SUPPORT_SVG_DRAWING||!smt(e)},T6=function(e){return rmt.test(e)},amt=function(e){return tmt.test(e)},I6=function(e){return e.substr(0,4)==="blob"},smt=function(e){return e.substr(-3).toLowerCase()==="svg"||emt.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),av=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},d5=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=av(this.start,this.startControl,t),a=av(this.startControl,this.endControl,t),s=av(this.endControl,this.end,t),i=av(n,a,t),l=av(a,s,t),c=av(i,l,t);return r?new e(this.start,n,i,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Pu=function(e){return e.type===1},imt=function(){function e(t){var r=t.styles,n=t.bounds,a=lw(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=lw(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=lw(r.borderBottomRightRadius,n.width,n.height),A=d[0],h=d[1],m=lw(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+A)/n.width),v.push((i+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,i/=y,c/=y,u/=y,A/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,j=n.width-A,k=n.height-x,I=r.borderTopWidth,E=r.borderRightWidth,S=r.borderBottomWidth,B=r.borderLeftWidth,R=Da(r.paddingTop,t.bounds.width),P=Da(r.paddingRight,t.bounds.width),F=Da(r.paddingBottom,t.bounds.width),L=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Xa(n.left+B/3,n.top+I/3,s-B/3,i-I/3,aa.TOP_LEFT):new ar(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Xa(n.left+w,n.top+I/3,c-E/3,u-I/3,aa.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=A>0||h>0?Xa(n.left+j,n.top+_,A-E/3,h-S/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Xa(n.left+B/3,n.top+k,g-B/3,x-S/3,aa.BOTTOM_LEFT):new ar(n.left+B/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Xa(n.left+B*2/3,n.top+I*2/3,s-B*2/3,i-I*2/3,aa.TOP_LEFT):new ar(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Xa(n.left+w,n.top+I*2/3,c-E*2/3,u-I*2/3,aa.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=A>0||h>0?Xa(n.left+j,n.top+_,A-E*2/3,h-S*2/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Xa(n.left+B*2/3,n.top+k,g-B*2/3,x-S*2/3,aa.BOTTOM_LEFT):new ar(n.left+B*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||i>0?Xa(n.left+B/2,n.top+I/2,s-B/2,i-I/2,aa.TOP_LEFT):new ar(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?Xa(n.left+w,n.top+I/2,c-E/2,u-I/2,aa.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=A>0||h>0?Xa(n.left+j,n.top+_,A-E/2,h-S/2,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=g>0||x>0?Xa(n.left+B/2,n.top+k,g-B/2,x-S/2,aa.BOTTOM_LEFT):new ar(n.left+B/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||i>0?Xa(n.left,n.top,s,i,aa.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Xa(n.left+w,n.top,c,u,aa.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||h>0?Xa(n.left+j,n.top+_,A,h,aa.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Xa(n.left,n.top+k,g,x,aa.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Xa(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,i-I),aa.TOP_LEFT):new ar(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?Xa(n.left+Math.min(w,n.width-E),n.top+I,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-I),aa.TOP_RIGHT):new ar(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=A>0||h>0?Xa(n.left+Math.min(j,n.width-B),n.top+Math.min(_,n.height-S),Math.max(0,A-E),Math.max(0,h-S),aa.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-S),this.bottomLeftPaddingBox=g>0||x>0?Xa(n.left+B,n.top+Math.min(k,n.height-S),Math.max(0,g-B),Math.max(0,x-S),aa.BOTTOM_LEFT):new ar(n.left+B,n.top+n.height-S),this.topLeftContentBox=s>0||i>0?Xa(n.left+B+L,n.top+I+R,Math.max(0,s-(B+L)),Math.max(0,i-(I+R)),aa.TOP_LEFT):new ar(n.left+B+L,n.top+I+R),this.topRightContentBox=c>0||u>0?Xa(n.left+Math.min(w,n.width+B+L),n.top+I+R,w>n.width+B+L?0:c-B+L,u-(I+R),aa.TOP_RIGHT):new ar(n.left+n.width-(E+P),n.top+I+R),this.bottomRightContentBox=A>0||h>0?Xa(n.left+Math.min(j,n.width-(B+L)),n.top+Math.min(_,n.height+I+R),Math.max(0,A-(E+P)),h-(S+F),aa.BOTTOM_RIGHT):new ar(n.left+n.width-(E+P),n.top+n.height-(S+F)),this.bottomLeftContentBox=g>0||x>0?Xa(n.left+B+L,n.top+k,Math.max(0,g-(B+L)),x-(S+F),aa.BOTTOM_LEFT):new ar(n.left+B+L,n.top+n.height-(S+F))}return e}(),aa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var Xa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=e+r,u=t+n;switch(a){case aa.TOP_LEFT:return new d5(new ar(e,u),new ar(e,u-l),new ar(c-i,t),new ar(c,t));case aa.TOP_RIGHT:return new d5(new ar(e,t),new ar(e+i,t),new ar(c,u-l),new ar(c,u));case aa.BOTTOM_RIGHT:return new d5(new ar(c,t),new ar(c,t+l),new ar(e+i,u),new ar(e,u));case aa.BOTTOM_LEFT:default:return new d5(new ar(c,u),new ar(c-i,u),new ar(e,t+l),new ar(e,t))}},u4=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},omt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},d4=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},lmt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),A5=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),cmt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),umt=function(e){return e.type===0},gfe=function(e){return e.type===1},dmt=function(e){return e.type===2},eJ=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},Amt=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},xfe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),vfe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new imt(this.container),this.container.styles.opacity<1&&this.effects.push(new cmt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new lmt(n,a,s))}if(this.container.styles.overflowX!==0){var i=u4(this.curves),l=d4(this.curves);eJ(i,l)?this.effects.push(new A5(i,6)):(this.effects.push(new A5(i,2)),this.effects.push(new A5(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!gfe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=u4(n.curves),l=d4(n.curves);eJ(i,l)||a.unshift(new A5(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ji(c.target,t)})},e}(),qD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=ji(a.flags,4),i=ji(a.flags,2),l=new vfe(a,e);ji(a.styles.display,2048)&&n.push(l);var c=ji(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new xfe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var h=0;u.negativeZIndex.some(function(g,x){return A>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(A>0){var m=0;u.positiveZIndex.some(function(g,x){return A>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);qD(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),qD(l,t,r,c);ji(a.flags,8)&&bfe(a,c)})},bfe=function(e,t){for(var r=e instanceof VD?e.start:1,n=e instanceof VD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof nfe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Q2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},fmt=function(e){var t=new vfe(e,null),r=new xfe(t),n=[];return qD(t,r,r,n),bfe(t.container,n),r},tJ=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Vu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Vu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Vu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},hmt=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Vu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Vu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Vu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},mmt=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Vu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Vu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Vu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},pmt=function(e,t){switch(t){case 0:return f5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return f5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return f5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return f5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},f5=function(e,t){var r=[];return Pu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Pu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Vu=function(e,t,r,n){var a=[];return Pu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Pu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Pu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Pu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},yfe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},A4=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},gmt=function(e,t){return e===0?t.bounds:e===2?A4(t):yfe(t)},xmt=function(e,t){return e===0?t.bounds:e===2?A4(t):yfe(t)},F6=function(e,t,r){var n=gmt(gv(e.styles.backgroundOrigin,t),e),a=xmt(gv(e.styles.backgroundClip,t),e),s=vmt(gv(e.styles.backgroundSize,t),r,n),i=s[0],l=s[1],c=lw(gv(e.styles.backgroundPosition,t),n.width-i,n.height-l),u=bmt(gv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),A=Math.round(n.top+c[1]);return[u,d,A,i,l]},sv=function(e){return wa(e)&&e.value===e1.AUTO},h5=function(e){return typeof e=="number"},vmt=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],l=e[1];if(!i)return[0,0];if(mi(i)&&l&&mi(l))return[Da(i,r.width),Da(l,r.height)];var c=h5(s);if(wa(i)&&(i.value===e1.CONTAIN||i.value===e1.COVER)){if(h5(s)){var u=r.width/r.height;return u<s!=(i.value===e1.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=h5(n),A=h5(a),h=d||A;if(sv(i)&&(!l||sv(l))){if(d&&A)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=A?a:n/s;return[m,g]}var x=d?n:r.width,v=A?a:r.height;return[x,v]}if(c){var y=0,w=0;return mi(i)?y=Da(i,r.width):mi(l)&&(w=Da(l,r.height)),sv(i)?y=w*s:(!l||sv(l))&&(w=y/s),[y,w]}var _=null,j=null;if(mi(i)?_=Da(i,r.width):l&&mi(l)&&(j=Da(l,r.height)),_!==null&&(!l||sv(l))&&(j=d&&A?_/n*a:r.height),j!==null&&sv(i)&&(_=d&&A?j/a*n:r.width),_!==null&&j!==null)return[_,j];throw new Error("Unable to calculate background-size for element")},gv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},bmt=function(e,t,r,n,a){var s=t[0],i=t[1],l=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+l),Math.round(n.top)),new ar(Math.round(n.left+s+l),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+l),Math.round(n.top+i)),new ar(Math.round(n.left+s+l),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},ymt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",rJ="Hidden Text",wmt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=ymt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(rJ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(rJ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),wfe=function(){function e(t,r){this.context=t,this.options=r}return e}(),Emt=1e4,Cmt=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new wmt(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),dmt(r)&&(this.ctx.globalAlpha=r.opacity),umt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),gfe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return pl(this,void 0,void 0,function(){var n;return zo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return pl(this,void 0,void 0,function(){return zo(this,function(n){switch(n.label){case 0:if(ji(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=hU(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=jmt(r.fontFamily).join(", "),s=ME(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return pl(this,void 0,void 0,function(){var a,s,i,l,c,u,d,A,h=this;return zo(this,function(m){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,A=n.paintOrder,r.textBounds.forEach(function(g){A.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Ki(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ki(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ki(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ki(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=A4(r),i=d4(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return pl(this,void 0,void 0,function(){var n,a,s,i,l,c,w,w,u,d,A,h,j,m,g,k,x,v,y,w,_,j,k;return zo(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,I.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof efe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof tfe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof rfe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ife&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof mU&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===i4?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+A*.39363,n.bounds.top+A*.79),new ar(n.bounds.left+A*.16,n.bounds.top+A*.5549),new ar(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new ar(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new ar(n.bounds.left+A*.72983,n.bounds.top+A*.23),new ar(n.bounds.left+A*.84,n.bounds.top+A*.34085),new ar(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=Ki(VY),this.ctx.fill(),this.ctx.restore()):n.type===o4&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ki(VY),this.ctx.fill(),this.ctx.restore())),Nmt(n)&&n.value.length){switch(h=this.createFontStyle(s),j=h[0],m=h[1],g=this.fontMetrics.getMetrics(j,m).baseline,this.ctx.font=j,this.ctx.fillStyle=Ki(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Smt(n.styles.textAlign),k=A4(n),x=0,n.styles.textAlign){case 1:x+=k.width/2;break;case 2:x+=k.width;break}v=k.add(x,0,0,-k.height/2+1),this.ctx.save(),this.path([new ar(k.left,k.top),new ar(k.left+k.width,k.top),new ar(k.left+k.width,k.top+k.height),new ar(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Uw(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ji(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=I.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(j=this.createFontStyle(s)[0],this.ctx.font=j,this.ctx.fillStyle=Ki(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new Lh(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,_Y(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Uw(r.listValue,k),s.letterSpacing,_Y(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return pl(this,void 0,void 0,function(){var n,a,y,s,i,y,l,c,y,u,d,y,A,h,y,m,g,y,x,v,y;return zo(this,function(w){switch(w.label){case 0:if(ji(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:A=0,h=r.inlineLevel,w.label=19;case 19:return A<h.length?(y=h[A],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return A++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Pu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Pu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return pl(this,void 0,void 0,function(){var n,a,s,i,l,c;return zo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var A,h,m,R,V,q,L,M,S,g,R,V,q,L,M,x,v,y,w,_,j,k,I,E,S,B,R,P,F,L,M,ee,V,q,K,X,Z,G,D,U,z,J;return zo(this,function(re){switch(re.label){case 0:if(d.type!==0)return[3,5];A=void 0,h=d.url,re.label=1;case 1:return re.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return A=re.sent(),[3,4];case 3:return re.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return A&&(m=F6(r,n,[A.width,A.height,A.width/A.height]),R=m[0],V=m[1],q=m[2],L=m[3],M=m[4],S=s.ctx.createPattern(s.resizeImage(A,L,M),"repeat"),s.renderRepeat(R,S,V,q)),[3,6];case 5:uft(d)?(g=F6(r,n,[null,null,null]),R=g[0],V=g[1],q=g[2],L=g[3],M=g[4],x=sft(d.angle,L,M),v=x[0],y=x[1],w=x[2],_=x[3],j=x[4],k=document.createElement("canvas"),k.width=L,k.height=M,I=k.getContext("2d"),E=I.createLinearGradient(y,_,w,j),CY(d.stops,v).forEach(function(oe){return E.addColorStop(oe.stop,Ki(oe.color))}),I.fillStyle=E,I.fillRect(0,0,L,M),L>0&&M>0&&(S=s.ctx.createPattern(k,"repeat"),s.renderRepeat(R,S,V,q))):dft(d)&&(B=F6(r,n,[null,null,null]),R=B[0],P=B[1],F=B[2],L=B[3],M=B[4],ee=d.position.length===0?[dU]:d.position,V=Da(ee[0],L),q=Da(ee[ee.length-1],M),K=ift(d,V,q,L,M),X=K[0],Z=K[1],X>0&&Z>0&&(G=s.ctx.createRadialGradient(P+V,F+q,0,P+V,F+q,X),CY(d.stops,X*2).forEach(function(oe){return G.addColorStop(oe.stop,Ki(oe.color))}),s.path(R),s.ctx.fillStyle=G,X!==Z?(D=r.bounds.left+.5*r.bounds.width,U=r.bounds.top+.5*r.bounds.height,z=Z/X,J=1/z,s.ctx.save(),s.ctx.translate(D,U),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-D,-U),s.ctx.fillRect(P,J*(F-U)+U,L,M*J),s.ctx.restore()):s.ctx.fill())),re.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return pl(this,void 0,void 0,function(){return zo(this,function(s){return this.path(tJ(a,n)),this.ctx.fillStyle=Ki(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return pl(this,void 0,void 0,function(){var i,l;return zo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=hmt(s,a),this.path(i),this.ctx.fillStyle=Ki(r),this.ctx.fill(),l=mmt(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return pl(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,A=this;return zo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!vm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=_mt(gv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),vm(n.backgroundColor)||(this.ctx.fillStyle=Ki(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){A.ctx.save();var g=u4(r.curves),x=m.inset?0:Emt,v=Amt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(A.path(g),A.ctx.clip(),A.mask(v)):(A.mask(g),A.ctx.clip(),A.path(v)),A.ctx.shadowOffsetX=m.offsetX.number+x,A.ctx.shadowOffsetY=m.offsetY.number,A.ctx.shadowColor=Ki(m.color),A.ctx.shadowBlur=m.blur.number,A.ctx.fillStyle=m.inset?Ki(m.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!vm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return pl(this,void 0,void 0,function(){var l,c,u,d,A,h,m,g,x,v,y,w,_,j,k,I,k,I;return zo(this,function(E){return this.ctx.save(),l=pmt(s,a),c=tJ(s,a),i===2&&(this.path(c),this.ctx.clip()),Pu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Pu(c[1])?(A=c[1].end.x,h=c[1].end.y):(A=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-A):m=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),_=(m-w*g)/(w-1),j=(m-(w+1)*g)/w,x=j<=0||Math.abs(x-_)<Math.abs(x-j)?_:j),v&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ki(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Pu(c[0])&&(k=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke()),Pu(c[1])&&(k=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return pl(this,void 0,void 0,function(){var n;return zo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ki(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=fmt(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(wfe),Nmt=function(e){return e instanceof sfe||e instanceof afe?!0:e instanceof mU&&e.type!==o4&&e.type!==i4},_mt=function(e,t){switch(e){case 0:return u4(t);case 2:return omt(t);case 1:default:return d4(t)}},Smt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},kmt=["-apple-system","system-ui"],jmt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return kmt.indexOf(t)===-1}):e},Bmt=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return pl(this,void 0,void 0,function(){var n,a;return zo(this,function(s){switch(s.label){case 0:return n=HD(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Tmt(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ki(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(wfe),Tmt=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Imt=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,GN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,GN([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,GN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,GN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Fmt=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Imt({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Z0t(this,t)}return e.instanceCount=1,e}(),WD=function(e,t){return t===void 0&&(t={}),Omt(e,t)};typeof window<"u"&&pfe.setContext(window);var Omt=function(e,t){return pl(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,A,h,m,g,x,v,y,w,_,j,k,E,I,E,S,B,R,P,F,L,M,ee,V,q,K,X,Z,G,D,U,z;return zo(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},s=SD({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),i={windowWidth:(F=t.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(ee=t.scrollY)!==null&&ee!==void 0?ee:n.pageYOffset},l=new Lh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new Fmt(s,l),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(q=t.allowTaint)!==null&&q!==void 0?q:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new JY(c,e,d),h=A.clonedReferenceElement,h?[4,A.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=pU(h)||P0t(h)?Adt(h.ownerDocument):Sj(c,h),x=g.width,v=g.height,y=g.left,w=g.top,_=Dmt(c,h,t.backgroundColor),j={canvas:t.canvas,backgroundColor:_,scale:(X=(K=t.scale)!==null&&K!==void 0?K:n.devicePixelRatio)!==null&&X!==void 0?X:1,x:((Z=t.x)!==null&&Z!==void 0?Z:0)+y,y:((G=t.y)!==null&&G!==void 0?G:0)+w,width:(D=t.width)!==null&&D!==void 0?D:Math.ceil(x),height:(U=t.height)!==null&&U!==void 0?U:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new Bmt(c,j),[4,E.render(h)]):[3,3];case 2:return k=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=lfe(c,h),_===I.styles.backgroundColor&&(I.styles.backgroundColor=bh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+j.x+","+j.y+" with size "+j.width+"x"+j.height),E=new Cmt(c,j),[4,E.render(I)];case 4:k=J.sent(),J.label=5;case 5:return(!((z=t.removeContainer)!==null&&z!==void 0)||z)&&(JY.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,k]}})})},Dmt=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?Lw(e,getComputedStyle(n.documentElement).backgroundColor):bh.TRANSPARENT,s=n.body?Lw(e,getComputedStyle(n.body).backgroundColor):bh.TRANSPARENT,i=typeof r=="string"?Lw(e,r):r===null?bh.TRANSPARENT:4294967295;return t===n.documentElement?vm(a)?vm(s)?i:s:a:i};const Pmt=Object.freeze(Object.defineProperty({__proto__:null,default:WD},Symbol.toStringTag,{value:"Module"})),Rmt=e=>{const[t,r]=C.useState(!1),[n,a]=C.useState(null);return C.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},Efe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Lmt=["Mecánica Industrial","Mecánica Automotriz"],Mmt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Efe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),nJ=({empresas:e,isLoaded:t,route:r})=>{const n=C.useRef(null),a=C.useRef(null),s=C.useRef([]),i=C.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return C.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[l,t,r]),o.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[o.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:o.jsx("div",{className:"text-center p-6",children:o.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},Umt=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((A,h)=>{var m;return A+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+l,u=e.routes[0].legs.reduce((A,h)=>{var m;return A+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return o.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[o.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),o.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((A,h)=>{var m,g,x;return o.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",A.start_address.split(",")[0]," → ",A.end_address.split(",")[0]]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[(m=A.duration)==null?void 0:m.text," • ",(g=A.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&o.jsx("div",{className:"space-y-3",children:(x=A.steps)==null?void 0:x.map((v,y)=>v.transit&&o.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[o.jsx("span",{className:"text-lg",children:"🚌"}),o.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),o.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[o.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),o.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),o.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),o.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&o.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},aJ=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Qmt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),o.jsx(lh,{width:"100%",height:300,children:o.jsxs(pM,{children:[o.jsx(qk,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>o.jsx(Dm,{fill:t[n%t.length]},`cell-${n}`))}),o.jsx(oh,{})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),o.jsx(lh,{width:"100%",height:300,children:o.jsxs(k2,{data:e.porSupervisor,layout:"vertical",children:[o.jsx(S2,{strokeDasharray:"3 3"}),o.jsx(Fg,{type:"number"}),o.jsx(Og,{type:"category",dataKey:"name",width:150}),o.jsx(oh,{}),o.jsx(B1,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),o.jsx(lh,{width:"100%",height:300,children:o.jsxs(k2,{data:e.porComuna,children:[o.jsx(S2,{strokeDasharray:"3 3"}),o.jsx(Fg,{dataKey:"name"}),o.jsx(Og,{}),o.jsx(oh,{}),o.jsx(B1,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),o.jsx(lh,{width:"100%",height:300,children:o.jsxs(RWe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[o.jsx(Joe,{}),o.jsx(Kk,{dataKey:"subject"}),o.jsx($k,{angle:30,domain:[0,5]}),o.jsx(cM,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),o.jsx(oh,{})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),o.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:o.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>o.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[o.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),o.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},Hmt=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState("list"),[i,l]=C.useState(null),[c,u]=C.useState(!0),[d,A]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState(null),[v,y]=C.useState([]),[w,_]=C.useState(null),[j,k]=C.useState(!1),[I,E]=C.useState("DRIVING"),[S,B]=C.useState(""),[R,P]=C.useState([]),F="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:L}=Rmt(F);C.useEffect(()=>{u(!0);const se=lct(t),le=dct(n),ue=fct(P);return u(!1),()=>{se(),le(),ue()}},[]);const M=C.useMemo(()=>{const se=e.reduce((Ne,je)=>{const _e=je.area||"Sin especificar";return Ne[_e]=(Ne[_e]||0)+1,Ne},{}),le=e.reduce((Ne,je)=>{var me;const _e=((me=je.docenteSupervisor)==null?void 0:me.nombreCompleto)||"Sin asignar";return Ne[_e]=(Ne[_e]||0)+1,Ne},{}),ue=e.reduce((Ne,je)=>{const _e=je.direccion.split(",").map(Te=>Te.trim()),me=_e.length>1?_e[1]:"Desconocida";return Ne[me]=(Ne[me]||0)+1,Ne},{}),ke=Efe.map(Ne=>{const je=e.flatMap(me=>{var Te;return(Te=me.calificaciones.find(Le=>Le.elemento===Ne.elemento))==null?void 0:Te.score}).filter(me=>me!=null),_e=je.length>0?je.reduce((me,Te)=>me+Te,0)/je.length:0;return{subject:Ne.elemento.split(" ")[0],A:_e,fullMark:5}}),ae=e.map(Ne=>{const je=Ne.calificaciones.map(me=>me.score).filter(me=>me!=null),_e=je.length>0?je.reduce((me,Te)=>me+Te,0)/je.length:0;return{...Ne,promedio:_e}}).filter(Ne=>Ne.promedio>0).sort((Ne,je)=>je.promedio-Ne.promedio);return{porEspecialidad:Object.entries(se).map(([Ne,je])=>({name:Ne,value:je})),porSupervisor:Object.entries(le).map(([Ne,je])=>({name:Ne,value:je})),porComuna:Object.entries(ue).map(([Ne,je])=>({name:Ne,value:je})),calificacionPorAmbito:ke,ranking:ae}},[e]),ee=async()=>{if(i)try{await cct(i),s("list"),l(null),A(null)}catch{alert("No se pudo guardar la empresa.")}},V=async se=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await uct(se)},q=(se,le)=>{l(ue=>ue?{...ue,[se]:le}:null)},K=async se=>{var le;if(A(se),(le=se==null?void 0:se.value)!=null&&le.place_id&&L){const ue=await aJ(se.value.place_id);q("direccion",se.label||""),q("coordenadas",ue)}else q("direccion",(se==null?void 0:se.label)||"")},X=se=>{l(JSON.parse(JSON.stringify(se))),se.direccion&&A({label:se.direccion,value:{description:se.direccion}}),s("form")},Z=async se=>{var le;if(m(se),(le=se==null?void 0:se.value)!=null&&le.place_id&&L){const ue=await aJ(se.value.place_id);x(ue)}},G=se=>{y(le=>le.some(ue=>ue.id===se.id)?le.filter(ue=>ue.id!==se.id):[...le,se])},D=()=>{if(!g||v.length===0||!L)return;k(!0);const se=new window.google.maps.DirectionsService,le=v.filter(ue=>ue.coordenadas).map(ue=>({location:ue.coordenadas,stopover:!0}));se.route({origin:g,destination:g,waypoints:le,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[I]},(ue,ke)=>{k(!1),ke===window.google.maps.DirectionsStatus.OK&&ue?_(ue):alert("No se pudo calcular la ruta: "+ke)})},U=()=>{_(null),m(null),x(null),y([]),B("")},z=async()=>{if(!S||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const se={nombre:S,startPoint:{label:h.label,coords:g},empresas:v.map(le=>({id:le.id,nombre:le.nombre,coordenadas:le.coordenadas})),travelMode:I};try{await Act(se),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},J=async()=>{const se=document.getElementById("map-container-for-pdf"),le=document.getElementById("route-details-for-pdf");if(!se||!le)return;const ue=new vr("p","mm","a4"),ke=ue.internal.pageSize.getWidth();ue.text(`Ruta de Supervisión: ${S||"Sin nombre"}`,10,15),ue.setFontSize(10),ue.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Ne=(await WD(se,{useCORS:!0})).toDataURL("image/png");ue.addImage(Ne,"PNG",10,30,ke-20,100);const _e=(await WD(le)).toDataURL("image/png"),me=ue.getImageProperties(_e),Te=me.height*(ke-20)/me.width;ue.addImage(_e,"PNG",10,135,ke-20,Te),ue.save(`ruta-${S||"supervision"}.pdf`)},re=se=>{m({label:se.startPoint.label,value:null}),x(se.startPoint.coords),y(se.empresas),E(se.travelMode),B(se.nombre),s("route")},oe=async se=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await hct(se),alert("Ruta eliminada."))};return c?o.jsx("div",{className:"text-center p-8",children:"Cargando..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),o.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&o.jsx("button",{onClick:()=>{s("list"),A(null),l(null),U()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[o.jsx(Qte,{size:18})," Dashboard"]}),o.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),o.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),o.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),o.jsx("button",{onClick:()=>{l(Mmt()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&o.jsx(Qmt,{data:M}),a==="saved-routes"&&o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),o.jsx("div",{className:"space-y-3",children:R.length===0?o.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):R.map(se=>o.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:se.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[se.empresas.length," paradas"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>re(se),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),o.jsx("button",{onClick:()=>oe(se.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},se.id))})]}),a==="route"&&o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),o.jsx("input",{type:"text",value:S,onChange:se=>B(se.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),o.jsx(nY,{apiKey:F,selectProps:{value:h,onChange:Z,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),o.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[o.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${I==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),o.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${I==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(se=>se.coordenadas).map(se=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:`route-${se.id}`,checked:v.some(le=>le.id===se.id),onChange:()=>G(se),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("label",{htmlFor:`route-${se.id}`,className:"ml-3 text-sm text-gray-700",children:se.nombre})]},se.id))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("button",{onClick:D,disabled:!g||v.length===0||j,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:j?"Calculando...":"Visualizar Ruta"}),o.jsx("button",{onClick:z,disabled:!S||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),o.jsx("button",{onClick:J,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),o.jsx("button",{onClick:U,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),o.jsx("div",{children:o.jsx(nJ,{empresas:v,isLoaded:L,route:w})})]}),w&&o.jsx(Umt,{route:w,travelMode:I})]}),a==="map"&&o.jsx(nJ,{empresas:e,isLoaded:L}),a==="list"&&o.jsx("div",{className:"space-y-3",children:e.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(se=>{var le;return o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:se.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[se.rut," | ",se.direccion]}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",se.area||"No especificada"," | Cupos: ",se.cupos," | Supervisor: ",((le=se.docenteSupervisor)==null?void 0:le.nombreCompleto)||"Ninguno"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>X(se),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),o.jsx("button",{onClick:()=>V(se.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},se.id)})}),a==="form"&&i&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(vEe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.nombre,onChange:se=>q("nombre",se.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(uCe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.rut,onChange:se=>q("rut",se.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),o.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[o.jsx(D_,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),o.jsx("div",{className:"w-full pl-10",children:o.jsx(nY,{apiKey:F,selectProps:{value:d,onChange:K,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(t2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.contacto,onChange:se=>q("contacto",se.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(kCe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"email",value:i.email||"",onChange:se=>q("email",se.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(_l,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"number",value:i.cupos,onChange:se=>q("cupos",parseInt(se.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(I_,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsxs("select",{value:i.area||"",onChange:se=>q("area",se.target.value),className:"input-style pl-10 w-full",children:[o.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Lmt.map(se=>o.jsx("option",{value:se,children:se},se))]})]}),o.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[o.jsx(t2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:se=>{const le=se.target.value;q("docenteSupervisor",le?JSON.parse(le):void 0)},className:"input-style pl-10 w-full",children:[o.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(se=>o.jsx("option",{value:JSON.stringify({id:se.id,nombre:se.nombreCompleto}),children:se.nombreCompleto},se.id))]})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((se,le)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[o.jsx(cNe,{className:"w-5 h-5 text-slate-400"}),o.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:se.elemento}),o.jsxs("select",{value:se.score||"",onChange:ue=>{const ke=[...i.calificaciones];ke[le].score=ue.target.value?parseInt(ue.target.value):null,q("calificaciones",ke)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[o.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ue=>o.jsx("option",{value:ue,children:ue},ue))]})]},le))]}),o.jsx("div",{className:"pt-6",children:o.jsx("button",{onClick:ee,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},gU="dpd_actividades",Cfe="dpd_respuestas",Vmt="usuarios";function zmt(e,{includeArchived:t=!1}={}){const r=vt(ft,gU),n=t?$t(r,pr("createdAt","desc")):$t(r,Ir("isArchived","==",!1),pr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function $mt(e){const t=vt(ft,gU);return(await hn(t,{...e,isArchived:!1,createdAt:Fs(),updatedAt:Fs()})).id}async function Gmt(e){const t=sr(ft,gU,e);await Ra(t)}function Kmt(e,t){const r=vt(ft,Cfe),n=$t(r,Ir("activityId","==",e),pr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function qmt(e){const t=vt(ft,Cfe);return(await hn(t,{...e,createdAt:Fs()})).id}function Wmt(e,t){const r=vt(ft,Vmt),n=$t(r,Ir("profile","in",e));return fr(n,a=>{const s=a.docs.map(i=>{const l=i.data();return{id:i.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function Nfe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const Xmt=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],Ymt=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new Ds(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function Jmt(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function _fe(){const e=Ymt();if(!e)return null;for(const t of Xmt){const r=await Jmt(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function Sfe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function Zmt(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function ept(e,t=3){var n;const r=await _fe();if(!r)return O6(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),l=Sfe(i);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),O6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),O6(e,t)}}async function tpt(e,t=30){var n;const r=await _fe();if(!r)return D6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(s)).response.text(),c=Sfe(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),D6(e))}catch(a){return console.error("Error al analizar respuestas:",a),D6(e)}}function O6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:Zmt(r).slice(0,4)}))}function D6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const f4=500,sJ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Ly=at.memo(({title:e,icon:t,right:r,children:n})=>o.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[o.jsxs("header",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),rpt=at.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>o.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return o.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),npt=at.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?o.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return o.jsxs("li",{children:[o.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx(bg,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:s.titulo})]}),o.jsx(gR,{className:"w-4 h-4 opacity-70"})]}),n(s)&&o.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):o.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[o.jsx(aCe,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),P6=at.memo(({label:e,value:t,pill:r})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?o.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):o.jsx("span",{className:"font-medium",children:t})]})),apt=at.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return o.jsxs("div",{className:"relative mt-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),o.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:o.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),spt=at.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=C.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=C.useCallback(()=>n(e.id),[e.id,n]);return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(i=>i.id===e.id)+1}`}),o.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:o.jsx(vi,{className:"w-4 h-4"})})]})}),ipt=at.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=C.useCallback(A=>n(e.id,{enunciado:A.target.value}),[e.id,n]),s=C.useCallback(A=>n(e.id,{maxPalabras:parseInt(A.target.value||"500")}),[e.id,n]),i=C.useCallback(A=>n(e.id,{multiple:A.target.checked}),[e.id,n]),l=C.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=C.useCallback((A,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===A?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=C.useCallback(A=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==A)}),[e.id,e.opciones,n]),d=C.useCallback(()=>r(e.id),[e.id,r]);return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),o.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:o.jsx(vi,{className:"w-4 h-4"})})]}),o.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{className:"text-sm",children:"Máx. palabras"}),o.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||f4,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir selección múltiple"]}),e.opciones.map(A=>o.jsx(spt,{option:A,options:e.opciones,onChangeText:c,onDelete:u},A.id)),o.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),opt=at.memo(({q:e,respuestas:t,onChange:r})=>{var i,l;const n=C.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),o.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||f4} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[Nfe(c)," / ",e.maxPalabras||f4," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),o.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),o.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),lpt=({currentUser:e})=>{var D;const[t,r]=C.useState("responder"),[n,a]=C.useState([]),[s,i]=C.useState(""),[l,c]=C.useState(""),[u,d]=C.useState(sJ()),A=C.useCallback(U=>d(z=>({...z,...U})),[]),[h,m]=C.useState([]),[g,x]=C.useState({}),[v,y]=C.useState([]),w=CH.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);C.useEffect(()=>{const U=zmt(z=>{a(z),i(J=>{var re;return J||(((re=z[0])==null?void 0:re.id)??"")})});return()=>U()},[]),C.useEffect(()=>{const U=Wmt(["PROFESORADO","SUBDIRECCION"],z=>{m(z),d(J=>{if(J.creadorId)return J;const re=z.find(oe=>oe.id===(e==null?void 0:e.uid));return re?{...J,creadorId:re.id,creadorNombre:re.nombre,creadorPerfil:re.profile||J.creadorPerfil}:J})});return()=>U()},[e]),C.useEffect(()=>{if(!s)return;const U=Kmt(s,y);return()=>U()},[s]);const _=C.useMemo(()=>n.find(U=>U.id===s),[n,s]);C.useMemo(()=>Zf[u.dimension]||[],[u.dimension]),C.useEffect(()=>{d(U=>{const z=Zf[U.dimension]||[],J=z.includes(U.subdimension)?U.subdimension:z[0]||"";return J===U.subdimension?U:{...U,subdimension:J}})},[u.dimension]);const j=C.useCallback(()=>{const U={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:f4};d(z=>({...z,preguntas:[...z.preguntas,U]}))},[]),k=C.useCallback(()=>{const U={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(z=>({...z,preguntas:[...z.preguntas,U]}))},[]),I=C.useCallback((U,z)=>{d(J=>({...J,preguntas:J.preguntas.map(re=>re.id===U?{...re,...z}:re)}))},[]),E=C.useCallback(U=>{d(z=>({...z,preguntas:z.preguntas.filter(J=>J.id!==U)}))},[]),[S,B]=C.useState(!1),R=C.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const z=(await ept(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(re=>({id:crypto.randomUUID(),text:re})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...z]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[P,F]=C.useState([]);C.useEffect(()=>{(async()=>{var J;if(!_)return;const z=[];for(const re of v)if(re.respuestas)for(const[oe,se]of Object.entries(re.respuestas)){const le=_.preguntas.find(ke=>ke.id===oe);if(!le||le.tipo!=="abierta")continue;const ue=se;ue.tipo==="abierta"&&((J=ue.valorTexto)!=null&&J.trim())&&z.push(ue.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",z.length),z.length>0)try{const re=await tpt(z,30);console.log("Keywords generadas:",re),F(re)}catch(re){console.error("Error al extraer keywords:",re),F([])}else F([])})()},[_,v]);const L=C.useMemo(()=>{if(!_)return{};const U={};for(const z of _.preguntas)z.tipo==="seleccion_multiple"&&(U[z.id]={},(z.opciones||[]).forEach(J=>U[z.id][J]=0));for(const z of v)for(const[J,re]of Object.entries(z.respuestas||{})){const oe=re;if((oe==null?void 0:oe.tipo)==="seleccion_multiple")for(const se of oe.seleccionados||[])U[J]||(U[J]={}),U[J][se]=(U[J][se]||0)+1}return U},[_,v]),M=C.useCallback(U=>U.map(z=>z.tipo==="abierta"?z:{...z,opciones:z.opciones.map(J=>J.text)}),[]),ee=C.useCallback(()=>d(sJ()),[]),V=C.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const U={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:M(u.preguntas)},z=await $mt(U);ee(),i(z),r("responder")},[u,M,ee]),q=C.useCallback(async(U,z)=>{var re;if(window.confirm(`¿Eliminar "${z}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await Gmt(U),s===U){const oe=n.filter(se=>se.id!==U);i(((re=oe[0])==null?void 0:re.id)||""),oe.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),K=C.useCallback(async()=>{if(!_||!v.length)return;const U=new vr("p","mm","a4"),z=20;let J=z;U.setFontSize(20),U.text(`Informe: ${_.titulo}`,z,J),J+=10,U.setFontSize(12),U.text(`Dimensión: ${_.dimension}`,z,J+=10),U.text(`Subdimensión: ${_.subdimension}`,z,J+=7),U.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,z,J+=7),U.text(`Total de respuestas: ${v.length}`,z,J+=7),J+=10;for(const re of _.preguntas){if(J>250&&(U.addPage(),J=z),U.setFontSize(14),U.text(`Pregunta: ${re.enunciado}`,z,J+=10),J+=5,U.setFontSize(12),re.tipo==="seleccion_multiple"){const oe=L[re.id]||{},se=v.length;Object.entries(oe).forEach(([le,ue])=>{const ke=se>0?Math.round(ue/se*100):0;U.text(`${le}: ${ue} respuestas (${ke}%)`,z+5,J+=7)})}else{U.text("Respuestas:",z,J+=7);for(const oe of v){const se=oe.respuestas[re.id];if((se==null?void 0:se.tipo)==="abierta"&&se.valorTexto){J>250&&(U.addPage(),J=z),U.text(`${oe.userNombre}:`,z+5,J+=7);const le=U.splitTextToSize(se.valorTexto,170);U.text(le,z+10,J+=7),J+=le.length*7}}}J+=10}if(P.length>0){J>250&&(U.addPage(),J=z),U.setFontSize(14),U.text("Conceptos clave detectados:",z,J+=10),U.setFontSize(12);const re=P.map(se=>`${se.keyword} (${Math.round(se.score*100)}%)`).join(", "),oe=U.splitTextToSize(re,170);U.text(oe,z,J+=7)}U.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,v,L,P]),X=C.useCallback(U=>{const z=e==null?void 0:e.isAdmin,J=U.creadorId===(e==null?void 0:e.uid);return w&&(z||J)},[e,w]),Z=C.useCallback((U,z)=>{x(J=>({...J,[U.id]:U.tipo==="abierta"?{tipo:"abierta",valorTexto:z}:{tipo:"seleccion_multiple",seleccionados:z}}))},[]),G=C.useCallback(async()=>{if(_){for(const U of _.preguntas){const z=g[U.id];if(z&&U.tipo==="abierta"&&U.maxPalabras){const J=Nfe(z.valorTexto||"");if(J>U.maxPalabras)return alert(`La respuesta a "${U.enunciado}" supera el máximo de ${U.maxPalabras} palabras (${J}).`)}}await qmt({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return o.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[o.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(vR,{className:"w-7 h-7 text-indigo-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),o.jsx(rpt,{value:t,onChange:r,canCreate:w})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[o.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:o.jsx(Ly,{title:"Actividades",icon:o.jsx(bg,{className:"w-5 h-5 text-indigo-600"}),children:o.jsx(npt,{items:n,selectedId:s,onSelect:U=>{i(U),r("responder")},canDelete:X,onDelete:q})})}),o.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&o.jsxs(Ly,{title:"Nueva actividad / sesión",icon:o.jsx(IH,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx($d,{className:"w-4 h-4"}),"Guardar"]}),children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Título"}),o.jsx("input",{value:u.titulo,onChange:U=>A({titulo:U.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),o.jsx("select",{value:u.dimension,onChange:U=>A({dimension:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Zf).map(U=>o.jsx("option",{value:U,children:U},U))}),o.jsx("select",{value:u.subdimension,onChange:U=>A({subdimension:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Zf[u.dimension]||[]).map(U=>o.jsx("option",{value:U,children:U},U))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),o.jsx("select",{value:u.creadorPerfil,onChange:U=>A({creadorPerfil:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:CH.map(U=>o.jsx("option",{value:U,children:U},U))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),o.jsxs("select",{value:u.creadorId,onChange:U=>{const z=U.target.value,J=h.find(re=>re.id===z);A({creadorId:z,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[o.jsx("option",{value:"",children:"Seleccione…"}),h.filter(U=>U.profile===u.creadorPerfil).map(U=>o.jsx("option",{value:U.id,children:U.nombre},U.id))]})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[o.jsx(Hte,{className:"w-4 h-4"})," Preguntas"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[o.jsx(Nl,{className:"w-4 h-4"})," Abierta"]}),o.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[o.jsx(Nl,{className:"w-4 h-4"})," Selección múltiple"]}),o.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[o.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[o.jsx(_Ne,{className:"w-4 h-4"})," IA"]}),o.jsx("input",{value:u.aiTema,onChange:U=>A({aiTema:U.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),o.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:U=>A({aiCantidad:parseInt(U.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),o.jsxs("button",{onClick:R,disabled:S||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[o.jsx(eg,{className:"w-4 h-4"}),S?"Generando…":"Generar con IA"]})]})]}),o.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((U,z)=>o.jsx(ipt,{q:U,index:z,onRemove:E,onPatch:I},U.id)),u.preguntas.length===0&&o.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[o.jsx(Ti,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&o.jsx(Ly,{title:`Responder: ${_.titulo}`,icon:o.jsx(_l,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx($d,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[o.jsx(P6,{pill:!0,label:"Dimensión",value:_.dimension}),o.jsx(P6,{pill:!0,label:"Subdimensión",value:_.subdimension}),o.jsx(P6,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(U=>o.jsx(opt,{q:U,respuestas:g,onChange:Z},U.id))]})}),t==="respuestas_individuales"&&_&&o.jsx(Ly,{title:`Respuestas individuales: ${_.titulo}`,icon:o.jsx(_l,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:K,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[o.jsx(km,{className:"w-4 h-4"}),"Descargar informe"]}),o.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:o.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[o.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[o.jsx(fy,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(U=>{var z;return o.jsxs("button",{onClick:()=>c(U.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===U.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:o.jsx(fy,{className:"w-4 h-4 text-indigo-600"})}),o.jsx("span",{className:"font-medium",children:U.userNombre})]}),o.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[o.jsx(ac,{className:"w-3.5 h-3.5"}),new Date(((z=U.createdAt)==null?void 0:z.seconds)*1e3).toLocaleDateString()]})]},U.userId)}):o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(fy,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),o.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[o.jsx(IH,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",o.jsx("span",{className:"text-indigo-600",children:(D=v.find(U=>U.userId===l))==null?void 0:D.userNombre})]}),o.jsx("div",{className:"space-y-6",children:_.preguntas.map(U=>{var re;const z=v.find(oe=>oe.userId===l),J=(re=z==null?void 0:z.respuestas)==null?void 0:re[U.id];return console.log("Respuesta encontrada:",{preguntaId:U.id,tipo:U.tipo,respuesta:J}),o.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:U.tipo==="abierta"?o.jsx(OH,{className:"w-5 h-5 text-indigo-600"}):o.jsx(bw,{className:"w-5 h-5 text-indigo-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-900",children:U.enunciado}),o.jsx("p",{className:"text-sm text-slate-500 mt-1",children:U.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),U.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?o.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):o.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):o.jsxs("div",{className:"space-y-2 mt-3",children:[(U.opciones||[]).map(oe=>{const le=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(oe.text);return o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${le?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:le?o.jsx(Ti,{className:"w-4 h-4 text-indigo-600"}):o.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),o.jsx("span",{className:"text-sm",children:typeof oe=="string"?oe:oe.text})]},typeof oe=="string"?oe:oe.id)}),!J&&o.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},U.id)})})]}):o.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&o.jsxs(Ly,{title:`Dashboard: ${_.titulo}`,icon:o.jsx(Zw,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[o.jsx(fy,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),X(_)&&o.jsxs("button",{onClick:()=>q(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[o.jsx(vi,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[o.jsx("div",{className:"mb-6",children:o.jsxs("button",{onClick:K,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[o.jsx(km,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:o.jsx(fy,{className:"w-5 h-5 text-indigo-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),o.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:o.jsx(bw,{className:"w-5 h-5 text-emerald-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),o.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(yg,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),o.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(ac,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),o.jsx("p",{className:"text-sm font-medium",children:(()=>{const U=_.createdAt,z=U!=null&&U.toDate?U.toDate():U!=null&&U.seconds?new Date(U.seconds*1e3):U?new Date(U):null;return z?z.toLocaleDateString():"No disponible"})()})]})]})})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(vw,{className:"w-5 h-5 text-indigo-600"}),o.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),o.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(U=>U.tipo==="seleccion_multiple").map(U=>o.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[o.jsx("p",{className:"font-medium mb-3 text-slate-700",children:U.enunciado}),Object.entries(L[U.id]||{}).map(([z,J])=>o.jsx(apt,{label:z,value:J},z)),o.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[o.jsx(A1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},U.id)),_.preguntas.filter(U=>U.tipo==="seleccion_multiple").length===0&&o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(bw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(hEe,{className:"w-5 h-5 text-indigo-600"}),o.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?o.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(U=>o.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(U.score*18)}px`},children:U.keyword},U.keyword))}):o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(OH,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var UE=e=>e.type==="checkbox",Yp=e=>e instanceof Date,bl=e=>e==null;const kfe=e=>typeof e=="object";var Zs=e=>!bl(e)&&!Array.isArray(e)&&kfe(e)&&!Yp(e),cpt=e=>Zs(e)&&e.target?UE(e.target)?e.target.checked:e.target.value:e,upt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dpt=(e,t)=>e.has(upt(t)),Apt=e=>{const t=e.constructor&&e.constructor.prototype;return Zs(t)&&t.hasOwnProperty("isPrototypeOf")},xU=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ya(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(xU&&(e instanceof Blob||n))&&(r||Zs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Apt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ya(e[a]));else return e;return t}var Rj=e=>/^\w*$/.test(e),Ja=e=>e===void 0,Lj=e=>Array.isArray(e)?e.filter(Boolean):[],vU=e=>Lj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cr=(e,t,r)=>{if(!t||!Zs(e))return r;const n=(Rj(t)?[t]:vU(t)).reduce((a,s)=>bl(a)?a:a[s],e);return Ja(n)||n===e?Ja(e[t])?r:e[t]:n},LA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=Rj(t)?[t]:vU(t),s=a.length,i=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==i){const u=e[l];c=Zs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const iJ={BLUR:"blur",FOCUS_OUT:"focusout"},Lu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jfe=at.createContext(null);jfe.displayName="HookFormContext";const fpt=()=>at.useContext(jfe);var hpt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Lu.all&&(t._proxyFormState[i]=!n||Lu.all),e[i]}});return a};const Bfe=typeof window<"u"?at.useLayoutEffect:at.useEffect;var WA=e=>typeof e=="string",mpt=(e,t,r,n,a)=>WA(e)?(n&&t.watch.add(e),cr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),cr(r,s))):(n&&(t.watchAll=!0),r),XD=e=>bl(e)||!kfe(e);function J0(e,t,r=new WeakSet){if(XD(e)||XD(t))return e===t;if(Yp(e)&&Yp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(Yp(i)&&Yp(l)||Zs(i)&&Zs(l)||Array.isArray(i)&&Array.isArray(l)?!J0(i,l,r):i!==l)return!1}}return!0}var ppt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},nc=e=>Array.isArray(e)?e:[e],oJ=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},gl=e=>Zs(e)&&!Object.keys(e).length,bU=e=>e.type==="file",Bd=e=>typeof e=="function",h4=e=>{if(!xU)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Tfe=e=>e.type==="select-multiple",yU=e=>e.type==="radio",gpt=e=>yU(e)||UE(e),R6=e=>h4(e)&&e.isConnected;function xpt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ja(e)?n++:e[t[n++]];return e}function vpt(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ja(e[t]))return!1;return!0}function $s(e,t){const r=Array.isArray(t)?t:Rj(t)?[t]:vU(t),n=r.length===1?e:xpt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Zs(n)&&gl(n)||Array.isArray(n)&&vpt(n))&&$s(e,r.slice(0,-1)),e}var Ife=e=>{for(const t in e)if(Bd(e[t]))return!0;return!1};function m4(e,t={}){const r=Array.isArray(e);if(Zs(e)||r)for(const n in e)Array.isArray(e[n])||Zs(e[n])&&!Ife(e[n])?(t[n]=Array.isArray(e[n])?[]:{},m4(e[n],t[n])):bl(e[n])||(t[n]=!0);return t}function Ffe(e,t,r){const n=Array.isArray(e);if(Zs(e)||n)for(const a in e)Array.isArray(e[a])||Zs(e[a])&&!Ife(e[a])?Ja(t)||XD(r[a])?r[a]=Array.isArray(e[a])?m4(e[a],[]):{...m4(e[a])}:Ffe(e[a],bl(t)?{}:t[a],r[a]):r[a]=!J0(e[a],t[a]);return r}var My=(e,t)=>Ffe(e,t,m4(t));const lJ={value:!1,isValid:!1},cJ={value:!0,isValid:!0};var Ofe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ja(e[0].attributes.value)?Ja(e[0].value)||e[0].value===""?cJ:{value:e[0].value,isValid:!0}:cJ:lJ}return lJ},Dfe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ja(e)?e:t?e===""?NaN:e&&+e:r&&WA(e)?new Date(e):n?n(e):e;const uJ={isValid:!1,value:null};var Pfe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,uJ):uJ;function dJ(e){const t=e.ref;return bU(t)?t.files:yU(t)?Pfe(e.refs).value:Tfe(t)?[...t.selectedOptions].map(({value:r})=>r):UE(t)?Ofe(e.refs).value:Dfe(Ja(t.value)?e.ref.value:t.value,e)}var bpt=(e,t,r,n)=>{const a={};for(const s of e){const i=cr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},p4=e=>e instanceof RegExp,Uy=e=>Ja(e)?e:p4(e)?e.source:Zs(e)?p4(e.value)?e.value.source:e.value:e,Tv=e=>({isOnSubmit:!e||e===Lu.onSubmit,isOnBlur:e===Lu.onBlur,isOnChange:e===Lu.onChange,isOnAll:e===Lu.all,isOnTouch:e===Lu.onTouched});const AJ="AsyncFunction";var ypt=e=>!!e&&!!e.validate&&!!(Bd(e.validate)&&e.validate.constructor.name===AJ||Zs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===AJ)),wpt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),YD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const t1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=cr(e,a);if(s){const{_f:i,...l}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(t1(l,t))break}else if(Zs(l)&&t1(l,t))break}}};function fJ(e,t,r){const n=cr(e,r);if(n||Rj(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=cr(t,s),l=cr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var Ept=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return gl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Lu.all))},Cpt=(e,t,r)=>!e||!t||e===t||nc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Npt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,_pt=(e,t)=>!Lj(cr(e,t)).length&&$s(e,t),Rfe=(e,t,r)=>{const n=nc(cr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},o_=e=>WA(e);function hJ(e,t,r="validate"){if(o_(e)||Array.isArray(e)&&e.every(o_)||LA(e)&&!e)return{type:r,message:o_(e)?e:"",ref:t}}var iv=e=>Zs(e)&&!p4(e)?e:{value:e,message:""},JD=async(e,t,r,n,a,s)=>{const{ref:i,refs:l,required:c,maxLength:u,minLength:d,min:A,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=cr(r,x);if(!y||t.has(x))return{};const _=l?l[0]:i,j=F=>{a&&_.reportValidity&&(_.setCustomValidity(LA(F)?"":F||""),_.reportValidity())},k={},I=yU(i),E=UE(i),S=I||E,B=(v||bU(i))&&Ja(i.value)&&Ja(w)||h4(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,R=ppt.bind(null,x,n,k),P=(F,L,M,ee=Xf.maxLength,V=Xf.minLength)=>{const q=F?L:M;k[x]={type:F?ee:V,message:q,ref:i,...R(F?ee:V,q)}};if(s?!Array.isArray(w)||!w.length:c&&(!S&&(B||bl(w))||LA(w)&&!w||E&&!Ofe(l).isValid||I&&!Pfe(l).isValid)){const{value:F,message:L}=o_(c)?{value:!!c,message:c}:iv(c);if(F&&(k[x]={type:Xf.required,message:L,ref:_,...R(Xf.required,L)},!n))return j(L),k}if(!B&&(!bl(A)||!bl(h))){let F,L;const M=iv(h),ee=iv(A);if(!bl(w)&&!isNaN(w)){const V=i.valueAsNumber||w&&+w;bl(M.value)||(F=V>M.value),bl(ee.value)||(L=V<ee.value)}else{const V=i.valueAsDate||new Date(w),q=Z=>new Date(new Date().toDateString()+" "+Z),K=i.type=="time",X=i.type=="week";WA(M.value)&&w&&(F=K?q(w)>q(M.value):X?w>M.value:V>new Date(M.value)),WA(ee.value)&&w&&(L=K?q(w)<q(ee.value):X?w<ee.value:V<new Date(ee.value))}if((F||L)&&(P(!!F,M.message,ee.message,Xf.max,Xf.min),!n))return j(k[x].message),k}if((u||d)&&!B&&(WA(w)||s&&Array.isArray(w))){const F=iv(u),L=iv(d),M=!bl(F.value)&&w.length>+F.value,ee=!bl(L.value)&&w.length<+L.value;if((M||ee)&&(P(M,F.message,L.message),!n))return j(k[x].message),k}if(m&&!B&&WA(w)){const{value:F,message:L}=iv(m);if(p4(F)&&!w.match(F)&&(k[x]={type:Xf.pattern,message:L,ref:i,...R(Xf.pattern,L)},!n))return j(L),k}if(g){if(Bd(g)){const F=await g(w,r),L=hJ(F,_);if(L&&(k[x]={...L,...R(Xf.validate,L.message)},!n))return j(L.message),k}else if(Zs(g)){let F={};for(const L in g){if(!gl(F)&&!n)break;const M=hJ(await g[L](w,r),_,L);M&&(F={...M,...R(L,M.message)},j(M.message),n&&(k[x]=F))}if(!gl(F)&&(k[x]={ref:_,...F},!n))return k}}return j(!0),k};const Spt={mode:Lu.onSubmit,reValidateMode:Lu.onChange,shouldFocusError:!0};function kpt(e={}){let t={...Spt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Zs(t.defaultValues)||Zs(t.values)?Ya(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ya(a),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let A={...d};const h={array:oJ(),state:oJ()},m=t.criteriaMode===Lu.all,g=xe=>Oe=>{clearTimeout(u),u=setTimeout(xe,Oe)},x=async xe=>{if(!t.disabled&&(d.isValid||A.isValid||xe)){const Oe=t.resolver?gl((await E()).errors):await B(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},v=(xe,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||A.isValidating||A.validatingFields)&&((xe||Array.from(l.mount)).forEach(Re=>{Re&&(Oe?Fa(r.validatingFields,Re,Oe):$s(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!gl(r.validatingFields)}))},y=(xe,Oe=[],Re,$e,et=!0,ct=!0)=>{if($e&&Re&&!t.disabled){if(i.action=!0,ct&&Array.isArray(cr(n,xe))){const gt=Re(cr(n,xe),$e.argA,$e.argB);et&&Fa(n,xe,gt)}if(ct&&Array.isArray(cr(r.errors,xe))){const gt=Re(cr(r.errors,xe),$e.argA,$e.argB);et&&Fa(r.errors,xe,gt),_pt(r.errors,xe)}if((d.touchedFields||A.touchedFields)&&ct&&Array.isArray(cr(r.touchedFields,xe))){const gt=Re(cr(r.touchedFields,xe),$e.argA,$e.argB);et&&Fa(r.touchedFields,xe,gt)}(d.dirtyFields||A.dirtyFields)&&(r.dirtyFields=My(a,s)),h.state.next({name:xe,isDirty:P(xe,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,xe,Oe)},w=(xe,Oe)=>{Fa(r.errors,xe,Oe),h.state.next({errors:r.errors})},_=xe=>{r.errors=xe,h.state.next({errors:r.errors,isValid:!1})},j=(xe,Oe,Re,$e)=>{const et=cr(n,xe);if(et){const ct=cr(s,xe,Ja(Re)?cr(a,xe):Re);Ja(ct)||$e&&$e.defaultChecked||Oe?Fa(s,xe,Oe?ct:dJ(et._f)):M(xe,ct),i.mount&&x()}},k=(xe,Oe,Re,$e,et)=>{let ct=!1,gt=!1;const It={name:xe};if(!t.disabled){if(!Re||$e){(d.isDirty||A.isDirty)&&(gt=r.isDirty,r.isDirty=It.isDirty=P(),ct=gt!==It.isDirty);const Mt=J0(cr(a,xe),Oe);gt=!!cr(r.dirtyFields,xe),Mt?$s(r.dirtyFields,xe):Fa(r.dirtyFields,xe,!0),It.dirtyFields=r.dirtyFields,ct=ct||(d.dirtyFields||A.dirtyFields)&&gt!==!Mt}if(Re){const Mt=cr(r.touchedFields,xe);Mt||(Fa(r.touchedFields,xe,Re),It.touchedFields=r.touchedFields,ct=ct||(d.touchedFields||A.touchedFields)&&Mt!==Re)}ct&&et&&h.state.next(It)}return ct?It:{}},I=(xe,Oe,Re,$e)=>{const et=cr(r.errors,xe),ct=(d.isValid||A.isValid)&&LA(Oe)&&r.isValid!==Oe;if(t.delayError&&Re?(c=g(()=>w(xe,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,xe,Re):$s(r.errors,xe)),(Re?!J0(et,Re):et)||!gl($e)||ct){const gt={...$e,...ct&&LA(Oe)?{isValid:Oe}:{},errors:r.errors,name:xe};r={...r,...gt},h.state.next(gt)}},E=async xe=>{v(xe,!0);const Oe=await t.resolver(s,t.context,bpt(xe||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(xe),Oe},S=async xe=>{const{errors:Oe}=await E(xe);if(xe)for(const Re of xe){const $e=cr(Oe,Re);$e?Fa(r.errors,Re,$e):$s(r.errors,Re)}else r.errors=Oe;return Oe},B=async(xe,Oe,Re={valid:!0})=>{for(const $e in xe){const et=xe[$e];if(et){const{_f:ct,...gt}=et;if(ct){const It=l.array.has(ct.name),Mt=et._f&&ypt(et._f);Mt&&d.validatingFields&&v([$e],!0);const Pt=await JD(et,l.disabled,s,m,t.shouldUseNativeValidation&&!Oe,It);if(Mt&&d.validatingFields&&v([$e]),Pt[ct.name]&&(Re.valid=!1,Oe))break;!Oe&&(cr(Pt,ct.name)?It?Rfe(r.errors,Pt,ct.name):Fa(r.errors,ct.name,Pt[ct.name]):$s(r.errors,ct.name))}!gl(gt)&&await B(gt,Oe,Re)}}return Re.valid},R=()=>{for(const xe of l.unMount){const Oe=cr(n,xe);Oe&&(Oe._f.refs?Oe._f.refs.every(Re=>!R6(Re)):!R6(Oe._f.ref))&&oe(xe)}l.unMount=new Set},P=(xe,Oe)=>!t.disabled&&(xe&&Oe&&Fa(s,xe,Oe),!J0(Z(),a)),F=(xe,Oe,Re)=>mpt(xe,l,{...i.mount?s:Ja(Oe)?a:WA(xe)?{[xe]:Oe}:Oe},Re,Oe),L=xe=>Lj(cr(i.mount?s:a,xe,t.shouldUnregister?cr(a,xe,[]):[])),M=(xe,Oe,Re={})=>{const $e=cr(n,xe);let et=Oe;if($e){const ct=$e._f;ct&&(!ct.disabled&&Fa(s,xe,Dfe(Oe,ct)),et=h4(ct.ref)&&bl(Oe)?"":Oe,Tfe(ct.ref)?[...ct.ref.options].forEach(gt=>gt.selected=et.includes(gt.value)):ct.refs?UE(ct.ref)?ct.refs.forEach(gt=>{(!gt.defaultChecked||!gt.disabled)&&(Array.isArray(et)?gt.checked=!!et.find(It=>It===gt.value):gt.checked=et===gt.value||!!et)}):ct.refs.forEach(gt=>gt.checked=gt.value===et):bU(ct.ref)?ct.ref.value="":(ct.ref.value=et,ct.ref.type||h.state.next({name:xe,values:Ya(s)})))}(Re.shouldDirty||Re.shouldTouch)&&k(xe,et,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&X(xe)},ee=(xe,Oe,Re)=>{for(const $e in Oe){if(!Oe.hasOwnProperty($e))return;const et=Oe[$e],ct=xe+"."+$e,gt=cr(n,ct);(l.array.has(xe)||Zs(et)||gt&&!gt._f)&&!Yp(et)?ee(ct,et,Re):M(ct,et,Re)}},V=(xe,Oe,Re={})=>{const $e=cr(n,xe),et=l.array.has(xe),ct=Ya(Oe);Fa(s,xe,ct),et?(h.array.next({name:xe,values:Ya(s)}),(d.isDirty||d.dirtyFields||A.isDirty||A.dirtyFields)&&Re.shouldDirty&&h.state.next({name:xe,dirtyFields:My(a,s),isDirty:P(xe,ct)})):$e&&!$e._f&&!bl(ct)?ee(xe,ct,Re):M(xe,ct,Re),YD(xe,l)&&h.state.next({...r,name:xe}),h.state.next({name:i.mount?xe:void 0,values:Ya(s)})},q=async xe=>{i.mount=!0;const Oe=xe.target;let Re=Oe.name,$e=!0;const et=cr(n,Re),ct=Mt=>{$e=Number.isNaN(Mt)||Yp(Mt)&&isNaN(Mt.getTime())||J0(Mt,cr(s,Re,Mt))},gt=Tv(t.mode),It=Tv(t.reValidateMode);if(et){let Mt,Pt;const Qt=Oe.type?dJ(et._f):cpt(xe),wt=xe.type===iJ.BLUR||xe.type===iJ.FOCUS_OUT,Br=!wpt(et._f)&&!t.resolver&&!cr(r.errors,Re)&&!et._f.deps||Npt(wt,cr(r.touchedFields,Re),r.isSubmitted,It,gt),tr=YD(Re,l,wt);Fa(s,Re,Qt),wt?(!Oe||!Oe.readOnly)&&(et._f.onBlur&&et._f.onBlur(xe),c&&c(0)):et._f.onChange&&et._f.onChange(xe);const an=k(Re,Qt,wt),Sr=!gl(an)||tr;if(!wt&&h.state.next({name:Re,type:xe.type,values:Ya(s)}),Br)return(d.isValid||A.isValid)&&(t.mode==="onBlur"?wt&&x():wt||x()),Sr&&h.state.next({name:Re,...tr?{}:an});if(!wt&&tr&&h.state.next({...r}),t.resolver){const{errors:$r}=await E([Re]);if(ct(Qt),$e){const In=fJ(r.errors,n,Re),Pr=fJ($r,n,In.name||Re);Mt=Pr.error,Re=Pr.name,Pt=gl($r)}}else v([Re],!0),Mt=(await JD(et,l.disabled,s,m,t.shouldUseNativeValidation))[Re],v([Re]),ct(Qt),$e&&(Mt?Pt=!1:(d.isValid||A.isValid)&&(Pt=await B(n,!0)));$e&&(et._f.deps&&X(et._f.deps),I(Re,Pt,Mt,an))}},K=(xe,Oe)=>{if(cr(r.errors,Oe)&&xe.focus)return xe.focus(),1},X=async(xe,Oe={})=>{let Re,$e;const et=nc(xe);if(t.resolver){const ct=await S(Ja(xe)?xe:et);Re=gl(ct),$e=xe?!et.some(gt=>cr(ct,gt)):Re}else xe?($e=(await Promise.all(et.map(async ct=>{const gt=cr(n,ct);return await B(gt&&gt._f?{[ct]:gt}:gt)}))).every(Boolean),!(!$e&&!r.isValid)&&x()):$e=Re=await B(n);return h.state.next({...!WA(xe)||(d.isValid||A.isValid)&&Re!==r.isValid?{}:{name:xe},...t.resolver||!xe?{isValid:Re}:{},errors:r.errors}),Oe.shouldFocus&&!$e&&t1(n,K,xe?et:l.mount),$e},Z=xe=>{const Oe={...i.mount?s:a};return Ja(xe)?Oe:WA(xe)?cr(Oe,xe):xe.map(Re=>cr(Oe,Re))},G=(xe,Oe)=>({invalid:!!cr((Oe||r).errors,xe),isDirty:!!cr((Oe||r).dirtyFields,xe),error:cr((Oe||r).errors,xe),isValidating:!!cr(r.validatingFields,xe),isTouched:!!cr((Oe||r).touchedFields,xe)}),D=xe=>{xe&&nc(xe).forEach(Oe=>$s(r.errors,Oe)),h.state.next({errors:xe?r.errors:{}})},U=(xe,Oe,Re)=>{const $e=(cr(n,xe,{_f:{}})._f||{}).ref,et=cr(r.errors,xe)||{},{ref:ct,message:gt,type:It,...Mt}=et;Fa(r.errors,xe,{...Mt,...Oe,ref:$e}),h.state.next({name:xe,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&$e&&$e.focus&&$e.focus()},z=(xe,Oe)=>Bd(xe)?h.state.subscribe({next:Re=>"values"in Re&&xe(F(void 0,Oe),Re)}):F(xe,Oe,!0),J=xe=>h.state.subscribe({next:Oe=>{Cpt(xe.name,Oe.name,xe.exact)&&Ept(Oe,xe.formState||d,Te,xe.reRenderRoot)&&xe.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,re=xe=>(i.mount=!0,A={...A,...xe.formState},J({...xe,formState:A})),oe=(xe,Oe={})=>{for(const Re of xe?nc(xe):l.mount)l.mount.delete(Re),l.array.delete(Re),Oe.keepValue||($s(n,Re),$s(s,Re)),!Oe.keepError&&$s(r.errors,Re),!Oe.keepDirty&&$s(r.dirtyFields,Re),!Oe.keepTouched&&$s(r.touchedFields,Re),!Oe.keepIsValidating&&$s(r.validatingFields,Re),!t.shouldUnregister&&!Oe.keepDefaultValue&&$s(a,Re);h.state.next({values:Ya(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:P()}:{}}),!Oe.keepIsValid&&x()},se=({disabled:xe,name:Oe})=>{(LA(xe)&&i.mount||xe||l.disabled.has(Oe))&&(xe?l.disabled.add(Oe):l.disabled.delete(Oe))},le=(xe,Oe={})=>{let Re=cr(n,xe);const $e=LA(Oe.disabled)||LA(t.disabled);return Fa(n,xe,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:xe}},name:xe,mount:!0,...Oe}}),l.mount.add(xe),Re?se({disabled:LA(Oe.disabled)?Oe.disabled:t.disabled,name:xe}):j(xe,!0,Oe.value),{...$e?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:Uy(Oe.min),max:Uy(Oe.max),minLength:Uy(Oe.minLength),maxLength:Uy(Oe.maxLength),pattern:Uy(Oe.pattern)}:{},name:xe,onChange:q,onBlur:q,ref:et=>{if(et){le(xe,Oe),Re=cr(n,xe);const ct=Ja(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,gt=gpt(ct),It=Re._f.refs||[];if(gt?It.find(Mt=>Mt===ct):ct===Re._f.ref)return;Fa(n,xe,{_f:{...Re._f,...gt?{refs:[...It.filter(R6),ct,...Array.isArray(cr(a,xe))?[{}]:[]],ref:{type:ct.type,name:xe}}:{ref:ct}}}),j(xe,!1,void 0,ct)}else Re=cr(n,xe,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(dpt(l.array,xe)&&i.action)&&l.unMount.add(xe)}}},ue=()=>t.shouldFocusError&&t1(n,K,l.mount),ke=xe=>{LA(xe)&&(h.state.next({disabled:xe}),t1(n,(Oe,Re)=>{const $e=cr(n,Re);$e&&(Oe.disabled=$e._f.disabled||xe,Array.isArray($e._f.refs)&&$e._f.refs.forEach(et=>{et.disabled=$e._f.disabled||xe}))},0,!1))},ae=(xe,Oe)=>async Re=>{let $e;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let et=Ya(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ct,values:gt}=await E();r.errors=ct,et=Ya(gt)}else await B(n);if(l.disabled.size)for(const ct of l.disabled)$s(et,ct);if($s(r.errors,"root"),gl(r.errors)){h.state.next({errors:{}});try{await xe(et,Re)}catch(ct){$e=ct}}else Oe&&await Oe({...r.errors},Re),ue(),setTimeout(ue);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gl(r.errors)&&!$e,submitCount:r.submitCount+1,errors:r.errors}),$e)throw $e},Ne=(xe,Oe={})=>{cr(n,xe)&&(Ja(Oe.defaultValue)?V(xe,Ya(cr(a,xe))):(V(xe,Oe.defaultValue),Fa(a,xe,Ya(Oe.defaultValue))),Oe.keepTouched||$s(r.touchedFields,xe),Oe.keepDirty||($s(r.dirtyFields,xe),r.isDirty=Oe.defaultValue?P(xe,Ya(cr(a,xe))):P()),Oe.keepError||($s(r.errors,xe),d.isValid&&x()),h.state.next({...r}))},je=(xe,Oe={})=>{const Re=xe?Ya(xe):a,$e=Ya(Re),et=gl(xe),ct=et?a:$e;if(Oe.keepDefaultValues||(a=Re),!Oe.keepValues){if(Oe.keepDirtyValues){const gt=new Set([...l.mount,...Object.keys(My(a,s))]);for(const It of Array.from(gt))cr(r.dirtyFields,It)?Fa(ct,It,cr(s,It)):V(It,cr(ct,It))}else{if(xU&&Ja(xe))for(const gt of l.mount){const It=cr(n,gt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(h4(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(Oe.keepFieldsRef)for(const gt of l.mount)V(gt,cr(ct,gt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Ya(a):{}:Ya(ct),h.array.next({values:{...ct}}),h.state.next({values:{...ct}})}l={mount:Oe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:et?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!J0(xe,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:et?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?My(a,s):r.dirtyFields:Oe.keepDefaultValues&&xe?My(a,xe):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(xe,Oe)=>je(Bd(xe)?xe(s):xe,Oe),me=(xe,Oe={})=>{const Re=cr(n,xe),$e=Re&&Re._f;if($e){const et=$e.refs?$e.refs[0]:$e.ref;et.focus&&(et.focus(),Oe.shouldSelect&&Bd(et.select)&&et.select())}},Te=xe=>{r={...r,...xe}},We={control:{register:le,unregister:oe,getFieldState:G,handleSubmit:ae,setError:U,_subscribe:J,_runSchema:E,_focusError:ue,_getWatch:F,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:se,_setErrors:_,_getFieldArray:L,_reset:je,_resetDefaultValues:()=>Bd(t.defaultValues)&&t.defaultValues().then(xe=>{_e(xe,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(xe){i=xe},get _defaultValues(){return a},get _names(){return l},set _names(xe){l=xe},get _formState(){return r},get _options(){return t},set _options(xe){t={...t,...xe}}},subscribe:re,trigger:X,register:le,handleSubmit:ae,watch:z,setValue:V,getValues:Z,reset:_e,resetField:Ne,clearErrors:D,unregister:oe,setError:U,setFocus:me,getFieldState:G};return{...We,formControl:We}}var M0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},L6=(e,t,r={})=>r.shouldFocus||Ja(r.shouldFocus)?r.focusName||`${e}.${Ja(r.focusIndex)?t:r.focusIndex}.`:"",M6=(e,t)=>[...e,...nc(t)],U6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Q6(e,t,r){return[...e.slice(0,t),...nc(r),...e.slice(t)]}var H6=(e,t,r)=>Array.isArray(e)?(Ja(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],V6=(e,t)=>[...nc(t),...nc(e)];function jpt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Lj(n).length?n:[]}var z6=(e,t)=>Ja(t)?[]:jpt(e,nc(t).sort((r,n)=>r-n)),$6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},mJ=(e,t,r)=>(e[t]=r,e);function Bpt(e){const t=fpt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[l,c]=at.useState(r._getFieldArray(n)),u=at.useRef(r._getFieldArray(n).map(M0)),d=at.useRef(l),A=at.useRef(!1);d.current=l,r._names.array.add(n),at.useMemo(()=>i&&r.register(n,i),[r,i,n]),Bfe(()=>r._subjects.array.subscribe({next:({values:k,name:I})=>{if(I===n||!I){const E=cr(k,n);Array.isArray(E)&&(c(E),u.current=E.map(M0))}}}).unsubscribe,[r,n]);const h=at.useCallback(k=>{A.current=!0,r._setFieldArray(n,k)},[r,n]),m=(k,I)=>{const E=nc(Ya(k)),S=M6(r._getFieldArray(n),E);r._names.focus=L6(n,S.length-1,I),u.current=M6(u.current,E.map(M0)),h(S),c(S),r._setFieldArray(n,S,M6,{argA:U6(k)})},g=(k,I)=>{const E=nc(Ya(k)),S=V6(r._getFieldArray(n),E);r._names.focus=L6(n,0,I),u.current=V6(u.current,E.map(M0)),h(S),c(S),r._setFieldArray(n,S,V6,{argA:U6(k)})},x=k=>{const I=z6(r._getFieldArray(n),k);u.current=z6(u.current,k),h(I),c(I),!Array.isArray(cr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,I,z6,{argA:k})},v=(k,I,E)=>{const S=nc(Ya(I)),B=Q6(r._getFieldArray(n),k,S);r._names.focus=L6(n,k,E),u.current=Q6(u.current,k,S.map(M0)),h(B),c(B),r._setFieldArray(n,B,Q6,{argA:k,argB:U6(I)})},y=(k,I)=>{const E=r._getFieldArray(n);$6(E,k,I),$6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,$6,{argA:k,argB:I},!1)},w=(k,I)=>{const E=r._getFieldArray(n);H6(E,k,I),H6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,H6,{argA:k,argB:I},!1)},_=(k,I)=>{const E=Ya(I),S=mJ(r._getFieldArray(n),k,E);u.current=[...S].map((B,R)=>!B||R===k?M0():u.current[R]),h(S),c([...S]),r._setFieldArray(n,S,mJ,{argA:k,argB:E},!0,!1)},j=k=>{const I=nc(Ya(k));u.current=I.map(M0),h([...I]),c([...I]),r._setFieldArray(n,[...I],E=>E,{},!0,!1)};return at.useEffect(()=>{if(r._state.action=!1,YD(n,r._names)&&r._subjects.state.next({...r._formState}),A.current&&(!Tv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Tv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const I=cr(k.errors,n),E=cr(r._formState.errors,n);(E?!I&&E.type||I&&(E.type!==I.type||E.message!==I.message):I&&I.type)&&(I?Fa(r._formState.errors,n,I):$s(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=cr(r._fields,n);k&&k._f&&!(Tv(r._options.reValidateMode).isOnSubmit&&Tv(r._options.mode).isOnSubmit)&&JD(k,r._names.disabled,r._formValues,r._options.criteriaMode===Lu.all,r._options.shouldUseNativeValidation,!0).then(I=>!gl(I)&&r._subjects.state.next({errors:Rfe(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:Ya(r._formValues)}),r._names.focus&&t1(r._fields,(k,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),A.current=!1},[l,n,r]),at.useEffect(()=>(!cr(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(I,E)=>{const S=cr(r._fields,I);S&&S._f&&(S._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):k(n,!1)}),[n,r,a,s]),{swap:at.useCallback(y,[h,n,r]),move:at.useCallback(w,[h,n,r]),prepend:at.useCallback(g,[h,n,r]),append:at.useCallback(m,[h,n,r]),remove:at.useCallback(x,[h,n,r]),insert:at.useCallback(v,[h,n,r]),update:at.useCallback(_,[h,n,r]),replace:at.useCallback(j,[h,n,r]),fields:at.useMemo(()=>l.map((k,I)=>({...k,[a]:u.current[I]||M0()})),[l,a])}}function Tpt(e={}){const t=at.useRef(void 0),r=at.useRef(void 0),[n,a]=at.useState({isDirty:!1,isValidating:!1,isLoading:Bd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Bd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=kpt(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,Bfe(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,i},[s]),at.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),at.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),at.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),at.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),at.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),at.useEffect(()=>{e.values&&!J0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),at.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=hpt(n,s),t.current}const ZD=vt(wr,"alternancias");async function Ipt(e){return(await hn(ZD,{...e,createdAt:Fs(),updatedAt:Fs()})).id}async function Fpt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=$t(ZD,pr("createdAt","desc"),Rd(t));e&&(n=$t(ZD,Ir("especialidad","==",e),pr("createdAt","desc"),Rd(t))),r&&(n=$t(n,ite(r)));const a=await Dn(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Opt(e,t){const r=sr(wr,"alternancias",e);await cc(r,{...t,updatedAt:Fs()})}async function Dpt(e){const t=sr(wr,"alternancias",e);await Ra(t)}async function Ppt(e,t,r){const n=vt(wr,"alternancias",e,t);await hn(n,{...r,createdAt:Fs()})}async function Rpt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=aE(mR,r);await AR(n,t);const a=await J4(n);return await Ppt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Sp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return o.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),o.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},IA=({children:e,hint:t})=>o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&o.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),m5=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},kp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return o.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},Lpt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,i]=C.useState(!1),{register:l,control:c,handleSubmit:u,reset:d,watch:A,setValue:h,formState:{isSubmitting:m}}=Tpt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=Bpt({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],v=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!v||x.some(M=>v.includes(M))))return o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[o.jsx(aNe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=M=>(M||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),_=(M,ee)=>{var V;return!M||!ee?[]:((V=K2e[M])==null?void 0:V[ee])??[]},j=A("especialidad"),k=A("modulos")||[],I=C.useMemo(()=>j?z2e[j]??[]:[],[j]),E=C.useMemo(()=>j?G2e[j]??[]:[],[j]);C.useEffect(()=>{h("curso",[]),h("modulos",[]);const M=[...A("actividades")||[]].map(ee=>({...ee,modulo:"",oa:""}));h("actividades",M)},[j]),C.useEffect(()=>{const M=[...A("actividades")||[]].map(ee=>ee.modulo&&!k.includes(ee.modulo)?{...ee,modulo:"",oa:""}:ee);h("actividades",M)},[k]);const S=async()=>{i(!0);const{items:M}=await Fpt({});r(M),i(!1)};C.useEffect(()=>{S()},[]);const B=async M=>{n?await Opt(n,{...M}):await Ipt({...M,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await S()},R=M=>{const ee=Array.isArray(M.curso)?M.curso:M.curso?[M.curso]:[],V=Array.isArray(M.modulos)?M.modulos.map(K=>w(K)):[],q=Array.isArray(M.actividades)?M.actividades.map(K=>({...K,modulo:K!=null&&K.modulo?w(K.modulo):"",oa:(K==null?void 0:K.oa)||""})):[];d({...M,curso:ee,modulos:V,actividades:q}),a(M.id),window.scrollTo({top:0,behavior:"smooth"})},P=async M=>{confirm("¿Eliminar esta alternancia?")&&(await Dpt(M),await S())},F=async(M,ee)=>{await Rpt(M,ee),alert("Evidencia subida correctamente")},L=M=>{const ee=Array.from(M.currentTarget.selectedOptions).map(V=>V.value);h("curso",ee,{shouldDirty:!0})};return o.jsxs("div",{className:"p-4 md:p-6",children:[o.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:o.jsx(I_,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),o.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(kp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[o.jsx(wg,{className:"w-4 h-4"}),"Limpiar"]}),o.jsxs(kp,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?o.jsx(el,{className:"w-4 h-4 animate-spin"}):o.jsx($d,{className:"w-4 h-4"}),"Guardar"]})]})]})}),o.jsx(Sp,{title:"Planes guardados",icon:o.jsx(bg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?o.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[o.jsx(el,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?o.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(M=>o.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[o.jsx(Lv,{className:"w-4 h-4 text-indigo-600"}),M.especialidad]}),o.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[o.jsx(m5,{tone:"indigo",children:Array.isArray(M.curso)?M.curso.join(", "):M.curso}),o.jsx(m5,{tone:"sky",children:M.institucion}),(Array.isArray(M.tipoAlternancia)?M.tipoAlternancia:[]).slice(0,2).map(ee=>o.jsx(m5,{tone:"emerald",children:ee},ee))]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[o.jsx(rb,{className:"w-4 h-4"}),o.jsx("input",{type:"file",className:"hidden",onChange:ee=>ee.target.files&&F(M.id,ee.target.files[0])}),"Evidencia"]}),o.jsxs(kp,{title:"Editar",onClick:()=>R(M),children:[o.jsx(NF,{className:"w-4 h-4"})," Editar"]}),o.jsxs(kp,{title:"Eliminar",onClick:()=>P(M.id),tone:"danger",children:[o.jsx(vi,{className:"w-4 h-4"})," Eliminar"]})]})]})},M.id))})}),o.jsxs("form",{onSubmit:u(B),className:"mt-6 space-y-5",children:[o.jsx(Sp,{title:"Contexto de la Alternancia",icon:o.jsx(F_,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(IA,{children:"Especialidad"}),o.jsxs("div",{className:"relative",children:[o.jsx(Lv,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsxs("select",{...l("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[o.jsx("option",{value:"",children:"Selecciona…"}),H2e.map(M=>o.jsx("option",{value:M,children:M},M))]})]})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Institución"}),o.jsxs("div",{className:"relative",children:[o.jsx(F_,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsxs("select",{...l("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[o.jsx("option",{value:"",children:"Selecciona…"}),V2e.map(M=>o.jsx("option",{value:M,children:M},M))]})]})]}),o.jsxs("div",{children:[o.jsx(IA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),o.jsxs("div",{className:"relative",children:[o.jsx(_l,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsx("select",{multiple:!0,size:4,...l("curso"),onChange:L,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!j,children:j?I.map(M=>o.jsx("option",{value:M,children:M},M)):o.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(A("curso")||[]).map(M=>o.jsx(m5,{tone:"sky",children:M},M))})]})]})}),o.jsx(Sp,{title:"Módulos implicados",icon:o.jsx(vR,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:j?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(M=>o.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[o.jsx("input",{type:"checkbox",value:M,className:"mt-1 accent-emerald-600",...l("modulos")}),o.jsx("span",{className:"text-sm text-slate-700",children:M})]},M))}):o.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),o.jsx(Sp,{title:"Tipo de Alternancia",icon:o.jsx(bw,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:o.jsx("div",{className:"flex gap-3 flex-wrap",children:$2e.map(M=>o.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[o.jsx("input",{type:"checkbox",value:M,className:"accent-amber-600",...l("tipoAlternancia")}),o.jsx("span",{className:"text-slate-700",children:M})]},M))})}),o.jsx(Sp,{title:"Fundamentación técnico‑pedagógica",icon:o.jsx(uEe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:o.jsx("textarea",{...l("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),o.jsx(Sp,{title:"Plan de actividades",icon:o.jsx(bg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:o.jsxs("div",{className:"space-y-3",children:[g.fields.map((M,ee)=>{const V=A(`actividades.${ee}.modulo`)||"",q=_(j,V);return o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Fecha"}),o.jsx(ac,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{type:"date",placeholder:"Fecha",...l(`actividades.${ee}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Tipo"}),o.jsx("input",{placeholder:"Pasantía, visita, taller...",...l(`actividades.${ee}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Actividad"}),o.jsx("input",{placeholder:"Descripción breve",...l(`actividades.${ee}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Lugar"}),o.jsx(D_,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...l(`actividades.${ee}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Evidencias"}),o.jsx(WEe,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...l(`actividades.${ee}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx(IA,{children:"Módulo"}),o.jsxs("select",{...l(`actividades.${ee}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!j||k.length===0,children:[o.jsx("option",{value:"",children:!j&&"Elige especialidad arriba"||k.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),k.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Objetivo de Aprendizaje (OA)"}),o.jsxs("select",{...l(`actividades.${ee}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||q.length===0,children:[o.jsx("option",{value:"",children:V?q.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),q.map(K=>o.jsx("option",{value:K,children:K},K))]})]})]}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsxs(kp,{title:"Eliminar fila",onClick:()=>g.remove(ee),tone:"danger",children:[o.jsx(vi,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},M.id)}),o.jsxs(kp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[o.jsx(Nl,{className:"w-4 h-4"})," Agregar actividad"]})]})}),o.jsx(Sp,{title:"Análisis Curricular",icon:o.jsx(Lv,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:o.jsx("textarea",{...l("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),o.jsx("div",{className:"flex items-center justify-end gap-2",children:o.jsxs(kp,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?o.jsx(el,{className:"w-4 h-4 animate-spin"}):o.jsx(Ti,{className:"w-4 h-4"}),"Guardar"]})})]})]})},eP=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],Mpt={INCIPIENTE:25},Upt=["AULA","TALLER","EMPRESA"],pJ={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Qpt="tp_especialidades",Hpt="tp_modulos",Vpt="tp_resultados_aprendizaje",zpt="tp_criterios_evaluacion",tP="tp_rubricas",Lfe="tp_evidencias",Mfe="tp_evaluaciones_comp",rP="config_evaluacion/competencias",gJ=()=>Date.now(),Ufe=async()=>{const e=await zg(sr(wr,rP));return e.exists()?e.data():(await yi(sr(wr,rP),pJ),pJ)},$pt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const i=(s-r)/(a-0||1);return Number((r+i*(e-0)).toFixed(1))}else{const i=(n-s)/(100-a||1);return Number((s+i*(e-a)).toFixed(1))}},Gpt=async(e,t)=>{const r=await Ufe();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??Mpt.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,i=$pt(s,r);return{puntajeTotal:n,porcentaje:s,nota:i}},Kpt=e=>{const t=$t(vt(wr,Qpt),pr("nombre"));return fr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},qpt=async e=>{const t=$t(vt(wr,Hpt),Ir("especialidadId","==",e),pr("nombre"));return(await Dn(t)).docs.map(n=>({id:n.id,...n.data()}))},Wpt=async e=>{const t=$t(vt(wr,Vpt),Ir("moduloId","==",e),pr("codigo"));return(await Dn(t)).docs.map(n=>({id:n.id,...n.data()}))},Xpt=async e=>{const t=$t(vt(wr,zpt),Ir("raId","==",e),pr("codigo"));return(await Dn(t)).docs.map(n=>({id:n.id,...n.data()}))},Ypt=async e=>e.id?(await cc(sr(wr,tP,e.id),{...e,updatedAt:gJ()}),e.id):(await hn(vt(wr,tP),{...e,updatedAt:gJ()})).id,Qfe=async e=>{const t=$t(vt(wr,tP),Ir("raId","==",e)),n=(await Dn(t)).docs[0];return n?{id:n.id,...n.data()}:null},Jpt=async(e,t)=>{const r=aE(mR,t),n=await AR(r,e);return{url:await J4(n.ref),path:n.ref.fullPath}},Zpt=e=>hn(vt(wr,Lfe),e),egt=(e,t)=>{const r=$t(vt(wr,Lfe),Ir("raId","==",e),pr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},tgt=async e=>{const t=await Qfe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await Gpt(e.ceIdScores,r);return hn(vt(wr,Mfe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},rgt=(e,t)=>{const r=$t(vt(wr,Mfe),Ir("raId","==",e),pr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},ngt=async e=>{const t=await Ufe();await yi(sr(wr,rP),{...t,...e},{merge:!0})},agt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,i]=C.useState(null);if(C.useEffect(()=>{i(e?r??{id:"",raId:e,niveles:eP,descriptores:[],ponderacionCE:Object.fromEntries(t.map(A=>[A.id,A.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return o.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const l=(A,h)=>{i(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[A]:h}})},c=(A,h,m)=>{i(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===A&&v.nivel===h));return{...g,descriptores:[...x,{ceId:A,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=C.useMemo(()=>Object.values(s.ponderacionCE).reduce((A,h)=>A+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const A=await Ypt(s);n==null||n(A)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),o.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),o.jsx("div",{className:"space-y-4",children:t.map(A=>o.jsxs("div",{className:"border rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-semibold text-slate-800",children:[A.codigo," — ",A.descriptor]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",A.evidenciaEsperada||"—"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),o.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[A.id]??0,onChange:h=>l(A.id,Number(h.target.value))}),o.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:eP.map(h=>{const m=s.descriptores.find(g=>g.ceId===A.id&&g.nivel===h);return o.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[o.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),o.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(A.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},A.id))}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[o.jsx($d,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar rúbrica"})]})})]})},sgt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=C.useState(""),[s,i]=C.useState(""),[l,c]=C.useState("AULA"),[u,d]=C.useState(null),[A,h]=C.useState(""),[m,g]=C.useState(!1);if(!e)return o.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:_}=await Jpt(u,y);await Zpt({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:igt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:A,storagePath:_}),d(null),h(""),a(""),i("")}finally{g(!1)}}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[o.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),o.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>i(v.target.value)}),o.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[o.jsx("option",{value:"AULA",children:"AULA"}),o.jsx("option",{value:"TALLER",children:"TALLER"}),o.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),o.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),o.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:A,onChange:v=>h(v.target.value)}),o.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[o.jsx(rb,{className:"w-4 h-4"}),o.jsx("span",{children:"Subir evidencia"})]}),o.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>o.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[ogt(v.tipo),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),o.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&o.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},igt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},ogt=e=>{switch(e){case"imagen":return o.jsx(fCe,{className:"w-5 h-5 text-rose-600"});case"video":return o.jsx(ZEe,{className:"w-5 h-5 text-indigo-600"});case"documento":return o.jsx(Ld,{className:"w-5 h-5 text-emerald-600"});default:return o.jsx(rb,{className:"w-5 h-5 text-slate-500"})}},xJ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],lgt=({raId:e})=>{const[t,r]=C.useState([]);if(C.useEffect(()=>{if(!e){r([]);return}const i=rgt(e,r);return()=>i()},[e]),!e)return o.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=C.useMemo(()=>{const i={};return t.forEach(l=>{const c=l.curso||"—";i[c]||(i[c]={curso:c,promedio:0,n:0}),i[c].promedio+=l.nota,i[c].n+=1}),Object.values(i).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=C.useMemo(()=>{const i={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?i["1.0-3.9"]++:l.nota<5?i["4.0-4.9"]++:l.nota<6?i["5.0-5.9"]++:i["6.0-7.0"]++}),Object.entries(i).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const i=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ii.book_new(),c=Ii.json_to_sheet(i);Ii.book_append_sheet(l,c,"Evaluaciones_RA"),mE(l,`evaluaciones_${e}.xlsx`)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),o.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[o.jsx(km,{className:"w-4 h-4"}),o.jsx("span",{children:"Descargar CSV"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{className:"h-72 border rounded-xl p-3",children:o.jsx(lh,{width:"100%",height:"100%",children:o.jsxs(k2,{data:n,children:[o.jsx(Fg,{dataKey:"curso"}),o.jsx(Og,{domain:[1,7]}),o.jsx(oh,{}),o.jsx(B1,{dataKey:"promedio"})]})})}),o.jsx("div",{className:"h-72 border rounded-xl p-3",children:o.jsx(lh,{width:"100%",height:"100%",children:o.jsxs(pM,{children:[o.jsx(qk,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((i,l)=>o.jsx(Dm,{fill:xJ[l%xJ.length]},`c-${l}`))}),o.jsx(oh,{}),o.jsx(lb,{})]})})})]}),o.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Qy=({active:e,onClick:t,icon:r,label:n})=>o.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,o.jsx("span",{className:"font-medium",children:n})]}),ov=({children:e,className:t})=>o.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),cgt=({currentUser:e})=>{const[t,r]=C.useState("planificacion"),[n,a]=C.useState([]),[s,i]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState([]),[A,h]=C.useState({}),[m,g]=C.useState(null),[x,v]=C.useState([]);C.useEffect(()=>{const w=Kpt(a);return()=>w()},[]),C.useEffect(()=>{A.especialidadId?qpt(A.especialidadId).then(i):i([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[A.especialidadId]),C.useEffect(()=>{A.moduloId?Wpt(A.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[A.moduloId]),C.useEffect(()=>{if(A.raId){Xpt(A.raId).then(d),Qfe(A.raId).then(g);const w=egt(A.raId,v);return()=>w()}else d([]),g(null),v([])},[A.raId]);const y=A.raId&&u.length>0;return o.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(vR,{className:"w-6 h-6 text-indigo-600"}),o.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qy,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:o.jsx(bg,{className:"w-4 h-4"}),label:"Planificar"}),o.jsx(Qy,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:o.jsx(XCe,{className:"w-4 h-4"}),label:"Evaluar"}),o.jsx(Qy,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:o.jsx(rb,{className:"w-4 h-4"}),label:"Evidencias"}),o.jsx(Qy,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:o.jsx(Mu,{className:"w-4 h-4"}),label:"Dashboard"}),o.jsx(Qy,{active:t==="config",onClick:()=>r("config"),icon:o.jsx(rNe,{className:"w-4 h-4"}),label:"Config"})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[o.jsx(ov,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:A.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>o.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:A.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>o.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:A.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),l.map(w=>o.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&o.jsx(ov,{children:o.jsx(agt,{raId:A.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&o.jsxs(ov,{children:[!y&&o.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&o.jsx(ugt,{raId:A.raId,ces:u,currentUser:e})]}),t==="evidencias"&&o.jsx(ov,{children:o.jsx(sgt,{raId:A.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&o.jsx(ov,{children:o.jsx(lgt,{raId:A.raId})}),t==="config"&&o.jsx(ov,{children:o.jsx(dgt,{})})]})]})},ugt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=C.useState(""),[s,i]=C.useState(r.curso||""),[l,c]=C.useState("AULA"),[u,d]=C.useState(""),[A,h]=C.useState({}),m=(v,y,w)=>{h(_=>({..._,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(A).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:A,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await tgt(v),d(""),h({}),a("")};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),o.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),o.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>i(v.target.value),placeholder:"p.ej. 3ºB"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),o.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:Upt.map(v=>o.jsx("option",{value:v,children:v},v))})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[o.jsx(Ti,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar evaluación"})]})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>o.jsxs("div",{className:"border rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),o.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:eP.map(y=>{var w;return o.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=A[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),o.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},dgt=()=>{const[e,t]=C.useState(60),[r,n]=C.useState(4),a=async()=>{await ngt({porcentajeAprobacion:e,notaAprobacion:r})};return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),o.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),o.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),o.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},Agt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},fgt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const l=e.profile,c=C.useMemo(()=>{const j=M2e[l]||[];return l!==Yt.ESTUDIANTE?j:j.filter(k=>{if(k.name==="Asistencia a Empresa"){const I=Agt(e.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=C.useState(null),[A,h]=C.useState(!1),[m,g]=C.useState(!1),x=C.useRef([]);C.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const v=C.useCallback(j=>{d(j),window.innerWidth<768&&h(!1)},[]),y=C.useCallback(j=>{const k=c.find(I=>I.name===j);k&&v(k)},[c,v]),w=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:o.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:o.jsx(E2e,{className:"w-5 h-5"})})}),!m&&o.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),o.jsx("button",{type:"button",onClick:()=>g(j=>!j),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?o.jsx(gR,{className:"w-5 h-5 text-slate-200"}):o.jsx(e2,{className:"w-5 h-5 text-slate-200"})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:j=>{var I,E,S;const k=x.current.findIndex(B=>B===document.activeElement);if(j.key==="ArrowDown"){j.preventDefault();const B=Math.min(k===-1?0:k+1,x.current.length-1);(I=x.current[B])==null||I.focus()}else if(j.key==="ArrowUp"){j.preventDefault();const B=Math.max(k===-1?0:k-1,0);(E=x.current[B])==null||E.focus()}else j.key==="Enter"&&k>=0&&((S=x.current[k])==null||S.click())},children:o.jsx("div",{className:"space-y-1",children:c.map((j,k)=>{const I=(u==null?void 0:u.name)===j.name;return o.jsxs("button",{ref:E=>x.current[k]=E,onClick:()=>v(j),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${I?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?j.name:void 0,children:[o.jsx("span",{className:`shrink-0 ${I?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),!m&&o.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:j.name})]},j.name)})})})]}),_=()=>{if(!u)return o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return o.jsx(GXe,{profile:l});if(u.name==="Muro de Anuncios")return o.jsx(YXe,{currentUser:e});if(u.name==="Mensajería Interna")return o.jsx(Att,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return o.jsx(sYe,{});if(u.name==="Desarrollo Profesional")return o.jsx(lpt,{currentUser:e});if(l===Yt.SUBDIRECCION){if(u.name==="Dashboard")return o.jsx(s5e,{currentUser:e});if(u.name==="Administración")return o.jsx(oZe,{});if(u.name==="Seguimiento Curricular")return o.jsx(Zlt,{currentUser:e});if(u.name==="Acompañamiento docente")return o.jsx(att,{currentUser:e});if(u.name==="Análisis Taxonómico")return o.jsx(sct,{currentUser:e});if(u.name==="Interdisciplinario")return o.jsx(CW,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return o.jsx(e5e,{currentUser:e});if(u.name==="Crear horarios")return o.jsx(hOe,{});if(u.name==="Seguimiento de acciones pedagógicas")return o.jsx(VWe,{});if(u.name==="Inclusión")return o.jsx(vW,{currentUser:e})}if(l===Yt.PROFESORADO){if(u.name==="Planificación")return o.jsx(LXe,{currentUser:e});if(u.name==="Mis Acompañamientos")return o.jsx(Ilt,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return o.jsx(xlt,{});if(u.name==="Análisis Taxonómico")return o.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return o.jsx(CW,{});if(u.name==="Inclusión")return o.jsx(vW,{currentUser:e});if(u.name==="Actividades Remotas")return o.jsx(RZe,{});if(u.name==="Evaluación de Aprendizajes")return o.jsx(aZe,{});if(u.name==="Evaluaciones Formativas")return o.jsx(Met,{currentUser:e});if(u.name==="Evaluación de Competencias")return o.jsx(cgt,{currentUser:e})}if(l===Yt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return o.jsx(gZe,{});if(u.name==="Asistencia Dual")return o.jsx(wet,{});if(u.name==="Pañol")return o.jsx(Ftt,{});if(u.name==="Gestión de Empresas")return o.jsx(Hmt,{});if(u.name==="Alternancia TP")return o.jsx(Lpt,{})}if(l===Yt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return o.jsx(JZe,{currentUser:e});if(u.name==="Evaluación Formativa")return o.jsx(Nlt,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return o.jsx(Blt,{currentUser:e});if(u.name==="Asistencia a Empresa")return o.jsx(het,{currentUser:e})}return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),o.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:o.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",o.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return o.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[o.jsx(ONe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(j=>!j),unreadMessagesCount:s,refreshUnreadCount:i}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[A&&o.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),o.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${A?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:o.jsx(w,{})}),o.jsx("main",{className:"flex-1 overflow-y-auto",children:o.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:o.jsx(FCe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&o.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),o.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),o.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},hgt=({onSelectProfile:e,isAdminView:t=!1})=>o.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[o.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),o.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),o.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(pR,{})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),o.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:L2e.map(r=>o.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[o.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),o.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),o.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),o.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),mgt=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(null),[a,s]=C.useState(!0),[i,l]=C.useState(null),[c,u]=C.useState(!1),[d,A]=C.useState(null);C.useEffect(()=>{const w=xZ(Kg,async _=>{if(t(_),_)try{const j=await Dte(_.email);j?(n(j),j.profile===Yt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await mB())}catch{l("Error al conectar con la base de datos."),await mB()}else n(null),A(null),u(!1),l(null);s(!1)});return()=>w()},[]);const h=async(w,_)=>{if(l(null),!w.trim()||!_.trim()){l("Por favor ingrese email y contraseña");return}try{await v2e(w.trim(),_)}catch(j){switch(j.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},m=async w=>{try{await b2e(w)}catch(_){console.error("Error al enviar email de recuperación:",_)}},g=w=>{A(w),u(!1)},x=()=>{u(!0),A(null)},v=async()=>{try{await mB()}catch(w){console.error("Error al cerrar sesión:",w)}};if(a)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(pR,{})}),o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return o.jsx(q2e,{onLoginAttempt:h,onForgotPasswordRequest:m,error:i});if(c&&r.profile===Yt.SUBDIRECCION)return o.jsx(hgt,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return o.jsx(fgt,{currentUser:{...r,profile:y},onLogout:v,onChangeProfile:r.profile===Yt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Yt.SUBDIRECCION})},pgt=()=>{const e=jJ(),t=Qm(),[r,n]=C.useState("procesando"),[a,s]=C.useState("Procesando la autorización...");return C.useEffect(()=>{const i=new URLSearchParams(t.search),l=i.get("auth"),c=i.get("userId");if(l==="success"&&c)n("exitoso"),s("¡Autorización completada con éxito! Redireccionando..."),setTimeout(()=>{e("/materialesDidacticos")},2e3);else{n("error");const u=i.get("error")||"Error desconocido en la autorización";s(`Error: ${u}`)}},[t,e]),o.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-slate-900 p-4",children:o.jsxs("div",{className:"w-full max-w-md p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg",children:[o.jsx("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-800 dark:text-white",children:"Autorización Google Slides"}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r==="procesando"&&o.jsx(el,{className:"w-8 h-8 text-indigo-500 animate-spin"}),r==="exitoso"&&o.jsx("div",{className:"text-green-500 text-lg",children:"✅"}),r==="error"&&o.jsx("div",{className:"text-red-500 text-lg",children:"❌"}),o.jsx("p",{className:`text-center ${r==="error"?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:a}),r==="error"&&o.jsx("button",{onClick:()=>e("/materialesDidacticos"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Volver a Materiales Didácticos"})]})]})})},Hfe=document.getElementById("root");if(!Hfe)throw new Error("Could not find root element to mount to");const ggt=s0e.createRoot(Hfe);ggt.render(o.jsx(at.StrictMode,{children:o.jsx(xme,{children:o.jsxs(W0e,{children:[o.jsx(K6,{path:"/auth/callback",element:o.jsx(pgt,{})}),o.jsx(K6,{path:"*",element:o.jsx(mgt,{})})]})})}));export{el as L,at as R,ga as _,Vt as a,qhe as b,vgt as c,jl as g,o as j,C as r};
